// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.21/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/interactive/snapping/SnappingOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Collection ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ./FeatureSnappingLayerSource ./Settings".split(" "),function(f,c,b,z,w,L,T,W,Q,H,x){b=function(n){function d(e){e=n.call(this,
e)||this;e.enabled=!1;e.enabledToggled=!1;e.selfEnabled=!0;e.featureEnabled=!0;e.featureSources=new z;e.distance=x.defaults.distance;e.touchSensitivityMultiplier=x.defaults.touchSensitivityMultiplier;return e}f._inheritsLoose(d,n);f._createClass(d,[{key:"effectiveEnabled",get:function(){return this.enabledToggled?!this.enabled:this.enabled}},{key:"effectiveSelfEnabled",get:function(){return this.effectiveEnabled&&this.selfEnabled}},{key:"effectiveFeatureEnabled",get:function(){return this.effectiveEnabled&&
this.featureEnabled}}]);return d}(b);c.__decorate([w.property()],b.prototype,"enabled",void 0);c.__decorate([w.property()],b.prototype,"enabledToggled",void 0);c.__decorate([w.property()],b.prototype,"selfEnabled",void 0);c.__decorate([w.property()],b.prototype,"featureEnabled",void 0);c.__decorate([w.property({type:z.ofType(H)})],b.prototype,"featureSources",void 0);c.__decorate([w.property()],b.prototype,"distance",void 0);c.__decorate([w.property()],b.prototype,"touchSensitivityMultiplier",void 0);
c.__decorate([w.property({readOnly:!0})],b.prototype,"effectiveEnabled",null);c.__decorate([w.property({readOnly:!0})],b.prototype,"effectiveSelfEnabled",null);c.__decorate([w.property({readOnly:!0})],b.prototype,"effectiveFeatureEnabled",null);return b=c.__decorate([Q.subclass("esri.views.interactive.snapping.SnappingOptions")],b)})},"esri/views/interactive/snapping/FeatureSnappingLayerSource":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass".split(" "),
function(f,c,b,z,w,L,T,W){b=function(Q){function H(x){x=Q.call(this,x)||this;x.layer=null;x.enabled=!0;x.updating=!1;x.availability=1;return x}f._inheritsLoose(H,Q);return H}(b);c.__decorate([z.property({constructOnly:!0})],b.prototype,"layer",void 0);c.__decorate([z.property()],b.prototype,"enabled",void 0);c.__decorate([z.property()],b.prototype,"updating",void 0);c.__decorate([z.property()],b.prototype,"availability",void 0);return b=c.__decorate([W.subclass("esri.views.interactive.snapping.SnappingLayerSource")],
b)})},"esri/views/interactive/snapping/Settings":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Color ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/subclass".split(" "),function(f,c,b,z,w,L,T){let W=function(Q){function H(){var x=Q.apply(this,arguments)||this;x.enabled=!0;return x}c._inheritsLoose(H,Q);return H}(w.JSONSupport);b.__decorate([L.property({type:Boolean})],W.prototype,
"enabled",void 0);W=b.__decorate([T.subclass("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],W);w=function(Q){function H(x){x=Q.call(this,x)||this;x.lineSnapper=new W;x.parallelLineSnapper=new W;x.rightAngleSnapper=new W;x.rightAngleTriangleSnapper=new W;x.shortLineThreshold=15;x.distance=5;x.pointThreshold=1E-6;x.intersectionParallelLineThreshold=1E-6;x.parallelLineThreshold=1E-6;x.touchSensitivityMultiplier=1.5;x.pointOnLineThreshold=1E-6;x.orange=new z([255,127,0]);x.lineHintWidthReference=
3;x.lineHintWidthTarget=3;x.lineHintFadedExtensions=.3;x.parallelLineHintWidth=2;x.parallelLineHintLength=24;x.parallelLineHintOffset=1.5;x.rightAngleHintSize=24;x.rightAngleHintOutlineSize=1.5;return x}c._inheritsLoose(H,Q);return H}(w.JSONSupport);b.__decorate([L.property({type:W,constructOnly:!0,nonNullable:!0,json:{write:!0}})],w.prototype,"lineSnapper",void 0);b.__decorate([L.property({type:W,constructOnly:!0,nonNullable:!0,json:{write:!0}})],w.prototype,"parallelLineSnapper",void 0);b.__decorate([L.property({type:W,
constructOnly:!0,nonNullable:!0,json:{write:!0}})],w.prototype,"rightAngleSnapper",void 0);b.__decorate([L.property({type:W,constructOnly:!0,nonNullable:!0,json:{write:!0}})],w.prototype,"rightAngleTriangleSnapper",void 0);b.__decorate([L.property({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],w.prototype,"shortLineThreshold",void 0);b.__decorate([L.property({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],w.prototype,"distance",void 0);b.__decorate([L.property({type:Number,
nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],w.prototype,"pointThreshold",void 0);b.__decorate([L.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],w.prototype,"intersectionParallelLineThreshold",void 0);b.__decorate([L.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],w.prototype,"parallelLineThreshold",void 0);b.__decorate([L.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],w.prototype,"touchSensitivityMultiplier",
void 0);b.__decorate([L.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],w.prototype,"pointOnLineThreshold",void 0);b.__decorate([L.property({type:z,nonNullable:!0})],w.prototype,"orange",void 0);b.__decorate([L.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],w.prototype,"lineHintWidthReference",void 0);b.__decorate([L.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],w.prototype,"lineHintWidthTarget",void 0);b.__decorate([L.property({type:Number,
nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],w.prototype,"lineHintFadedExtensions",void 0);b.__decorate([L.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],w.prototype,"parallelLineHintWidth",void 0);b.__decorate([L.property({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],w.prototype,"parallelLineHintLength",void 0);b.__decorate([L.property({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],w.prototype,"parallelLineHintOffset",
void 0);b.__decorate([L.property({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],w.prototype,"rightAngleHintSize",void 0);b.__decorate([L.property({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],w.prototype,"rightAngleHintOutlineSize",void 0);w=b.__decorate([T.subclass("esri.views.interactive.snapping.Settings.Defaults")],w);b=new w;f.defaults=b;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/widgets/Attachments":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/unitFormatUtils ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/has ../core/accessorSupport/decorators/cast ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Attachments/AttachmentsViewModel ./Attachments/support/attachmentUtils ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory".split(" "),
function(f,c,b,z,w,L,T,W,Q,H,x,n,d,e,g,p,C){const q={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},k=window.CSS;T=function(A){function F(l,M){l=A.call(this,l,M)||this;l.abilities=null;l.displayType="list";l.graphic=null;l.label=void 0;l.messages=null;l.messagesUnits=null;l.selectedFile=null;l.submitting=!1;l.viewModel=new d;l.visibleElements={...q};l._supportsImageOrientation=k&&k.supports&&k.supports("image-orientation",
"from-image");l._addAttachmentForm=null;l._updateAttachmentForm=null;return l}f._inheritsLoose(F,A);var u=F.prototype;u.initialize=function(){this.own(w.on(this,"viewModel.attachmentInfos","change",()=>this.scheduleRender()),w.init(this,"viewModel.mode",()=>this._modeChanged()))};u.castVisibleElements=function(l){return{...q,...l}};u.addAttachment=function(){const {_addAttachmentForm:l,viewModel:M}=this;this._set("submitting",!0);this._set("error",null);return M.addAttachment(l).then(G=>{this._set("submitting",
!1);this._set("error",null);M.mode="view";return G}).catch(G=>{this._set("submitting",!1);this._set("error",new b("attachments:add-attachment",this.messages.addErrorMessage,G));throw G;})};u.deleteAttachment=function(l){const {viewModel:M}=this;this._set("submitting",!0);this._set("error",null);return M.deleteAttachment(l).then(G=>{this._set("submitting",!1);this._set("error",null);M.mode="view";return G}).catch(G=>{this._set("submitting",!1);this._set("error",new b("attachments:delete-attachment",
this.messages.deleteErrorMessage,G));throw G;})};u.updateAttachment=function(){const {viewModel:l}=this,{_updateAttachmentForm:M}=this;this._set("submitting",!0);this._set("error",null);return l.updateAttachment(M).then(G=>{this._set("submitting",!1);this._set("error",null);l.mode="view";return G}).catch(G=>{this._set("submitting",!1);this._set("error",new b("attachments:update-attachment",this.messages.updateErrorMessage,G));throw G;})};u.render=function(){const {submitting:l,viewModel:M}=this,{state:G}=
M;return C.tsx("div",{class:this.classes("esri-attachments","esri-widget")},l?this.renderProgressBar():null,"loading"===G?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())};u.renderErrorMessage=function(){const {error:l,visibleElements:M}=this;return l&&M.errorMessage?C.tsx("div",{key:"error-message",class:"esri-attachments__error-message"},l.message):null};u.renderAttachments=function(){const {mode:l,activeAttachmentInfo:M}=this.viewModel;return"add"===l?this.renderAddForm():
"edit"===l?this.renderDetailsForm(M):this.renderAttachmentContainer()};u.renderLoading=function(){return C.tsx("div",{class:"esri-attachments__loader-container",key:"loader"},C.tsx("div",{class:"esri-attachments__loader"}))};u.renderProgressBar=function(){return this.visibleElements.progressBar?C.tsx("div",{class:"esri-attachments__progress-bar",key:"progress-bar"}):null};u.renderAddForm=function(){const {submitting:l,selectedFile:M}=this;var G=l||!M,y=this.visibleElements.cancelAddButton?C.tsx("button",
{type:"button",bind:this,disabled:l,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--tertiary","esri-button--small","esri-button--half",l&&"esri-button--disabled")},this.messages.cancel):null;G=this.visibleElements.addSubmitButton?C.tsx("button",{type:"submit",disabled:G,class:this.classes("esri-button","esri-button--secondary","esri-button--small","esri-button--half",{["esri-button--disabled"]:G})},this.messages.add):null;const t=M?C.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},
M.name):null;y=C.tsx("form",{bind:this,afterCreate:g.storeNode,afterRemoved:g.discardNode,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},C.tsx("fieldset",{class:"esri-attachments__file-fieldset"},t,C.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},M?this.messages.changeFile:this.messages.selectFile,C.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),
G,y);return C.tsx("div",{key:"add-form-container",class:"esri-attachments__form-node"},y)};u.renderDetailsForm=function(l){const {visibleElements:M,viewModel:G,selectedFile:y,submitting:t}=this,{contentType:r,size:D,url:v}=l;var {abilities:E}=G,N=t||!y,O=E.editing&&E.operations.delete&&M.deleteButton?C.tsx("button",{key:"delete-button",type:"button",disabled:t,bind:this,onclick:B=>this._submitDeleteAttachment(B,l),class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-attachments__delete-button",
{["esri-button--disabled"]:t})},this.messages.delete):null;N=E.editing&&E.operations.update&&M.updateButton?C.tsx("button",{disabled:N,key:"update-button",type:"submit",class:this.classes("esri-button","esri-button--small","esri-button--third",{["esri-button--disabled"]:N})},this.messages.update):null;const R=this.visibleElements.cancelUpdateButton?C.tsx("button",{disabled:t,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--small",
"esri-button--tertiary","esri-button--third",{["esri-button--disabled"]:t})},this.messages.cancel):null;var h=y?C.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},y.name):null;E=E.editing&&E.operations.update?C.tsx("fieldset",{key:"file",class:"esri-attachments__file-fieldset"},h,C.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},this.messages.changeFile,C.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",
bind:this,onchange:this._handleFileInputChange}))):null;h=C.tsx("fieldset",{key:"size",class:"esri-attachments__metadata-fieldset"},C.tsx("label",null,z.formatFileSize(this.messagesUnits,D)));const K=C.tsx("fieldset",{key:"content-type",class:"esri-attachments__metadata-fieldset"},C.tsx("label",null,r));O=C.tsx("form",{bind:this,afterCreate:g.storeNode,afterRemoved:g.discardNode,"data-node-ref":"_updateAttachmentForm",onsubmit:this._submitUpdateAttachment},C.tsx("div",{class:"esri-attachments__metadata"},
h,K),E,C.tsx("div",{class:"esri-attachments__actions"},O,R,N));return C.tsx("div",{key:"edit-form-container",class:"esri-attachments__form-node"},C.tsx("a",{class:"esri-attachments__item-link",href:v,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:l,size:400}),C.tsx("div",{class:"esri-attachments__item-link-overlay"},C.tsx("span",{class:"esri-attachments__item-link-overlay-icon"},C.tsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},C.tsx("path",
{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),C.tsx("path",{fill:"none",d:"M0 0h32v32H0z"}))))),O)};u.renderImageMask=function({attachmentInfo:l,size:M}){var {supportsResizeAttachments:G}=this.viewModel;const {contentType:y,name:t,url:r}=l,D=G&&e.isSupportedImage(y);l=(l=this._getCSSTransform(l,D))?{transform:l,"image-orientation":"none"}:{};const v=-1===r.indexOf("?")?"?":"\x26";M=D?`${r}${v}w=${M}`:e.getIconPath(y);G={["esri-attachments__image--resizable"]:G};
return C.tsx("div",{class:this.classes({["esri-attachments__item-mask--icon"]:!D},"esri-attachments__item-mask")},C.tsx("img",{styles:l,alt:t,src:M,class:this.classes(G,"esri-attachments__image")}))};u.renderAttachmentInfo=function({attachmentInfo:l,displayType:M}){var {viewModel:G}=this;({abilities:G}=G);const {name:y,url:t}=l;M=this.renderImageMask({attachmentInfo:l,size:"list"===M?48:400});var r=G.editing?C.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-chevron-icon",
g.isRTL(this.container)?"esri-icon-left":"esri-icon-right")}):null;r=C.tsx("label",{class:"esri-attachments__label"},C.tsx("span",{class:"esri-attachments__filename"},y||this.messages.noTitle),r);M=[M,r];G=G.editing?C.tsx("button",{key:"details-button",bind:this,class:"esri-attachments__item-button",title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":l.id,onclick:()=>this._startEditAttachment(l),type:"button"},M):C.tsx("a",{key:"details-link",
class:"esri-attachments__item-button",href:t,target:"_blank"},M);return C.tsx("li",{class:"esri-attachments__item",key:l},G)};u.renderAttachmentContainer=function(){const {displayType:l,viewModel:M,visibleElements:G}=this,{attachmentInfos:y,abilities:t}=M;var r=y&&y.length;const D={["esri-attachments__container--list"]:"preview"!==l,["esri-attachments__container--preview"]:"preview"===l},v=t.editing&&t.operations.add&&G.addButton?C.tsx("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes("esri-button",
"esri-button--tertiary","esri-attachments__add-attachment-button"),type:"button"},C.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-add-icon","esri-icon-plus")}),this.messages.add):null;r=r?C.tsx("ul",{class:"esri-attachments__items"},y.toArray().map(E=>this.renderAttachmentInfo({attachmentInfo:E,displayType:l}))):C.tsx("div",{class:"esri-widget__content--empty"},this.messages.noAttachments);return C.tsx("div",{key:"attachments-container",class:this.classes("esri-attachments__container",
D)},r,v)};u._modeChanged=function(){this._set("error",null);this._set("selectedFile",null)};u._handleFileInputChange=function(l){l=(l=l.target)&&l.files&&l.files.item(0);this._set("selectedFile",l)};u._submitDeleteAttachment=function(l,M){l.preventDefault();this.deleteAttachment(M)};u._submitAddAttachment=function(l){l.preventDefault();this.addAttachment()};u._submitUpdateAttachment=function(l){l.preventDefault();this.updateAttachment()};u._startEditAttachment=function(l){const {viewModel:M}=this;
M.activeAttachmentInfo=l;M.mode="edit"};u._startAddAttachment=function(){this.viewModel.mode="add"};u._cancelForm=function(l){l.preventDefault();this.viewModel.mode="view"};u._getCSSTransform=function(l,M){({orientationInfo:l}=l);return!this._supportsImageOrientation&&M&&l?[l.rotation?`rotate(${l.rotation}deg)`:"",l.mirrored?"scaleX(-1)":""].join(" "):""};return F}(n);c.__decorate([L.aliasOf("viewModel.abilities")],T.prototype,"abilities",void 0);c.__decorate([H.property()],T.prototype,"displayType",
void 0);c.__decorate([L.aliasOf("viewModel.graphic")],T.prototype,"graphic",void 0);c.__decorate([H.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],T.prototype,"label",void 0);c.__decorate([H.property(),p.messageBundle("esri/widgets/Attachments/t9n/Attachments")],T.prototype,"messages",void 0);c.__decorate([H.property(),p.messageBundle("esri/core/t9n/Units")],T.prototype,"messagesUnits",void 0);c.__decorate([H.property({readOnly:!0})],T.prototype,"selectedFile",void 0);c.__decorate([H.property({readOnly:!0})],
T.prototype,"submitting",void 0);c.__decorate([H.property({readOnly:!0})],T.prototype,"error",void 0);c.__decorate([H.property({type:d})],T.prototype,"viewModel",void 0);c.__decorate([H.property()],T.prototype,"visibleElements",void 0);c.__decorate([W.cast("visibleElements")],T.prototype,"castVisibleElements",null);return T=c.__decorate([x.subclass("esri.widgets.Attachments")],T)})},"esri/core/unitFormatUtils":function(){define(["exports","./mathUtils","./string","./unitUtils","../intl/number"],function(f,
c,b,z,w){function L(Q,H,x){return Q.units[H][x]}function T(Q,H,x,n=2,d="abbr"){return`${w.formatNumber(H,{minimumFractionDigits:n,maximumFractionDigits:n})} ${L(Q,x,d)}`}const W=["B","kB","MB","GB","TB"];f.formatAngleDegrees=function(Q,H,x=2){Q=z.convertUnit(Q,H,"degrees");return w.formatNumber(Q,{style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:x,minimumFractionDigits:x})};f.formatDMS=function(Q,H,x=2){Q=z.convertUnit(Q,H,"degrees");H=Q-Math.floor(Q);Q-=H;H*=60;let n=H-Math.floor(H);
H-=n;n*=60;return`${Q.toFixed()}\u00b0 ${H.toFixed()}' ${n.toFixed(x)}"`};f.formatDecimal=T;f.formatFileSize=function(Q,H){let x=0===H?0:Math.floor(Math.log(H)/Math.log(1024));x=c.clamp(x,0,W.length-1);H=w.formatNumber(H/1024**x,{maximumFractionDigits:2});return b.replace(Q.units.bytes[W[x]],{fileSize:H})};f.formatImperialArea=function(Q,H,x,n=2,d="abbr"){const e=z.preferredImperialAreaUnit(H,x);return T(Q,z.convertUnit(H,x,e),e,n,d)};f.formatImperialLength=function(Q,H,x,n=2,d="abbr"){const e=z.preferredImperialLengthUnit(H,
x);return T(Q,z.convertUnit(H,x,e),e,n,d)};f.formatImperialVerticalLength=function(Q,H,x,n=2,d="abbr"){const e=z.preferredImperialVerticalLengthUnit(H,x);return T(Q,z.convertUnit(H,x,e),e,n,d)};f.formatMetricArea=function(Q,H,x,n=2,d="abbr"){const e=z.preferredMetricAreaUnit(H,x);return T(Q,z.convertUnit(H,x,e),e,n,d)};f.formatMetricLength=function(Q,H,x,n=2,d="abbr"){const e=z.preferredMetricLengthUnit(H,x);return T(Q,z.convertUnit(H,x,e),e,n,d)};f.formatMetricVerticalLength=function(Q,H,x,n=2,d=
"abbr"){const e=z.preferredMetricVerticalLengthUnit(H,x);return T(Q,z.convertUnit(H,x,e),e,n,d)};f.unitName=L;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/widgets/Attachments/AttachmentsViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../core/Collection ../../core/Error ../../core/HandleOwner ../../core/maybe ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/decorators/cast ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../rest/query/support/AttachmentInfo ../../rest/support/AttachmentQuery ../Feature/support/featureUtils".split(" "),
function(f,c,b,z,w,L,T,W,Q,H,x,n,d,e,g,p){const C={editing:!1,operations:{add:!0,update:!0,delete:!0}},q=z.ofType(e);z=function(k){function A(u){var l=k.call(this,u)||this;l._getAttachmentsPromise=null;l._attachmentLayer=null;l.abilities={...C};l.activeAttachmentInfo=null;l.attachmentInfos=new q;l.graphic=null;l.mode="view";l.handles.add([W.init(f._assertThisInitialized(l),"graphic",()=>l._graphicChanged())]);return l}f._inheritsLoose(A,k);var F=A.prototype;F.destroy=function(){this.graphic=this._attachmentLayer=
null};F.castAbilities=function(u){return{...C,...u}};F.getAttachments=function(){var u=f._asyncToGenerator(function*(){const {_attachmentLayer:l,attachmentInfos:M}=this;if(!l||"function"!==typeof l.queryAttachments)throw new w("invalid-layer","getAttachments(): A valid layer is required.");const G=this._getFeatureId();var y=new g({objectIds:[G],returnMetadata:!0});const t=[];this._getAttachmentsPromise=y=l.queryAttachments(y).then(r=>r[G]||t).catch(()=>t);this.notifyChange("state");y=yield y;M.removeAll();
y.length&&M.addMany(y);this._getAttachmentsPromise=null;this.notifyChange("state");return y});return function(){return u.apply(this,arguments)}}();F.addAttachment=function(){var u=f._asyncToGenerator(function*(l){const {_attachmentLayer:M,attachmentInfos:G,graphic:y,abilities:t}=this;if(!l)throw new w("invalid-attachment","addAttachment(): An attachment is required.",{attachment:l});if(!t.operations.add)throw new w("invalid-abilities","addAttachment(): add abilities are required.");if(!M||"function"!==
typeof M.addAttachment)throw new w("invalid-layer","addAttachment(): A valid layer is required.");l=yield M.addAttachment(y,l).then(r=>this._queryAttachment(r.objectId));G.add(l);return l});return function(l){return u.apply(this,arguments)}}();F.deleteAttachment=function(){var u=f._asyncToGenerator(function*(l){const {_attachmentLayer:M,attachmentInfos:G,graphic:y,abilities:t}=this;if(!l)throw new w("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:l});
if(!t.operations.delete)throw new w("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!M||"function"!==typeof M.deleteAttachments)throw new w("invalid-layer","deleteAttachment(): A valid layer is required.");const r=yield M.deleteAttachments(y,[l.id]).then(()=>l);G.remove(r);return r});return function(l){return u.apply(this,arguments)}}();F.updateAttachment=function(){var u=f._asyncToGenerator(function*(l,M=this.activeAttachmentInfo){const {_attachmentLayer:G,attachmentInfos:y,
graphic:t,abilities:r}=this;if(!l)throw new w("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:l});if(!M)throw new w("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:M});if(!r.operations.update)throw new w("invalid-abilities","updateAttachment(): Update abilities are required.");const D=y.findIndex(v=>v===M);if(!G||"function"!==typeof G.updateAttachment)throw new w("invalid-layer","updateAttachment(): A valid layer is required.");
l=yield G.updateAttachment(t,M.id,l).then(v=>this._queryAttachment(v.objectId));y.splice(D,1,l);return l});return function(l){return u.apply(this,arguments)}}();F._queryAttachment=function(){var u=f._asyncToGenerator(function*(l){if(!l)throw new w("invalid-attachment-id","Could not query attachment.");const {_attachmentLayer:M}=this,G=this._getFeatureId();l=new g({objectIds:[G],attachmentsWhere:`AttachmentId=${l}`,returnMetadata:!0});return M.queryAttachments(l).then(y=>y[G][0])});return function(l){return u.apply(this,
arguments)}}();F._getFeatureId=function(){const {_attachmentLayer:u,graphic:l}=this;if(!u||!l)return null;const {objectIdField:M}=u,{attributes:G}=l;return G&&G[M]};F._graphicChanged=function(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))};F._setAttachmentLayer=function(){var {graphic:u}=this;this._attachmentLayer=(u=p.getSourceLayer(u))?"scene"===u.type&&T.isSome(u.associatedLayer)?u.associatedLayer:u:null};f._createClass(A,[{key:"state",get:function(){return this._getAttachmentsPromise?
"loading":this.graphic?"ready":"disabled"}},{key:"supportsResizeAttachments",get:function(){return this.get("graphic.layer.capabilities.operations.supportsResizeAttachments")||!1}}]);return A}(L.HandleOwner);c.__decorate([Q.property()],z.prototype,"abilities",void 0);c.__decorate([x.cast("abilities")],z.prototype,"castAbilities",null);c.__decorate([Q.property()],z.prototype,"activeAttachmentInfo",void 0);c.__decorate([Q.property({readOnly:!0,type:q})],z.prototype,"attachmentInfos",void 0);c.__decorate([Q.property({type:b})],
z.prototype,"graphic",void 0);c.__decorate([Q.property()],z.prototype,"mode",void 0);c.__decorate([Q.property({readOnly:!0})],z.prototype,"state",null);c.__decorate([Q.property({readOnly:!0})],z.prototype,"supportsResizeAttachments",null);return z=c.__decorate([d.subclass("esri.widgets.Attachments.AttachmentsViewModel")],z)})},"esri/widgets/Feature/support/featureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../intl ../../../core/Logger ../../../core/maybe ../../../core/string ../../../intl/date ../../../intl/number ../../../layers/support/fieldUtils ../../../popup/support/FieldInfoFormat ../../../support/arcadeOnDemand".split(" "),
function(f,c,b,z,w,L,T,W,Q,H,x){function n(){n=c._asyncToGenerator(function*(X,I){return"function"===typeof X?X.call(null,I):X});return n.apply(this,arguments)}function d(X){return aa.test(X)}function e(X,I){if(!d(I)||!X)return null;const S=I.replace(aa,"").toLowerCase();let Y;X.some(U=>U.name.toLowerCase()===S?(Y=U,!0):!1);return Y}function g(X,I){return(I=p(I,X))?I.name:X}function p(X,I){return X&&"function"===typeof X.getField?X.getField(I):null}function C({formattedAttributes:X,template:I,fieldInfoMap:S}){return`${L.replace(L.replace(I,
Y=>{{const U=S.get(Y.toLowerCase());Y=`{${U&&U.fieldName||Y}}`}return Y}),X).replace(B,"")}`.trim()}function q(X,I,S=!1){const Y=I[X];"string"===typeof Y&&(S=(S?encodeURIComponent(Y):Y).replace(V,"%27"),I[X]=S)}function k(X,I=!1){const S={...X};Object.keys(S).forEach(Y=>q(Y,S,I));return S}function A(X,I){return X.replace(J,(S,Y,U)=>(S=p(I,U))?`{${S.name}}`:Y)}function F(X,I,S){return(X=A(X,S))?X.replace(ra,(Y,U,da)=>{U=`${U||da}`.trim();return L.replace(Y,k(I,U&&"{"!==U[0]))}):X}function u(X,I){var S=
I.fieldName,Y=l(I.fieldInfos,S),U=null==Y?void 0:Y.clone();Y=I.preventPlacesFormatting;I=I.layer;S=p(I,S);if(U&&"date"===(null==S?void 0:S.type)){S=U.format||new H;S.dateFormat=S.dateFormat||"short-date-short-time";var da;if(!(da="feature"===(null==I?void 0:I.type)&&I.datesInUnknownTimezone)){if(da=!(null==I||!I.layer))da=I.layer,da="map-image"===(null==da?void 0:da.type);da=da&&I.layer.datesInUnknownTimezone}S.dateTimeFormatOptions=da?{timeZone:"UTC"}:null;U.format=S}U=U&&U.format;"string"!==typeof X||
!U||null!=U.dateFormat||null==U.places&&null==U.digitSeparator||(I=Number(X),isNaN(I)||(X=I));return"string"===typeof X||null==X||null==U?X:Y?W.formatNumber(X,{...W.convertNumberFormatToIntlOptions(U),minimumFractionDigits:0,maximumFractionDigits:20}):U.format(X)}function l(X,I){if(X&&X.length&&I){var S=I.toLowerCase(),Y=void 0;X.some(U=>U.fieldName&&U.fieldName.toLowerCase()===S?(Y=U,!0):!1);return Y}}function M({fieldName:X,graphic:I,layer:S}){if(O(X)||!S||"function"!==typeof S.getFeatureType)return null;
const {typeIdField:Y}=S;return Y&&X===Y?(X=S.getFeatureType(I))?X.name:null:null}function G({fieldName:X,value:I,graphic:S,layer:Y}){return O(X)||!Y||"function"!==typeof Y.getFieldDomain?null:(X=Y.getFieldDomain(X,{feature:S}))&&"coded-value"===X.type?X.getName(I):null}function y(X){return"string"===typeof X?X.replace(ha,'\x3cbr class\x3d"esri-text-new-line" /\x3e'):X}function t(X){const {value:I,fieldName:S,fieldInfos:Y,fieldInfoMap:U,layer:da,graphic:ca}=X;return null==I?"":(X=G({fieldName:S,value:I,
graphic:ca,layer:da}))||(X=M({fieldName:S,graphic:ca,layer:da}))?X:U.get(S.toLowerCase())?u(I,{fieldInfos:Y,fieldName:S,layer:da}):(X=da&&da.fieldsIndex)&&X.isDateField(S)?T.formatDate(I,wa):y(I)}function r(X,I){return D.apply(this,arguments)}function D(){D=c._asyncToGenerator(function*(X,I){var S,Y;const {layer:U,graphic:da,outFields:ca,objectIds:ia,returnGeometry:fa,spatialReference:ta}=X;X=ia[0];if("number"!==typeof X&&"string"!==typeof X)return K.warn("Could not query required fields for the specified feature. The feature's ID is invalid.",
{layer:U,graphic:da,objectId:X,requiredFields:ca}),null;if(null==(S=U.capabilities)||null==(Y=S.operations)||!Y.supportsQuery)return K.warn("The specified layer cannot be queried. The following fields will not be available.",{layer:U,graphic:da,requiredFields:ca,returnGeometry:fa}),null;S=U.createQuery();S.objectIds=ia;S.outFields=null!=ca&&ca.length?ca:[U.objectIdField];S.returnGeometry=!!fa;S.returnZ=!!fa;S.returnM=!!fa;S.outSpatialReference=ta;return(yield U.queryFeatures(S,I)).features[0]});return D.apply(this,
arguments)}function v(X){return E.apply(this,arguments)}function E(){E=c._asyncToGenerator(function*(X){var I;if(null==(I=X.expressionInfos)||!I.length)return!1;I=yield x.loadArcade();({arcadeUtils:{hasGeometryFunctions:I}}=I);return I(X)});return E.apply(this,arguments)}function N(){N=c._asyncToGenerator(function*({graphic:X,popupTemplate:I,layer:S,spatialReference:Y},U){if(S&&I&&("function"===typeof S.load&&(yield S.load(U)),X.attributes)){var da=X.attributes[S.objectIdField];if(null!=da){da=[da];
var ca=yield I.getRequiredFields(S.fieldsIndex),ia=Q.featureHasFields(ca,X);ca=ia?[]:ca;I=I.returnGeometry||(yield v(I));if(!ia||I)if(S=yield r({layer:S,graphic:X,outFields:ca,objectIds:da,returnGeometry:I,spatialReference:Y},U))S.geometry&&(X.geometry=S.geometry),S.attributes&&(X.attributes={...X.attributes,...S.attributes})}}});return N.apply(this,arguments)}function O(X=""){return X?-1!==X.indexOf("relationships/"):!1}function R({attributes:X,graphic:I,relatedInfo:S}){X&&I&&S&&Object.keys(I.attributes).forEach(Y=>
{var U={layerId:S.relation.id.toString(),fieldName:Y};X[U?`${"relationships/"}${U.layerId}/${U.fieldName}`:""]=I.attributes[Y]})}function h(X,I){X&&I&&(I.relatedFeatures&&I.relatedFeatures&&I.relatedFeatures.forEach(S=>R({attributes:X,graphic:S,relatedInfo:I})),I.relatedStatsFeatures&&I.relatedStatsFeatures&&I.relatedStatsFeatures.forEach(S=>R({attributes:X,graphic:S,relatedInfo:I})))}const K=z.getLogger("esri.widgets.Feature.support.featureUtils"),B=/href=(""|'')/gi,J=/(\{([^\{\r\n]+)\})/g,V=/'/g,
aa=/^\s*expression\//i,ha=/(\n)/gi,la=/[\u00A0-\u9999<>&]/gim,ra=/href\s*=\s*(?:"([^"]+)"|'([^']+)')/gi,va=/^(?:mailto:|tel:)/,wa=T.convertDateFormatToIntlOptions("short-date-short-time"),ua=X=>{if(!X)return!1;X=X.toUpperCase();return-1<X.indexOf("CURRENT_TIMESTAMP")||-1<X.indexOf("CURRENT_DATE")||-1<X.indexOf("CURRENT_TIME")},ja=({layer:X,method:I,query:S,definitionExpression:Y})=>{var U,da;null!=(U=X.capabilities)&&null!=(da=U.query)&&da.supportsCacheHint&&"attachments"!==I&&(X=w.isSome(S.where)&&
S.where,I=w.isSome(S.geometry)&&S.geometry,ua(Y)||ua(X)||"extent"===(null==I?void 0:I.type)||"tile"===S.resultType||(S.cacheHint=!0))};f.applyTextFormattingHTML=y;f.createfieldInfoMap=function(X,I){const S=new Map;X&&X.forEach(Y=>{const U=g(Y.fieldName,I);Y.fieldName=U;S.set(U.toLowerCase(),Y)});return S};f.fixTokens=A;f.formatAttributes=function({fieldInfos:X,attributes:I,layer:S,graphic:Y,fieldInfoMap:U,relatedInfos:da}){const ca={...I};null==da?void 0:da.forEach(ia=>h(ca,ia));Object.keys(ca).forEach(ia=>
{ca[ia]=t({fieldName:ia,fieldInfos:X,fieldInfoMap:U,layer:S,value:ca[ia],graphic:Y})});return ca};f.formatEditInfo=function(X,I){const {creatorField:S,creationDateField:Y,editorField:U,editDateField:da}=X;if(I){X=I[da];if("number"===typeof X)return I=I[U],{type:"edit",date:T.formatDate(X,wa),user:I};X=I[Y];return"number"===typeof X?(I=I[S],{type:"create",date:T.formatDate(X,wa),user:I}):null}};f.formatValueToFieldInfo=u;f.getAllFieldInfos=function(X){const I=[];if(!X)return I;const {fieldInfos:S,
content:Y}=X;S&&I.push(...S);if(!Y||!Array.isArray(Y))return I;Y.forEach(U=>{"fields"===U.type&&(U=U&&U.fieldInfos)&&I.push(...U)});return I};f.getFieldInfo=l;f.getFieldInfoLabel=function(X,I){return(I=e(I,null==X?void 0:X.fieldName))?I.title||null:X?X.label||X.fieldName:null};f.getFixedFieldName=g;f.getFixedFieldNames=function(X,I){return X&&X.map(S=>g(S,I))};f.getSourceLayer=function(X){if(!w.isNone(X))return X.get("sourceLayer")||X.get("layer")};f.graphicCallback=function(X,I){return n.apply(this,
arguments)};f.htmlEntities=function(X){return X.replace(la,I=>`&#${I.charCodeAt(0)};`)};f.isExpressionField=d;f.isRelatedField=O;f.preLayerQueryCallback=({query:X,layer:I,method:S})=>{ja({layer:I,method:S,query:X,definitionExpression:`${I.definitionExpression} ${I.serviceDefinitionExpression}`})};f.preRequestCallback=({queryPayload:X,layer:I,method:S})=>{ja({layer:I,method:S,query:X,definitionExpression:`${I.definitionExpression} ${I.serviceDefinitionExpression}`})};f.queryUpdatedFeature=function(X,
I){return N.apply(this,arguments)};f.shouldOpenInNewTab=function(X=""){if(X)return!va.test(X.trim().toLowerCase())};f.substituteAttributes=C;f.substituteFieldsInLinksAndAttributes=function({attributes:X,globalAttributes:I,layer:S,text:Y,expressionAttributes:U,fieldInfoMap:da}){return Y?C({formattedAttributes:I,template:F(Y,{...I,...U,...X},S),fieldInfoMap:da}):""};Object.defineProperty(f,"__esModule",{value:!0})})},"esri/widgets/Attachments/support/attachmentUtils":function(){define(["exports","../../../assets"],
function(f,c){f.getIconPath=function(b){const z=c.getAssetUrl("esri/themes/base/images/files/");return b?"text/plain"===b?`${z}text-32.svg`:"application/pdf"===b?`${z}pdf-32.svg`:"text/csv"===b?`${z}csv-32.svg`:"application/gpx+xml"===b?`${z}gpx-32.svg`:"application/x-dwf"===b?`${z}cad-32.svg`:"application/postscript"===b||"application/json"===b||"text/xml"===b||"model/vrml"===b?`${z}code-32.svg`:"application/x-zip-compressed"===b||"application/x-7z-compressed"===b||"application/x-gzip"===b||"application/x-tar"===
b||"application/x-gtar"===b||"application/x-bzip2"===b||"application/gzip"===b||"application/x-compress"===b||"application/x-apple-diskimage"===b||"application/x-rar-compressed"===b||"application/zip"===b?`${z}zip-32.svg`:-1!==b.indexOf("image/")?`${z}image-32.svg`:-1!==b.indexOf("audio/")?`${z}sound-32.svg`:-1!==b.indexOf("video/")?`${z}video-32.svg`:-1!==b.indexOf("msexcel")||-1!==b.indexOf("ms-excel")||-1!==b.indexOf("spreadsheetml")?`${z}excel-32.svg`:-1!==b.indexOf("msword")||-1!==b.indexOf("ms-word")||
-1!==b.indexOf("wordprocessingml")?`${z}word-32.svg`:-1!==b.indexOf("powerpoint")||-1!==b.indexOf("presentationml")?`${z}report-32.svg`:`${z}generic-32.svg`:`${z}generic-32.svg`};f.isSupportedImage=function(b){b=b.toLowerCase();return"image/bmp"===b||"image/emf"===b||"image/exif"===b||"image/gif"===b||"image/x-icon"===b||"image/jpeg"===b||"image/png"===b||"image/tiff"===b||"image/x-wmf"===b};Object.defineProperty(f,"__esModule",{value:!0})})},"esri/widgets/FeatureForm":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/accessorSupport/decorators/aliasOf ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ../layers/support/domainUtils ../layers/support/fieldUtils ./Widget ./FeatureForm/FeatureFormViewModel ./support/Heading ./support/widgetUtils ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ../chunks/datetime ../intl/locale".split(" "),
function(f,c,b,z,w,L,T,W,Q,H,x,n,d,e,g,p,C,q,k,A,F){const u={datePattern:"D",timePattern:"tt"};z=function(l){function M(y,t){var r=l.call(this,y,t)||this;r._activeDateFieldEdit=null;r._activeInputName=null;r._fieldFocusNeeded=!1;r._fieldToInitialIncompatibleDomainValue=new Map;r._switchFieldsWithInitialIncompatibleValue=new Set;r._userUpdatedInputFieldNames=new Set;r.description=null;r.feature=null;r.fieldConfig=null;r.formTemplate=null;r.groupDisplay="all";r.headingLevel=2;r.label=void 0;r.layer=
null;r.messages=null;r.strict=null;r.title=null;r.viewModel=new e;r._handleRadioInputChange=D=>{r._commitInputValue(D.target)};r._handleInputInput=D=>{r._commitInputValue(D.target,!0)};r._handleFormKeyDown=r._handleFormKeyDown.bind(c._assertThisInitialized(r));r._handleInputBlur=r._handleInputBlur.bind(c._assertThisInitialized(r));r._handleInputFocus=r._handleInputFocus.bind(c._assertThisInitialized(r));r._handleNumberInputMouseDown=r._handleNumberInputMouseDown.bind(c._assertThisInitialized(r));
r._handleInputKeyDown=r._handleInputKeyDown.bind(c._assertThisInitialized(r));r._handleOptionChange=r._handleOptionChange.bind(c._assertThisInitialized(r));r._handleGroupClick=r._handleGroupClick.bind(c._assertThisInitialized(r));r._handleSubmit=r._handleSubmit.bind(c._assertThisInitialized(r));r._afterInputCreateOrUpdate=r._afterInputCreateOrUpdate.bind(c._assertThisInitialized(r));return r}c._inheritsLoose(M,l);var G=M.prototype;G.initialize=function(){this.own(this.watch("feature",()=>{const y=
this._getFocusableInput("forward");this._activeInputName=y&&y.name;this._userUpdatedInputFieldNames.clear();this._fieldToInitialIncompatibleDomainValue.clear();this._switchFieldsWithInitialIncompatibleValue.clear();this._fieldFocusNeeded=!0}),this.on("submit",y=>{if(0<y.invalid.length){const [t]=y.invalid;y.invalid.forEach(r=>this._userUpdatedInputFieldNames.add(r));this._activeInputName=t;this._fieldFocusNeeded=!0;this.scheduleRender()}}))};G.loadDependencies=function(){return new Promise(function(y,
t){f(["../chunks/switch"],y,t)})};G.destroy=function(){this._userUpdatedInputFieldNames.clear();this._userUpdatedInputFieldNames=null};G.getValues=function(){return null};G.submit=function(){return null};G.render=function(){const {state:y}=this.viewModel;return k.tsx("div",{class:this.classes("esri-feature-form","esri-widget","esri-widget--panel")},"ready"===y?this.renderForm():null)};G.renderForm=function(){var y=this.title?k.tsx(g.Heading,{key:"title",level:this.headingLevel},this.title):null;const t=
this.description?k.tsx("p",{class:"esri-feature-form__description-text",key:"description"},this.description):null;y=y||t?k.tsx("div",{class:"esri-feature-form__form-header"},y,t):null;return k.tsx("form",{class:"esri-feature-form__form",novalidate:!0,onsubmit:this._handleSubmit,onkeydown:this._handleFormKeyDown},y,this.renderFields())};G.renderFields=function(){const {viewModel:{inputFields:y}}=this;return y.map((t,r)=>t&&t.inputFields?this.renderGroup(t,r):this.renderLabeledField(t))};G.renderGroup=
function(y,t){const {description:r,inputFields:D,label:v,state:E}=y;var N=this.viewModel.findField(this._activeInputName);N=!(!N||N.group!==y);const O=`${this.id}_group_${t}`,R=`${this.id}_group-label_${t}`,h=`${this.id}_group-description_${t}`,K=r?k.tsx("p",{class:this.classes("esri-feature-form__group-description","esri-feature-form__description-text"),id:h},r):null,B="sequential"===this.groupDisplay,J=B?N:"expanded"===E,V=J?"esri-icon-up":"esri-icon-down";return k.tsx("fieldset",{"aria-expanded":J.toString(),
"aria-labelledby":R,"aria-describedby":r?h:"",class:this.classes("esri-feature-form__group",B?"esri-feature-form__group--sequential":null,J?null:"esri-feature-form__group--collapsed",N?"esri-feature-form__group--active":null),"data-group":y,id:O,key:t,onclick:this._handleGroupClick},k.tsx("button",{role:B?"presentation":void 0,class:"esri-feature-form__group-header",type:"button",tabIndex:B?-1:0},k.tsx("div",{class:"esri-feature-form__group-title"},k.tsx(g.Heading,{class:"esri-feature-form__group-label",
id:R,level:this.headingLevel+(this.title?1:0)},v),K),B?null:k.tsx("span",{class:this.classes(V,"esri-feature-form__group-toggle-icon")})),D.map(aa=>this.renderLabeledField(aa)))};G._getFocusableInput=function(y,t){var r=this.viewModel._allInputFields;r="forward"===y?r:r.slice().reverse();t?t&&t.inputFields?y=r.indexOf(t.inputFields[0]):(this._isFieldInClosedCollapsibleGroup(t)?({inputFields:t}=t.group,y="forward"===y?t[t.length-1]:t[0]):y=t,y=r.indexOf(y)+1):y=0;for(;y<r.length;y++)if(t=r[y],t.visible)return t;
return null};G.renderLabeledField=function(y){const {label:t,layer:r,type:D}=y;return k.tsx("label",{key:`${r.id}-${y.name}`,class:"esri-feature-form__label"},[t,"unsupported"!==D?this.renderInputField(y):this.renderUnsupportedField(y),this.renderAuxiliaryText(y)])};G.renderInputField=function(y){var {viewModel:t}=this;const {domain:r,editable:D,name:v,type:E}=y;t=t.getValue(v);const N=!D,O=this.getCommonInputProps(y);if("coded-value"===(null==r?void 0:r.type)&&!N){if("switch"===y.editorType)if(this._switchFieldsWithInitialIncompatibleValue.has(v)||
null==t||y.config.onValue!==t&&y.config.offValue!==t)this._switchFieldsWithInitialIncompatibleValue.add(v);else return this.renderSwitchInputField(t,O);return"radio-buttons"===y.editorType?this.renderRadioButtonsInputField(t,r.codedValues.map(({code:R,name:h})=>({value:R,name:h})),O):this.renderSelectInputField(t,r.codedValues.map(({code:R,name:h})=>({value:R,name:h})),O)}return"text"===E&&"text-area"===y.editorType||"rich-text"===y.editorType?k.tsx("textarea",{...O}):"datetime-picker"===y.editorType||
"date"===E?this.renderDateInputField(t,O):k.tsx("input",{type:"text"===E?"text":"number",...O})};G._parseDateTime=function(y,t,r){if(r){var D;y=A.DateTime.fromJSDate(this._parseDate(y,r));t=A.DateTime.fromMillis(null!=(D=t.value)?D:Date.now());y="date"===r?y.set({hour:t.hour,minute:t.minute,second:t.second}):y.set({day:t.day,month:t.month,year:t.year});return y.isValid?y.toMillis():null}r=A.DateTime.fromJSDate(this._parseDate(y));return r.isValid?r.toMillis():null};G.renderDateInputField=function(y,
t){const {date:r,time:D}=this._formatDate(0);var v=`${this.id}-${t.key}`;const E=`${v}-date`;v=`${v}-time`;const N=t["data-field"],{includeTime:O}=N,{_activeDateFieldEdit:R}=this;let {date:h,time:K}=this._formatDate(y);if((null==R?void 0:R.fieldName)===N.name){var B,J,V,aa;h=null!=(B=null==(J=R.date.input)?void 0:J.value)?B:h;K=null!=(V=null==(aa=R.time.input)?void 0:aa.value)?V:K}return k.tsx("div",{key:`${t.key}-date`,class:"esri-feature-form__date-input-container"},k.tsx("div",{class:this.classes("esri-feature-form__date-input-part",
O?null:"esri-feature-form__date-input-part--lone")},k.tsx("input",{"aria-label":N.label,"aria-describedby":E,type:"text",...t,"data-date-part":"date",class:this.classes(t.class,"esri-feature-form__input--date"),value:h}),k.tsx("div",{class:"esri-feature-form__date-format-hint",id:E},r)),O?k.tsx("div",{class:"esri-feature-form__date-input-part",key:"time-input"},k.tsx("input",{"aria-describedby":v,"aria-label":N.label,type:"text",...t,"data-date-part":"time",class:this.classes(t.class,"esri-feature-form__input--time"),
value:K}),k.tsx("div",{class:"esri-feature-form__date-format-hint",id:v},D)):null)};G.renderUnsupportedField=function(y){y=this.getCommonInputProps(y);return k.tsx("input",{afterCreate:y.afterCreate,afterUpdate:y.afterUpdate,class:this.classes("esri-input","esri-feature-form__input","esri-feature-form__input--disabled"),"data-field":y["data-field"],onfocus:y.onfocus,readOnly:!0,tabIndex:y.tabIndex,type:"text",value:y.value})};G.renderSelectInputField=function(y,t,r){const D=t.map(N=>k.tsx("option",
{value:`${N.value}`,key:N.name},N.name)),v=r["data-field"];this.registerIncompatibleValue(y,t,v,N=>{D.unshift(k.tsx("option",{value:`${N}`,key:"incompatible-option",readOnly:!0},N))});if(!v.required&&("combo-box"!==v.editorType||v.config.showNoValueOption)){var E;y=(null==(E=v.config)?void 0:E.noValueOptionLabel)||this.messages.empty;D.unshift(k.tsx("option",{value:"",key:"empty-option"},y))}return k.tsx("select",{...r,class:this.classes(r.class,"esri-select"),onchange:this._handleOptionChange},D)};
G.registerIncompatibleValue=function(y,t,r,D){const v=this._fieldToInitialIncompatibleDomainValue,E=v.has(r.name);if(E||null!=y&&""!==y&&!t.find(N=>N.value===y)||E)E||v.set(r.name,y),null==D?void 0:D(v.get(r.name))};G.renderRadioButtonsInputField=function(y,t,r){const D=r["data-field"],v=t.map(N=>this.renderRadioButton({key:N.name,label:N.name,name:D.name,value:N.value,selected:N.value===y,props:r}));this.registerIncompatibleValue(y,t,D);if(!D.required&&(!D.config||D.config.showNoValueOption)){var E;
t=(null==(E=D.config)?void 0:E.noValueOptionLabel)||this.messages.empty;v.unshift(this.renderRadioButton({key:"empty-option",label:t,name:D.name,value:"",selected:""===y||null===y,props:r}))}return k.tsx("div",{key:`${r.key}-radio`,class:"esri-feature-form__input--radio-group"},v)};G.renderSwitchInputField=function(y,t){return k.tsx("calcite-switch",{...t,class:"esri-feature-form__input--switch",switched:y===t["data-field"].config.onValue,onCalciteSwitchChange:r=>{this._parseValue(r.currentTarget)}})};
G.renderRadioButton=function({key:y,name:t,value:r,selected:D,label:v,props:E}){return k.tsx("label",{key:y,class:"esri-feature-form__input--radio-label"},k.tsx("input",{...E,class:"esri-feature-form__input--radio",name:t,type:"radio",value:r,checked:D,onchange:this._handleRadioInputChange}),v)};G.renderAuxiliaryText=function(y){if(this._userUpdatedInputFieldNames.has(y.name)&&!y.valid)return k.tsx("div",{key:"error-message"},k.tsx("span",{class:this.classes("esri-feature-form__input-icon--invalid",
"esri-icon-notice-triangle")}),k.tsx("div",{class:"esri-feature-form__field-error-message"},y.errorMessage));if(y.description)return k.tsx("div",{key:"description",class:"esri-feature-form__description-text"},y.description)};G.getCommonInputProps=function(y){const {groupDisplay:t,viewModel:r}=this,{editable:D,group:v,hint:E,maxLength:N,minLength:O,name:R,required:h,type:K,valid:B}=y,J=r.getValue(R),V=this._userUpdatedInputFieldNames.has(R),aa=!D,ha="all"===t&&"collapsed"===(null==v?void 0:v.state);
return{afterCreate:this._afterInputCreateOrUpdate,afterUpdate:this._afterInputCreateOrUpdate,"aria-invalid":B?"false":"true",class:this.classes("esri-input","esri-feature-form__input",aa?"esri-feature-form__input--disabled":null,V&&!B?"esri-feature-form__input--invalid":null),key:R,minlength:-1<O?`${O}`:"",maxlength:-1<N?`${N}`:"",...this._getNumberFieldConstraints(y),readOnly:aa,value:null==J?"":`${J}`,"data-field":y,onfocus:this._handleInputFocus,oninput:this._handleInputInput,onblur:this._handleInputBlur,
onkeydown:this._handleInputKeyDown,onmousedown:"number"===K?this._handleNumberInputMouseDown:null,placeholder:"number"===K||"text"===K?E:"",required:h,tabIndex:ha?-1:0}};G._isFieldInClosedCollapsibleGroup=function(y){var t;return"all"===this.groupDisplay&&!(y&&y.inputFields)&&"collapsed"===(null==y?void 0:null==(t=y.group)?void 0:t.state)};G._handleNumberInputMouseDown=function({target:y}){y.focus();this.scheduleRender()};G._getNumberFieldConstraints=function(y){return(y=x.getDomainRange(y.domain)||
n.getFieldRange(y.field))&&y.max!==Number.MAX_VALUE&&y.min!==Number.MIN_VALUE?y:{min:null,max:null}};G._afterInputCreateOrUpdate=function(y){const t=y["data-field"],r=this.viewModel.findField(this._activeInputName),D=this._fieldToInitialIncompatibleDomainValue.get(t.name)===t.value;this._fieldFocusNeeded&&r===t&&("radio-buttons"!==t.editorType||D||y.checked)&&(this._fieldFocusNeeded=!1,y.focus())};G._handleInputFocus=function(y){y=y.target;const t=y["data-field"];this._activeInputName=t.name;"date"===
t.type&&this._syncDateFieldEdits(y)};G._handleInputBlur=function(y){const t=y.target,r=t["data-field"];if("date"===r.type){const E=y.relatedTarget;var D=E&&E["data-field"];if(D&&"date"===r.type&&"date"===D.type&&r.field===D.field){if(""!==t.value&&""===E.value){var v;D=E.getAttribute("data-date-part");E.value=this._formatDate(null!=(v=r.value)?v:Date.now())[D];this._parseDate(t.value,t.getAttribute("data-date-part"))&&this._commitInputValue(y.target,!0,!1)}return}}this._commitInputValue(t);this.scheduleRender()};
G._commitInputValue=function(y,t=!1,r=!0){const D=y["data-field"];if(this._activeDateFieldEdit){const {date:R,time:h}=this._activeDateFieldEdit,K=this._parseDateTime(y.value,D,R.active?"date":"time");y=null!==this.viewModel.getValue(D.name);const B=R.input&&(h.input||!D.includeTime),J=null===K;if(t)J||(B||!r||y)&&this._updateDateFieldValue(D,K);else{var v,E;if(""===(null==(v=R.input)?void 0:v.value)||""===(null==(E=h.input)?void 0:E.value))this._updateDateFieldValue(D,null);else if(B){var N,O;t=`${R.input.value} ${null!=
(N=null==(O=h.input)?void 0:O.value)?N:""}`;N=this._parseDateTime(t,D);null===N&&y||this._updateDateFieldValue(D,N)}this._activeDateFieldEdit=null}}else this._updateFieldValue(y)};G._handleInputKeyDown=function(y){const {key:t,altKey:r,ctrlKey:D,metaKey:v}=y;var E=y.target["data-field"];if("Enter"!==t){var {type:N}=E.field;E="single"===N||"double"===N;if(!("integer"!==N&&"small-integer"!==N&&!E||r||D||v)&&1===t.length){N=Number(t);const O=["-","+"],R=["e","."];E=E?[...O,...R]:O;isNaN(N)&&-1===E.indexOf(t)&&
y.preventDefault()}}else this._isFieldInClosedCollapsibleGroup(E)&&(E.group.state="expanded")};G._syncDateFieldEdits=function(y){var t,r;const D=y["data-field"];if("date"===D.type){var v=y.getAttribute("data-date-part"),E="date"===v?{value:y.value,input:y,active:!0}:{...null==(t=this._activeDateFieldEdit)?void 0:t.date,active:!1};y="time"===v?{value:y.value,input:y,active:!0}:{...null==(r=this._activeDateFieldEdit)?void 0:r.time,active:!1};this._activeDateFieldEdit={fieldName:D.name,date:E,time:y}}};
G._updateFieldValue=function(y){const t=y["data-field"];this.viewModel.setValue(t.name,this._parseValue(y));this._userUpdatedInputFieldNames.add(t.name)};G._updateDateFieldValue=function(y,t){this.viewModel.setValue(y.name,t);this._userUpdatedInputFieldNames.add(y.name)};G._parseValue=function(y){var t=y["data-field"],r=y.value;if("switch"===t.editorType&&!(y instanceof HTMLSelectElement))return y.switched?t.config.onValue:t.config.offValue;if("radio-buttons"===t.editorType&&"radio"===y.type&&!y.checked)return t.value;
var {type:D}=t;if("number"===D)return r?parseFloat(r):null;if("date"===D){if(!r)return null;D=Number(r);if(!isNaN(D))return D;y=y.getAttribute("data-date-part");r=this._parseDate(r,y);if(!r)return null;r=A.DateTime.fromJSDate(r);var v=t.domain;const E=A.DateTime.now();D=E;v&&"range"===v.type&&(v=A.DateTime.fromMillis(v.maxValue),E<v&&(D=v));t=this.viewModel.getValue(t.name);t=null!=t?A.DateTime.fromMillis(t):D;r="date"===y?r.set({hour:t.hour,minute:t.minute,second:t.second}):r.set({day:t.day,month:t.month,
year:t.year});return r.toMillis()}return r};G._handleOptionChange=function(y){this._commitInputValue(y.target);this.scheduleRender()};G._handleGroupClick=function(y){var t;const r=y.currentTarget["data-group"],D="expanded"===r.state,v="sequential"===this.groupDisplay;if(!D||y.target.closest(".esri-feature-form__group-header")){this._activeInputName=null==(t=this._getFocusableInput("forward",r))?void 0:t.name;if(v){y=y.target.closest(".esri-feature-form__group-header");if(D&&!y)return;this.viewModel.inputFields.forEach(E=>
{E&&E.inputFields&&E!==r&&(E.state="collapsed")})}r.state=D?"collapsed":"expanded";this._fieldFocusNeeded=v;this.scheduleRender()}};G._handleSubmit=function(y){y.preventDefault()};G._handleFormKeyDown=function(y){"Enter"===y.key&&this.viewModel.submit()};G._formatDate=function(y){if(null==y)return{date:"",time:""};y=A.DateTime.fromMillis(y,{locale:F.getLocale(),numberingSystem:"latn"});return{date:y.toLocaleString({year:"numeric",month:"2-digit",day:"2-digit"}),time:y.toFormat(u.timePattern)}};G._parseDate=
function(y,t){if(null==y||""===y)return null;const {timePattern:r,datePattern:D}=u;y=A.DateTime.fromFormat(y,t?"date"===t?D:r:`${D} ${r}`,{locale:F.getLocale(),numberingSystem:"latn"});return y.isValid?y.toJSDate():null};return M}(d);b.__decorate([w.aliasOf("viewModel.description")],z.prototype,"description",void 0);b.__decorate([w.aliasOf("viewModel.feature")],z.prototype,"feature",void 0);b.__decorate([w.aliasOf("viewModel.fieldConfig")],z.prototype,"fieldConfig",void 0);b.__decorate([w.aliasOf("viewModel.formTemplate")],
z.prototype,"formTemplate",void 0);b.__decorate([Q.property()],z.prototype,"groupDisplay",void 0);b.__decorate([Q.property()],z.prototype,"headingLevel",void 0);b.__decorate([Q.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],z.prototype,"label",void 0);b.__decorate([w.aliasOf("viewModel.layer")],z.prototype,"layer",void 0);b.__decorate([Q.property(),C.messageBundle("esri/widgets/FeatureForm/t9n/FeatureForm")],z.prototype,"messages",void 0);b.__decorate([w.aliasOf("viewModel.strict")],
z.prototype,"strict",void 0);b.__decorate([w.aliasOf("viewModel.title")],z.prototype,"title",void 0);b.__decorate([Q.property(),q.vmEvent(["value-change","submit"])],z.prototype,"viewModel",void 0);b.__decorate([w.aliasOf("viewModel.getValues")],z.prototype,"getValues",null);b.__decorate([w.aliasOf("viewModel.submit")],z.prototype,"submit",null);return z=b.__decorate([H.subclass("esri.widgets.FeatureForm")],z)})},"esri/widgets/FeatureForm/FeatureFormViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../intl ../../core/Evented ../../core/HandleOwner ../../core/Logger ../../core/ReentrantObjectPool ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../form/FormTemplate ../../support/arcadeOnDemand ./FieldConfig ./FieldGroupConfig ./InputField ./InputFieldGroup ./support/formTemplateUtils ../../intl/locale ../../intl/messages".split(" "),
function(f,c,b,z,w,L,T,W,Q,H,x,n,d,e,g,p,C,q,k,A,F,u){function l(y){return!!y.fieldConfig}const M=new b({attributes:{}}),G=T.getLogger("esri.widgets.FeatureForm.FeatureFormViewModel");b=function(y){function t(D){D=y.call(this,D)||this;D._arcade=null;D._fieldPool=new W.ReentrantObjectPool(q);D._fieldGroupPool=new W.ReentrantObjectPool(k);D._featureClone=M.clone();D._initialFeature=M.clone();D._needsArcade=!1;D.messages=null;D.strict=!1;return D}f._inheritsLoose(t,y);var r=t.prototype;r.initialize=
function(){var D=this;const v=function(){var N=f._asyncToGenerator(function*(){return D.messages=yield u.fetchMessageBundle("esri/widgets/FeatureForm/t9n/FeatureForm")});return function(){return N.apply(this,arguments)}}();v();this.handles.add(F.onLocaleChange(v));const E=Q.init(this,"fieldConfig",function(){var N=f._asyncToGenerator(function*(O){const R=[];O&&O.forEach(K=>{R.push(K.visibilityExpression);K.fieldConfig?K.fieldConfig.forEach(({requiredExpression:B,visibilityExpression:J})=>{R.push(B,
J)}):R.push(K.requiredExpression)});O=R.filter(K=>!!K);const h=0<O.length;if(h){const K=yield g.loadArcade(),{arcadeUtils:B}=K;O.some(J=>B.hasGeometryOperations(J))&&(yield B.enableGeometryOperations(),E.remove());D._arcade=K;D.notifyChange("inputFields")}D._needsArcade=h});return function(O){return N.apply(this,arguments)}}());this.handles.add(E)};r.destroy=function(){this.layer=this.feature=this.fieldConfig=null;this._fieldPool.destroy();this._fieldGroupPool.destroy()};r.castFieldConfig=function(D){return D?
D.map(v=>v instanceof p||v instanceof C?v:v.fieldConfig?new C(v):new p(v)):null};r.findField=function(D){return this._allInputFields.find(v=>v.name===D)};r.getValue=function(D){var v;const {_featureClone:E,layer:N}=this,O=!(null==N||!N.getField(D));return null!=(v=E.getAttribute(D))?v:O?null:void 0};r.setValue=function(D,v){const {_featureClone:E,strict:N}=this,O=this.findField(D);v=""===v?null:v;if(O&&E.getAttribute(D)!==v){O.value=v;if(this.get("layer.typeIdField")===O.name&&"types"in this.layer){const R=
new Set;this.layer.types.forEach(h=>Object.keys(h.domains).forEach(K=>R.add(K)));R.forEach(h=>{(h=this.findField(h))&&h.notifyChange("domain")})}if(!N||O.valid)E.setAttribute(D,v),this.notifyChange("inputFields"),this._emitChangeEvent(O)}};r.getValues=function(){return{...this._featureClone.attributes}};r.submit=function(){var D=this._allInputFields;const v=D.filter(N=>N.valid).map(({name:N})=>N);D=D.filter(N=>!N.valid).map(({name:N})=>N);const E=this.getValues();this.emit("submit",{valid:v,invalid:D,
values:E})};r._disposeInputOrGroup=function(D){D.inputFields?this._disposeGroup(D):this._disposeInput(D)};r._disposeGroup=function(D){D.inputFields.forEach(v=>this._disposeInput(v));this._fieldGroupPool.release(D)};r._disposeInput=function(D){this._fieldPool.release(D)};r._emitChangeEvent=function({name:D,valid:v,value:E}){this.emit("value-change",{layer:this.layer,feature:this.feature,fieldName:D,value:E,valid:v})};f._createClass(t,[{key:"_allInputFields",get:function(){return this.inputFields.reduce((D,
v)=>v.inputFields?[...D,...v.inputFields]:[...D,v],[])}},{key:"_inputFieldCache",get:function(){const D=this._get("_inputFieldCache")||new Map;D.forEach(v=>this._disposeInputOrGroup(v));D.clear();(this.get("layer.fields")||[]).forEach(v=>D.set(v,this._fieldPool.acquire()));return D}},{key:"_inputFieldGroupCache",get:function(){const D=this._get("_inputFieldGroupCache")||new Map;D.forEach(v=>this._disposeInputOrGroup(v));D.clear();(this.fieldConfig||[]).filter(l).forEach(v=>D.set(v,this._fieldGroupPool.acquire()));
return D}},{key:"description",get:function(){var D;return null==(D=this.formTemplate)?void 0:D.description},set:function(D){void 0===D?this._clearOverride("description"):this._override("description",D)}},{key:"feature",get:function(){return this._get("feature")},set:function(D){this._featureClone=D?D.clone():M.clone();this._initialFeature=this._featureClone.clone();this._set("feature",D)}},{key:"fieldConfig",get:function(){const {formTemplate:D}=this;if(!D)return null;const {config:v,encounteredUnsupportedTypes:E}=
A.fieldConfigsFromFormTemplate(D);0<E.length&&G.warn("form-info::unsupported-type","encountered unsupported elements/types when parsing form info",E);return v},set:function(D){D?this._override("fieldConfig",D):this._clearOverride("fieldConfig")}},{key:"formTemplate",get:function(){return this.layer&&"formTemplate"in this.layer?this.layer.formTemplate:null},set:function(D){void 0===D?this._clearOverride("formTemplate"):this._override("formTemplate",D)}},{key:"inputFields",get:function(){const {_arcade:D,
_inputFieldCache:v,_inputFieldGroupCache:E,_featureClone:N,messages:O,_needsArcade:R,layer:h,state:K}=this,B=N.clone();if("ready"!==K||R&&!D)return[];const J=this.get("layer.fields")||[],V=this.fieldConfig||[];return(0!==V.length?V.map(aa=>{if(aa.fieldConfig){const ra=E.get(aa);var ha=aa.fieldConfig.map(va=>{const wa=J.find(ja=>ja.name===va.name),ua=v.get(wa);ua.set({arcade:D,field:wa,config:va,feature:B,group:ra,initialFeature:this._initialFeature,layer:h,messages:O,value:this.getValue(wa.name)});
return ua}).filter(va=>va.visible);ra.set({arcade:D,config:aa,feature:B,inputFields:ha});return ra}ha=J.find(ra=>ra.name===aa.name);const la=v.get(ha);la.set({arcade:D,field:ha,config:aa,feature:B,group:null,initialFeature:this._initialFeature,layer:h,messages:O,value:this.getValue(ha.name)});return la}):J.map(aa=>{const ha=v.get(aa);ha.set({arcade:D,config:null,field:aa,feature:B,group:null,initialFeature:this._initialFeature,layer:h,messages:O,value:this.getValue(aa.name)});return ha})).filter(aa=>
aa.visible)}},{key:"layer",get:function(){var D;return null!=(D=this.feature)&&D.sourceLayer&&"applyEdits"in this.feature.sourceLayer?this.feature.sourceLayer:null},set:function(D){D?this._override("layer",D):this._clearOverride("layer")}},{key:"state",get:function(){return this.messages&&this.get("layer.loaded")?"ready":"disabled"}},{key:"title",get:function(){var D;return null==(D=this.formTemplate)?void 0:D.title},set:function(D){void 0===D?this._clearOverride("title"):this._override("title",D)}},
{key:"valid",get:function(){const D=this._allInputFields;return 0<D.length&&D.every(({valid:v})=>v)}}]);return t}(L.HandleOwnerMixin(w.EventedAccessor));c.__decorate([H.property({readOnly:!0})],b.prototype,"_allInputFields",null);c.__decorate([H.property({readOnly:!0})],b.prototype,"_inputFieldCache",null);c.__decorate([H.property({readOnly:!0})],b.prototype,"_inputFieldGroupCache",null);c.__decorate([H.property()],b.prototype,"description",null);c.__decorate([H.property()],b.prototype,"feature",
null);c.__decorate([H.property()],b.prototype,"fieldConfig",null);c.__decorate([n.cast("fieldConfig")],b.prototype,"castFieldConfig",null);c.__decorate([H.property({type:e})],b.prototype,"formTemplate",null);c.__decorate([H.property({readOnly:!0,dependsOn:"messages feature fieldConfig layer.fields layer.loaded state".split(" ")})],b.prototype,"inputFields",null);c.__decorate([H.property()],b.prototype,"layer",null);c.__decorate([H.property()],b.prototype,"messages",void 0);c.__decorate([H.property()],
b.prototype,"state",null);c.__decorate([H.property()],b.prototype,"strict",void 0);c.__decorate([H.property()],b.prototype,"title",null);c.__decorate([H.property()],b.prototype,"valid",null);c.__decorate([H.property()],b.prototype,"getValues",null);c.__decorate([H.property()],b.prototype,"submit",null);return b=c.__decorate([d.subclass("esri.widgets.FeatureForm.FeatureFormViewModel")],b)})},"esri/widgets/FeatureForm/FieldConfig":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./Format".split(" "),
function(f,c,b,z,w,L,T,W,Q){b=function(H){function x(n){n=H.call(this,n)||this;n.description=null;n.domain=null;n.editable=!0;n.editorType=null;n.format=null;n.hint=null;n.includeTime=!0;n.label=null;n.maxLength=-1;n.minLength=-1;n.name=null;n.noValueOptionLabel=null;n.offValue=null;n.onValue=null;n.required=!1;n.requiredExpression=null;n.showNoValueOption=!1;n.visibilityExpression=null;return n}f._inheritsLoose(x,H);return x}(b);c.__decorate([z.property()],b.prototype,"description",void 0);c.__decorate([z.property()],
b.prototype,"domain",void 0);c.__decorate([z.property()],b.prototype,"editable",void 0);c.__decorate([z.property()],b.prototype,"editorType",void 0);c.__decorate([z.property({type:Q})],b.prototype,"format",void 0);c.__decorate([z.property()],b.prototype,"hint",void 0);c.__decorate([z.property()],b.prototype,"includeTime",void 0);c.__decorate([z.property()],b.prototype,"label",void 0);c.__decorate([z.property()],b.prototype,"maxLength",void 0);c.__decorate([z.property()],b.prototype,"minLength",void 0);
c.__decorate([z.property()],b.prototype,"name",void 0);c.__decorate([z.property()],b.prototype,"noValueOptionLabel",void 0);c.__decorate([z.property()],b.prototype,"offValue",void 0);c.__decorate([z.property()],b.prototype,"onValue",void 0);c.__decorate([z.property()],b.prototype,"required",void 0);c.__decorate([z.property()],b.prototype,"requiredExpression",void 0);c.__decorate([z.property()],b.prototype,"showNoValueOption",void 0);c.__decorate([z.property()],b.prototype,"visibilityExpression",void 0);
return b=c.__decorate([W.subclass("esri.widgets.FeatureForm.FieldConfig")],b)})},"esri/widgets/FeatureForm/Format":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/date ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),function(f,c,b,z,w,L,T,W,Q){z=function(H){function x(n){n=H.call(this,n)||this;n.digitSeparator=
!1;n.dateFormat=null;n.places=null;return n}f._inheritsLoose(x,H);return x}(z.JSONSupport);c.__decorate([w.property()],z.prototype,"digitSeparator",void 0);c.__decorate([w.property({json:{read:{source:"dateFormat",reader:b.fromJSON}}})],z.prototype,"dateFormat",void 0);c.__decorate([w.property()],z.prototype,"places",void 0);return z=c.__decorate([Q.subclass("esri.widgets.FeatureForm.Format")],z)})},"esri/widgets/FeatureForm/FieldGroupConfig":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/decorators/cast ../../core/Logger ../../core/accessorSupport/decorators/subclass ./FieldConfig".split(" "),
function(f,c,b,z,w,L,T,W,Q){b=function(H){function x(n){n=H.call(this,n)||this;n.description=null;n.fieldConfig=null;n.label=null;n.state="expanded";n.visibilityExpression=null;return n}f._inheritsLoose(x,H);x.prototype.castFieldConfig=function(n){return n?n.map(d=>d.declaredClass?d:new Q(d)):null};return x}(b);c.__decorate([z.property()],b.prototype,"description",void 0);c.__decorate([z.property()],b.prototype,"fieldConfig",void 0);c.__decorate([L.cast("fieldConfig")],b.prototype,"castFieldConfig",
null);c.__decorate([z.property()],b.prototype,"label",void 0);c.__decorate([z.property()],b.prototype,"state",void 0);c.__decorate([z.property()],b.prototype,"visibilityExpression",void 0);return b=c.__decorate([W.subclass("esri.widgets.FeatureForm.FieldGroupConfig")],b)})},"esri/widgets/FeatureForm/InputField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../intl ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../layers/support/CodedValueDomain ../../layers/support/Domain ../../layers/support/InheritedDomain ../../layers/support/RangeDomain ../../layers/support/domainUtils ../../layers/support/fieldUtils ../../intl/substitute".split(" "),
function(f,c,b,z,w,L,T,W,Q,H,x,n,d,e,g,p){const C={type:"number"},q={type:"number",intlOptions:{notation:"scientific"}},k={type:"date",intlOptions:{day:"2-digit",month:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}};b=function(A){function F(l){l=A.call(this,l)||this;l.arcade=null;l.config=null;l.feature=null;l.field=null;l.initialFeature=null;l.layer=null;l.description=null;l.editorType=null;l.error=null;l.format=null;l.group=null;l.hint=null;l.messages=null;l.name=null;
return l}f._inheritsLoose(F,A);var u=F.prototype;u._isDomainCompatible=function(l){const {field:M}=this;if("coded-value"===(null==l?void 0:l.type)){const G=typeof l.codedValues[0].code;if("string"===G&&g.isStringField(M)||"number"===G&&g.isNumericField(M))return!0}return"range"===(null==l?void 0:l.type)&&g.isNumericField(M)||g.isDateField(M)?!0:!1};u._validate=function(){const {domain:l,field:M,initialFeature:G,minLength:y,required:t,type:r,valid:D,value:v}=this,E=t&&null===v,N=void 0!==D;return!E&&
G.getAttribute(M.name)===v&&N?null:"text"===r&&-1<y&&"string"===typeof v&&v.length<y?"length-validation-error::too-short":l?null!==v||t?e.validateDomainValue(l,v):null:E?g.TypeValidationError.INVALID_TYPE:g.validateFieldValue(M,v)};u._shownByDefault=function(){var l;const M=null==(l=this.field)?void 0:l.type;return"oid"!==M&&"global-id"!==M&&!this._isGeometryField()};u._isEditorField=function(){return-1<g.getFeatureEditFields(this.layer).indexOf(this.name)};u._isGeometryField=function(){return-1<
g.getFeatureGeometryFields(this.layer).indexOf(this.name)};u._toErrorMessage=function(){const {domain:l,field:M,messages:G,minLength:y,value:t,required:r,type:D}=this;var v=this.error;return r&&null===t?G.validationErrors.cannotBeNull:v===e.DomainValidationError.VALUE_OUT_OF_RANGE||v===g.NumericRangeValidationError.OUT_OF_RANGE?(v=e.getDomainRange(l)||g.getFieldRange(M),p.substitute(G.validationErrors.outsideRange,v,{format:{max:"date"===D?k:v.isInteger?C:q,min:"date"===D?k:v.isInteger?C:q}})):v===
e.DomainValidationError.INVALID_CODED_VALUE?G.validationErrors.invalidCodedValue:v===g.TypeValidationError.INVALID_TYPE?G.validationErrors.invalidType:"length-validation-error::too-short"===v?p.substitute(G.validationErrors.tooShort,{min:y}):null};f._createClass(F,[{key:"compiledFunc",get:function(){var l;const {arcade:M}=this;return M&&M.arcadeUtils.createFunction(null==(l=this.config)?void 0:l.visibilityExpression)}},{key:"compiledRequiredFunc",get:function(){var l;const {arcade:M}=this;return M&&
M.arcadeUtils.createFunction(null==(l=this.config)?void 0:l.requiredExpression)}},{key:"evaluatedRequirement",get:function(){const l=this.compiledRequiredFunc;if(!l)return null;const {arcade:M}=this;return M.arcadeUtils.executeFunction(l,M.arcadeUtils.createExecContext(this.feature))}},{key:"evaluatedVisibility",get:function(){const l=this.compiledFunc;if(!l)return null;const {arcade:M}=this;return M.arcadeUtils.executeFunction(l,M.arcadeUtils.createExecContext(this.feature))}},{key:"domain",get:function(){var l,
M,{typeIdField:G}=this.layer;const y=G===this.name;var t=null==(l=this.field)?void 0:l.domain;if(y&&!t)return new H({name:"__internal-type-based-coded-value-domain__",codedValues:this.layer.types.map(({id:r,name:D})=>({code:r,name:D}))});({feature:l}=this);G=G&&this.layer.getFieldDomain(this.name,{feature:l})||t;t=null==(M=this.config)?void 0:M.domain;return this._isDomainCompatible(t)?t:G}},{key:"editable",get:function(){var l;return this.layer.capabilities.operations.supportsEditing&&this.field.editable&&
!1!==(null==(l=this.config)?void 0:l.editable)}},{key:"errorMessage",get:function(){return this._toErrorMessage()}},{key:"includeTime",get:function(){var l;const M=null==(l=this.config)?void 0:l.includeTime;return void 0===M?!0:M}},{key:"label",get:function(){var l;return(null==(l=this.config)?void 0:l.label)||this.field.alias||this.field.name}},{key:"maxLength",get:function(){var l,M;if("date"===this.type)return-1;const G=null==(l=this.field)?void 0:l.length;l=null==(M=this.config)?void 0:M.maxLength;
return!isNaN(l)&&-1<=l&&(-1===G||l<=G)?l:G}},{key:"minLength",get:function(){var l,M;if("date"===this.type)return-1;const G=null==(l=this.field)?void 0:l.length;l=null==(M=this.config)?void 0:M.minLength;return!isNaN(l)&&-1<=l&&(-1===G||l<=G)?l:-1}},{key:"required",get:function(){var l,M;return this.editable?null!=(l=this.field)&&l.nullable?"boolean"===typeof this.evaluatedRequirement?this.evaluatedRequirement:!0===(null==(M=this.config)?void 0:M.required):!0:!1}},{key:"type",get:function(){const {field:l}=
this;return g.isNumericField(l)?"number":g.isStringField(l)?"text":g.isDateField(l)?"date":"unsupported"}},{key:"valid",get:function(){const l=this.editable?this._validate():null;this._set("error",l);return null===l}},{key:"value",get:function(){return this._get("value")},set:function(l){this.notifyChange("evaluatedVisibility");this._set("value",l)}},{key:"visible",get:function(){return this._isEditorField()?!1:"boolean"===typeof this.evaluatedVisibility?this.evaluatedVisibility:!!this.config||this._shownByDefault()}}]);
return F}(z);c.__decorate([w.property()],b.prototype,"arcade",void 0);c.__decorate([w.property()],b.prototype,"compiledFunc",null);c.__decorate([w.property()],b.prototype,"compiledRequiredFunc",null);c.__decorate([w.property()],b.prototype,"config",void 0);c.__decorate([w.property()],b.prototype,"evaluatedRequirement",null);c.__decorate([w.property()],b.prototype,"evaluatedVisibility",null);c.__decorate([w.property()],b.prototype,"feature",void 0);c.__decorate([w.property()],b.prototype,"field",void 0);
c.__decorate([w.property()],b.prototype,"initialFeature",void 0);c.__decorate([w.property()],b.prototype,"layer",void 0);c.__decorate([w.property({aliasOf:"config.description"})],b.prototype,"description",void 0);c.__decorate([w.property()],b.prototype,"domain",null);c.__decorate([w.property()],b.prototype,"editable",null);c.__decorate([w.property({aliasOf:"config.editorType"})],b.prototype,"editorType",void 0);c.__decorate([w.property({readOnly:!0})],b.prototype,"error",void 0);c.__decorate([w.property({dependsOn:["error",
"messages","value"]})],b.prototype,"errorMessage",null);c.__decorate([w.property({aliasOf:"config.format"})],b.prototype,"format",void 0);c.__decorate([w.property()],b.prototype,"group",void 0);c.__decorate([w.property({aliasOf:"config.hint"})],b.prototype,"hint",void 0);c.__decorate([w.property()],b.prototype,"includeTime",null);c.__decorate([w.property()],b.prototype,"label",null);c.__decorate([w.property()],b.prototype,"maxLength",null);c.__decorate([w.property()],b.prototype,"minLength",null);
c.__decorate([w.property()],b.prototype,"messages",void 0);c.__decorate([w.property({aliasOf:"field.name"})],b.prototype,"name",void 0);c.__decorate([w.property()],b.prototype,"required",null);c.__decorate([w.property()],b.prototype,"type",null);c.__decorate([w.property()],b.prototype,"valid",null);c.__decorate([w.property({value:null})],b.prototype,"value",null);c.__decorate([w.property()],b.prototype,"visible",null);return b=c.__decorate([Q.subclass("esri.widgets.FeatureForm.InputField")],b)})},
"esri/widgets/FeatureForm/InputFieldGroup":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/HandleOwner ../../core/accessorSupport/decorators/aliasOf ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass".split(" "),function(f,c,b,z,w,L,T,W,Q,H){b=function(x){function n(d){d=x.call(this,d)||this;d.arcade=null;d.config=null;d.description=
null;d.feature=null;d.label=null;d.state=null;d.visibilityExpression=null;return d}f._inheritsLoose(n,x);n.prototype._dirtyEvaluatedVisibility=function(){this.visibilityExpression&&this.notifyChange("evaluatedVisibility")};f._createClass(n,[{key:"compiledFunc",get:function(){const {arcade:d}=this;return d&&d.arcadeUtils.createFunction(this.visibilityExpression)}},{key:"evaluatedVisibility",get:function(){const d=this.compiledFunc;if(d){var {arcade:e}=this;return e.arcadeUtils.executeFunction(d,e.arcadeUtils.createExecContext(this.feature))}}},
{key:"inputFields",get:function(){return this._get("inputFields")},set:function(d){this.handles.removeAll();d&&this.handles.add(d.map(e=>e.watch("visible",this._dirtyEvaluatedVisibility)));this._set("inputFields",d)}},{key:"visible",get:function(){return!1!==this.evaluatedVisibility&&this.inputFields&&this.inputFields.some(d=>d.visible)}}]);return n}(z.HandleOwnerMixin(b));c.__decorate([Q.property()],b.prototype,"arcade",void 0);c.__decorate([Q.property()],b.prototype,"compiledFunc",null);c.__decorate([Q.property()],
b.prototype,"config",void 0);c.__decorate([Q.property()],b.prototype,"evaluatedVisibility",null);c.__decorate([w.aliasOf("config.description")],b.prototype,"description",void 0);c.__decorate([Q.property()],b.prototype,"feature",void 0);c.__decorate([Q.property()],b.prototype,"inputFields",null);c.__decorate([w.aliasOf("config.label")],b.prototype,"label",void 0);c.__decorate([w.aliasOf("config.state")],b.prototype,"state",void 0);c.__decorate([w.aliasOf("config.visibilityExpression")],b.prototype,
"visibilityExpression",void 0);c.__decorate([Q.property()],b.prototype,"visible",null);return b=c.__decorate([H.subclass("esri.widgets.FeatureForm.InputFieldGroup")],b)})},"esri/widgets/FeatureForm/support/formTemplateUtils":function(){define(["exports","../../../layers/support/RangeDomain","../FieldConfig","../FieldGroupConfig"],function(f,c,b,z){function w(L,T,W,Q=!0){return L.map(H=>{if("field"===H.type){{const {description:n,domain:d,editable:e,fieldName:g,hint:p,input:C,label:q,requiredExpression:k,
visibilityExpression:A}=H;H=new b({description:n,domain:d,editable:e,hint:p,label:q,name:g,requiredExpression:T[k]||null,visibilityExpression:T[A]||null});if(C)if("barcode-scanner"===C.type||"text-area"===C.type||"text-box"===C.type)H.editorType=C.type,H.minLength=C.minLength,H.maxLength=C.maxLength;else if("combo-box"===C.type||"radio-buttons"===C.type)H.editorType=C.type,H.noValueOptionLabel=C.noValueOptionLabel,H.showNoValueOption=C.showNoValueOption;else if("switch"===C.type)H.editorType=C.type,
H.offValue=C.offValue,H.onValue=C.onValue;else if("datetime-picker"===C.type){H.editorType=C.type;H.includeTime=C.includeTime;const {max:F,min:u}=C;if(F||u){var x="range"===(null==d?void 0:d.type)?Math.min(null==F?void 0:F.getTime(),d.maxValue):null==F?void 0:F.getTime();const l="range"===(null==d?void 0:d.type)?Math.max(null==u?void 0:u.getTime(),d.minValue):null==u?void 0:u.getTime();H.domain=new c({maxValue:x,minValue:l,name:"__internal-range-domain-based-on-datetime-picker-input__"})}}else W.push({type:"unsupported-input-type",
details:C})}return H}if("group"===H.type){if(!Q)return W.push({type:"nested-group",details:H}),null;x=T[H.visibilityExpression]||null;return new z({description:H.description,state:H.initialState,fieldConfig:w(H.elements,T,W,!1),label:H.label,visibilityExpression:x})}W.push({type:"unsupported-element-type",details:H});return null}).filter(H=>!!H)}f.fieldConfigsFromFormTemplate=function(L){var T;const W={},Q=[];null==(T=L.expressionInfos)?void 0:T.map(H=>W[H.name]=H.expression);return{config:w(L.elements,
W,Q),encounteredUnsupportedTypes:Q}};Object.defineProperty(f,"__esModule",{value:!0})})},"esri/widgets/support/Heading":function(){define("exports ../../core/mathUtils ./widgetUtils ../../core/has ../../core/Logger ./jsxFactory".split(" "),function(f,c,b,z,w,L){const T={heading:"esri-widget__heading"};f.CSS=T;f.Heading=function(W,Q){const H=`h${c.clamp(Math.ceil(W.level),1,6)}`;delete W.level;return L.tsx(H,{...W,class:b.classes(T.heading,W.class)},Q)};Object.defineProperty(f,"__esModule",{value:!0})})},
"esri/chunks/datetime":function(){define(["exports"],function(f){function c(a){return"undefined"===typeof a}function b(a){return"number"===typeof a}function z(a){return"number"===typeof a&&0===a%1}function w(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(a){return!1}}function L(a,m,P){if(0!==a.length)return a.reduce((Z,ba)=>{ba=[m(ba),ba];return Z?P(Z[0],ba[0])===Z[0]?Z:ba:ba},null)[1]}function T(a,m){return m.reduce((P,Z)=>{P[Z]=a[Z];return P},{})}function W(a,m){return Object.prototype.hasOwnProperty.call(a,
m)}function Q(a,m,P){return z(a)&&a>=m&&a<=P}function H(a,m=2){const P=0>a?"-":"";a=P?-1*a:a;m=a.toString().length<m?("0".repeat(m)+a).slice(-m):a.toString();return`${P}${m}`}function x(a){if(!c(a)&&null!==a&&""!==a)return parseInt(a,10)}function n(a){if(!c(a)&&null!==a&&""!==a)return a=1E3*parseFloat("0."+a),Math.floor(a)}function d(a,m,P=!1){m=10**m;return(P?Math.trunc:Math.round)(a*m)/m}function e(a){return 0===a%4&&(0!==a%100||0===a%400)}function g(a,m){var P=m-1;P=P-12*Math.floor(P/12)+1;return 2===
P?e(a+(m-P)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][P-1]}function p(a){let m=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);100>a.year&&0<=a.year&&(m=new Date(m),m.setUTCFullYear(m.getUTCFullYear()-1900));return+m}function C(a){var m=a-1;m=(m+Math.floor(m/4)-Math.floor(m/100)+Math.floor(m/400))%7;return 4===(a+Math.floor(a/4)-Math.floor(a/100)+Math.floor(a/400))%7||3===m?53:52}function q(a){return 99<a?a:60<a?1900+a:2E3+a}function k(a,m,P,Z=null){a=new Date(a);const ba=
{hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};Z&&(ba.timeZone=Z);return(m=(new Intl.DateTimeFormat(P,{timeZoneName:m,...ba})).formatToParts(a).find(ea=>"timezonename"===ea.type.toLowerCase()))?m.value:null}function A(a,m){a=parseInt(a,10);Number.isNaN(a)&&(a=0);m=parseInt(m,10)||0;m=0>a||Object.is(a,-0)?-m:m;return 60*a+m}function F(a){const m=Number(a);if("boolean"===typeof a||""===a||Number.isNaN(m))throw new Na(`Invalid unit value ${a}`);return m}
function u(a,m){const P={};for(const Z in a)if(W(a,Z)){const ba=a[Z];void 0!==ba&&null!==ba&&(P[m(Z)]=F(ba))}return P}function l(a,m){const P=Math.trunc(Math.abs(a/60)),Z=Math.trunc(Math.abs(a%60));a=0<=a?"+":"-";switch(m){case "short":return`${a}${H(P,2)}:${H(Z,2)}`;case "narrow":return`${a}${P}${0<Z?`:${Z}`:""}`;case "techie":return`${a}${H(P,2)}${H(Z,2)}`;default:throw new RangeError(`Value format ${m} is out of range for property format`);}}function M(a){return T(a,["hour","minute","second","millisecond"])}
function G(a){switch(a){case "narrow":return[...Ec];case "short":return[...Bb];case "long":return[...Fc];case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function y(a){switch(a){case "narrow":return[...Gc];case "short":return[...Cb];case "long":return[...Db];case "numeric":return"1234567".split("");default:return null}}function t(a){switch(a){case "narrow":return[...Hc];case "short":return[...Ic];
case "long":return[...Jc];default:return null}}function r(a,m,P="always",Z=!1){const ba={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]};var ea=-1===["hours","minutes","seconds"].indexOf(a);if("auto"===P&&ea)switch(P="days"===a,m){case 1:return P?"tomorrow":`next ${ba[a][0]}`;case -1:return P?"yesterday":`last ${ba[a][0]}`;case 0:return P?"today":`this ${ba[a][0]}`}P=
Object.is(m,-0)||0>m;m=Math.abs(m);ea=1===m;const ma=ba[a];a=Z?ea?ma[1]:ma[2]||ma[1]:ea?ba[a][0]:a;return P?`${m} ${a} ago`:`in ${m} ${a}`}function D(a,m){let P="";for(const Z of a)P=Z.literal?P+Z.val:P+m(Z.val);return P}function v(a,m){let P;if(c(a)||null===a)return m;if(a instanceof $a)return a;if("string"===typeof a){const Z=a.toLowerCase();return"local"===Z||"system"===Z?m:"utc"===Z||"gmt"===Z?La.utcInstance:null!=(P=Pa.parseGMTOffset(a))?La.instance(P):Pa.isValidSpecifier(Z)?Pa.create(a):La.parseSpecifier(Z)||
new Eb(a)}return b(a)?La.instance(a):"object"===typeof a&&a.offset&&"number"===typeof a.offset?a:new Eb(a)}function E(a,m={}){const P=JSON.stringify([a,m]);let Z=lb[P];Z||(Z=new Intl.DateTimeFormat(a,m),lb[P]=Z);return Z}function N(a,m={}){const P=JSON.stringify([a,m]);let Z=mb[P];Z||(Z=new Intl.NumberFormat(a,m),mb[P]=Z);return Z}function O(a,m={}){const {base:P,...Z}=m,ba=JSON.stringify([a,Z]);let ea=nb[ba];ea||(ea=new Intl.RelativeTimeFormat(a,m),nb[ba]=ea);return ea}function R(a){const m=[];for(let P=
1;12>=P;P++){const Z=ya.utc(2016,P,1);m.push(a(Z))}return m}function h(a){const m=[];for(let P=1;7>=P;P++){const Z=ya.utc(2016,11,13+P);m.push(a(Z))}return m}function K(a,m,P,Z,ba){a=a.listingMode(P);return"error"===a?null:"en"===a?Z(m):ba(m)}function B(...a){a=a.reduce((m,P)=>m+P.source,"");return RegExp(`^${a}$`)}function J(...a){return m=>a.reduce(([P,Z,ba],ea)=>{const [ma,oa,sa]=ea(m,ba);return[{...P,...ma},Z||oa,sa]},[{},null,1]).slice(0,2)}function V(a,...m){if(null==a)return[null,null];for(const [P,
Z]of m)if(m=P.exec(a))return Z(m);return[null,null]}function aa(...a){return(m,P)=>{const Z={};let ba;for(ba=0;ba<a.length;ba++)Z[a[ba]]=x(m[P+ba]);return[Z,null,P+ba]}}function ha(a,m,P){a=a[m];return c(a)?P:x(a)}function la(a,m){return[{year:ha(a,m),month:ha(a,m+1,1),day:ha(a,m+2,1)},null,m+3]}function ra(a,m){return[{hours:ha(a,m,0),minutes:ha(a,m+1,0),seconds:ha(a,m+2,0),milliseconds:n(a[m+3])},null,m+4]}function va(a,m){const P=!a[m]&&!a[m+1];a=A(a[m+1],a[m+2]);return[{},P?null:La.instance(a),
m+3]}function wa(a,m){return[{},a[m]?Pa.create(a[m]):null,m+1]}function ua(a){const [m,P,Z,ba,ea,ma,oa,sa,Ca]=a,xa="-"===m[0];a=sa&&"-"===sa[0];const Ba=(Da,Ra=!1)=>void 0!==Da&&(Ra||Da&&xa)?-Da:Da;return[{years:Ba(x(P)),months:Ba(x(Z)),weeks:Ba(x(ba)),days:Ba(x(ea)),hours:Ba(x(ma)),minutes:Ba(x(oa)),seconds:Ba(x(sa),"-0"===sa),milliseconds:Ba(n(Ca),a)}]}function ja(a,m,P,Z,ba,ea,ma){m={year:2===m.length?q(x(m)):x(m),month:Bb.indexOf(P)+1,day:x(Z),hour:x(ba),minute:x(ea)};ma&&(m.second=x(ma));a&&
(m.weekday=3<a.length?Db.indexOf(a)+1:Cb.indexOf(a)+1);return m}function X(a){const [,m,P,Z,ba,ea,ma,oa,sa,Ca,xa,Ba]=a;a=ja(m,ba,Z,P,ea,ma,oa);let Da;Da=sa?Kc[sa]:Ca?0:A(xa,Ba);return[a,new La(Da)]}function I(a){const [,m,P,Z,ba,ea,ma,oa]=a;return[ja(m,ba,Z,P,ea,ma,oa),La.utcInstance]}function S(a){const [,m,P,Z,ba,ea,ma,oa]=a;return[ja(m,oa,P,Z,ba,ea,ma),La.utcInstance]}function Y(a,m,P=!1){a={values:P?m.values:{...a.values,...m.values||{}},loc:a.loc.clone(m.loc),conversionAccuracy:m.conversionAccuracy||
a.conversionAccuracy};return new Ea(a)}function U(a,m,P,Z,ba){a=a[ba][P];var ea=m[P]/a;ea=Math.sign(ea)!==Math.sign(Z[ba])&&0!==Z[ba]&&1>=Math.abs(ea)?0>ea?Math.floor(ea):Math.ceil(ea):Math.trunc(ea);Z[ba]+=ea;m[P]-=ea*a}function da(a,m){Lc.reduce((P,Z)=>{if(c(m[Z]))return P;P&&U(a,m,P,m,Z);return Z},null)}function ca(a){if(b(a))return Ea.fromMillis(a);if(Ea.isDuration(a))return a;if("object"===typeof a)return Ea.fromObject(a);throw new Na(`Unknown duration argument ${a} of type ${typeof a}`);}function ia(a,
m){a=m.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()-a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf();return Math.floor(Ea.fromMillis(a).as("days"))}function fa(a,m,P){var Z=[["years",(oa,sa)=>sa.year-oa.year],["quarters",(oa,sa)=>sa.quarter-oa.quarter],["months",(oa,sa)=>sa.month-oa.month+12*(sa.year-oa.year)],["weeks",(oa,sa)=>{oa=ia(oa,sa);return(oa-oa%7)/7}],["days",ia]];const ba={};let ea,ma;for(const [oa,sa]of Z)0<=P.indexOf(oa)&&(ea=oa,Z=sa(a,m),ma=a.plus({[oa]:Z}),ma>m?(a=a.plus({[oa]:Z-
1}),--Z):a=ma,ba[oa]=Z);return[a,ba,ma,ea]}function ta(a,m,P,Z){let [ba,ea,ma,oa]=fa(a,m,P);a=m-ba;P=P.filter(sa=>0<=["hours","minutes","seconds","milliseconds"].indexOf(sa));0===P.length&&(ma<m&&(ma=ba.plus({[oa]:1})),ma!==ba&&(ea[oa]=(ea[oa]||0)+a/(ma-ba)));m=Ea.fromObject(ea,Z);return 0<P.length?Ea.fromMillis(a,Z).shiftTo(...P).plus(m):m}function pa({numberingSystem:a},m=""){return new RegExp(`${ob[a||"latn"]}${m}`)}function ka(a,m=P=>P){return{regex:a,deser:([P])=>{{let Z=parseInt(P,10);if(isNaN(Z)){Z=
"";for(let ba=0;ba<P.length;ba++){const ea=P.charCodeAt(ba);if(-1!==P[ba].search(ob.hanidec))Z+=Mc.indexOf(P[ba]);else for(const ma in Fb){const [oa,sa]=Fb[ma];ea>=oa&&ea<=sa&&(Z+=ea-oa)}}P=parseInt(Z,10)}else P=Z}return m(P)}}}function na(a){return a.replace(/\./g,"\\.?").replace(pb,Gb)}function qa(a,m){return null===a?null:{regex:RegExp(a.map(na).join("|")),deser:([P])=>a.findIndex(Z=>P.replace(/\./g,"").replace(pb," ").toLowerCase()===Z.replace(/\./g,"").replace(pb," ").toLowerCase())+m}}function Aa(a,
m){return{regex:a,deser:([,P,Z])=>A(P,Z),groups:m}}function za(a){return{regex:a,deser:([m])=>m}}function Fa(a,m){const P=pa(m),Z=pa(m,"{2}"),ba=pa(m,"{3}"),ea=pa(m,"{4}"),ma=pa(m,"{6}"),oa=pa(m,"{1,2}"),sa=pa(m,"{1,3}"),Ca=pa(m,"{1,6}"),xa=pa(m,"{1,9}"),Ba=pa(m,"{2,4}"),Da=pa(m,"{4,6}"),Ra=ab=>({regex:RegExp(ab.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:([Nc])=>Nc,literal:!0}),Wa=(ab=>{if(a.literal)return Ra(ab);switch(ab.val){case "G":return qa(m.eras("short",!1),0);case "GG":return qa(m.eras("long",
!1),0);case "y":return ka(Ca);case "yy":return ka(Ba,q);case "yyyy":return ka(ea);case "yyyyy":return ka(Da);case "yyyyyy":return ka(ma);case "M":return ka(oa);case "MM":return ka(Z);case "MMM":return qa(m.months("short",!0,!1),1);case "MMMM":return qa(m.months("long",!0,!1),1);case "L":return ka(oa);case "LL":return ka(Z);case "LLL":return qa(m.months("short",!1,!1),1);case "LLLL":return qa(m.months("long",!1,!1),1);case "d":return ka(oa);case "dd":return ka(Z);case "o":return ka(sa);case "ooo":return ka(ba);
case "HH":return ka(Z);case "H":return ka(oa);case "hh":return ka(Z);case "h":return ka(oa);case "mm":return ka(Z);case "m":return ka(oa);case "q":return ka(oa);case "qq":return ka(Z);case "s":return ka(oa);case "ss":return ka(Z);case "S":return ka(sa);case "SSS":return ka(ba);case "u":return za(xa);case "a":return qa(m.meridiems(),0);case "kkkk":return ka(ea);case "kk":return ka(Ba,q);case "W":return ka(oa);case "WW":return ka(Z);case "E":case "c":return ka(P);case "EEE":return qa(m.weekdays("short",
!1,!1),1);case "EEEE":return qa(m.weekdays("long",!1,!1),1);case "ccc":return qa(m.weekdays("short",!0,!1),1);case "cccc":return qa(m.weekdays("long",!0,!1),1);case "Z":case "ZZ":return Aa(new RegExp(`([+-]${oa.source})(?::(${Z.source}))?`),2);case "ZZZ":return Aa(new RegExp(`([+-]${oa.source})(${Z.source})?`),2);case "z":return za(/[a-z_+-/]{1,256}?/i);default:return Ra(ab)}})(a)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};Wa.token=a;return Wa}function Ka(a){return[`^${a.map(m=>
m.regex).reduce((m,P)=>`${m}(${P.source})`,"")}$`,a]}function Ia(a,m,P){if(a=a.match(m)){m={};let Z=1;for(const ba in P)if(W(P,ba)){const ea=P[ba],ma=ea.groups?ea.groups+1:1;!ea.literal&&ea.token&&(m[ea.token.val[0]]=ea.deser(a.slice(Z,Z+ma)));Z+=ma}return[a,m]}return[a,{}]}function Sa(a){const m=Z=>{switch(Z){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";
case "E":case "c":return"weekday";case "W":return"weekNumber";case "k":return"weekYear";case "q":return"quarter";default:return null}};let P;P=c(a.Z)?c(a.z)?null:Pa.create(a.z):new La(a.Z);c(a.q)||(a.M=3*(a.q-1)+1);c(a.h)||(12>a.h&&1===a.a?a.h+=12:12===a.h&&0===a.a&&(a.h=0));0===a.G&&a.y&&(a.y=-a.y);c(a.u)||(a.S=n(a.u));return[Object.keys(a).reduce((Z,ba)=>{const ea=m(ba);ea&&(Z[ea]=a[ba]);return Z},{}),P]}function Ta(){qb||(qb=ya.fromMillis(1555555555555));return qb}function Xa(a,m){if(a.literal)return a;
const P=Ma.macroTokenToFormatOpts(a.val);if(!P)return a;m=Ma.create(m,P).formatDateTimeParts(Ta()).map(Z=>{{const {type:ea,value:ma}=Z;if("literal"===ea)Z={literal:!0,val:ma};else{Z=P[ea];var ba=Oc[ea];"object"===typeof ba&&(ba=ba[Z]);Z=ba?{literal:!1,val:ba}:void 0}}return Z});return m.includes(void 0)?a:m}function Pc(a,m){return Array.prototype.concat(...a.map(P=>Xa(P,m)))}function Hb(a,m,P){P=Pc(Ma.parseFormat(P),a);var Z=P.map(ea=>Fa(ea,a));const ba=Z.find(ea=>ea.invalidReason);if(ba)return{input:m,
tokens:P,invalidReason:ba.invalidReason};{const [ea,ma]=Ka(Z);Z=RegExp(ea,"i");const [oa,sa]=Ia(m,Z,ma),[Ca,xa]=sa?Sa(sa):[null,null];if(W(sa,"a")&&W(sa,"H"))throw new bb("Can't include meridiem when specifying 24-hour format");return{input:m,tokens:P,regex:Z,rawMatches:oa,matches:sa,result:Ca,zone:xa}}}function Oa(a,m){return new Qa("unit out of range",`you specified ${m} (of type ${typeof m}) as a ${a}, which is invalid`)}function Ib(a,m,P){a=(new Date(Date.UTC(a,m-1,P))).getUTCDay();return 0===
a?7:a}function Jb(a,m){a=e(a)?rb:sb;const P=a.findIndex(Z=>Z<m);return{month:P+1,day:m-a[P]}}function tb(a){const {year:m,month:P,day:Z}=a;var ba=Z+(e(m)?rb:sb)[P-1];const ea=Ib(m,P,Z);ba=Math.floor((ba-ea+10)/7);let ma;1>ba?(ma=m-1,ba=C(ma)):ba>C(m)?(ma=m+1,ba=1):ma=m;return{weekYear:ma,weekNumber:ba,weekday:ea,...M(a)}}function Kb(a){const {weekYear:m,weekNumber:P,weekday:Z}=a;var ba=Ib(m,1,4),ea=e(m)?366:365;ba=7*P+Z-ba-3;1>ba?(ea=m-1,ba+=e(ea)?366:365):ba>ea?(ea=m+1,ba-=e(m)?366:365):ea=m;const {month:ma,
day:oa}=Jb(ea,ba);return{year:ea,month:ma,day:oa,...M(a)}}function ub(a){const {year:m,month:P,day:Z}=a;var ba=Z+(e(m)?rb:sb)[P-1];return{year:m,ordinal:ba,...M(a)}}function Lb(a){const {year:m,ordinal:P}=a,{month:Z,day:ba}=Jb(m,P);return{year:m,month:Z,day:ba,...M(a)}}function Mb(a){const m=z(a.year),P=Q(a.month,1,12),Z=Q(a.day,1,g(a.year,a.month));return m?P?Z?!1:Oa("day",a.day):Oa("month",a.month):Oa("year",a.year)}function Nb(a){const {hour:m,minute:P,second:Z,millisecond:ba}=a;a=Q(m,0,23)||24===
m&&0===P&&0===Z&&0===ba;const ea=Q(P,0,59),ma=Q(Z,0,59),oa=Q(ba,0,999);return a?ea?ma?oa?!1:Oa("millisecond",ba):Oa("second",Z):Oa("minute",P):Oa("hour",m)}function fb(a){return new Qa("unsupported zone",`the zone "${a.name}" is not supported`)}function vb(a){null===a.weekData&&(a.weekData=tb(a.c));return a.weekData}function cb(a,m){a={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};return new ya({...a,...m,old:a})}function Ob(a,m,P){let Z=a-6E4*m;const ba=P.offset(Z);if(m===ba)return[Z,
m];Z-=6E4*(ba-m);m=P.offset(Z);return ba===m?[Z,ba]:[a-6E4*Math.min(ba,m),Math.max(ba,m)]}function Pb(a,m){a=new Date(a+6E4*m);return{year:a.getUTCFullYear(),month:a.getUTCMonth()+1,day:a.getUTCDate(),hour:a.getUTCHours(),minute:a.getUTCMinutes(),second:a.getUTCSeconds(),millisecond:a.getUTCMilliseconds()}}function gb(a,m,P){return Ob(p(a),m,P)}function Qb(a,m){const P=a.o;var Z=a.c.year+Math.trunc(m.years);const ba=a.c.month+Math.trunc(m.months)+3*Math.trunc(m.quarters);Z={...a.c,year:Z,month:ba,
day:Math.min(a.c.day,g(Z,ba))+Math.trunc(m.days)+7*Math.trunc(m.weeks)};m=Ea.fromObject({years:m.years-Math.trunc(m.years),quarters:m.quarters-Math.trunc(m.quarters),months:m.months-Math.trunc(m.months),weeks:m.weeks-Math.trunc(m.weeks),days:m.days-Math.trunc(m.days),hours:m.hours,minutes:m.minutes,seconds:m.seconds,milliseconds:m.milliseconds}).as("milliseconds");Z=p(Z);let [ea,ma]=Ob(Z,P,a.zone);0!==m&&(ea+=m,ma=a.zone.offset(ea));return{ts:ea,o:ma}}function db(a,m,P,Z,ba){const {setZone:ea,zone:ma}=
P;return a&&0!==Object.keys(a).length?(a=ya.fromObject(a,{...P,zone:m||ma}),ea?a:a.setZone(ma)):ya.invalid(new Qa("unparsable",`the input "${ba}" can't be parsed as ${Z}`))}function Ya(a,m,P=!0){return a.isValid?Ma.create(Ga.create("en-US"),{allowZ:P,forceSimple:!0}).formatDateTimeFromString(a,m):null}function Rb(a,{suppressSeconds:m=!1,suppressMilliseconds:P=!1,includeOffset:Z,includePrefix:ba=!1,includeZone:ea=!1,spaceZone:ma=!1,format:oa="extended"}){let sa="basic"===oa?"HHmm":"HH:mm";m&&0===a.second&&
0===a.millisecond||(sa+="basic"===oa?"ss":":ss",P&&0===a.millisecond||(sa+=".SSS"));(ea||Z)&&ma&&(sa+=" ");ea?sa+="z":Z&&(sa+="basic"===oa?"ZZZ":"ZZ");a=Ya(a,sa);ba&&(a="T"+a);return a}function Sb(a){const m={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",
weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!m)throw new Tb(a);return m}function Ub(a,m){const P=v(m.zone,Ja.defaultZone);m=Ga.fromObject(m);const Z=Ja.now();var ba;if(c(a.year))a=Z;else{for(const ea of Vb)c(a[ea])&&(a[ea]=Wb[ea]);if(ba=Mb(a)||Nb(a))return ya.invalid(ba);ba=P.offset(Z);[a,ba]=gb(a,ba,P)}return new ya({ts:a,zone:P,loc:m,o:ba})}function Xb(a,m,P){const Z=c(P.round)?!0:P.round,
ba=(ma,oa)=>{ma=d(ma,Z||P.calendary?0:2,!0);return m.loc.clone(P).relFormatter(P).format(ma,oa)},ea=ma=>P.calendary?m.hasSame(a,ma)?0:m.startOf(ma).diff(a.startOf(ma),ma).get(ma):m.diff(a,ma).get(ma);if(P.unit)return ba(ea(P.unit),P.unit);for(const ma of P.units){const oa=ea(ma);if(1<=Math.abs(oa))return ba(oa,ma)}return ba(a>m?-0:0,P.units[P.units.length-1])}function Yb(a){let m={};0<a.length&&"object"===typeof a[a.length-1]?(m=a[a.length-1],a=Array.from(a).slice(0,a.length-1)):a=Array.from(a);return[m,
a]}function eb(a){if(ya.isDateTime(a))return a;if(a&&a.valueOf&&b(a.valueOf()))return ya.fromJSDate(a);if(a&&"object"===typeof a)return ya.fromObject(a);throw new Na(`Unknown datetime argument: ${a}, of type ${typeof a}`);}class Va extends Error{}class Qc extends Va{constructor(a){super(`Invalid DateTime: ${a.toMessage()}`)}}class Rc extends Va{constructor(a){super(`Invalid Interval: ${a.toMessage()}`)}}class Sc extends Va{constructor(a){super(`Invalid Duration: ${a.toMessage()}`)}}class bb extends Va{}
class Tb extends Va{constructor(a){super(`Invalid unit ${a}`)}}class Na extends Va{}class Ua extends Va{constructor(){super("Zone is an abstract class")}}const wb={year:"numeric",month:"numeric",day:"numeric"},Zb={year:"numeric",month:"short",day:"numeric"},Tc={year:"numeric",month:"short",day:"numeric",weekday:"short"},$b={year:"numeric",month:"long",day:"numeric"},ac={year:"numeric",month:"long",day:"numeric",weekday:"long"},bc={hour:"numeric",minute:"numeric"},cc={hour:"numeric",minute:"numeric",
second:"numeric"},dc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},ec={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},fc={hour:"numeric",minute:"numeric",hourCycle:"h23"},gc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},hc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"short"},ic={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},jc={year:"numeric",month:"numeric",
day:"numeric",hour:"numeric",minute:"numeric"},kc={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},lc={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},mc={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},Uc={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},nc={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},
oc={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},pc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},qc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},rc=/[A-Za-z_+-]{1,256}(:?\/[A-Za-z_+-]{1,256}(\/[A-Za-z_+-]{1,256})?)?/,Fc="January February March April May June July August September October November December".split(" "),
Bb="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Ec="JFMAMJJASOND".split(""),Db="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),Cb="Mon Tue Wed Thu Fri Sat Sun".split(" "),Gc="MTWTFSS".split(""),sc=["AM","PM"],Jc=["Before Christ","Anno Domini"],Ic=["BC","AD"],Hc=["B","A"],Vc={D:wb,DD:Zb,DDD:$b,DDDD:ac,t:bc,tt:cc,ttt:dc,tttt:ec,T:fc,TT:gc,TTT:hc,TTTT:ic,f:jc,ff:lc,fff:nc,ffff:pc,F:kc,FF:mc,FFF:oc,FFFF:qc};class Ma{static create(a,m={}){return new Ma(a,m)}static parseFormat(a){let m=
null,P="",Z=!1;const ba=[];for(let ea=0;ea<a.length;ea++){const ma=a.charAt(ea);"'"===ma?(0<P.length&&ba.push({literal:Z,val:P}),m=null,P="",Z=!Z):Z?P+=ma:ma===m?P+=ma:(0<P.length&&ba.push({literal:!1,val:P}),m=P=ma)}0<P.length&&ba.push({literal:Z,val:P});return ba}static macroTokenToFormatOpts(a){return Vc[a]}constructor(a,m){this.opts=m;this.loc=a;this.systemLoc=null}formatWithSystemDefault(a,m){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(a,
{...this.opts,...m}).format()}formatDateTime(a,m={}){return this.loc.dtFormatter(a,{...this.opts,...m}).format()}formatDateTimeParts(a,m={}){return this.loc.dtFormatter(a,{...this.opts,...m}).formatToParts()}resolvedOptions(a,m={}){return this.loc.dtFormatter(a,{...this.opts,...m}).resolvedOptions()}num(a,m=0){if(this.opts.forceSimple)return H(a,m);const P={...this.opts};0<m&&(P.padTo=m);return this.loc.numberFormatter(P).format(a)}formatDateTimeFromString(a,m){const P="en"===this.loc.listingMode(),
Z=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,ba=(xa,Ba)=>this.loc.extract(a,xa,Ba),ea=xa=>a.isOffsetFixed&&0===a.offset&&xa.allowZ?"Z":a.isValid?a.zone.formatOffset(a.ts,xa.format):"",ma=(xa,Ba)=>P?G(xa)[a.month-1]:ba(Ba?{month:xa}:{month:xa,day:"numeric"},"month"),oa=(xa,Ba)=>P?y(xa)[a.weekday-1]:ba(Ba?{weekday:xa}:{weekday:xa,month:"long",day:"numeric"},"weekday"),sa=xa=>{const Ba=Ma.macroTokenToFormatOpts(xa);return Ba?this.formatWithSystemDefault(a,Ba):xa},Ca=xa=>P?t(xa)[0>a.year?
0:1]:ba({era:xa},"era");return D(Ma.parseFormat(m),xa=>{switch(xa){case "S":return this.num(a.millisecond);case "u":case "SSS":return this.num(a.millisecond,3);case "s":return this.num(a.second);case "ss":return this.num(a.second,2);case "m":return this.num(a.minute);case "mm":return this.num(a.minute,2);case "h":return this.num(0===a.hour%12?12:a.hour%12);case "hh":return this.num(0===a.hour%12?12:a.hour%12,2);case "H":return this.num(a.hour);case "HH":return this.num(a.hour,2);case "Z":return ea({format:"narrow",
allowZ:this.opts.allowZ});case "ZZ":return ea({format:"short",allowZ:this.opts.allowZ});case "ZZZ":return ea({format:"techie",allowZ:this.opts.allowZ});case "ZZZZ":return a.zone.offsetName(a.ts,{format:"short",locale:this.loc.locale});case "ZZZZZ":return a.zone.offsetName(a.ts,{format:"long",locale:this.loc.locale});case "z":return a.zoneName;case "a":return P?sc[12>a.hour?0:1]:ba({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return Z?ba({day:"numeric"},"day"):this.num(a.day);case "dd":return Z?
ba({day:"2-digit"},"day"):this.num(a.day,2);case "c":return this.num(a.weekday);case "ccc":return oa("short",!0);case "cccc":return oa("long",!0);case "ccccc":return oa("narrow",!0);case "E":return this.num(a.weekday);case "EEE":return oa("short",!1);case "EEEE":return oa("long",!1);case "EEEEE":return oa("narrow",!1);case "L":return Z?ba({month:"numeric",day:"numeric"},"month"):this.num(a.month);case "LL":return Z?ba({month:"2-digit",day:"numeric"},"month"):this.num(a.month,2);case "LLL":return ma("short",
!0);case "LLLL":return ma("long",!0);case "LLLLL":return ma("narrow",!0);case "M":return Z?ba({month:"numeric"},"month"):this.num(a.month);case "MM":return Z?ba({month:"2-digit"},"month"):this.num(a.month,2);case "MMM":return ma("short",!1);case "MMMM":return ma("long",!1);case "MMMMM":return ma("narrow",!1);case "y":return Z?ba({year:"numeric"},"year"):this.num(a.year);case "yy":return Z?ba({year:"2-digit"},"year"):this.num(a.year.toString().slice(-2),2);case "yyyy":return Z?ba({year:"numeric"},
"year"):this.num(a.year,4);case "yyyyyy":return Z?ba({year:"numeric"},"year"):this.num(a.year,6);case "G":return Ca("short");case "GG":return Ca("long");case "GGGGG":return Ca("narrow");case "kk":return this.num(a.weekYear.toString().slice(-2),2);case "kkkk":return this.num(a.weekYear,4);case "W":return this.num(a.weekNumber);case "WW":return this.num(a.weekNumber,2);case "o":return this.num(a.ordinal);case "ooo":return this.num(a.ordinal,3);case "q":return this.num(a.quarter);case "qq":return this.num(a.quarter,
2);case "X":return this.num(Math.floor(a.ts/1E3));case "x":return this.num(a.ts);default:return sa(xa)}})}formatDurationFromString(a,m){const P=ba=>{switch(ba[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";case "M":return"month";case "y":return"year";default:return null}};m=Ma.parseFormat(m);const Z=m.reduce((ba,{literal:ea,val:ma})=>ea?ba:ba.concat(ma),[]);a=a.shiftTo(...Z.map(P).filter(ba=>ba));return D(m,(ba=>ea=>{const ma=
P(ea);return ma?this.num(ba.get(ma),ea.length):ea})(a))}}class Qa{constructor(a,m){this.reason=a;this.explanation=m}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}class $a{get type(){throw new Ua;}get name(){throw new Ua;}get isUniversal(){throw new Ua;}offsetName(a,m){throw new Ua;}formatOffset(a,m){throw new Ua;}offset(a){throw new Ua;}equals(a){throw new Ua;}get isValid(){throw new Ua;}}let xb=null;class tc extends $a{static get instance(){null===xb&&(xb=
new tc);return xb}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(a,{format:m,locale:P}){return k(a,m,P)}formatOffset(a,m){return l(this.offset(a),m)}offset(a){return-(new Date(a)).getTimezoneOffset()}equals(a){return"system"===a.type}get isValid(){return!0}}const Wc=RegExp(`^${rc.source}$`);let hb={};const Xc={year:0,month:1,day:2,hour:3,minute:4,second:5};let ib={};class Pa extends $a{static create(a){ib[a]||(ib[a]=
new Pa(a));return ib[a]}static resetCache(){ib={};hb={}}static isValidSpecifier(a){return!(!a||!a.match(Wc))}static isValidZone(a){try{return(new Intl.DateTimeFormat("en-US",{timeZone:a})).format(),!0}catch(m){return!1}}static parseGMTOffset(a){return a&&(a=a.match(/^Etc\/GMT(0|[+-]\d{1,2})$/i))?-60*parseInt(a[1]):null}constructor(a){super();this.zoneName=a;this.valid=Pa.isValidZone(a)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(a,{format:m,locale:P}){return k(a,
m,P,this.name)}formatOffset(a,m){return l(this.offset(a),m)}offset(a){a=new Date(a);if(isNaN(a))return NaN;var m=this.name;hb[m]||(hb[m]=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:m,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}));m=hb[m];if(m.formatToParts){m=m.formatToParts(a);var P=[];for(let Ca=0;Ca<m.length;Ca++){const {type:xa,value:Ba}=m[Ca],Da=Xc[xa];c(Da)||(P[Da]=parseInt(Ba,10))}m=P}else{{m=m.format(a).replace(/\u200E/g,"");
m=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(m);const [,Ca,xa,Ba,Da,Ra,Wa]=m;m=[Ba,Ca,xa,Da,Ra,Wa]}}const [Z,ba,ea,ma,oa,sa]=m;m=p({year:Z,month:ba,day:ea,hour:ma,minute:oa,second:sa,millisecond:0});a=+a;P=a%1E3;return(m-(a-(0<=P?P:1E3+P)))/6E4}equals(a){return"iana"===a.type&&a.name===this.name}get isValid(){return this.valid}}let yb=null;class La extends $a{static get utcInstance(){null===yb&&(yb=new La(0));return yb}static instance(a){return 0===a?La.utcInstance:new La(a)}static parseSpecifier(a){return a&&
(a=a.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new La(A(a[1],a[2])):null}constructor(a){super();this.fixed=a}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${l(this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(a,m){return l(this.fixed,m)}get isUniversal(){return!0}offset(){return this.fixed}equals(a){return"fixed"===a.type&&a.fixed===this.fixed}get isValid(){return!0}}class Eb extends $a{constructor(a){super();this.zoneName=a}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}
let uc=()=>Date.now(),vc="system",wc=null,xc=null,yc=null,zc;class Ja{static get now(){return uc}static set now(a){uc=a}static set defaultZone(a){vc=a}static get defaultZone(){return v(vc,tc.instance)}static get defaultLocale(){return wc}static set defaultLocale(a){wc=a}static get defaultNumberingSystem(){return xc}static set defaultNumberingSystem(a){xc=a}static get defaultOutputCalendar(){return yc}static set defaultOutputCalendar(a){yc=a}static get throwOnInvalid(){return zc}static set throwOnInvalid(a){zc=
a}static resetCaches(){Ga.resetCache();Pa.resetCache()}}let lb={},mb={},nb={},jb=null;class Yc{constructor(a,m,P){this.padTo=P.padTo||0;this.floor=P.floor||!1;m||(m={useGrouping:!1},0<P.padTo&&(m.minimumIntegerDigits=P.padTo),this.inf=N(a,m))}format(a){if(this.inf)return this.inf.format(this.floor?Math.floor(a):a);a=this.floor?Math.floor(a):d(a,3);return H(a,this.padTo)}}class Zc{constructor(a,m,P){this.opts=P;if(a.zone.isUniversal){var Z=a.offset/60*-1;Z=0<=Z?`Etc/GMT+${Z}`:`Etc/GMT${Z}`;const ba=
Pa.isValidZone(Z);0!==a.offset&&ba?this.dt=a:(Z="UTC",this.dt=P.timeZoneName?a:0===a.offset?a:ya.fromMillis(a.ts+6E4*a.offset))}else"system"===a.zone.type?this.dt=a:(this.dt=a,Z=a.zone.name);a={...this.opts};Z&&(a.timeZone=Z);this.dtf=E(m,a)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}class $c{constructor(a,m,P){this.opts={style:"long",...P};!m&&w()&&(this.rtf=O(a,P))}format(a,
m){return this.rtf?this.rtf.format(a,m):r(m,a,this.opts.numeric,"long"!==this.opts.style)}formatToParts(a,m){return this.rtf?this.rtf.formatToParts(a,m):[]}}class Ga{static fromOpts(a){return Ga.create(a.locale,a.numberingSystem,a.outputCalendar,a.defaultToEN)}static create(a,m,P,Z=!1){a=a||Ja.defaultLocale;var ba;(ba=a)||(Z?Z="en-US":(jb||(jb=(new Intl.DateTimeFormat).resolvedOptions().locale),Z=jb),ba=Z);return new Ga(ba,m||Ja.defaultNumberingSystem,P||Ja.defaultOutputCalendar,a)}static resetCache(){jb=
null;lb={};mb={};nb={}}static fromObject({locale:a,numberingSystem:m,outputCalendar:P}={}){return Ga.create(a,m,P)}constructor(a,m,P,Z){var ba=a.indexOf("-u-");if(-1===ba)a=[a];else{let sa;ba=a.substring(0,ba);try{sa=E(a).resolvedOptions()}catch(Ba){sa=E(ba).resolvedOptions()}const {numberingSystem:Ca,calendar:xa}=sa;a=[ba,Ca,xa]}const [ea,ma,oa]=a;this.locale=ea;this.numberingSystem=m||ma||null;this.outputCalendar=P||oa||null;m=this.locale;P=this.numberingSystem;if((a=this.outputCalendar)||P)m+=
"-u",a&&(m+=`-ca-${a}`),P&&(m+=`-nu-${P}`);this.intl=m;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=Z;this.fastNumbersCached=null}get fastNumbers(){if(null==this.fastNumbersCached){var a=this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;
this.fastNumbersCached=a}return this.fastNumbersCached}listingMode(a){a=this.isEnglish();const m=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return a&&m?"en":"intl"}clone(a){return a&&0!==Object.getOwnPropertyNames(a).length?Ga.create(a.locale||this.specifiedLocale,a.numberingSystem||this.numberingSystem,a.outputCalendar||this.outputCalendar,a.defaultToEN||!1):this}redefaultToEN(a={}){return this.clone({...a,defaultToEN:!0})}redefaultToSystem(a=
{}){return this.clone({...a,defaultToEN:!1})}months(a,m=!1,P=!0){return K(this,a,P,G,()=>{const Z=m?{month:a,day:"numeric"}:{month:a},ba=m?"format":"standalone";this.monthsCache[ba][a]||(this.monthsCache[ba][a]=R(ea=>this.extract(ea,Z,"month")));return this.monthsCache[ba][a]})}weekdays(a,m=!1,P=!0){return K(this,a,P,y,()=>{const Z=m?{weekday:a,year:"numeric",month:"long",day:"numeric"}:{weekday:a},ba=m?"format":"standalone";this.weekdaysCache[ba][a]||(this.weekdaysCache[ba][a]=h(ea=>this.extract(ea,
Z,"weekday")));return this.weekdaysCache[ba][a]})}meridiems(a=!0){return K(this,void 0,a,()=>sc,()=>{if(!this.meridiemCache){const m={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[ya.utc(2016,11,13,9),ya.utc(2016,11,13,19)].map(P=>this.extract(P,m,"dayperiod"))}return this.meridiemCache})}eras(a,m=!0){return K(this,a,m,t,()=>{const P={era:a};this.eraCache[a]||(this.eraCache[a]=[ya.utc(-40,1,1),ya.utc(2017,1,1)].map(Z=>this.extract(Z,P,"era")));return this.eraCache[a]})}extract(a,m,P){return(a=
this.dtFormatter(a,m).formatToParts().find(Z=>Z.type.toLowerCase()===P))?a.value:null}numberFormatter(a={}){return new Yc(this.intl,a.forceSimple||this.fastNumbers,a)}dtFormatter(a,m={}){return new Zc(a,this.intl,m)}relFormatter(a={}){return new $c(this.intl,this.isEnglish(),a)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")}equals(a){return this.locale===a.locale&&this.numberingSystem===a.numberingSystem&&
this.outputCalendar===a.outputCalendar}}const Ac=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,zb=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Bc=RegExp(`${zb.source}${Ac.source}?`),Ab=RegExp(`(?:T${Bc.source})?`),ad=aa("weekYear","weekNumber","weekDay"),bd=aa("year","ordinal"),Cc=RegExp(`${zb.source} ?(?:${Ac.source}|(${rc.source}))?`),cd=RegExp(`(?: ${Cc.source})?`),dd=RegExp(`^T?${zb.source}$`),ed=/^-?P(?:(?:(-?\d{1,9})Y)?(?:(-?\d{1,9})M)?(?:(-?\d{1,9})W)?(?:(-?\d{1,9})D)?(?:T(?:(-?\d{1,9})H)?(?:(-?\d{1,9})M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/,
Kc={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},fd=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,gd=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,hd=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,
id=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,jd=B(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Ab),kd=B(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Ab),ld=B(/(\d{4})-?(\d{3})/,Ab),md=B(Bc),nd=J(la,ra,va),od=J(ad,ra,va),pd=J(bd,ra,va),qd=J(ra,va),rd=J(ra),sd=B(/(\d{4})-(\d\d)-(\d\d)/,cd),td=B(Cc),ud=J(la,ra,va,wa),vd=J(ra,va,wa),Dc={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,
seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},wd={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,milliseconds:2592E6},...Dc},xd={years:{quarters:4,months:12,weeks:52.1775,
days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3},...Dc},Za="years quarters months weeks days hours minutes seconds milliseconds".split(" "),Lc=Za.slice(0).reverse();class Ea{constructor(a){const m="longterm"===a.conversionAccuracy||
!1;this.values=a.values;this.loc=a.loc||Ga.create();this.conversionAccuracy=m?"longterm":"casual";this.invalid=a.invalid||null;this.matrix=m?xd:wd;this.isLuxonDuration=!0}static fromMillis(a,m){return Ea.fromObject({milliseconds:a},m)}static fromObject(a,m={}){if(null==a||"object"!==typeof a)throw new Na(`Duration.fromObject: argument expected to be an object, got ${null===a?"null":typeof a}`);return new Ea({values:u(a,Ea.normalizeUnit),loc:Ga.fromObject(m),conversionAccuracy:m.conversionAccuracy})}static fromISO(a,
m){const [P]=V(a,[ed,ua]);return P?Ea.fromObject(P,m):Ea.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static fromISOTime(a,m){const [P]=V(a,[dd,rd]);return P?Ea.fromObject(P,m):Ea.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static invalid(a,m=null){if(!a)throw new Na("need to specify a reason the Duration is invalid");a=a instanceof Qa?a:new Qa(a,m);if(Ja.throwOnInvalid)throw new Sc(a);return new Ea({invalid:a})}static normalizeUnit(a){const m={year:"years",
years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[a?a.toLowerCase():a];if(!m)throw new Tb(a);return m}static isDuration(a){return a&&a.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:
null}toFormat(a,m={}){m={...m,floor:!1!==m.round&&!1!==m.floor};return this.isValid?Ma.create(this.loc,m).formatDurationFromString(this,a):"Invalid Duration"}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let a="P";0!==this.years&&(a+=this.years+"Y");if(0!==this.months||0!==this.quarters)a+=this.months+3*this.quarters+"M";0!==this.weeks&&(a+=this.weeks+"W");0!==this.days&&(a+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)a+=
"T";0!==this.hours&&(a+=this.hours+"H");0!==this.minutes&&(a+=this.minutes+"M");if(0!==this.seconds||0!==this.milliseconds)a+=d(this.seconds+this.milliseconds/1E3,3)+"S";"P"===a&&(a+="T0S");return a}toISOTime(a={}){if(!this.isValid)return null;var m=this.toMillis();if(0>m||864E5<=m)return null;a={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...a};m=this.shiftTo("hours","minutes","seconds","milliseconds");let P="basic"===a.format?"hhmm":"hh:mm";a.suppressSeconds&&0===
m.seconds&&0===m.milliseconds||(P+="basic"===a.format?"ss":":ss",a.suppressMilliseconds&&0===m.milliseconds||(P+=".SSS"));m=m.toFormat(P);a.includePrefix&&(m="T"+m);return m}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(a){if(!this.isValid)return this;a=ca(a);const m={};for(const P of Za)if(W(a.values,P)||W(this.values,P))m[P]=a.get(P)+this.get(P);return Y(this,{values:m},!0)}minus(a){if(!this.isValid)return this;
a=ca(a);return this.plus(a.negate())}mapUnits(a){if(!this.isValid)return this;const m={};for(const P of Object.keys(this.values))m[P]=F(a(this.values[P],P));return Y(this,{values:m},!0)}get(a){return this[Ea.normalizeUnit(a)]}set(a){if(!this.isValid)return this;a={...this.values,...u(a,Ea.normalizeUnit)};return Y(this,{values:a})}reconfigure({locale:a,numberingSystem:m,conversionAccuracy:P}={}){a={loc:this.loc.clone({locale:a,numberingSystem:m})};P&&(a.conversionAccuracy=P);return Y(this,a)}as(a){return this.isValid?
this.shiftTo(a).get(a):NaN}normalize(){if(!this.isValid)return this;const a=this.toObject();da(this.matrix,a);return Y(this,{values:a},!0)}shiftTo(...a){if(!this.isValid||0===a.length)return this;a=a.map(ea=>Ea.normalizeUnit(ea));const m={},P={},Z=this.toObject();let ba;for(const ea of Za)if(0<=a.indexOf(ea)){ba=ea;let ma=0;for(const sa in P)ma+=this.matrix[sa][ea]*P[sa],P[sa]=0;b(Z[ea])&&(ma+=Z[ea]);const oa=Math.trunc(ma);m[ea]=oa;P[ea]=ma-oa;for(const sa in Z)Za.indexOf(sa)>Za.indexOf(ea)&&U(this.matrix,
Z,sa,m,ea)}else b(Z[ea])&&(P[ea]=Z[ea]);for(const ea in P)0!==P[ea]&&(m[ba]+=ea===ba?P[ea]:P[ea]/this.matrix[ba][ea]);return Y(this,{values:m},!0).normalize()}negate(){if(!this.isValid)return this;const a={};for(const m of Object.keys(this.values))a[m]=-this.values[m];return Y(this,{values:a},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?
this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:
null}equals(a){if(!this.isValid||!a.isValid||!this.loc.equals(a.loc))return!1;for(const Z of Za){var m=this.values[Z];var P=a.values[Z];m=void 0===m||0===m?void 0===P||0===P:m===P;if(!m)return!1}return!0}}class Ha{constructor(a){this.s=a.start;this.e=a.end;this.invalid=a.invalid||null;this.isLuxonInterval=!0}static invalid(a,m=null){if(!a)throw new Na("need to specify a reason the Interval is invalid");a=a instanceof Qa?a:new Qa(a,m);if(Ja.throwOnInvalid)throw new Rc(a);return new Ha({invalid:a})}static fromDateTimes(a,
m){a=eb(a);m=eb(m);var P=a&&a.isValid?m&&m.isValid?m<a?Ha.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${m.toISO()}`):null:Ha.invalid("missing or invalid end"):Ha.invalid("missing or invalid start");return null==P?new Ha({start:a,end:m}):P}static after(a,m){m=ca(m);a=eb(a);return Ha.fromDateTimes(a,a.plus(m))}static before(a,m){m=ca(m);a=eb(a);return Ha.fromDateTimes(a.minus(m),a)}static fromISO(a,m){const [P,Z]=(a||"").split("/",
2);if(P&&Z){let ma;try{var ba=ya.fromISO(P,m);ma=ba.isValid}catch(sa){ma=!1}let oa;try{var ea=ya.fromISO(Z,m);oa=ea.isValid}catch(sa){oa=!1}if(ma&&oa)return Ha.fromDateTimes(ba,ea);if(ma){if(ea=Ea.fromISO(Z,m),ea.isValid)return Ha.after(ba,ea)}else if(oa&&(ba=Ea.fromISO(P,m),ba.isValid))return Ha.before(ea,ba)}return Ha.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static isInterval(a){return a&&a.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?
this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(a="milliseconds"){return this.isValid?this.toDuration(...[a]).get(a):NaN}count(a="milliseconds"){if(!this.isValid)return NaN;const m=this.start.startOf(a),P=this.end.startOf(a);return Math.floor(P.diff(m,a).get(a))+1}hasSame(a){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,
a):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(a){return this.isValid?this.s>a:!1}isBefore(a){return this.isValid?this.e<=a:!1}contains(a){return this.isValid?this.s<=a&&this.e>a:!1}set({start:a,end:m}={}){return this.isValid?Ha.fromDateTimes(a||this.s,m||this.e):this}splitAt(...a){if(!this.isValid)return[];a=a.map(eb).filter(ea=>this.contains(ea)).sort();const m=[];let {s:P}=this,Z=0;for(;P<this.e;){var ba=a[Z]||this.e;ba=+ba>+this.e?this.e:ba;m.push(Ha.fromDateTimes(P,ba));P=
ba;Z+=1}return m}splitBy(a){a=ca(a);if(!this.isValid||!a.isValid||0===a.as("milliseconds"))return[];let {s:m}=this,P=1;const Z=[];for(;m<this.e;){var ba=this.start.plus(a.mapUnits(ea=>ea*P));ba=+ba>+this.e?this.e:ba;Z.push(Ha.fromDateTimes(m,ba));m=ba;P+=1}return Z}divideEqually(a){return this.isValid?this.splitBy(this.length()/a).slice(0,a):[]}overlaps(a){return this.e>a.s&&this.s<a.e}abutsStart(a){return this.isValid?+this.e===+a.s:!1}abutsEnd(a){return this.isValid?+a.e===+this.s:!1}engulfs(a){return this.isValid?
this.s<=a.s&&this.e>=a.e:!1}equals(a){return this.isValid&&a.isValid?this.s.equals(a.s)&&this.e.equals(a.e):!1}intersection(a){if(!this.isValid)return this;const m=this.s>a.s?this.s:a.s;a=this.e<a.e?this.e:a.e;return m>=a?null:Ha.fromDateTimes(m,a)}union(a){return this.isValid?Ha.fromDateTimes(this.s<a.s?this.s:a.s,this.e>a.e?this.e:a.e):this}static merge(a){const [m,P]=a.sort((Z,ba)=>Z.s-ba.s).reduce(([Z,ba],ea)=>ba?ba.overlaps(ea)||ba.abutsStart(ea)?[Z,ba.union(ea)]:[Z.concat([ba]),ea]:[Z,ea],[[],
null]);P&&m.push(P);return m}static xor(a){let m=null,P=0;const Z=[];a=a.map(ba=>[{time:ba.s,type:"s"},{time:ba.e,type:"e"}]);a=Array.prototype.concat(...a).sort((ba,ea)=>ba.time-ea.time);for(const ba of a)P+="s"===ba.type?1:-1,1===P?m=ba.time:(m&&+m!==+ba.time&&Z.push(Ha.fromDateTimes(m,ba.time)),m=null);return Ha.merge(Z)}difference(...a){return Ha.xor([this].concat(a)).map(m=>this.intersection(m)).filter(m=>m&&!m.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:
"Invalid Interval"}toISO(a){return this.isValid?`${this.s.toISO(a)}/${this.e.toISO(a)}`:"Invalid Interval"}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:"Invalid Interval"}toISOTime(a){return this.isValid?`${this.s.toISOTime(a)}/${this.e.toISOTime(a)}`:"Invalid Interval"}toFormat(a,{separator:m=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(a)}${m}${this.e.toFormat(a)}`:"Invalid Interval"}toDuration(a,m){return this.isValid?this.e.diff(this.s,a,m):Ea.invalid(this.invalidReason)}mapEndpoints(a){return Ha.fromDateTimes(a(this.s),
a(this.e))}}class kb{static hasDST(a=Ja.defaultZone){const m=ya.now().setZone(a).set({month:12});return!a.isUniversal&&m.offset!==m.set({month:6}).offset}static isValidIANAZone(a){return Pa.isValidSpecifier(a)&&Pa.isValidZone(a)}static normalizeZone(a){return v(a,Ja.defaultZone)}static months(a="long",{locale:m=null,numberingSystem:P=null,locObj:Z=null,outputCalendar:ba="gregory"}={}){return(Z||Ga.create(m,P,ba)).months(a)}static monthsFormat(a="long",{locale:m=null,numberingSystem:P=null,locObj:Z=
null,outputCalendar:ba="gregory"}={}){return(Z||Ga.create(m,P,ba)).months(a,!0)}static weekdays(a="long",{locale:m=null,numberingSystem:P=null,locObj:Z=null}={}){return(Z||Ga.create(m,P,null)).weekdays(a)}static weekdaysFormat(a="long",{locale:m=null,numberingSystem:P=null,locObj:Z=null}={}){return(Z||Ga.create(m,P,null)).weekdays(a,!0)}static meridiems({locale:a=null}={}){return Ga.create(a).meridiems()}static eras(a="short",{locale:m=null}={}){return Ga.create(m,null,"gregory").eras(a)}static features(){return{relative:w()}}}
const ob={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",
tibt:"[\u0f20-\u0f29]",latn:"\\d"},Fb={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Mc=ob.hanidec.replace(/[\[|\]]/g,"").split(""),Gb=`( |${String.fromCharCode(160)})`,pb=new RegExp(Gb,"g"),Oc={year:{"2-digit":"yy",
numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};let qb=null;const sb=[0,31,59,90,120,151,181,212,243,273,304,334],rb=[0,31,60,91,121,152,182,213,244,274,305,335],Wb={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},yd={weekNumber:1,weekday:1,hour:0,minute:0,second:0,
millisecond:0},zd={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Vb="year month day hour minute second millisecond".split(" "),Ad="weekYear weekNumber weekday hour minute second millisecond".split(" "),Bd="year ordinal hour minute second millisecond".split(" ");class ya{constructor(a){const m=a.zone||Ja.defaultZone;let P=a.invalid||(Number.isNaN(a.ts)?new Qa("invalid input"):null)||(m.isValid?null:fb(m));this.ts=c(a.ts)?Ja.now():a.ts;let Z=null;var ba=null;P||(a.old&&a.old.ts===this.ts&&a.old.zone.equals(m)?
[Z,ba]=[a.old.c,a.old.o]:(ba=m.offset(this.ts),Z=Pb(this.ts,ba),Z=(P=Number.isNaN(Z.year)?new Qa("invalid input"):null)?null:Z,ba=P?null:ba));this._zone=m;this.loc=a.loc||Ga.create();this.invalid=P;this.weekData=null;this.c=Z;this.o=ba;this.isLuxonDateTime=!0}static now(){return new ya({})}static local(){const [a,m]=Yb(arguments),[P,Z,ba,ea,ma,oa,sa]=m;return Ub({year:P,month:Z,day:ba,hour:ea,minute:ma,second:oa,millisecond:sa},a)}static utc(){const [a,m]=Yb(arguments),[P,Z,ba,ea,ma,oa,sa]=m;a.zone=
La.utcInstance;return Ub({year:P,month:Z,day:ba,hour:ea,minute:ma,second:oa,millisecond:sa},a)}static fromJSDate(a,m={}){a="[object Date]"===Object.prototype.toString.call(a)?a.valueOf():NaN;if(Number.isNaN(a))return ya.invalid("invalid input");const P=v(m.zone,Ja.defaultZone);return P.isValid?new ya({ts:a,zone:P,loc:Ga.fromObject(m)}):ya.invalid(fb(P))}static fromMillis(a,m={}){if(b(a))return-864E13>a||864E13<a?ya.invalid("Timestamp out of range"):new ya({ts:a,zone:v(m.zone,Ja.defaultZone),loc:Ga.fromObject(m)});
throw new Na(`fromMillis requires a numerical input, but received a ${typeof a} with value ${a}`);}static fromSeconds(a,m={}){if(b(a))return new ya({ts:1E3*a,zone:v(m.zone,Ja.defaultZone),loc:Ga.fromObject(m)});throw new Na("fromSeconds requires a numerical input");}static fromObject(a,m={}){a=a||{};var P=v(m.zone,Ja.defaultZone);if(!P.isValid)return ya.invalid(fb(P));var Z=Ja.now();const ba=P.offset(Z),ea=u(a,Sb);var ma=!c(ea.ordinal),oa=!c(ea.year),sa=!c(ea.month)||!c(ea.day);oa=oa||sa;var Ca=ea.weekYear||
ea.weekNumber;m=Ga.fromObject(m);if((oa||ma)&&Ca)throw new bb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(sa&&ma)throw new bb("Can't mix ordinal dates with month/day");sa=Ca||ea.weekday&&!oa;let xa=Pb(Z,ba);sa?(Z=Ad,Ca=yd,xa=tb(xa)):ma?(Z=Bd,Ca=zd,xa=ub(xa)):(Z=Vb,Ca=Wb);let Ba=!1;for(var Da of Z)c(ea[Da])?ea[Da]=Ba?Ca[Da]:xa[Da]:Ba=!0;sa?(Da=z(ea.weekYear),Z=Q(ea.weekNumber,1,C(ea.weekYear)),Ca=Q(ea.weekday,1,7),Da=Da?Z?Ca?!1:Oa("weekday",ea.weekday):Oa("week",ea.week):
Oa("weekYear",ea.weekYear)):ma?(Da=z(ea.year),Z=Q(ea.ordinal,1,e(ea.year)?366:365),Da=Da?Z?!1:Oa("ordinal",ea.ordinal):Oa("year",ea.year)):Da=Mb(ea);if(Da=Da||Nb(ea))return ya.invalid(Da);ma=sa?Kb(ea):ma?Lb(ea):ea;const [Ra,Wa]=gb(ma,ba,P);P=new ya({ts:Ra,zone:P,o:Wa,loc:m});return ea.weekday&&oa&&a.weekday!==P.weekday?ya.invalid("mismatched weekday",`you can't specify both a weekday of ${ea.weekday} and a date of ${P.toISO()}`):P}static fromISO(a,m={}){const [P,Z]=V(a,[jd,nd],[kd,od],[ld,pd],[md,
qd]);return db(P,Z,m,"ISO 8601",a)}static fromRFC2822(a,m={}){const [P,Z]=V(a.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[fd,X]);return db(P,Z,m,"RFC 2822",a)}static fromHTTP(a,m={}){const [P,Z]=V(a,[gd,I],[hd,I],[id,S]);return db(P,Z,m,"HTTP",m)}static fromFormat(a,m,P={}){if(c(a)||c(m))throw new Na("fromFormat requires an input string and a format");const {locale:Z=null,numberingSystem:ba=null}=P;var ea=Ga.fromOpts({locale:Z,numberingSystem:ba,defaultToEN:!0});{const {result:Ca,
zone:xa,invalidReason:Ba}=Hb(ea,a,m);ea=[Ca,xa,Ba]}const [ma,oa,sa]=ea;return sa?ya.invalid(sa):db(ma,oa,P,`format ${m}`,a)}static fromString(a,m,P={}){return ya.fromFormat(a,m,P)}static fromSQL(a,m={}){const [P,Z]=V(a,[sd,ud],[td,vd]);return db(P,Z,m,"SQL",a)}static invalid(a,m=null){if(!a)throw new Na("need to specify a reason the DateTime is invalid");a=a instanceof Qa?a:new Qa(a,m);if(Ja.throwOnInvalid)throw new Qc(a);return new ya({invalid:a})}static isDateTime(a){return a&&a.isLuxonDateTime||
!1}get(a){return this[a]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?
this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?vb(this).weekYear:NaN}get weekNumber(){return this.isValid?vb(this).weekNumber:NaN}get weekday(){return this.isValid?
vb(this).weekday:NaN}get ordinal(){return this.isValid?ub(this.c).ordinal:NaN}get monthShort(){return this.isValid?kb.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?kb.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?kb.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?kb.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?
this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return e(this.year)}get daysInMonth(){return g(this.year,this.month)}get daysInYear(){return this.isValid?e(this.year)?
366:365:NaN}get weeksInWeekYear(){return this.isValid?C(this.weekYear):NaN}resolvedLocaleOptions(a={}){const {locale:m,numberingSystem:P,calendar:Z}=Ma.create(this.loc.clone(a),a).resolvedOptions(this);return{locale:m,numberingSystem:P,outputCalendar:Z}}toUTC(a=0,m={}){return this.setZone(La.instance(a),m)}toLocal(){return this.setZone(Ja.defaultZone)}setZone(a,{keepLocalTime:m=!1,keepCalendarTime:P=!1}={}){a=v(a,Ja.defaultZone);if(a.equals(this.zone))return this;if(a.isValid){let Z=this.ts;if(m||
P)m=a.offset(this.ts),P=this.toObject(),[Z]=gb(P,m,a);return cb(this,{ts:Z,zone:a})}return ya.invalid(fb(a))}reconfigure({locale:a,numberingSystem:m,outputCalendar:P}={}){a=this.loc.clone({locale:a,numberingSystem:m,outputCalendar:P});return cb(this,{loc:a})}setLocale(a){return this.reconfigure({locale:a})}set(a){if(!this.isValid)return this;a=u(a,Sb);var m=!c(a.weekYear)||!c(a.weekNumber)||!c(a.weekday);const P=!c(a.ordinal),Z=!c(a.year),ba=!c(a.month)||!c(a.day),ea=a.weekYear||a.weekNumber;if((Z||
ba||P)&&ea)throw new bb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(ba&&P)throw new bb("Can't mix ordinal dates with month/day");m?m=Kb({...tb(this.c),...a}):c(a.ordinal)?(m={...this.toObject(),...a},c(a.day)&&(m.day=Math.min(g(m.year,m.month),m.day))):m=Lb({...ub(this.c),...a});const [ma,oa]=gb(m,this.o,this.zone);return cb(this,{ts:ma,o:oa})}plus(a){if(!this.isValid)return this;a=ca(a);return cb(this,Qb(this,a))}minus(a){if(!this.isValid)return this;a=ca(a).negate();
return cb(this,Qb(this,a))}startOf(a){if(!this.isValid)return this;const m={};a=Ea.normalizeUnit(a);switch(a){case "years":m.month=1;case "quarters":case "months":m.day=1;case "weeks":case "days":m.hour=0;case "hours":m.minute=0;case "minutes":m.second=0;case "seconds":m.millisecond=0}"weeks"===a&&(m.weekday=1);"quarters"===a&&(m.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(m)}endOf(a){return this.isValid?this.plus({[a]:1}).startOf(a).minus(1):this}toFormat(a,m={}){return this.isValid?Ma.create(this.loc.redefaultToEN(m)).formatDateTimeFromString(this,
a):"Invalid DateTime"}toLocaleString(a=wb,m={}){return this.isValid?Ma.create(this.loc.clone(m),a).formatDateTime(this):"Invalid DateTime"}toLocaleParts(a={}){return this.isValid?Ma.create(this.loc.clone(a),a).formatDateTimeParts(this):[]}toISO(a={}){return this.isValid?`${this.toISODate(a)}T${this.toISOTime(a)}`:null}toISODate({format:a="extended"}={}){a="basic"===a?"yyyyMMdd":"yyyy-MM-dd";9999<this.year&&(a="+"+a);return Ya(this,a)}toISOWeekDate(){return Ya(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:a=
!1,suppressSeconds:m=!1,includeOffset:P=!0,includePrefix:Z=!1,format:ba="extended"}={}){return Rb(this,{suppressSeconds:m,suppressMilliseconds:a,includeOffset:P,includePrefix:Z,format:ba})}toRFC2822(){return Ya(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Ya(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return Ya(this,"yyyy-MM-dd")}toSQLTime({includeOffset:a=!0,includeZone:m=!1}={}){return Rb(this,{includeOffset:a,includeZone:m,spaceZone:!0})}toSQL(a={}){return this.isValid?
`${this.toSQLDate()} ${this.toSQLTime(a)}`:null}toString(){return this.isValid?this.toISO():"Invalid DateTime"}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1E3:NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(a={}){if(!this.isValid)return{};const m={...this.c};a.includeConfig&&(m.outputCalendar=this.outputCalendar,m.numberingSystem=this.loc.numberingSystem,m.locale=this.loc.locale);return m}toJSDate(){return new Date(this.isValid?
this.ts:NaN)}diff(a,m="milliseconds",P={}){if(!this.isValid||!a.isValid)return Ea.invalid("created by diffing an invalid DateTime");P={locale:this.locale,numberingSystem:this.numberingSystem,...P};const Z=(Array.isArray(m)?m:[m]).map(Ea.normalizeUnit);m=a.valueOf()>this.valueOf();a=ta(m?this:a,m?a:this,Z,P);return m?a.negate():a}diffNow(a="milliseconds",m={}){return this.diff(ya.now(),a,m)}until(a){return this.isValid?Ha.fromDateTimes(this,a):this}hasSame(a,m){if(!this.isValid)return!1;const P=a.valueOf();
a=this.setZone(a.zone,{keepLocalTime:!0});return a.startOf(m)<=P&&P<=a.endOf(m)}equals(a){return this.isValid&&a.isValid&&this.valueOf()===a.valueOf()&&this.zone.equals(a.zone)&&this.loc.equals(a.loc)}toRelative(a={}){if(!this.isValid)return null;const m=a.base||ya.fromObject({},{zone:this.zone}),P=a.padding?this<m?-a.padding:a.padding:0;let Z="years months days hours minutes seconds".split(" "),ba=a.unit;Array.isArray(a.unit)&&(Z=a.unit,ba=void 0);return Xb(m,this.plus(P),{...a,numeric:"always",
units:Z,unit:ba})}toRelativeCalendar(a={}){return this.isValid?Xb(a.base||ya.fromObject({},{zone:this.zone}),this,{...a,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...a){if(!a.every(ya.isDateTime))throw new Na("min requires all arguments be DateTimes");return L(a,m=>m.valueOf(),Math.min)}static max(...a){if(!a.every(ya.isDateTime))throw new Na("max requires all arguments be DateTimes");return L(a,m=>m.valueOf(),Math.max)}static fromFormatExplain(a,m,P={}){const {locale:Z=
null,numberingSystem:ba=null}=P;P=Ga.fromOpts({locale:Z,numberingSystem:ba,defaultToEN:!0});return Hb(P,a,m)}static fromStringExplain(a,m,P={}){return ya.fromFormatExplain(a,m,P)}static get DATE_SHORT(){return wb}static get DATE_MED(){return Zb}static get DATE_MED_WITH_WEEKDAY(){return Tc}static get DATE_FULL(){return $b}static get DATE_HUGE(){return ac}static get TIME_SIMPLE(){return bc}static get TIME_WITH_SECONDS(){return cc}static get TIME_WITH_SHORT_OFFSET(){return dc}static get TIME_WITH_LONG_OFFSET(){return ec}static get TIME_24_SIMPLE(){return fc}static get TIME_24_WITH_SECONDS(){return gc}static get TIME_24_WITH_SHORT_OFFSET(){return hc}static get TIME_24_WITH_LONG_OFFSET(){return ic}static get DATETIME_SHORT(){return jc}static get DATETIME_SHORT_WITH_SECONDS(){return kc}static get DATETIME_MED(){return lc}static get DATETIME_MED_WITH_SECONDS(){return mc}static get DATETIME_MED_WITH_WEEKDAY(){return Uc}static get DATETIME_FULL(){return nc}static get DATETIME_FULL_WITH_SECONDS(){return oc}static get DATETIME_HUGE(){return pc}static get DATETIME_HUGE_WITH_SECONDS(){return qc}}
f.DateTime=ya})},"esri/widgets/FeatureTemplates":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/HandleOwner ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/has ../core/accessorSupport/decorators/cast ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./FeatureTemplates/FeatureTemplatesViewModel ./FeatureTemplates/ItemList ./support/widgetUtils ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory".split(" "),
function(f,c,b,z,w,L,T,W,Q,H,x,n,d,e,g,p,C){function q(A){const {label:F}=A;return"items"in A?F:`${F}\u2013${A.layer.id}`}const k={filter:!0};b=function(A){function F(l,M){l=A.call(this,l,M)||this;l._iconIntersectionObserver=new IntersectionObserver((G,y)=>{G.forEach(function(){var t=f._asyncToGenerator(function*(r){if(r.isIntersecting&&(r=r.target,!r["data-has-icon"])){const D=r["data-item"];r["data-has-icon"]=!0;y.unobserve(r);yield D.fetchThumbnail();r["data-item"]===D&&D.thumbnail?r.appendChild(D.thumbnail):
(r["data-has-icon"]=!1,y.observe(r))}});return function(r){return t.apply(this,arguments)}}())});l.filterFunction=null;l.filterText="";l.groupBy=null;l.headingLevel=4;l.label=void 0;l.layers=null;l.messages=null;l.selectedItem=null;l.viewModel=new n;l.visibleElements={...k};l.renderItemIcon=l.renderItemIcon.bind(f._assertThisInitialized(l));l._afterItemCreateOrUpdate=l._afterItemCreateOrUpdate.bind(f._assertThisInitialized(l));l._afterItemRemoved=l._afterItemRemoved.bind(f._assertThisInitialized(l));
return l}f._inheritsLoose(F,A);var u=F.prototype;u.initialize=function(){const l=({label:M})=>!this.filterText||-1<M.toLowerCase().indexOf(this.filterText.toLowerCase());this.own(z.init(this,"viewModel",(M,G)=>{M&&!M.filterFunction&&(this.filterFunction=l);G&&G!==M&&G.filterFunction===l&&(G.filterFunction=null)}))};u.destroy=function(){this._iconIntersectionObserver&&(this._iconIntersectionObserver.disconnect(),this._iconIntersectionObserver=null)};u.castVisibleElements=function(l){return{...k,...l}};
u.select=function(l){return null};u.render=function(){const {filterText:l,headingLevel:M,messages:G,viewModel:{items:y,selectedItem:t,state:r}}=this,D=this.visibleElements.filter;return C.tsx("div",{class:this.classes("esri-feature-templates","esri-widget"),"aria-label":G.widgetLabel},"loading"===r?this.renderLoader():"ready"===r?C.tsx(d.ItemList,{id:this.id,identify:q,filterText:l,items:y,headingLevel:M,messages:{filterPlaceholder:G.filterPlaceholder,noItems:G.noItems,noMatches:G.noMatches},filterEnabled:D,
onItemSelect:v=>{this.viewModel.select(v)},onFilterChange:v=>{this.filterText=v;this.viewModel.refresh()},renderIcon:this.renderItemIcon,selectedItem:t}):null)};u.renderItemIcon=function({item:l}){return C.tsx("span",{key:"icon",class:"esri-feature-templates__list-item-icon",afterCreate:this._afterItemCreateOrUpdate,afterUpdate:this._afterItemCreateOrUpdate,afterRemoved:this._afterItemRemoved,"data-item":l,"data-has-icon":!1})};u.renderLoader=function(){return C.tsx("div",{class:"esri-feature-templates__loader",
key:"loader"})};u._afterItemCreateOrUpdate=function(l){this._iconIntersectionObserver.observe(l)};u._afterItemRemoved=function(l){this._iconIntersectionObserver.unobserve(l)};return F}(b.HandleOwnerMixin(x));c.__decorate([w.aliasOf("viewModel.filterFunction")],b.prototype,"filterFunction",void 0);c.__decorate([Q.property()],b.prototype,"filterText",void 0);c.__decorate([w.aliasOf("viewModel.groupBy")],b.prototype,"groupBy",void 0);c.__decorate([Q.property()],b.prototype,"headingLevel",void 0);c.__decorate([Q.property({aliasOf:{source:"messages.widgetLabel",
overridable:!0}})],b.prototype,"label",void 0);c.__decorate([w.aliasOf("viewModel.layers")],b.prototype,"layers",void 0);c.__decorate([Q.property(),g.messageBundle("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],b.prototype,"messages",void 0);c.__decorate([w.aliasOf("viewModel.selectedItem")],b.prototype,"selectedItem",void 0);c.__decorate([Q.property(),p.vmEvent("select")],b.prototype,"viewModel",void 0);c.__decorate([Q.property()],b.prototype,"visibleElements",void 0);c.__decorate([T.cast("visibleElements")],
b.prototype,"castVisibleElements",null);c.__decorate([w.aliasOf("viewModel.select")],b.prototype,"select",null);return b=c.__decorate([H.subclass("esri.widgets.FeatureTemplates")],b)})},"esri/widgets/FeatureTemplates/FeatureTemplatesViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Evented ../../core/HandleOwner ../../core/ObjectPool ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./TemplateItem ./TemplateItemGroup".split(" "),
function(f,c,b,z,w,L,T,W,Q,H,x,n,d){const e=({layer:p})=>({key:p,label:p.title}),g=({layer:p})=>p.geometryType;b=function(p){function C(k){k=p.call(this,k)||this;k._itemPool=new w(n);k._groupPool=new w(d);k.filterFunction=null;k.groupBy="layer";k.selectedItem=null;return k}f._inheritsLoose(C,p);var q=C.prototype;q.destroy=function(){this._templateToLayer.clear()};q.refresh=function(){this.notifyChange("items")};q.select=function(k){k=(null==k?void 0:k.clone())||null;this._set("selectedItem",k);this.emit("select",
{item:k,template:(null==k?void 0:k.template)||null})};q._getTemplatesForLayer=function(k){const A=k.templates||[];k=(k.types||[]).map(F=>F.templates).reduce((F,u)=>[...F,...u],[]);return[...A,...k]};q._createItem=function(k){const A=this._itemPool.acquire();A.set({template:k,layer:this._templateToLayer.get(k)});return A};q._createGroup=function(k,A){const F=this._groupPool.acquire();F.set("label",k);F.items=A;return F};q._releasePreviousItems=function(){this._destroyItems(this._get("items"))};q._destroyItems=
function(k){k&&(k[0]instanceof n?k.forEach(A=>this._destroyItem(A)):k.forEach(A=>this._destroyGroup(A)))};q._destroyGroup=function(k){k.items.forEach(A=>this._destroyItem(A));k.items.length=0;this._groupPool.release(k)};q._destroyItem=function(k){k.layer=null;k.template=null;this._itemPool.release(k)};f._createClass(C,[{key:"_templateToLayer",get:function(){const k=new Map;for(const {layer:A,templates:F}of this._featureTemplateInfos)for(const u of F)k.set(u,A);return k}},{key:"layers",get:function(){return this._get("layers")},
set:function(k){this.handles.remove("layers");if(k){const A=()=>this.notifyChange("state");this.handles.add(k.map(F=>L.when(F,"loadStatus",A)),"layers")}this._set("layers",k)}},{key:"state",get:function(){const {layers:k}=this;return k&&0!==k.length?k.some(A=>"loading"===A.loadStatus||"not-loaded"===A.loadStatus)?"loading":"ready":"disabled"}},{key:"_featureTemplateInfos",get:function(){return this.layers?this.layers.filter(({capabilities:k,loaded:A})=>A&&k.operations.supportsEditing&&k.operations.supportsAdd).map(k=>
{const A=this._getTemplatesForLayer(k);return{layer:k,templates:A}}).filter(k=>null!=k&&0<k.templates.length):[]}},{key:"numberOfFeatureTemplates",get:function(){return this._featureTemplateInfos.reduce((k,A)=>k+A.templates.length,0)}},{key:"items",get:function(){var k=this._featureTemplateInfos;if(0===k.length)return this._releasePreviousItems(),[];const {groupBy:A}=this;if("none"===A)return k=k.map(({templates:l})=>l.filter(({name:M})=>!this.filterFunction||this.filterFunction({label:M}))).map(l=>
l.map(M=>this._createItem(M))).reduce((l,M)=>[...l,...M],[]),this._releasePreviousItems(),k;k=k.reduce((l,{layer:M,templates:G})=>{G.forEach(y=>{var t=("layer"===A?e:"geometry"===A?g:A)({template:y,layer:M});if(t){const r="string"===typeof t?t:t.key;t="string"===typeof t?t:t.label;l.has(r)||l.set(r,{label:t,templates:[]});l.get(r).templates.push(y)}});return l},new Map);if(0===k.size)return this._releasePreviousItems(),[];const F=[],{filterFunction:u}=this;k.forEach(l=>{const {label:M,templates:G}=
l;!u||this.filterFunction(l)?F.push(this._createGroup(M,G.map(y=>this._createItem(y)))):(l=G.filter(({name:y})=>this.filterFunction({label:y})).map(y=>this._createItem(y)),0<l.length&&F.push(this._createGroup(M,l)))});this._releasePreviousItems();return F}}]);return C}(z.HandleOwnerMixin(b.EventedAccessor));c.__decorate([T.property({readOnly:!0})],b.prototype,"_templateToLayer",null);c.__decorate([T.property()],b.prototype,"filterFunction",void 0);c.__decorate([T.property()],b.prototype,"groupBy",
void 0);c.__decorate([T.property()],b.prototype,"layers",null);c.__decorate([T.property()],b.prototype,"state",null);c.__decorate([T.property({readOnly:!0})],b.prototype,"_featureTemplateInfos",null);c.__decorate([T.property({readOnly:!0})],b.prototype,"numberOfFeatureTemplates",null);c.__decorate([T.property({readOnly:!0})],b.prototype,"items",null);c.__decorate([T.property({readOnly:!0})],b.prototype,"selectedItem",void 0);c.__decorate([T.property()],b.prototype,"select",null);return b=c.__decorate([x.subclass("esri.widgets.FeatureTemplates.FeatureTemplatesViewModel")],
b)})},"esri/widgets/FeatureTemplates/TemplateItem":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../core/Accessor ../../core/HandleOwner ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../symbols/support/symbolUtils".split(" "),function(f,c,b,z,w,L,T,W,Q,H,x,n,d){function e(p){return Object.freeze({__proto__:null,
default:p})}var g;w=g=function(p){function C(k){k=p.call(this,k)||this;k._activeFetchInfo={id:null,request:null};k.description=null;k.label=null;k.layer=null;k.template=null;k.thumbnail=null;return k}c._inheritsLoose(C,p);var q=C.prototype;q.initialize=function(){this.handles.add(T.init(this,["layer.renderer","template"],()=>{this._activeFetchInfo.id=null;this._activeFetchInfo.request=null;this._set("thumbnail",null)}))};q.clone=function(){const k=this.thumbnail?this.thumbnail.cloneNode(!0):null,
A=new g({layer:this.layer,template:this.template});A._set("thumbnail",k);return A};q.fetchThumbnail=function(){var k=c._asyncToGenerator(function*(){var A=this;const {_activeFetchInfo:F}=this;if(`${this.label}-${this.layer.id}`===F.id)return F.request;F.id=`${this.label}-${this.layer.id}`;F.request=this._getPreviewSymbol().then(function(){var u=c._asyncToGenerator(function*(l){var M;if(`${A.label}-${A.layer.id}`===F.id){var G={maxSize:36};"dictionary"===(null==(M=A.layer.renderer)?void 0:M.type)&&
(G.fieldMap=A.layer.renderer.fieldMap,G.feature={attributes:A.template.prototype.attributes});l=yield d.renderPreviewHTML(l,G);`${A.label}-${A.layer.id}`===F.id&&A._set("thumbnail",l)}});return function(l){return u.apply(this,arguments)}}());return F.request});return function(){return k.apply(this,arguments)}}();q._getPreviewSymbol=function(){var k=c._asyncToGenerator(function*(){const {layer:A,template:F,layer:{renderer:u}}=this;if(u){var l=new z({attributes:F.prototype.attributes});if(l=yield u.getSymbolAsync(l))return l}return this._getFallbackSymbolFromGeometry(A)});
return function(){return k.apply(this,arguments)}}();q._getFallbackSymbolFromGeometry=function(k){({geometryType:k}=k);if("point"===k||"multipoint"===k)return(new Promise(function(A,F){f(["../../symbols/SimpleMarkerSymbol"],function(u){A(e(u))},F)})).then(A=>new A.default);if("polyline"===k)return(new Promise(function(A,F){f(["../../symbols/SimpleLineSymbol"],function(u){A(e(u))},F)})).then(A=>new A.default);if("polygon"===k||"mesh"===k||"multipatch"===k)return(new Promise(function(A,F){f(["../../symbols/SimpleFillSymbol"],
function(u){A(e(u))},F)})).then(A=>new A.default)};return C}(L.HandleOwnerMixin(w));b.__decorate([W.property({aliasOf:"template.description"})],w.prototype,"description",void 0);b.__decorate([W.property({aliasOf:"template.name"})],w.prototype,"label",void 0);b.__decorate([W.property()],w.prototype,"layer",void 0);b.__decorate([W.property()],w.prototype,"template",void 0);b.__decorate([W.property({readOnly:!0})],w.prototype,"thumbnail",void 0);return w=g=b.__decorate([n.subclass("esri.widgets.FeatureTemplates.TemplateItem")],
w)})},"esri/symbols/support/symbolUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ../../core/maybe ../../support/arcadeOnDemand ./utils".split(" "),function(f,c,b,z,w,L,T){function W(e,g){return Q.apply(this,arguments)}function Q(){Q=b._asyncToGenerator(function*(e,g){switch(e.type){case "web-style":var {previewWebStyleSymbol:p}=yield new Promise(function(C,q){f(["./previewWebStyleSymbol"],C,q)});return p(e,W,g);case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return{previewSymbol3D:p}=
yield new Promise(function(C,q){f(["./previewSymbol3D"],C,q)}),p(e,g);case "simple-marker":case "simple-line":case "simple-fill":case "picture-marker":case "picture-fill":case "text":return{previewSymbol2D:p}=yield new Promise(function(C,q){f(["./previewSymbol2D"],C,q)}),p(e,g);case "cim":return{previewCIMSymbol:p}=yield new Promise(function(C,q){f(["./previewCIMSymbol"],C,q)}),p(e,g)}});return Q.apply(this,arguments)}function H(e){return e&&"opacity"in e?e.opacity*H(e.parent):1}function x(){x=b._asyncToGenerator(function*(e,
g){var p,C;if(e){var q=e.sourceLayer;q=null!=(p=w.isSome(g)&&null!=(C=g.useSourceLayer)&&C?q:e.layer)?p:q;p=H(q);if(w.isSome(e.symbol)&&(!w.isSome(g)||!0!==g.ignoreGraphicSymbol))return e="web-style"===e.symbol.type?yield e.symbol.fetchSymbol(w.isSome(g)?g.abortOptions:null):e.symbol.clone(),T.applyColorToSymbol(e,null,p),e;var k=w.isSome(g)&&g.renderer||q&&"renderer"in q&&q.renderer;if(C=k&&"getSymbolAsync"in k?yield k.getSymbolAsync(e,g):null){C="web-style"===C.type?yield C.fetchSymbol(w.isSome(g)?
g.abortOptions:null):C.clone();if(!("visualVariables"in k&&k.visualVariables&&k.visualVariables.length))return T.applyColorToSymbol(C,null,p),C;"arcadeRequiredForVisualVariables"in k&&k.arcadeRequiredForVisualVariables&&(w.isNone(g)||w.isNone(g.arcade))&&(g={...w.unwrap(g)},g.arcade=yield L.loadArcade());q=yield new Promise(function(G,y){f(["../../renderers/visualVariables/support/visualVariableUtils"],G,y)});var A=[],F=[],u=[],l=[];for(var M of k.visualVariables)switch(M.type){case "color":A.push(M);
break;case "opacity":F.push(M);break;case "rotation":l.push(M);break;case "size":M.target||u.push(M)}M=(M=!!A.length&&A[A.length-1])?q.getColor(M,e,g):null;F=(F=!!F.length&&F[F.length-1])?q.getOpacity(F,e,g):null;null!=p&&(F=null!=F?F*p:p);T.applyColorToSymbol(C,M,F);u.length&&(p=q.getAllSizes(u,e,g),yield T.applySizesToSymbol(C,p));for(const G of l)T.applyRotationToSymbol(C,q.getRotationAngle(G,e,g),G.axis);return C}}});return x.apply(this,arguments)}function n(){n=b._asyncToGenerator(function*(e,
g){var p;if(e){var C=H(e.layer||e.sourceLayer);if(w.isSome(e.symbol)&&(!w.isSome(g)||!0!==g.ignoreGraphicSymbol))return e="web-style"===e.symbol.type?yield e.symbol.fetchSymbol(w.isSome(g)?g.abortOptions:null):e.symbol.clone(),T.getColorFromSymbol(e,C);var q=w.isSome(g)&&g.renderer||e.get("layer.renderer")||e.get("sourceLayer.renderer"),k=yield q.getSymbolAsync(e,g);if(k){k="web-style"===k.type?yield k.fetchSymbol(w.isSome(g)?g.abortOptions:null):k.clone();k=T.getColorFromSymbol(k,C);if(!("visualVariables"in
q)||"visualVariables"in q&&!q.visualVariables||"visualVariables"in q&&(null==(p=q.visualVariables)||!p.length))return k;q.arcadeRequiredForVisualVariables&&(w.isNone(g)||w.isNone(g.arcade))&&(g={...w.unwrap(g)},g.arcade=yield L.loadArcade());p=yield new Promise(function(u,l){f(["../../renderers/visualVariables/support/visualVariableUtils"],u,l)});var A=[],F=[];for(const u of q.visualVariables)switch(u.type){case "color":A.push(u);break;case "opacity":F.push(u)}q=(q=0<A.length?A[A.length-1]:null)?
p.getColor(q,e,g):k;e=(k=0<F.length?F[F.length-1]:null)?p.getOpacity(k,e,g):null;null!=C&&(e=null!=e?e*C:C);return q?T.applyOpacityToColor(q,e):null}}});return n.apply(this,arguments)}let d=null;c.getDisplayedColor=function(e,g){return n.apply(this,arguments)};c.getDisplayedSymbol=function(e,g){return x.apply(this,arguments)};c.renderColorRampPreviewHTML=function(e,g={}){var p="horizontal"===g.align;const {width:C=p?75:24,height:q=p?24:75,gradient:k=!0}=g;g=window.devicePixelRatio;var A=C*g,F=q*g;
g=document.createElement("canvas");g.width=A;g.height=F;g.style.width=`${C}px`;g.style.height=`${q}px`;const u=g.getContext("2d");var l=p?A:0,M=p?0:F;if(k){const G=u.createLinearGradient(0,0,l,M);p=e.length;const y=1===p?0:1/(p-1);e.forEach((t,r)=>G.addColorStop(r*y,t.toString()));u.fillStyle=G;u.fillRect(0,0,A,F)}else{A=p?A/e.length:A;F=p?F:F/e.length;M=l=0;for(const G of e)u.fillStyle=G.toString(),u.fillRect(l,M,A,F),l=p?l+A:0,M=p?0:M+F}e=document.createElement("div");e.style.width=`${C}px`;e.style.height=
`${q}px`;e.appendChild(g);return e};c.renderDotDensityPreviewHTML=function(e,g,p){const {backgroundColor:C,outline:q,dotSize:k}=e;p=p&&p.swatchSize||22;const A=Math.round(p*p/k**2*.8),F=window.devicePixelRatio;e=document.createElement("canvas");const u=p*F;e.width=u;e.height=u;e.style.width=`${e.width/F}px`;e.style.height=`${e.height/F}px`;const l=e.getContext("2d");C&&(l.fillStyle=C.toCss(!0),l.fillRect(0,0,u,u),l.fill());l.fillStyle=g.toCss(!0);if(d&&d.length/2===A)for(g=0;g<2*A;g+=2)l.fillRect(d[g],
d[g+1],k*F,k*F),l.fill();else for(d=[],g=0;g<2*A;g+=2){const M=Math.floor(Math.random()*(u-0+1)),G=Math.floor(Math.random()*(u-0+1));d.push(M,G);l.fillRect(M,G,k*F,k*F);l.fill()}q&&(q.color&&(l.strokeStyle=q.color.toCss(!0)),l.lineWidth=q.width,l.strokeRect(0,0,u,u));p=new Image(p,p);p.src=e.toDataURL();return p};c.renderPreviewHTML=W;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/symbols/support/utils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ./gfxUtils ./Symbol3DMaterial".split(" "),
function(f,c,b,z,w,L,T,W,Q,H,x,n){function d(v){v=v.symbolLayers;if(!v)return null;let E=null;v.forEach(N=>{if("object"!==N.type||null==N.resource.href)E="water"===N.type?W.unwrap(N.color):W.isSome(N.material)?W.unwrap(N.material.color):null});return E?new z(E):null}function e(v,E){if(null==E)return v;v=v.toRgba();v[3]*=E;return new z(v)}function g(v,E,N){if(v=v.symbolLayers){var O=R=>{R=W.isSome(R)?R:null;E=E||R||null!=N&&D;return e(E,N)};v.forEach(R=>{if("object"!==R.type||null==R.resource.href||
E)if("water"===R.type)R.color=O(R.color);else{var h=W.isSome(R.material)?R.material.color:null;h=O(h);W.isNone(R.material)?R.material=new n["default"]({color:h}):R.material.color=h;null!=N&&"outline"in R&&W.isSome(R.outline)&&W.isSome(R.outline.color)&&(R.outline.color=e(R.outline.color,N))}})}}function p(v,E){return C.apply(this,arguments)}function C(){C=b._asyncToGenerator(function*(v,E){(v=v.symbolLayers)&&(yield L.forEach(v,function(){var N=b._asyncToGenerator(function*(O){return q(O,E)});return function(O){return N.apply(this,
arguments)}}()))});return C.apply(this,arguments)}function q(v,E){return k.apply(this,arguments)}function k(){k=b._asyncToGenerator(function*(v,E){switch(v.type){case "extrude":v.size="number"===typeof E[2]?E[2]:0;break;case "icon":case "line":case "text":E=A(E);W.isSome(E)&&(v.size=E);break;case "path":{const N=l(E,H.ONES,[v.width,void 0,v.height]);v.width=y(E[0],v.width,1,N);v.height=y(E[2],v.height,1,N)}break;case "object":yield F(v,E)}});return k.apply(this,arguments)}function A(v){for(const E of v)if("number"===
typeof E)return E;return null}function F(v,E){return u.apply(this,arguments)}function u(){u=b._asyncToGenerator(function*(v,E){const {resourceSize:N,symbolSize:O}=yield M(v),R=l(E,N,O);v.width=y(E[0],O[0],N[0],R);v.depth=y(E[1],O[1],N[1],R);v.height=y(E[2],O[2],N[2],R)});return u.apply(this,arguments)}function l(v,E,N){for(let O=0;3>O;O++){const R=v[O];switch(R){case "symbol-value":return null!=N[O]?N[O]/E[O]:1;case "proportional":break;default:if(R&&E[O])return R/E[O]}}return 1}function M(v){return G.apply(this,
arguments)}function G(){G=b._asyncToGenerator(function*(v){const E=yield(yield new Promise(function(B,J){f(["./symbolLayerUtils"],B,J)})).computeObjectLayerResourceSize(v,10),{width:N,height:O,depth:R}=v;v=[N,R,O];let h=1;for(var K=0;3>K;K++)if(null!=v[K]){h=v[K]/E[K];break}for(K=0;3>K;K++)null==v[K]&&(v[K]=E[K]*h);return{resourceSize:E,symbolSize:v}});return G.apply(this,arguments)}function y(v,E,N,O){switch(v){case "proportional":return N*O;case "symbol-value":return null!=E?E:N;default:return v}}
function t(){t=b._asyncToGenerator(function*(v,E){if(v&&E){if(w.isSymbol3D(v))return p(v,E);if(w.isSymbol2D(v)&&(E=A(E),!W.isNone(E)))switch(v.type){case "simple-marker":v.size=E;break;case "picture-marker":{const N=v.width/v.height;1<N?(v.width=E,v.height=E*N):(v.width=E*N,v.height=E);break}case "simple-line":v.width=E;break;case "text":v.font.size=E}}});return t.apply(this,arguments)}const r=/\/resource\/(.*?)\.svg$/,D=new z("white");c.applyColorToSymbol=function(v,E,N){if(v&&(E||null!=N))if(E&&
(E=new z(E)),w.isSymbol3D(v))g(v,E,N);else if(w.isSymbol2D(v)){if(E=E||v.color)v.color=e(E,N);null!=N&&"outline"in v&&v.outline&&v.outline.color&&(v.outline.color=e(v.outline.color,N))}};c.applyOpacityToColor=e;c.applyRotationToSymbol=function(v,E,N){v&&null!=E&&(w.isSymbol3D(v)?(v=v.symbolLayers)&&v.forEach(O=>{if(O&&"object"===O.type)switch(N){case "tilt":O.tilt=E;break;case "roll":O.roll=E;break;default:O.heading=E}}):!w.isSymbol2D(v)||"simple-marker"!==v.type&&"picture-marker"!==v.type&&"text"!==
v.type||(v.angle=E))};c.applySizesToSymbol=function(v,E){return t.apply(this,arguments)};c.getColorFromSymbol=function(v,E){if(!v)return null;let N=null;w.isSymbol3D(v)?N=d(v):w.isSymbol2D(v)&&(N=v.color?new z(v.color):null);return N?e(N,E):null};c.getIconHref=function(v,E){E=E.resource.href;return!T("esri-canvas-svg-support")&&v.styleOrigin&&r.test(E)?E.replace(r,"/resource/png/$1.png"):E};c.getSymbolOutlineSize=function(v){if(!v)return 0;if(w.isSymbol3D(v)){{const E=v.symbolLayers&&v.symbolLayers.length;
E?(v=v.symbolLayers.getItemAt(E-1),v="outline"in v?W.get(v,"outline","size"):void 0):v=void 0}return W.isSome(v)?v:0}return(v=x.getStroke(v))&&Q.px2pt(v.width)||0};c.isVolumetricSymbol=function(v){if(W.isNone(v)||!("symbolLayers"in v)||W.isNone(v.symbolLayers))return!1;switch(v.type){case "point-3d":return v.symbolLayers.some(E=>"object"===E.type);case "line-3d":return v.symbolLayers.some(E=>"path"===E.type);case "polygon-3d":return v.symbolLayers.some(E=>"object"===E.type||"extrude"===E.type);default:return!1}};
Object.defineProperty(c,"__esModule",{value:!0})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/screenUtils ./cimSymbolUtils".split(" "),function(f,c,b,z,w,L,T){function W(d){if(!d)return null;let e;switch(d.type){case "simple-fill":case "picture-fill":case "simple-marker":e=W(d.outline);break;case "simple-line":{const g=L.pt2px(d.width);"none"!==d.style&&0!==g&&(e={color:d.color,style:n(d.style),width:g,cap:d.cap,
join:"miter"===d.join?L.pt2px(d.miterLimit):d.join});break}default:e=null}return e}const Q={left:"start",center:"middle",right:"end",justify:"start"},H={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},x=new w(1E3),n=function(){const d={};return function(e){if(d[e])return d[e];const g=e.replace(/-/g,"");return d[e]=g}}();b=new b([128,128,128]);f.defaultThematicColor=b;f.dekebabifyLineStyle=n;f.getFill=function(d){const e=d.style;let g=null;if(d)switch(d.type){case "simple-marker":"cross"!==
e&&"x"!==e&&(g=d.color);break;case "simple-fill":"solid"===e?g=d.color:"none"!==e&&(g={type:"pattern",x:0,y:0,src:c.getAssetUrl(`esri/symbols/patterns/${e}.png`),width:5,height:5});break;case "picture-fill":g={type:"pattern",src:d.url,width:L.pt2px(d.width)*d.xscale,height:L.pt2px(d.height)*d.yscale,x:L.pt2px(d.xoffset),y:L.pt2px(d.yoffset)};break;case "text":g=d.color;break;case "cim":g=T.getCIMSymbolColor(d)}return g};f.getPatternUrlWithColor=function(d,e){const g=d+"-"+e;return void 0!==x.get(g)?
Promise.resolve(x.get(g)):z(d,{responseType:"image"}).then(p=>{p=p.data;const C=p.naturalWidth,q=p.naturalHeight,k=document.createElement("canvas");k.width=C;k.height=q;const A=k.getContext("2d");A.fillStyle=e;A.fillRect(0,0,C,q);A.globalCompositeOperation="destination-in";A.drawImage(p,0,0);p=k.toDataURL();x.put(g,p);return p})};f.getSVGAlign=function(d){return d=(d=d.horizontalAlignment)&&Q[d.toLowerCase()]||"middle"};f.getSVGBaseline=function(d){return(d=d.verticalAlignment)&&H[d.toLowerCase()]||
"alphabetic"};f.getSVGBaselineShift=function(d){return"bottom"===d.verticalAlignment?"super":null};f.getStroke=W;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(f){return function(){function c(z,w){this._storage=new f.MemCacheStorage;this._storage.maxSize=z;w&&this._storage.registerRemoveFunc("",w)}var b=c.prototype;b.put=function(z,w){this._storage.put(z,w,1,1)};b.pop=function(z){return this._storage.pop(z)};b.get=function(z){return this._storage.get(z)};
b.clear=function(){this._storage.clearAll()};b.destroy=function(){this._storage.destroy()};return c}()})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(f,c,b){function z(n){n=b.toCIMSymbolJSON(n);if("CIMTextSymbol"===n.type)return n.height;let d=0;if(n.symbolLayers)for(const e of n.symbolLayers)b.isCIMMarker(e)&&e.size>d?d=e.size:b.isCIMStroke(e)&&e.width>d?d=e.width:b.isCIMFill(e);return d}function w(n,d,e,g){if("CIMTextSymbol"===n.type)n.height*=
d;else{if(e&&n.effects)for(const p of n.effects)W(p,d);if(n.symbolLayers)for(const p of n.symbolLayers)switch(p.type){case "CIMPictureMarker":case "CIMVectorMarker":L(p,d,g);break;case "CIMPictureStroke":case "CIMSolidStroke":null!=g&&g.preserveOutlineWidth||(p.width*=d);break;case "CIMPictureFill":p.height*=d;p.offsetX*=d;p.offsetY*=d;break;case "CIMHatchFill":w(p.lineSymbol,d,!0,{...g,preserveOutlineWidth:!1}),p.offsetX*=d,p.offsetY*=d,p.separation*=d}}}function L(n,d,e){n.markerPlacement&&T(n.markerPlacement,
d);n.offsetX*=d;n.offsetY*=d;n.anchorPoint&&"Absolute"===n.anchorPointUnits&&(n.anchorPoint={x:n.anchorPoint.x*d,y:n.anchorPoint.y*d});n.size*=d;if("CIMVectorMarker"===n.type&&n.markerGraphics)for(const g of n.markerGraphics)n.scaleSymbolsProportionally||w(g.symbol,d,!0,e)}function T(n,d){b.isCIMMarkerStrokePlacement(n)&&(n.offset*=d);switch(n.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":n.customEndingOffset*=d;n.offsetAlongLine*=d;if(n.placementTemplate&&
n.placementTemplate.length){var e=n.placementTemplate.map(g=>g*d);n.placementTemplate=e}break;case "CIMMarkerPlacementAlongLineVariableSize":n.maxRandomOffset*=d;n.placementTemplate&&n.placementTemplate.length&&(e=n.placementTemplate.map(g=>g*d),n.placementTemplate=e);break;case "CIMMarkerPlacementOnLine":n.startPointOffset*=d;break;case "CIMMarkerPlacementAtExtremities":n.offsetAlongLine*=d;break;case "CIMMarkerPlacementAtRatioPositions":n.beginPosition*=d;n.endPosition*=d;break;case "CIMMarkerPlacementPolygonCenter":n.offsetX*=
d;n.offsetY*=d;break;case "CIMMarkerPlacementInsidePolygon":n.offsetX*=d,n.offsetY*=d,n.stepX*=d,n.stepY*=d}}function W(n,d){switch(n.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":n.width*=d;break;case "CIMGeometricEffectBuffer":n.size*=d;break;case "CIMGeometricEffectCut":n.beginCut*=d;n.endCut*=d;n.middleCut*=d;break;case "CIMGeometricEffectDashes":n.customEndingOffset*=d;n.offsetAlongLine*=d;if(n.dashTemplate&&n.dashTemplate.length){const e=n.dashTemplate.map(g=>g*d);n.dashTemplate=
e}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":n.length*=d;break;case "CIMGeometricEffectMove":n.offsetX*=d;n.offsetY*=d;break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":n.offset*=d;break;case "CIMGeometricEffectRegularPolygon":n.radius*=d;break;case "CIMGeometricEffectTaperedPolygon":n.fromWidth*=d;n.length*=d;n.toWidth*=d;break;case "CIMGeometricEffectWave":n.amplitude*=d,n.period*=d}}function Q(n,d){let e;e="CIMTextSymbol"===
n.type?n.symbol:n;n="CIMPolygonSymbol"===n.type;if(e.symbolLayers)for(const g of e.symbolLayers)if(!(g.colorLocked||n&&(b.isCIMStroke(g)||b.isCIMMarker(g)&&g.markerPlacement&&b.isCIMMarkerStrokePlacement(g.markerPlacement))))switch(g.type){case "CIMVectorMarker":g.markerGraphics.forEach(p=>{Q(p.symbol,d)});break;case "CIMSolidStroke":case "CIMSolidFill":H(d,g.color);break;case "CIMHatchFill":Q(g.lineSymbol,d)}}function H(n,d){for(const e of n)if(e.join(".")===d.join("."))return;n.push(d)}function x(n,
d){var e="CIMTextSymbol"===n.type?n.symbol:n;n="CIMPolygonSymbol"===n.type?!0:!1;if(e.symbolLayers)for(const g of e.symbolLayers)if(!(g.colorLocked||n&&(b.isCIMStroke(g)||b.isCIMMarker(g)&&g.markerPlacement&&b.isCIMMarkerStrokePlacement(g.markerPlacement))))switch(e=d.toArray(0),g.type){case "CIMVectorMarker":g.markerGraphics.forEach(p=>{x(p.symbol,d)});break;case "CIMSolidStroke":case "CIMSolidFill":g.color=e;break;case "CIMHatchFill":x(g.lineSymbol,d)}}f.applyCIMSymbolColor=function(n,d){d instanceof
c||(d=new c(d));n=b.toCIMSymbolJSON(n);x(n,d)};f.applyCIMSymbolRotation=function(n,d,e=!1){n=b.toCIMSymbolJSON(n);e&&0!==d&&(d=360-d);if("CIMTextSymbol"===n.type)n.angle=d;else if("CIMPointSymbol"===n.type&&n.symbolLayers){e=d-(n.angle||0);for(const g of n.symbolLayers)if(b.isCIMMarker(g)){let p=g.rotation||0;p=g.rotateClockwise?p-e:p+e;g.rotation=p}n.angle=d}};f.getCIMSymbolColor=function(n){n=b.toCIMSymbolJSON(n);const d=[];Q(n,d);return d.length?new c(b.fromCIMColor(d[0])):null};f.getCIMSymbolRotation=
function(n,d=!1){n=b.toCIMSymbolJSON(n);return"CIMTextSymbol"===n.type||"CIMPointSymbol"===n.type?d&&0!==n.angle?360-n.angle:n.angle||0:0};f.getCIMSymbolSize=z;f.scaleCIMMarker=L;f.scaleCIMSymbolTo=function(n,d,e){const g=b.toCIMSymbolJSON(n);n=z(n);if(0===n)if("CIMTextSymbol"===g.type)g.height=d;else{if(g.symbolLayers)for(const p of g.symbolLayers)switch(p.type){case "CIMPictureMarker":case "CIMVectorMarker":p.size=d;break;case "CIMPictureStroke":case "CIMSolidStroke":p.width=d}}else w(g,d/n,!1,
e)};Object.defineProperty(f,"__esModule",{value:!0})})},"esri/symbols/cim/utils":function(){define(["exports"],function(f){function c(b,z){"string"!==typeof b&&(b=String(b));switch(z){case "LowerCase":return b.toLowerCase();case "Allcaps":return b.toUpperCase();default:return b}}f._adjustTextCase=c;f.colorToArray=function(b){return[b.r,b.g,b.b,b.a]};f.createLabelOverrideFunction=function(b,z,w){const L=H=>{let x=H.length;for(;x--;)if(-1===" /-,\n".indexOf(H.charAt(x)))return!1;return!0},T=[];var W=
0;let Q=-1;do Q=z.indexOf("[",W),Q>=W&&(Q>W&&(W=z.substr(W,Q-W),T.push([W,null,L(W)])),W=Q+1,Q=z.indexOf("]",W),Q>=W&&(Q>W&&(W=z.substr(W,Q-W),(W=b[W])&&T.push([null,W,!1])),W=Q+1));while(-1!==Q);W<z.length-1&&(b=z.substr(W),T.push([b,null,L(b)]));return H=>{let x="",n=null;for(const d of T){const [e,g,p]=d;if(e)p?n=e:(n&&(x+=n,n=null),x+=e);else{const C=H.attributes[g];C&&(n&&(x+=n,n=null),x+=C)}}return c(x,w)}};f.evaluateValueOrFunction=function(b,z,w,L){return"function"===typeof b?b(z,w,L):b};
f.fromCIMColor=function(b){return b?{r:b[0],g:b[1],b:b[2],a:b[3]/255}:{r:0,g:0,b:0,a:0}};f.isCIMFill=function(b){return"CIMGradientFill"===b.type||"CIMHatchFill"===b.type||"CIMPictureFill"===b.type||"CIMSolidFill"===b.type||"CIMWaterFill"===b.type};f.isCIMMarker=function(b){return"CIMVectorMarker"===b.type||"CIMPictureMarker"===b.type||"CIMBarChartMarker"===b.type||"CIMCharacterMarker"===b.type||"CIMPieChartMarker"===b.type||"CIMStackedBarChartMarker"===b.type};f.isCIMMarkerStrokePlacement=function(b){return"CIMMarkerPlacementAlongLineRandomSize"===
b.type||"CIMMarkerPlacementAlongLineSameSize"===b.type||"CIMMarkerPlacementAlongLineVariableSize"===b.type||"CIMMarkerPlacementAtExtremities"===b.type||"CIMMarkerPlacementAtMeasuredUnits"===b.type||"CIMMarkerPlacementAtRatioPositions"===b.type||"CIMMarkerPlacementOnLine"===b.type||"CIMMarkerPlacementOnVertices"===b.type};f.isCIMStroke=function(b){return"CIMGradientStroke"===b.type||"CIMPictureStroke"===b.type||"CIMSolidStroke"===b.type};f.resampleHermite=function(b,z,w,L,T,W,Q=!0){const H=z/T;w/=
W;const x=Math.ceil(H/2),n=Math.ceil(w/2);for(let g=0;g<W;g++)for(let p=0;p<T;p++){const C=4*(p+(Q?W-g-1:g)*T);var d=0;let q=0,k=0,A=0,F=0,u=0,l=0;const M=(g+.5)*w;for(let G=Math.floor(g*w);G<(g+1)*w;G++){var e=Math.abs(M-(G+.5))/n;const y=(p+.5)*H;e*=e;for(let t=Math.floor(p*H);t<(p+1)*H;t++){let r=Math.abs(y-(t+.5))/x;d=Math.sqrt(e+r*r);-1<=d&&1>=d&&(d=2*d*d*d-3*d*d+1,0<d&&(r=4*(t+G*z),l+=d*b[r+3],k+=d,255>b[r+3]&&(d=d*b[r+3]/250),A+=d*b[r],F+=d*b[r+1],u+=d*b[r+2],q+=d))}}L[C]=A/q;L[C+1]=F/q;L[C+
2]=u/q;L[C+3]=l/k}};f.toCIMSymbolJSON=function(b){var z;return null==(z=b.data)?void 0:z.symbol};Object.defineProperty(f,"__esModule",{value:!0})})},"esri/widgets/FeatureTemplates/TemplateItemGroup":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Identifiable ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(f,c,b,z,w,L,T,W,Q){b=function(H){function x(n){n=H.call(this,n)||this;n.items=null;n.label=null;return n}f._inheritsLoose(x,H);return x}(z.IdentifiableMixin(b));c.__decorate([w.property()],b.prototype,"items",void 0);c.__decorate([w.property()],b.prototype,"label",void 0);return b=c.__decorate([Q.subclass("esri.widgets.FeatureTemplates.TemplateItemGroup")],b)})},"esri/widgets/FeatureTemplates/ItemList":function(){define(["exports","../support/Heading","../support/jsxFactory","../support/widgetUtils"],
function(f,c,b,z){function w(x){const {headingLevel:n,identify:d,items:e,renderIcon:g,filterText:p,onItemMouseLeave:C,onItemMouseEnter:q,onItemSelect:k,selectedItem:A}=x;return 0===e.length?b.tsx("div",{class:H.noMatchesMessage,key:"no-matches"},x.messages.noMatches):e[0].items?b.tsx("div",{class:H.scroller,key:"item-container"},e.map(F=>W({filterText:p,group:F,headingLevel:n,identify:d,onItemMouseLeave:C,onItemMouseEnter:q,onItemSelect:k,renderIcon:g,selectedItem:A}))):b.tsx("ul",{class:z.classes(H.list,
H.scroller),key:"item-container"},e.map(F=>T({item:F,identify:d,grouped:!0,onItemMouseLeave:C,onItemMouseEnter:q,onItemSelect:k,renderIcon:g,filterText:p,selectedItem:A})))}function L(x){const n=`${x.id}-placeholder`;return b.tsx("div",{class:H.filterContainer,key:"filter"},b.tsx("input",{"aria-labelledby":n,class:z.classes(H.input,H.filterInput),oninput:d=>{d=d.currentTarget;x.onFilterChange&&x.onFilterChange(d.value)},value:x.filterText,type:"search"}),x.filterText?null:b.tsx("div",{class:H.filterPlaceholder,
id:n,key:"placeholder"},b.tsx("span",{class:H.searchIcon,"aria-hidden":"true"}),b.tsx("div",{class:H.filterPlaceholderText},x.messages.filterPlaceholder)))}function T(x){const {identify:n,item:d,selectedItem:e,grouped:g,filterText:p,onItemSelect:C,onItemMouseEnter:q,onItemMouseLeave:k,renderIcon:A}=x;x=`${(null==n?void 0:n(d))||d.id}__${d.label}`;const F=e?`${(null==n?void 0:n(e))||e.id}__${e.label}`:"";return b.tsx("li",{"aria-level":g?"2":"",class:z.classes(H.item,x===F&&H.itemSelected),"data-item":d,
key:x,onclick:u=>{u=u.currentTarget["data-item"];C&&C(u)},onmouseenter:u=>{u=u.currentTarget["data-item"];q&&q(u)},onkeydown:u=>{z.isActivationKey(u.key)&&(u=u.currentTarget["data-item"],C&&C(u))},onmouseleave:u=>{u=u.currentTarget["data-item"];k&&k(u)},tabIndex:0},b.tsx("div",{class:H.itemContainer},A&&A({item:d}),Q({text:d.label,match:p})))}function W(x){const {group:n,headingLevel:d,identify:e,onItemMouseLeave:g,onItemMouseEnter:p,onItemSelect:C,filterText:q,renderIcon:k,selectedItem:A}=x;x=`${e&&
e(n)||n.id}-heading`;return b.tsx("section",{"aria-labelledby":x,class:H.group,key:n.label},b.tsx(c.Heading,{id:x,class:H.groupHeader,level:d},Q({text:n.label,match:q})),b.tsx("ul",{class:H.list},n.items.map(F=>T({item:F,identify:e,grouped:!0,onItemMouseLeave:g,onItemMouseEnter:p,onItemSelect:C,renderIcon:k,filterText:q,selectedItem:A}))))}function Q(x){const {match:n,text:d}=x;x=null;if(n){x=d.toLowerCase();var e=n.toLowerCase(),g=x.indexOf(e);-1===g?x=d:(x=d.substring(0,g),e=d.substr(g,n.length),
g=d.substring(g+n.length),x=b.tsx("span",null,x,b.tsx("strong",null,e),g))}else x=d;return b.tsx("span",{class:H.itemLabel},x)}const H={base:"esri-item-list",list:"esri-item-list__list",group:"esri-item-list__group",scroller:"esri-item-list__scroller",groupHeader:"esri-item-list__group-header",item:"esri-item-list__list-item",itemSelected:"esri-item-list__list-item--selected",itemContainer:"esri-item-list__list-item-container",itemLabel:"esri-item-list__list-item-label",noMatchesMessage:"esri-item-list__no-matches-message",
noItemsMessage:"esri-item-list__no-items-message",filterContainer:"esri-item-list__filter-container",filterPlaceholder:"esri-item-list__filter-placeholder",filterInput:"esri-item-list__filter-input",filterPlaceholderText:"esri-item-list__filter-placeholder-text",searchIcon:"esri-icon-search",widget:"esri-widget",input:"esri-input"};f.ItemList=function(x){const {id:n,identify:d,filterEnabled:e=!0,headingLevel:g=4,items:p,selectedItem:C,messages:q,filterText:k="",onFilterChange:A,renderIcon:F,onItemMouseLeave:u,
onItemMouseEnter:l,onItemSelect:M}=x;return b.tsx("div",{class:z.classes(H.base,H.widget),key:n},e?L({filterText:k,messages:q,onFilterChange:A,id:n}):null,w({identify:d,items:p,selectedItem:C,messages:q,filterText:k,headingLevel:g,renderIcon:F,onItemMouseLeave:u,onItemMouseEnter:l,onItemSelect:M}))};f.renderGroup=W;f.renderItem=T;f.renderLabel=Q;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/widgets/Spinner":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/promiseUtils ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Spinner/SpinnerViewModel ./support/widgetUtils ./support/jsxFactory".split(" "),
function(f,c,b,z,w,L,T,W,Q,H,x,n,d,e,g){T=function(p){function C(k,A){k=p.call(this,k,A)||this;k._animationDelay=500;k._animationPromise=null;k.location=null;k.view=null;k.viewModel=new d;k.visible=!1;return k}f._inheritsLoose(C,p);var q=C.prototype;q.initialize=function(){this.own([w.watch(this,"visible",k=>this._visibleChange(k))])};q.destroy=function(){this._animationPromise=null};q.show=function(k){const {location:A,promise:F}=k;A&&(this.viewModel.location=A);this.visible=!0;k=()=>this.hide();
F&&F.catch(()=>{}).then(k)};q.hide=function(){this.visible=!1};q.render=function(){var {visible:k}=this,{screenLocation:A}=this.viewModel;A=!!A;k={["esri-spinner--start"]:k&&A,["esri-spinner--finish"]:!k&&A};A=this._getPositionStyles();return g.tsx("div",{class:this.classes("esri-spinner",k),styles:A})};q._visibleChange=function(k){if(k)this.viewModel.screenLocationEnabled=!0;else{var A=z.after(this._animationDelay);this._animationPromise=A;A.catch(()=>{}).then(()=>{this._animationPromise===A&&(this.viewModel.screenLocationEnabled=
!1,this._animationPromise=null)})}};q._getPositionStyles=function(){const {screenLocation:k,view:A}=this.viewModel;if(!A||b.isNone(k))return{};const {padding:F}=A;return{left:`${k.x-F.left}px`,top:`${k.y-F.top}px`}};return C}(n);c.__decorate([L.aliasOf("viewModel.location")],T.prototype,"location",void 0);c.__decorate([L.aliasOf("viewModel.view")],T.prototype,"view",void 0);c.__decorate([H.property({type:d})],T.prototype,"viewModel",void 0);c.__decorate([L.aliasOf("viewModel.visible")],T.prototype,
"visible",void 0);return T=c.__decorate([x.subclass("esri.widgets.Spinner")],T)})},"esri/widgets/Spinner/SpinnerViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../support/AnchorElementViewModel".split(" "),function(f,c,b,z,w,L,T,W){z=function(Q){function H(x){x=Q.call(this,x)||this;x.visible=
!1;return x}f._inheritsLoose(H,Q);return H}(W);c.__decorate([b.property()],z.prototype,"visible",void 0);return z=c.__decorate([T.subclass("esri.widgets.CompassViewModel")],z)})},"esri/widgets/support/AnchorElementViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Evented ../../core/Handles ../../core/maybe ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(f,c,b,z,w,L,T,W,Q,H,x){b=function(n){function d(g){var p=n.call(this,g)||this;p._anchorHandles=new z;p.location=null;p.screenLocation=null;p.screenLocationEnabled=!1;p.view=null;p._anchorHandles.add([L.watch(f._assertThisInitialized(p),["screenLocationEnabled","location","view.size","view.stationary"],()=>p._updateScreenPointAndHandle()),L.watch(f._assertThisInitialized(p),["view","view.ready"],()=>p._wireUpView())]);return p}f._inheritsLoose(d,n);var e=d.prototype;e.destroy=function(){this.view=
null;this._anchorHandles&&this._anchorHandles.destroy();this._viewpointHandle=this._anchorHandles=null};e._wireUpView=function(){this._anchorHandles.remove("view");this._viewpointHandle=null;if(this.get("view.ready")){this._setScreenLocation();var {view:g}=this;g=L.pausable(g,"3d"===g.type?"camera":"viewpoint",()=>this._viewpointChange());this._anchorHandles.add(g,"view");this._viewpointHandle=g;this._toggleWatchingViewpoint()}};e._viewpointChange=function(){this._setScreenLocation();this.emit("view-change")};
e._updateScreenPointAndHandle=function(){this._setScreenLocation();this._toggleWatchingViewpoint()};e._toggleWatchingViewpoint=function(){const {_viewpointHandle:g,location:p,screenLocationEnabled:C}=this;g&&(p&&C?g.resume():g.pause())};e._setScreenLocation=function(){const {location:g,view:p,screenLocationEnabled:C}=this;var q=this.get("view.ready");q=C&&q&&w.isSome(g)?p.toScreen(g):null;this._set("screenLocation",q)};return d}(b.EventedAccessor);c.__decorate([T.property()],b.prototype,"location",
void 0);c.__decorate([T.property({readOnly:!0})],b.prototype,"screenLocation",void 0);c.__decorate([T.property()],b.prototype,"screenLocationEnabled",void 0);c.__decorate([T.property()],b.prototype,"view",void 0);return b=c.__decorate([x.subclass("esri.widgets.support.AnchorElementViewModel")],b)})},"esri/widgets/Editor/EditorViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/Error ../../core/Evented ../../core/HandleOwner ../../core/Logger ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../../layers/GraphicsLayer ../../views/interactive/snapping/SnappingOptions ../Attachments/AttachmentsViewModel ./BatchCreateWorkflow ./CreateWorkflow ./UpdateWorkflow ../FeatureForm/FeatureFormViewModel ../FeatureTemplates/FeatureTemplatesViewModel ../Sketch/SketchViewModel ../Spinner/SpinnerViewModel".split(" "),
function(f,c,b,z,w,L,T,W,Q,H,x,n,d,e,g,p,C,q,k,A,F,u,l){function M(r,D,v){y.error(new z(r,D,v))}function G(r,D){return r&&r.find(v=>v.layer===D)}const y=T.getLogger("esri.widgets.Editor.EditorViewModel"),t=["create","update"];w=function(r){function D(E){E=r.call(this,E)||this;E._sketchGraphicsLayer=new e({listMode:"hide",internal:!0});E.activeWorkflow=null;E.activityQueue=[];E.failures=[];E.attachmentsViewModel=new p({abilities:{editing:!0}});E.featureFormViewModel=new A;E.featureTemplatesViewModel=
new F;E.layerInfos=null;E.sketchViewModel=new u({layer:E._sketchGraphicsLayer});E.snappingOptions=new g;E.spinnerViewModel=new l;return E}f._inheritsLoose(D,r);var v=D.prototype;v.initialize=function(){this.handles.add([W.on(this,"activeWorkflow","cancel",()=>this.emit("workflow-cancel")),W.on(this,"activeWorkflow","commit",()=>this.emit("workflow-commit")),W.init(this,"view.map",E=>{E&&E.add(this._sketchGraphicsLayer)}),W.watch(this,"editableItems",()=>{const {activeWorkflow:E}=this;this.refreshCreationTemplates();
if(E){var {stepId:N}=E;"create"===E.type?"awaiting-feature-creation-info"!==N||this.canCreate||this._cancelWorkflow():"update"===E.type&&("awaiting-feature-to-update"===N&&!this.canUpdate||"awaiting-update-feature-candidate"===N&&!E.data.candidates.some(O=>{const R=this.editableItems.find(h=>h.layer===O.layer);return R&&-1<R.supports.indexOf("update")}))&&this._cancelWorkflow()}})])};v.destroy=function(){this._cancelWorkflow().then(()=>{var E;null!=(E=this.view)&&E.map&&this.view.map.remove(this._sketchGraphicsLayer);
this.view=null})};v.startCreateWorkflowAtFeatureTypeSelection=function(){var E=f._asyncToGenerator(function*(){if(this.canCreate){yield this._cancelWorkflow();var N=this._createCreateWorkflow();yield N.start();this._set("activeWorkflow",N)}else M("editing:unsupported-workflow","Create workflow is unsupported or disabled.")});return function(){return E.apply(this,arguments)}}();v.startCreateWorkflowAtFeatureCreation=function(){var E=f._asyncToGenerator(function*(N){if(this.canCreate){yield this._cancelWorkflow();
var O=this._createCreateWorkflow("awaiting-feature-to-create");O.data.creationInfo=N;yield O.start();this._set("activeWorkflow",O)}else M("editing:unsupported-workflow","Create workflow is unsupported or disabled.")});return function(N){return E.apply(this,arguments)}}();v.startBatchCreateWorkflow=function(){var E=f._asyncToGenerator(function*(N,O="awaiting-feature-creation-info"){if(!this.canCreate)throw new z("editing:unsupported-workflow","Batch create workflow is unsupported or disabled.");yield this._cancelWorkflow();
N=this._createBatchCreateWorkflow(N,O);yield N.start();this._set("activeWorkflow",N)});return function(N){return E.apply(this,arguments)}}();v.startCreateWorkflowAtFeatureEdit=function(){var E=f._asyncToGenerator(function*(N){if(this.canCreate){yield this._cancelWorkflow();var O=this._createCreateWorkflow("editing-new-feature");O.data.edits.feature=N;yield O.start();this._set("activeWorkflow",O)}else M("editing:unsupported-workflow","Create workflow is unsupported or disabled.")});return function(N){return E.apply(this,
arguments)}}();v.startUpdateWorkflowAtFeatureSelection=function(){var E=f._asyncToGenerator(function*(){if(this.canUpdate){yield this._cancelWorkflow();var N=this._createUpdateWorkflow();yield N.start();this._set("activeWorkflow",N)}else M("editing:unsupported-workflow","Update workflow is unsupported or disabled.")});return function(){return E.apply(this,arguments)}}();v.startUpdateWorkflowAtMultipleFeatureSelection=function(){var E=f._asyncToGenerator(function*(N){if(this.canUpdate){yield this._cancelWorkflow();
var O=this._createUpdateWorkflow("awaiting-update-feature-candidate");O.data.candidates=N;yield O.start();this._set("activeWorkflow",O)}else M("editing:unsupported-workflow","Update workflow is unsupported or disabled.")});return function(N){return E.apply(this,arguments)}}();v.startUpdateWorkflowAtFeatureEdit=function(){var E=f._asyncToGenerator(function*(N){if(this.canUpdate){yield this._cancelWorkflow();var O=this._createUpdateWorkflow("editing-existing-feature");O.data.edits.feature=N;yield O.start();
this._set("activeWorkflow",O)}else M("editing:unsupported-workflow","Update workflow is unsupported or disabled.")});return function(N){return E.apply(this,arguments)}}();v.deleteFeatureFromWorkflow=function(){var E=f._asyncToGenerator(function*(){const {activeWorkflow:N}=this;N&&"update"===N.type?(yield this._delete(N.data.edits.feature),yield N.reset()):M("editing:unsupported-workflow","Deleting requires an active update workflow.")});return function(){return E.apply(this,arguments)}}();v.cancelWorkflow=
function(){var E=f._asyncToGenerator(function*(N){return this._cancelWorkflow({warn:!0,...N})});return function(N){return E.apply(this,arguments)}}();v.refreshCreationTemplates=function(){const E=[];for(const {layer:N,supports:O}of this.editableItems)"templates"in N&&O.includes("create")&&E.push(N);this.featureTemplatesViewModel.layers=E};v._cancelWorkflow=function(){var E=f._asyncToGenerator(function*(N){const O=this.activeWorkflow;O?N&&!1===N.force?(yield O.cancel(N),this._set("activeWorkflow",
null)):(this.emit("workflow-cancel"),this._set("activeWorkflow",null),yield O.cancel(N)):N&&N.warn&&M("editing:no-active-workflow","There is no active workflow to cancel.")});return function(N){return E.apply(this,arguments)}}();v._createBatchCreateWorkflow=function(E,N){return C.create(this,E,N,(O,R)=>this._applyEdits(O,R))};v._createCreateWorkflow=function(E){return q.create(this,E,(N,O)=>this._applyEdits(N,O))};v._createUpdateWorkflow=function(E){return k.create(this,E,(N,O)=>this._applyEdits(N,
O))};v._delete=function(){var E=f._asyncToGenerator(function*(N){const O=N.sourceLayer;"applyEdits"in O&&(yield this._applyEdits(O,{deleteFeatures:[N]}))});return function(N){return E.apply(this,arguments)}}();v._applyEdits=function(){var E=f._asyncToGenerator(function*(N,O){var R=this;yield this._queueOperation(f._asyncToGenerator(function*(){const h=yield R.view.whenLayerView(N),K=yield N.applyEdits(O);yield W.whenFalseOnce(h,"updating");return K}))});return function(N,O){return E.apply(this,arguments)}}();
v._queueOperation=function(E){this.activityQueue.push(E);this.notifyChange("syncing");const N=(O,R)=>{O=R.indexOf(O);-1<O&&R.splice(O,1)};return E().then(({addFeatureResults:O,deleteFeatureResults:R,updateFeatureResults:h})=>{if(O=O.find(K=>!!K.error)||h.find(K=>!!K.error)||R.find(K=>!!K.error))throw O.error;}).catch(O=>{M("editing:operation-error","An error occurred.",{error:O});const R={error:O,retry:()=>{N(R,this.failures);return this._queueOperation(E)},cancel:()=>{N(R,this.failures)}};this._set("failures",
[...this.failures,R])}).then(()=>{N(E,this.activityQueue);this.notifyChange("syncing")})};f._createClass(D,[{key:"allowedWorkflows",get:function(){return this._get("allowedWorkflows")},set:function(E){E&&0!==E.length||(E=[...t]);this._set("allowedWorkflows",E)}},{key:"canCreate",get:function(){return this.editableItems.some(E=>E.supports.includes("create"))}},{key:"canUpdate",get:function(){return this.editableItems.some(E=>E.supports.includes("update"))}},{key:"editableItems",get:function(){var E,
N,O;const R=null==(E=this.view)?void 0:E.allLayerViews;if(!R)return new b;const h=new Set(null==(N=this.view)?void 0:null==(O=N.map)?void 0:O.editableLayers);return R.filter(K=>h.has(K.layer)).map(K=>{const {layer:B,suspended:J}=K,{data:V,operations:aa}=B.capabilities;K=G(this.layerInfos,B);const ha="supportsAttachment"in V&&V.supportsAttachment&&(!K||!1!==K.allowAttachments);if(J)return{hasAttachments:ha,layer:B,supports:[]};const la=[];aa.supportsAdd&&this.allowedWorkflows.includes("create")&&(!K||
!1!==K.enabled&&!1!==K.addEnabled)&&la.push("create");aa.supportsUpdate&&this.allowedWorkflows.includes("update")&&(!K||!1!==K.enabled&&!1!==K.updateEnabled)&&la.push("update");!1!==(K&&K.deleteEnabled)&&aa.supportsDelete&&la.push("delete");return{hasAttachments:ha,layer:B,supports:la}}).reverse()}},{key:"state",get:function(){if(!this.get("view.ready")||0===this.editableItems.length)return"disabled";var E=this.attachmentsViewModel.mode;if("add"===E)return"adding-attachment";if("edit"===E)return"editing-attachment";
({activeWorkflow:E}=this);return E?E.stepId:"ready"}},{key:"syncing",get:function(){return 0<this.activityQueue.length}},{key:"view",set:function(E){this.sketchViewModel.view=E;this.spinnerViewModel.view=E;this._set("view",E)}}]);return D}(L.HandleOwnerMixin(w.EventedAccessor));c.__decorate([n.property({readOnly:!0})],w.prototype,"activeWorkflow",void 0);c.__decorate([n.property({readOnly:!0})],w.prototype,"activityQueue",void 0);c.__decorate([n.property({value:[...t]})],w.prototype,"allowedWorkflows",
null);c.__decorate([n.property({readOnly:!0})],w.prototype,"canCreate",null);c.__decorate([n.property({readOnly:!0})],w.prototype,"canUpdate",null);c.__decorate([n.property({readOnly:!0})],w.prototype,"editableItems",null);c.__decorate([n.property({readOnly:!0})],w.prototype,"failures",void 0);c.__decorate([n.property()],w.prototype,"attachmentsViewModel",void 0);c.__decorate([n.property()],w.prototype,"featureFormViewModel",void 0);c.__decorate([n.property()],w.prototype,"featureTemplatesViewModel",
void 0);c.__decorate([n.property()],w.prototype,"layerInfos",void 0);c.__decorate([n.property()],w.prototype,"sketchViewModel",void 0);c.__decorate([Q.aliasOf("sketchViewModel.snappingOptions")],w.prototype,"snappingOptions",void 0);c.__decorate([n.property()],w.prototype,"spinnerViewModel",void 0);c.__decorate([n.property()],w.prototype,"state",null);c.__decorate([n.property({readOnly:!0})],w.prototype,"syncing",null);c.__decorate([n.property()],w.prototype,"view",null);return w=c.__decorate([d.subclass("esri.widgets.Editor.EditorViewModel")],
w)})},"esri/layers/GraphicsLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/subclass ./Layer ./mixins/BlendLayer ./mixins/ScaleRangeLayer ../support/GraphicsCollection ../symbols/support/ElevationInfo".split(" "),function(f,c,b,z,w,L,T,W,Q,H,x,n){z=function(d){function e(p){p=d.call(this,p)||this;p.elevationInfo=null;p.graphics=
new x["default"];p.screenSizePerspectiveEnabled=!0;p.type="graphics";p.internal=!1;return p}f._inheritsLoose(e,d);var g=e.prototype;g.destroy=function(){this.removeAll();this.graphics.destroy()};g.add=function(p){this.graphics.add(p);return this};g.addMany=function(p){this.graphics.addMany(p);return this};g.removeAll=function(){this.graphics.removeAll();return this};g.remove=function(p){this.graphics.remove(p)};g.removeMany=function(p){this.graphics.removeMany(p)};g.on=function(p,C){return d.prototype.on.call(this,
p,C)};g.graphicChanged=function(p){this.emit("graphic-update",p)};return e}(Q.BlendLayer(H.ScaleRangeLayer(W)));c.__decorate([b.property({type:n})],z.prototype,"elevationInfo",void 0);c.__decorate([b.property(x.graphicsCollectionProperty())],z.prototype,"graphics",void 0);c.__decorate([b.property({type:["show","hide"]})],z.prototype,"listMode",void 0);c.__decorate([b.property()],z.prototype,"screenSizePerspectiveEnabled",void 0);c.__decorate([b.property({readOnly:!0})],z.prototype,"type",void 0);
c.__decorate([b.property({constructOnly:!0})],z.prototype,"internal",void 0);return z=c.__decorate([T.subclass("esri.layers.GraphicsLayer")],z)})},"esri/widgets/Editor/BatchCreateWorkflow":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/arrayUtils ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/trackingUtils ../../views/interactive/snapping/FeatureSnappingLayerSource ./BatchCreateWorkflowData ./Workflow ./workflowUtils".split(" "),
function(f,c,b,z,w,L,T,W,Q,H,x,n,d,e){var g;w=g=function(p){function C(k){k=p.call(this,k)||this;k.type="batch-create";k.createFeatureState="create-new";k.featureFormHandle=null;k.visualVariableAttributes={rotation:null,size:null};k.highlightHandles=new Map;k.preventDefaultActionOnCancel=!1;return k}f._inheritsLoose(C,p);var q=C.prototype;q.updatePendingFeature=function(){var k=f._asyncToGenerator(function*(A){this.preventDefaultActionOnCancel=!0;this.data.viewModel.sketchViewModel.cancel();b.remove(this.lastActiveGraphics,
A);return this.startUpdating(A)});return function(A){return k.apply(this,arguments)}}();C.create=function(k,A,F,u){k=new g({data:new n.BatchCreateWorkflowData({creationInfo:A,viewModel:k}),onCommit:function(){var l=f._asyncToGenerator(function*(M){yield u(M.creationInfo.layer,{addFeatures:M.viewModel.sketchViewModel.layer.graphics.toArray()})});return function(M){return l.apply(this,arguments)}}()});k._set("steps",this._createWorkflowSteps(k,F));return k};q.highlight=function(k){const A=this.data.viewModel.view;
"3d"===A.type&&this.highlightHandles.set(k,A.highlight(k))};q.removeHighlight=function(k){z.removeMaybe(this.highlightHandles.get(k));this.highlightHandles.delete(k)};q.startCreating=function(){var k=f._asyncToGenerator(function*(){this.createFeatureState="create-new";return e.startCreatingNewFeature(this.data.viewModel.sketchViewModel,this.data.creationInfo)});return function(){return k.apply(this,arguments)}}();q.startUpdating=function(){var k=f._asyncToGenerator(function*(A){var F;const u=this.data.viewModel,
l=u.sketchViewModel,M=this.data.creationInfo.layer;u.featureFormViewModel.set({feature:A,fieldConfig:null==(F=e.findLayerInfo(u.layerInfos,M))?void 0:F.fieldConfig});z.removeMaybe(this.featureFormHandle);this.featureFormHandle=u.featureFormViewModel.on("value-change",f._asyncToGenerator(function*(){A.attributes=u.featureFormViewModel.getValues();"3d"===l.view.type&&(yield e.updateGraphicSymbolWhenRequired(A))}));this.removeHighlight(A);this.createFeatureState="update-pending";this.visualVariableAttributes=
e.getVisualVariableAttributes(A);return e.startUpdatingFeature(l,A,M,this.visualVariableAttributes)});return function(A){return k.apply(this,arguments)}}();C._createWorkflowSteps=function(k,A="awaiting-feature-creation-info"){const {data:F,handles:u}=k;let l=null,M=!0;A=e.createWorkflowSteps(["awaiting-feature-creation-info","batch-creating-features"],A,{"awaiting-feature-creation-info":()=>({id:"awaiting-feature-creation-info",setUp(){var G=this;return f._asyncToGenerator(function*(){F.creationInfo=
null;u.add(F.viewModel.featureTemplatesViewModel.on("select",({item:y})=>{F.creationInfo={layer:y.layer,template:y.template};F.viewModel.activeWorkflow.next()}),G.id)})()},tearDown(){var G=this;return f._asyncToGenerator(function*(){u.remove(G.id)})()}}),"batch-creating-features":()=>({id:"batch-creating-features",setUp(){var G=this;return f._asyncToGenerator(function*(){const y=F.viewModel.view,t=F.viewModel.sketchViewModel;M=t.updateOnGraphicClick;t.updateOnGraphicClick=!1;k.lastActiveGraphics=
[];k.featureFormHandle=z.removeMaybe(k.featureFormHandle);k.visualVariableAttributes={rotation:null,size:null};const r=t.on("create",function(){var R=f._asyncToGenerator(function*(h){if("cancel"===h.state){if(k.preventDefaultActionOnCancel){k.preventDefaultActionOnCancel=!1;return}if(1>k.lastActiveGraphics.length)return k.startCreating();h=k.lastActiveGraphics.pop();return k.startUpdating(h)}if("complete"===h.state)return k.startUpdating(h.graphic)});return function(h){return R.apply(this,arguments)}}()),
D=t.on("update",function(){var R=f._asyncToGenerator(function*(h){var K=h.graphics[0];if("complete"===h.state){K!==l&&(k.lastActiveGraphics.push(K),k.highlight(K));l=null;if(h.aborted&&k.preventDefaultActionOnCancel){k.preventDefaultActionOnCancel=!1;return}return k.startCreating()}"start"===h.state&&k.removeHighlight(K);yield e.visualVariableInteractiveUpdate(y,K,h,k.visualVariableAttributes);h=K.attributes;z.isSome(k.visualVariableAttributes.rotation)&&({field:K}=k.visualVariableAttributes.rotation,
F.viewModel.featureFormViewModel.setValue(K,h[K]));z.isSome(k.visualVariableAttributes.size)&&({field:K}=k.visualVariableAttributes.size,F.viewModel.featureFormViewModel.setValue(K,h[K]))});return function(h){return R.apply(this,arguments)}}()),v=t.on("delete",function(){var R=f._asyncToGenerator(function*(h){h=h.graphics[0];b.remove(k.lastActiveGraphics,h);l=h});return function(h){return R.apply(this,arguments)}}());let E=null;const N=H.reactionInit(()=>{var R;const h=t.snappingOptions.featureSources.find(K=>
K.layer===F.creationInfo.layer);return{hasFeatureLayerSource:!!h,enabled:null!=(R=null==h?void 0:h.enabled)?R:!1}},({hasFeatureLayerSource:R,enabled:h})=>{const K=t.snappingOptions.featureSources;R?(z.isNone(E)&&(E=new x({layer:t.layer,enabled:h}),K.add(E)),E.enabled=h):(z.isSome(E)&&K.remove(E),E=z.destroyMaybe(E))}),O=y.on("immediate-click",function(){var R=f._asyncToGenerator(function*(h){h=yield y.hitTest(h,{include:t.layer});0<h.results.length&&(h=h.results[0].graphic,"transform"!==t.activeTool&&
"reshape"!==t.activeTool||t.updateGraphics.getItemAt(0)===h||(yield k.updatePendingFeature(h)))});return function(h){return R.apply(this,arguments)}}());yield k.startCreating();u.add({remove:()=>{z.removeMaybe(k.featureFormHandle);r.remove();D.remove();v.remove();N.remove();z.isSome(E)&&t.snappingOptions.featureSources.remove(E);E=z.destroyMaybe(E);t.cancel();O.remove()}},G.id)})()},tearDown(G){var y=this;return f._asyncToGenerator(function*(){G.cancelled&&F.viewModel.sketchViewModel.layer.removeAll();
u.remove(y.id);F.viewModel.sketchViewModel.updateOnGraphicClick=M})()}})});return e.avoidFeatureTemplateSelectionWithOnlyOneItem(F,A)};f._createClass(C,[{key:"numPendingFeatures",get:function(){return this.data.viewModel.sketchViewModel.layer.graphics.length}},{key:"pendingFeatures",get:function(){return this.data.viewModel.sketchViewModel.layer.graphics}}]);return C}(d);return w=g=c.__decorate([Q.subclass("esri.widgets.Editor.BatchCreateWorkflow")],w)})},"esri/widgets/Editor/BatchCreateWorkflowData":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(f,c,b,z,w,L,T,W,Q){f.BatchCreateWorkflowData=function(H){function x(n){n=H.call(this,n)||this;n.creationInfo=null;n.viewModel=null;return n}c._inheritsLoose(x,H);return x}(z);b.__decorate([w.property()],f.BatchCreateWorkflowData.prototype,"creationInfo",void 0);b.__decorate([w.property()],f.BatchCreateWorkflowData.prototype,"viewModel",void 0);f.BatchCreateWorkflowData=b.__decorate([Q.subclass("esri.widgets.Editor.BatchCreateWorkflowData")],f.BatchCreateWorkflowData);Object.defineProperty(f,
"__esModule",{value:!0})})},"esri/widgets/Editor/Workflow":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Error ../../core/Evented ../../core/HandleOwner ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),function(f,c,b,z,w,L,T,W,Q,H){z=function(x){function n(e){e=x.call(this,e)||this;e._indexHistory=[];e._lastStepIndex=-1;e._stepIndex=
-1;e._handleKeys={afterCommit:"after-commit",beforeCommit:"before-commit"};e.data=void 0;e.started=!1;e.steps=[];e.type=null;return e}f._inheritsLoose(n,x);var d=n.prototype;d.cancel=function(){var e=f._asyncToGenerator(function*(g={force:!0}){return!1!==g.force?this._cancel():new Promise((p,C)=>{this.emit("cancel-request",{controller:{allow:()=>{this._cancel().then(p)},deny:()=>C(new b("workflow:cancel-denied","Request to cancel workflow was denied."))}})})});return function(){return e.apply(this,
arguments)}}();d.commit=function(){var e=f._asyncToGenerator(function*(){this.handles.remove(this._handleKeys.beforeCommit);yield this.onCommit(this.data);this.handles.remove(this._handleKeys.afterCommit);this.emit("commit");this.started&&(yield this.reset())});return function(){return e.apply(this,arguments)}}();d.go=function(){var e=f._asyncToGenerator(function*(g){var {steps:p}=this;p=p.findIndex(C=>C.id===g);this._indexHistory.push(this._stepIndex);yield this._go(p)});return function(g){return e.apply(this,
arguments)}}();d.next=function(){var e=f._asyncToGenerator(function*(){this._indexHistory.push(this._stepIndex);yield this._go(this._stepIndex+1)});return function(){return e.apply(this,arguments)}}();d.previous=function(){var e=f._asyncToGenerator(function*(g={cancelCurrentStep:!1}){yield this._go(this._indexHistory.pop(),g.cancelCurrentStep)});return function(){return e.apply(this,arguments)}}();d.reset=function(){var e=f._asyncToGenerator(function*(){yield this._cancel(!1);yield this.start()});
return function(){return e.apply(this,arguments)}}();d.start=function(){var e=f._asyncToGenerator(function*(){this._set("started",!0);yield this._go(-1===this._stepIndex?0:this._stepIndex)});return function(){return e.apply(this,arguments)}}();d._cancel=function(){var e=f._asyncToGenerator(function*(g=!0){this.started&&(this._set("started",!1),yield this.steps[this._stepIndex].tearDown({cancelled:!0}),this.data&&this.data.viewModel.sketchViewModel.layer.removeAll());this.handles.remove([this._handleKeys.afterCommit,
this._handleKeys.beforeCommit]);this._resetIndexing(g);g&&this.emit("cancel")});return function(){return e.apply(this,arguments)}}();d._go=function(){var e=f._asyncToGenerator(function*(g=-1,p=!1){-1>=g||g>=this.steps.length||(this.started&&(-1<this._lastStepIndex&&(yield this.steps[this._lastStepIndex].tearDown({cancelled:p})),yield this.steps[g].setUp(),this._lastStepIndex=g),this._stepIndex=g,this._notifyStepProps())});return function(){return e.apply(this,arguments)}}();d._resetIndexing=function(e=
!0){this._lastStepIndex=this._stepIndex=-1;this._indexHistory.length=0;e&&this._notifyStepProps()};d._notifyStepProps=function(){this.notifyChange("stepId");this.notifyChange("hasPreviousStep");this.notifyChange("hasNextStep")};f._createClass(n,[{key:"hasNextStep",get:function(){const {steps:e}=this;return!!(e&&this._stepIndex<e.filter(g=>!g.parent).length-1)}},{key:"hasPreviousStep",get:function(){return 0<this._stepIndex}},{key:"stepId",get:function(){var {steps:e}=this;return(e=e&&e[this._stepIndex])&&
e.id}}]);return n}(w.HandleOwnerMixin(z.EventedAccessor));c.__decorate([L.property()],z.prototype,"data",void 0);c.__decorate([L.property()],z.prototype,"hasNextStep",null);c.__decorate([L.property()],z.prototype,"hasPreviousStep",null);c.__decorate([L.property()],z.prototype,"onCommit",void 0);c.__decorate([L.property()],z.prototype,"started",void 0);c.__decorate([L.property({readOnly:!0})],z.prototype,"stepId",null);c.__decorate([L.property()],z.prototype,"steps",void 0);c.__decorate([L.property({readOnly:!0})],
z.prototype,"type",void 0);c.__decorate([L.property()],z.prototype,"commit",null);return z=c.__decorate([H.subclass("esri.widgets.Editor.Workflow")],z)})},"esri/widgets/Editor/workflowUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../Graphic ../../core/has ../../core/maybe ../../core/promiseUtils ../../core/screenUtils ../../core/watchUtils ../../core/accessorSupport/diffUtils ../../renderers/support/clickToleranceUtils ../../renderers/support/lengthUtils ../../renderers/visualVariables/support/sizeVariableUtils ../../renderers/visualVariables/support/visualVariableUtils ../../symbols/support/symbolConversion ../../symbols/support/symbolUtils ../../views/3d/layers/graphics/GraphicState ../../views/support/drapedUtils ../../views/support/hitTestSelectUtils".split(" "),
function(f,c,b,z,w,L,T,W,Q,H,x,n,d,e,g,p,C,q,k){function A(ja){const X=ja.sourceLayer;var I;if(!(I="feature"!==X.type)){a:switch(X.renderer.type){case "class-breaks":case "simple":case "unique-value":case "dot-density":case "dictionary":I=!0;break a;default:I=!1}I=!I}if(I)return{rotation:null,size:null};let S=I=null;var Y=X.renderer.getVisualVariablesForType("rotation").filter(U=>(!U.axis||"heading"===U.axis)&&U.field&&!U.valueExpression&&L.isSome(e.getRotationAngle(U,ja)));1===Y.length&&(I=F(Y[0],
X));Y=X.renderer.getVisualVariablesForType("size").filter(U=>U.field&&!U.useSymbolValue&&!U.valueExpression&&"real-world-size"===d.getTransformationType(U)&&L.isSome(e.getSize(U,ja)));1===Y.length&&(S=G(Y[0],X));return{rotation:I,size:S}}function F(ja,X){const I="heading"===(ja.axis||"heading")&&"arithmetic"===ja.rotationType?-1:1,S=ja.field,Y=(ja=X.fields&&X.fields.filter(ca=>ca.name===S))&&1===ja.length?ja[0].type:"double";var U=0,da=0;return{field:S,getDefault:()=>Promise.resolve(0),getValue:ca=>
{da=U-I*ca;return y((da+360)%360,Y)},initValue:ca=>{U=null!=ca?ca:da;da=0},isUpdatingInteractively:!1}}function u(ja,X){switch(X){case "width":return ja[0];case "depth":return ja[1];case "height":return ja[2];default:return ja[2]||ja[1]||ja[0]}}function l(ja,X,I){return M.apply(this,arguments)}function M(){M=b._asyncToGenerator(function*(ja,X,I){if(L.isNone(X))return 0;({symbol:X}=g.to3D(X));if(L.isNone(X)||"web-style"===X.type)return 0;X=X.symbolLayers.getItemAt(0);if(!X)return 0;switch(X.type){case "icon":return{computeIconLayerResourceSize:I}=
yield new Promise(function(S,Y){f(["../../symbols/support/symbolLayerUtils"],S,Y)}),X.size||Math.min(ua.icon,(yield I(X,ua.icon))[0])||ua.icon;case "text":return X.size||ua.text;case "line":return X.size||ua.line;case "object":{const {computeObjectLayerResourceSize:S}=yield new Promise(function(Y,U){f(["../../symbols/support/symbolLayerUtils"],Y,U)});ja=yield S(X,ja.scale/ua.viewScaleSizeFactor);return u(ja,I)}case "path":return(null!=X.width?X.width:X.height)||ja.scale/ua.viewScaleSizeFactor;case "extrude":return X.size||
ja.scale/ua.viewScaleSizeFactor;case "fill":case "water":return 0;default:return 0}});return M.apply(this,arguments)}function G(ja,X){const I=ja.field,S=ja.axis,Y=(X=X.fields&&X.fields.filter(fa=>fa.name===I))&&1===X.length?X[0].type:"double";var U=0,da=0;const ca=n.meterIn[ja.valueUnit];let ia;ia="area"===ja.valueRepresentation?fa=>(fa*ca/2)**2*Math.PI:"radius"===ja.valueRepresentation||"distance"===ja.valueRepresentation?fa=>fa*ca/2:fa=>fa*ca;return{field:I,getDefault:function(){var fa=b._asyncToGenerator(function*(ta,
pa){return y(ia(yield l(pa,ta,S)),Y)});return function(ta,pa){return fa.apply(this,arguments)}}(),getValue:(fa,ta)=>{U||(U=ta.pixelSizeAt(ta.center));da=U*fa;return y(da,Y)},initValue:fa=>{U=null!=fa?fa:da;da=0},isUpdatingInteractively:!1}}function y(ja,X){switch(X){case "small-integer":case "integer":case "long":return Math.round(ja);case "double":case "single":return ja;default:return 0}}function t(ja){return r.apply(this,arguments)}function r(){r=b._asyncToGenerator(function*(ja){const X=yield p.getDisplayedSymbol(ja,
{useSourceLayer:!0,ignoreGraphicSymbol:!0}),I=H.diff(ja.symbol,X);L.isSome(I)&&(ja.symbol=X)});return r.apply(this,arguments)}function D(ja){if("mesh"===ja||"multipatch"===ja)throw Error("Mesh and Multipatch not supported");return ja}function v(){v=b._asyncToGenerator(function*(ja,X,I){yield E(ja,X);const S=ja.on("create",function(){var Y=b._asyncToGenerator(function*(U){if("cancel"===U.state)return E(ja,X);"complete"===U.state&&(U=U.graphic,U.sourceLayer||(U.sourceLayer=X.layer),U.attributes||(U.attributes=
{...X.template.prototype.attributes}),yield t(U),I(U))});return function(U){return Y.apply(this,arguments)}}());return{remove:()=>{S.remove();ja.cancel()}}});return v.apply(this,arguments)}function E(ja,X){return N.apply(this,arguments)}function N(){N=b._asyncToGenerator(function*(ja,X){const I=X.layer;X={...X.template.prototype.attributes};yield O(ja,I,X);X={graphicProperties:{attributes:X,sourceLayer:I},hasZ:I.capabilities.data.supportsZ};ja.layer.elevationInfo=I.elevationInfo;return ja.create(D(I.geometryType),
X)});return N.apply(this,arguments)}function O(ja,X,I){return R.apply(this,arguments)}function R(){R=b._asyncToGenerator(function*(ja,X,I){var S;if("3d"===ja.view.type){X=new z({sourceLayer:X,attributes:I});var {rotation:Y,size:U}=A(X),da=yield p.getDisplayedSymbol(X,{useSourceLayer:!0}),ca=!1;for(const ia of[U,Y])L.isNone(ia)||null!=I[ia.field]||(I[ia.field]=yield ia.getDefault(da,ja.view),ca=!0);ca&&(da=yield p.getDisplayedSymbol(X,{useSourceLayer:!0}));switch(null==(S=da)?void 0:S.type){case "simple-fill":case "polygon-3d":ja.polygonSymbol=
da;break;case "simple-line":case "line-3d":ja.polylineSymbol=da;break;case "simple-marker":case "point-3d":ja.pointSymbol=da}}});return R.apply(this,arguments)}function h(ja,X,I,S){return K.apply(this,arguments)}function K(){K=b._asyncToGenerator(function*(ja,X,I,S){if(0===ja.length)return[];const {updatable:Y,graphicsByLayer:U}=yield I.async(b._asyncToGenerator(function*(){var {results:da}=yield T.whenOrAbort(k.hitTestSelectSameDistance(X,I),S);const ca=new Map,ia=({layer:fa})=>{var ta=ca.get(fa);
return ta?ta:(ta=[],ca.set(fa,ta),ta)};da.forEach(({graphic:fa})=>ia(fa).push(fa));da=ja.filter(({supports:fa,layer:ta})=>-1<fa.indexOf("update")&&ca.has(ta));0!==da.length&&I.stopPropagation();return{updatable:da,graphicsByLayer:ca}}));return T.whenOrAbort(T.eachAlways(Y.map(function(){var da=b._asyncToGenerator(function*({layer:ca}){const {objectIdField:ia,displayField:fa}=ca,ta=[ia];ca.fieldsIndex.has(fa)&&ta.push(fa);const pa=U.get(ca);if(pa.some(ka=>ta.some(na=>!(na in ka.attributes)))){const ka=
ca.createQuery();ka.outFields=ta;ka.returnGeometry=!1;ka.objectIds=pa.map(na=>na.getObjectId());return ca.queryFeatures(ka,{signal:S}).then(({features:na})=>na)}return pa});return function(ca){return da.apply(this,arguments)}}())),S)});return K.apply(this,arguments)}function B(ja,X,I,S){return J.apply(this,arguments)}function J(){J=b._asyncToGenerator(function*(ja,X,I,S){if(0===ja.length)return[];const Y=yield I.async(b._asyncToGenerator(function*(){var {results:U}=yield T.whenOrAbort(X.hitTest(I),
S);if(0===U.length)return[];const da=new Set;U.forEach(({graphic:ca})=>da.add(ca.layer));U=ja.items.filter(({layer:ca,supports:ia})=>-1<ia.indexOf("update")&&da.has(ca));0<U.length&&I.stopPropagation();return U}));return T.whenOrAbort(T.eachAlways(Y.map(({layer:U})=>{const {objectIdField:da,displayField:ca}=U;var ia=[da];U.fieldsIndex.has(ca)&&ia.push(ca);const fa=U.createQuery();fa.outFields=ia;fa.returnGeometry=!1;ia="renderer"in U?x.calculateTolerance({renderer:U.renderer,event:I}):0;fa.geometry=
q.createQueryGeometry(I.mapPoint,ia,X);fa.outSpatialReference=X.spatialReference;return U.queryFeatures(fa,{signal:S}).then(({features:ta})=>ta)})),S)});return J.apply(this,arguments)}function V(){V=b._asyncToGenerator(function*(ja,X,I,S){switch(X.type){case "3d":return h(ja,X,I,S);case "2d":return B(ja,X,I,S)}});return V.apply(this,arguments)}function aa(){aa=b._asyncToGenerator(function*(ja,X,I){const S=ja.layer,Y=S.createQuery();Y.objectIds=[ja.getAttribute(S.objectIdField)];Y.outFields=["*"];
Y.outSpatialReference=X.spatialReference;Y.returnM=S.capabilities.data.supportsM;Y.returnZ=S.capabilities.data.supportsZ;return(yield S.queryFeatures(Y,{signal:I})).features[0]});return aa.apply(this,arguments)}function ha(ja,X,I,S){return la.apply(this,arguments)}function la(){la=b._asyncToGenerator(function*(ja,X,I,S){let Y=!1;const {rotation:U,size:da}=S;[U,da].forEach(function(){var ca=b._asyncToGenerator(function*(ia){if(!L.isNone(ia)){var fa=X.attributes[ia.field];L.isSome(fa)?ia.initValue(fa):
(fa=yield ia.getDefault(X.symbol,ja.view),ia.initValue(fa),X.setAttribute(ia.field,fa),Y=!0)}});return function(ia){return ca.apply(this,arguments)}}());Y&&"3d"===ja.view.type&&(yield t(X));S={multipleSelectionEnabled:!1};"point"===I.geometryType&&(S.enableRotation=L.isSome(U),S.enableScaling=L.isSome(da));ja.layer.elevationInfo=I.elevationInfo;return ja.update(X,S)});return la.apply(this,arguments)}function ra(ja,X,I,S){return va.apply(this,arguments)}function va(){va=b._asyncToGenerator(function*(ja,
X,I,S){var Y;if(L.isSome(X.geometry)&&"point"===(null==(Y=X.geometry)?void 0:Y.type)){Y=S.rotation;var U=I.toolEventInfo;U=!U||"rotate-start"!==U.type&&"rotate"!==U.type&&"rotate-stop"!==U.type?null:U;if(L.isSome(Y)&&L.isSome(U))if("rotate-stop"===U.type)Y.isUpdatingInteractively=!1,Y.initValue();else{Y.isUpdatingInteractively=!0;const {field:da,getValue:ca}=Y;X.attributes[da]=ca(U.angle,ja)}S=S.size;I=I.toolEventInfo;I=!I||"scale-start"!==I.type&&"scale"!==I.type&&"scale-stop"!==I.type?null:I;if(L.isSome(S)&&
L.isSome(I))if("scale-stop"===I.type)S.isUpdatingInteractively=!1,S.initValue();else{S.isUpdatingInteractively=!0;const {field:da,getValue:ca}=S;X.attributes[da]=ca(I.xScale,ja)}"3d"===ja.type&&(yield t(X))}});return va.apply(this,arguments)}function wa(){wa=b._asyncToGenerator(function*(ja,X,I,S,Y){const U=ja.clone();yield t(U);S.map.add(I.layer);I.layer.add(U);const da=ja.sourceLayer,ca=S.whenLayerView(da),ia=()=>{const Ka=ja.attributes[ja.layer.objectIdField];ca.then(Ia=>Ia.setVisibility(Ka,!1),
()=>{});return{remove(){ca.then(Ia=>Ia.setVisibility(Ka,!0),()=>{})}}};let fa=null,ta=null;if("3d"===S.type){const Ka=new C.GraphicState({graphic:U});fa=S.trackGraphicState(Ka);Q.init(Ka,"displaying",Ia=>{ta=Ia?ia():L.removeMaybe(ta)})}else ta=ia();yield ha(I,U,da,X);let pa=null;ca.then(Ka=>pa=Ka,()=>{});const ka=X.size,na=X.rotation,qa=ja.watch("attributes",function(){var Ka=b._asyncToGenerator(function*(Ia){let Sa=!1;for(const Ta in Ia){const Xa=Ia[Ta];Xa!==U.attributes[Ta]&&(U.setAttribute(Ta,
Xa),L.isSome(ka)&&!ka.isUpdatingInteractively&&ka.field===Ta&&ka.initValue(Xa),L.isSome(na)&&!na.isUpdatingInteractively&&na.field===Ta&&na.initValue(Xa),L.isNone(pa)||pa.requiredFields.includes(Ta))&&(Sa=!0)}Sa&&"3d"===S.type&&(yield t(U))});return function(Ia){return Ka.apply(this,arguments)}}()),Aa=I.on("update",function(){var Ka=b._asyncToGenerator(function*(Ia){const Sa=Ia.graphics[0];if("complete"===Ia.state)return ha(I,Sa,da,X);yield ra(S,Sa,Ia,X);Y(Sa.clone())});return function(Ia){return Ka.apply(this,
arguments)}}()),za=I.on(["undo","redo"],function(){var Ka=b._asyncToGenerator(function*(Ia){Y(Ia.graphics[0].clone())});return function(Ia){return Ka.apply(this,arguments)}}()),Fa=()=>{};return{interactive:{remove(){za.remove();Aa.remove();I.cancel();qa&&qa.remove();this.remove=Fa}},visual:{remove(){L.removeMaybe(ta);S.whenLayerView(da).then(Ka=>Q.whenFalseOnce(Ka,"updating")).then(()=>{L.removeMaybe(fa);I.layer.remove(U);this.remove=Fa})}}}});return wa.apply(this,arguments)}const ua={icon:W.px2pt(24),
text:W.px2pt(12),line:W.px2pt(1),viewScaleSizeFactor:100};c.avoidFeatureTemplateSelectionWithOnlyOneItem=function(ja,X){ja.viewModel.refreshCreationTemplates();if("awaiting-feature-creation-info"===X[0].id){var I=ja.viewModel.featureTemplatesViewModel.items;1!==I.length?I=null:(I=I[0],I="items"in I?1===I.items.length?I.items[0]:null:I);L.isSome(I)&&(ja.creationInfo={layer:I.layer,template:I.template},X.shift())}return X};c.createWorkflowSteps=function(ja,X,I){let S=!1;return ja.filter(Y=>S?!0:S=Y===
X).map(Y=>I[Y]())};c.fetchCandidates=function(ja,X,I,S){return V.apply(this,arguments)};c.fetchFullFeature=function(ja,X,I){return aa.apply(this,arguments)};c.findLayerInfo=function(ja,X){return ja&&ja.find(I=>I.layer===X)};c.getVisualVariableAttributes=A;c.setUpFeatureAdd=function(ja,X,I){return v.apply(this,arguments)};c.setUpGeometryUpdate=function(ja,X,I,S,Y){return wa.apply(this,arguments)};c.sizeDefaults=ua;c.startCreatingNewFeature=E;c.startUpdatingFeature=ha;c.updateGraphicSymbolWhenRequired=
t;c.visualVariableInteractiveUpdate=ra;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/renderers/support/clickToleranceUtils":function(){define(["exports"],function(f){function c(w,L){return L?"xoffset"in L&&L.xoffset?Math.max(w,Math.abs(L.xoffset)):"yoffset"in L&&L.yoffset?Math.max(w,Math.abs(L.yoffset||0)):w:w}function b(w,L){if("number"===typeof w)return w;if(w&&w.stops&&w.stops.length){{w=w.stops;let T=L=0;for(let W=0;W<w.length;W++){const Q=w[W].size;"number"===typeof Q&&(L+=Q,T++)}w=
L/T}return w}return L}function z(w,L){if(!L)return w;L=L.filter(Q=>"size"===Q.type).map(Q=>{const {maxSize:H,minSize:x}=Q;return(b(H,w)+b(x,w))/2});let T=0;const W=L.length;if(0===W)return w;for(let Q=0;Q<W;Q++)T+=L[Q];return Math.max(Math.floor(T/W),w)}f.calculateTolerance=function(w){const L=w&&w.renderer;w="touch"===(w&&w.event&&w.event.pointerType)?9:6;if(!L)return w;w="visualVariables"in L?z(w,L.visualVariables):w;if("simple"===L.type)return c(w,L.symbol);if("unique-value"===L.type){let T=w;
L.uniqueValueInfos.forEach(W=>{T=c(T,W.symbol)});return T}if("class-breaks"===L.type){let T=w;L.classBreakInfos.forEach(W=>{T=c(T,W.symbol)});return T}return w};Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/3d/layers/graphics/GraphicState":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Evented ../../../../core/accessorSupport/decorators/property ../../../../core/has ../../../../core/accessorSupport/ensureType ../../../../core/Logger ../../../../core/accessorSupport/decorators/subclass".split(" "),
function(f,c,b,z,w,L,T,W,Q){f.GraphicState=function(H){function x(n){n=H.call(this,n)||this;n.tracking=!1;n.displaying=!1;n.isDraped=!1;return n}c._inheritsLoose(x,H);return x}(z.EventedAccessor);b.__decorate([w.property({constructOnly:!0})],f.GraphicState.prototype,"graphic",void 0);b.__decorate([w.property()],f.GraphicState.prototype,"tracking",void 0);b.__decorate([w.property()],f.GraphicState.prototype,"displaying",void 0);b.__decorate([w.property()],f.GraphicState.prototype,"isDraped",void 0);
f.GraphicState=b.__decorate([Q.subclass("esri.views.3d.layers.graphics.GraphicState")],f.GraphicState);Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/support/drapedUtils":function(){define("exports ../../geometry ../../core/maybe ../../core/unitUtils ../../renderers/support/clickToleranceUtils ../../geometry/Extent".split(" "),function(f,c,b,z,w,L){function T(Q,H,x,n=new L){let d;if("2d"===x.type)d=H*x.resolution;else if("3d"===x.type){var e=x.overlayPixelSizeInMapUnits(Q),g=x.basemapSpatialReference;
d=b.isSome(g)&&!g.equals(x.spatialReference)?z.getMetersPerUnitForSR(g)/z.getMetersPerUnitForSR(x.spatialReference):H*e}H=Q.x-d;e=Q.y-d;g=Q.x+d;Q=Q.y+d;({spatialReference:x}=x);n.xmin=Math.min(H,g);n.ymin=Math.min(e,Q);n.xmax=Math.max(H,g);n.ymax=Math.max(e,Q);n.spatialReference=x;return n}const W=new L;f.createQueryGeometry=T;f.intersectsDrapedGeometry=function(Q,H,x){Q=x.toMap(Q);if(b.isNone(Q))return!1;const n=w.calculateTolerance();return T(Q,n,x,W).intersects(H)};Object.defineProperty(f,"__esModule",
{value:!0})})},"esri/views/support/hitTestSelectUtils":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(f,c){function b(){b=c._asyncToGenerator(function*(z,w){if("2d"===z.type)return z.hitTest(w);z=yield z.hitTest(w);const L=z.results[0];w=z.results.findIndex(T=>T.distance!==L.distance);-1!==w&&(z.results=z.results.slice(0,w));return z});return b.apply(this,arguments)}f.hitTestSelectSameDistance=function(z,w){return b.apply(this,arguments)};Object.defineProperty(f,"__esModule",
{value:!0})})},"esri/widgets/Editor/CreateWorkflow":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./CreateWorkflowData ./Edits ./Workflow ./workflowUtils".split(" "),function(f,c,b,z,w,L,T,W,Q,H,x,n){var d;z=d=function(e){function g(p){p=e.call(this,p)||this;p.type="create";return p}
f._inheritsLoose(g,e);g.create=function(p,C,q){p=new d({data:new Q({edits:new H.Edits,viewModel:p}),onCommit:function(){var k=f._asyncToGenerator(function*(A){yield q(A.creationInfo.layer,{addFeatures:[A.edits.feature]})});return function(A){return k.apply(this,arguments)}}()});p._set("steps",this._createWorkflowSteps(p,C));return p};g._createWorkflowSteps=function(p,C="awaiting-feature-creation-info"){const {data:q,handles:k}=p;p=n.createWorkflowSteps(["awaiting-feature-creation-info","awaiting-feature-to-create",
"editing-new-feature"],C,{"awaiting-feature-creation-info":()=>({id:"awaiting-feature-creation-info",setUp(){var A=this;return f._asyncToGenerator(function*(){q.creationInfo=null;q.edits.feature=null;q.viewModel.featureTemplatesViewModel.select(null);k.add(q.viewModel.featureTemplatesViewModel.on("select",({item:F})=>{q.creationInfo={layer:F.layer,template:F.template};q.viewModel.activeWorkflow.next()}),A.id)})()},tearDown(){var A=this;return f._asyncToGenerator(function*(){k.remove(A.id)})()}}),
"awaiting-feature-to-create":()=>({id:"awaiting-feature-to-create",setUp(){var A=this;return f._asyncToGenerator(function*(){k.add(yield n.setUpFeatureAdd(q.viewModel.sketchViewModel,q.creationInfo,F=>{q.edits.feature=F;q.viewModel.activeWorkflow.next()}),A.id)})()},tearDown(){var A=this;return f._asyncToGenerator(function*(){k.remove(A.id)})()}}),"editing-new-feature":()=>({id:"editing-new-feature",setUp(){var A=this;return f._asyncToGenerator(function*(){var F;const u=q.edits.feature,l=u.sourceLayer,
M=q.viewModel,G=M.sketchViewModel;M.featureFormViewModel.set({feature:u,fieldConfig:null==(F=n.findLayerInfo(M.layerInfos,l))?void 0:F.fieldConfig});G.allowDeleteKey=!1;const y=n.getVisualVariableAttributes(u);yield n.startUpdatingFeature(G,u,l,y);F=G.on("update",function(){var t=f._asyncToGenerator(function*(r){var D=r.graphics[0];if("complete"===r.state)return n.startUpdatingFeature(G,D,l,y);yield n.visualVariableInteractiveUpdate(G.view,D,r,y);r=D.attributes;b.isSome(y.rotation)&&({field:D}=y.rotation,
M.featureFormViewModel.setValue(D,r[D]));b.isSome(y.size)&&({field:D}=y.size,M.featureFormViewModel.setValue(D,r[D]))});return function(r){return t.apply(this,arguments)}}());k.add([q.viewModel.featureFormViewModel.on("value-change",f._asyncToGenerator(function*(){q.edits.updateAttributes(q.viewModel.featureFormViewModel.getValues());u.attributes=q.edits.feature.attributes;"3d"===G.view.type&&(yield n.updateGraphicSymbolWhenRequired(u))})),F],A.id)})()},tearDown(A){var F=this;return f._asyncToGenerator(function*(){A.cancelled&&
q.viewModel.sketchViewModel.layer.removeAll();k.remove(F.id)})()}})});return n.avoidFeatureTemplateSelectionWithOnlyOneItem(q,p)};return g}(x);return z=d=c.__decorate([W.subclass("esri.widgets.Editor.CreateWorkflow")],z)})},"esri/widgets/Editor/CreateWorkflowData":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(f,c,b,z,w,L,T,W){b=function(Q){function H(x){x=Q.call(this,x)||this;x.creationInfo=null;x.edits=null;x.viewModel=null;return x}f._inheritsLoose(H,Q);return H}(b);c.__decorate([z.property()],b.prototype,"creationInfo",void 0);c.__decorate([z.property()],b.prototype,"edits",void 0);c.__decorate([z.property()],b.prototype,"viewModel",void 0);return b=c.__decorate([W.subclass("esri.widgets.Editor.CreateWorkflowData")],b)})},"esri/widgets/Editor/Edits":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/HandleOwner ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(f,c,b,z,w,L,T,W,Q,H,x){function n(d){return L.isNone(d)?null:JSON.stringify(d)}f.Edits=function(d){function e(p){p=d.call(this,p)||this;p._baselineAttributesJSON=null;p._baselineGeometryJSON=null;p.feature=null;return p}c._inheritsLoose(e,d);var g=e.prototype;g.trackChanges=function(){this.feature&&(this._baselineAttributesJSON=n(this.feature.attributes),this._baselineGeometryJSON=n(this.feature.geometry),this.notifyChange("attributesModified"),this.notifyChange("geometryModified"))};g.updateAttributes=
function(p){this.feature.attributes=p;this.notifyChange("attributesModified")};g.updateGeometry=function(p){this.feature.geometry=p;this.notifyChange("geometryModified")};c._createClass(e,[{key:"attributesModified",get:function(){const {_baselineAttributesJSON:p,feature:C}=this;return!(!C||p===n(C.attributes))}},{key:"geometryModified",get:function(){const {_baselineGeometryJSON:p,feature:C}=this;return!(!C||p===n(C.geometry))}},{key:"modified",get:function(){return this.attributesModified||this.geometryModified}}]);
return e}(w.HandleOwnerMixin(z));b.__decorate([T.property()],f.Edits.prototype,"attributesModified",null);b.__decorate([T.property()],f.Edits.prototype,"feature",void 0);b.__decorate([T.property()],f.Edits.prototype,"geometryModified",null);b.__decorate([T.property()],f.Edits.prototype,"modified",null);f.Edits=b.__decorate([x.subclass("esri.widgets.Editor.Edits")],f.Edits);Object.defineProperty(f,"__esModule",{value:!0})})},"esri/widgets/Editor/UpdateWorkflow":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/handleUtils ../../core/maybe ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../views/support/layerViewUtils ./Edits ./UpdateWorkflowData ./Workflow ./workflowUtils".split(" "),
function(f,c,b,z,w,L,T,W,Q,H,x,n,d,e,g,p){var C;T=C=function(q){function k(F){F=q.call(this,F)||this;F.type="update";return F}f._inheritsLoose(k,q);k.create=function(F,u,l){F=new C({data:new e({edits:new d.Edits,viewModel:F}),onCommit:function(){var M=f._asyncToGenerator(function*(G){const y=G.edits.feature,t=y.sourceLayer,r=y.clone();if(!G.edits.attributesModified){const {objectIdField:D}=t;r.attributes={[D]:y.getAttribute(D)}}G.edits.geometryModified||(r.geometry=null);yield l(t,{updateFeatures:[r]})});
return function(G){return M.apply(this,arguments)}}()});F._set("steps",this._createWorkflowSteps(F,u));return F};var A=k.prototype;A.highlight=function(F){var {data:{viewModel:{view:u}}}=this;u=F&&u.allLayerViews.items.find(({layer:l})=>l===F.layer);n.highlightsSupported(u)&&this.handles.add(u.highlight(F),"candidate-highlight")};A.unhighlight=function(){this.handles.remove("candidate-highlight")};k._createWorkflowSteps=function(F,u="awaiting-feature-to-update"){const {data:l,handles:M}=F;return p.createWorkflowSteps(["awaiting-feature-to-update",
"awaiting-update-feature-candidate","editing-existing-feature","adding-attachment","editing-attachment"],u,{"awaiting-feature-to-update":()=>({id:"awaiting-feature-to-update",setUp(){var G=this;return f._asyncToGenerator(function*(){const {spinnerViewModel:y,view:t}=l.viewModel;let r=null;M.add({remove(){r&&(r.abort(),r=null)}},G.id);l.edits.feature=null;const D=t.on("immediate-click",v=>{y.location=v.mapPoint;y.visible=!0;r&&r.abort();const {editableItems:E}=l.viewModel;r=w.createAbortController();
(new Promise((N,O)=>{w.onAbort(r.signal,()=>O(w.createAbortError()));N(p.fetchCandidates(E,t,v,r.signal))})).then(N=>{w.throwIfAborted(r);l.candidates=N.reduce((O,R)=>R.error?O:[...O,...R.value],[]);l.viewModel.spinnerViewModel.visible=1===l.candidates.length;0!==l.candidates.length&&(1===l.candidates.length?(l.edits.feature=l.candidates[0],l.viewModel.activeWorkflow.go("editing-existing-feature").catch(()=>{}).then(()=>l.viewModel.spinnerViewModel.visible=!1)):l.viewModel.activeWorkflow.next())})});
M.add(D,G.id)})()},tearDown(){var G=this;return f._asyncToGenerator(function*(){M.remove(G.id)})()}}),"awaiting-update-feature-candidate":()=>({id:"awaiting-update-feature-candidate",setUp(){var G=this;return f._asyncToGenerator(function*(){const {edits:y}=l;y.feature=null;M.add(L.watch(y,"feature",t=>{F.unhighlight();F.highlight(t)}),G.id)})()},tearDown(){var G=this;return f._asyncToGenerator(function*(){F.unhighlight();M.remove(G.id)})()}}),"editing-existing-feature":()=>({id:"editing-existing-feature",
setUp(){var G=this;return f._asyncToGenerator(function*(){const y=l.edits.feature,t=l.viewModel;l.editableItem=t.editableItems.find(R=>R.layer===y.layer);const r=w.createAbortController();M.add({remove:()=>r.abort()},G.id);var D=t.view.whenLayerView(y.layer),v=p.fetchFullFeature(y,t.view,r.signal);D=yield D;const E=yield v;if(!w.isAborted(r)){l.edits.updateGeometry(E.geometry);l.edits.updateAttributes(E.attributes);l.edits.trackChanges();v=E.sourceLayer;var N=p.findLayerInfo(t.layerInfos,v);N=N&&
N.fieldConfig;t.attachmentsViewModel.set({graphic:E,mode:"view"});t.featureFormViewModel.set({feature:E,fieldConfig:N});var O="createInteractiveEditSession"in D?D.createInteractiveEditSession(y):null;D=[t.featureFormViewModel.on("value-change",R=>{l.edits.updateAttributes(t.featureFormViewModel.getValues());E.attributes=l.edits.feature.attributes;O&&O.setAttribute(R.fieldName,R.value)}),t.attachmentsViewModel.watch("mode",R=>{"add"===R&&l.viewModel.activeWorkflow.go("adding-attachment");"edit"===
R&&l.viewModel.activeWorkflow.go("editing-attachment")})];O&&(D.push(b.makeHandle(()=>O.rollback())),M.add(b.makeHandle(()=>O.commit()),F._handleKeys.afterCommit));({supportsGeometryUpdate:v}=v.capabilities.editing);if(v){t.sketchViewModel.allowDeleteKey=!1;const R=p.getVisualVariableAttributes(E),{interactive:h,visual:K}=yield p.setUpGeometryUpdate(E,R,t.sketchViewModel,t.view,({geometry:B,attributes:J})=>{if(z.isSome(R.rotation)){var {field:V}=R.rotation;t.featureFormViewModel.setValue(V,J[V])}z.isSome(R.size)&&
({field:V}=R.size,t.featureFormViewModel.setValue(V,J[V]));l.edits.updateAttributes(J);l.edits.updateGeometry(B)});D.push(h,K);M.add(h,F._handleKeys.beforeCommit);M.add(K,F._handleKeys.afterCommit)}else F.highlight(E);M.add(D,G.id)}})()},tearDown(){var G=this;return f._asyncToGenerator(function*(){F.unhighlight();M.remove(G.id)})()}}),"adding-attachment":()=>({id:"adding-attachment",parent:"editing-existing-feature",setUp(){return f._asyncToGenerator(function*(){})()},tearDown(){return f._asyncToGenerator(function*(){})()}}),
"editing-attachment":()=>({id:"editing-attachment",parent:"editing-existing-feature",setUp(){return f._asyncToGenerator(function*(){})()},tearDown(){return f._asyncToGenerator(function*(){})()}})})};return k}(g);return T=C=c.__decorate([x.subclass("esri.widgets.Editor.UpdateWorkflow")],T)})},"esri/views/support/layerViewUtils":function(){define(["exports","../../core/maybe"],function(f,c){f.extractSafeScaleBounds=function(b){let {minScale:z,maxScale:w}=b;return{minScale:z||0,maxScale:w||0}};f.highlightsSupported=
function(b){return b&&"function"===typeof b.highlight};f.occludeesSupported=function(b){return b&&"function"===typeof b.maskOccludee};f.scaleBoundsPredicate=function(b,z,w){return c.isNone(b)||b>w&&(0===z||b<z)};Object.defineProperty(f,"__esModule",{value:!0})})},"esri/widgets/Editor/UpdateWorkflowData":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(f,c,b,z,w,L,T,W){b=function(Q){function H(x){x=Q.call(this,x)||this;x.candidates=null;x.editableItem=null;x.edits=null;x.viewModel=null;return x}f._inheritsLoose(H,Q);return H}(b);c.__decorate([z.property()],b.prototype,"candidates",void 0);c.__decorate([z.property()],b.prototype,"editableItem",void 0);c.__decorate([z.property()],b.prototype,"edits",void 0);c.__decorate([z.property()],b.prototype,"viewModel",void 0);return b=c.__decorate([W.subclass("esri.widgets.Editor.UpdateWorkflowData")],
b)})},"esri/widgets/Sketch/SketchViewModel":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../symbols ../../core/Collection ../../core/has ../../core/Error ../../core/Evented ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/projectionEllipsoid ../../geometry/support/coordsUtils ../../layers/GraphicsLayer ../../views/DOMContainer ../../views/3d/interactive/editingTools/isSupportedGraphicUtils ../../views/3d/interactive/editingTools/moveGraphic/isSupportedGraphic ../../views/3d/interactive/editingTools/reshapeGraphic/isSupportedGraphic ../../views/3d/interactive/editingTools/transformGraphic/isSupportedGraphic ../../views/draw/support/layerUtils ../../views/input/InputManager ../../views/interactive/keybindings ../../views/interactive/snapping/SnappingManager ../../views/interactive/snapping/SnappingOptions ../../views/support/screenUtils ./support/OperationHandle ../../symbols/SimpleMarkerSymbol ../../symbols/SimpleFillSymbol ../../symbols/SimpleLineSymbol".split(" "),
function(f,c,b,z,w,L,T,W,Q,H,x,n,d,e,g,p,C,q,k,A,F,u,l,M,G,y,t,r,D,v,E,N,O,R,h){function K(ua){return Object.freeze({__proto__:null,default:ua})}function B(ua){return"polygon"===ua||"rectangle"===ua||"circle"===ua?!0:!1}function J(ua,ja){aa("undo",ua.history.undo,ua.history.redo,ja)}function V(ua,ja){aa("redo",ua.history.redo,ua.history.undo,ja)}function aa(ua,ja,X,I){const S=ja.pop().updates,Y=[];I.forEach((U,da)=>{da=S[da];null!=da&&("geometry"in da&&x.isSome(da.geometry)&&(Y.push({geometry:U.geometry}),
U.geometry=da.geometry),"symbol"in da&&x.isSome(da.symbol)&&(Y.push({symbol:U.symbol}),U.symbol=da.symbol),"undo"in da&&(Y.push(da),da[ua](U)))});X.push({updates:Y})}function ha(ua){return{updates:ua.map(ja=>({geometry:ja.geometry}))}}function la(ua){return"requireError"in ua&&"aborted"===ua.requireError}const ra=H.getLogger("esri.widgets.Sketch.SketchViewModel"),va={defaultZ:0},wa={reshapeOptions:{edgeOperation:"split",shapeOperation:"move",vertexOperation:"move"},enableMoveAllGraphics:!0,enableRotation:!0,
enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,enableZ:!0,tool:"transform"};L=function(ua){function ja(I){I=ua.call(this,I)||this;I._numUpdating=0;I._handles=new Q;I._internalGraphicsLayer=new A({listMode:"hide",internal:!0,title:"SVM Internal"});I._operationHandle=null;I._viewHandles=new Q;I.activeFillSymbol=null;I.activeLineSymbol=null;I.activeVertexSymbol=null;I.allowDeleteKey=!0;I.layer=null;I.pointSymbol=new O({style:"circle",size:6,color:[255,255,255],
outline:{color:[50,50,50],width:1}});I.polygonSymbol=new R({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}});I.polylineSymbol=new h({color:[130,130,130,1],width:2});I._snappingManager=null;I.updateGraphics=new w;I.updateOnGraphicClick=!0;I.updatePointSymbol=new O({size:10,color:[0,200,255,.5],outline:{color:"black",width:1}});I.updatePolygonSymbol=new R({color:[12,207,255,.2],outline:{join:"round",color:[12,207,255],width:2}});I.updatePolylineSymbol=new h({color:[12,207,255],width:2});
I.vertexSymbol=new O({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}});I._moduleLoaderAbortController=null;I._viewReadyAbortController=null;I._originalAutoOpenEnabled=null;I.defaultCreateOptions=va;I.defaultUpdateOptions=wa;I.snappingOptions=new v;return I}c._inheritsLoose(ja,ua);var X=ja.prototype;X.initialize=function(){this._handles.add([e.watch(this,"layer",()=>{this.cancel();this._internalGraphicsLayer.elevationInfo=x.isSome(this.layer)?this.layer.elevationInfo:
null}),e.on(this,"view.map.layers","change",I=>{I.removed.includes(this.layer)&&this.cancel()}),e.on(this,"layer.graphics","change",I=>{if(x.isSome(this._operationHandle))for(const S of I.removed)this.updateGraphics.includes(S)&&(1<this.updateGraphics.length?this._operationHandle.removeFromSelection(S):this._operationHandle.cancel())}),e.init(this,"layer.elevationInfo",()=>{this.cancel();this._internalGraphicsLayer.elevationInfo=x.isSome(this.layer)?this.layer.elevationInfo:null},!0),e.init(this,
"view",I=>{x.destroyMaybe(this._snappingManager);I&&(this._snappingManager=new D.SnappingManager({view:I,options:this.snappingOptions}),"2d"===I.type?new Promise(function(S,Y){f(["../../views/2d/interactive/editingTools"],S,Y)}):"3d"===I.type&&(new Promise(function(S,Y){f(["../../views/3d/interactive/editingTools"],S,Y)}),new Promise(function(S,Y){f(["../../views/3d/layers/GraphicsLayerView3D"],function(U){S(K(U))},Y)})))},!0)])};X.destroy=function(){this.cancel();this._handles=x.destroyMaybe(this._handles);
this._viewHandles=x.destroyMaybe(this._viewHandles);this._removeDefaultLayer();this._snappingManager=x.destroyMaybe(this._snappingManager);this._set("view",null);this.emit("destroy")};X.cancel=function(){this._moduleLoaderAbortController=x.abortMaybe(this._moduleLoaderAbortController);this._viewReadyAbortController=x.abortMaybe(this._viewReadyAbortController);this._operationHandle&&this._operationHandle.cancel()};X.complete=function(){this._operationHandle&&this._operationHandle.complete()};X.delete=
function(){const {state:I,updateGraphics:S}=this;if("active"===I&&S.length){const {activeTool:Y,layer:U}=this,da=S.toArray();U.removeMany(da);this.cancel();this._emitDeleteEvent({graphics:da,tool:Y})}};X.create=function(){var I=c._asyncToGenerator(function*(S,Y){yield this._waitViewReady();if("disabled"===this.state)throw this.layer||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),this.view||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."),
n.createAbortError();this.cancel();x.isSome(this.view.activeTool)&&(this.view.activeTool=null);if(S){y.addUniqueLayer(this.view,this._internalGraphicsLayer);var U=yield this._setupCreateOperation(S,Y);x.isNone(U)||this.destroyed?this.view.map.remove(this._internalGraphicsLayer):(U.on("complete",()=>{if(U===this._operationHandle){const da=this.createGraphic,ca=this._operationHandle.cancelled;this._operationHandle.destroy();this._operationHandle=null;this._set("createGraphic",null);this.view&&this.view.map&&
this.view.map.remove(this._internalGraphicsLayer);U.cancelled||null==da||this.layer.add(da);this.emit("create",{graphic:da,state:ca?"cancel":"complete",tool:S,toolEventInfo:null,type:"create"})}}),this._operationHandle=U,this.view.ready&&F.isDOMContainer(this.view)&&this.view.focus())}else this._logError("sketch:missing-parameter","Missing parameter 'tool'.")});return function(S,Y){return I.apply(this,arguments)}}();X.update=function(){var I=c._asyncToGenerator(function*(S,Y){yield this._waitViewReady();
const {layer:U,view:da,state:ca}=this;if("disabled"===ca)throw da||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."),U||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),n.createAbortError();this.cancel();x.isSome(this.view.activeTool)&&(this.view.activeTool=null);const ia=Array.isArray(S)?S:[S];null!=S&&ia&&ia.length?ia.some(fa=>fa.layer!==U?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),
!0):x.isNone(fa.geometry)?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0):"2d"!==da.type||da.spatialReference.equals(fa.geometry.spatialReference)?!1:(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with a spatial reference different from the supplied MapView."),!0))||(S=yield this._setupUpdateOperation(ia,Y),this.destroyed||x.isNone(S)||la(S)||(y.addUniqueLayer(this.view,
this._internalGraphicsLayer),this._setUpdateOperationHandle(S,Y),this.emit("update",{graphics:ia,state:"start",aborted:!1,tool:S.tool,toolEventInfo:null,type:"update"}))):this._logError("sketch:missing-parameter","Missing parameter 'graphics'.")});return function(S,Y){return I.apply(this,arguments)}}();X.undo=function(){this.canUndo()&&this._operationHandle.undo()};X.redo=function(){this.canRedo()&&this._operationHandle.redo()};X.canUndo=function(){return!(!this._operationHandle||!this._operationHandle.canUndo())};
X.canRedo=function(){return!(!this._operationHandle||!this._operationHandle.canRedo())};X.toggleUpdateTool=function(){this._operationHandle&&this._operationHandle.toggleTool&&this._operationHandle.toggleTool()};X._getFirstHit=function(){var I=c._asyncToGenerator(function*(S){const Y=[];switch(this.view.type){case "2d":var U=yield this.view.hitTest(S);if(0<U.results.length&&(U=U.results[0],U.graphic)){var da,ca;const ia=U.graphic;"vector-tile"!==(null==(da=ia.layer)?void 0:da.type)&&"imagery"!==(null==
(ca=ia.layer)?void 0:ca.type)&&Y.push(U)}break;case "3d":{const ia=[this.view.map.ground];this.view.map.allLayers.forEach(fa=>{"integrated-mesh"===fa.type&&ia.push(fa)});da=yield this.view.hitTest(S,{exclude:ia});0<da.results.length&&(ca=da.results[0],(!da.ground.mapPoint||1>this.view.map.ground.opacity||da.ground.distance-ca.distance>-Math.min(3*da.ground.distance,"global"===this.view.viewingMode?q.getReferenceEllipsoid(this.view.renderCoordsHelper.spatialReference).radius/this.view.renderCoordsHelper.unitInMeters:
Number.POSITIVE_INFINITY))&&Y.push(ca))}}return{screenPoint:S,results:Y}});return function(S){return I.apply(this,arguments)}}();X._generateViewHandles=function(I){var S=this;return[I.on("immediate-click",function(){var Y=c._asyncToGenerator(function*(U){var da="active"===S.state&&"create"===S._operationHandle.type;if("disabled"!==S.state&&!da&&S.updateOnGraphicClick){S._beginAsyncOperation();var ca=(yield U.async(()=>S._getFirstHit(E.createScreenPointFromEvent(U)))).results;da=null;if(ca.length)for(const ia of ca){if(ia.graphic){ca=
ia.graphic;if(S.updateGraphics.includes(ca)||ca.layer===S.layer){U.stopPropagation();da=ca;break}"2d"!==I.type||S._isComponentGraphic(ca)||"active"!==S.state||S.cancel()}}else"active"===S.state&&S.cancel();x.isSome(da)&&!S.updateGraphics.includes(da)&&(yield S.update([da],{...S.defaultUpdateOptions,reshapeOptions:{...S.defaultUpdateOptions.reshapeOptions}}));S._endAsyncOperation()}});return function(U){return Y.apply(this,arguments)}}(),t.ViewEventPriorities.WIDGET)]};X._setupCreateOperation=function(){var I=
c._asyncToGenerator(function*(S,Y){S=yield this._setupDrawGraphicTool(S,this.view,{hasZ:"3d"===this.view.type,...this.defaultCreateOptions,...Y});if(x.isNone(S))return null;this.view.tools.add(S);this.view.activeTool=S;return this._setupCreateOperationHandle(S)});return function(S,Y){return I.apply(this,arguments)}}();X._setupDrawGraphicTool=function(){var I=c._asyncToGenerator(function*(S,Y,U){if("multipoint"===S&&"3d"===Y.type)return this._logError("sketch:create","Multipoint geometries are not supported in SceneView"),
null;const da="rectangle"!==S,ca="rectangle"!==S;this.snappingOptions.enabledToggled=!1;S={view:Y,mode:"rectangle"===S||"circle"===S?"hybrid":"click",...U,snapToScene:!1,geometryType:S,graphicSymbol:this._getGraphicSymbolFromTool(S),snappingManager:this._snappingManager,forceUniformSize:ca,centered:da};return"2d"===this.view.type?this._makeDrawGraphicTool2D(S):this._makeDrawGraphicTool3D(S)});return function(S,Y,U){return I.apply(this,arguments)}}();X._makeDrawGraphicTool2D=function(){var I=c._asyncToGenerator(function*(S){const Y=
yield this._requireModule(new Promise(function(U,da){f(["../../views/2d/interactive/editingTools"],U,da)}));return la(Y)||this.destroyed?null:new Y.module.DrawGraphicTool2D({...S,activeVertexSymbol:this.activeVertexSymbol,regularVerticesSymbol:this.vertexSymbol,activeLineSymbol:this.activeLineSymbol,activeFillSymbol:B(S.geometryType)?this.activeFillSymbol:null})});return function(S){return I.apply(this,arguments)}}();X._makeDrawGraphicTool3D=function(){var I=c._asyncToGenerator(function*(S){const Y=
yield this._requireModule(new Promise(function(U,da){f(["../../views/3d/interactive/editingTools"],U,da)}));return la(Y)||this.destroyed?null:new Y.module.DrawGraphicTool3D({...S,elevationInfo:this.layer.elevationInfo,snapToScene:x.isSome(this.layer.elevationInfo)?"absolute-height"===this.layer.elevationInfo.mode:!0})});return function(S){return I.apply(this,arguments)}}();X._setupCreateOperationHandle=function(I){let S=null;const Y=I.forceUniformSize,U=I.centered,da=[this.view.on("key-down",ia=>
{if(ia.key===r.SKETCH_KEYS.pan)ia.stopPropagation(),ia.repeat||(I.enabled=!1);else if(ia.key===r.SKETCH_KEYS.complete)ia.stopPropagation(),I.completeCreateOperation();else if(ia.key!==r.SKETCH_KEYS.vertexAdd||ia.repeat)ia.key===r.SKETCH_KEYS.undo?(ia.stopPropagation(),ca.undo()):ia.key===r.SKETCH_KEYS.redo?(ia.stopPropagation(),ca.redo()):ia.key!==r.SKETCH_KEYS.snappingToggle||"rectangle"===I.geometryType||"circle"===I.geometryType||ia.repeat?ia.key!==r.SKETCH_KEYS.constraint||"rectangle"!==I.geometryType&&
"circle"!==I.geometryType||ia.repeat?ia.key!==r.SKETCH_KEYS.center||ia.repeat||(I.centered=!U,ia.stopPropagation()):(I.forceUniformSize=!Y,ia.stopPropagation()):(this.snappingOptions.enabledToggled=!0,ia.stopPropagation());else{const fa=I.drawOperation.geometryType;if("polyline"===fa||"polygon"===fa||"multipoint"===fa)ia.stopPropagation(),I.drawOperation.commitStagedVertex()}},t.ViewEventPriorities.WIDGET),this.view.on("key-up",ia=>{ia.key===r.SKETCH_KEYS.pan?I.enabled=!0:ia.key===r.SKETCH_KEYS.snappingToggle&&
"rectangle"!==I.geometryType&&"circle"!==I.geometryType?(this.snappingOptions.enabledToggled=!1,ia.stopPropagation()):ia.key!==r.SKETCH_KEYS.constraint||"rectangle"!==I.geometryType&&"circle"!==I.geometryType?ia.key===r.SKETCH_KEYS.center&&(I.centered=U,ia.stopPropagation()):(I.forceUniformSize=Y,ia.stopPropagation())},t.ViewEventPriorities.WIDGET),I.on("vertex-add",ia=>{S=x.isNone(S)?"start":"active";switch(ia.operation){case "apply":this.emit("create",{graphic:x.unwrap(I.graphic),state:S,tool:this.activeTool,
toolEventInfo:ia,type:"create"});break;case "undo":this._emitUndoEvent({graphics:[x.unwrap(I.graphic)],tool:I.geometryType});break;case "redo":this._emitRedoEvent({graphics:[x.unwrap(I.graphic)],tool:I.geometryType})}}),I.on("cursor-update",ia=>{0<I.drawOperation.numCommittedVertices&&this.emit("create",{graphic:x.unwrap(I.graphic),state:"active",tool:this.activeTool,toolEventInfo:{coordinates:ia.vertices[0].coordinates,type:"cursor-update"},type:"create"})}),I.on("vertex-remove",ia=>{switch(ia.operation){case "apply":this.emit("create",
{graphic:x.unwrap(I.graphic),state:"active",tool:this.activeTool,toolEventInfo:ia,type:"create"});break;case "undo":this._emitUndoEvent({graphics:[x.unwrap(I.graphic)],tool:I.geometryType});break;case "redo":this._emitRedoEvent({graphics:[x.unwrap(I.graphic)],tool:I.geometryType})}}),I.on("complete",ia=>{this._set("createGraphic",x.unwrap(ia.graphic));S="complete";ia.aborted?ca&&ca.cancel():ca&&ca.complete()}),d.react(()=>this._getGraphicSymbolFromTool(I.geometryType),ia=>{I.graphicSymbol=ia})],ca=
new N.OperationHandle({activeComponent:I,tool:I.geometryType,type:"update",onEnd:()=>{var ia;da.forEach(fa=>fa.remove());da.length=0;null==(ia=this.view.tools)?void 0:ia.remove(I);I.destroy()},undo:()=>{I.canUndo&&I.undo()},redo:()=>{I.canRedo&&I.redo()},canUndo:()=>I.canUndo,canRedo:()=>I.canRedo});return ca};X._getGraphicSymbolFromTool=function(I){switch(I){case "point":case "multipoint":return this.pointSymbol;case "polyline":return this.polylineSymbol;case "circle":case "rectangle":case "polygon":return this.polygonSymbol;
default:return null}};X._setupUpdateOperation=function(){var I=c._asyncToGenerator(function*(S,Y){const {layer:U,view:da}=this;Y={tool:this._defaultUpdateTool,...this.defaultUpdateOptions,...Y,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions,...null==Y?void 0:Y.reshapeOptions}};var ca=Y.tool;for(var ia of S)U.remove(ia),U.add(ia);if("3d"===da.type){if(0===S.length)return null;switch(ca){case "move":return this._setupMove3DOperation(S,Y,da,ca);case "reshape":if(1<S.length)return this._logError("sketch:reshape-multiple",
"Reshape operation does not support multiple graphics."),null;ca=M.isSupportedGraphic(S[0]);if(0===ca)return this._setupReshape3DOperation(S[0],Y,da);this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${u.isSupportedGraphicResultMessage(ca)}).`);return null;case "transform":return this._setupGraphicTransform3DOperation(S,Y,da)}}switch(ca){case "move":return this._setupMoveOperation(S,Y,da);case "reshape":if(1<S.length)return this._logError("sketch:reshape-multiple",
"Reshape operation does not support multiple graphics."),null;ia=M.isSupportedGraphic(S[0]);if(0===ia)return this._setupTransformOrReshapeOperation(S,ca,Y,da);this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${u.isSupportedGraphicResultMessage(ia)}).`);return null;case "transform":return 1===S.length&&(ia=x.get(S[0].geometry,"type"),"point"===ia||"multipoint"===ia)&&(ca="reshape"),this._setupTransformOrReshapeOperation(S,ca,Y,da)}});return function(S,Y){return I.apply(this,
arguments)}}();X._setupMove3DOperation=function(){var I=c._asyncToGenerator(function*(S,Y,U,da,ca=!1){var ia=this;for(var fa of S){const na=l.isSupportedGraphic(fa);if(0!==na)return this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${u.isSupportedGraphicResultMessage(na)}).`),null}fa=yield this._requireModule(new Promise(function(na,qa){f(["../../views/3d/interactive/editingTools"],na,qa)}));if(la(fa))return fa;const ta=new fa.module.GraphicMoveTool({view:U,enableZ:Y.enableZ,
snappingManager:this._snappingManager});this.view.tools.add(ta);ta.graphics.addMany(S);ca||this.updateGraphics.addMany(S);const pa=[],ka=new N.UpdateOperationHandle({activeComponent:ta,tool:da,type:"update",onEnd:()=>{var na;pa.forEach(qa=>qa.remove());pa.length=0;null==(na=this.view.tools)?void 0:na.remove(ta);ta.destroyed||ta.destroy()},undo:()=>{J(ka,this.updateGraphics.toArray());this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:da})},redo:()=>{V(ka,this.updateGraphics.toArray());
this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:da})},addToSelection:na=>{this.updateGraphics.push(na);ta.graphics.push(na);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[na],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:na=>{const qa=this.updateGraphics.indexOf(na);ka.history.undo.forEach(Aa=>Aa.updates.splice(qa,1));ka.history.redo.forEach(Aa=>Aa.updates.splice(qa,1));this.updateGraphics.remove(na);
this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[na],type:"selection-change"},type:"update"});0===this.updateGraphics.length?ka.complete():ta.graphics.remove(na)},toggleTool:function(){var na=c._asyncToGenerator(function*(){if(1===ia.updateGraphics.length&&!1!==Y.toggleToolOnClick&&"transform"===da){var qa=ia.updateGraphics.getItemAt(0);0===M.isSupportedGraphic(qa)&&(qa=yield ia._setupReshape3DOperation(qa,Y,
U,!0),la(qa)||(ka.onEnd(),ka.destroy(),ia._setUpdateOperationHandle(qa,Y)))}});return function(){return na.apply(this,arguments)}}()});pa.push(...this._getHandlesForComponent(ka,Y),this.view.on("immediate-click",na=>this._getCommonUpdateOperationClickHandlers(ka,na,Y),t.ViewEventPriorities.WIDGET),U.on("key-down",na=>{this._getCommonUpdateOperationKeyDownHandlers(ka,na);na.key===r.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!0,na.stopPropagation())},t.ViewEventPriorities.WIDGET),
U.on("key-up",na=>{na.key===r.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!1,na.stopPropagation())},t.ViewEventPriorities.WIDGET));return ka});return function(S,Y,U,da){return I.apply(this,arguments)}}();X._setupGraphicTransform3DOperation=function(I,S,Y,U=!1){if(1===I.length&&0===G.isSupportedGraphic(I[0])){const da=I[0],ca=da.geometry;if(x.isSome(ca)&&("point"===ca.type||"mesh"===ca.type))return this._setupPointTransform3DOperation(da,S,Y);if(x.isSome(ca)&&("polygon"===ca.type||
"polyline"===ca.type))return this._setupPolyTransform3DOperation(da,S,Y,U)}return this._setupMove3DOperation(I,S,Y,"transform",U)};X._setupPointTransform3DOperation=function(){var I=c._asyncToGenerator(function*(S,Y,U){var da=this;const {enableRotation:ca,enableScaling:ia,enableZ:fa}=Y,ta=yield this._requireModule(new Promise(function(qa,Aa){f(["../../views/3d/interactive/editingTools"],qa,Aa)}));if(la(ta))return ta;const pa=new ta.module.GraphicTransformTool({graphic:S,view:U,enableRotation:ca,enableScaling:ia,
enableZ:fa,snappingManager:this._snappingManager});this.view.tools.add(pa);this.updateGraphics.add(S);const ka=[],na=new N.UpdateOperationHandle({activeComponent:pa,tool:"transform",type:"update",onEnd:()=>{var qa;ka.forEach(Aa=>Aa.remove());ka.length=0;null==(qa=this.view.tools)?void 0:qa.remove(pa);pa.destroyed||pa.destroy()},undo:()=>{J(na,this.updateGraphics.toArray());this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},redo:()=>{V(na,this.updateGraphics.toArray());
this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},addToSelection:function(){var qa=c._asyncToGenerator(function*(Aa){da.updateGraphics.add(Aa);da.emit("update",{graphics:da.updateGraphics.toArray(),state:"active",aborted:!1,tool:da.activeTool,toolEventInfo:{added:[Aa],removed:[],type:"selection-change"},type:"update"});Aa=yield da._setupMove3DOperation(da.updateGraphics.toArray(),Y,U,"transform",!0);la(Aa)||(na.onEnd(),na.destroy(),da._setUpdateOperationHandle(Aa,Y))});
return function(Aa){return qa.apply(this,arguments)}}(),removeFromSelection:qa=>{this.updateGraphics.remove(qa);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[qa],type:"selection-change"},type:"update"});na.complete()},toggleTool:()=>{}});ka.push(...this._getHandlesForComponent(na,Y),this.view.on("immediate-click",qa=>this._getCommonUpdateOperationClickHandlers(na,qa,Y),t.ViewEventPriorities.WIDGET),U.on("key-down",
qa=>{this._getCommonUpdateOperationKeyDownHandlers(na,qa);qa.key===r.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!0,qa.stopPropagation())},t.ViewEventPriorities.WIDGET),U.on("key-up",qa=>{qa.key===r.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!1,qa.stopPropagation())},t.ViewEventPriorities.WIDGET));return na});return function(S,Y,U){return I.apply(this,arguments)}}();X._setupPolyTransform3DOperation=function(){var I=c._asyncToGenerator(function*(S,Y,U,da=
!1){var ca=this;const {enableRotation:ia,enableScaling:fa,enableZ:ta,preserveAspectRatio:pa}=Y,ka=yield this._requireModule(new Promise(function(za,Fa){f(["../../views/3d/interactive/editingTools"],za,Fa)}));if(la(ka))return ka;const na=new ka.module.ExtentTransformTool({graphic:S,view:U,enableRotation:ia,enableScaling:fa,enableZ:ta,preserveAspectRatio:pa});this.view.tools.add(na);da||this.updateGraphics.add(S);const qa=[],Aa=new N.UpdateOperationHandle({activeComponent:na,tool:"transform",type:"update",
onEnd:()=>{var za;qa.forEach(Fa=>Fa.remove());qa.length=0;null==(za=this.view.tools)?void 0:za.remove(na);na.destroyed||na.destroy()},canUndo:()=>na.canUndo,undo:()=>{na.undo();this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},canRedo:()=>na.canRedo,redo:()=>{na.redo();this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},addToSelection:function(){var za=c._asyncToGenerator(function*(Fa){ca.updateGraphics.add(Fa);ca.emit("update",{graphics:ca.updateGraphics.toArray(),
state:"active",aborted:!1,tool:ca.activeTool,toolEventInfo:{added:[Fa],removed:[],type:"selection-change"},type:"update"});Fa=yield ca._setupMove3DOperation(ca.updateGraphics.toArray(),Y,U,"transform",!0);la(Fa)||(Aa.onEnd(),Aa.destroy(),ca._setUpdateOperationHandle(Fa,Y))});return function(Fa){return za.apply(this,arguments)}}(),removeFromSelection:za=>{this.updateGraphics.remove(za);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],
removed:[za],type:"selection-change"},type:"update"});Aa.complete()},toggleTool:function(){var za=c._asyncToGenerator(function*(){if(1===ca.updateGraphics.length&&!1!==Y.toggleToolOnClick){var Fa=ca.updateGraphics.getItemAt(0);0===M.isSupportedGraphic(Fa)&&(Fa=yield ca._setupReshape3DOperation(Fa,Y,U,!0),la(Fa)||(Aa.onEnd(),Aa.destroy(),ca._setUpdateOperationHandle(Fa,Y)))}});return function(){return za.apply(this,arguments)}}()});qa.push(...this._getHandlesForComponent(Aa,Y),this.view.on("immediate-click",
za=>this._getCommonUpdateOperationClickHandlers(Aa,za,Y),t.ViewEventPriorities.WIDGET),this.view.on("key-down",za=>this._getCommonUpdateOperationKeyDownHandlers(Aa,za),t.ViewEventPriorities.WIDGET),this.view.on("key-down",za=>{za.key!==r.SKETCH_KEYS.constraint||za.repeat||(na.preserveAspectRatio=!na.preserveAspectRatio,za.stopPropagation())},t.ViewEventPriorities.WIDGET),this.view.on("key-up",za=>{za.key===r.SKETCH_KEYS.constraint&&(na.preserveAspectRatio=!na.preserveAspectRatio,za.stopPropagation())},
t.ViewEventPriorities.WIDGET));return Aa});return function(S,Y,U){return I.apply(this,arguments)}}();X._setupMoveOperation=function(){var I=c._asyncToGenerator(function*(S,Y,U){this.updateGraphics.addMany(S);const da=yield this._getGraphicMover(S,Y,U);if(la(da))return da;const ca=new N.UpdateOperationHandle({activeComponent:da,tool:"move",type:"update",onEnd:()=>{var pa;this._displayDefaultCursor();ta.forEach(ka=>ka.remove());fa.forEach(ka=>ka.remove());ta=[];fa=[];da.destroy();null==(pa=this._internalGraphicsLayer)?
void 0:pa.removeMany([...this.updateGraphics.toArray()])},undo:()=>{const pa=this.updateGraphics.toArray();J(ca,pa);ca.refreshComponent();this._emitUndoEvent({graphics:pa,tool:"move"})},redo:()=>{const pa=this.updateGraphics.toArray();V(ca,pa);ca.refreshComponent();this._emitRedoEvent({graphics:pa,tool:"move"})},addToSelection:pa=>{this.updateGraphics.push(pa);da.graphics=this.updateGraphics.toArray();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,
toolEventInfo:{added:[pa],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:pa=>{const ka=this.updateGraphics.indexOf(pa);ca.history.undo.forEach(qa=>qa.updates.splice(ka,1));ca.history.redo.forEach(qa=>qa.updates.splice(ka,1));this.updateGraphics.remove(pa);const na=this.updateGraphics.toArray();this.emit("update",{graphics:na,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[pa],type:"selection-change"},type:"update"});0===this.updateGraphics.length?
ca.complete():da.graphics=na}});let ia=!1,fa=[U.on("immediate-click",pa=>this._getCommonUpdateOperationClickHandlers(ca,pa,Y),t.ViewEventPriorities.WIDGET),U.on("key-down",pa=>{this._getCommonUpdateOperationKeyDownHandlers(ca,pa);pa.key!==r.SKETCH_KEYS.constraint||pa.repeat||(ia=!0,da.enableMoveAllGraphics=!da.enableMoveAllGraphics)},t.ViewEventPriorities.WIDGET),U.on("key-up",pa=>{pa.key===r.SKETCH_KEYS.constraint&&ia&&(ia=!1,da.enableMoveAllGraphics=!da.enableMoveAllGraphics)},t.ViewEventPriorities.WIDGET)],
ta=this._getHandlesForComponent(ca,Y);return ca});return function(S,Y,U){return I.apply(this,arguments)}}();X._setupReshape3DOperation=function(){var I=c._asyncToGenerator(function*(S,Y,U,da=!1){var ca=this;const ia=yield this._requireModule(new Promise(function(ka,na){f(["../../views/3d/interactive/editingTools"],ka,na)}));if(la(ia))return ia;this.snappingOptions.enabledToggled=!1;const fa=new ia.module.GraphicReshapeTool({view:U,graphic:S,enableZVertex:Y.enableZ&&"move"===Y.reshapeOptions.vertexOperation,
enableZShape:Y.enableZ&&"move"===Y.reshapeOptions.shapeOperation,enableMoveGraphic:"move"===Y.reshapeOptions.shapeOperation||"move-xy"===Y.reshapeOptions.shapeOperation,enableMidpoints:"split"===Y.reshapeOptions.edgeOperation,enableEdgeOffset:"offset"===Y.reshapeOptions.edgeOperation,snappingManager:this._snappingManager});U.tools.add(fa);da||this.updateGraphics.add(S);const ta=[],pa=new N.UpdateOperationHandle({activeComponent:fa,tool:"reshape",type:"update",onEnd:()=>{var ka;ta.forEach(na=>na.remove());
ta.length=0;null==(ka=this.view.tools)?void 0:ka.remove(fa);fa.destroyed||fa.destroy()},canUndo:()=>fa.canUndo,undo:()=>{fa.undo();this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:"reshape"})},canRedo:()=>fa.canRedo,redo:()=>{fa.redo();this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:"reshape"})},addToSelection:function(){var ka=c._asyncToGenerator(function*(na){ca.updateGraphics.add(na);ca.emit("update",{graphics:ca.updateGraphics.toArray(),state:"active",aborted:!1,
tool:ca.activeTool,toolEventInfo:{added:[na],removed:[],type:"selection-change"},type:"update"});na=yield ca._setupMove3DOperation(ca.updateGraphics.toArray(),Y,U,"transform",!0);la(na)||(pa.onEnd(),pa.destroy(),ca._setUpdateOperationHandle(na,Y))});return function(na){return ka.apply(this,arguments)}}(),removeFromSelection:ka=>{this.updateGraphics.remove(ka);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[ka],
type:"selection-change"},type:"update"});pa.complete()},toggleTool:function(){var ka=c._asyncToGenerator(function*(){if(!1!==Y.toggleToolOnClick){var na=yield ca._setupGraphicTransform3DOperation(ca.updateGraphics.toArray(),Y,U,!0);la(na)||(pa.onEnd(),pa.destroy(),ca._setUpdateOperationHandle(na,Y))}});return function(){return ka.apply(this,arguments)}}()});ta.push(...this._getHandlesForComponent(pa,Y),U.on("immediate-click",ka=>this._getCommonUpdateOperationClickHandlers(pa,ka,Y),t.ViewEventPriorities.WIDGET),
U.on("key-down",ka=>{this._getCommonUpdateOperationKeyDownHandlers(pa,ka);ka.key===r.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!0,ka.stopPropagation())},t.ViewEventPriorities.WIDGET),U.on("key-up",ka=>{ka.key===r.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!1,ka.stopPropagation())},t.ViewEventPriorities.WIDGET));return pa});return function(S,Y,U){return I.apply(this,arguments)}}();X._setupTransformOrReshapeOperation=function(){var I=c._asyncToGenerator(function*(S,
Y,U,da){var ca=this;const {multipleSelectionEnabled:ia}=U;this.updateGraphics.addMany(S);S="transform"===Y?yield this._getBox(S,U,da):yield this._getReshape(S,U,da);if(la(S))return S;const fa=new N.UpdateOperationHandle({activeComponent:S,type:"update",onEnd:()=>{pa.forEach(ka=>ka.remove());ta.forEach(ka=>ka.remove());pa=[];ta=[];fa.activeComponent&&!fa.activeComponent.destroyed&&fa.activeComponent.destroy();this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},undo:()=>{J(fa,this.updateGraphics.toArray());
fa.refreshComponent();this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:fa.tool})},redo:()=>{V(fa,this.updateGraphics.toArray());fa.refreshComponent();this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:fa.tool})},addToSelection:function(){var ka=c._asyncToGenerator(function*(na){var qa=fa.activeComponent;if("reshape"===qa.type){qa=[...ca.updateGraphics,na];ca.updateGraphics.removeAll();qa=yield ca._setupMoveOperation(qa,U,da);if(la(qa))return;fa.onEnd();fa.destroy();ca._setUpdateOperationHandle(qa,
U)}else ca.updateGraphics.add(na),qa.graphics=ca.updateGraphics.toArray(),qa.refresh(),fa.resetHistory();ca.emit("update",{graphics:ca.updateGraphics.toArray(),state:"active",aborted:!1,tool:ca.activeTool,toolEventInfo:{added:[na],removed:[],type:"selection-change"},type:"update"})});return function(na){return ka.apply(this,arguments)}}(),removeFromSelection:function(){var ka=c._asyncToGenerator(function*(na){const qa=ca.updateGraphics.indexOf(na);fa.history.undo.forEach(za=>za.updates.splice(qa,
1));fa.history.redo.forEach(za=>za.updates.splice(qa,1));ca.updateGraphics.remove(na);const Aa=ca.updateGraphics.toArray();if(0===Aa.length)fa.complete();else{const za=Aa[0].geometry;1!==Aa.length||!x.isSome(za)||"point"!==za.type&&"multipoint"!==za.type?fa.activeComponent.graphics=Aa:fa.toggleTool()}ca.emit("update",{graphics:Aa,state:"active",aborted:!1,tool:ca.activeTool,toolEventInfo:{added:[],removed:[na],type:"selection-change"},type:"update"})});return function(na){return ka.apply(this,arguments)}}(),
toggleTool:function(){var ka=c._asyncToGenerator(function*(){if(!(1<ca.updateGraphics.length)){var na=ca.updateGraphics.getItemAt(0),qa=na.geometry;x.isSome(qa)&&("reshape"===fa.tool&&("point"===qa.type||"multipoint"===qa.type)||"transform"===fa.tool&&"extent"===qa.type)||(qa=null,"transform"===fa.tool?qa=yield ca._getReshape([na],U,da):"reshape"===fa.tool&&(qa=yield ca._getBox([na],U,da)),la(qa)||(fa.activeComponent.destroy(),fa.activeComponent=qa,fa.activeComponent&&(pa.forEach(Aa=>Aa.remove()),
pa=ca._getHandlesForComponent(fa,U))))}});return function(){return ka.apply(this,arguments)}}()});let ta=[da.on("immediate-click",function(){var ka=c._asyncToGenerator(function*(na){var qa;const Aa=yield na.async(()=>ca._getFirstHit(E.createScreenPointFromEvent(na)));null!=(qa=Aa.results)&&qa.length?Aa.results.some(za=>{if(za.graphic){var Fa;za=za.graphic;if(null!=(Fa=na.native)&&Fa.shiftKey&&ia)return na.stopPropagation(),fa.addToSelection(za),!0;if(za.layer===ca.layer)return fa.complete(),!0}return!1}):
fa.complete()});return function(na){return ka.apply(this,arguments)}}(),t.ViewEventPriorities.WIDGET),da.on("key-down",ka=>{this._getCommonUpdateOperationKeyDownHandlers(fa,ka);ka.key!==r.SKETCH_KEYS.snappingToggle||ka.repeat||(this.snappingOptions.enabledToggled=!0,ka.stopPropagation());ka.key===r.SKETCH_KEYS.constraint&&!ka.repeat&&fa&&(ka=fa.activeComponent)&&"box"===ka.type&&(ka.preserveAspectRatio=!ka.preserveAspectRatio)},t.ViewEventPriorities.WIDGET),da.on("key-up",ka=>{var na;ka.key===r.SKETCH_KEYS.snappingToggle&&
"reshape"===(null==fa?void 0:null==(na=fa.activeComponent)?void 0:na.type)&&(this.snappingOptions.enabledToggled=!1,ka.stopPropagation());ka.key===r.SKETCH_KEYS.constraint&&fa&&(ka=fa.activeComponent)&&"box"===ka.type&&(ka.preserveAspectRatio=!ka.preserveAspectRatio)},t.ViewEventPriorities.WIDGET)],pa=this._getHandlesForComponent(fa,U);return fa});return function(S,Y,U,da){return I.apply(this,arguments)}}();X._getGraphicMover=function(){var I=c._asyncToGenerator(function*(S,Y,U){({enableMoveAllGraphics:Y}=
Y);const da=yield this._requireModule(new Promise(function(ca,ia){f(["../../views/draw/support/GraphicMover"],function(fa){ca(K(fa))},ia)}));return la(da)?da:new da.module.default({enableMoveAllGraphics:Y,graphics:S,view:U,callbacks:{onGraphicMoveStart:({dx:ca,dy:ia,graphic:fa})=>{this._displayGrabbingCursor();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:ca,dy:ia,mover:fa,type:"move-start"},type:"update"})},onGraphicMove:({dx:ca,
dy:ia,graphic:fa})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:ca,dy:ia,mover:fa,type:"move"},type:"update"}),onGraphicMoveStop:({dx:ca,dy:ia,graphic:fa})=>{this._displayPointerCursor();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:ca,dy:ia,mover:fa,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayPointerCursor(),onGraphicPointerOut:()=>
this._displayDefaultCursor()}})});return function(S,Y,U){return I.apply(this,arguments)}}();X._getBox=function(){var I=c._asyncToGenerator(function*(S,Y,U){const {enableRotation:da,enableScaling:ca,preserveAspectRatio:ia}=Y;Y=yield this._requireModule(new Promise(function(fa,ta){f(["../../views/draw/support/Box"],function(pa){fa(K(pa))},ta)}));return la(Y)?Y:new Y.module.default({graphics:S,enableRotation:da,enableScaling:ca,preserveAspectRatio:ia,layer:this._internalGraphicsLayer,view:U,callbacks:{onMoveStart:fa=>
this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...fa},type:"update"}),onMove:fa=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...fa},type:"update"}),onMoveStop:fa=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...fa},type:"update"}),onScaleStart:fa=>this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...fa},type:"update"}),onScale:fa=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...fa},type:"update"}),onScaleStop:fa=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...fa},type:"update"}),onRotateStart:fa=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,
tool:this.activeTool,toolEventInfo:{...fa},type:"update"}),onRotate:fa=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...fa},type:"update"}),onRotateStop:fa=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...fa},type:"update"})}})});return function(S,Y,U){return I.apply(this,arguments)}}();X._getReshape=function(){var I=c._asyncToGenerator(function*(S,
Y,U){var da,ca;const ia="split"===(null==(da=Y.reshapeOptions)?void 0:da.edgeOperation);Y="move"===(null==(ca=Y.reshapeOptions)?void 0:ca.shapeOperation);ca=yield this._requireModule(new Promise(function(fa,ta){f(["../../views/draw/support/Reshape"],function(pa){fa(K(pa))},ta)}));return la(ca)?ca:new ca.module.default({enableMidpoints:ia,enableMovement:Y,graphic:S[0],layer:this._internalGraphicsLayer,snappingManager:this._snappingManager,view:U,callbacks:{onReshapeStart:fa=>this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...fa},type:"update"}),onReshape:fa=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...fa},type:"update"}),onReshapeStop:({mover:fa,type:ta})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:fa,type:ta},type:"update"}),onMoveStart:({dx:fa,dy:ta,mover:pa,type:ka})=>this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:fa,dy:ta,mover:pa,type:ka},type:"update"}),onMove:({dx:fa,dy:ta,mover:pa,type:ka})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:fa,dy:ta,mover:pa,type:ka},type:"update"}),onMoveStop:({dx:fa,dy:ta,mover:pa,type:ka})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:fa,dy:ta,mover:pa,
type:ka},type:"update"}),onVertexAdd:({added:fa,type:ta,vertices:pa})=>{fa=fa.map(ka=>k.geometryToCoordinates(ka.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:fa,vertices:pa,type:ta},type:"update"})},onVertexRemove:({removed:fa,type:ta,vertices:pa})=>{fa=fa.map(ka=>k.geometryToCoordinates(ka.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,
toolEventInfo:{removed:fa,vertices:pa,type:ta},type:"update"})}}})});return function(S,Y,U){return I.apply(this,arguments)}}();X._getHandlesForComponent=function(I,S){const Y=I.activeComponent;switch(Y.type){case "graphic-mover":return[Y.on("graphic-click",({graphic:U,viewEvent:da})=>{var ca;null!=(ca=da.native)&&ca.shiftKey&&(da.stopPropagation(),I.removeFromSelection(U))}),Y.on("graphic-move-start",U=>I.addToHistory(ha(U.allGraphics)))];case "box":return[Y.on("graphic-click",U=>this._onTransformOrReshape2DGraphicClick(I,
S,U)),Y.on("move-start",U=>I.addToHistory(ha(U.graphics))),Y.on("rotate-start",U=>I.addToHistory(ha(U.graphics))),Y.on("scale-start",U=>I.addToHistory(ha(U.graphics)))];case "reshape":return[Y.on("graphic-click",U=>this._onTransformOrReshape2DGraphicClick(I,S,U)),Y.on("move-start",U=>I.addToHistory(ha([U.mover]))),Y.on("reshape-start",U=>I.addToHistory(ha([U.graphic]))),Y.on("vertex-add",U=>I.addToHistory(ha([U.oldGraphic]))),Y.on("vertex-remove",U=>I.addToHistory(ha([U.oldGraphic])))];case "move-3d":return[Y.on("graphic-move-start",
U=>{I.addToHistory(ha(U.allGraphics));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:0<U.allGraphics.length?U.allGraphics[0]:null,type:"move-start"},type:"update"})}),Y.on("graphic-move",U=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:U.dx,dy:U.dy,mover:0<U.allGraphics.length?U.allGraphics[0]:null,type:"move"},type:"update"})}),Y.on("graphic-move-stop",
U=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:0<U.allGraphics.length?U.allGraphics[0]:null,type:"move-stop"},type:"update"})}),Y.on("immediate-click",U=>{U.shiftKey?this._toggleSelection([U.graphic],I,S):I.toggleTool()})];case "transform-3d":return[Y.on("record-undo",({record:U})=>{I.addToHistory({updates:[U]})}),Y.on("graphic-translate-start",U=>{this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:U.graphic,dx:U.dxScreen,dy:U.dyScreen,type:"move-start"},type:"update"})}),Y.on("graphic-translate-stop",U=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:U.graphic,dx:U.dxScreen,dy:U.dyScreen,type:"move-stop"},type:"update"})}),Y.on("graphic-rotate-start",U=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,
toolEventInfo:{mover:U.graphic,angle:U.angle,type:"rotate-start"},type:"update"})}),Y.on("graphic-rotate-stop",U=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:U.graphic,angle:U.angle,type:"rotate-stop"},type:"update"})}),Y.on("graphic-scale-start",U=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:U.graphic,xScale:U.xScale,yScale:U.yScale,
type:"scale-start"},type:"update"})}),Y.on("graphic-scale-stop",U=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:U.graphic,xScale:U.xScale,yScale:U.yScale,type:"scale-stop"},type:"update"})}),Y.on("graphic-translate",U=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:U.graphic,dx:U.dxScreen,dy:U.dyScreen,type:"move"},type:"update"})}),Y.on("graphic-rotate",
U=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:U.graphic,angle:U.angle,type:"rotate"},type:"update"})}),Y.on("graphic-scale",U=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:U.graphic,xScale:U.xScale,yScale:U.yScale,type:"scale"},type:"update"})}),Y.on("immediate-click",U=>{U.shiftKey?this._toggleSelection([U.graphic],I,S):I.toggleTool()})];
case "reshape-3d":return[Y.on("reshape",U=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:U,type:"update"})}),Y.on("move",U=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:U,type:"update"})}),Y.on("vertex-add",U=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:U,type:"update"})}),
Y.on("vertex-remove",U=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:U,type:"update"})}),Y.on("immediate-click",U=>{U.shiftKey?this._toggleSelection([U.graphic],I,S):I.toggleTool()})]}};X._onTransformOrReshape2DGraphicClick=function(I,S,Y){var U;const {graphic:da,viewEvent:ca}=Y;if(null!=(U=ca.native)&&U.shiftKey&&da.layer===this.layer)return ca.stopPropagation(),I.removeFromSelection(da);if(S.toggleToolOnClick)return ca.stopPropagation(),
I.toggleTool()};X._setUpdateOperationHandle=function(I,S){this._operationHandle=I;const Y=this.view.map;this._disablePopup(S);I.on("complete",()=>{if(I===this._operationHandle){const U=this.updateGraphics.toArray(),da=this._operationHandle.tool;this._operationHandle.destroy();this._operationHandle=null;this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray());this.updateGraphics.removeAll();Y&&Y.remove(this._internalGraphicsLayer);this._restorePopup(S);this.emit("update",{graphics:U,state:"complete",
aborted:I.cancelled,tool:da,toolEventInfo:null,type:"update"})}})};X._getCommonUpdateOperationClickHandlers=function(){var I=c._asyncToGenerator(function*(S,Y,U){const da=E.createScreenPointFromEvent(Y),ca=(yield Y.async(()=>this._getFirstHit(da))).results;ca.length?Y.native.shiftKey&&this._toggleSelection(ca.map(ia=>ia.graphic),S,U)?Y.stopPropagation():ca.some(ia=>ia.graphic&&this.updateGraphics.includes(ia.graphic))?Y.stopPropagation():S.complete():S.complete()});return function(S,Y,U){return I.apply(this,
arguments)}}();X._toggleSelection=function(I,S,Y){const U=!!Y.multipleSelectionEnabled;return I.some(da=>null==da?!1:U&&da.layer===this.layer?(this.updateGraphics.includes(da)?S.removeFromSelection(da):S.addToSelection(da),!0):!1)};X._getCommonUpdateOperationKeyDownHandlers=function(I,S){if(I){var Y=S.key;Y===r.SKETCH_KEYS.undo&&I.canUndo()?(S.stopPropagation(),I.undo()):Y===r.SKETCH_KEYS.redo&&I.canRedo()?(S.stopPropagation(),I.redo()):Y===r.SKETCH_KEYS.cancel?(S.stopPropagation(),I.cancel()):this.allowDeleteKey&&
r.SKETCH_KEYS.delete.includes(Y)&&this._onDeleteKey(S)}};X._onDeleteKey=function(I){if(this._operationHandle&&"update"===this._operationHandle.type){var S=this.activeComponent,Y=this.updateGraphics.toArray();x.isNone(S)||"reshape-3d"===S.type||"reshape"===S.type&&(1!==Y.length||"point"!==x.get(Y[0].geometry,"type"))||(I.stopPropagation(),this.delete())}};X._removeDefaultLayer=function(){this._internalGraphicsLayer&&(this.view&&this.view.map&&this.view.map.remove(this._internalGraphicsLayer),this._internalGraphicsLayer=
x.destroyMaybe(this._internalGraphicsLayer))};X._isComponentGraphic=function(I){const {activeComponent:S}=this;return!I||x.isNone(S)?!1:I.attributes&&I.attributes.esriSketchTool?!0:("box"===S.type||"reshape"===S.type)&&S.isUIGraphic(I)};X._displayPointerCursor=function(){this.view&&this.view.container&&"pointer"!==this.view.cursor&&(this.view.cursor="pointer")};X._displayGrabbingCursor=function(){this.view&&this.view.container&&"grabbing"!==this.view.cursor&&(this.view.cursor="grabbing")};X._displayDefaultCursor=
function(){this.view&&this.view.container&&null!==this.view.cursor&&(this.view.cursor=null)};X._logError=function(I,S,Y){ra.error(new T(I,S,Y))};X._requireModule=function(){var I=c._asyncToGenerator(function*(S){const Y=new AbortController;this._moduleLoaderAbortController=Y;S=yield S;return this._moduleLoaderAbortController!==Y||Y.signal.aborted?{requireError:"aborted"}:{module:S}});return function(S){return I.apply(this,arguments)}}();X._emitUndoEvent=function(I){this.emit("undo",{...I,type:"undo"})};
X._emitRedoEvent=function(I){this.emit("redo",{...I,type:"redo"})};X._emitDeleteEvent=function(I){this.emit("delete",{...I,type:"delete"})};X.test=function(){return{operationHandle:this._operationHandle,defaultUpdateOptions:wa}};X.wait=function(){return e.whenNotOnce(this,"updating")};X._beginAsyncOperation=function(){this._numUpdating+=1;this.notifyChange("updating")};X._endAsyncOperation=function(){--this._numUpdating;this.notifyChange("updating")};X._disablePopupEnabled=function(I){var S;return"3d"!==
(null==(S=this.view)?void 0:S.type)||this.updateOnGraphicClick||x.isSome(I)&&I.toggleToolOnClick};X._disablePopup=function(I){this._disablePopupEnabled(I)&&(I=this.view.popup)&&x.isNone(this._originalAutoOpenEnabled)&&(this._originalAutoOpenEnabled=I.autoOpenEnabled,I.autoOpenEnabled=!1)};X._restorePopup=function(I){this._disablePopupEnabled(I)&&(I=this.view.popup)&&x.isSome(this._originalAutoOpenEnabled)&&(I.autoOpenEnabled=this._originalAutoOpenEnabled,this._originalAutoOpenEnabled=null)};X._waitViewReady=
function(){var I=c._asyncToGenerator(function*(){this.view&&(x.abortMaybe(this._viewReadyAbortController),this._viewReadyAbortController=n.createAbortController(),yield n.whenOrAbort(e.whenOnce(this.view,"ready"),this._viewReadyAbortController.signal))});return function(){return I.apply(this,arguments)}}();c._createClass(ja,[{key:"_defaultUpdateTool",get:function(){return"3d"===this.view.type?"move":"transform"}},{key:"updating",get:function(){return 0<this._numUpdating}},{key:"activeTool",get:function(){return this._operationHandle&&
this._operationHandle.tool?this._operationHandle.tool:null}},{key:"activeComponent",get:function(){return this._operationHandle?this._operationHandle.activeComponent:null}},{key:"createGraphic",get:function(){return!x.isSome(this.activeComponent)||"draw-3d"!==this.activeComponent.type&&"draw-2d"!==this.activeComponent.type?this._get("createGraphic"):x.unwrap(this.activeComponent.graphic)}},{key:"defaultCreateOptions",set:function(I){this._set("defaultCreateOptions",{...va,...I})}},{key:"defaultUpdateOptions",
set:function(I){this._set("defaultUpdateOptions",{...wa,...I,reshapeOptions:{...wa.reshapeOptions,...null==I?void 0:I.reshapeOptions}})}},{key:"snappingOptions",set:function(I){x.isSome(this._snappingManager)&&(this._snappingManager.options=I);this._set("snappingOptions",I)}},{key:"state",get:function(){var I;const S=!(null==(I=this.view)||!I.ready||!this.layer);I=this._operationHandle;return S&&I?"active":S?"ready":"disabled"}},{key:"view",get:function(){return this._get("view")},set:function(I){const S=
this._get("view");if(S){const {container:Y,map:U}=S;Y&&(S.cursor=null);U&&U.remove(this._internalGraphicsLayer);this._viewHandles.removeAll();this.cancel()}this._handles.remove("view-ready");I&&this._handles.add(e.when(I,"ready",Y=>{this._viewHandles.removeAll();Y&&this._viewHandles.add(this._generateViewHandles(I))},!0),"view-ready");this._set("view",I)}}]);return ja}(W.EventedAccessor);b.__decorate([g.property()],L.prototype,"updating",null);b.__decorate([g.property()],L.prototype,"_operationHandle",
void 0);b.__decorate([g.property({readOnly:!0})],L.prototype,"activeTool",null);b.__decorate([g.property()],L.prototype,"activeFillSymbol",void 0);b.__decorate([g.property()],L.prototype,"activeLineSymbol",void 0);b.__decorate([g.property()],L.prototype,"activeVertexSymbol",void 0);b.__decorate([g.property()],L.prototype,"allowDeleteKey",void 0);b.__decorate([g.property({readOnly:!0})],L.prototype,"createGraphic",null);b.__decorate([g.property()],L.prototype,"defaultCreateOptions",null);b.__decorate([g.property()],
L.prototype,"defaultUpdateOptions",null);b.__decorate([g.property()],L.prototype,"layer",void 0);b.__decorate([g.property({types:z.symbolTypes})],L.prototype,"pointSymbol",void 0);b.__decorate([g.property({types:z.symbolTypes})],L.prototype,"polygonSymbol",void 0);b.__decorate([g.property({types:z.symbolTypes})],L.prototype,"polylineSymbol",void 0);b.__decorate([g.property({type:v,nonNullable:!0})],L.prototype,"snappingOptions",null);b.__decorate([g.property()],L.prototype,"_snappingManager",void 0);
b.__decorate([g.property({readOnly:!0})],L.prototype,"state",null);b.__decorate([g.property({readOnly:!0})],L.prototype,"updateGraphics",void 0);b.__decorate([g.property()],L.prototype,"updateOnGraphicClick",void 0);b.__decorate([g.property({types:z.symbolTypes})],L.prototype,"updatePointSymbol",void 0);b.__decorate([g.property({types:z.symbolTypes})],L.prototype,"updatePolygonSymbol",void 0);b.__decorate([g.property({types:z.symbolTypes})],L.prototype,"updatePolylineSymbol",void 0);b.__decorate([g.property({types:z.symbolTypes})],
L.prototype,"vertexSymbol",void 0);b.__decorate([g.property({value:null})],L.prototype,"view",null);b.__decorate([g.property()],L.prototype,"cancel",null);b.__decorate([g.property()],L.prototype,"complete",null);b.__decorate([g.property()],L.prototype,"delete",null);b.__decorate([g.property()],L.prototype,"create",null);b.__decorate([g.property()],L.prototype,"update",null);b.__decorate([g.property()],L.prototype,"undo",null);b.__decorate([g.property()],L.prototype,"redo",null);b.__decorate([g.property()],
L.prototype,"canUndo",null);b.__decorate([g.property()],L.prototype,"canRedo",null);b.__decorate([g.property()],L.prototype,"toggleUpdateTool",null);return L=b.__decorate([C.subclass("esri.widgets.Sketch.SketchViewModel")],L)})},"esri/core/reactiveUtils":function(){define(["exports","./events","./handleUtils","./maybe","./accessorSupport/watch"],function(f,c,b,z,w){function L(Q,H,x={},n){let d=null;const e=x.once?(g,p)=>{n(g)&&(z.removeMaybe(d),H(g,p))}:(g,p)=>{n(g)&&H(g,p)};d=w.watchTracked(Q,e,
x.sync);x.immediate&&(Q=Q(),e(Q,Q));return d}function T(Q){return!0}function W(Q){return!!Q}f.SYNC_AND_IMMEDIATE={sync:!0,immediate:!0};f.react=function(Q,H,x={}){return L(Q,H,x,T)};f.reactListener=function(Q,H,x,n={}){function d(){g&&p&&(p.remove(),null==n.onListenerRemove?void 0:n.onListenerRemove(g),p=g=null)}function e(k){n.once&&n.once&&z.removeMaybe(C);x(k)}let g=null,p=null,C=null;const q=w.watchTracked(Q,(k,A)=>{d();c.isEventTarget(k)&&(g=k,p=c.on(k,H,e),null==n.onListenerAdd?void 0:n.onListenerAdd(k))},
n.sync);return C=b.makeHandle(()=>{q.remove();d()})};f.reactTruthy=function(Q,H,x={}){return L(Q,H,x,W)};Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/DOMContainer":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/domUtils ../core/scheduling ../core/watchUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/subclass ./overlay/ViewOverlay ../widgets/Popup".split(" "),
function(f,c,b,z,w,L,T,W,Q,H,x,n,d){function e(p){p&&(z.empty(p),p.parentNode&&p.parentNode.removeChild(p))}const g=[0,0];f.DOMContainer=p=>{p=function(C){function q(...A){var F=C.call(this,...A)||this;F._freqInfo={freq:16,time:750};F._overlayRenderTaskHandle=null;F.height=0;F.position=null;F.resizing=!1;F.root=null;F.surface=null;F.suspended=!0;F.ui=null;F.userContent=null;F.width=0;F.widthBreakpoint=null;F.handles.add([F.watch("cursor",u=>{const l=F.surface;l&&l.setAttribute("data-cursor",u)}),
F.watch("interacting",u=>{const l=F.surface;l&&l.setAttribute("data-interacting",u.toString())})]);return F}c._inheritsLoose(q,C);var k=q.prototype;k.initialize=function(){this.handles.add(this.watch("ui",(A,F)=>this._handleUIChange(A,F)));this._wireUI(this.ui);this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])};k.destroy=function(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),
this.container=null)};k.blur=function(){this.surface&&this.surface.blur()};k.focus=function(){this.surface&&this.surface.focus()};k.pageToContainer=function(A,F,u){const l=this.position;A-=l[0];F-=l[1];u?(u[0]=A,u[1]=F):u=[A,F];return u};k.containerToPage=function(A,F,u){const l=this.position;A+=l[0];F+=l[1];u?(u[0]=A,u[1]=F):u=[A,F];return u};k._handleUIChange=function(A,F){F&&(this.handles.remove("ui"),F.destroy());A&&this._wireUI(A);this._set("ui",A)};k._wireUI=function(A){this.handles.remove("ui");
A&&(A.view=this,this.handles.add([L.init(this,"root",F=>{if(F){{const u=document.createElement("div");F.appendChild(u);F=u}}else F=null;A.container=F}),L.init(this,"popup",(F,u)=>{u&&A.remove(u,"popup");F&&(F.view=A.view,A.add(F,{key:"popup",position:"manual"}))})],"ui"))};k._stopMeasuring=function(){this.handles.remove("measuring");this._get("resizing")&&this._set("resizing",!1)};k._startMeasuring=function(){const A=this._freqInfo;A.freq=16;A.time=750;this.handles.add([(()=>{const F=()=>{A.freq=
16;A.time=750};window.addEventListener("resize",F);return{remove(){window.removeEventListener("resize",F)}}})(),w.addFrameTask({prepare:F=>{const u=this._measure(),l=this._freqInfo;l.time+=F.deltaTime;u&&(l.freq=16,this._get("resizing")||this._set("resizing",!0));l.time<l.freq||(l.time=0,this._position()||u?l.freq=16:l.freq=Math.min(750,2*l.freq),!u&&512<=l.freq&&this._get("resizing")&&this._set("resizing",!1))}})],"measuring");this._measure();this._position()};k._measure=function(){var A=this.container;
const F=A?A.clientWidth:0;A=A?A.clientHeight:0;if(0===F||0===A)return this.suspended||this._set("suspended",!0),!1;const u=this.width,l=this.height;if(F===u&&A===l)return this.suspended&&this._set("suspended",!1),!1;this._set("width",F);this._set("height",A);this.suspended&&this._set("suspended",!1);this.emit("resize",{oldWidth:u,oldHeight:l,width:F,height:A});return!0};k._position=function(){var A=this.container;const F=this.position;{const u=(A.ownerDocument||window.document).defaultView;A=A.getBoundingClientRect();
g[0]=A.left+u.pageXOffset;g[1]=A.top+u.pageYOffset}return F&&g[0]===F[0]&&g[1]===F[1]?!1:(this._set("position",[g[0],g[1]]),!0)};k.forceDOMReadyCycle=function(){};c._createClass(q,[{key:"container",set:function(A){var F=this._get("container");if(F!==A)if(this.handles.remove("dom-size"),this._stopMeasuring(),F&&(F.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),this._set("overlay",null),
e(this.root),this._set("root",null),z.reparent(this.userContent,F),e(this.userContent),this._set("userContent",null)),A){A.classList.add("esri-view");F=document.createElement("div");F.className="esri-view-user-storage";z.reparent(A,F);A.appendChild(F);this._set("userContent",F);F=document.createElement("div");F.className="esri-view-root";A.insertBefore(F,A.firstChild);this._set("root",F);const u=document.createElement("div");u.className="esri-view-surface";u.setAttribute("role","application");u.tabIndex=
0;F.appendChild(u);this._set("surface",u);const l=new n;F.appendChild(l.surface);this._set("overlay",l);l.watch("needsRender",M=>{M&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=w.addFrameTask({render:()=>{this.overlay.render()}}):this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null)});this.forceDOMReadyCycle();this.handles.add(L.init(this,"size",M=>{const [G,y]=M;G>=document.body.clientWidth||y>=document.body.clientHeight?u.classList.add("esri-view-surface--inset-outline"):
u.classList.remove("esri-view-surface--inset-outline")}),"dom-size");this._set("container",A);this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}},{key:"focused",get:function(){const A=document.activeElement===this.surface;return document.hasFocus()&&A}},{key:"popup",get:function(){return this._get("popup")||new d({view:this})},set:function(A){const F=this._get("popup");F&&
F!==A&&F.destroy();this._set("popup",A)}},{key:"size",get:function(){return[this.width,this.height]}}]);return q}(p);b.__decorate([T.property({value:null,cast:C=>z.byId(C)})],p.prototype,"container",null);b.__decorate([T.property({readOnly:!0})],p.prototype,"focused",null);b.__decorate([T.property({readOnly:!0})],p.prototype,"height",void 0);b.__decorate([T.property({type:d})],p.prototype,"popup",null);b.__decorate([T.property({type:n})],p.prototype,"overlay",void 0);b.__decorate([T.property({readOnly:!0})],
p.prototype,"position",void 0);b.__decorate([T.property({readOnly:!0})],p.prototype,"resizing",void 0);b.__decorate([T.property({readOnly:!0})],p.prototype,"root",void 0);b.__decorate([T.property({value:null,readOnly:!0})],p.prototype,"size",null);b.__decorate([T.property({readOnly:!0})],p.prototype,"surface",void 0);b.__decorate([T.property({readOnly:!0})],p.prototype,"suspended",void 0);b.__decorate([T.property()],p.prototype,"ui",void 0);b.__decorate([T.property({readOnly:!0})],p.prototype,"userContent",
void 0);b.__decorate([T.property({readOnly:!0})],p.prototype,"width",void 0);b.__decorate([T.property()],p.prototype,"widthBreakpoint",void 0);return p=b.__decorate([x.subclass("esri.views.DOMContainer")],p)};f.isDOMContainer=function(p){return p&&"focus"in p};Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/overlay/ViewOverlay":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../libs/maquette/projection ../../libs/maquette/projector ../support/WatchUpdatingTracking".split(" "),
function(f,c,b,z,w,L,T,W,Q,H,x,n){b=function(d){function e(){var p=d.apply(this,arguments)||this;p.items=new z;p._watchUpdatingTracking=new n.WatchUpdatingTracking;p._callbacks=new Map;p._projector=x.createProjector();p._hiddenProjector=x.createProjector();return p}f._inheritsLoose(e,d);var g=e.prototype;g.initialize=function(){const p=document.createElement("div");p.className="esri-overlay-surface";this._set("surface",p);this._hiddenSurface=document.createElement("div");this._hiddenSurface.setAttribute("style",
"visibility: hidden;");p.appendChild(this._hiddenSurface);this._watchUpdatingTracking.addOnCollectionChange(this.items,C=>{C.added.map(q=>{const k=()=>q.render();this._callbacks.set(q,k);this._projector.append(this.surface,k)});C.removed.map(q=>{const k=this._projector.detach(this._callbacks.get(q));this.surface.removeChild(k.domNode);this._callbacks.delete(q)})})};g.addItem=function(p){this.items.add(p)};g.removeItem=function(p){this.items.remove(p)};g.destroy=function(){this.items.removeAll();this._callbacks.forEach(p=>
this._projector.detach(p));this._projector=this._callbacks=null;this._watchUpdatingTracking.destroy()};g.render=function(){this._projector.renderNow()};g.computeBoundingRect=function(p){const C=this._hiddenSurface,q=this._hiddenProjector;let k=null;const A=()=>k=p.render();q.append(C,A);q.renderNow();const F={left:0,top:0,right:0,bottom:0};if(k&&k.domNode){const u=k.domNode.getBoundingClientRect();F.left=u.left;F.top=u.top;F.right=u.right;F.bottom=u.bottom}for(q.detach(A);C.firstChild;)C.removeChild(C.firstChild);
return F};g.overlaps=function(p,C){p=this.computeBoundingRect(p);C=this.computeBoundingRect(C);return Math.max(p.left,C.left)<=Math.min(p.right,C.right)&&Math.max(p.top,C.top)<=Math.min(p.bottom,C.bottom)};g.renderCanvas=function(p){if(this.items.some(q=>q.visible)){var C=p.getContext("2d");C.save();C.font=`10px ${getComputedStyle(this.surface).fontFamily}`;this.items.forEach(q=>{C.save();q.renderCanvas(C);C.restore()});C.restore()}};f._createClass(e,[{key:"needsRender",get:function(){return 0<this.items.length}},
{key:"hasVisibleItems",get:function(){return this.items.some(p=>p.visible)}}]);return e}(b);c.__decorate([w.property({readOnly:!0})],b.prototype,"surface",void 0);c.__decorate([w.property({readOnly:!0})],b.prototype,"items",void 0);c.__decorate([w.property({readOnly:!0})],b.prototype,"needsRender",null);c.__decorate([w.property({readOnly:!0})],b.prototype,"_watchUpdatingTracking",void 0);c.__decorate([w.property({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],b.prototype,"updating",void 0);
return b=c.__decorate([Q.subclass("esri.views.overlay.ViewOverlay")],b)})},"esri/widgets/Popup":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/Collection ../core/events ../core/Handles ../core/Logger ../core/maybe ../core/throttle ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Feature ./Spinner ./Widget ./Feature/support/FeatureContentMixin ./Popup/PopupViewModel ./support/Heading ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ./support/widgetUtils ../intl/substitute".split(" "),
function(f,c,b,z,w,L,T,W,Q,H,x,n,d,e,g,p,C,q,k,A,F,u,l,M,G,y,t){function r(N,O){return void 0===O?`${"esri-popup"}__${N}`:`${"esri-popup"}__${N}-${O}`}const D={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},v=T.getLogger("esri.widgets.Popup"),E={closeButton:!0,featureNavigation:!0};b=function(N){function O(h,K){var B=N.call(this,h,K)||this;B._blurClose=!1;B._blurContainer=!1;B._containerNode=null;B._mainContainerNode=null;B._featureMenuNode=null;B._actionsMenuNode=null;B._focusClose=!1;
B._focusContainer=!1;B._focusDockButton=!1;B._focusFeatureMenuButton=!1;B._focusActionsMenuButton=!1;B._focusFirstFeature=!1;B._focusFirstAction=!1;B._handles=new L;B._pointerOffsetInPx=16;B._spinner=null;B._feature=null;B._featureMenuIntersectionObserverCallback=([J])=>{null!=J&&J.isIntersecting&&B.viewModel.featurePage++};B._featureMenuIntersectionObserver=new IntersectionObserver(B._featureMenuIntersectionObserverCallback);B._displaySpinnerThrottled=Q.throttle(()=>B._displaySpinner(),0);B.actions=
null;B.alignment="auto";B.autoCloseEnabled=null;B.autoOpenEnabled=null;B.defaultPopupTemplateEnabled=null;B.content=null;B.collapsed=!1;B.collapseEnabled=!0;B.dockEnabled=!1;B.featureCount=null;B.featureMenuOpen=!1;B.features=null;B.goToOverride=null;B.headingLevel=2;B.highlightEnabled=null;B.location=null;B.label=void 0;B.maxInlineActions=3;B.messages=null;B.messagesCommon=null;B.promises=null;B.selectedFeature=null;B.selectedFeatureIndex=null;B.spinnerEnabled=!0;B.title=null;B.updateLocationEnabled=
null;B.view=null;B.viewModel=new A;B.visible=null;B.visibleElements={...E};B._addSelectedFeatureIndexHandle();B.own([H.watch(f._assertThisInitialized(B),"viewModel.screenLocation",()=>B._positionContainer()),H.watch(f._assertThisInitialized(B),["viewModel.active","dockEnabled"],()=>B._toggleScreenLocationEnabled()),H.watch(f._assertThisInitialized(B),"viewModel.screenLocation",(J,V)=>{!!J!==!!V&&B.reposition()}),H.watch(f._assertThisInitialized(B),["viewModel.view.padding","viewModel.view.size","viewModel.active",
"viewModel.location","alignment"],()=>B.reposition()),H.watch(f._assertThisInitialized(B),"spinnerEnabled",J=>B._spinnerEnabledChange(J)),H.watch(f._assertThisInitialized(B),"viewModel.view.size",(J,V)=>B._updateDockEnabledForViewSize(J,V)),H.watch(f._assertThisInitialized(B),"viewModel.view",(J,V)=>B._viewChange(J,V)),H.watch(f._assertThisInitialized(B),"viewModel.view.ready",(J,V)=>B._viewReadyChange(J,V)),H.watch(f._assertThisInitialized(B),["viewModel.waitingForResult","viewModel.location"],()=>
{B._hideSpinner();B._displaySpinnerThrottled()}),H.watch(f._assertThisInitialized(B),["selectedFeatureWidget.viewModel.title","selectedFeatureWidget.viewModel.state"],()=>B._setTitleFromFeatureWidget()),H.watch(f._assertThisInitialized(B),["selectedFeatureWidget.viewModel.content","selectedFeatureWidget.viewModel.state"],()=>B._setContentFromFeatureWidget()),H.whenFalse(f._assertThisInitialized(B),"collapsed",()=>{var J,V;"xsmall"===(null==(J=B.viewModel)?void 0:null==(V=J.view)?void 0:V.widthBreakpoint)&&
B.viewModel.active&&B.collapseEnabled&&B.viewModel.centerAtLocation()}),H.on(f._assertThisInitialized(B),"viewModel.allActions","change",()=>B._watchActions()),H.init(f._assertThisInitialized(B),"viewModel.allActions",()=>B._watchActions()),H.watch(f._assertThisInitialized(B),"viewModel.featureViewModels",()=>B._featureMenuViewportScrollTop())]);return B}f._inheritsLoose(O,N);var R=O.prototype;R.destroy=function(){var h,K;this._destroySelectedFeatureWidget();this._destroySpinner();null==(h=this._handles)?
void 0:h.destroy();this._unobserveFeatureMenuObserver();null==(K=this._featureMenuIntersectionObserver)?void 0:K.disconnect();this._handles=null};R.castVisibleElements=function(h){return{...E,...h}};R.blur=function(){const {active:h}=this.viewModel;h||v.warn("Popup can only be blurred when currently active.");this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0;this.scheduleRender()};R.clear=function(){this.viewModel.clear()};R.close=function(){this.visible=!1};R.fetchFeatures=
function(h,K){return this.viewModel.fetchFeatures(h,K)};R.focus=function(){const {active:h}=this.viewModel;h||v.warn("Popup can only be focused when currently active.");this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0;this.scheduleRender()};R.next=function(){return this.viewModel.next()};R.open=function(h){var K,B;this._handles.remove("selected-index");const J={collapsed:h?!!h.collapsed:!1,actionsMenuOpen:h?!!h.actionsMenuOpen:!1,featureMenuOpen:h?!!h.featureMenuOpen:!1};
"xsmall"===(null==(K=this.viewModel)?void 0:null==(B=K.view)?void 0:B.widthBreakpoint)&&(J.collapsed=!0);this.set(J);this.viewModel.open(h);this._addSelectedFeatureIndexHandle()};R.previous=function(){return this.viewModel.previous()};R.reposition=function(){this.renderNow();this._positionContainer();this._setCurrentAlignment()};R.triggerAction=function(h){this.viewModel.triggerAction(h)};R.render=function(){var h,K,B,J;const {actionsMenuOpen:V,dockEnabled:aa,featureMenuVisible:ha,dividedActions:la,
currentAlignment:ra,currentDockPosition:va}=this,{active:wa}=this.viewModel;var {menuActions:ua}=la;ua=wa&&1<ua.length&&V;const ja=null==(h=this.selectedFeature)?void 0:null==(K=h.layer)?void 0:K.title;h=null==(B=this.selectedFeature)?void 0:null==(J=B.layer)?void 0:J.id;return G.tsx("div",{class:this.classes("esri-popup",{["esri-popup--aligned-top-center"]:"top-center"===ra,["esri-popup--aligned-bottom-center"]:"bottom-center"===ra,["esri-popup--aligned-top-left"]:"top-left"===ra,["esri-popup--aligned-bottom-left"]:"bottom-left"===
ra,["esri-popup--aligned-top-right"]:"top-right"===ra,["esri-popup--aligned-bottom-right"]:"bottom-right"===ra,["esri-popup--is-docked"]:wa&&aa,["esri-popup--shadow"]:wa&&!aa,["esri-popup--is-docked-top-left"]:"top-left"===va,["esri-popup--is-docked-top-center"]:"top-center"===va,["esri-popup--is-docked-top-right"]:"top-right"===va,["esri-popup--is-docked-bottom-left"]:"bottom-left"===va,["esri-popup--is-docked-bottom-center"]:"bottom-center"===va,["esri-popup--is-docked-bottom-right"]:"bottom-right"===
va,["esri-popup--feature-menu-open"]:ha,["esri-popup--actions-menu-open"]:ua}),role:"presentation","data-layer-title":ja,"data-layer-id":h,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},wa?[this.renderMainContainer(),this.renderPointer()]:null)};R.renderLoadingIcon=function(){return G.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-loading-indicator","esri-rotating")})};R.renderNavigationLoading=function(){const {messagesCommon:h}=
this;return this.viewModel.pendingPromisesCount?G.tsx("div",{key:r("loading-container"),role:"presentation",class:"esri-popup__loading-container","aria-label":h.loading,title:h.loading},this.renderLoadingIcon()):null};R.renderPreviousIcon=function(){const h=y.isRTL(this.container);return G.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",{["esri-icon-right-triangle-arrow"]:h,["esri-popup__pagination-previous-icon--rtl"]:h,["esri-icon-left-triangle-arrow"]:!h,["esri-popup__pagination-previous-icon"]:!h})})};
R.renderPreviousButton=function(){const {messages:h}=this;return G.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes("esri-popup__button","esri-popup__pagination-previous"),"aria-label":h.previous,title:h.previous},this.renderPreviousIcon())};R.renderNextIcon=function(){const h=y.isRTL(this.container);return G.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",{["esri-icon-left-triangle-arrow"]:h,["esri-popup__pagination-next-icon--rtl"]:h,
["esri-icon-right-triangle-arrow"]:!h,["esri-popup__pagination-next-icon"]:!h})})};R.renderNextButton=function(){const {messages:h}=this;return G.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes("esri-popup__button","esri-popup__pagination-next"),"aria-label":h.next,title:h.next},this.renderNextIcon())};R.renderFeatureMenuButton=function(){const {featureMenuOpen:h,featureMenuId:K,messagesCommon:B}=this,{featureCount:J,selectedFeatureIndex:V}=
this.viewModel;return G.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes("esri-popup__button","esri-popup__feature-menu-button"),"aria-haspopup":"true","aria-controls":K,"aria-expanded":h.toString(),"aria-label":B.menu,title:B.menu},this._getPageText(J,V))};R.renderNavigationButtons=function(){return this.featureNavigationVisible?
[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null};R.renderDockIcon=function(){const {dockEnabled:h}=this,K=this._wouldDockTo();return G.tsx("span",{"aria-hidden":"true",class:this.classes({["esri-icon-minimize"]:h,["esri-popup__icon--dock-icon"]:!h,["esri-icon-dock-right"]:!h&&("top-right"===K||"bottom-right"===K),["esri-icon-dock-left"]:!h&&("top-left"===K||"bottom-left"===K),["esri-icon-maximize"]:!h&&"top-center"===K,["esri-icon-dock-bottom"]:!h&&
"bottom-center"===K},"esri-popup__icon")})};R.renderDockButton=function(){var h,K,B;const {dockEnabled:J,messages:V}=this,aa=null==(h=this.viewModel)?void 0:null==(K=h.view)?void 0:K.widthBreakpoint;h=J?V.undock:V.dock;return"xsmall"!==aa&&null!=(B=this.dockOptions)&&B.buttonEnabled?G.tsx("div",{role:"button","aria-label":h,title:h,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes("esri-popup__button",
"esri-popup__button--dock")},this.renderDockIcon()):null};R.renderTitle=function(){const {title:h}=this.viewModel,{titleId:K,collapsible:B,contentCollapsed:J,messagesCommon:V}=this;var aa={["esri-popup__header-container--button"]:B};const ha=G.tsx(F.Heading,{level:this.headingLevel,class:"esri-popup__header-title",innerHTML:h});aa=B?G.tsx("button",{key:`${h}--collapsible`,id:K,title:J?V.expand:V.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes("esri-popup__header-container",
aa),"aria-expanded":J?"false":"true",onclick:this._toggleCollapsed},ha):G.tsx("div",{key:h,id:K,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes("esri-popup__header-container",aa)},ha);return h?aa:null};R.renderCloseIcon=function(){return G.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-close")})};R.renderCloseButton=function(){const {visibleElements:h,messagesCommon:K}=this;return h.closeButton?G.tsx("div",{role:"button",tabIndex:0,
bind:this,onclick:this._close,onkeydown:this._close,class:"esri-popup__button","aria-label":K.close,title:K.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null};R.renderHeader=function(){return G.tsx("header",{class:"esri-popup__header"},this.renderTitle(),G.tsx("div",{class:"esri-popup__header-buttons"},this.renderDockButton(),this.renderCloseButton()))};R.renderContentContainer=function(){const {contentId:h,hasContent:K,contentCollapsed:B}=
this,{content:J}=this.viewModel;return K&&!B?G.tsx("article",{key:J,enterAnimation:this._createFeatureUpdatedAnimation(),id:h,class:"esri-popup__content"},this.renderContent()):null};R.renderActionsMenuButton=function(){const {actionsMenuId:h,actionsMenuButtonId:K,actionsMenuOpen:B,dividedActions:J,messagesCommon:V}=this,aa=B?V.close:V.open,{menuActions:ha}=J;return ha.length?G.tsx("div",{key:r("actions-menu-button"),class:this.classes("esri-popup__button","esri-popup__actions-menu-button"),role:"button",
id:K,"aria-haspopup":"true","aria-controls":B?h:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":aa,title:aa},G.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"})):null};R.renderMenuActions=function(){const {actionsMenuId:h,actionsMenuButtonId:K,actionsMenuOpen:B,dividedActions:J}=this,{menuActions:V,inlineActions:aa}=J;return V.length&&
B?G.tsx("ul",{id:h,role:"menu","aria-labelledby":K,key:r("actions"),class:"esri-popup__actions",bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},V.toArray().map((ha,la)=>this.renderAction({action:ha,index:la+aa.length,type:"menu-item"}))):null};R.renderInlineActions=function(){const {inlineActions:h}=this.dividedActions;return!!h.length&&h.toArray().map((K,B)=>this.renderAction({action:K,index:B,type:"inline"}))};R.renderInlineActionsContainer=
function(){const {inlineActions:h,menuActions:K}=this.dividedActions,B=!!h.length,J=!!K.length;return B||J?G.tsx("div",{key:"inline-actions-container","data-inline-actions":B.toString(),"data-menu-actions":J.toString(),class:"esri-popup__inline-actions-container"},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null};R.renderNavigation=function(){return this.featureNavigationVisible?G.tsx("section",{key:r("navigation"),class:this.classes("esri-popup__navigation")},
this.renderNavigationButtons()):null};R.renderFooter=function(){const {featureNavigationVisible:h,dividedActions:K}=this,{inlineActions:B,menuActions:J}=K,V=!!B.length,aa={["esri-popup__footer--has-pagination"]:h,["esri-popup__footer--has-actions"]:V,["esri-popup__footer--has-actions-menu"]:!!J.length};return h||V?G.tsx("div",{key:r("feature-buttons"),class:this.classes("esri-popup__footer",aa)},this.renderInlineActionsContainer(),this.renderNavigation()):null};R.renderFeatureMenuContainer=function(){var {messages:h}=
this;const {featureViewModels:K,isLoadingFeature:B}=this.viewModel;h=t.substitute(h.selectedFeatures,{total:K.length});return G.tsx("section",{key:r("menu"),class:"esri-popup__feature-menu"},G.tsx("strong",{class:"esri-popup__feature-menu-header"},h),G.tsx("nav",{bind:this,class:"esri-popup__feature-menu-viewport","data-node-ref":"_featureMenuViewportNode",afterCreate:y.storeNode},this.renderFeatureMenu(),G.tsx("div",{class:"esri-popup__feature-menu-observer",bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),
B?G.tsx("div",{class:"esri-popup__feature-menu-loader"},this.renderLoadingIcon()):null))};R.renderPointer=function(){return this.dockEnabled?null:G.tsx("div",{key:r("pointer"),class:"esri-popup__pointer",role:"presentation"},G.tsx("div",{class:this.classes("esri-popup__pointer-direction","esri-popup--shadow")}))};R.renderMainContainer=function(){const {dockEnabled:h,currentAlignment:K,currentDockPosition:B,titleId:J,contentId:V,collapsible:aa,hasContent:ha,contentCollapsed:la,visibleElements:ra}=
this,{title:va}=this.viewModel,wa="bottom-left"===K||"bottom-center"===K||"bottom-right"===K||"top-left"===B||"top-center"===B||"top-right"===B,ua="top-left"===K||"top-center"===K||"top-right"===K||"bottom-left"===B||"bottom-center"===B||"bottom-right"===B;return G.tsx("div",{class:this.classes("esri-popup__main-container","esri-widget",{["esri-popup--shadow"]:h,["esri-popup--is-collapsible"]:aa,["esri-popup--is-collapsed"]:la}),tabIndex:ra.closeButton?null:-1,role:"dialog","aria-labelledby":va?J:
"","aria-describedby":ha&&!la?V:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},wa?this.renderFooter():null,wa?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),ua?this.renderFooter():null,ua?this.renderFeatureMenuContainer():null)};R.renderContent=function(){var h;const K=null==(h=this.viewModel)?void 0:h.content;return K?"string"===typeof K?G.tsx("div",{key:K,innerHTML:K}):this.renderNodeContent(K):
null};R.renderActionText=function(h){return G.tsx("span",{key:"text",class:"esri-popup__action-text"},h)};R.renderActionIcon=function(h){const K=this._getActionClass(h),B=this._getActionImage(h),J={["esri-icon-loading-indicator"]:h.active,["esri-rotating"]:h.active,["esri-popup__icon"]:!!K,["esri-popup__action-image"]:!h.active&&!!B};K&&(J[K]=!h.active);return G.tsx("span",{key:"icon","aria-hidden":"true",class:this.classes("esri-popup__icon",J),styles:this._getIconStyles(B)})};R.renderAction=function(h){const {action:K,
index:B,type:J}=h;h=this._getActionTitle(K);const V={["esri-popup__action"]:"toggle"!==K.type,["esri-popup__action-toggle"]:"toggle"===K.type,["esri-popup__action-toggle--on"]:"toggle"===K.type&&K.value,["esri-popup__button--disabled"]:K.disabled},aa=[this.renderActionIcon(K),this.renderActionText(h)];h="menu-item"===J?G.tsx("li",{key:K.uid,role:"menuitem",tabIndex:0,title:h,"aria-label":h,class:this.classes("esri-popup__button",V),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-index":B,
onclick:this._triggerAction,onkeydown:this._triggerAction},aa):G.tsx("div",{key:K.uid,role:"button",tabIndex:0,title:h,"aria-label":h,class:this.classes("esri-popup__button",V),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-index":B,onclick:this._triggerAction,onkeydown:this._triggerAction},aa);return K.visible?h:null};R.renderFeatureMenuItem=function(h,K){const {messages:B,messagesCommon:J}=this,{selectedFeatureIndex:V,selectedFeatureViewModel:aa}=this.viewModel;var ha=h===aa;const la=
{["esri-popup__feature-menu-item--selected"]:ha};ha=ha?G.tsx("span",{key:r(`feature-menu-selected-feature-${V}`),title:B.selectedFeature,"aria-label":B.selectedFeature,class:"esri-icon-check-mark"}):null;h=G.tsx("span",{innerHTML:h.title||J.untitled});return G.tsx("li",{role:"menuitem",tabIndex:-1,key:r(`feature-menu-feature-${V}`),class:this.classes(la,"esri-popup__feature-menu-item"),bind:this,"data-feature-index":K,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature},
G.tsx("span",{class:"esri-popup__feature-menu-title"},h,ha))};R.renderFeatureMenu=function(){const {featureMenuId:h}=this,{featureViewModels:K}=this.viewModel;return 1<K.length?G.tsx("ol",{class:"esri-popup__feature-menu-list",id:h,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},K.filter(B=>!!B.graphic).map((B,J)=>this.renderFeatureMenuItem(B,J))):null};R._getActionTitle=function(h){const {messages:K,selectedFeature:B,
messagesCommon:J}=this,{id:V}=h,aa=null==B?void 0:B.attributes;return(h="zoom-to-feature"===V?t.substitute(h.title,{messages:K}):"remove-selected-feature"===V?t.substitute(h.title,{messages:J}):"zoom-to-clustered-features"===V?t.substitute(h.title,{messages:K}):"browse-clustered-features"===V?t.substitute(h.title,{messages:K}):h.title)&&aa?t.substitute(h,aa):h};R._getActionClass=function(h){var {selectedFeature:K}=this;K=null==K?void 0:K.attributes;const {className:B,image:J}=h;return(h=J||B?B:"esri-icon-default-action")&&
K?t.substitute(h,K):h};R._getActionImage=function(h){var {selectedFeature:K}=this;K=null==K?void 0:K.attributes;({image:h}=h);return h&&K?t.substitute(h,K):h};R._createFeatureUpdatedAnimation=function(){return y.cssTransition("enter","esri-popup--feature-updated")};R._getInlineActionCount=function(){const {maxInlineActions:h,featureNavigationVisible:K}=this;if("number"!==typeof h)return null;const B=Math.round(h);return Math.max(K?B-1:B,0)};R._watchActions=function(){const {allActions:h}=this.viewModel;
this.notifyChange("dividedActions");this._handles.remove("actions");h&&h.forEach(K=>{this._handles.add(H.watch(K,"active className disabled id title image visible".split(" "),()=>this.scheduleRender()),"actions")})};R._divideActions=function(){const {allActions:h}=this.viewModel,K=this._getInlineActionCount(),B=null===K,J=0===K;return{inlineActions:B?h.slice(0):J?new z:h.slice(0,K),menuActions:B?new z:J?h.slice(0):h.slice(K)}};R._featureMenuOpenChanged=function(h){h?this._focusFirstFeature=!0:this._focusFeatureMenuButton=
!0};R._actionsMenuOpenChanged=function(h){h?this._focusFirstAction=!0:this._focusActionsMenuButton=!0};R._setTitleFromFeatureWidget=function(){const {selectedFeatureWidget:h,messagesCommon:K}=this;if(h){var B,J;this.viewModel.title="error"===(null==(B=h.viewModel)?void 0:B.state)?K.errorMessage:(null==(J=h.viewModel)?void 0:J.title)||""}};R._setContentFromFeatureWidget=function(){const {selectedFeatureWidget:h}=this;h&&(this.viewModel.content=h)};R._unobserveFeatureMenuObserver=function(){this._featureMenuIntersectionObserverNode&&
this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)};R._featureMenuIntersectionObserverCreated=function(h){this._unobserveFeatureMenuObserver();this._featureMenuIntersectionObserver.observe(h);this._featureMenuIntersectionObserverNode=h};R._handleFeatureMenuKeyup=function(h){"Escape"===w.eventKey(h)&&(h.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())};R._handleActionMenuKeyup=function(h){"Escape"===w.eventKey(h)&&
(h.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())};R._handleFeatureMenuItemKeyup=function(h){const K=w.eventKey(h);var {_featureMenuNode:B}=this;const J=h.currentTarget["data-feature-index"];if(B){B=B.querySelectorAll("li");var V=B.length;"ArrowUp"===K?(h.stopPropagation(),B[(J-1+V)%V].focus()):"ArrowDown"===K?(h.stopPropagation(),B[(J+1+V)%V].focus()):"Home"===K?(h.stopPropagation(),B[0].focus()):"End"===K&&(h.stopPropagation(),B[B.length-1].focus())}};
R._handleActionMenuItemKeyup=function(h){const K=w.eventKey(h);var {_actionsMenuNode:B}=this;const J=h.currentTarget["data-action-index"];if(B){B=B.querySelectorAll("li");var V=B.length;"ArrowUp"===K?(h.stopPropagation(),B[(J-1+V)%V].focus()):"ArrowDown"===K?(h.stopPropagation(),B[(J+1+V)%V].focus()):"Home"===K?(h.stopPropagation(),B[0].focus()):"End"===K&&(h.stopPropagation(),B[B.length-1].focus())}};R._handleMainKeyup=function(h){const K=w.eventKey(h);"ArrowLeft"===K&&(h.stopPropagation(),this.previous());
"ArrowRight"===K&&(h.stopPropagation(),this.next())};R._spinnerEnabledChange=function(h){this._destroySpinner();h&&(h=this.get("viewModel.view"),this._createSpinner(h))};R._hideSpinner=function(){const {_spinner:h}=this;h&&(h.location=null,h.hide())};R._displaySpinner=function(){const {_spinner:h}=this;if(h){var {location:K,waitingForResult:B}=this.viewModel;B?h.show({location:K}):h.hide()}};R._getIconStyles=function(h){return{"background-image":h?`url(${h})`:""}};R._addSelectedFeatureIndexHandle=
function(){const h=H.watch(this,"viewModel.selectedFeatureIndex",(K,B)=>this._selectedFeatureIndexUpdated(K,B));this._handles.add(h,"selected-index")};R._selectedFeatureIndexUpdated=function(h,K){const {featureCount:B}=this;B&&h!==K&&-1!==h&&(this.featureMenuOpen=this.actionsMenuOpen=!1)};R._destroySelectedFeatureWidget=function(){const {_feature:h}=this;h&&(h.viewModel=null,h&&!h.destroyed&&h.destroy());this._feature=null};R._isScreenLocationWithinView=function(h,K){return-1<h.x&&-1<h.y&&h.x<=K.width&&
h.y<=K.height};R._isOutsideView=function(h){const {popupHeight:K,popupWidth:B,screenLocation:J,side:V,view:aa}=h;if(isNaN(B)||isNaN(K)||!aa||!J)return!1;h=aa.padding;return"right"===V&&J.x+B/2>aa.width-h.right||"left"===V&&J.x-B/2<h.left||"top"===V&&J.y-K<h.top||"bottom"===V&&J.y+K>aa.height-h.bottom?!0:!1};R._calculateAutoAlignment=function(h){if("auto"!==h)return h;const {_pointerOffsetInPx:K,_containerNode:B,_mainContainerNode:J,viewModel:V}=this,{screenLocation:aa,view:ha}=V;if(W.isNone(aa)||
!ha||!B)return"top-center";if(!this._isScreenLocationWithinView(aa,ha))return this._get("currentAlignment")||"top-center";var la=(h=J?window.getComputedStyle(J,null):null)?parseInt(h.getPropertyValue("max-height").replace(/[^-\d\.]/g,""),10):0,ra=h?parseInt(h.getPropertyValue("height").replace(/[^-\d\.]/g,""),10):0;const {height:va,width:wa}=B.getBoundingClientRect();h=wa+K;const ua=Math.max(va,la,ra)+K;la=this._isOutsideView({popupHeight:ua,popupWidth:h,screenLocation:aa,side:"right",view:ha});ra=
this._isOutsideView({popupHeight:ua,popupWidth:h,screenLocation:aa,side:"left",view:ha});const ja=this._isOutsideView({popupHeight:ua,popupWidth:h,screenLocation:aa,side:"top",view:ha});h=this._isOutsideView({popupHeight:ua,popupWidth:h,screenLocation:aa,side:"bottom",view:ha});return ra?ja?"bottom-right":"top-right":la?ja?"bottom-left":"top-left":ja?h?"top-center":"bottom-center":"top-center"};R._callCurrentAlignment=function(h){return"function"===typeof h?h.call(this):h};R._getCurrentAlignment=
function(){const {alignment:h,dockEnabled:K}=this;return K||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(h)))};R._setCurrentAlignment=function(){this._set("currentAlignment",this._getCurrentAlignment())};R._setCurrentDockPosition=function(){this._set("currentDockPosition",this._getCurrentDockPosition())};R._calculatePositionResult=function(h){const K=["left","right"];y.isRTL(this.container)&&K.reverse();return h.replace(/leading/gi,
K[0]).replace(/trailing/gi,K[1])};R._callDockPosition=function(h){return"function"===typeof h?h.call(this):h};R._getDockPosition=function(){var h;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(null==(h=this.dockOptions)?void 0:h.position)))};R._getCurrentDockPosition=function(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null};R._wouldDockTo=function(){return this.dockEnabled?null:this._getDockPosition()};R._calculateAutoDockPosition=
function(h){var K;if("auto"!==h)return h;h=null==(K=this.viewModel)?void 0:K.view;K=y.isRTL(this.container)?"top-left":"top-right";if(!h)return K;var B=h.padding||{left:0,right:0,top:0,bottom:0};B=h.width-B.left-B.right;({breakpoints:h}=h);return h&&B<=h.xsmall?"bottom-center":K};R._positionContainer=function(h=this._containerNode){h&&(this._containerNode=h);if(h){var {screenLocation:K}=this.viewModel,{width:B}=h.getBoundingClientRect();if(K=this._calculatePositionStyle(K,B))h.style.top=K.top,h.style.left=
K.left,h.style.bottom=K.bottom,h.style.right=K.right}};R._calculateFullWidth=function(h){const {currentAlignment:K,_pointerOffsetInPx:B}=this;return"top-left"===K||"bottom-left"===K||"top-right"===K||"bottom-right"===K?h+B:h};R._calculateAlignmentPosition=function(h,K,B,J){const {currentAlignment:V,_pointerOffsetInPx:aa}=this;J/=2;const ha=B.height-K;B=B.width-h;const {padding:la}=this.view;if("bottom-center"===V)return{top:K+aa-la.top,left:h-J-la.left};if("top-left"===V)return{bottom:ha+aa-la.bottom,
right:B+aa-la.right};if("bottom-left"===V)return{top:K+aa-la.top,right:B+aa-la.right};if("top-right"===V)return{bottom:ha+aa-la.bottom,left:h+aa-la.left};if("bottom-right"===V)return{top:K+aa-la.top,left:h+aa-la.left};if("top-center"===V)return{bottom:ha+aa-la.bottom,left:h-J-la.left}};R._calculatePositionStyle=function(h,K){const {dockEnabled:B,view:J}=this;if(J){if(B)return{left:"",top:"",right:"",bottom:""};if(!W.isNone(h)&&K&&(K=this._calculateFullWidth(K),h=this._calculateAlignmentPosition(h.x,
h.y,J,K)))return{top:void 0!==h.top?`${h.top}px`:"auto",left:void 0!==h.left?`${h.left}px`:"auto",bottom:void 0!==h.bottom?`${h.bottom}px`:"auto",right:void 0!==h.right?`${h.right}px`:"auto"}}};R._viewChange=function(h,K){h&&K&&(this.close(),this.clear())};R._viewReadyChange=function(h,K){h?(h=this.get("viewModel.view"),this._wireUpView(h)):K&&(this.close(),this.clear())};R._wireUpView=function(h){this._destroySpinner();if(h){var {spinnerEnabled:K}=this;K&&this._createSpinner(h);this._setDockEnabledForViewSize(this.dockOptions)}};
R._dockingThresholdCrossed=function(h,K,B){const [J,V]=h,[aa,ha]=K,{width:la,height:ra}=B;return J<=la&&aa>la||J>la&&aa<=la||V<=ra&&ha>ra||V>ra&&ha<=ra};R._updateDockEnabledForViewSize=function(h,K){if(h&&K){var B=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},J=B.left+B.right,V=B.top+B.bottom;B=[];var aa=[];B[0]=h[0]-J;B[1]=h[1]-V;aa[0]=K[0]-J;aa[1]=K[1]-V;({dockOptions:h}=this);this._dockingThresholdCrossed(B,aa,h.breakpoint)&&this._setDockEnabledForViewSize(h);this._setCurrentDockPosition()}};
R._focusDockButtonNode=function(h){this._focusDockButton&&(this._focusDockButton=!1,h.focus())};R._closeButtonNodeUpdated=function(h){this._focusClose?(this._focusClose=!1,h.focus()):this._blurClose&&(this._blurClose=!1,h.blur())};R._mainContainerNodeUpdated=function(h){this._mainContainerNode=h;this._focusContainer?(this._focusContainer=!1,h.focus()):this._blurContainer&&(this._blurContainer=!1,h.blur())};R._featureMenuNodeUpdated=function(h){(this._featureMenuNode=h)&&this._focusFirstFeature&&(this._focusFirstFeature=
!1,h=h.querySelectorAll("li"),h.length&&h[0].focus())};R._actionsMenuNodeUpdated=function(h){(this._actionsMenuNode=h)&&this._focusFirstAction&&(this._focusFirstAction=!1,h=h.querySelectorAll("li"),h.length&&h[0].focus())};R._focusFeatureMenuButtonNode=function(h){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,h.focus())};R._focusActionsMenuButtonNode=function(h){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,h.focus())};R._featureMenuViewportScrollTop=function(){this._featureMenuViewportNode&&
(this._featureMenuViewportNode.scrollTop=0)};R._toggleScreenLocationEnabled=function(){const {dockEnabled:h,viewModel:K}=this;K&&(K.screenLocationEnabled=K.active&&!h)};R._shouldDockAtCurrentViewSize=function(h){var K,B;h=h.breakpoint;const J=null==(K=this.viewModel)?void 0:null==(B=K.view)?void 0:B.ui;if(!J)return!1;const {width:V,height:aa}=J;if(isNaN(V)||isNaN(aa))return!1;K=h.hasOwnProperty("width")&&V<=h.width;B=h.hasOwnProperty("height")&&aa<=h.height;return K||B};R._setDockEnabledForViewSize=
function(h){h.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(h))};R._getPageText=function(h,K){return this.featureNavigationVisible?t.substitute(this.messages.pageText,{index:K+1,total:h}):null};R._destroySpinner=function(){const {_spinner:h,view:K}=this;h&&(K&&K.ui&&K.ui.remove(this._spinner,"popup-spinner"),h.destroy(),this._spinner=null)};R._createSpinner=function(h){h&&(this._spinner=new C({view:h}),h.ui.add(this._spinner,{key:"popup-spinner",position:"manual"}))};R._toggleCollapsed=
function(){this.collapsed=!this.collapsed};R._close=function(){this.close();this.view&&this.view.focus()};R._toggleDockEnabled=function(){this.dockEnabled=!this.dockEnabled;this._focusDockButton=!0;this.scheduleRender()};R._toggleFeatureMenu=function(){const h=!this.featureMenuOpen;this._featureMenuOpenChanged(h);this.actionsMenuOpen=!1;this.featureMenuOpen=h};R._toggleActionsMenu=function(){const h=!this.actionsMenuOpen;this._actionsMenuOpenChanged(h);this.featureMenuOpen=!1;this.actionsMenuOpen=
h};R._triggerAction=function(h){h=h.currentTarget["data-action-index"];const K=this.viewModel.allActions.getItemAt(h);K&&"toggle"===K.type&&(K.value=!K.value);this.actionsMenuOpen=!1;this.viewModel.triggerAction(h)};R._selectFeature=function(h){h=h.currentTarget["data-feature-index"];isNaN(h)||(this.viewModel.selectedFeatureIndex=h);this.featureMenuOpen=!1;this._focusFeatureMenuButton=!0;this.scheduleRender()};R._next=function(){this.next()};R._previous=function(){this.previous()};f._createClass(O,
[{key:"actionsMenuId",get:function(){return`${this.id}-actions-menu`}},{key:"actionsMenuButtonId",get:function(){return`${this.id}-actions-menu-button`}},{key:"featureMenuId",get:function(){return`${this.id}-feature-menu`}},{key:"titleId",get:function(){return`${this.id}-popup-title`}},{key:"contentId",get:function(){return`${this.id}-popup-content`}},{key:"hasContent",get:function(){var h,K,B,J,V,aa,ha;return!!(this.selectedFeatureWidget?(null==(h=this.selectedFeatureWidget)?0:null==(K=h.viewModel)?
0:K.waitingForContent)||"error"===(null==(B=this.selectedFeatureWidget)?void 0:null==(J=B.viewModel)?void 0:J.state)||(null==(V=this.selectedFeatureWidget)?0:null==(aa=V.viewModel)?0:aa.content):null==(ha=this.viewModel)?0:ha.content)}},{key:"featureNavigationVisible",get:function(){return this.viewModel.active&&1<this.viewModel.featureCount&&this.visibleElements.featureNavigation}},{key:"collapsible",get:function(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}},{key:"featureMenuVisible",
get:function(){return this.featureNavigationVisible&&this.featureMenuOpen}},{key:"contentCollapsed",get:function(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}},{key:"dividedActions",get:function(){return this._divideActions()}},{key:"actionsMenuOpen",get:function(){return this.viewModel.active?this._get("actionsMenuOpen"):!1},set:function(h){this._set("actionsMenuOpen",!!h)}},{key:"currentAlignment",get:function(){return this._getCurrentAlignment()}},{key:"currentDockPosition",
get:function(){return this._getCurrentDockPosition()}},{key:"dockOptions",get:function(){return this._get("dockOptions")||D},set:function(h){var K={...D};const B=this.get("viewModel.view.breakpoints");var J={};B&&(J.width=B.xsmall,J.height=B.xsmall);h={...K,...h};K={...K.breakpoint,...J};({breakpoint:J}=h);!0===J?h.breakpoint=K:"object"===typeof J&&(h.breakpoint={...K,...J});this._set("dockOptions",h);this._setCurrentDockPosition();this.reposition()}},{key:"selectedFeatureWidget",get:function(){const {_feature:h,
visibleElements:K,headingLevel:B}=this,{selectedFeatureViewModel:J}=this.viewModel,V={...K,title:!1};if(!J)return null;h?(h.viewModel=J,h.visibleElements=V):this._feature=new p({headingLevel:B+1,viewModel:J,visibleElements:V});return this._feature}}]);return O}(k.FeatureContentMixin(q));c.__decorate([e.property({readOnly:!0})],b.prototype,"actionsMenuId",null);c.__decorate([e.property({readOnly:!0})],b.prototype,"actionsMenuButtonId",null);c.__decorate([e.property({readOnly:!0})],b.prototype,"featureMenuId",
null);c.__decorate([e.property({readOnly:!0})],b.prototype,"titleId",null);c.__decorate([e.property({readOnly:!0})],b.prototype,"contentId",null);c.__decorate([e.property({readOnly:!0})],b.prototype,"hasContent",null);c.__decorate([e.property({readOnly:!0})],b.prototype,"featureNavigationVisible",null);c.__decorate([e.property({readOnly:!0})],b.prototype,"collapsible",null);c.__decorate([e.property({readOnly:!0})],b.prototype,"featureMenuVisible",null);c.__decorate([e.property({readOnly:!0})],b.prototype,
"contentCollapsed",null);c.__decorate([e.property({readOnly:!0})],b.prototype,"dividedActions",null);c.__decorate([x.aliasOf("viewModel.actions")],b.prototype,"actions",void 0);c.__decorate([e.property()],b.prototype,"actionsMenuOpen",null);c.__decorate([e.property()],b.prototype,"alignment",void 0);c.__decorate([x.aliasOf("viewModel.autoCloseEnabled")],b.prototype,"autoCloseEnabled",void 0);c.__decorate([x.aliasOf("viewModel.autoOpenEnabled")],b.prototype,"autoOpenEnabled",void 0);c.__decorate([x.aliasOf("viewModel.defaultPopupTemplateEnabled")],
b.prototype,"defaultPopupTemplateEnabled",void 0);c.__decorate([x.aliasOf("viewModel.content")],b.prototype,"content",void 0);c.__decorate([e.property()],b.prototype,"collapsed",void 0);c.__decorate([e.property()],b.prototype,"collapseEnabled",void 0);c.__decorate([e.property({readOnly:!0})],b.prototype,"currentAlignment",null);c.__decorate([e.property({readOnly:!0})],b.prototype,"currentDockPosition",null);c.__decorate([e.property()],b.prototype,"dockOptions",null);c.__decorate([e.property()],b.prototype,
"dockEnabled",void 0);c.__decorate([x.aliasOf("viewModel.featureCount")],b.prototype,"featureCount",void 0);c.__decorate([e.property()],b.prototype,"featureMenuOpen",void 0);c.__decorate([x.aliasOf("viewModel.features")],b.prototype,"features",void 0);c.__decorate([x.aliasOf("viewModel.goToOverride")],b.prototype,"goToOverride",void 0);c.__decorate([e.property()],b.prototype,"headingLevel",void 0);c.__decorate([x.aliasOf("viewModel.highlightEnabled")],b.prototype,"highlightEnabled",void 0);c.__decorate([x.aliasOf("viewModel.location")],
b.prototype,"location",void 0);c.__decorate([e.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],b.prototype,"label",void 0);c.__decorate([e.property()],b.prototype,"maxInlineActions",void 0);c.__decorate([e.property(),l.messageBundle("esri/widgets/Popup/t9n/Popup")],b.prototype,"messages",void 0);c.__decorate([e.property(),l.messageBundle("esri/t9n/common")],b.prototype,"messagesCommon",void 0);c.__decorate([x.aliasOf("viewModel.promises")],b.prototype,"promises",void 0);c.__decorate([x.aliasOf("viewModel.selectedFeature")],
b.prototype,"selectedFeature",void 0);c.__decorate([x.aliasOf("viewModel.selectedFeatureIndex")],b.prototype,"selectedFeatureIndex",void 0);c.__decorate([e.property({readOnly:!0})],b.prototype,"selectedFeatureWidget",null);c.__decorate([e.property()],b.prototype,"spinnerEnabled",void 0);c.__decorate([x.aliasOf("viewModel.title")],b.prototype,"title",void 0);c.__decorate([x.aliasOf("viewModel.updateLocationEnabled")],b.prototype,"updateLocationEnabled",void 0);c.__decorate([x.aliasOf("viewModel.view")],
b.prototype,"view",void 0);c.__decorate([e.property({type:A}),M.vmEvent(["triggerAction","trigger-action"])],b.prototype,"viewModel",void 0);c.__decorate([x.aliasOf("viewModel.visible")],b.prototype,"visible",void 0);c.__decorate([e.property()],b.prototype,"visibleElements",void 0);c.__decorate([d.cast("visibleElements")],b.prototype,"castVisibleElements",null);c.__decorate([u.accessibleHandler()],b.prototype,"_close",null);c.__decorate([u.accessibleHandler()],b.prototype,"_toggleDockEnabled",null);
c.__decorate([u.accessibleHandler()],b.prototype,"_toggleFeatureMenu",null);c.__decorate([u.accessibleHandler()],b.prototype,"_toggleActionsMenu",null);c.__decorate([u.accessibleHandler()],b.prototype,"_triggerAction",null);c.__decorate([u.accessibleHandler()],b.prototype,"_selectFeature",null);c.__decorate([u.accessibleHandler()],b.prototype,"_next",null);c.__decorate([u.accessibleHandler()],b.prototype,"_previous",null);return b=c.__decorate([g.subclass("esri.widgets.Popup")],b)})},"esri/core/throttle":function(){define(["exports"],
function(f){function c(b,z,w,L){let T=null,W=1E3;"number"===typeof z?(W=z,L=w):(T=null!=z?z:null,W=w);let Q=0,H;const x=()=>{Q=0;b.apply(L,H)};z=(...n)=>{T&&T.apply(L,n);H=n;W?Q||(Q=setTimeout(x,W)):x()};z.remove=()=>{Q&&(clearTimeout(Q),Q=0)};z.forceUpdate=()=>{Q&&(clearTimeout(Q),x())};z.hasPendingUpdates=()=>!!Q;return z}f["default"]=c;f.throttle=c;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/widgets/Feature":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/has ../core/accessorSupport/decorators/cast ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Feature/FeatureAttachments ./Feature/FeatureContent ./Feature/FeatureFields ./Feature/FeatureMedia ./Feature/FeatureViewModel ./Feature/support/FeatureContentMixin ./support/Heading ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory ../intl/substitute".split(" "),
function(f,c,b,z,w,L,T,W,Q,H,x,n,d,e,g,p,C,q,k,A,F,u,l){const M={title:!0,content:!0,lastEditedInfo:!0};z=function(G){function y(r,D){r=G.call(this,r,D)||this;r._contentWidgets=[];r.graphic=null;r.defaultPopupTemplateEnabled=!1;r.headingLevel=2;r.label=void 0;r.messages=null;r.messagesCommon=null;r.messagesURIUtils=null;r.spatialReference=null;r.title=null;r.visibleElements={...M};r.map=null;r.view=null;r.viewModel=new C;return r}c._inheritsLoose(y,G);var t=y.prototype;t.initialize=function(){this.own(w.init(this,
"viewModel.contentViewModels",()=>this._setupContentWidgets()))};t.loadDependencies=function(){return new Promise(function(r,D){f(["../chunks/notice"],r,D)})};t.destroy=function(){this._destroyContentWidgets()};t.castVisibleElements=function(r){return{...M,...r}};t.render=function(){var {state:r}=this.viewModel;r=u.tsx("div",{class:"esri-feature__size-container",key:"container"},this.renderTitle(),"error"===r?this.renderError():"loading"===r?this.renderLoading():this.renderContentContainer());return u.tsx("div",
{class:this.classes("esri-feature","esri-widget")},r)};t.setActiveMedia=function(r,D){this.viewModel.setActiveMedia(r,D)};t.nextMedia=function(r){this.viewModel.nextMedia(r)};t.previousMedia=function(r){this.viewModel.previousMedia(r)};t.renderError=function(){const {messagesCommon:r,messages:D,visibleElements:v}=this;return u.tsx("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},v.title?u.tsx("div",{key:"error-title",slot:"title"},r.errorMessage):null,u.tsx("div",
{key:"error-message",slot:"message"},D.loadingError))};t.renderLoading=function(){return u.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},u.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")}))};t.renderContentContainer=function(){const {visibleElements:r}=this;return r.content?u.tsx("div",{class:"esri-feature__main-container"},[this.renderContent(),this.renderLastEditInfo()]):null};t.renderTitle=function(){const {visibleElements:r,
title:D}=this;return r.title?u.tsx(k.Heading,{level:this.headingLevel,class:"esri-feature__title",innerHTML:D}):null};t.renderContent=function(){var r=this.viewModel.content;return r?Array.isArray(r)?r.length?u.tsx("div",{key:"content-content-elements"},r.map(this.renderContentElement,this)):null:"string"===typeof r?(r=this._contentWidgets[0],!r||r.destroyed?null:u.tsx("div",{key:"content-content"},r.render())):this.renderNodeContent(r):null};t.renderContentElement=function(r,D){const {visibleElements:v}=
this;if("boolean"!==typeof v.content&&!v.content[r.type])return null;switch(r.type){case "attachments":return this.renderAttachments(D);case "custom":return this.renderCustom(r,D);case "fields":return this.renderFields(D);case "media":return this.renderMedia(D);case "text":return this.renderText(r,D);default:return null}};t.renderAttachments=function(r){const D=this._contentWidgets[r];if(!D||D.destroyed)return null;const {state:v,attachmentInfos:E}=D.viewModel;return"loading"===v||0<E.length?u.tsx("div",
{key:this._buildKey("attachments-element",r),class:this.classes("esri-feature__content-element")},D.render()):null};t.renderCustom=function(r,D){({creator:r}=r);const v=this._contentWidgets[D];return!v||v.destroyed?null:r?u.tsx("div",{key:this._buildKey("custom-element",D),class:"esri-feature__content-element"},v.render()):null};t.renderFields=function(r){const D=this._contentWidgets[r];return!D||D.destroyed?null:u.tsx("div",{key:this._buildKey("fields-element",r),class:"esri-feature__content-element"},
D.render())};t.renderMedia=function(r){const D=this._contentWidgets[r];return!D||D.destroyed?null:u.tsx("div",{key:this._buildKey("media-element",r),class:"esri-feature__content-element"},D.render())};t.renderLastEditInfo=function(){const {visibleElements:r,messages:D}=this;var {lastEditInfo:v}=this.viewModel;if(!v||!r.lastEditedInfo)return null;const {date:E,user:N}=v;v=l.substitute("edit"===v.type?N?D.lastEditedByUser:D.lastEdited:N?D.lastCreatedByUser:D.lastCreated,{date:E,user:N});return u.tsx("div",
{key:"edit-info-element",class:this.classes("esri-feature__last-edited-info","esri-feature__content-element")},v)};t.renderText=function(r,D){const v=this._contentWidgets[D];return!v||v.destroyed?null:r.text?u.tsx("div",{key:this._buildKey("text-element",D),class:this.classes("esri-feature__content-element","esri-feature__text")},v.render()):null};t._buildKey=function(r,...D){const v=this.get("viewModel.graphic.uid")||"0";D=D.join("-");return`${r}__${v}-${D}`};t._destroyContentWidgets=function(){this._contentWidgets.forEach(r=>
{r.viewModel=null;r&&!r.destroyed&&r.destroy()});this._contentWidgets=[]};t._setupContentWidgets=function(){this._destroyContentWidgets();const {headingLevel:r,visibleElements:D}=this;var v=this.get("viewModel.content");const {contentViewModels:E}=this.viewModel;Array.isArray(v)?v.forEach((N,O)=>{"attachments"===N.type&&(this._contentWidgets[O]=new d({displayType:N.displayType,headingLevel:D.title?r+1:r,viewModel:E[O]}));"fields"===N.type&&(this._contentWidgets[O]=new g({viewModel:E[O]}));"media"===
N.type&&(this._contentWidgets[O]=new p({viewModel:E[O]}));"text"===N.type&&(this._contentWidgets[O]=new e({viewModel:E[O]}));"custom"===N.type&&(this._contentWidgets[O]=new e({viewModel:E[O]}))},this):(v=E[0])&&!v.destroyed&&(this._contentWidgets[0]=new e({viewModel:v}));this.scheduleRender()};return y}(q.FeatureContentMixin(n));b.__decorate([L.aliasOf("viewModel.graphic")],z.prototype,"graphic",void 0);b.__decorate([L.aliasOf("viewModel.defaultPopupTemplateEnabled")],z.prototype,"defaultPopupTemplateEnabled",
void 0);b.__decorate([H.property()],z.prototype,"headingLevel",void 0);b.__decorate([H.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],z.prototype,"label",void 0);b.__decorate([H.property(),F.messageBundle("esri/widgets/Feature/t9n/Feature")],z.prototype,"messages",void 0);b.__decorate([H.property(),F.messageBundle("esri/t9n/common")],z.prototype,"messagesCommon",void 0);b.__decorate([H.property(),F.messageBundle("esri/widgets/support/t9n/uriUtils")],z.prototype,"messagesURIUtils",
void 0);b.__decorate([L.aliasOf("viewModel.spatialReference")],z.prototype,"spatialReference",void 0);b.__decorate([L.aliasOf("viewModel.title")],z.prototype,"title",void 0);b.__decorate([H.property()],z.prototype,"visibleElements",void 0);b.__decorate([W.cast("visibleElements")],z.prototype,"castVisibleElements",null);b.__decorate([L.aliasOf("viewModel.map")],z.prototype,"map",void 0);b.__decorate([L.aliasOf("viewModel.view")],z.prototype,"view",void 0);b.__decorate([H.property({type:C})],z.prototype,
"viewModel",void 0);return z=b.__decorate([x.subclass("esri.widgets.Feature")],z)})},"esri/widgets/Feature/FeatureAttachments":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Attachments ../Widget ./FeatureAttachments/FeatureAttachmentsViewModel ./support/FeatureElementInfo ../support/widgetUtils ../support/jsxFactory".split(" "),
function(f,c,b,z,w,L,T,W,Q,H,x,n,d,e,g){w=function(p){function C(k,A){k=p.call(this,k,A)||this;k._featureElementInfo=null;k.attachmentsWidget=new H;k.description=null;k.displayType=null;k.graphic=null;k.headingLevel=2;k.title=null;k.viewModel=new n;return k}f._inheritsLoose(C,p);var q=C.prototype;q.initialize=function(){this._featureElementInfo=new d;b.init(this,["viewModel.description","viewModel.title","headingLevel"],()=>this._setupFeatureElementInfo());b.init(this,"viewModel.graphic",k=>this.attachmentsWidget.graphic=
k)};q.destroy=function(){this.attachmentsWidget.destroy();this._featureElementInfo.destroy()};q.render=function(){var k;const {attachmentsWidget:A}=this;return g.tsx("div",{class:"esri-feature-attachments"},null==(k=this._featureElementInfo)?void 0:k.render(),null==A?void 0:A.render())};q._setupFeatureElementInfo=function(){const {description:k,title:A,headingLevel:F}=this;this._featureElementInfo.set({description:k,title:A,headingLevel:F})};return C}(x);c.__decorate([W.property({readOnly:!0})],w.prototype,
"attachmentsWidget",void 0);c.__decorate([z.aliasOf("viewModel.description")],w.prototype,"description",void 0);c.__decorate([z.aliasOf("attachmentsWidget.displayType")],w.prototype,"displayType",void 0);c.__decorate([z.aliasOf("viewModel.graphic")],w.prototype,"graphic",void 0);c.__decorate([W.property()],w.prototype,"headingLevel",void 0);c.__decorate([z.aliasOf("viewModel.title")],w.prototype,"title",void 0);c.__decorate([W.property({type:n})],w.prototype,"viewModel",void 0);return w=c.__decorate([Q.subclass("esri.widgets.Feature.FeatureAttachments")],
w)})},"esri/widgets/Feature/FeatureAttachments/FeatureAttachmentsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ../../Attachments/AttachmentsViewModel".split(" "),function(f,c,b,z,w,L,T,W){z=function(Q){function H(x){x=Q.call(this,x)||this;x.description=null;x.title=null;
return x}f._inheritsLoose(H,Q);return H}(W);c.__decorate([b.property()],z.prototype,"description",void 0);c.__decorate([b.property()],z.prototype,"title",void 0);return z=c.__decorate([T.subclass("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],z)})},"esri/widgets/Feature/support/FeatureElementInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ../../Widget ../../support/Heading ../../support/widgetUtils ../../support/jsxFactory".split(" "),
function(f,c,b,z,w,L,T,W,Q,H,x){z=function(n){function d(g,p){g=n.call(this,g,p)||this;g.description=null;g.headingLevel=2;g.title=null;return g}f._inheritsLoose(d,n);var e=d.prototype;e.render=function(){return x.tsx("div",{class:"esri-feature-element-info"},this.renderTitle(),this.renderDescription())};e.renderTitle=function(){const {title:g}=this;return g?x.tsx(Q.Heading,{level:this.headingLevel,class:"esri-feature-element-info__title"},g):null};e.renderDescription=function(){const {description:g}=
this;return g?x.tsx("div",{key:"description",class:"esri-feature-element-info__description"},g):null};return d}(W);c.__decorate([b.property()],z.prototype,"description",void 0);c.__decorate([b.property()],z.prototype,"headingLevel",void 0);c.__decorate([b.property()],z.prototype,"title",void 0);return z=c.__decorate([T.subclass("esri.widgets.Feature.support.FeatureElementInfo")],z)})},"esri/widgets/Feature/FeatureContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/aliasOf ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent/FeatureContentViewModel ./support/featureUtils ../support/widget ../support/jsxFactory".split(" "),
function(f,c,b,z,w,L,T,W,Q,H,x,n,d){z=function(e){function g(C,q){C=e.call(this,C,q)||this;C.creator=null;C.graphic=null;C.viewModel=null;C._addTargetToAnchors=k=>{Array.from(k.querySelectorAll("a")).forEach(A=>{x.shouldOpenInNewTab(A.href)&&!A.hasAttribute("target")&&A.setAttribute("target","_blank")})};return C}f._inheritsLoose(g,e);var p=g.prototype;p.renderLoading=function(){return d.tsx("div",{class:"esri-feature-content__loader-container",key:"loader"},d.tsx("div",{class:"esri-feature-content__loader"}))};
p.renderCreated=function(){var C;const q=null==(C=this.viewModel)?void 0:C.created;return q?q instanceof HTMLElement?d.tsx("div",{key:q,bind:q,afterCreate:this._attachToNode}):n.isWidget(q)?d.tsx("div",{key:q},!q.destroyed&&q.render()):d.tsx("div",{key:q,innerHTML:q,afterCreate:this._addTargetToAnchors}):null};p.render=function(){var C;const q=null==(C=this.viewModel)?void 0:C.state;return d.tsx("div",{class:"esri-feature-content"},"loading"===q?this.renderLoading():this.renderCreated())};p._attachToNode=
function(C){C.appendChild(this)};return g}(Q);c.__decorate([b.aliasOf("viewModel.creator")],z.prototype,"creator",void 0);c.__decorate([b.aliasOf("viewModel.graphic")],z.prototype,"graphic",void 0);c.__decorate([T.property({type:H})],z.prototype,"viewModel",void 0);return z=c.__decorate([W.subclass("esri.widgets.Feature.FeatureContent")],z)})},"esri/widgets/Feature/FeatureContent/FeatureContentViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/HandleOwner ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ../support/featureUtils".split(" "),
function(f,c,b,z,w,L,T,W,Q,H,x,n){z=function(d){function e(p){var C=d.call(this,p)||this;C._loadingPromise=null;C.created=null;C.creator=null;C.destroyer=null;C.graphic=null;C.handles.add(L.init(f._assertThisInitialized(C),"creator",q=>{C._destroyContent();C._createContent(q)}));return C}f._inheritsLoose(e,d);var g=e.prototype;g.destroy=function(){this._destroyContent()};g._destroyContent=function(){const {created:p,graphic:C,destroyer:q}=this;p&&(n.graphicCallback(q,{graphic:C}).catch(()=>null),
this._set("created",null))};g._createContent=function(){var p=f._asyncToGenerator(function*(C){var {graphic:q}=this;this._loadingPromise=C=n.graphicCallback(C,{graphic:q}).catch(()=>null);this.notifyChange("state");q=yield C;C===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",q))});return function(C){return p.apply(this,arguments)}}();f._createClass(e,[{key:"state",get:function(){return this._loadingPromise?"loading":"ready"}}]);return e}(w.HandleOwnerMixin(z));
c.__decorate([T.property({readOnly:!0})],z.prototype,"created",void 0);c.__decorate([T.property()],z.prototype,"creator",void 0);c.__decorate([T.property()],z.prototype,"destroyer",void 0);c.__decorate([T.property({type:b})],z.prototype,"graphic",void 0);c.__decorate([T.property({readOnly:!0})],z.prototype,"state",null);return z=c.__decorate([x.subclass("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],z)})},"esri/widgets/Feature/FeatureFields":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureFields/FeatureFieldsViewModel ./support/FeatureElementInfo ../support/uriUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory".split(" "),
function(f,c,b,z,w,L,T,W,Q,H,x,n,d,e,g,p){w=function(C){function q(A,F){A=C.call(this,A,F)||this;A._featureElementInfo=null;A.attributes=null;A.description=null;A.expressionInfos=null;A.fieldInfos=null;A.title=null;A.viewModel=new x;A.messages=null;A.messagesURIUtils=null;return A}f._inheritsLoose(q,C);var k=q.prototype;k.initialize=function(){this._featureElementInfo=new n;b.init(this,["viewModel.description","viewModel.title"],()=>this._setupFeatureElementInfo())};k.destroy=function(){this._featureElementInfo.destroy()};
k.renderFieldInfo=function(A,F){var {attributes:u}=this.viewModel;const l=A.fieldName,M=A.label||l;u=u?null==u[l]?"":u[l]:"";A=!(!A.format||!A.format.dateFormat);u="number"!==typeof u||A?d.autoLink(this.messagesURIUtils,u):this._forceLTR(u);A={["esri-feature-fields__field-data--date"]:A};return p.tsx("tr",{key:`fields-element-info-row-${l}-${F}`},p.tsx("th",{key:`fields-element-info-row-header-${l}-${F}`,class:"esri-feature-fields__field-header",innerHTML:M}),p.tsx("td",{key:`fields-element-info-row-data-${l}-${F}`,
class:this.classes("esri-feature-fields__field-data",A),innerHTML:u}))};k.renderFields=function(){const {formattedFieldInfos:A}=this.viewModel;return null!=A&&A.length?p.tsx("table",{class:"esri-widget__table",summary:this.messages.fieldsSummary},p.tsx("tbody",null,A.map((F,u)=>this.renderFieldInfo(F,u)))):null};k.render=function(){var A;return p.tsx("div",{class:"esri-feature-fields"},null==(A=this._featureElementInfo)?void 0:A.render(),this.renderFields())};k._setupFeatureElementInfo=function(){const {description:A,
title:F}=this;this._featureElementInfo.set({description:A,title:F})};k._forceLTR=function(A){return`&lrm;${A}`};return q}(H);c.__decorate([z.aliasOf("viewModel.attributes")],w.prototype,"attributes",void 0);c.__decorate([z.aliasOf("viewModel.description")],w.prototype,"description",void 0);c.__decorate([z.aliasOf("viewModel.expressionInfos")],w.prototype,"expressionInfos",void 0);c.__decorate([z.aliasOf("viewModel.fieldInfos")],w.prototype,"fieldInfos",void 0);c.__decorate([z.aliasOf("viewModel.title")],
w.prototype,"title",void 0);c.__decorate([W.property({type:x})],w.prototype,"viewModel",void 0);c.__decorate([W.property(),g.messageBundle("esri/widgets/Feature/t9n/Feature")],w.prototype,"messages",void 0);c.__decorate([W.property(),g.messageBundle("esri/widgets/support/t9n/uriUtils")],w.prototype,"messagesURIUtils",void 0);return w=c.__decorate([Q.subclass("esri.widgets.Feature.FeatureFields")],w)})},"esri/widgets/Feature/FeatureFields/FeatureFieldsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ../../../popup/ExpressionInfo ../../../popup/FieldInfo ../support/featureUtils".split(" "),
function(f,c,b,z,w,L,T,W,Q,H,x){b=function(n){function d(e){e=n.call(this,e)||this;e.attributes=null;e.expressionInfos=null;e.description=null;e.fieldInfos=null;e.title=null;return e}f._inheritsLoose(d,n);f._createClass(d,[{key:"formattedFieldInfos",get:function(){const {expressionInfos:e,fieldInfos:g}=this,p=[];null==g?void 0:g.forEach(C=>{if(!C.hasOwnProperty("visible")||C.visible)C=C.clone(),C.label=x.getFieldInfoLabel(C,e),p.push(C)});return p}}]);return d}(b);c.__decorate([z.property()],b.prototype,
"attributes",void 0);c.__decorate([z.property({type:[Q]})],b.prototype,"expressionInfos",void 0);c.__decorate([z.property()],b.prototype,"description",void 0);c.__decorate([z.property({type:[H]})],b.prototype,"fieldInfos",void 0);c.__decorate([z.property({readOnly:!0})],b.prototype,"formattedFieldInfos",null);c.__decorate([z.property()],b.prototype,"title",void 0);return b=c.__decorate([W.subclass("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],b)})},"esri/widgets/support/uriUtils":function(){define(["exports",
"../../core/string"],function(f,c){function b(w){let L=null;z.some(T=>{T.pattern.test(w)&&(L=T);return!!L});return L}const z=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",
appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",
appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];f.autoLink=function(w,L){if("string"!==typeof L||!L)return L;const T=b(L);if(!T)return L;const W=L.match(T.pattern);
w=c.replace(c.replace(T.label,{messages:w,hierPart:W&&W[2]}),{appName:T.appName});return L.replace(T.pattern,`<a${T.target?` target="${T.target}"`:""} href="$1"${"_blank"===T.target?' rel\x3d"noreferrer"':""}>${w}</a>`)};Object.defineProperty(f,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureMedia":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/events ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureMedia/FeatureMediaViewModel ./support/FeatureElementInfo ./support/featureUtils ../support/chartUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory".split(" "),
function(f,c,b,z,w,L,T,W,Q,H,x,n,d,e,g,p,C,q){L=function(k){function A(u,l){u=k.call(this,u,l)||this;u._refreshTimer=null;u._refreshIntervalInfo=null;u._featureElementInfo=null;u.attributes=null;u.activeMediaInfoIndex=null;u.description=null;u.fieldInfoMap=null;u.layer=null;u.mediaInfos=null;u.popupTemplate=null;u.relatedInfos=null;u.title=null;u.viewModel=new n;u.messages=null;return u}f._inheritsLoose(A,k);var F=A.prototype;F.initialize=function(){this._featureElementInfo=new d;this.own(z.init(this,
["viewModel.activeMediaInfo","viewModel.activeMediaInfoIndex"],()=>this._setupMediaRefreshTimer()),z.init(this,["viewModel.description","viewModel.title"],()=>this._setupFeatureElementInfo()))};F.destroy=function(){this._clearMediaRefreshTimer();this._featureElementInfo.destroy()};F.render=function(){var u;return q.tsx("div",{bind:this,class:"esri-feature-media",onkeyup:this._handleMediaKeyup},null==(u=this._featureElementInfo)?void 0:u.render(),this.renderMedia())};F.renderMedia=function(){const {formattedMediaInfoCount:u}=
this.viewModel;return u?q.tsx("div",{key:"media-element-container",class:"esri-feature-media__container"},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null};F.renderImageMediaInfo=function(u){var {_refreshIntervalInfo:l}=this;const {activeMediaInfoIndex:M,formattedMediaInfoCount:G}=this.viewModel,{value:y,refreshInterval:t,altText:r,title:D,type:v}=u,{sourceURL:E,linkURL:N}=y;u=e.shouldOpenInNewTab(N)?"_blank":"_self";const O="_blank"===u?"noreferrer":
"";l=t?l:null;l=q.tsx("img",{alt:r||D,key:`media-${v}-${M}-${G}-${l?l.timestamp:0}`,src:l?l.sourceURL:E});return(u=N?q.tsx("a",{title:D,href:N,rel:O,target:u},l):null)?u:l};F.renderChartMediaInfo=function(u){const {activeMediaInfoIndex:l,formattedMediaInfoCount:M}=this.viewModel;return q.tsx("div",{key:`media-${u.type}-${l}-${M}`,bind:this,class:"esri-feature-media__chart",afterCreate:this._getChartDependencies})};F.renderMediaInfoType=function(){const {activeMediaInfo:u}=this.viewModel;return u?
"image"===u.type?this.renderImageMediaInfo(u):-1!==u.type.indexOf("chart")?this.renderChartMediaInfo(u):null:null};F.renderMediaInfo=function(){var {activeMediaInfo:u}=this.viewModel;if(!u)return null;const l=u.title?q.tsx("div",{key:"media-title",class:"esri-feature-media__item-title",innerHTML:u.title}):null;u=u.caption?q.tsx("div",{key:"media-caption",class:"esri-feature-media__item-caption",innerHTML:u.caption}):null;return q.tsx("div",{key:"media-container",class:"esri-feature-media__item-container"},
q.tsx("div",{key:"media-item-container",class:"esri-feature-media__item"},this.renderMediaInfoType()),l,u)};F.renderMediaPageButton=function(u){if(2>this.viewModel.formattedMediaInfoCount)return null;const l=(u="previous"===u)?this.messages.previous:this.messages.next,M=u?this.classes("esri-feature-media__button","esri-feature-media__previous"):this.classes("esri-feature-media__button","esri-feature-media__next"),G=u?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon","esri-icon-left-triangle-arrow"):
this.classes("esri-feature-media__icon","esri-feature-media__next-icon","esri-icon-right-triangle-arrow"),y=u?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon--rtl","esri-icon-right-triangle-arrow"):this.classes("esri-feature-media__icon","esri-feature-media__next-icon--rtl","esri-icon-left-triangle-arrow");return q.tsx("button",{type:"button",key:u?"media-previous":"media-next",title:l,"aria-label":l,tabIndex:0,class:M,bind:this,onclick:u?this._previous:this._next},q.tsx("span",
{"aria-hidden":"true",class:G}),q.tsx("span",{"aria-hidden":"true",class:y}))};F._setupFeatureElementInfo=function(){const {description:u,title:l}=this;this._featureElementInfo.set({description:u,title:l})};F._next=function(){this.viewModel.next()};F._previous=function(){this.viewModel.previous()};F._getChartDependencies=function(){var u=f._asyncToGenerator(function*(l){const M=yield g.loadChartsModule(),{activeMediaInfo:G}=this.viewModel;this._renderChart({chartDiv:l,mediaInfo:G,chartsModule:M})});
return function(l){return u.apply(this,arguments)}}();F._handleMediaKeyup=function(u){const l=b.eventKey(u);"ArrowLeft"===l&&(u.stopPropagation(),this.viewModel.previous());"ArrowRight"===l&&(u.stopPropagation(),this.viewModel.next())};F._renderChart=function(u){const {chartsModule:l,chartDiv:M,mediaInfo:G}=u,{value:y,type:t}=G,{am4core:r}=l,D=g.getColorSet(r);p.isDarkTheme()&&r.useTheme(l.am4themes_dark);r.useTheme(l.am4themes_animated);r.useTheme(function(v){v instanceof r.ColorSet&&D&&(v.list=
D)});u="pie-chart"===t?this._createPieChart(u):this._createXYChart(u);M.setAttribute("aria-label",G.altText||G.title);u.data=y.series.map(v=>({tooltip:v.tooltip,value:v.value})).filter(v=>"pie-chart"===t?0<v.value:!0)};F._customizeChartTooltip=function(u,l){u.label.wrap=!0;u.label.maxWidth=200;u.autoTextColor=!1;u.getFillFromObject=!1;u.label.fill=l.color("#ffffff");u.background.fill=l.color({r:0,g:0,b:0,a:.7})};F._createPieChart=function(u){const {chartDiv:l,chartsModule:M}=u,{am4core:G,am4charts:y}=
M;u=G.create(l,y.PieChart);u.rtl=p.isRTL(this.container);const t=u.series.push(new y.PieSeries);t.labels.template.disabled=!0;t.ticks.template.disabled=!0;t.dataFields.value="value";t.dataFields.category="tooltip";this._customizeChartTooltip(t.tooltip,G);return u};F._getMinSeriesValue=function(u){let l=0;u.forEach(M=>l=Math.min(M.value,l));return l};F._createColumnChart=function(u,l){const {chartsModule:M,mediaInfo:G}=l;({value:l}=G);const {am4core:y,am4charts:t}=M,r=u.xAxes.push(new t.CategoryAxis);
r.dataFields.category="tooltip";r.renderer.labels.template.disabled=!0;this._customizeChartTooltip(r.tooltip,y);r.tooltip.events.on("sizechanged",()=>{r.tooltip.dy=-r.tooltip.contentHeight});var D=u.yAxes.push(new t.ValueAxis);const v=D.renderer.labels.template;D.renderer.minLabelPosition=.05;D.renderer.maxLabelPosition=.95;D.min=this._getMinSeriesValue(l.series);this._customizeChartTooltip(D.tooltip,y);v.wrap=!0;D=u.series.push(new t.ColumnSeries);D.dataFields.valueY="value";D.dataFields.categoryX=
"tooltip";u.cursor=new t.XYCursor;15<l.series.length&&(u.scrollbarX=new y.Scrollbar)};F._createBarChart=function(u,l){const {chartsModule:M,mediaInfo:G}=l;({value:l}=G);const {am4core:y,am4charts:t}=M,r=u.yAxes.push(new t.CategoryAxis);r.dataFields.category="tooltip";r.renderer.inversed=!0;r.renderer.labels.template.disabled=!0;this._customizeChartTooltip(r.tooltip,y);r.tooltip.events.on("sizechanged",()=>{r.tooltip.dx=r.tooltip.contentWidth});var D=u.xAxes.push(new t.ValueAxis);const v=D.renderer.labels.template;
D.renderer.minLabelPosition=.05;D.renderer.maxLabelPosition=.95;D.min=this._getMinSeriesValue(l.series);this._customizeChartTooltip(D.tooltip,y);v.wrap=!0;D=u.series.push(new t.ColumnSeries);D.dataFields.valueX="value";D.dataFields.categoryY="tooltip";u.cursor=new t.XYCursor;15<l.series.length&&(u.scrollbarY=new y.Scrollbar)};F._createLineChart=function(u,l){const {chartsModule:M,mediaInfo:G}=l;({value:l}=G);const {am4core:y,am4charts:t}=M,r=u.xAxes.push(new t.CategoryAxis);r.dataFields.category=
"tooltip";r.renderer.labels.template.disabled=!0;this._customizeChartTooltip(r.tooltip,y);r.tooltip.events.on("sizechanged",()=>{r.tooltip.dy=-r.tooltip.contentHeight});var D=u.yAxes.push(new t.ValueAxis);const v=D.renderer.labels.template;D.renderer.minLabelPosition=.05;D.renderer.maxLabelPosition=.95;D.min=this._getMinSeriesValue(l.series);this._customizeChartTooltip(D.tooltip,y);v.wrap=!0;D=u.series.push(new t.LineSeries);D.dataFields.categoryX="tooltip";D.dataFields.valueY="value";u.cursor=new t.XYCursor;
15<l.series.length&&(u.scrollbarX=new y.Scrollbar)};F._createXYChart=function(u){const {chartDiv:l,chartsModule:M,mediaInfo:G}=u,{type:y}=G,{am4core:t,am4charts:r}=M,D=t.create(l,r.XYChart);D.rtl=p.isRTL(this.container);"column-chart"===y&&this._createColumnChart(D,u);"bar-chart"===y&&this._createBarChart(D,u);"line-chart"===y&&this._createLineChart(D,u);return D};F._clearMediaRefreshTimer=function(){const {_refreshTimer:u}=this;u&&(clearTimeout(u),this._refreshTimer=null)};F._updateMediaInfoTimestamp=
function(u){const l=Date.now();this._refreshIntervalInfo={timestamp:l,sourceURL:this._getImageSource(u,l)};this.scheduleRender()};F._setupMediaRefreshTimer=function(){this._clearMediaRefreshTimer();const {activeMediaInfo:u}=this.viewModel;u&&"image"===u.type&&u.refreshInterval&&this._setRefreshTimeout(u)};F._setRefreshTimeout=function(u){const {refreshInterval:l,value:M}=u;l&&(u=6E4*l,this._updateMediaInfoTimestamp(M.sourceURL),this._refreshTimer=setInterval(()=>{this._updateMediaInfoTimestamp(M.sourceURL)},
u))};F._getImageSource=function(u,l){const M=-1!==u.indexOf("?")?"\x26":"?",[G,y=""]=u.split("#");return`${G}${M}timestamp=${l}${y?"#":""}${y}`};return A}(x);c.__decorate([w.aliasOf("viewModel.attributes")],L.prototype,"attributes",void 0);c.__decorate([w.aliasOf("viewModel.activeMediaInfoIndex")],L.prototype,"activeMediaInfoIndex",void 0);c.__decorate([w.aliasOf("viewModel.description")],L.prototype,"description",void 0);c.__decorate([w.aliasOf("viewModel.fieldInfoMap")],L.prototype,"fieldInfoMap",
void 0);c.__decorate([w.aliasOf("viewModel.layer")],L.prototype,"layer",void 0);c.__decorate([w.aliasOf("viewModel.mediaInfos")],L.prototype,"mediaInfos",void 0);c.__decorate([w.aliasOf("viewModel.popupTemplate")],L.prototype,"popupTemplate",void 0);c.__decorate([w.aliasOf("viewModel.relatedInfos")],L.prototype,"relatedInfos",void 0);c.__decorate([w.aliasOf("viewModel.title")],L.prototype,"title",void 0);c.__decorate([Q.property({type:n})],L.prototype,"viewModel",void 0);c.__decorate([Q.property(),
C.messageBundle("esri/widgets/Feature/t9n/Feature")],L.prototype,"messages",void 0);return L=c.__decorate([H.subclass("esri.widgets.Feature.FeatureMedia")],L)})},"esri/widgets/Feature/FeatureMedia/FeatureMediaViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ../../../popup/FieldInfo ../../../popup/content/support/ChartMediaInfoValueSeries ../support/featureUtils ../support/relatedFeatureUtils".split(" "),
function(f,c,b,z,w,L,T,W,Q,H,x,n){b=function(d){function e(p){p=d.call(this,p)||this;p.activeMediaInfoIndex=0;p.attributes=null;p.description=null;p.fieldInfoMap=null;p.formattedAttributes=null;p.expressionAttributes=null;p.layer=null;p.mediaInfos=null;p.popupTemplate=null;p.relatedInfos=null;p.title=null;return p}f._inheritsLoose(e,d);var g=e.prototype;g.setActiveMedia=function(p){this._setContentElementMedia(p)};g.next=function(){this._pageContentElementMedia(1)};g.previous=function(){this._pageContentElementMedia(-1)};
g._setContentElementMedia=function(p){const {formattedMediaInfoCount:C}=this;this.activeMediaInfoIndex=(p+C)%C};g._pageContentElementMedia=function(p){const {activeMediaInfoIndex:C}=this;this._setContentElementMedia(C+p)};g._formatMediaInfos=function(){const {attributes:p,mediaInfos:C,formattedAttributes:q,expressionAttributes:k,fieldInfoMap:A,layer:F}=this;return null==C?void 0:C.map(u=>{if(!u)return null;u.title=x.substituteFieldsInLinksAndAttributes({attributes:p,fieldInfoMap:A,globalAttributes:q,
expressionAttributes:k,layer:F,text:u.title});u.caption=x.substituteFieldsInLinksAndAttributes({attributes:p,fieldInfoMap:A,globalAttributes:q,expressionAttributes:k,layer:F,text:u.caption});u.altText=x.substituteFieldsInLinksAndAttributes({attributes:p,fieldInfoMap:A,globalAttributes:q,expressionAttributes:k,layer:F,text:u.altText});if("image"===u.type){var {value:l}=u;this._setImageValue({value:l,formattedAttributes:q,layer:F});return u.value.sourceURL?u:void 0}return"pie-chart"===u.type||"line-chart"===
u.type||"column-chart"===u.type||"bar-chart"===u.type?({value:l}=u,this._setChartValue({value:l,chartType:u.type,attributes:p,formattedAttributes:q,layer:F}),u):null}).filter(Boolean)};g._setImageValue=function(p){const {fieldInfoMap:C}=this,{value:q,formattedAttributes:k,layer:A}=p,{linkURL:F,sourceURL:u}=q;u&&(p=x.fixTokens(u,A),q.sourceURL=x.substituteAttributes({formattedAttributes:k,template:p,fieldInfoMap:C}));F&&(p=x.fixTokens(F,A),q.linkURL=x.substituteAttributes({formattedAttributes:k,template:p,
fieldInfoMap:C}))};g._setChartValue=function(p){const {value:C,attributes:q,formattedAttributes:k,chartType:A,layer:F}=p,{popupTemplate:u,relatedInfos:l}=this,{fields:M,normalizeField:G}=C;C.fields=x.getFixedFieldNames(M,F);G&&(C.normalizeField=x.getFixedFieldName(G,F));if(M.some(t=>!!(null!=k[t]||x.isRelatedField(t)&&l.size))){var y=null==u?void 0:u.fieldInfos;M.forEach(t=>{x.isRelatedField(t)?C.series=[...C.series,...this._getRelatedChartInfos({fieldInfos:y,fieldName:t,formattedAttributes:k,chartType:A,
value:C})]:(t=this._getChartOption({value:C,attributes:q,chartType:A,formattedAttributes:k,fieldName:t,fieldInfos:y}),C.series.push(t))})}};g._getRelatedChartInfos=function(p){var C;const {fieldInfos:q,fieldName:k,formattedAttributes:A,chartType:F,value:u}=p,l=[];p=n.getRelatedFieldInfo(k);const {layerId:M,fieldName:G}=p;p=null==(C=this.relatedInfos)?void 0:C.get(M.toString());if(!p)return l;const {relatedFeatures:y,relation:t}=p;if(!t||!y)return l;({cardinality:C}=t);y.forEach(r=>{const {attributes:D}=
r;D&&Object.keys(D).forEach(v=>{v===G&&l.push(this._getChartOption({value:u,attributes:D,formattedAttributes:A,fieldName:k,chartType:F,relatedFieldName:v,fieldInfos:q}))})});return"one-to-many"===C||"many-to-many"===C?l:[l[0]]};g._getTooltip=function({label:p,value:C,chartType:q}){return"pie-chart"===q?p:`${p}: ${C}`};g._getChartOption=function(p){const {value:C,attributes:q,formattedAttributes:k,fieldName:A,relatedFieldName:F,fieldInfos:u,chartType:l}=p;var {layer:M}=this;const {normalizeField:G,
tooltipField:y}=C;var t=G?x.isRelatedField(G)?q[n.getRelatedFieldInfo(G).fieldName]:q[G]:null;p=F&&void 0!==q[F]?q[F]:void 0!==q[A]?q[A]:k[A];const r=void 0===p?null:p&&t?p/t:p;p=new H({value:r});if(x.isRelatedField(A)){var D=n.getRelatedFieldInfo(A);var v=n.getRelatedFieldInfo(y);v=v?v.fieldName:null;M=x.formatValueToFieldInfo(r,{fieldInfos:u,fieldName:F,layer:M,preventPlacesFormatting:!!t});D=D?D.label||D.fieldName:F;p.tooltip=this._getTooltip({label:v&&void 0!==q[v]?q[v]:D,value:M,chartType:l});
return p}t=x.getFieldInfo(u,A);M=x.getFixedFieldName(A,M);t=y&&void 0!==k[y]?k[y]:x.getFieldInfoLabel(t||new Q({fieldName:M}),null==(D=this.popupTemplate)?void 0:D.expressionInfos);p.tooltip=this._getTooltip({label:t,value:k[M],chartType:l});return p};f._createClass(e,[{key:"activeMediaInfo",get:function(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}},{key:"formattedMediaInfos",get:function(){return this._formatMediaInfos()||[]}},{key:"formattedMediaInfoCount",get:function(){return this.formattedMediaInfos.length}}]);
return e}(b);c.__decorate([z.property()],b.prototype,"activeMediaInfoIndex",void 0);c.__decorate([z.property({readOnly:!0})],b.prototype,"activeMediaInfo",null);c.__decorate([z.property()],b.prototype,"attributes",void 0);c.__decorate([z.property()],b.prototype,"description",void 0);c.__decorate([z.property()],b.prototype,"fieldInfoMap",void 0);c.__decorate([z.property()],b.prototype,"formattedAttributes",void 0);c.__decorate([z.property()],b.prototype,"expressionAttributes",void 0);c.__decorate([z.property({readOnly:!0})],
b.prototype,"formattedMediaInfos",null);c.__decorate([z.property()],b.prototype,"layer",void 0);c.__decorate([z.property({readOnly:!0})],b.prototype,"formattedMediaInfoCount",null);c.__decorate([z.property()],b.prototype,"mediaInfos",void 0);c.__decorate([z.property()],b.prototype,"popupTemplate",void 0);c.__decorate([z.property()],b.prototype,"relatedInfos",void 0);c.__decorate([z.property()],b.prototype,"title",void 0);return b=c.__decorate([W.subclass("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],
b)})},"esri/widgets/Feature/support/relatedFeatureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../request ../../../core/Error ../../../core/Logger ../../../core/promiseUtils ../../../layers/support/fieldUtils ../../../rest/support/Query ../../../rest/support/RelationshipQuery ../../../rest/support/StatisticDefinition ../../../tasks/QueryTask ./featureUtils".split(" "),function(f,c,b,z,w,L,T,W,Q,H,x,n){function d(l,M){if(!M.relationships)return null;let G=null;
({relationships:M}=M);M.some(y=>y.id===parseInt(l,10)?(G=y,!0):!1);return G}function e({originRelationship:l,relationships:M,layerId:G}){let y;M&&M.some(t=>{`${t.relatedTableId}`===G&&t.id===l.id&&(y=t);return!!y});return y}function g(l,M){M=M.toLowerCase();for(const G in l)if(G.toLowerCase()===M)return l[G];return null}function p(l,M,G,y){const t=new Q;t.outFields=["*"];t.relationshipId="number"===typeof M.id?M.id:parseInt(M.id,10);t.objectIds=[l.attributes[G.objectIdField]];return G.queryRelatedFeatures(t,
y)}function C(l,M,G){let y=0;const t=[];for(;y<M.length;)t.push(`${l} IN (${M.slice(y,G+y)})`),y+=G;return t.join(" OR ")}function q(l,M,G,y){return k.apply(this,arguments)}function k(){k=c._asyncToGenerator(function*(l,M,G,y){var t=G.layerId.toString();const {layerInfo:r,queryTask:D,relation:v,relatedFields:E,outStatistics:N}=M;t=e({originRelationship:v,relationships:r.relationships,layerId:t});if(t.relationshipTableId&&t.keyFieldInRelationshipTable){G=(yield p(l,t,G,y))[l.attributes[G.objectIdField]];
if(!G)return null;const O=G.features.map(R=>R.attributes[r.objectIdField]);if(0<(null==N?void 0:N.length)&&r.supportsStatistics)return M=new W,M.where=C(r.objectIdField,O,1E3),M.outFields=E,M.outStatistics=N,M={features:Promise.resolve(G),statsFeatures:D.execute(M)},L.eachAlways(M)}return(t=null==t?void 0:t.keyField)?(G=T.isNumericField(A(r.fields,t)),l=g(l.attributes,v.keyField),t=G?`${t}=${l}`:`${t}='${l}'`,l=D.execute(new W({where:t,outFields:M.relatedFields}),y),M=M.outStatistics&&0<M.outStatistics.length&&
r.supportsStatistics?D.execute(new W({where:t,outFields:M.relatedFields,outStatistics:M.outStatistics}),y):null,y={features:l},M&&(y.statsFeatures=M),L.eachAlways(y)):null});return k.apply(this,arguments)}function A(l,M){if(null!=l){M=M.toLowerCase();for(const G of l)if(G&&G.name.toLowerCase()===M)return G}return null}const F=w.getLogger("esri.widgets.Feature.support.relatedFeatureUtils"),u=new Map;f.createRelatedInfo=function(l,M){if(l=d(l,M)){var G=`${M.url}/${l.relatedTableId}`;M=new x({url:G,
sourceSpatialReference:M.spatialReference});return{url:G,queryTask:M,relation:l,relatedFields:[],outStatistics:[]}}};f.getDestinationRelation=e;f.getRelatedFieldInfo=function(l){if(!n.isRelatedField(l))return null;const [M,G]=l.split("/").slice(1);return{layerId:M,fieldName:G}};f.queryLayerInfos=function({relatedInfos:l,layer:M},G){const y={};l.forEach((t,r)=>{({relation:t}=t);if(!t)throw r=new z("relation-required","A relation is required on a layer to retrieve related records."),F.error(r),r;({relatedTableId:t}=
t);if("number"!==typeof t)throw r=new z("A related table ID is required on a layer to retrieve related records."),F.error(r),r;t=`${M.url}/${t}`;const D=u.get(t),v=D?D:b(t,{query:{f:"json"},signal:G&&G.signal});D||u.set(t,v);y[r]=v});return L.eachAlways(y)};f.queryRelatedFeatures=function({graphic:l,relatedInfos:M,layer:G},y){const t={};M.forEach((r,D)=>{r.layerInfo&&(t[D]=q(l,r,G,y))});return L.eachAlways(t)};f.setRelatedFeatures=function(l,M){if(M&&l){var {features:G,statsFeatures:y}=l;l=G&&G.value;
M.relatedFeatures=l?l.features:[];l=y&&y.value;M.relatedStatsFeatures=l?l.features:[]}};f.updateRelatedInfo=function({relatedInfo:l,fieldName:M,fieldInfo:G}){l.relatedFields.push(M);G.statisticType&&(M=new H({statisticType:G.statisticType,onStatisticField:M,outStatisticFieldName:M}),l.outStatistics.push(M))};Object.defineProperty(f,"__esModule",{value:!0})})},"esri/widgets/support/chartUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../intl ../../core/has ../../intl/locale".split(" "),
function(f,c,b,z,w,L){function T(d){if(!d)return"en-us";if(H.has(d.toLowerCase()))return d.toLowerCase();{d=d.split("-")[0].toLowerCase();let g=null;for(e of H.keys())if(e.startsWith(d)){g=e;break}var e=g}return e||"en-us"}function W(){W=b._asyncToGenerator(function*(d=L.getLocale()){d=T(d);if(x&&d===n)return x;x=(new Promise(function(e,g){f(["../../chunks/index"],e,g)})).then(function(e){return e.index});n=d;try{const [e,g]=yield Promise.all([x,H.get(n)()]);n===d&&(e.am4core.options.defaultLocale=
g.default);e.am4core.options.suppressWarnings=!0;e.am4core.options.autoDispose=!0}catch{return n=x=null}return x});return W.apply(this,arguments)}z="#ffffff #858585 #ffbebe #ffebbe #ffebaf #ffffbe #e9ffbe #d3ffbe #beffe8 #bee8ff #bed2ff #e8beff #ffbee8 #ebebeb #707070 #ff7f7f #ffa77f #ffd37f #ffff73 #d1ff73 #a3ff73 #73ffdf #73dfff #73b2ff #df73ff #ff73df #d6d6d6 #5c5c5c #ff0000 #ff5500 #ffaa00 #ffff00 #aaff00 #55ff00 #00ffc5 #00c5ff #0070ff #c500ff #ff00c5 #c2c2c2 #474747 #e60000 #e64c00 #e69800 #e6e600 #98e600 #4ce600 #00e6a9 #00a9e6 #005ce6 #a900e6 #e600a9 #adadad #242424 #a80000 #a83800 #a87000 #a8a800 #70a800 #38a800 #00a884 #0084a8 #004da8 #8400a8 #a80084 #999999 #1a1a1a #730000 #732600 #734c00 #737300 #4c7300 #267300 #00734c #004c73 #002673 #4c0073 #73004".split(" ");
var Q=[{name:"default",colors:[].concat(z.slice(30,39),z.slice(28,30).reverse())},{name:"cat-dark",colors:"#ed5151 #149ece #a7c636 #9e559c #fc921f #ffde3e #f789d8 #b7814a #3caf99 #6b6bd6 #b54779 #7f7f7f".split(" ")},{name:"tropical-bliss",colors:"#fce138 #ff9399 #fcd27e #f1983c #a553b7 #b1a9d0 #6ecffc #4c81cd #fc6f84 #fc3e5a #6af689 #48885c".split(" ")},{name:"desert-blooms",colors:"#102432 #144d59 #ffc730 #ed9310 #a64f1b #661510 #d9351a #b31515 #4a0932 #8c213f #18382e #2c6954".split(" ")},{name:"under-the-sea",
colors:"#bf9727 #607100 #00734c #704489 #01acca #024e76 #f09100 #ea311f #c6004b #7570b3 #666666 #333333".split(" ")},{name:"vibrant-rainbow",colors:"#fffb00 #f5cb11 #9fd40c #46e39c #32b8a6 #7ff2fa #ac08cc #dd33ff #eb7200 #e8a784 #bf2e2e #6c7000".split(" ")},{name:"ocean-bay",colors:"#191921 #11495c #78b1c2 #454f4b #8f8f82 #9be0c0 #87b051 #f7ec88 #ebdcc1 #dbb658 #c43541 #75351e".split(" ")},{name:"prairie-summer",colors:"#332424 #751555 #d47013 #d68989 #211173 #82aad6 #7bfaeb #6ec9a8 #6b6408 #eada40 #ccc54a #1fc235".split(" ")},
{name:"pastel-chalk",colors:"#fffd99 #f5e6a4 #c1d48c #b8e3d0 #a0b8b5 #cbf7fa #d791f2 #dfc1eb #f2b983 #e8c4b2 #bf8e8e #94995c".split(" ")},{name:"seq-yellow-orange-red-bright",colors:"#910000 #b1260b #c0370f #e05919 #ef6a1d #ff7b22 #ffa143 #ffb454 #ffda74 #ffed85".split(" ")},{name:"seq-reds-bright",colors:"#57453b #7b4238 #9f4036 #c23d33 #d7483c #ec5244 #f3696c #f9816c #ffc4ae #fff0dc".split(" ")},{name:"seq-purples-bright",colors:"#4e465c #5a4a78 #695291 #775baa #8663c3 #946bdc #aa89e8 #c1a6f3 #d7c4ff #e6e1ff".split(" ")},
{name:"seq-blues-bright",colors:"#404d54 #435c6c #48799d #4b88b6 #4d96ce #50a5e7 #74bbed #98d0f3 #bce6f9 #e6faff".split(" ")},{name:"seq-greens-bright",colors:"#39544c #386757 #368165 #359b73 #33b581 #4bc392 #64d2a2 #7ce0b3 #cbf6d9 #f4ffea".split(" ")},{name:"seq-browns-bright",colors:"#524834 #715b38 #8f6e3c #ae8140 #cc9444 #eba748 #eeb664 #f0c47f #f9e0b7 #fff8eb".split(" ")}];const H=new Map([["ar",()=>(new Promise(function(d,e){f(["../../chunks/ar2"],d,e)})).then(function(d){return d.ar})],["bs-ba",
()=>(new Promise(function(d,e){f(["../../chunks/bs_BA"],d,e)})).then(function(d){return d.bs_BA})],["ca-es",()=>(new Promise(function(d,e){f(["../../chunks/ca_ES"],d,e)})).then(function(d){return d.ca_ES})],["cs-cz",()=>(new Promise(function(d,e){f(["../../chunks/cs_CZ"],d,e)})).then(function(d){return d.cs_CZ})],["da-dk",()=>(new Promise(function(d,e){f(["../../chunks/da_DK"],d,e)})).then(function(d){return d.da_DK})],["de-de",()=>(new Promise(function(d,e){f(["../../chunks/de_DE"],d,e)})).then(function(d){return d.de_DE})],
["de-ch",()=>(new Promise(function(d,e){f(["../../chunks/de_CH"],d,e)})).then(function(d){return d.de_CH})],["el-gr",()=>(new Promise(function(d,e){f(["../../chunks/el_GR"],d,e)})).then(function(d){return d.el_GR})],["en-us",()=>(new Promise(function(d,e){f(["../../chunks/en_US"],d,e)})).then(function(d){return d.en_US})],["en-ca",()=>(new Promise(function(d,e){f(["../../chunks/en_CA"],d,e)})).then(function(d){return d.en_CA})],["es-es",()=>(new Promise(function(d,e){f(["../../chunks/es_ES"],d,e)})).then(function(d){return d.es_ES})],
["et-ee",()=>(new Promise(function(d,e){f(["../../chunks/et_EE"],d,e)})).then(function(d){return d.et_EE})],["fi-fi",()=>(new Promise(function(d,e){f(["../../chunks/fi_FI"],d,e)})).then(function(d){return d.fi_FI})],["fr-fr",()=>(new Promise(function(d,e){f(["../../chunks/fr_FR"],d,e)})).then(function(d){return d.fr_FR})],["he-il",()=>(new Promise(function(d,e){f(["../../chunks/he_IL"],d,e)})).then(function(d){return d.he_IL})],["hr-hr",()=>(new Promise(function(d,e){f(["../../chunks/hr_HR"],d,e)})).then(function(d){return d.hr_HR})],
["hu-hu",()=>(new Promise(function(d,e){f(["../../chunks/hu_HU"],d,e)})).then(function(d){return d.hu_HU})],["id-id",()=>(new Promise(function(d,e){f(["../../chunks/id_ID"],d,e)})).then(function(d){return d.id_ID})],["it-it",()=>(new Promise(function(d,e){f(["../../chunks/it_IT"],d,e)})).then(function(d){return d.it_IT})],["ja-jp",()=>(new Promise(function(d,e){f(["../../chunks/ja_JP"],d,e)})).then(function(d){return d.ja_JP})],["ko-kr",()=>(new Promise(function(d,e){f(["../../chunks/ko_KR"],d,e)})).then(function(d){return d.ko_KR})],
["lt-lt",()=>(new Promise(function(d,e){f(["../../chunks/lt_LT"],d,e)})).then(function(d){return d.lt_LT})],["lv-lv",()=>(new Promise(function(d,e){f(["../../chunks/lv_LV"],d,e)})).then(function(d){return d.lv_LV})],["nb-no",()=>(new Promise(function(d,e){f(["../../chunks/nb_NO"],d,e)})).then(function(d){return d.nb_NO})],["nl-nl",()=>(new Promise(function(d,e){f(["../../chunks/nl_NL"],d,e)})).then(function(d){return d.nl_NL})],["pl-pl",()=>(new Promise(function(d,e){f(["../../chunks/pl_PL"],d,e)})).then(function(d){return d.pl_PL})],
["pt-br",()=>(new Promise(function(d,e){f(["../../chunks/pt_BR"],d,e)})).then(function(d){return d.pt_BR})],["pt-pt",()=>(new Promise(function(d,e){f(["../../chunks/pt_PT"],d,e)})).then(function(d){return d.pt_PT})],["ro-ro",()=>(new Promise(function(d,e){f(["../../chunks/ro_RO"],d,e)})).then(function(d){return d.ro_RO})],["ru-ru",()=>(new Promise(function(d,e){f(["../../chunks/ru_RU"],d,e)})).then(function(d){return d.ru_RU})],["sk-sk",()=>(new Promise(function(d,e){f(["../../chunks/sk_SK"],d,e)})).then(function(d){return d.sk_SK})],
["sl-sl",()=>(new Promise(function(d,e){f(["../../chunks/sl_SL"],d,e)})).then(function(d){return d.sl_SL})],["sr-rs",()=>(new Promise(function(d,e){f(["../../chunks/sr_RS"],d,e)})).then(function(d){return d.sr_RS})],["sv-se",()=>(new Promise(function(d,e){f(["../../chunks/sv_SE"],d,e)})).then(function(d){return d.sv_SE})],["th-th",()=>(new Promise(function(d,e){f(["../../chunks/th_TH"],d,e)})).then(function(d){return d.th_TH})],["tr-tr",()=>(new Promise(function(d,e){f(["../../chunks/tr_TR"],d,e)})).then(function(d){return d.tr_TR})],
["uk-ua",()=>(new Promise(function(d,e){f(["../../chunks/uk_UA"],d,e)})).then(function(d){return d.uk_UA})],["vi-vn",()=>(new Promise(function(d,e){f(["../../chunks/vi_VN"],d,e)})).then(function(d){return d.vi_VN})],["zh-cn",()=>(new Promise(function(d,e){f(["../../chunks/zh_Hans"],d,e)})).then(function(d){return d.zh_Hans})],["zh-hk",()=>(new Promise(function(d,e){f(["../../chunks/zh_Hant"],d,e)})).then(function(d){return d.zh_Hant})],["zh-tw",()=>(new Promise(function(d,e){f(["../../chunks/zh_Hant"],
d,e)})).then(function(d){return d.zh_Hant})]]);let x,n;c.getChartLocale=T;c.getColorSet=function(d,e="default"){const g=Q.find(p=>p.name===e);return g?g.colors.map(p=>d.color(p)):null};c.loadChartsModule=function(){return W.apply(this,arguments)};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../arcade/featureset/support/FeatureSetQueryInterceptor ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/throttle ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../popup/content/TextContent ./FeatureAttachments/FeatureAttachmentsViewModel ./FeatureContent/FeatureContentViewModel ./FeatureFields/FeatureFieldsViewModel ./FeatureMedia/FeatureMediaViewModel ./support/arcadeFeatureUtils ./support/featureUtils ./support/relatedFeatureUtils".split(" "),
function(f,c,b,z,w,L,T,W,Q,H,x,n,d,e,g,p,C,q,k,A,F,u,l){var M;const G=T.getLogger("esri.widgets.FeatureViewModel"),y={attachmentsContent:!0,customContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0};w=M=function(t){function r(v){var E=t.call(this,v)||this;E._handles=new L;E._error=null;E._featureAbortController=null;E.graphicChangedThrottled=H.throttle(E.graphicChanged,1,f._assertThisInitialized(E));E._expressionAttributes=null;E.abilities={...y};E.content=null;E.contentViewModels=[];E.defaultPopupTemplateEnabled=
!1;E.formattedAttributes=null;E.lastEditInfo=null;E.relatedInfos=new Map;E.title="";E.view=null;E._isAllowedContentType=N=>{const {abilities:O}=f._assertThisInitialized(E);return"attachments"===N.type&&O.attachmentsContent||"custom"===N.type&&O.customContent||"fields"===N.type&&O.fieldsContent||"media"===N.type&&O.mediaContent||"text"===N.type&&O.textContent};E._handles.add(x.init(f._assertThisInitialized(E),["graphic","_effectivePopupTemplate","abilities"],()=>E.graphicChangedThrottled()));return E}
f._inheritsLoose(r,t);var D=r.prototype;D.destroy=function(){this._clear();this._cancelFeatureQuery();this._error=null;this._handles.destroy();this.graphic=this._handles=null;this._destroyContentViewModels();this.relatedInfos.clear()};D.castAbilities=function(v){return{...y,...v}};D.setActiveMedia=function(v,E){v=this.contentViewModels[v];v instanceof A&&v.setActiveMedia(E)};D.nextMedia=function(v){v=this.contentViewModels[v];v instanceof A&&v.next()};D.previousMedia=function(v){v=this.contentViewModels[v];
v instanceof A&&v.previous()};D._clear=function(){this._set("title","");this._set("content",null);this._set("formattedAttributes",null)};D.graphicChanged=function(){var v=f._asyncToGenerator(function*(){this._cancelFeatureQuery();this._error=null;this._clear();const {graphic:E}=this;if(E){var N=Q.createAbortController();this._featureAbortController=N;try{yield this._queryFeature({signal:N.signal})}catch(O){Q.isAbortError(O)||(this._error=O,G.error("error","The popupTemplate could not be displayed for this feature.",
{error:O,graphic:E,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===N&&(this._featureAbortController=null)}});return function(){return v.apply(this,arguments)}}();D._cancelFeatureQuery=function(){const {_featureAbortController:v}=this;v&&v.abort();this._featureAbortController=null};D._compileContent=function(v){this._destroyContentViewModels();if(this.graphic)return Array.isArray(v)?v.filter(this._isAllowedContentType).map((E,N)=>{if("attachments"===E.type)return this._compileAttachments(E,
N);if("custom"===E.type)return this._compileCustom(E,N);if("fields"===E.type)return this._compileFields(E,N);if("media"===E.type)return this._compileMedia(E,N);if("text"===E.type)return this._compileText(E,N)}):"string"===typeof v?this._compileText(new p({text:v}),0).text:v};D._destroyContentViewModels=function(){this.contentViewModels.forEach(v=>v&&!v.destroyed&&v.destroy());this._set("contentViewModels",[])};D._compileAttachments=function(v,E){const {graphic:N}=this,{description:O,title:R}=v;this.contentViewModels[E]=
new C({graphic:N,...this._compileTitleAndDesc({title:R,description:O})});return v};D._compileCustom=function(v,E){const {graphic:N}=this,{creator:O,destroyer:R}=v;this.contentViewModels[E]=new q({graphic:N,creator:O,destroyer:R});return v};D._compileTitleAndDesc=function({title:v,description:E}){const {_fieldInfoMap:N,_sourceLayer:O,graphic:R,formattedAttributes:h,_expressionAttributes:K}=this,{attributes:B}=R,J=h.global;return{title:u.substituteFieldsInLinksAndAttributes({attributes:B,fieldInfoMap:N,
globalAttributes:J,expressionAttributes:K,layer:O,text:v}),description:u.substituteFieldsInLinksAndAttributes({attributes:B,fieldInfoMap:N,globalAttributes:J,expressionAttributes:K,layer:O,text:E})}};D._compileFields=function(v,E){const {_effectivePopupTemplate:N,formattedAttributes:O}=this,R=v.clone();v=(null==v?void 0:v.fieldInfos)||(null==N?void 0:N.fieldInfos);const h=null==N?void 0:N.expressionInfos,K={...O.global,...O.content[E]},{description:B,title:J}=R;v=new k({attributes:K,expressionInfos:h,
fieldInfos:v,...this._compileTitleAndDesc({title:J,description:B})});this.contentViewModels[E]=v;R.fieldInfos=v.formattedFieldInfos.slice(0);return R};D._compileMedia=function(v,E){const {graphic:N,_fieldInfoMap:O,_effectivePopupTemplate:R,relatedInfos:h,_sourceLayer:K,_expressionAttributes:B}=this;var {attributes:J}=N;const V=this.formattedAttributes.global;v=v.clone();const {description:aa,mediaInfos:ha,title:la}=v;J=new A({activeMediaInfoIndex:v.activeMediaInfoIndex||0,attributes:J,layer:K,fieldInfoMap:O,
formattedAttributes:V,expressionAttributes:B,mediaInfos:ha,popupTemplate:R,relatedInfos:h,...this._compileTitleAndDesc({title:la,description:aa})});v.mediaInfos=J.formattedMediaInfos.slice(0);this.contentViewModels[E]=J;return v};D._compileText=function(v,E){v=v.clone();const {graphic:N,_fieldInfoMap:O,_sourceLayer:R,_expressionAttributes:h}=this;if(v&&v.text){const {attributes:K}=N;v.text=u.substituteFieldsInLinksAndAttributes({attributes:K,fieldInfoMap:O,globalAttributes:this.formattedAttributes.global,
expressionAttributes:h,layer:R,text:v.text})}this.contentViewModels[E]=new q({graphic:N,creator:v.text});return v};D._compileLastEditInfo=function(){const {_effectivePopupTemplate:v,_sourceLayer:E,graphic:N}=this;if(v){var {lastEditInfoEnabled:O}=v,R=null==E?void 0:E.editFieldsInfo;if(O&&R)return u.formatEditInfo(R,N.attributes)}};D._compileTitle=function(v){const {_fieldInfoMap:E,_sourceLayer:N,graphic:O,_expressionAttributes:R}=this,{attributes:h}=O;return u.substituteFieldsInLinksAndAttributes({attributes:h,
fieldInfoMap:E,globalAttributes:this.formattedAttributes.global,expressionAttributes:R,layer:N,text:v})};D._getTitle=function(){var v=f._asyncToGenerator(function*(){const {_effectivePopupTemplate:E,graphic:N}=this;return u.graphicCallback(null==E?void 0:E.title,{graphic:N})});return function(){return v.apply(this,arguments)}}();D._getContent=function(){var v=f._asyncToGenerator(function*(){const {_effectivePopupTemplate:E,graphic:N}=this;return u.graphicCallback(null==E?void 0:E.content,{graphic:N})});
return function(){return v.apply(this,arguments)}}();D._queryFeature=function(){var v=f._asyncToGenerator(function*(E){const {_featureAbortController:N,_sourceLayer:O,graphic:R,_effectivePopupTemplate:h,spatialReference:K,map:B,view:J}=this,{content:{value:V},title:{value:aa}}=yield Q.eachAlways({content:this._getContent(),title:this._getTitle()});N===this._featureAbortController&&R&&(yield u.queryUpdatedFeature({graphic:R,popupTemplate:h,layer:O,spatialReference:K},E),{expressionAttributes:{value:E}}=
yield Q.eachAlways({checkForRelatedFeatures:this._checkForRelatedFeatures(E),expressionAttributes:F.createCompiledExpressions({popupTemplate:this._effectivePopupTemplate,spatialReference:K,graphic:R,map:B,interceptor:M.interceptor,view:J})}),N===this._featureAbortController&&R&&(this._expressionAttributes=E,this._set("formattedAttributes",this._createFormattedAttributes(V,E)),this._set("title",this._compileTitle(aa)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",
this._compileContent(V)||null)))});return function(E){return v.apply(this,arguments)}}();D._createFormattedAttributes=function(v,E){const {_effectivePopupTemplate:N,graphic:O,relatedInfos:R,_sourceLayer:h,_fieldInfoMap:K}=this,B={...O.attributes,...E},J={global:u.formatAttributes({fieldInfos:null==N?void 0:N.fieldInfos,graphic:O,attributes:B,layer:h,fieldInfoMap:K,relatedInfos:R}),content:[]};Array.isArray(v)&&v.forEach((V,aa)=>{"fields"===V.type&&V.fieldInfos&&(J.content[aa]=u.formatAttributes({fieldInfos:V.fieldInfos,
graphic:O,attributes:B,layer:h,fieldInfoMap:K,relatedInfos:R}))});return J};D._checkForRelatedFeatures=function(v){const {graphic:E,_effectivePopupTemplate:N}=this;return this._queryRelatedInfos(E,u.getAllFieldInfos(N),v)};D._queryRelatedInfos=function(){var v=f._asyncToGenerator(function*(E,N,O){const {relatedInfos:R,_sourceLayer:h}=this;R.clear();const K=W.isSome(h.associatedLayer)?yield h.associatedLayer.load(O):h;if(K){var B=N.filter(aa=>aa&&u.isRelatedField(aa.fieldName));if(B&&B.length){N.forEach(aa=>
this._configureRelatedInfo(aa,K));var J=yield l.queryLayerInfos({relatedInfos:R,layer:K},O);Object.keys(J).forEach(aa=>{var ha;const la=R.get(aa.toString());aa=null==(ha=J[aa])?void 0:ha.value;la&&aa&&(la.layerInfo=aa.data)});var V=yield l.queryRelatedFeatures({graphic:E,relatedInfos:R,layer:K},O);Object.keys(V).forEach(aa=>{var ha;l.setRelatedFeatures(null==(ha=V[aa])?void 0:ha.value,R.get(aa.toString()))})}}});return function(E,N,O){return v.apply(this,arguments)}}();D._configureRelatedInfo=function(v,
E){const {relatedInfos:N}=this,O=l.getRelatedFieldInfo(v.fieldName);if(O){var {layerId:R,fieldName:h}=O;R&&(E=N.get(R.toString())||l.createRelatedInfo(R,E))&&(l.updateRelatedInfo({relatedInfo:E,fieldName:h,fieldInfo:v}),this.relatedInfos.set(R,E))}};f._createClass(r,[{key:"_effectivePopupTemplate",get:function(){return W.isSome(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}},{key:"_fieldInfoMap",get:function(){return u.createfieldInfoMap(u.getAllFieldInfos(this._effectivePopupTemplate),
this._sourceLayer)}},{key:"_sourceLayer",get:function(){return u.getSourceLayer(this.graphic)}},{key:"state",get:function(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}},{key:"graphic",set:function(v){this._set("graphic",v?v.clone():null)}},{key:"spatialReference",get:function(){return this.get("view.spatialReference")||null},set:function(v){void 0===v?this._clearOverride("spatialReference"):this._override("spatialReference",v)}},{key:"map",get:function(){return this.get("view.map")||
null},set:function(v){void 0===v?this._clearOverride("map"):this._override("map",v)}},{key:"waitingForContent",get:function(){return!!this._featureAbortController}}]);return r}(w);w.interceptor=new z.FeatureSetQueryInterceptor(u.preLayerQueryCallback,u.preRequestCallback);c.__decorate([n.property()],w.prototype,"_error",void 0);c.__decorate([n.property()],w.prototype,"_featureAbortController",void 0);c.__decorate([n.property({readOnly:!0})],w.prototype,"_effectivePopupTemplate",null);c.__decorate([n.property({readOnly:!0})],
w.prototype,"_fieldInfoMap",null);c.__decorate([n.property({readOnly:!0})],w.prototype,"_sourceLayer",null);c.__decorate([n.property()],w.prototype,"abilities",void 0);c.__decorate([e.cast("abilities")],w.prototype,"castAbilities",null);c.__decorate([n.property({readOnly:!0})],w.prototype,"content",void 0);c.__decorate([n.property({readOnly:!0})],w.prototype,"contentViewModels",void 0);c.__decorate([n.property({type:Boolean})],w.prototype,"defaultPopupTemplateEnabled",void 0);c.__decorate([n.property({readOnly:!0})],
w.prototype,"state",null);c.__decorate([n.property({readOnly:!0})],w.prototype,"formattedAttributes",void 0);c.__decorate([n.property({type:b,value:null})],w.prototype,"graphic",null);c.__decorate([n.property({readOnly:!0})],w.prototype,"lastEditInfo",void 0);c.__decorate([n.property()],w.prototype,"relatedInfos",void 0);c.__decorate([n.property()],w.prototype,"spatialReference",null);c.__decorate([n.property({readOnly:!0})],w.prototype,"title",void 0);c.__decorate([n.property()],w.prototype,"map",
null);c.__decorate([n.property({readOnly:!0})],w.prototype,"waitingForContent",null);c.__decorate([n.property()],w.prototype,"view",void 0);return w=M=c.__decorate([g.subclass("esri.widgets.FeatureViewModel")],w)})},"esri/arcade/featureset/support/FeatureSetQueryInterceptor":function(){define(["exports"],function(f){f.FeatureSetQueryInterceptor=function(c,b){this.preLayerQueryCallback=c;this.preRequestCallback=b;this.preLayerQueryCallback||(this.preLayerQueryCallback=z=>{});this.preRequestCallback||
(this.preLayerQueryCallback=z=>{})};Object.defineProperty(f,"__esModule",{value:!0})})},"esri/widgets/Feature/support/arcadeFeatureUtils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Logger ../../../core/promiseUtils ../../../layers/FeatureLayer ./featureUtils".split(" "),function(f,c,b,z,w,L,T){function W(k){return`<ul class="esri-widget__list">${k.map(A=>`<li>${"string"===typeof A?T.applyTextFormattingHTML(T.htmlEntities(A)):A}</li>`).join("")}</ul>`}
function Q(k){return`<table class="esri-widget__table">${k.keys().map(A=>{var F=k.field(A);F="string"===typeof F?T.applyTextFormattingHTML(T.htmlEntities(F)):F;return`<tr><th>${A}</th><td>${F}</td></tr>`}).join("")}</table>`}function H({aggregatedFeatures:k,arcadeUtils:A,featureSetVars:F,context:u,viewInfo:l,map:M,graphic:G,interceptor:y}){F.forEach(t=>{t=t.toLowerCase();var r={map:M,spatialReference:l.sr,interceptor:y};"$map"===t&&(u.vars[t]=A.convertMapToFeatureSetCollection(r));"$layer"===t&&(u.vars[t]=
A.convertFeatureLayerToFeatureSet({layer:G.sourceLayer,spatialReference:l.sr,interceptor:y}));"$datastore"===t&&(u.vars[t]=A.convertServiceUrlToWorkspace({url:G.sourceLayer.url,spatialReference:l.sr,interceptor:y}));if("$aggregatedfeatures"===t){r=G.layer;const {fields:D,objectIdField:v,geometryType:E,spatialReference:N,displayField:O}=r;r=new L({fields:D,objectIdField:v,geometryType:E,spatialReference:N,displayField:O,..."feature"===r.type?{templates:r.templates,typeIdField:r.typeIdField,types:r.types}:
null,source:k});u.vars[t]=A.convertFeatureLayerToFeatureSet({layer:r,spatialReference:l.sr,interceptor:y})}})}function x(){return new Promise(function(k,A){f(["../../../support/arcadeUtils"],k,A)})}function n(k){return d.apply(this,arguments)}function d(){d=b._asyncToGenerator(function*({graphic:k,view:A}){const {isAggregate:F,layer:u}=k;if(!F||!u||"2d"!==(null==A?void 0:A.type))return[];A=yield A.whenLayerView(u);if(!A.createQuery||!A.queryFeatures)return[];const l=A.createQuery();l.aggregateIds=
[k.getObjectId()];({features:k}=yield A.queryFeatures(l));return k});return d.apply(this,arguments)}function e(k){return g.apply(this,arguments)}function g(){g=b._asyncToGenerator(function*({expressionAttributes:k,info:A,arcadeUtils:F,interceptor:u,spatialReference:l,map:M,graphic:G,view:y}){const t=`expression/${A.name}`,r=F.createSyntaxTree(A.expression),D=C.filter(E=>F.hasVariable(r,E));yield F.loadScriptDependencies(r,!0,D);const v=F.getViewInfo({spatialReference:l});l=F.createExecContext(G,v);
l.interceptor=u;l.useAsync=!0;y=yield n({graphic:G,view:y});H({aggregatedFeatures:y,arcadeUtils:F,featureSetVars:D,context:l,viewInfo:v,map:M,graphic:G,interceptor:u});u=F.createFunction(r,l);u=yield F.executeAsyncFunction(u,l).catch(E=>q.error("arcade-execution-error",{error:E,graphic:G,expressionInfo:A}));k[t]="string"===typeof u?T.applyTextFormattingHTML(T.htmlEntities(u)):Array.isArray(u)?W(u):u&&"esri.arcade.Dictionary"===u.declaredClass?Q(u):u});return g.apply(this,arguments)}function p(){p=
b._asyncToGenerator(function*({popupTemplate:k,spatialReference:A,graphic:F,interceptor:u,map:l,view:M}){k=k.expressionInfos;const G=[],y={};if(!k||!k.length)return y;const t=yield x();for(const r of k)G.push(e({expressionAttributes:y,info:r,arcadeUtils:t,interceptor:u,spatialReference:A,map:l,graphic:F,view:M}));yield w.eachAlways(G);return y});return p.apply(this,arguments)}const C=["$datastore","$map","$layer","$aggregatedfeatures"],q=z.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils");
c.createCompiledExpressions=function(k){return p.apply(this,arguments)};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/widgets/Feature/support/FeatureContentMixin":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ../../support/widget ../../support/jsxFactory".split(" "),
function(f,c,b,z,w,L,T,W,Q,H){f.FeatureContentMixin=x=>{x=function(n){function d(){var e=n.apply(this,arguments)||this;e.renderNodeContent=g=>Q.isWidget(g)&&!g.destroyed?H.tsx("div",{key:g},g.render()):g instanceof HTMLElement?H.tsx("div",{key:g,bind:g,afterCreate:e._attachToNode}):Q.hasDomNode(g)?H.tsx("div",{key:g,bind:g.domNode,afterCreate:e._attachToNode}):null;return e}c._inheritsLoose(d,n);d.prototype._attachToNode=function(e){e.appendChild(this)};return d}(x);return x=b.__decorate([W.subclass("esri.widgets.Feature.ContentMixin")],
x)};Object.defineProperty(f,"__esModule",{value:!0})})},"esri/widgets/Popup/PopupViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Graphic ../../symbols ../../core/Collection ../../core/Error ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/webMercatorUtils ../../layers/Layer ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionToggle ../../symbols/support/symbolUtils ../../views/input/InputManager ../../views/support/layerViewUtils ../Feature/FeatureViewModel ./actions ./actionUtils ../support/AnchorElementViewModel ../support/GoTo ../../geometry/Point ../../symbols/SimpleFillSymbol".split(" "),
function(f,c,b,z,w,L,T,W,Q,H,x,n,d,e,g,p,C,q,k,A,F,u,l,M,G,y,t,r,D,v,E){const N=L.ofType({key:"type",defaultKeyValue:"button",base:k,typeMap:{button:A,toggle:F}}),O=Q.getLogger("esri.widgets.Popup.PopupViewModel");b=function(R){function h(B){B=R.call(this,B)||this;B._handles=new W;B._pendingPromises=new Set;B._fetchFeaturesController=null;B._selectedClusterFeature=null;B.featurePage=null;B.actions=new N;B.defaultPopupTemplateEnabled=!1;B.autoCloseEnabled=!1;B.autoOpenEnabled=!0;B.browseClusterEnabled=
!1;B.content=null;B.featuresPerPage=20;B.featureViewModelAbilities=null;B.featureViewModels=[];B.highlightEnabled=!0;B.includeDefaultActions=!0;B.selectedClusterBoundaryFeature=new z({symbol:new E({outline:{width:1.5,color:"cyan"},style:"none"})});B.title=null;B.updateLocationEnabled=!1;B.view=null;B.visible=!1;B.zoomFactor=4;B.zoomToLocation=null;return B}f._inheritsLoose(h,R);var K=h.prototype;K.initialize=function(){this._handles.add([n.init(this,["autoOpenEnabled","view"],()=>this._autoOpenEnabledChange()),
this.on("view-change",()=>this._autoClose()),n.watch(this,["highlightEnabled","selectedFeature","visible","view"],()=>this._highlightFeature()),n.watch(this,"view.animation.state",B=>this._animationStateChange(B)),n.watch(this,"location",B=>this._locationChange(B)),n.watch(this,"selectedFeature",B=>this._selectedFeatureChange(B)),n.watch(this,["selectedFeatureIndex","featureCount","featuresPerPage"],()=>this._selectedFeatureIndexChange()),n.watch(this,["featurePage","selectedFeatureIndex","featureCount",
"featuresPerPage, featureViewModels"],()=>this._setGraphicOnFeatureViewModels()),n.watch(this,"featureViewModels",()=>this._featureViewModelsChange()),this.on("trigger-action",B=>t.triggerAction({event:B,view:this.view})),n.whenFalse(this,"waitingForResult",()=>this._waitingForResultChange(),!0),n.watch(this,["features","view","view.map","view.spatialReference"],()=>this._updateFeatureVMs()),n.watch(this,["view.scale"],this._viewScaleChange),n.whenFalse(this,"visible",()=>this.browseClusterEnabled=
!1),n.watch(this,"browseClusterEnabled",B=>B?this.enableClusterBrowsing():this.disableClusterBrowsing())])};K.destroy=function(){this._cancelFetchingFeatures();this._handles.destroy();this._handles=null;this._pendingPromises.clear();this.browseClusterEnabled=!1;this.view=null};K.centerAtLocation=function(){var {view:B}=this;const J=t.getSelectedTarget(this);return J?this.callGoTo({target:{target:J,scale:B.scale}}):(B=new T("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",
{target:J,view:B}),O.error(B),Promise.reject(B))};K.clear=function(){this.set({promises:[],features:[],content:null,title:null,location:null})};K.fetchFeatures=function(B,J){const {view:V}=this;return V&&B?V.fetchPopupFeatures(B,{event:J&&J.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:J&&J.signal}):(B=new T("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:B,view:V}),O.error(B),Promise.reject(B))};K.open=
function(B){B={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...B,visible:!0};const {fetchFeatures:J}=B;delete B.fetchFeatures;J&&this._setFetchFeaturesPromises(B.location);this.set(B)};K.triggerAction=function(B){(B=this.allActions.getItemAt(B))&&!B.disabled&&this.emit("trigger-action",{action:B})};K.next=function(){this.selectedFeatureIndex+=1;return this};K.previous=function(){--this.selectedFeatureIndex;return this};K.disableClusterBrowsing=function(){t.removeClusteredFeaturesForBrowsing(this);
this._clearBrowsedClusterGraphics()};K.enableClusterBrowsing=function(){var B=f._asyncToGenerator(function*(){yield t.displayClusterExtent(this);yield t.browseAggregateFeatures(this)});return function(){return B.apply(this,arguments)}}();K._animationStateChange=function(B){this.zoomToLocation||(y.zoomToFeature.disabled="waiting-for-target"===B)};K._clearBrowsedClusterGraphics=function(){var B;const J=null==(B=this.view)?void 0:B.graphics;J&&(J.remove(this.selectedClusterBoundaryFeature),J.remove(this._selectedClusterFeature));
this._selectedClusterFeature=null;this.selectedClusterBoundaryFeature.geometry=null};K._viewScaleChange=function(){var B;if(null!=(B=this.selectedFeature)&&B.isAggregate||this.browseClusterEnabled)this.visible=this.browseClusterEnabled=!1};K._locationChange=function(B){const {selectedFeature:J,updateLocationEnabled:V}=this;V&&B&&(!J||J.geometry)&&this.centerAtLocation()};K._selectedFeatureIndexChange=function(){this.featurePage=1<this.featureCount?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+
1:null};K._featureViewModelsChange=function(){this.featurePage=1<this.featureCount?1:null};K._setGraphicOnFeatureViewModels=function(){const {features:B,featureCount:J,featurePage:V,featuresPerPage:aa,featureViewModels:ha}=this;if(null!==V){var la=((V-1)*aa+J)%J;ha.slice(la,la+aa).forEach((ra,va)=>{ra&&!ra.graphic&&(ra.graphic=B[la+va])})}};K._selectedFeatureChange=function(){var B=f._asyncToGenerator(function*(J){if(J){var {location:V,updateLocationEnabled:aa,view:ha}=this;this.browseClusterEnabled?
(this._selectedClusterFeature&&(ha.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),J.isAggregate||(J.symbol=yield u.getDisplayedSymbol(J),this._selectedClusterFeature=J,ha.graphics.add(this._selectedClusterFeature))):!aa&&V||!J.geometry?aa&&!J.geometry&&this.centerAtLocation().then(()=>{this.location=ha.center.clone()}):this.location=H.unwrap(this._getPointFromGeometry(J.geometry))}});return function(J){return B.apply(this,arguments)}}();K._waitingForResultChange=
function(){!this.featureCount&&this.promises&&(this.visible=!1)};K._setFetchFeaturesPromises=function(B){return this._fetchFeaturesWithController(this._getScreenPoint(B||this.location)).then(J=>{const {clientOnlyGraphics:V,promisesPerLayerView:aa}=J;J=Promise.resolve(V);const ha=aa.map(la=>la.promise);this.promises=[J,...ha]})};K._destroyFeatureVMs=function(){this.featureViewModels.forEach(B=>B&&!B.destroyed&&B.destroy());this._set("featureViewModels",[])};K._updateFeatureVMs=function(){const {selectedFeature:B,
features:J,featureViewModels:V}=this;null!=B&&B.isAggregate||(this.browseClusterEnabled=!1);this._destroyFeatureVMs();if(J&&J.length){var aa=V.slice(0),ha=[];J.forEach((la,ra)=>{if(la){var va=null;aa.some((ja,X)=>{ja&&ja.graphic===la&&(va=ja,aa.splice(X,1));return!!va});if(va)ha[ra]=va;else{var wa,ua;const ja=new G({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:null==(wa=this.view)?void 0:wa.spatialReference,graphic:la===B?la:
null,map:null==(ua=this.view)?void 0:ua.map,view:this.view});ha[ra]=ja}}});aa.forEach(la=>la&&!la.destroyed&&la.destroy());this._set("featureViewModels",ha)}};K._getScreenPoint=function(B){const {view:J}=this;return J&&B&&"function"===typeof J.toScreen?J.toScreen(B):null};K._autoOpenEnabledChange=function(){const {_handles:B,autoOpenEnabled:J}=this;B.remove("auto-fetch-features");if(J&&this.view){const V=this.view.on("click",aa=>{"mouse"===aa.pointerType&&0!==aa.button||this._fetchFeaturesAndOpen(aa)},
l.ViewEventPriorities.WIDGET);B.add(V,"auto-fetch-features")}};K._cancelFetchingFeatures=function(){const B=this._fetchFeaturesController;B&&B.abort();this._fetchFeaturesController=null;this.notifyChange("waitingForResult")};K._fetchFeaturesWithController=function(B,J){this._cancelFetchingFeatures();const V=x.createAbortController(),{signal:aa}=V;this._fetchFeaturesController=V;this.notifyChange("waitingForResult");B=this.fetchFeatures(B,{signal:aa,event:J});B.catch(()=>{}).then(()=>{this._fetchFeaturesController=
null;this.notifyChange("waitingForResult")});return B};K._fetchFeaturesAndOpen=function(B){const {screenPoint:J,mapPoint:V}=B,{view:aa}=this;this._fetchFeaturesWithController(J,B).then(ha=>{const {clientOnlyGraphics:la,promisesPerLayerView:ra,location:va}=ha,wa=[Promise.resolve(la),...ra.map(ua=>ua.promise)];aa.popup.open({location:va||V,promises:wa});return ha})};K._updatePendingPromises=function(B){B&&this._pendingPromises.has(B)&&(this._pendingPromises.delete(B),this.notifyChange("pendingPromisesCount"))};
K._autoClose=function(){this.autoCloseEnabled&&(this.visible=!1)};K._getPointFromGeometry=function(B){return H.isNone(B)?null:"point"===B.type?B:"extent"===B.type?B.center:"polygon"===B.type?B.centroid:"multipoint"===B.type||"polyline"===B.type?B.extent.center:null};K._getLayerView=function(){var B=f._asyncToGenerator(function*(J,V){yield J.when();return J.whenLayerView(V)});return function(J,V){return B.apply(this,arguments)}}();K._highlightFeature=function(){var B=f._asyncToGenerator(function*(){this._handles.remove("highlight");
const {selectedFeature:J,highlightEnabled:V,view:aa,visible:ha}=this;if(J&&aa&&V&&ha){var {layer:la,sourceLayer:ra}=J;if("map-notes"===(null==ra?void 0:ra.type)||"subtype-group"===(null==ra?void 0:ra.type))la=ra;if(la&&la instanceof q){var va=this._getLayerView(aa,la);this._highlightPromise=va;var wa=yield va;if(wa&&M.highlightsSupported(wa)&&this._highlightPromise===va&&this.selectedFeature&&this.highlightEnabled&&this.visible){va="objectIdField"in la&&la.objectIdField;var ua=J.attributes;wa=wa.highlight(ua&&
va&&ua[va]||J);this._handles.add(wa,"highlight")}}}});return function(){return B.apply(this,arguments)}}();K._updateFeatures=function(B){const {features:J}=this;B&&B.length&&(J.length?(B=B.filter(V=>-1===J.indexOf(V)),this.features=J.concat(B)):this.features=B)};f._createClass(h,[{key:"isLoadingFeature",get:function(){return this.featureViewModels.some(B=>B.waitingForContent)}},{key:"active",get:function(){return!(!this.visible||this.waitingForResult)}},{key:"allActions",get:function(){const B=this._get("allActions")||
new N;B.removeAll();const {actions:J,defaultActions:V,defaultPopupTemplateEnabled:aa,includeDefaultActions:ha,selectedFeature:la}=this;var ra=ha?V.concat(J):J;const va=la&&("function"===typeof la.getEffectivePopupTemplate&&la.getEffectivePopupTemplate(aa)||la.popupTemplate),wa=va&&va.actions;(ra=va&&va.overwriteActions?wa:wa?wa.concat(ra):ra)&&ra.filter(Boolean).forEach(ua=>B.add(ua));return B}},{key:"defaultActions",get:function(){var B;const J=this._get("defaultActions")||new N;J.removeAll();J.addMany(null!=
(B=this.selectedFeature)&&B.isAggregate?[y.zoomToClusteredFeatures.clone(),y.browseClusteredFeatures.clone()]:[y.zoomToFeature.clone()]);return J}},{key:"featureCount",get:function(){return this.features.length}},{key:"features",get:function(){return this._get("features")||[]},set:function(B){B=B||[];this._set("features",B);const {pendingPromisesCount:J,promiseCount:V,selectedFeatureIndex:aa}=this,ha=V&&B.length;ha&&J&&-1===aa?this.selectedFeatureIndex=0:ha&&-1!==aa||(this.selectedFeatureIndex=B.length?
0:-1)}},{key:"location",get:function(){return this._get("location")||null},set:function(B){const J=this.get("view.spatialReference.isWebMercator");B&&B.get("spatialReference.isWGS84")&&J&&(B=C.geographicToWebMercator(B));this._set("location",B)}},{key:"pendingPromisesCount",get:function(){return this._pendingPromises.size}},{key:"waitingForResult",get:function(){return!(!(this._fetchFeaturesController||0<this.pendingPromisesCount)||0!==this.featureCount)}},{key:"promiseCount",get:function(){return this.promises.length}},
{key:"promises",get:function(){return this._get("promises")||[]},set:function(B){this._pendingPromises.clear();this.features=[];Array.isArray(B)&&B.length?(this._set("promises",B),B=B.slice(0),B.forEach(J=>{this._pendingPromises.add(J);J.then(V=>{this._pendingPromises.has(J)&&this._updateFeatures(V);this._updatePendingPromises(J)},()=>this._updatePendingPromises(J))})):this._set("promises",[]);this.notifyChange("pendingPromisesCount")}},{key:"selectedFeature",get:function(){const {features:B,selectedFeatureIndex:J}=
this;return-1===J?null:B[J]||null}},{key:"selectedFeatureIndex",get:function(){const B=this._get("selectedFeatureIndex");return"number"===typeof B?B:-1},set:function(B){const {featureCount:J}=this;B=isNaN(B)||-1>B||!J?-1:(B+J)%J;this._set("selectedFeatureIndex",B)}},{key:"selectedFeatureViewModel",get:function(){return this.featureViewModels[this.selectedFeatureIndex]||null}},{key:"state",get:function(){return this.get("view.ready")?"ready":"disabled"}}]);return h}(D.GoToMixin(r));c.__decorate([d.property()],
b.prototype,"featurePage",void 0);c.__decorate([d.property()],b.prototype,"isLoadingFeature",null);c.__decorate([d.property({type:N})],b.prototype,"actions",void 0);c.__decorate([d.property({readOnly:!0})],b.prototype,"active",null);c.__decorate([d.property({readOnly:!0})],b.prototype,"allActions",null);c.__decorate([d.property({type:Boolean})],b.prototype,"defaultPopupTemplateEnabled",void 0);c.__decorate([d.property()],b.prototype,"autoCloseEnabled",void 0);c.__decorate([d.property()],b.prototype,
"autoOpenEnabled",void 0);c.__decorate([d.property()],b.prototype,"browseClusterEnabled",void 0);c.__decorate([d.property()],b.prototype,"content",void 0);c.__decorate([d.property({type:N,readOnly:!0})],b.prototype,"defaultActions",null);c.__decorate([d.property({readOnly:!0})],b.prototype,"featureCount",null);c.__decorate([d.property()],b.prototype,"features",null);c.__decorate([d.property()],b.prototype,"featuresPerPage",void 0);c.__decorate([d.property()],b.prototype,"featureViewModelAbilities",
void 0);c.__decorate([d.property({readOnly:!0})],b.prototype,"featureViewModels",void 0);c.__decorate([d.property()],b.prototype,"highlightEnabled",void 0);c.__decorate([d.property()],b.prototype,"includeDefaultActions",void 0);c.__decorate([d.property({type:v})],b.prototype,"location",null);c.__decorate([d.property({readOnly:!0})],b.prototype,"pendingPromisesCount",null);c.__decorate([d.property({readOnly:!0})],b.prototype,"selectedClusterBoundaryFeature",void 0);c.__decorate([d.property({readOnly:!0})],
b.prototype,"waitingForResult",null);c.__decorate([d.property({readOnly:!0})],b.prototype,"promiseCount",null);c.__decorate([d.property()],b.prototype,"promises",null);c.__decorate([d.property({value:null,readOnly:!0})],b.prototype,"selectedFeature",null);c.__decorate([d.property({value:-1})],b.prototype,"selectedFeatureIndex",null);c.__decorate([d.property({readOnly:!0})],b.prototype,"selectedFeatureViewModel",null);c.__decorate([d.property({readOnly:!0})],b.prototype,"state",null);c.__decorate([d.property()],
b.prototype,"title",void 0);c.__decorate([d.property()],b.prototype,"updateLocationEnabled",void 0);c.__decorate([d.property()],b.prototype,"view",void 0);c.__decorate([d.property()],b.prototype,"visible",void 0);c.__decorate([d.property()],b.prototype,"zoomFactor",void 0);c.__decorate([d.property()],b.prototype,"zoomToLocation",void 0);c.__decorate([d.property()],b.prototype,"centerAtLocation",null);return b=c.__decorate([p.subclass("esri.widgets.Popup.PopupViewModel")],b)})},"esri/widgets/Popup/actions":function(){define(["exports",
"../../support/actions/ActionButton"],function(f,c){const b=new c({id:"zoom-to-feature",title:"{messages.zoom}",className:"esri-icon-zoom-in-magnifying-glass"}),z=new c({id:"remove-selected-feature",title:"{messages.remove}",className:"esri-icon-trash"}),w=new c({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:"esri-icon-zoom-in-magnifying-glass"});c=new c({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:"esri-icon-table"});f.all=[b,z,c,w];f.browseClusteredFeatures=
c;f.removeSelectedFeature=z;f.zoomToClusteredFeatures=w;f.zoomToFeature=b;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/widgets/Popup/actionUtils":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/Error","../../core/Logger","./actions"],function(f,c,b,z,w){function L(g){const {selectedFeature:p,location:C,view:q}=g;return q?"3d"===q.type?p||C:g.get("selectedFeature.geometry")||C:null}function T(g,p){if("3d"!==(null==p?void 0:p.type)||!g||"esri.Graphic"!==
g.declaredClass)return!0;if((p=p.getViewForGraphic(g))&&"whenGraphicBounds"in p){let C=!1;p.whenGraphicBounds(g,{useViewElevation:!0}).then(q=>{C=!q||!q.boundingBox||q.boundingBox[0]===q.boundingBox[3]&&q.boundingBox[1]===q.boundingBox[4]&&q.boundingBox[2]===q.boundingBox[5]}).catch(()=>{const q=new b("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:g});e.error(q)});return C}return!0}function W(g){return Q.apply(this,arguments)}function Q(){Q=c._asyncToGenerator(function*(g){const {location:p,
selectedFeature:C,view:q,zoomFactor:k}=g,A=L(g);if(!A)return g=new b("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:A,view:q}),e.error(g),Promise.reject(g);const F=q.scale/k,u=g.get("selectedFeature.geometry")||p,l=u&&"point"===u.type&&T(C,q);w.zoomToFeature.active=!0;w.zoomToFeature.disabled=!0;yield g.view.goTo({target:A,scale:l?F:void 0});w.zoomToFeature.active=!1;w.zoomToFeature.disabled=!1;g.zoomToLocation=null;l&&(g.location=u)});return Q.apply(this,
arguments)}function H(g){return x.apply(this,arguments)}function x(){x=c._asyncToGenerator(function*(g){const {selectedFeature:p,view:C}=g;if("2d"!==(null==C?void 0:C.type))throw g=new b("zoomToCluster:invalid-view","View must be 2d MapView.",{view:C}),e.error(g),g;if(!p.isAggregate)throw g=new b("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:p}),e.error(g),g;g=yield C.whenLayerView(p.sourceLayer);const q=g.createQuery();q.aggregateIds=
[p.getObjectId()];w.zoomToClusteredFeatures.active=!0;w.zoomToClusteredFeatures.disabled=!0;({extent:g}=yield g.queryExtent(q));yield C.goTo({target:g});w.zoomToClusteredFeatures.active=!1;w.zoomToClusteredFeatures.disabled=!1});return x.apply(this,arguments)}function n(){n=c._asyncToGenerator(function*(g){const {selectedFeature:p,view:C}=g;if("2d"!==(null==C?void 0:C.type))throw g=new b("displayClusterExtent:invalid-view","View must be 2d MapView.",{view:C}),e.error(g),g;if(!p.isAggregate)throw g=
new b("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:p}),e.error(g),g;var q=yield C.whenLayerView(p.sourceLayer);const k=q.createQuery();k.aggregateIds=[p.getObjectId()];({extent:q}=yield q.queryExtent(k));g.selectedClusterBoundaryFeature.geometry=q;C.graphics.add(g.selectedClusterBoundaryFeature)});return n.apply(this,arguments)}function d(){d=c._asyncToGenerator(function*(g){const {selectedFeature:p,view:C}=g;if("2d"!==(null==
C?void 0:C.type))throw g=new b("browseAggregateFeatures:invalid-view","View must be 2d MapView.",{view:C}),e.error(g),g;if(!p.isAggregate)throw g=new b("browseAggregateFeatures:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:p}),e.error(g),g;g=yield C.whenLayerView(p.sourceLayer);const q=g.createQuery();q.aggregateIds=[p.getObjectId()];w.browseClusteredFeatures.active=!0;w.browseClusteredFeatures.disabled=!0;({features:g}=yield g.queryFeatures(q));
w.browseClusteredFeatures.active=!1;w.browseClusteredFeatures.disabled=!1;C.popup.open({features:[p].concat(g),featureMenuOpen:!0})});return d.apply(this,arguments)}const e=z.getLogger("esri.widgets.Popup.PopupViewModel");f.browseAggregateFeatures=function(g){return d.apply(this,arguments)};f.displayClusterExtent=function(g){return n.apply(this,arguments)};f.getSelectedTarget=L;f.isZoomScreenSize=T;f.removeClusteredFeaturesForBrowsing=function(g){g.features=g.features.filter(p=>p.isAggregate)};f.triggerAction=
function(g){const {event:p,view:C}=g;({action:g}=p);var q=C&&C.popup;if(!g)return Promise.reject(new b("trigger-action:missing-arguments","Event has no action"));if(!q)return Promise.reject(new b("trigger-action:missing-arguments","view.popup is missing"));const {disabled:k,id:A}=g;if(!A)return Promise.reject(new b("trigger-action:invalid-action","action.id is missing"));if(k)return Promise.reject(new b("trigger-action:invalid-action","Action is disabled"));if(A===w.zoomToFeature.id)return W(q.viewModel);
if(A===w.zoomToClusteredFeatures.id)return H(q.viewModel);if(A===w.browseClusteredFeatures.id)return q.featureMenuOpen=!q.featureMenuOpen,q.viewModel.browseClusterEnabled=!q.viewModel.browseClusterEnabled,Promise.resolve();q.viewModel.browseClusterEnabled=!1;if(A===w.removeSelectedFeature.id){q.close();({selectedFeature:g}=q);if(!g)return Promise.reject(new b(`trigger-action:${w.removeSelectedFeature.id}`,"selectedFeature is required",{selectedFeature:g}));({sourceLayer:q}=g);q?q.remove(g):C.graphics.remove(g)}return Promise.resolve()};
f.zoomToClusterExtent=H;f.zoomToLocation=W;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/widgets/support/GoTo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),function(f,c,b,z,w,L,T,W){f.GoToMixin=Q=>{Q=function(H){function x(...n){n=H.call(this,...n)||this;n.goToOverride=
null;n.view=null;return n}c._inheritsLoose(x,H);x.prototype.callGoTo=function(n){const {view:d}=this;return this.goToOverride?this.goToOverride(d,n):d.goTo(n.target,n.options)};return x}(Q);b.__decorate([z.property()],Q.prototype,"goToOverride",void 0);b.__decorate([z.property()],Q.prototype,"view",void 0);return Q=b.__decorate([W.subclass("esri.widgets.support.GoTo")],Q)};Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/isSupportedGraphicUtils":function(){define(["exports",
"../../../../core/has"],function(f,c){f.isSupportedGraphicResultMessage=function(b){switch(b){case 1:return"not owned by a graphics layer";case 2:return"no geometry";case 3:return"the geometry type is not supported";case 4:return"the elevation mode is not supported";case 5:return"the symbol type is not supported"}return""};Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/moveGraphic/isSupportedGraphic":function(){define(["exports","../../../../../core/has",
"../../../../../core/maybe","../../../../../support/elevationInfoUtils"],function(f,c,b,z){f.isSupportedGraphic=function(w){var L;if("graphics"!==(null==(L=w.layer)?void 0:L.type))return 1;if(b.isNone(w.geometry))return 2;switch(w.geometry.type){case "polygon":case "point":case "polyline":case "mesh":break;case "multipoint":case "extent":return 3;default:return 3}return"on-the-ground"!==z.getGraphicEffectiveElevationMode(w)&&z.hasGraphicFeatureExpressionInfo(w)?4:0};Object.defineProperty(f,"__esModule",
{value:!0})})},"esri/support/elevationInfoUtils":function(){define(["exports","../core/maybe","../symbols/support/unitConversionUtils"],function(f,c,b){function z(H,x){return c.isNone(x)||!x.mode?H?"absolute-height":"on-the-ground":x.mode}function w(H,x){return z(c.isSome(H)?H.hasZ:!1,x)}function L(H){const x=T(H);return w(H.geometry,x)}function T(H){return H.layer&&"elevationInfo"in H.layer?H.layer.elevationInfo:null}function W(H,x,n,d,e,g,p=null){if(!c.isNone(g)){var C=c.isSome(p)?p.mode:"absolute-height";
if("on-the-ground"===C)return 0;a:{g=Q(x,n,d,e,H,g);p=c.isSome(p)&&c.isSome(p.offset)?p.offset:0;switch(C){case "absolute-height":H=g-p;break a;case "relative-to-ground":H=g-(c.unwrapOr(H.elevationProvider.getElevation(x,n,d,e,"ground"),0)+p);break a;case "relative-to-scene":H=g-(c.unwrapOr(H.elevationProvider.getElevation(x,n,d,e,"scene"),0)+p);break a}H=void 0}return H}}function Q(H,x,n,d,e,g){const p=c.isSome(g.offset)?g.offset:0;switch(g.mode){case "absolute-height":return n+p;case "on-the-ground":return c.unwrapOr(e.elevationProvider.getElevation(H,
x,0,d,"ground"),0);case "relative-to-ground":return n+c.unwrapOr(e.elevationProvider.getElevation(H,x,n,d,"ground"),0)+p;case "relative-to-scene":return n+c.unwrapOr(e.elevationProvider.getElevation(H,x,n,d,"scene"),0)+p}}f.getConvertedElevation=function(H,x,n,d=null){return W(H,x.x,x.y,x.hasZ?x.z:0,x.spatialReference,n,d)};f.getConvertedElevationFromVector=function(H,x,n,d,e=null){return W(H,x[0],x[1],2<x.length?x[2]:0,n,d,e)};f.getEffectiveElevationMode=z;f.getGeometryEffectiveElevationMode=w;f.getGraphicEffectiveElevationInfo=
function(H){var x=T(H);H=w(H.geometry,x);x=c.isSome(x)&&"on-the-ground"!==H?c.unwrapOr(x.offset,0)*b.getMetersPerUnit(c.unwrapOr(x.unit,"meters")):0;return{mode:H,offset:x}};f.getGraphicEffectiveElevationMode=L;f.getZForElevationMode=function(H,x,n){if(!c.isNone(n)&&n.mode){var d=H.hasZ?H.z:0,e=c.isSome(n.offset)?n.offset:0;switch(n.mode){case "absolute-height":return d-e;case "on-the-ground":return 0;case "relative-to-ground":return H=c.unwrapOr(x.elevationProvider.getElevation(H.x,H.y,H.z,H.spatialReference,
"ground"),0)+e,d-H;case "relative-to-scene":return H=c.unwrapOr(x.elevationProvider.getElevation(H.x,H.y,H.z,H.spatialReference,"scene"),0)+e,d-H}}};f.hasGraphicFeatureExpressionInfo=function(H){if("on-the-ground"===L(H))return!1;H=T(H);H=c.isSome(H)&&H.featureExpressionInfo?H.featureExpressionInfo.expression:null;return!(!H||"0"===H)};f.zValueInAbsoluteHeightMode=Q;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/reshapeGraphic/isSupportedGraphic":function(){define(["exports",
"../../../../../core/maybe","../../../../../geometry/Circle","../../../../../support/elevationInfoUtils"],function(f,c,b,z){function w(L){var T;return"graphics"!==(null==(T=L.layer)?void 0:T.type)?{result:1,geometry:null}:c.isNone(L.geometry)?{result:2,geometry:null}:"on-the-ground"!==z.getGraphicEffectiveElevationMode(L)&&z.hasGraphicFeatureExpressionInfo(L)?{result:4,geometry:null}:"point"!==L.geometry.type&&"polyline"!==L.geometry.type&&("polygon"!==L.geometry.type||L.geometry instanceof b)?{result:3,
geometry:null}:{result:0,geometry:L.geometry}}f.geometryOfSupportedGraphic=function(L){return w(L).geometry};f.isSupportedGraphic=function(L){return w(L).result};Object.defineProperty(f,"__esModule",{value:!0})})},"esri/geometry/Circle":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/unitUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/subclass ./Point ./Polygon ./projectionEllipsoid ./support/geodesicUtils ./support/webMercatorUtils ./support/WKIDUnitConversion".split(" "),
function(f,c,b,z,w,L,T,W,Q,H,x,n,d,e){var g;w=g=function(p){function C(...k){k=p.call(this,...k)||this;k.center=null;k.geodesic=!1;k.numberOfPoints=60;k.radius=1E3;k.radiusUnit="meters";return k}f._inheritsLoose(C,p);var q=C.prototype;q.normalizeCtorArgs=function(k,A){if(!k||!k.center){if(k&&k.rings)return p.prototype.normalizeCtorArgs.call(this,k,A);k={center:k}}return{...p.prototype.normalizeCtorArgs.call(this),...k,...A}};q.initialize=function(){var k=this.center;const A=this.numberOfPoints;this.hasZ=
k&&k.hasZ;if(0===this.rings.length&&k){var F=b.convertUnit(this.radius,this.radiusUnit,"meters"),u=k.spatialReference,l="geographic";if(u.isWebMercator)l="webMercator";else if(null!=e[u.wkid]||u.wkt&&0===u.wkt.indexOf("PROJCS"))l="projected";if(this.geodesic){let M;switch(l){case "webMercator":M=d.webMercatorToGeographic(k);break;case "projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case "geographic":M=
k}k=this._createGeodesicCircle(M,F,A);"webMercator"===l&&(k=d.geographicToWebMercator(k))}else{let M;"webMercator"===l||"projected"===l?M=F/this._convert2Meters(1,k.spatialReference):"geographic"===l&&(M=b.lengthToDegrees(F,"meters",x.getReferenceEllipsoid(k.spatialReference).radius));k=this._createPlanarCircle(k,M,A)}this.spatialReference=k.spatialReference;this.addRing(k.rings[0])}};q.clone=function(){const {center:k,numberOfPoints:A,radius:F,radiusUnit:u,geodesic:l}=this;return new g({center:k.clone(),
numberOfPoints:A,radius:F,radiusUnit:u,geodesic:l})};q._createGeodesicCircle=function(k,A,F){let u=0;const l=[];for(;360>u;){const M=[0,0];n.directGeodeticSolver(M,[k.x,k.y],u,A);this.hasZ&&M.push(k.z);l.push(M);u+=360/F}l.push(l[0]);return new H(l)};q._createPlanarCircle=function(k,A,F){const u=[],l=2*Math.PI/F;for(let G=0;G<F;++G){var M=l*G;M=[k.x+Math.cos(-M)*A,k.y+Math.sin(-M)*A];this.hasZ&&M.push(k.z);u.push(M)}u.push(u[0]);return new H({spatialReference:k.spatialReference,rings:[u]})};q._convert2Meters=
function(k,A){if(null!=e[A.wkid])A=e.values[e[A.wkid]];else{A=A.wkt;const F=A.lastIndexOf(",")+1,u=A.lastIndexOf("]]");A=parseFloat(A.substring(F,u))}return k*A};return C}(H);c.__decorate([z.property({type:Q})],w.prototype,"center",void 0);c.__decorate([z.property()],w.prototype,"geodesic",void 0);c.__decorate([z.property()],w.prototype,"numberOfPoints",void 0);c.__decorate([z.property()],w.prototype,"radius",void 0);c.__decorate([z.property()],w.prototype,"radiusUnit",void 0);return w=g=c.__decorate([W.subclass("esri.geometry.Circle")],
w)})},"esri/geometry/support/geodesicUtils":function(){define("exports ../../geometry ../../core/Error ../../core/unitUtils ./geodesicConstants ../Polyline ../Polygon ../Point ../SpatialReference".split(" "),function(f,c,b,z,w,L,T,W,Q){function H(q){if(!q)return null;if(q.isGeographic&&q.wkid){var k=w.spheroids[q.wkid];if(k)return k}return q.wkt&&((q=w.WKT_SPHEROID_REGEX.exec(q.wkt))&&2===q.length?(k=q[1].split(","),!k||3>k.length?q=null:(q=parseFloat(k[1]),k=parseFloat(k[2]),q=isNaN(q)||isNaN(k)?
null:{a:q,f:0===k?0:1/k})):q=null,q)?q:null}function x(q){q=H(q||Q.WGS84);if("b"in q&&"eSq"in q&&"radius"in q)return q;const k=q.a*(1-q.f);return Object.assign(q,{b:k,eSq:1-(k/q.a)**2,radius:(2*q.a+k)/3,densificationRatio:1E4/((2*q.a+k)/3)})}function n(q){return 0>q?q+360:q}function d(q,k,A){const {a:F,eSq:u}=x(A);A=Math.sqrt(u);const l=Math.sin(k[1]*w.toRadians);k=F*k[0]*w.toRadians;A=0<u?F*(1-u)*(l/(1-u*l*l)-1/(2*A)*Math.log((1-A*l)/(1+A*l)))*.5:F*l;q[0]=k;q[1]=A;return q}function e(q){return null!==
H(q)}function g(q,k){if("polyline"!==q.type&&"polygon"!==q.type)throw new b("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const {spatialReference:A}=q;if(!e(A))throw new b("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");var F="polyline"===q.type?q.paths:q.rings;const u=[],l=[0,0],M={distance:null};for(const t of F){F=[];u.push(F);F.push([t[0][0],t[0][1]]);var G=t[0][0],y=t[0][1];let r,D;for(let v=0;v<
t.length-1;v++){r=t[v+1][0];D=t[v+1][1];if(G===r&&y===D)continue;const E=[G,y];C(M,[G,y],[r,D],A);const {azimuth:N,distance:O}=M;G=O/k;if(1<G){for(y=1;y<=G-1;y++)p(l,E,N,y*k,A),F.push(l.slice(0));p(l,E,N,(O+Math.floor(G-1)*k)/2,A);F.push(l.slice(0))}p(l,E,N,O,A);F.push(l.slice(0));G=l[0];y=l[1]}}return"polyline"===q.type?new L({paths:u,spatialReference:A}):new T({rings:u,spatialReference:A})}function p(q,k,A,F,u){const l=k[0]*w.toRadians;k=k[1]*w.toRadians;A*=w.toRadians;const {a:M,b:G,f:y}=x(u);
u=Math.sin(A);A=Math.cos(A);var t=(1-y)*Math.tan(k);k=1/Math.sqrt(1+t*t);const r=t*k,D=Math.atan2(t,A);t=k*u;const v=t*t;var E=1-v,N=E*(M*M-G*G)/(G*G);const O=1+N/16384*(4096+N*(-768+N*(320-175*N))),R=N/1024*(256+N*(-128+N*(74-47*N)));N=F/(G*O);let h=2*Math.PI,K,B,J,V;for(;1E-12<Math.abs(N-h);)J=Math.cos(2*D+N),K=Math.sin(N),B=Math.cos(N),V=R*K*(J+R/4*(B*(-1+2*J*J)-R/6*J*(-3+4*K*K)*(-3+4*J*J))),h=N,N=F/(G*O)+V;F=r*K-k*B*A;E=y/16*E*(4+y*(4-3*E));F=Math.atan2(r*B+k*K*A,(1-y)*Math.sqrt(v+F*F))/w.toRadians;
q[0]=(l+(Math.atan2(K*u,k*B-r*K*A)-(1-E)*y*t*(N+E*K*(J+E*B*(-1+2*J*J)))))/w.toRadians;q[1]=F;return q}function C(q,k,A,F){var u=k[0]*w.toRadians;k=k[1]*w.toRadians;var l=A[0]*w.toRadians;A=A[1]*w.toRadians;const {a:M,b:G,f:y,radius:t}=x(F),r=l-u;var D=Math.atan((1-y)*Math.tan(k)),v=Math.atan((1-y)*Math.tan(A));F=Math.sin(D);D=Math.cos(D);const E=Math.sin(v);v=Math.cos(v);let N=1E3,O=r,R,h,K;let B,J,V;do{var aa=Math.sin(O);var ha=Math.cos(O);K=Math.sqrt(v*aa*v*aa+(D*E-F*v*ha)*(D*E-F*v*ha));if(0===
K)return q.distance=0,q.azimuth=void 0,q.reverseAzimuth=void 0,q;ha=F*E+D*v*ha;B=Math.atan2(K,ha);J=D*v*aa/K;h=1-J*J;aa=ha-2*F*E/h;isNaN(aa)&&(aa=0);V=y/16*h*(4+y*(4-3*h));R=O;O=r+(1-V)*y*J*(B+V*K*(aa+V*ha*(-1+2*aa*aa)))}while(1E-12<Math.abs(O-R)&&0<--N);if(0===N)return F=Math.acos(Math.sin(k)*Math.sin(A)+Math.cos(k)*Math.cos(A)*Math.cos(l-u))*t,u=l-u,q.azimuth=Math.atan2(Math.sin(u)*Math.cos(A),Math.cos(k)*Math.sin(A)-Math.sin(k)*Math.cos(A)*Math.cos(u))/w.toRadians,q.distance=F,q.reverseAzimuth=
void 0,q;u=h*(M*M-G*G)/(G*G);k=u/1024*(256+u*(-128+u*(74-47*u)));l=Math.atan2(D*Math.sin(O),D*E*Math.cos(O)-F*v);q.azimuth=Math.atan2(v*Math.sin(O),D*E-F*v*Math.cos(O))/w.toRadians;q.distance=G*(1+u/16384*(4096+u*(-768+u*(320-175*u))))*(B-k*K*(aa+k/4*(ha*(-1+2*aa*aa)-k/6*aa*(-3+4*K*K)*(-3+4*aa*aa))));q.reverseAzimuth=l/w.toRadians;return q}f.directGeodeticSolver=p;f.geodesicAreas=function(q,k="square-meters"){if(q.some(l=>!e(l.spatialReference)))throw new b("geodesic-areas:invalid-spatial-reference",
"the input geometries spatial reference is not supported");const A=[];for(var F=0;F<q.length;F++){var u=q[F];const {radius:l,densificationRatio:M}=x(u.spatialReference);A.push(g(u,l*M))}q=[];F=[0,0];u=[0,0];for(let l=0;l<A.length;l++){const {rings:M,spatialReference:G}=A[l];let y=0;for(let t=0;t<M.length;t++){const r=M[t];d(F,r[0],G);d(u,r[r.length-1],G);let D=u[0]*F[1]-F[0]*u[1];for(let v=0;v<r.length-1;v++)d(F,r[v+1],G),d(u,r[v],G),D+=u[0]*F[1]-F[0]*u[1];y+=D}y=z.convertUnit(y,"square-meters",k);
q.push(y/-2)}return q};f.geodesicDensify=g;f.geodesicDistance=function(q,k,A="meters"){if(!q||!k)throw new b("geodesic-distance:missing-parameters","one or both input parameters are missing");if(!q.spatialReference||!k.spatialReference)throw new b("geodesic-distance:invalid-parameters","one or both input points do not have a spatial reference");if(!q.spatialReference.equals(k.spatialReference))throw new b("geodesic-distance:invalid-parameters","spatial references of input parameters do not match");
const {spatialReference:F}=q;if(!e(F))throw new b("geodesic-distance:not-supported","input geometry spatial reference is not supported");if(q.equals(k))return{distance:0,azimuth:0,reverseAzimuth:0};const u={distance:null};C(u,[q.x,q.y],[k.x,k.y],F);u.distance=z.convertUnit(u.distance,"meters",A);u.azimuth=n(u.azimuth);u.reverseAzimuth=n(u.reverseAzimuth);return u};f.geodesicLengths=function(q,k="meters"){if(!q)throw new b("geodesic-lengths:invalid-geometries","the input geometries type is not supported");
if(q.some(u=>!e(u.spatialReference)))throw new b("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const A=[];for(let u=0;u<q.length;u++){var F=q[u];const {spatialReference:l}=F;F="polyline"===F.type?F.paths:F.rings;let M=0;for(let G=0;G<F.length;G++){const y=F[G];let t=0;for(let r=1;r<y.length;r++){const D=y[r-1][0],v=y[r][0],E=y[r-1][1],N=y[r][1];if(E!==N||D!==v){const O={distance:null};C(O,[D,E],[v,N],l);t+=O.distance}}M+=t}M=z.convertUnit(M,
"meters",k);A.push(M)}return A};f.inverseGeodeticSolver=C;f.isSupported=e;f.pointFromDistance=function(q,k,A){if(!q||null==k||null==A)throw new b("point-from-distance:missing-parameters","one or more input parameters are missing or undefined");if(0>A||360<A)throw new b("point-from-distance:-of-bounds","azimuth is restricted to angles between, and including, 0\u00b0 to 360\u00b0 degrees");if(!q.spatialReference)throw new b("point-from-distance:missing-spatial-reference","the input point must have a spatial reference");
const {spatialReference:F}=q;if(!e(F))throw new b("geodesic-distance:not-supported","input geometry spatial reference is not supported");const u=[0,0];p(u,[q.x,q.y],A,k,F);return new W({x:u[0],y:u[1],spatialReference:F})};Object.defineProperty(f,"__esModule",{value:!0})})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(f,c){const b=Math.PI/180;var z=c.earth.radius;const w=c.earth.eccentricitySquared;z={a1:z*w,a2:z*w*z*w,a3:z*w*w/2,a4:z*w*z*w*2.5,a5:z*
w+z*w*w/2,a6:1-w};c={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:c.earth.radius,f:c.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:c.moon.radius,f:c.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:c.mars.radius,f:c.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,
f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,
f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},
104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:c.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};f.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;f.earthEllipsoidConstants=z;f.spheroids=c;f.toRadians=b;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/transformGraphic/isSupportedGraphic":function(){define(["exports",
"../../../../../core/has","../../../../../core/maybe","../../../../../support/elevationInfoUtils"],function(f,c,b,z){f.isSupportedGraphic=function(w){var L;if("graphics"!==(null==(L=w.layer)?void 0:L.type))return 1;if(b.isNone(w.geometry))return 2;switch(w.geometry.type){case "point":break;case "polygon":case "polyline":case "multipoint":case "extent":case "mesh":return 0;default:return 3}return(L=b.isSome(w.symbol)&&"point-3d"===w.symbol.type&&w.symbol.symbolLayers)&&0<L.length&&L.some(T=>"object"===
T.type)?"on-the-ground"!==z.getGraphicEffectiveElevationMode(w)&&z.hasGraphicFeatureExpressionInfo(w)?4:0:5};Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/draw/support/layerUtils":function(){define(["exports"],function(f){f.addUniqueLayer=function(c,b,z){if(b&&c&&c.map){({map:c}=c);var w=c.layers.find(L=>L===b);w||c.add(b,z);void 0!==z&&null!==z&&c.layers.reorder(w,z)}};Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/interactive/keybindings":function(){define(["exports"],
function(f){f.SKETCH_KEYS={redo:"r",undo:"z",center:"Alt",constraint:"Shift",snappingToggle:"Control",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "};Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/interactive/snapping/SnappingManager":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Evented ../../../core/HandleOwner ../../../core/maybe ../../../core/promiseUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/trackingUtils ../../../chunks/vec2 ../../../geometry/SpatialReference ./FeatureSnappingEngine ./SelfSnappingEngine ./SnappingOptions ./snappingUtils ./candidates/IntersectionSnappingCandidate".split(" "),
function(f,c,b,z,w,L,T,W,Q,H,x,n,d,e,g,p,C,q,k,A,F){f.SnappingManager=function(u){function l(G){G=u.call(this,G)||this;G.options=new k;G.engines=[];G._currentMainCandidate=null;G._currentOtherActiveCandidates=[];return G}c._inheritsLoose(l,u);var M=l.prototype;M.initialize=function(){this.handles.add([e.reaction(()=>{const {effectiveFeatureEnabled:G,effectiveSelfEnabled:y,touchSensitivityMultiplier:t,distance:r}=this.options;return{effectiveFeatureEnabled:G,effectiveSelfEnabled:y,touchSensitivityMultiplier:t,
distance:r}},()=>{this.doneSnapping();this.emit("changed")}),this.watch("options",G=>{for(const y of this.engines)y.options=G},!0),W.init(this.view,"ready",G=>this.onViewReady(G),!0)])};M.destroy=function(){this.destroyEngines()};M.onViewReady=function(G){this.destroyEngines();if(G){var y,t;this.engines=[new q.SelfSnappingEngine({view:this.view,options:this.options}),new C.FeatureSnappingEngine({view:this.view,spatialReference:null!=(y=null==(t=this.view)?void 0:t.spatialReference)?y:p.WGS84,options:this.options})]}};
M.destroyEngines=function(){for(const G of this.engines)G.destroy();this.engines.length=0};M.snap=function(){var G=c._asyncToGenerator(function*(y,t,r){const D=t.coordinateHelper.pointToVector(y),v=yield this.fetchCandidates(D,t,r);return{get valid(){return!T.isAborted(r)},apply:()=>{const {snappedPoint:E,hints:N}=this.processCandidates(D,v,t);this.removeVisualization();L.isSome(t.visualizer)&&this.handles.add(t.visualizer.draw(N,{coordinateHelper:t.coordinateHelper,elevationInfo:t.elevationInfo,
view:this.view}),"visualization-handle");return E}}});return function(y,t,r){return G.apply(this,arguments)}}();M.update=function(G,y){this.removeVisualization();let t=G;const r=[];if(L.isSome(this._currentMainCandidate)){const D=y.coordinateHelper;G=D.pointToVector(G);const v=this._currentMainCandidate.constraint.closestTo(G);if(A.squareDistance(A.anyMapPointToScreenPoint(G,D,y.elevationInfo,this.view),A.anyMapPointToScreenPoint(v,D,y.elevationInfo,this.view))<this.squaredPointProximityThreshold(y.pointer)){t=
D.vectorToDehydratedPoint(v);this._currentMainCandidate.targetPoint=v;r.push(...this._currentMainCandidate.hints);for(const E of this._currentOtherActiveCandidates)E.targetPoint=v,r.push(...E.hints)}else this._currentMainCandidate=null,this._currentOtherActiveCandidates=[]}L.isSome(y.visualizer)&&this.handles.add(y.visualizer.draw(r,{coordinateHelper:y.coordinateHelper,elevationInfo:y.elevationInfo,view:this.view}),"visualization-handle");return t};M.doneSnapping=function(){this.removeVisualization();
this._currentMainCandidate=null;this._currentOtherActiveCandidates=[]};M.removeVisualization=function(){this.handles.remove("visualization-handle")};M.fetchCandidates=function(){var G=c._asyncToGenerator(function*(y,t,r){return(yield Promise.all(this.engines.map(D=>D.fetchCandidates(y,t,r)))).flat()});return function(y,t,r){return G.apply(this,arguments)}}();M.processCandidates=function(G,y,t){if(1>y.length)return this.doneSnapping(),{snappedPoint:t.coordinateHelper.vectorToDehydratedPoint(G),hints:[]};
A.sortCandidatesInPlace(G,y);const r=this._currentMainCandidate;if(L.isSome(r)){const D=this.findOldConstraintInNewCandidates(r,y);if(0<=D)if(y[D]instanceof F.IntersectionSnappingCandidate){if(g.squaredDistance(G,r.targetPoint)<this.squaredPointProximityThreshold(t.pointer))return this.updateSnappingCandidate(r,y,t)}else return this.intersectWithOtherCandidates(D,y,G,t)}return this.intersectWithOtherCandidates(0,y,G,t)};M.findOldConstraintInNewCandidates=function(G,y){return G instanceof F.IntersectionSnappingCandidate?
0<=this.findOldCandidateIndex(y,G.first)&&0<=this.findOldCandidateIndex(y,G.second)?0:-1:this.findOldCandidateIndex(y,G)};M.intersectWithOtherCandidates=function(G,y,t,r){const D=y[G],v=[],E=r.coordinateHelper;for(let N=0;N<y.length;++N){if(N===G)continue;const O=y[N];for(const R of D.constraint.intersect(O.constraint)){const h=E.fromXYZ(R.intersection,D.targetPoint[2]);v.push([new F.IntersectionSnappingCandidate(E,h,D,O),A.squareDistance(A.anyMapPointToScreenPoint(t,r.coordinateHelper,r.elevationInfo,
this.view),A.anyMapPointToScreenPoint(h,r.coordinateHelper,r.elevationInfo,this.view))])}}return 0<v.length&&(v.sort((N,O)=>N[1]-O[1]),v[0][1]<this.squaredPointProximityThreshold(r.pointer))?this.updateSnappingCandidate(v[0][0],y,r):this.updateSnappingCandidate(D,y,r)};M.updateSnappingCandidate=function(G,y,t){this.doneSnapping();this._currentMainCandidate=G;const r=this._currentMainCandidate.targetPoint,D=[];D.push(...G.hints);for(const v of y){if(G instanceof F.IntersectionSnappingCandidate){if(v.constraint.objectEqual(G.first.constraint)||
v.constraint.objectEqual(G.second.constraint))continue}else if(v.constraint.objectEqual(G.constraint))continue;v.constraint.check(r)&&(v.targetPoint=r,this._currentOtherActiveCandidates.push(v),D.push(...v.hints))}return{snappedPoint:t.coordinateHelper.vectorToDehydratedPoint(r),hints:D}};M.squaredPointProximityThreshold=function(G){return"touch"===G?this.squaredTouchProximityThreshold:this.squaredMouseProximityTreshold};M.findOldCandidateIndex=function(G,y){let t=-1;for(let r=0;r<G.length;++r)if(y.constraint.objectEqual(G[r].constraint)){t=
r;break}return t};c._createClass(l,[{key:"updating",get:function(){return this.engines.some(G=>G.updating)}},{key:"squaredMouseProximityTreshold",get:function(){return this.options.distance*this.options.distance}},{key:"squaredTouchProximityThreshold",get:function(){const {distance:G,touchSensitivityMultiplier:y}=this.options,t=G*y;return t*t}},{key:"test",get:function(){return{visualizationsActive:this.handles.has("visualization-handle"),engines:this.engines}}}]);return l}(z.EventedMixin(w.HandleOwner));
b.__decorate([Q.property({constructOnly:!0})],f.SnappingManager.prototype,"view",void 0);b.__decorate([Q.property()],f.SnappingManager.prototype,"options",void 0);b.__decorate([Q.property({readOnly:!0})],f.SnappingManager.prototype,"updating",null);b.__decorate([Q.property()],f.SnappingManager.prototype,"engines",void 0);b.__decorate([Q.property()],f.SnappingManager.prototype,"squaredMouseProximityTreshold",null);b.__decorate([Q.property()],f.SnappingManager.prototype,"squaredTouchProximityThreshold",
null);f.SnappingManager=b.__decorate([d.subclass("esri.views.interactive.snapping.SnappingManager")],f.SnappingManager);Object.defineProperty(f,"__esModule",{value:!0})})},"esri/chunks/vec2":function(){define(["exports","./common"],function(f,c){function b(J,V){J[0]=V[0];J[1]=V[1];return J}function z(J,V,aa){J[0]=V;J[1]=aa;return J}function w(J,V,aa){J[0]=V[0]+aa[0];J[1]=V[1]+aa[1];return J}function L(J,V,aa){J[0]=V[0]-aa[0];J[1]=V[1]-aa[1];return J}function T(J,V,aa){J[0]=V[0]*aa[0];J[1]=V[1]*aa[1];
return J}function W(J,V,aa){J[0]=V[0]/aa[0];J[1]=V[1]/aa[1];return J}function Q(J,V){J[0]=Math.ceil(V[0]);J[1]=Math.ceil(V[1]);return J}function H(J,V){J[0]=Math.floor(V[0]);J[1]=Math.floor(V[1]);return J}function x(J,V,aa){J[0]=Math.min(V[0],aa[0]);J[1]=Math.min(V[1],aa[1]);return J}function n(J,V,aa){J[0]=Math.max(V[0],aa[0]);J[1]=Math.max(V[1],aa[1]);return J}function d(J,V){J[0]=Math.round(V[0]);J[1]=Math.round(V[1]);return J}function e(J,V,aa){J[0]=V[0]*aa;J[1]=V[1]*aa;return J}function g(J,
V,aa,ha){J[0]=V[0]+aa[0]*ha;J[1]=V[1]+aa[1]*ha;return J}function p(J,V){const aa=V[0]-J[0];J=V[1]-J[1];return Math.sqrt(aa*aa+J*J)}function C(J,V){const aa=V[0]-J[0];J=V[1]-J[1];return aa*aa+J*J}function q(J){const V=J[0];J=J[1];return Math.sqrt(V*V+J*J)}function k(J){const V=J[0];J=J[1];return V*V+J*J}function A(J,V){J[0]=-V[0];J[1]=-V[1];return J}function F(J,V){J[0]=1/V[0];J[1]=1/V[1];return J}function u(J,V){var aa=V[0];const ha=V[1];aa=aa*aa+ha*ha;0<aa&&(aa=1/Math.sqrt(aa),J[0]=V[0]*aa,J[1]=
V[1]*aa);return J}function l(J,V){return J[0]*V[0]+J[1]*V[1]}function M(J,V,aa){V=V[0]*aa[1]-V[1]*aa[0];J[0]=J[1]=0;J[2]=V;return J}function G(J,V,aa,ha){const la=V[0];V=V[1];J[0]=la+ha*(aa[0]-la);J[1]=V+ha*(aa[1]-V);return J}function y(J,V){V=V||1;const aa=2*c.RANDOM()*Math.PI;J[0]=Math.cos(aa)*V;J[1]=Math.sin(aa)*V;return J}function t(J,V,aa){const ha=V[0];V=V[1];J[0]=aa[0]*ha+aa[2]*V;J[1]=aa[1]*ha+aa[3]*V;return J}function r(J,V,aa){const ha=V[0];V=V[1];J[0]=aa[0]*ha+aa[2]*V+aa[4];J[1]=aa[1]*ha+
aa[3]*V+aa[5];return J}function D(J,V,aa){const ha=V[0];V=V[1];J[0]=aa[0]*ha+aa[3]*V+aa[6];J[1]=aa[1]*ha+aa[4]*V+aa[7];return J}function v(J,V,aa){const ha=V[0];V=V[1];J[0]=aa[0]*ha+aa[4]*V+aa[12];J[1]=aa[1]*ha+aa[5]*V+aa[13];return J}function E(J,V,aa,ha){const la=V[0]-aa[0];V=V[1]-aa[1];const ra=Math.sin(ha);ha=Math.cos(ha);J[0]=la*ha-V*ra+aa[0];J[1]=la*ra+V*ha+aa[1];return J}function N(J,V){var aa=J[0];J=J[1];const ha=V[0];V=V[1];let la=aa*aa+J*J;0<la&&(la=1/Math.sqrt(la));let ra=ha*ha+V*V;0<ra&&
(ra=1/Math.sqrt(ra));aa=(aa*ha+J*V)*la*ra;return 1<aa?0:-1>aa?Math.PI:Math.acos(aa)}function O(J){return"vec2("+J[0]+", "+J[1]+")"}function R(J,V){return J[0]===V[0]&&J[1]===V[1]}function h(J,V){const aa=J[0];J=J[1];const ha=V[0];V=V[1];return Math.abs(aa-ha)<=c.EPSILON*Math.max(1,Math.abs(aa),Math.abs(ha))&&Math.abs(J-V)<=c.EPSILON*Math.max(1,Math.abs(J),Math.abs(V))}function K(J,V,aa,ha,la){let ra=V[0]-aa[0];aa=V[1]-aa[1];la=(ha[0]*ra+ha[1]*aa)*(la-1);ra=ha[0]*la;aa=ha[1]*la;J[0]=V[0]+ra;J[1]=V[1]+
aa;return J}var B=Object.freeze({__proto__:null,copy:b,set:z,add:w,subtract:L,multiply:T,divide:W,ceil:Q,floor:H,min:x,max:n,round:d,scale:e,scaleAndAdd:g,distance:p,squaredDistance:C,length:q,squaredLength:k,negate:A,inverse:F,normalize:u,dot:l,cross:M,lerp:G,random:y,transformMat2:t,transformMat2d:r,transformMat3:D,transformMat4:v,rotate:E,angle:N,str:O,exactEquals:R,equals:h,projectAndScale:K,len:q,sub:L,mul:T,div:W,dist:p,sqrDist:C,sqrLen:k});f.add=w;f.angle=N;f.ceil=Q;f.copy=b;f.cross=M;f.dist=
p;f.distance=p;f.div=W;f.divide=W;f.dot=l;f.equals=h;f.exactEquals=R;f.floor=H;f.inverse=F;f.len=q;f.length=q;f.lerp=G;f.max=n;f.min=x;f.mul=T;f.multiply=T;f.negate=A;f.normalize=u;f.projectAndScale=K;f.random=y;f.rotate=E;f.round=d;f.scale=e;f.scaleAndAdd=g;f.set=z;f.sqrDist=C;f.sqrLen=k;f.squaredDistance=C;f.squaredLength=k;f.str=O;f.sub=L;f.subtract=L;f.transformMat2=t;f.transformMat2d=r;f.transformMat3=D;f.transformMat4=v;f.vec2=B})},"esri/views/interactive/snapping/FeatureSnappingEngine":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/HandleOwner ../../../core/Handles ../../../core/MapUtils ../../../core/maybe ../../../core/promiseUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec3f64 ./SnappingConstraint ./snappingUtils ./candidates/EdgeSnappingCandidate ./candidates/FeatureSnappingCandidate ./candidates/RightAngleSnappingCandidate".split(" "),
function(f,c,b,z,w,L,T,W,Q,H,x,n,d,e,g,p,C,q,k,A,F){c.FeatureSnappingEngine=function(M){function G(t){t=M.call(this,t)||this;t.sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null}};return t}b._inheritsLoose(G,M);var y=G.prototype;y.initialize=function(){this.updatingHandles.add(this,"snappingSources",()=>{this.notifyChange("updating")},1);W.isSome(this.view)&&this.handles.add([this.view.on("layerview-create",t=>this.updateLayerView(t.layer,
t.layerView)),this.view.on("layerview-destroy",t=>this.updateLayerView(t.layer,null))])};y.updateLayerView=function(t,r){for(const [,D]of this.snappingSources)D.snappingSource.layerSource.layer===t&&(D.layerView=r)};y.destroy=function(){this._set("options",null);for(const [,t]of this.snappingSources)t.destroy()};y.fetchCandidates=function(){var t=b._asyncToGenerator(function*(r,D,v){if(!this.options.effectiveFeatureEnabled)return[];var E=[];const N=this.computeScreeenSizeDistanceParameters(r,D),O=
{distance:N,point:r,coordinateHelper:D.coordinateHelper,types:this.types,filter:null};for(const [,{snappingSource:R,layerView:h}]of this.snappingSources)!R.layerSource.enabled||W.isSome(h)&&h.suspended||E.push(R.fetchCandidates(O,v).then(K=>K.filter(B=>!this.candidateIsExcluded(R,B,D.excludeFeature))));E=(yield Q.eachAlwaysValues(E)).flat();this.addRightAngleCandidates(E,r,N,D);Q.throwIfAborted(v);q.sortCandidatesInPlace(r,E);return E});return function(r,D,v){return t.apply(this,arguments)}}();y.addRightAngleCandidates=
function(t,r,D,v){var E,N,O,R,h,K,B,J;const V=W.isSome(v.vertexHandle)?null==(E=v.vertexHandle.rightEdge)?void 0:null==(N=E.rightVertex)?void 0:N.pos:W.isSome(v.editGeometryOperations)&&"polygon"===v.editGeometryOperations.data.type?null==(O=W.unwrap(null==(R=v.editGeometryOperations.data.components[0])?void 0:R.getFirstVertex()))?void 0:O.pos:null;E=W.isSome(v.vertexHandle)?null==(h=v.vertexHandle.leftEdge)?void 0:null==(K=h.leftVertex)?void 0:K.pos:W.isSome(v.editGeometryOperations)?null==(B=W.unwrap(null==
(J=v.editGeometryOperations.data.components[0])?void 0:J.getLastVertex()))?void 0:B.pos:null;h=t.length;for(K=0;K<h;K++)this.addRightAngleCandidate(t[K],E,r,D,v,t),this.addRightAngleCandidate(t[K],V,r,D,v,t)};y.addRightAngleCandidate=function(t,r,D,v,E,N){if(!W.isNone(r)&&t instanceof k.EdgeSnappingCandidate){var O=t.constraint.closestTo(r),R=(O[0]-D[0])/v.x;D=(O[1]-D[1])/v.y;1>=R*R+D*D&&(E=E.coordinateHelper,N.push(new F.RightAngleSnappingCandidate({coordinateHelper:E,targetPoint:O,otherVertex:r,
otherVertexType:0,previousVertex:t.constraint.start,constraint:new C.RayConstraint(E,r,O),objectId:t.objectId})))}};y.computeScreeenSizeDistanceParameters=function(t,r){const D=this.options.distance*("touch"===r.pointer?this.options.touchSensitivityMultiplier:1);return W.isNone(this.view)?{x:D,y:D}:"2d"===this.view.type?{x:D*this.view.resolution,y:D*this.view.resolution}:this.computeScreeenSizeDistanceParameters3D(t,D,this.view,r)};y.computeScreeenSizeDistanceParameters3D=function(t,r,D,v){const {coordinateHelper:E,
elevationInfo:N}=v,O=D.state.camera.computeScreenPixelSizeAt(q.anyMapPointToRender(t,E,N,D,l))*D.renderCoordsHelper.unitInMeters/D.mapCoordsHelper.unitInMeters;r*=O;const R=this.computeScreenMagnitudeOfMapOffset(t,O,0,D,v);t=this.computeScreenMagnitudeOfMapOffset(t,0,O,D,v);return{x:r/R,y:r/t}};y.computeScreenMagnitudeOfMapOffset=function(t,r,D,v,{coordinateHelper:E,elevationInfo:N}){const O=E.clone(t);O[0]+=r;O[1]+=D;t=q.anyMapPointToScreenPoint(t,E,N,v);E=q.anyMapPointToScreenPoint(O,E,N,v);v=E.x-
t.x;E=E.y-t.y;return Math.sqrt(v*v+E*E)};y.candidateIsExcluded=function(t,r,D){if(W.isNone(D))return!1;r=this.getCandidateObjectId(r);if(W.isNone(r))return!1;t=t.layerSource.layer;return"graphics"===t.type?D.uid===r:D.sourceLayer===t&&D.attributes&&"objectIdField"in t?D.attributes[t.objectIdField]===r:!1};y.getCandidateObjectId=function(t){return t instanceof A.FeatureSnappingCandidate?t.objectId:null};y.createSourceInfo=function(t){const r=this.createFeatureSnappingSourceType(t);if(W.isNone(r))return null;
if("loading"in r)return this.updatingHandles.addPromise(r.loading.then(()=>{this.destroyed||this.notifyChange("snappingSources")})),null;const D=W.isSome(this.view)?this.view.allLayerViews.find(v=>v.layer===t.layer):null;return new u(r.source,D)};y.createFeatureSnappingSourceType=function(t){switch(t.layer.type){case "feature":case "geojson":case "csv":case "subtype-group":case "wfs":return this.createFeatureSnappingSourceFeatureLayer(t);case "graphics":return this.createFeatureSnappingSourceGraphicsLayer(t)}return null};
y.createFeatureSnappingSourceFeatureLayer=function(t){switch(t.layer.source.type){case "feature-layer":var r=this.getSourceModule("featureService");return W.isSome(r.module)?{source:new r.module.FeatureServiceSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:t})}:{loading:r.loader};case "memory":case "csv":case "geojson":case "wfs":if("mesh"!==t.layer.geometryType)return r=this.getSourceModule("featureCollection"),W.isSome(r.module)?{source:new r.module.FeatureCollectionSnappingSource({layerSource:t})}:
{loading:r.loader}}return null};y.createFeatureSnappingSourceGraphicsLayer=function(t){const r=this.getSourceModule("graphics");return W.isSome(r.module)?{source:new r.module.GraphicsSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:t})}:{loading:r.loader}};y.getSourceModule=function(t){const r=this.sourceModules[t];return W.isNone(r.loader)?(t=this.loadSourceModule(t).then(D=>{r.module=D}),r.loader=t,{module:r.module,loader:t}):{module:r.module,loader:r.loader}};y.loadSourceModule=
function(t){switch(t){case "featureService":return this.updatingHandles.addPromise(new Promise(function(r,D){f(["./featureSources/FeatureServiceSnappingSource"],r,D)}));case "featureCollection":return this.updatingHandles.addPromise(new Promise(function(r,D){f(["./featureSources/FeatureCollectionSnappingSource"],r,D)}));case "graphics":return this.updatingHandles.addPromise(new Promise(function(r,D){f(["./featureSources/GraphicsSnappingSource"],r,D)}))}return null};b._createClass(G,[{key:"updating",
get:function(){return T.someMap(this.snappingSources,({snappingSource:t})=>t.updating)||this.updatingHandles.updating}},{key:"snappingSources",get:function(){var t;const r=this._get("snappingSources")||new Map,D=new Map;if(null!=(t=this.options)&&t.featureSources)for(const E of this.options.featureSources.items){t=E.layer.uid;var v=r.get(t);v?(r.delete(t),D.set(t,v)):E.layer.loaded?(v=this.createSourceInfo(E),W.isSome(v)&&D.set(t,v)):this.updatingHandles.addPromise(E.layer.load())}for(const [,E]of r)E.destroy();
return D}},{key:"types",get:function(){return 3}}]);return G}(w.HandleOwner);z.__decorate([x.property({constructOnly:!0})],c.FeatureSnappingEngine.prototype,"spatialReference",void 0);z.__decorate([x.property({constructOnly:!0})],c.FeatureSnappingEngine.prototype,"view",void 0);z.__decorate([x.property()],c.FeatureSnappingEngine.prototype,"options",void 0);z.__decorate([x.property({readOnly:!0})],c.FeatureSnappingEngine.prototype,"updating",null);z.__decorate([x.property({readOnly:!0})],c.FeatureSnappingEngine.prototype,
"snappingSources",null);c.FeatureSnappingEngine=z.__decorate([g.subclass("esri.views.interactive.snapping.FeatureSnappingEngine")],c.FeatureSnappingEngine);let u=function(){function M(G,y){this.snappingSource=G;this.layerView=y;this.handles=new L;y=this.snappingSource.layerSource.layer;"refresh"in y&&this.handles.add(y.on("refresh",()=>G.refresh()));this.handles.add([H.init(G,"updating",t=>G.layerSource.updating=t,!0),H.init(G,"availability",t=>G.layerSource.availability=t,!0)])}M.prototype.destroy=
function(){this.snappingSource.destroy();this.handles.destroy()};return M}();const l=p.create();Object.defineProperty(c,"__esModule",{value:!0})})},"esri/views/interactive/snapping/SnappingConstraint":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/vec2 ../../../chunks/vec2f64 ./Settings ./snappingUtils ../../support/geometry2dUtils".split(" "),function(f,c,b,z,w,L,T){let W=function(g){this.coordinateHelper=g},Q=function(g){function p(q,k){q=g.call(this,q)||this;
q.point=k;return q}c._inheritsLoose(p,g);var C=p.prototype;C.objectEqual=function(q){return q instanceof p?L.objectEqual(this.point,q.point):!1};C.check=function(q){return b.squaredDistance(q,this.point)<w.defaults.pointThreshold};C.closestTo=function(){return this.coordinateHelper.clone(this.point)};C.intersect=function(q){const k=[];q instanceof H?k.push(...T.intersectLineAndPoint({start:q.start,end:q.end,type:q instanceof n?1:0},this.point)):q instanceof e&&k.push(...T.intersectCircleAndPoint(q.center,
q.radius,this.point));return k.map(A=>new d(this.coordinateHelper,A,this,q))};return p}(W),H=function(g){function p(q,k,A){q=g.call(this,q)||this;q.start=k;q.end=A;return q}c._inheritsLoose(p,g);var C=p.prototype;C.objectEqual=function(q){return q instanceof p?L.objectEqual(this.start,q.start)&&L.objectEqual(this.end,q.end):!1};C.intersect=function(q){const k=[];q instanceof Q?k.push(...T.intersectLineAndPoint({start:this.start,end:this.end,type:this instanceof n?1:0},q.point)):q instanceof p?k.push(...T.intersectLineAndRay({start:this.start,
end:this.end,type:this instanceof n?1:0},{start:q.start,end:q.end,type:q instanceof n?1:0})):q instanceof e&&k.push(...T.intersectLineLikeAndCircle({start:this.start,end:this.end,type:this instanceof n?1:0},q.center,q.radius));return k.map(A=>new d(this.coordinateHelper,A,this,q))};return p}(W),x=function(g){function p(q,k,A){q=g.call(this,q,k,A)||this;q.dir=z.create();q.p=z.create();return q}c._inheritsLoose(p,g);var C=p.prototype;C.objectEqual=function(q){return q instanceof p?g.prototype.objectEqual.call(this,
q):!1};C.check=function(q){b.subtract(this.dir,this.end,this.start);b.subtract(this.p,q,this.start);return 0<=b.dot(this.dir,this.p)?T.pointToLineDistance(q,this.start,this.end)<w.defaults.pointOnLineThreshold:!1};C.closestTo=function(q){const k=this.coordinateHelper.clone(q);T.projectPointToRay(k,q,this.start,this.end);return k};return p}(H),n=function(g){function p(q,k,A){return g.call(this,q,k,A)||this}c._inheritsLoose(p,g);var C=p.prototype;C.objectEqual=function(q){return q instanceof p?g.prototype.objectEqual.call(this,
q):!1};C.check=function(q){return T.pointToLineDistance(q,this.start,this.end)<w.defaults.pointOnLineThreshold};C.closestTo=function(q){const k=this.coordinateHelper.clone(q);T.projectPointToLine(k,q,this.start,this.end);return k};return p}(H),d=function(g){function p(q,k,A,F){q=g.call(this,q)||this;q.intersection=k;q.first=A;q.second=F;return q}c._inheritsLoose(p,g);var C=p.prototype;C.objectEqual=function(q){return q instanceof p?this.first.objectEqual(q.first)&&this.second.objectEqual(q.second):
!1};C.check=function(){return!1};C.closestTo=function(q){q=this.coordinateHelper.clone(q);b.copy(q,this.intersection);return q};C.intersect=function(){return[]};return p}(W),e=function(g){function p(q,k,A){q=g.call(this,q)||this;q.center=k;q.radius=A;return q}c._inheritsLoose(p,g);var C=p.prototype;C.objectEqual=function(q){return q instanceof p?this.center[0]===q.center[0]&&this.center[1]===q.center[1]&&this.radius===q.radius:!1};C.check=function(){return!1};C.closestTo=function(q){const k=this.coordinateHelper.clone(q);
T.projectPointToCircle(k,q,this.center,this.radius);return k};C.intersect=function(q){const k=[];q instanceof H?k.push(...T.intersectLineLikeAndCircle({start:q.start,end:q.end,type:q instanceof n?1:0},this.center,this.radius)):q instanceof Q&&k.push(...T.intersectCircleAndPoint(this.center,this.radius,q.point));return k.map(A=>new d(this.coordinateHelper,A,this,q))};return p}(W);f.IntersectionConstraint=d;f.LineConstraint=n;f.LineLikeConstraint=H;f.PlanarCircleConstraint=e;f.PointConstraint=Q;f.RayConstraint=
x;f.SnappingConstraint=W;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/chunks/vec2f64":function(){define(["exports"],function(f){function c(){return[0,0]}function b(p){return[p[0],p[1]]}function z(p,C){return[p,C]}function w(p){const C=[0,0],q=Math.min(2,p.length);for(let k=0;k<q;++k)C[k]=p[k];return C}function L(p,C){return new Float64Array(p,C,2)}function T(){return[0,0]}function W(){return[1,1]}function Q(){return[1,0]}function H(){return[0,1]}const x=[0,0],n=[1,1],d=[1,0],e=[0,1];
var g=Object.freeze({__proto__:null,create:c,clone:b,fromValues:z,fromArray:w,createView:L,zeros:T,ones:W,unitX:Q,unitY:H,ZEROS:x,ONES:n,UNIT_X:d,UNIT_Y:e});f.ONES=n;f.UNIT_X=d;f.UNIT_Y=e;f.ZEROS=x;f.clone=b;f.create=c;f.createView=L;f.fromArray=w;f.fromValues=z;f.ones=W;f.unitX=Q;f.unitY=H;f.vec2f64=g;f.zeros=T})},"esri/views/interactive/snapping/snappingUtils":function(){define("exports ../../../core/screenUtils ../../../chunks/vec2 ../../../chunks/vec3f64 ../../../geometry/Point ../../../support/elevationInfoUtils".split(" "),
function(f,c,b,z,w,L){function T(x,n,d,e,g=z.create()){x=n.toXYZ(x);x[2]=L.getConvertedElevationFromVector(e,x,n.spatialReference,d)||0;e.renderCoordsHelper.toRenderCoords(x,n.spatialReference,g);return g}const W=z.create(),Q=c.createScreenPointArray(),H=new w;f.anyMapPointToRender=T;f.anyMapPointToScreenPoint=function(x,n,d,e){if("2d"===e.type)return e.toScreen(n.vectorToPoint(x,H));T(x,n,d,e,W);e.state.camera.projectToScreen(W,Q);return c.createScreenPoint(Q[0],Q[1])};f.anyMapPointsToRenderWithEqualZ=
function(x,n,d,e,g,p,C){x=d.toXYZ(x);n=d.toXYZ(n);const q=L.getConvertedElevationFromVector(g,x,d.spatialReference,e);e=L.getConvertedElevationFromVector(g,n,d.spatialReference,e);e=(null==q?e:null==e?q:Math.min(q,e))||0;x[2]=e;n[2]=e;g.renderCoordsHelper.toRenderCoords(x,d.spatialReference,p);g.renderCoordsHelper.toRenderCoords(n,d.spatialReference,C)};f.objectEqual=function(x,n){const d=x.length===n.length&&x[0]===n[0]&&x[1]===n[1];switch(x.length){case 2:return d;case 3:return d&&x[2]===n[2];case 4:return d&&
x[3]===n[3]}return!1};f.sortCandidatesInPlace=function(x,n){n.sort((d,e)=>{d=b.squaredDistance(d.targetPoint,x);e=b.squaredDistance(e.targetPoint,x);return d-e})};f.squareDistance=function(x,n){const d=x.x-n.x;x=x.y-n.y;return d*d+x*x};Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/support/geometry2dUtils":function(){define(["exports","../../core/mathUtils","../../chunks/vec2","../../chunks/vec2f64"],function(f,c,b,z){function w(d,e){return d[0]*e[1]-d[1]*e[0]}function L(d,e,g){e=
b.dot(g,e)/b.squaredLength(g);return b.scale(d,g,e)}function T(d,e,g,p,C=g){b.subtract(Q,p,g);b.subtract(x,e,C);L(n,x,Q);return b.add(d,C,n)}function W(d,e,g,p){b.subtract(Q,e,g);e=p/b.length(Q);return b.scaleAndAdd(d,g,Q,e)}const Q=z.create(),H=z.create(),x=z.create(),n=z.create();f.cross=w;f.intersectCircleAndPoint=function(d,e,g){W(x,g,d,e);return c.floatEqualAbsolute(x[0],g[0])&&c.floatEqualAbsolute(x[1],g[1])?[z.clone(g)]:[]};f.intersectLineAndPoint=function(d,e){T(x,e,d.start,d.end);return c.floatEqualAbsolute(x[0],
e[0])&&c.floatEqualAbsolute(x[1],e[1])?[z.clone(e)]:[]};f.intersectLineAndRay=function(d,e){const g=d.start;var p=e.start,C=e.end;const q=b.subtract(Q,d.end,g);var k=b.subtract(H,C,p);C=w(q,k);if(1E-6>=Math.abs(C))return[];p=b.subtract(x,g,p);k=w(k,p)/C;C=w(q,p)/C;if(0<=k){if(0<=C||1===e.type)return[b.scaleAndAdd(n,g,q,k)]}else if(1===d.type&&(0<=C||1===e.type))return[b.scaleAndAdd(n,g,q,k)];return[]};f.intersectLineLikeAndCircle=function(d,e,g){const p=[],C=b.subtract(Q,d.end,d.start);var q=b.subtract(H,
d.start,e);e=b.squaredLength(C);const k=2*b.dot(C,q);g=b.squaredLength(q)-g*g;g=k*k-4*e*g;0===g?(e=-k/(2*e),(1===d.type||0<=e)&&p.push(b.scaleAndAdd(n,d.start,C,e))):0<g&&(g=Math.sqrt(g),q=(-k+g)/(2*e),(1===d.type||0<=q)&&p.push(b.scaleAndAdd(n,d.start,C,q)),e=(-k-g)/(2*e),(1===d.type||0<=e)&&p.push(b.scaleAndAdd(x,d.start,C,e)));return p};f.pointToLineDistance=function(d,e,g){return Math.abs((e[0]-d[0])*(g[1]-d[1])-(e[1]-d[1])*(g[0]-d[0]))/b.distance(e,g)};f.projectPoint=L;f.projectPointToCircle=
W;f.projectPointToLine=T;f.projectPointToRay=function(d,e,g,p){b.subtract(Q,p,g);b.subtract(x,e,g);e=b.dot(Q,x)/b.squaredLength(Q);return 0<e?b.scaleAndAdd(d,g,Q,e):b.copy(d,g)};Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/EdgeSnappingCandidate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../SnappingConstraint","./FeatureSnappingCandidate","../hints/LineSnappingHint"],function(f,c,b,z,w){z=function(L){function T(W){return L.call(this,
{...W,constraint:new b.LineConstraint(W.coordinateHelper,W.edgeStart,W.edgeEnd)})||this}c._inheritsLoose(T,L);c._createClass(T,[{key:"hints",get:function(){return[new w.LineSnappingHint(1,this.constraint.start,this.constraint.end)]}}]);return T}(z.FeatureSnappingCandidate);f.EdgeSnappingCandidate=z;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/FeatureSnappingCandidate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","./SnappingCandidate"],
function(f,c,b){b=function(z){function w({coordinateHelper:L,targetPoint:T,objectId:W,constraint:Q}){L=z.call(this,L,T,Q)||this;L.objectId=W;return L}c._inheritsLoose(w,z);return w}(b.SnappingCandidate);f.FeatureSnappingCandidate=b;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/SnappingCandidate":function(){define(["exports"],function(f){f.SnappingCandidate=function(c,b,z){this.coordinateHelper=c;this.targetPoint=b;this.constraint=z};Object.defineProperty(f,
"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/LineSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../snappingUtils ./SnappingHint".split(" "),function(f,c,b,z,w,L){z.getLogger("esri.views.interactive.snapping.hints.LineSnappingHint");b=function(T){function W(Q,H,x,n=!0,d=!0){var e=T.call(this)||this;e.type=Q;e.lineStart=H;e.lineEnd=x;e.fadeLeft=n;e.fadeRight=d;return e}c._inheritsLoose(W,T);W.prototype.equals=
function(Q){return Q instanceof W?this.type===Q.type&&w.objectEqual(this.lineStart,Q.lineStart)&&w.objectEqual(this.lineEnd,Q.lineEnd)&&this.fadeLeft===Q.fadeLeft&&this.fadeRight===Q.fadeRight:!1};return W}(L.SnappingHint);f.LineSnappingHint=b;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/SnappingHint":function(){define(["exports"],function(f){f.SnappingHint=function(){};Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/RightAngleSnappingCandidate":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","./SnappingCandidate","../hints/LineSnappingHint","../hints/RightAngleSnappingHint"],function(f,c,b,z,w){b=function(L){function T({coordinateHelper:W,targetPoint:Q,constraint:H,previousVertex:x,otherVertex:n,otherVertexType:d,objectId:e}){W=L.call(this,W,Q,H)||this;W.previousVertex=x;W.otherVertex=n;W.otherVertexType=d;W.objectId=e;return W}c._inheritsLoose(T,L);c._createClass(T,[{key:"hints",get:function(){const W=this.previousVertex,Q=1===this.otherVertexType?
this.otherVertex:this.targetPoint,H=1===this.otherVertexType?this.targetPoint:this.otherVertex;return[new z.LineSnappingHint(0,Q,H),new z.LineSnappingHint(1,W,Q),new w.RightAngleSnappingHint(this.previousVertex,Q,H)]}}]);return T}(b.SnappingCandidate);f.RightAngleSnappingCandidate=b;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/RightAngleSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../snappingUtils ./SnappingHint".split(" "),
function(f,c,b,z,w,L){z.getLogger("esri.views.interactive.snapping.hints.RightAngleSnappingHint");b=function(T){function W(Q,H,x){var n=T.call(this)||this;n.previousVertex=Q;n.centerVertex=H;n.nextVertex=x;return n}c._inheritsLoose(W,T);W.prototype.equals=function(Q){return Q instanceof W?w.objectEqual(this.previousVertex,Q.previousVertex)&&w.objectEqual(this.centerVertex,Q.centerVertex)&&w.objectEqual(this.nextVertex,Q.nextVertex):!1};return W}(L.SnappingHint);f.RightAngleSnappingHint=b;Object.defineProperty(f,
"__esModule",{value:!0})})},"esri/views/interactive/snapping/SelfSnappingEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Collection ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ./LineSnapper ./ParallelLineSnapper ./RightAngleSnapper ./RightAngleTriangleSnapper ./snappingUtils".split(" "),
function(f,c,b,z,w,L,T,W,Q,H,x,n,d,e,g){f.SelfSnappingEngine=function(p){function C(k){k=p.call(this,k)||this;k.updating=!1;k._snappers=new w;return k}c._inheritsLoose(C,p);var q=C.prototype;q.initialize=function(){this._snappers.push(new n.ParallelLineSnapper(this.view,this.options),new x.LineSnapper(this.view,this.options),new d.RightAngleSnapper(this.view,this.options),new e.RightAngleTriangleSnapper(this.view,this.options))};q.fetchCandidates=function(){var k=c._asyncToGenerator(function*(A,F){if(!this.options.effectiveSelfEnabled)return[];
const u=[];for(const l of this._snappers.items)u.push(...l.snap(A,F));g.sortCandidatesInPlace(A,u);return u});return function(A,F){return k.apply(this,arguments)}}();c._createClass(C,[{key:"options",set:function(k){this._set("options",k);for(const A of this._snappers)A.options=k}}]);return C}(z);b.__decorate([L.property({readOnly:!0})],f.SelfSnappingEngine.prototype,"updating",void 0);b.__decorate([L.property({constructOnly:!0})],f.SelfSnappingEngine.prototype,"view",void 0);b.__decorate([L.property()],
f.SelfSnappingEngine.prototype,"options",null);f.SelfSnappingEngine=b.__decorate([H.subclass("esri.views.interactive.snapping.SelfSnappingEngine")],f.SelfSnappingEngine);Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/interactive/snapping/LineSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2f64 ./SnappingAlgorithm ./snappingUtils ./candidates/LineSnappingCandidate ../../support/geometry2dUtils".split(" "),function(f,
c,b,z,w,L,T,W){w=function(Q){function H(){return Q.apply(this,arguments)||this}c._inheritsLoose(H,Q);var x=H.prototype;x.snapNewVertex=function(n,d){var e=d.editGeometryOperations.data.components[0],g=e.edges.length;const p=[];if(1>g)return p;const C=L.anyMapPointToScreenPoint(n,d.coordinateHelper,d.elevationInfo,this.view);g=e=e.edges[g-1];do this.edgeExceedsShortLineThreshold(g,d)&&this._processCandidateProposal(g.leftVertex.pos,g.rightVertex.pos,n,C,d,p),g=g.leftVertex.leftEdge;while(g&&g!==e);
return p};x.snapExistingVertex=function(n,d){const e=[],g=b.unwrap(d.vertexHandle);var p=g.component;if(2>p.edges.length)return e;const C=L.anyMapPointToScreenPoint(n,d.coordinateHelper,d.elevationInfo,this.view);var q=g.leftEdge;const k=g.rightEdge;q&&k&&this.edgeExceedsShortLineThreshold(q,d)&&this.edgeExceedsShortLineThreshold(k,d)&&this._processCandidateProposal(q.leftVertex.pos,k.rightVertex.pos,n,C,d,e);q=p=p.edges[0];do q!==g.leftEdge&&q!==g.rightEdge&&this.edgeExceedsShortLineThreshold(q,
d)&&this._processCandidateProposal(q.leftVertex.pos,q.rightVertex.pos,n,C,d,e),q=q.rightVertex.rightEdge;while(q&&q!==p);return e};x._processCandidateProposal=function(n,d,e,g,p,C){const q=W.projectPointToLine(z.create(),e,n,d),k=p.coordinateHelper;e=k.fromXYZ(q,k.getZ(e,0));L.squareDistance(g,L.anyMapPointToScreenPoint(e,k,p.elevationInfo,this.view))<this.squaredProximityTreshold(p.pointer)&&C.push(new T.LineSnappingCandidate({coordinateHelper:p.coordinateHelper,lineStart:n,lineEnd:d,targetPoint:e}))};
return H}(w.SnappingAlgorithm);f.LineSnapper=w;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/interactive/snapping/SnappingAlgorithm":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/maybe","./Settings","./snappingUtils"],function(f,c,b,z,w){let L=function(){function T(Q,H){this.view=Q;this.options=H;this.squaredShortLineThreshold=z.defaults.shortLineThreshold*z.defaults.shortLineThreshold}var W=T.prototype;W.snap=function(Q,H){return b.isSome(H.vertexHandle)?
"vertex"!==H.vertexHandle.type?[]:this.snapExistingVertex(Q,H):this.snapNewVertex(Q,H)};W.edgeExceedsShortLineThreshold=function(Q,H){return this.exceedsShortLineThreshold(Q.leftVertex.pos,Q.rightVertex.pos,H)};W.exceedsShortLineThreshold=function(Q,H,{elevationInfo:x,editGeometryOperations:n}){n=n.data.coordinateHelper;return 0===this.squaredShortLineThreshold||w.squareDistance(w.anyMapPointToScreenPoint(H,n,x,this.view),w.anyMapPointToScreenPoint(Q,n,x,this.view))>this.squaredShortLineThreshold};
W.squaredProximityTreshold=function(Q){return"touch"===Q?this.squaredTouchProximityThreshold:this.squaredMouseProximityTreshold};c._createClass(T,[{key:"squaredMouseProximityTreshold",get:function(){return this.options.distance*this.options.distance}},{key:"squaredTouchProximityThreshold",get:function(){const {distance:Q,touchSensitivityMultiplier:H}=this.options,x=Q*H;return x*x}}]);return T}();f.SnappingAlgorithm=L;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/LineSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/mathUtils ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../SnappingConstraint ./SnappingCandidate ../hints/LineSnappingHint".split(" "),
function(f,c,b,z,w,L,T,W){T=function(x){function n({coordinateHelper:d,lineStart:e,lineEnd:g,targetPoint:p}){d=x.call(this,d,p,new L.LineConstraint(d,e,g))||this;d.referenceLineHint=new W.LineSnappingHint(2,e,g);return d}c._inheritsLoose(n,x);n.prototype.lineEndClosestToTarget=function(){const d=this.constraint.start,e=this.constraint.end;return 0<b.sign(z.dot(z.subtract(H,e,d),z.subtract(Q,this.targetPoint,d)))?e:d};c._createClass(n,[{key:"hints",get:function(){return[this.referenceLineHint,new W.LineSnappingHint(0,
this.lineEndClosestToTarget(),this.targetPoint)]}}]);return n}(T.SnappingCandidate);const Q=w.create(),H=w.create();f.LineSnappingCandidate=T;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/interactive/snapping/ParallelLineSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2 ../../../chunks/vec2f64 ./Settings ./SnappingAlgorithm ./snappingUtils ./candidates/ParallelLineSnappingCandidate ../../support/geometry2dUtils".split(" "),
function(f,c,b,z,w,L,T,W,Q,H){T=function(x){function n(){var e=x.apply(this,arguments)||this;e._tmpProjection=w.create();return e}c._inheritsLoose(n,x);var d=n.prototype;d.snapNewVertex=function(e,g){var p=g.editGeometryOperations.data.components[0],C=p.edges.length,q=p.vertices.length;const k=[];if(2>C)return k;const A=W.anyMapPointToScreenPoint(e,g.coordinateHelper,g.elevationInfo,this.view);q=p.vertices[q-1];const F=p.vertices[0];C=p=p.edges[C-1];do this.edgeExceedsShortLineThreshold(C,g)&&(this._checkEdgeForParalleLines(C,
q.pos,e,A,g,k),this._checkEdgeForParalleLines(C,F.pos,e,A,g,k)),C=C.leftVertex.leftEdge;while(C&&C!==p);return k};d.snapExistingVertex=function(e,g){const p=[],C=b.unwrap(g.vertexHandle);var q=C.component;if(3>q.edges.length)return p;const k=W.anyMapPointToScreenPoint(e,g.coordinateHelper,g.elevationInfo,this.view),A=C.leftEdge,F=C.rightEdge,u=q.vertices[0],l=q.vertices[q.vertices.length-1];let M=q=q.edges[0];do M!==A&&M!==F&&this.edgeExceedsShortLineThreshold(M,g)&&(A&&this._checkEdgeForParalleLines(M,
A.leftVertex.pos,e,k,g,p),F&&this._checkEdgeForParalleLines(M,F.rightVertex.pos,e,k,g,p),C===u?this._checkEdgeForParalleLines(M,l.pos,e,k,g,p):C===l&&this._checkEdgeForParalleLines(M,u.pos,e,k,g,p)),M=M.rightVertex.rightEdge;while(M&&M!==q);return p};d._checkEdgeForParalleLines=function(e,g,p,C,q,k){var A=e.leftVertex.pos;const F=e.rightVertex.pos;H.projectPointToLine(this._tmpProjection,g,A,F);z.squaredDistance(this._tmpProjection,g)<L.defaults.parallelLineThreshold||(H.projectPointToLine(this._tmpProjection,
p,A,F,g),A=q.coordinateHelper,p=A.fromXYZ(this._tmpProjection,A.getZ(p,0)),W.squareDistance(C,W.anyMapPointToScreenPoint(p,A,q.elevationInfo,this.view))<this.squaredProximityTreshold(q.pointer)&&!this.parallelToPreviousCandidate(e,k)&&k.push(new Q.ParallelLineSnappingCandidate({coordinateHelper:A,referenceLine:e,lineStart:g,targetPoint:p})))};d.parallelToPreviousCandidate=function(e,g){const p=e.leftVertex.pos,C=e.rightVertex.pos;for(const q of g)if(H.projectPointToLine(this._tmpProjection,C,q.constraint.start,
q.constraint.end,p),z.squaredDistance(this._tmpProjection,C)<L.defaults.parallelLineThreshold)return q.addReferenceLine(e),!0;return!1};return n}(T.SnappingAlgorithm);f.ParallelLineSnapper=T;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/ParallelLineSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec2 ../SnappingConstraint ./SnappingCandidate ../hints/LineSnappingHint ../hints/ParallelSnappingHint".split(" "),
function(f,c,b,z,w,L,T){w=function(W){function Q({coordinateHelper:H,referenceLine:x,lineStart:n,targetPoint:d}){const e=H.clone(n);b.subtract(e,b.add(e,e,x.rightVertex.pos),x.leftVertex.pos);H=W.call(this,H,d,new z.LineConstraint(H,n,e))||this;H._referenceLines=[{edge:x,fadeLeft:!0,fadeRight:!0}];return H}c._inheritsLoose(Q,W);Q.prototype.addReferenceLine=function(H){const x={edge:H,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach(n=>{H.rightVertex.rightEdge===n.edge&&(n.fadeLeft=!1,x.fadeRight=
!1);H.leftVertex.leftEdge===n.edge&&(n.fadeRight=!1,x.fadeLeft=!1)});this._referenceLines.push(x)};c._createClass(Q,[{key:"hints",get:function(){return[new L.LineSnappingHint(0,this.constraint.start,this.targetPoint),new T.ParallelSnappingHint(this.constraint.start,this.targetPoint),...this._referenceLines.map(H=>new L.LineSnappingHint(1,H.edge.leftVertex.pos,H.edge.rightVertex.pos,H.fadeLeft,H.fadeRight))]}}]);return Q}(w.SnappingCandidate);f.ParallelLineSnappingCandidate=w;Object.defineProperty(f,
"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/ParallelSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../snappingUtils ./SnappingHint".split(" "),function(f,c,b,z,w,L){z.getLogger("esri.views.interactive.snapping.hints.ParallelSnappingHint");b=function(T){function W(Q,H){var x=T.call(this)||this;x.lineStart=Q;x.lineEnd=H;return x}c._inheritsLoose(W,T);W.prototype.equals=function(Q){return Q instanceof
W?w.objectEqual(this.lineStart,Q.lineStart)&&w.objectEqual(this.lineEnd,Q.lineEnd):!1};return W}(L.SnappingHint);f.ParallelSnappingHint=b;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/interactive/snapping/RightAngleSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/mathUtils ../../../core/maybe ../../../chunks/vec2 ../../../chunks/vec2f64 ./SnappingAlgorithm ./SnappingConstraint ./snappingUtils ./candidates/RightAngleSnappingCandidate".split(" "),
function(f,c,b,z,w,L,T,W,Q,H){T=function(x){function n(){var e=x.apply(this,arguments)||this;e._tmp=L.create();return e}c._inheritsLoose(n,x);var d=n.prototype;d.snapNewVertex=function(e,g){var p=g.editGeometryOperations.data.components[0],C=p.vertices.length;const q=[];if(2>C)return q;const k=Q.anyMapPointToScreenPoint(e,g.coordinateHelper,g.elevationInfo,this.view);C=p.vertices[C-1];this._checkForSnappingCandidate(q,C.leftEdge,C.pos,e,C.leftEdge.leftVertex.pos,C.pos,g,e,k);p=p.vertices[0];this._checkForSnappingCandidate(q,
p.rightEdge,p.pos,e,p.rightEdge.rightVertex.pos,p.pos,g,e,k);return q};d.snapExistingVertex=function(e,g){const p=[];var C=z.unwrap(g.vertexHandle),q=C.component;const k=q.vertices.length;if(3>k)return p;const A=Q.anyMapPointToScreenPoint(e,g.coordinateHelper,g.elevationInfo,this.view);var F=C.leftEdge;C=C.rightEdge;const u=q.vertices[0];q=q.vertices[k-1];if(!F)return this._checkForSnappingCandidate(p,u.rightEdge.rightVertex.rightEdge,u.rightEdge.rightVertex.pos,e,u.rightEdge.rightVertex.rightEdge.rightVertex.pos,
u.rightEdge.rightVertex.pos,g,e,A),p;if(!C)return this._checkForSnappingCandidate(p,q.leftEdge.leftVertex.leftEdge,q.leftEdge.leftVertex.pos,e,q.leftEdge.leftVertex.leftEdge.leftVertex.pos,q.leftEdge.leftVertex.pos,g,e,A),p;F&&F.leftVertex.leftEdge&&(q=F.leftVertex.leftEdge,this._checkForSnappingCandidate(p,q,F.leftVertex.pos,e,q.leftVertex.pos,F.leftVertex.pos,g,e,A));C&&C.rightVertex.rightEdge&&(F=C.rightVertex.rightEdge,this._checkForSnappingCandidate(p,F,C.rightVertex.pos,e,F.rightVertex.pos,
C.rightVertex.pos,g,e,A));return p};d._checkForSnappingCandidate=function(e,g,p,C,q,k,A,F,u){this.edgeExceedsShortLineThreshold(g,A)&&(w.subtract(this._tmp,g.rightVertex.pos,g.leftVertex.pos),g=L.fromValues(this._tmp[1],-this._tmp[0]),p=w.dot(g,w.subtract(this._tmp,C,p))/w.squaredLength(g),C=A.coordinateHelper,F=C.fromXYZ(w.scaleAndAdd(L.create(),k,g,p),C.getZ(F,0)),Q.squareDistance(u,Q.anyMapPointToScreenPoint(F,C,A.elevationInfo,this.view))<this.squaredProximityTreshold(A.pointer)&&e.push(new H.RightAngleSnappingCandidate({coordinateHelper:C,
targetPoint:F,constraint:new W.RayConstraint(C,k,w.scaleAndAdd(C.createVector(),k,g,b.sign(p))),previousVertex:q,otherVertex:k,otherVertexType:1})))};return n}(T.SnappingAlgorithm);f.RightAngleSnapper=T;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/interactive/snapping/RightAngleTriangleSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2 ../../../chunks/vec2f64 ./SnappingAlgorithm ./snappingUtils ./candidates/RightAngleTriangleSnappingCandidate ../../support/geometry2dUtils".split(" "),
function(f,c,b,z,w,L,T,W,Q){L=function(H){function x(){return H.apply(this,arguments)||this}c._inheritsLoose(x,H);var n=x.prototype;n.snapNewVertex=function(d,e){const g=e.editGeometryOperations.data.components[0],p=[],C=g.vertices.length;if("polygon"!==e.editGeometryOperations.data.type||2>C)return p;this._processCandidateProposal(g.vertices[0].pos,g.vertices[C-1].pos,d,e,p);return p};n.snapExistingVertex=function(d,e){const g=[],p=b.unwrap(e.vertexHandle),C=p.component;if(2>C.edges.length||"polyline"===
e.editGeometryOperations.data.type&&(0===p.index||p.index===C.vertices.length-1))return g;this._processCandidateProposal(p.leftEdge.leftVertex.pos,p.rightEdge.rightVertex.pos,d,e,g);return g};n._processCandidateProposal=function(d,e,g,p,C){if(this.exceedsShortLineThreshold(d,e,p)){var q=z.lerp(w.create(),d,e,.5),k=.5*z.distance(d,e);k=Q.projectPointToCircle(w.create(),g,q,k);q=p.coordinateHelper;k=q.fromXYZ(k,q.getZ(g,0));g=T.anyMapPointToScreenPoint(g,q,p.elevationInfo,this.view);T.squareDistance(g,
T.anyMapPointToScreenPoint(k,q,p.elevationInfo,this.view))<this.squaredProximityTreshold(p.pointer)&&C.push(new W.RightAngleTriangleSnappingCandidate({coordinateHelper:q,targetPoint:k,point1:d,point2:e}))}};return x}(L.SnappingAlgorithm);f.RightAngleTriangleSnapper=L;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/RightAngleTriangleSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../SnappingConstraint ./SnappingCandidate ../hints/LineSnappingHint ../hints/RightAngleSnappingHint".split(" "),
function(f,c,b,z,w,L,T,W){L=function(H){function x({coordinateHelper:n,targetPoint:d,point1:e,point2:g}){n=H.call(this,n,d,new w.PlanarCircleConstraint(n,b.lerp(Q,e,g,.5),.5*b.distance(e,g)))||this;n.p1=e;n.p2=g;return n}c._inheritsLoose(x,H);c._createClass(x,[{key:"hints",get:function(){return[new T.LineSnappingHint(1,this.targetPoint,this.p1),new T.LineSnappingHint(1,this.targetPoint,this.p2),new W.RightAngleSnappingHint(this.p1,this.targetPoint,this.p2)]}}]);return x}(L.SnappingCandidate);const Q=
z.create();f.RightAngleTriangleSnappingCandidate=L;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/IntersectionSnappingCandidate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../SnappingConstraint","./SnappingCandidate","../hints/IntersectionSnappingHint"],function(f,c,b,z,w){z=function(L){function T(W,Q,H,x){W=L.call(this,W,Q,new b.IntersectionConstraint(W,Q,H.constraint,x.constraint))||this;W.first=H;W.second=x;return W}
c._inheritsLoose(T,L);c._createClass(T,[{key:"hints",get:function(){this.first.targetPoint=this.targetPoint;this.second.targetPoint=this.targetPoint;return[...this.first.hints,...this.second.hints,new w.IntersectionSnappingHint(this.targetPoint)]}}]);return T}(z.SnappingCandidate);f.IntersectionSnappingCandidate=z;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/IntersectionSnappingHint":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers",
"../snappingUtils","./SnappingHint"],function(f,c,b,z){z=function(w){function L(T){var W=w.call(this)||this;W.intersectionPoint=T;return W}c._inheritsLoose(L,w);L.prototype.equals=function(T){return T instanceof L?b.objectEqual(this.intersectionPoint,T.intersectionPoint):!1};return L}(z.SnappingHint);f.IntersectionSnappingHint=z;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/widgets/Sketch/support/OperationHandle":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/compilerUtils ../../../core/Evented ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass".split(" "),
function(f,c,b,z,w,L,T,W,Q,H){f.OperationHandle=function(x){function n(e){e=x.call(this,e)||this;e.cancelled=!1;e.history={undo:[],redo:[]};e.type=null;return e}c._inheritsLoose(n,x);var d=n.prototype;d.addToHistory=function(e){this.history.redo=[];this.history.undo.push(e)};d.resetHistory=function(){this.history.redo=[];this.history.undo=[]};d.canUndo=function(){return 0<this.history.undo.length};d.canRedo=function(){return 0<this.history.redo.length};d.complete=function(){this.reset();this.onEnd();
this.emit("complete")};d.cancel=function(){this.cancelled=!0;this.complete()};d.reset=function(){this.activeComponent.reset()};d.refreshComponent=function(){const e=this.activeComponent;e&&("box"!==e.type&&"reshape"!==e.type&&"graphic-mover"!==e.type||e.refresh())};c._createClass(n,[{key:"tool",get:function(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case "graphic-mover":case "move-3d":return"move";case "box":case "transform-3d":return"transform";case "reshape":case "reshape-3d":return"reshape";
case "draw-2d":case "draw-3d":return this.activeComponent.geometryType;default:z.neverReached(this.activeComponent)}return null}},{key:"undo",set:function(e){this._set("undo",()=>{this.canUndo()&&e()})}},{key:"redo",set:function(e){this._set("redo",()=>{this.canRedo()&&e()})}}]);return n}(w.EventedAccessor);b.__decorate([L.property()],f.OperationHandle.prototype,"activeComponent",void 0);b.__decorate([L.property()],f.OperationHandle.prototype,"cancelled",void 0);b.__decorate([L.property()],f.OperationHandle.prototype,
"history",void 0);b.__decorate([L.property()],f.OperationHandle.prototype,"tool",null);b.__decorate([L.property()],f.OperationHandle.prototype,"type",void 0);b.__decorate([L.property()],f.OperationHandle.prototype,"canUndo",null);b.__decorate([L.property()],f.OperationHandle.prototype,"canRedo",null);b.__decorate([L.property()],f.OperationHandle.prototype,"onEnd",void 0);b.__decorate([L.property()],f.OperationHandle.prototype,"undo",null);b.__decorate([L.property()],f.OperationHandle.prototype,"redo",
null);b.__decorate([L.property()],f.OperationHandle.prototype,"toggleTool",void 0);b.__decorate([L.property()],f.OperationHandle.prototype,"addToSelection",void 0);b.__decorate([L.property()],f.OperationHandle.prototype,"removeFromSelection",void 0);f.OperationHandle=b.__decorate([H.subclass("esri.widgets.Sketch.support.OperationHandle")],f.OperationHandle);f.CreateOperationHandle=function(x){function n(){return x.apply(this,arguments)||this}c._inheritsLoose(n,x);return n}(f.OperationHandle);b.__decorate([L.property()],
f.CreateOperationHandle.prototype,"activeComponent",void 0);f.CreateOperationHandle=b.__decorate([H.subclass("esri.widgets.Sketch.support.CreateOperationHandle")],f.CreateOperationHandle);f.UpdateOperationHandle=function(x){function n(d){return x.call(this,d)||this}c._inheritsLoose(n,x);return n}(f.OperationHandle);b.__decorate([L.property()],f.UpdateOperationHandle.prototype,"activeComponent",void 0);f.UpdateOperationHandle=b.__decorate([H.subclass("esri.widgets.Sketch.support.UpdateOperationHandle")],
f.UpdateOperationHandle);Object.defineProperty(f,"__esModule",{value:!0})})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/events ../core/HandleOwner ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ../layers/support/fieldUtils ../views/interactive/snapping/SnappingOptions ./Attachments ./FeatureForm ./FeatureTemplates ./Spinner ./Widget ./Editor/EditorViewModel ./FeatureTemplates/ItemList ./support/Heading ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ./support/widgetUtils ../intl/substitute".split(" "),function(f,
c,b,z,w,L,T,W,Q,H,x,n,d,e,g,p,C,q,k,A,F,u,l,M,G,y,t,r){function D(v){v.focus()}b=function(v){function E(O,R){var h=v.call(this,O,R)||this;h._candidateCommitted=!1;h._featureForm=new p;h._attachments=new g({visibleElements:{addSubmitButton:!1,cancelAddButton:!1,cancelUpdateButton:!1,deleteButton:!1,errorMessage:!1,progressBar:!1,updateButton:!1}});h._featureTemplates=new C;h._filterText="";h._prompt=null;h._spinner=new q;h.activeWorkflow=null;h.allowedWorkflows=null;h.headingLevel=4;h.iconClass="esri-icon-edit";
h.label=void 0;h.layerInfos=null;h.messages=null;h.messagesCommon=null;h.messagesTemplates=null;h.snappingOptions=new e;h.supportingWidgetDefaults=null;h.view=null;h.viewModel=new A;h._handleHeaderClickOrKeyDown=K=>{K.currentTarget["data-prevent-back"]||h._handleBack.call(f._assertThisInitialized(h),K)};h._setCandidateFeature=(K,B=!1)=>{if(!h._candidateCommitted){var J=h._assertActiveUpdateWorkflow();J.data.edits.feature=K;B&&(J.next(),h._candidateCommitted=!0)}};h._handleSave=h._handleSave.bind(f._assertThisInitialized(h));
h._handleBack=h._handleBack.bind(f._assertThisInitialized(h));h._handleDone=h._handleDone.bind(f._assertThisInitialized(h));h._handleDelete=h._handleDelete.bind(f._assertThisInitialized(h));h._handleAdd=h._handleAdd.bind(f._assertThisInitialized(h));h._handleEdit=h._handleEdit.bind(f._assertThisInitialized(h));h._handleAttachmentAdd=h._handleAttachmentAdd.bind(f._assertThisInitialized(h));h._handleAttachmentUpdate=h._handleAttachmentUpdate.bind(f._assertThisInitialized(h));h._handleAttachmentDelete=
h._handleAttachmentDelete.bind(f._assertThisInitialized(h));return h}f._inheritsLoose(E,v);var N=E.prototype;N.initialize=function(){this.own([L.init(this,"headingLevel",O=>{this._featureForm.headingLevel=O+1;this._featureTemplates.headingLevel=O+1}),L.init(this,"viewModel",O=>{this._featureForm.viewModel=O?O.featureFormViewModel:null;this._attachments.viewModel=O?O.attachmentsViewModel:null;this._featureTemplates.viewModel=O?O.featureTemplatesViewModel:null;this._spinner.viewModel=O?O.spinnerViewModel:
null}),L.init(this,"view",(O,R)=>{const h=`editor-${this.id}-spinner`;R&&R.ui.remove(this._spinner,h);O&&O.ui.add(this._spinner,{key:h,position:"manual"})}),L.on(this,"viewModel.sketchViewModel","create",()=>{this.scheduleRender()}),L.on(this,"viewModel.activeWorkflow","cancel-request",({controller:O})=>{const {messages:R,messagesCommon:h}=this;this._prompt={title:R.cancelRequestTitle,message:R.cancelRequestWarningMessage,options:[{label:h.form.no,type:"neutral",action:()=>{O.deny();return this._prompt=
null}},{label:h.form.yes,type:"negative",action:()=>{O.allow();this._prompt=null}}]};this.scheduleRender()}),L.init(this,"supportingWidgetDefaults",O=>{O&&(this._featureForm.set(O.featureForm),this._attachments.set(O.attachments),this._featureTemplates.set(O.featureTemplates),this.viewModel.sketchViewModel.set(O.sketch))}),L.watch(this,"_attachments.error",O=>{if(O){var {messages:R,messagesCommon:h}=this;this._prompt={title:R.errorWarningTitle,message:O.message,options:[{label:h.form.ok,type:"neutral",
action:()=>{this._prompt=null}}]}}}),L.watch(this,"viewModel.failures",O=>{if(O){var {messages:R}=this,[{error:h,retry:K,cancel:B}]=O;this._prompt={title:R.errorWarningTitle,message:r.substitute(R.errorWarningMessageTemplate,{errorMessage:h.message}),options:[{label:R.retry,type:"positive",action:()=>{K();this._prompt=null}},{label:R.ignore,type:"neutral",action:()=>{B();return this._prompt=null}}]}}}),L.watch(this,"viewModel.state",O=>{"awaiting-update-feature-candidate"===O&&(this._candidateCommitted=
!1)}),L.watch(this,["_attachments.selectedFile","_attachments.submitting"],()=>this.scheduleRender()),L.whenNot(this,"viewModel.activeWorkflow",()=>this._featureTemplates.filterText="")])};N.destroy=function(){this._attachments.destroy();this._featureForm.destroy();this._featureTemplates.destroy()};N.startCreateWorkflowAtFeatureTypeSelection=function(){return this.viewModel.startCreateWorkflowAtFeatureTypeSelection()};N.startCreateWorkflowAtFeatureCreation=function(O){return this.viewModel.startCreateWorkflowAtFeatureCreation(O)};
N.startCreateWorkflowAtFeatureEdit=function(O){return this.viewModel.startCreateWorkflowAtFeatureEdit(O)};N.startUpdateWorkflowAtFeatureSelection=function(){return this.viewModel.startUpdateWorkflowAtFeatureSelection()};N.startUpdateWorkflowAtMultipleFeatureSelection=function(O){return this.viewModel.startUpdateWorkflowAtMultipleFeatureSelection(O)};N.startUpdateWorkflowAtFeatureEdit=function(O){return this.viewModel.startUpdateWorkflowAtFeatureEdit(O)};N.deleteFeatureFromWorkflow=function(){return this.viewModel.deleteFeatureFromWorkflow()};
N.cancelWorkflow=function(O){return this.viewModel.cancelWorkflow(O)};N.render=function(){const {_attachments:O,viewModel:R}=this;if(!R)return y.tsx("div",{class:"esri-editor esri-widget esri-widget--panel"});const {state:h}=R,K=this._prompt?y.tsx("div",{class:"esri-editor__overlay",key:"overlay"},this.renderPrompt({message:this._prompt.message,title:this._prompt.title,options:this._prompt.options})):null;return y.tsx("div",{class:"esri-editor esri-widget esri-widget--panel"},R.syncing||O.submitting?
this.renderProgressBar():null,"disabled"===h?null:"ready"===h?this.renderLanding():"awaiting-feature-creation-info"===h?this.renderTemplates():"editing-new-feature"===h||"editing-existing-feature"===h?this.renderAttributeEditing():"awaiting-feature-to-update"===h?this.renderFeatureUpdating():"awaiting-update-feature-candidate"===h?this.renderFeatureList():"awaiting-feature-to-create"===h?this.renderFeatureCreation():"adding-attachment"===h?this.renderAttachmentAdding():"editing-attachment"===h?this.renderAttachmentEditing():
null,K)};N.renderTemplates=function(){return y.tsx("div",{class:"esri-editor__temp-wrapper",key:"wrapper"},this.renderHeader(this.messages.selectTemplate,!0),y.tsx("div",{key:"content",class:"esri-editor__content"},this._featureTemplates.render()))};N.renderAttributeEditing=function(){var {viewModel:O}=this;const R=O.featureFormViewModel;var h=this._assertActiveCreateOrUpdateWorklow();const K=h.data.edits.feature;var B="update"===h.type&&!h.data.edits.modified||O.syncing||0<R.inputFields.length&&
!R.valid;const {messages:J,messagesCommon:V}=this;O="create"===h.type?V.add:V.update;B=[{label:O,type:"primary",disabled:B,clickHandler:this._handleSave}];let aa=!1;"update"===h.type&&(h.data.editableItem.hasAttachments&&(aa=!0),h.data.editableItem.supports.includes("delete")&&B.push({label:V.delete,type:"tertiary",clickHandler:this._handleDelete}));h=this._getLabel(K);return y.tsx("div",{class:"esri-editor__temp-wrapper",key:"wrapper"},this.renderHeader(h,!0),y.tsx("div",{key:"content",class:this.classes("esri-editor__content",
"esri-editor__scroller")},y.tsx("div",{class:"esri-editor__content-group"},0<R.inputFields.length?this._featureForm.render():this.renderMessage(r.substitute(J.clickToFinishTemplate,{button:O})),aa?y.tsx("div",{key:"attachments"},y.tsx("div",null,J.attachments),this._attachments.render()):null)),this.renderControls(B))};N.renderAttachmentAdding=function(){const {_attachments:O,messages:R,messagesCommon:h}=this,K=[{label:O.submitting?h.cancel:h.add,disabled:O.submitting||!O.selectedFile,type:"primary",
clickHandler:this._handleAttachmentAdd}];return y.tsx("div",{class:"esri-editor__temp-wrapper",key:"wrapper"},this.renderHeader(R.addAttachment,!0,O.submitting),y.tsx("div",{key:"content",class:this.classes("esri-editor__content","esri-editor__scroller")},O.render()),this.renderControls(K))};N.renderAttachmentEditing=function(){const {_attachments:O,messages:R,messagesCommon:h}=this,K=[{label:h.update,disabled:O.submitting||!O.selectedFile,type:"primary",clickHandler:this._handleAttachmentUpdate},
{label:h.delete,disabled:O.submitting,type:"tertiary",clickHandler:this._handleAttachmentDelete}];return y.tsx("div",{class:"esri-editor__temp-wrapper",key:"wrapper"},this.renderHeader(R.editAttachment,!0,O.submitting),y.tsx("div",{key:"content",class:this.classes("esri-editor__content","esri-editor__scroller")},O.render()),this.renderControls(K))};N.renderFeatureUpdating=function(){const {messages:O}=this;return y.tsx("div",{class:"esri-editor__temp-wrapper",key:"wrapper"},this.renderHeader(O.selectFeature,
!0),y.tsx("div",{key:"content",class:this.classes("esri-editor__content","esri-editor__scroller")},this.renderMessage(O.selectFeatureToEdit)))};N.renderMessage=function(O){return y.tsx("div",{class:"esri-editor__message"},O)};N.renderFeatureCreation=function(){const {messages:O,viewModel:R}=this;var h=R.sketchViewModel,K=this._assertActiveCreateWorkflow().data.creationInfo.layer;h=h.canUndo()&&h.createGraphic?h.createGraphic:null;K=this._getSketchingTip(K.geometryType,h);return y.tsx("div",{class:"esri-editor__temp-wrapper",
key:"wrapper"},this.renderHeader(O.placeFeature,!0),y.tsx("div",{key:"content",class:this.classes("esri-editor__content","esri-editor__scroller")},this.renderMessage(K)))};N.renderControls=function(O){return y.tsx("div",{class:"esri-editor__controls",key:"controls"},O.map(({disabled:R=!1,label:h,type:K,clickHandler:B},J)=>this.renderButton({label:h,class:this.classes("esri-editor__control-button","esri-button","secondary"===K?"esri-button--secondary":"tertiary"===K?"esri-button--tertiary":null,R?
"esri-button--disabled":null),disabled:R,clickHandler:B,key:J})))};N.renderPrompt=function({title:O,message:R,options:h=[]}){return y.tsx("div",{class:"esri-editor__warning-card",role:"alert"},y.tsx("div",{class:"esri-editor__warning-header"},y.tsx("span",{class:"esri-icon-notice-triangle","aria-hidden":"true"}),y.tsx(u.Heading,{class:"esri-editor__warning-heading",level:this.headingLevel},O)),y.tsx("div",{class:"esri-editor__warning-message"},R),y.tsx("div",{class:"esri-editor__warning-divider"}),
h.map(({label:K,action:B,type:J},V)=>{const aa=0===V;return y.tsx("div",{afterCreate:aa?D:null,class:this.classes("esri-editor__warning-option",aa?"esri-editor__warning-option--primary":null,"positive"===J?"esri-editor__warning-option--positive":"negative"===J?"esri-editor__warning-option--negative":null),key:V,onclick:B,onkeydown:ha=>{const la=z.eventKey(ha);t.isActivationKey(la)&&(ha.preventDefault(),B.call(null))},tabIndex:0,role:"button"},K)}))};N.renderProgressBar=function(){return y.tsx("div",
{class:this.classes("esri-editor__progress-bar"),key:"progress-bar"})};N.renderButton=function(O){return y.tsx("button",{class:O.class,disabled:O.disabled,key:O.key,onclick:O.clickHandler,type:"button"},O.label)};N.renderHeader=function(O,R=!1,h=!1){const {messagesCommon:K}=this;return y.tsx("header",{class:"esri-editor__header",key:"header"},R?y.tsx("div",{"aria-label":K.back,class:this.classes("esri-editor__back-button","esri-interactive",h?"esri-button--disabled":null),key:"back-button","data-prevent-back":h,
onclick:this._handleHeaderClickOrKeyDown,onkeydown:this._handleHeaderClickOrKeyDown,role:"button",tabIndex:0,title:K.back},y.tsx("span",{"aria-hidden":"true",class:t.isRTL(this.container)?"esri-icon-right":"esri-icon-left"})):null,y.tsx(u.Heading,{class:"esri-editor__title",level:this.headingLevel},O))};N.renderLanding=function(){const {messages:O}=this,{allowedWorkflows:R,canCreate:h,canUpdate:K}=this.viewModel,B=t.isRTL(this.container)?"esri-icon-left":"esri-icon-right";return y.tsx("div",{class:"esri-editor__temp-wrapper",
key:"wrapper"},this.renderHeader(O.widgetLabel),y.tsx("div",{key:"content",class:"esri-editor__content",role:"group"},y.tsx("div",{class:"esri-editor__mode-selection",key:"mode-selection"},-1<R.indexOf("update")?y.tsx("div",{"aria-disabled":K?"false":"true",class:this.classes("esri-editor__feature-list-item",K?null:"esri-editor__feature-list-item--disabled"),key:"update",onclick:this._handleEdit,onkeydown:this._handleEdit,role:"button",tabIndex:K?0:-1},y.tsx("span",{class:"esri-editor__feature-list-name"},
O.editFeature),y.tsx("span",{"aria-hidden":"true",class:this.classes("esri-editor__feature-list-icon",B)})):null,-1<R.indexOf("create")?y.tsx("div",{class:this.classes("esri-editor__feature-list-item",h?null:"esri-editor__feature-list-item--disabled"),key:"create",onclick:this._handleAdd,onkeydown:this._handleAdd,role:"button",tabIndex:h?0:-1},y.tsx("span",{class:"esri-editor__feature-list-name"},O.addFeature),y.tsx("span",{"aria-hidden":"true",class:this.classes("esri-editor__feature-list-icon",
B)})):null)))};N.renderFeatureList=function(){const {messages:O,messagesTemplates:R,viewModel:{editableItems:h}}=this;var K=this._assertActiveUpdateWorkflow().data.candidates;const B=r.substitute(O.multipleFeaturesTemplate,{total:K.length}),J=new Map;K.map(V=>({label:this._getLabel(V),id:V.attributes[V.layer.objectIdField],data:V})).filter(V=>{const {label:aa,data:ha}=V;V=this._filterText.toLowerCase();const {title:la}=ha.layer;return-1<this.viewModel.editableItems.find(ra=>ra.layer===ha.layer).supports.indexOf("update")&&
(!V||-1<aa.toLowerCase().indexOf(V)||-1<la.toLowerCase().indexOf(V))}).forEach(V=>{const aa=V.data.layer;J.has(aa)?J.get(aa).items.push(V):J.set(aa,{id:`${aa.id}`,label:aa.title,items:[V]})});K=h.filter(({layer:V})=>J.has(V)).map(({layer:V})=>J.get(V)).toArray();return y.tsx("div",{class:"esri-editor__temp-wrapper",key:"wrapper"},this.renderHeader(B,!0),y.tsx("div",{key:"content",class:this.classes("esri-editor__content","esri-editor__scroller")},F.ItemList({id:this.id,filterText:this._filterText,
items:K,messages:{filterPlaceholder:R.filterPlaceholder,noItems:R.noItems,noMatches:R.noMatches},onItemMouseEnter:({data:V})=>this._setCandidateFeature(V),onItemMouseLeave:()=>this._setCandidateFeature(null),onItemSelect:({data:V})=>this._setCandidateFeature(V,!0),onFilterChange:V=>this._filterText=V})))};N._getSketchingTip=function(O,R){const {messages:h}=this;if("point"===O)return h.tips.clickToAddPoint;if("polygon"===O||"polyline"===O){if(!R)return h.tips.clickToStart;[R]=R.geometry["polygon"===
O?"rings":"paths"];return"polygon"===O&&4>R?h.tips.clickToContinue:h.tips.clickToContinueThenDoubleClickToEnd}return h.tips.clickToAddFeature};N._getLabel=function(O){var R=O.layer;const {objectIdField:h}=R;({attributes:O}=O);return(R=d.getDisplayFieldName(R))&&O[R]&&`${O[R]}`||r.substitute(this.messages.untitledFeatureTemplate,{id:O[h]})};N._handleDelete=function(){const {messages:O,messagesCommon:R}=this;this._prompt={title:O.deleteWarningTitle,message:O.deleteWarningMessage,options:[{label:O.keepFeature,
type:"neutral",action:()=>this._prompt=null},{label:R.delete,type:"positive",action:()=>{this.viewModel.deleteFeatureFromWorkflow();this._prompt=null}}]}};N._handleSave=function(){this.viewModel.activeWorkflow.commit()};N._handleAttachmentAdd=function(){const {_attachments:O}=this,{activeWorkflow:R}=this.viewModel;O.addAttachment().then(()=>R.previous())};N._handleAttachmentUpdate=function(){const {_attachments:O}=this,{activeWorkflow:R}=this.viewModel;O.updateAttachment().then(()=>R.previous())};
N._handleAttachmentDelete=function(){const {messages:O,messagesCommon:R}=this;this._prompt={title:O.deleteAttachmentWarningTitle,message:O.deleteAttachmentWarningMessage,options:[{label:O.keepAttachment,type:"neutral",action:()=>this._prompt=null},{label:R.delete,type:"positive",action:()=>{const {_attachments:h}=this,{activeWorkflow:K}=this.viewModel;h.deleteAttachment(h.viewModel.activeAttachmentInfo).then(()=>{K.previous();this._prompt=null})}}]}};N._handleAdd=function(){this.viewModel.canCreate&&
this.viewModel.startCreateWorkflowAtFeatureTypeSelection()};N._handleEdit=function(){this.viewModel.canUpdate&&this.viewModel.startUpdateWorkflowAtFeatureSelection()};N._handleDone=function(){this.viewModel.cancelWorkflow({force:!0})};N._handleBack=function(){const {messages:O}=this,R=this._assertActiveCreateOrUpdateWorklow(),{stepId:h,data:K,type:B}=R,J=()=>{R.hasPreviousStep?R.previous({cancelCurrentStep:!0}):this.viewModel.cancelWorkflow({force:!0})};"editing-new-feature"===h||"editing-existing-feature"===
h&&K.edits.modified?this._prompt={title:"create"===B?O.cancelAddTitle:O.cancelEditTitle,message:"create"===B?O.cancelAddWarningMessage:O.cancelEditWarningMessage,options:[{label:"create"===B?O.continueAdding:O.continueEditing,type:"neutral",action:()=>this._prompt=null},{label:"create"===B?O.discardFeature:O.discardEdits,type:"negative",action:()=>{J();this._prompt=null}}]}:J()};N._assertActiveCreateWorkflow=function(){if("create"===this.viewModel.activeWorkflow.type)return this.viewModel.activeWorkflow;
throw Error("Expected activeWorkflow to be a CreateWorkflow");};N._assertActiveUpdateWorkflow=function(){if("update"===this.viewModel.activeWorkflow.type)return this.viewModel.activeWorkflow;throw Error("Expected activeWorkflow to be an UpdateWorkflow");};N._assertActiveCreateOrUpdateWorklow=function(){switch(this.viewModel.activeWorkflow.type){case "create":case "update":return this.viewModel.activeWorkflow}throw Error("Expected activeWorkflow to be either CreateWorkflow or UpdateWorkflow");};return E}(w.HandleOwnerMixin(k));
c.__decorate([x.property()],b.prototype,"_attachments",void 0);c.__decorate([T.aliasOf("viewModel.activeWorkflow")],b.prototype,"activeWorkflow",void 0);c.__decorate([T.aliasOf("viewModel.allowedWorkflows")],b.prototype,"allowedWorkflows",void 0);c.__decorate([x.property()],b.prototype,"headingLevel",void 0);c.__decorate([x.property()],b.prototype,"iconClass",void 0);c.__decorate([x.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],b.prototype,"label",void 0);c.__decorate([T.aliasOf("viewModel.layerInfos")],
b.prototype,"layerInfos",void 0);c.__decorate([x.property(),M.messageBundle("esri/widgets/Editor/t9n/Editor")],b.prototype,"messages",void 0);c.__decorate([x.property(),M.messageBundle("esri/t9n/common")],b.prototype,"messagesCommon",void 0);c.__decorate([x.property(),M.messageBundle("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],b.prototype,"messagesTemplates",void 0);c.__decorate([T.aliasOf("viewModel.snappingOptions")],b.prototype,"snappingOptions",void 0);c.__decorate([x.property()],b.prototype,
"supportingWidgetDefaults",void 0);c.__decorate([T.aliasOf("viewModel.view")],b.prototype,"view",void 0);c.__decorate([x.property(),G.vmEvent(["workflow-cancel","workflow-commit"])],b.prototype,"viewModel",void 0);c.__decorate([l.accessibleHandler()],b.prototype,"_handleDelete",null);c.__decorate([l.accessibleHandler()],b.prototype,"_handleAttachmentAdd",null);c.__decorate([l.accessibleHandler()],b.prototype,"_handleAttachmentUpdate",null);c.__decorate([l.accessibleHandler()],b.prototype,"_handleAttachmentDelete",
null);c.__decorate([l.accessibleHandler()],b.prototype,"_handleAdd",null);c.__decorate([l.accessibleHandler()],b.prototype,"_handleEdit",null);c.__decorate([l.accessibleHandler()],b.prototype,"_handleDone",null);c.__decorate([l.accessibleHandler()],b.prototype,"_handleBack",null);return b=c.__decorate([n.subclass("esri.widgets.Editor")],b)});