// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.21/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/Search/SearchResultRenderer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../Widget ./SearchViewModel ../support/decorators/accessibleHandler ../support/decorators/messageBundle ../support/jsxFactory ../support/widgetUtils".split(" "),function(n,b,a,k,f,x,w,C,g,h,e,d,l){k=
function(q){function r(m,E){m=q.call(this,m,E)||this;m.messages=null;m.showMoreResultsOpen=!1;m.viewModel=null;return m}n._inheritsLoose(r,q);var v=r.prototype;v.render=function(){return d.tsx("div",{class:"esri-search-result-renderer esri-widget"},d.tsx("div",{key:"esri-search-renderer__container",class:this.classes("esri-search-result-renderer__more-results",{["esri-search-result-renderer__more-results--show-more-results"]:this.showMoreResultsOpen})},this.renderSearchResultName(),this.renderMoreResults()))};
v.renderMoreResults=function(){return d.tsx("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())};v.renderSearchResultName=function(){var m;const E=null==(m=this.viewModel)?void 0:m.selectedResult;return d.tsx("div",{key:"esri-search-renderer__result-name",class:"esri-search-result-renderer__more-results-item"},E&&E.name||"")};v.renderMoreResultsLists=function(){var m,E=null==(m=this.viewModel)?void 0:m.results;({resultCount:m}=this.viewModel);
if(2>m)return null;E=E.map(M=>this.renderMoreResultsList(M));return d.tsx("div",{key:"esri-search-renderer__more-results-container",class:"esri-search-result-renderer__more-results-list"},E)};v.renderMoreResultsButton=function(){const {messages:m}=this,{resultCount:E}=this.viewModel;return 2>E?null:d.tsx("div",{key:"esri-search-renderer__more-results-button",class:"esri-search-result-renderer__more-results-item"},d.tsx("a",{class:"esri-widget__anchor",href:"#",bind:this,onclick:this._showMoreResultsClick,
onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?m.hideMoreResults:m.showMoreResults))};v.renderMoreResultsHeader=function(m,E){return d.tsx("div",{key:`esri-search-result-renderer__header-${E}`,class:"esri-search-result-renderer__more-results-list-header"},m)};v.renderMoreResultsList=function(m){var E,M;const {results:W}=m;var K=W.length;const Z=!!K,ba=null==(E=this.viewModel)?void 0:E.selectedResult;E=1===K&&W[0]===ba;K=this._getSourceName(m.source,m.sourceIndex);K=1<(null==(M=this.viewModel)?
void 0:M.results.length)&&!E?this.renderMoreResultsHeader(K,m.sourceIndex):null;M=Z&&W.map((aa,T)=>this.renderMoreResultsListItem(aa,T));M=Z&&!E?d.tsx("ul",{key:`esri-search-result-renderer__list-${m.sourceIndex}`},M):null;return Z?d.tsx("div",{key:`esri-search-result-renderer__results-${m.sourceIndex}`},K,M):null};v.renderMoreResultsListItem=function(m,E){const M=this.get("viewModel.selectedResult");return m!==M?d.tsx("li",{key:`esri-search-result-renderer__list-item-${E}`},d.tsx("a",{class:"esri-widget__anchor",
href:"#",tabindex:"0",bind:this,"data-result":m,onclick:this._selectResultClick,onkeydown:this._selectResultClick},m.name)):null};v._showMoreResultsClick=function(m){m.preventDefault();this.showMoreResultsOpen=!this.showMoreResultsOpen;(m=this.get("viewModel.view.popup"))&&m.reposition()};v._selectResultClick=function(m){m.preventDefault();m=m.currentTarget["data-result"];this.viewModel&&this.viewModel.select(m)};v._getSourceName=function(m,E){return E===g.ALL_INDEX?this.messages.all:m.name};return r}(C);
b.__decorate([a.property(),e.messageBundle("esri/widgets/Search/t9n/Search")],k.prototype,"messages",void 0);b.__decorate([a.property()],k.prototype,"showMoreResultsOpen",void 0);b.__decorate([a.property()],k.prototype,"viewModel",void 0);b.__decorate([h.accessibleHandler()],k.prototype,"_showMoreResultsClick",null);b.__decorate([h.accessibleHandler()],k.prototype,"_selectResultClick",null);return k=b.__decorate([w.subclass("esri.widgets.Search.SearchResultRenderer")],k)})},"esri/widgets/Search/SearchViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../assets ../../config ../../Graphic ../../PopupTemplate ../../core/Accessor ../../core/Collection ../../core/Error ../../core/Evented ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point ../../geometry/SpatialReference ../../intl/locale ../../intl/messages ../../portal/Portal ../../chunks/location ../../symbols/PictureMarkerSymbol ../../symbols/SimpleFillSymbol ../../symbols/SimpleLineSymbol ../../symbols/SimpleMarkerSymbol ../../symbols/TextSymbol ../../views/support/layerViewUtils ./LayerSearchSource ./LocatorSearchSource ./SearchSource ./support/geometryUtils ./support/locatorUtils ../support/geolocationUtils ../support/GoTo".split(" "),
function(n,b,a,k,f,x,w,C,g,h,e,d,l,q,r,v,m,E,M,W,K,Z,ba,aa,T,I,t,A,u,J,B,G,H,Q,F,P,L,X){function S(da,ca){return da.hasOwnProperty(ca)&&null!=da[ca]&&""!==da[ca]}const R=l.getLogger("esri.widgets.Search.SearchViewModel"),U=C.ofType({key:da=>da.layer?"layer":"locator",base:Q,typeMap:{layer:G,locator:H}}),ea=K.WGS84,ha=/<(?:.|\s)*?>/g;w=function(da){function ca(c){c=da.call(this,c)||this;c._handles=new e;c._gotoController=null;c._searching=null;c.autoNavigate=!0;c.autoSelect=!0;c.defaultPopupTemplate=
null;c.defaultSources=new U;c.defaultSymbol=new I({url:a.getAssetUrl(d("trident")?"esri/images/search/search-symbol-32.png":"esri/images/search/search-symbol-32.svg"),size:24,width:24,height:24});c.includeDefaultSources=!0;c.maxInputLength=128;c.maxResults=6;c.maxSuggestions=6;c.messages=null;c.minSuggestCharacters=3;c.popupEnabled=!0;c.popupTemplate=null;c.portal=aa.getDefault();c.resultCount=null;c.resultGraphicEnabled=!0;c.resultGraphic=null;c.results=null;c.selectedSuggestion=null;c.searchAllEnabled=
!0;c.selectedResult=null;c.sources=new U;c.suggestionDelay=350;c.suggestionCount=null;c.suggestions=null;c.suggestionsEnabled=!0;c.view=null;return c}n._inheritsLoose(ca,da);var N=ca.prototype;N.initialize=function(){var c=this;const p=function(){var y=n._asyncToGenerator(function*(){const z=yield ba.fetchMessageBundle("esri/widgets/Search/t9n/Search");c.messages=z;c.defaultPopupTemplate=new x({title:z.searchResult,content:"{Match_addr}"})});return function(){return y.apply(this,arguments)}}();p();
this._handles.add([v.on(this,["defaultSources","sources"],"change",()=>this.notifyChange("allSources")),v.init(this,["includeDefaultSources","view","portal"],()=>this._update()),Z.onLocaleChange(p)])};N.destroy=function(){this._abortGoTo();this.clearGraphics();this._handles.destroy();this._handles=null};N.clear=function(){this.searchTerm=""};N.clearGraphics=function(){this._removeHighlight();this._closePopup();this.view&&this.view.graphics.remove(this.resultGraphic);this._set("resultGraphic",null)};
N.search=function(c,p){this.emit("search-start");this.clearGraphics();const y=this._createSuggestionForSearch(c);this._searching=c=this.when().then(()=>this._getResultsFromSources(y,p).then(z=>{var D;if(null!=(D=q.unwrap(null==p?void 0:p.signal))&&D.aborted)return null;const O={activeSourceIndex:this.activeSourceIndex,searchTerm:y.text,numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(O,z,y);z=this._getFirstResult(O.results);D=(y.location&&z?z.name:y.text).replace(ha,"");this._set("searchTerm",
D);(y.key&&"number"===typeof y.sourceIndex||y.location)&&this._set("selectedSuggestion",y);this._set("results",O.results);this._set("resultCount",O.results.reduce((V,Y)=>V+Y.results.length,0));this.emit("search-complete",O);return this._selectFirstResult(z).then(()=>O)})).then(z=>{this._clearSearching();return z},z=>{this._clearSearching();throw z;});this.notifyChange("state");return c};N.searchNearby=function(c){if(!this.locationEnabled){var p=new g("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",
{geolocation:navigator.geolocation});R.error(p);return Promise.reject(p)}this._searching=p=L.getCurrentPosition().then(y=>L.positionToPoint({position:y,view:this.view},c)).then(y=>this.search(y,c));this.notifyChange("state");p.catch(()=>{}).then(()=>this._clearSearching());return p};N.select=function(c){this.clearGraphics();if(!c){var p=new g("select:missing-parameter","Cannot select without a searchResult.",{searchResult:c});R.error(p);return Promise.reject(p)}const {view:y}=this,z=S(c,"sourceIndex")?
c.sourceIndex:this._getSourceIndexOfResult(c),D=this.allSources.getItemAt(z);if(!D)return p=new g("select:missing-source","Cannot select without a source.",{source:D}),R.error(p),Promise.reject(p);p=D instanceof G?this._getLayerSourcePopupTemplate(D):D.popupTemplate;const O=D.resultSymbol||this._getDefaultSymbol(c),V=S(D,"resultGraphicEnabled")?D.resultGraphicEnabled:this.resultGraphicEnabled,Y=S(D,"autoNavigate")?D.autoNavigate:this.autoNavigate,ia=S(D,"popupEnabled")?D.popupEnabled:this.popupEnabled,
ja=ia?p||this.popupTemplate||this.defaultPopupTemplate:null,{feature:fa}=c;if(!fa)return p=new g("select:missing-feature","Cannot select without a feature.",{feature:fa}),R.error(p),Promise.reject(p);const {attributes:ra,geometry:pa,layer:sa,sourceLayer:ta}=fa,na=F.getPointFromGeometry(pa);p={layerViewQuery:this._getLayerView(fa),elevationQuery:y&&q.isSome(na)?F.getPointWithElevation(na,y).catch(()=>na):Promise.resolve(na)};return r.eachAlways(p).then(ka=>{const la=ka.layerViewQuery.value,ua=ka.elevationQuery.value;
O instanceof J&&(O.text=c.name);ka=y&&Y?c.target||c.extent:null;return(q.isSome(ka)?this._goToSearchResult(ka):Promise.resolve()).then(()=>{var oa;const ma=la?fa:new f({geometry:pa,symbol:O,attributes:ra,layer:sa,sourceLayer:ta,popupTemplate:ja}),qa=ia&&(null==(oa=this.view)?void 0:oa.popup);(oa=qa&&ma.getEffectivePopupTemplate(qa.defaultPopupTemplateEnabled))&&y.popup.open({features:[ma],location:ua});la&&B.highlightsSupported(la)&&!oa&&this._highlightFeature({graphic:ma,layerView:la});!la&&V&&y&&
y.graphics.push(ma);this._set("selectedResult",c);this._set("resultGraphic",ma);this.emit("select-result",{result:c,source:D,sourceIndex:z});return c})})};N.suggest=function(c,p,y){const z=c||this.searchTerm;this.emit("suggest-start",{searchTerm:z});return this._suggestTimer(p,y).then(()=>this._suggestImmediate(z,y).then(D=>{this._set("suggestions",D.results);this._set("suggestionCount",D.results.reduce((O,V)=>O+V.results.length,0));this.emit("suggest-complete",D);return D}))};N.when=function(){var c=
n._asyncToGenerator(function*(){yield v.whenFalseOnce(this,"updating")});return function(){return c.apply(this,arguments)}}();N._update=function(){var c=n._asyncToGenerator(function*(){const {portal:p,view:y}=this;if(this.includeDefaultSources){var z=this._updatingPromise=r.eachAlways([null==p?void 0:p.load(),null==y?void 0:y.when()]);if(this.destroyed)return;this.notifyChange("updating");yield z;if(z!==this._updatingPromise)return}this._updatingPromise=null;this.notifyChange("updating");z=v.whenOnce(this,
"messages");this.destroyed||(this._handles.add(z),yield z,this._updateDefaultSources())});return function(){return c.apply(this,arguments)}}();N._clearSearching=function(){this._searching=null;this.notifyChange("state")};N._convertHelperServices=function(){var c,p;const y=null==(c=this.portal)?void 0:null==(p=c.helperServices)?void 0:p.geocode;return y?y.map(z=>{var D;if(!1!==z.placefinding){var O=k.apiKey&&P.isArcGISWorldGeocoder(z.url)?{url:P.meteredArcGISLocatorUrl}:null;z=H.fromJSON({...z,...O});
O=null==(D=z.locator)?void 0:D.url;(P.isArcGISWorldGeocoder(O)||P.isProxiedArcGISWorldGeocoder(O)||P.isMeteredArcGISWorldGeocoder(O))&&z.set({singleLineFieldName:"SingleLine",outFields:z.outFields||["Addr_type","Match_addr","StAddr","City"],placeholder:z.placeholder||this.messages.placeholder,defaultZoomScale:"number"===typeof z.defaultZoomScale?z.defaultZoomScale:2500});if(z.singleLineFieldName)return z}}).filter(Boolean):[]};N._getLayerSources=function(c,p){var y;const z=null==(y=this.view)?void 0:
y.map;return c.map(D=>{const O=z.findLayerById(D.id);if(O){D=this._getLayerJSON(D);var V=G.fromJSON(D);V.placeholder=p;this._getLayer(O,D).then(Y=>{V.layer=Y});return V}}).filter(Boolean).toArray()};N._getTableSources=function(c,p){var y;const z=null==(y=this.view)?void 0:y.map;return c.map(D=>{const O=z.findTableById(D.id);if(O){D=this._getLayerJSON(D);var V=G.fromJSON(D);V.placeholder=p;this._getLayer(O,D).then(Y=>{V.layer=Y});return V}}).filter(Boolean).toArray()};N._convertApplicationProperties=
function(){var c,p,y;const z=null==(c=this.view)?void 0:c.map;c=null==z?void 0:null==(p=z.applicationProperties)?void 0:null==(y=p.viewing)?void 0:y.search;if(!c)return[];const {enabled:D,hintText:O,layers:V,tables:Y}=c;if(!D)return[];p=this._getLayerSources(V,O);y=this._getTableSources(Y,O);return[...p,...y]};N._getSubLayer=function(c,p){return c.load().then(()=>{if(!c.allSublayers)return Promise.reject();const y=c.allSublayers.find(z=>z.id===p.subLayer);return y?y.createFeatureLayer():Promise.reject()})};
N._getBuildingSubLayer=function(){var c=n._asyncToGenerator(function*(p,y){yield p.load();p=p.allSublayers.find(z=>z.id===y.subLayer);if("building-component"!==(null==p?void 0:p.type))return Promise.reject();yield p.load();if(null==p.associatedLayer)return Promise.reject();yield p.associatedLayer.load();return p});return function(p,y){return c.apply(this,arguments)}}();N._getLayer=function(c,p){return"feature"===c.type||"scene"===c.type||"csv"===c.type||"geojson"===c.type||"ogc-feature"===c.type?
Promise.resolve(c):"map-image"===c.type?this._getSubLayer(c,p).catch(()=>{const y=new g("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:c});R.error(y);return null}):"building-scene"===c.type?this._getBuildingSubLayer(c,p):Promise.resolve(null)};N._getLayerJSON=function(c){return"function"===typeof c.toJSON?c.toJSON():c};N._updateDefaultSources=function(){const {defaultSources:c,includeDefaultSources:p}=this;c.removeAll();p&&c.addMany([...this._convertApplicationProperties(),
...this._convertHelperServices()]);this.notifyChange("allSources")};N._abortGoTo=function(){this._gotoController&&this._gotoController.abort();this._gotoController=null};N._clear=function(){this._abortGoTo();this._set("resultCount",null);this._set("results",null);this._set("suggestions",null);this._set("suggestionCount",null);this._set("selectedResult",null);this._set("selectedSuggestion",null);this.emit("search-clear")};N._closePopup=function(){var c;const p=null==(c=this.view)?void 0:c.popup;({resultGraphic:c}=
this);if(p&&c){var {selectedFeature:y}=p;y&&y===c&&p.close()}};N._suggestTimer=function(c,p){return r.after(null!=c?c:this.suggestionDelay,null,p&&p.signal)};N._createLocationForSearch=function(c){return c instanceof f?F.getPointFromGeometry(c.geometry):c instanceof W?c:Array.isArray(c)&&2===c.length?new W({longitude:c[0],latitude:c[1]}):null};N._createSuggestionForSearch=function(c){if(c&&S(c,"key")&&S(c,"text")&&S(c,"sourceIndex"))return c;const p=this._createLocationForSearch(c),y="string"===typeof c?
c:this.searchTerm,{selectedSuggestion:z,selectedResult:D}=this,O=(c=!c&&z&&D)&&z.location;return c&&z.key===D.key&&z.sourceIndex===D.sourceIndex||O?z:{location:q.unwrap(p),text:p?"":y,sourceIndex:null,key:null}};N._getFirstResult=function(c){let p=null;c&&c.some(y=>{({results:y}=y);y=y[0];const z=!!y;z&&(p=y);return z});return p};N._selectFirstResult=function(c){return this.autoSelect&&c?this.select(c):Promise.resolve(null)};N._suggestImmediate=function(c,p){return this.when().then(()=>this._getSuggestionsFromSources(c,
p)).then(y=>{var z;if(null!=(z=q.unwrap(null==p?void 0:p.signal))&&z.aborted)return null;z={activeSourceIndex:this.activeSourceIndex,searchTerm:c,numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(z,y);return z})};N._formatSourceResponse=function(c,p,y){const z=p&&p.value||[];p=p&&p.error;const D=this.allSources.getItemAt(y);p?(c.errors.push({sourceIndex:y,source:D,error:p}),R.error(p),c.numErrors++):(c.results.push({sourceIndex:y,source:D,results:z}),c.numResults+=z.length)};N._formatResponse=
function(c,p,y){if(p)if(-1===c.activeSourceIndex){const z=y&&S(y,"sourceIndex")&&-1!==y.sourceIndex?y.sourceIndex:void 0;p.forEach((D,O)=>{this._formatSourceResponse(c,D,void 0!==z?z:O)})}else this._formatSourceResponse(c,p[0],c.activeSourceIndex)};N._getResultsFromSources=function(c,p){var {allSources:y}=this;const z=!c.location&&S(c,"sourceIndex")?c.sourceIndex:this.activeSourceIndex,D=[];if(!y.length)return y=new g("search:no-sources-defined","At least one source is required.",{allSources:y}),
R.error(y),Promise.reject(y);-1===z?y.forEach((O,V)=>{D.push(this._getResultsFromSource(c,V,p))}):D.push(this._getResultsFromSource(c,z,p));return r.eachAlways(D)};N._getSuggestionsFromSources=function(c,p){const {allSources:y,activeSourceIndex:z}=this,D=[];if(!y.length){const O=new g("suggest:no-sources-defined","At least one source is required.",{allSources:y});R.error(O);return Promise.reject(O)}-1===z?y.forEach((O,V)=>{D.push(this._getSuggestionsFromSource(c,V,p))}):D.push(this._getSuggestionsFromSource(c,
z,p));return r.eachAlways(D)};N._getResultsFromSource=function(c,p,y){var z;const D=this.allSources.getItemAt(p),{location:O=null}=c,V=(null==(z=this.view)?void 0:z.spatialReference)||ea;z=S(D,"maxResults")?D.maxResults:this.maxResults;const Y=D instanceof G&&S(D,"exactMatch")?D.exactMatch:!1,{view:ia}=this;return D.getResults({view:ia,sourceIndex:p,location:O,suggestResult:c,spatialReference:V,exactMatch:Y,maxResults:z},y)};N._getSuggestionsFromSource=function(c,p,y){const z=this.allSources.getItemAt(p);
var D=S(z,"suggestionsEnabled")?z.suggestionsEnabled:this.suggestionsEnabled,O=c.length,V=S(z,"minSuggestCharacters")?z.minSuggestCharacters:this.minSuggestCharacters;if(D&&c.trim()&&O>=V){var Y;D=(null==(Y=this.view)?void 0:Y.spatialReference)||ea;Y=S(z,"maxSuggestions")?z.maxSuggestions:this.maxSuggestions;({view:O}=this);V=z instanceof G&&S(z,"exactMatch")?z.exactMatch:!1;return z.getSuggestions({view:O,sourceIndex:p,suggestTerm:c,spatialReference:D,maxSuggestions:Y,exactMatch:V},y)}return Promise.resolve(null)};
N.createDefaultSymbol=function(c,p){if("point"===p)return new u({color:c.color,size:c.size,outline:{color:c.outline.color,width:c.outline.width}});if("polyline"===p)return new A({color:c.color,width:c.width});if("polygon"===p)return new t({color:c.color,outline:{color:c.outline.color,width:c.outline.width}})};N._getLayerSourcePopupTemplate=function(c){const {layer:p}=c;if(p)return S(c,"popupTemplate")?c.popupTemplate:p.popupTemplate};N._getSourceIndexOfResult=function(c){let p=null;this.results.some(y=>
y.results.some(z=>z===c?(p=y.sourceIndex,!0):!1));return p};N._goToSearchResult=function(){var c=n._asyncToGenerator(function*(p){const y=!!p;this._abortGoTo();const z=r.createAbortController();this._gotoController=z;yield this.callGoTo({target:{target:p},options:{animate:y,signal:z.signal}});this._gotoController=null});return function(p){return c.apply(this,arguments)}}();N._getDefaultSymbol=function(c){var p,y,z,D=null==(p=this.view)?void 0:null==(y=p.map)?void 0:null==(z=y.basemap)?void 0:z.id;
c=q.get(c,"feature","geometry","type");return q.isSome(c)&&(D=(D=T.getSchemes({basemap:D,geometryType:c})||T.getSchemes({basemap:"topo",geometryType:c}))&&D.primaryScheme)?(D.color&&S(D,"opacity")&&(D.color.a=D.opacity),this.createDefaultSymbol(D,c)):this.defaultSymbol};N._removeHighlight=function(){this._handles.remove("highlight")};N._getLayerView=function(){var c=n._asyncToGenerator(function*(p){const {view:y}=this;if(!p||!y||"building-component"===p.layer.type||"subtype-sublayer"===p.layer.type)return Promise.resolve(null);
({layer:p}=p);yield y.when();return y.whenLayerView(p)});return function(p){return c.apply(this,arguments)}}();N._highlightFeature=function(c){const {graphic:p,layerView:y}=c,{attributes:z,layer:D}=p;({objectIdField:c}=D);c=y.highlight(z&&z[c]||p);this._handles.add(c,"highlight")};n._createClass(ca,[{key:"activeSource",get:function(){return this.allSources.getItemAt(this.activeSourceIndex)||null}},{key:"activeSourceIndex",get:function(){return 1!==this.allSources.length&&this.searchAllEnabled?-1:
0},set:function(c){void 0===c?this._clearOverride("activeSourceIndex"):this._override("activeSourceIndex",c)}},{key:"allPlaceholder",get:function(){var c;return null==(c=this.messages)?void 0:c.allPlaceholder},set:function(c){c?this._override("allPlaceholder",c):this._clearOverride("allPlaceholder")}},{key:"allSources",get:function(){const {sources:c,defaultSources:p,includeDefaultSources:y}=this,z="function"===typeof y?y.call(null,{sources:c,defaultSources:p}):y?p.concat(c):c,D=this._get("allSources")||
new U;D.removeAll();D.addMany(z.filter(Boolean));return D}},{key:"locationEnabled",get:function(){return this._get("locationEnabled")||L.supported()},set:function(c){if(void 0===c)this._clearOverride("locationEnabled");else{var p=L.supported();if(c&&!p){const y=new g("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});R.error(y)}this._override("locationEnabled",c&&p)}}},{key:"placeholder",get:function(){const {allSources:c,activeSourceIndex:p,
allPlaceholder:y}=this;if(-1===p)return y;const z=c.getItemAt(p);return z?z.placeholder:""}},{key:"searchTerm",get:function(){return this._get("searchTerm")||""},set:function(c){this._set("searchTerm",c||"");this.clearGraphics();this.selectedSuggestion&&this.selectedSuggestion.text!==c&&this._set("selectedSuggestion",null);""===c&&this._clear()}},{key:"state",get:function(){return this._searching?"searching":this.updating?"loading":0===this.allSources.length?"disabled":"ready"}},{key:"updating",get:function(){return null!=
this._updatingPromise}}]);return ca}(X.GoToMixin(h.EventedMixin(w)));w.ALL_INDEX=-1;b.__decorate([m.property({readOnly:!0,value:null})],w.prototype,"activeSource",null);b.__decorate([m.property()],w.prototype,"activeSourceIndex",null);b.__decorate([m.property()],w.prototype,"allPlaceholder",null);b.__decorate([m.property({readOnly:!0,dependsOn:["defaultSources.length","sources.length","includeDefaultSources"]})],w.prototype,"allSources",null);b.__decorate([m.property()],w.prototype,"autoNavigate",
void 0);b.__decorate([m.property()],w.prototype,"autoSelect",void 0);b.__decorate([m.property()],w.prototype,"defaultPopupTemplate",void 0);b.__decorate([m.property({readOnly:!0})],w.prototype,"defaultSources",void 0);b.__decorate([m.property()],w.prototype,"defaultSymbol",void 0);b.__decorate([m.property()],w.prototype,"includeDefaultSources",void 0);b.__decorate([m.property()],w.prototype,"locationEnabled",null);b.__decorate([m.property()],w.prototype,"maxInputLength",void 0);b.__decorate([m.property()],
w.prototype,"maxResults",void 0);b.__decorate([m.property()],w.prototype,"maxSuggestions",void 0);b.__decorate([m.property()],w.prototype,"messages",void 0);b.__decorate([m.property()],w.prototype,"minSuggestCharacters",void 0);b.__decorate([m.property({readOnly:!0})],w.prototype,"placeholder",null);b.__decorate([m.property()],w.prototype,"popupEnabled",void 0);b.__decorate([m.property({type:x})],w.prototype,"popupTemplate",void 0);b.__decorate([m.property({type:aa})],w.prototype,"portal",void 0);
b.__decorate([m.property()],w.prototype,"resultCount",void 0);b.__decorate([m.property()],w.prototype,"resultGraphicEnabled",void 0);b.__decorate([m.property({readOnly:!0})],w.prototype,"resultGraphic",void 0);b.__decorate([m.property({readOnly:!0})],w.prototype,"results",void 0);b.__decorate([m.property({readOnly:!0})],w.prototype,"selectedSuggestion",void 0);b.__decorate([m.property()],w.prototype,"searchAllEnabled",void 0);b.__decorate([m.property({readOnly:!0})],w.prototype,"selectedResult",void 0);
b.__decorate([m.property()],w.prototype,"searchTerm",null);b.__decorate([m.property({type:U})],w.prototype,"sources",void 0);b.__decorate([m.property({readOnly:!0,dependsOn:["allSources.length","updating"]})],w.prototype,"state",null);b.__decorate([m.property()],w.prototype,"suggestionDelay",void 0);b.__decorate([m.property()],w.prototype,"suggestionCount",void 0);b.__decorate([m.property({readOnly:!0})],w.prototype,"suggestions",void 0);b.__decorate([m.property()],w.prototype,"suggestionsEnabled",
void 0);b.__decorate([m.property({readOnly:!0})],w.prototype,"updating",null);b.__decorate([m.property()],w.prototype,"view",void 0);b.__decorate([m.property()],w.prototype,"clear",null);return w=b.__decorate([M.subclass("esri.widgets.Search.SearchViewModel")],w)})},"esri/chunks/location":function(){define(["exports","../Color","../smartMapping/symbology/support/symbologyUtils","../smartMapping/symbology/support/utils"],function(n,b,a,k){function f(e){return a.getThemesforBasemap(g,e)}function x(e){const d=
a.getRawSchemes({basemap:e.basemap,geometryType:e.geometryType,basemapTheme:e.basemapTheme,theme:g.get("default")});if(d){var {schemesInfo:l,basemapId:q,basemapTheme:r}=d;return{primaryScheme:C(e,l.primary),secondarySchemes:l.secondary.map(v=>C(e,v)).filter(Boolean),basemapId:q,basemapTheme:r}}}function w(e){if(e)return e={...e},e.color&&(e.color=new b(e.color)),"outline"in e&&e.outline&&(e.outline={color:e.outline.color&&new b(e.outline.color),width:e.outline.width}),e}function C(e,d){var l="mesh"!==
e.geometryType&&e.worldScale?e.view:null;switch(e.geometryType){case "point":case "multipoint":e={...d.outline};var q=d.size;return{color:new b(d.color),outline:{color:new b(e.color),width:e.width},size:l?k.toWorldScale(q,l):q,opacity:1};case "polyline":return e=d.width,{color:new b(d.color),width:l?k.toWorldScale(e,l):e,opacity:1};case "polygon":e=d.size;q={...d.outline};var r=d.opacity;return{color:new b(d.color),outline:{color:new b(q.color),width:q.width},size:l?k.toWorldScale(e,l):e,opacity:r};
case "mesh":return l=d.opacity,{color:new b(d.color),opacity:l}}}const g=a.createThemes({themeDictionary:{default:{name:"default",label:"Default",description:"Default theme for basic visualization of features.",schemes:{point:{light:{primary:{color:[77,77,77,1],outline:{color:[255,255,255,.25],width:"1px"},size:"8px"},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,.25],width:"1px"},size:"8px"},{color:[255,255,255,1],outline:{color:[51,51,51,.25],width:"1px"},size:"8px"}]},dark:{primary:{color:[255,
255,255,1],outline:{color:[92,92,92,.25],width:"1px"},size:"8px"},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,.25],width:"1px"},size:"8px"},{color:[26,26,26,1],outline:{color:[178,178,178,.25],width:"1px"},size:"8px"}]}},polyline:{light:{primary:{color:[77,77,77,1],width:"2px"},secondary:[{color:[226,119,40,1],width:"2px"},{color:[255,255,255,1],width:"2px"}]},dark:{primary:{color:[255,255,255,1],width:"2px"},secondary:[{color:[226,119,40,1],width:"2px"},{color:[26,26,26,1],width:"2px"}]}},
polygon:{light:{primary:{size:"12px",color:[227,139,79,1],outline:{color:[255,255,255,.25],width:"1px"},opacity:.8},secondary:[{size:"12px",color:[128,128,128,1],outline:{color:[255,255,255,.25],width:"1px"},opacity:.8},{size:"12px",color:[255,255,255,1],outline:{color:[128,128,128,.25],width:"1px"},opacity:.8}]},dark:{primary:{size:"12px",color:[227,139,79,1],outline:{color:[92,92,92,.25],width:"1px"},opacity:.8},secondary:[{size:"12px",color:[178,178,178,1],outline:{color:[92,92,92,.25],width:"1px"},
opacity:.8},{size:"12px",color:[26,26,26,1],outline:{color:[128,128,128,.25],width:"1px"},opacity:.8}]}}}}}});var h=Object.freeze({__proto__:null,getThemes:f,getSchemes:x,cloneScheme:w});n.cloneScheme=w;n.getSchemes=x;n.getThemes=f;n.locationSymbology=h})},"esri/smartMapping/symbology/support/symbologyUtils":function(){define(["exports","./Theme"],function(n,b){n.createThemes=function(a){a=a.themeDictionary;const k=new Map;for(const f in a)k.set(f,new b(a[f]));return k};n.filterSchemesByName=function(a,
k){if(a&&k){var f=null;k=[k.primaryScheme,...k.secondarySchemes];for(const x of k)if(x.name.toLowerCase()===a.toLowerCase()){f=x;break}return f}};n.filterSchemesByTag=function(a,k,f){if(!a&&!k||!f)return[];const x=!(a&&a.length),w=!(k&&k.length);var C=[f.primaryScheme,...f.secondarySchemes];f=[];for(const g of C){C=x?!0:a.some(e=>-1<g.tags.indexOf(e));const h=!w&&k.some(e=>-1<g.tags.indexOf(e));C&&!h&&f.push(g)}return f};n.getRawSchemes=function(a){const k=a.theme;if(k)return k.getRawSchemes({basemap:a.basemap,
geometryType:a.geometryType,basemapTheme:a.basemapTheme})};n.getThemesforBasemap=function(a,k){const f=[];a.forEach(x=>{x.isBasemapSupported(k)&&f.push({name:x.name,label:x.label,description:x.description,basemaps:[...x.supportedBasemaps]})});return f};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/smartMapping/symbology/support/Theme":function(){define(["../../../core/lang","../../../core/maybe","../../support/utils"],function(n,b,a){return function(){function k(x){this.schemes=this.basemapGroups=
this.supportedBasemaps=this.description=this.label=this.name=null;const {name:w,label:C,description:g,schemes:h}=x;this.name=w;this.label=C;this.description=g;this.schemes=h;x=x.basemapGroups||a.defaultBasemapGroups;let e=[];if(x)for(const d in x)e=e.concat(x[d]);this.supportedBasemaps=e;this.basemapGroups=x}var f=k.prototype;f.isBasemapSupported=function(x){return(x=a.getBasemapId(x,this.supportedBasemaps))&&-1<this.supportedBasemaps.indexOf(x)?!0:!1};f.getRawSchemes=function(x){{var w=x.basemap;
var C=x.basemapTheme;var g=null;let d=null;w&&(g=a.getBasemapId(w,this.supportedBasemaps,!1))&&(w=a.getBasemapGroup(g),b.isSome(w)&&(d=w));!g&&C&&(g="dark"===C?"dark-gray":"gray",d=C);g||d||(g="gray",d="light");C={basemapId:g,basemapTheme:d}}const {basemapId:h,basemapTheme:e}=C;C=e;h&&(g=a.getBasemapGroup(h,this.basemapGroups),b.isSome(g)&&(C=g));x=x.geometryType;"multipoint"===x?x="point":"mesh"===x&&(x="polygon");return{schemesInfo:n.clone((this.schemes[x]||this.schemes["default"])[C]),basemapId:h,
basemapTheme:e}};return k}()})},"esri/smartMapping/support/utils":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../support/arcadeOnDemand","../../support/basemapUtils"],function(n,b,a,k){function f(){f=b._asyncToGenerator(function*(l){const q=l.field,r=l.normalizationField;l=l.valueExpression;var v=[];l&&(d||({arcadeUtils:v}=yield a.loadArcade(),d=v),v=d.extractFieldNames(l));q&&v.push(q);r&&v.push(r);return v});return f.apply(this,arguments)}function x(l){return String(l).padStart(2,
"0")}function w(l,q,r){if("date"===q||"number"===q){"number"===q&&(l=new Date(l));q=r?l.getFullYear():l.getUTCFullYear();const v=x((r?l.getMonth():l.getUTCMonth())+1),m=x(r?l.getDate():l.getUTCDate()),E=x(r?l.getHours():l.getUTCHours()),M=x(r?l.getMinutes():l.getUTCMinutes());l=x(r?l.getSeconds():l.getUTCSeconds());l=`TIMESTAMP'${q}-${v}-${m} ${E}:${M}:${l}'`}return l}function C(l,q){if(q instanceof Date)return"date";if("number"===typeof q)return"number";if("string"===typeof q&&(l=l.getField(q),"\x3cnow\x3e"!==
q.toLowerCase()&&l&&"date"===l.type))return"field"}const g={light:"streets gray topo terrain national-geographic oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector".split(" "),dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"]},h={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864E5},e=["integer","small-integer"];let d=null;n.castIntegerFieldToFloat=function(l){return`cast(${l} as float)`};
n.defaultBasemapGroups=g;n.getBasemapGroup=function(l,q=g){for(const r in q)if(-1<q[r].indexOf(l))return r};n.getBasemapId=function(l,q,r=!0){let v=null;l&&("string"===typeof l?q.includes(l)&&(v=l):v=k.getWellKnownBasemapId(l));return r?v||"gray":v};n.getDateDiffSQL=function(l,q,r,v){var {hasQueryEngine:m}=l;r=w(r,C(l,r),m);l=w(q,C(l,q),m);l=`(${r} - ${l})`;m&&(l=`(${l} * ${h.milliseconds})`);v=h[v];m="/";1>v&&(v=1/v,m="*");return{sqlExpression:1===v?l:`(${l} ${m} ${v})`,sqlWhere:null}};n.getDateType=
C;n.getFieldsList=function(l){return f.apply(this,arguments)};n.getNormalizationType=function(l){let q=l.normalizationType;q||(l.normalizationField?q="field":null!=l.normalizationTotal&&(q="percent-of-total"));return q};n.isIntegerField=function(l,q){return(l=q&&l.getField(q))&&-1<e.indexOf(l.type)};n.unitValueInDays=h;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/smartMapping/symbology/support/utils":function(){define(["exports","../../../core/screenUtils","../../support/utils"],function(n,
b,a){function k(g,h){return g.r===h.r&&g.g===h.g&&g.b===h.b}function f(g){var h=g.width;const e=g.height;let d=g.pixelSizeAt(g.toMap(b.createScreenPoint(.5*h,.5*e),{exclude:[]}));0>=d&&(d=g.pixelSizeAt(g.toMap(b.createScreenPoint(.5*h,.95*e),{exclude:[]})),0>=d&&(h=g.camera.position.clone(),h.z=0,d=2*g.pixelSizeAt(h)));return d}const x="streets gray topo terrain national-geographic oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector".split(" "),w=["satellite",
"hybrid","dark-gray","dark-gray-vector","streets-night-vector"],C=[].concat(x).concat(w);n.getBasemapTheme=function(g){g=a.getBasemapId(g,C,!1);if(!g)return null;if(-1<x.indexOf(g))return"light";if(-1<w.indexOf(g))return"dark"};n.getPixelSize=f;n.getStorageType=function(g){return"multipoint"===g?"point":"mesh"===g?"polygon":g};n.getTagsFromSchemes=function(g){if(!g)return[];const h=new Set,e=[g.primaryScheme];g.secondarySchemes&&e.push(...g.secondarySchemes);for(const d of e)d&&"tags"in d&&d.tags&&
d.tags.forEach(l=>h.add(l));return[...h]};n.hasIdenticalColors=function(g,h){let e=0;if(g.length===h.length){let d=g.every((l,q)=>k(l,h[q]));d?e=1:(d=g.slice(0).reverse().every((l,q)=>k(l,h[q])))&&(e=-1)}return e};n.toWorldScale=function(g,h){return Math.ceil(f(h)*b.pt2px(b.toPt(g)))};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/support/layerViewUtils":function(){define(["exports","../../core/maybe"],function(n,b){n.extractSafeScaleBounds=function(a){let {minScale:k,maxScale:f}=
a;return{minScale:k||0,maxScale:f||0}};n.highlightsSupported=function(a){return a&&"function"===typeof a.highlight};n.occludeesSupported=function(a){return a&&"function"===typeof a.maskOccludee};n.scaleBoundsPredicate=function(a,k,f){return b.isNone(a)||a>f&&(0===k||a<k)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/widgets/Search/LayerSearchSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ./SearchSource ./support/layerSearchUtils".split(" "),
function(n,b,a,k,f,x,w,C,g,h){var e;f=e=function(d){function l(r){var v=d.call(this,r)||this;v.displayField=null;v.exactMatch=null;v.orderByFields=null;v.searchFields=null;v.searchTemplate=null;v.suggestionTemplate=null;v.getResults=(m,E)=>h.getResults({source:n._assertThisInitialized(v),...m},E);v.getSuggestions=(m,E)=>h.getSuggestions({source:n._assertThisInitialized(v),...m},E);return v}n._inheritsLoose(l,d);var q=l.prototype;q.clone=function(){return new e({autoNavigate:this.autoNavigate,filter:this.filter,
maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?a.clone(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,
layer:this.layer,searchFields:this.searchFields?a.clone(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})};q._getFirstStringField=function(){var r,v;return null!=(r=null==(v=this.layer.fieldsIndex.fields.find(m=>"string"===m.type))?void 0:v.name)?r:""};q._getDisplayField=function(){return this.displayField||this.layer.displayField||this._getFirstStringField()};q._getSearchFieldsString=function(){const {layer:r,searchFields:v}=this;return r.loaded?`: ${(v||
[this._getDisplayField()]).map(m=>{const E=r.getField(m);return E&&E.alias||m}).join(", ")}`:""};q._getLayerTitle=function(){var {layer:r}=this;if(r&&({title:r}=r,r))return`${r}${this._getSearchFieldsString()}`};n._createClass(l,[{key:"layer",set:function(r){this._set("layer",r);r&&r.load().catch(()=>{})}},{key:"name",get:function(){return this._getLayerTitle()||""},set:function(r){void 0===r?this._clearOverride("name"):this._override("name",r)}}]);return l}(g);b.__decorate([k.property({json:{read:{source:"field.name"},
write:{target:"field.name"}}})],f.prototype,"displayField",void 0);b.__decorate([k.property({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],f.prototype,"exactMatch",void 0);b.__decorate([k.property({value:null})],f.prototype,"layer",null);b.__decorate([k.property()],f.prototype,"name",null);b.__decorate([k.property({type:[String],json:{write:!0}})],f.prototype,"orderByFields",void 0);b.__decorate([k.property()],f.prototype,"searchFields",void 0);b.__decorate([k.property()],
f.prototype,"searchTemplate",void 0);b.__decorate([k.property()],f.prototype,"suggestionTemplate",void 0);return f=e=b.__decorate([C.subclass("esri.widgets.Search.LayerSearchSource")],f)})},"esri/widgets/Search/SearchSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Identifiable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(n,b,a,k,f,x,w,C,g){a=function(h){function e(d){d=h.call(this,d)||this;d.autoNavigate=null;d.filter=null;d.getResults=null;d.getSuggestions=null;d.maxResults=null;d.maxSuggestions=null;d.minSuggestCharacters=null;d.outFields=null;d.placeholder="";d.popupEnabled=null;d.popupTemplate=null;d.prefix="";d.resultGraphicEnabled=null;d.resultSymbol=null;d.suggestionsEnabled=null;d.suffix="";d.withinViewEnabled=!1;d.zoomScale=null;return d}n._inheritsLoose(e,h);return e}(a.IdentifiableMixin(k.JSONSupport));
b.__decorate([f.property()],a.prototype,"autoNavigate",void 0);b.__decorate([f.property()],a.prototype,"filter",void 0);b.__decorate([f.property()],a.prototype,"getResults",void 0);b.__decorate([f.property()],a.prototype,"getSuggestions",void 0);b.__decorate([f.property()],a.prototype,"maxResults",void 0);b.__decorate([f.property()],a.prototype,"maxSuggestions",void 0);b.__decorate([f.property()],a.prototype,"minSuggestCharacters",void 0);b.__decorate([f.property()],a.prototype,"outFields",void 0);
b.__decorate([f.property()],a.prototype,"placeholder",void 0);b.__decorate([f.property()],a.prototype,"popupEnabled",void 0);b.__decorate([f.property()],a.prototype,"popupTemplate",void 0);b.__decorate([f.property()],a.prototype,"prefix",void 0);b.__decorate([f.property()],a.prototype,"resultGraphicEnabled",void 0);b.__decorate([f.property()],a.prototype,"resultSymbol",void 0);b.__decorate([f.property()],a.prototype,"suggestionsEnabled",void 0);b.__decorate([f.property()],a.prototype,"suffix",void 0);
b.__decorate([f.property()],a.prototype,"withinViewEnabled",void 0);b.__decorate([f.property()],a.prototype,"zoomScale",void 0);return a=b.__decorate([g.subclass("esri.widgets.Search.SearchSource")],a)})},"esri/widgets/Search/support/layerSearchUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../intl ../../../core/Error ../../../core/lang ../../../core/Logger ../../../core/maybe ../../../core/unitUtils ../../../geometry/Polygon ./geometryUtils ../../../intl/substitute ../../../intl/date".split(" "),
function(n,b,a,k,f,x,w,C,g,h,e,d){function l(B,G){const {filter:H,withinViewEnabled:Q}=B;B=G&&G.extent;return H&&H.geometry||(Q&&B?B:void 0)}function q(B){return r.apply(this,arguments)}function r(){r=b._asyncToGenerator(function*(B){B&&(yield B.load())});return r.apply(this,arguments)}function v(B){var G,H,Q;return null!=(G=null==B?void 0:null==(H=B.capabilities)?void 0:null==(Q=H.query)?void 0:Q.supportsPagination)?G:!1}function m(B){var G,H,Q,F;return null!=(G=null==B?void 0:null==(H=B.fieldsIndex)?
void 0:null==(Q=H.fields)?void 0:null==(F=Q.find(P=>"string"===P.type))?void 0:F.name)?G:""}function E(B,G){return B&&G?G.every(H=>!!B.getField(H)):!1}function M(B,G,H){let Q=null;({codedValues:B}=B);B&&B.some(F=>{var P=F.name;P=H?P:P.toLowerCase();return(H?G:G.toLowerCase())===P?(Q=F.code.toString(),!0):!1});return Q}function W(B,G){return(G=G&&G.where)?`(${B}) AND (${G})`:B}function K({currentTerm:B,field:G,filter:H,exactMatch:Q,url:F,type:P}){var L=G.type;G=G.name;if("string"===L||"date"===L||
"global-id"===L){if(L=F=A.test(F))a:{for(L=0;L<B.length;L++)if(255<B.charCodeAt(L)){L=!0;break a}L=!1}L=L?"N":"";if(Q&&"search"===P)return W(`${G} = ${L}'${B}'`,H);P=F?G:`UPPER(${G})`;B=F?B:B.toUpperCase();return W(`${P} LIKE ${L}${Q?`'${B}%'`:`'%${B}%'`}`,H)}return"oid"===L||"small-integer"===L||"integer"===L||"single"===L||"double"===L?(Q=Number(B),isNaN(Q)?null:W(`${G} = ${Q}`,H)):W(`${G} = ${B}`,H)}function Z({searchTerm:B,layer:G,searchFields:H,filter:Q,exactMatch:F,type:P}){const {definitionExpression:L,
url:X}=G;let S="";B&&H&&H.forEach(R=>{var U=G.getField(R);R=((R="function"===typeof G.getFieldDomain&&G.getFieldDomain(R))&&"coded-value"===R.type?M(R,B,F):null)||B||null;null!==R&&(U=K({currentTerm:R,field:U,filter:Q,exactMatch:F,url:X,type:P}))&&(S+=S?` OR (${U})`:`(${U})`)});return L?`(${L}) AND (${S})`:S}function ba(B,G){let H=null;({codedValues:B}=B);B&&B.length&&B.some(Q=>Q.code===G?(H=Q.name,!0):!1);return H}function aa(B,G){return B[Object.keys(B).find(H=>H.toLowerCase()===G.toLowerCase())]}
function T(B,G,H){const Q=B.sourceLayer,{attributes:F}=B;B="function"===typeof Q.getFieldDomain&&Q.getFieldDomain(H);return G?e.substitute(G,F):H&&F?(G=Q.getField(H),H=aa(F,H),null==H?"":B&&"coded-value"===B.type?ba(B,H):"date"===(null==G?void 0:G.type)?d.formatDate(new Date(H)):"number"===typeof H?H.toString():"string"!==typeof H?"":H.trim()):""}function I(B,G,H,Q){return B.features.map(F=>{var P=F.sourceLayer,{attributes:L}=F;({objectIdField:P}=P);L=L[P];return F={text:T(F,G.suggestionTemplate,
Q),key:L,sourceIndex:H}})}function t(B,G,H,Q,F,P,L){return B.features.map(X=>{{var S=X.clone();var R=X.sourceLayer;R=(R=R&&R.objectIdField)&&X.attributes[R];const ea=T(X,H.searchTemplate,F);var U=h.createExtentFromGeometry(S.geometry,G,P);U="number"===typeof L?h.scaleExtent(f.clone(U),G,L):U;X=X.clone();w.isSome(U)&&(X.geometry=g.fromExtent(U));S={extent:U,target:X,feature:S,key:R,name:ea,sourceIndex:Q}}return S})}const A=/https?:\/\/services.*\.arcgis\.com/i,u=/(?:\{([^}]+)\})/g,J=x.getLogger("esri.widgets.Search.support.layerSearchUtils");
n.getResults=function(B,G){const {exactMatch:H=!1,location:Q,maxResults:F,spatialReference:P,source:L,sourceIndex:X,suggestResult:S,view:R}=B,{layer:U,filter:ea,zoomScale:ha}=L,da=R&&R.scale,ca=l(L,R),N=G&&G.signal;return q(U).then(()=>{const c=U.popupTemplate;return c?c.getRequiredFields(U.fieldsIndex):null}).then(c=>{var p,y;const {objectIdField:z,returnZ:D}=U,O=L.displayField||L.layer.displayField||m(L.layer);if(!U.getField(O))throw J.error("invalid-field: displayField is invalid."),new k("getResults():invalid-field",
"displayField is invalid.");c=c&&c.length?c:[O];const V=L.outFields||c;c=V&&-1!==V.indexOf("*");-1!==V.indexOf(z)||c||V.push(z);if(!c&&!E(U,V))throw J.error("invalid-field: outField is invalid."),new k("getResults():invalid-field","outField is invalid.");c=U.createQuery();var {orderByFields:Y}=L;Y&&(c.orderByFields=Y);P&&(c.outSpatialReference=P,Y=1/C.getMetersPerUnitForSR(P))&&(c.maxAllowableOffset=Y);Y="mesh"===U.geometryType||"multipatch"===U.geometryType;const ia=(null==(p=U.capabilities)?void 0:
null==(y=p.data)?void 0:y.supportsZ)&&!Y;c.returnZ=ia&&!1!==D;c.returnGeometry=!0;c.multipatchOption=Y?"xyFootprint":null;V&&(c.outFields=V);if(Q)c.geometry=Q;else if(S.key)c.objectIds=[S.key];else{p=L.searchFields||[O];if(!E(U,p))throw J.error("invalid-field: search field is invalid."),new k("getResults():invalid-field","search field is invalid.");v(U)&&(c.num=F);ca&&(c.geometry=ca);if(!S.text.trim())return[];const {prefix:ja="",suffix:fa=""}=L;y=`${ja}${S.text}${fa}`.replace(/'/g,"''");p=Z({searchTerm:y,
layer:U,searchFields:p,filter:ea,exactMatch:H,type:"search"});if(!p)return[];c.where=p}return U.queryFeatures(c,{signal:N}).then(ja=>t(ja,R,L,X,O,da,ha))})};n.getSuggestions=function(B,G){const {source:H,spatialReference:Q,view:F,suggestTerm:P,maxSuggestions:L,sourceIndex:X,exactMatch:S}=B,{layer:R,filter:U}=H,ea=G&&G.signal,ha=l(H,F);return q(R).then(()=>{if(!v(R))return[];const da=H.displayField||H.layer.displayField||m(H.layer);var ca=H.searchFields||[da];const N=[];H.suggestionTemplate?H.suggestionTemplate.replace(u,
(O,V)=>{N.push(V);return O}):N.push(da);var c=N&&-1!==N.indexOf("*");-1!==N.indexOf(R.objectIdField)||c||N.push(R.objectIdField);var p=!!R.getField(da);c=c||E(R,N);const y=E(R,ca);if(!p)throw J.error("invalid-field: displayField is invalid."),new k("getSuggestions():invalid-field","displayField is invalid.");if(!c)throw J.error("invalid-field: outField is invalid."),new k("getSuggestions():invalid-field","outField is invalid.");if(!y)throw J.error("invalid-field: search field is invalid."),new k("getSuggestions():invalid-field",
"search field is invalid.");p=R.createQuery();({orderByFields:c}=H);c&&(p.orderByFields=c);p.outSpatialReference=Q;p.returnGeometry=!1;p.num=L;p.outFields=N;ha&&(p.geometry=ha);if(!P.trim())return[];const {prefix:z="",suffix:D=""}=H;c=`${z}${P}${D}`.replace(/'/g,"''");ca=Z({searchTerm:c,layer:R,searchFields:ca,filter:U,exactMatch:S,type:"suggest"});if(!ca)return[];p.where=ca;return R.queryFeatures(p,{signal:ea}).then(O=>I(O,H,X,da))})};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/widgets/Search/support/geometryUtils":function(){define("exports ../../../geometry ../../../core/Error ../../../core/Logger ../../../core/maybe ../../../geometry/support/scaleUtils ../../../geometry/Extent".split(" "),
function(n,b,a,k,f,x,w){function C(h,e,d){const l=h.hasZ?h.z:void 0;return e&&e.map?(d?x.getExtentForScale(e,d):e.extent).clone().centerAt(h).set({zmax:l,zmin:l}):new w({xmin:h.x-.25,ymin:h.y-.25,xmax:h.x+.25,ymax:h.y+.25,spatialReference:h.spatialReference,zmin:l,zmax:l})}const g=k.getLogger("esri.widgets.Search.support.geometryUtils");n.createExtentFromGeometry=function(h,e,d){if(f.isNone(h))return null;if("extent"===h.type)return h;if("multipoint"===h.type||"polygon"===h.type||"polyline"===h.type)return h.extent;
if("point"===h.type)return C(h,e,d)};n.getPointFromGeometry=function(h){if(f.isNone(h))return null;switch(h.type){case "point":return h;case "extent":return h.center;case "polygon":return h.centroid;case "multipoint":return h.getPoint(0);case "polyline":return h.getPoint(0,0)}return null};n.getPointWithElevation=function(h,e){var d,l;if(!e)return g.error("missing-parameter: view is missing."),Promise.reject(new a("searchgeometryutils:missing-parameter","view is missing."));if(!h)return g.error("missing-parameter: point is missing."),
Promise.reject(new a("searchgeometryutils:missing-parameter","point is missing."));if(h.hasZ||"2d"===e.type)return Promise.resolve(h);const q=null==e?void 0:null==(d=e.map)?void 0:d.ground;return q&&q.layers.length?q.queryElevation(h,{cache:null==(l=e.basemapTerrain)?void 0:l.elevationQueryCache}).then(r=>r.geometry):Promise.resolve(h)};n.scaleExtent=function(h,e,d){return f.isNone(h)||f.isNone(e)?null:C(h.center,e,d)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/geometry/support/scaleUtils":function(){define(["exports",
"../../core/unitUtils"],function(n,b){function a(k,f){f=b.getMetersPerUnitForSR(f);return k/(f*b.inchesPerMeter*96)}n.getExtentForScale=function(k,f){const x=k.extent;k=k.width;f=a(f,x.spatialReference);return x.clone().expand(f*k/x.width)};n.getResolutionForScale=a;n.getScale=function(k,f){f=f||k.extent;k=k.width;const x=b.getMetersPerUnitForSR(f&&f.spatialReference);return f&&k?f.width/k*x*b.inchesPerMeter*96:0};n.getScaleForResolution=function(k,f){f=b.getMetersPerUnitForSR(f);return k*f*b.inchesPerMeter*
96};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/widgets/Search/LocatorSearchSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../tasks/Locator ./SearchSource ./support/locatorUtils".split(" "),
function(n,b,a,k,f,x,w,C,g,h,e,d,l){var q;f=q=function(r){function v(E){var M=r.call(this,E)||this;M.apiKey=null;M.categories=null;M.countryCode=null;M.defaultZoomScale=null;M.locator=null;M.locationType=null;M.name="";M.placeholder="";M.searchTemplate="";M.singleLineFieldName=null;M.suggestionsEnabled=null;M.zoomScale=null;M.getResults=(W,K)=>l.getResults({source:n._assertThisInitialized(M),...W},K);M.getSuggestions=(W,K)=>l.getSuggestions({source:n._assertThisInitialized(M),...W},K);return M}n._inheritsLoose(v,
r);var m=v.prototype;m.readLocator=function(E,M){({url:E}=M);return E?new e({url:E}):null};m.writeLocator=function(E,M){M.url=E?E.url:null};m.clone=function(){return new q({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?a.clone(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,
resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?a.clone(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,locator:this.locator,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})};return v}(d);b.__decorate([k.property()],f.prototype,"apiKey",void 0);b.__decorate([k.property()],
f.prototype,"categories",void 0);b.__decorate([k.property()],f.prototype,"countryCode",void 0);b.__decorate([k.property({json:{write:!0}})],f.prototype,"defaultZoomScale",void 0);b.__decorate([k.property({type:e})],f.prototype,"locator",void 0);b.__decorate([C.reader("locator",["url"])],f.prototype,"readLocator",null);b.__decorate([h.writer("locator")],f.prototype,"writeLocator",null);b.__decorate([k.property()],f.prototype,"locationType",void 0);b.__decorate([k.property({json:{write:!0}})],f.prototype,
"name",void 0);b.__decorate([k.property({json:{write:!0}})],f.prototype,"placeholder",void 0);b.__decorate([k.property()],f.prototype,"searchTemplate",void 0);b.__decorate([k.property({json:{write:!0}})],f.prototype,"singleLineFieldName",void 0);b.__decorate([k.property({json:{read:{source:"suggest"},write:{target:"suggest"}}})],f.prototype,"suggestionsEnabled",void 0);b.__decorate([k.property({json:{write:!0}})],f.prototype,"zoomScale",void 0);return f=q=b.__decorate([g.subclass("esri.widgets.Search.LocatorSearchSource")],
f)})},"esri/tasks/Locator":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/subclass ../geometry/SpatialReference ../rest/locator/addressToLocations ../rest/locator/addressesToLocations ../rest/locator/locationToAddress ../rest/locator/suggestLocations ./Task".split(" "),function(n,b,a,k,f,x,w,C,g,h,e,d,l){k=function(q){function r(m){m=
q.call(this,m)||this;m.outSpatialReference=null;m.url=null;return m}n._inheritsLoose(r,q);var v=r.prototype;v.addressToLocations=function(m,E){!m.outSpatialReference&&this.outSpatialReference&&(m.outSpatialReference=this.outSpatialReference);return g.addressToLocations(this.url,m,{...this.requestOptions,...E})};v.suggestLocations=function(m,E){return d.suggestLocations(this.url,m,{...this.requestOptions,...E})};v.addressesToLocations=function(m,E){!m.outSpatialReference&&this.outSpatialReference&&
(m.outSpatialReference=this.outSpatialReference);return h.addressesToLocations(this.url,m,{...this.requestOptions,...E})};v.locationToAddress=function(m,E){!m.outSpatialReference&&this.outSpatialReference&&(m.outSpatialReference=this.outSpatialReference);return e.locationToAddress(this.url,m,{...this.requestOptions,...E})};return r}(l);b.__decorate([a.property({type:C})],k.prototype,"outSpatialReference",void 0);b.__decorate([a.property()],k.prototype,"url",void 0);return k=b.__decorate([w.subclass("esri.tasks.Locator")],
k)})},"esri/rest/locator/addressToLocations":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../utils ./utils ../support/AddressCandidate ../support/AddressToLocationsParameters".split(" "),function(n,b,a,k,f,x,w){function C(){C=b._asyncToGenerator(function*(h,e,d){e=w.from(e);h=k.parseUrl(h);const {address:l,...q}=e.toJSON();e=k.encode({...h.query,...l,...q,f:"json"});d=k.asValidOptions(e,d);return a(`${h.path}/findAddressCandidates`,d).then(g)});return C.apply(this,
arguments)}function g({data:h}){if(!h)return[];const {candidates:e,spatialReference:d}=h;return e?e.map(l=>{if(l){var {extent:q,location:r}=l,v=q?f.isValidExtent(q):!0;if(f.isValidLocation(r)&&v)return q&&(q.spatialReference=d),r.spatialReference=d,x.fromJSON(l)}}):[]}n.addressToLocations=function(h,e,d){return C.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/locator/utils":function(){define(["exports"],function(n){n.isValidExtent=function(b){return b&&"number"===
typeof b.xmin&&"number"===typeof b.ymin&&"number"===typeof b.xmax&&"number"===typeof b.ymax};n.isValidLocation=function(b){return b&&"number"===typeof b.x&&"number"===typeof b.y};n.normalizeExtent=function(b){return b?b.shiftCentralMeridian():null};n.normalizePoint=function(b){return b?b.clone().normalize():null};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/support/AddressCandidate":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/Point".split(" "),
function(n,b,a,k,f,x,w,C,g,h){a=function(e){function d(l){l=e.call(this,l)||this;l.address=null;l.attributes=null;l.extent=null;l.location=null;l.score=null;return l}n._inheritsLoose(d,e);return d}(a.JSONSupport);b.__decorate([k.property({type:String,json:{write:!0}})],a.prototype,"address",void 0);b.__decorate([k.property({type:Object,json:{write:!0}})],a.prototype,"attributes",void 0);b.__decorate([k.property({type:g,json:{write:!0}})],a.prototype,"extent",void 0);b.__decorate([k.property({type:h,
json:{write:!0}})],a.prototype,"location",void 0);b.__decorate([k.property({type:Number,json:{write:!0}})],a.prototype,"score",void 0);return a=b.__decorate([C.subclass("esri.rest.support.AddressCandidate")],a)})},"esri/rest/support/AddressToLocationsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./commonProperties ../../geometry/Point ../../geometry/SpatialReference ../../geometry/Extent".split(" "),
function(n,b,a,k,f,x,w,C,g,h,e,d,l){a=function(q){function r(v){v=q.call(this,v)||this;v.address=null;v.apiKey=null;v.categories=null;v.countryCode=null;v.forStorage=null;v.location=null;v.locationType=null;v.magicKey=null;v.maxLocations=null;v.outFields=null;v.outSpatialReference=null;v.searchExtent=null;return v}n._inheritsLoose(r,q);return r}(k.JSONSupport);b.__decorate([f.property({type:Object,json:{write:!0}})],a.prototype,"address",void 0);b.__decorate([f.property(h.apiKey)],a.prototype,"apiKey",
void 0);b.__decorate([f.property({type:[String],json:{read:{source:"category",reader:q=>q?q.split(","):null},write:{target:"category",writer:(q,r)=>{r.category=q?q.join(","):null}}}})],a.prototype,"categories",void 0);b.__decorate([f.property({type:String,json:{write:!0}})],a.prototype,"countryCode",void 0);b.__decorate([f.property({type:Boolean,json:{write:!0}})],a.prototype,"forStorage",void 0);b.__decorate([f.property({type:e,json:{write:{writer:(q,r)=>{r.location=q?q.clone().normalize():null}}}})],
a.prototype,"location",void 0);b.__decorate([f.property({type:String,json:{write:!0}})],a.prototype,"locationType",void 0);b.__decorate([f.property({type:String,json:{write:!0}})],a.prototype,"magicKey",void 0);b.__decorate([f.property({type:Number,json:{write:!0}})],a.prototype,"maxLocations",void 0);b.__decorate([f.property({type:[String],json:{write:{writer:(q,r)=>{r.outFields=q?q.join(","):null}}}})],a.prototype,"outFields",void 0);b.__decorate([f.property({type:d,json:{read:{source:"outSR"},
write:{target:"outSR"}}})],a.prototype,"outSpatialReference",void 0);b.__decorate([f.property({type:l,json:{write:{writer:(q,r)=>{q=q?q.shiftCentralMeridian():null;r.searchExtent=q}}}})],a.prototype,"searchExtent",void 0);a=b.__decorate([g.subclass("esri.rest.support.AddressToLocationsParameters")],a);a.from=w.ensureType(a);return a})},"esri/rest/support/commonProperties":function(){define(["exports"],function(n){n.apiKey={type:String,json:{read:{source:"token"},write:{target:"token"}}};Object.defineProperty(n,
"__esModule",{value:!0})})},"esri/rest/locator/addressesToLocations":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../utils ../support/AddressCandidate ../support/AddressesToLocationsParameters".split(" "),function(n,b,a,k,f,x){function w(){w=b._asyncToGenerator(function*(g,h,e){h=x.from(h);g=k.parseUrl(g);h={...h.toJSON(),f:"json"};h=k.encode({...g.query,...h});e=k.asValidOptions(h,e);return a(`${g.path}/geocodeAddresses`,e).then(C)});return w.apply(this,arguments)}
function C(g){({data:g}=g);if(!g)return[];const {locations:h,spatialReference:e}=g;return h?h.map(d=>{const {location:l}=d;l&&(l.spatialReference=e);return f.fromJSON(d)}):[]}n.addressesToLocations=function(g,h,e){return w.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/support/AddressesToLocationsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../geometry/SpatialReference".split(" "),
function(n,b,a,k,f,x,w,C,g,h){a=function(e){function d(l){l=e.call(this,l)||this;l.addresses=null;l.categories=null;l.countryCode=null;l.locationType=null;l.outSpatialReference=null;return l}n._inheritsLoose(d,e);return d}(k.JSONSupport);b.__decorate([f.property({type:[Object],json:{read:{reader:e=>e&&e.records?e.records.map(d=>d.attributes):null},write:{writer:(e,d)=>{const l=[];Array.isArray(e)&&e.forEach(q=>{l.push({attributes:q})});d.addresses={records:l}}}}})],a.prototype,"addresses",void 0);
b.__decorate([f.property({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,d)=>{d.category=e?e.join(","):null}}}})],a.prototype,"categories",void 0);b.__decorate([f.property({type:String,json:{read:{source:"sourceCountry"},write:{target:"sourceCountry"}}})],a.prototype,"countryCode",void 0);b.__decorate([f.property({type:String,json:{write:!0}})],a.prototype,"locationType",void 0);b.__decorate([f.property({type:h,json:{read:{source:"outSR"},
write:{target:"outSR"}}})],a.prototype,"outSpatialReference",void 0);a=b.__decorate([g.subclass("esri.rest.support.AddressesToLocationsParameters")],a);a.from=w.ensureType(a);return a})},"esri/rest/locator/locationToAddress":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../utils ../support/AddressCandidate ../support/LocationToAddressParameters".split(" "),function(n,b,a,k,f,x){function w(){w=b._asyncToGenerator(function*(g,h,e){h=x.from(h);g=k.parseUrl(g);h={...h.toJSON(),
f:"json"};h=k.encode({...g.query,...h});e=k.asValidOptions(h,e);return a(`${g.path}/reverseGeocode`,e).then(C)});return w.apply(this,arguments)}function C({data:g}){if(g){var {address:h,location:e}=g;return f.fromJSON({address:h&&h.Match_addr||"",attributes:h||{},location:e,score:100})}}n.locationToAddress=function(g,h,e){return w.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/support/LocationToAddressParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./commonProperties ../../geometry/Point ../../geometry/SpatialReference".split(" "),
function(n,b,a,k,f,x,w,C,g,h,e,d){a=function(l){function q(r){r=l.call(this,r)||this;r.apiKey=null;r.location=null;r.locationType=null;r.outSpatialReference=null;return r}n._inheritsLoose(q,l);return q}(k.JSONSupport);b.__decorate([f.property(h.apiKey)],a.prototype,"apiKey",void 0);b.__decorate([f.property({type:e,json:{write:{writer:(l,q)=>{l=l?l.clone().normalize():null;q.location="undefined"!==typeof l?l:null}}}})],a.prototype,"location",void 0);b.__decorate([f.property({type:String,json:{write:!0}})],
a.prototype,"locationType",void 0);b.__decorate([f.property({type:d,json:{read:{source:"outSR"},write:{target:"outSR"}}})],a.prototype,"outSpatialReference",void 0);a=b.__decorate([g.subclass("esri.rest.support.LocationToAddressParameters")],a);a.from=w.ensureType(a);return a})},"esri/rest/locator/suggestLocations":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../utils ../support/SuggestionCandidate ../support/SuggestLocationsParameters".split(" "),function(n,b,a,
k,f,x){function w(){w=b._asyncToGenerator(function*(g,h,e){g=k.parseUrl(g);h=x.from(h);h={...h.toJSON(),f:"json"};h=k.encode({...g.query,...h});e=k.asValidOptions(h,e);return a(`${g.path}/suggest`,e).then(C)});return w.apply(this,arguments)}function C(g){({data:g}=g);if(!g)return[];({suggestions:g}=g);return g?g.map(h=>new f(h)):[]}n.suggestLocations=function(g,h,e){return w.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/support/SuggestionCandidate":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(n,b,a,k,f,x,w,C){a=function(g){function h(e){e=g.call(this,e)||this;e.isCollection=null;e.magicKey=null;e.text=null;return e}n._inheritsLoose(h,g);return h}(a.JSONSupport);b.__decorate([k.property({type:Boolean,json:{write:!0}})],a.prototype,"isCollection",void 0);b.__decorate([k.property({type:String,json:{write:!0}})],a.prototype,"magicKey",void 0);b.__decorate([k.property({type:String,json:{write:!0}})],a.prototype,"text",void 0);return a=b.__decorate([C.subclass("esri.rest.support.SuggestionCandidate")],
a)})},"esri/rest/support/SuggestLocationsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./commonProperties ../../geometry/Point ../../geometry/SpatialReference ../../geometry/Extent".split(" "),function(n,b,a,k,f,x,w,C,g,h,e,d,l){a=function(q){function r(v){v=
q.call(this,v)||this;v.apiKey=null;v.categories=null;v.countryCode=null;v.location=null;v.maxSuggestions=null;v.outSpatialReference=null;v.searchExtent=null;v.text=null;return v}n._inheritsLoose(r,q);return r}(k.JSONSupport);b.__decorate([f.property(h.apiKey)],a.prototype,"apiKey",void 0);b.__decorate([f.property({type:[String],json:{read:{source:"category",reader:q=>q?q.split(","):null},write:{target:"category",writer:(q,r)=>{r.category=q?q.join(","):null}}}})],a.prototype,"categories",void 0);b.__decorate([f.property({type:String,
json:{write:!0}})],a.prototype,"countryCode",void 0);b.__decorate([f.property({type:e,json:{write:{writer:(q,r)=>{r.location=q?q.clone().normalize():null}}}})],a.prototype,"location",void 0);b.__decorate([f.property({type:Number,json:{write:!0}})],a.prototype,"maxSuggestions",void 0);b.__decorate([f.property({type:d,json:{read:{source:"outSR"},write:{target:"outSR"}}})],a.prototype,"outSpatialReference",void 0);b.__decorate([f.property({type:l,json:{write:{writer:(q,r)=>{q=q?q.shiftCentralMeridian():
null;r.searchExtent=JSON.stringify(q)}}}})],a.prototype,"searchExtent",void 0);b.__decorate([f.property({type:String,json:{write:!0}})],a.prototype,"text",void 0);a=b.__decorate([g.subclass("esri.rest.support.SuggestLocationsParameters")],a);a.from=w.ensureType(a);return a})},"esri/widgets/Search/support/locatorUtils":function(){define("exports ../../../Graphic ../../../core/maybe ../../../geometry/Polygon ../../../rest/support/AddressToLocationsParameters ../../../rest/support/LocationToAddressParameters ../../../rest/support/SuggestLocationsParameters ./geometryUtils".split(" "),
function(n,b,a,k,f,x,w,C){function g(r){const v=null==r?void 0:r.scale;return"number"===typeof v&&3E5>=v?r.get("extent.center"):null}function h(r,v){const {source:m,spatialReference:E,location:M,sourceIndex:W,view:K}=r,{apiKey:Z,locator:ba,zoomScale:aa,defaultZoomScale:T}=m,I=K&&K.scale;r=v&&v.signal;v=new x;v.location=M;Z&&(v.apiKey=Z);E&&(v.outSpatialReference=E);return ba.locationToAddress(v,{signal:r}).then(t=>q([t],{sourceIndex:W,scale:I,view:K,zoomScale:aa,defaultZoomScale:T}))}function e(r,
v){const {filter:m,withinViewEnabled:E}=r;r=v&&v.extent;return(v=C.createExtentFromGeometry(m&&m.geometry,v,v&&v.scale))||(E&&r?r:void 0)}function d(r,v){const {source:m,suggestResult:E,spatialReference:M,view:W,maxResults:K,sourceIndex:Z}=r,ba=m&&m.zoomScale,aa=m&&m.defaultZoomScale;if(!E.text.trim())return Promise.resolve(null);r=`${!E.key&&m.prefix?m.prefix:""}${E.text}${!E.key&&m.suffix?m.suffix:""}`;const T=new f,{apiKey:I,locator:t}=m,A=W&&W.scale;var u=e(m,W);v=v&&v.signal;I&&(T.apiKey=I);
if(!t)return Promise.resolve(null);m.categories&&(T.categories=m.categories);m.locationType&&(T.locationType=m.locationType);M&&(T.outSpatialReference=M);const J=g(W);J&&(T.location=J);T.maxLocations=K;u&&(T.searchExtent=a.unwrap(u));m.countryCode&&(T.countryCode=m.countryCode);({key:u}=E);const B=`${u}`;u&&(T.magicKey=B);T.address={};T.address[m.singleLineFieldName||"Single Line Input"]=r;m.outFields&&(T.outFields=m.outFields);return t.addressToLocations(T,{signal:v}).then(G=>q(G,{key:B,scale:A,
sourceIndex:Z,view:W,zoomScale:ba,defaultZoomScale:aa}))}function l(r,v){return r.map(m=>({text:m.text,key:m.magicKey,sourceIndex:v}))}function q(r,v){return r.filter(Boolean).map(m=>{{const {key:W,scale:K,sourceIndex:Z,view:ba,zoomScale:aa,defaultZoomScale:T}=v,{attributes:I,extent:t,location:A,address:u}=m;m=new b({geometry:A,attributes:I});var E=t||A,M=C.createExtentFromGeometry(E,ba,K);E="number"===typeof aa?C.scaleExtent(M,ba,aa):"number"===typeof T&&"point"===E.type?C.scaleExtent(M,ba,T):M;
M=A?`${A.x},${A.y}`:"";M=u||M;const J=m.clone();a.isSome(E)&&(J.geometry=k.fromExtent(E));m={extent:E,feature:m,target:J,key:W,name:M,sourceIndex:Z}}return m})}n.getLocation=g;n.getResults=function(r,v){return r.location?h(r,v):d(r,v)};n.getSuggestions=function(r,v){const {source:m,spatialReference:E,view:M,suggestTerm:W,maxSuggestions:K,sourceIndex:Z}=r;r=new w;const {apiKey:ba,locator:aa}=m,T=e(m,M);v=v&&v.signal;if(!aa)return Promise.resolve(null);ba&&(r.apiKey=ba);m.categories&&(r.categories=
m.categories);E&&(r.outSpatialReference=E);const I=g(M);I&&(r.location=I);if(!W.trim())return Promise.resolve(null);const {prefix:t="",suffix:A=""}=m;r.text=`${t}${W}${A}`;T&&(r.searchExtent=a.unwrap(T));r.maxSuggestions=K;m.countryCode&&(r.countryCode=m.countryCode);return aa.suggestLocations(r,{signal:v}).then(u=>l(u,Z))};n.isArcGISWorldGeocoder=function(r){return r?/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(r):!1};n.isMeteredArcGISWorldGeocoder=function(r){return r?
/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(r):!1};n.isProxiedArcGISWorldGeocoder=function(r){return r?/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi.test(r):!1};n.meteredArcGISLocatorUrl="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";Object.defineProperty(n,"__esModule",{value:!0})})},"esri/widgets/support/geolocationUtils":function(){define("exports ../../config ../../core/Error ../../core/has ../../core/Logger ../../geometry/Point ../../geometry/support/webMercatorUtils ../../portal/Portal ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/urlUtils ../../geometry ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Polygon ../../geometry/Polyline ../../rest/geometryService/units ../../rest/support/GeneralizeParameters ../../tasks/operations/generalize ../../rest/support/LengthsParameters ../../tasks/operations/lengths ../../rest/support/OffsetParameters ../../tasks/operations/offset ../../rest/geometryService/project ../../rest/support/RelationParameters ../../tasks/operations/relation ../../rest/support/TrimExtendParameters ../../tasks/operations/trimExtend ../../rest/support/ProjectParameters".split(" "),
function(n,b,a,k,f,x,w,C,g,h,e,d,l,q,r,v,m,E,M,W,K,Z,ba,aa,T,I,t,A,u,J){function B(F,P,L){if(!P)return Promise.resolve(F);const X=P.spatialReference;return X.isWGS84?Promise.resolve(F):X.isWebMercator?Promise.resolve(w.geographicToWebMercator(F)):G(L).then(S=>{if(!S)throw new a("geometry-service:missing-url","Geometry service URL is missing");const R=new J({geometries:[F],outSpatialReference:X});return T.project(S,R,L).then(U=>U[0])})}function G(F){if(b.geometryServiceUrl)return Promise.resolve(b.geometryServiceUrl);
const P=C.getDefault();return P.load(F).catch(()=>{}).then(()=>P.get("helperServices.geometry.url"))}const H=f.getLogger("esri.widgets.support.geolocationUtils"),Q={maximumAge:0,timeout:15E3,enableHighAccuracy:!0};n.getCurrentPosition=function(F){F||(F=Q);return new Promise((P,L)=>{setTimeout(()=>L(new a("geolocation:timeout","getting the current geolocation position timed out")),15E3);navigator.geolocation.getCurrentPosition(P,L,F)})};n.positionToPoint=function(F,P){const {position:L,view:X}=F;F=
L&&L.coords||{};F={accuracy:F.accuracy,altitude:F.altitude,altitudeAccuracy:F.altitudeAccuracy,heading:F.heading,latitude:F.latitude,longitude:F.longitude,speed:F.speed};F=L?{coords:F,timestamp:L.timestamp}:L;F=(F=F&&F.coords)?new x({longitude:F.longitude,latitude:F.latitude,z:F.altitude||null,spatialReference:{wkid:4326}}):null;return B(F,X,P)};n.supported=function(){var F;(F=k("esri-geolocation"))||H.warn("geolocation-unsupported","Geolocation unsupported.");F&&((F=window.isSecureContext)||H.warn("insecure-context",
"Geolocation requires a secure origin."));return F};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/geometryService/units":function(){define(["exports","../../core/jsonMap"],function(n,b){b=new b.JSONMap({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"});n.conversionTypeKebabDict=b;n.units={UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,
UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,
UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,
UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",
UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/support/GeneralizeParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),
function(n,b,a,k,f,x,w,C,g){a=function(h){function e(d){d=h.call(this,d)||this;d.deviationUnit=null;d.geometries=null;d.maxDeviation=null;return d}n._inheritsLoose(e,h);return e}(a.JSONSupport);b.__decorate([k.property({type:String,json:{write:!0}})],a.prototype,"deviationUnit",void 0);b.__decorate([k.property({json:{read:{reader:h=>h?h.map(e=>g.fromJSON(e)):null},write:{writer:(h,e)=>{e.geometries=h.map(d=>d.toJSON())}}}})],a.prototype,"geometries",void 0);b.__decorate([k.property({type:Number,json:{write:!0}})],
a.prototype,"maxDeviation",void 0);a=b.__decorate([C.subclass("esri.rest.support.GeneralizeParameters")],a);a.from=x.ensureType(a);return a})},"esri/tasks/operations/generalize":function(){define(["exports","../../core/jsonMap","../../geometry/support/jsonUtils"],function(n,b,a){const k=new b.JSONMap({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});n.generalizeToRESTParameters=
function(f){const {geometries:x,deviationUnit:w,maxDeviation:C}=f.toJSON();f={maxDeviation:C};x&&x.length&&(f.geometries=JSON.stringify({geometryType:a.getJsonType(x[0]),geometries:x}),f.sr=JSON.stringify(x[0].spatialReference));k.write(w,f,"deviationUnit");return f};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/support/LengthsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils ../../geometry/Polyline".split(" "),
function(n,b,a,k,f,x,w,C,g,h,e){a=function(d){function l(q){q=d.call(this,q)||this;q.calculationType=null;q.geodesic=null;q.lengthUnit=null;q.polylines=null;return q}n._inheritsLoose(l,d);return l}(k.JSONSupport);b.__decorate([f.property({type:String,json:{write:!0}})],a.prototype,"calculationType",void 0);b.__decorate([f.property({type:Boolean,json:{write:!0}})],a.prototype,"geodesic",void 0);b.__decorate([f.property({json:{write:!0}})],a.prototype,"lengthUnit",void 0);b.__decorate([f.property({type:[e],
json:{read:{reader:d=>d?d.map(l=>h.fromJSON(l)):null},write:{writer:(d,l)=>{l.polylines=d.map(q=>q.toJSON())}}}})],a.prototype,"polylines",void 0);a=b.__decorate([g.subclass("esri.rest.support.LengthsParameters")],a);a.from=w.ensureType(a);return a})},"esri/tasks/operations/lengths":function(){define(["exports","../../core/jsonMap"],function(n,b){const a=new b.JSONMap({preserveShape:"preserve-shape"});n.lengthsToRESTParameters=function(k){const {polylines:f,lengthUnit:x,geodesic:w,calculationType:C}=
k.toJSON(),g={};g.polylines=JSON.stringify(f);k=k.polylines[0].spatialReference;g.sr=k.wkid?k.wkid:JSON.stringify(k.toJSON());x&&(g.lengthUnit=x);w&&(g.geodesic=w);C&&(g.calculationType=a.toJSON(C));return g};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/support/OffsetParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),
function(n,b,a,k,f,x,w,C,g){a=function(h){function e(d){d=h.call(this,d)||this;d.bevelRatio=null;d.geometries=null;d.offsetDistance=null;d.offsetHow=null;d.offsetUnit=null;return d}n._inheritsLoose(e,h);return e}(a.JSONSupport);b.__decorate([k.property({type:Number,json:{write:!0}})],a.prototype,"bevelRatio",void 0);b.__decorate([k.property({json:{read:{reader:h=>h?h.map(e=>g.fromJSON(e)):null},write:{writer:(h,e)=>{e.geometries=h.map(d=>d.toJSON())}}}})],a.prototype,"geometries",void 0);b.__decorate([k.property({type:Number,
json:{write:!0}})],a.prototype,"offsetDistance",void 0);b.__decorate([k.property({type:String,json:{write:!0}})],a.prototype,"offsetHow",void 0);b.__decorate([k.property({type:String,json:{write:!0}})],a.prototype,"offsetUnit",void 0);a=b.__decorate([C.subclass("esri.rest.support.OffsetParameters")],a);a.from=x.ensureType(a);return a})},"esri/tasks/operations/offset":function(){define(["exports","../../core/jsonMap","../../geometry/support/jsonUtils"],function(n,b,a){const k=new b.JSONMap({esriGeometryOffsetBevelled:"bevelled",
esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"}),f=new b.JSONMap({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});n.offsetToRESTParameters=function(x){const {geometries:w,bevelRatio:C,offsetDistance:g,offsetHow:h,offsetUnit:e}=x.toJSON();x={bevelRatio:C,offsetDistance:g};w&&w.length&&(x.geometries=JSON.stringify({geometryType:a.getJsonType(w[0]),geometries:w}),x.sr=JSON.stringify(w[0].spatialReference));h&&(x.offsetHow=k.toJSON(h));
e&&(x.offsetUnit=f.toJSON(e));return x};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/geometryService/project":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils ../utils ./utils ../support/ProjectParameters".split(" "),function(n,b,a,k,f,x,w,C){function g(){g=b._asyncToGenerator(function*(e,d,l){d=h(d);e=x.parseUrl(e);const q={...e.query,f:"json",...d.toJSON()},r=d.outSpatialReference,
v=f.getJsonType(d.geometries[0]);d=x.asValidOptions(q,l);return a(e.path+"/project",d).then(({data:{geometries:m}})=>w.decodeGeometries(m,v,r))});return g.apply(this,arguments)}const h=k.ensureType(C);n.project=function(e,d,l){return g.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(n,b){n.decodeGeometries=function(a,k,f){const x=b.getGeometryType(k);return a.map(w=>
{w=x.fromJSON(w);w.spatialReference=f;return w})};n.encodeGeometries=function(a){return{geometryType:b.getJsonType(a[0]),geometries:a.map(k=>k.toJSON())}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/support/ProjectParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),
function(n,b,a,k,f,x,w,C,g){a=function(h){function e(d){d=h.call(this,d)||this;d.geometries=null;d.outSpatialReference=null;d.transformation=null;d.transformForward=null;return d}n._inheritsLoose(e,h);e.prototype.toJSON=function(){const d=this.geometries.map(function(r){return r.toJSON()}),l=this.geometries[0],q={};q.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON());q.inSR=l.spatialReference.wkid||JSON.stringify(l.spatialReference.toJSON());q.geometries=JSON.stringify({geometryType:g.getJsonType(l),
geometries:d});this.transformation&&(q.transformation=this.transformation.wkid||JSON.stringify(this.transformation));null!=this.transformForward&&(q.transformForward=this.transformForward);return q};return e}(a.JSONSupport);b.__decorate([k.property()],a.prototype,"geometries",void 0);b.__decorate([k.property({json:{read:{source:"outSR"}}})],a.prototype,"outSpatialReference",void 0);b.__decorate([k.property()],a.prototype,"transformation",void 0);b.__decorate([k.property()],a.prototype,"transformForward",
void 0);return a=b.__decorate([C.subclass("esri.rest.support.ProjectParameters")],a)})},"esri/rest/support/RelationParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),function(n,b,a,k,f,x,w,C,g){a=function(h){function e(d){d=h.call(this,
d)||this;d.geometries1=null;d.geometries2=null;d.relation=null;d.relationParameter=null;return d}n._inheritsLoose(e,h);return e}(a.JSONSupport);b.__decorate([k.property({json:{read:{reader:h=>h?h.map(e=>g.fromJSON(e)):null},write:{writer:(h,e)=>{e.geometries1=h.map(d=>d.toJSON())}}}})],a.prototype,"geometries1",void 0);b.__decorate([k.property({json:{read:{reader:h=>h?h.map(e=>g.fromJSON(e)):null},write:{writer:(h,e)=>{e.geometries2=h.map(d=>d.toJSON())}}}})],a.prototype,"geometries2",void 0);b.__decorate([k.property({type:String,
json:{write:!0}})],a.prototype,"relation",void 0);b.__decorate([k.property({type:String,json:{write:!0}})],a.prototype,"relationParameter",void 0);a=b.__decorate([C.subclass("esri.rest.support.RelationParameters")],a);a.from=x.ensureType(a);return a})},"esri/tasks/operations/relation":function(){define(["exports","../../core/jsonMap","../../geometry/support/jsonUtils"],function(n,b,a){const k=new b.JSONMap({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",
esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});n.relationToRESTParameters=function(f){const {geometries1:x,geometries2:w,relation:C,relationParameter:g}=
f.toJSON();f={};if(x&&x.length){f.geometries1=JSON.stringify({geometryType:a.getJsonType(x[0]),geometries:x});const h=x[0].spatialReference;f.sr=h.wkid?h.wkid:JSON.stringify(h)}w&&0<w.length&&(f.geometries2=JSON.stringify({geometryType:a.getJsonType(w[0]),geometries:w}));C&&(f.relation=k.toJSON(C));g&&(f.relationParam=g);return f};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/support/TrimExtendParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils ../../geometry/Polyline".split(" "),
function(n,b,a,k,f,x,w,C,g,h,e){a=function(d){function l(q){q=d.call(this,q)||this;q.extendHow="default-curve-extension";q.polylines=null;q.trimExtendTo=null;return q}n._inheritsLoose(l,d);return l}(k.JSONSupport);b.__decorate([f.property({type:String,json:{write:!0}})],a.prototype,"extendHow",void 0);b.__decorate([f.property({type:[e],json:{read:{reader:d=>d?d.map(l=>h.fromJSON(l)):null},write:{writer:(d,l)=>{l.polylines=d.map(q=>q.toJSON())}}}})],a.prototype,"polylines",void 0);b.__decorate([f.property({json:{read:{reader:d=>
d?h.fromJSON(d):null},write:{writer:(d,l)=>{l.trimExtendTo=d.toJSON()}}}})],a.prototype,"trimExtendTo",void 0);a=b.__decorate([g.subclass("esri.rest.support.TrimExtendParameters")],a);a.from=w.ensureType(a);return a})},"esri/tasks/operations/trimExtend":function(){define(["exports","../../core/jsonMap"],function(n,b){const a=new b.JSONMap({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});n.trimExtendToRESTParameters=
function(k){const {extendHow:f,polylines:x,trimExtendTo:w}=k.toJSON();k={};k.extendHow=a.toJSON(f);x&&x.length&&(k.polylines=JSON.stringify(x),k.sr=JSON.stringify(x[0].spatialReference));w&&(k.trimExtendTo=JSON.stringify(w));return k};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/widgets/support/GoTo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(n,b,a,k,f,x,w,C){n.GoToMixin=g=>{g=function(h){function e(...d){d=h.call(this,...d)||this;d.goToOverride=null;d.view=null;return d}b._inheritsLoose(e,h);e.prototype.callGoTo=function(d){const {view:l}=this;return this.goToOverride?this.goToOverride(l,d):l.goTo(d.target,d.options)};return e}(g);a.__decorate([k.property()],g.prototype,"goToOverride",void 0);a.__decorate([k.property()],g.prototype,"view",void 0);return g=a.__decorate([C.subclass("esri.widgets.support.GoTo")],g)};Object.defineProperty(n,
"__esModule",{value:!0})})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/events ../core/Handles ../core/promiseUtils ../core/string ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Search/SearchResultRenderer ./Search/SearchViewModel ./support/widgetUtils ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ../intl/substitute".split(" "),function(n,
b,a,k,f,x,w,C,g,h,e,d,l,q,r,v,m,E,M,W,K,Z){const ba=/<[a-z/][\s\S]*>/i;a=function(aa){function T(t,A){var u=aa.call(this,t,A)||this;u._activeMenuItemIndex=-1;u._handles=new f;u._inputNode=null;u._menuItemCount=0;u._sourceMenuButtonNode=null;u._sourceListNode=null;u._suggestionListNode=null;u._searchResultRenderer=new v;u._locateFailed=null;u._container=null;u.activeMenu="none";u.activeSource=null;u.activeSourceIndex=null;u.allPlaceholder=null;u.allSources=null;u.autoNavigate=null;u.autoSelect=null;
u.defaultSources=null;u.disabled=!1;u.goToOverride=null;u.iconClass="esri-icon-search";u.includeDefaultSources=null;u.label=void 0;u.locationEnabled=null;u.maxResults=null;u.maxSuggestions=null;u.messages=null;u.messagesCommon=null;u.minSuggestCharacters=null;u.popupEnabled=null;u.popupTemplate=null;u.portal=null;u.resultGraphic=null;u.resultGraphicEnabled=null;u.results=null;u.searchAllEnabled=null;u.searchTerm=null;u.selectedResult=null;u.sources=null;u.suggestions=null;u.suggestionsEnabled=null;
u.view=null;u.viewModel=new m;u._clearActiveMenu=()=>{u.activeMenu="none"};u._removeActiveMenu=J=>{var B;(J=J.relatedTarget)&&null!=(B=u._container)&&B.contains(J)||u._clearActiveMenu()};u.own(C.watch(n._assertThisInitialized(u),"searchTerm",J=>{(J&&"warning"===u.activeMenu||!J&&!u.get("viewModel.selectedSuggestion.location"))&&u._clearActiveMenu()}),C.on(n._assertThisInitialized(u),"viewModel.allSources","change",()=>u._watchSourceChanges()),C.init(n._assertThisInitialized(u),"activeMenu",()=>u._resetActiveMenuItemIndex()),
C.init(n._assertThisInitialized(u),"viewModel.defaultPopupTemplate",J=>{J&&(J.content=u._renderSearchResultsContent.bind(n._assertThisInitialized(u)))}));return u}n._inheritsLoose(T,aa);var I=T.prototype;I.destroy=function(){this._handles.destroy();this._handles=null;this._cancelSuggest();this._cancelSearch();this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null)};I.clear=function(){};I.focus=function(){var t;null==
(t=this._inputNode)?void 0:t.focus();this.emit("search-focus")};I.blur=function(){var t;null==(t=this._inputNode)?void 0:t.blur();this.emit("search-blur")};I.search=function(t){this._clearActiveMenu();this._cancelSuggest();this._cancelSearch();const A=x.createAbortController(),{signal:u}=A;this._searchController=A;return this.viewModel.search(t,{signal:u}).catch(J=>{if(this._searchController===A)return this._clearActiveMenu(),this._searchController=null,J}).then(J=>{if(this._searchController===A)return this.activeMenu=
J.numResults?"none":"warning",this._searchController=null,J})};I.suggest=function(t){this._cancelSuggest();const A=x.createAbortController(),{signal:u}=A;this._suggestController=A;return this.viewModel.suggest(t,null,{signal:u}).then(J=>{if(this._suggestController===A)return this._suggestController=null,J.numResults&&this._openSuggestionMenu(),this._scrollToTopSuggestion(),J}).catch(()=>{if(this._suggestController===A)return this._suggestController=null})};I.render=function(){const {state:t}=this.viewModel;
return K.tsx("div",{class:this.classes("esri-search esri-widget",{["esri-disabled"]:"disabled"===t,["esri-widget--disabled"]:this.disabled})},"loading"===t?this.renderLoader():this.renderContainer())};I.renderSubmitButton=function(){const {messages:t}=this;return K.tsx("button",{"aria-label":t.searchButtonTitle,bind:this,class:this.classes("esri-search__submit-button","esri-widget--button"),key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:t.searchButtonTitle},K.tsx("span",
{"aria-hidden":"true",class:"esri-icon-search"}))};I.renderWarningMenu=function(){return K.tsx("div",{key:"esri-search__error-menu",class:this.classes("esri-menu","esri-search__warning-menu")},K.tsx("div",{class:"esri-search__warning-body"},this.renderWarning()))};I.renderSourceMenuButton=function(){const {messages:t,activeMenu:A,sourceMenuId:u,sourceMenuButtonId:J}=this,{activeSourceIndex:B,allSources:G}=this.viewModel;return 1<G.length?K.tsx("button",{id:J,key:"esri-search__source-menu-button",
bind:this,"aria-label":t.searchIn,title:t.searchIn,"aria-haspopup":"true","aria-expanded":("source"===A).toString(),"aria-controls":u,class:this.classes("esri-search__sources-button","esri-widget--button"),onclick:this._handleSourcesMenuToggleClick,onfocus:this._clearActiveMenu,afterCreate:E.storeNode,"data-node-ref":"_sourceMenuButtonNode"},K.tsx("span",{"aria-hidden":"true",class:"esri-icon-down-arrow esri-search__sources-button--down"}),K.tsx("span",{"aria-hidden":"true",class:"esri-icon-up-arrow esri-search__sources-button--up"}),
K.tsx("span",{class:"esri-search__source-name"},this._getSourceName(B))):null};I.renderSourcesList=function(){const {allSources:t,searchAllEnabled:A}=this.viewModel,{_activeMenuItemIndex:u,activeMenu:J,sourceMenuId:B,sourceMenuButtonId:G}=this,H="source"===J&&-1<u?this._buildId("source-item",u):null;return 1<t.length?K.tsx("ul",{"aria-activedescendant":H,"aria-labelledby":G,id:B,role:"menu",bind:this,afterCreate:E.storeNode,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,
"data-node-ref":"_sourceListNode",class:"esri-menu__list",tabIndex:-1},A?this.renderSource(m.ALL_INDEX):null,t.map((Q,F)=>this.renderSource(F)).toArray()):null};I.renderSourcesMenu=function(){const {allSources:t}=this.viewModel;return 1<t.length?K.tsx("div",{key:"esri-search__source-menu",class:this.classes("esri-menu","esri-search__sources-menu")},this.renderSourcesList()):null};I.renderLoader=function(){const {messages:t,messagesCommon:A}=this;return K.tsx("div",{class:"esri-widget__loader",key:"base-loader"},
K.tsx("span",{"aria-hidden":"true",class:"esri-widget__loader-animation"}),K.tsx("span",{class:"esri-icon-font-fallback-text"},t.searchButtonTitle),K.tsx("span",{class:"esri-widget__loader-text"},A.loading))};I.renderContainer=function(){const {allSources:t,state:A}=this.viewModel,{activeMenu:u}=this;return K.tsx("div",{tabIndex:-1,afterCreate:J=>{this._container=J;J.addEventListener("focusout",this._removeActiveMenu)},afterRemoved:J=>{J.removeEventListener("focusout",this._removeActiveMenu)},class:this.classes({["esri-search--multiple-sources"]:1<
t.length,["esri-search--loading"]:"loading"===A,["esri-search--searching"]:"searching"===A,["esri-search--warning"]:"warning"===u,["esri-search--sources"]:"source"===u,["esri-search--show-suggestions"]:"suggestion"===u},"esri-search__container"),key:"base-container"},this.renderSourceMenuButton(),this.renderSourcesMenu(),this.renderInputContainer(),this.renderSubmitButton(),this.renderWarningMenu())};I.renderClearButton=function(){return this.searchTerm?K.tsx("button",{bind:this,class:this.classes("esri-search__clear-button",
"esri-widget--button"),key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearActiveMenu,title:this.messages.clearButtonTitle},K.tsx("span",{"aria-hidden":"true",class:"esri-icon-close"})):null};I.renderLocationGroup=function(){const {messages:t,locationEnabled:A,displayedSearchTerm:u}=this,J="suggestion"===this.activeMenu&&0===this._activeMenuItemIndex;return A&&!u?K.tsx("ul",{role:"group",key:"esri-search__suggestion-list-current-location",class:this.classes("esri-menu__list",
"esri-search__suggestions-list","esri-search__suggestions-list--current-location")},K.tsx("li",{bind:this,"data-current-location-item":!0,onclick:this._handleUseCurrentLocationClick,id:this._buildId("suggestion-item",0),"aria-selected":("suggestion"===this.activeMenu&&0===this._activeMenuItemIndex).toString(),role:"option",class:this.classes("esri-menu__list-item",J?"esri-menu__list-item--focus":null)},K.tsx("span",{"aria-hidden":"true",class:"esri-icon-locate-circled"})," ",t.useCurrentLocation)):
null};I.renderInput=function(){const {activeMenu:t,locationEnabled:A,displayedSearchTerm:u,messages:J,suggestionsMenuId:B,inputId:G,_activeMenuItemIndex:H}=this,{maxInputLength:Q,placeholder:F,searchTerm:P,suggestionCount:L}=this.viewModel,X=!!(A&&!u||L),S="suggestion"===t&&-1<H?this._buildId("suggestion-item",H):null;return K.tsx("input",{"aria-activedescendant":S,"aria-autocomplete":"list","aria-expanded":(X&&"suggestion"===t).toString(),"aria-controls":X?B:null,"aria-haspopup":"listbox","aria-label":J.searchButtonTitle,
bind:this,placeholder:F,maxlength:Q,autocomplete:"off",type:"text",class:this.classes("esri-input","esri-search__input"),value:P,id:G,role:"combobox",onkeyup:this._handleInputKeyup,onclick:this._openSuggestionMenu,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:E.storeNode,"data-node-ref":"_inputNode",onfocus:this.focus,onblur:this.blur,title:P?"":F})};I.renderForm=function(){return K.tsx("form",{key:"esri-search__form",bind:this,class:"esri-search__form",onsubmit:this._formSubmit,
role:"search"},this.renderInput())};I.renderSuggestList=function(t){const {sourceIndex:A}=t,u=t.results;return t.results.length?K.tsx("ul",{role:"group",key:`esri-search__suggestion-list-${A}`,class:this.classes("esri-menu__list","esri-search__suggestions-list")},u.map(J=>this.renderSuggestion(J,this._menuItemCount++))):null};I.renderSuggestionsGroup=function(){const {suggestions:t}=this.viewModel;return t?t.map(A=>[this.renderSuggestionHeader(A),this.renderSuggestList(A)]):null};I.renderSuggestionsMenu=
function(){const {displayedSearchTerm:t,locationEnabled:A,suggestionsMenuId:u,inputId:J}=this,{suggestionCount:B}=this.viewModel;this._menuItemCount=0;return A&&!t||B?K.tsx("div",{id:u,key:"esri-search__suggestions-menu",class:this.classes("esri-menu","esri-search__suggestions-menu"),role:"listbox","aria-labelledby":J,bind:this,afterCreate:E.storeNode,"data-node-ref":"_suggestionListNode"},this.renderLocationGroup(),this.renderSuggestionsGroup()):null};I.renderInputContainer=function(){return K.tsx("div",
{key:"esri-search__input-container",class:"esri-search__input-container"},this.renderForm(),this.renderSuggestionsMenu(),this.renderClearButton())};I.renderSuggestionHeader=function(t){const {allSources:A,activeSourceIndex:u}=this.viewModel,{sourceIndex:J}=t,B=1<A.length&&u===m.ALL_INDEX;return t.results.length&&B?K.tsx("div",{key:`esri-search__suggestion-header-${J}`,class:"esri-menu__header"},this._getSourceName(J)):null};I.renderSuggestion=function(t,A){const {_activeMenuItemIndex:u,messages:J}=
this;var {searchTerm:B}=this.viewModel;if(B){var {text:G}=t;G=G||J.untitledResult;const H=[];if(ba.test(G))H.push(K.tsx("div",{innerHTML:G}));else{G=this._splitResult(G,B);const Q=B.toLowerCase();G.forEach((F,P)=>{F&&F.length&&(F.toLowerCase()===Q?H.push(K.tsx("strong",{key:P},F)):H.push(F))})}B="suggestion"===this.activeMenu&&u===A;return K.tsx("li",{bind:this,id:this._buildId("suggestion-item",A),"aria-selected":("suggestion"===this.activeMenu&&this._activeMenuItemIndex===A).toString(),onclick:this._handleSuggestionClick,
key:`esri-search__suggestion_${A}`,"data-suggestion":t,role:"option",class:this.classes("esri-menu__list-item",B?"esri-menu__list-item--focus":null)},H)}};I.renderSource=function(t){const {activeSourceIndex:A,searchAllEnabled:u}=this.viewModel,J={["esri-menu__list-item--active"]:t===A,["esri-menu__list-item--focus"]:"source"===this.activeMenu&&t===(u?this._activeMenuItemIndex-1:this._activeMenuItemIndex)};return K.tsx("li",{bind:this,key:`esri-search__source-${t}`,id:this._buildId("source-item",u?
t+1:t),"aria-checked":(t===A).toString(),onclick:this._handleSourceClick,"data-source-index":t,role:"menuitemradio",class:this.classes("esri-search__source","esri-menu__list-item",J)},this._getSourceName(t))};I.renderNoResultsWarning=function(t){const {messages:A}=this;t=t?Z.substitute(A.noResultsFoundForValue,{value:`"${t}"`}):A.noResultsFound;return K.tsx("div",{key:"esri-search__no_results"},K.tsx("div",{class:"esri-search__warning-header"},A.noResults),K.tsx("div",{class:"esri-search__warning-text"},
t))};I.renderEmptySearchWarning=function(){const {messages:t}=this;return K.tsx("div",{key:"esri-search__empty-search"},K.tsx("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),K.tsx("span",{class:"esri-search__no-value-text"},t.emptyValue))};I.renderLocateWarning=function(){const {messages:t}=this;return K.tsx("div",{key:"esri-search__locate-error"},K.tsx("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),K.tsx("span",{class:"esri-search__no-value-text"},t.locateError))};
I.renderWarning=function(){var t;const {displayedSearchTerm:A,_locateFailed:u}=this,{viewModel:J}=this;return u?this.renderLocateWarning():null!=(t=J.selectedSuggestion)&&t.location||A?this.renderNoResultsWarning(A):this.renderEmptySearchWarning()};I._resetActiveMenuItemIndex=function(){this._activeMenuItemIndex=-1};I._buildId=function(t,A){return`${this.id}-${t}${void 0===A?"":`-${A}`}`};I._watchSourceChanges=function(){const {_handles:t,viewModel:{allSources:A}}=this;t.remove("sources");A.forEach(u=>
t.add(C.watch(u,"name",()=>this.scheduleRender()),"sources"))};I._handleSourcesMenuToggleClick=function(){this.activeMenu="source"===this.activeMenu?"none":"source";this.renderNow();if("source"===this.activeMenu){var t;null==(t=this._sourceListNode)?void 0:t.focus()}};I._handleClearButtonClick=function(){this.viewModel.clear();this._focus()};I._handleSearchButtonClick=function(){this.search()};I._handleSuggestionClick=function(t){if(t=t.currentTarget["data-suggestion"])this._focus(),this.search(t)};
I._handleUseCurrentLocationClick=function(){this._useCurrentLocation()};I._useCurrentLocation=function(){this._focus("none");this._cancelSuggest();this._cancelSearch();const t=x.createAbortController(),{signal:A}=t;this._searchController=t;this.viewModel.searchNearby({signal:A}).catch(()=>{this._locateFailed=!0;this.activeMenu="warning"}).then(()=>{this._searchController=null})};I._handleSourceClick=function(t){this._setSourceFromMenuItem(t.currentTarget)};I._setSourceFromMenuItem=function(t){var A;
t&&(this.viewModel.activeSourceIndex=t["data-source-index"],this._clearActiveMenu(),null==(A=this._sourceMenuButtonNode)?void 0:A.focus())};I._cancelSuggest=function(){this._suggestController&&(this._suggestController.abort(),this._suggestController=null)};I._cancelSearch=function(){this._searchController&&(this._searchController.abort(),this._searchController=null);this._locateFailed=!1};I._handleInputKeyup=function(t){var A,u=k.eventKey(t);if(!t.ctrlKey&&!t.metaKey&&"Copy"!==u&&"ArrowLeft"!==u&&
"ArrowRight"!==u&&"Shift"!==u)if("Tab"===u||"Escape"===u||t.shiftKey&&"Tab"===u)this._cancelSuggest(),"Escape"===u&&this._clearActiveMenu();else{var J="Home"===u||"End"===u||"ArrowUp"===u||"ArrowDown"===u;if("Enter"===u&&0>this._activeMenuItemIndex)this._cancelSuggest();else{var B=null==(A=this._suggestionListNode)?void 0:A.getElementsByTagName("li");if(null!=B&&B.length){"suggestion"!==this.activeMenu&&this._openSuggestionMenu();if(J){t.preventDefault();this._cancelSuggest();this.handleItemNavigation(u,
B,this._suggestionListNode);return}t=B[this._activeMenuItemIndex];if("Enter"===u&&t){(u=t["data-suggestion"])?(this._focus(),this.search(u)):t["data-current-location-item"]&&this._useCurrentLocation();return}}this.viewModel.searchTerm&&this.suggest()}}};I.handleItemNavigation=function(t,A,u){const J=this._activeMenuItemIndex;"Home"===t&&(this._activeMenuItemIndex=0);"End"===t&&(this._activeMenuItemIndex=A.length-1);"ArrowUp"===t&&(this._activeMenuItemIndex=0>=this._activeMenuItemIndex?A.length-1:
this._activeMenuItemIndex-1);"ArrowDown"===t&&(this._activeMenuItemIndex=this._activeMenuItemIndex===A.length-1?0:this._activeMenuItemIndex+1);J!==this._activeMenuItemIndex&&E.keepMenuItemWithinView(A[this._activeMenuItemIndex],u)};I._scrollToTopSuggestion=function(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)};I._openSuggestionMenu=function(){this.activeMenu="suggestion"};I._handleInputPaste=function(t){t=t.target;this.viewModel.searchTerm!==t.value&&(this.viewModel.searchTerm=
t.value);this.viewModel.searchTerm&&this.suggest()};I._handleSourceMenuKeydown=function(t){const A=k.eventKey(t);E.isActivationKey(A)?(t.preventDefault(),t=this._sourceListNode.getElementsByTagName("li")[this._activeMenuItemIndex],this._setSourceFromMenuItem(t)):"ArrowUp"!==A&&"ArrowDown"!==A&&"End"!==A&&"Home"!==A||t.preventDefault()};I._handleSourceMenuKeyup=function(t){var A;const u=k.eventKey(t),J="ArrowUp"===u||"ArrowDown"===u||"End"===u||"Home"===u;J&&t.preventDefault();if("Escape"===u){var B;
this._clearActiveMenu();null==(B=this._sourceMenuButtonNode)?void 0:B.focus()}else(t=null==(A=this._sourceListNode)?void 0:A.getElementsByTagName("li"))&&0!==t.length&&J&&("source"!==this.activeMenu&&(this.activeMenu="source"),this.handleItemNavigation(u,t,this._sourceListNode.parentElement))};I._focus=function(t){this.focus();t&&(this.activeMenu=t)};I._formSubmit=function(t){t.preventDefault();-1===this._activeMenuItemIndex&&this.search()};I._getSourceName=function(t){const {messages:A}=this;var {allSources:u}=
this.viewModel;u=u.getItemAt(t);return t===m.ALL_INDEX?A.all:u?u.name||A.untitledSource:A.untitledSource};I._splitResult=function(t,A){A=w.escapeRegExpString(A);return t.replace(new RegExp(`(^|)(${A})(|$)`,"ig"),"$1|$2|$3").split("|")};I._renderSearchResultsContent=function(){this._searchResultRenderer.showMoreResultsOpen=!1;this._searchResultRenderer.viewModel=this.viewModel;return this._searchResultRenderer};n._createClass(T,[{key:"displayedSearchTerm",get:function(){return`${this.viewModel.searchTerm}`.trim()}},
{key:"inputId",get:function(){return this._buildId("input")}},{key:"suggestionsMenuId",get:function(){return this._buildId("suggest-menu")}},{key:"sourceMenuId",get:function(){return this._buildId("source-menu")}},{key:"sourceMenuButtonId",get:function(){return this._buildId("source-menu-button")}}]);return T}(r);b.__decorate([l.property()],a.prototype,"_activeMenuItemIndex",void 0);b.__decorate([l.property()],a.prototype,"displayedSearchTerm",null);b.__decorate([l.property({readOnly:!0})],a.prototype,
"inputId",null);b.__decorate([l.property({readOnly:!0})],a.prototype,"suggestionsMenuId",null);b.__decorate([l.property({readOnly:!0})],a.prototype,"sourceMenuId",null);b.__decorate([l.property({readOnly:!0})],a.prototype,"sourceMenuButtonId",null);b.__decorate([l.property()],a.prototype,"activeMenu",void 0);b.__decorate([g.aliasOf("viewModel.activeSource")],a.prototype,"activeSource",void 0);b.__decorate([g.aliasOf("viewModel.activeSourceIndex")],a.prototype,"activeSourceIndex",void 0);b.__decorate([g.aliasOf("viewModel.allPlaceholder")],
a.prototype,"allPlaceholder",void 0);b.__decorate([g.aliasOf("viewModel.allSources")],a.prototype,"allSources",void 0);b.__decorate([g.aliasOf("viewModel.autoNavigate")],a.prototype,"autoNavigate",void 0);b.__decorate([g.aliasOf("viewModel.autoSelect")],a.prototype,"autoSelect",void 0);b.__decorate([g.aliasOf("viewModel.defaultSources")],a.prototype,"defaultSources",void 0);b.__decorate([l.property()],a.prototype,"disabled",void 0);b.__decorate([g.aliasOf("viewModel.goToOverride")],a.prototype,"goToOverride",
void 0);b.__decorate([l.property()],a.prototype,"iconClass",void 0);b.__decorate([g.aliasOf("viewModel.includeDefaultSources")],a.prototype,"includeDefaultSources",void 0);b.__decorate([l.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],a.prototype,"label",void 0);b.__decorate([g.aliasOf("viewModel.locationEnabled")],a.prototype,"locationEnabled",void 0);b.__decorate([g.aliasOf("viewModel.maxResults")],a.prototype,"maxResults",void 0);b.__decorate([g.aliasOf("viewModel.maxSuggestions")],
a.prototype,"maxSuggestions",void 0);b.__decorate([l.property(),M.messageBundle("esri/widgets/Search/t9n/Search")],a.prototype,"messages",void 0);b.__decorate([l.property(),M.messageBundle("esri/t9n/common")],a.prototype,"messagesCommon",void 0);b.__decorate([g.aliasOf("viewModel.minSuggestCharacters")],a.prototype,"minSuggestCharacters",void 0);b.__decorate([g.aliasOf("viewModel.popupEnabled")],a.prototype,"popupEnabled",void 0);b.__decorate([g.aliasOf("viewModel.popupTemplate")],a.prototype,"popupTemplate",
void 0);b.__decorate([g.aliasOf("viewModel.portal")],a.prototype,"portal",void 0);b.__decorate([g.aliasOf("viewModel.resultGraphic")],a.prototype,"resultGraphic",void 0);b.__decorate([g.aliasOf("viewModel.resultGraphicEnabled")],a.prototype,"resultGraphicEnabled",void 0);b.__decorate([g.aliasOf("viewModel.results")],a.prototype,"results",void 0);b.__decorate([g.aliasOf("viewModel.searchAllEnabled")],a.prototype,"searchAllEnabled",void 0);b.__decorate([g.aliasOf("viewModel.searchTerm")],a.prototype,
"searchTerm",void 0);b.__decorate([g.aliasOf("viewModel.selectedResult")],a.prototype,"selectedResult",void 0);b.__decorate([g.aliasOf("viewModel.sources")],a.prototype,"sources",void 0);b.__decorate([g.aliasOf("viewModel.suggestions")],a.prototype,"suggestions",void 0);b.__decorate([g.aliasOf("viewModel.suggestionsEnabled")],a.prototype,"suggestionsEnabled",void 0);b.__decorate([g.aliasOf("viewModel.view")],a.prototype,"view",void 0);b.__decorate([W.vmEvent("search-complete search-clear search-start select-result suggest-start suggest-complete".split(" ")),
l.property({type:m})],a.prototype,"viewModel",void 0);b.__decorate([g.aliasOf("viewModel.clear")],a.prototype,"clear",null);return a=b.__decorate([q.subclass("esri.widgets.Search")],a)});