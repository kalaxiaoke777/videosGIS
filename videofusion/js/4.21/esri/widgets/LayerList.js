// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.21/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/LayerList/LayerListViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/Evented ../../core/Handles ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./ListItem ./support/layerListUtils".split(" "),function(P,y,t,V,Q,oa,J,n,z,S,M,G,A,da){const ta=
t.ofType(A);t=function(W){function H(m){var p=W.call(this,m)||this;p._handles=new Q;p.listItemCreatedFunction=null;p.operationalItems=new ta;p.view=null;p._callListItemsCreatedDebounced=oa.debounce(P._asyncToGenerator(function*(){return p._callListItemsCreated()}),300);return p}P._inheritsLoose(H,W);var q=H.prototype;q.initialize=function(){this._handles.add(J.init(this,["view","view.ready"],()=>this._viewHandles()),"view")};q.destroy=function(){this._handles.destroy();this.view=this._handles=null;
this.operationalItems.removeAll()};q.triggerAction=function(m,p){m&&!m.disabled&&this.emit("trigger-action",{action:m,item:p})};q.moveListItem=function(m,p,E,Y){var ea,O;const u=null==m?void 0:m.layer;if(u){var T=null==(ea=this.view)?void 0:null==(O=ea.map)?void 0:O.layers;ea=p?da.getItemLayers(p):T;T=E?da.getItemLayers(E):T;ea&&T&&({operationalItems:O}=this,p=(null==p?void 0:p.children)||O,O=(null==E?void 0:E.children)||O,Y=T.length-Y,m.parent=E||null,p.includes(m)&&p.remove(m),ea.includes(u)&&ea.remove(u),
O.includes(m)||O.add(m,Y),T.includes(u)||T.add(u,Y))}};q._createLayerViewHandles=function(m){const {_handles:p}=this;p.remove("layer-views");this._compileList();m&&p.add(m.on("change",()=>this._compileList()),"layer-views")};q._createMapLayerHandles=function(m){const {_handles:p}=this;p.remove("map-layers");this._compileList();m&&p.add(m.on("change",()=>this._compileList()),"map-layers")};q._watchItemProperties=function(m){this._handles.add([m.children.on("change",()=>{this._callListItemCreatedChildren(m.children)})],
`children-change-${m.uid}`)};q._callListItemCreatedChildren=function(m){m.forEach(p=>this._callListItemCreated(p))};q._callListItemCreated=function(m){"function"===typeof this.listItemCreatedFunction&&this.listItemCreatedFunction.call(null,{item:m});this._callListItemCreatedChildren(m.children)};q._createListItem=function(m){const {view:p}=this;m=new A({layer:m,view:p});this._watchItemProperties(m);return m};q._removeAllItems=function(){const {_handles:m,operationalItems:p}=this;p.forEach(E=>{m.remove(`children-change-${E.uid}`)});
p.removeAll()};q._getViewableLayers=function(m){if(m)return m.filter(p=>"hide"!==da.findLayerListMode(p))};q._watchLayersListMode=function(m){const {_handles:p}=this;p.remove("layer-list-mode");m&&m.forEach(E=>{p.add(J.watch(E,"listMode",()=>this._compileList()),"layer-list-mode")})};q._compileList=function(){var m=this.get("view.map.layers");this._watchLayersListMode(m);(m=this._getViewableLayers(m))&&m.length?(this._createNewItems(m),this._removeItems(m),this._sortItems(m),this._beforeCallListItemsCreated()):
this._removeAllItems()};q._beforeCallListItemsCreated=function(){var m=P._asyncToGenerator(function*(){return this._callListItemsCreatedDebounced().catch(oa.throwIfNotAbortError)});return function(){return m.apply(this,arguments)}}();q._callListItemsCreated=function(){var m=P._asyncToGenerator(function*(){var p;yield null==(p=this.view)?void 0:p.when();this.operationalItems.forEach(E=>this._callListItemCreated(E))});return function(){return m.apply(this,arguments)}}();q._createNewItems=function(m){const {operationalItems:p}=
this;m.forEach(E=>{p.find(Y=>Y.layer===E)||p.add(this._createListItem(E))})};q._removeItems=function(m){const {_handles:p,operationalItems:E}=this,Y=[];E.forEach(ea=>{ea&&m&&m.find(O=>ea.layer===O)||(p.remove(`children-change-${ea.uid}`),Y.push(ea))});E.removeMany(Y)};q._sortItems=function(m){const {operationalItems:p}=this;p.sort((E,Y)=>{E=m.indexOf(E.layer);Y=m.indexOf(Y.layer);return E>Y?-1:E<Y?1:0})};q._viewHandles=function(){const {_handles:m,view:p}=this;m.remove(["map-layers","layer-views",
"view-layers"]);this._compileList();p&&p.ready&&m.add([J.init(this,"view.map.allLayers",E=>this._createMapLayerHandles(E)),J.init(this,"view.allLayerViews",E=>this._createLayerViewHandles(E)),J.init(this,"listItemCreatedFunction",()=>this._compileList())],"view-layers")};P._createClass(H,[{key:"state",get:function(){const m=this.get("view");return this.get("view.ready")?"ready":m?"loading":"disabled"}}]);return H}(V.EventedAccessor);y.__decorate([n.property()],t.prototype,"listItemCreatedFunction",
void 0);y.__decorate([n.property({type:ta})],t.prototype,"operationalItems",void 0);y.__decorate([n.property({readOnly:!0})],t.prototype,"state",null);y.__decorate([n.property()],t.prototype,"view",void 0);return t=y.__decorate([G.subclass("esri.widgets.LayerList.LayerListViewModel")],t)})},"esri/widgets/LayerList/ListItem":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/HandleOwner ../../core/Identifiable ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/has ../../core/accessorSupport/decorators/cast ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionSlider ../../support/actions/ActionToggle ./ListItemPanel ./support/layerListUtils".split(" "),
function(P,y,t,V,Q,oa,J,n,z,S,M,G,A,da,ta,W,H,q,m){var p;z=V.ofType({key:"type",defaultKeyValue:"button",base:da,typeMap:{button:ta,toggle:H,slider:W}});const E=V.ofType(z);t=p=function(Y){function ea(u){u=Y.call(this,u)||this;u.actionsSections=new E;u.actionsOpen=!1;u.children=new (V.ofType(p));u.childrenSortable=!0;u.error=null;u.layer=null;u.layerView=null;u.open=!1;u.panel=null;u.parent=null;u.sortable=!0;u.view=null;u.visible=null;return u}P._inheritsLoose(ea,Y);var O=ea.prototype;O.initialize=
function(){this.handles.add([J.init(this,"layer",u=>this._watchLayerProperties(u)),J.init(this,"view",u=>this._updateChildren(u)),J.init(this,"panel",u=>this._setListItemOnPanel(u)),J.init(this,["layer","view"],()=>this._getLayerView())])};O.destroy=function(){this.view=null};O.castPanel=function(u){this.get("panel.open")&&!u.hasOwnProperty("open")&&(u.open=!0);return u?new q(u):null};O.clone=function(){return new p({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,children:this.children.clone(),
layer:this.layer,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})};O._setListItemOnPanel=function(u){u&&(u.listItem=this)};O._updateChildren=function(u){const T=this.children;T&&T.forEach(ja=>ja.view=u)};O._addChildren=function(u){this.handles.remove("child-list-mode");this.children.removeAll();if(u){u.forEach(ja=>{this.handles.add(J.watch(ja,"listMode",()=>this._addChildren(u)),"child-list-mode")});var T=u.filter(ja=>"hide"!==m.findLayerListMode(ja));this.children.addMany(this._makeChildren(T))}};
O._watchSublayerChanges=function(u){u&&this.handles.add(u.on("change",()=>{this._addChildren(u)}),"layer")};O._initializeChildLayers=function(u){this._addChildren(u);this._watchSublayerChanges(u)};O._makeChildren=function(u){return u.map(T=>m.canDisplayLayer(T)?new p({layer:T,parent:this,view:this.view}):null).reverse()};O._watchLayerProperties=function(u){if(this.handles&&(this.handles.remove("layer"),this.handles.remove("child-list-mode"),u))if(this.handles.add(J.watch(u,"listMode",()=>this._watchLayerProperties(u)),
"layer"),"hide-children"===m.findLayerListMode(u))this.children.removeAll();else{var T=m.getNormalizedChildLayerProperty(u);T&&this.handles.add(J.init(u,T,()=>{u.hasOwnProperty(T)&&this._initializeChildLayers(u[T])}),"layer")}};O._getLayerView=function(){var u=P._asyncToGenerator(function*(){const {layer:T,view:ja}=this;if(T&&ja)try{const wa=yield ja.whenLayerView(T);wa.layer===this.layer&&this._set("layerView",wa)}catch{}});return function(){return u.apply(this,arguments)}}();O._isLayerUpdating=
function(u){return u&&"loading"===u.loadStatus};P._createClass(ea,[{key:"title",get:function(){const u=this.get("layer.layer");return(!u||u&&this.get("layer.layer.loaded"))&&this.get("layer.title")||this.get("layer.attributes.title")||""},set:function(u){void 0===u?this._clearOverride("title"):this._override("title",u)}},{key:"updating",get:function(){const u=this.layerView;return u?u.updating:this._isLayerUpdating(this.layer)}},{key:"visibleAtCurrentScale",get:function(){return!m.isLayerOutsideScaleRange(this.layer,
this.get("view.scale"))}},{key:"visibilityMode",get:function(){return m.findLayerVisibilityMode(this.layer)}}]);return ea}(oa.IdentifiableMixin(Q.HandleOwnerMixin(t)));y.__decorate([G.property({type:E})],t.prototype,"actionsSections",void 0);y.__decorate([G.property()],t.prototype,"actionsOpen",void 0);y.__decorate([G.property({type:V})],t.prototype,"children",void 0);y.__decorate([G.property()],t.prototype,"childrenSortable",void 0);y.__decorate([n.aliasOf("layer.loadError?")],t.prototype,"error",
void 0);y.__decorate([G.property()],t.prototype,"layer",void 0);y.__decorate([G.property({readOnly:!0})],t.prototype,"layerView",void 0);y.__decorate([G.property()],t.prototype,"open",void 0);y.__decorate([G.property({type:q})],t.prototype,"panel",void 0);y.__decorate([S.cast("panel")],t.prototype,"castPanel",null);y.__decorate([G.property()],t.prototype,"parent",void 0);y.__decorate([G.property()],t.prototype,"sortable",void 0);y.__decorate([G.property()],t.prototype,"title",null);y.__decorate([G.property({readOnly:!0})],
t.prototype,"updating",null);y.__decorate([G.property({value:null})],t.prototype,"view",void 0);y.__decorate([n.aliasOf("layer.visible")],t.prototype,"visible",void 0);y.__decorate([G.property({readOnly:!0})],t.prototype,"visibleAtCurrentScale",null);y.__decorate([G.property({readOnly:!0})],t.prototype,"visibilityMode",null);return t=p=y.__decorate([A.subclass("esri.widgets.LayerList.ListItem")],t)})},"esri/support/actions/ActionSlider":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./ActionBase".split(" "),
function(P,y,t,V,Q,oa,J,n){var z;V=z=function(S){function M(G){G=S.call(this,G)||this;G.displayValueEnabled=!1;G.max=1;G.min=0;G.step=.1;G.type="slider";G.value=null;return G}P._inheritsLoose(M,S);M.prototype.clone=function(){return new z({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})};return M}(n);y.__decorate([t.property()],
V.prototype,"displayValueEnabled",void 0);y.__decorate([t.property()],V.prototype,"max",void 0);y.__decorate([t.property()],V.prototype,"min",void 0);y.__decorate([t.property()],V.prototype,"step",void 0);y.__decorate([t.property()],V.prototype,"value",void 0);return V=z=y.__decorate([J.subclass("esri.support.Action.ActionSlider")],V)})},"esri/widgets/LayerList/ListItemPanel":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Handles ../../core/Identifiable ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../Widget ../support/widget ../support/jsxFactory".split(" "),
function(P,y,t,V,Q,oa,J,n,z,S,M,G,A,da){Q=function(ta){function W(q,m){q=ta.call(this,q,m)||this;q._legend=null;q._handles=new V;q.content=null;q.image=null;q.listItem=null;q.open=!1;q.visible=!0;return q}y._inheritsLoose(W,ta);var H=W.prototype;H.initialize=function(){this.own([oa.init(this,"content",q=>this._createLegend(q))])};H.destroy=function(){const {_legend:q}=this;q&&q.destroy();this._legend=null};H.render=function(){return da.tsx("div",{class:"esri-layer-list-panel"},this._renderContents())};
H._renderContent=function(q){const {_legend:m,listItem:p}=this;return q?"legend"===q?p&&p.view&&p.layer&&m?da.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--legend"),key:m},m.render()):null:"string"===typeof q?da.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--string"),key:q,innerHTML:q}):A.isWidget(q)?da.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--widget"),
key:q},q.render()):q instanceof HTMLElement?da.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--html-element"),key:q,bind:q,afterCreate:this._attachToNode}):null:null};H._renderContents=function(){const {content:q}=this;return Array.isArray(q)?q.map(m=>this._renderContent(m)):this._renderContent(q)};H._getLegendOptions=function(q){if(q){var {layer:m,view:p}=q;if(m&&p)return{view:p,layerInfos:[{layer:m,title:""}]}}};H._createLegend=function(q){this._hasLegend(q)&&
!this._legend&&(new Promise(function(m,p){P(["../Legend"],function(E){m(Object.freeze({__proto__:null,default:E}))},p)})).then(({default:m})=>{const {_handles:p,listItem:E}=this,Y=new m(this._getLegendOptions(E));this._legend=Y;this.notifyChange("className");this.notifyChange("title");m=oa.init(this,["listItem.view","listItem.layer"],()=>this._updateLegend(Y));p.add(m,"legends");this.scheduleRender()})};H._hasLegend=function(q){return"legend"===q?!0:Array.isArray(q)?q.some(m=>"legend"===m):!1};H._attachToNode=
function(q){q.appendChild(this)};H._updateLegend=function(q){const {listItem:m}=this;if(m){var {layer:p,view:E}=m;q.view=E;q.layerInfos=[{layer:p,title:null}];this.scheduleRender()}};H._getWidget=function(q){return"legend"===q?this._legend:A.isWidget(q)?q:null};H._getFirstWidget=function(){const {content:q}=this;if(Array.isArray(q)){let m=null;q.some(p=>{(p=this._getWidget(p))&&(m=p);return!!p});return m}return this._getWidget(q)};y._createClass(W,[{key:"className",get:function(){const {image:q}=
this,m=this._getFirstWidget();return this._get("className")||!q&&m?m.iconClass:""},set:function(q){void 0===q?this._clearOverride("className"):this._override("className",q)}},{key:"title",get:function(){const q=this._getFirstWidget();return this._get("title")||q?q.label:""},set:function(q){void 0===q?this._clearOverride("title"):this._override("title",q)}}]);return W}(Q.IdentifiableMixin(G));t.__decorate([J.property()],Q.prototype,"className",null);t.__decorate([J.property()],Q.prototype,"content",
void 0);t.__decorate([J.property()],Q.prototype,"image",void 0);t.__decorate([J.property()],Q.prototype,"listItem",void 0);t.__decorate([J.property()],Q.prototype,"title",null);t.__decorate([J.property()],Q.prototype,"open",void 0);t.__decorate([J.property()],Q.prototype,"visible",void 0);return Q=t.__decorate([M.subclass("esri.widgets.LayerList.ListItemPanel")],Q)})},"esri/widgets/LayerList/support/layerListUtils":function(){define(["exports"],function(P){function y(n){if(n)return null!=n.listMode?
n.listMode:void 0}function t(n){if(n)return null!=n.minScale?n.minScale:void 0}function V(n){if(n)return null!=n.maxScale?n.maxScale:void 0}function Q(n){if(n&&n.listMode!==J.hideChildren&&"wmts"!==n.type)return"group"===n.type?"layers":"sublayers"}function oa(n,z){n&&n.sort((S,M)=>{S=z.indexOf(S.uid);M=z.indexOf(M.uid);return S>M?-1:S<M?1:0})}const J={hide:"hide",hideChildren:"hide-children"};P.canDisplayLayer=function(n){return y(n)!==J.hide};P.canSortSublayers=function(n){n=n&&(n.get("layer.layer")||
n.layer);if(!n)return!1;n=n.get("capabilities.exportMap.supportsDynamicLayers");return"boolean"===typeof n?n:!0};P.findLayerListMode=y;P.findLayerMaxScale=V;P.findLayerMinScale=t;P.findLayerVisibilityMode=function(n){if(!n)return"inherited";var z=n.get("layer.capabilities.exportMap.supportsSublayerVisibility");if("boolean"===typeof z)return z?"independent":"inherited";z=n.get("capabilities.exportMap.supportsSublayerVisibility");return"boolean"===typeof z?z?"independent":"inherited":null!=n.visibilityMode?
n.visibilityMode:"independent"};P.findSelectedItem=function(n,z){var S;const M=null==(S=n.layer)?void 0:S.uid;return M&&z.find(G=>{var A;return(null==(A=G.layer)?void 0:A.uid)===M})};P.getItemLayers=function(n){return(n=null==n?void 0:n.layer)&&"group"===n.type?n.layers:null};P.getNormalizedChildLayerProperty=Q;P.isLayerOutsideScaleRange=function(n,z){if(!n||isNaN(z))return!1;var S=t(n);n=V(n);S=!isNaN(S)&&0<S&&z>S;z=!isNaN(n)&&0<n&&z<n;return S||z};P.sortChildLayersToIds=function(n,z){if(n=null==
n?void 0:n.layer){var S=Q(n);S&&(n=n.get(S),oa(n,z))}};P.sortLayersToIds=oa;Object.defineProperty(P,"__esModule",{value:!0})})},"esri/chunks/sortable.esm":function(){define(["exports"],function(P){function y(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(a);b&&(e=e.filter(function(g){return Object.getOwnPropertyDescriptor(a,g).enumerable}));c.push.apply(c,e)}return c}function t(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:
{};b%2?y(Object(c),!0).forEach(function(e){var g=c[e];e in a?Object.defineProperty(a,e,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[e]=g}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):y(Object(c)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(c,e))})}return a}function V(a){"@babel/helpers - typeof";V="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&
"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b};return V(a)}function Q(){Q=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],e;for(e in c)Object.prototype.hasOwnProperty.call(c,e)&&(a[e]=c[e])}return a};return Q.apply(this,arguments)}function oa(a,b){if(null==a)return{};if(null==a)var c={};else{c={};var e=Object.keys(a),g;for(g=0;g<e.length;g++){var k=e[g];0<=b.indexOf(k)||(c[k]=a[k])}}if(Object.getOwnPropertySymbols)for(g=
Object.getOwnPropertySymbols(a),k=0;k<g.length;k++)e=g[k],0<=b.indexOf(e)||Object.prototype.propertyIsEnumerable.call(a,e)&&(c[e]=a[e]);return c}function J(a){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(a)}function n(a,b,c){a.addEventListener(b,c,!Ca&&wb)}function z(a,b,c){a.removeEventListener(b,c,!Ca&&wb)}function S(a,b){if(b){"\x3e"===b[0]&&(b=b.substring(1));if(a)try{if(a.matches)return a.matches(b);if(a.msMatchesSelector)return a.msMatchesSelector(b);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(b)}catch(c){}return!1}}
function M(a,b,c,e){if(a){c=c||document;do{if(null!=b&&("\x3e"===b[0]?a.parentNode===c&&S(a,b):S(a,b))||e&&a===c)return a;if(a===c)break}while(a=a.host&&a!==document&&a.host.nodeType?a.host:a.parentNode)}return null}function G(a,b,c){if(a&&b)if(a.classList)a.classList[c?"add":"remove"](b);else{var e=(" "+a.className+" ").replace(xb," ").replace(" "+b+" "," ");a.className=(e+(c?" "+b:"")).replace(xb," ")}}function A(a,b,c){var e=a&&a.style;if(e){if(void 0===c)return document.defaultView&&document.defaultView.getComputedStyle?
c=document.defaultView.getComputedStyle(a,""):a.currentStyle&&(c=a.currentStyle),void 0===b?c:c[b];b in e||-1!==b.indexOf("webkit")||(b="-webkit-"+b);e[b]=c+("string"===typeof c?"":"px")}}function da(a,b){var c="";if("string"===typeof a)c=a;else{do{var e=A(a,"transform");e&&"none"!==e&&(c=e+" "+c)}while(!b&&(a=a.parentNode))}return(a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix)&&new a(c)}function ta(a,b,c){if(a){a=a.getElementsByTagName(b);b=0;var e=a.length;if(c)for(;b<
e;b++)c(a[b],b);return a}return[]}function W(){var a=document.scrollingElement;return a?a:document.documentElement}function H(a,b,c,e,g){if(a.getBoundingClientRect||a===window){if(a!==window&&a.parentNode&&a!==W()){var k=a.getBoundingClientRect();var l=k.top;var w=k.left;var B=k.bottom;var F=k.right;var I=k.height;var N=k.width}else w=l=0,B=window.innerHeight,F=window.innerWidth,I=window.innerHeight,N=window.innerWidth;if((b||c)&&a!==window&&(g=g||a.parentNode,!Ca)){do if(g&&g.getBoundingClientRect&&
("none"!==A(g,"transform")||c&&"static"!==A(g,"position"))){B=g.getBoundingClientRect();l-=B.top+parseInt(A(g,"border-top-width"));w-=B.left+parseInt(A(g,"border-left-width"));B=l+k.height;F=w+k.width;break}while(g=g.parentNode)}e&&a!==window&&(e=(a=da(g||a))&&a.a,g=a&&a.d,a&&(l/=g,w/=e,N/=e,I/=g,B=l+I,F=w+N));return{top:l,left:w,bottom:B,right:F,width:N,height:I}}}function q(a,b,c){var e=O(a,!0);for(a=H(a)[b];e;){b=H(e)[c];var g=void 0;g="top"===c||"left"===c?a>=b:a<=b;if(!g)return e;if(e===W())break;
e=O(e,!1)}return!1}function m(a,b,c,e){for(var g=0,k=0,l=a.children;k<l.length;){if("none"!==l[k].style.display&&l[k]!==f.ghost&&(e||l[k]!==f.dragged)&&M(l[k],c.draggable,a,!1)){if(g===b)return l[k];g++}k++}return null}function p(a,b){for(a=a.lastElementChild;a&&(a===f.ghost||"none"===A(a,"display")||b&&!S(a,b));)a=a.previousElementSibling;return a||null}function E(a,b){var c=0;if(!a||!a.parentNode)return-1;for(;a=a.previousElementSibling;)"TEMPLATE"===a.nodeName.toUpperCase()||a===f.clone||b&&!S(a,
b)||c++;return c}function Y(a){var b=0,c=0,e=W();if(a){do{var g=da(a),k=g.d;b+=a.scrollLeft*g.a;c+=a.scrollTop*k}while(a!==e&&(a=a.parentNode))}return[b,c]}function ea(a,b){for(var c in a)if(a.hasOwnProperty(c))for(var e in b)if(b.hasOwnProperty(e)&&b[e]===a[c][e])return Number(c);return-1}function O(a,b){if(!a||!a.getBoundingClientRect)return W();var c=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var e=A(a);if(a.clientWidth<a.scrollWidth&&("auto"==e.overflowX||"scroll"==e.overflowX)||
a.clientHeight<a.scrollHeight&&("auto"==e.overflowY||"scroll"==e.overflowY)){if(!a.getBoundingClientRect||a===document.body)break;if(c||b)return a;c=!0}}while(a=a.parentNode);return W()}function u(a,b){return Math.round(a.top)===Math.round(b.top)&&Math.round(a.left)===Math.round(b.left)&&Math.round(a.height)===Math.round(b.height)&&Math.round(a.width)===Math.round(b.width)}function T(a,b){return function(){if(!Ra){var c=arguments;1===c.length?a.call(this,c[0]):a.apply(this,c);Ra=setTimeout(function(){Ra=
void 0},b)}}}function ja(a,b,c){a.scrollLeft+=b;a.scrollTop+=c}function wa(a){var b=window.Polymer,c=window.jQuery||window.Zepto;return b&&b.dom?b.dom(a).cloneNode(!0):c?c(a).clone(!0)[0]:a.cloneNode(!0)}function D(){var a=[],b;return{captureAnimationState:function(){a=[];this.options.animation&&[].slice.call(this.el.children).forEach(function(c){if("none"!==A(c,"display")&&c!==f.ghost){a.push({target:c,rect:H(c)});var e=t({},a[a.length-1].rect);if(c.thisAnimationDuration){var g=da(c,!0);g&&(e.top-=
g.f,e.left-=g.e)}c.fromRect=e}})},addAnimationState:function(c){a.push(c)},removeAnimationState:function(c){a.splice(ea(a,{target:c}),1)},animateAll:function(c){var e=this;if(this.options.animation){var g=!1,k=0;a.forEach(function(l){var w=0,B=l.target,F=B.fromRect,I=H(B),N=B.prevFromRect,ia=B.prevToRect;l=l.rect;var fa=da(B,!0);fa&&(I.top-=fa.f,I.left-=fa.e);B.toRect=I;B.thisAnimationDuration&&u(N,I)&&!u(F,I)&&(l.top-I.top)/(l.left-I.left)===(F.top-I.top)/(F.left-I.left)&&(w=Math.sqrt(Math.pow(N.top-
l.top,2)+Math.pow(N.left-l.left,2))/Math.sqrt(Math.pow(N.top-ia.top,2)+Math.pow(N.left-ia.left,2))*e.options.animation);u(I,F)||(B.prevFromRect=F,B.prevToRect=I,w||(w=e.options.animation),e.animate(B,l,I,w));w&&(g=!0,k=Math.max(k,w),clearTimeout(B.animationResetTimer),B.animationResetTimer=setTimeout(function(){B.animationTime=0;B.prevFromRect=null;B.fromRect=null;B.prevToRect=null;B.thisAnimationDuration=null},w),B.thisAnimationDuration=w)});clearTimeout(b);g?b=setTimeout(function(){"function"===
typeof c&&c()},k):"function"===typeof c&&c();a=[]}else clearTimeout(b),"function"===typeof c&&c()},animate:function(c,e,g,k){if(k){A(c,"transition","");A(c,"transform","");var l=da(this.el),w=(e.left-g.left)/(l&&l.a||1);e=(e.top-g.top)/(l&&l.d||1);c.animatingX=!!w;c.animatingY=!!e;A(c,"transform","translate3d("+w+"px,"+e+"px,0)");this.forRepaintDummy=c.offsetWidth;A(c,"transition","transform "+k+"ms"+(this.options.easing?" "+this.options.easing:""));A(c,"transform","translate3d(0,0,0)");"number"===
typeof c.animated&&clearTimeout(c.animated);c.animated=setTimeout(function(){A(c,"transition","");A(c,"transform","");c.animated=!1;c.animatingX=!1;c.animatingY=!1},k)}}}}function d(a){var b=t({putSortable:ka,cloneEl:aa,targetEl:v,rootEl:Z,oldIndex:La,oldDraggableIndex:Sa,newIndex:ra,newDraggableIndex:Ea},a);a=b.sortable;var c=b.rootEl,e=b.name,g=b.targetEl,k=b.cloneEl,l=b.toEl,w=b.fromEl,B=b.oldIndex,F=b.newIndex,I=b.oldDraggableIndex,N=b.newDraggableIndex,ia=b.originalEvent,fa=b.putSortable,la=
b.extraEventProperties;if(a=a||c&&c[sa]){var X=a.options,ua="on"+e.charAt(0).toUpperCase()+e.substr(1);!window.CustomEvent||Ca||Ta?(b=document.createEvent("Event"),b.initEvent(e,!0,!0)):b=new CustomEvent(e,{bubbles:!0,cancelable:!0});b.to=l||c;b.from=w||c;b.item=g||c;b.clone=k;b.oldIndex=B;b.newIndex=F;b.oldDraggableIndex=I;b.newDraggableIndex=N;b.originalEvent=ia;b.pullMode=fa?fa.lastPutMode:void 0;e=t(t({},la),Ua.getEventProperties(e,a));for(var xa in e)b[xa]=e[xa];c&&c.dispatchEvent(b);X[ua]&&
X[ua].call(a,b)}}function f(a,b){if(!a||!a.nodeType||1!==a.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));this.el=a;this.options=b=Q({},b);a[sa]=this;var c={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?"\x3eli":"\x3e*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return yb(a,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",
ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(k,l){k.setData("Text",l.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==f.supportPointer&&"PointerEvent"in window&&!Va,emptyInsertThreshold:5};
Ua.initializePlugins(this,a,c);for(var e in c)e in b||(b[e]=c[e]);zb(b);for(var g in this)"_"===g.charAt(0)&&"function"===typeof this[g]&&(this[g]=this[g].bind(this));if(this.nativeDraggable=b.forceFallback?!1:Jb)this.options.touchStartThreshold=1;b.supportPointer?n(a,"pointerdown",this._onTapStart):(n(a,"mousedown",this._onTapStart),n(a,"touchstart",this._onTapStart));this.nativeDraggable&&(n(a,"dragover",this),n(a,"dragenter",this));ab.push(this.el);b.store&&b.store.get&&this.sort(b.store.get(this)||
[]);Q(this,D())}function h(a,b,c,e,g,k,l,w){var B=a[sa],F=B.options.onMove,I;if(!window.CustomEvent||Ca||Ta){var N=document.createEvent("Event");N.initEvent("move",!0,!0)}else N=new CustomEvent("move",{bubbles:!0,cancelable:!0});N.to=b;N.from=a;N.dragged=c;N.draggedRect=e;N.related=g||b;N.relatedRect=k||H(b);N.willInsertAfter=w;N.originalEvent=l;a.dispatchEvent(N);F&&(I=F.call(B,N,l));return I}function r(a){a.draggable=!1}function x(){lb=!1}function C(a,b,c){c=H(m(c.el,0,c.options,!0));return b?a.clientX<
c.left-10||a.clientY<c.top&&a.clientX<c.right:a.clientY<c.top-10||a.clientY<c.bottom&&a.clientX<c.left}function L(a,b,c){c=H(p(c.el,c.options.draggable));return b?a.clientX>c.right+10||a.clientX<=c.right&&a.clientY>c.bottom&&a.clientX>=c.left:a.clientX>c.right&&a.clientY>c.top||a.clientX<=c.right&&a.clientY>c.bottom+10}function R(a,b,c,e,g,k,l,w){a=e?a.clientY:a.clientX;var B=e?c.height:c.width,F=e?c.top:c.left;c=e?c.bottom:c.right;e=!1;if(!l)if(w&&bb<B*g)if(!Wa&&(1===Xa?a>F+B*k/2:a<c-B*k/2)&&(Wa=
!0),Wa)e=!0;else{if(1===Xa?a<F+bb:a>c-bb)return-Xa}else if(a>F+B*(1-g)/2&&a<c-B*(1-g)/2)return b=E(v)<E(b)?1:-1,b;if(e||l)if(a<F+B*k/2||a>c-B*k/2)return a>F+B/2?1:-1;return 0}function ba(a){a=a.tagName+a.className+a.src+a.href+a.textContent;for(var b=a.length,c=0;b--;)c+=a.charCodeAt(b);return c.toString(36)}function ma(a){cb.length=0;a=a.getElementsByTagName("input");for(var b=a.length;b--;){var c=a[b];c.checked&&cb.push(c)}}function va(a){return setTimeout(a,0)}function Ha(){ha.forEach(function(a){clearInterval(a.pid)});
ha=[]}function Ma(){}function mb(){}var Ca=J(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ta=J(/Edge/i),Ab=J(/firefox/i),Va=J(/safari/i)&&!J(/chrome/i)&&!J(/android/i),Ya=J(/iP(ad|od|hone)/i),Kb=J(/chrome/i)&&J(/android/i),wb={capture:!1,passive:!1},xb=/\s+/g,Ra,sa="Sortable"+(new Date).getTime(),Na=[],nb={initializeByDefault:!0},Ua={mount:function(a){for(var b in nb)!nb.hasOwnProperty(b)||b in a||(a[b]=nb[b]);Na.forEach(function(c){if(c.pluginName===a.pluginName)throw"Sortable: Cannot mount plugin ".concat(a.pluginName,
" more than once");});Na.push(a)},pluginEvent:function(a,b,c){var e=this;this.eventCanceled=!1;c.cancel=function(){e.eventCanceled=!0};var g=a+"Global";Na.forEach(function(k){if(b[k.pluginName]){if(b[k.pluginName][g])b[k.pluginName][g](t({sortable:b},c));if(b.options[k.pluginName]&&b[k.pluginName][a])b[k.pluginName][a](t({sortable:b},c))}})},initializePlugins:function(a,b,c,e){Na.forEach(function(k){var l=k.pluginName;if(a.options[l]||k.initializeByDefault)k=new k(a,b,a.options),k.sortable=a,k.options=
a.options,a[l]=k,Q(c,k.defaults)});for(var g in a.options)a.options.hasOwnProperty(g)&&(e=this.modifyOption(a,g,a.options[g]),"undefined"!==typeof e&&(a.options[g]=e))},getEventProperties:function(a,b){var c={};Na.forEach(function(e){"function"===typeof e.eventProperties&&Q(c,e.eventProperties.call(b[e.pluginName],a))});return c},modifyOption:function(a,b,c){var e;Na.forEach(function(g){a[g.pluginName]&&g.optionListeners&&"function"===typeof g.optionListeners[b]&&(e=g.optionListeners[b].call(a[g.pluginName],
c))});return e}},Lb=["evt"],qa=function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},e=c.evt;c=oa(c,Lb);Ua.pluginEvent.bind(f)(a,b,t({dragEl:v,parentEl:ca,ghostEl:K,rootEl:Z,nextEl:Ia,lastDownEl:db,cloneEl:aa,cloneHidden:Fa,dragStarted:Za,putSortable:ka,activeSortable:f.active,originalEvent:e,oldIndex:La,oldDraggableIndex:Sa,newIndex:ra,newDraggableIndex:Ea,hideGhostForTarget:Bb,unhideGhostForTarget:Cb,cloneNowHidden:function(){Fa=!0},cloneNowShown:function(){Fa=!1},dispatchSortableEvent:function(g){d({sortable:b,
name:g,originalEvent:e})}},c))},v,ca,K,Z,Ia,db,aa,Fa,La,ra,Sa,Ea,eb,ka,Oa=!1,fb=!1,ab=[],Ja,ya,ob,pb,Db,Eb,Za,Pa,Xa,Wa=!1,gb=!1,bb,na,qb=[],lb=!1,cb=[],hb="undefined"!==typeof document,Fb=Ta||Ca?"cssFloat":"float",Jb=hb&&!Kb&&!Ya&&"draggable"in document.createElement("div"),Gb=function(){if(hb){if(Ca)return!1;var a=document.createElement("x");a.style.cssText="pointer-events:auto";return"auto"===a.style.pointerEvents}}(),yb=function(a,b){var c=A(a),e=parseInt(c.width)-parseInt(c.paddingLeft)-parseInt(c.paddingRight)-
parseInt(c.borderLeftWidth)-parseInt(c.borderRightWidth),g=m(a,0,b);a=m(a,1,b);var k=g&&A(g);b=a&&A(a);var l=k&&parseInt(k.marginLeft)+parseInt(k.marginRight)+H(g).width,w=b&&parseInt(b.marginLeft)+parseInt(b.marginRight)+H(a).width;return"flex"===c.display?"column"===c.flexDirection||"column-reverse"===c.flexDirection?"vertical":"horizontal":"grid"===c.display?1>=c.gridTemplateColumns.split(" ").length?"vertical":"horizontal":g&&k["float"]&&"none"!==k["float"]?(c="left"===k["float"]?"left":"right",
!a||"both"!==b.clear&&b.clear!==c?"horizontal":"vertical"):g&&("block"===k.display||"flex"===k.display||"table"===k.display||"grid"===k.display||l>=e&&"none"===c[Fb]||a&&"none"===c[Fb]&&l+w>e)?"vertical":"horizontal"},Mb=function(a,b,c){var e=c?a.left:a.top,g=c?a.right:a.bottom;a=c?a.width:a.height;var k=c?b.left:b.top,l=c?b.right:b.bottom;b=c?b.width:b.height;return e===k||g===l||e+a/2===k+b/2},Nb=function(a,b){var c;ab.some(function(e){var g=e[sa].options.emptyInsertThreshold;if(g&&!p(e)){var k=
H(e),l=b>=k.top-g&&b<=k.bottom+g;if(a>=k.left-g&&a<=k.right+g&&l)return c=e}});return c},zb=function(a){function b(g,k){return function(l,w,B,F){var I=l.options.group.name&&w.options.group.name&&l.options.group.name===w.options.group.name;if(null==g&&(k||I))return!0;if(null==g||!1===g)return!1;if(k&&"clone"===g)return g;if("function"===typeof g)return b(g(l,w,B,F),k)(l,w,B,F);l=(k?l:w).options.group.name;return!0===g||"string"===typeof g&&g===l||g.join&&-1<g.indexOf(l)}}var c={},e=a.group;e&&"object"==
V(e)||(e={name:e});c.name=e.name;c.checkPull=b(e.pull,!0);c.checkPut=b(e.put);c.revertClone=e.revertClone;a.group=c},Bb=function(){!Gb&&K&&A(K,"display","none")},Cb=function(){!Gb&&K&&A(K,"display","")};hb&&document.addEventListener("click",function(a){if(fb)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),fb=!1},!0);var Ka=function(a){if(v){a=a.touches?a.touches[0]:a;var b=Nb(a.clientX,a.clientY);if(b){var c={},e;for(e in a)a.hasOwnProperty(e)&&
(c[e]=a[e]);c.target=c.rootEl=b;c.preventDefault=void 0;c.stopPropagation=void 0;b[sa]._onDragOver(c)}}},Ob=function(a){v&&v.parentNode[sa]._isOutsideThisEl(a.target)};f.prototype={constructor:f,_isOutsideThisEl:function(a){this.el.contains(a)||a===this.el||(Pa=null)},_getDirection:function(a,b){return"function"===typeof this.options.direction?this.options.direction.call(this,a,b,v):this.options.direction},_onTapStart:function(a){if(a.cancelable){var b=this,c=this.el,e=this.options,g=e.preventOnFilter,
k=a.type,l=a.touches&&a.touches[0]||a.pointerType&&"touch"===a.pointerType&&a,w=(l||a).target,B=a.target.shadowRoot&&(a.path&&a.path[0]||a.composedPath&&a.composedPath()[0])||w,F=e.filter;ma(c);if(!(v||/mousedown|pointerdown/.test(k)&&0!==a.button||e.disabled||B.isContentEditable||!this.nativeDraggable&&Va&&w&&"SELECT"===w.tagName.toUpperCase()||(w=M(w,e.draggable,c,!1),w&&w.animated||db===w))){La=E(w);Sa=E(w,e.draggable);if("function"===typeof F){if(F.call(this,a,w,this)){d({sortable:b,rootEl:B,
name:"filter",targetEl:w,toEl:c,fromEl:c});qa("filter",b,{evt:a});g&&a.cancelable&&a.preventDefault();return}}else if(F&&(F=F.split(",").some(function(I){if(I=M(B,I.trim(),c,!1))return d({sortable:b,rootEl:I,name:"filter",targetEl:w,fromEl:c,toEl:c}),qa("filter",b,{evt:a}),!0}))){g&&a.cancelable&&a.preventDefault();return}e.handle&&!M(B,e.handle,c,!1)||this._prepareDragStart(a,l,w)}}},_prepareDragStart:function(a,b,c){var e=this,g=e.el,k=e.options,l=g.ownerDocument;if(c&&!v&&c.parentNode===g){var w=
H(c);Z=g;v=c;ca=v.parentNode;Ia=v.nextSibling;db=c;eb=k.group;f.dragged=v;Ja={target:v,clientX:(b||a).clientX,clientY:(b||a).clientY};Db=Ja.clientX-w.left;Eb=Ja.clientY-w.top;this._lastX=(b||a).clientX;this._lastY=(b||a).clientY;v.style["will-change"]="all";c=function(){qa("delayEnded",e,{evt:a});f.eventCanceled?e._onDrop():(e._disableDelayedDragEvents(),!Ab&&e.nativeDraggable&&(v.draggable=!0),e._triggerDragStart(a,b),d({sortable:e,name:"choose",originalEvent:a}),G(v,k.chosenClass,!0))};k.ignore.split(",").forEach(function(B){ta(v,
B.trim(),r)});n(l,"dragover",Ka);n(l,"mousemove",Ka);n(l,"touchmove",Ka);n(l,"mouseup",e._onDrop);n(l,"touchend",e._onDrop);n(l,"touchcancel",e._onDrop);Ab&&this.nativeDraggable&&(this.options.touchStartThreshold=4,v.draggable=!0);qa("delayStart",this,{evt:a});!k.delay||k.delayOnTouchOnly&&!b||this.nativeDraggable&&(Ta||Ca)?c():f.eventCanceled?this._onDrop():(n(l,"mouseup",e._disableDelayedDrag),n(l,"touchend",e._disableDelayedDrag),n(l,"touchcancel",e._disableDelayedDrag),n(l,"mousemove",e._delayedDragTouchMoveHandler),
n(l,"touchmove",e._delayedDragTouchMoveHandler),k.supportPointer&&n(l,"pointermove",e._delayedDragTouchMoveHandler),e._dragStartTimer=setTimeout(c,k.delay))}},_delayedDragTouchMoveHandler:function(a){a=a.touches?a.touches[0]:a;Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){v&&r(v);clearTimeout(this._dragStartTimer);
this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var a=this.el.ownerDocument;z(a,"mouseup",this._disableDelayedDrag);z(a,"touchend",this._disableDelayedDrag);z(a,"touchcancel",this._disableDelayedDrag);z(a,"mousemove",this._delayedDragTouchMoveHandler);z(a,"touchmove",this._delayedDragTouchMoveHandler);z(a,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(a,b){b=b||"touch"==a.pointerType&&a;!this.nativeDraggable||b?this.options.supportPointer?n(document,
"pointermove",this._onTouchMove):b?n(document,"touchmove",this._onTouchMove):n(document,"mousemove",this._onTouchMove):(n(v,"dragend",this),n(Z,"dragstart",this._onDragStart));try{document.selection?va(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(c){}},_dragStarted:function(a,b){Oa=!1;if(Z&&v){qa("dragStarted",this,{evt:b});this.nativeDraggable&&n(document,"dragover",Ob);var c=this.options;!a&&G(v,c.dragClass,!1);G(v,c.ghostClass,!0);f.active=this;a&&this._appendGhost();
d({sortable:this,name:"start",originalEvent:b})}else this._nulling()},_emulateDragOver:function(){if(ya){this._lastX=ya.clientX;this._lastY=ya.clientY;Bb();for(var a=document.elementFromPoint(ya.clientX,ya.clientY),b=a;a&&a.shadowRoot;){a=a.shadowRoot.elementFromPoint(ya.clientX,ya.clientY);if(a===b)break;b=a}v.parentNode[sa]._isOutsideThisEl(a);if(b){do{if(b[sa]){var c=void 0;if((c=b[sa]._onDragOver({clientX:ya.clientX,clientY:ya.clientY,target:a,rootEl:b}))&&!this.options.dragoverBubble)break}a=
b}while(b=b.parentNode)}Cb()}},_onTouchMove:function(a){if(Ja){var b=this.options,c=b.fallbackTolerance,e=b.fallbackOffset;b=a.touches?a.touches[0]:a;var g=K&&da(K,!0),k=K&&g&&g.a,l=K&&g&&g.d,w=Ya&&na&&Y(na);k=(b.clientX-Ja.clientX+e.x)/(k||1)+(w?w[0]-qb[0]:0)/(k||1);e=(b.clientY-Ja.clientY+e.y)/(l||1)+(w?w[1]-qb[1]:0)/(l||1);if(!f.active&&!Oa){if(c&&Math.max(Math.abs(b.clientX-this._lastX),Math.abs(b.clientY-this._lastY))<c)return;this._onDragStart(a,!0)}K&&(g?(g.e+=k-(ob||0),g.f+=e-(pb||0)):g={a:1,
b:0,c:0,d:1,e:k,f:e},c="matrix(".concat(g.a,",").concat(g.b,",").concat(g.c,",").concat(g.d,",").concat(g.e,",").concat(g.f,")"),A(K,"webkitTransform",c),A(K,"mozTransform",c),A(K,"msTransform",c),A(K,"transform",c),ob=k,pb=e,ya=b);a.cancelable&&a.preventDefault()}},_appendGhost:function(){if(!K){var a=this.options.fallbackOnBody?document.body:Z,b=H(v,!0,Ya,!0,a),c=this.options;if(Ya){for(na=a;"static"===A(na,"position")&&"none"===A(na,"transform")&&na!==document;)na=na.parentNode;na!==document.body&&
na!==document.documentElement?(na===document&&(na=W()),b.top+=na.scrollTop,b.left+=na.scrollLeft):na=W();qb=Y(na)}K=v.cloneNode(!0);G(K,c.ghostClass,!1);G(K,c.fallbackClass,!0);G(K,c.dragClass,!0);A(K,"transition","");A(K,"transform","");A(K,"box-sizing","border-box");A(K,"margin",0);A(K,"top",b.top);A(K,"left",b.left);A(K,"width",b.width);A(K,"height",b.height);A(K,"opacity","0.8");A(K,"position",Ya?"absolute":"fixed");A(K,"zIndex","100000");A(K,"pointerEvents","none");f.ghost=K;a.appendChild(K);
A(K,"transform-origin",Db/parseInt(K.style.width)*100+"% "+Eb/parseInt(K.style.height)*100+"%")}},_onDragStart:function(a,b){var c=this,e=a.dataTransfer,g=c.options;qa("dragStart",this,{evt:a});f.eventCanceled?this._onDrop():(qa("setupClone",this),f.eventCanceled||(aa=wa(v),aa.draggable=!1,aa.style["will-change"]="",this._hideClone(),G(aa,this.options.chosenClass,!1),f.clone=aa),c.cloneId=va(function(){qa("clone",c);f.eventCanceled||(c.options.removeCloneOnHide||Z.insertBefore(aa,v),c._hideClone(),
d({sortable:c,name:"clone"}))}),!b&&G(v,g.dragClass,!0),b?(fb=!0,c._loopId=setInterval(c._emulateDragOver,50)):(z(document,"mouseup",c._onDrop),z(document,"touchend",c._onDrop),z(document,"touchcancel",c._onDrop),e&&(e.effectAllowed="move",g.setData&&g.setData.call(c,e,v)),n(document,"drop",c),A(v,"transform","translateZ(0)")),Oa=!0,c._dragStartId=va(c._dragStarted.bind(c,b,a)),n(document,"selectstart",c),Za=!0,Va&&A(document.body,"user-select","none"))},_onDragOver:function(a){function b(Ga,ib){qa(Ga,
X,t({evt:a,isOwner:ia,axis:xa?"vertical":"horizontal",revert:B,dragRect:za,targetRect:w,canSort:fa,fromSortable:la,target:l,completed:e,onMove:function(Hb,Pb){return h(Z,k,v,za,Hb,H(Hb),a,Pb)},changed:g},ib))}function c(){b("dragOverAnimationCapture");X.captureAnimationState();X!==la&&la.captureAnimationState()}function e(Ga){b("dragOverCompleted",{insertion:Ga});Ga&&(ia?N._hideClone():N._showClone(X),X!==la&&(G(v,ka?ka.options.ghostClass:N.options.ghostClass,!1),G(v,F.ghostClass,!0)),ka!==X&&X!==
f.active?ka=X:X===f.active&&ka&&(ka=null),la===X&&(X._ignoreWhileAnimating=l),X.animateAll(function(){b("dragOverAnimationComplete");X._ignoreWhileAnimating=null}),X!==la&&(la.animateAll(),la._ignoreWhileAnimating=null));if(l===v&&!v.animated||l===k&&!l.animated)Pa=null;F.dragoverBubble||a.rootEl||l===document||(v.parentNode[sa]._isOutsideThisEl(a.target),!Ga&&Ka(a));!F.dragoverBubble&&a.stopPropagation&&a.stopPropagation();return ua=!0}function g(){ra=E(v);Ea=E(v,F.draggable);d({sortable:X,name:"change",
toEl:k,newIndex:ra,newDraggableIndex:Ea,originalEvent:a})}var k=this.el,l=a.target,w,B,F=this.options,I=F.group,N=f.active,ia=eb===I,fa=F.sort,la=ka||N,X=this,ua=!1;if(!lb){void 0!==a.preventDefault&&a.cancelable&&a.preventDefault();l=M(l,F.draggable,k,!0);b("dragOver");if(f.eventCanceled)return ua;if(v.contains(a.target)||l.animated&&l.animatingX&&l.animatingY||X._ignoreWhileAnimating===l)return e(!1);fb=!1;if(N&&!F.disabled&&(ia?fa||(B=ca!==Z):ka===this||(this.lastPutMode=eb.checkPull(this,N,v,
a))&&I.checkPut(this,N,v,a))){var xa="vertical"===this._getDirection(a,l);var za=H(v);b("dragOverValid");if(f.eventCanceled)return ua;if(B)return ca=Z,c(),this._hideClone(),b("revert"),f.eventCanceled||(Ia?Z.insertBefore(v,Ia):Z.appendChild(v)),e(!0);I=p(k,F.draggable);if(!I||L(a,xa,this)&&!I.animated){if(I===v)return e(!1);I&&k===a.target&&(l=I);l&&(w=H(l));if(!1!==h(Z,k,v,za,l,w,a,!!l))return c(),k.appendChild(v),ca=k,g(),e(!0)}else if(I&&C(a,xa,this)){var Aa=m(k,0,F,!0);if(Aa===v)return e(!1);
l=Aa;w=H(l);if(!1!==h(Z,k,v,za,l,w,a,!1))return c(),k.insertBefore(v,Aa),ca=k,g(),e(!0)}else if(l.parentNode===k){w=H(l);var U=0;U=v.parentNode!==k;var pa=!Mb(v.animated&&v.toRect||za,l.animated&&l.toRect||w,xa);I=xa?"top":"left";var Da=q(l,"top","top")||q(v,"top","top"),jb=Da?Da.scrollTop:void 0;Pa!==l&&(Aa=w[I],Wa=!1,gb=!pa&&F.invertSwap||U);U=R(a,l,w,xa,pa?1:F.swapThreshold,null==F.invertedSwapThreshold?F.swapThreshold:F.invertedSwapThreshold,gb,Pa===l);if(0!==U){pa=E(v);do{pa-=U;var Ba=ca.children[pa]}while(Ba&&
("none"===A(Ba,"display")||Ba===K))}if(0===U||Ba===l)return e(!1);Pa=l;Xa=U;Ba=l.nextElementSibling;pa=!1;pa=1===U;U=h(Z,k,v,za,l,w,a,pa);if(!1!==U){if(1===U||-1===U)pa=1===U;lb=!0;setTimeout(x,30);c();pa&&!Ba?k.appendChild(v):l.parentNode.insertBefore(v,pa?Ba:l);Da&&ja(Da,0,jb-Da.scrollTop);ca=v.parentNode;void 0===Aa||gb||(bb=Math.abs(Aa-H(l)[I]));g();return e(!0)}}if(k.contains(v))return e(!1)}return!1}},_ignoreWhileAnimating:null,_offMoveEvents:function(){z(document,"mousemove",this._onTouchMove);
z(document,"touchmove",this._onTouchMove);z(document,"pointermove",this._onTouchMove);z(document,"dragover",Ka);z(document,"mousemove",Ka);z(document,"touchmove",Ka)},_offUpEvents:function(){var a=this.el.ownerDocument;z(a,"mouseup",this._onDrop);z(a,"touchend",this._onDrop);z(a,"pointerup",this._onDrop);z(a,"touchcancel",this._onDrop);z(document,"selectstart",this)},_onDrop:function(a){var b=this.el,c=this.options;ra=E(v);Ea=E(v,c.draggable);qa("drop",this,{evt:a});ca=v&&v.parentNode;ra=E(v);Ea=
E(v,c.draggable);if(!f.eventCanceled&&(Wa=gb=Oa=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),clearTimeout(this.cloneId),clearTimeout(this._dragStartId),this.nativeDraggable&&(z(document,"drop",this),z(b,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Va&&A(document.body,"user-select",""),A(v,"transform",""),a&&(Za&&(a.cancelable&&a.preventDefault(),!c.dropBubble&&a.stopPropagation()),K&&K.parentNode&&K.parentNode.removeChild(K),(Z===ca||ka&&"clone"!==
ka.lastPutMode)&&aa&&aa.parentNode&&aa.parentNode.removeChild(aa),v&&(this.nativeDraggable&&z(v,"dragend",this),r(v),v.style["will-change"]="",Za&&!Oa&&G(v,ka?ka.options.ghostClass:this.options.ghostClass,!1),G(v,this.options.chosenClass,!1),d({sortable:this,name:"unchoose",toEl:ca,newIndex:null,newDraggableIndex:null,originalEvent:a}),Z!==ca?(0<=ra&&(d({rootEl:ca,name:"add",toEl:ca,fromEl:Z,originalEvent:a}),d({sortable:this,name:"remove",toEl:ca,originalEvent:a}),d({rootEl:ca,name:"sort",toEl:ca,
fromEl:Z,originalEvent:a}),d({sortable:this,name:"sort",toEl:ca,originalEvent:a})),ka&&ka.save()):ra!==La&&0<=ra&&(d({sortable:this,name:"update",toEl:ca,originalEvent:a}),d({sortable:this,name:"sort",toEl:ca,originalEvent:a})),f.active)))){if(null==ra||-1===ra)ra=La,Ea=Sa;d({sortable:this,name:"end",toEl:ca,originalEvent:a});this.save()}this._nulling()},_nulling:function(){qa("nulling",this);Z=v=ca=K=Ia=aa=db=Fa=Ja=ya=Za=ra=Ea=La=Sa=Pa=Xa=ka=eb=f.dragged=f.ghost=f.clone=f.active=null;cb.forEach(function(a){a.checked=
!0});cb.length=ob=pb=0},handleEvent:function(a){switch(a.type){case "drop":case "dragend":this._onDrop(a);break;case "dragenter":case "dragover":v&&(this._onDragOver(a),a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault());break;case "selectstart":a.preventDefault()}},toArray:function(){for(var a=[],b,c=this.el.children,e=0,g=c.length,k=this.options;e<g;e++)b=c[e],M(b,k.draggable,this.el,!1)&&a.push(b.getAttribute(k.dataIdAttr)||ba(b));return a},sort:function(a,b){var c=
{},e=this.el;this.toArray().forEach(function(g,k){k=e.children[k];M(k,this.options.draggable,e,!1)&&(c[g]=k)},this);b&&this.captureAnimationState();a.forEach(function(g){c[g]&&(e.removeChild(c[g]),e.appendChild(c[g]))});b&&this.animateAll()},save:function(){var a=this.options.store;a&&a.set&&a.set(this)},closest:function(a,b){return M(a,b||this.options.draggable,this.el,!1)},option:function(a,b){var c=this.options;if(void 0===b)return c[a];var e=Ua.modifyOption(this,a,b);c[a]="undefined"!==typeof e?
e:b;"group"===a&&zb(c)},destroy:function(){qa("destroy",this);var a=this.el;a[sa]=null;z(a,"mousedown",this._onTapStart);z(a,"touchstart",this._onTapStart);z(a,"pointerdown",this._onTapStart);this.nativeDraggable&&(z(a,"dragover",this),z(a,"dragenter",this));Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(b){b.removeAttribute("draggable")});this._onDrop();this._disableDelayedDragEvents();ab.splice(ab.indexOf(this.el),1);this.el=a=null},_hideClone:function(){Fa||(qa("hideClone",
this),f.eventCanceled||(A(aa,"display","none"),this.options.removeCloneOnHide&&aa.parentNode&&aa.parentNode.removeChild(aa),Fa=!0))},_showClone:function(a){"clone"!==a.lastPutMode?this._hideClone():Fa&&(qa("showClone",this),f.eventCanceled||(v.parentNode!=Z||this.options.group.revertClone?Ia?Z.insertBefore(aa,Ia):Z.appendChild(aa):Z.insertBefore(aa,v),this.options.group.revertClone&&this.animate(v,aa),A(aa,"display",""),Fa=!1))}};hb&&n(document,"touchmove",function(a){(f.active||Oa)&&a.cancelable&&
a.preventDefault()});f.utils={on:n,off:z,css:A,find:ta,is:function(a,b){return!!M(a,b,a,!1)},extend:function(a,b){if(a&&b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},throttle:T,closest:M,toggleClass:G,clone:wa,index:E,nextTick:va,cancelNextTick:function(a){return clearTimeout(a)},detectDirection:yb,getChild:m};f.get=function(a){return a[sa]};f.mount=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];b[0].constructor===Array&&(b=b[0]);b.forEach(function(e){if(!e.prototype||
!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(f.utils=t(t({},f.utils),e.utils));Ua.mount(e)})};f.create=function(a,b){return new f(a,b)};f.version="1.14.0";var ha=[],$a,rb,sb=!1,tb,ub,kb,Qa,vb=T(function(a,b,c,e){if(b.scroll){var g=(a.touches?a.touches[0]:a).clientX,k=(a.touches?a.touches[0]:a).clientY,l=b.scrollSensitivity,w=b.scrollSpeed,B=W(),F=!1;if(rb!==c){rb=c;Ha();$a=b.scroll;var I=b.scrollFn;!0===$a&&($a=
O(c,!0))}c=0;var N=$a;do{var ia=N,fa=H(ia),la=fa.top,X=fa.bottom,ua=fa.left,xa=fa.right,za=fa.width;fa=fa.height;var Aa=void 0,U=void 0,pa=ia.scrollWidth,Da=ia.scrollHeight;U=A(ia);var jb=ia.scrollLeft,Ba=ia.scrollTop;ia===B?(Aa=za<pa&&("auto"===U.overflowX||"scroll"===U.overflowX||"visible"===U.overflowX),U=fa<Da&&("auto"===U.overflowY||"scroll"===U.overflowY||"visible"===U.overflowY)):(Aa=za<pa&&("auto"===U.overflowX||"scroll"===U.overflowX),U=fa<Da&&("auto"===U.overflowY||"scroll"===U.overflowY));
ua=Aa&&(Math.abs(xa-g)<=l&&jb+za<pa)-(Math.abs(ua-g)<=l&&!!jb);la=U&&(Math.abs(X-k)<=l&&Ba+fa<Da)-(Math.abs(la-k)<=l&&!!Ba);if(!ha[c])for(X=0;X<=c;X++)ha[X]||(ha[X]={});if(ha[c].vx!=ua||ha[c].vy!=la||ha[c].el!==ia)if(ha[c].el=ia,ha[c].vx=ua,ha[c].vy=la,clearInterval(ha[c].pid),0!=ua||0!=la)F=!0,ha[c].pid=setInterval(function(){e&&0===this.layer&&f.active._onTouchMove(kb);var Ga=ha[this.layer].vy?ha[this.layer].vy*w:0,ib=ha[this.layer].vx?ha[this.layer].vx*w:0;"function"===typeof I&&"continue"!==I.call(f.dragged.parentNode[sa],
ib,Ga,a,kb,ha[this.layer].el)||ja(ha[this.layer].el,ib,Ga)}.bind({layer:c}),24);c++}while(b.bubbleScroll&&N!==B&&(N=O(N,!1)));sb=F}},30),Ib=function(a){var b=a.originalEvent,c=a.putSortable,e=a.dragEl,g=a.activeSortable,k=a.dispatchSortableEvent,l=a.hideGhostForTarget;a=a.unhideGhostForTarget;b&&(g=c||g,l(),b=b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:b,b=document.elementFromPoint(b.clientX,b.clientY),a(),g&&!g.el.contains(b)&&(k("spill"),this.onSpill({dragEl:e,putSortable:c})))};
Ma.prototype={startIndex:null,dragStart:function(a){this.startIndex=a.oldDraggableIndex},onSpill:function(a){var b=a.dragEl;a=a.putSortable;this.sortable.captureAnimationState();a&&a.captureAnimationState();var c=m(this.sortable.el,this.startIndex,this.options);c?this.sortable.el.insertBefore(b,c):this.sortable.el.appendChild(b);this.sortable.animateAll();a&&a.animateAll()},drop:Ib};Q(Ma,{pluginName:"revertOnSpill"});mb.prototype={onSpill:function(a){var b=a.dragEl;a=a.putSortable||this.sortable;
a.captureAnimationState();b.parentNode&&b.parentNode.removeChild(b);a.animateAll()},drop:Ib};Q(mb,{pluginName:"removeOnSpill"});f.mount(new function(){function a(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var b in this)"_"===b.charAt(0)&&"function"===typeof this[b]&&(this[b]=this[b].bind(this))}a.prototype={dragStarted:function(b){b=b.originalEvent;this.sortable.nativeDraggable?n(document,"dragover",this._handleAutoScroll):this.options.supportPointer?
n(document,"pointermove",this._handleFallbackAutoScroll):b.touches?n(document,"touchmove",this._handleFallbackAutoScroll):n(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(b){b=b.originalEvent;this.options.dragOverBubble||b.rootEl||this._handleAutoScroll(b)},drop:function(){this.sortable.nativeDraggable?z(document,"dragover",this._handleAutoScroll):(z(document,"pointermove",this._handleFallbackAutoScroll),z(document,"touchmove",this._handleFallbackAutoScroll),z(document,
"mousemove",this._handleFallbackAutoScroll));clearInterval(Qa);Ha();clearTimeout(Ra);Ra=void 0},nulling:function(){kb=rb=$a=sb=Qa=tb=ub=null;ha.length=0},_handleFallbackAutoScroll:function(b){this._handleAutoScroll(b,!0)},_handleAutoScroll:function(b,c){var e=this,g=(b.touches?b.touches[0]:b).clientX,k=(b.touches?b.touches[0]:b).clientY,l=document.elementFromPoint(g,k);kb=b;if(c||this.options.forceAutoScrollFallback||Ta||Ca||Va){vb(b,this.options,l,c);var w=O(l,!0);!sb||Qa&&g===tb&&k===ub||(Qa&&clearInterval(Qa),
Qa=setInterval(function(){var B=O(document.elementFromPoint(g,k),!0);B!==w&&(w=B,Ha());vb(b,e.options,B,c)},10),tb=g,ub=k)}else this.options.bubbleScroll&&O(l,!0)!==W()?vb(b,this.options,O(l,!1),!1):Ha()}};return Q(a,{pluginName:"scroll",initializeByDefault:!0})});f.mount(mb,Ma);P.Sortable=f})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/events ../core/Handles ../core/has ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/accessorSupport/decorators/cast ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./LayerList/LayerListViewModel ./LayerList/ListItem ./LayerList/support/layerListUtils ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ./support/widgetUtils ../chunks/sortable.esm".split(" "),function(P,
y,t,V,Q,oa,J,n,z,S,M,G,A,da,ta,W,H,q,m,p,E,Y){function ea(ja){const {actionsOpen:wa,children:D}=ja;wa&&(ja.actionsOpen=!1);D.forEach(d=>ea(d))}const O=t.ofType(ta),u={exclusive:"exclusive",inherited:"inherited",independent:"independent"},T={statusIndicators:!0};t=function(ja){function wa(d,f){var h=ja.call(this,d,f)||this;h._handles=new Q;h._sortableNodes=new Map;h._sortableMap=new Map;h._focusSortUid=null;h._newUI=oa("esri-layerlist-new-ui");h.visibleItems=null;h.iconClass="esri-icon-layers";h.label=
void 0;h.listItemCreatedFunction=null;h.messages=null;h.messagesCommon=null;h.multipleSelectionEnabled=!1;h.operationalItems=null;h.selectionEnabled=!1;h.selectedItems=new O;h.view=null;h.viewModel=new da;h.visibleElements={...T};h._onSortableSort=({to:r,from:x,item:C,newIndex:L})=>{x&&r&&(x===r?h._sortLayers(h._sortableMap.get(x.dataset.group)):h._moveLayerFromChildList({to:r,from:x,item:C,newIndex:L}))};h._sortableCanPut=(r,x,C)=>{var L,R;const ba=r.el.dataset.group;x=x.el.dataset.group;r=r.el["data-item"];
C=C["data-item"];C=null==C?void 0:null==(L=C.layer)?void 0:L.type;L=null==r?void 0:null==(R=r.layer)?void 0:R.type;return ba&&x&&C&&!("group"===L&&"group"===C)};h._sortableCanPull=(r,x,C)=>{var L;r=r.el.dataset.group;x=x.el.dataset.group;C=C["data-item"];C=null==C?void 0:null==(L=C.layer)?void 0:L.type;return r&&x&&!!C};h._onSortableEnd=({oldIndex:r,from:x,to:C,item:L})=>{x!==C&&x.insertBefore(L,x.children[r])};return h}P._inheritsLoose(wa,ja);var D=wa.prototype;D.initialize=function(){const d=this.operationalItems;
this._setVisibleItems(d);this.own(J.on(this,"operationalItems","change",()=>this._itemsChanged(d)),J.init(this,"selectionEnabled",()=>this._toggleAllSorting()))};D.destroy=function(){this._destroySortables();this._handles.destroy();this._handles=null};D.castVisibleElements=function(d){return{...T,...d}};D.triggerAction=function(d,f){this.viewModel.triggerAction(d,f)};D.render=function(){var d;const {visibleItems:f,_newUI:h}=this,r=null==(d=this.viewModel)?void 0:d.state;return p.tsx("div",{class:this.classes("esri-layer-list esri-widget esri-widget--panel",
{["esri-layer-list--new-ui"]:h,["esri-hidden"]:"loading"===r,["esri-disabled"]:"disabled"===r})},null!=f&&f.length?this.renderItems():this.renderNoItems())};D.renderNoItems=function(){return p.tsx("div",{class:"esri-layer-list__no-items"},this.messages.noItemsToDisplay)};D.renderItems=function(){const {visibleItems:d,selectionEnabled:f,messages:h}=this;return p.tsx("ul",{"aria-label":h.widgetLabel,role:f?"listbox":void 0,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,
"data-group":"root",bind:this,class:this.classes("esri-layer-list__list","esri-layer-list__list--root","esri-layer-list__list--independent")},null==d?void 0:d.map(r=>this.renderItem(r,null)).toArray())};D.renderActionsMenuIcon=function(d,f){const {messagesCommon:h}=this;return p.tsx("div",{key:"actions-menu-toggle","data-item":d,bind:this,onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,class:this.classes("esri-layer-list__item-actions-menu-item",{["esri-layer-list__item-actions-menu-item--active"]:d.actionsOpen}),
tabindex:"0",role:"button","aria-controls":f,"aria-label":h.options,title:h.options},p.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"}))};D.renderActionsMenu=function(d,f,h,r){var {panel:x}=d;x=x&&x.visible?this.renderPanelButton(x):null;const C=(f=1===h&&this._getSingleActionButton(f))?this.renderAction({item:d,action:f,singleAction:!0}):null;return(d=!f&&h?this.renderActionsMenuIcon(d,r):null)||x||f?p.tsx("div",{key:"actions-menu",class:"esri-layer-list__item-actions-menu"},
x,C,d):null};D.renderChildList=function(d,f){var h;const {selectionEnabled:r}=this,{visibilityMode:x,children:C}=d;var L=!!d.error;L=!!C.length&&!L;const R=!L&&r&&"group"===(null==(h=d.layer)?void 0:h.type),{exclusive:ba,inherited:ma}=u;h={["esri-layer-list__list--exclusive"]:x===ba,["esri-layer-list__list--inherited"]:x===ma,["esri-layer-list__list--independent"]:x!==ma&&x!==ba};return L||R?p.tsx("ul",{bind:this,key:"list-items",id:f,"data-group":d.uid,"data-item":d,afterCreate:this._sortNodeCreated,
afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,class:this.classes("esri-layer-list__list",h),"aria-expanded":d.open?"true":"false",role:r?"listbox":x===ba?"radiogroup":"group",hidden:d.open||R?null:!0},null==C?void 0:C.map(va=>this.renderItem(va,d)).toArray()):null};D.renderChildrenToggle=function(d,f){var {messagesCommon:h}=this;const {children:r}=d,x=!!d.error,C={["esri-layer-list__child-toggle--open"]:d.open};h=d.open?h.collapse:h.expand;return r.length&&!x?p.tsx("span",{onclick:this._toggleChildrenClick,
onkeydown:this._toggleChildrenClick,"data-item":d,key:"toggle-children",class:this.classes("esri-layer-list__child-toggle",C),tabindex:"0",role:"button","aria-controls":f,"aria-label":h,title:h},p.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--closed","esri-icon-right-triangle-arrow")}),p.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--opened","esri-icon-down-arrow")}),p.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--closed-rtl",
"esri-icon-left-triangle-arrow")})):null};D.renderError=function(d){return d.error?p.tsx("div",{key:"esri-layer-list__error",class:"esri-layer-list__item-error-message",role:"alert"},p.tsx("span",null,this.messages.layerError)):null};D.renderItemContent=function(d,f,h){var {id:r}=this,x=`${r}_${d.uid}`;r=`${x}_actions`;x=`${x}__list`;const {panel:C}=d,L=this._filterActions(d.actionsSections),R=this._countActions(L);return[p.tsx("div",{key:"list-item-container",class:"esri-layer-list__item-container"},
this.renderChildrenToggle(d,x),this.renderLabel(d,f,h),this.renderActionsMenu(d,L,R,r)),this.renderError(d),R?this.renderActionsSections(d,L,r):null,C&&C.open?C.render():null,this.renderChildList(d,x)]};D.renderItem=function(d,f){const {_newUI:h,id:r,selectionEnabled:x,selectedItems:C,visibleElements:L}=this;var {children:R}=d;const ba=`${`${r}_${d.uid}`}__title`;var ma=!!d.error;R={["esri-layer-list__item--has-children"]:!!R.length&&!ma,["esri-layer-list__item--error"]:!!ma,["esri-layer-list__item--updating"]:d.updating&&
!f&&L.statusIndicators,["esri-layer-list__item--invisible"]:h&&!d.visible,["esri-layer-list__item--invisible-at-scale"]:!d.visibleAtCurrentScale,["esri-layer-list__item--selectable"]:x};if(x){var va;ma={["data-layer-uid"]:null==(va=d.layer)?void 0:va.uid,["data-sort-filter"]:(!d.sortable).toString()};return p.tsx("li",{key:`item-with-selection-${d.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes("esri-layer-list__item",R),"aria-labelledby":ba,onclick:this._toggleSelection,
onkeydown:this._selectionKeydown,"data-item":d,"data-group":f?f.uid:"root",tabIndex:0,"aria-selected":W.findSelectedItem(d,C)?"true":"false",role:"option",...ma},this.renderItemContent(d,f,ba))}return p.tsx("li",{key:`item-no-selection-${d.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes("esri-layer-list__item",R),"aria-labelledby":ba},this.renderItemContent(d,f,ba))};D.renderItemTitle=function(d,f){const {messages:h}=this,r=d.title||h.untitledLayer;
d=d.visibleAtCurrentScale?r:`${r} (${h.layerInvisibleAtScale})`;return p.tsx("span",{key:"layer-title-container",id:f,title:d,"aria-label":d,class:"esri-layer-list__item-title"},r)};D.renderItemToggleIcon=function(d,f){const {_newUI:h}=this,{exclusive:r}=u;f=f&&f.visibilityMode;return p.tsx("span",{key:"item-toggle-icon",class:this.classes({["esri-layer-list__item-toggle-icon"]:h,["esri-layer-list__item-toggle-icon"]:h&&f!==r,["esri-layer-list__item-radio-icon"]:h&&f===r,["esri-icon-radio-checked"]:f===
r&&d.visible,["esri-icon-radio-unchecked"]:f===r&&!d.visible,["esri-icon-visible"]:f!==r&&d.visible,["esri-icon-non-visible"]:f!==r&&!d.visible}),"aria-hidden":"true"})};D.renderItemToggle=function(d,f,h){const {selectionEnabled:r,messages:x}=this,{exclusive:C}=u,L=f&&f.visibilityMode;return r?p.tsx("span",{key:"item-toggle-selection-enabled",class:"esri-layer-list__item-toggle",bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":d,"data-parent-visibility":L,tabIndex:0,
title:d.visible?x.hideLayer:x.showLayer,"aria-checked":d.visible?"true":"false",role:L===C?"radio":"switch","aria-labelledby":h},this.renderItemToggleIcon(d,f)):p.tsx("span",{key:"item-toggle",class:"esri-layer-list__item-toggle"},this.renderItemToggleIcon(d,f))};D.renderItemError=function(d){return d.error?p.tsx("span",{key:"notice-triangle","aria-hidden":"true",class:"esri-icon-notice-triangle"}):null};D.renderLabel=function(d,f,h){const {selectionEnabled:r,_newUI:x,messages:C}=this,{inherited:L,
exclusive:R}=u,ba=null==f?void 0:f.visibilityMode;var ma=ba===R?"radio":"switch";f=[this.renderItemToggle(d,f,h),this.renderItemTitle(d,h)];x&&f.reverse();ma=r?p.tsx("div",{key:`item-label-no-selection-${d.uid}`,class:"esri-layer-list__item-label"},f):p.tsx("div",{key:`item-label-with-selection-${d.uid}`,class:"esri-layer-list__item-label",bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":d,"data-parent-visibility":ba,tabIndex:0,"aria-checked":d.visible?"true":
"false",title:d.visible?C.hideLayer:C.showLayer,role:ma,"aria-labelledby":h},f);return ba===L||d.error?p.tsx("div",{key:`item-label-container-${d.uid}`,class:"esri-layer-list__item-label"},this.renderItemError(d),this.renderItemTitle(d,h)):ma};D.renderPanelButton=function(d){const {className:f,open:h,title:r,image:x}=d,C=x||f?f:"esri-icon-default-action",L=this._getIconImageStyles(d),R={["esri-layer-list__item-actions-menu-item--active"]:h},ba={["esri-layer-list__item-action-image"]:!!L["background-image"]};
C&&(ba[C]=!!C);return p.tsx("div",{key:`panel-${d.uid}`,bind:this,"data-panel":d,onclick:this._triggerPanel,onkeydown:this._triggerPanel,class:this.classes("esri-layer-list__item-actions-menu-item",R),role:"button",tabindex:"0",title:r,"aria-label":r},p.tsx("span",{class:this.classes(ba),styles:L}))};D.renderActionsSections=function(d,f,h){f=f.toArray().map((r,x)=>p.tsx("ul",{key:`${d}-action-section-${x}`,class:"esri-layer-list__item-actions-list"},this.renderActionSection(d,r)));return p.tsx("div",
{role:"group","aria-expanded":d.actionsOpen?"true":"false",key:"actions-section",id:h,class:"esri-layer-list__item-actions",hidden:d.actionsOpen?null:!0},f)};D.renderActionSection=function(d,f){return(f&&f.toArray()).map(h=>this.renderAction({item:d,action:h}))};D.renderActionIcon=function(d){const {active:f,className:h}=d,r=this._getIconImageStyles(d);d="button"!==d.type||d.image||h?h:"esri-icon-default-action";const x={["esri-layer-list__item-action-image"]:!f&&!!r["background-image"],["esri-icon-loading-indicator"]:f,
["esri-rotating"]:f};d&&!f&&(x[d]=!0);return p.tsx("span",{key:"action-icon","aria-hidden":"true",class:this.classes("esri-layer-list__item-action-icon",x),styles:r})};D.renderActionTitle=function(d,f){return f?null:p.tsx("span",{key:"action-title",class:"esri-layer-list__item-action-title"},d)};D.renderAction=function(d){const {item:f,action:h,singleAction:r}=d,{active:x,disabled:C,title:L}=h;d={["esri-layer-list__item-actions-menu-item"]:r&&"button"===h.type,["esri-layer-list__item-action"]:x||
!r&&"toggle"!==h.type,["esri-layer-list__action-toggle"]:!x&&"toggle"===h.type,["esri-layer-list__action-toggle--on"]:!x&&"toggle"===h.type&&h.value,["esri-disabled-element"]:C};const R=[this.renderActionIcon(h),this.renderActionTitle(L,r)];return r?p.tsx("div",{bind:this,"data-item":f,"data-action":h,role:"button",key:`single-action-${h.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:d,tabindex:"0",title:L,"aria-label":L},R):p.tsx("li",{bind:this,"data-item":f,"data-action":h,
key:`action-${h.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:d,tabindex:"0",role:"button",title:L,"aria-label":L},R)};D._sortNodeRemoved=function(d){const {_sortableMap:f}=this;d=d.dataset.group;const h=f.get(d);h&&h.destroy();f.delete(d)};D._destroySortables=function(){const {_sortableMap:d,_sortableNodes:f}=this;d.forEach(h=>h&&h.destroy());d.clear();f.clear()};D._moveLayerFromChildList=function({to:d,from:f,item:h,newIndex:r}){this.viewModel.moveListItem(h["data-item"],
f["data-item"],d["data-item"],r)};D._sortLayers=function(d){if(d){var f=d.el["data-item"];d=d.toArray();if(f)W.sortChildLayersToIds(f,d);else{var h,r;W.sortLayersToIds(null==(h=this.view)?void 0:null==(r=h.map)?void 0:r.layers,d)}}};D._toggleSorting=function(d,f){const {_sortableMap:h,selectionEnabled:r}=this,x=h.get(f);var C=d["data-item"];C=("root"===f?!0:C.childrenSortable&&W.canSortSublayers(C))&&r;x?x.option("disabled",!C):C&&(d=Y.Sortable.create(d,{dataIdAttr:"data-layer-uid",group:{name:f,
pull:this._sortableCanPull,put:this._sortableCanPut},filter:'[data-sort-filter\x3d"true"]',fallbackTolerance:4,onSort:this._onSortableSort,onEnd:this._onSortableEnd,disabled:!C,chosenClass:"esri-layer-list--chosen"}),h.set(f,d))};D._toggleAllSorting=function(){this._sortableNodes.forEach((d,f)=>this._toggleSorting(d,f))};D._sortNodeCreated=function(d){const f=d.dataset.group;f&&(this._sortableNodes.set(f,d),this._toggleSorting(d,f))};D._setVisibleItems=function(d){this.visibleItems=null==d?void 0:
d.filter(f=>this.errorsVisible||!f.error)};D._getSingleActionButton=function(d){return d.reduce(f=>f).filter(f=>f&&"button"===f.type).getItemAt(0)};D._focusListItem=function(d){var f;const {_focusSortUid:h}=this;d&&h&&(null==(f=d["data-item"].layer)?void 0:f.uid)===h&&(d.focus(),this._focusSortUid=null)};D._watchActionSectionChanges=function(d,f){const h="action-section"+f;this._handles.add(d.on("change",this.scheduleRender.bind(this)),h);d.forEach(r=>this._renderOnActionChanges(r,f))};D._renderOnActionChanges=
function(d,f){f="actions"+f;"toggle"===d.type?this._handles.add([J.init(d,"className image id title visible value".split(" "),()=>this.scheduleRender())],f):"slider"===d.type?this._handles.add([J.init(d,"className id title visible value displayValueEnabled max min step".split(" "),()=>this.scheduleRender())],f):this._handles.add([J.init(d,["className","image","id","title","visible"],()=>this.scheduleRender())],f)};D._renderOnItemChanges=function(d){const f=d.uid,h="items"+f;this._handles.add([J.init(d,
"actionsOpen visible open updating title visibleAtCurrentScale error visibilityMode panel panel.title panel.content panel.className sortable childrenSortable".split(" "),()=>this.scheduleRender()),d.actionsSections.on("change",()=>this.scheduleRender()),d.children.on("change",()=>this.scheduleRender())],h);d.children.forEach(r=>this._renderOnItemChanges(r));d.actionsSections.forEach(r=>this._watchActionSectionChanges(r,f))};D._itemsChanged=function(d){this._handles.removeAll();d.forEach(f=>this._renderOnItemChanges(f));
this._setVisibleItems(d);this.scheduleRender()};D._filterActions=function(d){return d.map(f=>f.filter(h=>h.visible))};D._countActions=function(d){return d.reduce((f,h)=>f+h.length,0)};D._getIconImageStyles=function(d){d="esri.widgets.LayerList.ListItemPanel"===d.declaredClass||"esri.support.Action.ActionButton"===d.declaredClass||"esri.support.Action.ActionToggle"===d.declaredClass?d.image:null;return{"background-image":d?`url("${d}")`:null}};D._selectionKeydown=function(d){var f=V.eventKey(d);if(-1===
["ArrowDown","ArrowUp"].indexOf(f))this._toggleSelection(d);else{d.stopPropagation();var h=d.currentTarget,r=h["data-item"],{_sortableMap:x,selectedItems:C}=this;if(h=x.get(h.dataset.group)){var L=W.findSelectedItem(r,C),R=h.toArray();d=R.indexOf(d.target.dataset.layerUid);if(-1!==d){if("ArrowDown"===f){const Ma=d+1;if(Ma>=R.length)return;if(L){var ba;R.splice(Ma,0,R.splice(d,1)[0]);h.sort(R);this._sortLayers(h);this._focusSortUid=null==(ba=r.layer)?void 0:ba.uid}else{var ma;this._focusSortUid=null==
(ma=r.layer)?void 0:ma.uid;this.scheduleRender()}}if("ArrowUp"===f&&(f=d-1,!(-1>=f)))if(L){var va;R.splice(f,0,R.splice(d,1)[0]);h.sort(R);this._sortLayers(h);this._focusSortUid=null==(va=r.layer)?void 0:va.uid}else{var Ha;this._focusSortUid=null==(Ha=r.layer)?void 0:Ha.uid;this.scheduleRender()}}}}};D._toggleActionsOpen=function(d){const f=d.currentTarget["data-item"];var {actionsOpen:h}=f;(h=!h)&&this.operationalItems.forEach(r=>ea(r));f.actionsOpen=h;d.stopPropagation()};D._triggerPanel=function(d){const f=
d.currentTarget["data-panel"];f&&(f.open=!f.open);d.stopPropagation()};D._triggerAction=function(d){var f=d.currentTarget;const h=f["data-action"];f=f["data-item"];"toggle"===h.type&&(h.value=!h.value);this.triggerAction(h,f);d.stopPropagation()};D._toggleVisibility=function(d){var f=d.currentTarget;const h=f.getAttribute("data-parent-visibility");f=f["data-item"];h===u.exclusive&&f.visible||(f.visible=!f.visible);d.stopPropagation()};D._toggleChildrenClick=function(d){const f=d.currentTarget["data-item"];
f.open=!f.open;d.stopPropagation()};D._toggleSelection=function(d){d.stopPropagation();const {multipleSelectionEnabled:f,selectedItems:h}=this;d=d.currentTarget["data-item"];const r=W.findSelectedItem(d,h),{length:x}=h,C=r&&1===x;f?r?null==h.remove?void 0:h.remove(r):h.add(d):x&&!C?(h.removeAll(),h.add(d)):r?null==h.remove?void 0:h.remove(r):h.add(d)};return wa}(A);y.__decorate([M.property()],t.prototype,"visibleItems",void 0);y.__decorate([M.property()],t.prototype,"iconClass",void 0);y.__decorate([M.property()],
t.prototype,"errorsVisible",void 0);y.__decorate([M.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],t.prototype,"label",void 0);y.__decorate([n.aliasOf("viewModel.listItemCreatedFunction")],t.prototype,"listItemCreatedFunction",void 0);y.__decorate([M.property(),q.messageBundle("esri/widgets/LayerList/t9n/LayerList")],t.prototype,"messages",void 0);y.__decorate([M.property(),q.messageBundle("esri/t9n/common")],t.prototype,"messagesCommon",void 0);y.__decorate([M.property()],t.prototype,
"multipleSelectionEnabled",void 0);y.__decorate([n.aliasOf("viewModel.operationalItems")],t.prototype,"operationalItems",void 0);y.__decorate([M.property()],t.prototype,"selectionEnabled",void 0);y.__decorate([M.property()],t.prototype,"selectedItems",void 0);y.__decorate([n.aliasOf("viewModel.view")],t.prototype,"view",void 0);y.__decorate([m.vmEvent("trigger-action"),M.property({type:da})],t.prototype,"viewModel",void 0);y.__decorate([M.property()],t.prototype,"visibleElements",void 0);y.__decorate([z.cast("visibleElements")],
t.prototype,"castVisibleElements",null);y.__decorate([n.aliasOf("viewModel.triggerAction")],t.prototype,"triggerAction",null);y.__decorate([H.accessibleHandler()],t.prototype,"_toggleActionsOpen",null);y.__decorate([H.accessibleHandler()],t.prototype,"_triggerPanel",null);y.__decorate([H.accessibleHandler()],t.prototype,"_triggerAction",null);y.__decorate([H.accessibleHandler()],t.prototype,"_toggleVisibility",null);y.__decorate([H.accessibleHandler()],t.prototype,"_toggleChildrenClick",null);y.__decorate([H.accessibleHandler()],
t.prototype,"_toggleSelection",null);return t=y.__decorate([G.subclass("esri.widgets.LayerList")],t)});