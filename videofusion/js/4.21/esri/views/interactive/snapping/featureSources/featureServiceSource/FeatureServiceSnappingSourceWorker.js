// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.21/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(l,b,B,N,q){let n=function(){function g(){this._emitter=new g.EventEmitter(this)}var G=g.prototype;G.emit=function(m,r){return this._emitter.emit(m,r)};G.on=function(m,r){return this._emitter.on(m,r)};G.once=function(m,r){return this._emitter.once(m,r)};G.hasEventListener=function(m){return this._emitter.hasEventListener(m)};
return g}();(function(g){let G=function(){function r(Q=null){this.target=Q;this._listenersMap=null}var C=r.prototype;C.clear=function(){this._listenersMap&&this._listenersMap.clear();this._listenersMap=null};C.emit=function(Q,z){Q=this._listenersMap&&this._listenersMap.get(Q);if(!Q)return!1;const E=this.target||this;[...Q].forEach(O=>{O.call(E,z)});return 0<Q.length};C.on=function(Q,z){if(Array.isArray(Q)){var E=Q.map(O=>this.on(O,z));return N.handlesGroup(E)}if(-1<Q.indexOf(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");
this._listenersMap||(this._listenersMap=new Map);E=this._listenersMap.get(Q)||[];E.push(z);this._listenersMap.set(Q,E);return{remove:()=>{const O=this._listenersMap&&this._listenersMap.get(Q)||[],c=O.indexOf(z);0<=c&&O.splice(c,1)}}};C.once=function(Q,z){const E=this.on(Q,O=>{E.remove();z.call(null,O)});return E};C.hasEventListener=function(Q){Q=this._listenersMap&&this._listenersMap.get(Q);return null!=Q&&0<Q.length};return r}();g.EventEmitter=G;g.EventedMixin=r=>{r=function(C){function Q(){var E=
C.apply(this,arguments)||this;E._emitter=new G;return E}l._inheritsLoose(Q,C);var z=Q.prototype;z.destroy=function(){this._emitter.clear()};z.emit=function(E,O){return this._emitter.emit(E,O)};z.on=function(E,O){return this._emitter.on(E,O)};z.once=function(E,O){return this._emitter.once(E,O)};z.hasEventListener=function(E){return this._emitter.hasEventListener(E)};return Q}(r);return r=b.__decorate([q.subclass("esri.core.Evented")],r)};let m=function(r){function C(){var z=r.apply(this,arguments)||
this;z._emitter=new n.EventEmitter(l._assertThisInitialized(z));return z}l._inheritsLoose(C,r);var Q=C.prototype;Q.destroy=function(){this._emitter.clear()};Q.emit=function(z,E){return this._emitter.emit(z,E)};Q.on=function(z,E){return this._emitter.on(z,E)};Q.once=function(z,E){return this._emitter.once(z,E)};Q.hasEventListener=function(z){return this._emitter.hasEventListener(z)};return C}(B);m=b.__decorate([q.subclass("esri.core.Evented")],m);g.EventedAccessor=m})(n||(n={}));return n})},"esri/core/Handles":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./Collection ./maybe ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),
function(l,b,B,N,q,n,g){B=function(G){function m(C){C=G.call(this,C)||this;C._groups=new Map;return C}l._inheritsLoose(m,G);var r=m.prototype;r.destroy=function(){this.removeAll()};r.add=function(C,Q){if(!this._isHandle(C)&&!Array.isArray(C)&&!N.isCollection(C))return this;const z=this._getOrCreateGroup(Q);Array.isArray(C)||N.isCollection(C)?C.forEach(E=>this._isHandle(E)&&z.push(E)):z.push(C);this.notifyChange("size");return this};r.forEach=function(C,Q){if("function"===typeof C)this._groups.forEach(z=>
z.forEach(C));else{const z=this._getGroup(C);z&&Q&&z.forEach(Q)}};r.has=function(C){return this._groups.has(this._ensureGroupKey(C))};r.remove=function(C){if(Array.isArray(C)||N.isCollection(C))return C.forEach(this.remove,this),this;if(!this.has(C))return this;const Q=this._getGroup(C);for(let z=0;z<Q.length;z++)Q[z].remove();this._deleteGroup(C);this.notifyChange("size");return this};r.removeAll=function(){this._groups.forEach(C=>{for(let Q=0;Q<C.length;Q++)C[Q].remove()});this._groups.clear();
this.notifyChange("size");return this};r._isHandle=function(C){return C&&!!C.remove};r._getOrCreateGroup=function(C){if(this.has(C))return this._getGroup(C);const Q=[];this._groups.set(this._ensureGroupKey(C),Q);return Q};r._getGroup=function(C){return q.assumeNonNull(this._groups.get(this._ensureGroupKey(C)))};r._deleteGroup=function(C){return this._groups.delete(this._ensureGroupKey(C))};r._ensureGroupKey=function(C){return C||"_default_"};l._createClass(m,[{key:"size",get:function(){let C=0;this._groups.forEach(Q=>
{C+=Q.length});return C}}]);return m}(B);b.__decorate([n.property({readOnly:!0})],B.prototype,"size",null);return B=b.__decorate([g.subclass("esri.core.Handles")],B)})},"esri/core/Collection":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./ArrayPool ./Evented ./lang ./maybe ./ObjectPool ./scheduling ./accessorSupport/ensureType ./accessorSupport/tracking ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass ./accessorSupport/tracking/SimpleObservable".split(" "),
function(l,b,B,N,q,n,g,G,m,r,C,Q,z){function E(e){return e?e instanceof t?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function O(e){if(e&&e.length)return e[0]}function c(e,x,F,K){x&&x.forEach((h,p,J)=>{e.push(h);c(e,F.call(K,h,p,J),F,K)})}var u;let D=function(){function e(){this.target=null;this.defaultPrevented=this.cancellable=!1;this.type=this.item=void 0}var x=e.prototype;x.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};x.reset=function(F){this.defaultPrevented=
!1;this.item=F};return e}();const L=new g(D,void 0,e=>{e.item=null;e.target=null;e.defaultPrevented=!1;e.cancellable=!1}),A=()=>{},H=new Set,I=new Set,W=new Set,M=new Map;let k=0,t=u=function(e,x){function F(h){h=e.call(this,h)||this;h._chgListeners=[];h._notifications=null;h._timer=null;h._observable=new z.SimpleObservable;h.length=0;h._items=[];Object.defineProperty(l._assertThisInitialized(h),"uid",{value:k++});return h}l._inheritsLoose(F,e);F.isCollection=function(h){return null!=h&&h instanceof
u};var K=F.prototype;K.normalizeCtorArgs=function(h){return h?Array.isArray(h)||h instanceof u?{items:h}:h:{}};K[x]=function*(){yield*this.items};K.hasEventListener=function(h){return"change"===h?0<this._chgListeners.length:this._emitter.hasEventListener(h)};K.on=function(h,p){if("change"===h){const J=this._chgListeners,U={removed:!1,callback:p};J.push(U);this._notifications&&this._notifications.push({listeners:J.slice(),items:this._items.slice(),changes:[]});return{remove(){this.remove=A;U.removed=
!0;J.splice(J.indexOf(U),1)}}}return this._emitter.on(h,p)};K.once=function(h,p){const J=this.on(h,p);return{remove(){J.remove()}}};K.add=function(h,p){r.trackAccess(this._observable);if(this._emitBeforeChanges(1))return this;p=this.getNextIndex(null!=p?p:null);this._splice(p,0,h);this._emitAfterChanges(1);return this};K.addMany=function(h,p=this._items.length){r.trackAccess(this._observable);if(!h||!h.length||this._emitBeforeChanges(1))return this;p=this.getNextIndex(p);this._splice(p,0,...E(h));
this._emitAfterChanges(1);return this};K.removeAll=function(){r.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(2))return[];const h=this._splice(0,this.length)||[];this._emitAfterChanges(2);return h};K.clone=function(){r.trackAccess(this._observable);return this._createNewInstance({items:this._items.map(q.clone)})};K.concat=function(...h){r.trackAccess(this._observable);h=h.map(E);return this._createNewInstance({items:this._items.concat(...h)})};K.drain=function(h,p){r.trackAccess(this._observable);
if(this.length&&!this._emitBeforeChanges(2)){var J=n.assumeNonNull(this._splice(0,this.length)),U=J.length;for(let da=0;da<U;da++)h.call(p,J[da],da,J);this._emitAfterChanges(2)}};K.every=function(h,p){r.trackAccess(this._observable);return this._items.every(h,p)};K.filter=function(h,p){r.trackAccess(this._observable);let J;J=2===arguments.length?this._items.filter(h,p):this._items.filter(h);return this._createNewInstance({items:J})};K.find=function(h,p){r.trackAccess(this._observable);return this._items.find(h,
p)};K.findIndex=function(h,p){r.trackAccess(this._observable);return this._items.findIndex(h,p)};K.flatten=function(h,p){r.trackAccess(this._observable);const J=[];c(J,this,h,p);return new u(J)};K.forEach=function(h,p){r.trackAccess(this._observable);return this._items.forEach(h,p)};K.getItemAt=function(h){r.trackAccess(this._observable);return this._items[h]};K.getNextIndex=function(h){r.trackAccess(this._observable);const p=this.length;h=null==h?p:h;0>h?h=0:h>p&&(h=p);return h};K.includes=function(h,
p=0){r.trackAccess(this._observable);return this._items.includes(h,p)};K.indexOf=function(h,p=0){r.trackAccess(this._observable);return this._items.indexOf(h,p)};K.join=function(h=","){r.trackAccess(this._observable);return this._items.join(h)};K.lastIndexOf=function(h,p=this.length-1){r.trackAccess(this._observable);return this._items.lastIndexOf(h,p)};K.map=function(h,p){r.trackAccess(this._observable);h=this._items.map(h,p);return new u({items:h})};K.reorder=function(h,p=this.length-1){r.trackAccess(this._observable);
const J=this.indexOf(h);if(-1!==J){0>p?p=0:p>=this.length&&(p=this.length-1);if(J!==p){if(this._emitBeforeChanges(4))return h;this._splice(J,1);this._splice(p,0,h);this._emitAfterChanges(4)}return h}};K.pop=function(){r.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var h=O(this._splice(this.length-1,1));this._emitAfterChanges(2);return h}};K.push=function(...h){r.trackAccess(this._observable);if(this._emitBeforeChanges(1))return this.length;this._splice(this.length,0,
...h);this._emitAfterChanges(1);return this.length};K.reduce=function(h,p){r.trackAccess(this._observable);const J=this._items;return 2===arguments.length?J.reduce(h,p):J.reduce(h)};K.reduceRight=function(h,p){r.trackAccess(this._observable);const J=this._items;return 2===arguments.length?J.reduceRight(h,p):J.reduceRight(h)};K.remove=function(h){r.trackAccess(this._observable);return this.removeAt(this.indexOf(h))};K.removeAt=function(h){r.trackAccess(this._observable);if(!(0>h||h>=this.length||this._emitBeforeChanges(2)))return h=
O(this._splice(h,1)),this._emitAfterChanges(2),h};K.removeMany=function(h){r.trackAccess(this._observable);if(!h||!h.length||this._emitBeforeChanges(2))return[];h=h instanceof u?h.toArray():h;const p=this._items,J=[],U=h.length;for(let oa=0;oa<U;oa++){var da=p.indexOf(h[oa]);if(-1<da){{var ja=oa+1;var ka=da+1;const ua=Math.min(h.length-ja,p.length-ka);let ra=0;for(;ra<ua&&h[ja+ra]===p[ka+ra];)ra++;ja=ra}ja=1+ja;(da=this._splice(da,ja))&&0<da.length&&J.push.apply(J,da);oa+=ja-1}}this._emitAfterChanges(2);
return J};K.reverse=function(){r.trackAccess(this._observable);if(this._emitBeforeChanges(4))return this;const h=this._splice(0,this.length);h&&(h.reverse(),this._splice(0,0,...h));this._emitAfterChanges(4);return this};K.shift=function(){r.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var h=O(this._splice(0,1));this._emitAfterChanges(2);return h}};K.slice=function(h=0,p=this.length){r.trackAccess(this._observable);return this._createNewInstance({items:this._items.slice(h,
p)})};K.some=function(h,p){r.trackAccess(this._observable);return this._items.some(h,p)};K.sort=function(h){r.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(4))return this;const p=n.assumeNonNull(this._splice(0,this.length));arguments.length?p.sort(h):p.sort();this._splice(0,0,...p);this._emitAfterChanges(4);return this};K.splice=function(h,p,...J){r.trackAccess(this._observable);const U=(p?2:0)|(J.length?1:0);if(this._emitBeforeChanges(U))return[];h=this._splice(h,p,...J)||
[];this._emitAfterChanges(U);return h};K.toArray=function(){r.trackAccess(this._observable);return this._items.slice()};K.toJSON=function(){r.trackAccess(this._observable);return this.toArray()};K.toLocaleString=function(){r.trackAccess(this._observable);return this._items.toLocaleString()};K.toString=function(){r.trackAccess(this._observable);return this._items.toString()};K.unshift=function(...h){r.trackAccess(this._observable);if(!h.length||this._emitBeforeChanges(1))return this.length;this._splice(0,
0,...h);this._emitAfterChanges(1);return this.length};K._createNewInstance=function(h){return new this.constructor(h)};K._splice=function(h,p,...J){const U=this._items;var da=this.constructor.prototype.itemType;let ja=void 0;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=G.schedule(()=>this._dispatchChange()));if(p){ja=U.splice(h,p);if(this.hasEventListener("before-remove")){var ka=
L.acquire();ka.target=this;ka.cancellable=!0;for(let ra=0,Aa=ja.length;ra<Aa;ra++)p=ja[ra],ka.reset(p),this.emit("before-remove",ka),ka.defaultPrevented&&(ja.splice(ra,1),U.splice(h,0,p),h+=1,--ra,--Aa);L.release(ka)}this.length=this._items.length;if(this.hasEventListener("after-remove")){p=L.acquire();p.target=this;p.cancellable=!1;ka=ja.length;for(let ra=0;ra<ka;ra++)p.reset(ja[ra]),this.emit("after-remove",p);L.release(p)}}if(J&&J.length){if(da){p=[];for(var oa of J)J=da.ensureType(oa),null==J&&
null!=oa||p.push(J);J=p}da=this.hasEventListener("before-add");oa=this.hasEventListener("after-add");p=h===this.length;if(da||oa){var ua=L.acquire();ua.target=this;ua.cancellable=!0;ka=L.acquire();ka.target=this;ka.cancellable=!1;for(const ra of J)da?(ua.reset(ra),this.emit("before-add",ua),ua.defaultPrevented||(p?U.push(ra):U.splice(h++,0,ra),this._set("length",U.length),oa&&(ka.reset(ra),this.emit("after-add",ka)))):(p?U.push(ra):U.splice(h++,0,ra),this._set("length",U.length),ka.reset(ra),this.emit("after-add",
ka));L.release(ka);L.release(ua)}else{if(p)for(ua of J)U.push(ua);else U.splice(h,0,...J);this._set("length",U.length)}}(J&&J.length||ja&&ja.length)&&this._notifyChangeEvent(J,ja);return ja};K._emitBeforeChanges=function(h){let p=!1;if(this.hasEventListener("before-changes")){const J=L.acquire();J.target=this;J.cancellable=!0;J.type=h;this.emit("before-changes",J);p=J.defaultPrevented;L.release(J)}return p};K._emitAfterChanges=function(h){if(this.hasEventListener("after-changes")){const p=L.acquire();
p.target=this;p.cancellable=!1;p.type=h;this.emit("after-changes",p);L.release(p)}this._observable.notify()};K._notifyChangeEvent=function(h,p){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:h,removed:p})};K._dispatchChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var h=this._notifications;this._notifications=null;for(const p of h){h=p.changes;H.clear();I.clear();W.clear();for(const {added:oa,
removed:ua}of h){if(oa)if(0===W.size&&0===I.size)for(const ra of oa)H.add(ra);else for(const ra of oa)I.has(ra)?(W.add(ra),I.delete(ra)):W.has(ra)||H.add(ra);if(ua)if(0===W.size&&0===H.size)for(const ra of ua)I.add(ra);else for(const ra of ua)H.has(ra)?H.delete(ra):(W.delete(ra),I.add(ra))}const J=B.acquire();H.forEach(oa=>{J.push(oa)});const U=B.acquire();I.forEach(oa=>{U.push(oa)});const da=this._items,ja=p.items,ka=B.acquire();W.forEach(oa=>{ja.indexOf(oa)!==da.indexOf(oa)&&ka.push(oa)});if(p.listeners&&
(J.length||U.length||ka.length)){h={target:this,added:J,removed:U,moved:ka};const oa=p.listeners.length;for(let ua=0;ua<oa;ua++){const ra=p.listeners[ua];ra.removed||ra.callback.call(this,h)}}B.release(J);B.release(U);B.release(ka)}H.clear();I.clear();W.clear()}};l._createClass(F,[{key:"items",get:function(){r.trackAccess(this._observable);return this._items},set:function(h){this._emitBeforeChanges(1)||(this._splice(0,this.length,...E(h)),this._emitAfterChanges(1))}}]);return F}(N.EventedAccessor,
Symbol.iterator);t.ofType=e=>{if(!e)return u;if(M.has(e))return M.get(e);var x=null;if("function"===typeof e)x=e.prototype.declaredClass;else if(e.base)x=e.base.prototype.declaredClass;else for(var F in e.typeMap){const K=e.typeMap[F].prototype.declaredClass;x=x?x+` | ${K}`:K}F=function(K){function h(){return K.apply(this,arguments)||this}l._inheritsLoose(h,K);return h}(u);F=b.__decorate([Q.subclass(`esri.core.Collection<${x}>`)],F);x={Type:e,ensureType:"function"===typeof e?m.ensureType(e):m.ensureOneOfType(e)};
Object.defineProperty(F.prototype,"itemType",{value:x});M.set(e,F);return F};b.__decorate([C.property()],t.prototype,"length",void 0);b.__decorate([C.property()],t.prototype,"items",null);return t=u=b.__decorate([Q.subclass("esri.core.Collection")],t)})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","./ObservationHandle"],function(l,b){let B=function(){function N(){this._observers=[]}var q=N.prototype;q.observe=function(n){this._observers.includes(n)||this._observers.push(n);
return new b.ObservationHandle(this._observers,n)};q.notify=function(){const n=this._observers.slice();for(let g=0;g<n.length;++g){const G=n[g];G.onInvalidated();G.onCommitted()}};return N}();l.SimpleObservable=B;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/watchUtils":function(){define(["exports","./events","./lang","./promiseUtils"],function(l,b,B,N){function q(O,c,u,D){var L=Array.isArray(c)?c:-1<c.indexOf(",")?c.split(","):[c];c=O.watch(c,u,D);for(const A of L)L=A.trim().replace(E,
"$1"),D=O.get(L),u.call(O,D,D,L,O);return c}function n(O,c,u,D,L){L=O.watch(c,(H,I,W,M)=>{if(!u||u(H))null==D?void 0:D.call(O,H,I,W,M)},L);if(Array.isArray(c))for(var A of c){const H=O.get(A);u&&u(H)&&(null==D?void 0:D.call(O,H,H,c,O))}else A=O.get(c),u&&u(A)&&(null==D?void 0:D.call(O,A,A,c,O));return L}function g(O,c,u,D,L){function A(){M&&(M.remove(),M=null)}const H="function"===typeof D?D:null,I="object"===typeof D?D:null;"boolean"===typeof D&&(L=D);let W=!1,M;const k=N.createDeferred();N.onAbort(I,
()=>{A();k.reject(N.createAbortError())});D={then:k.promise.then.bind(k.promise),catch:k.promise.catch.bind(k.promise),remove:A};Object.freeze(D);M=n(O,c,u,(t,e,x,F)=>{W=!0;A();H&&H.call(O,t,e,x,F);k.resolve({value:t,oldValue:e,propertyName:x,target:F})},L);W&&A();return D}function G(O){return!!O}function m(O){return!O}function r(O){return!0===O}function C(O){return!1===O}function Q(O){return void 0!==O}function z(O){return void 0===O}const E=/\?(\.|$)/g;l.init=q;l.on=function(O,c,u,D,L,A,H){function I(k){const t=
W[k];t&&(A&&A(t.target,k,O,u),t.handle.remove(),delete W[k])}const W={},M=q(O,c,(k,t,e)=>{I(e);b.isEventTarget(k)&&(W[e]={handle:b.on(k,u,D),target:k},L&&L(k,e,O,u))},H);return{remove(){M.remove();for(const k in W)I(k)}}};l.once=function(O,c,u,D){return g(O,c,null,u,D)};l.pausable=function(O,c,u,D){let L=!1;const A=O.watch(c,(H,I,W,M)=>{L||u.call(O,H,I,W,M)},D);return{remove(){A.remove()},pause(){L=!0},resume(){L=!1}}};l.watch=function(O,c,u,D){return O.watch(c,u,D)};l.when=function(O,c,u,D){return n(O,
c,G,u,D)};l.whenDefined=function(O,c,u,D){return n(O,c,Q,u,D)};l.whenDefinedOnce=function(O,c,u,D){return g(O,c,Q,u,D)};l.whenEqual=function(O,c,u,D,L){return n(O,c,A=>B.equals(u,A),D,L)};l.whenEqualOnce=function(O,c,u,D,L){return g(O,c,A=>B.equals(u,A),D,L)};l.whenFalse=function(O,c,u,D){return n(O,c,C,u,D)};l.whenFalseOnce=function(O,c,u,D){return g(O,c,C,u,D)};l.whenNot=function(O,c,u,D){return n(O,c,m,u,D)};l.whenNotOnce=function(O,c,u,D){return g(O,c,m,u,D)};l.whenOnce=function(O,c,u,D){return g(O,
c,G,u,D)};l.whenTrue=function(O,c,u,D){return n(O,c,r,u,D)};l.whenTrueOnce=function(O,c,u,D){return g(O,c,r,u,D)};l.whenUndefined=function(O,c,u,D){return n(O,c,z,u,D)};l.whenUndefinedOnce=function(O,c,u,D){return g(O,c,z,u,D)};l.whenValidOnce=g;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter".split(" "),
function(l,b,B,N,q,n,g,G,m,r){return function(){function C(z){this.geometryInfo=z;this._boundsStore=new m.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new B;this.featureAdapter=r.optimizedFeatureQueryEngineAdapter}var Q=C.prototype;Q.add=function(z){this._add(z);this._emitChanged()};Q.addMany=function(z){for(const E of z)this._add(E);this._emitChanged()};Q.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};Q.removeById=function(z){z=
this._featuresById.get(z);if(!z)return null;this._remove(z);this._emitChanged();return z};Q.removeManyById=function(z){this._boundsStore.invalidateIndex();for(const E of z)(z=this._featuresById.get(E))&&this._remove(z);this._emitChanged()};Q.forEachBounds=function(z,E,O){for(const c of z)(z=this._boundsStore.get(c.objectId))&&E(n.fromRect(O,z))};Q.getFeature=function(z){return this._featuresById.get(z)};Q.has=function(z){return this._featuresById.has(z)};Q.forEach=function(z){this._featuresById.forEach(E=>
z(E))};Q.forEachInBounds=function(z,E){this._boundsStore.forEachInBounds(z,O=>{E(this._featuresById.get(O))})};Q.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};Q.sweep=function(){let z=!1;this._featuresById.forEach((E,O)=>{this._markedIds.has(O)||(z=!0,this._remove(E))});this._markedIds.clear();z&&this._emitChanged()};Q._emitChanged=function(){this.events.emit("changed",void 0)};Q._add=function(z){if(z){var E=z.objectId;if(null==E)N.getLogger("esri.layers.graphics.data.FeatureStore").error(new b("featurestore:invalid-feature",
"feature id is missing",{feature:z}));else{var O=this._featuresById.get(E);this._markedIds.add(E);if(O){z.displayId=O.displayId;var c=this._boundsStore.get(E);this._boundsStore.delete(E)}else if(q.isSome(this.onFeatureAdd))this.onFeatureAdd(z);!q.isNone(z.geometry)&&z.geometry.coords&&z.geometry.coords.length?(c=G.getBoundsOptimizedGeometry(q.isSome(c)?c:g.create(),z.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),q.isSome(c)&&this._boundsStore.set(E,c)):this._boundsStore.set(E,null);this._featuresById.set(E,
z)}}};Q._remove=function(z){if(q.isSome(this.onFeatureRemove))this.onFeatureRemove(z);this._markedIds.delete(z.objectId);this._boundsStore.delete(z.objectId);this._featuresById.delete(z.objectId);return z};l._createClass(C,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",
get:function(){if(!this.numFeatures)return null;const z=g.create(g.NEGATIVE_INFINITY);this._featuresById.forEach(E=>{if(E=this._boundsStore.get(E.objectId))z[0]=Math.min(E[0],z[0]),z[1]=Math.min(E[1],z[1]),z[2]=Math.max(E[2],z[2]),z[3]=Math.max(E[3],z[3])});return z}},{key:"storeStatistics",get:function(){let z=0;this._featuresById.forEach(E=>{q.isSome(E.geometry)&&E.geometry.coords&&(z+=E.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:z/(this.hasZ?this.hasM?4:3:
this.hasM?3:2)}}}]);return C}()})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe","../Extent","./aaBoundingRect"],function(l,b,B,N){function q(c=E){return[c[0],c[1],c[2],c[3],c[4],c[5]]}function n(c,u,D,L,A,H,I=q()){I[0]=c;I[1]=u;I[2]=D;I[3]=L;I[4]=A;I[5]=H;return I}function g(c){return c[0]>=c[3]?0:c[3]-c[0]}function G(c){return c[1]>=c[4]?0:c[4]-c[1]}function m(c){return c[2]>=c[5]?0:c[5]-c[2]}function r(c,u){return Math.max(u[0],c[0])<=Math.min(u[3],c[3])&&
Math.max(u[1],c[1])<=Math.min(u[4],c[4])&&Math.max(u[2],c[2])<=Math.min(u[5],c[5])}function C(c,u){c[0]=u[0];c[1]=u[1];c[2]=u[2];c[3]=u[3];c[4]=u[4];c[5]=u[5];return c}function Q(c){return 6===c.length}const z=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],E=[0,0,0,0,0,0],O=q();l.NEGATIVE_INFINITY=z;l.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];l.ZERO=E;l.allFinite=function(c){for(let u=0;6>u;u++)if(!isFinite(c[u]))return!1;return!0};l.center=function(c,
u=[0,0,0]){u[0]=c[0]+g(c)/2;u[1]=c[1]+G(c)/2;u[2]=c[2]+m(c)/2;return u};l.contains=function(c,u){return u[0]>=c[0]&&u[1]>=c[1]&&u[2]>=c[2]&&u[3]<=c[3]&&u[4]<=c[4]&&u[5]<=c[5]};l.containsPoint=function(c,u){return u[0]>=c[0]&&u[1]>=c[1]&&u[2]>=c[2]&&u[0]<=c[3]&&u[1]<=c[4]&&u[2]<=c[5]};l.containsPointWithMargin=function(c,u,D){return u[0]>=c[0]-D&&u[1]>=c[1]-D&&u[2]>=c[2]-D&&u[0]<=c[3]+D&&u[1]<=c[4]+D&&u[2]<=c[5]+D};l.create=q;l.depth=G;l.diameter=function(c){const u=g(c),D=m(c);c=G(c);return Math.sqrt(u*
u+D*D+c*c)};l.empty=function(c){return c?C(c,z):q(z)};l.equals=function(c,u,D){if(b.isNone(c)||b.isNone(u))return c===u;if(!Q(c)||!Q(u))return!1;if(D)for(let L=0;L<c.length;L++){if(!D(c[L],u[L]))return!1}else for(D=0;D<c.length;D++)if(c[D]!==u[D])return!1;return!0};l.expandWithAABB=function(c,u){c[0]=Math.min(c[0],u[0]);c[1]=Math.min(c[1],u[1]);c[2]=Math.min(c[2],u[2]);c[3]=Math.max(c[3],u[3]);c[4]=Math.max(c[4],u[4]);c[5]=Math.max(c[5],u[5])};l.expandWithBuffer=function(c,u,D=0,L=u.length/3){let A=
c[0],H=c[1],I=c[2],W=c[3],M=c[4],k=c[5];for(let t=0;t<L;t++)A=Math.min(A,u[D+3*t]),H=Math.min(H,u[D+3*t+1]),I=Math.min(I,u[D+3*t+2]),W=Math.max(W,u[D+3*t]),M=Math.max(M,u[D+3*t+1]),k=Math.max(k,u[D+3*t+2]);c[0]=A;c[1]=H;c[2]=I;c[3]=W;c[4]=M;c[5]=k};l.expandWithNestedArray=function(c,u,D){const L=u.length;let A=c[0],H=c[1],I=c[2],W=c[3],M=c[4],k=c[5];if(D)for(D=0;D<L;D++){var t=u[D];A=Math.min(A,t[0]);H=Math.min(H,t[1]);I=Math.min(I,t[2]);W=Math.max(W,t[0]);M=Math.max(M,t[1]);k=Math.max(k,t[2])}else for(D=
0;D<L;D++)t=u[D],A=Math.min(A,t[0]),H=Math.min(H,t[1]),W=Math.max(W,t[0]),M=Math.max(M,t[1]);c[0]=A;c[1]=H;c[2]=I;c[3]=W;c[4]=M;c[5]=k};l.expandWithOffset=function(c,u,D,L){c[0]=Math.min(c[0],c[0]+u);c[3]=Math.max(c[3],c[3]+u);c[1]=Math.min(c[1],c[1]+D);c[4]=Math.max(c[4],c[4]+D);c[2]=Math.min(c[2],c[2]+L);c[5]=Math.max(c[5],c[5]+L)};l.expandWithRect=function(c,u){c[0]=Math.min(c[0],u[0]);c[1]=Math.min(c[1],u[1]);c[3]=Math.max(c[3],u[2]);c[4]=Math.max(c[4],u[3])};l.expandWithVec3=function(c,u){c[0]=
Math.min(c[0],u[0]);c[1]=Math.min(c[1],u[1]);c[2]=Math.min(c[2],u[2]);c[3]=Math.max(c[3],u[0]);c[4]=Math.max(c[4],u[1]);c[5]=Math.max(c[5],u[2])};l.fromExtent=function(c,u=q()){u[0]=c.xmin;u[1]=c.ymin;u[2]=c.zmin;u[3]=c.xmax;u[4]=c.ymax;u[5]=c.zmax;return u};l.fromMinMax=function(c,u,D=q()){D[0]=c[0];D[1]=c[1];D[2]=c[2];D[3]=u[0];D[4]=u[1];D[5]=u[2];return D};l.fromRect=function(c,u){c[0]=u[0];c[1]=u[1];c[2]=Number.NEGATIVE_INFINITY;c[3]=u[2];c[4]=u[3];c[5]=Number.POSITIVE_INFINITY;return c};l.fromValues=
n;l.getMax=function(c,u){u[0]=c[3];u[1]=c[4];u[2]=c[5];return u};l.getMin=function(c,u){u[0]=c[0];u[1]=c[1];u[2]=c[2];return u};l.height=m;l.intersects=r;l.intersectsClippingArea=function(c,u){return b.isNone(u)?!0:r(c,u)};l.is=Q;l.isPoint=function(c){return 0===g(c)&&0===G(c)&&0===m(c)};l.maximumDimension=function(c){return Math.max(g(c),m(c),G(c))};l.offset=function(c,u,D,L,A=c){A[0]=c[0]+u;A[1]=c[1]+D;A[2]=c[2]+L;A[3]=c[3]+u;A[4]=c[4]+D;A[5]=c[5]+L;return A};l.scale=function(c,u,D=c){const L=c[0]+
g(c)/2,A=c[1]+G(c)/2,H=c[2]+m(c)/2;D[0]=L+(c[0]-L)*u;D[1]=A+(c[1]-A)*u;D[2]=H+(c[2]-H)*u;D[3]=L+(c[3]-L)*u;D[4]=A+(c[4]-A)*u;D[5]=H+(c[5]-H)*u;return D};l.set=C;l.setMax=function(c,u,D=c){D[3]=u[0];D[4]=u[1];D[5]=u[2];D!==c&&(D[0]=c[0],D[1]=c[1],D[2]=c[2]);return c};l.setMin=function(c,u,D=c){D[0]=u[0];D[1]=u[1];D[2]=u[2];D!==c&&(D[3]=c[3],D[4]=c[4],D[5]=c[5]);return D};l.size=function(c,u=[0,0,0]){u[0]=g(c);u[1]=G(c);u[2]=m(c);return u};l.toExtent=function(c,u){return isFinite(c[2])||isFinite(c[5])?
new B({xmin:c[0],xmax:c[3],ymin:c[1],ymax:c[4],zmin:c[2],zmax:c[5],spatialReference:u}):new B({xmin:c[0],xmax:c[3],ymin:c[1],ymax:c[4],spatialReference:u})};l.toRect=function(c,u){u||(u=N.create());u[0]=c[0];u[1]=c[1];u[2]=c[3];u[3]=c[4];return u};l.width=g;l.wrap=function(c,u,D,L,A,H){return n(c,u,D,L,A,H,O)};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../Extent"],
function(l,b,B,N,q){function n(E=z){return[E[0],E[1],E[2],E[3]]}function g(E,O){E!==O&&(E[0]=O[0],E[1]=O[1],E[2]=O[2],E[3]=O[3]);return E}function G(E){return N.isNone(E)||E[0]>=E[2]?0:E[2]-E[0]}function m(E){return E[1]>=E[3]?0:E[3]-E[1]}function r(E,O,c){return O>=E[0]&&c>=E[1]&&O<=E[2]&&c<=E[3]}function C(E){return null!=E&&4===E.length}const Q=[Infinity,Infinity,-Infinity,-Infinity],z=[0,0,0,0];l.NEGATIVE_INFINITY=Q;l.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];l.UNIT=[0,0,1,1];
l.ZERO=z;l.allFinite=function(E){for(let O=0;4>O;O++)if(!isFinite(E[O]))return!1;return!0};l.area=function(E){return G(E)*m(E)};l.center=function(E,O=[0,0]){O[0]=(E[0]+E[2])/2;O[1]=(E[1]+E[3])/2;return O};l.clone=function(E){return[E[0],E[1],E[2],E[3]]};l.contains=function(E,O){return O[0]>=E[0]&&O[2]<=E[2]&&O[1]>=E[1]&&O[3]<=E[3]};l.containsPoint=function(E,O){return r(E,O[0],O[1])};l.containsPointObject=function(E,O){return r(E,O.x,O.y)};l.containsPointWithMargin=function(E,O,c){return O[0]>=E[0]-
c&&O[1]>=E[1]-c&&O[0]<=E[2]+c&&O[1]<=E[3]+c};l.containsXY=r;l.copy=g;l.create=n;l.distance=function(E,O){const c=(E[1]+E[3])/2,u=Math.max(Math.abs(O[0]-(E[0]+E[2])/2)-G(E)/2,0);E=Math.max(Math.abs(O[1]-c)-m(E)/2,0);return Math.sqrt(u*u+E*E)};l.empty=function(E){return E?g(E,Q):n(Q)};l.equals=function(E,O){return C(E)&&C(O)?E[0]===O[0]&&E[1]===O[1]&&E[2]===O[2]&&E[3]===O[3]:E===O};l.expand=function(E,O,c){if(N.isNone(O))g(c,E);else if("length"in O)if(C(O))c[0]=Math.min(E[0],O[0]),c[1]=Math.min(E[1],
O[1]),c[2]=Math.max(E[2],O[2]),c[3]=Math.max(E[3],O[3]);else{if(2===O.length||3===O.length)c[0]=Math.min(E[0],O[0]),c[1]=Math.min(E[1],O[1]),c[2]=Math.max(E[2],O[0]),c[3]=Math.max(E[3],O[1])}else switch(O.type){case "extent":c[0]=Math.min(E[0],O.xmin);c[1]=Math.min(E[1],O.ymin);c[2]=Math.max(E[2],O.xmax);c[3]=Math.max(E[3],O.ymax);break;case "point":c[0]=Math.min(E[0],O.x),c[1]=Math.min(E[1],O.y),c[2]=Math.max(E[2],O.x),c[3]=Math.max(E[3],O.y)}};l.expandPointInPlace=function(E,O){O[0]<E[0]&&(E[0]=
O[0]);O[0]>E[2]&&(E[2]=O[0]);O[1]<E[1]&&(E[1]=O[1]);O[1]>E[3]&&(E[3]=O[1])};l.expandWithNestedArray=function(E,O,c=E){const u=O.length;let D=E[0],L=E[1],A=E[2];E=E[3];for(let H=0;H<u;H++){const I=O[H];D=Math.min(D,I[0]);L=Math.min(L,I[1]);A=Math.max(A,I[0]);E=Math.max(E,I[1])}c[0]=D;c[1]=L;c[2]=A;c[3]=E;return c};l.fromExtent=function(E,O=n()){O[0]=E.xmin;O[1]=E.ymin;O[2]=E.xmax;O[3]=E.ymax;return O};l.fromValues=function(E,O,c,u,D=n()){D[0]=E;D[1]=O;D[2]=c;D[3]=u;return D};l.height=m;l.intersection=
function(E,O,c){if(N.isNone(O))return g(c,E);const u=O[0],D=O[1],L=O[2];O=O[3];c[0]=B.clamp(E[0],u,L);c[1]=B.clamp(E[1],D,O);c[2]=B.clamp(E[2],u,L);c[3]=B.clamp(E[3],D,O);return c};l.intersects=function(E,O){return Math.max(O[0],E[0])<=Math.min(O[2],E[2])&&Math.max(O[1],E[1])<=Math.min(O[3],E[3])};l.is=C;l.isPoint=function(E){return(0===G(E)||!isFinite(E[0]))&&(0===m(E)||!isFinite(E[1]))};l.offset=function(E,O,c,u=E){u[0]=E[0]+O;u[1]=E[1]+c;u[2]=E[2]+O;u[3]=E[3]+c;return u};l.pad=function(E,O,c=E){c[0]=
E[0]-O;c[1]=E[1]-O;c[2]=E[2]+O;c[3]=E[3]+O;return c};l.setMax=function(E,O,c=E){c[2]=O[0];c[3]=O[1];c!==E&&(c[0]=E[0],c[1]=E[1]);return E};l.setMin=function(E,O,c=E){c[0]=O[0];c[1]=O[1];c!==E&&(c[2]=E[2],c[3]=E[3]);return c};l.size=function(E,O){O[0]=E[2]-E[0];O[1]=E[3]-E[1]};l.toExtent=function(E,O){return new q({xmin:E[0],ymin:E[1],xmax:E[2],ymax:E[3],spatialReference:O})};l.width=G;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),
function(l,b,B,N,q,n,g,G){function m(v,P){return v?P?4:3:P?3:2}function r(v,P,X,Y){if(v){if(X)return P&&Y?f:Ra;if(P&&Y)return gb}else if(P&&Y)return Ra;return Ca}function C({scale:v,translate:P},X){return Math.round((X-P[0])/v[0])}function Q({scale:v,translate:P},X){return Math.round((P[1]-X)/v[1])}function z({scale:v,translate:P},X){return X*v[0]+P[0]}function E({scale:v,translate:P},X){return P[1]-X*v[1]}function O(v){v=v.coords;return{x:v[0],y:v[1]}}function c(v,P){v.coords[0]=P.x;v.coords[1]=
P.y;return v}function u(v){v=v.coords;return{x:v[0],y:v[1],z:v[2]}}function D(v,P){v.coords[0]=P.x;v.coords[1]=P.y;v.coords[2]=P.z;return v}function L(v){v=v.coords;return{x:v[0],y:v[1],m:v[2]}}function A(v,P){v.coords[0]=P.x;v.coords[1]=P.y;v.coords[2]=P.m;return v}function H(v){v=v.coords;return{x:v[0],y:v[1],z:v[2],m:v[3]}}function I(v,P){v.coords[0]=P.x;v.coords[1]=P.y;v.coords[2]=P.z;v.coords[3]=P.m;return v}function W(v,P){return v&&P?I:v?D:P?A:c}function M(v,P,X,Y,ha){X=W(X,Y);for(const ea of P){const {geometry:R,
attributes:V}=ea;let ca;R&&(ca=X(new G,R));v.push(new n["default"](ca,V,null,V[ha]))}return v}function k(v,P,X,Y){for(const ha of P){const {geometry:ea,attributes:R}=ha;let V;ea&&(V=t(ea,X,Y));v.push({attributes:R,geometry:V})}return v}function t(v,P,X){if(N.isNone(v))return null;const Y=m(P,X),ha=[];for(let ea=0;ea<v.coords.length;ea+=Y){const R=[];for(let V=0;V<Y;V++)R.push(v.coords[ea+V]);ha.push(R)}return P?X?{points:ha,hasZ:P,hasM:X}:{points:ha,hasZ:P}:X?{points:ha,hasM:X}:{points:ha}}function e(v,
P,X,Y,ha){X=m(X,Y);for(const ea of P){P=ea.geometry;Y=ea.attributes;let R;P&&(R=x(new G,P,X));v.push(new n["default"](R,Y,null,Y[ha]))}return v}function x(v,P,X=m(P.hasZ,P.hasM)){v.lengths[0]=P.points.length;const Y=v.coords;let ha=0;for(const ea of P.points)for(P=0;P<X;P++)Y[ha++]=ea[P];return v}function F(v,P,X){if(!v)return null;const Y=m(P,X),{coords:ha,lengths:ea}=v;v=[];let R=0;for(const V of ea){const ca=[];for(let ma=0;ma<V;ma++){const na=[];for(let ta=0;ta<Y;ta++)na.push(ha[R++]);ca.push(na)}v.push(ca)}return P?
X?{paths:v,hasZ:P,hasM:X}:{paths:v,hasZ:P}:X?{paths:v,hasM:X}:{paths:v}}function K(v,P,X,Y,ha){X=m(X,Y);for(const ea of P){P=ea.geometry;Y=ea.attributes;let R;P&&(R=h(new G,P,X));v.push(new n["default"](R,Y,null,Y[ha]))}return v}function h(v,P,X=m(P.hasZ,P.hasM)){const {lengths:Y,coords:ha}=v;let ea=0;for(const R of P.paths){for(const V of R)for(P=0;P<X;P++)ha[ea++]=V[P];Y.push(R.length)}return v}function p(v,P,X){if(!v)return null;const Y=m(P,X),{coords:ha,lengths:ea}=v;v=[];let R=0;for(const V of ea){const ca=
[];for(let ma=0;ma<V;ma++){const na=[];for(let ta=0;ta<Y;ta++)na.push(ha[R++]);ca.push(na)}v.push(ca)}return P?X?{rings:v,hasZ:P,hasM:X}:{rings:v,hasZ:P}:X?{rings:v,hasM:X}:{rings:v}}function J(v,P,X,Y,ha){for(const ea of P){P=ea.geometry;const R=ea.centroid,V=ea.attributes;let ca;P&&(ca=U(new G,P,X,Y));N.isSome(R)?v.push(new n["default"](ca,V,c(new G,R),V[ha])):v.push(new n["default"](ca,V,null,V[ha]))}return v}function U(v,P,X=P.hasZ,Y=P.hasM){da(v,P.rings,X,Y);return v}function da(v,P,X,Y){X=m(X,
Y);const {lengths:ha,coords:ea}=v;Y=0;ha.length=ea.length=0;for(const R of P){for(const V of R)for(P=0;P<X;P++)ea[Y++]=V[P];ha.push(R.length)}return v}function ja(v,P,X,Y,ha,ea){v.length=0;if(!X){for(const R of P)v.push(new n["default"](null,R.attributes,null,R.attributes[ea]));return v}switch(X){case "esriGeometryPoint":return M(v,P,Y,ha,ea);case "esriGeometryMultipoint":return e(v,P,Y,ha,ea);case "esriGeometryPolyline":return K(v,P,Y,ha,ea);case "esriGeometryPolygon":return J(v,P,Y,ha,ea);default:Ta.error("convertToFeatureSet:unknown-geometry",
new b(`Unable to parse unknown geometry type '${X}'`)),v.length=0}return v}function ka(v,P,X,Y){v=v&&("coords"in v?v:v.geometry);if(N.isNone(v))return null;switch(P){case "esriGeometryPoint":return P=O,X&&Y?P=H:X?P=u:Y&&(P=L),P(v);case "esriGeometryMultipoint":return t(v,X,Y);case "esriGeometryPolyline":return F(v,X,Y);case "esriGeometryPolygon":return p(v,X,Y);default:Ta.error("convertToGeometry:unknown-geometry",new b(`Unable to parse unknown geometry type '${P}'`))}}function oa(v,P,X,Y,ha){v.length=
0;if(N.isNone(X)){for(const V of P)v.push({attributes:V.attributes});return v}switch(X){case "esriGeometryPoint":var ea=O;Y&&ha?ea=H:Y?ea=u:ha&&(ea=L);for(var R of P){const {geometry:V,attributes:ca}=R;Y=N.isSome(V)?ea(V):null;v.push({attributes:ca,geometry:Y})}break;case "esriGeometryMultipoint":return k(v,P,Y,ha);case "esriGeometryPolyline":for(const V of P){const {geometry:ca,attributes:ma}=V;let na;N.isSome(ca)&&(na=F(ca,Y,ha));v.push({attributes:ma,geometry:na})}break;case "esriGeometryPolygon":for(ea of P){const {geometry:V,
attributes:ca,centroid:ma}=ea;let na;N.isSome(V)&&(na=p(V,Y,ha));ma?(R=O(ma),v.push({attributes:ca,centroid:R,geometry:na})):v.push({attributes:ca,geometry:na})}break;default:Ta.error("convertToFeatureSet:unknown-geometry",new b(`Unable to parse unknown geometry type '${X}'`))}return v}function ua(v,P,X,Y,ha,ea,R=X,V=Y){v.lengths.length&&(v.lengths.length=0);v.coords.length&&(v.coords.length=0);if(N.isNone(P)||!P.coords.length)return null;ha=Ka[ha];const {coords:ca,lengths:ma}=P;P=m(X,Y);const na=
m(X&&R,Y&&V);X=r(X,Y,R,V);if(!ma.length)return X(v.coords,ca,0,0,C(ea,ca[0]),Q(ea,ca[1])),v.lengths.length&&(v.lengths.length=0),v.coords.length=P,v;let ta,wa=0,ya,Ia=0;for(const Fa of ma){if(Fa<ha)continue;let Ea=0;ya=Ia;V=Y=C(ea,ca[wa]);ta=R=Q(ea,ca[wa+1]);X(v.coords,ca,ya,wa,V,ta);Ea++;wa+=P;ya+=na;for(let za=1;za<Fa;za++,wa+=P)if(V=C(ea,ca[wa]),ta=Q(ea,ca[wa+1]),V!==Y||ta!==R)X(v.coords,ca,ya,wa,V-Y,ta-R),ya+=na,Ea++,Y=V,R=ta;Ea>=ha&&(v.lengths.push(Ea),Ia=ya)}v.coords.length=Ia;return v.coords.length?
v:null}function ra(v,P,X,Y,ha,ea,R){let V=Y,ca=0;for(let na=ea+X;na<R;na+=X){{var ma=P[na];const ta=P[na+1],wa=P[R],ya=P[R+1];let Ia=P[ea],Fa=P[ea+1],Ea=wa-Ia,za=ya-Fa;if(0!==Ea||0!==za){const Da=((ma-Ia)*Ea+(ta-Fa)*za)/(Ea*Ea+za*za);1<Da?(Ia=wa,Fa=ya):0<Da&&(Ia+=Ea*Da,Fa+=za*Da)}Ea=ma-Ia;za=ta-Fa;ma=Ea*Ea+za*za}ma>V&&(ca=na,V=ma)}V>Y&&(ca-ea>X&&ra(v,P,X,Y,ha,ea,ca),ha(v,P,v.length,ca,P[ca],P[ca+1]),R-ca>X&&ra(v,P,X,Y,ha,ca,R))}function Aa(v,P,X,Y,ha){const {coords:ea,lengths:R}=P,V=X?Y?f:Ra:Y?Ra:
Ca;X=m(X,Y);if(!ea.length)return v!==P&&(v.lengths.length=0,v.coords.length=0),v;if(!R.length)return V(v.coords,ea,0,0,z(ha,ea[0]),E(ha,ea[1])),v!==P&&(v.lengths.length=0,v.coords.length=X),v;const [ca,ma]=ha.scale;Y=0;for(let na=0;na<R.length;na++){const ta=R[na];v.lengths[na]=ta;let wa=z(ha,ea[Y]),ya=E(ha,ea[Y+1]);V(v.coords,ea,Y,Y,wa,ya);Y+=X;for(let Ia=1;Ia<ta;Ia++,Y+=X)wa+=ea[Y]*ca,ya-=ea[Y+1]*ma,V(v.coords,ea,Y,Y,wa,ya)}v!==P&&(v.lengths.length=R.length,v.coords.length=ea.length);return v}function Na(v,
P,X,Y){let ha=0,ea=v[Y*P],R=v[Y*(P+1)];for(let V=1;V<X;V++){const ca=ea+v[Y*(P+V)],ma=R+v[Y*(P+V)+1],na=(ca-ea)*(ma+R);ea=ca;R=ma;ha+=na}return.5*ha}const Ta=B.getLogger("esri.tasks.support.optimizedFeatureSet"),Ka={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},Ca=(v,P,X,Y,ha,ea)=>{v[X]=ha;v[X+1]=ea},Ra=(v,P,X,Y,ha,ea)=>{v[X]=ha;v[X+1]=ea;v[X+2]=P[Y+2]},gb=(v,P,X,Y,ha,ea)=>{v[X]=ha;v[X+1]=ea;v[X+2]=P[Y+3]},f=(v,P,X,Y,ha,ea)=>{v[X]=ha;v[X+1]=ea;v[X+2]=P[Y+
2];v[X+3]=P[Y+3]},y=[],ba=[];l.convertFromFeature=function(v,P,X,Y,ha){y[0]=v;[v]=ja(ba,y,P,X,Y,ha);y.length=ba.length=0;return v};l.convertFromFeatureSet=function(v,P){const X=new g,{hasM:Y,hasZ:ha,features:ea,objectIdFieldName:R,spatialReference:V,geometryType:ca,exceededTransferLimit:ma,transform:na,fields:ta}=v;ta&&(X.fields=ta);X.geometryType=ca;X.objectIdFieldName=R||P;X.spatialReference=V;if(!X.objectIdFieldName)return Ta.error(new b("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),
X;ea&&ja(X.features,ea,ca,ha,Y,X.objectIdFieldName);ma&&(X.exceededTransferLimit=ma);Y&&(X.hasM=Y);ha&&(X.hasZ=ha);na&&(X.transform=na);return X};l.convertFromFeatures=ja;l.convertFromGeometry=function(v,P,X){if(N.isNone(v))return null;const Y=new G;"hasZ"in v&&null==P&&(P=v.hasZ);"hasM"in v&&null==X&&(X=v.hasM);if(q.isPoint(v))return W(null!=P?P:null!=v.z,null!=X?X:null!=v.m)(Y,v);if(q.isPolygon(v))return U(Y,v,P,X);if(q.isPolyline(v))return h(Y,v,m(P,X));if(q.isMultipoint(v))return x(Y,v,m(P,X));
Ta.error("convertFromGeometry:unknown-geometry",new b(`Unable to parse unknown geometry type '${v}'`))};l.convertFromGraphics=function(v,P,X,Y,ha,ea){const R=v.length;switch(X){case "esriGeometryPoint":M(v,P,Y,ha,ea);break;case "esriGeometryMultipoint":e(v,P,Y,ha,ea);break;case "esriGeometryPolyline":K(v,P,Y,ha,ea);break;case "esriGeometryPolygon":J(v,P,Y,ha,ea);break;default:Ta.error("convertToFeatureSet:unknown-geometry",new b(`Unable to parse unknown geometry type '${X}'`))}for(Y=0;Y<P.length;Y++)v[Y+
R].geometryType=X,v[Y+R].insertAfter=P[Y].insertAfter,v[Y+R].groupId=P[Y].groupId;return v};l.convertFromMultipoint=x;l.convertFromMultipointFeatures=e;l.convertFromNestedArray=da;l.convertFromPoint=function(v,P,X=W(null!=P.z,null!=P.m)){return X(v,P)};l.convertFromPointFeatures=M;l.convertFromPolygon=U;l.convertFromPolyline=h;l.convertFromPolylineFeatures=K;l.convertToFeature=function(v,P,X,Y){ba[0]=v;oa(y,ba,P,X,Y);v=y[0];y.length=ba.length=0;return v};l.convertToFeatureSet=function(v){const {objectIdFieldName:P,
spatialReference:X,transform:Y,fields:ha,hasM:ea,hasZ:R,features:V,geometryType:ca,exceededTransferLimit:ma,uniqueIdField:na,queryGeometry:ta,queryGeometryType:wa}=v;v=oa([],V,ca,R,ea);const ya=ka(ta,wa,!1,!1);v={features:v,fields:ha,geometryType:ca,objectIdFieldName:P,spatialReference:X,uniqueIdField:na,queryGeometry:ya};Y&&(v.transform=Y);ma&&(v.exceededTransferLimit=ma);ea&&(v.hasM=ea);R&&(v.hasZ=R);return v};l.convertToFeatures=oa;l.convertToGeometry=ka;l.convertToMultipoint=t;l.convertToMultipointFeatures=
k;l.convertToPoint=function(v,P,X){return v?P?X?H(v):u(v):X?L(v):O(v):null};l.convertToPolygon=p;l.convertToPolyline=F;l.deltaDecodeGeometry=function(v,P){if(N.isNone(v))return null;const X=v.clone(),Y=v.coords;v=v.lengths;let ha=0;for(let V=0;V<v.length;V++){const ca=v[V];var ea=Y[P*ha],R=Y[P*ha+1];for(let ma=1;ma<ca;ma++)ea+=Y[P*(ha+ma)],R+=Y[P*(ha+ma)+1],X.coords[P*(ha+ma)]=ea,X.coords[P*(ha+ma)+1]=R;ha+=ca}return X};l.deltaEncodeGeometry=function(v,P){const X=v.clone(),Y=v.coords;v=v.lengths;
let ha=0;for(let R=0;R<v.length;R++){const V=v[R];let ca=Y[P*ha];var ea=Y[P*ha+1];for(let ma=1;ma<V;ma++){const na=Y[P*(ha+ma)],ta=Y[P*(ha+ma)+1];ea=ta-ea;X.coords[P*(ha+ma)]=na-ca;X.coords[P*(ha+ma)+1]=ea;ca=na;ea=ta}ha+=V}return X};l.generalizeOptimizedGeometry=function(v,P,X,Y,ha,ea,R=X,V=Y){v.lengths.length&&(v.lengths.length=0);v.coords.length&&(v.coords.length=0);if(!P||!P.coords.length)return null;ha=Ka[ha];const {coords:ca,lengths:ma}=P;P=m(X,Y);const na=m(X&&R,Y&&V);X=r(X,Y,R,V);if(!ma.length)return X(v.coords,
ca,0,0,ca[0],ca[1]),v.lengths.length&&(v.lengths.length=0),v.coords.length=P,v;Y=0;ea*=ea;for(const ta of ma){if(ta<ha){Y+=ta*P;continue}R=v.coords.length/na;V=Y;const wa=Y+(ta-1)*P;X(v.coords,ca,v.coords.length,V,ca[V],ca[V+1]);ra(v.coords,ca,P,ea,X,V,wa);X(v.coords,ca,v.coords.length,wa,ca[wa],ca[wa+1]);V=v.coords.length/na-R;V>=ha?v.lengths.push(V):v.coords.length=R*na;Y+=ta*P}return v.coords.length?v:null};l.getBoundsOptimizedGeometry=function(v,P,X,Y){if(N.isNone(P)||!P.coords||!P.coords.length)return null;
X=m(X,Y);let ha=Y=Number.POSITIVE_INFINITY,ea=Number.NEGATIVE_INFINITY,R=Number.NEGATIVE_INFINITY;if(P&&P.coords){P=P.coords;for(let V=0;V<P.length;V+=X){const ca=P[V],ma=P[V+1];Y=Math.min(Y,ca);ea=Math.max(ea,ca);ha=Math.min(ha,ma);R=Math.max(R,ma)}}v[0]=Y;v[1]=ha;v[2]=ea;v[3]=R;return v};l.getQuantizedArea=function(v,P){const {coords:X,lengths:Y}=v;let ha=v=0;for(let ea=0;ea<Y.length;ea++)ha+=Na(X,v,Y[ea],P),v+=ea;return Math.abs(ha)};l.getQuantizedBoundsOptimizedGeometry=function(v,P,X,Y){X=m(X,
Y);const {lengths:ha,coords:ea}=P;Y=P=Number.POSITIVE_INFINITY;let R=Number.NEGATIVE_INFINITY,V=Number.NEGATIVE_INFINITY,ca=0;for(const ma of ha){let na=ea[ca],ta=ea[ca+1];P=Math.min(na,P);Y=Math.min(ta,Y);R=Math.max(na,R);V=Math.max(ta,V);ca+=X;for(let wa=1;wa<ma;wa++,ca+=X){const ya=ea[ca],Ia=ea[ca+1];na+=ya;ta+=Ia;0>ya&&(P=Math.min(P,na));0<ya&&(R=Math.max(R,na));0>Ia?Y=Math.min(Y,ta):0<Ia&&(V=Math.max(V,ta))}}v[0]=P;v[1]=Y;v[2]=R;v[3]=V;return v};l.getSignedQuantizedRingArea=Na;l.quantizeOptimizedFeatureSet=
function(v,P){const {geometryType:X,features:Y,hasM:ha,hasZ:ea}=P;if(!v)return P;for(let R=0;R<Y.length;R++){const V=Y[R],ca=V.weakClone();ca.geometry=new G;ua(ca.geometry,V.geometry,ha,ea,X,v);V.centroid&&(ca.centroid=new G,ua(ca.centroid,V.centroid,ha,ea,"esriGeometryPoint",v));Y[R]=ca}P.transform=v;return P};l.quantizeOptimizedGeometry=ua;l.quantizeX=C;l.quantizeY=Q;l.removeCollinearVectices=function(v,P,X,Y,ha){if(!P||!P.coords||!P.coords.length)return null;X=Ka[X];const {coords:ea,lengths:R}=
P;P=r(Y,ha,Y,ha);Y=m(Y,ha);let V=ha=0,ca=0,ma=0;for(const wa of R){V=ma;P(v.coords,ea,V,ha,ea[ha],ea[ha+1]);ha+=Y;var na=ea[ha];let ya=ea[ha+1],Ia=na,Fa=ya;var ta=ya/na;V+=Y;P(v.coords,ea,V,ha,Ia,Fa);ha+=Y;for(let Ea=2;Ea<wa;Ea++){na=ea[ha];ya=ea[ha+1];const za=ya/na,Da=ta===za||!isFinite(ta)&&!isFinite(za);ta=Da&&isFinite(za)?0<=ta&&0<=za||0>=ta&&0>=za:0<=Fa&&0<=ya||0>=Fa&&0>=ya;Da&&ta?(Ia+=na,Fa+=ya):(Ia=na,Fa=ya,V+=Y);P(v.coords,ea,V,ha,Ia,Fa);ha+=Y;ta=za}V+=Y;na=(V-ma)/Y;na>=X&&(v.lengths[ca]=
na,ma=V,ca++)}v.coords.length>ma&&(v.coords.length=ma);v.lengths.length>ca&&(v.lengths.length=ca);return v.coords.length&&v.lengths.length?v:null};l.removeZMValues=function(v,P,X,Y,ha,ea){const R=m(X,Y);X=r(X,Y,ha,ea);Y=P.coords;v.coords.length=0;v.lengths.length=0;v.lengths.push(...P.lengths);for(P=0;P<Y.length;P+=R)X(v.coords,Y,v.coords.length,P,Y[P],Y[P+1]);return v};l.unquantizeOptimizedFeatureSet=function(v){const {transform:P,features:X,hasM:Y,hasZ:ha}=v;if(!P)return v;for(const ea of X)N.isSome(ea.geometry)&&
Aa(ea.geometry,ea.geometry,Y,ha,P),ea.centroid&&Aa(ea.centroid,ea.centroid,Y,ha,P);v.transform=null;return v};l.unquantizeOptimizedGeometry=Aa;l.unquantizeX=z;l.unquantizeY=E;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe"],function(l,b,B){let N=function(){function n(g=null,G={},m,r){this.geometry=g;this.attributes=G;this.centroid=m;this.objectId=r;this.geohashY=this.geohashX=
this.displayId=0}n.prototype.weakClone=function(){const g=new n(this.geometry,this.attributes,this.centroid,this.objectId);g.displayId=this.displayId;g.geohashX=this.geohashX;g.geohashY=this.geohashY;return g};return n}(),q=function(n){function g(){return n.apply(this,arguments)||this}b._inheritsLoose(g,n);return g}(N);l.OptimizedFeatureWithGeometry=q;l["default"]=N;l.hasGeometry=function(n){return!(B.isNone(n.geometry)||!n.geometry.coords||!n.geometry.coords.length)};Object.defineProperty(l,"__esModule",
{value:!0})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function l(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}l.prototype.weakClone=function(){const b=new l;b.objectIdFieldName=this.objectIdFieldName;
b.globalIdFieldName=this.globalIdFieldName;b.geohashFieldName=this.geohashFieldName;b.geometryProperties=this.geometryProperties;b.geometryType=this.geometryType;b.spatialReference=this.spatialReference;b.hasZ=this.hasZ;b.hasM=this.hasM;b.features=this.features;b.fields=this.fields;b.transform=this.transform;b.exceededTransferLimit=this.exceededTransferLimit;b.uniqueIdField=this.uniqueIdField;b.queryGeometry=this.queryGeometry;b.queryGeometryType=this.queryGeometryType;return b};return l}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],
function(l){return function(){function b(N=[],q=[],n=!1){this.lengths=null!=N?N:[];this.coords=null!=q?q:[];this.hasIndeterminateRingOrder=n}var B=b.prototype;B.forEachVertex=function(N){let q=0;this.lengths.length||N(this.coords[0],this.coords[1]);for(let n=0;n<this.lengths.length;n++){const g=this.lengths[n];for(let G=0;G<g;G++)N(this.coords[2*(G+q)],this.coords[2*(G+q)+1]);q+=g}};B.clone=function(N){return N?(N.set(this.coords),new b(this.lengths.slice(),N,this.hasIndeterminateRingOrder)):new b(this.lengths.slice(),
this.coords.slice(),this.hasIndeterminateRingOrder)};l._createClass(b,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},{key:"size",get:function(){return this.lengths.reduce((N,q)=>N+q)}}]);return b}()})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../core/has","../../../core/libs/rbush/PooledRBush"],function(l,b,B){function N(g,G,m){q.minX=G[0];q.minY=G[1];q.maxX=G[2];q.maxY=G[3];g.search(q,
m)}const q={minX:0,minY:0,maxX:0,maxY:0};let n=function(){function g(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new B.PooledRBush(9,b("csp-restrictions")?m=>({minX:m[0],minY:m[1],maxX:m[2],maxY:m[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const m=Array(this._idByBounds.size);let r=0;this._idByBounds.forEach((C,Q)=>{m[r++]=Q});this._indexInvalid=!1;this._index.clear();this._index.load(m)}else this._boundsToLoad.length&&
(this._index.load(this._boundsToLoad.filter(m=>this._idByBounds.has(m))),this._boundsToLoad.length=0)}}var G=g.prototype;G.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};G.delete=function(m){const r=this._boundsById.get(m);this._boundsById.delete(m);r&&(this._idByBounds.delete(r),this._indexInvalid||this._index.remove(r))};G.forEachInBounds=function(m,r){this._loadIndex();N(this._index,m,C=>r(this._idByBounds.get(C)))};
G.get=function(m){return this._boundsById.get(m)};G.has=function(m){return this._boundsById.has(m)};G.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};G.set=function(m,r){if(!this._indexInvalid){const C=this._boundsById.get(m);C&&(this._index.remove(C),this._idByBounds.delete(C))}this._boundsById.set(m,r);r&&(this._idByBounds.set(r,m),this._indexInvalid||(this._boundsToLoad.push(r),5E4<this._boundsToLoad.length&&this._loadIndex()))};return g}();l.BoundsStore=
n;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),function(l,b,B,N,q,n){function g(k,t){G(k,0,k.children.length,t,k)}function G(k,t,e,x,F){F||(F=new W([]));F.minX=Infinity;F.minY=Infinity;F.maxX=-Infinity;F.maxY=-Infinity;for(let K=t,h;K<e;K++)h=k.children[K],m(F,k.leaf?x(h):h);return F}function m(k,t){k.minX=
Math.min(k.minX,t.minX);k.minY=Math.min(k.minY,t.minY);k.maxX=Math.max(k.maxX,t.maxX);k.maxY=Math.max(k.maxY,t.maxY)}function r(k,t){return k.minX-t.minX}function C(k,t){return k.minY-t.minY}function Q(k){return(k.maxX-k.minX)*(k.maxY-k.minY)}function z(k){return k.maxX-k.minX+(k.maxY-k.minY)}function E(k,t){return k.minX<=t.minX&&k.minY<=t.minY&&t.maxX<=k.maxX&&t.maxY<=k.maxY}function O(k,t){return t.minX<=k.maxX&&t.minY<=k.maxY&&t.maxX>=k.minX&&t.maxY>=k.minY}function c(k,t,e,x,F){for(t=[t,e];t.length;){e=
N.assumeNonNull(t.pop());const K=N.assumeNonNull(t.pop());if(e-K<=x)continue;const h=K+Math.ceil((e-K)/x/2)*x;n.quickselect(k,h,K,e,F);t.push(K,h,h,e)}}let u=function(){function k(e=9,x){this.compareMinX=r;this.compareMinY=C;this.toBBox=function(F){return F};this._maxEntries=Math.max(4,e||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));x&&("function"===typeof x?this.toBBox=x:this._initFormat(x));this.clear()}var t=k.prototype;t.destroy=function(){this.clear();D.prune();L.prune();A.prune();
H.prune()};t.all=function(e){this._all(this.data,e)};t.search=function(e,x){let F=this.data;const K=this.toBBox;if(O(e,F))for(D.clear();F;){for(let h=0,p=F.children.length;h<p;h++){const J=F.children[h],U=F.leaf?K(J):J;O(e,U)&&(F.leaf?x(J):E(e,U)?this._all(J,x):D.push(J))}F=D.pop()}};t.collides=function(e){let x=this.data;const F=this.toBBox;if(!O(e,x))return!1;for(D.clear();x;){for(let K=0,h=x.children.length;K<h;K++){const p=x.children[K],J=x.leaf?F(p):p;if(O(e,J)){if(x.leaf||E(e,J))return!0;D.push(p)}}x=
D.pop()}return!1};t.load=function(e){if(!e.length)return this;if(e.length<this._minEntries){for(let x=0,F=e.length;x<F;x++)this.insert(e[x]);return this}e=this._build(e.slice(0,e.length),0,e.length-1,0);if(this.data.children.length)if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const x=this.data;this.data=e;e=x}this._insert(e,this.data.height-e.height-1,!0)}else this.data=e;return this};t.insert=function(e){e&&this._insert(e,this.data.height-1);return this};
t.clear=function(){this.data=new W([]);return this};t.remove=function(e){if(!e)return this;let x=this.data,F=null,K=0,h=!1,p;const J=this.toBBox(e);A.clear();for(H.clear();x||0<A.length;){if(!x){var U;x=N.assumeNonNull(A.pop());F=A.data[A.length-1];K=null!=(U=H.pop())?U:0;h=!0}if(x.leaf&&(p=B.indexOf(x.children,e,x.children.length,x.indexHint),-1!==p)){x.children.splice(p,1);A.push(x);this._condense(A);break}h||x.leaf||!E(x,J)?F?(K++,x=F.children[K],h=!1):x=null:(A.push(x),H.push(K),K=0,F=x,x=x.children[0])}return this};
t.toJSON=function(){return this.data};t.fromJSON=function(e){this.data=e;return this};t._all=function(e,x){for(L.clear();e;){var F;if(!0===e.leaf)for(const K of e.children)x(K);else L.pushArray(e.children);e=null!=(F=L.pop())?F:null}};t._build=function(e,x,F,K){var h=F-x+1,p=this._maxEntries;if(h<=p)return e=new W(e.slice(x,F+1)),g(e,this.toBBox),e;K||(K=Math.ceil(Math.log(h)/Math.log(p)),p=Math.ceil(h/p**(K-1)));const J=new M([]);J.height=K;h=Math.ceil(h/p);p=h*Math.ceil(Math.sqrt(p));for(c(e,x,
F,p,this.compareMinX);x<=F;x+=p){const U=Math.min(x+p-1,F);c(e,x,U,h,this.compareMinY);for(let da=x;da<=U;da+=h)J.children.push(this._build(e,da,Math.min(da+h-1,U),K-1))}g(J,this.toBBox);return J};t._chooseSubtree=function(e,x,F,K){for(;;){K.push(x);if(!0===x.leaf||K.length-1===F)break;let h=Infinity,p=Infinity,J=void 0;for(let U=0,da=x.children.length;U<da;U++){const ja=x.children[U],ka=Q(ja),oa=(Math.max(ja.maxX,e.maxX)-Math.min(ja.minX,e.minX))*(Math.max(ja.maxY,e.maxY)-Math.min(ja.minY,e.minY))-
ka;oa<p?(p=oa,h=ka<h?ka:h,J=ja):oa===p&&ka<h&&(h=ka,J=ja)}x=J||x.children[0]}return x};t._insert=function(e,x,F){var K=this.toBBox;F=F?e:K(e);A.clear();K=this._chooseSubtree(F,this.data,x,A);K.children.push(e);for(m(K,F);0<=x;)if(A.data[x].children.length>this._maxEntries)this._split(A,x),x--;else break;this._adjustParentBBoxes(F,A,x)};t._split=function(e,x){const F=e.data[x];var K=F.children.length;const h=this._minEntries;this._chooseSplitAxis(F,h,K);(K=this._chooseSplitIndex(F,h,K))?(K=F.children.splice(K,
F.children.length-K),K=F.leaf?new W(K):new M(K),K.height=F.height,g(F,this.toBBox),g(K,this.toBBox),x?e.data[x-1].children.push(K):this._splitRoot(F,K)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};t._splitRoot=function(e,x){this.data=new M([e,x]);this.data.height=e.height+1;g(this.data,this.toBBox)};t._chooseSplitIndex=function(e,x,F){let K,h,p=void 0;K=h=Infinity;for(let U=x;U<=F-x;U++){var J=G(e,0,U,this.toBBox);const da=G(e,U,F,this.toBBox),ja=Math.max(0,
Math.min(J.maxX,da.maxX)-Math.max(J.minX,da.minX))*Math.max(0,Math.min(J.maxY,da.maxY)-Math.max(J.minY,da.minY));J=Q(J)+Q(da);ja<K?(K=ja,p=U,h=J<h?J:h):ja===K&&J<h&&(h=J,p=U)}return p};t._chooseSplitAxis=function(e,x,F){const K=e.leaf?this.compareMinX:r,h=e.leaf?this.compareMinY:C,p=this._allDistMargin(e,x,F,K);x=this._allDistMargin(e,x,F,h);p<x&&e.children.sort(K)};t._allDistMargin=function(e,x,F,K){e.children.sort(K);K=this.toBBox;var h=G(e,0,x,K);const p=G(e,F-x,F,K);let J=z(h)+z(p);for(let U=
x;U<F-x;U++){const da=e.children[U];m(h,e.leaf?K(da):da);J+=z(h)}for(F=F-x-1;F>=x;F--)h=e.children[F],m(p,e.leaf?K(h):h),J+=z(p);return J};t._adjustParentBBoxes=function(e,x,F){for(;0<=F;F--)m(x.data[F],e)};t._condense=function(e){for(let x=e.length-1;0<=x;x--){const F=e.data[x];if(0===F.children.length)if(0<x){const K=e.data[x-1],h=K.children;h.splice(B.indexOf(h,F,h.length,K.indexHint),1)}else this.clear();else g(F,this.toBBox)}};t._initFormat=function(e){const x=["return a"," - b",";"];this.compareMinX=
new Function("a","b",x.join(e[0]));this.compareMinY=new Function("a","b",x.join(e[1]));this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")};return k}();const D=new q,L=new q,A=new q,H=new q({deallocator:void 0});q=function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity};let I=function(k){function t(){var e=k.apply(this,arguments)||this;e.height=1;e.indexHint=new B.PositionHint;return e}b._inheritsLoose(t,k);return t}(q),W=function(k){function t(e){var x=
k.call(this)||this;x.children=e;x.leaf=!0;return x}b._inheritsLoose(t,k);return t}(I),M=function(k){function t(e){var x=k.call(this)||this;x.children=e;x.leaf=!1;return x}b._inheritsLoose(t,k);return t}(I);l.BBox=q;l.PooledRBush=u;l["default"]=u;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/chunks/quickselect":function(){define(["exports"],function(l){var b={exports:{}};(function(B){(function(N){N=N();void 0!==N&&(B.exports=N)})(function(){function N(g,G,m,r,C){for(;r>m;){if(600<r-m){var Q=
r-m+1,z=G-m+1,E=Math.log(Q),O=.5*Math.exp(2*E/3);E=.5*Math.sqrt(E*O*(Q-O)/Q)*(0>z-Q/2?-1:1);N(g,G,Math.max(m,Math.floor(G-z*O/Q+E)),Math.min(r,Math.floor(G+(Q-z)*O/Q+E)),C)}Q=g[G];z=m;O=r;q(g,m,G);for(0<C(g[r],Q)&&q(g,m,r);z<O;){q(g,z,O);z++;for(O--;0>C(g[z],Q);)z++;for(;0<C(g[O],Q);)O--}0===C(g[m],Q)?q(g,m,O):(O++,q(g,O,r));O<=G&&(m=O+1);G<=O&&(r=O-1)}}function q(g,G,m){var r=g[G];g[G]=g[m];g[m]=r}function n(g,G){return g<G?-1:g>G?1:0}return function(g,G,m,r,C){N(g,G,m||0,r||g.length-1,C||n)}})})(b);
l.quickselect=b.exports})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(l,b,B,N){const q={getObjectId(n){return n.objectId},getAttributes(n){return n.attributes},getAttribute(n,g){return n.attributes[g]},cloneWithGeometry(n,g){return new B["default"](g,n.attributes,null,n.objectId)},getGeometry(n){return n.geometry},getCentroid(n,g){n.centroid||(n.centroid=b.getCentroidOptimizedGeometry(new N,
n.geometry,g.hasZ,g.hasM));return n.centroid}};l["default"]=q;l.optimizedFeatureQueryEngineAdapter=q;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/centroid":function(){define(["exports","../../core/maybe"],function(l,b){function B(q,n,g,G,m,r,C=1){r=m?r?4:3:r?3:2;let Q=g,z=g+r,E=0,O=0,c=g=0,u=0;for(let D=0,L=G-1;D<L;D++,Q+=r,z+=r){G=n[Q];const A=n[Q+1],H=n[Q+2],I=n[z],W=n[z+1],M=n[z+2];let k=G*W-I*A;c+=k;E+=(G+I)*k;O+=(A+W)*k;m&&(k=G*M-I*H,g+=(H+M)*k,u+=k);G<q[0]&&(q[0]=
G);G>q[1]&&(q[1]=G);A<q[2]&&(q[2]=A);A>q[3]&&(q[3]=A);m&&(H<q[4]&&(q[4]=H),H>q[5]&&(q[5]=H))}0<c*C&&(c*=-1);0<u*C&&(u*=-1);if(!c)return null;q=[E,O,.5*c];m&&(q[3]=g,q[4]=.5*u);return q}function N(q,n,g,G,m){m=G?m?4:3:m?3:2;let r=n,C=n+m,Q=0,z=0,E=0,O=0;for(let L=0,A=g-1;L<A;L++,r+=m,C+=m){var c=q[r];const H=q[r+1],I=q[r+2],W=q[C],M=q[C+1],k=q[C+2];if(G){{var u=W-c;var D=M-H;const t=k-I;u=Math.sqrt(u*u+D*D+t*t)}}else u=W-c,D=M-H,u=Math.sqrt(u*u+D*D);u&&(Q+=u,G?(c=[c+.5*(W-c),H+.5*(M-H),I+.5*(k-I)],
z+=u*c[0],E+=u*c[1],O+=u*c[2]):(c=[c+.5*(W-c),H+.5*(M-H)],z+=u*c[0],E+=u*c[1]))}return 0<Q?G?[z/Q,E/Q,O/Q]:[z/Q,E/Q]:0<g?G?[q[n],q[n+1],q[n+2]]:[q[n],q[n+1]]:null}l.getCentroidOptimizedGeometry=function(q,n,g,G,m){if(b.isNone(n)||!n.lengths.length)return null;const r="upperLeft"===(null==m?void 0:m.originPosition)?-1:1;q.lengths.length&&(q.lengths.length=0);q.coords.length&&(q.coords.length=0);m=q.coords;const C=[],Q=g?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,
Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:z,coords:E}=n,O=g?G?4:3:G?3:2;let c=0;for(var u of z){const D=B(Q,E,c,u,g,G,r);D&&C.push(D);c+=u*O}C.sort((D,L)=>{let A=r*D[2]-r*L[2];0===A&&g&&(A=D[4]-L[4]);return A});C.length&&(u=6*C[0][2],m[0]=C[0][0]/u,m[1]=C[0][1]/u,g&&(u=6*C[0][4],m[2]=0!==u?C[0][3]/u:0),m[0]<Q[0]||m[0]>Q[1]||m[1]<Q[2]||m[1]>Q[3]||g&&(m[2]<Q[4]||m[2]>Q[5]))&&(m.length=
0);if(!m.length)if(n=n.lengths[0]?N(E,0,z[0],g,G):null)m[0]=n[0],m[1]=n[1],g&&2<n.length&&(m[2]=n[2]);else return null;return q};l.lineCentroid=N;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../support/PromiseQueue ../../../support/arcadeOnDemand".split(" "),
function(l,b,B,N,q,n,g,G,m,r,C,Q,z,E,O,c,u,D,L,A,H,I,W){function M(h){return h.every(p=>"exceedslimit"!==p.statisticType)}const k=new Set,t=new n.MemCacheStorage(2E6);let e=0,x=function(){function h(J){this.capabilities={query:c.queryCapabilities};this.geometryType=J.geometryType;this.hasM=J.hasM;this.hasZ=J.hasZ;this.objectIdField=J.objectIdField;this.spatialReference=J.spatialReference;this.definitionExpression=J.definitionExpression;this.featureStore=J.featureStore;this.aggregateAdapter=J.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=J.timeInfo;J.cacheSpatialQueries&&(this._geometryQueryCache=new n.MemCache(e++ +"$$",t));this.fieldsIndex=new H(J.fields);J.scheduler&&J.priority&&(this._frameQueue=new I,this._frameTask=J.scheduler.registerTask(J.priority,this))}var p=h.prototype;p.destroy=function(){this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._frameQueue.cancelAll(),this._frameQueue=null);this.clearCache();this._geometryQueryCache&&
this._geometryQueryCache.destroy();this._changeHandle&&(this._changeHandle.remove(),this._changeHandle=null);this.fieldsIndex.destroy()};p.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear();this._timeExtent=this._allItems=null};p.executeQuery=function(){var J=b._asyncToGenerator(function*(U={},da){let ja=N.clone(U),ka;try{ja=yield this._schedule(()=>A.normalizeQuery(ja,this.definitionExpression,this.spatialReference),da),ja=yield this._reschedule(()=>this._checkQuerySupport(ja),
da),ka=yield this._reschedule(()=>this._executeGeometryQuery(ja,da),da),ka=yield this._reschedule(()=>ka.executeAggregateIdsQuery(ja),da),ka=yield this._reschedule(()=>ka.executeObjectIdsQuery(ja),da),ka=yield this._reschedule(()=>ka.executeTimeQuery(ja),da),ka=yield this._reschedule(()=>ka.executeAttributesQuery(ja),da)}catch(oa){if(oa!==A.QUERY_ENGINE_EMPTY_RESULT)throw oa;ka=new u([],null,this)}return ka.createQueryResponse(ja)});return function(){return J.apply(this,arguments)}}();p.executeQueryForCount=
function(){var J=b._asyncToGenerator(function*(U={},da){let ja=N.clone(U),ka;ja.returnGeometry=!1;ja.returnCentroid=!1;ja.outSR=null;try{ja=yield this._schedule(()=>A.normalizeQuery(ja,this.definitionExpression,this.spatialReference),da),ja=yield this._reschedule(()=>this._checkQuerySupport(ja),da),ka=yield this._reschedule(()=>this._executeGeometryQuery(ja,da),da),ka=yield this._reschedule(()=>ka.executeAggregateIdsQuery(ja),da),ka=yield this._reschedule(()=>ka.executeObjectIdsQuery(ja),da),ka=yield this._reschedule(()=>
ka.executeTimeQuery(ja),da),ka=yield this._reschedule(()=>ka.executeAttributesQuery(ja),da)}catch(oa){if(oa!==A.QUERY_ENGINE_EMPTY_RESULT)throw oa;return 0}return ka.createQueryResponseForCount(ja)});return function(){return J.apply(this,arguments)}}();p.executeQueryForExtent=function(){var J=b._asyncToGenerator(function*(U={},da){let ja=N.clone(U),ka;U=ja.outSR;try{ja=yield this._schedule(()=>A.normalizeQuery(ja,this.definitionExpression,this.spatialReference),da);ja=yield this._reschedule(()=>this._checkQuerySupport(ja),
da);ja.returnGeometry=!0;ja.returnCentroid=!1;ja.outSR=null;ka=yield this._reschedule(()=>this._executeGeometryQuery(ja,da),da);ka=yield this._reschedule(()=>ka.executeAggregateIdsQuery(ja),da);ka=yield this._reschedule(()=>ka.executeObjectIdsQuery(ja),da);ka=yield this._reschedule(()=>ka.executeTimeQuery(ja),da);ka=yield this._reschedule(()=>ka.executeAttributesQuery(ja),da);const oa=ka.size;if(!oa)return{count:oa,extent:null};G.set(K,G.NEGATIVE_INFINITY);this.featureStore.forEachBounds(ka.items,
Aa=>G.expandWithAABB(K,Aa),F);const ua={xmin:K[0],ymin:K[1],xmax:K[3],ymax:K[4],spatialReference:A.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(K[2])&&isFinite(K[5])&&(ua.zmin=K[2],ua.zmax=K[5]);const ra=O.project(ua,ka.spatialReference,U);ra.spatialReference=A.cleanFromGeometryEngine(U||this.spatialReference);if(0===ra.xmax-ra.xmin){const Aa=g.getMetersPerUnitForSR(ra.spatialReference);ra.xmin-=Aa;ra.xmax+=Aa}if(0===ra.ymax-ra.ymin){const Aa=g.getMetersPerUnitForSR(ra.spatialReference);
ra.ymin-=Aa;ra.ymax+=Aa}if(this.hasZ&&null!=ra.zmin&&null!=ra.zmax&&0===ra.zmax-ra.zmin){const Aa=g.getMetersPerUnitForSR(ra.spatialReference);ra.zmin-=Aa;ra.zmax+=Aa}return{count:oa,extent:ra}}catch(oa){if(oa===A.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw oa;}});return function(){return J.apply(this,arguments)}}();p.executeQueryForIds=function(){var J=b._asyncToGenerator(function*(U={},da){return this.executeQueryForIdSet(U,da).then(ja=>Array.from(ja))});return function(){return J.apply(this,
arguments)}}();p.executeQueryForIdSet=function(){var J=b._asyncToGenerator(function*(U={},da){let ja=N.clone(U),ka;ja.returnGeometry=!1;ja.returnCentroid=!1;ja.outSR=null;try{ja=yield this._schedule(()=>A.normalizeQuery(ja,this.definitionExpression,this.spatialReference),da);ja=yield this._reschedule(()=>this._checkQuerySupport(ja),da);ka=yield this._reschedule(()=>this._executeGeometryQuery(ja,da),da);ka=yield this._reschedule(()=>ka.executeAggregateIdsQuery(ja),da);ka=yield this._reschedule(()=>
ka.executeObjectIdsQuery(ja),da);ka=yield this._reschedule(()=>ka.executeTimeQuery(ja),da);ka=yield this._reschedule(()=>ka.executeAttributesQuery(ja),da);const oa=ka.items,ua=new Set;yield this._reschedule(()=>{for(const ra of oa)ua.add(ka.featureAdapter.getObjectId(ra))},da);return ua}catch(oa){if(oa===A.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw oa;}});return function(){return J.apply(this,arguments)}}();p.executeQueryForSnapping=function(){var J=b._asyncToGenerator(function*(U,da){const {point:ja,
distance:ka,types:oa}=U;if(0===oa)return{candidates:[]};const ua=yield this._reschedule(()=>this._checkQuerySupport(U.query),da),ra=!z.equals(ja.spatialReference,this.spatialReference);ra&&(yield O.checkProjectionSupport(ja.spatialReference,this.spatialReference));var Aa="number"===typeof ka?ka:ka.x,Na="number"===typeof ka?ka:ka.y;Aa={xmin:ja.x-Aa,xmax:ja.x+Aa,ymin:ja.y-Na,ymax:ja.y+Na,spatialReference:ja.spatialReference};Aa=ra?O.project(Aa,this.spatialReference):Aa;if(!Aa)return{candidates:[]};
Na=(yield Q.normalizeCentralMeridian(C.fromJSON(ja),null,{signal:da}))[0];const Ta=(yield Q.normalizeCentralMeridian(C.fromJSON(Aa),null,{signal:da}))[0];if(q.isNone(Na)||q.isNone(Ta))return{candidates:[]};let Ka=new u(this._searchFeatures(this._getQueryBBoxes(Ta.toJSON())),null,this);Ka=yield this._reschedule(()=>Ka.executeObjectIdsQuery(ua),da);Ka=yield this._reschedule(()=>Ka.executeTimeQuery(ua),da);Ka=yield this._reschedule(()=>Ka.executeAttributesQuery(ua),da);da=Na.toJSON();da=ra?O.project(da,
this.spatialReference):da;return Ka.createSnappingResponse({...U,point:da,distance:ra?Math.max(Aa.xmax-Aa.xmin,Aa.ymax-Aa.ymin)/2:ka},ja.spatialReference)});return function(U,da){return J.apply(this,arguments)}}();p.executeQueryForLatestObservations=function(){var J=b._asyncToGenerator(function*(U={},da){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new B("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:U,timeInfo:this.timeInfo});let ja=N.clone(U),ka;try{ja=
yield this._schedule(()=>A.normalizeQuery(ja,this.definitionExpression,this.spatialReference),da),ja=yield this._reschedule(()=>this._checkQuerySupport(ja),da),ka=yield this._reschedule(()=>this._executeGeometryQuery(ja,da),da),ka=yield this._reschedule(()=>ka.executeAggregateIdsQuery(ja),da),ka=yield this._reschedule(()=>ka.executeObjectIdsQuery(ja),da),ka=yield this._reschedule(()=>ka.executeTimeQuery(ja),da),ka=yield this._reschedule(()=>ka.executeAttributesQuery(ja),da),ka=yield this._reschedule(()=>
ka.filterLatest(),da)}catch(oa){if(oa!==A.QUERY_ENGINE_EMPTY_RESULT)throw oa;ka=new u([],null,this)}return ka.createQueryResponse(ja)});return function(){return J.apply(this,arguments)}}();p.executeQueryForSummaryStatistics=function(){var J=b._asyncToGenerator(function*(U={},da,ja){U=N.clone(U);let ka;try{U=yield this._schedule(()=>A.normalizeQuery(U,this.definitionExpression,this.spatialReference),ja),U=yield this._reschedule(()=>this._checkSummaryStatisticsSupport(U,da),ja),ka=yield this._reschedule(()=>
this._executeGeometryQuery(U,ja),ja),ka=yield this._reschedule(()=>ka.executeAggregateIdsQuery(U),ja),ka=yield this._reschedule(()=>ka.executeObjectIdsQuery(U),ja),ka=yield this._reschedule(()=>ka.executeTimeQuery(U),ja),ka=yield this._reschedule(()=>ka.executeAttributesQuery(U),ja)}catch(oa){if(oa!==A.QUERY_ENGINE_EMPTY_RESULT)throw oa;ka=new u([],null,this)}return ka.createSummaryStatisticsResponse(U,da)});return function(){return J.apply(this,arguments)}}();p._schedule=function(){var J=b._asyncToGenerator(function*(U,
da){return this._frameQueue?this._frameQueue.push(U,da):U()});return function(U,da){return J.apply(this,arguments)}}();p._reschedule=function(){var J=b._asyncToGenerator(function*(U,da){return this._frameQueue?this._frameQueue.unshift(U,da):U()});return function(U,da){return J.apply(this,arguments)}}();p.runTask=function(J){for(this._budget=J;!J.done&&this._frameQueue&&this._frameQueue.process();)J.madeProgress();this._budget=null};p._getAll=function(){if(!this._allItems){const J=[];this.featureStore.forEach(U=>
J.push(U));this._allItems=new u(J,null,this)}return this._allItems};p._executeGeometryQuery=function(){var J=b._asyncToGenerator(function*(U,da){var ja=this;const {geometry:ka,outSR:oa,spatialRel:ua,returnGeometry:ra,returnCentroid:Aa}=U,Na=ra||Aa,Ta=z.isValid(oa)&&!z.equals(this.spatialReference,oa),Ka=this._geometryQueryCache?Ta&&Na?JSON.stringify({geometry:ka,spatialRelationship:ua,outSpatialReference:oa}):JSON.stringify({geometry:ka,spatialRelationship:ua}):null;if(Ka){var Ca=this._geometryQueryCache.get(Ka);
if(!q.isUndefined(Ca))return Ca}Ca=function(){var y=b._asyncToGenerator(function*(ba){if(Ta&&Na)return ba=yield ba.project(oa),Ka&&ja._geometryQueryCache.put(Ka,ba,ba.size||1),ba;Ka&&ja._geometryQueryCache.put(Ka,ba,ba.size||1);return ba});return function(ba){return y.apply(this,arguments)}}();if(!ka)return Ca(this._getAll());const Ra=this.featureAdapter;if("esriSpatialRelDisjoint"===ua){U=this._searchFeatures(this._getQueryBBoxes(ka));if(!U.length)return Ca(this._getAll());let y,ba;const v=new Set;
for(var gb of U)v.add(Ra.getObjectId(gb));yield this._reschedule(()=>{let P=0;y=Array(v.size);this.featureStore.forEach(X=>y[P++]=X);ba=v},da);U=yield this._reschedule(b._asyncToGenerator(function*(){const P=yield D.getSpatialQueryOperator(ua,ka,ja.geometryType,ja.hasZ,ja.hasM);return new u(yield ja._runSpatialFilter(y,X=>!ba.has(Ra.getObjectId(X))||P(Ra.getGeometry(X)),da),ka,ja)}),da);return Ca(U)}gb=this._searchFeatures(this._getQueryBBoxes(ka));if(!gb.length)return Ca=new u([],ka,this),Ka&&this._geometryQueryCache.put(Ka,
Ca,Ca.size||1),Ca;if(this._canExecuteSoloPass(ka,U))return Ca(new u(gb,ka,this));const f=yield D.getSpatialQueryOperator(ua,ka,this.geometryType,this.hasZ,this.hasM);U=yield this._runSpatialFilter(gb,y=>f(Ra.getGeometry(y)),da);return Ca(new u(U,ka,this))});return function(U,da){return J.apply(this,arguments)}}();p._runSpatialFilter=function(){var J=b._asyncToGenerator(function*(U,da,ja){var ka=this;if(!da)return U;if(!this._budget)return U.filter(Aa=>da(Aa));let oa=0;const ua=[],ra=function(){var Aa=
b._asyncToGenerator(function*(){for(;oa<U.length;){const Na=U[oa];da(Na)&&ua.push(Na);ka._budget.done&&(yield ka._reschedule(()=>ra(),ja));++oa}});return function(){return Aa.apply(this,arguments)}}();return this._reschedule(()=>ra(),ja).then(()=>ua)});return function(U,da,ja){return J.apply(this,arguments)}}();p._canExecuteSoloPass=function(J,U){const {geometryType:da}=this;({spatialRel:U}=U);return D.canQueryWithRBush(J)&&("esriSpatialRelEnvelopeIntersects"===U||"esriGeometryPoint"===da&&("esriSpatialRelIntersects"===
U||"esriSpatialRelContains"===U||"esriSpatialRelWithin"===U))};p._getQueryBBoxes=function(J){if(D.canQueryWithRBush(J)){if(C.isExtent(J))return[m.fromValues(J.xmin,J.ymin,J.xmax,J.ymax)];if(C.isPolygon(J))return J.rings.map(U=>m.fromValues(Math.min(U[0][0],U[2][0]),Math.min(U[0][1],U[2][1]),Math.max(U[0][0],U[2][0]),Math.max(U[0][1],U[2][1])))}return[r.getBoundsXY(m.create(),J)]};p._searchFeatures=function(J){for(const ja of J)this.featureStore.forEachInBounds(ja,ka=>{k.add(ka)});const U=Array(k.size);
let da=0;k.forEach(ja=>U[da++]=ja);k.clear();return U};p._checkSummaryStatisticsSupport=function(){var J=b._asyncToGenerator(function*(U,da){if(0>U.distance||null!=U.geometryPrecision||U.multipatchOption||U.pixelSize||U.relationParam||U.text||U.outStatistics||U.groupByFieldsForStatistics||U.having||U.orderByFields)throw new B("feature-store:unsupported-query","Unsupported query options",{query:U});return Promise.all([this._checkAttributesQuerySupport(U),this._checkSummaryStatisticsParamsSupport(da),
D.checkSpatialQuerySupport(U,this.geometryType,this.spatialReference),O.checkProjectionSupport(this.spatialReference,U.outSR)]).then(()=>U)});return function(U,da){return J.apply(this,arguments)}}();p._checkSummaryStatisticsParamsSupport=function(){var J=b._asyncToGenerator(function*(U){var da=[];U.valueExpression&&({arcadeUtils:da}=yield W.loadArcade(),da=da.extractFieldNames(U.valueExpression));U.field&&da.push(U.field);U.normalizationField&&da.push(U.normalizationField);if(!da.length)throw new B("feature-store:unsupported-query",
"params should have at least a field or valueExpression",{params:U});E.validateFields(this.fieldsIndex,da,"params contains missing fields")});return function(U){return J.apply(this,arguments)}}();p._checkQuerySupport=function(){var J=b._asyncToGenerator(function*(U){if(0>U.distance||null!=U.geometryPrecision||U.multipatchOption||U.pixelSize||U.relationParam||U.text)throw new B("feature-store:unsupported-query","Unsupported query options",{query:U});return Promise.all([this._checkAttributesQuerySupport(U),
this._checkStatisticsQuerySupport(U),D.checkSpatialQuerySupport(U,this.geometryType,this.spatialReference),O.checkProjectionSupport(this.spatialReference,U.outSR)]).then(()=>U)});return function(U){return J.apply(this,arguments)}}();p._checkAttributesQuerySupport=function(J){const {outFields:U,orderByFields:da,returnDistinctValues:ja,outStatistics:ka}=J,oa=ka?ka.map(ua=>ua.outStatisticFieldName&&ua.outStatisticFieldName.toLowerCase()):[];if(da&&0<da.length){const ua=da.map(ra=>{const Aa=ra.toLowerCase();
return-1<Aa.indexOf(" asc")?Aa.split(" asc")[0]:-1<Aa.indexOf(" desc")?Aa.split(" desc")[0]:ra}).filter(ra=>-1===oa.indexOf(ra));E.validateFields(this.fieldsIndex,ua,"orderByFields contains missing fields")}if(U&&0<U.length)E.validateFields(this.fieldsIndex,U,"outFields contains missing fields");else if(ja)throw new B("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:J});E.validateWhere(this.fieldsIndex,J.where)};p._checkStatisticsQuerySupport=function(){var J=
b._asyncToGenerator(function*(U){const {outStatistics:da,groupByFieldsForStatistics:ja,having:ka}=U;var oa=ja&&ja.length,ua=da&&da.length;if(ka){if(!oa||!ua)throw new B("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:U});E.validateHaving(this.fieldsIndex,ka,da)}if(ua&&M(da)){ua=da.map(ra=>ra.onStatisticField);E.validateFields(this.fieldsIndex,ua,"onStatisticFields contains missing fields");oa&&E.validateFields(this.fieldsIndex,
ja,"groupByFieldsForStatistics contains missing fields");for(const ra of da){const {onStatisticField:Aa,statisticType:Na}=ra;if(("percentile_disc"===Na||"percentile_cont"===Na)&&"statisticParameters"in ra){if({statisticParameters:oa}=ra,!oa)throw new B("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:ra,query:U});}else if("count"!==Na&&Aa&&E.hasInvalidFieldType(Aa,this.fieldsIndex))throw new B("feature-store:unsupported-query","outStatistics contains non-numeric fields",
{definition:ra,query:U});}}});return function(U){return J.apply(this,arguments)}}();b._createClass(h,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const J=this.featureStore.fullBounds;return J?{xmin:J[0],ymin:J[1],xmax:J[2],ymax:J[3],spatialReference:A.cleanFromGeometryEngine(this.spatialReference)}:null}},{key:"timeExtent",get:function(){return this.timeInfo?this._timeExtent?this._timeExtent:this._timeExtent=L.getTimeExtent(this.timeInfo,
this.featureStore):null}},{key:"running",get:function(){return 0<this._frameQueue.length}}]);return h}();const F=G.create(),K=G.create();l.Feature=function(h,p=null,J,U,da){this.attributes=h;this.geometry=J;this.centroid=U;this.filterFlags=da;this.groupId=-1;this.displayId=p};l["default"]=x;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./PooledArray"],function(l,b,B){let N=function(){function n(G,m,r){this._namespace=
G;this._storage=m;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";r&&(this._storage.registerRemoveFunc(this._namespace,r),this._removeFunc=!0)}var g=n.prototype;g.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this);this._storage=null};g.resetHitRate=function(){this._hit=this._miss=0};g.put=function(G,m,r,C=0){this._storage.put(this._namespace+G,m,r,
C)};g.get=function(G){G=this._storage.get(this._namespace+G);void 0===G?++this._miss:++this._hit;return G};g.pop=function(G){G=this._storage.pop(this._namespace+G);void 0===G?++this._miss:++this._hit;return G};g.updateSize=function(G,m,r){this._storage.updateSize(this._namespace+G,m,r)};g.clear=function(){this._storage.clear(this._namespace)};g.clearAll=function(){this._storage.clearAll()};g.getStats=function(){return this._storage.getStats()};g.resetStats=function(){this._storage.resetStats()};b._createClass(n,
[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return n}(),q=function(){function n(G=10485760){this._maxSize=G;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new B;this._users=new B}var g=n.prototype;g.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();
this._db=null};g.register=function(G){this._users.push(G)};g.deregister=function(G){this._users.removeUnordered(G)};g.registerRemoveFunc=function(G,m){this._removeFuncs.push([G,m])};g.deregisterRemoveFunc=function(G){this._removeFuncs.filterInPlace(m=>m[0]!==G)};g.put=function(G,m,r,C){const Q=this._db.get(G);Q&&(this._size-=Q.size,this._db.delete(G),Q.entry!==m&&this._notifyRemoved(G,Q.entry));r>this._maxSize?this._notifyRemoved(G,m):void 0===m?console.warn("Refusing to cache undefined entry "):
!r||0>r?console.warn("Refusing to cache entry with invalid size "+r):(C=1+Math.max(C,-3)- -3,this._db.set(G,{entry:m,size:r,lifetime:C,lives:C}),this._size+=r,this._checkSizeLimit())};g.updateSize=function(G,m,r){const C=this._db.get(G);C&&C.entry===m&&(this._size-=C.size,r>this._maxSize?(this._db.delete(G),this._notifyRemoved(G,m)):(C.size=r,this._size+=r,this._checkSizeLimit()))};g.pop=function(G){const m=this._db.get(G);if(m)return this._size-=m.size,this._db.delete(G),++this._hit,m.entry;++this._miss};
g.get=function(G){const m=this._db.get(G);if(void 0===m)++this._miss;else return this._db.delete(G),m.lives=m.lifetime,this._db.set(G,m),++this._hit,m.entry};g.getStats=function(){const G={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},m={},r=[];this._db.forEach((z,E)=>{const O=z.lifetime;r[O]=(r[O]||0)+z.size;this._users.forAll(c=>{c=c.namespace;E.startsWith(c)&&(m[c]=(m[c]||0)+z.size)})});
const C={};this._users.forAll(z=>{const E=z.namespace;!isNaN(z.hitRate)&&0<z.hitRate?(m[E]=m[E]||0,C[E]=Math.round(100*z.hitRate)+"%"):C[E]="0%"});var Q=Object.keys(m);Q.forEach(z=>m[z]=m[z]/this._size*100);Q.sort((z,E)=>m[E]-m[z]);Q.forEach(z=>G[z]=Math.round(m[z])+"% / "+C[z]);for(Q=r.length-1;0<=Q;--Q){const z=r[Q];z&&(G["Priority "+(Q+-3-1)]=Math.round(z/this.size*100)+"%")}return G};g.resetStats=function(){this._hit=this._miss=0;this._users.forAll(G=>G.resetHitRate())};g.clear=function(G){this._db.forEach((m,
r)=>{r.startsWith(G)&&(this._size-=m.size,this._db.delete(r),this._notifyRemoved(r,m.entry))})};g.clearAll=function(){this._db.forEach((G,m)=>this._notifyRemoved(m,G.entry));this._size=0;this._db.clear()};g._getHitRate=function(){return this._hit/(this._hit+this._miss)};g._notifyRemoved=function(G,m){this._removeFuncs.forAll(r=>{if(G.startsWith(r[0]))r[1](m)})};g._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [G,m]of this._db)if(this._db.delete(G),1>=m.lives?(this._size-=m.size,
this._notifyRemoved(G,m.entry)):(--m.lives,this._db.set(G,m)),this._size<=.9*this.maxSize)break};b._createClass(n,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(G){this._maxSize=Math.max(G,0);this._checkSizeLimit()}}]);return n}();l.MIN_PRIORITY=-3;l.MemCache=N;l.MemCacheStorage=q;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ../geometry/projectionEllipsoid ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/support/spatialReferenceUtils ../geometry/support/WKIDUnitConversion".split(" "),
function(l,b,B,N,q,n,g,G){function m(h){if(h=x[h])return h;throw Error("unknown measure");}function r(h){return e[h].baseUnit}function C(h,p=null){p=p||m(h);return e[p].baseUnit===h}function Q(h,p,J){if(p===J)return h;const U=m(p);if(U!==m(J))throw Error("incompatible units");h=C(p,U)?h:h*e[U].units[p].inBaseUnits;return C(J,U)?h:h/e[U].units[J].inBaseUnits}function z(h,p){return 3E3>Q(h,p,"meters")?"meters":"kilometers"}function E(h,p){return 1E5>Q(h,p,"meters")?"meters":"kilometers"}function O(h,
p){return 1E3>Q(h,p,"feet")?"feet":"miles"}function c(h,p){return 1E5>Q(h,p,"feet")?"feet":"miles"}function u(h){return t.fromJSON(h.toLowerCase())||null}function D(h,p=n.earth.metersPerDegree){return L(h,!0)||p}function L(h,p=!1){let J,U,da=null;null!=h&&("object"===typeof h?(J=h.wkid,U=h.wkt):"number"===typeof h?J=h:"string"===typeof h&&(U=h));if(J){if(g.isWKIDFromMars(J))return n.mars.metersPerDegree;if(g.isWKIDFromMoon(J))return n.moon.metersPerDegree;da=W.values[W[J]];!da&&p&&k.has(J)&&(da=H)}else U&&
(-1!==U.search(/^PROJCS/i)?(h=I.exec(U))&&h[1]&&(da=parseFloat(h[1].split(",")[1])):-1!==U.search(/^GEOCCS/i)&&(h=M.exec(U))&&h[1]&&(da=parseFloat(h[1].split(",")[1])));return da}function A(h){let p,J,U=null;null!=h&&("object"===typeof h?(p=h.wkid,J=h.wkt):"number"===typeof h?p=h:"string"===typeof h&&(J=h));p?U=W.units[W[p]]:J&&-1!==J.search(/^PROJCS/i)&&(h=I.exec(J))&&h[1]&&(U=(h=/[\\"\\']{1}([^\\"\\']+)/.exec(h[1]))&&h[1]);return U?u(U):null}const H=n.earth.radius*Math.PI/200,I=/UNIT\[([^\]]+)\]\]$/i,
W=G,M=/UNIT\[([^\]]+)\]/i,k=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),t=B.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",
"50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});b={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};G={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*
.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(h=>h*h)(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};const e={length:{baseUnit:"meters",units:b},area:{baseUnit:"square-meters",units:G},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},
"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},x=function(){const h={};for(const p in e)for(const J in e[p].units)h[J]=
p;return h}(),F={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},K={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",
esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"};b=B.strict()(F);G=B.strict()(K);B=B.strict()({...F,...K});l.areaUnitsJSONMap=b;l.baseUnitForMeasure=r;l.baseUnitForUnit=function(h){return r(m(h))};l.convertUnit=Q;l.getDefaultUnitSystem=function(h){if(!h)return null;switch(A(h)){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";
case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null};l.getMetersPerUnit=L;l.getMetersPerUnitForSR=D;l.getMetersPerVerticalUnitForSR=function(h){if(h&&"object"===typeof h&&!g.isEarth(h))return 1;h=D(h);return 1E5<h?1:h};l.getUnitString=A;l.getVerticalUnitStringForSR=function(h){const p=D(h),J=h instanceof q?N.getReferenceEllipsoid(h).metersPerDegree:1E5;return p>=J?"meters":A(h)};l.inchesPerMeter=39.37;l.isBaseUnit=C;l.isMeasurementSystem=function(h){return"imperial"===
h||"metric"===h};l.lengthToDegrees=function(h,p,J){return Q(h,p,"meters")/(J*Math.PI/180)};l.lengthUnitsJSONMap=G;l.measureForUnit=m;l.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");l.measurementLengthUnits="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" ");l.preferredImperialAreaUnit=function(h,p){return 1E6>Q(h,p,"square-feet")?"square-feet":
"square-miles"};l.preferredImperialLengthUnit=O;l.preferredImperialVerticalLengthUnit=c;l.preferredLengthUnit=function(h,p,J){switch(J){case "metric":return z(h,p);case "imperial":return O(h,p);default:return J}};l.preferredMetricAreaUnit=function(h,p){return 3E6>Q(h,p,"square-meters")?"square-meters":"square-kilometers"};l.preferredMetricLengthUnit=z;l.preferredMetricVerticalLengthUnit=E;l.preferredVerticalLengthUnit=function(h,p,J){switch(J){case "metric":return E(h,p);case "imperial":return c(h,
p);default:return J}};l.unitFromRESTJSON=u;l.unitToRESTJSON=function(h){return t.toJSON(h)||null};l.unitsJSONMap=B;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","./SpatialReference","./support/Ellipsoid","./support/spatialReferenceUtils"],function(l,b,B,N){function q(r){return new b({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${r.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}
const n=q(B.earth),g=q(B.mars),G=q(B.moon),m=new b({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${B.earth.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});l.SphericalECEFSpatialReference=n;l.SphericalPCPFMars=
g;l.SphericalPCPFMoon=G;l.WGS84ECEFSpatialReference=m;l.createSphericalPCPF=q;l.getReferenceEllipsoid=function(r){return r&&(N.isMars(r)||r===g)?B.mars:r&&(N.isMoon(r)||r===G)?B.moon:B.earth};l.getReferenceEllipsoidFromWKID=function(r){return N.isWKIDFromMars(r)?B.mars:N.isWKIDFromMoon(r)?B.moon:B.earth};l.getSphericalPCPF=function(r){return r&&(N.isMars(r)||r===g)?g:r&&(N.isMoon(r)||r===G)?G:n};l.getSphericalPCPFForEllipsoid=function(r){return r&&r===B.mars?g:r&&r===B.moon?G:n};Object.defineProperty(l,
"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../tasks/geometry/cut ../../tasks/geometry/simplify".split(" "),function(l,b,B,N,q,n,g,G,m,r,C,Q,z){function E(I){const W=[];let M=0,k=0;for(let t=0;t<I.length;t++){const e=I[t];let x=null;for(let F=0;F<e.length;F++)x=
e[F],W.push(x),0===F?k=M=x[0]:(M=Math.min(M,x[0]),k=Math.max(k,x[0]));x&&W.push([(M+k)/2,0])}return W}function O(I,W){if(!(I instanceof G||I instanceof g))throw H.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new N("straightLineDensify: the input geometry is neither polyline nor polygon");var M=m.getGeometryParts(I);const k=[];for(const e of M){M=[];k.push(M);M.push([e[0][0],e[0][1]]);for(let x=0;x<e.length-1;x++){const F=e[x][0],K=e[x][1],h=e[x+1][0],p=e[x+1][1];
var t=Math.sqrt((h-F)*(h-F)+(p-K)*(p-K));const J=(p-K)/t,U=(h-F)/t,da=t/W;if(1<da){for(let ja=1;ja<=da-1;ja++){const ka=ja*W;M.push([U*ka+F,J*ka+K])}t=(t+Math.floor(da-1)*W)/2;M.push([U*t+F,J*t+K])}M.push([h,p])}}return"polygon"===I.type?new g({rings:k,spatialReference:I.spatialReference}):new G({paths:k,spatialReference:I.spatialReference})}function c(I,W,M){W&&(I=O(I,1E6),I=C.webMercatorToGeographic(I,!0));M&&(I=m.updatePolyGeometry(I,M));return I}function u(I,W,M){if(Array.isArray(I)){var k=I[0];
k>W?(M=m.offsetMagnitude(k,W),I[0]=k+-2*M*W):k<M&&(W=m.offsetMagnitude(k,M),I[0]=k+-2*W*M)}else k=I.x,k>W?(M=m.offsetMagnitude(k,W),I=I.clone().offset(-2*M*W,0)):k<M&&(W=m.offsetMagnitude(k,M),I=I.clone().offset(-2*W*M,0));return I}function D(I,W){let M=-1;for(let k=0;k<W.cutIndexes.length;k++){const t=W.cutIndexes[k],e=W.geometries[k],x=m.getGeometryParts(e);for(let F=0;F<x.length;F++){const K=x[F];K.some(h=>{if(180>h[0])return!0;h=0;for(var p=0;p<K.length;p++){var J=K[p][0];h=J>h?J:h}h=Number(h.toFixed(9));
h=-360*m.offsetMagnitude(h,180);for(p=0;p<K.length;p++)J=e.getPoint(F,p),e.setPoint(F,p,J.clone().offset(h,0));return!0})}if(t===M)if("polygon"===I[0].type)for(const F of m.getGeometryParts(e))I[t]=I[t].addRing(F);else{if("polyline"===I[0].type)for(const F of m.getGeometryParts(e))I[t]=I[t].addPath(F)}else M=t,I[t]=e}return I}function L(I,W,M){return A.apply(this,arguments)}function A(){A=b._asyncToGenerator(function*(I,W,M){if(!Array.isArray(I))return L([I],W);var k=W?W.url:B.geometryServiceUrl;
let t,e,x;let F=0;var K=[];W=[];for(var h of I)if(n.isNone(h))W.push(h);else{if(!p){var p=h.spatialReference;var J=r.getInfo(p);var U=(t=p.isWebMercator)?102100:4326;e=m.cutParams[U].maxX;x=m.cutParams[U].minX;var da=m.cutParams[U].plus180Line;U=m.cutParams[U].minus180Line}if(J)if("mesh"===h.type)W.push(h);else if("point"===h.type)W.push(u(h.clone(),e,x));else if("multipoint"===h.type){var ja=h.clone();ja.points=ja.points.map(ka=>u(ka,e,x));W.push(ja)}else if("extent"===h.type)ja=h.clone()._normalize(!1,
!1,J),W.push(ja.rings?new g(ja):ja);else if(h.extent){ja=h.extent;const ka=2*m.offsetMagnitude(ja.xmin,x)*e;let oa=0===ka?h.clone():m.updatePolyGeometry(h.clone(),ka);ja.offset(ka,0);ja.intersects(da)&&ja.xmax!==e?(F=ja.xmax>F?ja.xmax:F,oa=c(oa,t),K.push(oa),W.push("cut")):ja.intersects(U)&&ja.xmin!==x?(F=2*ja.xmax*e>F?2*ja.xmax*e:F,oa=c(oa,t,360),K.push(oa),W.push("cut")):W.push(oa)}else W.push(h.clone());else W.push(h)}p=m.offsetMagnitude(F,e);J=-90;da=p;for(h=new G;0<p;)U=-180+360*p,h.addPath([[U,
J],[U,-1*J]]),J*=-1,p--;if(0<K.length&&0<da){p=yield Q.cut(k,K,h,M);p=D(K,p);J=[];K=[];for(da=0;da<W.length;da++)h=W[da],"cut"!==h?K.push(h):(h=p.shift(),U=I[da],n.isSome(U)&&"polygon"===U.type&&U.rings&&1<U.rings.length&&h.rings.length>=U.rings.length?(J.push(h),K.push("simplify")):K.push(t?C.geographicToWebMercator(h):h));if(!J.length)return K;W=yield z.simplify(k,J,M);I=[];for(M=0;M<K.length;M++)k=K[M],"simplify"!==k?I.push(k):I.push(t?C.geographicToWebMercator(W.shift()):W.shift());return I}I=
[];for(M=0;M<W.length;M++)k=W[M],"cut"!==k?I.push(k):(k=K.shift(),I.push(!0===t?C.geographicToWebMercator(k):k));return Promise.resolve(I)});return A.apply(this,arguments)}const H=q.getLogger("esri.geometry.support.normalizeUtils");l.getDenormalizedExtent=function(I){if(!I)return null;const W=I.extent;if(!W)return null;var M=I.spatialReference&&r.getInfo(I.spatialReference);if(!M)return W;const [k,t]=M.valid;({width:M}=W);let {xmin:e,xmax:x}=W;[e,x]=[x,e];if("extent"===I.type||0===M||M<=t||M>2*t||
e<k||x>t)return W;let F;switch(I.type){case "polygon":if(1<I.rings.length)F=E(I.rings);else return W;break;case "polyline":if(1<I.paths.length)F=E(I.paths);else return W;break;case "multipoint":F=I.points}I=W.clone();for(let K=0;K<F.length;K++){let h=F[K][0];0>h?(h+=t,x=Math.max(h,x)):(h-=t,e=Math.min(h,e))}I.xmin=e;I.xmax=x;return I.width<M?(I.xmin-=t,I.xmax-=t,I):W};l.normalizeCentralMeridian=L;l.normalizeMapX=function(I,W){if(W=r.getInfo(W)){const [M,k]=W.valid;W=k-M;if(I<M)for(;I<M;)I+=W;if(I>
k)for(;I>k;)I-=W}return I};l.straightLineDensify=O;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(l,b,B,N){function q(g){return N.isPolygon(g)?g.rings:g.paths}const n={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new b({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:B.WebMercator}),
minus180Line:new b({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:B.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new b({paths:[[[180,-180],[180,180]]],spatialReference:B.WGS84}),minus180Line:new b({paths:[[[-180,-180],[-180,180]]],spatialReference:B.WGS84})}};l.cutParams=n;l.getGeometryParts=q;l.getSpatialReferenceMinMaxX=function(g){g=(null==g?0:g.isWebMercator)?102100:4326;return[n[g].minX,n[g].maxX]};l.offsetMagnitude=
function(g,G){return Math.ceil((g-G)/(2*G))};l.updatePolyGeometry=function(g,G){const m=q(g);for(const r of m)for(const C of r)C[0]+=G;return g};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/tasks/geometry/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../core/urlUtils ../../geometry/support/jsonUtils".split(" "),function(l,b,B,N,q,n){function g(){g=b._asyncToGenerator(function*(G,m,r,C){G="string"===typeof G?q.urlToObject(G):G;const Q=
m[0].spatialReference;m={...C,query:{...G.query,f:"json",sr:JSON.stringify(Q),target:JSON.stringify({geometryType:n.getJsonType(m[0]),geometries:m}),cutter:JSON.stringify(r)}};m=yield N(G.path+"/cut",m);const {cutIndexes:z,geometries:E=[]}=m.data;return{cutIndexes:z,geometries:E.map(O=>{O=n.fromJSON(O);O.spatialReference=Q;return O})}});return g.apply(this,arguments)}l.cut=function(G,m,r,C){return g.apply(this,arguments)};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/tasks/geometry/simplify":function(){define(["exports",
"../../chunks/_rollupPluginBabelHelpers","../../request","../../core/urlUtils","../../geometry/support/jsonUtils"],function(l,b,B,N,q){function n(){n=b._asyncToGenerator(function*(m,r,C){const Q="string"===typeof m?N.urlToObject(m):m;m=r[0].spatialReference;const z=q.getJsonType(r[0]);r={...C,query:{...Q.query,f:"json",sr:m.wkid?m.wkid:JSON.stringify(m),geometries:JSON.stringify(g(r))}};r=yield B(Q.path+"/simplify",r);return G(r.data,z,m)});return n.apply(this,arguments)}function g(m){return{geometryType:q.getJsonType(m[0]),
geometries:m.map(r=>r.toJSON())}}function G(m,r,C){const Q=q.getGeometryType(r);return m.map(z=>{z=Q.fromJSON(z);z.spatialReference=C;return z})}l.simplify=function(m,r,C){return n.apply(this,arguments)};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache"],function(l,b,B){function N(m,r){return m?g.get(m,r):null}function q(m,r,C,Q=!0){const z=[];for(const E of r)if("*"!==
E&&!m.has(E))if(Q){r=n(E);try{const O=N(r,m);if(!O)throw new b("feature-store:unsupported-query","invalid SQL expression",{where:r});if(!O.isStandardized)throw new b("feature-store:unsupported-query","expression is not standard",{clause:O});q(m,O.fieldNames,"expression contains missing fields")}catch(O){if((r=O&&O.details)&&(r.clause||r.where))throw O;r&&r.missingFields?z.push(...r.missingFields):z.push(E)}}else z.push(E);if(z.length)throw new b("feature-store:unsupported-query",C,{missingFields:z});
}function n(m){return m.split(" as ")[0]}const g=new B.WhereClauseCache(50,500),G=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));l.getAliasFromFieldName=function(m){return m.split(" as ")[1]};l.getExpressionFromFieldName=n;l.getWhereClause=N;l.hasInvalidFieldType=function(m,r){return(m=r.get(m))?!G.has(m.type):!1};l.validateFields=q;l.validateHaving=function(m,r,C){if(!r)return!0;const Q=
g.get(r,m);if(!Q)throw new b("feature-store:unsupported-query","invalid SQL expression",{having:r});if(!Q.isAggregate)throw new b("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:r});q(m,Q.fieldNames,"having contains missing fields");if(!Q.getExpressions().every(z=>{const {aggregateType:E,field:O}=z,c=m.has(O)&&m.get(O).name;return C.some(u=>{const {onStatisticField:D,statisticType:L}=u;return(m.has(D)&&m.get(D).name)===c&&L.toLowerCase().trim()===E})}))throw new b("feature-store:unsupported-query",
"expressions in having should also exist in outStatistics",{having:r});return!0};l.validateWhere=function(m,r){if(!r)return!0;const C=g.get(r,m);if(!C)throw new b("feature-store:unsupported-query","invalid SQL expression",{where:r});if(!C.isStandardized)throw new b("feature-store:unsupported-query","where clause is not standard",{where:r});q(m,C.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/sql/WhereClauseCache":function(){define(["exports",
"../ItemCache","./WhereClause"],function(l,b,B){let N=function(){function q(n,g){this._cache=new b(n);this._invalidCache=new b(g)}q.prototype.get=function(n,g){const G=`${g.uid}:${n}`,m=this._cache.get(G);if(m)return m;if(void 0!==this._invalidCache.get(G))return null;try{const r=B.WhereClause.create(n,g);this._cache.put(G,r);return r}catch{return this._invalidCache.put(G,null),null}};return q}();l.WhereClauseCache=N;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],
function(l){return function(){function b(N,q){this._storage=new l.MemCacheStorage;this._storage.maxSize=N;q&&this._storage.registerRemoveFunc("",q)}var B=b.prototype;B.put=function(N,q){this._storage.put(N,q,1,1)};B.pop=function(N){return this._storage.pop(N)};B.get=function(N){return this._storage.get(N)};B.clear=function(){this._storage.clearAll()};B.destroy=function(){this._storage.destroy()};return b}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),
function(l,b,B,N,q,n){function g(K,h){K+="";return K.length>=h?K:Array(h-K.length+1).join("0")+K}function G(K,h,p="0",J="0",U="0",da="0",ja="",ka="0",oa="0"){return"+"===ja||"-"===ja?(K=`${g(parseInt(K,10),4)}-${g(parseInt(h,10),2)}-${g(parseInt(p,10),2)}`,h="",10>parseFloat(da)&&(h="0"),J=`${g(parseInt(J,10),2)}:${g(parseInt(U,10),2)}:${h+parseFloat(da).toString()}`,ja=`${ja}${g(parseInt(ka,10),2)}:${g(parseInt(oa,10),2)}`,new Date(K+"T"+J+ja)):new Date(parseInt(K,10),parseInt(h,10)-1,parseInt(p,
10),parseInt(J,10),parseInt(U,10),parseFloat(da))}function m(K){let h=I.exec(K);if(null!==h){const [,p,J,U,da,ja,ka]=h;return G(p,J,U,da,ja,ka)}h=W.exec(K);if(null!==h){const [,p,J,U,da,ja,ka,oa,ua,ra]=h;return G(p,J,U,da,ja,ka,oa,ua,ra)}h=M.exec(K);if(null!==h){const [,p,J,U,da,ja,ka,oa,ua]=h;return G(p,J,U,da,ja,"0",ka,oa,ua)}h=k.exec(K);if(null!==h){const [,p,J,U,da,ja]=h;return G(p,J,U,da,ja)}h=H.exec(K);if(null!==h){const [,p,J,U]=h;return G(p,J,U)}throw Error("SQL Invalid Timestamp");}function r(K){K=
H.exec(K);if(null===K)throw Error("SQL Invalid Date");const [,h,p,J]=K;return new Date(parseInt(h,10),parseInt(p,10)-1,parseInt(J,10))}function C(K){return Array.isArray(K)?K:[K]}function Q(K){return null!==K?!0!==K:null}function z(K,h){return null!=K&&null!=h?!0===K&&!0===h:!1===K||!1===h?!1:null}function E(K,h){return null!=K&&null!=h?!0===K||!0===h:!0===K||!0===h?!0:null}function O(K,h){if(null==K)return null;let p=!1;for(const J of h)if(null==J)p=null;else if(K===J){p=!0;break}return p}function c(K,
h,p){if(null==K)return null;let J="",U=0;for(let da=0;da<h.length;da++){const ja=h.charAt(da);switch(U){case 0:ja===p?U=1:J=0<="-[]/{}()*+?.\\^$|".indexOf(ja)?J+("\\"+ja):"%"===ja?J+".*":"_"===ja?J+".":J+ja;break;case 1:J=0<="-[]/{}()*+?.\\^$|".indexOf(ja)?J+("\\"+ja):J+ja,U=0}}return(new RegExp("^"+J+"$")).test(K)}function u(K){return K instanceof Date?K.valueOf():K}function D(K,h,p){if(null==h||null==p)return null;h=u(h);p=u(p);switch(K){case "\x3c\x3e":return h!==p;case "\x3d":return h===p;case "\x3e":return h>
p;case "\x3c":return h<p;case "\x3e\x3d":return h>=p;case "\x3c\x3d":return h<=p}}function L(K,h,p){if(h instanceof q.SqlInterval)if(p instanceof Date)switch(K){case "+":return new Date(h.valueInMilliseconds()+p.getTime());case "-":return h.valueInMilliseconds()-p.getTime();case "*":return h.valueInMilliseconds()*p.getTime();case "/":return h.valueInMilliseconds()/p.getTime()}else if(p instanceof q.SqlInterval)switch(K){case "+":return q.SqlInterval.createFromMilliseconds(h.valueInMilliseconds()+
p.valueInMilliseconds());case "-":return q.SqlInterval.createFromMilliseconds(h.valueInMilliseconds()-p.valueInMilliseconds());case "*":return h.valueInMilliseconds()*p.valueInMilliseconds();case "/":return h.valueInMilliseconds()/p.valueInMilliseconds()}else h=h.valueInMilliseconds();else if(p instanceof q.SqlInterval)if(h instanceof Date)switch(K){case "+":return new Date(p.valueInMilliseconds()+h.getTime());case "-":return new Date(h.getTime()-p.valueInMilliseconds());case "*":return h.getTime()*
p.valueInMilliseconds();case "/":return h.getTime()/p.valueInMilliseconds()}else p=p.valueInMilliseconds();else if(h instanceof Date&&"number"===typeof p)switch(p*=864E5,h=h.getTime(),K){case "+":return new Date(h+p);case "-":return new Date(h-p);case "*":return new Date(h*p);case "/":return new Date(h/p)}else if(p instanceof Date&&"number"===typeof h)switch(h*=864E5,p=p.getTime(),K){case "+":return new Date(h+p);case "-":return new Date(h-p);case "*":return new Date(h*p);case "/":return new Date(h/
p)}switch(K){case "+":return h+p;case "-":return h-p;case "*":return h*p;case "/":return h/p}}function A(K,h,p,J){K=J.getAttribute(K,h);return null!=K&&1===p[h]?new Date(K):K}const H=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,I=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,W=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,M=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,k=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,
t=new Set(["current_timestamp","current_date","current_time"]);let e=function(){function K(){}K.makeBool=function(h){return!0===h};K.featureValue=function(h,p,J,U){return A(h,p,J,U)};K.equalsNull=function(h){return null===h};K.applyLike=function(h,p,J){return c(h,p,J)};K.ensureArray=function(h){return C(h)};K.applyIn=function(h,p){return O(h,p)};K.currentDate=function(){const h=new Date;h.setHours(0,0,0,0);return h};K.makeSqlInterval=function(h,p,J){return q.SqlInterval.createFromValueAndQualifer(h,
p,J)};K.convertInterval=function(h){return h instanceof q.SqlInterval?h.valueInMilliseconds():h};K.currentTimestamp=function(){return new Date};K.compare=function(h,p,J){return D(h,p,J)};K.calculate=function(h,p,J){return L(h,p,J)};K.makeComparable=function(h){return u(h)};K.evaluateFunction=function(h,p){return q.evaluateFunction(h,p)};K.lookup=function(h,p){h=p[h];return void 0===h?null:h};K.between=function(h,p){return null==h||null==p[0]||null==p[1]?null:h>=p[0]&&h<=p[1]};K.notbetween=function(h,
p){return null==h||null==p[0]||null==p[1]?null:h<p[0]||h>p[1]};K.ternaryNot=function(h){return Q(h)};K.ternaryAnd=function(h,p){return z(h,p)};K.ternaryOr=function(h,p){return E(h,p)};return K}(),x=function(){function K(p,J){this.fieldsIndex=J;this.datefields={};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=n.WhereGrammar.parse(p);const {isStandardized:U,isAggregate:da,referencedFieldNames:ja}=this.extractExpressionInfo(J);this.referencedFieldNames=ja;this.isStandardized=U;this.isAggregate=
da}K.create=function(p,J){return new K(p,J)};var h=K.prototype;h.testSet=function(p,J=F){const U={};for(const da of this.fieldNames)U[da]=p.map(ja=>J.getAttribute(ja,da));return!!this.evaluateNode(this.parseTree,{attributes:U},F)};h.calculateValue=function(p,J=F){p=this.evaluateNode(this.parseTree,p,J);return p instanceof q.SqlInterval?p.valueInMilliseconds()/864E5:p};h.calculateValueCompiled=function(p,J=F){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(p,this.parameters,
J,this.datefields);if(B("csp-restrictions"))return this.calculateValue(p,J);this.compileMe();return this.parseTree._compiledVersion(p,this.parameters,J,this.datefields)};h.testFeature=function(p,J=F){return!!this.evaluateNode(this.parseTree,p,J)};h.testFeatureCompiled=function(p,J=F){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(p,this.parameters,J,this.datefields);if(B("csp-restrictions"))return this.testFeature(p,J);this.compileMe();return!!this.parseTree._compiledVersion(p,
this.parameters,J,this.datefields)};h.getFunctions=function(){const p=new Set;this.visitAll(this.parseTree,J=>{"function"===J.type&&p.add(J.name.toLowerCase())});return Array.from(p)};h.getExpressions=function(){const p=new Map;this.visitAll(this.parseTree,J=>{if("function"===J.type){const U=J.name.toLowerCase();J=J.args.value[0];if("column_ref"===J.type){J=J.column;const da=`${U}-${J}`;p.has(da)||p.set(da,{aggregateType:U,field:J})}}});return[...p.values()]};h.getVariables=function(){const p=new Set;
this.visitAll(this.parseTree,J=>{"param"===J.type&&p.add(J.value.toLowerCase())});return Array.from(p)};h.compileMe=function(){const p="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",p)).bind(e)};h.extractExpressionInfo=function(p){const J=[],U=new Set;let da=!0,ja=!0;this.visitAll(this.parseTree,ka=>{switch(ka.type){case "column_ref":{const oa=p.get(ka.column);let ua,
ra;oa?ua=ra=oa.name:(ra=ka.column,ua=ra.toLowerCase());!oa||"date"!==oa.type&&"esriFieldTypeDate"!==oa.type||(this.datefields[oa.name]=1);U.has(ua)||(U.add(ua),J.push(ra));ka.column=ra;break}case "function":{const {name:oa,args:ua}=ka;ka=ua.value.length;da&&(da=q.isStandardized(oa,ka));ja&&(ja=N.isAggregate(oa,ka))}}});return{referencedFieldNames:Array.from(J),isStandardized:da,isAggregate:ja}};h.visitAll=function(p,J){if(null!=p)switch(J(p),p.type){case "when_clause":this.visitAll(p.operand,J);this.visitAll(p.value,
J);break;case "case_expression":for(const U of p.clauses)this.visitAll(U,J);"simple"===p.format&&this.visitAll(p.operand,J);null!==p.else&&this.visitAll(p.else,J);break;case "expr_list":for(const U of p.value)this.visitAll(U,J);break;case "unary_expr":this.visitAll(p.expr,J);break;case "binary_expr":this.visitAll(p.left,J);this.visitAll(p.right,J);break;case "function":this.visitAll(p.args,J)}};h.evaluateNodeToJavaScript=function(p){switch(p.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(p.value)+
", "+JSON.stringify(p.qualifier)+","+JSON.stringify(p.op)+")";case "case_expression":var J="";if("simple"===p.format){var U="this.makeComparable("+this.evaluateNodeToJavaScript(p.operand)+")";J="( ";for(let da=0;da<p.clauses.length;da++)J+=" ("+U+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(p.clauses[da].operand)+")) ? ("+this.evaluateNodeToJavaScript(p.clauses[da].value)+") : "}else for(J="( ",U=0;U<p.clauses.length;U++)J+=" this.makeBool("+this.evaluateNodeToJavaScript(p.clauses[U].operand)+
")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(p.clauses[U].value)+") : ";J=null!==p.else?J+this.evaluateNodeToJavaScript(p.else):J+"null";return J+=" )";case "param":return"this.lookup("+JSON.stringify(p.value.toLowerCase())+",lookups)";case "expr_list":J="[";for(U of p.value)"["!==J&&(J+=","),J+=this.evaluateNodeToJavaScript(U);return J+="]";case "unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(p.expr)+")";case "binary_expr":switch(p.operator){case "AND":return"this.ternaryAnd("+
this.evaluateNodeToJavaScript(p.left)+","+this.evaluateNodeToJavaScript(p.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(p.left)+","+this.evaluateNodeToJavaScript(p.right)+" )";case "IS":if("null"!==p.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(p.left)+")";case "ISNOT":if("null"!==p.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(p.left)+")))";case "IN":return"this.applyIn("+
this.evaluateNodeToJavaScript(p.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(p.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(p.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(p.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(p.left)+","+this.evaluateNodeToJavaScript(p.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(p.left)+","+this.evaluateNodeToJavaScript(p.right)+
")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(p.left)+","+this.evaluateNodeToJavaScript(p.right)+","+JSON.stringify(p.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(p.left)+","+this.evaluateNodeToJavaScript(p.right)+","+JSON.stringify(p.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(p.operator)+","+this.evaluateNodeToJavaScript(p.left)+","+
this.evaluateNodeToJavaScript(p.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(p.operator)+","+this.evaluateNodeToJavaScript(p.left)+","+this.evaluateNodeToJavaScript(p.right)+")"}throw Error("Not Supported Operator "+p.operator);case "null":case "bool":case "string":case "number":return JSON.stringify(p.value);case "date":return"(new Date("+r(p.value).getTime().toString()+"))";case "timestamp":return"(new Date("+m(p.value).getTime().toString()+"))";case "current_time":return"date"===
p.mode?"this.currentDate()":"this.currentTimestamp()";case "column_ref":return"this.featureValue(feature,"+JSON.stringify(p.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(p.name)+","+this.evaluateNodeToJavaScript(p.args)+")"}throw Error("Unsupported sql syntax "+p.type);};h.evaluateNode=function(p,J,U){switch(p.type){case "interval":return J=this.evaluateNode(p.value,J,U),q.SqlInterval.createFromValueAndQualifer(J,p.qualifier,p.op);case "case_expression":if("simple"===
p.format){var da=u(this.evaluateNode(p.operand,J,U));for(var ja=0;ja<p.clauses.length;ja++)if(da===u(this.evaluateNode(p.clauses[ja].operand,J,U)))return this.evaluateNode(p.clauses[ja].value,J,U)}else for(da=0;da<p.clauses.length;da++)if(!0===this.evaluateNode(p.clauses[da].operand,J,U))return this.evaluateNode(p.clauses[da].value,J,U);return null!==p.else?this.evaluateNode(p.else,J,U):null;case "param":return this.parameters[p.value.toLowerCase()];case "expr_list":da=[];for(ja of p.value)da.push(this.evaluateNode(ja,
J,U));return da;case "unary_expr":return Q(this.evaluateNode(p.expr,J,U));case "binary_expr":switch(p.operator){case "AND":return z(this.evaluateNode(p.left,J,U),this.evaluateNode(p.right,J,U));case "OR":return E(this.evaluateNode(p.left,J,U),this.evaluateNode(p.right,J,U));case "IS":if("null"!==p.right.type)throw Error("Unsupported RHS for IS");return null===this.evaluateNode(p.left,J,U);case "ISNOT":if("null"!==p.right.type)throw Error("Unsupported RHS for IS");return null!==this.evaluateNode(p.left,
J,U);case "IN":return da=C(this.evaluateNode(p.right,J,U)),O(this.evaluateNode(p.left,J,U),da);case "NOT IN":return da=C(this.evaluateNode(p.right,J,U)),Q(O(this.evaluateNode(p.left,J,U),da));case "BETWEEN":return da=this.evaluateNode(p.left,J,U),p=this.evaluateNode(p.right,J,U),null==da||null==p[0]||null==p[1]?null:da>=u(p[0])&&da<=u(p[1]);case "NOTBETWEEN":return da=this.evaluateNode(p.left,J,U),p=this.evaluateNode(p.right,J,U),null==da||null==p[0]||null==p[1]?null:da<u(p[0])||da>u(p[1]);case "LIKE":return c(this.evaluateNode(p.left,
J,U),this.evaluateNode(p.right,J,U),p.escape);case "NOT LIKE":return Q(c(this.evaluateNode(p.left,J,U),this.evaluateNode(p.right,J,U),p.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return D(p.operator,this.evaluateNode(p.left,J,U),this.evaluateNode(p.right,J,U));case "-":case "+":case "*":case "/":return L(p.operator,this.evaluateNode(p.left,J,U),this.evaluateNode(p.right,J,U))}case "null":case "bool":case "string":case "number":return p.value;case "date":return r(p.value);
case "timestamp":return m(p.value);case "current_time":return J=new Date,"date"===p.mode&&J.setHours(0,0,0,0),J;case "column_ref":return A(J,p.column,this.datefields,U);case "function":return J=this.evaluateNode(p.args,J,U),this.isAggregate?N.aggregateFunction(p.name,J):q.evaluateFunction(p.name,J)}throw Error("Unsupported sql syntax "+p.type);};b._createClass(K,[{key:"fieldNames",get:function(){return this.referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;
this._hasDateFunctions=!1;this.visitAll(this.parseTree,p=>{"current_time"===p.type?this._hasDateFunctions=!0:"function"===p.type&&(this._hasDateFunctions=this._hasDateFunctions||t.has(p.name.toLowerCase()))});return this._hasDateFunctions}}]);return K}();const F={getAttribute(K,h){return(K&&"object"===typeof K.attributes?K.attributes:K)[h]}};l.WhereClause=x;l.defaultAttributeAdapter=F;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],
function(l){function b(q){let n=0;for(let g=0;g<q.length;g++)n+=q[g];return n/q.length}function B(q){const n=b(q),g=q.length;let G=0;for(const m of q)G+=(m-n)**2;return 1<g?G/(g-1):0}const N={min:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.min.apply(Math,q[0])},max:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.max.apply(Math,q[0])},avg:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:b(q[0])},sum:{minParams:1,maxParams:1,evaluate:q=>{if(null==q[0])q=null;else{{q=q[0];
let n=0;for(let g=0;g<q.length;g++)n+=q[g];q=n}}return q}},stddev:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.sqrt(B(q[0]))},count:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:q[0].length},var:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:B(q[0])}};l.aggregateFunction=function(q,n){const g=N[q.toLowerCase()];if(null==g)throw Error("Function Not Recognised");if(n.length<g.minParams||n.length>g.maxParams)throw Error(`Invalid Parameter count for call to ${q.toUpperCase()}`);
return g.evaluate(n)};l.isAggregate=function(q,n){q=N[q.toLowerCase()];return null!=q&&n>=q.minParams&&n<=q.maxParams};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(l,b){let B=function(){function q(){this.op="+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}q.fixDefaults=function(n){if(null!==n.precision||null!==n.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");
};q.createFromMilliseconds=function(n){const g=new q;g.second=n/1E3;return g};q.createFromValueAndQualifer=function(n,g,G){let m=null;const r=new q;r.op="-"===G?"-":"+";if("interval-period"===g.type){q.fixDefaults(g);if("year"===g.period||"month"===g.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(n))r[g.period]=parseFloat(n);else throw Error("Illegal Interval");}else{q.fixDefaults(g.start);q.fixDefaults(g.end);if("year"===g.start.period||"month"===g.start.period)throw Error("Year-Month Intervals not supported");
if("year"===g.end.period||"month"===g.end.period)throw Error("Year-Month Intervals not supported");switch(g.start.period){case "day":switch(g.end.period){case "hour":m=/^[0-9]{1,} [0-9]{1,}$/;if(m.test(n))r[g.start.period]=parseFloat(n.split(" ")[0]),r[g.end.period]=parseFloat(n.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":m=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(m.test(n))r[g.start.period]=parseFloat(n.split(" ")[0]),n=n.split(" ")[1].split(":"),r.hour=parseFloat(n[0]),
r.minute=parseFloat(n[1]);else throw Error("Illegal Interval");break;case "second":m=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(m.test(n))r[g.start.period]=parseFloat(n.split(" ")[0]),n=n.split(" ")[1].split(":"),r.hour=parseFloat(n[0]),r.minute=parseFloat(n[1]),r.second=parseFloat(n[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "hour":switch(g.end.period){case "minute":m=/^[0-9]{1,}:[0-9]{1,}$/;if(m.test(n))r.hour=parseFloat(n.split(":")[0]),
r.minute=parseFloat(n.split(":")[1]);else throw Error("Illegal Interval");break;case "second":m=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(m.test(n))n=n.split(":"),r.hour=parseFloat(n[0]),r.minute=parseFloat(n[1]),r.second=parseFloat(n[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "minute":switch(g.end.period){case "second":m=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(m.test(n))n=n.split(":"),r.minute=parseFloat(n[0]),r.second=parseFloat(n[1]);
else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;default:throw"Invalid Interval.";}}return r};q.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return q}();const N={extract:{minParams:2,maxParams:2,evaluate:([q,n])=>{if(null==n)return null;if(n instanceof Date)switch(q.toUpperCase()){case "SECOND":return n.getSeconds();case "MINUTE":return n.getMinutes();
case "HOUR":return n.getHours();case "DAY":return n.getDate();case "MONTH":return n.getMonth()+1;case "YEAR":return n.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:q=>{if(2===q.length){const [n,g]=q;return null==n||null==g?null:n.toString().substring(g-1)}if(3===q.length){const [n,g,G]=q;return null==n||null==g||null==G?null:0>=G?"":n.toString().substring(g-1,g+G-1)}}},position:{minParams:2,maxParams:2,evaluate:([q,n])=>null==q||
null==n?null:n.indexOf(q)+1},trim:{minParams:2,maxParams:3,evaluate:q=>{var n=3===q.length,g=n?q[1]:" ";n=n?q[2]:q[1];if(null==g||null==n)return null;g=`(${b.escapeRegExpString(g)})`;switch(q[0]){case "BOTH":return n.replace(new RegExp(`^${g}*|${g}*$`,"g"),"");case "LEADING":return n.replace(new RegExp(`^${g}*`,"g"),"");case "TRAILING":return n.replace(new RegExp(`${g}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.abs(q[0])},
ceiling:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.ceil(q[0])},floor:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.floor(q[0])},log:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.log(q[0])},log10:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.log(q[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.sin(q[0])},cos:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.cos(q[0])},tan:{minParams:1,maxParams:1,evaluate:q=>
null==q[0]?null:Math.tan(q[0])},asin:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.asin(q[0])},acos:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.acos(q[0])},atan:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.atan(q[0])},sign:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:0<q[0]?1:0>q[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:q=>null==q[0]||null==q[1]?null:q[0]**q[1]},mod:{minParams:2,maxParams:2,evaluate:q=>null==q[0]||null==q[1]?null:q[0]%q[1]},round:{minParams:1,
maxParams:2,evaluate:q=>{const n=q[0];q=2===q.length?10**q[1]:1;return null==n?null:Math.round(n*q)/q}},truncate:{minParams:1,maxParams:2,evaluate:q=>null==q[0]?null:1===q.length?parseInt(q[0].toFixed(0),10):parseFloat(q[0].toFixed(q[1]))},char_length:{minParams:1,maxParams:1,evaluate:q=>"string"===typeof q[0]||q[0]instanceof String?q[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:q=>{let n="";for(let g=0;g<q.length;g++){if(null==q[g])return null;n+=q[g].toString()}return n}},lower:{minParams:1,
maxParams:1,evaluate:q=>null==q[0]?null:q[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:q[0].toString().toUpperCase()}};l.SqlInterval=B;l.evaluateFunction=function(q,n){const g=N[q.toLowerCase()];if(null==g)throw Error("Function Not Recognised");if(n.length<g.minParams||n.length>g.maxParams)throw Error(`Invalid Parameter count for call to ${q.toUpperCase()}`);return g.evaluate(n)};l.isStandardized=function(q,n){q=N[q.toLowerCase()];return null!=q&&n>=q.minParams&&
n<=q.maxParams};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(l,b){var B={exports:{}};(function(q){(function(n,g){q.exports&&(q.exports=g())})(b.commonjsGlobal,function(){function n(g,G,m,r){this.message=g;this.expected=G;this.found=m;this.location=r;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,n)}(function(g,G){function m(){this.constructor=
g}m.prototype=G.prototype;g.prototype=new m})(n,Error);n.buildMessage=function(g,G){function m(z){return z.charCodeAt(0).toString(16).toUpperCase()}function r(z){return z.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+m(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+m(E)})}function C(z){return z.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,
"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+m(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+m(E)})}var Q={literal:function(z){return'"'+r(z.text)+'"'},class:function(z){var E="",O;for(O=0;O<z.parts.length;O++)E+=z.parts[O]instanceof Array?C(z.parts[O][0])+"-"+C(z.parts[O][1]):C(z.parts[O]);return"["+(z.inverted?"^":"")+E+"]"},any:function(z){return"any character"},end:function(z){return"end of input"},
other:function(z){return z.description}};return"Expected "+function(z){var E=Array(z.length),O;for(O=0;O<z.length;O++){var c=O;var u=z[O];u=Q[u.type](u);E[c]=u}E.sort();if(0<E.length){for(z=O=1;O<E.length;O++)E[O-1]!==E[O]&&(E[z]=E[O],z++);E.length=z}switch(E.length){case 1:return E[0];case 2:return E[0]+" or "+E[1];default:return E.slice(0,-1).join(", ")+", or "+E[E.length-1]}}(g)+" but "+(G?'"'+r(G)+'"':"end of input")+" found."};return{SyntaxError:n,parse:function(g,G){function m(w,T){return{type:"literal",
text:w,ignoreCase:T}}function r(w,T,S){return{type:"class",parts:w,inverted:T,ignoreCase:S}}function C(w){var T=ec[w],S;if(!T){for(S=w-1;!ec[S];)S--;T=ec[S];for(T={line:T.line,column:T.column};S<w;)10===g.charCodeAt(S)?(T.line++,T.column=1):T.column++,S++;ec[w]=T}return T}function Q(w,T){var S=C(w),fa=C(T);return{start:{offset:w,line:S.line,column:S.column},end:{offset:T,line:fa.line,column:fa.column}}}function z(w){d<tb||(d>tb&&(tb=d,vc=[]),vc.push(w))}function E(){var w=d;var T=pa();if(T!==a)if(T=
c(),T!==a){var S=pa();S!==a?w=T:(d=w,w=a)}else d=w,w=a;else d=w,w=a;return w}function O(){var w=d;var T=c();if(T!==a){var S=[];var fa=d;var sa=pa();if(sa!==a){var Ba=Ea();if(Ba!==a){var Ga=pa();if(Ga!==a){var Ma=c();Ma!==a?fa=sa=[sa,Ba,Ga,Ma]:(d=fa,fa=a)}else d=fa,fa=a}else d=fa,fa=a}else d=fa,fa=a;for(;fa!==a;)S.push(fa),fa=d,sa=pa(),sa!==a?(Ba=Ea(),Ba!==a?(Ga=pa(),Ga!==a?(Ma=c(),Ma!==a?fa=sa=[sa,Ba,Ga,Ma]:(d=fa,fa=a)):(d=fa,fa=a)):(d=fa,fa=a)):(d=fa,fa=a);if(S!==a){w={type:"expr_list"};T=[T];for(fa=
0;fa<S.length;fa++)T.push(S[fa][3]);w.value=T}else d=w,w=a}else d=w,w=a;return w}function c(){var w=d;var T=u();if(T!==a){var S=[];var fa=d;var sa=pa();if(sa!==a){var Ba=P();if(Ba!==a){var Ga=pa();if(Ga!==a){var Ma=u();Ma!==a?fa=sa=[sa,Ba,Ga,Ma]:(d=fa,fa=a)}else d=fa,fa=a}else d=fa,fa=a}else d=fa,fa=a;for(;fa!==a;)S.push(fa),fa=d,sa=pa(),sa!==a?(Ba=P(),Ba!==a?(Ga=pa(),Ga!==a?(Ma=u(),Ma!==a?fa=sa=[sa,Ba,Ga,Ma]:(d=fa,fa=a)):(d=fa,fa=a)):(d=fa,fa=a)):(d=fa,fa=a);S!==a?w=T=ab(T,S):(d=w,w=a)}else d=w,
w=a;return w}function u(){var w=d;var T=D();if(T!==a){var S=[];var fa=d;var sa=pa();if(sa!==a){var Ba=v();if(Ba!==a){var Ga=pa();if(Ga!==a){var Ma=D();Ma!==a?fa=sa=[sa,Ba,Ga,Ma]:(d=fa,fa=a)}else d=fa,fa=a}else d=fa,fa=a}else d=fa,fa=a;for(;fa!==a;)S.push(fa),fa=d,sa=pa(),sa!==a?(Ba=v(),Ba!==a?(Ga=pa(),Ga!==a?(Ma=D(),Ma!==a?fa=sa=[sa,Ba,Ga,Ma]:(d=fa,fa=a)):(d=fa,fa=a)):(d=fa,fa=a)):(d=fa,fa=a);S!==a?w=T=ab(T,S):(d=w,w=a)}else d=w,w=a;return w}function D(){var w=d;var T=ba();if(T===a){T=d;if(33===g.charCodeAt(d)){var S=
Qa;d++}else S=a,0===qa&&z(vb);if(S!==a){var fa=d;qa++;if(61===g.charCodeAt(d)){var sa=yb;d++}else sa=a,0===qa&&z(Fb);qa--;sa===a?fa=void 0:(d=fa,fa=a);fa!==a?T=S=[S,fa]:(d=T,T=a)}else d=T,T=a}T!==a?(S=pa(),S!==a?(fa=D(),fa!==a?w=T={type:"unary_expr",operator:"NOT",expr:fa}:(d=w,w=a)):(d=w,w=a)):(d=w,w=a);if(w===a)if(w=d,T=I(),T!==a)if(S=pa(),S!==a){S=[];fa=d;sa=pa();if(sa!==a){var Ba=L();if(Ba!==a){var Ga=pa();if(Ga!==a){var Ma=I();Ma!==a?fa=sa=[sa,Ba,Ga,Ma]:(d=fa,fa=a)}else d=fa,fa=a}else d=fa,fa=
a}else d=fa,fa=a;if(fa!==a)for(;fa!==a;)S.push(fa),fa=d,sa=pa(),sa!==a?(Ba=L(),Ba!==a?(Ga=pa(),Ga!==a?(Ma=I(),Ma!==a?fa=sa=[sa,Ba,Ga,Ma]:(d=fa,fa=a)):(d=fa,fa=a)):(d=fa,fa=a)):(d=fa,fa=a);else S=a;S!==a&&(S={type:"arithmetic",tail:S});S===a&&(S=d,fa=H(),fa!==a?(sa=pa(),sa!==a?(sa=za(),sa!==a?(sa=pa(),sa!==a?(sa=O(),sa!==a?(Ba=pa(),Ba!==a?(Ba=Da(),Ba!==a?S=fa={op:fa,right:sa}:(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a),S===a&&(S=d,fa=H(),fa!==a?(sa=pa(),sa!==a?(sa=za(),
sa!==a?(sa=pa(),sa!==a?(sa=Da(),sa!==a?S=fa={op:fa,right:{type:"expr_list",value:[]}}:(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a),S===a&&(S=d,fa=H(),fa!==a?(sa=pa(),sa!==a?(sa=h(),sa!==a?S=fa={op:fa,right:sa}:(d=S,S=a)):(d=S,S=a)):(d=S,S=a))),S===a&&(S=d,sa=ba(),sa!==a?(fa=pa(),fa!==a?(fa=X(),fa!==a?(Ba=pa(),Ba!==a?(Ba=I(),Ba!==a?(Ga=pa(),Ga!==a?(Ga=v(),Ga!==a?(sa=pa(),sa!==a?(sa=I(),sa!==a?S=sa={op:"NOT"+fa,right:{type:"expr_list",value:[Ba,sa]}}:(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=
a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a),S===a&&(S=d,sa=X(),sa!==a?(fa=pa(),fa!==a?(fa=I(),fa!==a?(Ba=pa(),Ba!==a?(Ba=v(),Ba!==a?(Ga=pa(),Ga!==a?(Ga=I(),Ga!==a?S=sa={op:sa,right:{type:"expr_list",value:[fa,Ga]}}:(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a)),S===a&&(S=d,fa=f(),fa!==a?(sa=pa(),sa!==a?(sa=ba(),sa!==a?(sa=pa(),sa!==a?(sa=I(),sa!==a?S=fa={op:fa+"NOT",right:sa}:(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a),S===a&&(S=d,fa=f(),fa!==
a?(sa=pa(),sa!==a?(sa=I(),sa!==a?S=fa={op:fa,right:sa}:(d=S,S=a)):(d=S,S=a)):(d=S,S=a)),S===a&&(S=d,fa=A(),fa!==a?(sa=pa(),sa!==a?(sa=ka(),sa!==a?(Ba=pa(),Ba!==a?(Ba=d,g.substr(d,6).toLowerCase()===zd?(Ga=g.substr(d,6),d+=6):(Ga=a,0===qa&&z(Ad)),Ga!==a?(Ga=d,qa++,Ma=F(),qa--,Ma===a?Ga=void 0:(d=Ga,Ga=a),Ga!==a?Ba="ESCAPE":(d=Ba,Ba=a)):(d=Ba,Ba=a),Ba!==a?(Ba=pa(),Ba!==a?(Ba=oa(),Ba!==a?S=fa={op:fa,right:sa,escape:Ba.value}:(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a),
S===a&&(S=d,fa=A(),fa!==a?(sa=pa(),sa!==a?(sa=ka(),sa!==a?S=fa={op:fa,right:sa,escape:""}:(d=S,S=a)):(d=S,S=a)):(d=S,S=a))))));S===a&&(S=null);S!==a?(w=T,T=S,""==T||void 0==T||null==T?T=w:(S=null,T=S="arithmetic"==T.type?ab(w,T.tail):eb(T.op,w,T.right,T.escape)),w=T):(d=w,w=a)}else d=w,w=a;else d=w,w=a;return w}function L(){if(g.substr(d,2)===fc){var w=fc;d+=2}else w=a,0===qa&&z(mb);w===a&&(62===g.charCodeAt(d)?(w=zb,d++):(w=a,0===qa&&z(Ua)),w===a&&(g.substr(d,2)===kb?(w=kb,d+=2):(w=a,0===qa&&z(ub)),
w===a&&(g.substr(d,2)===Oa?(w=Oa,d+=2):(w=a,0===qa&&z(Gb)),w===a&&(60===g.charCodeAt(d)?(w=aa,d++):(w=a,0===qa&&z(ia)),w===a&&(61===g.charCodeAt(d)?(w=yb,d++):(w=a,0===qa&&z(Fb)),w===a&&(g.substr(d,2)===Z?(w=Z,d+=2):(w=a,0===qa&&z(la))))))));return w}function A(){var w=w=d;var T=ba();if(T!==a){var S=pa();if(S!==a){var fa=y();fa!==a?w=T=[T,S,fa]:(d=w,w=a)}else d=w,w=a}else d=w,w=a;w!==a&&(w=w[0]+" "+w[2]);w===a&&(w=y());return w}function H(){var w=w=d;var T=ba();if(T!==a){var S=pa();if(S!==a){var fa=
gb();fa!==a?w=T=[T,S,fa]:(d=w,w=a)}else d=w,w=a}else d=w,w=a;w!==a&&(w=w[0]+" "+w[2]);w===a&&(w=gb());return w}function I(){var w=d;var T=M();if(T!==a){var S=[];var fa=d;var sa=pa();if(sa!==a){var Ba=W();if(Ba!==a){var Ga=pa();if(Ga!==a){var Ma=M();Ma!==a?fa=sa=[sa,Ba,Ga,Ma]:(d=fa,fa=a)}else d=fa,fa=a}else d=fa,fa=a}else d=fa,fa=a;for(;fa!==a;)S.push(fa),fa=d,sa=pa(),sa!==a?(Ba=W(),Ba!==a?(Ga=pa(),Ga!==a?(Ma=M(),Ma!==a?fa=sa=[sa,Ba,Ga,Ma]:(d=fa,fa=a)):(d=fa,fa=a)):(d=fa,fa=a)):(d=fa,fa=a);S!==a?w=
T=ab(T,S):(d=w,w=a)}else d=w,w=a;return w}function W(){if(43===g.charCodeAt(d)){var w=va;d++}else w=a,0===qa&&z(xa);w===a&&(45===g.charCodeAt(d)?(w=Ha,d++):(w=a,0===qa&&z(La)));return w}function M(){var w=d;var T=t();if(T!==a){var S=[];var fa=d;var sa=pa();if(sa!==a){var Ba=k();if(Ba!==a){var Ga=pa();if(Ga!==a){var Ma=t();Ma!==a?fa=sa=[sa,Ba,Ga,Ma]:(d=fa,fa=a)}else d=fa,fa=a}else d=fa,fa=a}else d=fa,fa=a;for(;fa!==a;)S.push(fa),fa=d,sa=pa(),sa!==a?(Ba=k(),Ba!==a?(Ga=pa(),Ga!==a?(Ma=t(),Ma!==a?fa=
sa=[sa,Ba,Ga,Ma]:(d=fa,fa=a)):(d=fa,fa=a)):(d=fa,fa=a)):(d=fa,fa=a);S!==a?w=T=ab(T,S):(d=w,w=a)}else d=w,w=a;return w}function k(){if(42===g.charCodeAt(d)){var w=Za;d++}else w=a,0===qa&&z(Ya);w===a&&(47===g.charCodeAt(d)?(w=Xa,d++):(w=a,0===qa&&z(ib)));return w}function t(){var w=oa();if(w===a){var T=d;var S=d;var fa=Na();if(fa!==a){var sa=Ta();if(sa!==a){var Ba=Ka();Ba!==a?S=fa=parseFloat(fa+sa+Ba):(d=S,S=a)}else d=S,S=a}else d=S,S=a;S===a&&(S=d,fa=Na(),fa!==a?(sa=Ta(),sa!==a?S=fa=parseFloat(fa+
sa):(d=S,S=a)):(d=S,S=a),S===a&&(S=d,fa=Na(),fa!==a?(sa=Ka(),sa!==a?S=fa=parseFloat(fa+sa):(d=S,S=a)):(d=S,S=a),S===a&&(S=d,fa=Na(),fa!==a&&(fa=parseFloat(fa)),S=fa)));var Ga=S;if(Ga!==a){var Ma=d;qa++;var Bd=x();qa--;Bd===a?Ma=void 0:(d=Ma,Ma=a);Ma!==a?T=Ga={type:"number",value:Ga}:(d=T,T=a)}else d=T,T=a;w=T;if(w===a){var Rb=d;var Hb=d;if(g.substr(d,4).toLowerCase()===Cd){var gc=g.substr(d,4);d+=4}else gc=a,0===qa&&z(Dd);if(gc!==a){var Sb=d;qa++;var Ed=F();qa--;Ed===a?Sb=void 0:(d=Sb,Sb=a);Sb!==
a?Hb=gc=[gc,Sb]:(d=Hb,Hb=a)}else d=Hb,Hb=a;var Cb=Hb;Cb!==a&&(Cb={type:"bool",value:!0});Rb=Cb;if(Rb===a){Rb=d;var Ib=d;if(g.substr(d,5).toLowerCase()===Fd){var hc=g.substr(d,5);d+=5}else hc=a,0===qa&&z(Gd);if(hc!==a){var Tb=d;qa++;var Hd=F();qa--;Hd===a?Tb=void 0:(d=Tb,Tb=a);Tb!==a?Ib=hc=[hc,Tb]:(d=Ib,Ib=a)}else d=Ib,Ib=a;Cb=Ib;Cb!==a&&(Cb={type:"bool",value:!1});Rb=Cb}w=Rb;if(w===a){var Jb=d;if(g.substr(d,4).toLowerCase()===Id){var ic=g.substr(d,4);d+=4}else ic=a,0===qa&&z(Jd);if(ic!==a){var Ub=
d;qa++;var Kd=F();qa--;Kd===a?Ub=void 0:(d=Ub,Ub=a);Ub!==a?Jb=ic=[ic,Ub]:(d=Jb,Jb=a)}else d=Jb,Jb=a;var wc=Jb;wc!==a&&(wc={type:"null",value:null});w=wc;if(w===a){var Ab=d;var Kb=d;if(g.substr(d,4).toLowerCase()===Ld){var xc=g.substr(d,4);d+=4}else xc=a,0===qa&&z(Md);if(xc!==a){var jc=d;qa++;var Nd=F();qa--;Nd===a?jc=void 0:(d=jc,jc=a);jc!==a?Kb=xc="DATE":(d=Kb,Kb=a)}else d=Kb,Kb=a;var Wc=Kb;if(Wc!==a){var Od=pa();if(Od!==a){var Xc=ka();Xc!==a?Ab=Wc={type:"date",value:Xc.value}:(d=Ab,Ab=a)}else d=
Ab,Ab=a}else d=Ab,Ab=a;w=Ab;if(w===a){var Bb=d;var Lb=d;if(g.substr(d,9).toLowerCase()===Pd){var yc=g.substr(d,9);d+=9}else yc=a,0===qa&&z(Qd);if(yc!==a){var kc=d;qa++;var Rd=F();qa--;Rd===a?kc=void 0:(d=kc,kc=a);kc!==a?Lb=yc="TIMESTAMP":(d=Lb,Lb=a)}else d=Lb,Lb=a;var Yc=Lb;if(Yc!==a){var Sd=pa();if(Sd!==a){var Zc=ka();Zc!==a?Bb=Yc={type:"timestamp",value:Zc.value}:(d=Bb,Bb=a)}else d=Bb,Bb=a}else d=Bb,Bb=a;w=Bb;if(w===a){var Va=d;var Vb=ea();if(Vb!==a){var zc=pa();if(zc!==a){if(45===g.charCodeAt(d)){var wb=
Ha;d++}else wb=a,0===qa&&z(La);wb===a&&(43===g.charCodeAt(d)?(wb=va,d++):(wb=a,0===qa&&z(xa)));if(wb!==a){var Ac=pa();if(Ac!==a){var Wb=ka();if(Wb!==a){var Td=pa();if(Td!==a){var $c=J();$c!==a?Va=Vb={type:"interval",value:Wb,qualifier:$c,op:wb}:(d=Va,Va=a)}else d=Va,Va=a}else d=Va,Va=a}else d=Va,Va=a}else d=Va,Va=a}else d=Va,Va=a}else d=Va,Va=a;Va===a&&(Va=d,Vb=ea(),Vb!==a?(zc=pa(),zc!==a?(wb=ka(),wb!==a?(Ac=pa(),Ac!==a?(Wb=J(),Wb!==a?Va=Vb={type:"interval",value:wb,qualifier:Wb,op:""}:(d=Va,Va=a)):
(d=Va,Va=a)):(d=Va,Va=a)):(d=Va,Va=a)):(d=Va,Va=a));w=Va}}}}}}var Sa=w;if(Sa===a){var bb=d;var Mb=d;if(g.substr(d,7).toLowerCase()===Ud){var Bc=g.substr(d,7);d+=7}else Bc=a,0===qa&&z(Vd);if(Bc!==a){var lc=d;qa++;var Wd=F();qa--;Wd===a?lc=void 0:(d=lc,lc=a);lc!==a?Mb=Bc="EXTRACT":(d=Mb,Mb=a)}else d=Mb,Mb=a;var ad=Mb;if(ad!==a){var Xd=pa();if(Xd!==a){var Yd=za();if(Yd!==a){var Zd=pa();if(Zd!==a){var qb=R();qb===a&&(qb=V(),qb===a&&(qb=ca(),qb===a&&(qb=ma(),qb===a&&(qb=na(),qb===a&&(qb=ta())))));var bd=
qb;if(bd!==a){var $d=pa();if($d!==a){var ae=Y();if(ae!==a){var be=pa();if(be!==a){var cd=c();if(cd!==a){var ce=pa();if(ce!==a){var de=Da();de!==a?bb=ad={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:bd},cd]}}:(d=bb,bb=a)}else d=bb,bb=a}else d=bb,bb=a}else d=bb,bb=a}else d=bb,bb=a}else d=bb,bb=a}else d=bb,bb=a}else d=bb,bb=a}else d=bb,bb=a}else d=bb,bb=a}else d=bb,bb=a;Sa=bb;if(Sa===a){var $a=d;var Nb=d;if(g.substr(d,9).toLowerCase()===ee){var Cc=g.substr(d,9);d+=
9}else Cc=a,0===qa&&z(fe);if(Cc!==a){var mc=d;qa++;var ge=F();qa--;ge===a?mc=void 0:(d=mc,mc=a);mc!==a?Nb=Cc="SUBSTRING":(d=Nb,Nb=a)}else d=Nb,Nb=a;var dd=Nb;if(dd!==a){var he=pa();if(he!==a){var ie=za();if(ie!==a){var je=pa();if(je!==a){var Dc=c();if(Dc!==a){var ke=pa();if(ke!==a){var le=Y();if(le!==a){var me=pa();if(me!==a){var Ec=c();if(Ec!==a){var ne=pa();if(ne!==a){var lb=d;var Ob=d;if(g.substr(d,3).toLowerCase()===oe){var Fc=g.substr(d,3);d+=3}else Fc=a,0===qa&&z(pe);if(Fc!==a){var nc=d;qa++;
var qe=F();qa--;qe===a?nc=void 0:(d=nc,nc=a);nc!==a?Ob=Fc="FOR":(d=Ob,Ob=a)}else d=Ob,Ob=a;var Xb=Ob;if(Xb!==a){var ed=pa();if(ed!==a){var fd=c();if(fd!==a){var gd=pa();gd!==a?lb=Xb=[Xb,ed,fd,gd]:(d=lb,lb=a)}else d=lb,lb=a}else d=lb,lb=a}else d=lb,lb=a;lb===a&&(lb=null);lb!==a?(Xb=Da(),Xb!==a?$a=dd={type:"function",name:"substring",args:{type:"expr_list",value:lb?[Dc,Ec,lb[2]]:[Dc,Ec]}}:(d=$a,$a=a)):(d=$a,$a=a)}else d=$a,$a=a}else d=$a,$a=a}else d=$a,$a=a}else d=$a,$a=a}else d=$a,$a=a}else d=$a,$a=
a}else d=$a,$a=a}else d=$a,$a=a}else d=$a,$a=a}else d=$a,$a=a;Sa=$a;if(Sa===a){var Ja=d;var Yb=ha();if(Yb!==a){var Gc=pa();if(Gc!==a){var Hc=za();if(Hc!==a){var Ic=pa();if(Ic!==a){var rb=p();rb===a&&(rb=null);if(rb!==a){var Jc=pa();if(Jc!==a){var Zb=c();if(Zb!==a){var Kc=pa();if(Kc!==a){var Lc=Y();if(Lc!==a){var re=pa();if(re!==a){var hd=c();if(hd!==a){var se=pa();if(se!==a){var te=Da();te!==a?Ja=Yb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==rb?"BOTH":rb},
Zb,hd]}}:(d=Ja,Ja=a)}else d=Ja,Ja=a}else d=Ja,Ja=a}else d=Ja,Ja=a}else d=Ja,Ja=a}else d=Ja,Ja=a}else d=Ja,Ja=a}else d=Ja,Ja=a}else d=Ja,Ja=a}else d=Ja,Ja=a}else d=Ja,Ja=a}else d=Ja,Ja=a}else d=Ja,Ja=a;Ja===a&&(Ja=d,Yb=ha(),Yb!==a?(Gc=pa(),Gc!==a?(Hc=za(),Hc!==a?(Ic=pa(),Ic!==a?(rb=p(),rb===a&&(rb=null),rb!==a?(Jc=pa(),Jc!==a?(Zb=c(),Zb!==a?(Kc=pa(),Kc!==a?(Lc=Da(),Lc!==a?Ja=Yb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==rb?"BOTH":rb},Zb]}}:(d=Ja,Ja=a)):(d=
Ja,Ja=a)):(d=Ja,Ja=a)):(d=Ja,Ja=a)):(d=Ja,Ja=a)):(d=Ja,Ja=a)):(d=Ja,Ja=a)):(d=Ja,Ja=a)):(d=Ja,Ja=a));Sa=Ja;if(Sa===a){var cb=d;var Pb=d;if(g.substr(d,8).toLowerCase()===ue){var Mc=g.substr(d,8);d+=8}else Mc=a,0===qa&&z(ve);if(Mc!==a){var oc=d;qa++;var we=F();qa--;we===a?oc=void 0:(d=oc,oc=a);oc!==a?Pb=Mc="POSITION":(d=Pb,Pb=a)}else d=Pb,Pb=a;var id=Pb;if(id!==a){var xe=pa();if(xe!==a){var ye=za();if(ye!==a){var ze=pa();if(ze!==a){var jd=c();if(jd!==a){var Ae=pa();if(Ae!==a){var Be=gb();if(Be!==a){var Ce=
pa();if(Ce!==a){var kd=c();if(kd!==a){var De=pa();if(De!==a){var Ee=Da();Ee!==a?cb=id={type:"function",name:"position",args:{type:"expr_list",value:[jd,kd]}}:(d=cb,cb=a)}else d=cb,cb=a}else d=cb,cb=a}else d=cb,cb=a}else d=cb,cb=a}else d=cb,cb=a}else d=cb,cb=a}else d=cb,cb=a}else d=cb,cb=a}else d=cb,cb=a}else d=cb,cb=a;Sa=cb;if(Sa===a){var jb=d;var $b;var sb=d;sb=$b=e();if(sb===a)if(sb=d,96===g.charCodeAt(d)?($b=ld,d++):($b=a,0===qa&&z(md)),$b!==a){var pc=[];if(nd.test(g.charAt(d))){var xb=g.charAt(d);
d++}else xb=a,0===qa&&z(od);if(xb!==a)for(;xb!==a;)pc.push(xb),nd.test(g.charAt(d))?(xb=g.charAt(d),d++):(xb=a,0===qa&&z(od));else pc=a;pc!==a?(96===g.charCodeAt(d)?(xb=ld,d++):(xb=a,0===qa&&z(md)),xb!==a?sb=$b=pc.join(""):(d=sb,sb=a)):(d=sb,sb=a)}else d=sb,sb=a;var Nc=sb;if(Nc!==a){var Fe=pa();if(Fe!==a){var Ge=za();if(Ge!==a){var He=pa();if(He!==a){var ac=O();ac===a&&(ac=null);if(ac!==a){var Ie=pa();if(Ie!==a){var Je=Da();Je!==a?jb=Nc={type:"function",name:Nc,args:ac?ac:{type:"expr_list",value:[]}}:
(d=jb,jb=a)}else d=jb,jb=a}else d=jb,jb=a}else d=jb,jb=a}else d=jb,jb=a}else d=jb,jb=a}else d=jb,jb=a;Sa=jb;if(Sa===a){var nb;var Pa=d;var bc=wa();if(bc!==a){var Oc=pa();if(Oc!==a){var cc=c();if(cc!==a){var Pc=pa();if(Pc!==a){var Db=[];for(nb=ra();nb!==a;)Db.push(nb),nb=ra();if(Db!==a)if(nb=pa(),nb!==a){var qc=ya();qc!==a?Pa=bc={type:"case_expression",format:"simple",operand:cc,clauses:Db,else:null}:(d=Pa,Pa=a)}else d=Pa,Pa=a;else d=Pa,Pa=a}else d=Pa,Pa=a}else d=Pa,Pa=a}else d=Pa,Pa=a}else d=Pa,Pa=
a;if(Pa===a)if(Pa=d,bc=wa(),bc!==a)if(Oc=pa(),Oc!==a)if(cc=c(),cc!==a)if(Pc=pa(),Pc!==a){Db=[];for(nb=ra();nb!==a;)Db.push(nb),nb=ra();if(Db!==a)if(nb=pa(),nb!==a)if(qc=Aa(),qc!==a){var Ke=pa();if(Ke!==a){var Le=ya();Le!==a?Pa=bc={type:"case_expression",format:"simple",operand:cc,clauses:Db,else:qc.value}:(d=Pa,Pa=a)}else d=Pa,Pa=a}else d=Pa,Pa=a;else d=Pa,Pa=a;else d=Pa,Pa=a}else d=Pa,Pa=a;else d=Pa,Pa=a;else d=Pa,Pa=a;else d=Pa,Pa=a;var Qc=Pa;if(Qc===a){var ob;var Wa=d;var dc=wa();if(dc!==a){var Rc=
pa();if(Rc!==a){var Eb=[];for(ob=ua();ob!==a;)Eb.push(ob),ob=ua();if(Eb!==a)if(ob=pa(),ob!==a){var rc=ya();rc!==a?Wa=dc={type:"case_expression",format:"searched",clauses:Eb,else:null}:(d=Wa,Wa=a)}else d=Wa,Wa=a;else d=Wa,Wa=a}else d=Wa,Wa=a}else d=Wa,Wa=a;if(Wa===a)if(Wa=d,dc=wa(),dc!==a)if(Rc=pa(),Rc!==a){Eb=[];for(ob=ua();ob!==a;)Eb.push(ob),ob=ua();if(Eb!==a)if(ob=pa(),ob!==a)if(rc=Aa(),rc!==a){var Me=pa();if(Me!==a){var Ne=ya();Ne!==a?Wa=dc={type:"case_expression",format:"searched",clauses:Eb,
else:rc.value}:(d=Wa,Wa=a)}else d=Wa,Wa=a}else d=Wa,Wa=a;else d=Wa,Wa=a;else d=Wa,Wa=a}else d=Wa,Wa=a;else d=Wa,Wa=a;Qc=Wa}Sa=Qc;if(Sa===a){var sc;var Qb=d;var pd=x();if(pd!==a){var Sc=[];for(sc=K();sc!==a;)Sc.push(sc),sc=K();Sc!==a?Qb=pd+=Sc.join(""):(d=Qb,Qb=a)}else d=Qb,Qb=a;var tc=Qb;if(tc!==a){var Tc=tc;tc=/^CURRENT_DATE$/i.test(Tc)?{type:"current_time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Tc)?{type:"current_time",mode:"timestamp"}:{type:"column_ref",table:"",column:Tc}}Sa=tc;if(Sa===a&&
(Sa=h(),Sa===a)){Sa=d;var qd=za();if(qd!==a){var Oe=pa();if(Oe!==a){var Uc=c();if(Uc!==a){var Pe=pa();if(Pe!==a){var Qe=Da();Qe!==a?(Uc.paren=!0,Sa=qd=Uc):(d=Sa,Sa=a)}else d=Sa,Sa=a}else d=Sa,Sa=a}else d=Sa,Sa=a}else d=Sa,Sa=a}}}}}}}}return Sa}function e(){var w;var T=d;var S=x();if(S!==a){var fa=[];for(w=F();w!==a;)fa.push(w),w=F();fa!==a?T=S+=fa.join(""):(d=T,T=a)}else d=T,T=a;return T}function x(){if(pb.test(g.charAt(d))){var w=g.charAt(d);d++}else w=a,0===qa&&z(Re);return w}function F(){if(Se.test(g.charAt(d))){var w=
g.charAt(d);d++}else w=a,0===qa&&z(Te);return w}function K(){if(Ue.test(g.charAt(d))){var w=g.charAt(d);d++}else w=a,0===qa&&z(Ve);return w}function h(){var w=d;if(64===g.charCodeAt(d)){var T=We;d++}else T=a,0===qa&&z(Xe);if(T!==a){var S=e();S!==a?w=T=[T,S]:(d=w,w=a)}else d=w,w=a;w!==a&&(w={type:"param",value:w[1]});return w}function p(){var w=d;if(g.substr(d,7).toLowerCase()===Ye){var T=g.substr(d,7);d+=7}else T=a,0===qa&&z(Ze);if(T!==a){T=d;qa++;var S=F();qa--;S===a?T=void 0:(d=T,T=a);T!==a?w="LEADING":
(d=w,w=a)}else d=w,w=a;w===a&&(w=d,g.substr(d,8).toLowerCase()===$e?(T=g.substr(d,8),d+=8):(T=a,0===qa&&z(af)),T!==a?(T=d,qa++,S=F(),qa--,S===a?T=void 0:(d=T,T=a),T!==a?w="TRAILING":(d=w,w=a)):(d=w,w=a),w===a&&(w=d,g.substr(d,4).toLowerCase()===bf?(T=g.substr(d,4),d+=4):(T=a,0===qa&&z(cf)),T!==a?(T=d,qa++,S=F(),qa--,S===a?T=void 0:(d=T,T=a),T!==a?w="BOTH":(d=w,w=a)):(d=w,w=a)));return w}function J(){var w=d;var T=d;var S=U();if(S!==a){var fa=pa();if(fa!==a)if(fa=za(),fa!==a)if(fa=pa(),fa!==a)if(fa=
ja(),fa!==a){var sa=pa();sa!==a?(sa=Da(),sa!==a?T=S={type:"interval-period",period:S.value,precision:fa,secondary:null}:(d=T,T=a)):(d=T,T=a)}else d=T,T=a;else d=T,T=a;else d=T,T=a;else d=T,T=a}else d=T,T=a;T===a&&(T=d,S=U(),S!==a&&(S=rd(S)),T=S);if(T!==a)if(S=pa(),S!==a)if(S=d,g.substr(d,2).toLowerCase()===df?(fa=g.substr(d,2),d+=2):(fa=a,0===qa&&z(ef)),fa!==a?(fa=d,qa++,sa=F(),qa--,sa===a?fa=void 0:(d=fa,fa=a),fa!==a?S="TO":(d=S,S=a)):(d=S,S=a),S!==a)if(S=pa(),S!==a){S=d;fa=U();fa!==a&&(fa={type:"interval-period",
period:fa.value,precision:null,secondary:null});S=fa;if(S===a){S=d;fa=ta();if(fa!==a)if(fa=pa(),fa!==a)if(fa=za(),fa!==a)if(fa=pa(),fa!==a)if(fa=ja(),fa!==a)if(sa=pa(),sa!==a)if(sa=Ea(),sa!==a)if(sa=pa(),sa!==a)if(sa=da(),sa!==a){var Ba=pa();Ba!==a?(Ba=Da(),Ba!==a?S=fa=sd(fa,sa):(d=S,S=a)):(d=S,S=a)}else d=S,S=a;else d=S,S=a;else d=S,S=a;else d=S,S=a;else d=S,S=a;else d=S,S=a;else d=S,S=a;else d=S,S=a;else d=S,S=a;S===a&&(S=d,fa=ta(),fa!==a?(fa=pa(),fa!==a?(fa=za(),fa!==a?(fa=pa(),fa!==a?(fa=ja(),
fa!==a?(sa=pa(),sa!==a?(sa=Da(),sa!==a?S=fa={type:"interval-period",period:"second",precision:fa,secondary:null}:(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a)):(d=S,S=a),S===a&&(S=d,fa=ta(),fa!==a&&(fa={type:"interval-period",period:"second",precision:null,secondary:null}),S=fa))}S!==a?w=T={type:"interval-qualifier",start:T,end:S}:(d=w,w=a)}else d=w,w=a;else d=w,w=a;else d=w,w=a;else d=w,w=a;w===a&&(w=d,S=U(),S!==a?(T=pa(),T!==a?(T=za(),T!==a?(T=pa(),T!==a?(T=da(),T!==a?(fa=pa(),
fa!==a?(fa=Da(),fa!==a?w=S={type:"interval-period",period:S.value,precision:T,secondary:null}:(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):(d=w,w=a),w===a&&(w=d,S=U(),S!==a&&(S=rd(S)),w=S,w===a&&(w=d,S=ta(),S!==a?(T=pa(),T!==a?(T=za(),T!==a?(T=pa(),T!==a?(T=ja(),T!==a?(fa=pa(),fa!==a?(fa=Ea(),fa!==a?(S=pa(),S!==a?(S=da(),S!==a?(fa=pa(),fa!==a?(fa=Da(),fa!==a?w=S=sd(T,S):(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):
(d=w,w=a),w===a&&(w=d,S=ta(),S!==a?(T=pa(),T!==a?(T=za(),T!==a?(T=pa(),T!==a?(T=da(),T!==a?(fa=pa(),fa!==a?(fa=Da(),fa!==a?w=S={type:"interval-period",period:"second",precision:T,secondary:null}:(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):(d=w,w=a),w===a&&(w=d,S=ta(),S!==a&&(S={type:"interval-period",period:"second",precision:null,secondary:null}),w=S)))));return w}function U(){var w=d;w=ca();w!==a&&(w={type:"string",value:"day"});w===a&&(w=d,w=ma(),w!==a&&(w={type:"string",
value:"hour"}),w===a&&(w=d,w=na(),w!==a&&(w={type:"string",value:"minute"}),w===a&&(w=d,w=V(),w!==a&&(w={type:"string",value:"month"}),w===a&&(w=d,w=R(),w!==a&&(w={type:"string",value:"year"})))));return w}function da(){var w=Ca();w!==a&&(w=parseFloat(w));return w}function ja(){var w=Ca();w!==a&&(w=parseFloat(w));return w}function ka(){var w=oa();w===a&&(w=h());return w}function oa(){var w=d;if(39===g.charCodeAt(d)){var T=td;d++}else T=a,0===qa&&z(ud);T===a&&(g.substr(d,2)===vd?(T=vd,d+=2):(T=a,0===
qa&&z(ff)));if(T!==a){T=[];var S=d;g.substr(d,2)===uc?(S=uc,d+=2):(S=a,0===qa&&z(wd));S!==a&&(S="'");S===a&&(xd.test(g.charAt(d))?(S=g.charAt(d),d++):(S=a,0===qa&&z(yd)));for(;S!==a;)T.push(S),S=d,g.substr(d,2)===uc?(S=uc,d+=2):(S=a,0===qa&&z(wd)),S!==a&&(S="'"),S===a&&(xd.test(g.charAt(d))?(S=g.charAt(d),d++):(S=a,0===qa&&z(yd)));T!==a?(39===g.charCodeAt(d)?(S=td,d++):(S=a,0===qa&&z(ud)),S!==a?w=T={type:"string",value:T.join("")}:(d=w,w=a)):(d=w,w=a)}else d=w,w=a;return w}function ua(){var w=d;var T=
Ia();if(T!==a)if(T=pa(),T!==a)if(T=c(),T!==a){var S=pa();S!==a?(S=Fa(),S!==a?(S=pa(),S!==a?(S=c(),S!==a?w=T={type:"when_clause",operand:T,value:S}:(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):(d=w,w=a)}else d=w,w=a;else d=w,w=a;else d=w,w=a;return w}function ra(){var w=d;var T=Ia();if(T!==a)if(T=pa(),T!==a)if(T=c(),T!==a){var S=pa();S!==a?(S=Fa(),S!==a?(S=pa(),S!==a?(S=c(),S!==a?w=T={type:"when_clause",operand:T,value:S}:(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):(d=w,w=a)}else d=w,w=a;else d=w,w=a;else d=w,w=a;return w}
function Aa(){var w=d;var T=d;if(g.substr(d,4).toLowerCase()===gf){var S=g.substr(d,4);d+=4}else S=a,0===qa&&z(hf);if(S!==a){S=d;qa++;var fa=F();qa--;fa===a?S=void 0:(d=S,S=a);S!==a?T="ELSE":(d=T,T=a)}else d=T,T=a;T!==a?(T=pa(),T!==a?(T=c(),T!==a?w={type:"else_clause",value:T}:(d=w,w=a)):(d=w,w=a)):(d=w,w=a);return w}function Na(){var w=Ca();if(w===a){w=d;if(45===g.charCodeAt(d)){var T=Ha;d++}else T=a,0===qa&&z(La);T===a&&(43===g.charCodeAt(d)?(T=va,d++):(T=a,0===qa&&z(xa)));if(T!==a){var S=Ca();
S!==a?w=T=T[0]+S:(d=w,w=a)}else d=w,w=a}return w}function Ta(){var w=d;if(46===g.charCodeAt(d)){var T=jf;d++}else T=a,0===qa&&z(kf);T!==a?(T=Ca(),T===a&&(T=null),T!==a?w="."+(null!=T?T:""):(d=w,w=a)):(d=w,w=a);return w}function Ka(){var w;var T=w=d;if(lf.test(g.charAt(d))){var S=g.charAt(d);d++}else S=a,0===qa&&z(mf);S!==a?(nf.test(g.charAt(d))?(S=g.charAt(d),d++):(S=a,0===qa&&z(of)),S===a&&(S=null),S!==a?T="e"+(null===S?"":S):(d=T,T=a)):(d=T,T=a);T!==a?(S=Ca(),S!==a?w=T+S:(d=w,w=a)):(d=w,w=a);return w}
function Ca(){var w=[];var T=Ra();if(T!==a)for(;T!==a;)w.push(T),T=Ra();else w=a;w!==a&&(w=w.join(""));return w}function Ra(){if(pf.test(g.charAt(d))){var w=g.charAt(d);d++}else w=a,0===qa&&z(qf);return w}function gb(){var w=d;if(g.substr(d,2).toLowerCase()===rf){var T=g.substr(d,2);d+=2}else T=a,0===qa&&z(sf);if(T!==a){T=d;qa++;var S=F();qa--;S===a?T=void 0:(d=T,T=a);T!==a?w="IN":(d=w,w=a)}else d=w,w=a;return w}function f(){var w=d;if(g.substr(d,2).toLowerCase()===tf){var T=g.substr(d,2);d+=2}else T=
a,0===qa&&z(uf);if(T!==a){T=d;qa++;var S=F();qa--;S===a?T=void 0:(d=T,T=a);T!==a?w="IS":(d=w,w=a)}else d=w,w=a;return w}function y(){var w=d;if(g.substr(d,4).toLowerCase()===vf){var T=g.substr(d,4);d+=4}else T=a,0===qa&&z(wf);if(T!==a){T=d;qa++;var S=F();qa--;S===a?T=void 0:(d=T,T=a);T!==a?w="LIKE":(d=w,w=a)}else d=w,w=a;return w}function ba(){var w=d;if(g.substr(d,3).toLowerCase()===xf){var T=g.substr(d,3);d+=3}else T=a,0===qa&&z(yf);if(T!==a){T=d;qa++;var S=F();qa--;S===a?T=void 0:(d=T,T=a);T!==
a?w="NOT":(d=w,w=a)}else d=w,w=a;return w}function v(){var w=d;if(g.substr(d,3).toLowerCase()===zf){var T=g.substr(d,3);d+=3}else T=a,0===qa&&z(Af);if(T!==a){T=d;qa++;var S=F();qa--;S===a?T=void 0:(d=T,T=a);T!==a?w="AND":(d=w,w=a)}else d=w,w=a;return w}function P(){var w=d;if(g.substr(d,2).toLowerCase()===Bf){var T=g.substr(d,2);d+=2}else T=a,0===qa&&z(Cf);if(T!==a){T=d;qa++;var S=F();qa--;S===a?T=void 0:(d=T,T=a);T!==a?w="OR":(d=w,w=a)}else d=w,w=a;return w}function X(){var w=d;if(g.substr(d,7).toLowerCase()===
Df){var T=g.substr(d,7);d+=7}else T=a,0===qa&&z(Ef);if(T!==a){T=d;qa++;var S=F();qa--;S===a?T=void 0:(d=T,T=a);T!==a?w="BETWEEN":(d=w,w=a)}else d=w,w=a;return w}function Y(){var w=d;if(g.substr(d,4).toLowerCase()===Ff){var T=g.substr(d,4);d+=4}else T=a,0===qa&&z(Gf);if(T!==a){T=d;qa++;var S=F();qa--;S===a?T=void 0:(d=T,T=a);T!==a?w="FROM":(d=w,w=a)}else d=w,w=a;return w}function ha(){var w=d;if(g.substr(d,4).toLowerCase()===Hf){var T=g.substr(d,4);d+=4}else T=a,0===qa&&z(If);if(T!==a){T=d;qa++;var S=
F();qa--;S===a?T=void 0:(d=T,T=a);T!==a?w="TRIM":(d=w,w=a)}else d=w,w=a;return w}function ea(){var w=d;if(g.substr(d,8).toLowerCase()===Jf){var T=g.substr(d,8);d+=8}else T=a,0===qa&&z(Kf);if(T!==a){T=d;qa++;var S=F();qa--;S===a?T=void 0:(d=T,T=a);T!==a?w="INTERVAL":(d=w,w=a)}else d=w,w=a;return w}function R(){var w=d;if(g.substr(d,4).toLowerCase()===Lf){var T=g.substr(d,4);d+=4}else T=a,0===qa&&z(Mf);if(T!==a){T=d;qa++;var S=F();qa--;S===a?T=void 0:(d=T,T=a);T!==a?w="YEAR":(d=w,w=a)}else d=w,w=a;
return w}function V(){var w=d;if(g.substr(d,5).toLowerCase()===Nf){var T=g.substr(d,5);d+=5}else T=a,0===qa&&z(Of);if(T!==a){T=d;qa++;var S=F();qa--;S===a?T=void 0:(d=T,T=a);T!==a?w="MONTH":(d=w,w=a)}else d=w,w=a;return w}function ca(){var w=d;if(g.substr(d,3).toLowerCase()===Pf){var T=g.substr(d,3);d+=3}else T=a,0===qa&&z(Qf);if(T!==a){T=d;qa++;var S=F();qa--;S===a?T=void 0:(d=T,T=a);T!==a?w="DAY":(d=w,w=a)}else d=w,w=a;return w}function ma(){var w=d;if(g.substr(d,4).toLowerCase()===Rf){var T=g.substr(d,
4);d+=4}else T=a,0===qa&&z(Sf);if(T!==a){T=d;qa++;var S=F();qa--;S===a?T=void 0:(d=T,T=a);T!==a?w="HOUR":(d=w,w=a)}else d=w,w=a;return w}function na(){var w=d;if(g.substr(d,6).toLowerCase()===Tf){var T=g.substr(d,6);d+=6}else T=a,0===qa&&z(Uf);if(T!==a){T=d;qa++;var S=F();qa--;S===a?T=void 0:(d=T,T=a);T!==a?w="MINUTE":(d=w,w=a)}else d=w,w=a;return w}function ta(){var w=d;if(g.substr(d,6).toLowerCase()===Vf){var T=g.substr(d,6);d+=6}else T=a,0===qa&&z(Wf);if(T!==a){T=d;qa++;var S=F();qa--;S===a?T=
void 0:(d=T,T=a);T!==a?w="SECOND":(d=w,w=a)}else d=w,w=a;return w}function wa(){var w=d;if(g.substr(d,4).toLowerCase()===Xf){var T=g.substr(d,4);d+=4}else T=a,0===qa&&z(Yf);if(T!==a){T=d;qa++;var S=F();qa--;S===a?T=void 0:(d=T,T=a);T!==a?w="CASE":(d=w,w=a)}else d=w,w=a;return w}function ya(){var w=d;if(g.substr(d,3).toLowerCase()===Zf){var T=g.substr(d,3);d+=3}else T=a,0===qa&&z($f);if(T!==a){T=d;qa++;var S=F();qa--;S===a?T=void 0:(d=T,T=a);T!==a?w="END":(d=w,w=a)}else d=w,w=a;return w}function Ia(){var w=
d;if(g.substr(d,4).toLowerCase()===ag){var T=g.substr(d,4);d+=4}else T=a,0===qa&&z(bg);if(T!==a){T=d;qa++;var S=F();qa--;S===a?T=void 0:(d=T,T=a);T!==a?w="WHEN":(d=w,w=a)}else d=w,w=a;return w}function Fa(){var w=d;if(g.substr(d,4).toLowerCase()===cg){var T=g.substr(d,4);d+=4}else T=a,0===qa&&z(dg);if(T!==a){T=d;qa++;var S=F();qa--;S===a?T=void 0:(d=T,T=a);T!==a?w="THEN":(d=w,w=a)}else d=w,w=a;return w}function Ea(){if(44===g.charCodeAt(d)){var w=eg;d++}else w=a,0===qa&&z(fg);return w}function za(){if(40===
g.charCodeAt(d)){var w=gg;d++}else w=a,0===qa&&z(hg);return w}function Da(){if(41===g.charCodeAt(d)){var w=ig;d++}else w=a,0===qa&&z(jg);return w}function pa(){var w;var T=[];for(w=db();w!==a;)T.push(w),w=db();return T}function db(){if(kg.test(g.charAt(d))){var w=g.charAt(d);d++}else w=a,0===qa&&z(lg);return w}function eb(w,T,S,fa){w={type:"binary_expr",operator:w,left:T,right:S};void 0!==fa&&(w.escape=fa);return w}function ab(w,T){for(var S=0;S<T.length;S++)w=eb(T[S][1],w,T[S][3]);return w}G=void 0!==
G?G:{};var a={},hb={start:E},fb=E,Qa="!",vb=m("!",!1),yb="\x3d",Fb=m("\x3d",!1),fc="\x3e\x3d",mb=m("\x3e\x3d",!1),zb="\x3e",Ua=m("\x3e",!1),kb="\x3c\x3d",ub=m("\x3c\x3d",!1),Oa="\x3c\x3e",Gb=m("\x3c\x3e",!1),aa="\x3c",ia=m("\x3c",!1),Z="!\x3d",la=m("!\x3d",!1),va="+",xa=m("+",!1),Ha="-",La=m("-",!1),Za="*",Ya=m("*",!1),Xa="/",ib=m("/",!1),pb=/^[A-Za-z_\x80-\uFFFF]/,Re=r([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Se=/^[A-Za-z0-9_]/,Te=r([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Ue=/^[A-Za-z0-9_.\x80-\uFFFF]/,
Ve=r([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),We="@",Xe=m("@",!1),rd=function(w){return{type:"interval-period",period:w.value,precision:null,secondary:null}},sd=function(w,T){return{type:"interval-period",period:"second",precision:w,secondary:T}},td="'",ud=m("'",!1),vd="N'",ff=m("N'",!1),uc="''",wd=m("''",!1),xd=/^[^']/,yd=r(["'"],!0,!1),jf=".",kf=m(".",!1),pf=/^[0-9]/,qf=r([["0","9"]],!1,!1),lf=/^[eE]/,mf=r(["e","E"],!1,!1),nf=/^[+\-]/,of=r(["+","-"],!1,!1),Id="null",Jd=
m("NULL",!0),Cd="true",Dd=m("TRUE",!0),Fd="false",Gd=m("FALSE",!0),rf="in",sf=m("IN",!0),tf="is",uf=m("IS",!0),vf="like",wf=m("LIKE",!0),zd="escape",Ad=m("ESCAPE",!0),xf="not",yf=m("NOT",!0),zf="and",Af=m("AND",!0),Bf="or",Cf=m("OR",!0),Df="between",Ef=m("BETWEEN",!0),Ff="from",Gf=m("FROM",!0),oe="for",pe=m("FOR",!0),ee="substring",fe=m("SUBSTRING",!0),Ud="extract",Vd=m("EXTRACT",!0),Hf="trim",If=m("TRIM",!0),ue="position",ve=m("POSITION",!0),Pd="timestamp",Qd=m("TIMESTAMP",!0),Ld="date",Md=m("DATE",
!0),Ye="leading",Ze=m("LEADING",!0),$e="trailing",af=m("TRAILING",!0),bf="both",cf=m("BOTH",!0),df="to",ef=m("TO",!0),Jf="interval",Kf=m("INTERVAL",!0),Lf="year",Mf=m("YEAR",!0),Nf="month",Of=m("MONTH",!0),Pf="day",Qf=m("DAY",!0),Rf="hour",Sf=m("HOUR",!0),Tf="minute",Uf=m("MINUTE",!0),Vf="second",Wf=m("SECOND",!0),Xf="case",Yf=m("CASE",!0),Zf="end",$f=m("END",!0),ag="when",bg=m("WHEN",!0),cg="then",dg=m("THEN",!0),gf="else",hf=m("ELSE",!0),eg=",",fg=m(",",!1),gg="(",hg=m("(",!1),ig=")",jg=m(")",!1),
kg=/^[ \t\n\r]/,lg=r([" ","\t","\n","\r"],!1,!1),ld="`",md=m("`",!1),nd=/^[^`]/,od=r(["`"],!0,!1),d=0,ec=[{line:1,column:1}],tb=0,vc=[],qa=0;if("startRule"in G){if(!(G.startRule in hb))throw Error("Can't start parsing from rule \""+G.startRule+'".');fb=hb[G.startRule]}var Vc=fb();if(Vc!==a&&d===g.length)return Vc;Vc!==a&&d<g.length&&z({type:"end"});throw function(w,T,S){return new n(n.buildMessage(w,T),w,T,S)}(vc,tb<g.length?g.charAt(tb):null,tb<g.length?Q(tb,tb+1):Q(tb,tb));}}})})(B);let N=function(){function q(){}
q.parse=function(n){return B.exports.parse(n)};return q}();l.WhereGrammar=N;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(l){l.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};l.commonjsRequire=function(b){throw Error('Could not dynamically require "'+b+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');
};l.getDefaultExportFromCjs=function(b){return b&&b.__esModule&&Object.prototype.hasOwnProperty.call(b,"default")?b["default"]:b}})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),function(l,b,B,N,q,n,g){function G(c,u){if(!u)return null;if("x"in
u){var D={x:0,y:0};[D.x,D.y]=c(u.x,u.y,Q);null!=u.z&&(D.z=u.z);null!=u.m&&(D.m=u.m);return D}if("xmin"in u)return D={xmin:0,ymin:0,xmax:0,ymax:0},[D.xmin,D.ymin]=c(u.xmin,u.ymin,Q),[D.xmax,D.ymax]=c(u.xmax,u.ymax,Q),u.hasZ&&(D.zmin=u.zmin,D.zmax=u.zmax,D.hasZ=!0),u.hasM&&(D.mmin=u.mmin,D.mmax=u.mmax,D.hasM=!0),D;if("rings"in u)return{rings:m(u.rings,c),hasM:u.hasM,hasZ:u.hasZ};if("paths"in u)return{paths:m(u.paths,c),hasM:u.hasM,hasZ:u.hasZ};if("points"in u)return{points:r(u.points,c),hasM:u.hasM,
hasZ:u.hasZ}}function m(c,u){const D=[];for(const L of c)D.push(r(L,u));return D}function r(c,u){const D=[];for(const L of c)c=u(L[0],L[1],[0,0]),D.push(c),2<L.length&&c.push(L[2]),3<L.length&&c.push(L[3]);return D}function C(){C=b._asyncToGenerator(function*(c,u){u&&(c=Array.isArray(c)?c.map(D=>B.isSome(D.geometry)&&D.geometry.spatialReference):[c],yield N.initializeProjection(c.map(D=>({source:D,dest:u}))))});return C.apply(this,arguments)}const Q=[0,0],z=G.bind(null,g.lngLatToXY),E=G.bind(null,
g.xyToLngLat),O=new (function(){function c(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var u=c.prototype;u.push=function(){var D=b._asyncToGenerator(function*(L,A,H){if(!(L&&L.length&&A&&H)||n.equals(A,H))return L;const I={geometries:L,inSpatialReference:A,outSpatialReference:H,resolve:null};this._jobs.push(I);return new Promise(W=>{I.resolve=W;null===this._timer&&(this._timer=setTimeout(this._process,10))})});return function(L,A,H){return D.apply(this,arguments)}}();u._process=
function(){this._timer=null;const D=this._jobs.shift();if(D){var {geometries:L,inSpatialReference:A,outSpatialReference:H,resolve:I}=D;g.canProject(A,H)?n.isWebMercator(H)?I(L.map(z)):I(L.map(E)):I(N.projectMany(q.jsonAdapter,L,A,H,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return c}());l.checkProjectionSupport=function(c,u){return C.apply(this,arguments)};l.project=function(c,u,D){if(!c)return c;D||(D=u,u=c.spatialReference);return n.isValid(u)&&n.isValid(D)&&!n.equals(u,
D)?g.canProject(u,D)?n.isWebMercator(D)?z(c):E(c):N.projectMany(q.jsonAdapter,[c],u,D,null)[0]:c};l.projectMany=function(c,u,D){return O.push(c,u,D)};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils".split(" "),
function(l,b,B,N,q,n,g,G,m,r,C,Q,z,E,O,c,u,D,L,A,H,I,W){function M(){return!!pa&&E.isLoaded()}function k(aa){n.isNone(eb)&&(eb=Promise.all([E.load(),(new Promise(function(ia,Z){l(["../chunks/geometryEngineBase"],ia,Z)})).then(function(ia){return ia.geometryEngineBase}),new Promise(function(ia,Z){l(["./geometryAdapters/hydrated"],ia,Z)})]));return eb.then(([,ia,{hydratedAdapter:Z}])=>{g.throwIfAborted(aa);db=Z;pa=ia.default;pa._enableProjection(E.pe)})}function t(aa,ia,Z,la,va=null){if(n.isNone(Z)||
n.isNone(la))return ia;if(x(Z,la,va))return ia.map(xa=>n.unwrap(K(xa,Z,la)));if(n.isNone(va)){const xa=I.cacheKey(Z,la);void 0!==ab[xa]?va=ab[xa]:(va=e(Z,la,null),n.isNone(va)&&(va=new I),ab[xa]=va)}if(n.isNone(pa))throw new a;return pa._project(aa,ia,Z,la,va)}function e(aa,ia,Z=null){if(n.isNone(pa))throw new a;if(n.isNone(aa)||n.isNone(ia))return null;aa=pa._getTransformation(db,aa,ia,Z,null==Z?void 0:Z.spatialReference);return null!==aa?I.fromGE(aa):null}function x(aa,ia,Z){return Z?!1:W.equals(aa,
ia)?!0:W.isValid(aa)&&W.isValid(ia)&&!!Ea(aa,ia,Fb)}function F(){F=B._asyncToGenerator(function*(aa,ia,Z,la){if(!M())if(Array.isArray(aa))for(const {source:va,dest:xa,geographicTransformation:Ha}of aa){if(!x(va,xa,Ha))return k(la)}else if(!x(aa,ia,Z))return k(la)});return F.apply(this,arguments)}function K(aa,ia,Z){return aa?"x"in aa?h(aa,ia,new O,Z,0):"xmin"in aa?da(aa,ia,new Q,Z,0):"rings"in aa?U(aa,ia,new c,Z,0):"paths"in aa?J(aa,ia,new u,Z,0):"points"in aa?p(aa,ia,new z,Z,0):null:null}function h(aa,
ia,Z,la,va){Oa[0]=aa.x;Oa[1]=aa.y;const xa=aa.z;Oa[2]=void 0!==xa?xa:va;if(!ua(Oa,ia,0,Oa,la,0,1))return null;Z.x=Oa[0];Z.y=Oa[1];Z.spatialReference=la;void 0===xa?(Z.z=void 0,Z.hasZ=!1):(Z.z=Oa[2],Z.hasZ=!0);void 0===aa.m?(Z.m=void 0,Z.hasM=!1):(Z.m=aa.m,Z.hasM=!0);return Z}function p(aa,ia,Z,la,va){const {points:xa,hasZ:Ha,hasM:La}=aa;aa=[];const Za=xa.length,Ya=[];for(var Xa of xa)Ya.push(Xa[0],Xa[1],Ha?Xa[2]:va);if(!ua(Ya,ia,0,Ya,la,0,Za))return null;for(ia=0;ia<Za;++ia){va=3*ia;Xa=Ya[va];const ib=
Ya[va+1];Ha&&La?aa.push([Xa,ib,Ya[va+2],xa[ia][3]]):Ha?aa.push([Xa,ib,Ya[va+2]]):La?aa.push([Xa,ib,xa[ia][2]]):aa.push([Xa,ib])}Z.points=aa;Z.spatialReference=la;Z.hasZ=Ha;Z.hasM=La;return Z}function J(aa,ia,Z,la,va){const {paths:xa,hasZ:Ha,hasM:La}=aa;aa=[];if(!ra(xa,Ha,La,ia,aa,la,va))return null;Z.paths=aa;Z.spatialReference=la;Z.hasZ=Ha;Z.hasM=La;return Z}function U(aa,ia,Z,la,va){const {rings:xa,hasZ:Ha,hasM:La}=aa;aa=[];if(!ra(xa,Ha,La,ia,aa,la,va))return null;Z.rings=aa;Z.spatialReference=
la;Z.hasZ=Ha;Z.hasM=La;return Z}function da(aa,ia,Z,la,va){const {xmin:xa,ymin:Ha,xmax:La,ymax:Za,hasZ:Ya,hasM:Xa}=aa;if(!ja(xa,Ha,Ya?aa.zmin:va,ia,Oa,la))return null;Z.xmin=Oa[0];Z.ymin=Oa[1];Ya&&(Z.zmin=Oa[2]);if(!ja(La,Za,Ya?aa.zmax:va,ia,Oa,la))return null;Z.xmax=Oa[0];Z.ymax=Oa[1];Ya&&(Z.zmax=Oa[2]);Xa&&(Z.mmin=aa.mmin,Z.mmax=aa.mmax);Z.spatialReference=la;return Z}function ja(aa,ia,Z,la,va,xa){Ua[0]=aa;Ua[1]=ia;Ua[2]=Z;return ua(Ua,la,0,va,xa,0,1)}function ka(aa,ia,Z,la){if(n.isNone(ia)||n.isNone(la)||
2>aa.length)return!1;2===aa.length&&(Ua[0]=aa[0],Ua[1]=aa[1],Ua[2]=0,aa=Ua);return ua(aa,ia,0,Z,la,0,1)}function oa(aa,ia,Z){if(n.isNone(ia))return!1;ia=Ka(ia,vb);ia=Qa[ia][6];if(n.isNone(ia))return!1;ia(aa,0,Ua,0);Z!==Ua&&(Z[0]=Ua[0],Z[1]=Ua[1],2<Z.length&&(Z[2]=Ua[2]));return!0}function ua(aa,ia,Z,la,va,xa,Ha=1){ia=Ea(ia,va,Fb);if(n.isNone(ia))return!1;if(ia===Ca){if(aa===la&&Z===xa)return!0;Ha=Z+3*Ha;for(let La=Z,Za=xa;La<Ha;La++,Za++)la[Za]=aa[La];return!0}Ha=Z+3*Ha;for(let La=Z,Za=xa;La<Ha;La+=
3,Za+=3)ia(aa,La,la,Za);return!0}function ra(aa,ia,Z,la,va,xa,Ha=0){const La=[];for(const Za of aa)for(const Ya of Za)La.push(Ya[0],Ya[1],ia?Ya[2]:Ha);if(!ua(La,la,0,La,xa,0,La.length/3))return!1;la=0;va.length=0;for(const Za of aa){aa=[];for(const Ya of Za)ia&&Z?aa.push([La[la++],La[la++],La[la++],Ya[3]]):ia?aa.push([La[la++],La[la++],La[la++]]):(Z?aa.push([La[la++],La[la++],Ya[2]]):aa.push([La[la++],La[la++]]),la++);va.push(aa)}return!0}function Aa(aa,ia,Z,la){aa=Math.abs(mb*aa)+Math.asin(Z/(la+
ia));return aa>=Math.PI/2?Number.MAX_VALUE:Z/Math.cos(aa)}function Na(aa,ia,Z){const la=Math.sin(aa);aa=Math.cos(aa);const va=Math.sin(ia);ia=Math.cos(ia);Z[0]=-la;Z[4]=-va*aa;Z[8]=ia*aa;Z[12]=0;Z[1]=aa;Z[5]=-va*la;Z[9]=ia*la;Z[13]=0;Z[2]=0;Z[6]=ia;Z[10]=va;Z[14]=0;Z[3]=0;Z[7]=0;Z[11]=0;Z[15]=1;return Z}function Ta(aa,ia,Z){Na(aa,ia,Z);m.transpose(Z,Z);return Z}function Ka(aa,ia){if(ia.spatialReference===aa)return ia.spatialReferenceId;ia.spatialReference=aa;"metersPerUnit"in ia&&(ia.metersPerUnit=
G.getMetersPerUnitForSR(aa,1));return aa.wkt===D.SphericalECEFSpatialReference.wkt?ia.spatialReferenceId=1:W.isWGS84(aa)?ia.spatialReferenceId=2:W.isWebMercator(aa)?ia.spatialReferenceId=3:W.isPlateCarree(aa)?ia.spatialReferenceId=12:aa.wkt===D.WGS84ECEFSpatialReference.wkt?ia.spatialReferenceId=4:4490===aa.wkid?ia.spatialReferenceId=5:aa.wkt===D.SphericalPCPFMars.wkt?ia.spatialReferenceId=7:aa.wkt===D.SphericalPCPFMoon.wkt?ia.spatialReferenceId=9:W.isMars(aa)?ia.spatialReferenceId=8:W.isMoon(aa)?
ia.spatialReferenceId=10:ia.spatialReferenceId=0}function Ca(aa,ia,Z,la){aa!==Z&&(Z[la++]=aa[ia++],Z[la++]=aa[ia++],Z[la]=aa[ia])}function Ra(aa,ia,Z,la){Z[la++]=zb*(aa[ia++]/A.earth.radius);Z[la++]=zb*(Math.PI/2-2*Math.atan(Math.exp(-aa[ia++]/A.earth.radius)));Z[la]=aa[ia]}function gb(aa,ia,Z,la){Ra(aa,ia,Z,la);ea(Z,la,Z,la)}function f(aa,ia,Z,la){Ra(aa,ia,Z,la);wa(Z,la,Z,la)}function y(aa,ia,Z,la,va){var xa=.4999999*Math.PI;xa=q.clamp(mb*aa[ia+1],-xa,xa);xa=Math.sin(xa);Z[la++]=mb*aa[ia]*va.radius;
Z[la++]=va.halfSemiMajorAxis*Math.log((1+xa)/(1-xa));Z[la]=aa[ia+2]}function ba(aa,ia,Z,la){y(aa,ia,Z,la,A.earth)}function v(aa,ia,Z,la){Z[la]=aa[ia]*hb;Z[la+1]=aa[ia+1]*hb;Z[la+2]=aa[ia+2]}function P(aa,ia,Z,la){Z[la]=aa[ia]*fb;Z[la+1]=aa[ia+1]*fb;Z[la+2]=aa[ia+2]}function X(aa,ia,Z,la,va){va+=aa[ia+2];const xa=mb*aa[ia+1];aa=mb*aa[ia];ia=Math.cos(xa);Z[la++]=Math.cos(aa)*ia*va;Z[la++]=Math.sin(aa)*ia*va;Z[la]=Math.sin(xa)*va}function Y(aa,ia,Z,la){X(aa,ia,Z,la,A.moon.radius)}function ha(aa,ia,Z,
la){X(aa,ia,Z,la,A.mars.radius)}function ea(aa,ia,Z,la){X(aa,ia,Z,la,A.earth.radius)}function R(aa,ia,Z,la,va){var xa=aa[ia];const Ha=aa[ia+1];ia=aa[ia+2];aa=Math.sqrt(xa*xa+Ha*Ha+ia*ia);ia=q.asinClamped(ia/(0===aa?1:aa));xa=Math.atan2(Ha,xa);Z[la++]=zb*xa;Z[la++]=zb*ia;Z[la]=aa-va}function V(aa,ia,Z,la){R(aa,ia,Z,la,A.moon.radius)}function ca(aa,ia,Z,la){R(aa,ia,Z,la,A.mars.radius)}function ma(aa,ia,Z,la){R(aa,ia,Z,la,A.earth.radius)}function na(aa,ia,Z,la){ma(aa,ia,Z,la);ba(Z,la,Z,la)}function ta(aa,
ia,Z,la){ma(aa,ia,Z,la);wa(Z,la,Z,la)}function wa(aa,ia,Z,la){{var va=A.earth;const Ha=mb*aa[ia];var xa=mb*aa[ia+1];aa=aa[ia+2];ia=Math.sin(xa);xa=Math.cos(xa);const La=va.radius/Math.sqrt(1-va.eccentricitySquared*ia*ia);Z[la++]=(La+aa)*xa*Math.cos(Ha);Z[la++]=(La+aa)*xa*Math.sin(Ha);Z[la++]=(La*(1-va.eccentricitySquared)+aa)*ia}}function ya(aa,ia,Z,la){var va=H.earthEllipsoidConstants,xa=aa[ia],Ha=aa[ia+1];aa=aa[ia+2];let La;ia=Math.abs(aa);var Za=xa*xa+Ha*Ha;var Ya=Math.sqrt(Za);var Xa=Za+aa*aa;
var ib=Math.sqrt(Xa);xa=Math.atan2(Ha,xa);var pb=aa*aa/Xa;Xa=Za/Xa;Ha=va.a2/ib;Za=va.a3-va.a4/ib;.3<Xa?(pb=ia/ib*(1+Xa*(va.a1+Ha+pb*Za)/ib),ib=Math.asin(pb),Ha=pb*pb,Xa=Math.sqrt(1-Ha)):(Xa=Ya/ib*(1-pb*(va.a5-Ha-Xa*Za)/ib),ib=Math.acos(Xa),Ha=1-Xa*Xa,pb=Math.sqrt(Ha));La=1-A.earth.eccentricitySquared*Ha;Ha=A.earth.radius/Math.sqrt(La);va=va.a6*Ha;Ha=Ya-Ha*Xa;Za=ia-va*pb;ia=Xa*Ha+pb*Za;Ya=Xa*Za-pb*Ha;va=Ya/(va/La+ia);ib+=va;0>aa&&(ib=-ib);Z[la++]=zb*xa;Z[la++]=zb*ib;Z[la]=ia+Ya*va/2}function Ia(aa,
ia,Z,la){ya(aa,ia,Z,la);ea(Z,la,Z,la)}function Fa(aa,ia,Z,la){ya(aa,ia,Z,la);ba(Z,la,Z,la)}function Ea(aa,ia,Z=Da()){return n.isNone(aa)||n.isNone(ia)?null:za(aa,ia,Z).projector}function za(aa,ia,Z){if(n.isNone(aa)||n.isNone(ia)||Z.source.spatialReference===aa&&Z.dest.spatialReference===ia)return Z;const la=Ka(aa,Z.source),va=Ka(ia,Z.dest);0===la&&0===va?W.equals(aa,ia)?Z.projector=Ca:Z.projector=null:Z.projector=Qa[la][va];return Z}function Da(){return{source:{spatialReference:null,spatialReferenceId:0,
metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:Ca}}let pa=null,db=null,eb=null,ab={},a=function(aa){function ia(){return aa.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}B._inheritsLoose(ia,aa);return ia}(N);const hb=A.earth.radius*Math.PI/180,fb=180/(A.earth.radius*Math.PI),Qa={[2]:{[5]:null,[8]:null,[10]:null,[11]:Ca,[6]:Ca,[1]:ea,[7]:null,[9]:null,[0]:null,[3]:ba,[12]:v,[2]:Ca,[4]:wa},[5]:{[5]:Ca,
[8]:null,[10]:null,[11]:Ca,[6]:Ca,[1]:ea,[7]:null,[9]:null,[0]:null,[3]:null,[12]:v,[2]:null,[4]:wa},[8]:{[5]:null,[8]:Ca,[10]:null,[11]:Ca,[6]:null,[1]:null,[7]:ha,[9]:null,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:Ca,[11]:Ca,[6]:null,[1]:null,[7]:null,[9]:Y,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[11]:Ra,[6]:Ra,[1]:gb,[7]:null,[9]:null,[0]:null,[3]:Ca,[12]:function(aa,ia,Z,la){Ra(aa,ia,Z,la);v(Z,la,Z,la)},[2]:Ra,[4]:f},[4]:{[5]:ya,
[8]:null,[10]:null,[11]:ya,[6]:ya,[1]:Ia,[7]:null,[9]:null,[0]:null,[3]:Fa,[12]:function(aa,ia,Z,la){ya(aa,ia,Z,la);v(Z,la,Z,la)},[2]:ya,[4]:Ca},[1]:{[5]:ma,[8]:null,[10]:null,[11]:ma,[6]:ma,[1]:Ca,[7]:null,[9]:null,[0]:null,[3]:na,[12]:function(aa,ia,Z,la){ma(aa,ia,Z,la);v(Z,la,Z,la)},[2]:ma,[4]:ta},[7]:{[5]:null,[8]:ca,[10]:null,[11]:ca,[6]:null,[1]:null,[7]:Ca,[9]:null,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[9]:{[5]:null,[8]:null,[10]:V,[11]:V,[6]:null,[1]:null,[7]:null,[9]:Ca,[0]:null,
[3]:null,[12]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,[11]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:Ca,[3]:null,[12]:null,[2]:null,[4]:null},[11]:{[5]:Ca,[8]:Ca,[10]:Ca,[11]:Ca,[6]:Ca,[1]:ea,[7]:ha,[9]:Y,[0]:null,[3]:ba,[12]:v,[2]:Ca,[4]:wa},[6]:{[5]:null,[8]:null,[10]:null,[11]:Ca,[6]:Ca,[1]:ea,[7]:null,[9]:null,[0]:null,[3]:null,[12]:v,[2]:Ca,[4]:wa},[12]:{[5]:P,[8]:null,[10]:null,[11]:P,[6]:P,[1]:function(aa,ia,Z,la){P(aa,ia,Z,la);ea(Z,la,Z,la)},[7]:null,[9]:null,[0]:null,
[3]:function(aa,ia,Z,la){P(aa,ia,Z,la);ba(Z,la,Z,la)},[12]:Ca,[2]:P,[4]:function(aa,ia,Z,la){P(aa,ia,Z,la);wa(Z,la,Z,la)}}},vb={spatialReference:null,spatialReferenceId:0},yb={spatialReference:null,spatialReferenceId:0},Fb=Da(),fc=Da(),mb=q.deg2rad(1),zb=q.rad2deg(1),Ua=C.create(),kb=C.create(),ub=C.create(),Oa=C.create(),Gb=C.create();b.canProjectToWGS84ComparableLonLat=function(aa){if(n.isNone(aa))return!1;aa=Ka(aa,vb);return!!Qa[aa][6]};b.canProjectWithoutEngine=x;b.computeENUToSphericalPCPFLocalRotation=
Na;b.computeSphericalPCPFToENULocalRotation=Ta;b.computeTranslationToOriginAndRotation=function(aa,ia,Z,la){if(n.isNone(aa)||n.isNone(la))return!1;var va=Ka(aa,vb),xa=Ka(la,yb);if(va===xa&&1!==xa&&7!==xa&&9!==xa&&(0!==va||W.equals(aa,la)))return m.identity(Z),m.translate(Z,Z,ia),!0;if(1===xa||7===xa||9===xa){va=Qa[va][11];xa=Qa[11][xa];if(n.isNone(va)||n.isNone(xa))return!1;va(ia,0,kb,0);xa(kb,0,ub,0);Na(mb*kb[0],mb*kb[1],Z);Z[12]=ub[0];Z[13]=ub[1];Z[14]=ub[2];return!0}if(!(3!==xa&&12!==xa||2!==va&&
1!==va)){aa=Qa[va][11];xa=Qa[11][xa];if(n.isNone(aa)||n.isNone(xa))return!1;aa(ia,0,kb,0);xa(kb,0,ub,0);2===va?m.identity(Z):Ta(mb*kb[0],mb*kb[1],Z);Z[12]=ub[0];Z[13]=ub[1];Z[14]=ub[2];return!0}return!1};b.getProjectorName=function(aa,ia){switch(Ea(aa,ia,Fb)){case Ca:return"copy3";case ea:return"wgs84ToSphericalECEF";case ba:return"wgs84ToWebMercator";case v:return"wgs84ToPlateCarree";case wa:return"wgs84ToWGS84ECEF";case Ra:return"webMercatorToWGS84";case gb:return"webMercatorToSphericalECEF";case f:return"webMercatorToWGS84ECEF";
case ya:return"wgs84ECEFToWGS84";case Ia:return"wgs84ECEFToSphericalECEF";case Fa:return"wgs84ECEFToWebMercator";case ma:return"sphericalECEFToWGS84";case na:return"sphericalECEFToWebMercator";case ca:return"sphericalMarsPCPFToMars2000";case V:return"sphericalMoonPCPFToMoon2000";case ta:return"sphericalECEFToWGS84ECEF";case ha:return"mars2000ToSphericalPCPF";case Y:return"moon2000ToSphericalPCPF";default:return null}};b.getTransformation=e;b.getTransformations=function(aa,ia,Z=null){if(n.isNone(pa))throw new a;
aa=pa._getTransformationBySuitability(db,aa,ia,Z,null==Z?void 0:Z.spatialReference);if(null!==aa){ia=[];for(const la of aa)ia.push(I.fromGE(la));return ia}return[]};b.initializeProjection=function(aa,ia,Z,la){return F.apply(this,arguments)};b.isLoaded=M;b.isSupported=function(){return!0};b.load=k;b.localLinearScaleFactors=function(aa,ia,Z,la){if(n.isNone(ia)||n.isNone(la))return!1;const va=Ka(ia,vb);var xa=Ka(la,yb);if(va===xa&&0!==va||W.equals(ia,la))return Z[0]=1,Z[1]=1,Z[2]=1,!0;if(1===va){ia=
r.length(aa);aa=ia/Math.sqrt(aa[0]*aa[0]+aa[1]*aa[1]);ia/=A.earth.radius;if(3===xa)return Z[0]=aa*ia,Z[1]=aa*ia,Z[2]=1,!0;if(2===xa||5===xa)return xa=180/(A.earth.radius*Math.PI),Z[0]=xa*aa*ia,Z[1]=xa*ia,Z[2]=1,!0}else if(12===va&&(2===xa||5===xa))return Z[0]=fb,Z[1]=fb,Z[2]=1,!0;return!1};b.lonLatToSphericalPCPF=function(aa,ia,Z,la,va=0){la+=va;va=Math.cos(Z);aa[0]=Math.cos(ia)*va*la;aa[1]=Math.sin(ia)*va*la;aa[2]=Math.sin(Z)*la};b.lonLatToWebMercatorComparable=y;b.project=function(aa,ia,Z=null){return Array.isArray(aa)?
0===aa.length?[]:t(db,aa,aa[0].spatialReference,ia,Z):t(db,[aa],aa.spatialReference,ia,Z)[0]};b.projectBoundingRect=function(aa,ia,Z,la){if(null==aa)return!1;if(W.equals(ia,la))return L.copy(Z,aa),!0;Ua[0]=aa[0];Ua[1]=aa[1];Ua[2]=0;if(!ua(Ua,ia,0,Ua,la,0,1))return!1;Z[0]=Ua[0];Z[1]=Ua[1];Ua[0]=aa[2];Ua[1]=aa[3];Ua[2]=0;if(!ua(Ua,ia,0,Ua,la,0,1))return!1;Z[2]=Ua[0];Z[3]=Ua[1];return!0};b.projectBoundingSphere=function(aa,ia,Z,la){if(n.isNone(ia)||n.isNone(la))return!1;ia=za(ia,la,fc);if(ia.projector===
Ca)return Z[0]=aa[0],Z[1]=aa[1],Z[2]=aa[2],Z[3]=aa[3],!0;if(n.isNone(ia.projector))return!1;const {source:va,dest:xa}=ia;if(3===xa.spatialReferenceId){ia=Qa[va.spatialReferenceId][2];if(n.isNone(ia))return!1;ia(aa,0,kb,0);ba(kb,0,Z,0);Z[3]=Aa(kb[1],aa[2],aa[3],A.earth.radius);return!0}if(2!==va.spatialReferenceId&&5!==va.spatialReferenceId||12!==xa.spatialReferenceId)ia.projector(aa,0,Z,0),Z[3]=aa[3]*va.metersPerUnit/xa.metersPerUnit;else{la=Qa[1][12];let Ha=aa[3];n.isSome(Qa[va.spatialReferenceId][1])&&
n.isSome(la)&&(Ha=Aa(aa[1],aa[2],aa[3],A.earth.radius));ia.projector(aa,0,Z,0);Z[3]=Ha}return!0};b.projectBuffer=ua;b.projectDirection=function(aa,ia,Z,la,va){r.copy(Oa,aa);r.add(Gb,aa,ia);ka(Oa,Z,Oa,va);ka(Gb,Z,Gb,va);r.subtract(la,Gb,Oa);r.normalize(la,la)};b.projectExtent=function(aa,ia,Z=ia.spatialReference,la=0){return n.isSome(Z)&&n.isSome(da(aa,aa.spatialReference,ia,Z,la))};b.projectMany=t;b.projectMultipoint=function(aa,ia,Z=ia.spatialReference,la=0){return n.isNone(Z)?!1:n.isSome(p(aa,aa.spatialReference,
ia,Z,la))};b.projectPoint=function(aa,ia,Z=ia.spatialReference,la=0){return n.isNone(Z)?!1:n.isSome(h(aa,aa.spatialReference,ia,Z,la))};b.projectPointToVector=function(aa,ia,Z,la=0){Oa[0]=aa.x;Oa[1]=aa.y;const va=aa.z;Oa[2]=void 0!==va?va:la;return ua(Oa,aa.spatialReference,0,ia,Z,0,1)};b.projectPointToWGS84ComparableLonLat=function(aa,ia){Oa[0]=aa.x;Oa[1]=aa.y;const Z=aa.z;Oa[2]=void 0!==Z?Z:0;return oa(Oa,aa.spatialReference,ia)};b.projectPolygon=function(aa,ia,Z=ia.spatialReference,la=0){return n.isSome(Z)&&
n.isSome(U(aa,aa.spatialReference,ia,Z,la))};b.projectPolyline=function(aa,ia,Z=ia.spatialReference,la=0){return n.isSome(Z)&&n.isSome(J(aa,aa.spatialReference,ia,Z,la))};b.projectVectorToDehydratedPoint=function(aa,ia,Z){return ua(aa,ia,0,Oa,Z.spatialReference,0,1)?(Z.x=Oa[0],Z.y=Oa[1],Z.z=Oa[2],Z):null};b.projectVectorToPoint=function(aa,ia,Z){if(n.isNone(ia)||n.isNone(Z))return null;const la=new O({spatialReference:Z});return ua(aa,ia,0,Oa,Z,0,1)?(la.x=Oa[0],la.y=Oa[1],la.z=Oa[2],la):null};b.projectVectorToVector=
ka;b.projectVectorToWGS84ComparableLonLat=function(aa,ia,Z){return oa(aa,ia,Z)};b.projectWithoutEngine=K;b.projectXYZToVector=ja;b.sphericalPCPFtoLonLatElevation=R;b.unload=function(){eb=db=pa=null;ab={}};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(l,b,B){function N(f,y){f[0]=y[0];f[1]=y[1];f[2]=y[2];f[3]=y[3];f[4]=y[4];f[5]=y[5];f[6]=y[6];f[7]=y[7];f[8]=y[8];f[9]=y[9];f[10]=y[10];f[11]=y[11];f[12]=y[12];f[13]=
y[13];f[14]=y[14];f[15]=y[15];return f}function q(f,y,ba,v,P,X,Y,ha,ea,R,V,ca,ma,na,ta,wa,ya){f[0]=y;f[1]=ba;f[2]=v;f[3]=P;f[4]=X;f[5]=Y;f[6]=ha;f[7]=ea;f[8]=R;f[9]=V;f[10]=ca;f[11]=ma;f[12]=na;f[13]=ta;f[14]=wa;f[15]=ya;return f}function n(f){f[0]=1;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=1;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=1;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f}function g(f,y){if(f===y){const ba=y[1],v=y[2],P=y[3],X=y[6],Y=y[7],ha=y[11];f[1]=y[4];f[2]=y[8];f[3]=y[12];f[4]=ba;f[6]=y[9];f[7]=
y[13];f[8]=v;f[9]=X;f[11]=y[14];f[12]=P;f[13]=Y;f[14]=ha}else f[0]=y[0],f[1]=y[4],f[2]=y[8],f[3]=y[12],f[4]=y[1],f[5]=y[5],f[6]=y[9],f[7]=y[13],f[8]=y[2],f[9]=y[6],f[10]=y[10],f[11]=y[14],f[12]=y[3],f[13]=y[7],f[14]=y[11],f[15]=y[15];return f}function G(f,y){const ba=y[0],v=y[1],P=y[2],X=y[3],Y=y[4],ha=y[5],ea=y[6],R=y[7],V=y[8],ca=y[9],ma=y[10],na=y[11],ta=y[12],wa=y[13],ya=y[14];y=y[15];const Ia=ba*ha-v*Y,Fa=ba*ea-P*Y,Ea=ba*R-X*Y,za=v*ea-P*ha,Da=v*R-X*ha,pa=P*R-X*ea,db=V*wa-ca*ta,eb=V*ya-ma*ta,
ab=V*y-na*ta,a=ca*ya-ma*wa,hb=ca*y-na*wa,fb=ma*y-na*ya;let Qa=Ia*fb-Fa*hb+Ea*a+za*ab-Da*eb+pa*db;if(!Qa)return null;Qa=1/Qa;f[0]=(ha*fb-ea*hb+R*a)*Qa;f[1]=(P*hb-v*fb-X*a)*Qa;f[2]=(wa*pa-ya*Da+y*za)*Qa;f[3]=(ma*Da-ca*pa-na*za)*Qa;f[4]=(ea*ab-Y*fb-R*eb)*Qa;f[5]=(ba*fb-P*ab+X*eb)*Qa;f[6]=(ya*Ea-ta*pa-y*Fa)*Qa;f[7]=(V*pa-ma*Ea+na*Fa)*Qa;f[8]=(Y*hb-ha*ab+R*db)*Qa;f[9]=(v*ab-ba*hb-X*db)*Qa;f[10]=(ta*Da-wa*Ea+y*Ia)*Qa;f[11]=(ca*Ea-V*Da-na*Ia)*Qa;f[12]=(ha*eb-Y*a-ea*db)*Qa;f[13]=(ba*a-v*eb+P*db)*Qa;f[14]=
(wa*Fa-ta*za-ya*Ia)*Qa;f[15]=(V*za-ca*Fa+ma*Ia)*Qa;return f}function m(f,y){const ba=y[0],v=y[1],P=y[2],X=y[3],Y=y[4],ha=y[5],ea=y[6],R=y[7],V=y[8],ca=y[9],ma=y[10],na=y[11],ta=y[12],wa=y[13],ya=y[14];y=y[15];f[0]=ha*(ma*y-na*ya)-ca*(ea*y-R*ya)+wa*(ea*na-R*ma);f[1]=-(v*(ma*y-na*ya)-ca*(P*y-X*ya)+wa*(P*na-X*ma));f[2]=v*(ea*y-R*ya)-ha*(P*y-X*ya)+wa*(P*R-X*ea);f[3]=-(v*(ea*na-R*ma)-ha*(P*na-X*ma)+ca*(P*R-X*ea));f[4]=-(Y*(ma*y-na*ya)-V*(ea*y-R*ya)+ta*(ea*na-R*ma));f[5]=ba*(ma*y-na*ya)-V*(P*y-X*ya)+ta*
(P*na-X*ma);f[6]=-(ba*(ea*y-R*ya)-Y*(P*y-X*ya)+ta*(P*R-X*ea));f[7]=ba*(ea*na-R*ma)-Y*(P*na-X*ma)+V*(P*R-X*ea);f[8]=Y*(ca*y-na*wa)-V*(ha*y-R*wa)+ta*(ha*na-R*ca);f[9]=-(ba*(ca*y-na*wa)-V*(v*y-X*wa)+ta*(v*na-X*ca));f[10]=ba*(ha*y-R*wa)-Y*(v*y-X*wa)+ta*(v*R-X*ha);f[11]=-(ba*(ha*na-R*ca)-Y*(v*na-X*ca)+V*(v*R-X*ha));f[12]=-(Y*(ca*ya-ma*wa)-V*(ha*ya-ea*wa)+ta*(ha*ma-ea*ca));f[13]=ba*(ca*ya-ma*wa)-V*(v*ya-P*wa)+ta*(v*ma-P*ca);f[14]=-(ba*(ha*ya-ea*wa)-Y*(v*ya-P*wa)+ta*(v*ea-P*ha));f[15]=ba*(ha*ma-ea*ca)-Y*
(v*ma-P*ca)+V*(v*ea-P*ha);return f}function r(f){const y=f[0],ba=f[1],v=f[2],P=f[3],X=f[4],Y=f[5],ha=f[6],ea=f[7],R=f[8],V=f[9],ca=f[10],ma=f[11],na=f[12],ta=f[13],wa=f[14];f=f[15];return(y*Y-ba*X)*(ca*f-ma*wa)-(y*ha-v*X)*(V*f-ma*ta)+(y*ea-P*X)*(V*wa-ca*ta)+(ba*ha-v*Y)*(R*f-ma*na)-(ba*ea-P*Y)*(R*wa-ca*na)+(v*ea-P*ha)*(R*ta-V*na)}function C(f,y,ba){const v=y[0],P=y[1],X=y[2],Y=y[3],ha=y[4],ea=y[5],R=y[6],V=y[7],ca=y[8],ma=y[9],na=y[10],ta=y[11],wa=y[12],ya=y[13],Ia=y[14];y=y[15];let Fa=ba[0],Ea=ba[1],
za=ba[2],Da=ba[3];f[0]=Fa*v+Ea*ha+za*ca+Da*wa;f[1]=Fa*P+Ea*ea+za*ma+Da*ya;f[2]=Fa*X+Ea*R+za*na+Da*Ia;f[3]=Fa*Y+Ea*V+za*ta+Da*y;Fa=ba[4];Ea=ba[5];za=ba[6];Da=ba[7];f[4]=Fa*v+Ea*ha+za*ca+Da*wa;f[5]=Fa*P+Ea*ea+za*ma+Da*ya;f[6]=Fa*X+Ea*R+za*na+Da*Ia;f[7]=Fa*Y+Ea*V+za*ta+Da*y;Fa=ba[8];Ea=ba[9];za=ba[10];Da=ba[11];f[8]=Fa*v+Ea*ha+za*ca+Da*wa;f[9]=Fa*P+Ea*ea+za*ma+Da*ya;f[10]=Fa*X+Ea*R+za*na+Da*Ia;f[11]=Fa*Y+Ea*V+za*ta+Da*y;Fa=ba[12];Ea=ba[13];za=ba[14];Da=ba[15];f[12]=Fa*v+Ea*ha+za*ca+Da*wa;f[13]=Fa*P+
Ea*ea+za*ma+Da*ya;f[14]=Fa*X+Ea*R+za*na+Da*Ia;f[15]=Fa*Y+Ea*V+za*ta+Da*y;return f}function Q(f,y,ba){const v=ba[0],P=ba[1];ba=ba[2];let X=void 0,Y=void 0,ha=void 0,ea=void 0,R=void 0,V=void 0,ca=void 0,ma=void 0,na=void 0,ta=void 0,wa=void 0,ya=void 0;y===f?(f[12]=y[0]*v+y[4]*P+y[8]*ba+y[12],f[13]=y[1]*v+y[5]*P+y[9]*ba+y[13],f[14]=y[2]*v+y[6]*P+y[10]*ba+y[14],f[15]=y[3]*v+y[7]*P+y[11]*ba+y[15]):(X=y[0],Y=y[1],ha=y[2],ea=y[3],R=y[4],V=y[5],ca=y[6],ma=y[7],na=y[8],ta=y[9],wa=y[10],ya=y[11],f[0]=X,f[1]=
Y,f[2]=ha,f[3]=ea,f[4]=R,f[5]=V,f[6]=ca,f[7]=ma,f[8]=na,f[9]=ta,f[10]=wa,f[11]=ya,f[12]=X*v+R*P+na*ba+y[12],f[13]=Y*v+V*P+ta*ba+y[13],f[14]=ha*v+ca*P+wa*ba+y[14],f[15]=ea*v+ma*P+ya*ba+y[15]);return f}function z(f,y,ba){const v=ba[0],P=ba[1];ba=ba[2];f[0]=y[0]*v;f[1]=y[1]*v;f[2]=y[2]*v;f[3]=y[3]*v;f[4]=y[4]*P;f[5]=y[5]*P;f[6]=y[6]*P;f[7]=y[7]*P;f[8]=y[8]*ba;f[9]=y[9]*ba;f[10]=y[10]*ba;f[11]=y[11]*ba;f[12]=y[12];f[13]=y[13];f[14]=y[14];f[15]=y[15];return f}function E(f,y,ba,v){let P=v[0],X=v[1];v=v[2];
let Y=Math.sqrt(P*P+X*X+v*v);var ha=void 0,ea=void 0;let R=void 0,V=void 0,ca=void 0,ma=void 0,na=void 0,ta=void 0,wa=void 0,ya=void 0,Ia=void 0,Fa=void 0,Ea=void 0,za=void 0,Da=void 0,pa=void 0,db=void 0,eb=void 0,ab=void 0,a=void 0,hb=void 0,fb=void 0;ea=ha=void 0;if(Y<B.EPSILON)return null;Y=1/Y;P*=Y;X*=Y;v*=Y;ha=Math.sin(ba);ea=Math.cos(ba);R=1-ea;V=y[0];ca=y[1];ma=y[2];na=y[3];ta=y[4];wa=y[5];ya=y[6];Ia=y[7];Fa=y[8];Ea=y[9];za=y[10];Da=y[11];pa=P*P*R+ea;db=X*P*R+v*ha;eb=v*P*R-X*ha;ab=P*X*R-v*
ha;a=X*X*R+ea;hb=v*X*R+P*ha;fb=P*v*R+X*ha;ha=X*v*R-P*ha;ea=v*v*R+ea;f[0]=V*pa+ta*db+Fa*eb;f[1]=ca*pa+wa*db+Ea*eb;f[2]=ma*pa+ya*db+za*eb;f[3]=na*pa+Ia*db+Da*eb;f[4]=V*ab+ta*a+Fa*hb;f[5]=ca*ab+wa*a+Ea*hb;f[6]=ma*ab+ya*a+za*hb;f[7]=na*ab+Ia*a+Da*hb;f[8]=V*fb+ta*ha+Fa*ea;f[9]=ca*fb+wa*ha+Ea*ea;f[10]=ma*fb+ya*ha+za*ea;f[11]=na*fb+Ia*ha+Da*ea;y!==f&&(f[12]=y[12],f[13]=y[13],f[14]=y[14],f[15]=y[15]);return f}function O(f,y,ba){const v=Math.sin(ba);ba=Math.cos(ba);const P=y[4],X=y[5],Y=y[6],ha=y[7],ea=y[8],
R=y[9],V=y[10],ca=y[11];y!==f&&(f[0]=y[0],f[1]=y[1],f[2]=y[2],f[3]=y[3],f[12]=y[12],f[13]=y[13],f[14]=y[14],f[15]=y[15]);f[4]=P*ba+ea*v;f[5]=X*ba+R*v;f[6]=Y*ba+V*v;f[7]=ha*ba+ca*v;f[8]=ea*ba-P*v;f[9]=R*ba-X*v;f[10]=V*ba-Y*v;f[11]=ca*ba-ha*v;return f}function c(f,y,ba){const v=Math.sin(ba);ba=Math.cos(ba);const P=y[0],X=y[1],Y=y[2],ha=y[3],ea=y[8],R=y[9],V=y[10],ca=y[11];y!==f&&(f[4]=y[4],f[5]=y[5],f[6]=y[6],f[7]=y[7],f[12]=y[12],f[13]=y[13],f[14]=y[14],f[15]=y[15]);f[0]=P*ba-ea*v;f[1]=X*ba-R*v;f[2]=
Y*ba-V*v;f[3]=ha*ba-ca*v;f[8]=P*v+ea*ba;f[9]=X*v+R*ba;f[10]=Y*v+V*ba;f[11]=ha*v+ca*ba;return f}function u(f,y,ba){const v=Math.sin(ba);ba=Math.cos(ba);const P=y[0],X=y[1],Y=y[2],ha=y[3],ea=y[4],R=y[5],V=y[6],ca=y[7];y!==f&&(f[8]=y[8],f[9]=y[9],f[10]=y[10],f[11]=y[11],f[12]=y[12],f[13]=y[13],f[14]=y[14],f[15]=y[15]);f[0]=P*ba+ea*v;f[1]=X*ba+R*v;f[2]=Y*ba+V*v;f[3]=ha*ba+ca*v;f[4]=ea*ba-P*v;f[5]=R*ba-X*v;f[6]=V*ba-Y*v;f[7]=ca*ba-ha*v;return f}function D(f,y){f[0]=1;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=1;
f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=1;f[11]=0;f[12]=y[0];f[13]=y[1];f[14]=y[2];f[15]=1;return f}function L(f,y){f[0]=y[0];f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=y[1];f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=y[2];f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f}function A(f,y,ba){let v=ba[0],P=ba[1];ba=ba[2];let X=Math.sqrt(v*v+P*P+ba*ba),Y=void 0,ha=void 0,ea=void 0;if(X<B.EPSILON)return null;X=1/X;v*=X;P*=X;ba*=X;Y=Math.sin(y);ha=Math.cos(y);ea=1-ha;f[0]=v*v*ea+ha;f[1]=P*v*ea+ba*Y;f[2]=ba*v*ea-P*Y;f[3]=0;f[4]=
v*P*ea-ba*Y;f[5]=P*P*ea+ha;f[6]=ba*P*ea+v*Y;f[7]=0;f[8]=v*ba*ea+P*Y;f[9]=P*ba*ea-v*Y;f[10]=ba*ba*ea+ha;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f}function H(f,y){const ba=Math.sin(y);y=Math.cos(y);f[0]=1;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=y;f[6]=ba;f[7]=0;f[8]=0;f[9]=-ba;f[10]=y;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f}function I(f,y){const ba=Math.sin(y);y=Math.cos(y);f[0]=y;f[1]=0;f[2]=-ba;f[3]=0;f[4]=0;f[5]=1;f[6]=0;f[7]=0;f[8]=ba;f[9]=0;f[10]=y;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=
1;return f}function W(f,y){const ba=Math.sin(y);y=Math.cos(y);f[0]=y;f[1]=ba;f[2]=0;f[3]=0;f[4]=-ba;f[5]=y;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=1;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f}function M(f,y,ba){var v=y[0],P=y[1],X=y[2],Y=y[3],ha=v+v,ea=P+P;const R=X+X;y=v*ha;const V=v*ea;v*=R;const ca=P*ea;P*=R;X*=R;ha*=Y;ea*=Y;Y*=R;f[0]=1-(ca+X);f[1]=V+Y;f[2]=v-ea;f[3]=0;f[4]=V-Y;f[5]=1-(y+X);f[6]=P+ha;f[7]=0;f[8]=v+ea;f[9]=P-ha;f[10]=1-(y+ca);f[11]=0;f[12]=ba[0];f[13]=ba[1];f[14]=ba[2];f[15]=1;
return f}function k(f,y){const ba=gb,v=-y[0],P=-y[1],X=-y[2],Y=y[3],ha=y[4],ea=y[5],R=y[6],V=y[7],ca=v*v+P*P+X*X+Y*Y;0<ca?(ba[0]=2*(ha*Y+V*v+ea*X-R*P)/ca,ba[1]=2*(ea*Y+V*P+R*v-ha*X)/ca,ba[2]=2*(R*Y+V*X+ha*P-ea*v)/ca):(ba[0]=2*(ha*Y+V*v+ea*X-R*P),ba[1]=2*(ea*Y+V*P+R*v-ha*X),ba[2]=2*(R*Y+V*X+ha*P-ea*v));M(f,y,ba);return f}function t(f,y){f[0]=y[12];f[1]=y[13];f[2]=y[14];return f}function e(f,y){const ba=y[0],v=y[1],P=y[2],X=y[4],Y=y[5],ha=y[6],ea=y[8],R=y[9];y=y[10];f[0]=Math.sqrt(ba*ba+v*v+P*P);f[1]=
Math.sqrt(X*X+Y*Y+ha*ha);f[2]=Math.sqrt(ea*ea+R*R+y*y);return f}function x(f,y){const ba=y[0]+y[5]+y[10];let v=0;0<ba?(v=2*Math.sqrt(ba+1),f[3]=.25*v,f[0]=(y[6]-y[9])/v,f[1]=(y[8]-y[2])/v,f[2]=(y[1]-y[4])/v):y[0]>y[5]&&y[0]>y[10]?(v=2*Math.sqrt(1+y[0]-y[5]-y[10]),f[3]=(y[6]-y[9])/v,f[0]=.25*v,f[1]=(y[1]+y[4])/v,f[2]=(y[8]+y[2])/v):y[5]>y[10]?(v=2*Math.sqrt(1+y[5]-y[0]-y[10]),f[3]=(y[8]-y[2])/v,f[0]=(y[1]+y[4])/v,f[1]=.25*v,f[2]=(y[6]+y[9])/v):(v=2*Math.sqrt(1+y[10]-y[0]-y[5]),f[3]=(y[1]-y[4])/v,f[0]=
(y[8]+y[2])/v,f[1]=(y[6]+y[9])/v,f[2]=.25*v);return f}function F(f,y,ba,v){var P=y[0],X=y[1],Y=y[2],ha=y[3],ea=P+P,R=X+X,V=Y+Y;y=P*ea;const ca=P*R;P*=V;const ma=X*R;X*=V;Y*=V;ea*=ha;R*=ha;ha*=V;V=v[0];const na=v[1];v=v[2];f[0]=(1-(ma+Y))*V;f[1]=(ca+ha)*V;f[2]=(P-R)*V;f[3]=0;f[4]=(ca-ha)*na;f[5]=(1-(y+Y))*na;f[6]=(X+ea)*na;f[7]=0;f[8]=(P+R)*v;f[9]=(X-ea)*v;f[10]=(1-(y+ma))*v;f[11]=0;f[12]=ba[0];f[13]=ba[1];f[14]=ba[2];f[15]=1;return f}function K(f,y,ba,v,P){var X=y[0],Y=y[1],ha=y[2],ea=y[3],R=X+X,
V=Y+Y,ca=ha+ha;y=X*R;var ma=X*V,na=X*ca;X=Y*V;Y*=ca;var ta=ha*ca;ha=ea*R;V*=ea;const wa=ea*ca;var ya=v[0],Ia=v[1];ca=v[2];v=P[0];ea=P[1];P=P[2];R=(1-(X+ta))*ya;const Fa=(ma+wa)*ya;ya*=na-V;ma=(ma-wa)*Ia;ta=(1-(y+ta))*Ia;Ia*=Y+ha;na=(na+V)*ca;Y=(Y-ha)*ca;y=(1-(y+X))*ca;f[0]=R;f[1]=Fa;f[2]=ya;f[3]=0;f[4]=ma;f[5]=ta;f[6]=Ia;f[7]=0;f[8]=na;f[9]=Y;f[10]=y;f[11]=0;f[12]=ba[0]+v-(R*v+ma*ea+na*P);f[13]=ba[1]+ea-(Fa*v+ta*ea+Y*P);f[14]=ba[2]+P-(ya*v+Ia*ea+y*P);f[15]=1;return f}function h(f,y){var ba=y[0],v=
y[1],P=y[2];y=y[3];var X=ba+ba,Y=v+v;const ha=P+P;ba*=X;const ea=v*X;v*=Y;const R=P*X,V=P*Y;P*=ha;X*=y;Y*=y;y*=ha;f[0]=1-v-P;f[1]=ea+y;f[2]=R-Y;f[3]=0;f[4]=ea-y;f[5]=1-ba-P;f[6]=V+X;f[7]=0;f[8]=R+Y;f[9]=V-X;f[10]=1-ba-v;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f}function p(f,y,ba,v,P,X,Y){const ha=1/(ba-y),ea=1/(P-v),R=1/(X-Y);f[0]=2*X*ha;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=2*X*ea;f[6]=0;f[7]=0;f[8]=(ba+y)*ha;f[9]=(P+v)*ea;f[10]=(Y+X)*R;f[11]=-1;f[12]=0;f[13]=0;f[14]=Y*X*2*R;f[15]=0;return f}function J(f,
y,ba,v,P){y=1/Math.tan(y/2);let X=void 0;f[0]=y/ba;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=y;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[11]=-1;f[12]=0;f[13]=0;f[15]=0;null!=P&&Infinity!==P?(X=1/(v-P),f[10]=(P+v)*X,f[14]=2*P*v*X):(f[10]=-1,f[14]=-2*v);return f}function U(f,y,ba,v){const P=Math.tan(y.upDegrees*Math.PI/180),X=Math.tan(y.downDegrees*Math.PI/180),Y=Math.tan(y.leftDegrees*Math.PI/180);y=Math.tan(y.rightDegrees*Math.PI/180);const ha=2/(Y+y),ea=2/(P+X);f[0]=ha;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=ea;f[6]=0;f[7]=
0;f[8]=-((Y-y)*ha*.5);f[9]=(P-X)*ea*.5;f[10]=v/(ba-v);f[11]=-1;f[12]=0;f[13]=0;f[14]=v*ba/(ba-v);f[15]=0;return f}function da(f,y,ba,v,P,X,Y){const ha=1/(y-ba),ea=1/(v-P),R=1/(X-Y);f[0]=-2*ha;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=-2*ea;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=2*R;f[11]=0;f[12]=(y+ba)*ha;f[13]=(P+v)*ea;f[14]=(Y+X)*R;f[15]=1;return f}function ja(f,y,ba,v){let P=void 0,X=void 0;var Y=void 0,ha=void 0;let ea=void 0,R=void 0;var V=void 0,ca=void 0;let ma=void 0,na=void 0;const ta=y[0],wa=y[1];y=y[2];
Y=v[0];ha=v[1];v=v[2];V=ba[0];ca=ba[1];ba=ba[2];if(Math.abs(ta-V)<B.EPSILON&&Math.abs(wa-ca)<B.EPSILON&&Math.abs(y-ba)<B.EPSILON)return n(f);V=ta-V;ca=wa-ca;ma=y-ba;na=1/Math.sqrt(V*V+ca*ca+ma*ma);V*=na;ca*=na;ma*=na;P=ha*ma-v*ca;X=v*V-Y*ma;Y=Y*ca-ha*V;(na=Math.sqrt(P*P+X*X+Y*Y))?(na=1/na,P*=na,X*=na,Y*=na):Y=X=P=0;ha=ca*Y-ma*X;ea=ma*P-V*Y;R=V*X-ca*P;(na=Math.sqrt(ha*ha+ea*ea+R*R))?(na=1/na,ha*=na,ea*=na,R*=na):R=ea=ha=0;f[0]=P;f[1]=ha;f[2]=V;f[3]=0;f[4]=X;f[5]=ea;f[6]=ca;f[7]=0;f[8]=Y;f[9]=R;f[10]=
ma;f[11]=0;f[12]=-(P*ta+X*wa+Y*y);f[13]=-(ha*ta+ea*wa+R*y);f[14]=-(V*ta+ca*wa+ma*y);f[15]=1;return f}function ka(f,y,ba,v){const P=y[0],X=y[1];y=y[2];var Y=v[0];const ha=v[1];var ea=v[2];v=P-ba[0];let R=X-ba[1];ba=y-ba[2];let V=v*v+R*R+ba*ba;0<V&&(V=1/Math.sqrt(V),v*=V,R*=V,ba*=V);let ca=ha*ba-ea*R;ea=ea*v-Y*ba;Y=Y*R-ha*v;V=ca*ca+ea*ea+Y*Y;0<V&&(V=1/Math.sqrt(V),ca*=V,ea*=V,Y*=V);f[0]=ca;f[1]=ea;f[2]=Y;f[3]=0;f[4]=R*Y-ba*ea;f[5]=ba*ca-v*Y;f[6]=v*ea-R*ca;f[7]=0;f[8]=v;f[9]=R;f[10]=ba;f[11]=0;f[12]=
P;f[13]=X;f[14]=y;f[15]=1;return f}function oa(f){return"mat4("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+", "+f[4]+", "+f[5]+", "+f[6]+", "+f[7]+", "+f[8]+", "+f[9]+", "+f[10]+", "+f[11]+", "+f[12]+", "+f[13]+", "+f[14]+", "+f[15]+")"}function ua(f){return Math.sqrt(f[0]**2+f[1]**2+f[2]**2+f[3]**2+f[4]**2+f[5]**2+f[6]**2+f[7]**2+f[8]**2+f[9]**2+f[10]**2+f[11]**2+f[12]**2+f[13]**2+f[14]**2+f[15]**2)}function ra(f,y,ba){f[0]=y[0]+ba[0];f[1]=y[1]+ba[1];f[2]=y[2]+ba[2];f[3]=y[3]+ba[3];f[4]=y[4]+ba[4];f[5]=
y[5]+ba[5];f[6]=y[6]+ba[6];f[7]=y[7]+ba[7];f[8]=y[8]+ba[8];f[9]=y[9]+ba[9];f[10]=y[10]+ba[10];f[11]=y[11]+ba[11];f[12]=y[12]+ba[12];f[13]=y[13]+ba[13];f[14]=y[14]+ba[14];f[15]=y[15]+ba[15];return f}function Aa(f,y,ba){f[0]=y[0]-ba[0];f[1]=y[1]-ba[1];f[2]=y[2]-ba[2];f[3]=y[3]-ba[3];f[4]=y[4]-ba[4];f[5]=y[5]-ba[5];f[6]=y[6]-ba[6];f[7]=y[7]-ba[7];f[8]=y[8]-ba[8];f[9]=y[9]-ba[9];f[10]=y[10]-ba[10];f[11]=y[11]-ba[11];f[12]=y[12]-ba[12];f[13]=y[13]-ba[13];f[14]=y[14]-ba[14];f[15]=y[15]-ba[15];return f}
function Na(f,y,ba){f[0]=y[0]*ba;f[1]=y[1]*ba;f[2]=y[2]*ba;f[3]=y[3]*ba;f[4]=y[4]*ba;f[5]=y[5]*ba;f[6]=y[6]*ba;f[7]=y[7]*ba;f[8]=y[8]*ba;f[9]=y[9]*ba;f[10]=y[10]*ba;f[11]=y[11]*ba;f[12]=y[12]*ba;f[13]=y[13]*ba;f[14]=y[14]*ba;f[15]=y[15]*ba;return f}function Ta(f,y,ba,v){f[0]=y[0]+ba[0]*v;f[1]=y[1]+ba[1]*v;f[2]=y[2]+ba[2]*v;f[3]=y[3]+ba[3]*v;f[4]=y[4]+ba[4]*v;f[5]=y[5]+ba[5]*v;f[6]=y[6]+ba[6]*v;f[7]=y[7]+ba[7]*v;f[8]=y[8]+ba[8]*v;f[9]=y[9]+ba[9]*v;f[10]=y[10]+ba[10]*v;f[11]=y[11]+ba[11]*v;f[12]=y[12]+
ba[12]*v;f[13]=y[13]+ba[13]*v;f[14]=y[14]+ba[14]*v;f[15]=y[15]+ba[15]*v;return f}function Ka(f,y){return f[0]===y[0]&&f[1]===y[1]&&f[2]===y[2]&&f[3]===y[3]&&f[4]===y[4]&&f[5]===y[5]&&f[6]===y[6]&&f[7]===y[7]&&f[8]===y[8]&&f[9]===y[9]&&f[10]===y[10]&&f[11]===y[11]&&f[12]===y[12]&&f[13]===y[13]&&f[14]===y[14]&&f[15]===y[15]}function Ca(f,y){const ba=f[0],v=f[1],P=f[2],X=f[3],Y=f[4],ha=f[5],ea=f[6],R=f[7],V=f[8],ca=f[9],ma=f[10],na=f[11],ta=f[12],wa=f[13],ya=f[14];f=f[15];const Ia=y[0],Fa=y[1],Ea=y[2],
za=y[3],Da=y[4],pa=y[5],db=y[6],eb=y[7],ab=y[8],a=y[9],hb=y[10],fb=y[11],Qa=y[12],vb=y[13],yb=y[14];y=y[15];return Math.abs(ba-Ia)<=B.EPSILON*Math.max(1,Math.abs(ba),Math.abs(Ia))&&Math.abs(v-Fa)<=B.EPSILON*Math.max(1,Math.abs(v),Math.abs(Fa))&&Math.abs(P-Ea)<=B.EPSILON*Math.max(1,Math.abs(P),Math.abs(Ea))&&Math.abs(X-za)<=B.EPSILON*Math.max(1,Math.abs(X),Math.abs(za))&&Math.abs(Y-Da)<=B.EPSILON*Math.max(1,Math.abs(Y),Math.abs(Da))&&Math.abs(ha-pa)<=B.EPSILON*Math.max(1,Math.abs(ha),Math.abs(pa))&&
Math.abs(ea-db)<=B.EPSILON*Math.max(1,Math.abs(ea),Math.abs(db))&&Math.abs(R-eb)<=B.EPSILON*Math.max(1,Math.abs(R),Math.abs(eb))&&Math.abs(V-ab)<=B.EPSILON*Math.max(1,Math.abs(V),Math.abs(ab))&&Math.abs(ca-a)<=B.EPSILON*Math.max(1,Math.abs(ca),Math.abs(a))&&Math.abs(ma-hb)<=B.EPSILON*Math.max(1,Math.abs(ma),Math.abs(hb))&&Math.abs(na-fb)<=B.EPSILON*Math.max(1,Math.abs(na),Math.abs(fb))&&Math.abs(ta-Qa)<=B.EPSILON*Math.max(1,Math.abs(ta),Math.abs(Qa))&&Math.abs(wa-vb)<=B.EPSILON*Math.max(1,Math.abs(wa),
Math.abs(vb))&&Math.abs(ya-yb)<=B.EPSILON*Math.max(1,Math.abs(ya),Math.abs(yb))&&Math.abs(f-y)<=B.EPSILON*Math.max(1,Math.abs(f),Math.abs(y))}function Ra(f){const y=B.EPSILON,ba=f[0],v=f[1],P=f[2],X=f[4],Y=f[5],ha=f[6],ea=f[8],R=f[9];f=f[10];return Math.abs(1-(ba*ba+X*X+ea*ea))<=y&&Math.abs(1-(v*v+Y*Y+R*R))<=y&&Math.abs(1-(P*P+ha*ha+f*f))<=y}const gb=b.create();b=Object.freeze({__proto__:null,copy:N,set:q,identity:n,transpose:g,invert:G,adjoint:m,determinant:r,multiply:C,translate:Q,scale:z,rotate:E,
rotateX:O,rotateY:c,rotateZ:u,fromTranslation:D,fromScaling:L,fromRotation:A,fromXRotation:H,fromYRotation:I,fromZRotation:W,fromRotationTranslation:M,fromQuat2:k,getTranslation:t,getScaling:e,getRotation:x,fromRotationTranslationScale:F,fromRotationTranslationScaleOrigin:K,fromQuat:h,frustum:p,perspective:J,perspectiveFromFieldOfView:U,ortho:da,lookAt:ja,targetTo:ka,str:oa,frob:ua,add:ra,subtract:Aa,multiplyScalar:Na,multiplyScalarAndAdd:Ta,exactEquals:Ka,equals:Ca,isOrthoNormal:Ra,mul:C,sub:Aa});
l.add=ra;l.adjoint=m;l.copy=N;l.determinant=r;l.equals=Ca;l.exactEquals=Ka;l.frob=ua;l.fromQuat=h;l.fromQuat2=k;l.fromRotation=A;l.fromRotationTranslation=M;l.fromRotationTranslationScale=F;l.fromRotationTranslationScaleOrigin=K;l.fromScaling=L;l.fromTranslation=D;l.fromXRotation=H;l.fromYRotation=I;l.fromZRotation=W;l.frustum=p;l.getRotation=x;l.getScaling=e;l.getTranslation=t;l.identity=n;l.invert=G;l.isOrthoNormal=Ra;l.lookAt=ja;l.mat4=b;l.mul=C;l.multiply=C;l.multiplyScalar=Na;l.multiplyScalarAndAdd=
Ta;l.ortho=da;l.perspective=J;l.perspectiveFromFieldOfView=U;l.rotate=E;l.rotateX=O;l.rotateY=c;l.rotateZ=u;l.scale=z;l.set=q;l.str=oa;l.sub=Aa;l.subtract=Aa;l.targetTo=ka;l.translate=Q;l.transpose=g})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(l,b,B,N,q){function n(){return!!b._pe}function g(){return!!q("esri-wasm")}function G(){return E?E:E=(new Promise(function(c,u){l(["./pe-wasm"],c,u)})).then(function(c){return c.peWasm}).then(({default:c})=>
c({locateFile:u=>N.getAssetUrl(`esri/geometry/support/${u}`)})).then(c=>{m(c)})}function m(c){function u(A,H,I){A[H]=I(A[H])}b._pe=c;b.PeDefs.init();b.PeGTlistExtended.init();b.PeNotationMgrs.init();b.PeNotationUtm.init();b.PePCSInfo.init();b.PeGCSExtent=function(A){function H(){return A.apply(this,arguments)||this}B._inheritsLoose(H,A);H.prototype.destroy=function(){b._pe.destroy(this)};return H}(b._pe.PeGCSExtent);c=[b._pe.PeDatum,b._pe.PeGeogcs,b._pe.PeGeogtran,b._pe.PeObject,b._pe.PeParameter,
b._pe.PePrimem,b._pe.PeProjcs,b._pe.PeSpheroid,b._pe.PeUnit];for(var D of c)u(D.prototype,"getName",A=>function(){return A.call(this,Array(b.PeDefs.PE_NAME_MAX))});for(const A of[b._pe.PeGeogtran,b._pe.PeProjcs])u(A.prototype,"getParameters",H=>function(){const I=Array(b.PeDefs.PE_PARM_MAX);let W=H.call(this);for(let M=0;M<I.length;M++){const k=b._pe.getValue(W,"*");I[M]=k?b._pe.wrapPointer(k,b._pe.PeParameter):null;W+=Int32Array.BYTES_PER_ELEMENT}return I});u(b._pe.PeHorizon.prototype,"getCoord",
A=>function(){const H=this.getSize();if(!H)return null;const I=[],W=A.call(this);z(I,H,W);return I});u(b._pe.PeGTlistExtendedEntry.prototype,"getEntries",A=>{const H=b._pe._pe_getPeGTlistExtendedGTsSize();return function(){let I=null;var W=A.call(this);if(!b._pe.compare(W,b._pe.NULL)){I=[W];const M=this.getSteps();if(1<M){W=b._pe.getPointer(W);for(let k=1;k<M;k++)I.push(b._pe.wrapPointer(W+H*k,b._pe.PeGTlistExtendedGTs))}}return I}});const L=b._pe._pe_getPeHorizonSize();D=A=>function(){let H=this._cache;
H||(this._cache=H=new Map);if(H.has(A))return H.get(A);let I=null;var W=A.call(this);if(!b._pe.compare(W,b._pe.NULL)){I=[W];const M=W.getNump();if(1<M){W=b._pe.getPointer(W);for(let k=1;k<M;k++)I.push(b._pe.wrapPointer(W+L*k,b._pe.PeHorizon))}}H.set(A,I);return I};u(b._pe.PeProjcs.prototype,"horizonGcsGenerate",D);u(b._pe.PeProjcs.prototype,"horizonPcsGenerate",D);b._pe.PeObject.prototype.toString=function(A=b.PeDefs.PE_STR_OPTS_NONE){b._pe.ensureCache.prepare();const H=b._pe.getPointer(this),I=b._pe.ensureInt8(Array(b.PeDefs.PE_BUFFER_MAX));
return b._pe.UTF8ToString(b._pe._pe_object_to_string_ext(H,A,I))}}function r(c){if(c){var u=b._pe.getClass(c);u&&(u=b._pe.getCache(u))&&(c=b._pe.getPointer(c))&&delete u[c]}}function C(c,u){const D=[];u=Array(u);for(let L=0;L<c;L++)D.push(b._pe.ensureInt8(u));return D}function Q(c){let u;Array.isArray(c[0])?(u=[],c.forEach(D=>{u.push(D[0],D[1])})):u=c;return u}function z(c,u,D,L=!1){if(L)for(L=0;L<2*u;L++)c[L]=b._pe.getValue(D+L*Float64Array.BYTES_PER_ELEMENT,"double");else{L=0===c.length;for(let A=
0;A<u;A++)L&&(c[A]=Array(2)),c[A][0]=b._pe.getValue(D,"double"),c[A][1]=b._pe.getValue(D+Float64Array.BYTES_PER_ELEMENT,"double"),D+=2*Float64Array.BYTES_PER_ELEMENT}}let E;b._pe=null;b.PeCSTransformations=void 0;(function(c){function u(A,H,I){b._pe.ensureCache.prepare();var W=Q(I);const M=I===W;W=b._pe.ensureFloat64(W);(A=b._pe._pe_geog_to_proj(b._pe.getPointer(A),H,W))&&z(I,H,W,M);return A}function D(A,H,I){return L(A,H,I,0)}function L(A,H,I,W){b._pe.ensureCache.prepare();var M=Q(I);const k=I===
M;M=b._pe.ensureFloat64(M);(A=b._pe._pe_proj_to_geog_center(b._pe.getPointer(A),H,M,W))&&z(I,H,M,k);return A}c.geogToProj=u;c.projGeog=function(A,H,I,W){switch(W){case b.PeDefs.PE_TRANSFORM_P_TO_G:return D(A,H,I);case b.PeDefs.PE_TRANSFORM_G_TO_P:return u(A,H,I)}return 0};c.projToGeog=D;c.projToGeogCenter=L})(b.PeCSTransformations||(b.PeCSTransformations={}));b.PeDefs=void 0;(function(c){c.init=function(){c.PE_BUFFER_MAX=b._pe.PeDefs.prototype.PE_BUFFER_MAX;c.PE_NAME_MAX=b._pe.PeDefs.prototype.PE_NAME_MAX;
c.PE_MGRS_MAX=b._pe.PeDefs.prototype.PE_MGRS_MAX;c.PE_USNG_MAX=b._pe.PeDefs.prototype.PE_USNG_MAX;c.PE_DD_MAX=b._pe.PeDefs.prototype.PE_DD_MAX;c.PE_DDM_MAX=b._pe.PeDefs.prototype.PE_DDM_MAX;c.PE_DMS_MAX=b._pe.PeDefs.prototype.PE_DMS_MAX;c.PE_UTM_MAX=b._pe.PeDefs.prototype.PE_UTM_MAX;c.PE_PARM_MAX=b._pe.PeDefs.prototype.PE_PARM_MAX;c.PE_TYPE_NONE=b._pe.PeDefs.prototype.PE_TYPE_NONE;c.PE_TYPE_GEOGCS=b._pe.PeDefs.prototype.PE_TYPE_GEOGCS;c.PE_TYPE_PROJCS=b._pe.PeDefs.prototype.PE_TYPE_PROJCS;c.PE_TYPE_GEOGTRAN=
b._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;c.PE_TYPE_COORDSYS=b._pe.PeDefs.prototype.PE_TYPE_COORDSYS;c.PE_TYPE_UNIT=b._pe.PeDefs.prototype.PE_TYPE_UNIT;c.PE_TYPE_LINUNIT=b._pe.PeDefs.prototype.PE_TYPE_LINUNIT;c.PE_STR_OPTS_NONE=b._pe.PeDefs.prototype.PE_STR_OPTS_NONE;c.PE_STR_AUTH_NONE=b._pe.PeDefs.prototype.PE_STR_AUTH_NONE;c.PE_STR_AUTH_TOP=b._pe.PeDefs.prototype.PE_STR_AUTH_TOP;c.PE_STR_NAME_CANON=b._pe.PeDefs.prototype.PE_STR_NAME_CANON;c.PE_PARM_X0=b._pe.PeDefs.prototype.PE_PARM_X0;c.PE_PARM_ND=
b._pe.PeDefs.prototype.PE_PARM_ND;c.PE_TRANSFORM_1_TO_2=b._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;c.PE_TRANSFORM_2_TO_1=b._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;c.PE_TRANSFORM_P_TO_G=b._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;c.PE_TRANSFORM_G_TO_P=b._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;c.PE_HORIZON_RECT=b._pe.PeDefs.prototype.PE_HORIZON_RECT;c.PE_HORIZON_POLY=b._pe.PeDefs.prototype.PE_HORIZON_POLY;c.PE_HORIZON_LINE=b._pe.PeDefs.prototype.PE_HORIZON_LINE;c.PE_HORIZON_DELTA=b._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(b.PeDefs||
(b.PeDefs={}));b.PeFactory=void 0;(function(c){function u(H,I){let W=null,M=D[H];M||(M={},D[H]=M);M.hasOwnProperty(String(I))?W=M[I]:(H=b._pe.PeFactory.prototype.factoryByType(H,I),b._pe.compare(H,b._pe.NULL)||(W=H,M[I]=W));return W=A(W)}const D={},L={},A=H=>{if(H){const I=H.getType();switch(I){case b.PeDefs.PE_TYPE_GEOGCS:H=b._pe.castObject(H,b._pe.PeGeogcs);break;case b.PeDefs.PE_TYPE_PROJCS:H=b._pe.castObject(H,b._pe.PeProjcs);break;case b.PeDefs.PE_TYPE_GEOGTRAN:H=b._pe.castObject(H,b._pe.PeGeogtran);
break;default:I&b.PeDefs.PE_TYPE_UNIT&&(H=b._pe.castObject(H,b._pe.PeUnit))}}return H};c.initialize=function(){b._pe.PeFactory.prototype.initialize(null)};c.coordsys=function(H){return u(b.PeDefs.PE_TYPE_COORDSYS,H)};c.factoryByType=u;c.fromString=function(H,I){let W=null,M=L[H];M||(M={},L[H]=M);M.hasOwnProperty(I)?W=M[I]:(H=b._pe.PeFactory.prototype.fromString(H,I),b._pe.compare(H,b._pe.NULL)||(W=H,M[I]=W));return W=A(W)};c.geogcs=function(H){return u(b.PeDefs.PE_TYPE_GEOGCS,H)};c.geogtran=function(H){return u(b.PeDefs.PE_TYPE_GEOGTRAN,
H)};c.getCode=function(H){return b._pe.PeFactory.prototype.getCode(H)};c.projcs=function(H){return u(b.PeDefs.PE_TYPE_PROJCS,H)};c.unit=function(H){return u(b.PeDefs.PE_TYPE_UNIT,H)}})(b.PeFactory||(b.PeFactory={}));b.PeGCSExtent=null;b.PeGTlistExtended=void 0;(function(c){let u;c.init=function(){c.PE_GTLIST_OPTS_COMMON=b._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;u=b._pe._pe_getPeGTlistExtendedEntrySize()};c.getGTlist=function(D,L,A,H,I,W){let M=null;const k=new b._pe.PeInteger(W);try{const t=
b._pe.PeGTlistExtended.prototype.getGTlist(D,L,A,H,I,k);if(W=k.val)if(M=[t],1<W){const e=b._pe.getPointer(t);for(D=1;D<W;D++)M.push(b._pe.wrapPointer(e+u*D,b._pe.PeGTlistExtendedEntry))}}finally{b._pe.destroy(k)}return M}})(b.PeGTlistExtended||(b.PeGTlistExtended={}));b.PeGTlistExtendedEntry=void 0;(function(c){c.destroy=function(u){if(u&&u.length){for(const D of u)r(D),D.getEntries().forEach(L=>{r(L);L=L.getGeogtran();r(L);L.getParameters().forEach(r);[L.getGeogcs1(),L.getGeogcs2()].forEach(A=>{r(A);
const H=A.getDatum();r(H);r(H.getSpheroid());r(A.getPrimem());r(A.getUnit())})});b._pe.PeGTlistExtendedEntry.prototype.Delete(u[0])}}})(b.PeGTlistExtendedEntry||(b.PeGTlistExtendedEntry={}));b.PeGTTransformations=void 0;(function(c){c.geogToGeog=function(u,D,L,A,H){b._pe.ensureCache.prepare();var I=Q(L);const W=L===I;I=b._pe.ensureFloat64(I);let M=0;A&&(M=b._pe.ensureFloat64(A));(u=b._pe._pe_geog_to_geog(b._pe.getPointer(u),D,I,M,H))&&z(L,D,I,W);return u}})(b.PeGTTransformations||(b.PeGTTransformations=
{}));b.PeNotationDms=void 0;(function(c){const u=(L,A,H,I,W,M)=>{b._pe.ensureCache.prepare();switch(L){case "dd":var k=b._pe._pe_geog_to_dd;var t=b.PeDefs.PE_DD_MAX;break;case "ddm":k=b._pe._pe_geog_to_ddm;t=b.PeDefs.PE_DDM_MAX;break;case "dms":k=b._pe._pe_geog_to_dms,t=b.PeDefs.PE_DMS_MAX}L=0;A&&(L=b._pe.getPointer(A));A=Q(I);A=b._pe.ensureFloat64(A);t=C(H,t);I=b._pe.ensureInt32(t);if(W=k(L,H,A,W,I))for(k=0;k<H;k++)M[k]=b._pe.UTF8ToString(t[k]);return W},D=(L,A,H,I,W)=>{b._pe.ensureCache.prepare();
switch(L){case "dd":var M=b._pe._pe_dd_to_geog;break;case "ddm":M=b._pe._pe_ddm_to_geog;break;case "dms":M=b._pe._pe_dms_to_geog}L=0;A&&(L=b._pe.getPointer(A));A=I.map(k=>b._pe.ensureString(k));I=b._pe.ensureInt32(A);A=b._pe.ensureFloat64(Array(2*H));(M=M(L,H,I,A))&&z(W,H,A);return M};c.geog_to_dms=function(L,A,H,I,W){return u("dms",L,A,H,I,W)};c.dms_to_geog=function(L,A,H,I){return D("dms",L,A,H,I)};c.geog_to_ddm=function(L,A,H,I,W){return u("ddm",L,A,H,I,W)};c.ddm_to_geog=function(L,A,H,I){return D("ddm",
L,A,H,I)};c.geog_to_dd=function(L,A,H,I,W){return u("dd",L,A,H,I,W)};c.dd_to_geog=function(L,A,H,I){return D("dd",L,A,H,I)}})(b.PeNotationDms||(b.PeNotationDms={}));b.PeNotationMgrs=void 0;(function(c){c.init=function(){c.PE_MGRS_STYLE_NEW=b._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;c.PE_MGRS_STYLE_OLD=b._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;c.PE_MGRS_STYLE_AUTO=b._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;c.PE_MGRS_180_ZONE_1_PLUS=b._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;
c.PE_MGRS_ADD_SPACES=b._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};c.geog_to_mgrs_extended=function(u,D,L,A,H,I,W){b._pe.ensureCache.prepare();let M=0;u&&(M=b._pe.getPointer(u));u=Q(L);L=b._pe.ensureFloat64(u);u=C(D,b.PeDefs.PE_MGRS_MAX);const k=b._pe.ensureInt32(u);if(A=b._pe._pe_geog_to_mgrs_extended(M,D,L,A,H,I,k))for(H=0;H<D;H++)W[H]=b._pe.UTF8ToString(u[H]);return A};c.mgrs_to_geog_extended=function(u,D,L,A,H){b._pe.ensureCache.prepare();let I=0;u&&(I=b._pe.getPointer(u));u=L.map(W=>b._pe.ensureString(W));
L=b._pe.ensureInt32(u);u=b._pe.ensureFloat64(Array(2*D));(A=b._pe._pe_mgrs_to_geog_extended(I,D,L,A,u))&&z(H,D,u);return A}})(b.PeNotationMgrs||(b.PeNotationMgrs={}));b.PeNotationUsng=void 0;(function(c){c.geog_to_usng=function(u,D,L,A,H,I,W){b._pe.ensureCache.prepare();let M=0;u&&(M=b._pe.getPointer(u));u=Q(L);L=b._pe.ensureFloat64(u);u=C(D,b.PeDefs.PE_MGRS_MAX);const k=b._pe.ensureInt32(u);if(A=b._pe._pe_geog_to_usng(M,D,L,A,H,I,k))for(H=0;H<D;H++)W[H]=b._pe.UTF8ToString(u[H]);return A};c.usng_to_geog=
function(u,D,L,A){b._pe.ensureCache.prepare();var H=0;u&&(H=b._pe.getPointer(u));u=L.map(I=>b._pe.ensureString(I));L=b._pe.ensureInt32(u);u=b._pe.ensureFloat64(Array(2*D));(H=b._pe._pe_usng_to_geog(H,D,L,u))&&z(A,D,u);return H}})(b.PeNotationUsng||(b.PeNotationUsng={}));b.PeNotationUtm=void 0;(function(c){c.init=function(){c.PE_UTM_OPTS_NONE=b._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;c.PE_UTM_OPTS_ADD_SPACES=b._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;c.PE_UTM_OPTS_NS=b._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};
c.geog_to_utm=function(u,D,L,A,H){b._pe.ensureCache.prepare();var I=0;u&&(I=b._pe.getPointer(u));u=Q(L);L=b._pe.ensureFloat64(u);u=C(D,b.PeDefs.PE_UTM_MAX);const W=b._pe.ensureInt32(u);if(A=b._pe._pe_geog_to_utm(I,D,L,A,W))for(I=0;I<D;I++)H[I]=b._pe.UTF8ToString(u[I]);return A};c.utm_to_geog=function(u,D,L,A,H){b._pe.ensureCache.prepare();let I=0;u&&(I=b._pe.getPointer(u));u=L.map(W=>b._pe.ensureString(W));L=b._pe.ensureInt32(u);u=b._pe.ensureFloat64(Array(2*D));(A=b._pe._pe_utm_to_geog(I,D,L,A,u))&&
z(H,D,u);return A}})(b.PeNotationUtm||(b.PeNotationUtm={}));b.PePCSInfo=void 0;(function(c){const u=new Map;c.init=function(){c.PE_PCSINFO_OPTION_NONE=b._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;c.PE_PCSINFO_OPTION_DOMAIN=b._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;c.PE_POLE_OUTSIDE_BOUNDARY=b._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;c.PE_POLE_POINT=b._pe.PePCSInfo.prototype.PE_POLE_POINT};c.generate=function(D,L=c.PE_PCSINFO_OPTION_DOMAIN){let A,H;u.has(D)&&(H=u.get(D),H[L]&&
(A=H[L]));A||(A=b._pe.PePCSInfo.prototype.generate(D,L),H||(H=[],u.set(D,H)),H[L]=A);return A}})(b.PePCSInfo||(b.PePCSInfo={}));b.PeVersion=void 0;(function(c){c.version_string=function(){return b._pe.PeVersion.prototype.version_string()}})(b.PeVersion||(b.PeVersion={}));var O=Object.freeze({__proto__:null,get _pe(){return b._pe},isLoaded:n,isSupported:g,load:G,get PeCSTransformations(){return b.PeCSTransformations},get PeDefs(){return b.PeDefs},get PeFactory(){return b.PeFactory},get PeGCSExtent(){return b.PeGCSExtent},
get PeGTlistExtended(){return b.PeGTlistExtended},get PeGTlistExtendedEntry(){return b.PeGTlistExtendedEntry},get PeGTTransformations(){return b.PeGTTransformations},get PeNotationDms(){return b.PeNotationDms},get PeNotationMgrs(){return b.PeNotationMgrs},get PeNotationUsng(){return b.PeNotationUsng},get PeNotationUtm(){return b.PeNotationUtm},get PePCSInfo(){return b.PePCSInfo},get PeVersion(){return b.PeVersion},_init:m});b._init=m;b.isLoaded=n;b.isSupported=g;b.load=G;b.pe=O})},"esri/geometry/support/geodesicConstants":function(){define(["exports",
"./Ellipsoid"],function(l,b){const B=Math.PI/180;var N=b.earth.radius;const q=b.earth.eccentricitySquared;N={a1:N*q,a2:N*q*N*q,a3:N*q*q/2,a4:N*q*N*q*2.5,a5:N*q+N*q*q/2,a6:1-q};b={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:b.earth.radius,f:b.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:b.moon.radius,f:b.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:b.mars.radius,f:b.mars.flattening},104906:{a:6200,
f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,
f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},
104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:b.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};
l.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;l.earthEllipsoidConstants=N;l.spheroids=b;l.toRadians=B;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(l){return function(){function b(N){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(N&&N.steps)for(const q of N.steps)q instanceof l?this.steps.push(q):this.steps.push(new l({wkid:q.wkid,wkt:q.wkt,isInverse:q.isInverse}))}
b.cacheKey=function(N,q){return[void 0!==N.wkid&&null!==N.wkid?N.wkid.toString():"-1",void 0!==N.wkt&&null!==N.wkt?N.wkt.toString():"",void 0!==q.wkid&&null!==q.wkid?q.wkid.toString():"-1",void 0!==q.wkt&&null!==q.wkt?q.wkt.toString():""].join()};b.fromGE=function(N){const q=new b;let n="";for(const g of N.steps)N=l.fromGE(g),q.steps.push(N),n+=N.uid.toString()+",";q._cached_projection={};q._gtlistentry=null;q._chain=n;return q};var B=b.prototype;B.getInverse=function(){const N=new b;N.steps=[];for(let q=
this.steps.length-1;0<=q;q--)N.steps.push(this.steps[q].getInverse());return N};B.getGTListEntry=function(){let N="";for(const q of this.steps)N+=q.uid.toString()+",";N!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=N);return this._gtlistentry};B.assignCachedGe=function(N,q,n){this._cached_projection[b.cacheKey(N,q)]=n};B.getCachedGeTransformation=function(N,q){let n="";for(const g of this.steps)n+=g.uid.toString()+",";n!==this._chain&&(this._gtlistentry=null,this._cached_projection=
{},this._chain=n);N=this._cached_projection[b.cacheKey(N,q)];return void 0===N?null:N};return b}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(l){let b=0;return function(){function B(N=null){this.uid=b++;N?(this._wkt=void 0!==N.wkt?N.wkt:null,this._wkid=void 0!==N.wkid?N.wkid:-1,this._isInverse=void 0!==N.isInverse?!0===N.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}B.fromGE=function(N){const q=new B;
q._wkt=N.wkt;q._wkid=N.wkid;q._isInverse=N.isInverse;return q};B.prototype.getInverse=function(){const N=new B;N._wkt=this.wkt;N._wkid=this._wkid;N._isInverse=!this.isInverse;return N};l._createClass(B,[{key:"wkt",get:function(){return this._wkt},set:function(N){this._wkt=N;this.uid=b++}},{key:"wkid",get:function(){return this._wkid},set:function(N){this._wkid=N;this.uid=b++}},{key:"isInverse",get:function(){return this._isInverse},set:function(N){this._isInverse=N;this.uid=b++}}]);return B}()})},
"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(l){let b=function(g,G,m){this.x=g;this.y=G;this.spatialReference=m;this.m=this.z=void 0},B=function(g,G,m,r){this.rings=g;this.spatialReference=G;this.hasM=this.hasZ=void 0;m&&(this.hasZ=m);r&&(this.hasM=r)},N=function(g,G,m,r){this.paths=g;this.spatialReference=G;this.hasM=this.hasZ=void 0;m&&(this.hasZ=m);r&&(this.hasM=r)},q=function(g,G,m,r){this.points=g;this.spatialReference=G;this.hasM=this.hasZ=void 0;m&&(this.hasZ=
m);r&&(this.hasM=r)},n=function(g,G,m,r,C){this.xmin=g;this.ymin=G;this.xmax=m;this.ymax=r;this.spatialReference=C;this.mmax=this.mmin=this.zmax=this.zmin=void 0};l.jsonAdapter={convertToGEGeometry:function(g,G){return null==G?null:g.convertJSONToGeometry(G)},exportPoint:function(g,G,m){m=new b(g.getPointX(G),g.getPointY(G),m);const r=g.hasZ(G),C=g.hasM(G);r&&(m.z=g.getPointZ(G));C&&(m.m=g.getPointM(G));return m},exportPolygon:function(g,G,m){return new B(g.exportPaths(G),m,g.hasZ(G),g.hasM(G))},
exportPolyline:function(g,G,m){return new N(g.exportPaths(G),m,g.hasZ(G),g.hasM(G))},exportMultipoint:function(g,G,m){return new q(g.exportPoints(G),m,g.hasZ(G),g.hasM(G))},exportExtent:function(g,G,m){var r=g.hasZ(G);const C=g.hasM(G);m=new n(g.getXMin(G),g.getYMin(G),g.getXMax(G),g.getYMax(G),m);r&&(r=g.getZExtent(G),m.zmin=r.vmin,m.zmax=r.vmax);C&&(g=g.getMExtent(G),m.mmin=g.vmin,m.mmax=g.vmax);return m}};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],
function(l){l.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,
supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./AttributesBuilder ./attributeSupport ./projectionSupport ./timeSupport ./utils ../../support/fieldUtils ../../../smartMapping/statistics/support/utils ../../../support/arcadeOnDemand".split(" "),
function(l,b,B,N,q,n,g,G,m,r,C,Q,z){function E(D){return D.substr(24,12)+D.substr(19,4)+D.substr(16,2)+D.substr(14,2)+D.substr(11,2)+D.substr(9,2)+D.substr(6,2)+D.substr(4,2)+D.substr(2,2)+D.substr(0,2)}function O(D,L,A,H){if(A&&"esriFieldTypeDate"===A.type){const I=(new Date(D)).getTime(),W=(new Date(L)).getTime();if(!isNaN(I)&&!isNaN(W))return H?W-I:I-W}return"number"===typeof D&&"number"===typeof L?H?L-D:D-L:"string"===typeof D&&"string"===typeof L?(D=D.toUpperCase(),L=L.toUpperCase(),!A||"esriFieldTypeGUID"!==
A.type&&"esriFieldTypeGlobalID"!==A.type?H=(H?D>L:D<L)?-1:(H?D<L:D>L)?1:0:(A=E(D),L=E(L),H=(H?A>L:A<L)?-1:(H?A<L:A>L)?1:0),H):H?1:-1}function c(D,L,A,H,I,W){I-=A;W-=H;D=Math.min(1,Math.max(0,((D-A)*I+(L-H)*W)/(I*I+W*W)));return{x:A+I*D,y:H+W*D}}function u(D,L){return D?L?4:3:L?3:2}return function(){function D(A,H,I){this.items=A;this.queryGeometry=H;this.definitionExpression=I.definitionExpression;this.geometryType=I.geometryType;this.hasM=I.hasM;this.hasZ=I.hasZ;this.objectIdField=I.objectIdField;
this.spatialReference=I.spatialReference;this.fieldsIndex=I.fieldsIndex;this.timeInfo=I.timeInfo;this.featureAdapter=I.featureAdapter;this.aggregateAdapter=I.aggregateAdapter}var L=D.prototype;L.createQueryResponseForCount=function(A){const H=new n(A,this.featureAdapter,this.fieldsIndex);if(!A.outStatistics)return H.countDistinctValues(this.items);const {groupByFieldsForStatistics:I,having:W}=A;if(null==I||!I.length)return 1;const M=new Map,k=new Map,t=new Set;A=A.outStatistics;for(const x of A){({statisticType:A}=
x);A="exceedslimit"!==A?x.onStatisticField:void 0;if(!k.has(A)){var e=[];for(const F of I){const K=this._getAttributeValues(H,F,M);e.push(K)}k.set(A,this._calculateUniqueValues(e,H.returnDistinctValues))}A=k.get(A);for(const F in A){const {data:K,items:h}=A[F];e=K.join(",");W&&!H.validateItems(h,W)||t.add(e)}}return t.size};L.createQueryResponse=function(A){let H;H=A.outStatistics?A.outStatistics.some(I=>"exceedslimit"===I.statisticType)?this._createExceedsLimitQueryResponse(A):this._createStatisticsQueryResponse(A):
this._createFeatureQueryResponse(A);A.returnQueryGeometry&&(N.isValid(A.outSR)&&!N.equals(this.queryGeometry.spatialReference,A.outSR)?H.queryGeometry=r.cleanFromGeometryEngine({spatialReference:A.outSR,...G.project(this.queryGeometry,this.queryGeometry.spatialReference,A.outSR)}):H.queryGeometry=r.cleanFromGeometryEngine({spatialReference:A.outSR,...this.queryGeometry}));return H};L.createSnappingResponse=function(A,H){const I=this.featureAdapter,W=u(this.hasZ,this.hasM),{x:M,y:k}=A.point,t="number"===
typeof A.distance?A.distance:A.distance.x,e="number"===typeof A.distance?A.distance:A.distance.y,x={candidates:[]},F="esriGeometryPolygon"===this.geometryType;H=this.getPointCreator(A.point,this.spatialReference,H);for(const ka of this.items){var K=I.getGeometry(ka);if(b.isNone(K))continue;const {coords:oa,lengths:ua}=K;if(A.types&1){K=0;for(var h=0;h<ua.length;h++){var p=ua[h];for(var J=0;J<p;J++,K+=W){var U=oa[K],da=oa[K+1];if(J!==p-1){const ra=oa[K+W],Aa=oa[K+W+1],{x:Na,y:Ta}=c(M,k,U,da,ra,Aa);
var ja=(M-Na)/t;const Ka=(k-Ta)/e;ja=ja*ja+Ka*Ka;1>=ja&&x.candidates.push({type:"edge",objectId:I.getObjectId(ka),distance:Math.sqrt(ja),target:H(Na,Ta),start:H(U,da),end:H(ra,Aa)})}}}}if(A.types&2)for(K=F?oa.length-W:oa.length,h=0;h<K;h+=W)p=oa[h],J=oa[h+1],U=(M-p)/t,da=(k-J)/e,U=U*U+da*da,1>=U&&x.candidates.push({type:"vertex",objectId:I.getObjectId(ka),distance:Math.sqrt(U),target:H(p,J)})}x.candidates.sort((ka,oa)=>ka.distance-oa.distance);return x};L.getPointCreator=function(A,H,I){const W=b.isSome(I)&&
!N.equals(H,I)?M=>G.project(M,H,I):M=>M;return null!=A.z&&null!=A.m?(M,k)=>W({x:M,y:k,z:A.z,m:A.m}):null!=A.z?(M,k)=>W({x:M,y:k,z:A.z}):null!=A.m?(M,k)=>W({x:M,y:k,m:A.m}):(M,k)=>W({x:M,y:k})};L.executeAttributesQuery=function(A){var H=g.getWhereClause(A.where,this.fieldsIndex);if(!H)return Promise.resolve(this);if(H.isStandardized){let I=0;const W=[];for(const M of this.items)H.testFeature(M,this.featureAdapter)&&(W[I++]=M);H=new D(W,this.queryGeometry,this);H.definitionExpression=A.where;return Promise.resolve(H)}return Promise.reject(new TypeError("Where clause is not standardized"))};
L.executeAggregateIdsQuery=function(A){if(!A.aggregateIds||!A.aggregateIds.length||b.isNone(this.aggregateAdapter))return Promise.resolve(this);const H=new Set;for(const W of A.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(W).forEach(M=>H.add(M));const I=this.featureAdapter.getObjectId;return Promise.resolve(new D(this.items.filter(W=>H.has(I(W))),this.queryGeometry,this))};L.executeObjectIdsQuery=function(A){if(!A.objectIds||!A.objectIds.length)return Promise.resolve(this);const H=new Set(A.objectIds),
I=this.featureAdapter.getObjectId;return Promise.resolve(new D(this.items.filter(W=>H.has(I(W))),this.queryGeometry,this))};L.executeTimeQuery=function(A){A=m.getTimeOperator(this.timeInfo,A.timeExtent,this.featureAdapter);if(!b.isSome(A))return Promise.resolve(this);A=this.items.filter(A);return Promise.resolve(new D(A,this.queryGeometry,this))};L.filterLatest=function(){const {trackIdField:A,startTimeField:H,endTimeField:I}=this.timeInfo;var W=I||H;const M=new Map,k=this.featureAdapter.getAttribute;
for(const t of this.items){const e=k(t,A),x=k(t,W),F=M.get(e);(!F||x>k(F,W))&&M.set(e,t)}W=Array.from(M.values());return Promise.resolve(new D(W,this.queryGeometry,this))};L.project=function(){var A=l._asyncToGenerator(function*(H){if(!H||N.equals(this.spatialReference,H))return this;const I=this.featureAdapter,W=(yield G.projectMany(this.items.map(M=>r.getGeometry(this.geometryType,this.hasZ,this.hasM,I.getGeometry(M))),this.spatialReference,H)).map((M,k)=>I.cloneWithGeometry(this.items[k],q.convertFromGeometry(M,
this.hasZ,this.hasM)));return new D(W,this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:H,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})});return function(H){return A.apply(this,arguments)}}();L.createSummaryStatisticsResponse=function(){var A=l._asyncToGenerator(function*(H,I){const {field:W,normalizationField:M,normalizationType:k,
normalizationTotal:t,minValue:e,maxValue:x}=I;var F=new n(H,this.featureAdapter,this.fieldsIndex);H=this.fieldsIndex.isDateField(W);I=I.valueExpression?yield this._getAttributeExpressionValues(F,I.valueExpression,I.viewInfoParams):this._getAttributeNormalizedValues(F,{field:W,normalizationField:M,normalizationType:k,normalizationTotal:t});F=Q.isNullCountSupported({normalizationType:k,normalizationField:M,minValue:e,maxValue:x});I=C.isStringField(this.fieldsIndex.get(W))?Q.calculateStringStatistics({values:I,
supportsNullCount:F}):Q.calculateStatistics({values:I,minValue:e,maxValue:x,useSampleStdDev:!k,supportsNullCount:F});return Q.processStatsResult(I,H)});return function(H,I){return A.apply(this,arguments)}}();L._sortFeatures=function(A,H,I){if(1<A.length&&H&&H.length)for(const W of H.reverse()){H=W.split(" ");const M=H[0],k=this.fieldsIndex.get(M),t=H[1]&&"desc"===H[1].toLowerCase();A.sort((e,x)=>{e=I(e,M,k);x=I(x,M,k);return O(e,x,k,t)})}};L._createFeatureQueryResponse=function(A){const H=this.items,
{geometryType:I,hasM:W,hasZ:M,objectIdField:k,spatialReference:t}=this,{outFields:e,outSR:x,quantizationParameters:F,resultRecordCount:K,resultOffset:h,returnZ:p,returnM:J}=A,U=null!=K?H.length>(h||0)+K:!1,da=e&&(-1<e.indexOf("*")?[...this.fieldsIndex.fields]:e.map(ja=>this.fieldsIndex.get(ja)));return{exceededTransferLimit:U,features:this._createFeatures(A,H),fields:da,geometryType:I,hasM:W&&J,hasZ:M&&p,objectIdFieldName:k,spatialReference:r.cleanFromGeometryEngine(x?x:t),transform:F&&B.toQuantizationTransform(F)||
null}};L._createFeatures=function(A,H){const I=new n(A,this.featureAdapter,this.fieldsIndex),{hasM:W,hasZ:M}=this,{orderByFields:k,quantizationParameters:t,returnGeometry:e,returnCentroid:x,maxAllowableOffset:F,resultOffset:K,resultRecordCount:h,returnZ:p=!1,returnM:J=!1}=A,U=M&&p,da=W&&J;A=[];var ja=0;H=[...H];this._sortFeatures(H,k,(ua,ra,Aa)=>I.getFieldValue(ua,ra,Aa));if(e||x){var ka=B.toQuantizationTransform(t);if(e&&!x)for(var oa of H)A[ja++]={attributes:I.getAttributes(oa),geometry:r.getGeometry(this.geometryType,
this.hasZ,this.hasM,this.featureAdapter.getGeometry(oa),F,ka,U,da)};else if(!e&&x)for(const ua of H)A[ja++]={attributes:I.getAttributes(ua),centroid:r.transformCentroid(this,this.featureAdapter.getCentroid(ua,this),ka)};else for(const ua of H)A[ja++]={attributes:I.getAttributes(ua),centroid:r.transformCentroid(this,this.featureAdapter.getCentroid(ua,this),ka),geometry:r.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(ua),F,ka,U,da)}}else for(ka of H)(oa=I.getAttributes(ka))&&
(A[ja++]={attributes:oa});ja=K||0;null!=h&&(A=A.slice(ja,Math.min(A.length,ja+h)));return A};L._createExceedsLimitQueryResponse=function(A){var H=!1;let I=Number.POSITIVE_INFINITY,W=Number.POSITIVE_INFINITY;H=Number.POSITIVE_INFINITY;for(const M of A.outStatistics)if("exceedslimit"===M.statisticType){I=null!=M.maxPointCount?M.maxPointCount:Number.POSITIVE_INFINITY;W=null!=M.maxRecordCount?M.maxRecordCount:Number.POSITIVE_INFINITY;H=null!=M.maxVertexCount?M.maxVertexCount:Number.POSITIVE_INFINITY;
break}if("esriGeometryPoint"===this.geometryType)H=this.items.length>I;else if(this.items.length>W)H=!0;else{A=this.hasZ?this.hasM?4:3:this.hasM?3:2;const M=this.featureAdapter;H=this.items.reduce((k,t)=>{t=M.getGeometry(t);return k+(b.isSome(t)&&t.coords.length||0)},0)/A>H}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(H)}}]}};L._createStatisticsQueryResponse=
function(A){var H={attributes:{}};const I=[],W=new Map,M=new Map,k=new Map,t=new Map,e=new n(A,this.featureAdapter,this.fieldsIndex);var x=A.outStatistics;const {groupByFieldsForStatistics:F,having:K,orderByFields:h}=A;A=F&&F.length;const p=!!A,J=p&&F[0],U=p&&!this.fieldsIndex.get(J);for(const ua of x){const {outStatisticFieldName:ra,statisticType:Aa}=ua;x=ua;var da="exceedslimit"!==Aa?ua.onStatisticField:void 0;const Na="percentile_disc"===Aa||"percentile_cont"===Aa,Ta=p&&1===A&&(da===J||U)&&"count"===
Aa;if(p){if(!k.has(da)){var ja=[];for(const Ka of F){var ka=this._getAttributeValues(e,Ka,W);ja.push(ka)}k.set(da,this._calculateUniqueValues(ja,e.returnDistinctValues))}ja=k.get(da);for(const Ka in ja){const {count:Ca,data:Ra,items:gb,itemPositions:f}=ja[Ka];ka=Ra.join(",");if(!K||e.validateItems(gb,K)){const y=t.get(ka)||{attributes:{}};var oa=null;if(Ta)oa=Ca;else{const ba=this._getAttributeValues(e,da,W);oa=f.map(v=>ba[v]);oa=Na&&"statisticParameters"in x?this._getPercentileValue(x,oa):this._getStatisticValue(x,
oa,null,e.returnDistinctValues)}y.attributes[ra]=oa;F.forEach((ba,v)=>y.attributes[this.fieldsIndex.get(ba)?ba:`EXPR_${v+1}`]=Ra[v]);t.set(ka,y)}}}else da=this._getAttributeValues(e,da,W),H.attributes[ra]=Na&&"statisticParameters"in x?this._getPercentileValue(x,da):this._getStatisticValue(x,da,M,e.returnDistinctValues);I.push({name:ra,alias:ra,type:"esriFieldTypeDouble"})}H=p?Array.from(t.values()):[H];this._sortFeatures(H,h,(ua,ra)=>ua.attributes[ra]);return{fields:I,features:H}};L._getStatisticValue=
function(A,H,I,W){const {onStatisticField:M,statisticType:k}=A;A=null;A=null!=I&&I.has(M)?I.get(M):C.isStringField(this.fieldsIndex.get(M))?Q.calculateStringStatistics({values:H,returnDistinct:W}):Q.calculateStatistics({values:H,minValue:null,maxValue:null,useSampleStdDev:!0});I&&I.set(M,A);return A["var"===k?"variance":k]};L._getPercentileValue=function(A,H){const {onStatisticField:I,statisticParameters:W,statisticType:M}=A,{value:k,orderBy:t}=W,e="desc"===t,x=this.fieldsIndex.get(I);A=[...H].filter(F=>
null!=F).sort((F,K)=>O(F,K,x,e));return this._calculatePercentile(A,k,"percentile_disc"===M)};L._getAttributeValues=function(A,H,I){if(I.has(H))return I.get(H);const W=this.fieldsIndex.get(H),M=this.items.map(k=>A.getFieldValue(k,H,W));I.set(H,M);return M};L._getAttributeNormalizedValues=function(A,H){return this.items.map(I=>A.getNormalizedValue(I,{field:H.field,fieldInfo:this.fieldsIndex.get(H.field),normalizationField:H.normalizationField,normalizationFieldInfo:this.fieldsIndex.get(H.normalizationField),
normalizationType:H.normalizationType,normalizationTotal:H.normalizationTotal}))};L._getAttributeExpressionValues=function(){var A=l._asyncToGenerator(function*(H,I,W){const {arcadeUtils:M}=yield z.loadArcade(),k=M.createFunction(I),t=W&&M.getViewInfo(W);return this.items.map(e=>H.getExpressionValue(e,{compiledFunc:k,viewInfo:t},M))});return function(H,I,W){return A.apply(this,arguments)}}();L._calculateUniqueValues=function(A,H){const I={},W=this.items,M=W.length;for(let k=0;k<M;k++){const t=W[k],
e=[];for(const F of A)e.push(F[k]);const x=e.join(",");H?null==I[x]&&(I[x]={count:1,data:e,items:[t],itemPositions:[k]}):null==I[x]?I[x]={count:1,data:e,items:[t],itemPositions:[k]}:(I[x].count++,I[x].items.push(t),I[x].itemPositions.push(k))}return I};L._calculatePercentile=function(A,H,I){if(0===A.length)return null;if(0>=H)return A[0];if(1<=H)return A[A.length-1];var W=(A.length-1)*H,M=Math.floor(W);H=M+1;W%=1;M=A[M];const k=A[H];return H>=A.length||I||"string"===typeof M||"string"===typeof k?
M:M*(1-W)+k*W};l._createClass(D,[{key:"size",get:function(){return this.items.length}}]);return D}()})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe","./jsonUtils"],function(l,b,B){function N({scale:e,translate:x},F){return Math.round((F-x[0])/e[0])}function q({scale:e,translate:x},F){return Math.round((x[1]-F)/e[1])}function n(e,x,F){const K=[];let h,p,J,U;for(let da=0;da<F.length;da++){const ja=F[da];if(0<da){if(J=N(e,ja[0]),U=q(e,ja[1]),J!==h||U!==p)K.push(x(ja,
J-h,U-p)),h=J,p=U}else h=N(e,ja[0]),p=q(e,ja[1]),K.push(x(ja,h,p))}return 0<K.length?K:null}function g(e,x,F,K){return n(e,F?K?t:k:K?k:M,x)}function G(e,x,F,K){const h=[];F=F?K?t:k:K?k:M;for(K=0;K<x.length;K++){const p=n(e,F,x[K]);p&&3<=p.length&&h.push(p)}return h.length?h:null}function m(e,x,F,K){const h=[];F=F?K?t:k:K?k:M;for(K=0;K<x.length;K++){const p=n(e,F,x[K]);p&&2<=p.length&&h.push(p)}return h.length?h:null}function r({scale:e,translate:x},F){return F*e[0]+x[0]}function C({scale:e,translate:x},
F){return x[1]-F*e[1]}function Q(e,x,F){const K=Array(F.length);if(!F.length)return K;const [h,p]=e.scale;let J=r(e,F[0][0]);e=C(e,F[0][1]);K[0]=x(F[0],J,e);for(let U=1;U<F.length;U++){const da=F[U];J+=da[0]*h;e-=da[1]*p;K[U]=x(da,J,e)}return K}function z(e,x,F){const K=Array(F.length);for(let h=0;h<F.length;h++)K[h]=Q(e,x,F[h]);return K}function E(e,x,F,K){return Q(e,F?K?t:k:K?k:M,x)}function O(e,x,F,K){return z(e,F?K?t:k:K?k:M,x)}function c(e,x,F,K){return z(e,F?K?t:k:K?k:M,x)}function u(e,x,F){let [K,
h]=F[0],p=Math.min(K,x[0]),J=Math.min(h,x[1]),U=Math.max(K,x[2]);x=Math.max(h,x[3]);for(let da=1;da<F.length;da++){const [ja,ka]=F[da];K+=ja;h+=ka;0>ja&&(p=Math.min(p,K));0<ja&&(U=Math.max(U,K));0>ka?J=Math.min(J,h):0<ka&&(x=Math.max(x,h))}e[0]=p;e[1]=J;e[2]=U;e[3]=x;return e}function D(e,x){if(!x.length)return null;e[0]=e[1]=Number.POSITIVE_INFINITY;e[2]=e[3]=Number.NEGATIVE_INFINITY;for(let F=0;F<x.length;F++)u(e,e,x[F]);return e}function L(e,x,F,K,h){x.xmin=N(e,F.xmin);x.ymin=q(e,F.ymin);x.xmax=
N(e,F.xmax);x.ymax=q(e,F.ymax);x!==F&&(K&&(x.zmin=F.zmin,x.zmax=F.zmax),h&&(x.mmin=F.mmin,x.mmax=F.mmax));return x}function A(e,x,F,K,h){x.points=g(e,F.points,K,h);return x}function H(e,x,F,K,h){x.x=N(e,F.x);x.y=q(e,F.y);x!==F&&(K&&(x.z=F.z),h&&(x.m=F.m));return x}function I(e,x,F,K,h){e=G(e,F.rings,K,h);if(!e)return null;x.rings=e;return x}function W(e,x,F,K,h){e=m(e,F.paths,K,h);if(!e)return null;x.paths=e;return x}const M=(e,x,F)=>[x,F],k=(e,x,F)=>[x,F,e[2]],t=(e,x,F)=>[x,F,e[2],e[3]];l.equals=
function(e,x){if(e===x||null==e&&null==x)return!0;if(null==e||null==x)return!1;let F,K,h,p;e&&"upperLeft"===e.originPosition?(F=e.translate[0],K=e.translate[1],e=e.scale[0]):(F=e.extent.xmin,K=e.extent.ymax,e=e.tolerance);x&&"upperLeft"===x.originPosition?(h=x.translate[0],p=x.translate[1],x=x.scale[0]):(h=x.extent.xmin,p=x.extent.ymax,x=x.tolerance);return F===h&&K===p&&e===x};l.getQuantizedBoundsCoordsArray=u;l.getQuantizedBoundsCoordsArrayArray=D;l.getQuantizedBoundsPaths=function(e){return D([0,
0,0,0],e)};l.getQuantizedBoundsPoints=function(e){const x=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return u(x,x,e)};l.getQuantizedBoundsRings=function(e){return D([0,0,0,0],e)};l.quantizeBounds=function(e,x,F){x[0]=N(e,F[0]);x[3]=q(e,F[1]);x[2]=N(e,F[2]);x[1]=q(e,F[3]);return x};l.quantizeExtent=L;l.quantizeGeometry=function(e,x){return e&&x?B.isPoint(x)?H(e,{},x,!1,!1):B.isPolyline(x)?W(e,{},x,!1,!1):B.isPolygon(x)?I(e,{},x,!1,!1):B.isMultipoint(x)?
A(e,{},x,!1,!1):B.isExtent(x)?L(e,{},x,!1,!1):null:null};l.quantizeMultipoint=A;l.quantizePaths=m;l.quantizePoint=H;l.quantizePoints=g;l.quantizePolygon=I;l.quantizePolyline=W;l.quantizeRings=G;l.quantizeX=N;l.quantizeY=q;l.toQuantizationTransform=function(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:e.extent?[e.extent.xmin,e.extent.ymax]:[0,0]}:null};
l.unquantizeBounds=function(e,x,F){return F?(x[0]=r(e,F[0]),x[1]=C(e,F[3]),x[2]=r(e,F[2]),x[3]=C(e,F[1]),x):[r(e,x[0]),C(e,x[3]),r(e,x[2]),C(e,x[1])]};l.unquantizeCoordsArray=Q;l.unquantizeCoordsArrayArray=z;l.unquantizeExtent=function(e,x,F,K,h){x.xmin=r(e,F.xmin);x.ymin=C(e,F.ymin);x.xmax=r(e,F.xmax);x.ymax=C(e,F.ymax);x!==F&&(K&&(x.zmin=F.zmin,x.zmax=F.zmax),h&&(x.mmin=F.mmin,x.mmax=F.mmax));return x};l.unquantizeMultipoint=function(e,x,F,K,h){b.isSome(F)&&(x.points=E(e,F.points,K,h));return x};
l.unquantizePaths=O;l.unquantizePoint=function(e,x,F,K,h){if(b.isNone(F))return x;x.x=r(e,F.x);x.y=C(e,F.y);x!==F&&(K&&(x.z=F.z),h&&(x.m=F.m));return x};l.unquantizePoints=E;l.unquantizePolygon=function(e,x,F,K,h){b.isSome(F)&&(x.rings=c(e,F.rings,K,h));return x};l.unquantizePolyline=function(e,x,F,K,h){b.isSome(F)&&(x.paths=O(e,F.paths,K,h));return x};l.unquantizeRings=c;l.unquantizeX=r;l.unquantizeY=C;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe",
"./attributeSupport","../../../smartMapping/statistics/support/utils"],function(l,b,B){return function(){function N(n,g,G){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=n.returnDistinctValues;this.fieldsIndex=G;this.featureAdapter=g;if((g=n.outFields)&&-1===g.indexOf("*")){this.outFields=g;n=0;for(const r of g){var m=b.getExpressionFromFieldName(r);m=(g=this.fieldsIndex.get(m))?null:b.getWhereClause(m,G);g=g?g.name:b.getAliasFromFieldName(r)||`FIELD_EXP_${n++}`;
this._fieldDataCache.set(r,{alias:g,clause:m})}}}var q=N.prototype;q.countDistinctValues=function(n){if(!this.returnDistinctValues)return n.length;n.forEach(g=>this.getAttributes(g));return this._returnDistinctMap.size};q.getAttributes=function(n){n=this._processAttributesForOutFields(n);return this._processAttributesForDistinctValues(n)};q.getFieldValue=function(n,g,G){const m=G?G.name:g;let r=null;this._fieldDataCache.has(m)?r=this._fieldDataCache.get(m).clause:G||(r=b.getWhereClause(g,this.fieldsIndex),
this._fieldDataCache.set(m,{alias:m,clause:r}));return G?this.featureAdapter.getAttribute(n,m):r.calculateValue(n,this.featureAdapter)};q.getNormalizedValue=function(n,g){const G=g.normalizationType,m=g.normalizationTotal;let r=this.getFieldValue(n,g.field,g.fieldInfo);G&&Number.isFinite(r)&&(n=this.getFieldValue(n,g.normalizationField,g.normalizationFieldInfo),r=B.getNormalizedValue(r,G,n,m));return r};q.getExpressionValue=function(n,g,G){n={attributes:this.featureAdapter.getAttributes(n)};n=G.createExecContext(n,
g.viewInfo);return G.executeFunction(g.compiledFunc,n)};q.validateItem=function(n,g){this._fieldDataCache.has(g)||this._fieldDataCache.set(g,{alias:g,clause:b.getWhereClause(g,this.fieldsIndex)});return this._fieldDataCache.get(g).clause.testFeature(n,this.featureAdapter)};q.validateItems=function(n,g){this._fieldDataCache.has(g)||this._fieldDataCache.set(g,{alias:g,clause:b.getWhereClause(g,this.fieldsIndex)});return this._fieldDataCache.get(g).clause.testSet(n,this.featureAdapter)};q._processAttributesForOutFields=
function(n){const g=this.outFields;if(!g||!g.length)return this.featureAdapter.getAttributes(n);const G={};for(const m of g){const {alias:r,clause:C}=this._fieldDataCache.get(m);G[r]=C?C.calculateValue(n,this.featureAdapter):this.featureAdapter.getAttribute(n,r)}return G};q._processAttributesForDistinctValues=function(n){if(l.isNone(n)||!this.returnDistinctValues)return n;var g=this.outFields,G=[];if(g)for(const r of g){var {alias:m}=this._fieldDataCache.get(r);G.push(n[m])}else for(m in n)G.push(n[m]);
g=`${(g||["*"]).join(",")}=${G.join(",")}`;G=this._returnDistinctMap.get(g)||0;this._returnDistinctMap.set(g,++G);return 1<G?null:n};return N}()})},"esri/smartMapping/statistics/support/utils":function(){define(["exports","../../../core/Error","../../../core/maybe","../../../layers/support/fieldUtils"],function(l,b,B,N){function q(m,r){return new b(m,r)}function n(m,r){m=B.isSome(m)?m:"";B.isSome(r)&&r&&(m=m?"("+m+") AND ("+r+")":r);return m}function g(m){const r=m.layer;return m.fields.filter(C=>
!r.getField(C))}function G(m){const r=m.layer;return m.fields.filter(C=>{C=r.getFieldUsageInfo(C);return!C||!C.supportsStatistics})}l.calculateStatistics=function(m){const {values:r,useSampleStdDev:C,supportsNullCount:Q}=m;var z=Number.POSITIVE_INFINITY;let E=Number.NEGATIVE_INFINITY,O=null,c=null;var u=null;let D=null,L=0;const A=null==m.minValue?-Infinity:m.minValue;m=null==m.maxValue?Infinity:m.maxValue;for(const H of r)Number.isFinite(H)?H>=A&&H<=m&&(O+=H,z=Math.min(z,H),E=Math.max(E,H),L++):
"string"===typeof H&&L++;if(L&&null!=O){c=O/L;u=0;for(const H of r)Number.isFinite(H)&&H>=A&&H<=m&&(u+=(H-c)**2);D=C?1<L?u/(L-1):0:0<L?u/L:0;u=Math.sqrt(D)}else E=z=null;z={avg:c,count:L,max:E,min:z,stddev:u,sum:O,variance:D};Q&&(z.nullcount=r.length-L);return z};l.calculateStringStatistics=function(m){const r=m.returnDistinct?[...new Set(m.values)]:m.values,C=r.filter(z=>null!=z).length,Q={count:C};m.supportsNullCount&&(Q.nullcount=r.length-C);return Q};l.createError=q;l.getNormalizedValue=function(m,
r,C,Q){let z=null;switch(r){case "log":0!==m&&(z=Math.log(m)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(Q)&&0!==Q&&(z=m/Q*100);break;case "field":Number.isFinite(C)&&0!==C&&(z=m/C);break;case "natural-log":0<m&&(z=Math.log(m));break;case "square-root":0<m&&(z=m**.5)}return z};l.getRangeExpr=function(m,r,C){r=null!=r?m+" \x3e\x3d "+r:"";m=null!=C?m+" \x3c\x3d "+C:"";C="";return(C=r&&m?n(r,m):r||m)?"("+C+")":""};l.getSQLFilterForNormalization=function(m){const r=m.field,C=m.normalizationType;
m=m.normalizationField;let Q;if("log"===C)Q="(NOT "+r+" \x3d 0)";else if("field"===C)Q="(NOT "+m+" \x3d 0)";else if("natural-log"===C||"square-root"===C)Q=`(${r} > 0)`;return Q};l.isNullCountSupported=function(m){const r=null!=m.minValue||null!=m.maxValue,C=!!m.sqlExpression&&m.supportsSQLExpression;return!(null!=m.normalizationField||null!=m.normalizationType)&&!r&&!C};l.mergeWhereClauses=n;l.processStatsResult=function(m,r){if(!r)return m;["avg","stddev","variance"].forEach(C=>{null!=m[C]&&(m[C]=
Math.ceil(m[C]))});return m};l.verifyBasicFieldValidity=function(m,r,C){const Q=g({layer:m,fields:r});if(Q.length)return q(C,"Unknown fields: "+Q.join(", ")+". You can only use fields defined in the layer schema");m=G({layer:m,fields:r});if(m.length)return q(C,"Unsupported fields: "+m.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true")};l.verifyFieldType=function(m,r,C,Q){let z=null;if(!r)z=q(C,"'field' is not defined in the layer schema");
else if(r.name===m.objectIdField||-1===Q.indexOf(r.type))z=q(C,"'field' should be one of these types: "+Q.join(","));return z};l.verifyNumericField=function(m,r,C){let Q;r?r.name!==m.objectIdField&&N.isNumericField(r)||(Q=q(C,"'field' should be one of these numeric types: "+N.numericTypes.join(","))):Q=q(C,"'field' is not defined in the layer schema");return Q};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),
function(l,b,B,N,q,n,g,G){function m(R,V,ca){if(R)for(const ma of R)(R=(R=n.getDeepValue(ma,V))&&"function"!==typeof R&&ca.get(R))&&n.setDeepValue(ma,R.name,V)}function r(R,V){if(!R||!V)return[];y.clear();C(y,R,V);return Array.from(y).sort()}function C(R,V,ca){var ma;if(ca)if(null!=V&&null!=(ma=V.fields)&&ma.length)if(ca.includes("*"))for(const {name:na}of V.fields)R.add(na);else for(const na of ca)Q(R,V,na);else if(ca.includes("*"))R.clear(),R.add("*");else for(const na of ca)R.add(na)}function Q(R,
V,ca){"string"===typeof ca&&(V?(V=V.get(ca))&&R.add(V.name):R.add(ca))}function z(R,V,ca){return E.apply(this,arguments)}function E(){E=B._asyncToGenerator(function*(R,V,ca){var ma;if(ca){var {arcadeUtils:na}=yield G.loadArcade();ca=na.extractFieldNames(ca,null==V?void 0:null==(ma=V.fields)?void 0:ma.map(ta=>ta.name));for(const ta of ca)Q(R,V,ta)}});return E.apply(this,arguments)}function O(R,V,ca){return c.apply(this,arguments)}function c(){c=B._asyncToGenerator(function*(R,V,ca){if(ca&&"1\x3d1"!==
ca){ca=(yield new Promise(function(ma,na){l(["../../core/sql/WhereClause"],ma,na)})).WhereClause.create(ca,V);if(!ca.isStandardized)throw new N("fieldUtils:collectFilterFields","Where clause is not standardized");C(R,V,ca.fieldNames)}});return c.apply(this,arguments)}function u(R,V){for(const ca of R)if(ca&&ca.valueType&&ca.valueType===V)return ca.name;return null}function D(){D=B._asyncToGenerator(function*(R){if(!R)return[];const V=new Set;yield L(V,R);return Array.from(V).sort()});return D.apply(this,
arguments)}function L(R,V){return A.apply(this,arguments)}function A(){A=B._asyncToGenerator(function*(R,V){if(V){var ca=n.getDeepValue("elevationInfo.featureExpressionInfo",V);if(ca)return ca.collectRequiredFields(R,V.fieldsIndex)}});return A.apply(this,arguments)}function H(R,V,ca){return I.apply(this,arguments)}function I(){I=B._asyncToGenerator(function*(R,V,ca){ca.outStatistic.onStatisticValueExpression?z(R,V,ca.outStatistic.onStatisticValueExpression):R.add(ca.outStatistic.onStatisticField)});
return I.apply(this,arguments)}function W(){W=B._asyncToGenerator(function*(R,V,ca){var ma;if(V&&ca&&"cluster"===ca.type){var na=[];null!=(ma=ca.popupTemplate)&&ma.expressionInfos&&na.push(...ca.popupTemplate.expressionInfos.map(ta=>z(R,V.fieldsIndex,ta.expression)));ca.fields&&na.push(...ca.fields.map(ta=>H(R,V.fieldsIndex,ta)));yield Promise.all(na)}});return W.apply(this,arguments)}function M(){M=B._asyncToGenerator(function*(R,V,ca){V&&(V.timeInfo&&q.isSome(ca)&&ca.timeExtent&&C(R,V.fieldsIndex,
[V.timeInfo.startField,V.timeInfo.endField]),V.floorInfo&&C(R,V.fieldsIndex,[V.floorInfo.floorField]),q.isSome(ca)&&q.isSome(ca.where)&&(yield O(R,V.fieldsIndex,ca.where)))});return M.apply(this,arguments)}function k(){k=B._asyncToGenerator(function*(R,V,ca){V&&ca&&(yield Promise.all(ca.map(ma=>t(R,V,ma))))});return k.apply(this,arguments)}function t(R,V,ca){return e.apply(this,arguments)}function e(){e=B._asyncToGenerator(function*(R,V,ca){V&&ca&&(ca.valueExpression?yield z(R,V.fieldsIndex,ca.valueExpression):
ca.field&&Q(R,V.fieldsIndex,ca.field))});return e.apply(this,arguments)}function x(){x=B._asyncToGenerator(function*(R){if(!R)return[];const V="timeInfo"in R&&R.timeInfo;return V?r(R.fieldsIndex,[R.trackIdField,V.startField,V.endField]):[]});return x.apply(this,arguments)}function F(){F=B._asyncToGenerator(function*(R){if(!R)return[];const V=new Set;yield K(V,R);return Array.from(V).sort()});return F.apply(this,arguments)}function K(R,V){return h.apply(this,arguments)}function h(){h=B._asyncToGenerator(function*(R,
V){const {labelingInfo:ca,fieldsIndex:ma}=V;ca&&ca.length&&(yield Promise.all(ca.map(na=>p(R,ma,na))))});return h.apply(this,arguments)}function p(R,V,ca){return J.apply(this,arguments)}function J(){J=B._asyncToGenerator(function*(R,V,ca){if(ca){var ma=ca.getLabelExpression();ca=ca.where;"arcade"===ma.type?yield z(R,V,ma.expression):(ma=ma.expression.match(/{[^}]*}/g))&&ma.forEach(na=>{Q(R,V,na.slice(1,-1))});yield O(R,V,ca)}});return J.apply(this,arguments)}function U(R){return"number"===typeof R&&
!isNaN(R)&&isFinite(R)}function da(R){return null===R||U(R)}function ja(R){return null===R||ba(R)}function ka(R){return null!=R&&"string"===typeof R}function oa(R){return null===R||ka(R)}function ua(){return!0}function ra(R,V){let ca;switch(R.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":ca=R.nullable?ja:ba;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":ca=
R.nullable?da:U;break;case "string":case "esriFieldTypeString":ca=R.nullable?oa:ka;break;default:ca=ua}return 1===arguments.length?ca:ca(V)}function Aa(R){return null!=R&&P.has(R.type)}function Na(R,V){return R.nullable&&null===V?null:Aa(R)&&!Ta(R.type,Number(V))?b.NumericRangeValidationError.OUT_OF_RANGE:ra(R,V)?R.domain?g.validateDomainValue(R.domain,V):null:b.TypeValidationError.INVALID_TYPE}function Ta(R,V){return(R="string"===typeof R?Ka(R):R)?R.isInteger?ba(V)&&V>=R.min&&V<=R.max:V>=R.min&&
V<=R.max:!1}function Ka(R){switch(R){case "esriFieldTypeSmallInteger":case "small-integer":return X;case "esriFieldTypeInteger":case "integer":return Y;case "esriFieldTypeSingle":case "single":return ha;case "esriFieldTypeDouble":case "double":return ea}}function Ca(R,V,ca){if(!V||!V.attributes||!R){if(q.isSome(ca))for(var ma of R)ca.add(ma);return!0}V=V.attributes;ma=!1;for(const na of R)if(!(na in V))if(ma=!0,q.isSome(ca))ca.add(na);else break;return ma}function Ra(){Ra=B._asyncToGenerator(function*(R,
V){const ca=new Set;for(const ma of V)yield z(ca,R.fieldsIndex,ma);return Array.from(ca).sort()});return Ra.apply(this,arguments)}const gb="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),f=["field","normalizationField"],y=new Set,ba=(()=>"isInteger"in Number?Number.isInteger:R=>"number"===typeof R&&isFinite(R)&&Math.floor(R)===R)(),v=["integer","small-integer",
"single","double"],P=new Set([...v,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);b.NumericRangeValidationError=void 0;(b.NumericRangeValidationError||(b.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";b.TypeValidationError=void 0;(b.TypeValidationError||(b.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const X={min:-32768,max:32767,isInteger:!0},Y={min:-2147483648,max:2147483647,
isInteger:!0},ha={min:-3.4E38,max:1.2E38,isInteger:!1},ea={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};b.collectArcadeFieldNames=z;b.collectElevationFields=L;b.collectFeatureReductionFields=function(R,V,ca){return W.apply(this,arguments)};b.collectField=Q;b.collectFields=C;b.collectFilterFields=function(R,V,ca){return M.apply(this,arguments)};b.collectLabelingFields=K;b.collectOrderByInfos=function(R,V,ca){return k.apply(this,arguments)};b.doubleRange=ea;b.featureHasFields=function(R,
V){return!Ca(R,V,null)};b.fixFields=r;b.fixRendererFields=function(R,V){if(null!=R&&null!=V)for(const ca of Array.isArray(R)?R:[R])if(m(gb,ca,V),"visualVariables"in ca&&ca.visualVariables)for(const ma of ca.visualVariables)m(f,ma,V)};b.fixTimeInfoFields=function(R,V){if(null!=R&&null!=V&&V.fields.length)if("startField"in R){var ca=V.get(R.startField);V=V.get(R.endField);R.startField=ca&&ca.name||null;R.endField=V&&V.name||null}else ca=V.get(R.startTimeField),V=V.get(R.endTimeField),R.startTimeField=
ca&&ca.name||null,R.endTimeField=V&&V.name||null};b.getDisplayFieldName=function({displayField:R,fields:V}){if(R)return R;if(!V||!V.length)return null;if(!(R=u(V,"name-or-title")||u(V,"unique-identifier")||u(V,"type-or-category")))a:{for(const ca of V)if(ca&&ca.name&&(V=ca.name.toLowerCase(),-1<V.indexOf("name")||-1<V.indexOf("title"))){R=ca.name;break a}R=null}return R};b.getElevationFields=function(R){return D.apply(this,arguments)};b.getExpressionFields=function(R,V){return Ra.apply(this,arguments)};
b.getFeatureEditFields=function(R){if(!R)return[];const V="editFieldsInfo"in R&&R.editFieldsInfo;return V?r(R.fieldsIndex,[V&&V.creatorField,V&&V.creationDateField,V&&V.editorField,V&&V.editDateField]):[]};b.getFeatureGeometryFields=function(R){if(!R)return[];const V=R.geometryFieldsInfo;return V?r(R.fieldsIndex,[V.shapeAreaField,V.shapeLengthField]):[]};b.getFieldDefaultValue=function(R){const V=R.defaultValue;if(void 0!==V&&ra(R,V))return V;if(R.nullable)return null};b.getFieldRange=function(R){const V=
g.getDomainRange(R.domain);if(V)return V;if(Aa(R))return Ka(R.type)};b.getLabelingFields=function(R){return F.apply(this,arguments)};b.getNumericTypeForValue=function(R){if(!U(R))return null;if(ba(R)){if(R>=X.min&&R<=X.max)return"esriFieldTypeSmallInteger";if(R>=Y.min&&R<=Y.max)return"esriFieldTypeInteger"}return R>=ha.min&&R<=ha.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};b.getTimeFields=function(R){return x.apply(this,arguments)};b.integerRange=Y;b.isDateField=function(R){return null!=R&&("date"===
R.type||"esriFieldTypeDate"===R.type)};b.isNumberInRange=Ta;b.isNumericField=Aa;b.isStringField=function(R){return null!=R&&("string"===R.type||"esriFieldTypeString"===R.type)};b.isValidFieldValue=function(R,V){return null===Na(R,V)};b.isValueMatchingFieldType=ra;b.numericTypes=v;b.packFields=function(R,V,ca=1){if(!V||!R)return[];if(V.includes("*"))return["*"];V=r(R,V);return V.length/R.fields.length>=ca?["*"]:V};b.populateMissingFields=Ca;b.rendererFields=gb;b.sanitizeNullFieldValue=function(R){return null==
R||"number"===typeof R&&isNaN(R)?null:R};b.singleRange=ha;b.smallIntegerRange=X;b.unpackFieldNames=function(R,V){return q.isNone(V)||q.isNone(R)?[]:V.includes("*")?R.fields.map(ca=>ca.name):V};b.validateFieldValue=Na;b.validationErrorToString=function(R,V,ca){switch(R){case g.DomainValidationError.INVALID_CODED_VALUE:return`Value ${ca} is not in the coded domain - field: ${V.name}, domain: ${JSON.stringify(V.domain)}`;case g.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${ca} is out of the range of valid values - field: ${V.name}, domain: ${JSON.stringify(V.domain)}`;
case b.TypeValidationError.INVALID_TYPE:return`Value ${ca} is not a valid value for the field type - field: ${V.name}, type: ${V.type}, nullable: ${V.nullable}`;case b.NumericRangeValidationError.OUT_OF_RANGE:{const {min:ma,max:na}=Ka(V.type);return`Value ${ca} is out of range for the number type - field: ${V.name}, type: ${V.type}, value range is ${ma} to ${na}`}}};b.visualVariableFields=f;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/layers/support/domainUtils":function(){define(["exports"],
function(l){function b(B,N){switch(B.type){case "range":{const q="range"in B?B.range[1]:B.maxValue;if(+N<("range"in B?B.range[0]:B.minValue)||+N>q)return l.DomainValidationError.VALUE_OUT_OF_RANGE;break}case "coded-value":case "codedValue":if(null==B.codedValues||B.codedValues.every(q=>null==q||q.code!==N))return l.DomainValidationError.INVALID_CODED_VALUE}return null}l.DomainValidationError=void 0;(function(B){B.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";B.INVALID_CODED_VALUE=
"domain-validation-error::invalid-coded-value"})(l.DomainValidationError||(l.DomainValidationError={}));l.getDomainRange=function(B){if(B&&"range"===B.type)return{min:"range"in B?B.range[0]:B.minValue,max:"range"in B?B.range[1]:B.maxValue}};l.isValidDomainValue=function(B,N){return null===b(B,N)};l.validateDomainValue=b;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/maybe ../geometry/SpatialReference".split(" "),
function(l,b,B,N,q,n){function g(){G||(G=B._asyncToGenerator(function*(){const r=yield new Promise(function(C,Q){l(["./arcadeUtils"],C,Q)});return{arcade:r.arcade,arcadeUtils:r,Dictionary:r.Dictionary,Feature:r.arcadeFeature}})());return G}let G;N=(r,C,Q)=>m.create(r,C,Q,null,["$feature","$view"]);let m=function(){function r(Q,z,E,O,c,u,D,L){this.script=Q;this.evaluate=c;this.fields=Array.isArray(D)?D:D.fields;this._syntaxTree=O;this._arcade=z;this._arcadeDictionary=E;this._arcadeFeature=u;this._spatialReference=
L;this._referencesGeometry=z.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}r.create=function(){var Q=B._asyncToGenerator(function*(z,E,O,c,u,D){const {arcade:L,Feature:A,Dictionary:H}=yield g(),I=n.fromJSON(E);E=L.parseScript(z,D);u=u.reduce((e,x)=>({...e,[x]:null}),{});let W=null;q.isSome(c)&&(W=new H(c),W.immutable=!0,u.$config=null);c=L.scriptUsesGeometryEngine(E)&&L.enableGeometrySupport();D=L.scriptUsesFeatureSet(E)&&L.enableFeatureSetSupport();
const M=L.scriptIsAsync(E)&&L.enableAsyncSupport();u={vars:u,spatialReference:I,useAsync:!!M};const k=new H;k.immutable=!1;k.setField("scale",0);const t=L.compileScript(E,u);yield Promise.all([c,D,M]);return new r(z,L,H,E,e=>{"$view"in e&&e.$view&&(k.setField("scale",e.$view.scale),e.$view=k);W&&(e.$config=W);return t({vars:e,spatialReference:I})},new A,O,I)});return function(z,E,O,c,u,D){return Q.apply(this,arguments)}}();var C=r.prototype;C.repurposeFeature=function(Q){Q.geometry&&!Q.geometry.spatialReference&&
(Q.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(Q.geometry,Q.attributes,{fields:this.fields});return this._arcadeFeature};C.repurposeAdapter=function(Q){this._arcadeFeature.repurposeFromAdapter(Q,{fields:this.fields});return this._arcadeFeature};C.createDictionary=function(){return new this._arcadeDictionary};C.referencesMember=function(Q){return this._arcade.referencesMember(this._syntaxTree,Q)};C.referencesFunction=function(Q){return this._arcade.referencesFunction(this._syntaxTree,
Q)};C.referencesGeometry=function(){return this._referencesGeometry};C.referencesScale=function(){return this._referencesScale};C.extractFieldLiterals=function(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)};return r}();b.ArcadeExpression=m;b.createDictionaryExpression=(r,C,Q,z)=>m.create(r,C,Q,z,["$feature","$view"]);b.createLabelExpression=(r,C,Q)=>m.create(r,C,Q,null,["$feature"]);b.createRendererExpression=N;b.createVVExpression=N;b["default"]=m;b.loadArcade=g;Object.defineProperty(b,
"__esModule",{value:!0})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(l){function b(q,n,g,G,m){if(null!=G&&null!=m)return r=>{const C=q.getAttribute(r,n);r=q.getAttribute(r,g);return(null==C||C<=m)&&(null==r||r>=G)};if(null!=G)return r=>{r=q.getAttribute(r,g);return null==r||r>=G};if(null!=m)return r=>{r=q.getAttribute(r,n);return null==r||r<=m}}function B(q,n,g,G){if(null!=g&&null!=G&&g===G)return m=>q.getAttribute(m,n)===g;if(null!=g&&null!=G)return m=>{m=q.getAttribute(m,
n);return m>=g&&m<=G};if(null!=g)return m=>q.getAttribute(m,n)>=g;if(null!=G)return m=>q.getAttribute(m,n)<=G}function N(){return()=>!1}l.getTimeExtent=function(q,n){if(!q)return null;const g=n.featureAdapter,{startTimeField:G,endTimeField:m}=q;let r=Number.POSITIVE_INFINITY,C=Number.NEGATIVE_INFINITY;if(G&&m)n.forEach(Q=>{const z=g.getAttribute(Q,G);Q=g.getAttribute(Q,m);null==z||isNaN(z)||(r=Math.min(r,z));null==Q||isNaN(Q)||(C=Math.max(C,Q))});else{const Q=G||m;n.forEach(z=>{z=g.getAttribute(z,
Q);null==z||isNaN(z)||(r=Math.min(r,z),C=Math.max(C,z))})}return{start:r,end:C}};l.getTimeOperator=function(q,n,g){if(!n||!q)return null;const {startTimeField:G,endTimeField:m}=q;if(!G&&!m)return null;const {start:r,end:C}=n;return null===r&&null===C?null:void 0===r&&void 0===C?N():G&&m?b(g,G,m,r,C):B(g,G||m,r,C)};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../centroid ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(l,b,B,N,q,n,g,G,m,r,C,Q,z,E){function O(h,p,J,U=h.hasZ,da=h.hasM){if(q.isNone(p))return null;const ja=h.hasZ&&U,ka=h.hasM&&da;return J?(h=Q.quantizeOptimizedGeometry(x,p,h.hasZ,h.hasM,"esriGeometryPoint",J,U,da),Q.convertToPoint(h,ja,ka)):Q.convertToPoint(p,ja,ka)}function c(){c=B._asyncToGenerator(function*(h,p,J){const {outFields:U,orderByFields:da,groupByFieldsForStatistics:ja,outStatistics:ka}=h;if(U)for(var oa=0;oa<U.length;oa++)U[oa]=U[oa].trim();if(da)for(oa=0;oa<da.length;oa++)da[oa]=
da[oa].trim();if(ja)for(oa=0;oa<ja.length;oa++)ja[oa]=ja[oa].trim();if(ka)for(oa=0;oa<ka.length;oa++)ka[oa].onStatisticField&&(ka[oa].onStatisticField=ka[oa].onStatisticField.trim());h.geometry&&!h.outSR&&(h.outSR=h.geometry.spatialReference);return D(h,p,J)});return c.apply(this,arguments)}function u(){u=B._asyncToGenerator(function*(h,p,J){return D(h,p,J)});return u.apply(this,arguments)}function D(h,p,J){return L.apply(this,arguments)}function L(){L=B._asyncToGenerator(function*(h,p,J){if(!h)return null;
var {where:U}=h;h.where=U=U&&U.trim();if(!U||/^1 *= *1$/.test(U)||p&&p===U)h.where=null;if(!h.geometry)return h;p=yield A(h);h.distance=0;h.units=null;"esriSpatialRelEnvelopeIntersects"===h.spatialRel&&({spatialReference:U}=h.geometry,p=g.getGeometryExtent(p),p.spatialReference=U);h.geometry=p;yield E.checkProjectionSupport(p.spatialReference,J);p=(yield m.normalizeCentralMeridian(G.fromJSON(p)))[0];if(q.isNone(p))throw k;p=p.toJSON();p=yield E.project(p,p.spatialReference,J);if(!p)throw k;p.spatialReference=
J;h.geometry=p;return h});return L.apply(this,arguments)}function A(h){return H.apply(this,arguments)}function H(){H=B._asyncToGenerator(function*(h){const {geometry:p,distance:J,units:U}=h;if(null==J||"vertexAttributes"in p)return p;var da=p.spatialReference;h=U?M.fromJSON(U):n.getUnitString(da);da=da&&(r.isGeographic(da)||r.isWebMercator(da))?p:yield E.checkProjectionSupport(da,r.WGS84).then(()=>E.project(p,r.WGS84));return(yield I())(da.spatialReference,da,J,h)});return H.apply(this,arguments)}
function I(){return W.apply(this,arguments)}function W(){W=B._asyncToGenerator(function*(){return(yield new Promise(function(h,p){l(["../../../geometry/geometryEngineJSON"],h,p)})).geodesicBuffer});return W.apply(this,arguments)}const M=new N.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),k=Object.freeze({}),t=new z,e=new z,x=new z,F=
{esriGeometryPoint:Q.convertToPoint,esriGeometryPolyline:Q.convertToPolyline,esriGeometryPolygon:Q.convertToPolygon,esriGeometryMultipoint:Q.convertToMultipoint},K=(h,p)=>"_geVersion"!==h?p:void 0;b.QUERY_ENGINE_EMPTY_RESULT=k;b.cleanFromGeometryEngine=function(h){return h&&"_geVersion"in h?JSON.parse(JSON.stringify(h,K)):h};b.getCentroid=function(h,p,J){if("esriGeometryPolygon"!==h.geometryType||!p||!p.centroid&&!p.geometry)return null;p.centroid||(p.centroid=C.getCentroidOptimizedGeometry(new z,
p.geometry,h.hasZ,h.hasM));return O(h,p.centroid,J)};b.getGeometry=function(h,p,J,U,da,ja,ka=p,oa=J){const ua=p&&ka,ra=J&&oa;U=q.isSome(U)?"coords"in U?U:U.geometry:null;if(q.isNone(U))return null;if(da)return p=Q.generalizeOptimizedGeometry(e,U,p,J,h,da,ka,oa),ja&&(p=Q.quantizeOptimizedGeometry(x,p,ua,ra,h,ja)),F[h](p,ua,ra);if(ja)return ja=Q.quantizeOptimizedGeometry(x,U,p,J,h,ja,ka,oa),F[h](ja,ua,ra);Q.removeZMValues(t,U,p,J,ka,oa);return F[h](t,ua,ra)};b.normalizeFilter=function(h,p,J){return u.apply(this,
arguments)};b.normalizeQuery=function(h,p,J){return c.apply(this,arguments)};b.normalizeQueryLike=D;b.transformCentroid=O;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(l,b,B,N,q,n,g,G,m,r,C,Q,z){function E(){return new Promise(function(D,L){l(["../../../geometry/geometryEngineJSON"],D,L)})}function O(){O=B._asyncToGenerator(function*(D,L,A){const {spatialRel:H,geometry:I}=D;if(I){if(!0!==u.spatialRelationship[H])throw new N("feature-store:unsupported-query","Unsupported query spatial relationship",{query:D});if(G.isValid(I.spatialReference)&&G.isValid(A)){if(!0!==u.queryGeometry[g.getJsonType(I)])throw new N("feature-store:unsupported-query","Unsupported query geometry type",
{query:D});if(!0!==u.layerGeometry[L])throw new N("feature-store:unsupported-query","Unsupported layer geometry type",{query:D});if(D.outSR)return Q.checkProjectionSupport(D.geometry&&D.geometry.spatialReference,D.outSR)}}});return O.apply(this,arguments)}const c={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",
esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},u={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},
layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};b.canQueryWithRBush=function(D){if(g.isExtent(D))return!0;if(g.isPolygon(D)){for(const L of D.rings)if(5!==L.length||L[0][0]!==L[1][0]||L[0][0]!==L[4][0]||L[2][0]!==L[3][0]||L[0][1]!==L[3][1]||L[0][1]!==L[4][1]||L[1][1]!==L[2][1])return!1;return!0}return!1};b.checkSpatialQuerySupport=function(D,L,A){return O.apply(this,arguments)};b.getSpatialQueryOperator=function(D,
L,A,H,I){if(g.isPolygon(L)&&"esriGeometryPoint"===A&&("esriSpatialRelIntersects"===D||"esriSpatialRelContains"===D)){const W=r.convertFromPolygon(new C,L,!1,!1);return Promise.resolve(M=>m.polygonContainsPoint(W,!1,!1,M))}if(g.isPolygon(L)&&"esriGeometryMultipoint"===A){const W=r.convertFromPolygon(new C,L,!1,!1);if("esriSpatialRelContains"===D)return Promise.resolve(M=>m.polygonContainsMultipoint(W,!1,!1,M,H,I))}if(g.isExtent(L)&&"esriGeometryPoint"===A&&("esriSpatialRelIntersects"===D||"esriSpatialRelContains"===
D))return Promise.resolve(W=>q.extentContainsPoint(L,z.getGeometry(A,H,I,W)));if(g.isExtent(L)&&"esriGeometryMultipoint"===A&&"esriSpatialRelContains"===D)return Promise.resolve(W=>q.extentContainsMultipoint(L,z.getGeometry(A,H,I,W)));if(g.isExtent(L)&&"esriSpatialRelIntersects"===D){const W=n.getExtentIntersector(A);return Promise.resolve(M=>W(L,z.getGeometry(A,H,I,M)))}return E().then(W=>{const M=W[c[D]].bind(null,L.spatialReference,L);return k=>M(z.getGeometry(A,H,I,k))})};Object.defineProperty(b,
"__esModule",{value:!0})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(l,b){l.extentIntersectsExtent=b.extentIntersectsExtent;l.extentIntersectsMultipoint=b.extentIntersectsMultipoint;l.extentIntersectsPoint=b.extentIntersectsPoint;l.extentIntersectsPolygon=b.extentIntersectsPolygon;l.extentIntersectsPolyline=b.extentIntersectsPolyline;l.getFeatureExtentIntersector=b.getFeatureExtentIntersector;l.isSelfIntersecting=b.isSelfIntersecting;l.segmentIntersects=
b.segmentIntersects;l.getExtentIntersector=function(B){return"mesh"===B?b.extentIntersectsExtent:b.getFeatureExtentIntersector(B)};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/contains":function(){define(["exports"],function(l){function b(B,N,q,n,g){if(!B)return!1;N=N?q?4:3:q?3:2;const {coords:G,lengths:m}=B;q=!1;B=0;for(const C of m){var r=B;for(let Q=B,z=B+C*N;Q<z;Q+=N){r=Q+N;r===z&&(r=B);const E=G[Q],O=G[Q+1],c=G[r];r=G[r+1];(O<g&&r>=g||r<g&&O>=g)&&E+(g-O)/(r-O)*(c-
E)<n&&(q=!q)}B+=C*N}return q}l.polygonContainsCoords=b;l.polygonContainsMultipoint=function(B,N,q,n,g,G){g=g?G?4:3:G?3:2;const {coords:m,lengths:r}=n;if(!r)return!1;for(let C=0,Q=0;C<r.length;C++,Q+=g)if(!b(B,N,q,m[Q],m[Q+1]))return!1;return!0};l.polygonContainsPoint=function(B,N,q,n){return b(B,N,q,n.coords[0],n.coords[1])};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/support/FieldsIndex":function(){define(function(){return function(){function l(B){this.fields=B;this._fieldsMap=
new Map;this._dateFieldsSet=new Set;this.dateFields=[];if(B){var N=[];for(const q of B)if(B=q&&q.name){const n=B.toLowerCase().trim();this._fieldsMap.set(B,q);this._fieldsMap.set(n,q);N.push(n);if("date"===q.type||"esriFieldTypeDate"===q.type)this.dateFields.push(q),this._dateFieldsSet.add(q)}N.sort();this.uid=N.join(",")}}var b=l.prototype;b.destroy=function(){this._fieldsMap.clear()};b.has=function(B){return null!=this.get(B)};b.get=function(B){return null!=B?this._fieldsMap.get(B)||this._fieldsMap.get(B.toLowerCase().trim()):
void 0};b.isDateField=function(B){return this._dateFieldsSet.has(this.get(B))};b.normalizeFieldName=function(B){if(B=this.get(B))return B.name};return l}()})},"esri/layers/support/PromiseQueue":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/promiseUtils"],function(l,b){let B=function(N,q,n,g,G){this.resolve=N;this.reject=q;this.callback=n;this.signal=g;this.abortCallback=G};return function(){function N(){this._tasks=[]}var q=N.prototype;q.push=function(n,g,G){return new Promise((m,
r)=>this._tasks.push(new B(m,r,n,g,G)))};q.unshift=function(n,g,G){return new Promise((m,r)=>this._tasks.unshift(new B(m,r,n,g,G)))};q.process=function(){if(0===this._tasks.length)return!1;const n=this._tasks.shift();try{const g=b.isAborted(n.signal);if(g&&!n.abortCallback)n.reject(b.createAbortError());else{const G=g?n.abortCallback(b.createAbortError()):n.callback();b.isPromise(G)?G.then(n.resolve,n.reject):n.resolve(G)}}catch(g){n.reject(g)}return!0};q.cancelAll=function(){const n=b.createAbortError();
for(const g of this._tasks)if(g.abortCallback){const G=g.abortCallback(n);g.resolve(G)}else g.reject(n);this._tasks.length=0};l._createClass(N,[{key:"length",get:function(){return this._tasks.length}}]);return N}()})},"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/maybe ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(l,b,B,N,q,n,g,G,m,r,C,Q,z,E,O,c,u,D,L){var A;B=new B.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});N=A=function(H){function I(M){M=H.call(this,M)||this;M.dpi=96;M.format=null;M.origin=null;M.minScale=0;M.maxScale=0;M.size=null;M.spatialReference=null;return M}l._inheritsLoose(I,H);I.create=function(M=
{}){const {resolutionFactor:k=1,scales:t,size:e=256,spatialReference:x=O.WebMercator,numLODs:F=24}=M;if(!u.isValid(x)){M=[];if(t)for(var K=0;K<t.length;K++){var h=t[K];M.push({level:K,scale:h,resolution:h})}else for(K=5E-4,h=F-1;0<=h;h--)M.unshift({level:h,scale:K,resolution:K}),K*=2;return new A({dpi:96,lods:M,origin:new E(0,0,x),size:[e,e],spatialReference:x})}K=u.getInfo(x);M=M.origin?new E({x:M.origin.x,y:M.origin.y,spatialReference:x}):K?new E({x:K.origin[0],y:K.origin[1],spatialReference:x}):
new E({x:0,y:0,spatialReference:x});K=1/(39.37*n.getMetersPerUnitForSR(x)*96);h=[];if(t)for(var p=0;p<t.length;p++){var J=t[p];h.push({level:p,scale:J,resolution:J*K})}else{var U=u.isGeographic(x)?512/e*5.916575275917094E8:256/e*5.91657527591555E8;p=Math.ceil(F/k);h.push({level:0,scale:U,resolution:U*K});for(J=1;J<p;J++)U/=2**k,h.push({level:J,scale:U,resolution:U*K})}return new A({dpi:96,lods:h,origin:M,size:[e,e],spatialReference:x})};var W=I.prototype;W.readOrigin=function(M,k){return E.fromJSON({spatialReference:k.spatialReference,
...M})};W.readSize=function(M,k){return[k.cols,k.rows]};W.writeSize=function(M,k){k.cols=M[0];k.rows=M[1]};W.zoomToScale=function(M){const k=this.scales;if(0>=M)return k[0];if(M>=k.length-1)return k[k.length-1];{const t=Math.floor(M);return k[t]/(k[t]/k[t+1])**(M-t)}};W.scaleToZoom=function(M){const k=this.scales,t=k.length-1;let e=0;for(;e<t;e++){const x=k[e],F=k[e+1];if(x<=M)break;if(F===M)return e+1;if(x>M&&F<M)return e+Math.log(x/M)/Math.log(x/F)}return e};W.snapScale=function(M,k=.95){M=this.scaleToZoom(M);
return M%Math.floor(M)>=k?this.zoomToScale(Math.ceil(M)):this.zoomToScale(Math.floor(M))};W.tileAt=function(M,k,t,e){var x=this.lodAt(M);if(!x)return null;let F;if("number"===typeof k)F=k,k=t;else{if(u.equals(k.spatialReference,this.spatialReference))F=k.x,k=k.y;else{e=D.project(k,this.spatialReference);if(q.isNone(e))return null;F=e.x;k=e.y}e=t}t=x.resolution*this.size[0];x=x.resolution*this.size[1];e||(e={id:null,level:0,row:0,col:0,extent:c.create()});e.level=M;e.row=Math.floor((this.origin.y-
k)/x+.001);e.col=Math.floor((F-this.origin.x)/t+.001);this.updateTileInfo(e);return e};W.updateTileInfo=function(M,k=0){var t=this.lodAt(M.level);t||1!==k||(k=this.lods[this.lods.length-1],k.level<M.level&&(t=k));if(t){var e=M.level-t.level;k=t.resolution*this.size[0]/2**e;t=t.resolution*this.size[1]/2**e;M.id=`${M.level}/${M.row}/${M.col}`;M.extent||(M.extent=c.create());M.extent[0]=this.origin.x+M.col*k;M.extent[1]=this.origin.y-(M.row+1)*t;M.extent[2]=M.extent[0]+k;M.extent[3]=M.extent[1]+t}};
W.upsampleTile=function(M){const k=this._upsampleLevels[M.level];if(!k||-1===k.parentLevel)return!1;M.level=k.parentLevel;M.row=Math.floor(M.row/k.factor+.001);M.col=Math.floor(M.col/k.factor+.001);this.updateTileInfo(M);return!0};W.getTileBounds=function(M,k){var {resolution:t}=this.lodAt(k.level);const e=t*this.size[0];t*=this.size[1];M[0]=this.origin.x+k.col*e;M[1]=this.origin.y-(k.row+1)*t;M[2]=M[0]+e;M[3]=M[1]+t;return M};W.lodAt=function(M){return this._levelToLOD&&this._levelToLOD[M]||null};
W.clone=function(){return A.fromJSON(this.write({}))};W._initializeUpsampleLevels=function(){const M=this.lods;this._upsampleLevels=[];let k=null;for(let t=0;t<M.length;t++){const e=M[t];this._upsampleLevels[e.level]={parentLevel:k?k.level:-1,factor:k?k.resolution/e.resolution:0};k=e}};l._createClass(I,[{key:"isWrappable",get:function(){const {spatialReference:M,origin:k}=this;if(M&&k){const t=u.getInfo(M);return M.isWrappable&&Math.abs(t.origin[0]-k.x)<=t.dx}return!1}},{key:"lods",set:function(M){let k=
0,t=0;const e=[];this._levelToLOD={};M&&(k=-Infinity,t=Infinity,M.forEach(x=>{e.push(x.scale);k=x.scale>k?x.scale:k;t=x.scale<t?x.scale:t;this._levelToLOD[x.level]=x}));this._set("scales",e);this._set("minScale",k);this._set("maxScale",t);this._set("lods",M);this._initializeUpsampleLevels()}}]);return I}(N.JSONSupport);b.__decorate([g.property({type:Number,json:{write:!0}})],N.prototype,"compressionQuality",void 0);b.__decorate([g.property({type:Number,json:{write:!0}})],N.prototype,"dpi",void 0);
b.__decorate([g.property({type:String,json:{read:B.read,write:B.write,origins:{"web-scene":{read:!1,write:!1}}}})],N.prototype,"format",void 0);b.__decorate([g.property({readOnly:!0})],N.prototype,"isWrappable",null);b.__decorate([g.property({type:E,json:{write:!0}})],N.prototype,"origin",void 0);b.__decorate([C.reader("origin")],N.prototype,"readOrigin",null);b.__decorate([g.property({type:[L],value:null,json:{write:!0}})],N.prototype,"lods",null);b.__decorate([g.property({readOnly:!0})],N.prototype,
"minScale",void 0);b.__decorate([g.property({readOnly:!0})],N.prototype,"maxScale",void 0);b.__decorate([g.property({readOnly:!0})],N.prototype,"scales",void 0);b.__decorate([g.property({cast:H=>Array.isArray(H)?H:"number"===typeof H?[H,H]:[256,256]})],N.prototype,"size",void 0);b.__decorate([C.reader("size",["rows","cols"])],N.prototype,"readSize",null);b.__decorate([z.writer("size",{cols:{type:m.Integer},rows:{type:m.Integer}})],N.prototype,"writeSize",null);b.__decorate([g.property({type:O,json:{write:!0}})],
N.prototype,"spatialReference",void 0);return N=A=b.__decorate([Q.subclass("esri.layers.support.TileInfo")],N)})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),function(l,b,B,N,q,n,g,G){var m;B=m=function(r){function C(Q){Q=r.call(this,Q)||
this;Q.cols=null;Q.level=0;Q.levelValue=null;Q.resolution=0;Q.rows=null;Q.scale=0;return Q}l._inheritsLoose(C,r);C.prototype.clone=function(){return new m({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})};return C}(B.JSONSupport);b.__decorate([N.property({type:Number,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],B.prototype,"cols",void 0);b.__decorate([N.property({type:n.Integer,
json:{write:!0}})],B.prototype,"level",void 0);b.__decorate([N.property({type:String,json:{write:!0}})],B.prototype,"levelValue",void 0);b.__decorate([N.property({type:Number,json:{write:!0}})],B.prototype,"resolution",void 0);b.__decorate([N.property({type:Number,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],B.prototype,"rows",void 0);b.__decorate([N.property({type:Number,json:{write:!0}})],B.prototype,"scale",void 0);return B=m=b.__decorate([G.subclass("esri.layers.support.LOD")],
B)})},"esri/layers/support/TimeInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../TimeExtent ../../TimeInterval ../../core/JSONSupport ../../core/lang ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./TimeReference ../../portal/timeUnitKebabDictionary".split(" "),
function(l,b,B,N,q,n,g,G,m,r,C,Q,z,E,O,c){var u;q=u=function(D){function L(H){H=D.call(this,H)||this;H.cumulative=!1;H.endField=null;H.fullTimeExtent=null;H.hasLiveData=!1;H.interval=null;H.startField=null;H.timeReference=null;H.trackIdField=null;H.useTime=!0;return H}l._inheritsLoose(L,D);var A=L.prototype;A.readFullTimeExtent=function(H,I){return I.timeExtent&&Array.isArray(I.timeExtent)&&2===I.timeExtent.length?new B({start:new Date(I.timeExtent[0]),end:new Date(I.timeExtent[1])}):null};A.writeFullTimeExtent=
function(H,I){H&&g.isSome(H.start)&&g.isSome(H.end)?I.timeExtent=[H.start.getTime(),H.end.getTime()]:I.timeExtent=null};A.readInterval=function(H,I){return I.timeInterval&&I.timeIntervalUnits?new N({value:I.timeInterval,unit:c.timeUnitKebabDictionary.fromJSON(I.timeIntervalUnits)}):I.defaultTimeInterval&&I.defaultTimeIntervalUnits?new N({value:I.defaultTimeInterval,unit:c.timeUnitKebabDictionary.fromJSON(I.defaultTimeIntervalUnits)}):null};A.writeInterval=function(H,I){H?(H=H.toJSON(),I.timeInterval=
H.value,I.timeIntervalUnits=H.unit):(I.timeInterval=null,I.timeIntervalUnits=null)};A.clone=function(){const {cumulative:H,endField:I,hasLiveData:W,interval:M,startField:k,timeReference:t,fullTimeExtent:e,trackIdField:x,useTime:F}=this;return new u({cumulative:H,endField:I,hasLiveData:W,interval:M,startField:k,timeReference:n.clone(t),fullTimeExtent:n.clone(e),trackIdField:x,useTime:F})};return L}(q.JSONSupport);b.__decorate([G.property({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},
write:{target:"exportOptions.timeDataCumulative"}}})],q.prototype,"cumulative",void 0);b.__decorate([G.property({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],q.prototype,"endField",void 0);b.__decorate([G.property({type:B,json:{write:{enabled:!0,allowNull:!0}}})],q.prototype,"fullTimeExtent",void 0);b.__decorate([Q.reader("fullTimeExtent",["timeExtent"])],q.prototype,"readFullTimeExtent",null);b.__decorate([E.writer("fullTimeExtent")],q.prototype,"writeFullTimeExtent",
null);b.__decorate([G.property({type:Boolean,json:{write:!0}})],q.prototype,"hasLiveData",void 0);b.__decorate([G.property({type:N,json:{write:{enabled:!0,allowNull:!0}}})],q.prototype,"interval",void 0);b.__decorate([Q.reader("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],q.prototype,"readInterval",null);b.__decorate([E.writer("interval")],q.prototype,"writeInterval",null);b.__decorate([G.property({type:String,json:{read:{source:"startTimeField"},
write:{target:"startTimeField",allowNull:!0}}})],q.prototype,"startField",void 0);b.__decorate([G.property({type:O,json:{write:{enabled:!0,allowNull:!0}}})],q.prototype,"timeReference",void 0);b.__decorate([G.property({type:String,json:{write:{enabled:!0,allowNull:!0}}})],q.prototype,"trackIdField",void 0);b.__decorate([G.property({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],q.prototype,"useTime",void 0);return q=u=b.__decorate([z.subclass("esri.layers.support.TimeInfo")],
q)})},"esri/TimeExtent":function(){define("./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/JSONSupport ./core/maybe ./core/timeUtils ./core/accessorSupport/decorators/property ./core/has ./core/accessorSupport/ensureType ./core/Logger ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer".split(" "),function(l,b,B,N,q,n,g,G,m,r,C,Q){var z;B=z=function(c){function u(L){L=c.call(this,L)||this;L.end=null;L.start=null;
return L}l._inheritsLoose(u,c);var D=u.prototype;D.readEnd=function(L,A){return null!=A.end?new Date(A.end):null};D.writeEnd=function(L,A){A.end=L?L.getTime():null};D.readStart=function(L,A){return null!=A.start?new Date(A.start):null};D.writeStart=function(L,A){A.start=L?L.getTime():null};D.clone=function(){return new z({end:this.end,start:this.start})};D.equals=function(L){if(!L)return!1;const A=N.isSome(this.start)?this.start.getTime():this.start,H=N.isSome(this.end)?this.end.getTime():this.end,
I=N.isSome(L.start)?L.start.getTime():L.start;L=N.isSome(L.end)?L.end.getTime():L.end;return A===I&&H===L};D.expandTo=function(L){if(this.isEmpty||this.isAllTime)return this.clone();const A=N.andThen(this.start,I=>q.truncateDate(I,L)),H=N.andThen(this.end,I=>q.offsetDate(q.truncateDate(I,L),1,L));return new z({start:A,end:H})};D.intersection=function(L){if(!L)return this.clone();if(this.isEmpty||L.isEmpty)return z.empty;if(this.isAllTime)return L.clone();if(L.isAllTime)return this.clone();var A=N.mapOr(this.start,
-Infinity,k=>k.getTime());const H=N.mapOr(this.end,Infinity,k=>k.getTime()),I=N.mapOr(L.start,-Infinity,k=>k.getTime());L=N.mapOr(L.end,Infinity,k=>k.getTime());let W,M;I>=A&&I<=H?W=I:A>=I&&A<=L&&(W=A);H>=I&&H<=L?M=H:L>=A&&L<=H&&(M=L);return isNaN(W)||isNaN(M)?z.empty:(A=new z,A.start=-Infinity===W?null:new Date(W),A.end=Infinity===M?null:new Date(M),A)};D.offset=function(L,A){if(this.isEmpty||this.isAllTime)return this.clone();const H=new z,{start:I,end:W}=this;N.isSome(I)&&(H.start=q.offsetDate(I,
L,A));N.isSome(W)&&(H.end=q.offsetDate(W,L,A));return H};D.union=function(L){if(!L||L.isEmpty)return this.clone();if(this.isEmpty)return L.clone();if(this.isAllTime||L.isAllTime)return E.clone();const A=N.isSome(this.start)&&N.isSome(L.start)?new Date(Math.min(this.start.getTime(),L.start.getTime())):null;L=N.isSome(this.end)&&N.isSome(L.end)?new Date(Math.max(this.end.getTime(),L.end.getTime())):null;return new z({start:A,end:L})};l._createClass(u,[{key:"isAllTime",get:function(){return this.equals(z.allTime)}},
{key:"isEmpty",get:function(){return this.equals(z.empty)}}],[{key:"allTime",get:function(){return E}},{key:"empty",get:function(){return O}}]);return u}(B.JSONSupport);b.__decorate([n.property({type:Date,json:{write:{allowNull:!0}}})],B.prototype,"end",void 0);b.__decorate([r.reader("end")],B.prototype,"readEnd",null);b.__decorate([Q.writer("end")],B.prototype,"writeEnd",null);b.__decorate([n.property({readOnly:!0,json:{read:!1}})],B.prototype,"isAllTime",null);b.__decorate([n.property({readOnly:!0,
json:{read:!1}})],B.prototype,"isEmpty",null);b.__decorate([n.property({type:Date,json:{write:{allowNull:!0}}})],B.prototype,"start",void 0);b.__decorate([r.reader("start")],B.prototype,"readStart",null);b.__decorate([Q.writer("start")],B.prototype,"writeStart",null);B=z=b.__decorate([C.subclass("esri.TimeExtent")],B);const E=new B,O=new B({start:void 0,end:void 0});return B})},"esri/core/timeUtils":function(){define(["exports","./has"],function(l,b){function B(n,g,G){return 0===n?0:n*N[g]/N[G]}const N=
{milliseconds:1,seconds:1E3,minutes:6E4,hours:36E5,days:864E5,weeks:6048E5,months:26784E5,years:31536E6,decades:31536E7,centuries:31536E8},q={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},
months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};l.convertTime=B;l.makeUTCTime=function(n,g,G="milliseconds"){g=new Date(B(g,G,"milliseconds"));g.setUTCFullYear(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate());return g};l.offsetDate=function(n,g,G){n=new Date(n.getTime());if(g&&G){const {getter:m,
setter:r,multiplier:C}=q[G];n[r](n[m]()+g*C)}return n};l.offsetDateUTC=function(n,g,G="milliseconds"){n=n.getTime();g=B(g,G,"milliseconds");return new Date(n+g)};l.resetUTCDate=function(n,g){n=new Date(n.getTime());n.setUTCFullYear(g.getFullYear(),g.getMonth(),g.getDate());return n};l.timeSinceUTCMidnight=function(n,g="milliseconds"){const G=B(n.getUTCHours(),"hours","milliseconds"),m=B(n.getUTCMinutes(),"minutes","milliseconds"),r=B(n.getUTCSeconds(),"seconds","milliseconds");n=n.getUTCMilliseconds();
return B(G+m+r+n,"milliseconds",g)};l.truncateDate=function(n,g){switch(g){case "milliseconds":return new Date(n.getTime());case "seconds":return new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds());case "minutes":return new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes());case "hours":return new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours());case "days":return new Date(n.getFullYear(),n.getMonth(),n.getDate());case "weeks":return new Date(n.getFullYear(),
n.getMonth(),n.getDate()-n.getDay());case "months":return new Date(n.getFullYear(),n.getMonth(),1);case "years":return new Date(n.getFullYear(),0,1);case "decades":return new Date(n.getFullYear()-n.getFullYear()%10,0,1);case "centuries":return new Date(n.getFullYear()-n.getFullYear()%100,0,1);default:return new Date}};l.truncateLocalTime=function(n){const g=new Date(0);g.setHours(0);g.setMinutes(0);g.setSeconds(0);g.setMilliseconds(0);g.setFullYear(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate());
return g};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/TimeInterval":function(){define("./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/JSONSupport ./core/timeUtils ./core/accessorSupport/decorators/property ./core/has ./core/accessorSupport/ensureType ./core/Logger ./core/accessorSupport/decorators/subclass ./portal/timeUnitKebabDictionary".split(" "),function(l,b,B,N,q,n,g,G,m,r){var C;B=C=function(Q){function z(O){O=Q.call(this,O)||this;O.value=0;O.unit="milliseconds";
return O}l._inheritsLoose(z,Q);var E=z.prototype;E.toMilliseconds=function(){return N.convertTime(this.value,this.unit,"milliseconds")};E.clone=function(){return new C({value:this.value,unit:this.unit})};return z}(B.JSONSupport);b.__decorate([q.property({type:Number,json:{write:!0},nonNullable:!0})],B.prototype,"value",void 0);b.__decorate([q.property({type:r.timeUnitKebabDictionary.apiValues,json:{type:r.timeUnitKebabDictionary.jsonValues,read:r.timeUnitKebabDictionary.read,write:r.timeUnitKebabDictionary.write},
nonNullable:!0})],B.prototype,"unit",void 0);return B=C=b.__decorate([m.subclass("esri.TimeInterval")],B)})},"esri/portal/timeUnitKebabDictionary":function(){define(["exports","../core/jsonMap"],function(l,b){b=b.strict()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",
esriTimeUnitsUnknown:void 0});l.timeUnitKebabDictionary=b;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/support/TimeReference":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass".split(" "),function(l,b,B,N,q,n,g,G,m){var r;
B=r=function(C){function Q(E){E=C.call(this,E)||this;E.respectsDaylightSaving=!1;E.timezone=null;return E}l._inheritsLoose(Q,C);var z=Q.prototype;z.readRespectsDaylightSaving=function(E,O){return void 0!==O.respectsDaylightSaving?O.respectsDaylightSaving:void 0!==O.respectDaylightSaving?O.respectDaylightSaving:!1};z.clone=function(){const {respectsDaylightSaving:E,timezone:O}=this;return new r({respectsDaylightSaving:E,timezone:O})};return Q}(B.JSONSupport);b.__decorate([N.property({type:Boolean,
json:{write:!0}})],B.prototype,"respectsDaylightSaving",void 0);b.__decorate([G.reader("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],B.prototype,"readRespectsDaylightSaving",null);b.__decorate([N.property({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],B.prototype,"timezone",void 0);return B=r=b.__decorate([m.subclass("esri.layers.support.TimeReference")],B)})},"esri/rest/support/Query":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils ../../layers/support/source/DataLayerSource ./QuantizationParameters ./StatisticDefinition ../../geometry/SpatialReference ../../geometry/Point".split(" "),
function(l,b,B,N,q,n,g,G,m,r,C,Q,z,E,O,c,u,D,L,A,H,I){var W;C=new q.JSONMap({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});q=new q.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",
esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});n=W=function(M){function k(e){e=M.call(this,e)||this;e.aggregateIds=null;e.cacheHint=void 0;e.datumTransformation=null;e.distance=void 0;e.dynamicDataSource=void 0;e.formatOf3DObjects=null;e.gdbVersion=null;e.geometry=null;e.geometryPrecision=void 0;e.groupByFieldsForStatistics=null;e.having=null;e.historicMoment=null;e.maxAllowableOffset=void 0;e.maxRecordCountFactor=
1;e.multipatchOption=null;e.num=void 0;e.objectIds=null;e.orderByFields=null;e.outFields=null;e.outSpatialReference=null;e.outStatistics=null;e.parameterValues=null;e.pixelSize=null;e.quantizationParameters=null;e.rangeValues=null;e.relationParameter=null;e.resultType=null;e.returnCentroid=!1;e.returnDistinctValues=!1;e.returnExceededLimitFeatures=!0;e.returnGeometry=!1;e.returnQueryGeometry=!1;e.returnM=void 0;e.returnZ=void 0;e.sourceSpatialReference=null;e.spatialRelationship="intersects";e.start=
void 0;e.sqlFormat=null;e.text=null;e.timeExtent=null;e.timeReferenceUnknownClient=!1;e.units=null;e.where=null;return e}l._inheritsLoose(k,M);k.from=function(e){return c.ensureClass(W,e)};var t=k.prototype;t.castDatumTransformation=function(e){return"number"===typeof e||"object"===typeof e?e:null};t.writeHistoricMoment=function(e,x){x.historicMoment=e&&e.getTime()};t.writeParameterValues=function(e,x){if(e){const F={};for(const K in e){const h=e[K];Array.isArray(h)?F[K]=h.map(p=>p instanceof Date?
p.getTime():p):F[K]=h instanceof Date?h.getTime():h}x.parameterValues=F}};t.writeStart=function(e,x){x.resultOffset=this.start;x.resultRecordCount=this.num||10;x.where="1\x3d1"};t.writeWhere=function(e,x){x.where=e||"1\x3d1"};t.clone=function(){return new W(g.clone({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,
having:this.having,historicMoment:G.isSome(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,
rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,
sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))};return k}(n.JSONSupport);n.MAX_MAX_RECORD_COUNT_FACTOR=5;b.__decorate([m.property({json:{write:!0}})],n.prototype,"aggregateIds",void 0);b.__decorate([m.property({type:Boolean,json:{write:!0}})],n.prototype,"cacheHint",void 0);b.__decorate([m.property({json:{write:!0}})],n.prototype,"datumTransformation",void 0);b.__decorate([r.cast("datumTransformation")],
n.prototype,"castDatumTransformation",null);b.__decorate([m.property({type:Number,json:{write:{overridePolicy(M){return{enabled:0<M}}}}})],n.prototype,"distance",void 0);b.__decorate([m.property({type:D.DataLayerSource,json:{write:!0}})],n.prototype,"dynamicDataSource",void 0);b.__decorate([m.property({type:String,json:{write:!0}})],n.prototype,"formatOf3DObjects",void 0);b.__decorate([m.property({type:String,json:{write:!0}})],n.prototype,"gdbVersion",void 0);b.__decorate([m.property({types:B.geometryTypes,
json:{read:u.fromJSON,write:!0}})],n.prototype,"geometry",void 0);b.__decorate([m.property({type:Number,json:{write:!0}})],n.prototype,"geometryPrecision",void 0);b.__decorate([m.property({type:[String],json:{write:!0}})],n.prototype,"groupByFieldsForStatistics",void 0);b.__decorate([m.property({type:String,json:{write:!0}})],n.prototype,"having",void 0);b.__decorate([m.property({type:Date})],n.prototype,"historicMoment",void 0);b.__decorate([O.writer("historicMoment")],n.prototype,"writeHistoricMoment",
null);b.__decorate([m.property({type:Number,json:{write:!0}})],n.prototype,"maxAllowableOffset",void 0);b.__decorate([m.property({type:Number,cast(M){return 1>M?1:M>W.MAX_MAX_RECORD_COUNT_FACTOR?W.MAX_MAX_RECORD_COUNT_FACTOR:M},json:{write:{overridePolicy(M){return{enabled:1<M}}}}})],n.prototype,"maxRecordCountFactor",void 0);b.__decorate([m.property({type:["xyFootprint"],json:{write:!0}})],n.prototype,"multipatchOption",void 0);b.__decorate([m.property({type:Number,json:{read:{source:"resultRecordCount"}}})],
n.prototype,"num",void 0);b.__decorate([m.property({json:{write:!0}})],n.prototype,"objectIds",void 0);b.__decorate([m.property({type:[String],json:{write:!0}})],n.prototype,"orderByFields",void 0);b.__decorate([m.property({type:[String],json:{write:!0}})],n.prototype,"outFields",void 0);b.__decorate([m.property({type:H,json:{name:"outSR",write:!0}})],n.prototype,"outSpatialReference",void 0);b.__decorate([m.property({type:[A],json:{write:{enabled:!0,overridePolicy(){return{enabled:G.isSome(this.outStatistics)&&
0<this.outStatistics.length}}}}})],n.prototype,"outStatistics",void 0);b.__decorate([m.property({json:{write:!0}})],n.prototype,"parameterValues",void 0);b.__decorate([O.writer("parameterValues")],n.prototype,"writeParameterValues",null);b.__decorate([m.property({type:I,json:{write:!0}})],n.prototype,"pixelSize",void 0);b.__decorate([m.property({type:L,json:{write:!0}})],n.prototype,"quantizationParameters",void 0);b.__decorate([m.property({type:[Object],json:{write:!0}})],n.prototype,"rangeValues",
void 0);b.__decorate([m.property({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],n.prototype,"relationParameter",void 0);b.__decorate([m.property({type:String,json:{write:!0}})],n.prototype,"resultType",void 0);b.__decorate([m.property({type:Boolean,json:{default:!1,write:!0}})],n.prototype,"returnCentroid",void 0);b.__decorate([m.property({type:Boolean,json:{default:!1,write:!0}})],n.prototype,
"returnDistinctValues",void 0);b.__decorate([m.property({type:Boolean,json:{default:!0,write:!0}})],n.prototype,"returnExceededLimitFeatures",void 0);b.__decorate([m.property({type:Boolean,json:{write:!0}})],n.prototype,"returnGeometry",void 0);b.__decorate([m.property({type:Boolean,json:{default:!1,write:!0}})],n.prototype,"returnQueryGeometry",void 0);b.__decorate([m.property({type:Boolean,json:{default:!1,write:!0}})],n.prototype,"returnM",void 0);b.__decorate([m.property({type:Boolean,json:{write:{overridePolicy(M){return{enabled:M}}}}})],
n.prototype,"returnZ",void 0);b.__decorate([m.property({type:H,json:{write:!0}})],n.prototype,"sourceSpatialReference",void 0);b.__decorate([z.enumeration(C,{ignoreUnknown:!1,name:"spatialRel"})],n.prototype,"spatialRelationship",void 0);b.__decorate([m.property({type:Number,json:{read:{source:"resultOffset"}}})],n.prototype,"start",void 0);b.__decorate([O.writer("start"),O.writer("num")],n.prototype,"writeStart",null);b.__decorate([m.property({type:String,json:{write:!0}})],n.prototype,"sqlFormat",
void 0);b.__decorate([m.property({type:String,json:{write:!0}})],n.prototype,"text",void 0);b.__decorate([m.property({type:N,json:{write:!0}})],n.prototype,"timeExtent",void 0);b.__decorate([m.property({type:Boolean,json:{default:!1,write:!0}})],n.prototype,"timeReferenceUnknownClient",void 0);b.__decorate([z.enumeration(q,{ignoreUnknown:!1}),m.property({json:{write:{overridePolicy(M){return{enabled:M&&0<this.distance}}}}})],n.prototype,"units",void 0);b.__decorate([m.property({type:String,json:{write:{overridePolicy(M){return{enabled:null!=
M||0<this.start}}}}})],n.prototype,"where",void 0);b.__decorate([O.writer("where")],n.prototype,"writeWhere",null);return n=W=b.__decorate([E.subclass("esri.rest.support.Query")],n)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(l,b,B){l.enumeration=function(N,q={}){var n;N=N instanceof b.JSONMap?N:new b.JSONMap(N,q);N={type:(null!=(n=null==q?void 0:q.ignoreUnknown)?n:1)?N.apiValues:String,readOnly:null==q?void 0:q.readOnly,
json:{type:N.jsonValues,read:null!=q&&q.readOnly?!1:{reader:N.read},write:{writer:N.write}}};void 0!==(null==q?void 0:q.default)&&(N.json.default=q.default);void 0!==(null==q?void 0:q.name)&&(N.json.name=q.name);return B.property(N)};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/support/source/DataLayerSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/jsonMap ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/decorators/cast ../../../core/Logger ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/extensions/serializableProperty/reader ../Field ./MapLayerSource ./QueryTableDataSource ./RasterDataSource ./TableDataSource".split(" "),
function(l,b,B,N,q,n,g,G,m,r,C,Q,z,E,O,c,u,D,L){function A(){M||(M=E.createTypeReader({types:H()}));return M}function H(){k||(k={key:"type",base:null,typeMap:{"data-layer":l.DataLayerSource,"map-layer":c.MapLayerSource}});return k}var I,W;N=N.strict()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});l.JoinTableDataSource=I=function(t){function e(F){F=t.call(this,F)||this;F.type="join-table";return F}b._inheritsLoose(e,t);var x=e.prototype;x.readLeftTableSource=function(F,
K,h){return A()(F,K,h)};x.castLeftTableSource=function(F){return z.ensureOneOfType(H(),F)};x.readRightTableSource=function(F,K,h){return A()(F,K,h)};x.castRightTableSource=function(F){return z.ensureOneOfType(H(),F)};x.clone=function(){var F,K;const {leftTableKey:h,rightTableKey:p,leftTableSource:J,rightTableSource:U,joinType:da}=this,ja={leftTableKey:h,rightTableKey:p,leftTableSource:null!=(F=null==J?void 0:J.clone())?F:void 0,rightTableSource:null!=(K=null==U?void 0:U.clone())?K:void 0,joinType:da};
return new I(ja)};return e}(q.JSONSupport);B.__decorate([r.enumeration({joinTable:"join-table"})],l.JoinTableDataSource.prototype,"type",void 0);B.__decorate([n.property({type:String,json:{write:!0}})],l.JoinTableDataSource.prototype,"leftTableKey",void 0);B.__decorate([n.property({type:String,json:{write:!0}})],l.JoinTableDataSource.prototype,"rightTableKey",void 0);B.__decorate([n.property({json:{write:!0}})],l.JoinTableDataSource.prototype,"leftTableSource",void 0);B.__decorate([C.reader("leftTableSource")],
l.JoinTableDataSource.prototype,"readLeftTableSource",null);B.__decorate([G.cast("leftTableSource")],l.JoinTableDataSource.prototype,"castLeftTableSource",null);B.__decorate([n.property({json:{write:!0}})],l.JoinTableDataSource.prototype,"rightTableSource",void 0);B.__decorate([C.reader("rightTableSource")],l.JoinTableDataSource.prototype,"readRightTableSource",null);B.__decorate([G.cast("rightTableSource")],l.JoinTableDataSource.prototype,"castRightTableSource",null);B.__decorate([r.enumeration(N)],
l.JoinTableDataSource.prototype,"joinType",void 0);l.JoinTableDataSource=I=B.__decorate([Q.subclass("esri.layers.support.source.JoinTableDataSource")],l.JoinTableDataSource);let M=null,k=null;G={key:"type",base:null,typeMap:{"join-table":l.JoinTableDataSource,"query-table":u.QueryTableDataSource,raster:D.RasterDataSource,table:L.TableDataSource}};l.DataLayerSource=W=function(t){function e(x){x=t.call(this,x)||this;x.type="data-layer";return x}b._inheritsLoose(e,t);e.prototype.clone=function(){const {fields:x,
dataSource:F}=this;return new W({fields:x,dataSource:F})};return e}(q.JSONSupport);B.__decorate([r.enumeration({dataLayer:"data-layer"})],l.DataLayerSource.prototype,"type",void 0);B.__decorate([n.property({type:[O],json:{write:!0}})],l.DataLayerSource.prototype,"fields",void 0);B.__decorate([n.property({types:G,json:{write:!0}})],l.DataLayerSource.prototype,"dataSource",void 0);l.DataLayerSource=W=B.__decorate([Q.subclass("esri.layers.support.source.DataLayerSource")],l.DataLayerSource);l.DataLayerSource.from=
z.ensureType(l.DataLayerSource);Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/support/Field":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./domains ./fieldType".split(" "),
function(l,b,B,N,q,n,g,G,m,r,C,Q,z){var E;const O=new B.JSONMap({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});B=E=function(c){function u(L){L=c.call(this,L)||this;
L.alias=null;L.defaultValue=void 0;L.description=null;L.domain=null;L.editable=!0;L.length=-1;L.name=null;L.nullable=!0;L.type=null;L.valueType=null;return L}l._inheritsLoose(u,c);var D=u.prototype;D.readDescription=function(L,{description:A}){let H;try{H=JSON.parse(A)}catch(I){}return H?H.value:null};D.readValueType=function(L,{description:A}){let H;try{H=JSON.parse(A)}catch(I){}return H?O.fromJSON(H.fieldValueType):null};D.clone=function(){return new E({alias:this.alias,defaultValue:this.defaultValue,
description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})};return u}(N.JSONSupport);b.__decorate([q.property({type:String,json:{write:!0}})],B.prototype,"alias",void 0);b.__decorate([q.property({type:[String,Number],json:{write:{allowNull:!0}}})],B.prototype,"defaultValue",void 0);b.__decorate([q.property()],B.prototype,"description",void 0);b.__decorate([r.reader("description")],
B.prototype,"readDescription",null);b.__decorate([q.property({types:Q.types,json:{read:{reader:Q.fromJSON},write:!0}})],B.prototype,"domain",void 0);b.__decorate([q.property({type:Boolean,json:{write:!0}})],B.prototype,"editable",void 0);b.__decorate([q.property({type:g.Integer,json:{write:!0}})],B.prototype,"length",void 0);b.__decorate([q.property({type:String,json:{write:!0}})],B.prototype,"name",void 0);b.__decorate([q.property({type:Boolean,json:{write:!0}})],B.prototype,"nullable",void 0);b.__decorate([m.enumeration(z.kebabDict)],
B.prototype,"type",void 0);b.__decorate([q.property()],B.prototype,"valueType",void 0);b.__decorate([r.reader("valueType",["description"])],B.prototype,"readValueType",null);return B=E=b.__decorate([C.subclass("esri.layers.support.Field")],B)})},"esri/layers/support/domains":function(){define("exports ../../core/has ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),function(l,b,B,N,q,n){b={key:"type",base:N,typeMap:{range:n,"coded-value":B,inherited:q}};l.CodedValueDomain=B;
l.DomainBase=N;l.InheritedDomain=q;l.RangeDomain=n;l.fromJSON=function(g){if(!g||!g.type)return null;switch(g.type){case "range":return n.fromJSON(g);case "codedValue":return B.fromJSON(g);case "inherited":return q.fromJSON(g)}return null};l.types=b;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/support/CodedValueDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./CodedValue ./Domain".split(" "),
function(l,b,B,N,q,n,g,G,m,r,C){var Q;q=Q=function(z){function E(c){c=z.call(this,c)||this;c.codedValues=null;c.type="coded-value";return c}l._inheritsLoose(E,z);var O=E.prototype;O.getName=function(c){let u=null;if(this.codedValues){const D=String(c);this.codedValues.some(L=>{String(L.code)===D&&(u=L.name);return!!u})}return u};O.clone=function(){return new Q({codedValues:B.clone(this.codedValues),name:this.name})};return E}(C);b.__decorate([N.property({type:[r["default"]],json:{write:!0}})],q.prototype,
"codedValues",void 0);b.__decorate([G.enumeration({codedValue:"coded-value"})],q.prototype,"type",void 0);return q=Q=b.__decorate([m.subclass("esri.layers.support.CodedValueDomain")],q)})},"esri/layers/support/CodedValue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,b,B,N,q,n,g,G,m){var r;l.CodedValue=r=function(C){function Q(z){z=C.call(this,z)||this;z.name=null;z.code=null;return z}b._inheritsLoose(Q,C);Q.prototype.clone=function(){return new r({name:this.name,code:this.code})};return Q}(N.JSONSupport);B.__decorate([q.property({type:String,json:{write:!0}})],l.CodedValue.prototype,"name",void 0);B.__decorate([q.property({type:[String,Number],json:{write:!0}})],l.CodedValue.prototype,"code",void 0);l.CodedValue=r=B.__decorate([m.subclass("esri.layers.support.CodedValue")],
l.CodedValue);l["default"]=l.CodedValue;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/support/Domain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),function(l,b,B,N,q,n,g,G,m,r){B=
new B.JSONMap({inherited:"inherited",codedValue:"coded-value",range:"range"});N=function(C){function Q(z){z=C.call(this,z)||this;z.name=null;z.type=null;return z}l._inheritsLoose(Q,C);return Q}(N.JSONSupport);b.__decorate([q.property({type:String,json:{write:!0}})],N.prototype,"name",void 0);b.__decorate([m.enumeration(B)],N.prototype,"type",void 0);return N=b.__decorate([r.subclass("esri.layers.support.Domain")],N)})},"esri/layers/support/InheritedDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(l,b,B,N,q,n,g,G,m){var r;B=r=function(C){function Q(z){z=C.call(this,z)||this;z.type="inherited";return z}l._inheritsLoose(Q,C);Q.prototype.clone=function(){return new r};return Q}(m);b.__decorate([g.enumeration({inherited:"inherited"})],B.prototype,"type",void 0);return B=r=b.__decorate([G.subclass("esri.layers.support.InheritedDomain")],B)})},"esri/layers/support/RangeDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(l,b,B,N,q,n,g,G,m){var r;N=r=function(C){function Q(z){z=C.call(this,z)||this;z.maxValue=null;z.minValue=null;z.type="range";return z}l._inheritsLoose(Q,C);Q.prototype.clone=function(){return new r({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};return Q}(m);b.__decorate([B.property({type:Number,json:{type:[Number],read:{source:"range",reader(C,Q){return Q.range&&Q.range[1]}},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",
writer(C,Q,z){Q[z]=[this.minValue||0,C]}}}})],N.prototype,"maxValue",void 0);b.__decorate([B.property({type:Number,json:{type:[Number],read:{source:"range",reader(C,Q){return Q.range&&Q.range[0]}},write:{target:"range",writer(C,Q,z){Q[z]=[C,this.maxValue||0]}}}})],N.prototype,"minValue",void 0);b.__decorate([g.enumeration({range:"range"})],N.prototype,"type",void 0);return N=r=b.__decorate([G.subclass("esri.layers.support.RangeDomain")],N)})},"esri/layers/support/fieldType":function(){define(["exports",
"../../core/jsonMap"],function(l,b){b=new b.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});l.kebabDict=b;Object.defineProperty(l,"__esModule",
{value:!0})})},"esri/layers/support/source/MapLayerSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),function(l,b,B,N,q,n,g,G,m,r){var C;l.MapLayerSource=C=function(Q){function z(E){E=
Q.call(this,E)||this;E.type="map-layer";return E}b._inheritsLoose(z,Q);z.prototype.clone=function(){const {mapLayerId:E,gdbVersion:O}=this;return new C({mapLayerId:E,gdbVersion:O})};return z}(N.JSONSupport);B.__decorate([m.enumeration({mapLayer:"map-layer"})],l.MapLayerSource.prototype,"type",void 0);B.__decorate([q.property({type:g.Integer,json:{write:!0}})],l.MapLayerSource.prototype,"mapLayerId",void 0);B.__decorate([q.property({type:String,json:{write:!0}})],l.MapLayerSource.prototype,"gdbVersion",
void 0);l.MapLayerSource=C=B.__decorate([r.subclass("esri.layers.support.source.MapLayerSource")],l.MapLayerSource);Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/support/source/QueryTableDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ../../../geometry/SpatialReference ../../../geometry/support/typeUtils".split(" "),
function(l,b,B,N,q,n,g,G,m,r,C,Q,z){var E;l.QueryTableDataSource=E=function(O){function c(u){u=O.call(this,u)||this;u.type="query-table";return u}b._inheritsLoose(c,O);c.prototype.clone=function(){var u;const {workspaceId:D,query:L,oidFields:A,spatialReference:H,geometryType:I}=this,W={workspaceId:D,query:L,oidFields:A,spatialReference:null!=(u=null==H?void 0:H.clone())?u:void 0,geometryType:I};return new E(W)};return c}(q.JSONSupport);B.__decorate([r.enumeration({queryTable:"query-table"})],l.QueryTableDataSource.prototype,
"type",void 0);B.__decorate([n.property({type:String,json:{write:!0}})],l.QueryTableDataSource.prototype,"workspaceId",void 0);B.__decorate([n.property({type:String,json:{write:!0}})],l.QueryTableDataSource.prototype,"query",void 0);B.__decorate([n.property({type:String,json:{write:!0}})],l.QueryTableDataSource.prototype,"oidFields",void 0);B.__decorate([n.property({type:Q,json:{write:!0}})],l.QueryTableDataSource.prototype,"spatialReference",void 0);B.__decorate([r.enumeration(z.featureGeometryTypeKebabDictionary)],
l.QueryTableDataSource.prototype,"geometryType",void 0);l.QueryTableDataSource=E=B.__decorate([C.subclass("esri.layers.support.source.QueryTableDataSource")],l.QueryTableDataSource);Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/support/source/RasterDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(l,b,B,N,q,n,g,G,m,r){var C;l.RasterDataSource=C=function(Q){function z(E){E=Q.call(this,E)||this;E.type="raster";return E}b._inheritsLoose(z,Q);z.prototype.clone=function(){const {workspaceId:E,dataSourceName:O}=this;return new C({workspaceId:E,dataSourceName:O})};return z}(N.JSONSupport);B.__decorate([m.enumeration({raster:"raster"})],l.RasterDataSource.prototype,"type",void 0);B.__decorate([q.property({type:String,json:{write:!0}})],l.RasterDataSource.prototype,"dataSourceName",void 0);
B.__decorate([q.property({type:String,json:{write:!0}})],l.RasterDataSource.prototype,"workspaceId",void 0);l.RasterDataSource=C=B.__decorate([r.subclass("esri.layers.support.source.RasterDataSource")],l.RasterDataSource);Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/support/source/TableDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(l,b,B,N,q,n,g,G,m,r){var C;l.TableDataSource=C=function(Q){function z(E){E=Q.call(this,E)||this;E.type="table";return E}b._inheritsLoose(z,Q);z.prototype.clone=function(){const {workspaceId:E,gdbVersion:O,dataSourceName:c}=this;return new C({workspaceId:E,gdbVersion:O,dataSourceName:c})};return z}(N.JSONSupport);B.__decorate([m.enumeration({table:"table"})],l.TableDataSource.prototype,"type",void 0);B.__decorate([q.property({type:String,json:{write:!0}})],l.TableDataSource.prototype,"workspaceId",
void 0);B.__decorate([q.property({type:String,json:{write:!0}})],l.TableDataSource.prototype,"gdbVersion",void 0);B.__decorate([q.property({type:String,json:{write:!0}})],l.TableDataSource.prototype,"dataSourceName",void 0);l.TableDataSource=C=B.__decorate([r.subclass("esri.layers.support.source.TableDataSource")],l.TableDataSource);Object.defineProperty(l,"__esModule",{value:!0})})},"esri/rest/support/QuantizationParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../geometry/Extent".split(" "),
function(l,b,B,N,q,n,g,G,m,r,C,Q){var z;B=new N.JSONMap({upperLeft:"upper-left",lowerLeft:"lower-left"});q=z=function(E){function O(c){c=E.call(this,c)||this;c.extent=null;c.mode="view";c.originPosition="upper-left";c.tolerance=1;return c}l._inheritsLoose(O,E);O.prototype.clone=function(){return new z(n.clone({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))};return O}(q.JSONSupport);b.__decorate([g.property({type:Q,json:{write:{overridePolicy(){return{enabled:"view"===
this.mode}}}}})],q.prototype,"extent",void 0);b.__decorate([g.property({type:["view","edit"],json:{write:!0}})],q.prototype,"mode",void 0);b.__decorate([g.property({type:String,json:{read:B.read,write:B.write}})],q.prototype,"originPosition",void 0);b.__decorate([g.property({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],q.prototype,"tolerance",void 0);return q=z=b.__decorate([C.subclass("esri.rest.support.QuantizationParameters")],q)})},"esri/rest/support/StatisticDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer".split(" "),
function(l,b,B,N,q,n,g,G,m,r,C){var Q;B=new B.JSONMap({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete"});N=Q=function(z){function E(c){c=z.call(this,c)||this;c.maxPointCount=void 0;c.maxRecordCount=void 0;c.maxVertexCount=void 0;c.onStatisticField=null;c.outStatisticFieldName=null;c.statisticType=null;c.statisticParameters=null;return c}l._inheritsLoose(E,z);var O=
E.prototype;O.writeStatisticParameters=function(c,u){if("percentile-continuous"===this.statisticType||"percentile-discrete"===this.statisticType)u.statisticParameters=q.clone(c)};O.clone=function(){return new Q({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:q.clone(this.statisticParameters)})};return E}(N.JSONSupport);
b.__decorate([n.property({type:Number,json:{write:!0}})],N.prototype,"maxPointCount",void 0);b.__decorate([n.property({type:Number,json:{write:!0}})],N.prototype,"maxRecordCount",void 0);b.__decorate([n.property({type:Number,json:{write:!0}})],N.prototype,"maxVertexCount",void 0);b.__decorate([n.property({type:String,json:{write:!0}})],N.prototype,"onStatisticField",void 0);b.__decorate([n.property({type:String,json:{write:!0}})],N.prototype,"outStatisticFieldName",void 0);b.__decorate([n.property({type:String,
json:{read:{source:"statisticType",reader:B.read},write:{target:"statisticType",writer:B.write}}})],N.prototype,"statisticType",void 0);b.__decorate([n.property({type:Object})],N.prototype,"statisticParameters",void 0);b.__decorate([C.writer("statisticParameters")],N.prototype,"writeStatisticParameters",null);return N=Q=b.__decorate([r.subclass("esri.rest.support.StatisticDefinition")],N)})},"esri/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiledFetcher":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/arrayUtils ../../../../../core/AsyncSequence ../../../../../core/HandleOwner ../../../../../core/handleUtils ../../../../../core/Logger ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/has ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/subclass ../../../../../geometry/Extent ../../../../../geometry/support/aaBoundingRect ../../../../../layers/graphics/featureConversionUtils ../../../../../rest/query/operations/pbfOptimizedFeatureSet ../../../../../rest/query/operations/query ../../../../../rest/support/Query ./PendingFeatureTile".split(" "),
function(l,b,B,N,q,n,g,G,m,r,C,Q,z,E,O,c,u,D,L,A,H){const I=G.getLogger("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiledFetcher");l.FeatureServiceTiledFetcher=function(W){function M(t){t=W.call(this,t)||this;t.tilesOfInterest=[];t.availability=0;t.pendingTiles=new Map;t.pendingEdits=new q.AsyncSequence;t.pendingEditsAbortController=r.createAbortController();return t}b._inheritsLoose(M,W);var k=M.prototype;k.initialize=function(){this.initializeFetchExtent();
this.updatingHandles.add(this,"configuration",()=>this.refresh());this.updatingHandles.add(this,"tilesOfInterest",(t,e)=>{N.equals(t,e,({id:x},{id:F})=>x===F)||this.process()},1)};k.destroy=function(){this.pendingTiles.forEach(t=>this.deletePendingTile(t));this.pendingTiles.clear();this.store.destroy();this.tilesOfInterest.length=0;this.pendingEditsAbortController.abort();this.pendingEditsAbortController=null};k.refresh=function(){this.store.refresh();this.pendingTiles.forEach(t=>this.deletePendingTile(t));
this.process()};k.applyEdits=function(t){var e=this;this.pendingEdits.push(t,function(){var x=b._asyncToGenerator(function*(F){if(0!==F.addedFeatures.length||0!==F.updatedFeatures.length||0!==F.deletedFeatures.length){for(const [,K]of e.pendingTiles)K.reset();F={...F,deletedFeatures:F.deletedFeatures.map(({objectId:K,globalId:h})=>K&&-1!==K?K:e.lookupObjectIdByGlobalId(h))};yield e.updatingHandles.addPromise(e.store.processEdits(F,(K,h)=>e.queryFeaturesById(K,h),e.pendingEditsAbortController.signal));
e.processPendingTiles()}});return function(F){return x.apply(this,arguments)}}())};k.initializeFetchExtent=function(){var t=this;if(this.capabilities.query.supportsExtent){var e=r.createTask(function(){var x=b._asyncToGenerator(function*(F){try{var K;const h=yield L.executeQueryForExtent(t.url,new A({where:"1\x3d1",outSpatialReference:t.spatialReference,cacheHint:t.capabilities.query.supportsCacheHint?!0:void 0}),{query:t.configuration.customParameters,signal:F});t.store.extent=O.fromJSON(null==(K=
h.data)?void 0:K.extent)}catch(h){r.throwIfAbortError(h),I.warn("Failed to fetch data extent",h)}});return function(F){return x.apply(this,arguments)}}());this.updatingHandles.addPromise(e.promise.then(()=>this.process()));this.handles.add(g.makeHandle(()=>e.abort()))}};k.process=function(){this.markTilesNotAlive();this.createPendingTiles();this.deletePendingTiles();this.processPendingTiles()};k.markTilesNotAlive=function(){for(const [,t]of this.pendingTiles)t.alive=!1};k.createPendingTiles=function(){var t=
this.collectMissingTilesInfo();this.setAvailability(m.isNone(t)?1:t.coveredArea/t.fullArea);if(!m.isNone(t))for(const {data:e,resolution:x}of t.missingTiles)(t=this.pendingTiles.get(e.id))?(t.resolution=x,t.alive=!0):this.createPendingTile(e,x)};k.collectMissingTilesInfo=function(){let t=null;for(let e=this.tilesOfInterest.length-1;0<=e;e--){const x=this.store.process(this.tilesOfInterest[e],(F,K)=>this.verifyTileComplexity(F,K));m.isNone(t)?t=x:t.prepend(x)}return t};k.deletePendingTiles=function(){for(const [,
t]of this.pendingTiles)t.alive||this.deletePendingTile(t)};k.processPendingTiles=function(){const t={fetchCount:(e,x)=>this.fetchCount(e,x),fetchFeatures:(e,x,F)=>this.fetchFeatures(e,x,F),finish:(e,x)=>this.finishPendingTile(e,x),resume:()=>this.processPendingTiles()};if(this.ensureFetchAllCounts(t))for(const [,e]of this.pendingTiles)this.verifyTileComplexity(this.store.getFeatureCount(e.data),e.resolution)&&this.updatingHandles.addPromise(e.process(t))};k.verifyTileComplexity=function(t,e){return this.verifyVertexComplexity(t)&&
this.verifyFeatureDensity(t,e)};k.verifyVertexComplexity=function(t){return 1E6>t*this.minimumVerticesPerFeature};k.verifyFeatureDensity=function(t,e){if(m.isNone(this.tileInfo))return!1;e*=this.tileSize;return 1>25/(e*e)*t};k.ensureFetchAllCounts=function(t){let e=!0;for(const [,x]of this.pendingTiles)2>x.state.type&&this.updatingHandles.addPromise(x.process(t)),1>=x.state.type&&(e=!1);return e};k.finishPendingTile=function(t,e){this.store.add(t.data,e);this.deletePendingTile(t);this.updateAvailability()};
k.updateAvailability=function(){const t=this.collectMissingTilesInfo();this.setAvailability(m.isNone(t)?1:t.coveredArea/t.fullArea)};k.setAvailability=function(t){this._set("availability",t)};k.createPendingTile=function(t,e){e=new H.PendingFeatureTile(t,e);this.pendingTiles.set(t.id,e);return e};k.deletePendingTile=function(t){t.reset();this.pendingTiles.delete(t.data.id)};k.fetchCount=function(){var t=b._asyncToGenerator(function*(e,x){return this.store.fetchCount(e.data,this.url,this.createCountQuery(e),
{query:this.customParameters,timeout:6E5,signal:x})});return function(e,x){return t.apply(this,arguments)}}();k.fetchFeatures=function(){var t=b._asyncToGenerator(function*(e,x,F){let K=0,h,p=0,J=x;for(;;){const U=this.createFeaturesQuery(e),da=this.setPagingParameters(U,K,J),{features:ja,exceededTransferLimit:ka}=yield this.queryFeatures(U,F);da&&(K+=m.unwrap(U.num));p+=ja.length;h=h?h.concat(ja):ja;J=x-p;if(!da||!ka||0>=J)return h}});return function(e,x,F){return t.apply(this,arguments)}}();k.filterProperties=
function(t){return m.isNone(t)?{where:"1\x3d1",gdbVersion:void 0,timeExtent:void 0}:{where:t.where||"1\x3d1",timeExtent:t.timeExtent,gdbVersion:t.gdbVersion}};k.lookupObjectIdByGlobalId=function(t){const e=this.globalIdField,x=this.objectIdField;if(m.isNone(e))throw Error("Expected globalIdField to be defined");let F=null;this.store.featureStore.forEach(K=>{if(t===K.attributes[e]){var h;F=null!=(h=K.objectId)?h:K.attributes[x]}});if(m.isNone(F))throw Error(`Expected to find a feature with globalId ${t}`);
return F};k.queryFeaturesById=function(t,e){const x=this.createFeaturesQuery(null);x.objectIds=t;return this.queryFeatures(x,e)};k.queryFeatures=function(t,e){return this.capabilities.query.supportsFormatPBF?this.queryFeaturesPBF(t,e):this.queryFeaturesJSON(t,e)};k.queryFeaturesPBF=function(){var t=b._asyncToGenerator(function*(e,x){const {sourceSpatialReference:F}=this;({data:e}=yield L.executeQueryPBF(this.url,e,new D.OptimizedFeatureSetParserContext({sourceSpatialReference:F}),{query:this.configuration.customParameters,
timeout:6E5,signal:x}));return u.unquantizeOptimizedFeatureSet(e)});return function(e,x){return t.apply(this,arguments)}}();k.queryFeaturesJSON=function(){var t=b._asyncToGenerator(function*(e,x){const {sourceSpatialReference:F}=this;({data:e}=yield L.executeQuery(this.url,e,F,{query:this.configuration.customParameters,timeout:6E5,signal:x}));return u.convertFromFeatureSet(e,this.objectIdField)});return function(e,x){return t.apply(this,arguments)}}();k.createCountQuery=function(t){t=this.createBaseQuery(t);
this.capabilities.query.supportsCacheHint&&(t.cacheHint=!0);return t};k.createFeaturesQuery=function(t){const e=this.createBaseQuery(t);e.outFields=this.globalIdField?[this.globalIdField,this.objectIdField]:[this.objectIdField];e.returnGeometry=!0;m.isSome(t)&&(this.capabilities.query.supportsResultType?e.resultType="tile":this.capabilities.query.supportsCacheHint&&(e.cacheHint=!0));return e};k.createBaseQuery=function(t){t=new A({returnZ:!1,returnM:!1,geometry:m.isSome(this.tileInfo)&&m.isSome(t)?
c.toExtent(t.data.extent,this.tileInfo.spatialReference):void 0});const e=this.configuration.filter;m.isSome(e)&&(t.where=e.where,t.gdbVersion=e.gdbVersion,t.timeExtent=e.timeExtent);t.outSpatialReference=this.spatialReference;return t};k.setPagingParameters=function(t,e,x){if(!this.capabilities.query.supportsPagination)return!1;const {supportsMaxRecordCountFactor:F,supportsCacheHint:K,tileMaxRecordCount:h,maxRecordCount:p,supportsResultType:J}=this.capabilities.query,U=F?A.MAX_MAX_RECORD_COUNT_FACTOR:
1,da=U*((J||K)&&h?h:p?p:2E3);t.start=e;F?(t.maxRecordCountFactor=Math.min(U,Math.ceil(x/da)),t.num=Math.min(x,t.maxRecordCountFactor*da)):t.num=Math.min(x,da);return!0};b._createClass(M,[{key:"minimumVerticesPerFeature",get:function(){var t;switch(null==(t=this.store)?void 0:t.featureStore.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":return 1;case "esriGeometryPolygon":return 4;case "esriGeometryPolyline":return 2}}},{key:"filter",set:function(t){const e=this._get("filter");
t=this.filterProperties(t);JSON.stringify(e)!==JSON.stringify(t)&&this._set("filter",t)}},{key:"customParameters",set:function(t){const e=this._get("customParameters");JSON.stringify(e)!==JSON.stringify(t)&&this._set("customParameters",t)}},{key:"configuration",get:function(){return{filter:this.filter,customParameters:this.customParameters,tileInfo:this.tileInfo,tileSize:this.tileSize}}},{key:"tileInfo",set:function(t){const e=this._get("tileInfo");e===t||m.isSome(t)&&m.isSome(e)&&JSON.stringify(t)===
JSON.stringify(e)||(this._set("tileInfo",t),this.store.tileInfo=t)}},{key:"tileSize",set:function(t){this._get("tileSize")!==t&&this._set("tileSize",t)}},{key:"updating",get:function(){return this.updatingHandles.updating||this.pendingEdits.updating}},{key:"debugInfo",get:function(){return{numberOfFeatures:this.store.featureStore.numFeatures,tilesOfInterest:this.tilesOfInterest,pendingTiles:Array.from(this.pendingTiles.values()).map(t=>t.debugInfo),storedTiles:this.store.debugInfo}}}]);return M}(n.HandleOwner);
B.__decorate([C.property({constructOnly:!0})],l.FeatureServiceTiledFetcher.prototype,"url",void 0);B.__decorate([C.property({constructOnly:!0})],l.FeatureServiceTiledFetcher.prototype,"objectIdField",void 0);B.__decorate([C.property({constructOnly:!0})],l.FeatureServiceTiledFetcher.prototype,"globalIdField",void 0);B.__decorate([C.property({constructOnly:!0})],l.FeatureServiceTiledFetcher.prototype,"capabilities",void 0);B.__decorate([C.property({constructOnly:!0})],l.FeatureServiceTiledFetcher.prototype,
"sourceSpatialReference",void 0);B.__decorate([C.property({constructOnly:!0})],l.FeatureServiceTiledFetcher.prototype,"spatialReference",void 0);B.__decorate([C.property({constructOnly:!0})],l.FeatureServiceTiledFetcher.prototype,"store",void 0);B.__decorate([C.property({readOnly:!0})],l.FeatureServiceTiledFetcher.prototype,"minimumVerticesPerFeature",null);B.__decorate([C.property()],l.FeatureServiceTiledFetcher.prototype,"filter",null);B.__decorate([C.property()],l.FeatureServiceTiledFetcher.prototype,
"customParameters",null);B.__decorate([C.property({readOnly:!0})],l.FeatureServiceTiledFetcher.prototype,"configuration",null);B.__decorate([C.property()],l.FeatureServiceTiledFetcher.prototype,"tileInfo",null);B.__decorate([C.property()],l.FeatureServiceTiledFetcher.prototype,"tileSize",null);B.__decorate([C.property()],l.FeatureServiceTiledFetcher.prototype,"tilesOfInterest",void 0);B.__decorate([C.property({readOnly:!0})],l.FeatureServiceTiledFetcher.prototype,"updating",null);B.__decorate([C.property({readOnly:!0})],
l.FeatureServiceTiledFetcher.prototype,"availability",void 0);l.FeatureServiceTiledFetcher=B.__decorate([E.subclass("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiledFetcher")],l.FeatureServiceTiledFetcher);Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/AsyncSequence":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),
function(l,b,B,N,q,n){l.AsyncSequence=function(g){function G(){var r=g.apply(this,arguments)||this;r.updating=!1;r.pending=[];return r}b._inheritsLoose(G,g);var m=G.prototype;m.push=function(r,C){this.pending.push({promise:r,callback:C});1===this.pending.length&&this.process()};m.process=function(){if(this.pending.length){this.updating=!0;var r=this.pending[0];r.promise.then(C=>r.callback(C)).catch(()=>{}).then(()=>{this.pending.shift();this.process()})}else this.updating=!1};return G}(N);B.__decorate([q.property()],
l.AsyncSequence.prototype,"updating",void 0);l.AsyncSequence=B.__decorate([n.subclass("esri.core.AsyncSequence")],l.AsyncSequence);Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/HandleOwner":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./Handles ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass ../views/support/WatchUpdatingTracking".split(" "),function(l,b,B,N,q,n,g,G){const m=r=>{r=function(C){function Q(){return C.apply(this,
arguments)||this}b._inheritsLoose(Q,C);Q.prototype.destroy=function(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy())};b._createClass(Q,[{key:"handles",get:function(){return this._get("handles")||new q}},{key:"updatingHandles",get:function(){return this._get("updatingHandles")||new G.WatchUpdatingTracking}}]);return Q}(r);B.__decorate([n.property({readOnly:!0})],r.prototype,"handles",null);B.__decorate([n.property({readOnly:!0})],r.prototype,"updatingHandles",null);return r=
B.__decorate([g.subclass("esri.core.HandleOwner")],r)};l.HandleOwner=function(r){function C(){return r.apply(this,arguments)||this}b._inheritsLoose(C,r);return C}(m(N));l.HandleOwner=B.__decorate([g.subclass("esri.core.HandleOwner")],l.HandleOwner);l.HandleOwnerMixin=m;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/views/support/WatchUpdatingTracking":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/maybe ../../core/scheduling ../../core/watchUtils ../../core/accessorSupport/get ../../core/accessorSupport/trackingUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,b,B,N,q,n,g,G,m,r,C,Q){l.WatchUpdatingTracking=function(z){function E(){var c=z.apply(this,arguments)||this;c.updating=!1;c.handleId=0;c.handles=new q;c.scheduleHandleId=0;c.pendingPromises=new Set;return c}b._inheritsLoose(E,z);var O=E.prototype;O.destroy=function(){this.removeAll();this.handles.destroy()};O.add=function(c,u,D,L=0){const A=0!==(L&1),H=++this.handleId;A||this.installSyncUpdatingWatch(c,u,H);c=0!==(L&2)?G.init(c,u,D,A):c.watch(u,D,A);this.handles.add(c,H);return{remove:()=>
this.handles.remove(H)}};O.addOnCollectionPropertyChange=function(c,u,D,L=0){L=0!==(L&2);const A=++this.handleId;this.handles.add([G.on(c,u,"after-changes",this.createSyncUpdatingCallback()),G.on(c,u,"change",D,L?H=>{D({added:H.items,removed:[],moved:[],target:H})}:void 0)],A);return{remove:()=>{this.handles.remove(A)}}};O.addOnCollectionChange=function(c,u,D=0){D=0!==(D&2);const L=++this.handleId;this.handles.add([c.on("after-changes",this.createSyncUpdatingCallback()),c.on("change",u)],L);D&&u({added:c.items,
removed:[],moved:[],target:c});return{remove:()=>{this.handles.remove(L)}}};O.addPromise=function(c){if(n.isNone(c))return c;const u=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(c)&&(0!==this.pendingPromises.size||this.handles.has(-42)||this._set("updating",!1))}},u);this.pendingPromises.add(c);this._set("updating",!0);const D=()=>this.handles.remove(u);c.then(D,D);return c};O.removeAll=function(){this.pendingPromises.clear();this.handles.removeAll();this._set("updating",
!1)};O.installSyncUpdatingWatch=function(c,u,D){var L=this.createSyncUpdatingCallback();L=r.reaction(()=>m.valueOf(c,u),L);this.handles.add(L,D);return L};O.createSyncUpdatingCallback=function(){return()=>{this.handles.remove(-42);++this.scheduleHandleId;const c=this.scheduleHandleId;this._get("updating")||this._set("updating",!0);this.handles.add(g.schedule(()=>{c===this.scheduleHandleId&&(this._set("updating",0<this.pendingPromises.size),this.handles.remove(-42))}),-42)}};return E}(N);B.__decorate([C.property({readOnly:!0})],
l.WatchUpdatingTracking.prototype,"updating",void 0);l.WatchUpdatingTracking=B.__decorate([Q.subclass("esri.views.support.WatchUpdatingTracking")],l.WatchUpdatingTracking);Object.defineProperty(l,"__esModule",{value:!0})})},"esri/rest/query/operations/pbfOptimizedFeatureSet":function(){define("exports ../../../core/unitUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/graphics/OptimizedFeature ../../../layers/graphics/OptimizedFeatureSet ../../../layers/graphics/OptimizedGeometry".split(" "),
function(l,b,B,N,q,n){const g=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let G=function(){function m(C){this.options=C;this.geometryTypes=g;this._vertexDimension=this._coordinatePtr=0}var r=m.prototype;r.createFeatureResult=function(){return new q};r.prepareFeatures=function(C){this._vertexDimension=2;C.hasZ&&this._vertexDimension++;C.hasM&&this._vertexDimension++};r.finishFeatureResult=function(C){if(C&&C.features&&C.hasZ&&this.options.sourceSpatialReference&&
C.spatialReference&&!B.equals(C.spatialReference,this.options.sourceSpatialReference)&&!C.spatialReference.vcsWkid){var Q=b.getMetersPerVerticalUnitForSR(this.options.sourceSpatialReference),z=b.getMetersPerVerticalUnitForSR(C.spatialReference);Q/=z;if(1!==Q)for(const E of C.features)if(N.hasGeometry(E))for(C=E.geometry.coords,z=2;z<C.length;z+=3)C[z]*=Q}};r.addFeature=function(C,Q){C.features.push(Q)};r.createFeature=function(){return new N["default"]};r.createSpatialReference=function(){return{wkid:0}};
r.createGeometry=function(){return new n};r.addField=function(C,Q){C.fields.push(Q)};r.allocateCoordinates=function(C){C.coords.length=C.lengths.reduce((Q,z)=>Q+z,0)*this._vertexDimension;this._coordinatePtr=0};r.addCoordinate=function(C,Q){C.coords[this._coordinatePtr++]=Q};r.addCoordinatePoint=function(C,Q){C.coords.push(Q)};r.addLength=function(C,Q){C.lengths.push(Q)};r.addQueryGeometry=function(C,Q){C.queryGeometry=Q.queryGeometry;C.queryGeometryType=Q.queryGeometryType};r.createPointGeometry=
function(){return new n};return m}();l.OPTIMIZED_GEOMETRY_TYPES=g;l.OptimizedFeatureSetParserContext=G;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/rest/query/operations/query":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../request ../../../core/maybe ../../../core/urlUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ./pbfQueryUtils ./queryZScale ../../../tasks/operations/urlUtils".split(" "),function(l,b,B,N,q,n,g,G,m,r){function C(c,
u){const D=c.geometry;c=c.toJSON();N.isSome(D)&&(c.geometry=JSON.stringify(D),c.geometryType=n.getJsonType(D),c.inSR=D.spatialReference.wkid||JSON.stringify(D.spatialReference));c.groupByFieldsForStatistics&&(c.groupByFieldsForStatistics=c.groupByFieldsForStatistics.join(","));c.objectIds&&(c.objectIds=c.objectIds.join(","));c.orderByFields&&(c.orderByFields=c.orderByFields.join(","));!c.outFields||!c.returnDistinctValues&&(null!=u&&u.returnCountOnly||null!=u&&u.returnExtentOnly||null!=u&&u.returnIdsOnly)?
delete c.outFields:-1!==c.outFields.indexOf("*")?c.outFields="*":c.outFields=c.outFields.join(",");c.outSR?c.outSR=c.outSR.wkid||JSON.stringify(c.outSR):D&&(c.returnGeometry||c.returnCentroid)&&(c.outSR=c.inSR);c.returnGeometry&&delete c.returnGeometry;c.outStatistics&&(c.outStatistics=JSON.stringify(c.outStatistics));c.pixelSize&&(c.pixelSize=JSON.stringify(c.pixelSize));c.quantizationParameters&&(c.quantizationParameters=JSON.stringify(c.quantizationParameters));c.parameterValues&&(c.parameterValues=
JSON.stringify(c.parameterValues));c.rangeValues&&(c.rangeValues=JSON.stringify(c.rangeValues));c.dynamicDataSource&&(c.layer=JSON.stringify({source:c.dynamicDataSource}),delete c.dynamicDataSource);if(c.timeExtent){const {start:L,end:A}=c.timeExtent;if(null!=L||null!=A)c.time=L===A?L:`${null==L?"null":L},${null==A?"null":A}`;delete c.timeExtent}return c}function Q(){Q=b._asyncToGenerator(function*(c,u,D,L){c=N.isSome(u.timeExtent)&&u.timeExtent.isEmpty?{data:{features:[]}}:yield O(c,u,"json",L);
m.applyFeatureSetZUnitScaling(u,D,c.data);return c});return Q.apply(this,arguments)}function z(){z=b._asyncToGenerator(function*(c,u,D,L){if(N.isSome(u.timeExtent)&&u.timeExtent.isEmpty)return Promise.resolve({data:D.createFeatureResult()});c=yield E(c,u,L);c.data=G.parsePBFFeatureQuery(c.data,D);return c});return z.apply(this,arguments)}function E(c,u,D){return O(c,u,"pbf",D)}function O(c,u,D,L={},A={}){const H="string"===typeof c?q.urlToObject(c):c;c=u.geometry?[u.geometry]:[];L.responseType="pbf"===
D?"array-buffer":"json";return g.normalizeCentralMeridian(c,null,L).then(I=>{I=I&&I[0];N.isSome(I)&&(u=u.clone(),u.geometry=I);I=r.mapParameters({...H.query,f:D,...A,...C(u,A)});return B(q.join(H.path,"query"),{...L,query:{...I,...L.query}})})}l.executeQuery=function(c,u,D,L){return Q.apply(this,arguments)};l.executeQueryForCount=function(c,u,D){return N.isSome(u.timeExtent)&&u.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):O(c,u,"json",D,{returnIdsOnly:!0,returnCountOnly:!0})};l.executeQueryForExtent=
function(c,u,D){return N.isSome(u.timeExtent)&&u.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):O(c,u,"json",D,{returnExtentOnly:!0,returnCountOnly:!0}).then(L=>{const A=L.data;if(A.hasOwnProperty("extent"))return L;if(A.features)throw Error("Layer does not support extent calculation.");if(A.hasOwnProperty("count"))throw Error("Layer does not support extent calculation.");return L})};l.executeQueryForIds=function(c,u,D){return N.isSome(u.timeExtent)&&u.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):
O(c,u,"json",D,{returnIdsOnly:!0})};l.executeQueryPBF=function(c,u,D,L){return z.apply(this,arguments)};l.executeQueryPBFBuffer=E;l.queryToQueryStringParameters=C;l.runQuery=O;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/rest/query/operations/pbfQueryUtils":function(){define(["exports","./pbfFeatureServiceParser"],function(l,b){l.parsePBFFeatureQuery=function(B,N){var q=b.parseFeatureQuery(B,N);B=q.queryResult.featureResult;N=q.queryResult.queryGeometry;q=q.queryResult.queryGeometryType;
if(B&&B.features&&B.features.length&&B.objectIdFieldName){const n=B.objectIdFieldName;for(const g of B.features)g.attributes&&(g.objectId=g.attributes[n])}B&&(B.queryGeometry=N,B.queryGeometryType=q);return B};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/rest/query/operations/pbfFeatureServiceParser":function(){define("exports ../../../core/Error ../../../core/maybe ../../../core/pbf ../../../layers/graphics/OptimizedGeometry ./pbfOptimizedFeatureSet".split(" "),function(l,b,B,N,q,n){function g(k){return k>=
I.length?null:I[k]}function G(k,t,e){for(e=t.createPointGeometry(e);k.next();)switch(k.tag()){case 3:{var x=k.getUInt32();x=k.pos()+x;let F=0;for(;k.pos()<x;)t.addCoordinatePoint(e,k.getSInt64(),F++);break}default:k.skip()}return e}function m(k,t,e){const x=t.createGeometry(e);for(e=2+(e.hasZ?1:0)+(e.hasM?1:0);k.next();)switch(k.tag()){case 2:var F=k.getUInt32();F=k.pos()+F;for(var K=0;k.pos()<F;)t.addLength(x,k.getUInt32(),K++);break;case 3:F=k.getUInt32();F=k.pos()+F;K=0;for(t.allocateCoordinates(x);k.pos()<
F;)t.addCoordinate(x,k.getSInt64(),K),K++,K===e&&(K=0);break;default:k.skip()}return x}function r(k){const t=new q;let e="esriGeometryPoint";for(;k.next();)switch(k.tag()){case 2:var x=k.getUInt32();for(x=k.pos()+x;k.pos()<x;)t.lengths.push(k.getUInt32());break;case 3:x=k.getUInt32();for(x=k.pos()+x;k.pos()<x;)t.coords.push(k.getSInt64());break;case 1:e=n.OPTIMIZED_GEOMETRY_TYPES[k.getEnum()];break;default:k.skip()}return{queryGeometry:t,queryGeometryType:e}}function C(k){for(;k.next();)switch(k.tag()){case 1:return k.getString();
case 2:return k.getFloat();case 3:return k.getDouble();case 4:return k.getSInt32();case 5:return k.getUInt32();case 6:return k.getInt64();case 7:return k.getUInt64();case 8:return k.getSInt64();case 9:return k.getBool();default:return k.skip(),null}return null}function Q(k){const t={type:g(0)};for(;k.next();)switch(k.tag()){case 1:t.name=k.getString();break;case 2:t.type=g(k.getEnum());break;case 3:t.alias=k.getString();break;case 4:var e=k.getEnum();e=e>=W.length?null:W[e];t.sqlType=e;break;case 5:k.skip();
break;case 6:t.defaultValue=k.getString();break;default:k.skip()}return t}function z(k){const t={};for(;k.next();)switch(k.tag()){case 1:t.name=k.getString();break;case 2:t.isSystemMaintained=k.getBool();break;default:k.skip()}return t}function E(k,t,e,x){const F=t.createFeature(e);let K=0;for(;k.next();)switch(k.tag()){case 1:{const h=x[K++].name;F.attributes[h]=k.processMessage(C);break}case 2:F.geometry=k.processMessageWithArgs(m,t,e);break;case 4:F.centroid=k.processMessageWithArgs(G,t,e);break;
default:k.skip()}return F}function O(k){const t=[1,1,1,1];for(;k.next();)switch(k.tag()){case 1:t[0]=k.getDouble();break;case 2:t[1]=k.getDouble();break;case 4:t[2]=k.getDouble();break;case 3:t[3]=k.getDouble();break;default:k.skip()}return t}function c(k){const t=[0,0,0,0];for(;k.next();)switch(k.tag()){case 1:t[0]=k.getDouble();break;case 2:t[1]=k.getDouble();break;case 4:t[2]=k.getDouble();break;case 3:t[3]=k.getDouble();break;default:k.skip()}return t}function u(k){const t={originPosition:0>=
M.length?null:M[0]};for(;k.next();)switch(k.tag()){case 1:var e=k.getEnum();t.originPosition=e>=M.length?null:M[e];break;case 2:t.scale=k.processMessage(O);break;case 3:t.translate=k.processMessage(c);break;default:k.skip()}return t}function D(k){const t={};for(;k.next();)switch(k.tag()){case 1:t.shapeAreaFieldName=k.getString();break;case 2:t.shapeLengthFieldName=k.getString();break;case 3:t.units=k.getString();break;default:k.skip()}return t}function L(k,t){for(t=t.createSpatialReference();k.next();)switch(k.tag()){case 1:t.wkid=
k.getUInt32();break;case 5:t.wkt=k.getString();break;case 2:t.latestWkid=k.getUInt32();break;case 3:t.vcsWkid=k.getUInt32();break;case 4:t.latestVcsWkid=k.getUInt32();break;default:k.skip()}return t}function A(k,t){const e=t.createFeatureResult();e.geometryType=0>=t.geometryTypes.length?null:t.geometryTypes[0];let x=!1;for(;k.next();)switch(k.tag()){case 1:e.objectIdFieldName=k.getString();break;case 3:e.globalIdFieldName=k.getString();break;case 4:e.geohashFieldName=k.getString();break;case 5:e.geometryProperties=
k.processMessage(D);break;case 7:var F=k.getEnum();e.geometryType=F>=t.geometryTypes.length?null:t.geometryTypes[F];break;case 8:e.spatialReference=k.processMessageWithArgs(L,t);break;case 10:e.hasZ=k.getBool();break;case 11:e.hasM=k.getBool();break;case 12:e.transform=k.processMessage(u);break;case 9:F=k.getBool();e.exceededTransferLimit=F;break;case 13:t.addField(e,k.processMessage(Q));break;case 15:x||(t.prepareFeatures(e),x=!0);t.addFeature(e,k.processMessageWithArgs(E,t,e,e.fields));break;case 2:e.uniqueIdField=
k.processMessage(z);break;default:k.skip()}t.finishFeatureResult(e);return e}function H(k,t){const e={};let x=null;for(;k.next();)switch(k.tag()){case 4:x=k.processMessageWithArgs(r);break;case 1:e.featureResult=k.processMessageWithArgs(A,t);break;default:k.skip()}B.isSome(x)&&e.featureResult&&t.addQueryGeometry(e,x);return e}const I="esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate esriFieldTypeOID esriFieldTypeGeometry esriFieldTypeBlob esriFieldTypeRaster esriFieldTypeGUID esriFieldTypeGlobalID esriFieldTypeXML".split(" "),
W="sqlTypeBigInt sqlTypeBinary sqlTypeBit sqlTypeChar sqlTypeDate sqlTypeDecimal sqlTypeDouble sqlTypeFloat sqlTypeGeometry sqlTypeGUID sqlTypeInteger sqlTypeLongNVarchar sqlTypeLongVarbinary sqlTypeLongVarchar sqlTypeNChar sqlTypeNVarchar sqlTypeOther sqlTypeReal sqlTypeSmallInt sqlTypeSqlXml sqlTypeTime sqlTypeTimestamp sqlTypeTimestamp2 sqlTypeTinyInt sqlTypeVarbinary sqlTypeVarchar".split(" "),M=["upperLeft","lowerLeft"];l.parseFeatureQuery=function(k,t){try{const e=new N(new Uint8Array(k),new DataView(k));
for(k={};e.next();)switch(e.tag()){case 2:k.queryResult=e.processMessageWithArgs(H,t);break;default:e.skip()}return k}catch(e){throw new b("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:e});}};l.parseFieldType=g;l.parseTransform=u;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/rest/query/operations/queryZScale":function(){define(["exports","./zscale"],function(l,b){l.applyFeatureSetZUnitScaling=function(B,N,q){if(q&&q.features&&q.hasZ&&(B=b.getGeometryZScaler(q.geometryType,
N,B.outSpatialReference)))for(const n of q.features)B(n.geometry)};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/rest/query/operations/zscale":function(){define(["exports","../../../core/maybe","../../../core/unitUtils","../../../geometry/support/spatialReferenceUtils"],function(l,b,B,N){function q(g,G,m){if(null==g.hasM||g.hasZ)for(const r of G)for(const C of r)2<C.length&&(C[2]*=m)}function n(g,G,m){if(g)for(const Q of g){g=Q.geometry;var r=G,C=m;if(!b.isNone(g)&&g.spatialReference&&
!N.equals(g.spatialReference,r)&&(r=B.getMetersPerVerticalUnitForSR(g.spatialReference)/C,1!==r))if("x"in g)null!=g.z&&(g.z*=r);else if("rings"in g)q(g,g.rings,r);else if("paths"in g)q(g,g.paths,r);else if("points"in g&&(null==g.hasM||g.hasZ))for(const z of g.points)2<z.length&&(z[2]*=r)}}l.getGeometryZScaler=function(g,G,m){if(b.isNone(G)||b.isNone(m)||m.vcsWkid||N.equals(G,m))return null;G=B.getMetersPerVerticalUnitForSR(G);m=B.getMetersPerVerticalUnitForSR(m);const r=G/m;if(1===r)return null;switch(g){case "point":case "esriGeometryPoint":return C=>
{C&&null!=C.z&&(C.z*=r)};case "polyline":case "esriGeometryPolyline":return C=>{if(C)for(const Q of C.paths)for(const z of Q)2<z.length&&(z[2]*=r)};case "polygon":case "esriGeometryPolygon":return C=>{if(C)for(const Q of C.rings)for(const z of Q)2<z.length&&(z[2]*=r)};case "multipoint":case "esriGeometryMultipoint":return C=>{if(C)for(const Q of C.points)2<Q.length&&(Q[2]*=r)};default:return null}};l.unapplyEditsZUnitScaling=function(g,G,m){if((g||G)&&m){var r=B.getMetersPerVerticalUnitForSR(m);n(g,
m,r);n(G,m,r)}};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/tasks/operations/urlUtils":function(){define(["exports"],function(l){function b(B){const N={};for(const q in B){if("declaredClass"===q)continue;const n=B[q];if(null!=n&&"function"!==typeof n)if(Array.isArray(n)){N[q]=[];for(let g=0;g<n.length;g++)N[q][g]=b(n[g])}else"object"===typeof n?n.toJSON&&(N[q]=JSON.stringify(n)):N[q]=n}return N}l.mapParameters=b;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/views/interactive/snapping/featureSources/featureServiceSource/PendingFeatureTile":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/asyncUtils ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../geometry/support/aaBoundingRect".split(" "),
function(l,b,B,N,q,n){let g=function(){function m(C,Q){this.data=C;this.resolution=Q;this.state={type:0};this.alive=!0}var r=m.prototype;r.process=function(C){switch(this.state.type){case 0:return this.state=this.gotoFetchCount(this.state,C),this.state.task.promise.then(C.resume,C.resume);case 2:return this.state=this.gotoFetchFeatures(this.state,C),this.state.task.promise.then(C.resume,C.resume);case 4:this.state=this.goToDone(this.state,C)}return null};r.gotoFetchCount=function(C,Q){var z=this;
return{type:1,previous:C,task:q.createTask(function(){var E=b._asyncToGenerator(function*(O){O=yield B.resultOrAbort(Q.fetchCount(z,O));1===z.state.type&&(z.state=z.gotoFetchedCount(z.state,O.ok?O.value:Infinity))});return function(O){return E.apply(this,arguments)}}())}};r.gotoFetchedCount=function(C,Q){return{type:2,featureCount:Q,previous:C}};r.gotoFetchFeatures=function(C,Q){var z=this;return{type:3,previous:C,task:q.createTask(function(){var E=b._asyncToGenerator(function*(O){O=yield B.resultOrAbort(Q.fetchFeatures(z,
C.featureCount,O));3===z.state.type&&(z.state=z.gotoFetchedFeatures(z.state,O.ok?O.value:[]))});return function(O){return E.apply(this,arguments)}}())}};r.gotoFetchedFeatures=function(C,Q){return{type:4,previous:C,features:Q}};r.goToDone=function(C,Q){Q.finish(this,C.features);return{type:5,previous:C}};r.reset=function(){const C=this.state;this.state={type:0};switch(C.type){case 1:case 3:C.task.abort()}};r.intersects=function(C){if(N.isNone(C)||!this.data.extent)return!0;n.fromExtent(C,G);return n.intersects(this.data.extent,
G)};b._createClass(m,[{key:"debugInfo",get:function(){return{data:this.data,featureCount:this.featureCount,state:this.stateToString}}},{key:"featureCount",get:function(){switch(this.state.type){case 0:case 1:return 0;case 2:return this.state.featureCount;case 3:return this.state.previous.featureCount;case 4:return this.state.features.length;case 5:return this.state.previous.features.length}}},{key:"stateToString",get:function(){switch(this.state.type){case 0:return"created";case 1:return"fetch-count";
case 2:return"fetched-count";case 3:return"fetch-features";case 4:return"fetched-features";case 5:return"done"}}}]);return m}();const G=n.create();l.PendingFeatureTile=g;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/asyncUtils":function(){define(["exports","./maybe","./promiseUtils"],function(l,b,B){l.assertResult=function(N){if(!0===N.ok)return N.value;throw N.error;};l.forEach=function(N,q,n){return B.eachAlways(N.map((g,G)=>q.apply(n,[g,G])))};l.map=function(N,q,n){return B.eachAlways(N.map((g,
G)=>q.apply(n,[g,G]))).then(g=>g.map(G=>G.value))};l.result=function(N){return b.isNone(N)?B.resolve():N.then(q=>({ok:!0,value:q})).catch(q=>({ok:!1,error:q}))};l.resultOrAbort=function(N){return N.then(q=>({ok:!0,value:q})).catch(q=>{B.throwIfAbortError(q);return{ok:!1,error:q}})};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileStore":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Accessor ../../../../../core/byteSizeEstimations ../../../../../core/maybe ../../../../../core/accessorSupport/decorators/property ../../../../../core/has ../../../../../core/accessorSupport/ensureType ../../../../../core/Logger ../../../../../core/accessorSupport/decorators/subclass ../../../../../geometry/support/aaBoundingRect ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/data/BoundsStore ../../../../../rest/query/operations/query ./FeatureServiceTileCache".split(" "),
function(l,b,B,N,q,n,g,G,m,r,C,Q,z,E,O,c){function u(I){return I.reduce((W,M)=>{var k=M.geometry;if(n.isNone(k))k=0;else{var t=q.estimateFixedArraySize(k.lengths,4);k=32+q.estimateFixedArraySize(k.coords,8)+t}M=32+k+q.estimateAttributesObjectSize(M.attributes);return W+M},0)}l.FeatureServiceTileStore=function(I){function W(k){k=I.call(this,k)||this;k.tileInfo=null;k.extent=null;k.maximumByteSize=10485760;k.tileBounds=new E.BoundsStore;k.tiles=new c.FeatureServiceTileCache;k.refCounts=new Map;k.tileFeatureCounts=
new Map;k.tmpBoundingRect=Q.create();return k}b._inheritsLoose(W,I);var M=W.prototype;M.add=function(k,t){const e=[];for(const x of t)0===this.referenceFeature(x.objectId)&&e.push(x);this.addTileStorage(k,new Set(t.map(({objectId:x})=>x)),u(t));this.featureStore.addMany(e);this.tiles.applyByteSizeLimit(this.maximumByteSize,x=>this.removeTileStorage(x))};M.destroy=function(){this.clear();this.tileFeatureCounts.clear()};M.clear=function(){this.featureStore.clear();this.tileBounds.clear();this.tiles.clear();
this.refCounts.clear()};M.refresh=function(){this.clear();this.tileFeatureCounts.clear()};M.processEdits=function(k,t,e){this.processEditsDelete(k.deletedFeatures.concat(k.updatedFeatures));return this.processEditsRefetch(k.addedFeatures.concat(k.updatedFeatures),t,e)};M.addTileStorage=function(k,t,e){this.tiles.set(k.id,new D(k,t,e));this.tileBounds.set(k.id,k.extent);this.tileFeatureCounts.set(k.id,t.size)};M.remove=function({id:k}){(k=this.tiles.get(k))&&this.removeTileStorage(k)};M.removeTileStorage=
function(k){const t=[];for(const e of k.objectIds)1===this.unreferenceFeature(e)&&t.push(e);this.featureStore.removeManyById(t);k=k.data.id;this.tiles.delete(k);this.tileBounds.delete(k)};M.processEditsDelete=function(k){this.featureStore.removeManyById(k);for(const [,t]of this.tiles){for(const e of k)t.objectIds.delete(e);this.tileFeatureCounts.set(t.data.id,t.objectIds.size)}for(const t of k)this.refCounts.delete(t)};M.processEditsRefetch=function(){var k=b._asyncToGenerator(function*(t,e,x){t=
(yield e(t,x)).features;const {hasZ:F,hasM:K}=this.featureStore;for(const h of t)t=z.getBoundsOptimizedGeometry(this.tmpBoundingRect,h.geometry,F,K),n.isNone(t)||this.tileBounds.forEachInBounds(t,p=>{p=this.tiles.get(p);this.featureStore.add(h);p.objectIds.has(h.objectId)||(p.objectIds.add(h.objectId),this.referenceFeature(h.objectId),this.tileFeatureCounts.set(p.data.id,p.objectIds.size))})});return function(t,e,x){return k.apply(this,arguments)}}();M.process=function(k,t=()=>!0){if(n.isNone(this.tileInfo)||
!k.extent||n.isSome(this.extent)&&!Q.intersects(Q.fromExtent(this.extent,this.tmpBoundingRect),k.extent)||this.tiles.has(k.id))return new A(k);const e=this.createTileTree(k,this.tileInfo);this.simplify(e,t,null,0,1);return this.collectMissingTiles(k,e,this.tileInfo)};M.getFeatureCount=function(k){k=this.tileFeatureCounts.get(k.id);return null!=k?k:0};M.fetchCount=function(){var k=b._asyncToGenerator(function*(t,e,x,F){const K=this.tileFeatureCounts.get(t.id);if(null!=K)return K;e=yield O.executeQueryForCount(e,
x,F);this.tileFeatureCounts.set(t.id,e.data.count);return e.data.count});return function(t,e,x,F){return k.apply(this,arguments)}}();M.createTileTree=function(k,t){const e=new L(k.level,k.row,k.col);t.updateTileInfo(e,1);this.tileBounds.forEachInBounds(k.extent,x=>{x=this.tiles.get(x).data;this.tilesAreRelated(k,x)&&this.populateChildren(e,x,t,this.tileFeatureCounts.get(x.id)||0)});return e};M.tilesAreRelated=function(k,t){if(!k||!t)return!1;if(k.level===t.level)return k.row===t.row&&k.col===t.col;
const e=k.level<t.level,x=e?k:t;k=e?t:k;t=1<<k.level-x.level;return Math.floor(k.row/t)===x.row&&Math.floor(k.col/t)===x.col};M.populateChildren=function(k,t,e,x){var F=t.level-k.level-1;if(0>F)k.isLeaf=!0;else{var K=t.row>>F,h=t.col>>F;F=(K-(k.row<<1)<<1)+(h-(k.col<<1));var p=k.children[F];n.isSome(p)?this.populateChildren(p,t,e,x):(K=new L(k.level+1,K,h),e.updateTileInfo(K,1),k.children[F]=K,this.populateChildren(K,t,e,x))}};M.simplify=function(k,t,e,x,F){const K=F*F;if(k.isLeaf)return t(this.getFeatureCount(k),
F)?0:(this.remove(k),n.isSome(e)&&(e.children[x]=null),K);F/=2;const h=F*F;let p=0;for(let J=0;J<k.children.length;J++){const U=k.children[J];p+=n.isSome(U)?this.simplify(U,t,k,J,F):h}0===p?this.mergeChildren(k):.18751>1-p/K&&(this.purge(k),n.isSome(e)&&(e.children[x]=null),p=K);return p};M.mergeChildren=function(k){const t=new Set;let e=0;this.forEachLeaf(k,x=>{const F=this.tiles.get(x.id);if(F){e+=F.byteSize;for(const K of F.objectIds)t.has(K)||(t.add(K),this.referenceFeature(K));this.remove(x)}});
this.addTileStorage(k,t,e);k.isLeaf=!0;k.children[0]=k.children[1]=k.children[2]=k.children[3]=null;this.tileFeatureCounts.set(k.id,t.size)};M.forEachLeaf=function(k,t){for(const e of k.children)n.isNone(e)||(e.isLeaf?t(e):this.forEachLeaf(e,t))};M.purge=function(k){if(!n.isNone(k))if(k.isLeaf)this.remove(k);else for(let t=0;t<k.children.length;t++)this.purge(k.children[t]),k.children[t]=null};M.collectMissingTiles=function(k,t,e){k=new H(e,k,this.extent);this.collectMissingTilesRecurse(t,k,1);return k.info};
M.collectMissingTilesRecurse=function(k,t,e){if(!k.isLeaf)if(k.hasChildren){e/=2;for(let x=0;x<k.children.length;x++){const F=k.children[x];n.isNone(F)?t.addMissing(k.level+1,(k.row<<1)+((x&2)>>1),(k.col<<1)+(x&1),e):this.collectMissingTilesRecurse(F,t,e)}}else t.addMissing(k.level,k.row,k.col,e)};M.referenceFeature=function(k){const t=(this.refCounts.get(k)||0)+1;this.refCounts.set(k,t);return 1===t?0:2};M.unreferenceFeature=function(k){const t=(this.refCounts.get(k)||0)-1;if(0===t)return this.refCounts.delete(k),
1;0<t&&this.refCounts.set(k,t);return 2};b._createClass(W,[{key:"debugInfo",get:function(){return Array.from(this.tiles.values()).map(({data:k})=>({data:k,featureCount:this.tileFeatureCounts.get(k.id)||0}))}},{key:"test",get:function(){return{tiles:Array.from(this.tiles.values()).map(k=>`${k.data.id}:[${Array.from(k.objectIds)}]`),featureReferences:Array.from(this.refCounts.keys()).map(k=>`${k}:${this.refCounts.get(k)}`)}}}]);return W}(N);B.__decorate([g.property({constructOnly:!0})],l.FeatureServiceTileStore.prototype,
"featureStore",void 0);B.__decorate([g.property()],l.FeatureServiceTileStore.prototype,"tileInfo",void 0);B.__decorate([g.property()],l.FeatureServiceTileStore.prototype,"extent",void 0);B.__decorate([g.property()],l.FeatureServiceTileStore.prototype,"maximumByteSize",void 0);l.FeatureServiceTileStore=B.__decorate([C.subclass("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTileStore")],l.FeatureServiceTileStore);let D=function(I,W,M){this.data=I;this.objectIds=W;
this.byteSize=M},L=function(){function I(W,M,k){this.level=W;this.row=M;this.col=k;this.isLeaf=!1;this.extent=null;this.children=[null,null,null,null]}b._createClass(I,[{key:"hasChildren",get:function(){return!this.isLeaf&&(n.isSome(this.children[0])||n.isSome(this.children[1])||n.isSome(this.children[2])||n.isSome(this.children[3]))}}]);return I}(),A=function(){function I(W,M=[]){this.missingTiles=M;this.coveredArea=this.fullArea=0;this.coveredArea=this.fullArea=Q.area(W.extent)}I.prototype.prepend=
function(W){this.missingTiles=W.missingTiles.concat(this.missingTiles);this.coveredArea+=W.coveredArea;this.fullArea+=W.fullArea};return I}(),H=function(){function I(W,M,k){this.tileInfo=W;this.extent=null;this.info=new A(M);n.isSome(k)&&(this.extent=Q.fromExtent(k))}I.prototype.addMissing=function(W,M,k,t){W={id:null,level:W,row:M,col:k};this.tileInfo.updateTileInfo(W,1);!n.isSome(W.extent)||n.isSome(this.extent)&&!Q.intersects(this.extent,W.extent)||(this.info.missingTiles.push({data:W,resolution:t}),
this.info.coveredArea-=Q.area(W.extent))};return I}();l.ProcessResult=A;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/byteSizeEstimations":function(){define(["exports"],function(l){function b(B){return 32+B.length}l.estimateAttributesObjectSize=function(B){if(!B)return 0;let N=32;for(const q in B)if(B.hasOwnProperty(q)){const n=B[q];switch(typeof n){case "string":N+=b(n);break;case "number":N+=16;break;case "boolean":N+=4}}return N};l.estimateFixedArraySize=function(B,N){return 32+
B.length*N};l.estimateNumberByteSize=function(){return 16};l.estimateStringByteSize=b;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileCache":function(){define(["exports"],function(l){let b=function(B){function N(){this._store=new Map;this._byteSize=0}var q=N.prototype;q.set=function(n,g){this.delete(n);this._store.set(n,g);this._byteSize+=g.byteSize};q.delete=function(n){const g=this._store.get(n);return this._store.delete(n)?
(this._byteSize-=g.byteSize,!0):!1};q.get=function(n){this.used(n);return this._store.get(n)};q.has=function(n){this.used(n);return this._store.has(n)};q.clear=function(){this._store.clear()};q.applyByteSizeLimit=function(n,g){for(const [G,m]of this._store){if(this._byteSize<=n)break;this.delete(G);g(m)}};q.values=function(){return this._store.values()};q[B]=function(){return this._store[Symbol.iterator]()};q.used=function(n){const g=this._store.get(n);g&&(this._store.delete(n),this._store.set(n,
g))};return N}(Symbol.iterator);l.FeatureServiceTileCache=b;Object.defineProperty(l,"__esModule",{value:!0})})},"*noref":1}});
define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Evented ../../../../../core/Handles ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/watchUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/has ../../../../../core/accessorSupport/ensureType ../../../../../core/Logger ../../../../../core/accessorSupport/decorators/subclass ../../../../../geometry/SpatialReference ../../../../../layers/graphics/data/FeatureStore ../../../../../layers/graphics/data/QueryEngine ../../../../../layers/support/TileInfo ../../../../../layers/support/TimeInfo ../../../../../rest/support/Query ./FeatureServiceTiledFetcher ./FeatureServiceTileStore ../../../../support/WatchUpdatingTracking".split(" "),function(l,
b,B,N,q,n,g,G,m,r,C,Q,z,E,O,c,u,D,L,A,H,I){l.FeatureServiceSnappingSourceWorker=function(W){function M(){var t=W.apply(this,arguments)||this;t.isInitializing=!0;t.whenSetup=g.createDeferred();t.handles=new q;t.updatingHandles=new I.WatchUpdatingTracking;t.pendingApplyEdits=new Map;return t}b._inheritsLoose(M,W);var k=M.prototype;k.destroy=function(){this.featureFetcher.destroy();this.queryEngine.destroy();this.featureStore.clear();this.handles.destroy()};k.setup=function(){var t=b._asyncToGenerator(function*(e){const {geometryType:x,
objectIdField:F,timeInfo:K,fields:h}=e.serviceInfo;this.featureStore=new O({...e.serviceInfo,hasZ:!1,hasM:!1});this.queryEngine=new c["default"]({spatialReference:e.spatialReference,featureStore:this.featureStore,geometryType:x,fields:h,hasZ:!1,hasM:!1,objectIdField:F,timeInfo:K?D.fromJSON(K):null});this.featureFetcher=new A.FeatureServiceTiledFetcher({store:new H.FeatureServiceTileStore({featureStore:this.featureStore}),url:e.serviceInfo.url,objectIdField:e.serviceInfo.objectIdField,globalIdField:e.serviceInfo.globalIdField,
capabilities:e.serviceInfo.capabilities,spatialReference:E.fromJSON(e.spatialReference),sourceSpatialReference:E.fromJSON(e.serviceInfo.spatialReference)});this.handles.add([this.featureFetcher.watch("availability",p=>this.emit("notify-availability",{availability:p}),!0),this.watch("updating",()=>this.notifyUpdating())]);this.whenSetup.resolve();this.isInitializing=!1;return this.configure(e.configuration)});return function(e){return t.apply(this,arguments)}}();k.configure=function(){var t=b._asyncToGenerator(function*(e){yield this.updatingHandles.addPromise(this.whenSetup.promise);
this.updateFeatureFetcherConfiguration(e);return{result:{}}});return function(e){return t.apply(this,arguments)}}();k.fetchCandidates=function(){var t=b._asyncToGenerator(function*(e,x){yield this.whenSetup.promise;g.throwIfAborted(x);return{result:yield this.queryEngine.executeQueryForSnapping({point:e.point,distance:e.distance,types:e.types,query:n.isSome(e.filter)?e.filter:{where:"1\x3d1"}},n.isSome(x)?x.signal:null)}});return function(e,x){return t.apply(this,arguments)}}();k.updateTiles=function(){var t=
b._asyncToGenerator(function*(e,x){yield this.updatingHandles.addPromise(this.whenSetup.promise);g.throwIfAborted(x);this.featureFetcher.tileSize=e.tileSize;this.featureFetcher.tilesOfInterest=e.tiles;this.featureFetcher.tileInfo=n.isSome(e.tileInfo)?u.fromJSON(e.tileInfo):null;return{result:{}}});return function(e,x){return t.apply(this,arguments)}}();k.refresh=function(){var t=b._asyncToGenerator(function*(e,x){yield this.updatingHandles.addPromise(this.whenSetup.promise);g.throwIfAborted(x);this.featureFetcher.refresh();
return{result:{}}});return function(e,x){return t.apply(this,arguments)}}();k.whenNotUpdating=function(){var t=b._asyncToGenerator(function*(e,x){yield this.updatingHandles.addPromise(this.whenSetup.promise);g.throwIfAborted(x);yield g.whenOrAbort(G.whenNotOnce(this,"updating"),x);return{result:{}}});return function(e,x){return t.apply(this,arguments)}}();k.getDebugInfo=function(){var t=b._asyncToGenerator(function*(e,x){g.throwIfAborted(x);return{result:this.featureFetcher.debugInfo}});return function(e,
x){return t.apply(this,arguments)}}();k.beginApplyEdits=function(){var t=b._asyncToGenerator(function*(e,x){this.updatingHandles.addPromise(this.whenSetup.promise);g.throwIfAborted(x);x=g.createDeferred();this.pendingApplyEdits.set(e.id,x);this.featureFetcher.applyEdits(x.promise);this.updatingHandles.addPromise(x.promise);return{result:{}}});return function(e,x){return t.apply(this,arguments)}}();k.endApplyEdits=function(){var t=b._asyncToGenerator(function*(e,x){const F=this.pendingApplyEdits.get(e.id);
F&&F.resolve(e.edits);g.throwIfAborted(x);return{result:{}}});return function(e,x){return t.apply(this,arguments)}}();k.updateFeatureFetcherConfiguration=function(t){this.featureFetcher.filter=n.isSome(t.filter)?L.fromJSON(t.filter):null;this.featureFetcher.customParameters=t.customParameters};k.notifyUpdating=function(){this.emit("notify-updating",{updating:this.updating})};b._createClass(M,[{key:"updating",get:function(){return this.featureFetcher.updating||this.isInitializing||this.updatingHandles.updating}}]);
return M}(N.EventedAccessor);B.__decorate([m.property({readOnly:!0})],l.FeatureServiceSnappingSourceWorker.prototype,"updating",null);B.__decorate([m.property()],l.FeatureServiceSnappingSourceWorker.prototype,"isInitializing",void 0);l.FeatureServiceSnappingSourceWorker=B.__decorate([z.subclass("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceSnappingSourceWorker")],l.FeatureServiceSnappingSourceWorker);l["default"]=function(){return new l.FeatureServiceSnappingSourceWorker};
Object.defineProperty(l,"__esModule",{value:!0})});