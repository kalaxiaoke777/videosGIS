// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.21/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Evented ../../../core/maybe ./EditGeometry ./operations/AppendVertex ./operations/UpdateVertices ./operations/RemoveVertices ./operations/SplitEdge ./operations/SetVertexPosition ./operations/CloseComponent ./operations/MoveVertex ./operations/OffsetEdgeVertex ./operations/RotateVertex ./operations/ScaleVertex ./operations/UndoGroup".split(" "),function(k,l,h,n,p,q,r,t,u,v,w,x,y,z,A,B){h=function(m){function f(a){var b=m.call(this)||
this;b.data=a;b.undoStack=[];b.redoStack=[];b.listener=b.data.on("change",c=>{c.addedVertices&&b.emit("vertex-add",{type:"vertex-add",vertices:c.addedVertices,operation:c.operation});c.removedVertices&&b.emit("vertex-remove",{type:"vertex-remove",vertices:c.removedVertices,operation:c.operation});c.updatedVertices&&b.emit("vertex-update",{type:"vertex-update",vertices:c.updatedVertices,operation:c.operation})});return b}l._inheritsLoose(f,m);var d=f.prototype;d.destroy=function(){this.listener.remove()};
d.splitEdge=function(a,b){return this.apply(new u.SplitEdge(this.data,a,b))};d.updateVertices=function(a,b,c=1){return this.apply(new r.UpdateVertices(this.data,a,b),c)};d.moveVertices=function(a,b,c,e,g=1){return this.updateVertices(a,new x.MoveVertex(this.data.coordinateHelper,b,c,e),g)};d.scaleVertices=function(a,b,c,e,g,C=1,D=0){return this.updateVertices(a,new A.ScaleVertex(b,c,e,g,D),C)};d.rotateVertices=function(a,b,c,e=1,g=0){return this.updateVertices(a,new z.RotateVertex(b,c,g),e)};d.removeVertices=
function(a){return this.apply(new t.RemoveVertices(this.data,a,this._minNumVerticesPerType))};d.appendVertex=function(a){return 0===this.data.components.length?null:this.apply(new q.AppendVertex(this.data,this.data.components[0],a))};d.setVertexPosition=function(a,b){return this.apply(new v.SetVertexPosition(this.data,a,b))};d.offsetEdge=function(a,b,c,e=1){return this.updateVertices([b.leftVertex,b.rightVertex],new y.OffsetEdgeVertex(this.data.coordinateHelper,a,b,c),e)};d.closeComponent=function(a){return this.data.components.includes(a)?
this.apply(new w.CloseComponent(this.data,a)):null};d.canRemoveVertex=function(){return this.data.components[0].vertices.length>this._minNumVerticesPerType};d.createUndoGroup=function(){const a=new B.UndoGroup;this.apply(a);return{remove(){return a.close()}}};d.undo=function(){if(0<this.undoStack.length){const a=this.undoStack.pop();a.undo();this.redoStack.push(a);return a}return null};d.redo=function(){if(0<this.redoStack.length){const a=this.redoStack.pop();a.apply();this.undoStack.push(a);return a}return null};
d.apply=function(a,b=1){if(0===b||n.isNone(this.lastOperation)||!this.lastOperation.accumulate(a))a.apply(),this.undoStack.push(a),this.redoStack=[];return a};f.fromGeometry=function(a,b){return new f(p.EditGeometry.fromGeometry(a,b))};l._createClass(f,[{key:"canUndo",get:function(){return 0<this.undoStack.length}},{key:"canRedo",get:function(){return 0<this.redoStack.length}},{key:"lastOperation",get:function(){return 0<this.undoStack.length?this.undoStack[this.undoStack.length-1]:null}},{key:"_minNumVerticesPerType",
get:function(){switch(this.data.type){case "point":return 1;case "polyline":return 2;case "polygon":return 3;default:return 0}}}]);return f}(h);k.EditGeometryOperations=h;Object.defineProperty(k,"__esModule",{value:!0})});