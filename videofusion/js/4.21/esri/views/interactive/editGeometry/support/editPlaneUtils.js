// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.21/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/vec2 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/boundedPlane ../../../../geometry/support/vectorStacks ../operations/MoveVertex ../operations/RotateVertex ../operations/ScaleVertex ../operations/UpdateVertices".split(" "),function(p,h,c,r,t,l,v,w,x,y){function u(a,b,f){if(a instanceof y.UpdateVertices){if(a.operation instanceof v.MoveVertex)return z(a.operation,b,f),!0;if(a.operation instanceof w.RotateVertex)return A(a.operation,b,f),
!0;if(a.operation instanceof x.ScaleVertex)return B(a.operation,b,f),!0}return!1}function z(a,b,f=!1){f=f?-1:1;a=r.fromValues(f*a.dx,f*a.dy,f*a.dz);c.add(b.origin,b.origin,a)}function A(a,b,f=!1){a=f?-a.angle:a.angle;c.rotateZ(b.basis1,b.basis1,r.ZEROS,a);c.rotateZ(b.basis2,b.basis2,r.ZEROS,a)}function B(a,b,f=!1){const k=f?1/a.factor1:a.factor1;f=f?1/a.factor2:a.factor2;c.scale(b.basis1,b.basis1,k);c.scale(b.basis2,b.basis2,f);h.projectAndScale(b.origin,b.origin,a.origin,a.axis1,k);h.projectAndScale(b.origin,
b.origin,a.origin,a.axis2,f)}p.apply=function(a,b){return u(a,b,!1)};p.calculateOrientedBounds=function(a,b,f,k){k||(k=t.create());const e=h.set(l.sv2d.get(),a[1],-a[0]),g=h.set(l.sv2d.get(),Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),d=h.set(l.sv2d.get(),Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),m=l.sv2d.get();b.components.forEach(n=>n.vertices.forEach(q=>{q=q.pos;h.set(m,h.dot(a,q),h.dot(e,q));h.min(g,g,m);h.max(d,d,m)}));b=h.set(l.sv2d.get(),1E-6>d[0]-g[0]?f/2:0,1E-6>d[1]-g[1]?
f/2:0);h.subtract(g,g,b);h.add(d,d,b);h.scale(k.basis1,a,(d[0]-g[0])/2);h.scale(k.basis2,e,(d[1]-g[1])/2);h.set(k.origin,g[0]*a[0]+g[1]*e[0],g[0]*a[1]+g[1]*e[1]);h.add(k.origin,k.origin,k.basis1);h.add(k.origin,k.origin,k.basis2);return k};p.mapPlaneToRenderPlane=function(a,b,f,k=0,e){e||(e=t.create());b.toRenderCoords(a.origin,f,e.origin);var g=l.sv3d.get();c.add(g,a.origin,a.basis1);c.add(g,g,a.basis2);b.toRenderCoords(g,f,g);var d=l.sv3d.get();c.add(d,a.origin,a.basis1);c.subtract(d,d,a.basis2);
b.toRenderCoords(d,f,d);const m=l.sv3d.get();c.subtract(m,a.origin,a.basis1);c.subtract(m,m,a.basis2);b.toRenderCoords(m,f,m);const n=l.sv3d.get();c.subtract(n,a.origin,a.basis1);c.add(n,n,a.basis2);b.toRenderCoords(n,f,n);a=c.lerp(l.sv3d.get(),g,d,.5);c.subtract(a,a,e.origin);b=c.lerp(l.sv3d.get(),m,n,.5);c.subtract(b,e.origin,b);c.lerp(e.basis1,a,b,.5);g=c.lerp(l.sv3d.get(),n,g,.5);c.subtract(g,g,e.origin);d=c.lerp(l.sv3d.get(),d,m,.5);c.subtract(d,e.origin,d);c.lerp(e.basis2,g,d,.5);d=c.cross(l.sv3d.get(),
e.basis1,e.basis2);d=c.cross(d,d,e.basis1);c.normalize(d,d);c.scale(e.basis2,d,c.dot(e.basis2,d));c.scale(e.basis1,e.basis1,1+k/c.length(e.basis1));c.scale(e.basis2,e.basis2,1+k/c.length(e.basis2));t.updateUnboundedPlane(e);return e};p.unapply=function(a,b){return u(a,b,!0)};Object.defineProperty(p,"__esModule",{value:!0})});