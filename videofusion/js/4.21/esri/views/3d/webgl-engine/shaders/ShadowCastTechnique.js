// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.21/esri/copyright.txt for details.
//>>built
define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/DefaultVertexAttributeLocations ../lib/OrderIndependentTransparency ../lib/Program ../../../../chunks/ShadowCast.glsl ../../../webgl/renderState".split(" "),function(n,k,l,m,e,g,h,p,q,r,t,f){g=function(d){function b(){return d.apply(this,arguments)||this}l._inheritsLoose(b,
d);var c=b.prototype;c.initializeProgram=function(a){const u=b.shader.get().build(this.configuration);return new r.Program(a.rctx,u,p.Default3D)};c.initializePipeline=function(a){return 0===this.configuration.pass?f.makePipelineState({blending:f.separateBlendingParams(1,1,1,1),colorWrite:f.defaultColorWriteParams,depthTest:null,depthWrite:null}):1===this.configuration.pass||2===this.configuration.pass?f.makePipelineState({blending:q.blendingDefault,colorWrite:f.defaultColorWriteParams,depthTest:null,
depthWrite:null}):f.makePipelineState({})};c.bindPass=function(a){0===this.configuration.pass||2===this.configuration.pass?(this.program.bindTexture(a.linearDepthTexture,"depthMap"),a.shadowMap.bind(this.program),a.shadowMap.bindView(this.program,a.camera.center),this.program.setUniform2fv("nearFar",a.camera.nearFar),this.program.setUniformMatrix4fv("inverseView",a.inverseView),this.program.setUniform4fv("projInfo",a.projInfo),this.program.setUniform2fv("zScale",a.zScale)):1===this.configuration.pass&&
(this.program.bindTexture(a.shadowCastMap,"shadowCastMap"),this.program.setUniform1f("sampleScale",a.sampleScale),this.program.setUniform1f("opacityFromElevation",a.opacityFromElevation),this.program.setUniform4fv("color",a.color),0===this.configuration.visualization&&this.configuration.bandsEnabled?this.program.setUniform1f("bandSize",a.bandSize):1===this.configuration.visualization&&this.program.setUniform1f("threshold",a.threshold))};l._createClass(b,[{key:"primitiveType",get:function(){return 5}}]);
return b}(g.ShaderTechnique);g.shader=new e.ReloadableShaderModule(t.ShadowCastShader,()=>new Promise(function(d,b){n(["./ShadowCast.glsl"],d,b)}));e=function(d){function b(){var c=d.apply(this,arguments)||this;c.pass=0;c.visualization=0;c.bandsEnabled=!1;return c}l._inheritsLoose(b,d);return b}(h.ShaderTechniqueConfiguration);m.__decorate([h.parameter({count:3})],e.prototype,"pass",void 0);m.__decorate([h.parameter()],e.prototype,"visualization",void 0);m.__decorate([h.parameter()],e.prototype,"bandsEnabled",
void 0);k.ShadowCastTechnique=g;k.ShadowCastTechniqueConfiguration=e;Object.defineProperty(k,"__esModule",{value:!0})});