// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.21/esri/copyright.txt for details.
//>>built
define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Accessor ../../../../../core/Handles ../../../../../core/mathUtils ../../../../../core/maybe ../../../../../core/watchUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/has ../../../../../core/accessorSupport/ensureType ../../../../../core/Logger ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/accessorSupport/trackingUtils ../../../../../chunks/mat4 ../../../../../chunks/vec3 ../../../../../chunks/vec4f64 ../../../../../geometry/support/vectorStacks ../../analysisTools/slice/sliceToolConfig ../../analysisTools/slice/sliceToolUtils ../../../webgl-engine/materials/lineStippleUtils".split(" "),
function(b,k,c,x,y,r,g,t,e,E,F,G,z,A,u,n,B,p,h,q,C){b.SliceView=function(v){function l(a){a=v.call(this,a)||this;a._handles=new y;a._gridVisualElement=null;a._outlineVisualElement=null;a.state="pending";return a}k._inheritsLoose(l,v);var f=l.prototype;f.initialize=function(){this._initialize()};f._initialize=function(){var a=k._asyncToGenerator(function*(){switch(this.state){case "destroyed":return;case "ready":throw Error("state error");}yield t.whenOnce(this.view,"ready",!0);if(g.isNone(this.layerView.layerViewData))throw Error("expected internal object to be valid");
this._gridVisualElement=q.createGridVisualElement(this.view);this._outlineVisualElement=q.createOutlineVisualElement(this.view);this._handles.add(A.reactionInit(()=>this.layerView.fullOpacity,()=>this._updateMaterials()),"layer");this._handles.add([this.layerView.watch("visible",()=>this._updateMaterials(),!0),this.layerView.layerViewData.watch("plane",()=>this._updatePlane(),!0),this.layerView.watch("active",()=>this._updateMaterials(),!0)],"internal");this._updatePlane();this._set("state","ready")});
return function(){return a.apply(this,arguments)}}();f.destroy=function(){switch(this.state){case "destroyed":case "pending":return}this._handles.destroy();this._gridVisualElement=g.destroyMaybe(this._gridVisualElement);this._outlineVisualElement=g.destroyMaybe(this._outlineVisualElement);this.set("view",null);this._set("state","destroyed")};f.whenReady=function(){var a=k._asyncToGenerator(function*(){yield t.whenOnce(this,"ready");return this});return function(){return a.apply(this,arguments)}}();
f._update=function(){};f._updatePlane=function(){var a=this.layerView.layerViewData.plane,d=g.isSome(a)?q.calculateBoundedPlaneTranslateRotate(a,p.sm4d.get()):null;this._outlineVisualElement.width=h.PLANE_OUTLINE_WIDTH;g.isSome(a)&&(a=n.set(p.sv3d.get(),n.length(a.basis1),n.length(a.basis2),1),a=u.fromScaling(p.sm4d.get(),a),d=u.multiply(a,d,a),this._outlineVisualElement.transform=d,this._gridVisualElement.transform=d);this._updateMaterials()};f._updateMaterials=function(){const a=this.layerView.layerViewData.plane&&
this.layerView.visible;var d=this.layerView.active,m=this.layerView.fullOpacity;const D=r.applyOpacity(w,h.PLANE_OUTLINE_COLOR,m);this._outlineVisualElement.color=D;this._outlineVisualElement.width=this.editable?h.PLANE_OUTLINE_WIDTH:h.PLANE_PREVIEW_OUTLINE_WIDTH;this._outlineVisualElement.stipplePattern=d?null:C.createStipplePatternSimple(5);d=r.applyOpacity(w,h.PLANE_BACKGROUND_COLOR,m);m=g.isSome(this.layerView.layerViewData)&&this.showGrid?h.GRID_COLOR:[0,0,0,0];this._gridVisualElement.backgroundColor=
d;this._gridVisualElement.gridColor=m;this._gridVisualElement.visible=a;this._outlineVisualElement.visible=a};k._createClass(l,[{key:"ready",get:function(){return"ready"===this.state}},{key:"showGrid",set:function(a){this._set("showGrid",a);this._updateMaterials()}},{key:"editable",set:function(a){this._set("editable",a);this._updateMaterials()}}]);return l}(x);c.__decorate([e.property({readOnly:!0})],b.SliceView.prototype,"state",void 0);c.__decorate([e.property()],b.SliceView.prototype,"view",void 0);
c.__decorate([e.property()],b.SliceView.prototype,"layer",void 0);c.__decorate([e.property()],b.SliceView.prototype,"layerView",void 0);c.__decorate([e.property()],b.SliceView.prototype,"ready",null);c.__decorate([e.property({value:!1})],b.SliceView.prototype,"showGrid",null);c.__decorate([e.property({value:!0})],b.SliceView.prototype,"editable",null);b.SliceView=c.__decorate([z.subclass("esri.views.3d.interactive.graphics.Slice.SliceView")],b.SliceView);const w=B.create();Object.defineProperty(b,
"__esModule",{value:!0})});