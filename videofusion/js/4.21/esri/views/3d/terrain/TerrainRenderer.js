// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.21/esri/copyright.txt for details.
//>>built
define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Color ../../../core/Accessor ../../../core/maybe ../../../core/ObjectPool ../../../core/PooledArray ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ../../../chunks/mat4 ../../../chunks/mat4f64 ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../chunks/vec4 ../../../chunks/vec4f64 ../../../geometry/support/aaBoundingBox ../../../geometry/support/buffer/BufferView ../../../support/requestImageUtils ./OverlayRenderer ./PatchGeometryFactory ./PatchRenderData ./ScaleRangeQueries ./TerrainConst ./TileRenderer ./tileUtils ../webgl-engine/collections/Component/ComponentIntersectionData ../webgl-engine/core/shaderLibrary/Slice.glsl ../webgl-engine/core/shaderLibrary/shading/ScreenSpaceReflections.glsl ../webgl-engine/core/shaderLibrary/util/View.glsl ../webgl-engine/lib/glUtil3D ../webgl-engine/lib/intersectorUtils ../webgl-engine/lib/screenSizePerspectiveUtils ../webgl-engine/lib/verticalOffsetUtils ../webgl-engine/materials/internal/MaterialUtil ../webgl-engine/shaders/TerrainTechnique".split(" "),
function(Z,n,ja,l,p,ka,aa,t,Fa,Ga,Ha,la,ma,ba,D,C,na,ca,V,oa,pa,da,W,qa,ra,sa,ta,Q,ea,ua,va,wa,xa,ya,za,fa,X,Y){function ha(E,y,e){na.set(e,E[0]*y[2]+y[0],E[1]*y[3]+y[1],E[2]*y[2],E[3]*y[3])}const R=V.create(),S=ca.create();l=function(E){function y(a){a=E.call(this,a)||this;a.type="Terrain";a.isGround=!0;a.tileSize=256;a.rctx=null;a._isTransparent=!1;a._scaleRangeQueries=new ra.ScaleRangeQueries;a.renderDataPool=new ka(qa.PatchRenderData);a._patchGroups=new aa({allocator:b=>b||{root:null,origin:null,
patches:new aa},deallocator:b=>{b.root=null;b.origin=null;b.patches.clear();return b}});a.patchGroupsDirty=!0;a.patchGroupsMap=new Map;a.tileIterator=new Q.IteratorPreorder;a.highestVisibleLODTile=null;a.visible=!0;a._opaque=!0;a._skirtScale=1;a._velvetOverground=!0;a.castShadows=!0;a._ssrEnabled=!1;a.emptyTex=null;a.tileRenderer=null;a.tileBackgroundInitialized=!1;a.tileBackgroundUpdating=!1;a.stencilEnabledLayerExtents=[];a.numTrianglesRendered=0;a.numTilesRendered=0;a.numTilesCulled=0;a.numOriginsRendered=
0;a.overlayOpacity=1;a.needsHighlight=!1;a.renderOccludedFlags=1;return a}Z._inheritsLoose(y,E);var e=y.prototype;e.initialize=function(){this.stage.addRenderPlugin([2,7,9],this)};e.destroy=function(){this.stage.removeRenderPlugin(this);W.clearCaches()};e.setDebugScreenSizePerspective=function(a){this.shaderTechniqueConfig.screenSizePerspective!==a&&(this.shaderTechniqueConfig.screenSizePerspective=a,this.setNeedsRender())};e.setRootTiles=function(a){this._rootTiles=a;this.setNeedsRender()};e.setNeedsHighlight=
function(a){this.needsHighlight=a;this.setNeedsRender()};e.setRenderOccludedOverlay=function(a){this.renderOccludedFlags=a?da.overlayRenderOccludedFlag:1;this.setNeedsRender()};e.setStencilEnabledLayerExtents=function(a){this.stencilEnabledLayerExtents=a;this.setNeedsRender()};e.setTileSize=function(a){this.tileSize=a;this.tileRenderer&&(this.tileRenderer.tileSize=a);this.setNeedsRender()};e.loadTile=function(a){a.renderData||(a.renderData=this.renderDataPool.acquire(),a.renderData.init(a),a.renderData.localOrigin=
this._getLocalOriginOfTile(a));this.updateTileGeometry(a);this.updateTileTexture(a,128)};e.queryVisibleLevelRange=function(a,b,c,d){this._scaleRangeQueries.queryVisibleLevelRange(a,b,c,d);this.setNeedsRender()};e.updateTileTexture=function(a,b){this.tileRenderer&&this.tileBackgroundInitialized&&(this.tileRenderer.updateTileTexture(a,128===b?0:2),this.setNeedsRender(),a.resetPendingUpdate(b))};e.updateTileGeometry=function(a){for(const b of a.layerInfo[0])b.pendingUpdates&=-33;a.resetPendingUpdate(32);
a.renderData.updateGeometry(this.rctx,this.wireframe)&&this.setNeedsRender()};e.unloadTile=function(a){a.renderData&&(a.renderData.releaseGeometry()&&this.setNeedsRender(),this.renderDataPool.release(a.renderData),a.renderData.clear(),a.renderData=null,a.setMemoryDirty(),this.setNeedsRender())};e._getLocalOriginOfTile=function(a){const b=Math.max(0,7*Math.floor((a.lij[0]-3)/7));if(this.isGlobal&&0===b)return C.ZEROS;for(;a.parent&&a.lij[0]>b;)a=a.parent;return a.centerAtSeaLevel};e.setVisibility=
function(a){this.visible=a;this.setNeedsRender()};e.getStats=function(){return{numTilesRendered:this.numTilesRendered,numTilesCulled:this.numTilesCulled,numTrianglesRendered:this.numTrianglesRendered,numOriginsRendered:this.numOriginsRendered}};e.setNeedsRender=function(a=1){this.patchGroupsDirty=!0;this.context.requestRender(a)};e.setTileBackground=function(a){this.tileBackground=a;this._updateTileBackground()};e.initializeRenderContext=function(a){this.context=a;this.rctx=a.renderContext.rctx;this.shaderTechniques=
a.shaderTechniqueRep;this.shaderTechniqueConfig=new Y.TerrainTechniqueConfiguration;this.tileRenderer=new ta.TileRenderer(this.rctx,this.tileSize,this.shaderTechniques);this.tileBackground&&this._updateTileBackground();this.emptyTex=xa.createEmptyTexture(this.rctx)};e.uninitializeRenderContext=function(){null!=this.emptyTex&&(this.emptyTex.dispose(),this.emptyTex=null);this.tileRenderer&&(this.tileRenderer.dispose(),this.tileRenderer=null)};e.intersect=function(a,b,c,d){if(this._rootTiles&&(!a.options.selectOpaqueTerrainOnly||
!a.options.selectionMode||this._opaque)){var f=Aa,h=Ba;D.subtract(f,d,c);D.set(h,1/f[0],1/f[1],1/f[2]);var g=a.results.min,v=a.results.max,F=a.results.ground,H=0===a.options.store,z=!!a.results.ground.target,u,w=fa.getVerticalOffsetTerrain(a.verticalOffset),K=this._skirtScale,x=a.tolerance,P=q=>{var m=q.renderData.geometryInfo;V.set(R,m.boundingBox);const I=q.renderData.localOrigin;p.isSome(w)&&(w.localOrigin=I,w.applyToAabb(R));const r=-K*m.skirtLength;if(0!==r){var A=q.up;V.expandWithOffset(R,r*
A[0],r*A[1],r*A[2])}D.subtract(J,c,I);if(X.intersectAabbInvDirBefore(R,J,h,x,H&&null!=g.dist?g.dist:Infinity)){var L=(k,B,Ca,Da)=>{k.set(void 0,Q.tile2str(B),Ca,Da,ba.IDENTITY,void 0);k.intersector="TerrainRenderer";k.target={type:"external",metadata:{tile:B}}};A=(k,B)=>{0<=k&&(a.options.backfacesTerrain||0>D.dot(B,f))&&(a.options.invisibleTerrain||!a.options.selectionMode||null==b||b(c,d,k))&&((null==F.dist||k<F.dist)&&L(F,q,k,B),a.options.isFiltered||(2===a.options.store&&(p.isNone(u)?(u=new ya.IntersectorResult(a.ray),
L(u,q,k,B),a.results.all.push(u)):k<u.dist&&L(u,q,k,B)),(null==g.dist||k<g.dist)&&L(g,q,k,B),0!==a.options.store&&(null==v.dist||k>v.dist)&&L(v,q,k,B)))};var M=Ea;D.subtract(M,d,I);var N=m.indices,T=m.vertexAttributes,O={data:T.getField("position",oa.BufferViewVec3f).typedBuffer,size:3,stride:T.stride/4};m=m.numWithoutSkirtIndices/3;if(!p.isSome(w)&&m>ea.componentMinimalSizeForIntersectionData){const k=q.renderData;p.isSome(k.intersectionData)||(k.intersectionData=new ea.ComponentIntersectionData(N,
0,m,O));k.intersectionData.intersectRay({r0:J,r1:M},A)}else X.intersectTriangles(J,M,0,m,N,O,null,w,A);0!==r&&(O=N.length/3,this.isGlobal?W.intersectSkirtsGlobal(J,M,m,O,N,T,r,I,w,A):W.intersectSkirtsLocal(J,M,m,O,N,T,r,w,A))}},G=this._rootTiles;p.isSome(G)&&(()=>{const q=this.tileIterator;for(const I of G)for(q.resetOne(I);!q.done;){const r=q.next();var m;if(m=r.visible||a.options.invisibleTerrain&&r.intersectsClippingArea){{m=r;const A=H&&null!=g.dist?g.dist:Infinity;m=p.isSome(w)||m.intersectsRay(c,
f,x,A,K)}}m?null==r.renderData||z&&this._useStencilForTile(r)||P(r):q.skipSubtree()}})()}};e.render=function(a){if(9===a.slot){if(0===(a.renderOccludedMask&da.overlayRenderOccludedFlag))return!1}else if(a.slot!==(this.opaque?2:7))return!1;var b=a.pass;const c=1===a.scenelightingData.globalFactor,d=this._updatePatchGroups();switch(b){case 0:b=a.shadowMap&&a.shadowMap.enabled;this.shaderTechniqueConfig.receiveShadows!==b&&(this.shaderTechniqueConfig.receiveShadows=b);b=this.overlayRenderer.isEmpty()?
0:this.overlayRenderer.hasWater?2:1;this.shaderTechniqueConfig.overlayMode!==b&&(this.shaderTechniqueConfig.overlayMode=b);this._renderMaterialPass(a,0,d,9===a.slot?3:1);break;case 4:case 6:this.castShadows&&c&&this._renderAuxiliaryPass(a,3,d,0);break;case 2:this.isTransparent&&this.overlayRenderer.isEmpty()||this._renderAuxiliaryPass(a,1,d,0);break;case 3:this._renderAuxiliaryPass(a,2,d,0);break;case 5:this.needsHighlight&&(this._renderAuxiliaryPass(a,4,d,2),a.rctx.clearSafe(256))}this._scaleRangeQueries.hasPendingQueries()&&
this.setNeedsRender();return!0};e._renderMaterialPass=function(a,b,c,d){const {rctx:f,camera:h}=a;this._ssrEnabled=a.ssrParams.ssrEnabled;this._setTerrainTechnique(b,3===d);const g=this.shaderTechnique.program;f.useProgram(g);0!==this.shaderTechniqueConfig.overlayMode&&1===d&&a.ssrParams&&va.bindSSRUniforms(g,a.ssrParams);a.shadowMap.bind(g);a.ssaoHelper.bind(g,a.camera);this._bindOverlayData(g,d);g.setUniformMatrix4fv("viewNormal",h.viewInverseTransposeMatrix);wa.bindProjectionMatrix(g,h.projectionMatrix);
a.scenelightingData.setUniforms(g,!0);b=h.viewMatrix;D.set(U,b[12],b[13],b[14]);D.normalize(U,U);g.setUniform3fv("viewDirection",U);this.numOriginsRendered=this.numTrianglesRendered=this.numTilesCulled=this.numTilesRendered=0;this._scaleRangeQueries.prepareQueries();this.opaque?this._renderPatchGroups(a,g,c,d):a.offscreenRenderingHelper.renderToTargets(()=>this._renderPatchGroups(a,g,c,d),a.offscreenRenderingHelper.tmpColor,a.offscreenRenderingHelper.mainDepth,[0,0,0,0]);this._scaleRangeQueries.processQueries()};
e._renderAuxiliaryPass=function(a,b,c,d){this._setTerrainTechnique(b,3===d);b=this.shaderTechnique.program;a.rctx.useProgram(b);if(5===a.pass){const f=a.offscreenRenderingHelper;b.bindTexture(f.depthTexture,"depthTex");b.setUniform4f("highlightViewportPixelSz",0,0,1/f.width,1/f.height)}else b.setUniformMatrix4fv("viewNormal",a.camera.viewInverseTransposeMatrix),2!==a.pass&&4!==a.pass&&6!==a.pass||b.setUniform2fv("nearFar",a.camera.nearFar);this._renderPatchGroupsAuxiliary(a,b,c,d)};e._updateTileBackground=
function(){if(this.tileRenderer){this.tileBackgroundUpdating=!0;var a=()=>{this.tileBackgroundInitialized=!0;this.tileBackgroundUpdating=!1;this.shaderTechniqueConfig.useGrid=this.tileRenderer.backgroundIsGrid;this.shaderTechniqueConfig.hasBackgroundColor=!this.tileRenderer.backgroundIsGrid&&!!p.isSome(this.tileRenderer.backgroundColor);this.allTiles.forAll(b=>this.tileRenderer.updateTileTexture(b,0));this.setNeedsRender()};if("string"===typeof this.tileBackground){const b=this.tileBackground;pa.requestImage(b).then(c=>
{b===this.tileBackground&&this.tileRenderer&&(this.tileRenderer.setBackground(c,this.tileBackground===sa.DEFAULT_TILE_BACKGROUND),a())})}else{const b=this.tileBackground?ja.toUnitRGBA(this.tileBackground):[0,0,0,0];this.tileRenderer.setBackground(b,!1);a()}}};e._updatePatchGroups=function(){const a=this._patchGroups;if(!this.patchGroupsDirty)return a;this.highestVisibleLODTile=null;this._renderCollectOrigins(a);if(0!==this.renderOrder){for(let b=0;b<a.length;b++)Q.sortTiles(this.renderOrder,a.data[b].patches);
a.sort((b,c)=>{var d=this.renderOrder;b=0===b.patches.length?-d:0===c.patches.length?d:Q.compareTiles(b.patches.data[0],c.patches.data[0],d);return b})}this.patchGroupsDirty=!1;return a};e._renderCollectOrigins=function(a){var b=this._rootTiles;if(!p.isNone(b)){var c=this.isGlobal;a.clear();for(const d of b)b=a.pushNew(),b.root=d,b.origin=c?C.ZEROS:d.centerAtSeaLevel,b.patches.clear(),this._renderCollectOriginsForRoot(a,b);a.filterInPlace(d=>0<d.patches.length)}};e._renderCollectOriginsForRoot=function(a,
b){const c=this.tileIterator;c.resetOne(b.root);const d=this.patchGroupsMap;d.clear();for(d.set(b.origin,b);!c.done;){b=c.next();var f=b.renderData;if(f&&!b.visible)this.numTilesCulled++,c.skipSubtree();else{if(0===b.lij[0]%7){const h=a.pushNew();h.root=b;h.origin=b.centerAtSeaLevel;d.set(b.centerAtSeaLevel,h);h.patches.clear()}if(!b.rendered)this.numTilesCulled++;else if(f){(f=d.get(f.localOrigin))&&f.patches.push(b);if(!this.highestVisibleLODTile||b.vlevel>this.highestVisibleLODTile.vlevel)this.highestVisibleLODTile=
b;c.skipSubtree()}}}};e._useStencilForTile=function(a){for(const b of this.stencilEnabledLayerExtents)if(a.intersectsExtent(b))return!0;return!1};e._renderPatchGroupsAuxiliary=function(a,b,c,d){this.shaderTechnique.bindPipelineState(a.rctx);const f=0<this.stencilEnabledLayerExtents.length;b.setUniformMatrix4fv("proj",a.camera.projectionMatrix);b.setUniform1f("skirtScale",this._skirtScale);0!==d&&this._bindOverlayData(b,d);for(let h=0;h<c.length;h++){const g=c.data[h];this._bindPatchGroupData(b,g,
a.camera.eye,a.camera.viewMatrix);for(let v=0;v<g.patches.length;v++)this._renderPatch(a.rctx,b,g.patches.data[v],4,f,d)}a.rctx.bindVAO(null)};e._renderPatchGroups=function(a,b,c,d){const f=a.rctx,h=a.camera,g=h.viewMatrix;this.shaderTechnique.bindPipelineState(f);if(this.shaderTechniqueConfig.screenSizePerspective&&this.pointsOfInterest){var v=za.getSettings(this.stage.viewingMode,this.ellipsoidRadius);v.update({distance:this.pointsOfInterest.centerOnSurfaceFrequent.distance,fovY:h.fovY});X.bindScreenSizePerspective(v,
b,"screenSizePerspective")}v=0<this.stencilEnabledLayerExtents.length;const F=3===d;F&&(b.bindTexture(this.emptyTex,"tex"),b.setUniform1f("blend",1),b.setUniform4fv("texOffsetAndScale",ca.ZEROS));var H=p.isSome(this.tileRenderer.backgroundColor)?this.tileRenderer.backgroundColor:C.ZEROS;this.shaderTechniqueConfig.hasBackgroundColor&&b.setUniform3fv("backgroundColor",H);b.setUniform1f("skirtScale",F?0:this._skirtScale);H=this.wireframe?1:4;this.shaderTechniqueConfig.textureFadingEnabled&&b.bindTexture(this.emptyTex,
"texNext");for(let w=0;w<c.length;w++){var z=c.data[w];const K=z.patches;this._bindPatchGroupData(b,z,h.eye,g);ua.bindSliceUniforms(b,this.shaderTechnique.configuration,a.sliceHelper&&a.sliceHelper.plane,z.origin);a.shadowMap&&a.shadowMap.bindView(b,z.origin);this.numOriginsRendered++;for(z=0;z<K.length;z++){const x=K.data[z];var u=x.renderData.textureReference;if(!p.isNone(u)){if(!F){this._scaleRangeQueries.scaleQueriesForTile(x);ha(x.renderData.geometryInfo.uvOffsetAndScale,u.offsetAndScale,S);
b.setUniform4fv("texOffsetAndScale",S);b.bindTexture(u.texture.texture,"tex");const P=x.renderData.textureFadeFactor,G=1>P?x.renderData.nextTextureReference:null;this.shaderTechniqueConfig.textureFadingEnabled&&p.isSome(G)&&1>P?(ha(x.renderData.geometryInfo.uvOffsetAndScale,G.offsetAndScale,S),b.setUniform1f("fadeFactor",P),b.setUniform4fv("nextTexOffsetAndScale",S),b.setUniform3fv("nextTexOpacities",G.opacities),b.bindTexture(G.texture.texture,"texNext")):b.setUniform1f("fadeFactor",1);x.renderData.textureIsFading&&
this.setNeedsRender();b.setUniform3fv("textureOpacities",u.opacities)}u=this._renderPatch(f,b,x,H,v,d);x.renderOrder=this.numTilesRendered;this.numTilesRendered++;this.numTrianglesRendered+=u/3}}}f.bindVAO(null)};e._renderPatch=function(a,b,c,d,f,h){if(p.isNone(c.renderData.vao.indexBuffer))return 0;0!==h&&this._bindOverlayPatchData(b,c.renderData.overlay);f&&(this._useStencilForTile(c)?this.stencilShaderTechnique.bindPipelineState(a):this.shaderTechnique.bindPipelineState(a));f=0===this._skirtScale?
c.renderData.geometryInfo.numWithoutSkirtIndices:c.renderData.vao.indexBuffer.size;a.bindVAO(c.renderData.vao);b.assertCompatibleVertexAttributeLocations(c.renderData.vao);a.drawElements(d,f,c.renderData.vao.indexBuffer.indexType,0);return f};e._bindPatchGroupData=function(a,b,c,d){a.setUniform3fv("origin",b.origin);ma.translate(ia,d,b.origin);a.setUniformMatrix4fv("view",ia);a.setUniform3f("camPos",c[0]-b.origin[0],c[1]-b.origin[1],c[2]-b.origin[2])};e._bindOverlayData=function(a,b){if(0!==this.shaderTechniqueConfig.overlayMode){a.setUniform1f("overlayOpacity",
this.overlayOpacity);var c=this.overlayRenderer.overlays;if(0<c.length){c=c[0];const d=c.getColorTexture(b);a.bindTexture(p.isSome(d)?d:this.emptyTex,"ovColorTex");2===this.shaderTechniqueConfig.overlayMode&&(b=c.getNormalTexture(b),a.bindTexture(p.isSome(b)?b:this.emptyTex,"ovWaterTex"))}}};e._bindOverlayPatchData=function(a,b){a.setUniform4fv("overlayTexOffset",b.offsets);a.setUniform4fv("overlayTexScale",b.scales)};e._setTerrainTechnique=function(a,b){this.shaderTechniqueConfig.output=a;0===a&&
(this.shaderTechniqueConfig.atmosphere=this.isGlobal&&this._velvetOverground,this.shaderTechniqueConfig.ssrEnabled=this._ssrEnabled);this.shaderTechniqueConfig.renderOccluded=b;this.shaderTechniqueConfig.stencilEnabled=!1;this.shaderTechnique=this.shaderTechniques.releaseAndAcquire(Y.TerrainTechnique,this.shaderTechniqueConfig,this.shaderTechnique);this.shaderTechniqueConfig.stencilEnabled=!0;this.stencilShaderTechnique=this.shaderTechniques.releaseAndAcquire(Y.TerrainTechnique,this.shaderTechniqueConfig,
this.stencilShaderTechnique)};Z._createClass(y,[{key:"isGlobal",get:function(){return 1===this.stage.viewingMode}},{key:"updating",get:function(){return!this.tileBackgroundInitialized||this.tileBackgroundUpdating}},{key:"canRender",get:function(){return this.visible&&!!this._rootTiles&&this.tileBackgroundInitialized&&!this.renderingDisabled}},{key:"renderingDisabled",set:function(a){this._set("renderingDisabled",!!a);this.setNeedsRender()}},{key:"opaque",get:function(){return this._opaque&&!this.shaderTechniqueConfig.slicePlaneEnabled},
set:function(a){this._opaque!==a&&(this._opaque=a,this.setNeedsRender())}},{key:"needsLinearDepth",get:function(){return this.overlayRenderer.hasWater}},{key:"isTransparent",get:function(){return this._isTransparent},set:function(a){this._isTransparent!==a&&(this._isTransparent=a,this.setNeedsRender())}},{key:"skirtScale",get:function(){return this._skirtScale},set:function(a){a!==this._skirtScale&&(this._skirtScale=a,this.setNeedsRender())}},{key:"renderPatchBorders",get:function(){return!!this.shaderTechniqueConfig.tileBorders},
set:function(a){this.shaderTechniqueConfig.tileBorders!==a&&(this.shaderTechniqueConfig.tileBorders=a,this.setNeedsRender(),this.notifyChange("renderPatchBorders"))}},{key:"cullBackFaces",get:function(){return this.shaderTechniqueConfig.backfaceCullingEnabled},set:function(a){this.shaderTechniqueConfig.backfaceCullingEnabled!==a&&(this.shaderTechniqueConfig.backfaceCullingEnabled=a,this.notifyChange("cullBackFaces"),this.setNeedsRender())}},{key:"renderOrder",set:function(a){this._set("renderOrder",
a);this.setNeedsRender()}},{key:"velvetOverground",set:function(a){this._velvetOverground!==a&&(this._velvetOverground=a,this.setNeedsRender())}},{key:"intersectionHandlerId",get:function(){return fa.TERRAIN_ID}},{key:"slicePlane",get:function(){return this.shaderTechniqueConfig.slicePlaneEnabled},set:function(a){this.shaderTechniqueConfig.slicePlaneEnabled!==a&&(this.shaderTechniqueConfig.slicePlaneEnabled=a,this.setNeedsRender())}},{key:"textureFadingEnabled",set:function(a){this.shaderTechniqueConfig.textureFadingEnabled!==
a&&(this.shaderTechniqueConfig.textureFadingEnabled=a,this.setNeedsRender())}},{key:"wireframe",set:function(a){this._get("wireframe")!==a&&(this._set("wireframe",a),this.allTiles.forAll(b=>{var c;return null==(c=b.renderData)?void 0:c.updateGeometry(this.rctx,a)}),this.setNeedsRender())}},{key:"test",get:function(){return{tileRenderer:this.tileRenderer}}}]);return y}(l);n.__decorate([t.property()],l.prototype,"tileBackgroundInitialized",void 0);n.__decorate([t.property()],l.prototype,"tileBackgroundUpdating",
void 0);n.__decorate([t.property({constructOnly:!0})],l.prototype,"overlayRenderer",void 0);n.__decorate([t.property({constructOnly:!0})],l.prototype,"stage",void 0);n.__decorate([t.property({readOnly:!0})],l.prototype,"isGlobal",null);n.__decorate([t.property({constructOnly:!0})],l.prototype,"allTiles",void 0);n.__decorate([t.property({constructOnly:!0})],l.prototype,"ellipsoidRadius",void 0);n.__decorate([t.property({readOnly:!0})],l.prototype,"updating",null);n.__decorate([t.property({value:!1})],
l.prototype,"renderingDisabled",null);n.__decorate([t.property()],l.prototype,"renderPatchBorders",null);n.__decorate([t.property()],l.prototype,"cullBackFaces",null);n.__decorate([t.property({value:1})],l.prototype,"renderOrder",null);n.__decorate([t.property()],l.prototype,"wireframe",null);n=l=n.__decorate([la.subclass("esri.views.3d.terrain.TerrainRenderer")],l);const ia=ba.create(),U=C.create(),Aa=C.create(),Ba=C.create(),J=C.create(),Ea=C.create();return n});