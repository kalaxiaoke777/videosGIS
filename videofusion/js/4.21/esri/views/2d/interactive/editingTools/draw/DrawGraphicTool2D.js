// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.21/esri/copyright.txt for details.
//>>built
define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../geometry ../../../../../Graphic ../../../../../core/handleUtils ../../../../../core/maybe ../../../../../core/accessorSupport/decorators/property ../../../../../core/has ../../../../../core/accessorSupport/ensureType ../../../../../core/Logger ../../../../../core/accessorSupport/decorators/subclass ../../SnappingVisualizer2D ./symbols ../../../../draw/DrawGraphicTool ../../../../draw/DrawOperation ../../../../draw/drawSurfaces ../../../../../geometry/Point ../../../../../geometry/Multipoint".split(" "),
function(e,t,g,A,l,m,b,n,B,C,D,u,v,p,r,w,x,y,z){function q(h,f){var d,a,c,k;return(null!=(d=null==(a=h.attributes)?void 0:a.displayOrder)?d:-Infinity)-(null!=(c=null==(k=f.attributes)?void 0:k.displayOrder)?c:-Infinity)}e.DrawGraphicTool2D=function(h){function f(a){var c=h.call(this,a)||this;c._visualElementGraphics={outline:null,regularVertices:null,activeVertex:null};c.activeFillSymbol=null;c.type="draw-2d";c._visualElementSymbols={outline:b.unwrapOr(a.activeLineSymbol,p.outline),regularVertices:b.unwrapOr(a.regularVerticesSymbol,
p.regularVertices),activeVertex:b.unwrapOr(a.activeVertexSymbol,p.activeVertex),fill:b.unwrap(a.activeFillSymbol)};return c}t._inheritsLoose(f,h);var d=f.prototype;d.initializeGraphic=function(a){b.isSome(this._visualElementSymbols.fill)&&(a.symbol=this._visualElementSymbols.fill);return null};d.makeDrawOperation=function(){const a=this.view;return new w.DrawOperation({view:a,manipulators:this.manipulators,geometryType:r.geometryTypeToDrawOperationGeometryType(this.geometryType),drawingMode:this.mode,
hasZ:this.hasZ,defaultZ:this.defaultZ,snapToSceneEnabled:this.snapToScene,drawSurface:new x.MapDrawSurface(a),hasM:!1,snappingManager:this.snappingManager,snappingVisualizer:new v.SnappingVisualizer2D(this.internalGraphicsLayer)})};d.onActiveVertexChanged=function(a){if("point"===this.geometryType)return null;const [c,k]=a;a=new y({x:c,y:k,spatialReference:this.drawOperation.spatialReference});if(b.isSome(this._visualElementGraphics.activeVertex))return this._visualElementGraphics.activeVertex.geometry=
a,null;this._visualElementGraphics.activeVertex=new l({geometry:a,symbol:this._visualElementSymbols.activeVertex,attributes:{displayOrder:2}});this.internalGraphicsLayer.add(this._visualElementGraphics.activeVertex);this.internalGraphicsLayer.graphics.sort(q);return m.makeHandle(()=>{b.isSome(this._visualElementGraphics.activeVertex)&&(this.internalGraphicsLayer.remove(this._visualElementGraphics.activeVertex),this._visualElementGraphics.activeVertex=b.destroyMaybe(this._visualElementGraphics.activeVertex))})};
d.onOutlineChanged=function(a){a=a.clone();if("polyline"===a.type){const c=a.paths[a.paths.length-1];c.splice(0,c.length-2)}if(b.isSome(this._visualElementGraphics.outline))return this._visualElementGraphics.outline.geometry=a,null;this._visualElementGraphics.outline=new l({geometry:a,symbol:this._visualElementSymbols.outline,attributes:{displayOrder:0}});this.internalGraphicsLayer.add(this._visualElementGraphics.outline);this.internalGraphicsLayer.graphics.sort(q);return m.makeHandle(()=>{b.isSome(this._visualElementGraphics.outline)&&
(this.internalGraphicsLayer.remove(this._visualElementGraphics.outline),this._visualElementGraphics.outline=b.destroyMaybe(this._visualElementGraphics.outline))})};d.onRegularVerticesChanged=function(a){a=new z({points:a,spatialReference:this.drawOperation.spatialReference});if(b.isSome(this._visualElementGraphics.regularVertices))return this._visualElementGraphics.regularVertices.geometry=a,null;this._visualElementGraphics.regularVertices=new l({geometry:a,symbol:this._visualElementSymbols.regularVertices,
attributes:{displayOrder:1}});this.internalGraphicsLayer.add(this._visualElementGraphics.regularVertices);this.internalGraphicsLayer.graphics.sort(q);return m.makeHandle(()=>{b.isSome(this._visualElementGraphics.regularVertices)&&(this.internalGraphicsLayer.remove(this._visualElementGraphics.regularVertices),this._visualElementGraphics.regularVertices=b.destroyMaybe(this._visualElementGraphics.regularVertices))})};return f}(r.DrawGraphicTool);g.__decorate([n.property()],e.DrawGraphicTool2D.prototype,
"activeFillSymbol",void 0);g.__decorate([n.property({readOnly:!0})],e.DrawGraphicTool2D.prototype,"type",void 0);g.__decorate([n.property({constructOnly:!0,nonNullable:!0})],e.DrawGraphicTool2D.prototype,"view",void 0);e.DrawGraphicTool2D=g.__decorate([u.subclass("esri.views.2d.interactive.draw.DrawGraphicTool2D")],e.DrawGraphicTool2D);Object.defineProperty(e,"__esModule",{value:!0})});