// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.21/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/HandleOwner":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./Handles ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass ../views/support/WatchUpdatingTracking".split(" "),function(n,c,z,x,r,u,m,v){const p=f=>{f=function(q){function l(){return q.apply(this,arguments)||this}c._inheritsLoose(l,q);l.prototype.destroy=function(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy())};c._createClass(l,
[{key:"handles",get:function(){return this._get("handles")||new r}},{key:"updatingHandles",get:function(){return this._get("updatingHandles")||new v.WatchUpdatingTracking}}]);return l}(f);z.__decorate([u.property({readOnly:!0})],f.prototype,"handles",null);z.__decorate([u.property({readOnly:!0})],f.prototype,"updatingHandles",null);return f=z.__decorate([m.subclass("esri.core.HandleOwner")],f)};n.HandleOwner=function(f){function q(){return f.apply(this,arguments)||this}c._inheritsLoose(q,f);return q}(p(x));
n.HandleOwner=z.__decorate([m.subclass("esri.core.HandleOwner")],n.HandleOwner);n.HandleOwnerMixin=p;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/Handles":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./Collection ./maybe ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(n,c,z,x,r,u,m){z=function(v){function p(q){q=v.call(this,q)||this;q._groups=new Map;return q}n._inheritsLoose(p,v);var f=p.prototype;
f.destroy=function(){this.removeAll()};f.add=function(q,l){if(!this._isHandle(q)&&!Array.isArray(q)&&!x.isCollection(q))return this;const t=this._getOrCreateGroup(l);Array.isArray(q)||x.isCollection(q)?q.forEach(g=>this._isHandle(g)&&t.push(g)):t.push(q);this.notifyChange("size");return this};f.forEach=function(q,l){if("function"===typeof q)this._groups.forEach(t=>t.forEach(q));else{const t=this._getGroup(q);t&&l&&t.forEach(l)}};f.has=function(q){return this._groups.has(this._ensureGroupKey(q))};
f.remove=function(q){if(Array.isArray(q)||x.isCollection(q))return q.forEach(this.remove,this),this;if(!this.has(q))return this;const l=this._getGroup(q);for(let t=0;t<l.length;t++)l[t].remove();this._deleteGroup(q);this.notifyChange("size");return this};f.removeAll=function(){this._groups.forEach(q=>{for(let l=0;l<q.length;l++)q[l].remove()});this._groups.clear();this.notifyChange("size");return this};f._isHandle=function(q){return q&&!!q.remove};f._getOrCreateGroup=function(q){if(this.has(q))return this._getGroup(q);
const l=[];this._groups.set(this._ensureGroupKey(q),l);return l};f._getGroup=function(q){return r.assumeNonNull(this._groups.get(this._ensureGroupKey(q)))};f._deleteGroup=function(q){return this._groups.delete(this._ensureGroupKey(q))};f._ensureGroupKey=function(q){return q||"_default_"};n._createClass(p,[{key:"size",get:function(){let q=0;this._groups.forEach(l=>{q+=l.length});return q}}]);return p}(z);c.__decorate([u.property({readOnly:!0})],z.prototype,"size",null);return z=c.__decorate([m.subclass("esri.core.Handles")],
z)})},"esri/core/Collection":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./ArrayPool ./Evented ./lang ./maybe ./ObjectPool ./scheduling ./accessorSupport/ensureType ./accessorSupport/tracking ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass ./accessorSupport/tracking/SimpleObservable".split(" "),function(n,c,z,x,r,u,m,v,p,f,q,l,t){function g(E){return E?E instanceof D?E.toArray():E.length?Array.prototype.slice.apply(E):[]:[]}function a(E){if(E&&
E.length)return E[0]}function b(E,G,I,L){G&&G.forEach((J,F,K)=>{E.push(J);b(E,I.call(L,J,F,K),I,L)})}var d;let h=function(){function E(){this.target=null;this.defaultPrevented=this.cancellable=!1;this.type=this.item=void 0}var G=E.prototype;G.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};G.reset=function(I){this.defaultPrevented=!1;this.item=I};return E}();const k=new m(h,void 0,E=>{E.item=null;E.target=null;E.defaultPrevented=!1;E.cancellable=!1}),e=()=>{},w=new Set,y=new Set,
C=new Set,B=new Map;let A=0,D=d=function(E,G){function I(J){J=E.call(this,J)||this;J._chgListeners=[];J._notifications=null;J._timer=null;J._observable=new t.SimpleObservable;J.length=0;J._items=[];Object.defineProperty(n._assertThisInitialized(J),"uid",{value:A++});return J}n._inheritsLoose(I,E);I.isCollection=function(J){return null!=J&&J instanceof d};var L=I.prototype;L.normalizeCtorArgs=function(J){return J?Array.isArray(J)||J instanceof d?{items:J}:J:{}};L[G]=function*(){yield*this.items};L.hasEventListener=
function(J){return"change"===J?0<this._chgListeners.length:this._emitter.hasEventListener(J)};L.on=function(J,F){if("change"===J){const K=this._chgListeners,M={removed:!1,callback:F};K.push(M);this._notifications&&this._notifications.push({listeners:K.slice(),items:this._items.slice(),changes:[]});return{remove(){this.remove=e;M.removed=!0;K.splice(K.indexOf(M),1)}}}return this._emitter.on(J,F)};L.once=function(J,F){const K=this.on(J,F);return{remove(){K.remove()}}};L.add=function(J,F){f.trackAccess(this._observable);
if(this._emitBeforeChanges(1))return this;F=this.getNextIndex(null!=F?F:null);this._splice(F,0,J);this._emitAfterChanges(1);return this};L.addMany=function(J,F=this._items.length){f.trackAccess(this._observable);if(!J||!J.length||this._emitBeforeChanges(1))return this;F=this.getNextIndex(F);this._splice(F,0,...g(J));this._emitAfterChanges(1);return this};L.removeAll=function(){f.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(2))return[];const J=this._splice(0,this.length)||
[];this._emitAfterChanges(2);return J};L.clone=function(){f.trackAccess(this._observable);return this._createNewInstance({items:this._items.map(r.clone)})};L.concat=function(...J){f.trackAccess(this._observable);J=J.map(g);return this._createNewInstance({items:this._items.concat(...J)})};L.drain=function(J,F){f.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var K=u.assumeNonNull(this._splice(0,this.length)),M=K.length;for(let R=0;R<M;R++)J.call(F,K[R],R,K);this._emitAfterChanges(2)}};
L.every=function(J,F){f.trackAccess(this._observable);return this._items.every(J,F)};L.filter=function(J,F){f.trackAccess(this._observable);let K;K=2===arguments.length?this._items.filter(J,F):this._items.filter(J);return this._createNewInstance({items:K})};L.find=function(J,F){f.trackAccess(this._observable);return this._items.find(J,F)};L.findIndex=function(J,F){f.trackAccess(this._observable);return this._items.findIndex(J,F)};L.flatten=function(J,F){f.trackAccess(this._observable);const K=[];
b(K,this,J,F);return new d(K)};L.forEach=function(J,F){f.trackAccess(this._observable);return this._items.forEach(J,F)};L.getItemAt=function(J){f.trackAccess(this._observable);return this._items[J]};L.getNextIndex=function(J){f.trackAccess(this._observable);const F=this.length;J=null==J?F:J;0>J?J=0:J>F&&(J=F);return J};L.includes=function(J,F=0){f.trackAccess(this._observable);return this._items.includes(J,F)};L.indexOf=function(J,F=0){f.trackAccess(this._observable);return this._items.indexOf(J,
F)};L.join=function(J=","){f.trackAccess(this._observable);return this._items.join(J)};L.lastIndexOf=function(J,F=this.length-1){f.trackAccess(this._observable);return this._items.lastIndexOf(J,F)};L.map=function(J,F){f.trackAccess(this._observable);J=this._items.map(J,F);return new d({items:J})};L.reorder=function(J,F=this.length-1){f.trackAccess(this._observable);const K=this.indexOf(J);if(-1!==K){0>F?F=0:F>=this.length&&(F=this.length-1);if(K!==F){if(this._emitBeforeChanges(4))return J;this._splice(K,
1);this._splice(F,0,J);this._emitAfterChanges(4)}return J}};L.pop=function(){f.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var J=a(this._splice(this.length-1,1));this._emitAfterChanges(2);return J}};L.push=function(...J){f.trackAccess(this._observable);if(this._emitBeforeChanges(1))return this.length;this._splice(this.length,0,...J);this._emitAfterChanges(1);return this.length};L.reduce=function(J,F){f.trackAccess(this._observable);const K=this._items;return 2===arguments.length?
K.reduce(J,F):K.reduce(J)};L.reduceRight=function(J,F){f.trackAccess(this._observable);const K=this._items;return 2===arguments.length?K.reduceRight(J,F):K.reduceRight(J)};L.remove=function(J){f.trackAccess(this._observable);return this.removeAt(this.indexOf(J))};L.removeAt=function(J){f.trackAccess(this._observable);if(!(0>J||J>=this.length||this._emitBeforeChanges(2)))return J=a(this._splice(J,1)),this._emitAfterChanges(2),J};L.removeMany=function(J){f.trackAccess(this._observable);if(!J||!J.length||
this._emitBeforeChanges(2))return[];J=J instanceof d?J.toArray():J;const F=this._items,K=[],M=J.length;for(let S=0;S<M;S++){var R=F.indexOf(J[S]);if(-1<R){{var T=S+1;var Q=R+1;const X=Math.min(J.length-T,F.length-Q);let aa=0;for(;aa<X&&J[T+aa]===F[Q+aa];)aa++;T=aa}T=1+T;(R=this._splice(R,T))&&0<R.length&&K.push.apply(K,R);S+=T-1}}this._emitAfterChanges(2);return K};L.reverse=function(){f.trackAccess(this._observable);if(this._emitBeforeChanges(4))return this;const J=this._splice(0,this.length);J&&
(J.reverse(),this._splice(0,0,...J));this._emitAfterChanges(4);return this};L.shift=function(){f.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var J=a(this._splice(0,1));this._emitAfterChanges(2);return J}};L.slice=function(J=0,F=this.length){f.trackAccess(this._observable);return this._createNewInstance({items:this._items.slice(J,F)})};L.some=function(J,F){f.trackAccess(this._observable);return this._items.some(J,F)};L.sort=function(J){f.trackAccess(this._observable);
if(!this.length||this._emitBeforeChanges(4))return this;const F=u.assumeNonNull(this._splice(0,this.length));arguments.length?F.sort(J):F.sort();this._splice(0,0,...F);this._emitAfterChanges(4);return this};L.splice=function(J,F,...K){f.trackAccess(this._observable);const M=(F?2:0)|(K.length?1:0);if(this._emitBeforeChanges(M))return[];J=this._splice(J,F,...K)||[];this._emitAfterChanges(M);return J};L.toArray=function(){f.trackAccess(this._observable);return this._items.slice()};L.toJSON=function(){f.trackAccess(this._observable);
return this.toArray()};L.toLocaleString=function(){f.trackAccess(this._observable);return this._items.toLocaleString()};L.toString=function(){f.trackAccess(this._observable);return this._items.toString()};L.unshift=function(...J){f.trackAccess(this._observable);if(!J.length||this._emitBeforeChanges(1))return this.length;this._splice(0,0,...J);this._emitAfterChanges(1);return this.length};L._createNewInstance=function(J){return new this.constructor(J)};L._splice=function(J,F,...K){const M=this._items;
var R=this.constructor.prototype.itemType;let T=void 0;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=v.schedule(()=>this._dispatchChange()));if(F){T=M.splice(J,F);if(this.hasEventListener("before-remove")){var Q=k.acquire();Q.target=this;Q.cancellable=!0;for(let aa=0,ma=T.length;aa<ma;aa++)F=T[aa],Q.reset(F),this.emit("before-remove",Q),Q.defaultPrevented&&
(T.splice(aa,1),M.splice(J,0,F),J+=1,--aa,--ma);k.release(Q)}this.length=this._items.length;if(this.hasEventListener("after-remove")){F=k.acquire();F.target=this;F.cancellable=!1;Q=T.length;for(let aa=0;aa<Q;aa++)F.reset(T[aa]),this.emit("after-remove",F);k.release(F)}}if(K&&K.length){if(R){F=[];for(var S of K)K=R.ensureType(S),null==K&&null!=S||F.push(K);K=F}R=this.hasEventListener("before-add");S=this.hasEventListener("after-add");F=J===this.length;if(R||S){var X=k.acquire();X.target=this;X.cancellable=
!0;Q=k.acquire();Q.target=this;Q.cancellable=!1;for(const aa of K)R?(X.reset(aa),this.emit("before-add",X),X.defaultPrevented||(F?M.push(aa):M.splice(J++,0,aa),this._set("length",M.length),S&&(Q.reset(aa),this.emit("after-add",Q)))):(F?M.push(aa):M.splice(J++,0,aa),this._set("length",M.length),Q.reset(aa),this.emit("after-add",Q));k.release(Q);k.release(X)}else{if(F)for(X of K)M.push(X);else M.splice(J,0,...K);this._set("length",M.length)}}(K&&K.length||T&&T.length)&&this._notifyChangeEvent(K,T);
return T};L._emitBeforeChanges=function(J){let F=!1;if(this.hasEventListener("before-changes")){const K=k.acquire();K.target=this;K.cancellable=!0;K.type=J;this.emit("before-changes",K);F=K.defaultPrevented;k.release(K)}return F};L._emitAfterChanges=function(J){if(this.hasEventListener("after-changes")){const F=k.acquire();F.target=this;F.cancellable=!1;F.type=J;this.emit("after-changes",F);k.release(F)}this._observable.notify()};L._notifyChangeEvent=function(J,F){this.hasEventListener("change")&&
this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:J,removed:F})};L._dispatchChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var J=this._notifications;this._notifications=null;for(const F of J){J=F.changes;w.clear();y.clear();C.clear();for(const {added:S,removed:X}of J){if(S)if(0===C.size&&0===y.size)for(const aa of S)w.add(aa);else for(const aa of S)y.has(aa)?(C.add(aa),y.delete(aa)):C.has(aa)||w.add(aa);if(X)if(0===
C.size&&0===w.size)for(const aa of X)y.add(aa);else for(const aa of X)w.has(aa)?w.delete(aa):(C.delete(aa),y.add(aa))}const K=z.acquire();w.forEach(S=>{K.push(S)});const M=z.acquire();y.forEach(S=>{M.push(S)});const R=this._items,T=F.items,Q=z.acquire();C.forEach(S=>{T.indexOf(S)!==R.indexOf(S)&&Q.push(S)});if(F.listeners&&(K.length||M.length||Q.length)){J={target:this,added:K,removed:M,moved:Q};const S=F.listeners.length;for(let X=0;X<S;X++){const aa=F.listeners[X];aa.removed||aa.callback.call(this,
J)}}z.release(K);z.release(M);z.release(Q)}w.clear();y.clear();C.clear()}};n._createClass(I,[{key:"items",get:function(){f.trackAccess(this._observable);return this._items},set:function(J){this._emitBeforeChanges(1)||(this._splice(0,this.length,...g(J)),this._emitAfterChanges(1))}}]);return I}(x.EventedAccessor,Symbol.iterator);D.ofType=E=>{if(!E)return d;if(B.has(E))return B.get(E);var G=null;if("function"===typeof E)G=E.prototype.declaredClass;else if(E.base)G=E.base.prototype.declaredClass;else for(var I in E.typeMap){const L=
E.typeMap[I].prototype.declaredClass;G=G?G+` | ${L}`:L}I=function(L){function J(){return L.apply(this,arguments)||this}n._inheritsLoose(J,L);return J}(d);I=c.__decorate([l.subclass(`esri.core.Collection<${G}>`)],I);G={Type:E,ensureType:"function"===typeof E?p.ensureType(E):p.ensureOneOfType(E)};Object.defineProperty(I.prototype,"itemType",{value:G});B.set(E,I);return I};c.__decorate([q.property()],D.prototype,"length",void 0);c.__decorate([q.property()],D.prototype,"items",null);return D=d=c.__decorate([l.subclass("esri.core.Collection")],
D)})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(n,c,z,x,r){let u=function(){function m(){this._emitter=new m.EventEmitter(this)}var v=m.prototype;v.emit=function(p,f){return this._emitter.emit(p,f)};v.on=function(p,f){return this._emitter.on(p,f)};v.once=function(p,f){return this._emitter.once(p,f)};v.hasEventListener=function(p){return this._emitter.hasEventListener(p)};
return m}();(function(m){let v=function(){function f(l=null){this.target=l;this._listenersMap=null}var q=f.prototype;q.clear=function(){this._listenersMap&&this._listenersMap.clear();this._listenersMap=null};q.emit=function(l,t){l=this._listenersMap&&this._listenersMap.get(l);if(!l)return!1;const g=this.target||this;[...l].forEach(a=>{a.call(g,t)});return 0<l.length};q.on=function(l,t){if(Array.isArray(l)){var g=l.map(a=>this.on(a,t));return x.handlesGroup(g)}if(-1<l.indexOf(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");
this._listenersMap||(this._listenersMap=new Map);g=this._listenersMap.get(l)||[];g.push(t);this._listenersMap.set(l,g);return{remove:()=>{const a=this._listenersMap&&this._listenersMap.get(l)||[],b=a.indexOf(t);0<=b&&a.splice(b,1)}}};q.once=function(l,t){const g=this.on(l,a=>{g.remove();t.call(null,a)});return g};q.hasEventListener=function(l){l=this._listenersMap&&this._listenersMap.get(l);return null!=l&&0<l.length};return f}();m.EventEmitter=v;m.EventedMixin=f=>{f=function(q){function l(){var g=
q.apply(this,arguments)||this;g._emitter=new v;return g}n._inheritsLoose(l,q);var t=l.prototype;t.destroy=function(){this._emitter.clear()};t.emit=function(g,a){return this._emitter.emit(g,a)};t.on=function(g,a){return this._emitter.on(g,a)};t.once=function(g,a){return this._emitter.once(g,a)};t.hasEventListener=function(g){return this._emitter.hasEventListener(g)};return l}(f);return f=c.__decorate([r.subclass("esri.core.Evented")],f)};let p=function(f){function q(){var t=f.apply(this,arguments)||
this;t._emitter=new u.EventEmitter(n._assertThisInitialized(t));return t}n._inheritsLoose(q,f);var l=q.prototype;l.destroy=function(){this._emitter.clear()};l.emit=function(t,g){return this._emitter.emit(t,g)};l.on=function(t,g){return this._emitter.on(t,g)};l.once=function(t,g){return this._emitter.once(t,g)};l.hasEventListener=function(t){return this._emitter.hasEventListener(t)};return q}(z);p=c.__decorate([r.subclass("esri.core.Evented")],p);m.EventedAccessor=p})(u||(u={}));return u})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports",
"./ObservationHandle"],function(n,c){let z=function(){function x(){this._observers=[]}var r=x.prototype;r.observe=function(u){this._observers.includes(u)||this._observers.push(u);return new c.ObservationHandle(this._observers,u)};r.notify=function(){const u=this._observers.slice();for(let m=0;m<u.length;++m){const v=u[m];v.onInvalidated();v.onCommitted()}};return x}();n.SimpleObservable=z;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/support/WatchUpdatingTracking":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/maybe ../../core/scheduling ../../core/watchUtils ../../core/accessorSupport/get ../../core/accessorSupport/trackingUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l){n.WatchUpdatingTracking=function(t){function g(){var b=t.apply(this,arguments)||this;b.updating=!1;b.handleId=0;b.handles=new r;b.scheduleHandleId=0;b.pendingPromises=new Set;return b}c._inheritsLoose(g,t);var a=g.prototype;a.destroy=function(){this.removeAll();this.handles.destroy()};a.add=function(b,d,h,k=0){const e=0!==(k&1),w=++this.handleId;e||this.installSyncUpdatingWatch(b,d,w);b=0!==(k&2)?v.init(b,d,h,e):b.watch(d,h,e);this.handles.add(b,w);return{remove:()=>
this.handles.remove(w)}};a.addOnCollectionPropertyChange=function(b,d,h,k=0){k=0!==(k&2);const e=++this.handleId;this.handles.add([v.on(b,d,"after-changes",this.createSyncUpdatingCallback()),v.on(b,d,"change",h,k?w=>{h({added:w.items,removed:[],moved:[],target:w})}:void 0)],e);return{remove:()=>{this.handles.remove(e)}}};a.addOnCollectionChange=function(b,d,h=0){h=0!==(h&2);const k=++this.handleId;this.handles.add([b.on("after-changes",this.createSyncUpdatingCallback()),b.on("change",d)],k);h&&d({added:b.items,
removed:[],moved:[],target:b});return{remove:()=>{this.handles.remove(k)}}};a.addPromise=function(b){if(u.isNone(b))return b;const d=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(b)&&(0!==this.pendingPromises.size||this.handles.has(-42)||this._set("updating",!1))}},d);this.pendingPromises.add(b);this._set("updating",!0);const h=()=>this.handles.remove(d);b.then(h,h);return b};a.removeAll=function(){this.pendingPromises.clear();this.handles.removeAll();this._set("updating",
!1)};a.installSyncUpdatingWatch=function(b,d,h){var k=this.createSyncUpdatingCallback();k=f.reaction(()=>p.valueOf(b,d),k);this.handles.add(k,h);return k};a.createSyncUpdatingCallback=function(){return()=>{this.handles.remove(-42);++this.scheduleHandleId;const b=this.scheduleHandleId;this._get("updating")||this._set("updating",!0);this.handles.add(m.schedule(()=>{b===this.scheduleHandleId&&(this._set("updating",0<this.pendingPromises.size),this.handles.remove(-42))}),-42)}};return g}(x);z.__decorate([q.property({readOnly:!0})],
n.WatchUpdatingTracking.prototype,"updating",void 0);n.WatchUpdatingTracking=z.__decorate([l.subclass("esri.views.support.WatchUpdatingTracking")],n.WatchUpdatingTracking);Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/watchUtils":function(){define(["exports","./events","./lang","./promiseUtils"],function(n,c,z,x){function r(a,b,d,h){var k=Array.isArray(b)?b:-1<b.indexOf(",")?b.split(","):[b];b=a.watch(b,d,h);for(const e of k)k=e.trim().replace(g,"$1"),h=a.get(k),d.call(a,h,h,k,a);
return b}function u(a,b,d,h,k){k=a.watch(b,(w,y,C,B)=>{if(!d||d(w))null==h?void 0:h.call(a,w,y,C,B)},k);if(Array.isArray(b))for(var e of b){const w=a.get(e);d&&d(w)&&(null==h?void 0:h.call(a,w,w,b,a))}else e=a.get(b),d&&d(e)&&(null==h?void 0:h.call(a,e,e,b,a));return k}function m(a,b,d,h,k){function e(){B&&(B.remove(),B=null)}const w="function"===typeof h?h:null,y="object"===typeof h?h:null;"boolean"===typeof h&&(k=h);let C=!1,B;const A=x.createDeferred();x.onAbort(y,()=>{e();A.reject(x.createAbortError())});
h={then:A.promise.then.bind(A.promise),catch:A.promise.catch.bind(A.promise),remove:e};Object.freeze(h);B=u(a,b,d,(D,E,G,I)=>{C=!0;e();w&&w.call(a,D,E,G,I);A.resolve({value:D,oldValue:E,propertyName:G,target:I})},k);C&&e();return h}function v(a){return!!a}function p(a){return!a}function f(a){return!0===a}function q(a){return!1===a}function l(a){return void 0!==a}function t(a){return void 0===a}const g=/\?(\.|$)/g;n.init=r;n.on=function(a,b,d,h,k,e,w){function y(A){const D=C[A];D&&(e&&e(D.target,A,
a,d),D.handle.remove(),delete C[A])}const C={},B=r(a,b,(A,D,E)=>{y(E);c.isEventTarget(A)&&(C[E]={handle:c.on(A,d,h),target:A},k&&k(A,E,a,d))},w);return{remove(){B.remove();for(const A in C)y(A)}}};n.once=function(a,b,d,h){return m(a,b,null,d,h)};n.pausable=function(a,b,d,h){let k=!1;const e=a.watch(b,(w,y,C,B)=>{k||d.call(a,w,y,C,B)},h);return{remove(){e.remove()},pause(){k=!0},resume(){k=!1}}};n.watch=function(a,b,d,h){return a.watch(b,d,h)};n.when=function(a,b,d,h){return u(a,b,v,d,h)};n.whenDefined=
function(a,b,d,h){return u(a,b,l,d,h)};n.whenDefinedOnce=function(a,b,d,h){return m(a,b,l,d,h)};n.whenEqual=function(a,b,d,h,k){return u(a,b,e=>z.equals(d,e),h,k)};n.whenEqualOnce=function(a,b,d,h,k){return m(a,b,e=>z.equals(d,e),h,k)};n.whenFalse=function(a,b,d,h){return u(a,b,q,d,h)};n.whenFalseOnce=function(a,b,d,h){return m(a,b,q,d,h)};n.whenNot=function(a,b,d,h){return u(a,b,p,d,h)};n.whenNotOnce=function(a,b,d,h){return m(a,b,p,d,h)};n.whenOnce=function(a,b,d,h){return m(a,b,v,d,h)};n.whenTrue=
function(a,b,d,h){return u(a,b,f,d,h)};n.whenTrueOnce=function(a,b,d,h){return m(a,b,f,d,h)};n.whenUndefined=function(a,b,d,h){return u(a,b,t,d,h)};n.whenUndefinedOnce=function(a,b,d,h){return m(a,b,t,d,h)};n.whenValidOnce=m;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/maybe ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a,b,d,h,k){var e;z=new z.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});x=e=function(w){function y(B){B=w.call(this,B)||this;B.dpi=96;B.format=null;B.origin=null;B.minScale=0;B.maxScale=0;B.size=null;B.spatialReference=null;return B}n._inheritsLoose(y,w);y.create=function(B=
{}){const {resolutionFactor:A=1,scales:D,size:E=256,spatialReference:G=a.WebMercator,numLODs:I=24}=B;if(!d.isValid(G)){B=[];if(D)for(var L=0;L<D.length;L++){var J=D[L];B.push({level:L,scale:J,resolution:J})}else for(L=5E-4,J=I-1;0<=J;J--)B.unshift({level:J,scale:L,resolution:L}),L*=2;return new e({dpi:96,lods:B,origin:new g(0,0,G),size:[E,E],spatialReference:G})}L=d.getInfo(G);B=B.origin?new g({x:B.origin.x,y:B.origin.y,spatialReference:G}):L?new g({x:L.origin[0],y:L.origin[1],spatialReference:G}):
new g({x:0,y:0,spatialReference:G});L=1/(39.37*u.getMetersPerUnitForSR(G)*96);J=[];if(D)for(var F=0;F<D.length;F++){var K=D[F];J.push({level:F,scale:K,resolution:K*L})}else{var M=d.isGeographic(G)?512/E*5.916575275917094E8:256/E*5.91657527591555E8;F=Math.ceil(I/A);J.push({level:0,scale:M,resolution:M*L});for(K=1;K<F;K++)M/=2**A,J.push({level:K,scale:M,resolution:M*L})}return new e({dpi:96,lods:J,origin:B,size:[E,E],spatialReference:G})};var C=y.prototype;C.readOrigin=function(B,A){return g.fromJSON({spatialReference:A.spatialReference,
...B})};C.readSize=function(B,A){return[A.cols,A.rows]};C.writeSize=function(B,A){A.cols=B[0];A.rows=B[1]};C.zoomToScale=function(B){const A=this.scales;if(0>=B)return A[0];if(B>=A.length-1)return A[A.length-1];{const D=Math.floor(B);return A[D]/(A[D]/A[D+1])**(B-D)}};C.scaleToZoom=function(B){const A=this.scales,D=A.length-1;let E=0;for(;E<D;E++){const G=A[E],I=A[E+1];if(G<=B)break;if(I===B)return E+1;if(G>B&&I<B)return E+Math.log(G/B)/Math.log(G/I)}return E};C.snapScale=function(B,A=.95){B=this.scaleToZoom(B);
return B%Math.floor(B)>=A?this.zoomToScale(Math.ceil(B)):this.zoomToScale(Math.floor(B))};C.tileAt=function(B,A,D,E){var G=this.lodAt(B);if(!G)return null;let I;if("number"===typeof A)I=A,A=D;else{if(d.equals(A.spatialReference,this.spatialReference))I=A.x,A=A.y;else{E=h.project(A,this.spatialReference);if(r.isNone(E))return null;I=E.x;A=E.y}E=D}D=G.resolution*this.size[0];G=G.resolution*this.size[1];E||(E={id:null,level:0,row:0,col:0,extent:b.create()});E.level=B;E.row=Math.floor((this.origin.y-
A)/G+.001);E.col=Math.floor((I-this.origin.x)/D+.001);this.updateTileInfo(E);return E};C.updateTileInfo=function(B,A=0){var D=this.lodAt(B.level);D||1!==A||(A=this.lods[this.lods.length-1],A.level<B.level&&(D=A));if(D){var E=B.level-D.level;A=D.resolution*this.size[0]/2**E;D=D.resolution*this.size[1]/2**E;B.id=`${B.level}/${B.row}/${B.col}`;B.extent||(B.extent=b.create());B.extent[0]=this.origin.x+B.col*A;B.extent[1]=this.origin.y-(B.row+1)*D;B.extent[2]=B.extent[0]+A;B.extent[3]=B.extent[1]+D}};
C.upsampleTile=function(B){const A=this._upsampleLevels[B.level];if(!A||-1===A.parentLevel)return!1;B.level=A.parentLevel;B.row=Math.floor(B.row/A.factor+.001);B.col=Math.floor(B.col/A.factor+.001);this.updateTileInfo(B);return!0};C.getTileBounds=function(B,A){var {resolution:D}=this.lodAt(A.level);const E=D*this.size[0];D*=this.size[1];B[0]=this.origin.x+A.col*E;B[1]=this.origin.y-(A.row+1)*D;B[2]=B[0]+E;B[3]=B[1]+D;return B};C.lodAt=function(B){return this._levelToLOD&&this._levelToLOD[B]||null};
C.clone=function(){return e.fromJSON(this.write({}))};C._initializeUpsampleLevels=function(){const B=this.lods;this._upsampleLevels=[];let A=null;for(let D=0;D<B.length;D++){const E=B[D];this._upsampleLevels[E.level]={parentLevel:A?A.level:-1,factor:A?A.resolution/E.resolution:0};A=E}};n._createClass(y,[{key:"isWrappable",get:function(){const {spatialReference:B,origin:A}=this;if(B&&A){const D=d.getInfo(B);return B.isWrappable&&Math.abs(D.origin[0]-A.x)<=D.dx}return!1}},{key:"lods",set:function(B){let A=
0,D=0;const E=[];this._levelToLOD={};B&&(A=-Infinity,D=Infinity,B.forEach(G=>{E.push(G.scale);A=G.scale>A?G.scale:A;D=G.scale<D?G.scale:D;this._levelToLOD[G.level]=G}));this._set("scales",E);this._set("minScale",A);this._set("maxScale",D);this._set("lods",B);this._initializeUpsampleLevels()}}]);return y}(x.JSONSupport);c.__decorate([m.property({type:Number,json:{write:!0}})],x.prototype,"compressionQuality",void 0);c.__decorate([m.property({type:Number,json:{write:!0}})],x.prototype,"dpi",void 0);
c.__decorate([m.property({type:String,json:{read:z.read,write:z.write,origins:{"web-scene":{read:!1,write:!1}}}})],x.prototype,"format",void 0);c.__decorate([m.property({readOnly:!0})],x.prototype,"isWrappable",null);c.__decorate([m.property({type:g,json:{write:!0}})],x.prototype,"origin",void 0);c.__decorate([q.reader("origin")],x.prototype,"readOrigin",null);c.__decorate([m.property({type:[k],value:null,json:{write:!0}})],x.prototype,"lods",null);c.__decorate([m.property({readOnly:!0})],x.prototype,
"minScale",void 0);c.__decorate([m.property({readOnly:!0})],x.prototype,"maxScale",void 0);c.__decorate([m.property({readOnly:!0})],x.prototype,"scales",void 0);c.__decorate([m.property({cast:w=>Array.isArray(w)?w:"number"===typeof w?[w,w]:[256,256]})],x.prototype,"size",void 0);c.__decorate([q.reader("size",["rows","cols"])],x.prototype,"readSize",null);c.__decorate([t.writer("size",{cols:{type:p.Integer},rows:{type:p.Integer}})],x.prototype,"writeSize",null);c.__decorate([m.property({type:a,json:{write:!0}})],
x.prototype,"spatialReference",void 0);return x=e=c.__decorate([l.subclass("esri.layers.support.TileInfo")],x)})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ../geometry/projectionEllipsoid ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/support/spatialReferenceUtils ../geometry/support/WKIDUnitConversion".split(" "),function(n,c,z,x,r,u,m,v){function p(J){if(J=G[J])return J;throw Error("unknown measure");}function f(J){return E[J].baseUnit}function q(J,
F=null){F=F||p(J);return E[F].baseUnit===J}function l(J,F,K){if(F===K)return J;const M=p(F);if(M!==p(K))throw Error("incompatible units");J=q(F,M)?J:J*E[M].units[F].inBaseUnits;return q(K,M)?J:J/E[M].units[K].inBaseUnits}function t(J,F){return 3E3>l(J,F,"meters")?"meters":"kilometers"}function g(J,F){return 1E5>l(J,F,"meters")?"meters":"kilometers"}function a(J,F){return 1E3>l(J,F,"feet")?"feet":"miles"}function b(J,F){return 1E5>l(J,F,"feet")?"feet":"miles"}function d(J){return D.fromJSON(J.toLowerCase())||
null}function h(J,F=u.earth.metersPerDegree){return k(J,!0)||F}function k(J,F=!1){let K,M,R=null;null!=J&&("object"===typeof J?(K=J.wkid,M=J.wkt):"number"===typeof J?K=J:"string"===typeof J&&(M=J));if(K){if(m.isWKIDFromMars(K))return u.mars.metersPerDegree;if(m.isWKIDFromMoon(K))return u.moon.metersPerDegree;R=C.values[C[K]];!R&&F&&A.has(K)&&(R=w)}else M&&(-1!==M.search(/^PROJCS/i)?(J=y.exec(M))&&J[1]&&(R=parseFloat(J[1].split(",")[1])):-1!==M.search(/^GEOCCS/i)&&(J=B.exec(M))&&J[1]&&(R=parseFloat(J[1].split(",")[1])));
return R}function e(J){let F,K,M=null;null!=J&&("object"===typeof J?(F=J.wkid,K=J.wkt):"number"===typeof J?F=J:"string"===typeof J&&(K=J));F?M=C.units[C[F]]:K&&-1!==K.search(/^PROJCS/i)&&(J=y.exec(K))&&J[1]&&(M=(J=/[\\"\\']{1}([^\\"\\']+)/.exec(J[1]))&&J[1]);return M?d(M):null}const w=u.earth.radius*Math.PI/200,y=/UNIT\[([^\]]+)\]\]$/i,C=v,B=/UNIT\[([^\]]+)\]/i,A=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),D=z.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",
foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});c={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},
meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};v={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},
"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(J=>J*J)(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};const E={length:{baseUnit:"meters",units:c},area:{baseUnit:"square-meters",units:v},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},
"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},G=function(){const J={};for(const F in E)for(const K in E[F].units)J[K]=F;return J}(),I={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",
esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},L={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",
esriYards:"yards"};c=z.strict()(I);v=z.strict()(L);z=z.strict()({...I,...L});n.areaUnitsJSONMap=c;n.baseUnitForMeasure=f;n.baseUnitForUnit=function(J){return f(p(J))};n.convertUnit=l;n.getDefaultUnitSystem=function(J){if(!J)return null;switch(e(J)){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";
case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null};n.getMetersPerUnit=k;n.getMetersPerUnitForSR=h;n.getMetersPerVerticalUnitForSR=function(J){if(J&&"object"===typeof J&&!m.isEarth(J))return 1;J=h(J);return 1E5<J?1:J};n.getUnitString=e;n.getVerticalUnitStringForSR=function(J){const F=h(J),K=J instanceof r?x.getReferenceEllipsoid(J).metersPerDegree:1E5;return F>=K?"meters":e(J)};n.inchesPerMeter=39.37;n.isBaseUnit=q;n.isMeasurementSystem=function(J){return"imperial"===
J||"metric"===J};n.lengthToDegrees=function(J,F,K){return l(J,F,"meters")/(K*Math.PI/180)};n.lengthUnitsJSONMap=v;n.measureForUnit=p;n.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");n.measurementLengthUnits="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" ");n.preferredImperialAreaUnit=function(J,F){return 1E6>l(J,F,"square-feet")?"square-feet":
"square-miles"};n.preferredImperialLengthUnit=a;n.preferredImperialVerticalLengthUnit=b;n.preferredLengthUnit=function(J,F,K){switch(K){case "metric":return t(J,F);case "imperial":return a(J,F);default:return K}};n.preferredMetricAreaUnit=function(J,F){return 3E6>l(J,F,"square-meters")?"square-meters":"square-kilometers"};n.preferredMetricLengthUnit=t;n.preferredMetricVerticalLengthUnit=g;n.preferredVerticalLengthUnit=function(J,F,K){switch(K){case "metric":return g(J,F);case "imperial":return b(J,
F);default:return K}};n.unitFromRESTJSON=d;n.unitToRESTJSON=function(J){return D.toJSON(J)||null};n.unitsJSONMap=z;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","./SpatialReference","./support/Ellipsoid","./support/spatialReferenceUtils"],function(n,c,z,x){function r(f){return new c({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${f.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}
const u=r(z.earth),m=r(z.mars),v=r(z.moon),p=new c({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${z.earth.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});n.SphericalECEFSpatialReference=u;n.SphericalPCPFMars=
m;n.SphericalPCPFMoon=v;n.WGS84ECEFSpatialReference=p;n.createSphericalPCPF=r;n.getReferenceEllipsoid=function(f){return f&&(x.isMars(f)||f===m)?z.mars:f&&(x.isMoon(f)||f===v)?z.moon:z.earth};n.getReferenceEllipsoidFromWKID=function(f){return x.isWKIDFromMars(f)?z.mars:x.isWKIDFromMoon(f)?z.moon:z.earth};n.getSphericalPCPF=function(f){return f&&(x.isMars(f)||f===m)?m:f&&(x.isMoon(f)||f===v)?v:u};n.getSphericalPCPFForEllipsoid=function(f){return f&&f===z.mars?m:f&&f===z.moon?v:u};Object.defineProperty(n,
"__esModule",{value:!0})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../Extent"],function(n,c,z,x,r){function u(g=t){return[g[0],g[1],g[2],g[3]]}function m(g,a){g!==a&&(g[0]=a[0],g[1]=a[1],g[2]=a[2],g[3]=a[3]);return g}function v(g){return x.isNone(g)||g[0]>=g[2]?0:g[2]-g[0]}function p(g){return g[1]>=g[3]?0:g[3]-g[1]}function f(g,a,b){return a>=g[0]&&b>=g[1]&&a<=g[2]&&b<=g[3]}function q(g){return null!=g&&4===
g.length}const l=[Infinity,Infinity,-Infinity,-Infinity],t=[0,0,0,0];n.NEGATIVE_INFINITY=l;n.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];n.UNIT=[0,0,1,1];n.ZERO=t;n.allFinite=function(g){for(let a=0;4>a;a++)if(!isFinite(g[a]))return!1;return!0};n.area=function(g){return v(g)*p(g)};n.center=function(g,a=[0,0]){a[0]=(g[0]+g[2])/2;a[1]=(g[1]+g[3])/2;return a};n.clone=function(g){return[g[0],g[1],g[2],g[3]]};n.contains=function(g,a){return a[0]>=g[0]&&a[2]<=g[2]&&a[1]>=g[1]&&a[3]<=g[3]};
n.containsPoint=function(g,a){return f(g,a[0],a[1])};n.containsPointObject=function(g,a){return f(g,a.x,a.y)};n.containsPointWithMargin=function(g,a,b){return a[0]>=g[0]-b&&a[1]>=g[1]-b&&a[0]<=g[2]+b&&a[1]<=g[3]+b};n.containsXY=f;n.copy=m;n.create=u;n.distance=function(g,a){const b=(g[1]+g[3])/2,d=Math.max(Math.abs(a[0]-(g[0]+g[2])/2)-v(g)/2,0);g=Math.max(Math.abs(a[1]-b)-p(g)/2,0);return Math.sqrt(d*d+g*g)};n.empty=function(g){return g?m(g,l):u(l)};n.equals=function(g,a){return q(g)&&q(a)?g[0]===
a[0]&&g[1]===a[1]&&g[2]===a[2]&&g[3]===a[3]:g===a};n.expand=function(g,a,b){if(x.isNone(a))m(b,g);else if("length"in a)if(q(a))b[0]=Math.min(g[0],a[0]),b[1]=Math.min(g[1],a[1]),b[2]=Math.max(g[2],a[2]),b[3]=Math.max(g[3],a[3]);else{if(2===a.length||3===a.length)b[0]=Math.min(g[0],a[0]),b[1]=Math.min(g[1],a[1]),b[2]=Math.max(g[2],a[0]),b[3]=Math.max(g[3],a[1])}else switch(a.type){case "extent":b[0]=Math.min(g[0],a.xmin);b[1]=Math.min(g[1],a.ymin);b[2]=Math.max(g[2],a.xmax);b[3]=Math.max(g[3],a.ymax);
break;case "point":b[0]=Math.min(g[0],a.x),b[1]=Math.min(g[1],a.y),b[2]=Math.max(g[2],a.x),b[3]=Math.max(g[3],a.y)}};n.expandPointInPlace=function(g,a){a[0]<g[0]&&(g[0]=a[0]);a[0]>g[2]&&(g[2]=a[0]);a[1]<g[1]&&(g[1]=a[1]);a[1]>g[3]&&(g[3]=a[1])};n.expandWithNestedArray=function(g,a,b=g){const d=a.length;let h=g[0],k=g[1],e=g[2];g=g[3];for(let w=0;w<d;w++){const y=a[w];h=Math.min(h,y[0]);k=Math.min(k,y[1]);e=Math.max(e,y[0]);g=Math.max(g,y[1])}b[0]=h;b[1]=k;b[2]=e;b[3]=g;return b};n.fromExtent=function(g,
a=u()){a[0]=g.xmin;a[1]=g.ymin;a[2]=g.xmax;a[3]=g.ymax;return a};n.fromValues=function(g,a,b,d,h=u()){h[0]=g;h[1]=a;h[2]=b;h[3]=d;return h};n.height=p;n.intersection=function(g,a,b){if(x.isNone(a))return m(b,g);const d=a[0],h=a[1],k=a[2];a=a[3];b[0]=z.clamp(g[0],d,k);b[1]=z.clamp(g[1],h,a);b[2]=z.clamp(g[2],d,k);b[3]=z.clamp(g[3],h,a);return b};n.intersects=function(g,a){return Math.max(a[0],g[0])<=Math.min(a[2],g[2])&&Math.max(a[1],g[1])<=Math.min(a[3],g[3])};n.is=q;n.isPoint=function(g){return(0===
v(g)||!isFinite(g[0]))&&(0===p(g)||!isFinite(g[1]))};n.offset=function(g,a,b,d=g){d[0]=g[0]+a;d[1]=g[1]+b;d[2]=g[2]+a;d[3]=g[3]+b;return d};n.pad=function(g,a,b=g){b[0]=g[0]-a;b[1]=g[1]-a;b[2]=g[2]+a;b[3]=g[3]+a;return b};n.setMax=function(g,a,b=g){b[2]=a[0];b[3]=a[1];b!==g&&(b[0]=g[0],b[1]=g[1]);return g};n.setMin=function(g,a,b=g){b[0]=a[0];b[1]=a[1];b!==g&&(b[2]=g[2],b[3]=g[3]);return b};n.size=function(g,a){a[0]=g[2]-g[0];a[1]=g[3]-g[1]};n.toExtent=function(g,a){return new r({xmin:g[0],ymin:g[1],
xmax:g[2],ymax:g[3],spatialReference:a})};n.width=v;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),function(n,c,z,x,r,u,m,v){var p;z=p=function(f){function q(l){l=f.call(this,l)||this;l.cols=
null;l.level=0;l.levelValue=null;l.resolution=0;l.rows=null;l.scale=0;return l}n._inheritsLoose(q,f);q.prototype.clone=function(){return new p({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})};return q}(z.JSONSupport);c.__decorate([x.property({type:Number,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],z.prototype,"cols",void 0);c.__decorate([x.property({type:u.Integer,json:{write:!0}})],
z.prototype,"level",void 0);c.__decorate([x.property({type:String,json:{write:!0}})],z.prototype,"levelValue",void 0);c.__decorate([x.property({type:Number,json:{write:!0}})],z.prototype,"resolution",void 0);c.__decorate([x.property({type:Number,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],z.prototype,"rows",void 0);c.__decorate([x.property({type:Number,json:{write:!0}})],z.prototype,"scale",void 0);return z=p=c.__decorate([v.subclass("esri.layers.support.LOD")],
z)})},"esri/views/2d/layers/features/processors":function(){define(["require","exports"],function(n,c){c.loadProcessorModule=function(z){return"heatmap"===z?new Promise(function(x,r){n(["./processors/HeatmapProcessor"],function(u){x(Object.freeze({__proto__:null,default:u}))},r)}):new Promise(function(x,r){n(["./processors/SymbolProcessor"],function(u){x(Object.freeze({__proto__:null,default:u}))},r)})};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/views/2d/layers/features/controllers/FeatureController2D":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/HandleOwner ../../../../../core/has ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/watchUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/Logger ../../../../../core/accessorSupport/decorators/subclass ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/data/QueryEngine ../../../../../layers/support/FieldsIndex ../FeatureStore2D ../sources/createSource ../support/AttributeStore ../support/ClusterStore ../support/ComputedAttributeStorage ../support/FeatureSetReaderJSON ../support/UpdateToken ../../../../support/QueueProcessor".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a,b,d,h,k,e,w,y){function C(A){if(!u.isAbortError(A)&&"worker:port-closed"!==A.name)throw A;}function B(A){return"feature"===A.type&&"snapshot"===A.mode}z=function(A){function D(){var G=A.apply(this,arguments)||this;G._storage=new k.ComputedAttributeStorage;G._markedIdsBufId=G._storage.createBitset();G._lastCleanup=performance.now();G._cleanupNeeded=!1;G._invalidated=!1;G._tileToResolver=new Map;G._didEdit=!1;G.tileStore=null;G.config=null;G.processor=null;G.remoteClient=
null;G.service=null;return G}n._inheritsLoose(D,A);var E=D.prototype;E.initialize=function(){this._initAttributeStore();this._initStores();this._initQueryEngine();this._initSource();this._updateQueue=new y.QueueProcessor({concurrency:"geoevent"===this._source.type?1:4,process:(G,I)=>this._onTileMessage(G,{signal:I})});this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this)),this.watch("updating",G=>!G&&this.onIdle())]);this._checkUpdating=setInterval(()=>this.notifyChange("updating"),
300)};E.startup=function(){var G=n._asyncToGenerator(function*(){this._initAttributeStore();this.tileStore.tiles.forEach(I=>this._source.subscribe(I))});return function(){return G.apply(this,arguments)}}();E._initSource=function(){this._source=b.createSource(this.service,this.spatialReference,this.tileStore.tileScheme,(G,I)=>{this._invalidated=!0;return this._patchTile(G,I)},()=>50>this._updateQueue.length,this.featureStore);this._proxyEvents()};E._proxyEvents=function(){if("geoevent"===this._source.type){const G=
this._source.events;this.handles.add([G.on("connectionStatus",I=>this.remoteClient.invoke("setProperty",{propertyName:"connectionStatus",value:I}).catch(C)),G.on("errorString",I=>this.remoteClient.invoke("setProperty",{propertyName:"errorString",value:I}).catch(C)),G.on("feature",I=>this.remoteClient.invoke("emitEvent",{name:"data-received",event:{attributes:I.attributes,centroid:I.centroid,geometry:I.geometry}}).catch(C)),G.on("updateRate",I=>this.remoteClient.invoke("emitEvent",{name:"update-rate",
event:{...I}}).catch(C))])}};E._initAttributeStore=function(){this.attributeStore?this.attributeStore.invalidateResources():this.attributeStore=new d["default"]({type:"remote",initialize:(G,I)=>u.ignoreAbortErrors(this.remoteClient.invoke("tileRenderer.featuresView.attributeView.initialize",G,{signal:I}).catch(C)),update:(G,I)=>u.ignoreAbortErrors(this.remoteClient.invoke("tileRenderer.featuresView.attributeView.requestUpdate",G,{signal:I}).catch(C)),render:G=>u.ignoreAbortErrors(this.remoteClient.invoke("tileRenderer.featuresView.requestRender",
void 0,{signal:G}).catch(C))},this.config)};E._initStores=function(){const G={geometryInfo:{geometryType:this.service.geometryType,hasM:!1,hasZ:!1},spatialReference:this.spatialReference,fieldsIndex:this.fieldsIndex,fields:this.service.fields};this.featureStore=new a.FeatureStore2D(G,this._storage,"snapshot"===this.service.type?"snapshot":"on-demand");this.aggregateStore=new h.ClusterStore(G,this.spatialReference,this._storage);this.handles.add(this.aggregateStore.events.on("valueRangesChanged",I=>
{this.remoteClient.invoke("emitEvent",{name:"valueRangesChanged",event:{valueRanges:I.valueRanges}}).catch(C)}))};E._initQueryEngine=function(){var G;const I=this;null==(G=this.queryEngine)?void 0:G.destroy();this.queryEngine=new t["default"]({definitionExpression:this.config.definitionExpression,fields:this.service.fields,geometryType:this.service.geometryType,objectIdField:this.service.objectIdField,hasM:!1,hasZ:!1,spatialReference:this.spatialReference.toJSON(),cacheSpatialQueries:!0,featureStore:this.featureStore,
aggregateAdapter:{getFeatureObjectIds(L){return I.aggregateStore.getFeatureDisplayIdsForAggregate(L).map(J=>I.getObjectId(J))}},timeInfo:this.service.timeInfo})};E.destroy=function(){this._updateQueue.destroy();this._source.destroy();this.queryEngine.destroy();this.attributeStore&&this.attributeStore.destroy();clearInterval(this._checkUpdating)};E.isUpdating=function(){return this._source.updating||!!this._updateQueue.length};E.enableEvent=function(G){this._source.enableEvent(G.name,G.value)};E.pause=
function(){this._updateQueue.pause();this._updateQueue.clear()};E.update=function(){var G=n._asyncToGenerator(function*(I,L){this._set("config",L);this._schema=L.schema;this._initQueryEngine();yield Promise.all([this._source.update(I,L.schema.source),this.featureStore.updateSchema(I,L.schema.targets.feature),this.attributeStore.update(I,L),this.attributeStore.updateFilters(I,this)]);yield this.aggregateStore.updateSchema(I,L.schema.targets.aggregate);x("esri-2d-update-debug")&&I.describe()});return function(I,
L){return G.apply(this,arguments)}}();E.applyUpdate=function(){var G=n._asyncToGenerator(function*(I){I.mesh&&this.clearTiles();this._updateQueue.resume();yield this._source.applyUpdate(I);this.notifyChange("updating");yield m.whenFalseOnce(this,"updating",!0);this.hasAggregates&&(yield u.after(10),yield m.whenFalseOnce(this,"updating",!0))});return function(I){return G.apply(this,arguments)}}();E.onEdits=function(){var G=n._asyncToGenerator(function*({edits:I}){x("esri-2d-update-debug")&&console.debug("Applying Edit:",
I);this._didEdit=!0;try{const L=I.removed.map(F=>F.objectId&&-1!==F.objectId?F.objectId:this._lookupObjectIdByGlobalId(F.globalId)),J=I.addOrModified.map(({objectId:F})=>F);this.featureStore.invalidate();yield this._source.edit(J,L);this.clearTiles();this.notifyChange("updating");this.aggregateStore.clear();yield this._source.resend();yield m.whenFalseOnce(this,"updating",!0)}catch(L){}});return function(I){return G.apply(this,arguments)}}();E.refresh=function(){var G=n._asyncToGenerator(function*(){this.featureStore.invalidate();
this.clearTiles();this._source.refresh();this._cleanupNeeded=!0;this.notifyChange("updating");yield m.whenFalseOnce(this,"updating",!0)});return function(){return G.apply(this,arguments)}}();E.clearTiles=function(){for(const G of this.tileStore.tiles)this.processor.onTileClear(G)};E.onTileUpdate=function(G){this.aggregateStore.onTileUpdate(G);for(const I of G.added)this._source.subscribe(I),this._level=I.level;for(const I of G.removed)this._source.unsubscribe(I),this._cleanupNeeded=!0,this._tileToResolver.has(I.id)&&
(this._tileToResolver.get(I.id).resolve(),this._tileToResolver.delete(I.id));this.notifyChange("updating")};E.onIdle=function(){this._invalidated&&((this.hasAggregates||"heatmap"===this.processor.type)&&this._repushCurrentLevelTiles(),this._invalidated=!1);this._markAndSweep()};E.querySummaryStatistics=function(){var G=n._asyncToGenerator(function*({query:I,params:L}){return this.queryEngine.executeQueryForSummaryStatistics(I,L)});return function(I){return G.apply(this,arguments)}}();E.queryExtent=
function(G){return this.queryEngine.executeQueryForExtent(G)};E.queryFeatures=function(G){return this.queryEngine.executeQuery(G)};E.queryFeatureCount=function(G){return this.queryEngine.executeQueryForCount(G)};E.queryLatestObservations=function(G){return this.queryEngine.executeQueryForLatestObservations(G)};E.queryObjectIds=function(G){return this.queryEngine.executeQueryForIds(G)};E.queryStatistics=function(){var G=n._asyncToGenerator(function*(){return this.featureStore.storeStatistics});return function(){return G.apply(this,
arguments)}}();E.getObjectId=function(G){return this.featureStore.lookupObjectId(G,this._storage)};E.getDisplayId=function(G){if(this._schema.targets.aggregate){const I=this.aggregateStore.getDisplayId(G);return r.isNone(I)?(G=this.featureStore.lookupDisplayId(G),this.aggregateStore.getDisplayIdForReferenceId(G)):I}return this.featureStore.lookupDisplayId(G)};E.getFeature=function(G){G=this.featureStore.lookupFeatureByDisplayId(G,this._storage);if(r.isNone(G))return null;var I=G.readHydratedGeometry();
I=l.convertToGeometry(I,G.geometryType,G.hasZ,G.hasM);return{attributes:G.readAttributes(),geometry:I}};E.getAggregate=function(G){return this.aggregateStore.getAggregate(G)};E.getAggregates=function(){return this.aggregateStore.getAggregates()};E.setHighlight=function(){var G=n._asyncToGenerator(function*(I){const L=I.map(J=>this.getDisplayId(J));return this.attributeStore.setHighlight(I,L)});return function(I){return G.apply(this,arguments)}}();E._lookupObjectIdByGlobalId=function(G){const I=this.service.globalIdField;
if(r.isNone(I))throw Error("Expected globalIdField to be defined");let L=null;this.featureStore.forEach(J=>{G===J.readAttribute(I)&&(L=J.getObjectId())});if(r.isNone(L))throw Error(`Expected to find a feature with globalId ${G}`);return L};E._repushCurrentLevelTiles=function(){const G=this.tileStore.tiles.filter(I=>I.level===this._level);for(const I of G)this._patchTile({type:"append",id:I.key.id,addOrUpdate:e.FeatureSetReaderJSON.fromOptimizedFeatures([],this.service.geometryType),remove:[],end:!0,
status:w.UpdateToken.empty()})};E._maybeForceCleanup=function(){5E3<performance.now()-this._lastCleanup&&this._markAndSweep()};E._patchTile=function(G,I){G=this._updateQueue.push(G,I).then(()=>{this.notifyChange("updating")}).catch(L=>{this.notifyChange("updating")});this.notifyChange("updating");return G};E._onTileMessage=function(){var G=n._asyncToGenerator(function*(I,L){u.throwIfAborted(L);const J=this.tileStore.get(I.id);if(J){if(I.clear)return this.processor.onTileClear(J);var F=I.status;this._cleanupNeeded=
!0;var K=[];for(const M of I.remove){const R=this.featureStore.lookupDisplayId(M);R&&K.push(R)}I.remove=K;try{if(r.isNone(I.addOrUpdate))this.processor.onTileMessage(J,{...I,addOrUpdate:null},this.hasAggregates,L).catch(u.throwIfNotAbortError);else{I.addOrUpdate.setArcadeSpatialReference(this.spatialReference);this.featureStore.hasInstance(I.addOrUpdate.instance)&&F.targets.feature||(F.targets.feature=!0,this.featureStore.onTileData(J,I));F.storage.data&&F.storage.filters||(F.storage.data=!0,F.storage.filters=
!0,this.attributeStore.onTileData(J,I),"geoevent"===this._source.type||this._didEdit?(yield this.attributeStore.sendUpdates(),u.throwIfAborted(L)):this.attributeStore.sendUpdates());if(this.hasAggregates&&!F.targets.aggregate){F.targets.aggregate=!0;const M=B(this._source)&&this._source.loading,R=!B(this._source)||M||I.end;this.aggregateStore.onTileData(J,I,this._storage,this.attributeStore,R);if(!R)return;F.mesh||(this.attributeStore.onTileData(J,I),yield this.attributeStore.sendUpdates(),this.processor.onTileClear(J))}F.mesh||
(F.mesh=!0,yield this.processor.onTileMessage(J,I,this.hasAggregates,L),u.throwIfAborted(L));this._maybeForceCleanup()}}catch(M){u.throwIfNotAbortError(M)}}});return function(I,L){return G.apply(this,arguments)}}();E._mark=function(G,I,L){const J=this._storage.getInstanceId(G);G&&(I.add((4294901760&J)>>>16),L.set(G))};E._markAndSweep=function(){this._lastCleanup=performance.now();if(!("feature"===this._source.type&&"snapshot"===this._source.mode||"geoevent"!==this._source.type&&!this._cleanupNeeded)){this._cleanupNeeded=
!1;var G=this._storage.getBitset(this._markedIdsBufId),I=new Set;G.clear();for(const J of this.tileStore.tiles)for(const F of this._source.readers(J.id)){const K=F.getCursor();for(;K.next();){var L=K.getDisplayId();L||(L=K.getObjectId(),L=this.featureStore.lookupDisplayId(L));this._mark(L,I,G)}}"symbol"===this.processor.type&&this.processor.forEachBufferId(J=>{this._mark(J,I,G)});this._updateQueue.forEach(J=>{for(const F of J.remove)J=this.featureStore.lookupDisplayId(F),this._mark(J,I,G)});this.config.schema.targets.aggregate&&
(this.aggregateStore.sweepFeatures(G,this.featureStore),this.aggregateStore.sweepClusters(this._storage,this.attributeStore,this._level));this.featureStore.sweepFeatures(G,this._storage,this.attributeStore);this.featureStore.sweepFeatureSets(I)}};n._createClass(D,[{key:"fieldsIndex",get:function(){return new g(this.service.fields)}},{key:"hasAggregates",get:function(){return!!this.config.schema.targets.aggregate}},{key:"spatialReference",get:function(){return this.tileStore.tileScheme.spatialReference}},
{key:"updating",get:function(){return this.isUpdating()}}]);return D}(z.HandleOwner);c.__decorate([v.property({constructOnly:!0})],z.prototype,"tileStore",void 0);c.__decorate([v.property()],z.prototype,"config",void 0);c.__decorate([v.property({readOnly:!0})],z.prototype,"fieldsIndex",null);c.__decorate([v.property()],z.prototype,"processor",void 0);c.__decorate([v.property({constructOnly:!0})],z.prototype,"remoteClient",void 0);c.__decorate([v.property({constructOnly:!0})],z.prototype,"service",
void 0);c.__decorate([v.property()],z.prototype,"spatialReference",null);c.__decorate([v.property()],z.prototype,"updating",null);return z=c.__decorate([q.subclass("esri.views.2d.layers.features.controllers.FeatureController2D")],z)})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(n,c,z,x,r,u,m,v){function p(P,
V){return P?V?4:3:V?3:2}function f(P,V,Y,ba){if(P){if(Y)return V&&ba?N:Fa;if(V&&ba)return Ba}else if(V&&ba)return Fa;return va}function q({scale:P,translate:V},Y){return Math.round((Y-V[0])/P[0])}function l({scale:P,translate:V},Y){return Math.round((V[1]-Y)/P[1])}function t({scale:P,translate:V},Y){return Y*P[0]+V[0]}function g({scale:P,translate:V},Y){return V[1]-Y*P[1]}function a(P){P=P.coords;return{x:P[0],y:P[1]}}function b(P,V){P.coords[0]=V.x;P.coords[1]=V.y;return P}function d(P){P=P.coords;
return{x:P[0],y:P[1],z:P[2]}}function h(P,V){P.coords[0]=V.x;P.coords[1]=V.y;P.coords[2]=V.z;return P}function k(P){P=P.coords;return{x:P[0],y:P[1],m:P[2]}}function e(P,V){P.coords[0]=V.x;P.coords[1]=V.y;P.coords[2]=V.m;return P}function w(P){P=P.coords;return{x:P[0],y:P[1],z:P[2],m:P[3]}}function y(P,V){P.coords[0]=V.x;P.coords[1]=V.y;P.coords[2]=V.z;P.coords[3]=V.m;return P}function C(P,V){return P&&V?y:P?h:V?e:b}function B(P,V,Y,ba,fa){Y=C(Y,ba);for(const ha of V){const {geometry:Z,attributes:da}=
ha;let ja;Z&&(ja=Y(new v,Z));P.push(new u["default"](ja,da,null,da[fa]))}return P}function A(P,V,Y,ba){for(const fa of V){const {geometry:ha,attributes:Z}=fa;let da;ha&&(da=D(ha,Y,ba));P.push({attributes:Z,geometry:da})}return P}function D(P,V,Y){if(x.isNone(P))return null;const ba=p(V,Y),fa=[];for(let ha=0;ha<P.coords.length;ha+=ba){const Z=[];for(let da=0;da<ba;da++)Z.push(P.coords[ha+da]);fa.push(Z)}return V?Y?{points:fa,hasZ:V,hasM:Y}:{points:fa,hasZ:V}:Y?{points:fa,hasM:Y}:{points:fa}}function E(P,
V,Y,ba,fa){Y=p(Y,ba);for(const ha of V){V=ha.geometry;ba=ha.attributes;let Z;V&&(Z=G(new v,V,Y));P.push(new u["default"](Z,ba,null,ba[fa]))}return P}function G(P,V,Y=p(V.hasZ,V.hasM)){P.lengths[0]=V.points.length;const ba=P.coords;let fa=0;for(const ha of V.points)for(V=0;V<Y;V++)ba[fa++]=ha[V];return P}function I(P,V,Y){if(!P)return null;const ba=p(V,Y),{coords:fa,lengths:ha}=P;P=[];let Z=0;for(const da of ha){const ja=[];for(let qa=0;qa<da;qa++){const sa=[];for(let ya=0;ya<ba;ya++)sa.push(fa[Z++]);
ja.push(sa)}P.push(ja)}return V?Y?{paths:P,hasZ:V,hasM:Y}:{paths:P,hasZ:V}:Y?{paths:P,hasM:Y}:{paths:P}}function L(P,V,Y,ba,fa){Y=p(Y,ba);for(const ha of V){V=ha.geometry;ba=ha.attributes;let Z;V&&(Z=J(new v,V,Y));P.push(new u["default"](Z,ba,null,ba[fa]))}return P}function J(P,V,Y=p(V.hasZ,V.hasM)){const {lengths:ba,coords:fa}=P;let ha=0;for(const Z of V.paths){for(const da of Z)for(V=0;V<Y;V++)fa[ha++]=da[V];ba.push(Z.length)}return P}function F(P,V,Y){if(!P)return null;const ba=p(V,Y),{coords:fa,
lengths:ha}=P;P=[];let Z=0;for(const da of ha){const ja=[];for(let qa=0;qa<da;qa++){const sa=[];for(let ya=0;ya<ba;ya++)sa.push(fa[Z++]);ja.push(sa)}P.push(ja)}return V?Y?{rings:P,hasZ:V,hasM:Y}:{rings:P,hasZ:V}:Y?{rings:P,hasM:Y}:{rings:P}}function K(P,V,Y,ba,fa){for(const ha of V){V=ha.geometry;const Z=ha.centroid,da=ha.attributes;let ja;V&&(ja=M(new v,V,Y,ba));x.isSome(Z)?P.push(new u["default"](ja,da,b(new v,Z),da[fa])):P.push(new u["default"](ja,da,null,da[fa]))}return P}function M(P,V,Y=V.hasZ,
ba=V.hasM){R(P,V.rings,Y,ba);return P}function R(P,V,Y,ba){Y=p(Y,ba);const {lengths:fa,coords:ha}=P;ba=0;fa.length=ha.length=0;for(const Z of V){for(const da of Z)for(V=0;V<Y;V++)ha[ba++]=da[V];fa.push(Z.length)}return P}function T(P,V,Y,ba,fa,ha){P.length=0;if(!Y){for(const Z of V)P.push(new u["default"](null,Z.attributes,null,Z.attributes[ha]));return P}switch(Y){case "esriGeometryPoint":return B(P,V,ba,fa,ha);case "esriGeometryMultipoint":return E(P,V,ba,fa,ha);case "esriGeometryPolyline":return L(P,
V,ba,fa,ha);case "esriGeometryPolygon":return K(P,V,ba,fa,ha);default:za.error("convertToFeatureSet:unknown-geometry",new c(`Unable to parse unknown geometry type '${Y}'`)),P.length=0}return P}function Q(P,V,Y,ba){P=P&&("coords"in P?P:P.geometry);if(x.isNone(P))return null;switch(V){case "esriGeometryPoint":return V=a,Y&&ba?V=w:Y?V=d:ba&&(V=k),V(P);case "esriGeometryMultipoint":return D(P,Y,ba);case "esriGeometryPolyline":return I(P,Y,ba);case "esriGeometryPolygon":return F(P,Y,ba);default:za.error("convertToGeometry:unknown-geometry",
new c(`Unable to parse unknown geometry type '${V}'`))}}function S(P,V,Y,ba,fa){P.length=0;if(x.isNone(Y)){for(const da of V)P.push({attributes:da.attributes});return P}switch(Y){case "esriGeometryPoint":var ha=a;ba&&fa?ha=w:ba?ha=d:fa&&(ha=k);for(var Z of V){const {geometry:da,attributes:ja}=Z;ba=x.isSome(da)?ha(da):null;P.push({attributes:ja,geometry:ba})}break;case "esriGeometryMultipoint":return A(P,V,ba,fa);case "esriGeometryPolyline":for(const da of V){const {geometry:ja,attributes:qa}=da;let sa;
x.isSome(ja)&&(sa=I(ja,ba,fa));P.push({attributes:qa,geometry:sa})}break;case "esriGeometryPolygon":for(ha of V){const {geometry:da,attributes:ja,centroid:qa}=ha;let sa;x.isSome(da)&&(sa=F(da,ba,fa));qa?(Z=a(qa),P.push({attributes:ja,centroid:Z,geometry:sa})):P.push({attributes:ja,geometry:sa})}break;default:za.error("convertToFeatureSet:unknown-geometry",new c(`Unable to parse unknown geometry type '${Y}'`))}return P}function X(P,V,Y,ba,fa,ha,Z=Y,da=ba){P.lengths.length&&(P.lengths.length=0);P.coords.length&&
(P.coords.length=0);if(x.isNone(V)||!V.coords.length)return null;fa=wa[fa];const {coords:ja,lengths:qa}=V;V=p(Y,ba);const sa=p(Y&&Z,ba&&da);Y=f(Y,ba,Z,da);if(!qa.length)return Y(P.coords,ja,0,0,q(ha,ja[0]),l(ha,ja[1])),P.lengths.length&&(P.lengths.length=0),P.coords.length=V,P;let ya,Aa=0,Ca,Ja=0;for(const Ia of qa){if(Ia<fa)continue;let Ka=0;Ca=Ja;da=ba=q(ha,ja[Aa]);ya=Z=l(ha,ja[Aa+1]);Y(P.coords,ja,Ca,Aa,da,ya);Ka++;Aa+=V;Ca+=sa;for(let Ga=1;Ga<Ia;Ga++,Aa+=V)if(da=q(ha,ja[Aa]),ya=l(ha,ja[Aa+1]),
da!==ba||ya!==Z)Y(P.coords,ja,Ca,Aa,da-ba,ya-Z),Ca+=sa,Ka++,ba=da,Z=ya;Ka>=fa&&(P.lengths.push(Ka),Ja=Ca)}P.coords.length=Ja;return P.coords.length?P:null}function aa(P,V,Y,ba,fa,ha,Z){let da=ba,ja=0;for(let sa=ha+Y;sa<Z;sa+=Y){{var qa=V[sa];const ya=V[sa+1],Aa=V[Z],Ca=V[Z+1];let Ja=V[ha],Ia=V[ha+1],Ka=Aa-Ja,Ga=Ca-Ia;if(0!==Ka||0!==Ga){const La=((qa-Ja)*Ka+(ya-Ia)*Ga)/(Ka*Ka+Ga*Ga);1<La?(Ja=Aa,Ia=Ca):0<La&&(Ja+=Ka*La,Ia+=Ga*La)}Ka=qa-Ja;Ga=ya-Ia;qa=Ka*Ka+Ga*Ga}qa>da&&(ja=sa,da=qa)}da>ba&&(ja-ha>Y&&
aa(P,V,Y,ba,fa,ha,ja),fa(P,V,P.length,ja,V[ja],V[ja+1]),Z-ja>Y&&aa(P,V,Y,ba,fa,ja,Z))}function ma(P,V,Y,ba,fa){const {coords:ha,lengths:Z}=V,da=Y?ba?N:Fa:ba?Fa:va;Y=p(Y,ba);if(!ha.length)return P!==V&&(P.lengths.length=0,P.coords.length=0),P;if(!Z.length)return da(P.coords,ha,0,0,t(fa,ha[0]),g(fa,ha[1])),P!==V&&(P.lengths.length=0,P.coords.length=Y),P;const [ja,qa]=fa.scale;ba=0;for(let sa=0;sa<Z.length;sa++){const ya=Z[sa];P.lengths[sa]=ya;let Aa=t(fa,ha[ba]),Ca=g(fa,ha[ba+1]);da(P.coords,ha,ba,
ba,Aa,Ca);ba+=Y;for(let Ja=1;Ja<ya;Ja++,ba+=Y)Aa+=ha[ba]*ja,Ca-=ha[ba+1]*qa,da(P.coords,ha,ba,ba,Aa,Ca)}P!==V&&(P.lengths.length=Z.length,P.coords.length=ha.length);return P}function ra(P,V,Y,ba){let fa=0,ha=P[ba*V],Z=P[ba*(V+1)];for(let da=1;da<Y;da++){const ja=ha+P[ba*(V+da)],qa=Z+P[ba*(V+da)+1],sa=(ja-ha)*(qa+Z);ha=ja;Z=qa;fa+=sa}return.5*fa}const za=z.getLogger("esri.tasks.support.optimizedFeatureSet"),wa={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},
va=(P,V,Y,ba,fa,ha)=>{P[Y]=fa;P[Y+1]=ha},Fa=(P,V,Y,ba,fa,ha)=>{P[Y]=fa;P[Y+1]=ha;P[Y+2]=V[ba+2]},Ba=(P,V,Y,ba,fa,ha)=>{P[Y]=fa;P[Y+1]=ha;P[Y+2]=V[ba+3]},N=(P,V,Y,ba,fa,ha)=>{P[Y]=fa;P[Y+1]=ha;P[Y+2]=V[ba+2];P[Y+3]=V[ba+3]},U=[],ia=[];n.convertFromFeature=function(P,V,Y,ba,fa){U[0]=P;[P]=T(ia,U,V,Y,ba,fa);U.length=ia.length=0;return P};n.convertFromFeatureSet=function(P,V){const Y=new m,{hasM:ba,hasZ:fa,features:ha,objectIdFieldName:Z,spatialReference:da,geometryType:ja,exceededTransferLimit:qa,transform:sa,
fields:ya}=P;ya&&(Y.fields=ya);Y.geometryType=ja;Y.objectIdFieldName=Z||V;Y.spatialReference=da;if(!Y.objectIdFieldName)return za.error(new c("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),Y;ha&&T(Y.features,ha,ja,fa,ba,Y.objectIdFieldName);qa&&(Y.exceededTransferLimit=qa);ba&&(Y.hasM=ba);fa&&(Y.hasZ=fa);sa&&(Y.transform=sa);return Y};n.convertFromFeatures=T;n.convertFromGeometry=function(P,V,Y){if(x.isNone(P))return null;const ba=new v;"hasZ"in P&&null==V&&(V=P.hasZ);
"hasM"in P&&null==Y&&(Y=P.hasM);if(r.isPoint(P))return C(null!=V?V:null!=P.z,null!=Y?Y:null!=P.m)(ba,P);if(r.isPolygon(P))return M(ba,P,V,Y);if(r.isPolyline(P))return J(ba,P,p(V,Y));if(r.isMultipoint(P))return G(ba,P,p(V,Y));za.error("convertFromGeometry:unknown-geometry",new c(`Unable to parse unknown geometry type '${P}'`))};n.convertFromGraphics=function(P,V,Y,ba,fa,ha){const Z=P.length;switch(Y){case "esriGeometryPoint":B(P,V,ba,fa,ha);break;case "esriGeometryMultipoint":E(P,V,ba,fa,ha);break;
case "esriGeometryPolyline":L(P,V,ba,fa,ha);break;case "esriGeometryPolygon":K(P,V,ba,fa,ha);break;default:za.error("convertToFeatureSet:unknown-geometry",new c(`Unable to parse unknown geometry type '${Y}'`))}for(ba=0;ba<V.length;ba++)P[ba+Z].geometryType=Y,P[ba+Z].insertAfter=V[ba].insertAfter,P[ba+Z].groupId=V[ba].groupId;return P};n.convertFromMultipoint=G;n.convertFromMultipointFeatures=E;n.convertFromNestedArray=R;n.convertFromPoint=function(P,V,Y=C(null!=V.z,null!=V.m)){return Y(P,V)};n.convertFromPointFeatures=
B;n.convertFromPolygon=M;n.convertFromPolyline=J;n.convertFromPolylineFeatures=L;n.convertToFeature=function(P,V,Y,ba){ia[0]=P;S(U,ia,V,Y,ba);P=U[0];U.length=ia.length=0;return P};n.convertToFeatureSet=function(P){const {objectIdFieldName:V,spatialReference:Y,transform:ba,fields:fa,hasM:ha,hasZ:Z,features:da,geometryType:ja,exceededTransferLimit:qa,uniqueIdField:sa,queryGeometry:ya,queryGeometryType:Aa}=P;P=S([],da,ja,Z,ha);const Ca=Q(ya,Aa,!1,!1);P={features:P,fields:fa,geometryType:ja,objectIdFieldName:V,
spatialReference:Y,uniqueIdField:sa,queryGeometry:Ca};ba&&(P.transform=ba);qa&&(P.exceededTransferLimit=qa);ha&&(P.hasM=ha);Z&&(P.hasZ=Z);return P};n.convertToFeatures=S;n.convertToGeometry=Q;n.convertToMultipoint=D;n.convertToMultipointFeatures=A;n.convertToPoint=function(P,V,Y){return P?V?Y?w(P):d(P):Y?k(P):a(P):null};n.convertToPolygon=F;n.convertToPolyline=I;n.deltaDecodeGeometry=function(P,V){if(x.isNone(P))return null;const Y=P.clone(),ba=P.coords;P=P.lengths;let fa=0;for(let da=0;da<P.length;da++){const ja=
P[da];var ha=ba[V*fa],Z=ba[V*fa+1];for(let qa=1;qa<ja;qa++)ha+=ba[V*(fa+qa)],Z+=ba[V*(fa+qa)+1],Y.coords[V*(fa+qa)]=ha,Y.coords[V*(fa+qa)+1]=Z;fa+=ja}return Y};n.deltaEncodeGeometry=function(P,V){const Y=P.clone(),ba=P.coords;P=P.lengths;let fa=0;for(let Z=0;Z<P.length;Z++){const da=P[Z];let ja=ba[V*fa];var ha=ba[V*fa+1];for(let qa=1;qa<da;qa++){const sa=ba[V*(fa+qa)],ya=ba[V*(fa+qa)+1];ha=ya-ha;Y.coords[V*(fa+qa)]=sa-ja;Y.coords[V*(fa+qa)+1]=ha;ja=sa;ha=ya}fa+=da}return Y};n.generalizeOptimizedGeometry=
function(P,V,Y,ba,fa,ha,Z=Y,da=ba){P.lengths.length&&(P.lengths.length=0);P.coords.length&&(P.coords.length=0);if(!V||!V.coords.length)return null;fa=wa[fa];const {coords:ja,lengths:qa}=V;V=p(Y,ba);const sa=p(Y&&Z,ba&&da);Y=f(Y,ba,Z,da);if(!qa.length)return Y(P.coords,ja,0,0,ja[0],ja[1]),P.lengths.length&&(P.lengths.length=0),P.coords.length=V,P;ba=0;ha*=ha;for(const ya of qa){if(ya<fa){ba+=ya*V;continue}Z=P.coords.length/sa;da=ba;const Aa=ba+(ya-1)*V;Y(P.coords,ja,P.coords.length,da,ja[da],ja[da+
1]);aa(P.coords,ja,V,ha,Y,da,Aa);Y(P.coords,ja,P.coords.length,Aa,ja[Aa],ja[Aa+1]);da=P.coords.length/sa-Z;da>=fa?P.lengths.push(da):P.coords.length=Z*sa;ba+=ya*V}return P.coords.length?P:null};n.getBoundsOptimizedGeometry=function(P,V,Y,ba){if(x.isNone(V)||!V.coords||!V.coords.length)return null;Y=p(Y,ba);let fa=ba=Number.POSITIVE_INFINITY,ha=Number.NEGATIVE_INFINITY,Z=Number.NEGATIVE_INFINITY;if(V&&V.coords){V=V.coords;for(let da=0;da<V.length;da+=Y){const ja=V[da],qa=V[da+1];ba=Math.min(ba,ja);
ha=Math.max(ha,ja);fa=Math.min(fa,qa);Z=Math.max(Z,qa)}}P[0]=ba;P[1]=fa;P[2]=ha;P[3]=Z;return P};n.getQuantizedArea=function(P,V){const {coords:Y,lengths:ba}=P;let fa=P=0;for(let ha=0;ha<ba.length;ha++)fa+=ra(Y,P,ba[ha],V),P+=ha;return Math.abs(fa)};n.getQuantizedBoundsOptimizedGeometry=function(P,V,Y,ba){Y=p(Y,ba);const {lengths:fa,coords:ha}=V;ba=V=Number.POSITIVE_INFINITY;let Z=Number.NEGATIVE_INFINITY,da=Number.NEGATIVE_INFINITY,ja=0;for(const qa of fa){let sa=ha[ja],ya=ha[ja+1];V=Math.min(sa,
V);ba=Math.min(ya,ba);Z=Math.max(sa,Z);da=Math.max(ya,da);ja+=Y;for(let Aa=1;Aa<qa;Aa++,ja+=Y){const Ca=ha[ja],Ja=ha[ja+1];sa+=Ca;ya+=Ja;0>Ca&&(V=Math.min(V,sa));0<Ca&&(Z=Math.max(Z,sa));0>Ja?ba=Math.min(ba,ya):0<Ja&&(da=Math.max(da,ya))}}P[0]=V;P[1]=ba;P[2]=Z;P[3]=da;return P};n.getSignedQuantizedRingArea=ra;n.quantizeOptimizedFeatureSet=function(P,V){const {geometryType:Y,features:ba,hasM:fa,hasZ:ha}=V;if(!P)return V;for(let Z=0;Z<ba.length;Z++){const da=ba[Z],ja=da.weakClone();ja.geometry=new v;
X(ja.geometry,da.geometry,fa,ha,Y,P);da.centroid&&(ja.centroid=new v,X(ja.centroid,da.centroid,fa,ha,"esriGeometryPoint",P));ba[Z]=ja}V.transform=P;return V};n.quantizeOptimizedGeometry=X;n.quantizeX=q;n.quantizeY=l;n.removeCollinearVectices=function(P,V,Y,ba,fa){if(!V||!V.coords||!V.coords.length)return null;Y=wa[Y];const {coords:ha,lengths:Z}=V;V=f(ba,fa,ba,fa);ba=p(ba,fa);let da=fa=0,ja=0,qa=0;for(const Aa of Z){da=qa;V(P.coords,ha,da,fa,ha[fa],ha[fa+1]);fa+=ba;var sa=ha[fa];let Ca=ha[fa+1],Ja=
sa,Ia=Ca;var ya=Ca/sa;da+=ba;V(P.coords,ha,da,fa,Ja,Ia);fa+=ba;for(let Ka=2;Ka<Aa;Ka++){sa=ha[fa];Ca=ha[fa+1];const Ga=Ca/sa,La=ya===Ga||!isFinite(ya)&&!isFinite(Ga);ya=La&&isFinite(Ga)?0<=ya&&0<=Ga||0>=ya&&0>=Ga:0<=Ia&&0<=Ca||0>=Ia&&0>=Ca;La&&ya?(Ja+=sa,Ia+=Ca):(Ja=sa,Ia=Ca,da+=ba);V(P.coords,ha,da,fa,Ja,Ia);fa+=ba;ya=Ga}da+=ba;sa=(da-qa)/ba;sa>=Y&&(P.lengths[ja]=sa,qa=da,ja++)}P.coords.length>qa&&(P.coords.length=qa);P.lengths.length>ja&&(P.lengths.length=ja);return P.coords.length&&P.lengths.length?
P:null};n.removeZMValues=function(P,V,Y,ba,fa,ha){const Z=p(Y,ba);Y=f(Y,ba,fa,ha);ba=V.coords;P.coords.length=0;P.lengths.length=0;P.lengths.push(...V.lengths);for(V=0;V<ba.length;V+=Z)Y(P.coords,ba,P.coords.length,V,ba[V],ba[V+1]);return P};n.unquantizeOptimizedFeatureSet=function(P){const {transform:V,features:Y,hasM:ba,hasZ:fa}=P;if(!V)return P;for(const ha of Y)x.isSome(ha.geometry)&&ma(ha.geometry,ha.geometry,ba,fa,V),ha.centroid&&ma(ha.centroid,ha.centroid,ba,fa,V);P.transform=null;return P};
n.unquantizeOptimizedGeometry=ma;n.unquantizeX=t;n.unquantizeY=g;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe"],function(n,c,z){let x=function(){function u(m=null,v={},p,f){this.geometry=m;this.attributes=v;this.centroid=p;this.objectId=f;this.geohashY=this.geohashX=this.displayId=0}u.prototype.weakClone=function(){const m=new u(this.geometry,this.attributes,this.centroid,
this.objectId);m.displayId=this.displayId;m.geohashX=this.geohashX;m.geohashY=this.geohashY;return m};return u}(),r=function(u){function m(){return u.apply(this,arguments)||this}c._inheritsLoose(m,u);return m}(x);n.OptimizedFeatureWithGeometry=r;n["default"]=x;n.hasGeometry=function(u){return!(z.isNone(u.geometry)||!u.geometry.coords||!u.geometry.coords.length)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function n(){this.spatialReference=
this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}n.prototype.weakClone=function(){const c=new n;c.objectIdFieldName=this.objectIdFieldName;c.globalIdFieldName=this.globalIdFieldName;c.geohashFieldName=this.geohashFieldName;c.geometryProperties=this.geometryProperties;
c.geometryType=this.geometryType;c.spatialReference=this.spatialReference;c.hasZ=this.hasZ;c.hasM=this.hasM;c.features=this.features;c.fields=this.fields;c.transform=this.transform;c.exceededTransferLimit=this.exceededTransferLimit;c.uniqueIdField=this.uniqueIdField;c.queryGeometry=this.queryGeometry;c.queryGeometryType=this.queryGeometryType;return c};return n}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(n){return function(){function c(x=
[],r=[],u=!1){this.lengths=null!=x?x:[];this.coords=null!=r?r:[];this.hasIndeterminateRingOrder=u}var z=c.prototype;z.forEachVertex=function(x){let r=0;this.lengths.length||x(this.coords[0],this.coords[1]);for(let u=0;u<this.lengths.length;u++){const m=this.lengths[u];for(let v=0;v<m;v++)x(this.coords[2*(v+r)],this.coords[2*(v+r)+1]);r+=m}};z.clone=function(x){return x?(x.set(this.coords),new c(this.lengths.slice(),x,this.hasIndeterminateRingOrder)):new c(this.lengths.slice(),this.coords.slice(),
this.hasIndeterminateRingOrder)};n._createClass(c,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},{key:"size",get:function(){return this.lengths.reduce((x,r)=>x+r)}}]);return c}()})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../support/PromiseQueue ../../../support/arcadeOnDemand".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a,b,d,h,k,e,w,y,C){function B(J){return J.every(F=>"exceedslimit"!==F.statisticType)}const A=new Set,D=new u.MemCacheStorage(2E6);let E=0,G=function(){function J(K){this.capabilities={query:b.queryCapabilities};this.geometryType=K.geometryType;this.hasM=K.hasM;this.hasZ=K.hasZ;this.objectIdField=K.objectIdField;this.spatialReference=K.spatialReference;this.definitionExpression=K.definitionExpression;this.featureStore=K.featureStore;this.aggregateAdapter=K.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=K.timeInfo;K.cacheSpatialQueries&&(this._geometryQueryCache=new u.MemCache(E++ +"$$",D));this.fieldsIndex=new w(K.fields);K.scheduler&&K.priority&&(this._frameQueue=new y,this._frameTask=K.scheduler.registerTask(K.priority,this))}var F=J.prototype;F.destroy=function(){this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._frameQueue.cancelAll(),this._frameQueue=null);this.clearCache();this._geometryQueryCache&&
this._geometryQueryCache.destroy();this._changeHandle&&(this._changeHandle.remove(),this._changeHandle=null);this.fieldsIndex.destroy()};F.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear();this._timeExtent=this._allItems=null};F.executeQuery=function(){var K=c._asyncToGenerator(function*(M={},R){let T=x.clone(M),Q;try{T=yield this._schedule(()=>e.normalizeQuery(T,this.definitionExpression,this.spatialReference),R),T=yield this._reschedule(()=>this._checkQuerySupport(T),
R),Q=yield this._reschedule(()=>this._executeGeometryQuery(T,R),R),Q=yield this._reschedule(()=>Q.executeAggregateIdsQuery(T),R),Q=yield this._reschedule(()=>Q.executeObjectIdsQuery(T),R),Q=yield this._reschedule(()=>Q.executeTimeQuery(T),R),Q=yield this._reschedule(()=>Q.executeAttributesQuery(T),R)}catch(S){if(S!==e.QUERY_ENGINE_EMPTY_RESULT)throw S;Q=new d([],null,this)}return Q.createQueryResponse(T)});return function(){return K.apply(this,arguments)}}();F.executeQueryForCount=function(){var K=
c._asyncToGenerator(function*(M={},R){let T=x.clone(M),Q;T.returnGeometry=!1;T.returnCentroid=!1;T.outSR=null;try{T=yield this._schedule(()=>e.normalizeQuery(T,this.definitionExpression,this.spatialReference),R),T=yield this._reschedule(()=>this._checkQuerySupport(T),R),Q=yield this._reschedule(()=>this._executeGeometryQuery(T,R),R),Q=yield this._reschedule(()=>Q.executeAggregateIdsQuery(T),R),Q=yield this._reschedule(()=>Q.executeObjectIdsQuery(T),R),Q=yield this._reschedule(()=>Q.executeTimeQuery(T),
R),Q=yield this._reschedule(()=>Q.executeAttributesQuery(T),R)}catch(S){if(S!==e.QUERY_ENGINE_EMPTY_RESULT)throw S;return 0}return Q.createQueryResponseForCount(T)});return function(){return K.apply(this,arguments)}}();F.executeQueryForExtent=function(){var K=c._asyncToGenerator(function*(M={},R){let T=x.clone(M),Q;M=T.outSR;try{T=yield this._schedule(()=>e.normalizeQuery(T,this.definitionExpression,this.spatialReference),R);T=yield this._reschedule(()=>this._checkQuerySupport(T),R);T.returnGeometry=
!0;T.returnCentroid=!1;T.outSR=null;Q=yield this._reschedule(()=>this._executeGeometryQuery(T,R),R);Q=yield this._reschedule(()=>Q.executeAggregateIdsQuery(T),R);Q=yield this._reschedule(()=>Q.executeObjectIdsQuery(T),R);Q=yield this._reschedule(()=>Q.executeTimeQuery(T),R);Q=yield this._reschedule(()=>Q.executeAttributesQuery(T),R);const S=Q.size;if(!S)return{count:S,extent:null};v.set(L,v.NEGATIVE_INFINITY);this.featureStore.forEachBounds(Q.items,ma=>v.expandWithAABB(L,ma),I);const X={xmin:L[0],
ymin:L[1],xmax:L[3],ymax:L[4],spatialReference:e.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(L[2])&&isFinite(L[5])&&(X.zmin=L[2],X.zmax=L[5]);const aa=a.project(X,Q.spatialReference,M);aa.spatialReference=e.cleanFromGeometryEngine(M||this.spatialReference);if(0===aa.xmax-aa.xmin){const ma=m.getMetersPerUnitForSR(aa.spatialReference);aa.xmin-=ma;aa.xmax+=ma}if(0===aa.ymax-aa.ymin){const ma=m.getMetersPerUnitForSR(aa.spatialReference);aa.ymin-=ma;aa.ymax+=ma}if(this.hasZ&&null!=
aa.zmin&&null!=aa.zmax&&0===aa.zmax-aa.zmin){const ma=m.getMetersPerUnitForSR(aa.spatialReference);aa.zmin-=ma;aa.zmax+=ma}return{count:S,extent:aa}}catch(S){if(S===e.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw S;}});return function(){return K.apply(this,arguments)}}();F.executeQueryForIds=function(){var K=c._asyncToGenerator(function*(M={},R){return this.executeQueryForIdSet(M,R).then(T=>Array.from(T))});return function(){return K.apply(this,arguments)}}();F.executeQueryForIdSet=
function(){var K=c._asyncToGenerator(function*(M={},R){let T=x.clone(M),Q;T.returnGeometry=!1;T.returnCentroid=!1;T.outSR=null;try{T=yield this._schedule(()=>e.normalizeQuery(T,this.definitionExpression,this.spatialReference),R);T=yield this._reschedule(()=>this._checkQuerySupport(T),R);Q=yield this._reschedule(()=>this._executeGeometryQuery(T,R),R);Q=yield this._reschedule(()=>Q.executeAggregateIdsQuery(T),R);Q=yield this._reschedule(()=>Q.executeObjectIdsQuery(T),R);Q=yield this._reschedule(()=>
Q.executeTimeQuery(T),R);Q=yield this._reschedule(()=>Q.executeAttributesQuery(T),R);const S=Q.items,X=new Set;yield this._reschedule(()=>{for(const aa of S)X.add(Q.featureAdapter.getObjectId(aa))},R);return X}catch(S){if(S===e.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw S;}});return function(){return K.apply(this,arguments)}}();F.executeQueryForSnapping=function(){var K=c._asyncToGenerator(function*(M,R){const {point:T,distance:Q,types:S}=M;if(0===S)return{candidates:[]};const X=yield this._reschedule(()=>
this._checkQuerySupport(M.query),R),aa=!t.equals(T.spatialReference,this.spatialReference);aa&&(yield a.checkProjectionSupport(T.spatialReference,this.spatialReference));var ma="number"===typeof Q?Q:Q.x,ra="number"===typeof Q?Q:Q.y;ma={xmin:T.x-ma,xmax:T.x+ma,ymin:T.y-ra,ymax:T.y+ra,spatialReference:T.spatialReference};ma=aa?a.project(ma,this.spatialReference):ma;if(!ma)return{candidates:[]};ra=(yield l.normalizeCentralMeridian(q.fromJSON(T),null,{signal:R}))[0];const za=(yield l.normalizeCentralMeridian(q.fromJSON(ma),
null,{signal:R}))[0];if(r.isNone(ra)||r.isNone(za))return{candidates:[]};let wa=new d(this._searchFeatures(this._getQueryBBoxes(za.toJSON())),null,this);wa=yield this._reschedule(()=>wa.executeObjectIdsQuery(X),R);wa=yield this._reschedule(()=>wa.executeTimeQuery(X),R);wa=yield this._reschedule(()=>wa.executeAttributesQuery(X),R);R=ra.toJSON();R=aa?a.project(R,this.spatialReference):R;return wa.createSnappingResponse({...M,point:R,distance:aa?Math.max(ma.xmax-ma.xmin,ma.ymax-ma.ymin)/2:Q},T.spatialReference)});
return function(M,R){return K.apply(this,arguments)}}();F.executeQueryForLatestObservations=function(){var K=c._asyncToGenerator(function*(M={},R){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new z("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:M,timeInfo:this.timeInfo});let T=x.clone(M),Q;try{T=yield this._schedule(()=>e.normalizeQuery(T,this.definitionExpression,this.spatialReference),R),T=yield this._reschedule(()=>this._checkQuerySupport(T),R),Q=yield this._reschedule(()=>
this._executeGeometryQuery(T,R),R),Q=yield this._reschedule(()=>Q.executeAggregateIdsQuery(T),R),Q=yield this._reschedule(()=>Q.executeObjectIdsQuery(T),R),Q=yield this._reschedule(()=>Q.executeTimeQuery(T),R),Q=yield this._reschedule(()=>Q.executeAttributesQuery(T),R),Q=yield this._reschedule(()=>Q.filterLatest(),R)}catch(S){if(S!==e.QUERY_ENGINE_EMPTY_RESULT)throw S;Q=new d([],null,this)}return Q.createQueryResponse(T)});return function(){return K.apply(this,arguments)}}();F.executeQueryForSummaryStatistics=
function(){var K=c._asyncToGenerator(function*(M={},R,T){M=x.clone(M);let Q;try{M=yield this._schedule(()=>e.normalizeQuery(M,this.definitionExpression,this.spatialReference),T),M=yield this._reschedule(()=>this._checkSummaryStatisticsSupport(M,R),T),Q=yield this._reschedule(()=>this._executeGeometryQuery(M,T),T),Q=yield this._reschedule(()=>Q.executeAggregateIdsQuery(M),T),Q=yield this._reschedule(()=>Q.executeObjectIdsQuery(M),T),Q=yield this._reschedule(()=>Q.executeTimeQuery(M),T),Q=yield this._reschedule(()=>
Q.executeAttributesQuery(M),T)}catch(S){if(S!==e.QUERY_ENGINE_EMPTY_RESULT)throw S;Q=new d([],null,this)}return Q.createSummaryStatisticsResponse(M,R)});return function(){return K.apply(this,arguments)}}();F._schedule=function(){var K=c._asyncToGenerator(function*(M,R){return this._frameQueue?this._frameQueue.push(M,R):M()});return function(M,R){return K.apply(this,arguments)}}();F._reschedule=function(){var K=c._asyncToGenerator(function*(M,R){return this._frameQueue?this._frameQueue.unshift(M,R):
M()});return function(M,R){return K.apply(this,arguments)}}();F.runTask=function(K){for(this._budget=K;!K.done&&this._frameQueue&&this._frameQueue.process();)K.madeProgress();this._budget=null};F._getAll=function(){if(!this._allItems){const K=[];this.featureStore.forEach(M=>K.push(M));this._allItems=new d(K,null,this)}return this._allItems};F._executeGeometryQuery=function(){var K=c._asyncToGenerator(function*(M,R){var T=this;const {geometry:Q,outSR:S,spatialRel:X,returnGeometry:aa,returnCentroid:ma}=
M,ra=aa||ma,za=t.isValid(S)&&!t.equals(this.spatialReference,S),wa=this._geometryQueryCache?za&&ra?JSON.stringify({geometry:Q,spatialRelationship:X,outSpatialReference:S}):JSON.stringify({geometry:Q,spatialRelationship:X}):null;if(wa){var va=this._geometryQueryCache.get(wa);if(!r.isUndefined(va))return va}va=function(){var U=c._asyncToGenerator(function*(ia){if(za&&ra)return ia=yield ia.project(S),wa&&T._geometryQueryCache.put(wa,ia,ia.size||1),ia;wa&&T._geometryQueryCache.put(wa,ia,ia.size||1);return ia});
return function(ia){return U.apply(this,arguments)}}();if(!Q)return va(this._getAll());const Fa=this.featureAdapter;if("esriSpatialRelDisjoint"===X){M=this._searchFeatures(this._getQueryBBoxes(Q));if(!M.length)return va(this._getAll());let U,ia;const P=new Set;for(var Ba of M)P.add(Fa.getObjectId(Ba));yield this._reschedule(()=>{let V=0;U=Array(P.size);this.featureStore.forEach(Y=>U[V++]=Y);ia=P},R);M=yield this._reschedule(c._asyncToGenerator(function*(){const V=yield h.getSpatialQueryOperator(X,
Q,T.geometryType,T.hasZ,T.hasM);return new d(yield T._runSpatialFilter(U,Y=>!ia.has(Fa.getObjectId(Y))||V(Fa.getGeometry(Y)),R),Q,T)}),R);return va(M)}Ba=this._searchFeatures(this._getQueryBBoxes(Q));if(!Ba.length)return va=new d([],Q,this),wa&&this._geometryQueryCache.put(wa,va,va.size||1),va;if(this._canExecuteSoloPass(Q,M))return va(new d(Ba,Q,this));const N=yield h.getSpatialQueryOperator(X,Q,this.geometryType,this.hasZ,this.hasM);M=yield this._runSpatialFilter(Ba,U=>N(Fa.getGeometry(U)),R);return va(new d(M,
Q,this))});return function(M,R){return K.apply(this,arguments)}}();F._runSpatialFilter=function(){var K=c._asyncToGenerator(function*(M,R,T){var Q=this;if(!R)return M;if(!this._budget)return M.filter(ma=>R(ma));let S=0;const X=[],aa=function(){var ma=c._asyncToGenerator(function*(){for(;S<M.length;){const ra=M[S];R(ra)&&X.push(ra);Q._budget.done&&(yield Q._reschedule(()=>aa(),T));++S}});return function(){return ma.apply(this,arguments)}}();return this._reschedule(()=>aa(),T).then(()=>X)});return function(M,
R,T){return K.apply(this,arguments)}}();F._canExecuteSoloPass=function(K,M){const {geometryType:R}=this;({spatialRel:M}=M);return h.canQueryWithRBush(K)&&("esriSpatialRelEnvelopeIntersects"===M||"esriGeometryPoint"===R&&("esriSpatialRelIntersects"===M||"esriSpatialRelContains"===M||"esriSpatialRelWithin"===M))};F._getQueryBBoxes=function(K){if(h.canQueryWithRBush(K)){if(q.isExtent(K))return[p.fromValues(K.xmin,K.ymin,K.xmax,K.ymax)];if(q.isPolygon(K))return K.rings.map(M=>p.fromValues(Math.min(M[0][0],
M[2][0]),Math.min(M[0][1],M[2][1]),Math.max(M[0][0],M[2][0]),Math.max(M[0][1],M[2][1])))}return[f.getBoundsXY(p.create(),K)]};F._searchFeatures=function(K){for(const T of K)this.featureStore.forEachInBounds(T,Q=>{A.add(Q)});const M=Array(A.size);let R=0;A.forEach(T=>M[R++]=T);A.clear();return M};F._checkSummaryStatisticsSupport=function(){var K=c._asyncToGenerator(function*(M,R){if(0>M.distance||null!=M.geometryPrecision||M.multipatchOption||M.pixelSize||M.relationParam||M.text||M.outStatistics||
M.groupByFieldsForStatistics||M.having||M.orderByFields)throw new z("feature-store:unsupported-query","Unsupported query options",{query:M});return Promise.all([this._checkAttributesQuerySupport(M),this._checkSummaryStatisticsParamsSupport(R),h.checkSpatialQuerySupport(M,this.geometryType,this.spatialReference),a.checkProjectionSupport(this.spatialReference,M.outSR)]).then(()=>M)});return function(M,R){return K.apply(this,arguments)}}();F._checkSummaryStatisticsParamsSupport=function(){var K=c._asyncToGenerator(function*(M){var R=
[];M.valueExpression&&({arcadeUtils:R}=yield C.loadArcade(),R=R.extractFieldNames(M.valueExpression));M.field&&R.push(M.field);M.normalizationField&&R.push(M.normalizationField);if(!R.length)throw new z("feature-store:unsupported-query","params should have at least a field or valueExpression",{params:M});g.validateFields(this.fieldsIndex,R,"params contains missing fields")});return function(M){return K.apply(this,arguments)}}();F._checkQuerySupport=function(){var K=c._asyncToGenerator(function*(M){if(0>
M.distance||null!=M.geometryPrecision||M.multipatchOption||M.pixelSize||M.relationParam||M.text)throw new z("feature-store:unsupported-query","Unsupported query options",{query:M});return Promise.all([this._checkAttributesQuerySupport(M),this._checkStatisticsQuerySupport(M),h.checkSpatialQuerySupport(M,this.geometryType,this.spatialReference),a.checkProjectionSupport(this.spatialReference,M.outSR)]).then(()=>M)});return function(M){return K.apply(this,arguments)}}();F._checkAttributesQuerySupport=
function(K){const {outFields:M,orderByFields:R,returnDistinctValues:T,outStatistics:Q}=K,S=Q?Q.map(X=>X.outStatisticFieldName&&X.outStatisticFieldName.toLowerCase()):[];if(R&&0<R.length){const X=R.map(aa=>{const ma=aa.toLowerCase();return-1<ma.indexOf(" asc")?ma.split(" asc")[0]:-1<ma.indexOf(" desc")?ma.split(" desc")[0]:aa}).filter(aa=>-1===S.indexOf(aa));g.validateFields(this.fieldsIndex,X,"orderByFields contains missing fields")}if(M&&0<M.length)g.validateFields(this.fieldsIndex,M,"outFields contains missing fields");
else if(T)throw new z("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:K});g.validateWhere(this.fieldsIndex,K.where)};F._checkStatisticsQuerySupport=function(){var K=c._asyncToGenerator(function*(M){const {outStatistics:R,groupByFieldsForStatistics:T,having:Q}=M;var S=T&&T.length,X=R&&R.length;if(Q){if(!S||!X)throw new z("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:M});g.validateHaving(this.fieldsIndex,
Q,R)}if(X&&B(R)){X=R.map(aa=>aa.onStatisticField);g.validateFields(this.fieldsIndex,X,"onStatisticFields contains missing fields");S&&g.validateFields(this.fieldsIndex,T,"groupByFieldsForStatistics contains missing fields");for(const aa of R){const {onStatisticField:ma,statisticType:ra}=aa;if(("percentile_disc"===ra||"percentile_cont"===ra)&&"statisticParameters"in aa){if({statisticParameters:S}=aa,!S)throw new z("feature-store:unsupported-query","statisticParamters should be set for percentile type",
{definition:aa,query:M});}else if("count"!==ra&&ma&&g.hasInvalidFieldType(ma,this.fieldsIndex))throw new z("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:aa,query:M});}}});return function(M){return K.apply(this,arguments)}}();c._createClass(J,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const K=this.featureStore.fullBounds;return K?{xmin:K[0],ymin:K[1],xmax:K[2],ymax:K[3],spatialReference:e.cleanFromGeometryEngine(this.spatialReference)}:
null}},{key:"timeExtent",get:function(){return this.timeInfo?this._timeExtent?this._timeExtent:this._timeExtent=k.getTimeExtent(this.timeInfo,this.featureStore):null}},{key:"running",get:function(){return 0<this._frameQueue.length}}]);return J}();const I=v.create(),L=v.create();n.Feature=function(J,F=null,K,M,R){this.attributes=J;this.geometry=K;this.centroid=M;this.filterFlags=R;this.groupId=-1;this.displayId=F};n["default"]=G;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/MemCache":function(){define(["exports",
"../chunks/_rollupPluginBabelHelpers","./PooledArray"],function(n,c,z){let x=function(){function u(v,p,f){this._namespace=v;this._storage=p;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";f&&(this._storage.registerRemoveFunc(this._namespace,f),this._removeFunc=!0)}var m=u.prototype;m.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this);this._storage=
null};m.resetHitRate=function(){this._hit=this._miss=0};m.put=function(v,p,f,q=0){this._storage.put(this._namespace+v,p,f,q)};m.get=function(v){v=this._storage.get(this._namespace+v);void 0===v?++this._miss:++this._hit;return v};m.pop=function(v){v=this._storage.pop(this._namespace+v);void 0===v?++this._miss:++this._hit;return v};m.updateSize=function(v,p,f){this._storage.updateSize(this._namespace+v,p,f)};m.clear=function(){this._storage.clear(this._namespace)};m.clearAll=function(){this._storage.clearAll()};
m.getStats=function(){return this._storage.getStats()};m.resetStats=function(){this._storage.resetStats()};c._createClass(u,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return u}(),r=function(){function u(v=10485760){this._maxSize=v;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=
new z;this._users=new z}var m=u.prototype;m.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};m.register=function(v){this._users.push(v)};m.deregister=function(v){this._users.removeUnordered(v)};m.registerRemoveFunc=function(v,p){this._removeFuncs.push([v,p])};m.deregisterRemoveFunc=function(v){this._removeFuncs.filterInPlace(p=>p[0]!==v)};m.put=function(v,p,f,q){const l=this._db.get(v);l&&(this._size-=l.size,this._db.delete(v),l.entry!==p&&this._notifyRemoved(v,
l.entry));f>this._maxSize?this._notifyRemoved(v,p):void 0===p?console.warn("Refusing to cache undefined entry "):!f||0>f?console.warn("Refusing to cache entry with invalid size "+f):(q=1+Math.max(q,-3)- -3,this._db.set(v,{entry:p,size:f,lifetime:q,lives:q}),this._size+=f,this._checkSizeLimit())};m.updateSize=function(v,p,f){const q=this._db.get(v);q&&q.entry===p&&(this._size-=q.size,f>this._maxSize?(this._db.delete(v),this._notifyRemoved(v,p)):(q.size=f,this._size+=f,this._checkSizeLimit()))};m.pop=
function(v){const p=this._db.get(v);if(p)return this._size-=p.size,this._db.delete(v),++this._hit,p.entry;++this._miss};m.get=function(v){const p=this._db.get(v);if(void 0===p)++this._miss;else return this._db.delete(v),p.lives=p.lifetime,this._db.set(v,p),++this._hit,p.entry};m.getStats=function(){const v={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},p={},f=[];this._db.forEach((t,
g)=>{const a=t.lifetime;f[a]=(f[a]||0)+t.size;this._users.forAll(b=>{b=b.namespace;g.startsWith(b)&&(p[b]=(p[b]||0)+t.size)})});const q={};this._users.forAll(t=>{const g=t.namespace;!isNaN(t.hitRate)&&0<t.hitRate?(p[g]=p[g]||0,q[g]=Math.round(100*t.hitRate)+"%"):q[g]="0%"});var l=Object.keys(p);l.forEach(t=>p[t]=p[t]/this._size*100);l.sort((t,g)=>p[g]-p[t]);l.forEach(t=>v[t]=Math.round(p[t])+"% / "+q[t]);for(l=f.length-1;0<=l;--l){const t=f[l];t&&(v["Priority "+(l+-3-1)]=Math.round(t/this.size*100)+
"%")}return v};m.resetStats=function(){this._hit=this._miss=0;this._users.forAll(v=>v.resetHitRate())};m.clear=function(v){this._db.forEach((p,f)=>{f.startsWith(v)&&(this._size-=p.size,this._db.delete(f),this._notifyRemoved(f,p.entry))})};m.clearAll=function(){this._db.forEach((v,p)=>this._notifyRemoved(p,v.entry));this._size=0;this._db.clear()};m._getHitRate=function(){return this._hit/(this._hit+this._miss)};m._notifyRemoved=function(v,p){this._removeFuncs.forAll(f=>{if(v.startsWith(f[0]))f[1](p)})};
m._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [v,p]of this._db)if(this._db.delete(v),1>=p.lives?(this._size-=p.size,this._notifyRemoved(v,p.entry)):(--p.lives,this._db.set(v,p)),this._size<=.9*this.maxSize)break};c._createClass(u,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(v){this._maxSize=Math.max(v,0);this._checkSizeLimit()}}]);return u}();n.MIN_PRIORITY=-3;n.MemCache=x;n.MemCacheStorage=r;Object.defineProperty(n,
"__esModule",{value:!0})})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe","../Extent","./aaBoundingRect"],function(n,c,z,x){function r(b=g){return[b[0],b[1],b[2],b[3],b[4],b[5]]}function u(b,d,h,k,e,w,y=r()){y[0]=b;y[1]=d;y[2]=h;y[3]=k;y[4]=e;y[5]=w;return y}function m(b){return b[0]>=b[3]?0:b[3]-b[0]}function v(b){return b[1]>=b[4]?0:b[4]-b[1]}function p(b){return b[2]>=b[5]?0:b[5]-b[2]}function f(b,d){return Math.max(d[0],b[0])<=Math.min(d[3],b[3])&&Math.max(d[1],
b[1])<=Math.min(d[4],b[4])&&Math.max(d[2],b[2])<=Math.min(d[5],b[5])}function q(b,d){b[0]=d[0];b[1]=d[1];b[2]=d[2];b[3]=d[3];b[4]=d[4];b[5]=d[5];return b}function l(b){return 6===b.length}const t=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],g=[0,0,0,0,0,0],a=r();n.NEGATIVE_INFINITY=t;n.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];n.ZERO=g;n.allFinite=function(b){for(let d=0;6>d;d++)if(!isFinite(b[d]))return!1;return!0};n.center=function(b,d=[0,0,0]){d[0]=
b[0]+m(b)/2;d[1]=b[1]+v(b)/2;d[2]=b[2]+p(b)/2;return d};n.contains=function(b,d){return d[0]>=b[0]&&d[1]>=b[1]&&d[2]>=b[2]&&d[3]<=b[3]&&d[4]<=b[4]&&d[5]<=b[5]};n.containsPoint=function(b,d){return d[0]>=b[0]&&d[1]>=b[1]&&d[2]>=b[2]&&d[0]<=b[3]&&d[1]<=b[4]&&d[2]<=b[5]};n.containsPointWithMargin=function(b,d,h){return d[0]>=b[0]-h&&d[1]>=b[1]-h&&d[2]>=b[2]-h&&d[0]<=b[3]+h&&d[1]<=b[4]+h&&d[2]<=b[5]+h};n.create=r;n.depth=v;n.diameter=function(b){const d=m(b),h=p(b);b=v(b);return Math.sqrt(d*d+h*h+b*b)};
n.empty=function(b){return b?q(b,t):r(t)};n.equals=function(b,d,h){if(c.isNone(b)||c.isNone(d))return b===d;if(!l(b)||!l(d))return!1;if(h)for(let k=0;k<b.length;k++){if(!h(b[k],d[k]))return!1}else for(h=0;h<b.length;h++)if(b[h]!==d[h])return!1;return!0};n.expandWithAABB=function(b,d){b[0]=Math.min(b[0],d[0]);b[1]=Math.min(b[1],d[1]);b[2]=Math.min(b[2],d[2]);b[3]=Math.max(b[3],d[3]);b[4]=Math.max(b[4],d[4]);b[5]=Math.max(b[5],d[5])};n.expandWithBuffer=function(b,d,h=0,k=d.length/3){let e=b[0],w=b[1],
y=b[2],C=b[3],B=b[4],A=b[5];for(let D=0;D<k;D++)e=Math.min(e,d[h+3*D]),w=Math.min(w,d[h+3*D+1]),y=Math.min(y,d[h+3*D+2]),C=Math.max(C,d[h+3*D]),B=Math.max(B,d[h+3*D+1]),A=Math.max(A,d[h+3*D+2]);b[0]=e;b[1]=w;b[2]=y;b[3]=C;b[4]=B;b[5]=A};n.expandWithNestedArray=function(b,d,h){const k=d.length;let e=b[0],w=b[1],y=b[2],C=b[3],B=b[4],A=b[5];if(h)for(h=0;h<k;h++){var D=d[h];e=Math.min(e,D[0]);w=Math.min(w,D[1]);y=Math.min(y,D[2]);C=Math.max(C,D[0]);B=Math.max(B,D[1]);A=Math.max(A,D[2])}else for(h=0;h<
k;h++)D=d[h],e=Math.min(e,D[0]),w=Math.min(w,D[1]),C=Math.max(C,D[0]),B=Math.max(B,D[1]);b[0]=e;b[1]=w;b[2]=y;b[3]=C;b[4]=B;b[5]=A};n.expandWithOffset=function(b,d,h,k){b[0]=Math.min(b[0],b[0]+d);b[3]=Math.max(b[3],b[3]+d);b[1]=Math.min(b[1],b[1]+h);b[4]=Math.max(b[4],b[4]+h);b[2]=Math.min(b[2],b[2]+k);b[5]=Math.max(b[5],b[5]+k)};n.expandWithRect=function(b,d){b[0]=Math.min(b[0],d[0]);b[1]=Math.min(b[1],d[1]);b[3]=Math.max(b[3],d[2]);b[4]=Math.max(b[4],d[3])};n.expandWithVec3=function(b,d){b[0]=Math.min(b[0],
d[0]);b[1]=Math.min(b[1],d[1]);b[2]=Math.min(b[2],d[2]);b[3]=Math.max(b[3],d[0]);b[4]=Math.max(b[4],d[1]);b[5]=Math.max(b[5],d[2])};n.fromExtent=function(b,d=r()){d[0]=b.xmin;d[1]=b.ymin;d[2]=b.zmin;d[3]=b.xmax;d[4]=b.ymax;d[5]=b.zmax;return d};n.fromMinMax=function(b,d,h=r()){h[0]=b[0];h[1]=b[1];h[2]=b[2];h[3]=d[0];h[4]=d[1];h[5]=d[2];return h};n.fromRect=function(b,d){b[0]=d[0];b[1]=d[1];b[2]=Number.NEGATIVE_INFINITY;b[3]=d[2];b[4]=d[3];b[5]=Number.POSITIVE_INFINITY;return b};n.fromValues=u;n.getMax=
function(b,d){d[0]=b[3];d[1]=b[4];d[2]=b[5];return d};n.getMin=function(b,d){d[0]=b[0];d[1]=b[1];d[2]=b[2];return d};n.height=p;n.intersects=f;n.intersectsClippingArea=function(b,d){return c.isNone(d)?!0:f(b,d)};n.is=l;n.isPoint=function(b){return 0===m(b)&&0===v(b)&&0===p(b)};n.maximumDimension=function(b){return Math.max(m(b),p(b),v(b))};n.offset=function(b,d,h,k,e=b){e[0]=b[0]+d;e[1]=b[1]+h;e[2]=b[2]+k;e[3]=b[3]+d;e[4]=b[4]+h;e[5]=b[5]+k;return e};n.scale=function(b,d,h=b){const k=b[0]+m(b)/2,
e=b[1]+v(b)/2,w=b[2]+p(b)/2;h[0]=k+(b[0]-k)*d;h[1]=e+(b[1]-e)*d;h[2]=w+(b[2]-w)*d;h[3]=k+(b[3]-k)*d;h[4]=e+(b[4]-e)*d;h[5]=w+(b[5]-w)*d;return h};n.set=q;n.setMax=function(b,d,h=b){h[3]=d[0];h[4]=d[1];h[5]=d[2];h!==b&&(h[0]=b[0],h[1]=b[1],h[2]=b[2]);return b};n.setMin=function(b,d,h=b){h[0]=d[0];h[1]=d[1];h[2]=d[2];h!==b&&(h[3]=b[3],h[4]=b[4],h[5]=b[5]);return h};n.size=function(b,d=[0,0,0]){d[0]=m(b);d[1]=v(b);d[2]=p(b);return d};n.toExtent=function(b,d){return isFinite(b[2])||isFinite(b[5])?new z({xmin:b[0],
xmax:b[3],ymin:b[1],ymax:b[4],zmin:b[2],zmax:b[5],spatialReference:d}):new z({xmin:b[0],xmax:b[3],ymin:b[1],ymax:b[4],spatialReference:d})};n.toRect=function(b,d){d||(d=x.create());d[0]=b[0];d[1]=b[1];d[2]=b[3];d[3]=b[4];return d};n.width=m;n.wrap=function(b,d,h,k,e,w){return u(b,d,h,k,e,w,a)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../tasks/geometry/cut ../../tasks/geometry/simplify".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t){function g(y){const C=[];let B=0,A=0;for(let D=0;D<y.length;D++){const E=y[D];let G=null;for(let I=0;I<E.length;I++)G=E[I],C.push(G),0===I?A=B=G[0]:(B=Math.min(B,G[0]),A=Math.max(A,G[0]));G&&C.push([(B+A)/2,0])}return C}function a(y,C){if(!(y instanceof v||y instanceof m))throw w.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new x("straightLineDensify: the input geometry is neither polyline nor polygon");var B=p.getGeometryParts(y);
const A=[];for(const E of B){B=[];A.push(B);B.push([E[0][0],E[0][1]]);for(let G=0;G<E.length-1;G++){const I=E[G][0],L=E[G][1],J=E[G+1][0],F=E[G+1][1];var D=Math.sqrt((J-I)*(J-I)+(F-L)*(F-L));const K=(F-L)/D,M=(J-I)/D,R=D/C;if(1<R){for(let T=1;T<=R-1;T++){const Q=T*C;B.push([M*Q+I,K*Q+L])}D=(D+Math.floor(R-1)*C)/2;B.push([M*D+I,K*D+L])}B.push([J,F])}}return"polygon"===y.type?new m({rings:A,spatialReference:y.spatialReference}):new v({paths:A,spatialReference:y.spatialReference})}function b(y,C,B){C&&
(y=a(y,1E6),y=q.webMercatorToGeographic(y,!0));B&&(y=p.updatePolyGeometry(y,B));return y}function d(y,C,B){if(Array.isArray(y)){var A=y[0];A>C?(B=p.offsetMagnitude(A,C),y[0]=A+-2*B*C):A<B&&(C=p.offsetMagnitude(A,B),y[0]=A+-2*C*B)}else A=y.x,A>C?(B=p.offsetMagnitude(A,C),y=y.clone().offset(-2*B*C,0)):A<B&&(C=p.offsetMagnitude(A,B),y=y.clone().offset(-2*C*B,0));return y}function h(y,C){let B=-1;for(let A=0;A<C.cutIndexes.length;A++){const D=C.cutIndexes[A],E=C.geometries[A],G=p.getGeometryParts(E);
for(let I=0;I<G.length;I++){const L=G[I];L.some(J=>{if(180>J[0])return!0;J=0;for(var F=0;F<L.length;F++){var K=L[F][0];J=K>J?K:J}J=Number(J.toFixed(9));J=-360*p.offsetMagnitude(J,180);for(F=0;F<L.length;F++)K=E.getPoint(I,F),E.setPoint(I,F,K.clone().offset(J,0));return!0})}if(D===B)if("polygon"===y[0].type)for(const I of p.getGeometryParts(E))y[D]=y[D].addRing(I);else{if("polyline"===y[0].type)for(const I of p.getGeometryParts(E))y[D]=y[D].addPath(I)}else B=D,y[D]=E}return y}function k(y,C,B){return e.apply(this,
arguments)}function e(){e=c._asyncToGenerator(function*(y,C,B){if(!Array.isArray(y))return k([y],C);var A=C?C.url:z.geometryServiceUrl;let D,E,G;let I=0;var L=[];C=[];for(var J of y)if(u.isNone(J))C.push(J);else{if(!F){var F=J.spatialReference;var K=f.getInfo(F);var M=(D=F.isWebMercator)?102100:4326;E=p.cutParams[M].maxX;G=p.cutParams[M].minX;var R=p.cutParams[M].plus180Line;M=p.cutParams[M].minus180Line}if(K)if("mesh"===J.type)C.push(J);else if("point"===J.type)C.push(d(J.clone(),E,G));else if("multipoint"===
J.type){var T=J.clone();T.points=T.points.map(Q=>d(Q,E,G));C.push(T)}else if("extent"===J.type)T=J.clone()._normalize(!1,!1,K),C.push(T.rings?new m(T):T);else if(J.extent){T=J.extent;const Q=2*p.offsetMagnitude(T.xmin,G)*E;let S=0===Q?J.clone():p.updatePolyGeometry(J.clone(),Q);T.offset(Q,0);T.intersects(R)&&T.xmax!==E?(I=T.xmax>I?T.xmax:I,S=b(S,D),L.push(S),C.push("cut")):T.intersects(M)&&T.xmin!==G?(I=2*T.xmax*E>I?2*T.xmax*E:I,S=b(S,D,360),L.push(S),C.push("cut")):C.push(S)}else C.push(J.clone());
else C.push(J)}F=p.offsetMagnitude(I,E);K=-90;R=F;for(J=new v;0<F;)M=-180+360*F,J.addPath([[M,K],[M,-1*K]]),K*=-1,F--;if(0<L.length&&0<R){F=yield l.cut(A,L,J,B);F=h(L,F);K=[];L=[];for(R=0;R<C.length;R++)J=C[R],"cut"!==J?L.push(J):(J=F.shift(),M=y[R],u.isSome(M)&&"polygon"===M.type&&M.rings&&1<M.rings.length&&J.rings.length>=M.rings.length?(K.push(J),L.push("simplify")):L.push(D?q.geographicToWebMercator(J):J));if(!K.length)return L;C=yield t.simplify(A,K,B);y=[];for(B=0;B<L.length;B++)A=L[B],"simplify"!==
A?y.push(A):y.push(D?q.geographicToWebMercator(C.shift()):C.shift());return y}y=[];for(B=0;B<C.length;B++)A=C[B],"cut"!==A?y.push(A):(A=L.shift(),y.push(!0===D?q.geographicToWebMercator(A):A));return Promise.resolve(y)});return e.apply(this,arguments)}const w=r.getLogger("esri.geometry.support.normalizeUtils");n.getDenormalizedExtent=function(y){if(!y)return null;const C=y.extent;if(!C)return null;var B=y.spatialReference&&f.getInfo(y.spatialReference);if(!B)return C;const [A,D]=B.valid;({width:B}=
C);let {xmin:E,xmax:G}=C;[E,G]=[G,E];if("extent"===y.type||0===B||B<=D||B>2*D||E<A||G>D)return C;let I;switch(y.type){case "polygon":if(1<y.rings.length)I=g(y.rings);else return C;break;case "polyline":if(1<y.paths.length)I=g(y.paths);else return C;break;case "multipoint":I=y.points}y=C.clone();for(let L=0;L<I.length;L++){let J=I[L][0];0>J?(J+=D,G=Math.max(J,G)):(J-=D,E=Math.min(J,E))}y.xmin=E;y.xmax=G;return y.width<B?(y.xmin-=D,y.xmax-=D,y):C};n.normalizeCentralMeridian=k;n.normalizeMapX=function(y,
C){if(C=f.getInfo(C)){const [B,A]=C.valid;C=A-B;if(y<B)for(;y<B;)y+=C;if(y>A)for(;y>A;)y-=C}return y};n.straightLineDensify=a;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(n,c,z,x){function r(m){return x.isPolygon(m)?m.rings:m.paths}const u={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new c({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],
[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:z.WebMercator}),minus180Line:new c({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:z.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new c({paths:[[[180,-180],[180,180]]],spatialReference:z.WGS84}),minus180Line:new c({paths:[[[-180,-180],[-180,180]]],spatialReference:z.WGS84})}};n.cutParams=u;n.getGeometryParts=r;n.getSpatialReferenceMinMaxX=function(m){m=(null==
m?0:m.isWebMercator)?102100:4326;return[u[m].minX,u[m].maxX]};n.offsetMagnitude=function(m,v){return Math.ceil((m-v)/(2*v))};n.updatePolyGeometry=function(m,v){const p=r(m);for(const f of p)for(const q of f)q[0]+=v;return m};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/tasks/geometry/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../core/urlUtils ../../geometry/support/jsonUtils".split(" "),function(n,c,z,x,r,u){function m(){m=c._asyncToGenerator(function*(v,
p,f,q){v="string"===typeof v?r.urlToObject(v):v;const l=p[0].spatialReference;p={...q,query:{...v.query,f:"json",sr:JSON.stringify(l),target:JSON.stringify({geometryType:u.getJsonType(p[0]),geometries:p}),cutter:JSON.stringify(f)}};p=yield x(v.path+"/cut",p);const {cutIndexes:t,geometries:g=[]}=p.data;return{cutIndexes:t,geometries:g.map(a=>{a=u.fromJSON(a);a.spatialReference=l;return a})}});return m.apply(this,arguments)}n.cut=function(v,p,f,q){return m.apply(this,arguments)};Object.defineProperty(n,
"__esModule",{value:!0})})},"esri/tasks/geometry/simplify":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../request","../../core/urlUtils","../../geometry/support/jsonUtils"],function(n,c,z,x,r){function u(){u=c._asyncToGenerator(function*(p,f,q){const l="string"===typeof p?x.urlToObject(p):p;p=f[0].spatialReference;const t=r.getJsonType(f[0]);f={...q,query:{...l.query,f:"json",sr:p.wkid?p.wkid:JSON.stringify(p),geometries:JSON.stringify(m(f))}};f=yield z(l.path+"/simplify",
f);return v(f.data,t,p)});return u.apply(this,arguments)}function m(p){return{geometryType:r.getJsonType(p[0]),geometries:p.map(f=>f.toJSON())}}function v(p,f,q){const l=r.getGeometryType(f);return p.map(t=>{t=l.fromJSON(t);t.spatialReference=q;return t})}n.simplify=function(p,f,q){return u.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache"],
function(n,c,z){function x(p,f){return p?m.get(p,f):null}function r(p,f,q,l=!0){const t=[];for(const g of f)if("*"!==g&&!p.has(g))if(l){f=u(g);try{const a=x(f,p);if(!a)throw new c("feature-store:unsupported-query","invalid SQL expression",{where:f});if(!a.isStandardized)throw new c("feature-store:unsupported-query","expression is not standard",{clause:a});r(p,a.fieldNames,"expression contains missing fields")}catch(a){if((f=a&&a.details)&&(f.clause||f.where))throw a;f&&f.missingFields?t.push(...f.missingFields):
t.push(g)}}else t.push(g);if(t.length)throw new c("feature-store:unsupported-query",q,{missingFields:t});}function u(p){return p.split(" as ")[0]}const m=new z.WhereClauseCache(50,500),v=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));n.getAliasFromFieldName=function(p){return p.split(" as ")[1]};n.getExpressionFromFieldName=u;n.getWhereClause=x;n.hasInvalidFieldType=function(p,f){return(p=
f.get(p))?!v.has(p.type):!1};n.validateFields=r;n.validateHaving=function(p,f,q){if(!f)return!0;const l=m.get(f,p);if(!l)throw new c("feature-store:unsupported-query","invalid SQL expression",{having:f});if(!l.isAggregate)throw new c("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:f});r(p,l.fieldNames,"having contains missing fields");if(!l.getExpressions().every(t=>{const {aggregateType:g,field:a}=t,b=p.has(a)&&p.get(a).name;return q.some(d=>{const {onStatisticField:h,
statisticType:k}=d;return(p.has(h)&&p.get(h).name)===b&&k.toLowerCase().trim()===g})}))throw new c("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:f});return!0};n.validateWhere=function(p,f){if(!f)return!0;const q=m.get(f,p);if(!q)throw new c("feature-store:unsupported-query","invalid SQL expression",{where:f});if(!q.isStandardized)throw new c("feature-store:unsupported-query","where clause is not standard",{where:f});r(p,q.fieldNames,"where clause contains missing fields");
return!0};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(n,c,z){let x=function(){function r(u,m){this._cache=new c(u);this._invalidCache=new c(m)}r.prototype.get=function(u,m){const v=`${m.uid}:${u}`,p=this._cache.get(v);if(p)return p;if(void 0!==this._invalidCache.get(v))return null;try{const f=z.WhereClause.create(u,m);this._cache.put(v,f);return f}catch{return this._invalidCache.put(v,null),
null}};return r}();n.WhereClauseCache=x;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(n){return function(){function c(x,r){this._storage=new n.MemCacheStorage;this._storage.maxSize=x;r&&this._storage.registerRemoveFunc("",r)}var z=c.prototype;z.put=function(x,r){this._storage.put(x,r,1,1)};z.pop=function(x){return this._storage.pop(x)};z.get=function(x){return this._storage.get(x)};z.clear=function(){this._storage.clearAll()};z.destroy=
function(){this._storage.destroy()};return c}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(n,c,z,x,r,u){function m(L,J){L+="";return L.length>=J?L:Array(J-L.length+1).join("0")+L}function v(L,J,F="0",K="0",M="0",R="0",T="",Q="0",S="0"){return"+"===T||"-"===T?(L=`${m(parseInt(L,10),4)}-${m(parseInt(J,10),2)}-${m(parseInt(F,10),2)}`,J="",10>parseFloat(R)&&(J=
"0"),K=`${m(parseInt(K,10),2)}:${m(parseInt(M,10),2)}:${J+parseFloat(R).toString()}`,T=`${T}${m(parseInt(Q,10),2)}:${m(parseInt(S,10),2)}`,new Date(L+"T"+K+T)):new Date(parseInt(L,10),parseInt(J,10)-1,parseInt(F,10),parseInt(K,10),parseInt(M,10),parseFloat(R))}function p(L){let J=y.exec(L);if(null!==J){const [,F,K,M,R,T,Q]=J;return v(F,K,M,R,T,Q)}J=C.exec(L);if(null!==J){const [,F,K,M,R,T,Q,S,X,aa]=J;return v(F,K,M,R,T,Q,S,X,aa)}J=B.exec(L);if(null!==J){const [,F,K,M,R,T,Q,S,X]=J;return v(F,K,M,R,
T,"0",Q,S,X)}J=A.exec(L);if(null!==J){const [,F,K,M,R,T]=J;return v(F,K,M,R,T)}J=w.exec(L);if(null!==J){const [,F,K,M]=J;return v(F,K,M)}throw Error("SQL Invalid Timestamp");}function f(L){L=w.exec(L);if(null===L)throw Error("SQL Invalid Date");const [,J,F,K]=L;return new Date(parseInt(J,10),parseInt(F,10)-1,parseInt(K,10))}function q(L){return Array.isArray(L)?L:[L]}function l(L){return null!==L?!0!==L:null}function t(L,J){return null!=L&&null!=J?!0===L&&!0===J:!1===L||!1===J?!1:null}function g(L,
J){return null!=L&&null!=J?!0===L||!0===J:!0===L||!0===J?!0:null}function a(L,J){if(null==L)return null;let F=!1;for(const K of J)if(null==K)F=null;else if(L===K){F=!0;break}return F}function b(L,J,F){if(null==L)return null;let K="",M=0;for(let R=0;R<J.length;R++){const T=J.charAt(R);switch(M){case 0:T===F?M=1:K=0<="-[]/{}()*+?.\\^$|".indexOf(T)?K+("\\"+T):"%"===T?K+".*":"_"===T?K+".":K+T;break;case 1:K=0<="-[]/{}()*+?.\\^$|".indexOf(T)?K+("\\"+T):K+T,M=0}}return(new RegExp("^"+K+"$")).test(L)}function d(L){return L instanceof
Date?L.valueOf():L}function h(L,J,F){if(null==J||null==F)return null;J=d(J);F=d(F);switch(L){case "\x3c\x3e":return J!==F;case "\x3d":return J===F;case "\x3e":return J>F;case "\x3c":return J<F;case "\x3e\x3d":return J>=F;case "\x3c\x3d":return J<=F}}function k(L,J,F){if(J instanceof r.SqlInterval)if(F instanceof Date)switch(L){case "+":return new Date(J.valueInMilliseconds()+F.getTime());case "-":return J.valueInMilliseconds()-F.getTime();case "*":return J.valueInMilliseconds()*F.getTime();case "/":return J.valueInMilliseconds()/
F.getTime()}else if(F instanceof r.SqlInterval)switch(L){case "+":return r.SqlInterval.createFromMilliseconds(J.valueInMilliseconds()+F.valueInMilliseconds());case "-":return r.SqlInterval.createFromMilliseconds(J.valueInMilliseconds()-F.valueInMilliseconds());case "*":return J.valueInMilliseconds()*F.valueInMilliseconds();case "/":return J.valueInMilliseconds()/F.valueInMilliseconds()}else J=J.valueInMilliseconds();else if(F instanceof r.SqlInterval)if(J instanceof Date)switch(L){case "+":return new Date(F.valueInMilliseconds()+
J.getTime());case "-":return new Date(J.getTime()-F.valueInMilliseconds());case "*":return J.getTime()*F.valueInMilliseconds();case "/":return J.getTime()/F.valueInMilliseconds()}else F=F.valueInMilliseconds();else if(J instanceof Date&&"number"===typeof F)switch(F*=864E5,J=J.getTime(),L){case "+":return new Date(J+F);case "-":return new Date(J-F);case "*":return new Date(J*F);case "/":return new Date(J/F)}else if(F instanceof Date&&"number"===typeof J)switch(J*=864E5,F=F.getTime(),L){case "+":return new Date(J+
F);case "-":return new Date(J-F);case "*":return new Date(J*F);case "/":return new Date(J/F)}switch(L){case "+":return J+F;case "-":return J-F;case "*":return J*F;case "/":return J/F}}function e(L,J,F,K){L=K.getAttribute(L,J);return null!=L&&1===F[J]?new Date(L):L}const w=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,y=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,C=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,B=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,
A=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,D=new Set(["current_timestamp","current_date","current_time"]);let E=function(){function L(){}L.makeBool=function(J){return!0===J};L.featureValue=function(J,F,K,M){return e(J,F,K,M)};L.equalsNull=function(J){return null===J};L.applyLike=function(J,F,K){return b(J,F,K)};L.ensureArray=function(J){return q(J)};L.applyIn=function(J,F){return a(J,F)};L.currentDate=function(){const J=new Date;J.setHours(0,0,0,0);return J};L.makeSqlInterval=function(J,
F,K){return r.SqlInterval.createFromValueAndQualifer(J,F,K)};L.convertInterval=function(J){return J instanceof r.SqlInterval?J.valueInMilliseconds():J};L.currentTimestamp=function(){return new Date};L.compare=function(J,F,K){return h(J,F,K)};L.calculate=function(J,F,K){return k(J,F,K)};L.makeComparable=function(J){return d(J)};L.evaluateFunction=function(J,F){return r.evaluateFunction(J,F)};L.lookup=function(J,F){J=F[J];return void 0===J?null:J};L.between=function(J,F){return null==J||null==F[0]||
null==F[1]?null:J>=F[0]&&J<=F[1]};L.notbetween=function(J,F){return null==J||null==F[0]||null==F[1]?null:J<F[0]||J>F[1]};L.ternaryNot=function(J){return l(J)};L.ternaryAnd=function(J,F){return t(J,F)};L.ternaryOr=function(J,F){return g(J,F)};return L}(),G=function(){function L(F,K){this.fieldsIndex=K;this.datefields={};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=u.WhereGrammar.parse(F);const {isStandardized:M,isAggregate:R,referencedFieldNames:T}=this.extractExpressionInfo(K);
this.referencedFieldNames=T;this.isStandardized=M;this.isAggregate=R}L.create=function(F,K){return new L(F,K)};var J=L.prototype;J.testSet=function(F,K=I){const M={};for(const R of this.fieldNames)M[R]=F.map(T=>K.getAttribute(T,R));return!!this.evaluateNode(this.parseTree,{attributes:M},I)};J.calculateValue=function(F,K=I){F=this.evaluateNode(this.parseTree,F,K);return F instanceof r.SqlInterval?F.valueInMilliseconds()/864E5:F};J.calculateValueCompiled=function(F,K=I){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(F,
this.parameters,K,this.datefields);if(z("csp-restrictions"))return this.calculateValue(F,K);this.compileMe();return this.parseTree._compiledVersion(F,this.parameters,K,this.datefields)};J.testFeature=function(F,K=I){return!!this.evaluateNode(this.parseTree,F,K)};J.testFeatureCompiled=function(F,K=I){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(F,this.parameters,K,this.datefields);if(z("csp-restrictions"))return this.testFeature(F,K);this.compileMe();return!!this.parseTree._compiledVersion(F,
this.parameters,K,this.datefields)};J.getFunctions=function(){const F=new Set;this.visitAll(this.parseTree,K=>{"function"===K.type&&F.add(K.name.toLowerCase())});return Array.from(F)};J.getExpressions=function(){const F=new Map;this.visitAll(this.parseTree,K=>{if("function"===K.type){const M=K.name.toLowerCase();K=K.args.value[0];if("column_ref"===K.type){K=K.column;const R=`${M}-${K}`;F.has(R)||F.set(R,{aggregateType:M,field:K})}}});return[...F.values()]};J.getVariables=function(){const F=new Set;
this.visitAll(this.parseTree,K=>{"param"===K.type&&F.add(K.value.toLowerCase())});return Array.from(F)};J.compileMe=function(){const F="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",F)).bind(E)};J.extractExpressionInfo=function(F){const K=[],M=new Set;let R=!0,T=!0;this.visitAll(this.parseTree,Q=>{switch(Q.type){case "column_ref":{const S=F.get(Q.column);let X,aa;S?X=
aa=S.name:(aa=Q.column,X=aa.toLowerCase());!S||"date"!==S.type&&"esriFieldTypeDate"!==S.type||(this.datefields[S.name]=1);M.has(X)||(M.add(X),K.push(aa));Q.column=aa;break}case "function":{const {name:S,args:X}=Q;Q=X.value.length;R&&(R=r.isStandardized(S,Q));T&&(T=x.isAggregate(S,Q))}}});return{referencedFieldNames:Array.from(K),isStandardized:R,isAggregate:T}};J.visitAll=function(F,K){if(null!=F)switch(K(F),F.type){case "when_clause":this.visitAll(F.operand,K);this.visitAll(F.value,K);break;case "case_expression":for(const M of F.clauses)this.visitAll(M,
K);"simple"===F.format&&this.visitAll(F.operand,K);null!==F.else&&this.visitAll(F.else,K);break;case "expr_list":for(const M of F.value)this.visitAll(M,K);break;case "unary_expr":this.visitAll(F.expr,K);break;case "binary_expr":this.visitAll(F.left,K);this.visitAll(F.right,K);break;case "function":this.visitAll(F.args,K)}};J.evaluateNodeToJavaScript=function(F){switch(F.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(F.value)+", "+JSON.stringify(F.qualifier)+","+
JSON.stringify(F.op)+")";case "case_expression":var K="";if("simple"===F.format){var M="this.makeComparable("+this.evaluateNodeToJavaScript(F.operand)+")";K="( ";for(let R=0;R<F.clauses.length;R++)K+=" ("+M+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(F.clauses[R].operand)+")) ? ("+this.evaluateNodeToJavaScript(F.clauses[R].value)+") : "}else for(K="( ",M=0;M<F.clauses.length;M++)K+=" this.makeBool("+this.evaluateNodeToJavaScript(F.clauses[M].operand)+")\x3d\x3d\x3dtrue ? ("+
this.evaluateNodeToJavaScript(F.clauses[M].value)+") : ";K=null!==F.else?K+this.evaluateNodeToJavaScript(F.else):K+"null";return K+=" )";case "param":return"this.lookup("+JSON.stringify(F.value.toLowerCase())+",lookups)";case "expr_list":K="[";for(M of F.value)"["!==K&&(K+=","),K+=this.evaluateNodeToJavaScript(M);return K+="]";case "unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(F.expr)+")";case "binary_expr":switch(F.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(F.left)+
","+this.evaluateNodeToJavaScript(F.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(F.left)+","+this.evaluateNodeToJavaScript(F.right)+" )";case "IS":if("null"!==F.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(F.left)+")";case "ISNOT":if("null"!==F.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(F.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(F.left)+
",this.ensureArray("+this.evaluateNodeToJavaScript(F.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(F.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(F.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(F.left)+","+this.evaluateNodeToJavaScript(F.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(F.left)+","+this.evaluateNodeToJavaScript(F.right)+")";case "LIKE":return"this.applyLike("+
this.evaluateNodeToJavaScript(F.left)+","+this.evaluateNodeToJavaScript(F.right)+","+JSON.stringify(F.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(F.left)+","+this.evaluateNodeToJavaScript(F.right)+","+JSON.stringify(F.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(F.operator)+","+this.evaluateNodeToJavaScript(F.left)+","+this.evaluateNodeToJavaScript(F.right)+
")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(F.operator)+","+this.evaluateNodeToJavaScript(F.left)+","+this.evaluateNodeToJavaScript(F.right)+")"}throw Error("Not Supported Operator "+F.operator);case "null":case "bool":case "string":case "number":return JSON.stringify(F.value);case "date":return"(new Date("+f(F.value).getTime().toString()+"))";case "timestamp":return"(new Date("+p(F.value).getTime().toString()+"))";case "current_time":return"date"===F.mode?"this.currentDate()":
"this.currentTimestamp()";case "column_ref":return"this.featureValue(feature,"+JSON.stringify(F.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(F.name)+","+this.evaluateNodeToJavaScript(F.args)+")"}throw Error("Unsupported sql syntax "+F.type);};J.evaluateNode=function(F,K,M){switch(F.type){case "interval":return K=this.evaluateNode(F.value,K,M),r.SqlInterval.createFromValueAndQualifer(K,F.qualifier,F.op);case "case_expression":if("simple"===F.format){var R=
d(this.evaluateNode(F.operand,K,M));for(var T=0;T<F.clauses.length;T++)if(R===d(this.evaluateNode(F.clauses[T].operand,K,M)))return this.evaluateNode(F.clauses[T].value,K,M)}else for(R=0;R<F.clauses.length;R++)if(!0===this.evaluateNode(F.clauses[R].operand,K,M))return this.evaluateNode(F.clauses[R].value,K,M);return null!==F.else?this.evaluateNode(F.else,K,M):null;case "param":return this.parameters[F.value.toLowerCase()];case "expr_list":R=[];for(T of F.value)R.push(this.evaluateNode(T,K,M));return R;
case "unary_expr":return l(this.evaluateNode(F.expr,K,M));case "binary_expr":switch(F.operator){case "AND":return t(this.evaluateNode(F.left,K,M),this.evaluateNode(F.right,K,M));case "OR":return g(this.evaluateNode(F.left,K,M),this.evaluateNode(F.right,K,M));case "IS":if("null"!==F.right.type)throw Error("Unsupported RHS for IS");return null===this.evaluateNode(F.left,K,M);case "ISNOT":if("null"!==F.right.type)throw Error("Unsupported RHS for IS");return null!==this.evaluateNode(F.left,K,M);case "IN":return R=
q(this.evaluateNode(F.right,K,M)),a(this.evaluateNode(F.left,K,M),R);case "NOT IN":return R=q(this.evaluateNode(F.right,K,M)),l(a(this.evaluateNode(F.left,K,M),R));case "BETWEEN":return R=this.evaluateNode(F.left,K,M),F=this.evaluateNode(F.right,K,M),null==R||null==F[0]||null==F[1]?null:R>=d(F[0])&&R<=d(F[1]);case "NOTBETWEEN":return R=this.evaluateNode(F.left,K,M),F=this.evaluateNode(F.right,K,M),null==R||null==F[0]||null==F[1]?null:R<d(F[0])||R>d(F[1]);case "LIKE":return b(this.evaluateNode(F.left,
K,M),this.evaluateNode(F.right,K,M),F.escape);case "NOT LIKE":return l(b(this.evaluateNode(F.left,K,M),this.evaluateNode(F.right,K,M),F.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return h(F.operator,this.evaluateNode(F.left,K,M),this.evaluateNode(F.right,K,M));case "-":case "+":case "*":case "/":return k(F.operator,this.evaluateNode(F.left,K,M),this.evaluateNode(F.right,K,M))}case "null":case "bool":case "string":case "number":return F.value;case "date":return f(F.value);
case "timestamp":return p(F.value);case "current_time":return K=new Date,"date"===F.mode&&K.setHours(0,0,0,0),K;case "column_ref":return e(K,F.column,this.datefields,M);case "function":return K=this.evaluateNode(F.args,K,M),this.isAggregate?x.aggregateFunction(F.name,K):r.evaluateFunction(F.name,K)}throw Error("Unsupported sql syntax "+F.type);};c._createClass(L,[{key:"fieldNames",get:function(){return this.referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;
this._hasDateFunctions=!1;this.visitAll(this.parseTree,F=>{"current_time"===F.type?this._hasDateFunctions=!0:"function"===F.type&&(this._hasDateFunctions=this._hasDateFunctions||D.has(F.name.toLowerCase()))});return this._hasDateFunctions}}]);return L}();const I={getAttribute(L,J){return(L&&"object"===typeof L.attributes?L.attributes:L)[J]}};n.WhereClause=G;n.defaultAttributeAdapter=I;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],
function(n){function c(r){let u=0;for(let m=0;m<r.length;m++)u+=r[m];return u/r.length}function z(r){const u=c(r),m=r.length;let v=0;for(const p of r)v+=(p-u)**2;return 1<m?v/(m-1):0}const x={min:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.min.apply(Math,r[0])},max:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.max.apply(Math,r[0])},avg:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:c(r[0])},sum:{minParams:1,maxParams:1,evaluate:r=>{if(null==r[0])r=null;else{{r=r[0];
let u=0;for(let m=0;m<r.length;m++)u+=r[m];r=u}}return r}},stddev:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.sqrt(z(r[0]))},count:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:r[0].length},var:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:z(r[0])}};n.aggregateFunction=function(r,u){const m=x[r.toLowerCase()];if(null==m)throw Error("Function Not Recognised");if(u.length<m.minParams||u.length>m.maxParams)throw Error(`Invalid Parameter count for call to ${r.toUpperCase()}`);
return m.evaluate(u)};n.isAggregate=function(r,u){r=x[r.toLowerCase()];return null!=r&&u>=r.minParams&&u<=r.maxParams};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(n,c){let z=function(){function r(){this.op="+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}r.fixDefaults=function(u){if(null!==u.precision||null!==u.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");
};r.createFromMilliseconds=function(u){const m=new r;m.second=u/1E3;return m};r.createFromValueAndQualifer=function(u,m,v){let p=null;const f=new r;f.op="-"===v?"-":"+";if("interval-period"===m.type){r.fixDefaults(m);if("year"===m.period||"month"===m.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(u))f[m.period]=parseFloat(u);else throw Error("Illegal Interval");}else{r.fixDefaults(m.start);r.fixDefaults(m.end);if("year"===m.start.period||"month"===m.start.period)throw Error("Year-Month Intervals not supported");
if("year"===m.end.period||"month"===m.end.period)throw Error("Year-Month Intervals not supported");switch(m.start.period){case "day":switch(m.end.period){case "hour":p=/^[0-9]{1,} [0-9]{1,}$/;if(p.test(u))f[m.start.period]=parseFloat(u.split(" ")[0]),f[m.end.period]=parseFloat(u.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":p=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(p.test(u))f[m.start.period]=parseFloat(u.split(" ")[0]),u=u.split(" ")[1].split(":"),f.hour=parseFloat(u[0]),
f.minute=parseFloat(u[1]);else throw Error("Illegal Interval");break;case "second":p=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(p.test(u))f[m.start.period]=parseFloat(u.split(" ")[0]),u=u.split(" ")[1].split(":"),f.hour=parseFloat(u[0]),f.minute=parseFloat(u[1]),f.second=parseFloat(u[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "hour":switch(m.end.period){case "minute":p=/^[0-9]{1,}:[0-9]{1,}$/;if(p.test(u))f.hour=parseFloat(u.split(":")[0]),
f.minute=parseFloat(u.split(":")[1]);else throw Error("Illegal Interval");break;case "second":p=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(p.test(u))u=u.split(":"),f.hour=parseFloat(u[0]),f.minute=parseFloat(u[1]),f.second=parseFloat(u[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "minute":switch(m.end.period){case "second":p=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(p.test(u))u=u.split(":"),f.minute=parseFloat(u[0]),f.second=parseFloat(u[1]);
else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;default:throw"Invalid Interval.";}}return f};r.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return r}();const x={extract:{minParams:2,maxParams:2,evaluate:([r,u])=>{if(null==u)return null;if(u instanceof Date)switch(r.toUpperCase()){case "SECOND":return u.getSeconds();case "MINUTE":return u.getMinutes();
case "HOUR":return u.getHours();case "DAY":return u.getDate();case "MONTH":return u.getMonth()+1;case "YEAR":return u.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:r=>{if(2===r.length){const [u,m]=r;return null==u||null==m?null:u.toString().substring(m-1)}if(3===r.length){const [u,m,v]=r;return null==u||null==m||null==v?null:0>=v?"":u.toString().substring(m-1,m+v-1)}}},position:{minParams:2,maxParams:2,evaluate:([r,u])=>null==r||
null==u?null:u.indexOf(r)+1},trim:{minParams:2,maxParams:3,evaluate:r=>{var u=3===r.length,m=u?r[1]:" ";u=u?r[2]:r[1];if(null==m||null==u)return null;m=`(${c.escapeRegExpString(m)})`;switch(r[0]){case "BOTH":return u.replace(new RegExp(`^${m}*|${m}*$`,"g"),"");case "LEADING":return u.replace(new RegExp(`^${m}*`,"g"),"");case "TRAILING":return u.replace(new RegExp(`${m}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.abs(r[0])},
ceiling:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.ceil(r[0])},floor:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.floor(r[0])},log:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.log(r[0])},log10:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.log(r[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.sin(r[0])},cos:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.cos(r[0])},tan:{minParams:1,maxParams:1,evaluate:r=>
null==r[0]?null:Math.tan(r[0])},asin:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.asin(r[0])},acos:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.acos(r[0])},atan:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.atan(r[0])},sign:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:0<r[0]?1:0>r[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:r=>null==r[0]||null==r[1]?null:r[0]**r[1]},mod:{minParams:2,maxParams:2,evaluate:r=>null==r[0]||null==r[1]?null:r[0]%r[1]},round:{minParams:1,
maxParams:2,evaluate:r=>{const u=r[0];r=2===r.length?10**r[1]:1;return null==u?null:Math.round(u*r)/r}},truncate:{minParams:1,maxParams:2,evaluate:r=>null==r[0]?null:1===r.length?parseInt(r[0].toFixed(0),10):parseFloat(r[0].toFixed(r[1]))},char_length:{minParams:1,maxParams:1,evaluate:r=>"string"===typeof r[0]||r[0]instanceof String?r[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:r=>{let u="";for(let m=0;m<r.length;m++){if(null==r[m])return null;u+=r[m].toString()}return u}},lower:{minParams:1,
maxParams:1,evaluate:r=>null==r[0]?null:r[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:r[0].toString().toUpperCase()}};n.SqlInterval=z;n.evaluateFunction=function(r,u){const m=x[r.toLowerCase()];if(null==m)throw Error("Function Not Recognised");if(u.length<m.minParams||u.length>m.maxParams)throw Error(`Invalid Parameter count for call to ${r.toUpperCase()}`);return m.evaluate(u)};n.isStandardized=function(r,u){r=x[r.toLowerCase()];return null!=r&&u>=r.minParams&&
u<=r.maxParams};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(n,c){var z={exports:{}};(function(r){(function(u,m){r.exports&&(r.exports=m())})(c.commonjsGlobal,function(){function u(m,v,p,f){this.message=m;this.expected=v;this.found=p;this.location=f;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,u)}(function(m,v){function p(){this.constructor=
m}p.prototype=v.prototype;m.prototype=new p})(u,Error);u.buildMessage=function(m,v){function p(t){return t.charCodeAt(0).toString(16).toUpperCase()}function f(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+p(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+p(g)})}function q(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,
"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+p(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+p(g)})}var l={literal:function(t){return'"'+f(t.text)+'"'},class:function(t){var g="",a;for(a=0;a<t.parts.length;a++)g+=t.parts[a]instanceof Array?q(t.parts[a][0])+"-"+q(t.parts[a][1]):q(t.parts[a]);return"["+(t.inverted?"^":"")+g+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},
other:function(t){return t.description}};return"Expected "+function(t){var g=Array(t.length),a;for(a=0;a<t.length;a++){var b=a;var d=t[a];d=l[d.type](d);g[b]=d}g.sort();if(0<g.length){for(t=a=1;a<g.length;a++)g[a-1]!==g[a]&&(g[t]=g[a],t++);g.length=t}switch(g.length){case 1:return g[0];case 2:return g[0]+" or "+g[1];default:return g.slice(0,-1).join(", ")+", or "+g[g.length-1]}}(m)+" but "+(v?'"'+f(v)+'"':"end of input")+" found."};return{SyntaxError:u,parse:function(m,v){function p(W,ea){return{type:"literal",
text:W,ignoreCase:ea}}function f(W,ea,ca){return{type:"class",parts:W,inverted:ea,ignoreCase:ca}}function q(W){var ea=ec[W],ca;if(!ea){for(ca=W-1;!ec[ca];)ca--;ea=ec[ca];for(ea={line:ea.line,column:ea.column};ca<W;)10===m.charCodeAt(ca)?(ea.line++,ea.column=1):ea.column++,ca++;ec[W]=ea}return ea}function l(W,ea){var ca=q(W),na=q(ea);return{start:{offset:W,line:ca.line,column:ca.column},end:{offset:ea,line:na.line,column:na.column}}}function t(W){O<tb||(O>tb&&(tb=O,vc=[]),vc.push(W))}function g(){var W=
O;var ea=ta();if(ea!==H)if(ea=b(),ea!==H){var ca=ta();ca!==H?W=ea:(O=W,W=H)}else O=W,W=H;else O=W,W=H;return W}function a(){var W=O;var ea=b();if(ea!==H){var ca=[];var na=O;var xa=ta();if(xa!==H){var Ha=Ka();if(Ha!==H){var Ma=ta();if(Ma!==H){var Qa=b();Qa!==H?na=xa=[xa,Ha,Ma,Qa]:(O=na,na=H)}else O=na,na=H}else O=na,na=H}else O=na,na=H;for(;na!==H;)ca.push(na),na=O,xa=ta(),xa!==H?(Ha=Ka(),Ha!==H?(Ma=ta(),Ma!==H?(Qa=b(),Qa!==H?na=xa=[xa,Ha,Ma,Qa]:(O=na,na=H)):(O=na,na=H)):(O=na,na=H)):(O=na,na=H);if(ca!==
H){W={type:"expr_list"};ea=[ea];for(na=0;na<ca.length;na++)ea.push(ca[na][3]);W.value=ea}else O=W,W=H}else O=W,W=H;return W}function b(){var W=O;var ea=d();if(ea!==H){var ca=[];var na=O;var xa=ta();if(xa!==H){var Ha=V();if(Ha!==H){var Ma=ta();if(Ma!==H){var Qa=d();Qa!==H?na=xa=[xa,Ha,Ma,Qa]:(O=na,na=H)}else O=na,na=H}else O=na,na=H}else O=na,na=H;for(;na!==H;)ca.push(na),na=O,xa=ta(),xa!==H?(Ha=V(),Ha!==H?(Ma=ta(),Ma!==H?(Qa=d(),Qa!==H?na=xa=[xa,Ha,Ma,Qa]:(O=na,na=H)):(O=na,na=H)):(O=na,na=H)):(O=
na,na=H);ca!==H?W=ea=bb(ea,ca):(O=W,W=H)}else O=W,W=H;return W}function d(){var W=O;var ea=h();if(ea!==H){var ca=[];var na=O;var xa=ta();if(xa!==H){var Ha=P();if(Ha!==H){var Ma=ta();if(Ma!==H){var Qa=h();Qa!==H?na=xa=[xa,Ha,Ma,Qa]:(O=na,na=H)}else O=na,na=H}else O=na,na=H}else O=na,na=H;for(;na!==H;)ca.push(na),na=O,xa=ta(),xa!==H?(Ha=P(),Ha!==H?(Ma=ta(),Ma!==H?(Qa=h(),Qa!==H?na=xa=[xa,Ha,Ma,Qa]:(O=na,na=H)):(O=na,na=H)):(O=na,na=H)):(O=na,na=H);ca!==H?W=ea=bb(ea,ca):(O=W,W=H)}else O=W,W=H;return W}
function h(){var W=O;var ea=ia();if(ea===H){ea=O;if(33===m.charCodeAt(O)){var ca=Ta;O++}else ca=H,0===ua&&t(vb);if(ca!==H){var na=O;ua++;if(61===m.charCodeAt(O)){var xa=yb;O++}else xa=H,0===ua&&t(Fb);ua--;xa===H?na=void 0:(O=na,na=H);na!==H?ea=ca=[ca,na]:(O=ea,ea=H)}else O=ea,ea=H}ea!==H?(ca=ta(),ca!==H?(na=h(),na!==H?W=ea={type:"unary_expr",operator:"NOT",expr:na}:(O=W,W=H)):(O=W,W=H)):(O=W,W=H);if(W===H)if(W=O,ea=y(),ea!==H)if(ca=ta(),ca!==H){ca=[];na=O;xa=ta();if(xa!==H){var Ha=k();if(Ha!==H){var Ma=
ta();if(Ma!==H){var Qa=y();Qa!==H?na=xa=[xa,Ha,Ma,Qa]:(O=na,na=H)}else O=na,na=H}else O=na,na=H}else O=na,na=H;if(na!==H)for(;na!==H;)ca.push(na),na=O,xa=ta(),xa!==H?(Ha=k(),Ha!==H?(Ma=ta(),Ma!==H?(Qa=y(),Qa!==H?na=xa=[xa,Ha,Ma,Qa]:(O=na,na=H)):(O=na,na=H)):(O=na,na=H)):(O=na,na=H);else ca=H;ca!==H&&(ca={type:"arithmetic",tail:ca});ca===H&&(ca=O,na=w(),na!==H?(xa=ta(),xa!==H?(xa=Ga(),xa!==H?(xa=ta(),xa!==H?(xa=a(),xa!==H?(Ha=ta(),Ha!==H?(Ha=La(),Ha!==H?ca=na={op:na,right:xa}:(O=ca,ca=H)):(O=ca,ca=
H)):(O=ca,ca=H)):(O=ca,ca=H)):(O=ca,ca=H)):(O=ca,ca=H)):(O=ca,ca=H),ca===H&&(ca=O,na=w(),na!==H?(xa=ta(),xa!==H?(xa=Ga(),xa!==H?(xa=ta(),xa!==H?(xa=La(),xa!==H?ca=na={op:na,right:{type:"expr_list",value:[]}}:(O=ca,ca=H)):(O=ca,ca=H)):(O=ca,ca=H)):(O=ca,ca=H)):(O=ca,ca=H),ca===H&&(ca=O,na=w(),na!==H?(xa=ta(),xa!==H?(xa=J(),xa!==H?ca=na={op:na,right:xa}:(O=ca,ca=H)):(O=ca,ca=H)):(O=ca,ca=H))),ca===H&&(ca=O,xa=ia(),xa!==H?(na=ta(),na!==H?(na=Y(),na!==H?(Ha=ta(),Ha!==H?(Ha=y(),Ha!==H?(Ma=ta(),Ma!==H?
(Ma=P(),Ma!==H?(xa=ta(),xa!==H?(xa=y(),xa!==H?ca=xa={op:"NOT"+na,right:{type:"expr_list",value:[Ha,xa]}}:(O=ca,ca=H)):(O=ca,ca=H)):(O=ca,ca=H)):(O=ca,ca=H)):(O=ca,ca=H)):(O=ca,ca=H)):(O=ca,ca=H)):(O=ca,ca=H)):(O=ca,ca=H),ca===H&&(ca=O,xa=Y(),xa!==H?(na=ta(),na!==H?(na=y(),na!==H?(Ha=ta(),Ha!==H?(Ha=P(),Ha!==H?(Ma=ta(),Ma!==H?(Ma=y(),Ma!==H?ca=xa={op:xa,right:{type:"expr_list",value:[na,Ma]}}:(O=ca,ca=H)):(O=ca,ca=H)):(O=ca,ca=H)):(O=ca,ca=H)):(O=ca,ca=H)):(O=ca,ca=H)):(O=ca,ca=H)),ca===H&&(ca=O,na=
N(),na!==H?(xa=ta(),xa!==H?(xa=ia(),xa!==H?(xa=ta(),xa!==H?(xa=y(),xa!==H?ca=na={op:na+"NOT",right:xa}:(O=ca,ca=H)):(O=ca,ca=H)):(O=ca,ca=H)):(O=ca,ca=H)):(O=ca,ca=H),ca===H&&(ca=O,na=N(),na!==H?(xa=ta(),xa!==H?(xa=y(),xa!==H?ca=na={op:na,right:xa}:(O=ca,ca=H)):(O=ca,ca=H)):(O=ca,ca=H)),ca===H&&(ca=O,na=e(),na!==H?(xa=ta(),xa!==H?(xa=Q(),xa!==H?(Ha=ta(),Ha!==H?(Ha=O,m.substr(O,6).toLowerCase()===zd?(Ma=m.substr(O,6),O+=6):(Ma=H,0===ua&&t(Ad)),Ma!==H?(Ma=O,ua++,Qa=I(),ua--,Qa===H?Ma=void 0:(O=Ma,Ma=
H),Ma!==H?Ha="ESCAPE":(O=Ha,Ha=H)):(O=Ha,Ha=H),Ha!==H?(Ha=ta(),Ha!==H?(Ha=S(),Ha!==H?ca=na={op:na,right:xa,escape:Ha.value}:(O=ca,ca=H)):(O=ca,ca=H)):(O=ca,ca=H)):(O=ca,ca=H)):(O=ca,ca=H)):(O=ca,ca=H)):(O=ca,ca=H),ca===H&&(ca=O,na=e(),na!==H?(xa=ta(),xa!==H?(xa=Q(),xa!==H?ca=na={op:na,right:xa,escape:""}:(O=ca,ca=H)):(O=ca,ca=H)):(O=ca,ca=H))))));ca===H&&(ca=null);ca!==H?(W=ea,ea=ca,""==ea||void 0==ea||null==ea?ea=W:(ca=null,ea=ca="arithmetic"==ea.type?bb(W,ea.tail):fb(ea.op,W,ea.right,ea.escape)),
W=ea):(O=W,W=H)}else O=W,W=H;else O=W,W=H;return W}function k(){if(m.substr(O,2)===fc){var W=fc;O+=2}else W=H,0===ua&&t(mb);W===H&&(62===m.charCodeAt(O)?(W=zb,O++):(W=H,0===ua&&t(Va)),W===H&&(m.substr(O,2)===kb?(W=kb,O+=2):(W=H,0===ua&&t(ub)),W===H&&(m.substr(O,2)===Ra?(W=Ra,O+=2):(W=H,0===ua&&t(Gb)),W===H&&(60===m.charCodeAt(O)?(W=la,O++):(W=H,0===ua&&t(oa)),W===H&&(61===m.charCodeAt(O)?(W=yb,O++):(W=H,0===ua&&t(Fb)),W===H&&(m.substr(O,2)===ka?(W=ka,O+=2):(W=H,0===ua&&t(pa))))))));return W}function e(){var W=
W=O;var ea=ia();if(ea!==H){var ca=ta();if(ca!==H){var na=U();na!==H?W=ea=[ea,ca,na]:(O=W,W=H)}else O=W,W=H}else O=W,W=H;W!==H&&(W=W[0]+" "+W[2]);W===H&&(W=U());return W}function w(){var W=W=O;var ea=ia();if(ea!==H){var ca=ta();if(ca!==H){var na=Ba();na!==H?W=ea=[ea,ca,na]:(O=W,W=H)}else O=W,W=H}else O=W,W=H;W!==H&&(W=W[0]+" "+W[2]);W===H&&(W=Ba());return W}function y(){var W=O;var ea=B();if(ea!==H){var ca=[];var na=O;var xa=ta();if(xa!==H){var Ha=C();if(Ha!==H){var Ma=ta();if(Ma!==H){var Qa=B();Qa!==
H?na=xa=[xa,Ha,Ma,Qa]:(O=na,na=H)}else O=na,na=H}else O=na,na=H}else O=na,na=H;for(;na!==H;)ca.push(na),na=O,xa=ta(),xa!==H?(Ha=C(),Ha!==H?(Ma=ta(),Ma!==H?(Qa=B(),Qa!==H?na=xa=[xa,Ha,Ma,Qa]:(O=na,na=H)):(O=na,na=H)):(O=na,na=H)):(O=na,na=H);ca!==H?W=ea=bb(ea,ca):(O=W,W=H)}else O=W,W=H;return W}function C(){if(43===m.charCodeAt(O)){var W=Da;O++}else W=H,0===ua&&t(Ea);W===H&&(45===m.charCodeAt(O)?(W=Na,O++):(W=H,0===ua&&t(Pa)));return W}function B(){var W=O;var ea=D();if(ea!==H){var ca=[];var na=O;
var xa=ta();if(xa!==H){var Ha=A();if(Ha!==H){var Ma=ta();if(Ma!==H){var Qa=D();Qa!==H?na=xa=[xa,Ha,Ma,Qa]:(O=na,na=H)}else O=na,na=H}else O=na,na=H}else O=na,na=H;for(;na!==H;)ca.push(na),na=O,xa=ta(),xa!==H?(Ha=A(),Ha!==H?(Ma=ta(),Ma!==H?(Qa=D(),Qa!==H?na=xa=[xa,Ha,Ma,Qa]:(O=na,na=H)):(O=na,na=H)):(O=na,na=H)):(O=na,na=H);ca!==H?W=ea=bb(ea,ca):(O=W,W=H)}else O=W,W=H;return W}function A(){if(42===m.charCodeAt(O)){var W=$a;O++}else W=H,0===ua&&t(Za);W===H&&(47===m.charCodeAt(O)?(W=Ya,O++):(W=H,0===
ua&&t(ib)));return W}function D(){var W=S();if(W===H){var ea=O;var ca=O;var na=ra();if(na!==H){var xa=za();if(xa!==H){var Ha=wa();Ha!==H?ca=na=parseFloat(na+xa+Ha):(O=ca,ca=H)}else O=ca,ca=H}else O=ca,ca=H;ca===H&&(ca=O,na=ra(),na!==H?(xa=za(),xa!==H?ca=na=parseFloat(na+xa):(O=ca,ca=H)):(O=ca,ca=H),ca===H&&(ca=O,na=ra(),na!==H?(xa=wa(),xa!==H?ca=na=parseFloat(na+xa):(O=ca,ca=H)):(O=ca,ca=H),ca===H&&(ca=O,na=ra(),na!==H&&(na=parseFloat(na)),ca=na)));var Ma=ca;if(Ma!==H){var Qa=O;ua++;var Bd=G();ua--;
Bd===H?Qa=void 0:(O=Qa,Qa=H);Qa!==H?ea=Ma={type:"number",value:Ma}:(O=ea,ea=H)}else O=ea,ea=H;W=ea;if(W===H){var Rb=O;var Hb=O;if(m.substr(O,4).toLowerCase()===Cd){var gc=m.substr(O,4);O+=4}else gc=H,0===ua&&t(Dd);if(gc!==H){var Sb=O;ua++;var Ed=I();ua--;Ed===H?Sb=void 0:(O=Sb,Sb=H);Sb!==H?Hb=gc=[gc,Sb]:(O=Hb,Hb=H)}else O=Hb,Hb=H;var Cb=Hb;Cb!==H&&(Cb={type:"bool",value:!0});Rb=Cb;if(Rb===H){Rb=O;var Ib=O;if(m.substr(O,5).toLowerCase()===Fd){var hc=m.substr(O,5);O+=5}else hc=H,0===ua&&t(Gd);if(hc!==
H){var Tb=O;ua++;var Hd=I();ua--;Hd===H?Tb=void 0:(O=Tb,Tb=H);Tb!==H?Ib=hc=[hc,Tb]:(O=Ib,Ib=H)}else O=Ib,Ib=H;Cb=Ib;Cb!==H&&(Cb={type:"bool",value:!1});Rb=Cb}W=Rb;if(W===H){var Jb=O;if(m.substr(O,4).toLowerCase()===Id){var ic=m.substr(O,4);O+=4}else ic=H,0===ua&&t(Jd);if(ic!==H){var Ub=O;ua++;var Kd=I();ua--;Kd===H?Ub=void 0:(O=Ub,Ub=H);Ub!==H?Jb=ic=[ic,Ub]:(O=Jb,Jb=H)}else O=Jb,Jb=H;var wc=Jb;wc!==H&&(wc={type:"null",value:null});W=wc;if(W===H){var Ab=O;var Kb=O;if(m.substr(O,4).toLowerCase()===
Ld){var xc=m.substr(O,4);O+=4}else xc=H,0===ua&&t(Md);if(xc!==H){var jc=O;ua++;var Nd=I();ua--;Nd===H?jc=void 0:(O=jc,jc=H);jc!==H?Kb=xc="DATE":(O=Kb,Kb=H)}else O=Kb,Kb=H;var Wc=Kb;if(Wc!==H){var Od=ta();if(Od!==H){var Xc=Q();Xc!==H?Ab=Wc={type:"date",value:Xc.value}:(O=Ab,Ab=H)}else O=Ab,Ab=H}else O=Ab,Ab=H;W=Ab;if(W===H){var Bb=O;var Lb=O;if(m.substr(O,9).toLowerCase()===Pd){var yc=m.substr(O,9);O+=9}else yc=H,0===ua&&t(Qd);if(yc!==H){var kc=O;ua++;var Rd=I();ua--;Rd===H?kc=void 0:(O=kc,kc=H);kc!==
H?Lb=yc="TIMESTAMP":(O=Lb,Lb=H)}else O=Lb,Lb=H;var Yc=Lb;if(Yc!==H){var Sd=ta();if(Sd!==H){var Zc=Q();Zc!==H?Bb=Yc={type:"timestamp",value:Zc.value}:(O=Bb,Bb=H)}else O=Bb,Bb=H}else O=Bb,Bb=H;W=Bb;if(W===H){var Wa=O;var Vb=ha();if(Vb!==H){var zc=ta();if(zc!==H){if(45===m.charCodeAt(O)){var wb=Na;O++}else wb=H,0===ua&&t(Pa);wb===H&&(43===m.charCodeAt(O)?(wb=Da,O++):(wb=H,0===ua&&t(Ea)));if(wb!==H){var Ac=ta();if(Ac!==H){var Wb=Q();if(Wb!==H){var Td=ta();if(Td!==H){var $c=K();$c!==H?Wa=Vb={type:"interval",
value:Wb,qualifier:$c,op:wb}:(O=Wa,Wa=H)}else O=Wa,Wa=H}else O=Wa,Wa=H}else O=Wa,Wa=H}else O=Wa,Wa=H}else O=Wa,Wa=H}else O=Wa,Wa=H;Wa===H&&(Wa=O,Vb=ha(),Vb!==H?(zc=ta(),zc!==H?(wb=Q(),wb!==H?(Ac=ta(),Ac!==H?(Wb=K(),Wb!==H?Wa=Vb={type:"interval",value:wb,qualifier:Wb,op:""}:(O=Wa,Wa=H)):(O=Wa,Wa=H)):(O=Wa,Wa=H)):(O=Wa,Wa=H)):(O=Wa,Wa=H));W=Wa}}}}}}var Ua=W;if(Ua===H){var cb=O;var Mb=O;if(m.substr(O,7).toLowerCase()===Ud){var Bc=m.substr(O,7);O+=7}else Bc=H,0===ua&&t(Vd);if(Bc!==H){var lc=O;ua++;var Wd=
I();ua--;Wd===H?lc=void 0:(O=lc,lc=H);lc!==H?Mb=Bc="EXTRACT":(O=Mb,Mb=H)}else O=Mb,Mb=H;var ad=Mb;if(ad!==H){var Xd=ta();if(Xd!==H){var Yd=Ga();if(Yd!==H){var Zd=ta();if(Zd!==H){var qb=Z();qb===H&&(qb=da(),qb===H&&(qb=ja(),qb===H&&(qb=qa(),qb===H&&(qb=sa(),qb===H&&(qb=ya())))));var bd=qb;if(bd!==H){var $d=ta();if($d!==H){var ae=ba();if(ae!==H){var be=ta();if(be!==H){var cd=b();if(cd!==H){var ce=ta();if(ce!==H){var de=La();de!==H?cb=ad={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",
value:bd},cd]}}:(O=cb,cb=H)}else O=cb,cb=H}else O=cb,cb=H}else O=cb,cb=H}else O=cb,cb=H}else O=cb,cb=H}else O=cb,cb=H}else O=cb,cb=H}else O=cb,cb=H}else O=cb,cb=H}else O=cb,cb=H;Ua=cb;if(Ua===H){var ab=O;var Nb=O;if(m.substr(O,9).toLowerCase()===ee){var Cc=m.substr(O,9);O+=9}else Cc=H,0===ua&&t(fe);if(Cc!==H){var mc=O;ua++;var ge=I();ua--;ge===H?mc=void 0:(O=mc,mc=H);mc!==H?Nb=Cc="SUBSTRING":(O=Nb,Nb=H)}else O=Nb,Nb=H;var dd=Nb;if(dd!==H){var he=ta();if(he!==H){var ie=Ga();if(ie!==H){var je=ta();
if(je!==H){var Dc=b();if(Dc!==H){var ke=ta();if(ke!==H){var le=ba();if(le!==H){var me=ta();if(me!==H){var Ec=b();if(Ec!==H){var ne=ta();if(ne!==H){var lb=O;var Ob=O;if(m.substr(O,3).toLowerCase()===oe){var Fc=m.substr(O,3);O+=3}else Fc=H,0===ua&&t(pe);if(Fc!==H){var nc=O;ua++;var qe=I();ua--;qe===H?nc=void 0:(O=nc,nc=H);nc!==H?Ob=Fc="FOR":(O=Ob,Ob=H)}else O=Ob,Ob=H;var Xb=Ob;if(Xb!==H){var ed=ta();if(ed!==H){var fd=b();if(fd!==H){var gd=ta();gd!==H?lb=Xb=[Xb,ed,fd,gd]:(O=lb,lb=H)}else O=lb,lb=H}else O=
lb,lb=H}else O=lb,lb=H;lb===H&&(lb=null);lb!==H?(Xb=La(),Xb!==H?ab=dd={type:"function",name:"substring",args:{type:"expr_list",value:lb?[Dc,Ec,lb[2]]:[Dc,Ec]}}:(O=ab,ab=H)):(O=ab,ab=H)}else O=ab,ab=H}else O=ab,ab=H}else O=ab,ab=H}else O=ab,ab=H}else O=ab,ab=H}else O=ab,ab=H}else O=ab,ab=H}else O=ab,ab=H}else O=ab,ab=H}else O=ab,ab=H;Ua=ab;if(Ua===H){var Oa=O;var Yb=fa();if(Yb!==H){var Gc=ta();if(Gc!==H){var Hc=Ga();if(Hc!==H){var Ic=ta();if(Ic!==H){var rb=F();rb===H&&(rb=null);if(rb!==H){var Jc=ta();
if(Jc!==H){var Zb=b();if(Zb!==H){var Kc=ta();if(Kc!==H){var Lc=ba();if(Lc!==H){var re=ta();if(re!==H){var hd=b();if(hd!==H){var se=ta();if(se!==H){var te=La();te!==H?Oa=Yb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==rb?"BOTH":rb},Zb,hd]}}:(O=Oa,Oa=H)}else O=Oa,Oa=H}else O=Oa,Oa=H}else O=Oa,Oa=H}else O=Oa,Oa=H}else O=Oa,Oa=H}else O=Oa,Oa=H}else O=Oa,Oa=H}else O=Oa,Oa=H}else O=Oa,Oa=H}else O=Oa,Oa=H}else O=Oa,Oa=H}else O=Oa,Oa=H;Oa===H&&(Oa=O,Yb=fa(),Yb!==H?
(Gc=ta(),Gc!==H?(Hc=Ga(),Hc!==H?(Ic=ta(),Ic!==H?(rb=F(),rb===H&&(rb=null),rb!==H?(Jc=ta(),Jc!==H?(Zb=b(),Zb!==H?(Kc=ta(),Kc!==H?(Lc=La(),Lc!==H?Oa=Yb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==rb?"BOTH":rb},Zb]}}:(O=Oa,Oa=H)):(O=Oa,Oa=H)):(O=Oa,Oa=H)):(O=Oa,Oa=H)):(O=Oa,Oa=H)):(O=Oa,Oa=H)):(O=Oa,Oa=H)):(O=Oa,Oa=H)):(O=Oa,Oa=H));Ua=Oa;if(Ua===H){var db=O;var Pb=O;if(m.substr(O,8).toLowerCase()===ue){var Mc=m.substr(O,8);O+=8}else Mc=H,0===ua&&t(ve);if(Mc!==
H){var oc=O;ua++;var we=I();ua--;we===H?oc=void 0:(O=oc,oc=H);oc!==H?Pb=Mc="POSITION":(O=Pb,Pb=H)}else O=Pb,Pb=H;var id=Pb;if(id!==H){var xe=ta();if(xe!==H){var ye=Ga();if(ye!==H){var ze=ta();if(ze!==H){var jd=b();if(jd!==H){var Ae=ta();if(Ae!==H){var Be=Ba();if(Be!==H){var Ce=ta();if(Ce!==H){var kd=b();if(kd!==H){var De=ta();if(De!==H){var Ee=La();Ee!==H?db=id={type:"function",name:"position",args:{type:"expr_list",value:[jd,kd]}}:(O=db,db=H)}else O=db,db=H}else O=db,db=H}else O=db,db=H}else O=db,
db=H}else O=db,db=H}else O=db,db=H}else O=db,db=H}else O=db,db=H}else O=db,db=H}else O=db,db=H;Ua=db;if(Ua===H){var jb=O;var $b;var sb=O;sb=$b=E();if(sb===H)if(sb=O,96===m.charCodeAt(O)?($b=ld,O++):($b=H,0===ua&&t(md)),$b!==H){var pc=[];if(nd.test(m.charAt(O))){var xb=m.charAt(O);O++}else xb=H,0===ua&&t(od);if(xb!==H)for(;xb!==H;)pc.push(xb),nd.test(m.charAt(O))?(xb=m.charAt(O),O++):(xb=H,0===ua&&t(od));else pc=H;pc!==H?(96===m.charCodeAt(O)?(xb=ld,O++):(xb=H,0===ua&&t(md)),xb!==H?sb=$b=pc.join(""):
(O=sb,sb=H)):(O=sb,sb=H)}else O=sb,sb=H;var Nc=sb;if(Nc!==H){var Fe=ta();if(Fe!==H){var Ge=Ga();if(Ge!==H){var He=ta();if(He!==H){var ac=a();ac===H&&(ac=null);if(ac!==H){var Ie=ta();if(Ie!==H){var Je=La();Je!==H?jb=Nc={type:"function",name:Nc,args:ac?ac:{type:"expr_list",value:[]}}:(O=jb,jb=H)}else O=jb,jb=H}else O=jb,jb=H}else O=jb,jb=H}else O=jb,jb=H}else O=jb,jb=H}else O=jb,jb=H;Ua=jb;if(Ua===H){var nb;var Sa=O;var bc=Aa();if(bc!==H){var Oc=ta();if(Oc!==H){var cc=b();if(cc!==H){var Pc=ta();if(Pc!==
H){var Db=[];for(nb=aa();nb!==H;)Db.push(nb),nb=aa();if(Db!==H)if(nb=ta(),nb!==H){var qc=Ca();qc!==H?Sa=bc={type:"case_expression",format:"simple",operand:cc,clauses:Db,else:null}:(O=Sa,Sa=H)}else O=Sa,Sa=H;else O=Sa,Sa=H}else O=Sa,Sa=H}else O=Sa,Sa=H}else O=Sa,Sa=H}else O=Sa,Sa=H;if(Sa===H)if(Sa=O,bc=Aa(),bc!==H)if(Oc=ta(),Oc!==H)if(cc=b(),cc!==H)if(Pc=ta(),Pc!==H){Db=[];for(nb=aa();nb!==H;)Db.push(nb),nb=aa();if(Db!==H)if(nb=ta(),nb!==H)if(qc=ma(),qc!==H){var Ke=ta();if(Ke!==H){var Le=Ca();Le!==
H?Sa=bc={type:"case_expression",format:"simple",operand:cc,clauses:Db,else:qc.value}:(O=Sa,Sa=H)}else O=Sa,Sa=H}else O=Sa,Sa=H;else O=Sa,Sa=H;else O=Sa,Sa=H}else O=Sa,Sa=H;else O=Sa,Sa=H;else O=Sa,Sa=H;else O=Sa,Sa=H;var Qc=Sa;if(Qc===H){var ob;var Xa=O;var dc=Aa();if(dc!==H){var Rc=ta();if(Rc!==H){var Eb=[];for(ob=X();ob!==H;)Eb.push(ob),ob=X();if(Eb!==H)if(ob=ta(),ob!==H){var rc=Ca();rc!==H?Xa=dc={type:"case_expression",format:"searched",clauses:Eb,else:null}:(O=Xa,Xa=H)}else O=Xa,Xa=H;else O=Xa,
Xa=H}else O=Xa,Xa=H}else O=Xa,Xa=H;if(Xa===H)if(Xa=O,dc=Aa(),dc!==H)if(Rc=ta(),Rc!==H){Eb=[];for(ob=X();ob!==H;)Eb.push(ob),ob=X();if(Eb!==H)if(ob=ta(),ob!==H)if(rc=ma(),rc!==H){var Me=ta();if(Me!==H){var Ne=Ca();Ne!==H?Xa=dc={type:"case_expression",format:"searched",clauses:Eb,else:rc.value}:(O=Xa,Xa=H)}else O=Xa,Xa=H}else O=Xa,Xa=H;else O=Xa,Xa=H;else O=Xa,Xa=H}else O=Xa,Xa=H;else O=Xa,Xa=H;Qc=Xa}Ua=Qc;if(Ua===H){var sc;var Qb=O;var pd=G();if(pd!==H){var Sc=[];for(sc=L();sc!==H;)Sc.push(sc),sc=
L();Sc!==H?Qb=pd+=Sc.join(""):(O=Qb,Qb=H)}else O=Qb,Qb=H;var tc=Qb;if(tc!==H){var Tc=tc;tc=/^CURRENT_DATE$/i.test(Tc)?{type:"current_time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Tc)?{type:"current_time",mode:"timestamp"}:{type:"column_ref",table:"",column:Tc}}Ua=tc;if(Ua===H&&(Ua=J(),Ua===H)){Ua=O;var qd=Ga();if(qd!==H){var Oe=ta();if(Oe!==H){var Uc=b();if(Uc!==H){var Pe=ta();if(Pe!==H){var Qe=La();Qe!==H?(Uc.paren=!0,Ua=qd=Uc):(O=Ua,Ua=H)}else O=Ua,Ua=H}else O=Ua,Ua=H}else O=Ua,Ua=H}else O=Ua,
Ua=H}}}}}}}}return Ua}function E(){var W;var ea=O;var ca=G();if(ca!==H){var na=[];for(W=I();W!==H;)na.push(W),W=I();na!==H?ea=ca+=na.join(""):(O=ea,ea=H)}else O=ea,ea=H;return ea}function G(){if(pb.test(m.charAt(O))){var W=m.charAt(O);O++}else W=H,0===ua&&t(Re);return W}function I(){if(Se.test(m.charAt(O))){var W=m.charAt(O);O++}else W=H,0===ua&&t(Te);return W}function L(){if(Ue.test(m.charAt(O))){var W=m.charAt(O);O++}else W=H,0===ua&&t(Ve);return W}function J(){var W=O;if(64===m.charCodeAt(O)){var ea=
We;O++}else ea=H,0===ua&&t(Xe);if(ea!==H){var ca=E();ca!==H?W=ea=[ea,ca]:(O=W,W=H)}else O=W,W=H;W!==H&&(W={type:"param",value:W[1]});return W}function F(){var W=O;if(m.substr(O,7).toLowerCase()===Ye){var ea=m.substr(O,7);O+=7}else ea=H,0===ua&&t(Ze);if(ea!==H){ea=O;ua++;var ca=I();ua--;ca===H?ea=void 0:(O=ea,ea=H);ea!==H?W="LEADING":(O=W,W=H)}else O=W,W=H;W===H&&(W=O,m.substr(O,8).toLowerCase()===$e?(ea=m.substr(O,8),O+=8):(ea=H,0===ua&&t(af)),ea!==H?(ea=O,ua++,ca=I(),ua--,ca===H?ea=void 0:(O=ea,
ea=H),ea!==H?W="TRAILING":(O=W,W=H)):(O=W,W=H),W===H&&(W=O,m.substr(O,4).toLowerCase()===bf?(ea=m.substr(O,4),O+=4):(ea=H,0===ua&&t(cf)),ea!==H?(ea=O,ua++,ca=I(),ua--,ca===H?ea=void 0:(O=ea,ea=H),ea!==H?W="BOTH":(O=W,W=H)):(O=W,W=H)));return W}function K(){var W=O;var ea=O;var ca=M();if(ca!==H){var na=ta();if(na!==H)if(na=Ga(),na!==H)if(na=ta(),na!==H)if(na=T(),na!==H){var xa=ta();xa!==H?(xa=La(),xa!==H?ea=ca={type:"interval-period",period:ca.value,precision:na,secondary:null}:(O=ea,ea=H)):(O=ea,
ea=H)}else O=ea,ea=H;else O=ea,ea=H;else O=ea,ea=H;else O=ea,ea=H}else O=ea,ea=H;ea===H&&(ea=O,ca=M(),ca!==H&&(ca=rd(ca)),ea=ca);if(ea!==H)if(ca=ta(),ca!==H)if(ca=O,m.substr(O,2).toLowerCase()===df?(na=m.substr(O,2),O+=2):(na=H,0===ua&&t(ef)),na!==H?(na=O,ua++,xa=I(),ua--,xa===H?na=void 0:(O=na,na=H),na!==H?ca="TO":(O=ca,ca=H)):(O=ca,ca=H),ca!==H)if(ca=ta(),ca!==H){ca=O;na=M();na!==H&&(na={type:"interval-period",period:na.value,precision:null,secondary:null});ca=na;if(ca===H){ca=O;na=ya();if(na!==
H)if(na=ta(),na!==H)if(na=Ga(),na!==H)if(na=ta(),na!==H)if(na=T(),na!==H)if(xa=ta(),xa!==H)if(xa=Ka(),xa!==H)if(xa=ta(),xa!==H)if(xa=R(),xa!==H){var Ha=ta();Ha!==H?(Ha=La(),Ha!==H?ca=na=sd(na,xa):(O=ca,ca=H)):(O=ca,ca=H)}else O=ca,ca=H;else O=ca,ca=H;else O=ca,ca=H;else O=ca,ca=H;else O=ca,ca=H;else O=ca,ca=H;else O=ca,ca=H;else O=ca,ca=H;else O=ca,ca=H;ca===H&&(ca=O,na=ya(),na!==H?(na=ta(),na!==H?(na=Ga(),na!==H?(na=ta(),na!==H?(na=T(),na!==H?(xa=ta(),xa!==H?(xa=La(),xa!==H?ca=na={type:"interval-period",
period:"second",precision:na,secondary:null}:(O=ca,ca=H)):(O=ca,ca=H)):(O=ca,ca=H)):(O=ca,ca=H)):(O=ca,ca=H)):(O=ca,ca=H)):(O=ca,ca=H),ca===H&&(ca=O,na=ya(),na!==H&&(na={type:"interval-period",period:"second",precision:null,secondary:null}),ca=na))}ca!==H?W=ea={type:"interval-qualifier",start:ea,end:ca}:(O=W,W=H)}else O=W,W=H;else O=W,W=H;else O=W,W=H;else O=W,W=H;W===H&&(W=O,ca=M(),ca!==H?(ea=ta(),ea!==H?(ea=Ga(),ea!==H?(ea=ta(),ea!==H?(ea=R(),ea!==H?(na=ta(),na!==H?(na=La(),na!==H?W=ca={type:"interval-period",
period:ca.value,precision:ea,secondary:null}:(O=W,W=H)):(O=W,W=H)):(O=W,W=H)):(O=W,W=H)):(O=W,W=H)):(O=W,W=H)):(O=W,W=H),W===H&&(W=O,ca=M(),ca!==H&&(ca=rd(ca)),W=ca,W===H&&(W=O,ca=ya(),ca!==H?(ea=ta(),ea!==H?(ea=Ga(),ea!==H?(ea=ta(),ea!==H?(ea=T(),ea!==H?(na=ta(),na!==H?(na=Ka(),na!==H?(ca=ta(),ca!==H?(ca=R(),ca!==H?(na=ta(),na!==H?(na=La(),na!==H?W=ca=sd(ea,ca):(O=W,W=H)):(O=W,W=H)):(O=W,W=H)):(O=W,W=H)):(O=W,W=H)):(O=W,W=H)):(O=W,W=H)):(O=W,W=H)):(O=W,W=H)):(O=W,W=H)):(O=W,W=H),W===H&&(W=O,ca=ya(),
ca!==H?(ea=ta(),ea!==H?(ea=Ga(),ea!==H?(ea=ta(),ea!==H?(ea=R(),ea!==H?(na=ta(),na!==H?(na=La(),na!==H?W=ca={type:"interval-period",period:"second",precision:ea,secondary:null}:(O=W,W=H)):(O=W,W=H)):(O=W,W=H)):(O=W,W=H)):(O=W,W=H)):(O=W,W=H)):(O=W,W=H),W===H&&(W=O,ca=ya(),ca!==H&&(ca={type:"interval-period",period:"second",precision:null,secondary:null}),W=ca)))));return W}function M(){var W=O;W=ja();W!==H&&(W={type:"string",value:"day"});W===H&&(W=O,W=qa(),W!==H&&(W={type:"string",value:"hour"}),
W===H&&(W=O,W=sa(),W!==H&&(W={type:"string",value:"minute"}),W===H&&(W=O,W=da(),W!==H&&(W={type:"string",value:"month"}),W===H&&(W=O,W=Z(),W!==H&&(W={type:"string",value:"year"})))));return W}function R(){var W=va();W!==H&&(W=parseFloat(W));return W}function T(){var W=va();W!==H&&(W=parseFloat(W));return W}function Q(){var W=S();W===H&&(W=J());return W}function S(){var W=O;if(39===m.charCodeAt(O)){var ea=td;O++}else ea=H,0===ua&&t(ud);ea===H&&(m.substr(O,2)===vd?(ea=vd,O+=2):(ea=H,0===ua&&t(ff)));
if(ea!==H){ea=[];var ca=O;m.substr(O,2)===uc?(ca=uc,O+=2):(ca=H,0===ua&&t(wd));ca!==H&&(ca="'");ca===H&&(xd.test(m.charAt(O))?(ca=m.charAt(O),O++):(ca=H,0===ua&&t(yd)));for(;ca!==H;)ea.push(ca),ca=O,m.substr(O,2)===uc?(ca=uc,O+=2):(ca=H,0===ua&&t(wd)),ca!==H&&(ca="'"),ca===H&&(xd.test(m.charAt(O))?(ca=m.charAt(O),O++):(ca=H,0===ua&&t(yd)));ea!==H?(39===m.charCodeAt(O)?(ca=td,O++):(ca=H,0===ua&&t(ud)),ca!==H?W=ea={type:"string",value:ea.join("")}:(O=W,W=H)):(O=W,W=H)}else O=W,W=H;return W}function X(){var W=
O;var ea=Ja();if(ea!==H)if(ea=ta(),ea!==H)if(ea=b(),ea!==H){var ca=ta();ca!==H?(ca=Ia(),ca!==H?(ca=ta(),ca!==H?(ca=b(),ca!==H?W=ea={type:"when_clause",operand:ea,value:ca}:(O=W,W=H)):(O=W,W=H)):(O=W,W=H)):(O=W,W=H)}else O=W,W=H;else O=W,W=H;else O=W,W=H;return W}function aa(){var W=O;var ea=Ja();if(ea!==H)if(ea=ta(),ea!==H)if(ea=b(),ea!==H){var ca=ta();ca!==H?(ca=Ia(),ca!==H?(ca=ta(),ca!==H?(ca=b(),ca!==H?W=ea={type:"when_clause",operand:ea,value:ca}:(O=W,W=H)):(O=W,W=H)):(O=W,W=H)):(O=W,W=H)}else O=
W,W=H;else O=W,W=H;else O=W,W=H;return W}function ma(){var W=O;var ea=O;if(m.substr(O,4).toLowerCase()===gf){var ca=m.substr(O,4);O+=4}else ca=H,0===ua&&t(hf);if(ca!==H){ca=O;ua++;var na=I();ua--;na===H?ca=void 0:(O=ca,ca=H);ca!==H?ea="ELSE":(O=ea,ea=H)}else O=ea,ea=H;ea!==H?(ea=ta(),ea!==H?(ea=b(),ea!==H?W={type:"else_clause",value:ea}:(O=W,W=H)):(O=W,W=H)):(O=W,W=H);return W}function ra(){var W=va();if(W===H){W=O;if(45===m.charCodeAt(O)){var ea=Na;O++}else ea=H,0===ua&&t(Pa);ea===H&&(43===m.charCodeAt(O)?
(ea=Da,O++):(ea=H,0===ua&&t(Ea)));if(ea!==H){var ca=va();ca!==H?W=ea=ea[0]+ca:(O=W,W=H)}else O=W,W=H}return W}function za(){var W=O;if(46===m.charCodeAt(O)){var ea=jf;O++}else ea=H,0===ua&&t(kf);ea!==H?(ea=va(),ea===H&&(ea=null),ea!==H?W="."+(null!=ea?ea:""):(O=W,W=H)):(O=W,W=H);return W}function wa(){var W;var ea=W=O;if(lf.test(m.charAt(O))){var ca=m.charAt(O);O++}else ca=H,0===ua&&t(mf);ca!==H?(nf.test(m.charAt(O))?(ca=m.charAt(O),O++):(ca=H,0===ua&&t(of)),ca===H&&(ca=null),ca!==H?ea="e"+(null===
ca?"":ca):(O=ea,ea=H)):(O=ea,ea=H);ea!==H?(ca=va(),ca!==H?W=ea+ca:(O=W,W=H)):(O=W,W=H);return W}function va(){var W=[];var ea=Fa();if(ea!==H)for(;ea!==H;)W.push(ea),ea=Fa();else W=H;W!==H&&(W=W.join(""));return W}function Fa(){if(pf.test(m.charAt(O))){var W=m.charAt(O);O++}else W=H,0===ua&&t(qf);return W}function Ba(){var W=O;if(m.substr(O,2).toLowerCase()===rf){var ea=m.substr(O,2);O+=2}else ea=H,0===ua&&t(sf);if(ea!==H){ea=O;ua++;var ca=I();ua--;ca===H?ea=void 0:(O=ea,ea=H);ea!==H?W="IN":(O=W,W=
H)}else O=W,W=H;return W}function N(){var W=O;if(m.substr(O,2).toLowerCase()===tf){var ea=m.substr(O,2);O+=2}else ea=H,0===ua&&t(uf);if(ea!==H){ea=O;ua++;var ca=I();ua--;ca===H?ea=void 0:(O=ea,ea=H);ea!==H?W="IS":(O=W,W=H)}else O=W,W=H;return W}function U(){var W=O;if(m.substr(O,4).toLowerCase()===vf){var ea=m.substr(O,4);O+=4}else ea=H,0===ua&&t(wf);if(ea!==H){ea=O;ua++;var ca=I();ua--;ca===H?ea=void 0:(O=ea,ea=H);ea!==H?W="LIKE":(O=W,W=H)}else O=W,W=H;return W}function ia(){var W=O;if(m.substr(O,
3).toLowerCase()===xf){var ea=m.substr(O,3);O+=3}else ea=H,0===ua&&t(yf);if(ea!==H){ea=O;ua++;var ca=I();ua--;ca===H?ea=void 0:(O=ea,ea=H);ea!==H?W="NOT":(O=W,W=H)}else O=W,W=H;return W}function P(){var W=O;if(m.substr(O,3).toLowerCase()===zf){var ea=m.substr(O,3);O+=3}else ea=H,0===ua&&t(Af);if(ea!==H){ea=O;ua++;var ca=I();ua--;ca===H?ea=void 0:(O=ea,ea=H);ea!==H?W="AND":(O=W,W=H)}else O=W,W=H;return W}function V(){var W=O;if(m.substr(O,2).toLowerCase()===Bf){var ea=m.substr(O,2);O+=2}else ea=H,
0===ua&&t(Cf);if(ea!==H){ea=O;ua++;var ca=I();ua--;ca===H?ea=void 0:(O=ea,ea=H);ea!==H?W="OR":(O=W,W=H)}else O=W,W=H;return W}function Y(){var W=O;if(m.substr(O,7).toLowerCase()===Df){var ea=m.substr(O,7);O+=7}else ea=H,0===ua&&t(Ef);if(ea!==H){ea=O;ua++;var ca=I();ua--;ca===H?ea=void 0:(O=ea,ea=H);ea!==H?W="BETWEEN":(O=W,W=H)}else O=W,W=H;return W}function ba(){var W=O;if(m.substr(O,4).toLowerCase()===Ff){var ea=m.substr(O,4);O+=4}else ea=H,0===ua&&t(Gf);if(ea!==H){ea=O;ua++;var ca=I();ua--;ca===
H?ea=void 0:(O=ea,ea=H);ea!==H?W="FROM":(O=W,W=H)}else O=W,W=H;return W}function fa(){var W=O;if(m.substr(O,4).toLowerCase()===Hf){var ea=m.substr(O,4);O+=4}else ea=H,0===ua&&t(If);if(ea!==H){ea=O;ua++;var ca=I();ua--;ca===H?ea=void 0:(O=ea,ea=H);ea!==H?W="TRIM":(O=W,W=H)}else O=W,W=H;return W}function ha(){var W=O;if(m.substr(O,8).toLowerCase()===Jf){var ea=m.substr(O,8);O+=8}else ea=H,0===ua&&t(Kf);if(ea!==H){ea=O;ua++;var ca=I();ua--;ca===H?ea=void 0:(O=ea,ea=H);ea!==H?W="INTERVAL":(O=W,W=H)}else O=
W,W=H;return W}function Z(){var W=O;if(m.substr(O,4).toLowerCase()===Lf){var ea=m.substr(O,4);O+=4}else ea=H,0===ua&&t(Mf);if(ea!==H){ea=O;ua++;var ca=I();ua--;ca===H?ea=void 0:(O=ea,ea=H);ea!==H?W="YEAR":(O=W,W=H)}else O=W,W=H;return W}function da(){var W=O;if(m.substr(O,5).toLowerCase()===Nf){var ea=m.substr(O,5);O+=5}else ea=H,0===ua&&t(Of);if(ea!==H){ea=O;ua++;var ca=I();ua--;ca===H?ea=void 0:(O=ea,ea=H);ea!==H?W="MONTH":(O=W,W=H)}else O=W,W=H;return W}function ja(){var W=O;if(m.substr(O,3).toLowerCase()===
Pf){var ea=m.substr(O,3);O+=3}else ea=H,0===ua&&t(Qf);if(ea!==H){ea=O;ua++;var ca=I();ua--;ca===H?ea=void 0:(O=ea,ea=H);ea!==H?W="DAY":(O=W,W=H)}else O=W,W=H;return W}function qa(){var W=O;if(m.substr(O,4).toLowerCase()===Rf){var ea=m.substr(O,4);O+=4}else ea=H,0===ua&&t(Sf);if(ea!==H){ea=O;ua++;var ca=I();ua--;ca===H?ea=void 0:(O=ea,ea=H);ea!==H?W="HOUR":(O=W,W=H)}else O=W,W=H;return W}function sa(){var W=O;if(m.substr(O,6).toLowerCase()===Tf){var ea=m.substr(O,6);O+=6}else ea=H,0===ua&&t(Uf);if(ea!==
H){ea=O;ua++;var ca=I();ua--;ca===H?ea=void 0:(O=ea,ea=H);ea!==H?W="MINUTE":(O=W,W=H)}else O=W,W=H;return W}function ya(){var W=O;if(m.substr(O,6).toLowerCase()===Vf){var ea=m.substr(O,6);O+=6}else ea=H,0===ua&&t(Wf);if(ea!==H){ea=O;ua++;var ca=I();ua--;ca===H?ea=void 0:(O=ea,ea=H);ea!==H?W="SECOND":(O=W,W=H)}else O=W,W=H;return W}function Aa(){var W=O;if(m.substr(O,4).toLowerCase()===Xf){var ea=m.substr(O,4);O+=4}else ea=H,0===ua&&t(Yf);if(ea!==H){ea=O;ua++;var ca=I();ua--;ca===H?ea=void 0:(O=ea,
ea=H);ea!==H?W="CASE":(O=W,W=H)}else O=W,W=H;return W}function Ca(){var W=O;if(m.substr(O,3).toLowerCase()===Zf){var ea=m.substr(O,3);O+=3}else ea=H,0===ua&&t($f);if(ea!==H){ea=O;ua++;var ca=I();ua--;ca===H?ea=void 0:(O=ea,ea=H);ea!==H?W="END":(O=W,W=H)}else O=W,W=H;return W}function Ja(){var W=O;if(m.substr(O,4).toLowerCase()===ag){var ea=m.substr(O,4);O+=4}else ea=H,0===ua&&t(bg);if(ea!==H){ea=O;ua++;var ca=I();ua--;ca===H?ea=void 0:(O=ea,ea=H);ea!==H?W="WHEN":(O=W,W=H)}else O=W,W=H;return W}function Ia(){var W=
O;if(m.substr(O,4).toLowerCase()===cg){var ea=m.substr(O,4);O+=4}else ea=H,0===ua&&t(dg);if(ea!==H){ea=O;ua++;var ca=I();ua--;ca===H?ea=void 0:(O=ea,ea=H);ea!==H?W="THEN":(O=W,W=H)}else O=W,W=H;return W}function Ka(){if(44===m.charCodeAt(O)){var W=eg;O++}else W=H,0===ua&&t(fg);return W}function Ga(){if(40===m.charCodeAt(O)){var W=gg;O++}else W=H,0===ua&&t(hg);return W}function La(){if(41===m.charCodeAt(O)){var W=ig;O++}else W=H,0===ua&&t(jg);return W}function ta(){var W;var ea=[];for(W=eb();W!==H;)ea.push(W),
W=eb();return ea}function eb(){if(kg.test(m.charAt(O))){var W=m.charAt(O);O++}else W=H,0===ua&&t(lg);return W}function fb(W,ea,ca,na){W={type:"binary_expr",operator:W,left:ea,right:ca};void 0!==na&&(W.escape=na);return W}function bb(W,ea){for(var ca=0;ca<ea.length;ca++)W=fb(ea[ca][1],W,ea[ca][3]);return W}v=void 0!==v?v:{};var H={},hb={start:g},gb=g,Ta="!",vb=p("!",!1),yb="\x3d",Fb=p("\x3d",!1),fc="\x3e\x3d",mb=p("\x3e\x3d",!1),zb="\x3e",Va=p("\x3e",!1),kb="\x3c\x3d",ub=p("\x3c\x3d",!1),Ra="\x3c\x3e",
Gb=p("\x3c\x3e",!1),la="\x3c",oa=p("\x3c",!1),ka="!\x3d",pa=p("!\x3d",!1),Da="+",Ea=p("+",!1),Na="-",Pa=p("-",!1),$a="*",Za=p("*",!1),Ya="/",ib=p("/",!1),pb=/^[A-Za-z_\x80-\uFFFF]/,Re=f([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Se=/^[A-Za-z0-9_]/,Te=f([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Ue=/^[A-Za-z0-9_.\x80-\uFFFF]/,Ve=f([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),We="@",Xe=p("@",!1),rd=function(W){return{type:"interval-period",period:W.value,precision:null,
secondary:null}},sd=function(W,ea){return{type:"interval-period",period:"second",precision:W,secondary:ea}},td="'",ud=p("'",!1),vd="N'",ff=p("N'",!1),uc="''",wd=p("''",!1),xd=/^[^']/,yd=f(["'"],!0,!1),jf=".",kf=p(".",!1),pf=/^[0-9]/,qf=f([["0","9"]],!1,!1),lf=/^[eE]/,mf=f(["e","E"],!1,!1),nf=/^[+\-]/,of=f(["+","-"],!1,!1),Id="null",Jd=p("NULL",!0),Cd="true",Dd=p("TRUE",!0),Fd="false",Gd=p("FALSE",!0),rf="in",sf=p("IN",!0),tf="is",uf=p("IS",!0),vf="like",wf=p("LIKE",!0),zd="escape",Ad=p("ESCAPE",!0),
xf="not",yf=p("NOT",!0),zf="and",Af=p("AND",!0),Bf="or",Cf=p("OR",!0),Df="between",Ef=p("BETWEEN",!0),Ff="from",Gf=p("FROM",!0),oe="for",pe=p("FOR",!0),ee="substring",fe=p("SUBSTRING",!0),Ud="extract",Vd=p("EXTRACT",!0),Hf="trim",If=p("TRIM",!0),ue="position",ve=p("POSITION",!0),Pd="timestamp",Qd=p("TIMESTAMP",!0),Ld="date",Md=p("DATE",!0),Ye="leading",Ze=p("LEADING",!0),$e="trailing",af=p("TRAILING",!0),bf="both",cf=p("BOTH",!0),df="to",ef=p("TO",!0),Jf="interval",Kf=p("INTERVAL",!0),Lf="year",Mf=
p("YEAR",!0),Nf="month",Of=p("MONTH",!0),Pf="day",Qf=p("DAY",!0),Rf="hour",Sf=p("HOUR",!0),Tf="minute",Uf=p("MINUTE",!0),Vf="second",Wf=p("SECOND",!0),Xf="case",Yf=p("CASE",!0),Zf="end",$f=p("END",!0),ag="when",bg=p("WHEN",!0),cg="then",dg=p("THEN",!0),gf="else",hf=p("ELSE",!0),eg=",",fg=p(",",!1),gg="(",hg=p("(",!1),ig=")",jg=p(")",!1),kg=/^[ \t\n\r]/,lg=f([" ","\t","\n","\r"],!1,!1),ld="`",md=p("`",!1),nd=/^[^`]/,od=f(["`"],!0,!1),O=0,ec=[{line:1,column:1}],tb=0,vc=[],ua=0;if("startRule"in v){if(!(v.startRule in
hb))throw Error("Can't start parsing from rule \""+v.startRule+'".');gb=hb[v.startRule]}var Vc=gb();if(Vc!==H&&O===m.length)return Vc;Vc!==H&&O<m.length&&t({type:"end"});throw function(W,ea,ca){return new u(u.buildMessage(W,ea),W,ea,ca)}(vc,tb<m.length?m.charAt(tb):null,tb<m.length?l(tb,tb+1):l(tb,tb));}}})})(z);let x=function(){function r(){}r.parse=function(u){return z.exports.parse(u)};return r}();n.WhereGrammar=x;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],
function(n){n.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};n.commonjsRequire=function(c){throw Error('Could not dynamically require "'+c+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');};n.getDefaultExportFromCjs=function(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,
"default")?c["default"]:c}})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),function(n,c,z,x,r,u,m){function v(b,d){if(!d)return null;if("x"in d){var h={x:0,y:0};[h.x,h.y]=b(d.x,d.y,l);null!=d.z&&(h.z=d.z);null!=d.m&&(h.m=d.m);return h}if("xmin"in
d)return h={xmin:0,ymin:0,xmax:0,ymax:0},[h.xmin,h.ymin]=b(d.xmin,d.ymin,l),[h.xmax,h.ymax]=b(d.xmax,d.ymax,l),d.hasZ&&(h.zmin=d.zmin,h.zmax=d.zmax,h.hasZ=!0),d.hasM&&(h.mmin=d.mmin,h.mmax=d.mmax,h.hasM=!0),h;if("rings"in d)return{rings:p(d.rings,b),hasM:d.hasM,hasZ:d.hasZ};if("paths"in d)return{paths:p(d.paths,b),hasM:d.hasM,hasZ:d.hasZ};if("points"in d)return{points:f(d.points,b),hasM:d.hasM,hasZ:d.hasZ}}function p(b,d){const h=[];for(const k of b)h.push(f(k,d));return h}function f(b,d){const h=
[];for(const k of b)b=d(k[0],k[1],[0,0]),h.push(b),2<k.length&&b.push(k[2]),3<k.length&&b.push(k[3]);return h}function q(){q=c._asyncToGenerator(function*(b,d){d&&(b=Array.isArray(b)?b.map(h=>z.isSome(h.geometry)&&h.geometry.spatialReference):[b],yield x.initializeProjection(b.map(h=>({source:h,dest:d}))))});return q.apply(this,arguments)}const l=[0,0],t=v.bind(null,m.lngLatToXY),g=v.bind(null,m.xyToLngLat),a=new (function(){function b(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}
var d=b.prototype;d.push=function(){var h=c._asyncToGenerator(function*(k,e,w){if(!(k&&k.length&&e&&w)||u.equals(e,w))return k;const y={geometries:k,inSpatialReference:e,outSpatialReference:w,resolve:null};this._jobs.push(y);return new Promise(C=>{y.resolve=C;null===this._timer&&(this._timer=setTimeout(this._process,10))})});return function(k,e,w){return h.apply(this,arguments)}}();d._process=function(){this._timer=null;const h=this._jobs.shift();if(h){var {geometries:k,inSpatialReference:e,outSpatialReference:w,
resolve:y}=h;m.canProject(e,w)?u.isWebMercator(w)?y(k.map(t)):y(k.map(g)):y(x.projectMany(r.jsonAdapter,k,e,w,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return b}());n.checkProjectionSupport=function(b,d){return q.apply(this,arguments)};n.project=function(b,d,h){if(!b)return b;h||(h=d,d=b.spatialReference);return u.isValid(d)&&u.isValid(h)&&!u.equals(d,h)?m.canProject(d,h)?u.isWebMercator(h)?t(b):g(b):x.projectMany(r.jsonAdapter,[b],d,h,null)[0]:b};n.projectMany=function(b,
d,h){return a.push(b,d,h)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a,b,d,h,k,e,w,y,C){function B(){return!!ta&&g.isLoaded()}function A(la){u.isNone(fb)&&(fb=Promise.all([g.load(),(new Promise(function(oa,ka){n(["../chunks/geometryEngineBase"],oa,ka)})).then(function(oa){return oa.geometryEngineBase}),new Promise(function(oa,ka){n(["./geometryAdapters/hydrated"],oa,ka)})]));return fb.then(([,oa,{hydratedAdapter:ka}])=>{m.throwIfAborted(la);eb=ka;ta=oa.default;ta._enableProjection(g.pe)})}function D(la,oa,ka,pa,Da=null){if(u.isNone(ka)||
u.isNone(pa))return oa;if(G(ka,pa,Da))return oa.map(Ea=>u.unwrap(L(Ea,ka,pa)));if(u.isNone(Da)){const Ea=y.cacheKey(ka,pa);void 0!==bb[Ea]?Da=bb[Ea]:(Da=E(ka,pa,null),u.isNone(Da)&&(Da=new y),bb[Ea]=Da)}if(u.isNone(ta))throw new H;return ta._project(la,oa,ka,pa,Da)}function E(la,oa,ka=null){if(u.isNone(ta))throw new H;if(u.isNone(la)||u.isNone(oa))return null;la=ta._getTransformation(eb,la,oa,ka,null==ka?void 0:ka.spatialReference);return null!==la?y.fromGE(la):null}function G(la,oa,ka){return ka?
!1:C.equals(la,oa)?!0:C.isValid(la)&&C.isValid(oa)&&!!Ka(la,oa,Fb)}function I(){I=z._asyncToGenerator(function*(la,oa,ka,pa){if(!B())if(Array.isArray(la))for(const {source:Da,dest:Ea,geographicTransformation:Na}of la){if(!G(Da,Ea,Na))return A(pa)}else if(!G(la,oa,ka))return A(pa)});return I.apply(this,arguments)}function L(la,oa,ka){return la?"x"in la?J(la,oa,new a,ka,0):"xmin"in la?R(la,oa,new l,ka,0):"rings"in la?M(la,oa,new b,ka,0):"paths"in la?K(la,oa,new d,ka,0):"points"in la?F(la,oa,new t,ka,
0):null:null}function J(la,oa,ka,pa,Da){Ra[0]=la.x;Ra[1]=la.y;const Ea=la.z;Ra[2]=void 0!==Ea?Ea:Da;if(!X(Ra,oa,0,Ra,pa,0,1))return null;ka.x=Ra[0];ka.y=Ra[1];ka.spatialReference=pa;void 0===Ea?(ka.z=void 0,ka.hasZ=!1):(ka.z=Ra[2],ka.hasZ=!0);void 0===la.m?(ka.m=void 0,ka.hasM=!1):(ka.m=la.m,ka.hasM=!0);return ka}function F(la,oa,ka,pa,Da){const {points:Ea,hasZ:Na,hasM:Pa}=la;la=[];const $a=Ea.length,Za=[];for(var Ya of Ea)Za.push(Ya[0],Ya[1],Na?Ya[2]:Da);if(!X(Za,oa,0,Za,pa,0,$a))return null;for(oa=
0;oa<$a;++oa){Da=3*oa;Ya=Za[Da];const ib=Za[Da+1];Na&&Pa?la.push([Ya,ib,Za[Da+2],Ea[oa][3]]):Na?la.push([Ya,ib,Za[Da+2]]):Pa?la.push([Ya,ib,Ea[oa][2]]):la.push([Ya,ib])}ka.points=la;ka.spatialReference=pa;ka.hasZ=Na;ka.hasM=Pa;return ka}function K(la,oa,ka,pa,Da){const {paths:Ea,hasZ:Na,hasM:Pa}=la;la=[];if(!aa(Ea,Na,Pa,oa,la,pa,Da))return null;ka.paths=la;ka.spatialReference=pa;ka.hasZ=Na;ka.hasM=Pa;return ka}function M(la,oa,ka,pa,Da){const {rings:Ea,hasZ:Na,hasM:Pa}=la;la=[];if(!aa(Ea,Na,Pa,oa,
la,pa,Da))return null;ka.rings=la;ka.spatialReference=pa;ka.hasZ=Na;ka.hasM=Pa;return ka}function R(la,oa,ka,pa,Da){const {xmin:Ea,ymin:Na,xmax:Pa,ymax:$a,hasZ:Za,hasM:Ya}=la;if(!T(Ea,Na,Za?la.zmin:Da,oa,Ra,pa))return null;ka.xmin=Ra[0];ka.ymin=Ra[1];Za&&(ka.zmin=Ra[2]);if(!T(Pa,$a,Za?la.zmax:Da,oa,Ra,pa))return null;ka.xmax=Ra[0];ka.ymax=Ra[1];Za&&(ka.zmax=Ra[2]);Ya&&(ka.mmin=la.mmin,ka.mmax=la.mmax);ka.spatialReference=pa;return ka}function T(la,oa,ka,pa,Da,Ea){Va[0]=la;Va[1]=oa;Va[2]=ka;return X(Va,
pa,0,Da,Ea,0,1)}function Q(la,oa,ka,pa){if(u.isNone(oa)||u.isNone(pa)||2>la.length)return!1;2===la.length&&(Va[0]=la[0],Va[1]=la[1],Va[2]=0,la=Va);return X(la,oa,0,ka,pa,0,1)}function S(la,oa,ka){if(u.isNone(oa))return!1;oa=wa(oa,vb);oa=Ta[oa][6];if(u.isNone(oa))return!1;oa(la,0,Va,0);ka!==Va&&(ka[0]=Va[0],ka[1]=Va[1],2<ka.length&&(ka[2]=Va[2]));return!0}function X(la,oa,ka,pa,Da,Ea,Na=1){oa=Ka(oa,Da,Fb);if(u.isNone(oa))return!1;if(oa===va){if(la===pa&&ka===Ea)return!0;Na=ka+3*Na;for(let Pa=ka,$a=
Ea;Pa<Na;Pa++,$a++)pa[$a]=la[Pa];return!0}Na=ka+3*Na;for(let Pa=ka,$a=Ea;Pa<Na;Pa+=3,$a+=3)oa(la,Pa,pa,$a);return!0}function aa(la,oa,ka,pa,Da,Ea,Na=0){const Pa=[];for(const $a of la)for(const Za of $a)Pa.push(Za[0],Za[1],oa?Za[2]:Na);if(!X(Pa,pa,0,Pa,Ea,0,Pa.length/3))return!1;pa=0;Da.length=0;for(const $a of la){la=[];for(const Za of $a)oa&&ka?la.push([Pa[pa++],Pa[pa++],Pa[pa++],Za[3]]):oa?la.push([Pa[pa++],Pa[pa++],Pa[pa++]]):(ka?la.push([Pa[pa++],Pa[pa++],Za[2]]):la.push([Pa[pa++],Pa[pa++]]),
pa++);Da.push(la)}return!0}function ma(la,oa,ka,pa){la=Math.abs(mb*la)+Math.asin(ka/(pa+oa));return la>=Math.PI/2?Number.MAX_VALUE:ka/Math.cos(la)}function ra(la,oa,ka){const pa=Math.sin(la);la=Math.cos(la);const Da=Math.sin(oa);oa=Math.cos(oa);ka[0]=-pa;ka[4]=-Da*la;ka[8]=oa*la;ka[12]=0;ka[1]=la;ka[5]=-Da*pa;ka[9]=oa*pa;ka[13]=0;ka[2]=0;ka[6]=oa;ka[10]=Da;ka[14]=0;ka[3]=0;ka[7]=0;ka[11]=0;ka[15]=1;return ka}function za(la,oa,ka){ra(la,oa,ka);p.transpose(ka,ka);return ka}function wa(la,oa){if(oa.spatialReference===
la)return oa.spatialReferenceId;oa.spatialReference=la;"metersPerUnit"in oa&&(oa.metersPerUnit=v.getMetersPerUnitForSR(la,1));return la.wkt===h.SphericalECEFSpatialReference.wkt?oa.spatialReferenceId=1:C.isWGS84(la)?oa.spatialReferenceId=2:C.isWebMercator(la)?oa.spatialReferenceId=3:C.isPlateCarree(la)?oa.spatialReferenceId=12:la.wkt===h.WGS84ECEFSpatialReference.wkt?oa.spatialReferenceId=4:4490===la.wkid?oa.spatialReferenceId=5:la.wkt===h.SphericalPCPFMars.wkt?oa.spatialReferenceId=7:la.wkt===h.SphericalPCPFMoon.wkt?
oa.spatialReferenceId=9:C.isMars(la)?oa.spatialReferenceId=8:C.isMoon(la)?oa.spatialReferenceId=10:oa.spatialReferenceId=0}function va(la,oa,ka,pa){la!==ka&&(ka[pa++]=la[oa++],ka[pa++]=la[oa++],ka[pa]=la[oa])}function Fa(la,oa,ka,pa){ka[pa++]=zb*(la[oa++]/e.earth.radius);ka[pa++]=zb*(Math.PI/2-2*Math.atan(Math.exp(-la[oa++]/e.earth.radius)));ka[pa]=la[oa]}function Ba(la,oa,ka,pa){Fa(la,oa,ka,pa);ha(ka,pa,ka,pa)}function N(la,oa,ka,pa){Fa(la,oa,ka,pa);Aa(ka,pa,ka,pa)}function U(la,oa,ka,pa,Da){var Ea=
.4999999*Math.PI;Ea=r.clamp(mb*la[oa+1],-Ea,Ea);Ea=Math.sin(Ea);ka[pa++]=mb*la[oa]*Da.radius;ka[pa++]=Da.halfSemiMajorAxis*Math.log((1+Ea)/(1-Ea));ka[pa]=la[oa+2]}function ia(la,oa,ka,pa){U(la,oa,ka,pa,e.earth)}function P(la,oa,ka,pa){ka[pa]=la[oa]*hb;ka[pa+1]=la[oa+1]*hb;ka[pa+2]=la[oa+2]}function V(la,oa,ka,pa){ka[pa]=la[oa]*gb;ka[pa+1]=la[oa+1]*gb;ka[pa+2]=la[oa+2]}function Y(la,oa,ka,pa,Da){Da+=la[oa+2];const Ea=mb*la[oa+1];la=mb*la[oa];oa=Math.cos(Ea);ka[pa++]=Math.cos(la)*oa*Da;ka[pa++]=Math.sin(la)*
oa*Da;ka[pa]=Math.sin(Ea)*Da}function ba(la,oa,ka,pa){Y(la,oa,ka,pa,e.moon.radius)}function fa(la,oa,ka,pa){Y(la,oa,ka,pa,e.mars.radius)}function ha(la,oa,ka,pa){Y(la,oa,ka,pa,e.earth.radius)}function Z(la,oa,ka,pa,Da){var Ea=la[oa];const Na=la[oa+1];oa=la[oa+2];la=Math.sqrt(Ea*Ea+Na*Na+oa*oa);oa=r.asinClamped(oa/(0===la?1:la));Ea=Math.atan2(Na,Ea);ka[pa++]=zb*Ea;ka[pa++]=zb*oa;ka[pa]=la-Da}function da(la,oa,ka,pa){Z(la,oa,ka,pa,e.moon.radius)}function ja(la,oa,ka,pa){Z(la,oa,ka,pa,e.mars.radius)}
function qa(la,oa,ka,pa){Z(la,oa,ka,pa,e.earth.radius)}function sa(la,oa,ka,pa){qa(la,oa,ka,pa);ia(ka,pa,ka,pa)}function ya(la,oa,ka,pa){qa(la,oa,ka,pa);Aa(ka,pa,ka,pa)}function Aa(la,oa,ka,pa){{var Da=e.earth;const Na=mb*la[oa];var Ea=mb*la[oa+1];la=la[oa+2];oa=Math.sin(Ea);Ea=Math.cos(Ea);const Pa=Da.radius/Math.sqrt(1-Da.eccentricitySquared*oa*oa);ka[pa++]=(Pa+la)*Ea*Math.cos(Na);ka[pa++]=(Pa+la)*Ea*Math.sin(Na);ka[pa++]=(Pa*(1-Da.eccentricitySquared)+la)*oa}}function Ca(la,oa,ka,pa){var Da=w.earthEllipsoidConstants,
Ea=la[oa],Na=la[oa+1];la=la[oa+2];let Pa;oa=Math.abs(la);var $a=Ea*Ea+Na*Na;var Za=Math.sqrt($a);var Ya=$a+la*la;var ib=Math.sqrt(Ya);Ea=Math.atan2(Na,Ea);var pb=la*la/Ya;Ya=$a/Ya;Na=Da.a2/ib;$a=Da.a3-Da.a4/ib;.3<Ya?(pb=oa/ib*(1+Ya*(Da.a1+Na+pb*$a)/ib),ib=Math.asin(pb),Na=pb*pb,Ya=Math.sqrt(1-Na)):(Ya=Za/ib*(1-pb*(Da.a5-Na-Ya*$a)/ib),ib=Math.acos(Ya),Na=1-Ya*Ya,pb=Math.sqrt(Na));Pa=1-e.earth.eccentricitySquared*Na;Na=e.earth.radius/Math.sqrt(Pa);Da=Da.a6*Na;Na=Za-Na*Ya;$a=oa-Da*pb;oa=Ya*Na+pb*$a;
Za=Ya*$a-pb*Na;Da=Za/(Da/Pa+oa);ib+=Da;0>la&&(ib=-ib);ka[pa++]=zb*Ea;ka[pa++]=zb*ib;ka[pa]=oa+Za*Da/2}function Ja(la,oa,ka,pa){Ca(la,oa,ka,pa);ha(ka,pa,ka,pa)}function Ia(la,oa,ka,pa){Ca(la,oa,ka,pa);ia(ka,pa,ka,pa)}function Ka(la,oa,ka=La()){return u.isNone(la)||u.isNone(oa)?null:Ga(la,oa,ka).projector}function Ga(la,oa,ka){if(u.isNone(la)||u.isNone(oa)||ka.source.spatialReference===la&&ka.dest.spatialReference===oa)return ka;const pa=wa(la,ka.source),Da=wa(oa,ka.dest);0===pa&&0===Da?C.equals(la,
oa)?ka.projector=va:ka.projector=null:ka.projector=Ta[pa][Da];return ka}function La(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:va}}let ta=null,eb=null,fb=null,bb={},H=function(la){function oa(){return la.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}z._inheritsLoose(oa,la);return oa}(x);const hb=e.earth.radius*Math.PI/180,gb=180/(e.earth.radius*
Math.PI),Ta={[2]:{[5]:null,[8]:null,[10]:null,[11]:va,[6]:va,[1]:ha,[7]:null,[9]:null,[0]:null,[3]:ia,[12]:P,[2]:va,[4]:Aa},[5]:{[5]:va,[8]:null,[10]:null,[11]:va,[6]:va,[1]:ha,[7]:null,[9]:null,[0]:null,[3]:null,[12]:P,[2]:null,[4]:Aa},[8]:{[5]:null,[8]:va,[10]:null,[11]:va,[6]:null,[1]:null,[7]:fa,[9]:null,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:va,[11]:va,[6]:null,[1]:null,[7]:null,[9]:ba,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,
[10]:null,[11]:Fa,[6]:Fa,[1]:Ba,[7]:null,[9]:null,[0]:null,[3]:va,[12]:function(la,oa,ka,pa){Fa(la,oa,ka,pa);P(ka,pa,ka,pa)},[2]:Fa,[4]:N},[4]:{[5]:Ca,[8]:null,[10]:null,[11]:Ca,[6]:Ca,[1]:Ja,[7]:null,[9]:null,[0]:null,[3]:Ia,[12]:function(la,oa,ka,pa){Ca(la,oa,ka,pa);P(ka,pa,ka,pa)},[2]:Ca,[4]:va},[1]:{[5]:qa,[8]:null,[10]:null,[11]:qa,[6]:qa,[1]:va,[7]:null,[9]:null,[0]:null,[3]:sa,[12]:function(la,oa,ka,pa){qa(la,oa,ka,pa);P(ka,pa,ka,pa)},[2]:qa,[4]:ya},[7]:{[5]:null,[8]:ja,[10]:null,[11]:ja,[6]:null,
[1]:null,[7]:va,[9]:null,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[9]:{[5]:null,[8]:null,[10]:da,[11]:da,[6]:null,[1]:null,[7]:null,[9]:va,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,[11]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:va,[3]:null,[12]:null,[2]:null,[4]:null},[11]:{[5]:va,[8]:va,[10]:va,[11]:va,[6]:va,[1]:ha,[7]:fa,[9]:ba,[0]:null,[3]:ia,[12]:P,[2]:va,[4]:Aa},[6]:{[5]:null,[8]:null,[10]:null,[11]:va,[6]:va,[1]:ha,[7]:null,[9]:null,[0]:null,[3]:null,
[12]:P,[2]:va,[4]:Aa},[12]:{[5]:V,[8]:null,[10]:null,[11]:V,[6]:V,[1]:function(la,oa,ka,pa){V(la,oa,ka,pa);ha(ka,pa,ka,pa)},[7]:null,[9]:null,[0]:null,[3]:function(la,oa,ka,pa){V(la,oa,ka,pa);ia(ka,pa,ka,pa)},[12]:va,[2]:V,[4]:function(la,oa,ka,pa){V(la,oa,ka,pa);Aa(ka,pa,ka,pa)}}},vb={spatialReference:null,spatialReferenceId:0},yb={spatialReference:null,spatialReferenceId:0},Fb=La(),fc=La(),mb=r.deg2rad(1),zb=r.rad2deg(1),Va=q.create(),kb=q.create(),ub=q.create(),Ra=q.create(),Gb=q.create();c.canProjectToWGS84ComparableLonLat=
function(la){if(u.isNone(la))return!1;la=wa(la,vb);return!!Ta[la][6]};c.canProjectWithoutEngine=G;c.computeENUToSphericalPCPFLocalRotation=ra;c.computeSphericalPCPFToENULocalRotation=za;c.computeTranslationToOriginAndRotation=function(la,oa,ka,pa){if(u.isNone(la)||u.isNone(pa))return!1;var Da=wa(la,vb),Ea=wa(pa,yb);if(Da===Ea&&1!==Ea&&7!==Ea&&9!==Ea&&(0!==Da||C.equals(la,pa)))return p.identity(ka),p.translate(ka,ka,oa),!0;if(1===Ea||7===Ea||9===Ea){Da=Ta[Da][11];Ea=Ta[11][Ea];if(u.isNone(Da)||u.isNone(Ea))return!1;
Da(oa,0,kb,0);Ea(kb,0,ub,0);ra(mb*kb[0],mb*kb[1],ka);ka[12]=ub[0];ka[13]=ub[1];ka[14]=ub[2];return!0}if(!(3!==Ea&&12!==Ea||2!==Da&&1!==Da)){la=Ta[Da][11];Ea=Ta[11][Ea];if(u.isNone(la)||u.isNone(Ea))return!1;la(oa,0,kb,0);Ea(kb,0,ub,0);2===Da?p.identity(ka):za(mb*kb[0],mb*kb[1],ka);ka[12]=ub[0];ka[13]=ub[1];ka[14]=ub[2];return!0}return!1};c.getProjectorName=function(la,oa){switch(Ka(la,oa,Fb)){case va:return"copy3";case ha:return"wgs84ToSphericalECEF";case ia:return"wgs84ToWebMercator";case P:return"wgs84ToPlateCarree";
case Aa:return"wgs84ToWGS84ECEF";case Fa:return"webMercatorToWGS84";case Ba:return"webMercatorToSphericalECEF";case N:return"webMercatorToWGS84ECEF";case Ca:return"wgs84ECEFToWGS84";case Ja:return"wgs84ECEFToSphericalECEF";case Ia:return"wgs84ECEFToWebMercator";case qa:return"sphericalECEFToWGS84";case sa:return"sphericalECEFToWebMercator";case ja:return"sphericalMarsPCPFToMars2000";case da:return"sphericalMoonPCPFToMoon2000";case ya:return"sphericalECEFToWGS84ECEF";case fa:return"mars2000ToSphericalPCPF";
case ba:return"moon2000ToSphericalPCPF";default:return null}};c.getTransformation=E;c.getTransformations=function(la,oa,ka=null){if(u.isNone(ta))throw new H;la=ta._getTransformationBySuitability(eb,la,oa,ka,null==ka?void 0:ka.spatialReference);if(null!==la){oa=[];for(const pa of la)oa.push(y.fromGE(pa));return oa}return[]};c.initializeProjection=function(la,oa,ka,pa){return I.apply(this,arguments)};c.isLoaded=B;c.isSupported=function(){return!0};c.load=A;c.localLinearScaleFactors=function(la,oa,ka,
pa){if(u.isNone(oa)||u.isNone(pa))return!1;const Da=wa(oa,vb);var Ea=wa(pa,yb);if(Da===Ea&&0!==Da||C.equals(oa,pa))return ka[0]=1,ka[1]=1,ka[2]=1,!0;if(1===Da){oa=f.length(la);la=oa/Math.sqrt(la[0]*la[0]+la[1]*la[1]);oa/=e.earth.radius;if(3===Ea)return ka[0]=la*oa,ka[1]=la*oa,ka[2]=1,!0;if(2===Ea||5===Ea)return Ea=180/(e.earth.radius*Math.PI),ka[0]=Ea*la*oa,ka[1]=Ea*oa,ka[2]=1,!0}else if(12===Da&&(2===Ea||5===Ea))return ka[0]=gb,ka[1]=gb,ka[2]=1,!0;return!1};c.lonLatToSphericalPCPF=function(la,oa,
ka,pa,Da=0){pa+=Da;Da=Math.cos(ka);la[0]=Math.cos(oa)*Da*pa;la[1]=Math.sin(oa)*Da*pa;la[2]=Math.sin(ka)*pa};c.lonLatToWebMercatorComparable=U;c.project=function(la,oa,ka=null){return Array.isArray(la)?0===la.length?[]:D(eb,la,la[0].spatialReference,oa,ka):D(eb,[la],la.spatialReference,oa,ka)[0]};c.projectBoundingRect=function(la,oa,ka,pa){if(null==la)return!1;if(C.equals(oa,pa))return k.copy(ka,la),!0;Va[0]=la[0];Va[1]=la[1];Va[2]=0;if(!X(Va,oa,0,Va,pa,0,1))return!1;ka[0]=Va[0];ka[1]=Va[1];Va[0]=
la[2];Va[1]=la[3];Va[2]=0;if(!X(Va,oa,0,Va,pa,0,1))return!1;ka[2]=Va[0];ka[3]=Va[1];return!0};c.projectBoundingSphere=function(la,oa,ka,pa){if(u.isNone(oa)||u.isNone(pa))return!1;oa=Ga(oa,pa,fc);if(oa.projector===va)return ka[0]=la[0],ka[1]=la[1],ka[2]=la[2],ka[3]=la[3],!0;if(u.isNone(oa.projector))return!1;const {source:Da,dest:Ea}=oa;if(3===Ea.spatialReferenceId){oa=Ta[Da.spatialReferenceId][2];if(u.isNone(oa))return!1;oa(la,0,kb,0);ia(kb,0,ka,0);ka[3]=ma(kb[1],la[2],la[3],e.earth.radius);return!0}if(2!==
Da.spatialReferenceId&&5!==Da.spatialReferenceId||12!==Ea.spatialReferenceId)oa.projector(la,0,ka,0),ka[3]=la[3]*Da.metersPerUnit/Ea.metersPerUnit;else{pa=Ta[1][12];let Na=la[3];u.isSome(Ta[Da.spatialReferenceId][1])&&u.isSome(pa)&&(Na=ma(la[1],la[2],la[3],e.earth.radius));oa.projector(la,0,ka,0);ka[3]=Na}return!0};c.projectBuffer=X;c.projectDirection=function(la,oa,ka,pa,Da){f.copy(Ra,la);f.add(Gb,la,oa);Q(Ra,ka,Ra,Da);Q(Gb,ka,Gb,Da);f.subtract(pa,Gb,Ra);f.normalize(pa,pa)};c.projectExtent=function(la,
oa,ka=oa.spatialReference,pa=0){return u.isSome(ka)&&u.isSome(R(la,la.spatialReference,oa,ka,pa))};c.projectMany=D;c.projectMultipoint=function(la,oa,ka=oa.spatialReference,pa=0){return u.isNone(ka)?!1:u.isSome(F(la,la.spatialReference,oa,ka,pa))};c.projectPoint=function(la,oa,ka=oa.spatialReference,pa=0){return u.isNone(ka)?!1:u.isSome(J(la,la.spatialReference,oa,ka,pa))};c.projectPointToVector=function(la,oa,ka,pa=0){Ra[0]=la.x;Ra[1]=la.y;const Da=la.z;Ra[2]=void 0!==Da?Da:pa;return X(Ra,la.spatialReference,
0,oa,ka,0,1)};c.projectPointToWGS84ComparableLonLat=function(la,oa){Ra[0]=la.x;Ra[1]=la.y;const ka=la.z;Ra[2]=void 0!==ka?ka:0;return S(Ra,la.spatialReference,oa)};c.projectPolygon=function(la,oa,ka=oa.spatialReference,pa=0){return u.isSome(ka)&&u.isSome(M(la,la.spatialReference,oa,ka,pa))};c.projectPolyline=function(la,oa,ka=oa.spatialReference,pa=0){return u.isSome(ka)&&u.isSome(K(la,la.spatialReference,oa,ka,pa))};c.projectVectorToDehydratedPoint=function(la,oa,ka){return X(la,oa,0,Ra,ka.spatialReference,
0,1)?(ka.x=Ra[0],ka.y=Ra[1],ka.z=Ra[2],ka):null};c.projectVectorToPoint=function(la,oa,ka){if(u.isNone(oa)||u.isNone(ka))return null;const pa=new a({spatialReference:ka});return X(la,oa,0,Ra,ka,0,1)?(pa.x=Ra[0],pa.y=Ra[1],pa.z=Ra[2],pa):null};c.projectVectorToVector=Q;c.projectVectorToWGS84ComparableLonLat=function(la,oa,ka){return S(la,oa,ka)};c.projectWithoutEngine=L;c.projectXYZToVector=T;c.sphericalPCPFtoLonLatElevation=Z;c.unload=function(){fb=eb=ta=null;bb={}};Object.defineProperty(c,"__esModule",
{value:!0})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(n,c,z){function x(N,U){N[0]=U[0];N[1]=U[1];N[2]=U[2];N[3]=U[3];N[4]=U[4];N[5]=U[5];N[6]=U[6];N[7]=U[7];N[8]=U[8];N[9]=U[9];N[10]=U[10];N[11]=U[11];N[12]=U[12];N[13]=U[13];N[14]=U[14];N[15]=U[15];return N}function r(N,U,ia,P,V,Y,ba,fa,ha,Z,da,ja,qa,sa,ya,Aa,Ca){N[0]=U;N[1]=ia;N[2]=P;N[3]=V;N[4]=Y;N[5]=ba;N[6]=fa;N[7]=ha;N[8]=Z;N[9]=da;N[10]=ja;N[11]=qa;N[12]=sa;N[13]=ya;N[14]=Aa;N[15]=Ca;return N}function u(N){N[0]=
1;N[1]=0;N[2]=0;N[3]=0;N[4]=0;N[5]=1;N[6]=0;N[7]=0;N[8]=0;N[9]=0;N[10]=1;N[11]=0;N[12]=0;N[13]=0;N[14]=0;N[15]=1;return N}function m(N,U){if(N===U){const ia=U[1],P=U[2],V=U[3],Y=U[6],ba=U[7],fa=U[11];N[1]=U[4];N[2]=U[8];N[3]=U[12];N[4]=ia;N[6]=U[9];N[7]=U[13];N[8]=P;N[9]=Y;N[11]=U[14];N[12]=V;N[13]=ba;N[14]=fa}else N[0]=U[0],N[1]=U[4],N[2]=U[8],N[3]=U[12],N[4]=U[1],N[5]=U[5],N[6]=U[9],N[7]=U[13],N[8]=U[2],N[9]=U[6],N[10]=U[10],N[11]=U[14],N[12]=U[3],N[13]=U[7],N[14]=U[11],N[15]=U[15];return N}function v(N,
U){const ia=U[0],P=U[1],V=U[2],Y=U[3],ba=U[4],fa=U[5],ha=U[6],Z=U[7],da=U[8],ja=U[9],qa=U[10],sa=U[11],ya=U[12],Aa=U[13],Ca=U[14];U=U[15];const Ja=ia*fa-P*ba,Ia=ia*ha-V*ba,Ka=ia*Z-Y*ba,Ga=P*ha-V*fa,La=P*Z-Y*fa,ta=V*Z-Y*ha,eb=da*Aa-ja*ya,fb=da*Ca-qa*ya,bb=da*U-sa*ya,H=ja*Ca-qa*Aa,hb=ja*U-sa*Aa,gb=qa*U-sa*Ca;let Ta=Ja*gb-Ia*hb+Ka*H+Ga*bb-La*fb+ta*eb;if(!Ta)return null;Ta=1/Ta;N[0]=(fa*gb-ha*hb+Z*H)*Ta;N[1]=(V*hb-P*gb-Y*H)*Ta;N[2]=(Aa*ta-Ca*La+U*Ga)*Ta;N[3]=(qa*La-ja*ta-sa*Ga)*Ta;N[4]=(ha*bb-ba*gb-Z*
fb)*Ta;N[5]=(ia*gb-V*bb+Y*fb)*Ta;N[6]=(Ca*Ka-ya*ta-U*Ia)*Ta;N[7]=(da*ta-qa*Ka+sa*Ia)*Ta;N[8]=(ba*hb-fa*bb+Z*eb)*Ta;N[9]=(P*bb-ia*hb-Y*eb)*Ta;N[10]=(ya*La-Aa*Ka+U*Ja)*Ta;N[11]=(ja*Ka-da*La-sa*Ja)*Ta;N[12]=(fa*fb-ba*H-ha*eb)*Ta;N[13]=(ia*H-P*fb+V*eb)*Ta;N[14]=(Aa*Ia-ya*Ga-Ca*Ja)*Ta;N[15]=(da*Ga-ja*Ia+qa*Ja)*Ta;return N}function p(N,U){const ia=U[0],P=U[1],V=U[2],Y=U[3],ba=U[4],fa=U[5],ha=U[6],Z=U[7],da=U[8],ja=U[9],qa=U[10],sa=U[11],ya=U[12],Aa=U[13],Ca=U[14];U=U[15];N[0]=fa*(qa*U-sa*Ca)-ja*(ha*U-Z*
Ca)+Aa*(ha*sa-Z*qa);N[1]=-(P*(qa*U-sa*Ca)-ja*(V*U-Y*Ca)+Aa*(V*sa-Y*qa));N[2]=P*(ha*U-Z*Ca)-fa*(V*U-Y*Ca)+Aa*(V*Z-Y*ha);N[3]=-(P*(ha*sa-Z*qa)-fa*(V*sa-Y*qa)+ja*(V*Z-Y*ha));N[4]=-(ba*(qa*U-sa*Ca)-da*(ha*U-Z*Ca)+ya*(ha*sa-Z*qa));N[5]=ia*(qa*U-sa*Ca)-da*(V*U-Y*Ca)+ya*(V*sa-Y*qa);N[6]=-(ia*(ha*U-Z*Ca)-ba*(V*U-Y*Ca)+ya*(V*Z-Y*ha));N[7]=ia*(ha*sa-Z*qa)-ba*(V*sa-Y*qa)+da*(V*Z-Y*ha);N[8]=ba*(ja*U-sa*Aa)-da*(fa*U-Z*Aa)+ya*(fa*sa-Z*ja);N[9]=-(ia*(ja*U-sa*Aa)-da*(P*U-Y*Aa)+ya*(P*sa-Y*ja));N[10]=ia*(fa*U-Z*Aa)-
ba*(P*U-Y*Aa)+ya*(P*Z-Y*fa);N[11]=-(ia*(fa*sa-Z*ja)-ba*(P*sa-Y*ja)+da*(P*Z-Y*fa));N[12]=-(ba*(ja*Ca-qa*Aa)-da*(fa*Ca-ha*Aa)+ya*(fa*qa-ha*ja));N[13]=ia*(ja*Ca-qa*Aa)-da*(P*Ca-V*Aa)+ya*(P*qa-V*ja);N[14]=-(ia*(fa*Ca-ha*Aa)-ba*(P*Ca-V*Aa)+ya*(P*ha-V*fa));N[15]=ia*(fa*qa-ha*ja)-ba*(P*qa-V*ja)+da*(P*ha-V*fa);return N}function f(N){const U=N[0],ia=N[1],P=N[2],V=N[3],Y=N[4],ba=N[5],fa=N[6],ha=N[7],Z=N[8],da=N[9],ja=N[10],qa=N[11],sa=N[12],ya=N[13],Aa=N[14];N=N[15];return(U*ba-ia*Y)*(ja*N-qa*Aa)-(U*fa-P*Y)*
(da*N-qa*ya)+(U*ha-V*Y)*(da*Aa-ja*ya)+(ia*fa-P*ba)*(Z*N-qa*sa)-(ia*ha-V*ba)*(Z*Aa-ja*sa)+(P*ha-V*fa)*(Z*ya-da*sa)}function q(N,U,ia){const P=U[0],V=U[1],Y=U[2],ba=U[3],fa=U[4],ha=U[5],Z=U[6],da=U[7],ja=U[8],qa=U[9],sa=U[10],ya=U[11],Aa=U[12],Ca=U[13],Ja=U[14];U=U[15];let Ia=ia[0],Ka=ia[1],Ga=ia[2],La=ia[3];N[0]=Ia*P+Ka*fa+Ga*ja+La*Aa;N[1]=Ia*V+Ka*ha+Ga*qa+La*Ca;N[2]=Ia*Y+Ka*Z+Ga*sa+La*Ja;N[3]=Ia*ba+Ka*da+Ga*ya+La*U;Ia=ia[4];Ka=ia[5];Ga=ia[6];La=ia[7];N[4]=Ia*P+Ka*fa+Ga*ja+La*Aa;N[5]=Ia*V+Ka*ha+Ga*
qa+La*Ca;N[6]=Ia*Y+Ka*Z+Ga*sa+La*Ja;N[7]=Ia*ba+Ka*da+Ga*ya+La*U;Ia=ia[8];Ka=ia[9];Ga=ia[10];La=ia[11];N[8]=Ia*P+Ka*fa+Ga*ja+La*Aa;N[9]=Ia*V+Ka*ha+Ga*qa+La*Ca;N[10]=Ia*Y+Ka*Z+Ga*sa+La*Ja;N[11]=Ia*ba+Ka*da+Ga*ya+La*U;Ia=ia[12];Ka=ia[13];Ga=ia[14];La=ia[15];N[12]=Ia*P+Ka*fa+Ga*ja+La*Aa;N[13]=Ia*V+Ka*ha+Ga*qa+La*Ca;N[14]=Ia*Y+Ka*Z+Ga*sa+La*Ja;N[15]=Ia*ba+Ka*da+Ga*ya+La*U;return N}function l(N,U,ia){const P=ia[0],V=ia[1];ia=ia[2];let Y=void 0,ba=void 0,fa=void 0,ha=void 0,Z=void 0,da=void 0,ja=void 0,
qa=void 0,sa=void 0,ya=void 0,Aa=void 0,Ca=void 0;U===N?(N[12]=U[0]*P+U[4]*V+U[8]*ia+U[12],N[13]=U[1]*P+U[5]*V+U[9]*ia+U[13],N[14]=U[2]*P+U[6]*V+U[10]*ia+U[14],N[15]=U[3]*P+U[7]*V+U[11]*ia+U[15]):(Y=U[0],ba=U[1],fa=U[2],ha=U[3],Z=U[4],da=U[5],ja=U[6],qa=U[7],sa=U[8],ya=U[9],Aa=U[10],Ca=U[11],N[0]=Y,N[1]=ba,N[2]=fa,N[3]=ha,N[4]=Z,N[5]=da,N[6]=ja,N[7]=qa,N[8]=sa,N[9]=ya,N[10]=Aa,N[11]=Ca,N[12]=Y*P+Z*V+sa*ia+U[12],N[13]=ba*P+da*V+ya*ia+U[13],N[14]=fa*P+ja*V+Aa*ia+U[14],N[15]=ha*P+qa*V+Ca*ia+U[15]);return N}
function t(N,U,ia){const P=ia[0],V=ia[1];ia=ia[2];N[0]=U[0]*P;N[1]=U[1]*P;N[2]=U[2]*P;N[3]=U[3]*P;N[4]=U[4]*V;N[5]=U[5]*V;N[6]=U[6]*V;N[7]=U[7]*V;N[8]=U[8]*ia;N[9]=U[9]*ia;N[10]=U[10]*ia;N[11]=U[11]*ia;N[12]=U[12];N[13]=U[13];N[14]=U[14];N[15]=U[15];return N}function g(N,U,ia,P){let V=P[0],Y=P[1];P=P[2];let ba=Math.sqrt(V*V+Y*Y+P*P);var fa=void 0,ha=void 0;let Z=void 0,da=void 0,ja=void 0,qa=void 0,sa=void 0,ya=void 0,Aa=void 0,Ca=void 0,Ja=void 0,Ia=void 0,Ka=void 0,Ga=void 0,La=void 0,ta=void 0,
eb=void 0,fb=void 0,bb=void 0,H=void 0,hb=void 0,gb=void 0;ha=fa=void 0;if(ba<z.EPSILON)return null;ba=1/ba;V*=ba;Y*=ba;P*=ba;fa=Math.sin(ia);ha=Math.cos(ia);Z=1-ha;da=U[0];ja=U[1];qa=U[2];sa=U[3];ya=U[4];Aa=U[5];Ca=U[6];Ja=U[7];Ia=U[8];Ka=U[9];Ga=U[10];La=U[11];ta=V*V*Z+ha;eb=Y*V*Z+P*fa;fb=P*V*Z-Y*fa;bb=V*Y*Z-P*fa;H=Y*Y*Z+ha;hb=P*Y*Z+V*fa;gb=V*P*Z+Y*fa;fa=Y*P*Z-V*fa;ha=P*P*Z+ha;N[0]=da*ta+ya*eb+Ia*fb;N[1]=ja*ta+Aa*eb+Ka*fb;N[2]=qa*ta+Ca*eb+Ga*fb;N[3]=sa*ta+Ja*eb+La*fb;N[4]=da*bb+ya*H+Ia*hb;N[5]=
ja*bb+Aa*H+Ka*hb;N[6]=qa*bb+Ca*H+Ga*hb;N[7]=sa*bb+Ja*H+La*hb;N[8]=da*gb+ya*fa+Ia*ha;N[9]=ja*gb+Aa*fa+Ka*ha;N[10]=qa*gb+Ca*fa+Ga*ha;N[11]=sa*gb+Ja*fa+La*ha;U!==N&&(N[12]=U[12],N[13]=U[13],N[14]=U[14],N[15]=U[15]);return N}function a(N,U,ia){const P=Math.sin(ia);ia=Math.cos(ia);const V=U[4],Y=U[5],ba=U[6],fa=U[7],ha=U[8],Z=U[9],da=U[10],ja=U[11];U!==N&&(N[0]=U[0],N[1]=U[1],N[2]=U[2],N[3]=U[3],N[12]=U[12],N[13]=U[13],N[14]=U[14],N[15]=U[15]);N[4]=V*ia+ha*P;N[5]=Y*ia+Z*P;N[6]=ba*ia+da*P;N[7]=fa*ia+ja*
P;N[8]=ha*ia-V*P;N[9]=Z*ia-Y*P;N[10]=da*ia-ba*P;N[11]=ja*ia-fa*P;return N}function b(N,U,ia){const P=Math.sin(ia);ia=Math.cos(ia);const V=U[0],Y=U[1],ba=U[2],fa=U[3],ha=U[8],Z=U[9],da=U[10],ja=U[11];U!==N&&(N[4]=U[4],N[5]=U[5],N[6]=U[6],N[7]=U[7],N[12]=U[12],N[13]=U[13],N[14]=U[14],N[15]=U[15]);N[0]=V*ia-ha*P;N[1]=Y*ia-Z*P;N[2]=ba*ia-da*P;N[3]=fa*ia-ja*P;N[8]=V*P+ha*ia;N[9]=Y*P+Z*ia;N[10]=ba*P+da*ia;N[11]=fa*P+ja*ia;return N}function d(N,U,ia){const P=Math.sin(ia);ia=Math.cos(ia);const V=U[0],Y=U[1],
ba=U[2],fa=U[3],ha=U[4],Z=U[5],da=U[6],ja=U[7];U!==N&&(N[8]=U[8],N[9]=U[9],N[10]=U[10],N[11]=U[11],N[12]=U[12],N[13]=U[13],N[14]=U[14],N[15]=U[15]);N[0]=V*ia+ha*P;N[1]=Y*ia+Z*P;N[2]=ba*ia+da*P;N[3]=fa*ia+ja*P;N[4]=ha*ia-V*P;N[5]=Z*ia-Y*P;N[6]=da*ia-ba*P;N[7]=ja*ia-fa*P;return N}function h(N,U){N[0]=1;N[1]=0;N[2]=0;N[3]=0;N[4]=0;N[5]=1;N[6]=0;N[7]=0;N[8]=0;N[9]=0;N[10]=1;N[11]=0;N[12]=U[0];N[13]=U[1];N[14]=U[2];N[15]=1;return N}function k(N,U){N[0]=U[0];N[1]=0;N[2]=0;N[3]=0;N[4]=0;N[5]=U[1];N[6]=0;
N[7]=0;N[8]=0;N[9]=0;N[10]=U[2];N[11]=0;N[12]=0;N[13]=0;N[14]=0;N[15]=1;return N}function e(N,U,ia){let P=ia[0],V=ia[1];ia=ia[2];let Y=Math.sqrt(P*P+V*V+ia*ia),ba=void 0,fa=void 0,ha=void 0;if(Y<z.EPSILON)return null;Y=1/Y;P*=Y;V*=Y;ia*=Y;ba=Math.sin(U);fa=Math.cos(U);ha=1-fa;N[0]=P*P*ha+fa;N[1]=V*P*ha+ia*ba;N[2]=ia*P*ha-V*ba;N[3]=0;N[4]=P*V*ha-ia*ba;N[5]=V*V*ha+fa;N[6]=ia*V*ha+P*ba;N[7]=0;N[8]=P*ia*ha+V*ba;N[9]=V*ia*ha-P*ba;N[10]=ia*ia*ha+fa;N[11]=0;N[12]=0;N[13]=0;N[14]=0;N[15]=1;return N}function w(N,
U){const ia=Math.sin(U);U=Math.cos(U);N[0]=1;N[1]=0;N[2]=0;N[3]=0;N[4]=0;N[5]=U;N[6]=ia;N[7]=0;N[8]=0;N[9]=-ia;N[10]=U;N[11]=0;N[12]=0;N[13]=0;N[14]=0;N[15]=1;return N}function y(N,U){const ia=Math.sin(U);U=Math.cos(U);N[0]=U;N[1]=0;N[2]=-ia;N[3]=0;N[4]=0;N[5]=1;N[6]=0;N[7]=0;N[8]=ia;N[9]=0;N[10]=U;N[11]=0;N[12]=0;N[13]=0;N[14]=0;N[15]=1;return N}function C(N,U){const ia=Math.sin(U);U=Math.cos(U);N[0]=U;N[1]=ia;N[2]=0;N[3]=0;N[4]=-ia;N[5]=U;N[6]=0;N[7]=0;N[8]=0;N[9]=0;N[10]=1;N[11]=0;N[12]=0;N[13]=
0;N[14]=0;N[15]=1;return N}function B(N,U,ia){var P=U[0],V=U[1],Y=U[2],ba=U[3],fa=P+P,ha=V+V;const Z=Y+Y;U=P*fa;const da=P*ha;P*=Z;const ja=V*ha;V*=Z;Y*=Z;fa*=ba;ha*=ba;ba*=Z;N[0]=1-(ja+Y);N[1]=da+ba;N[2]=P-ha;N[3]=0;N[4]=da-ba;N[5]=1-(U+Y);N[6]=V+fa;N[7]=0;N[8]=P+ha;N[9]=V-fa;N[10]=1-(U+ja);N[11]=0;N[12]=ia[0];N[13]=ia[1];N[14]=ia[2];N[15]=1;return N}function A(N,U){const ia=Ba,P=-U[0],V=-U[1],Y=-U[2],ba=U[3],fa=U[4],ha=U[5],Z=U[6],da=U[7],ja=P*P+V*V+Y*Y+ba*ba;0<ja?(ia[0]=2*(fa*ba+da*P+ha*Y-Z*V)/
ja,ia[1]=2*(ha*ba+da*V+Z*P-fa*Y)/ja,ia[2]=2*(Z*ba+da*Y+fa*V-ha*P)/ja):(ia[0]=2*(fa*ba+da*P+ha*Y-Z*V),ia[1]=2*(ha*ba+da*V+Z*P-fa*Y),ia[2]=2*(Z*ba+da*Y+fa*V-ha*P));B(N,U,ia);return N}function D(N,U){N[0]=U[12];N[1]=U[13];N[2]=U[14];return N}function E(N,U){const ia=U[0],P=U[1],V=U[2],Y=U[4],ba=U[5],fa=U[6],ha=U[8],Z=U[9];U=U[10];N[0]=Math.sqrt(ia*ia+P*P+V*V);N[1]=Math.sqrt(Y*Y+ba*ba+fa*fa);N[2]=Math.sqrt(ha*ha+Z*Z+U*U);return N}function G(N,U){const ia=U[0]+U[5]+U[10];let P=0;0<ia?(P=2*Math.sqrt(ia+
1),N[3]=.25*P,N[0]=(U[6]-U[9])/P,N[1]=(U[8]-U[2])/P,N[2]=(U[1]-U[4])/P):U[0]>U[5]&&U[0]>U[10]?(P=2*Math.sqrt(1+U[0]-U[5]-U[10]),N[3]=(U[6]-U[9])/P,N[0]=.25*P,N[1]=(U[1]+U[4])/P,N[2]=(U[8]+U[2])/P):U[5]>U[10]?(P=2*Math.sqrt(1+U[5]-U[0]-U[10]),N[3]=(U[8]-U[2])/P,N[0]=(U[1]+U[4])/P,N[1]=.25*P,N[2]=(U[6]+U[9])/P):(P=2*Math.sqrt(1+U[10]-U[0]-U[5]),N[3]=(U[1]-U[4])/P,N[0]=(U[8]+U[2])/P,N[1]=(U[6]+U[9])/P,N[2]=.25*P);return N}function I(N,U,ia,P){var V=U[0],Y=U[1],ba=U[2],fa=U[3],ha=V+V,Z=Y+Y,da=ba+ba;U=
V*ha;const ja=V*Z;V*=da;const qa=Y*Z;Y*=da;ba*=da;ha*=fa;Z*=fa;fa*=da;da=P[0];const sa=P[1];P=P[2];N[0]=(1-(qa+ba))*da;N[1]=(ja+fa)*da;N[2]=(V-Z)*da;N[3]=0;N[4]=(ja-fa)*sa;N[5]=(1-(U+ba))*sa;N[6]=(Y+ha)*sa;N[7]=0;N[8]=(V+Z)*P;N[9]=(Y-ha)*P;N[10]=(1-(U+qa))*P;N[11]=0;N[12]=ia[0];N[13]=ia[1];N[14]=ia[2];N[15]=1;return N}function L(N,U,ia,P,V){var Y=U[0],ba=U[1],fa=U[2],ha=U[3],Z=Y+Y,da=ba+ba,ja=fa+fa;U=Y*Z;var qa=Y*da,sa=Y*ja;Y=ba*da;ba*=ja;var ya=fa*ja;fa=ha*Z;da*=ha;const Aa=ha*ja;var Ca=P[0],Ja=
P[1];ja=P[2];P=V[0];ha=V[1];V=V[2];Z=(1-(Y+ya))*Ca;const Ia=(qa+Aa)*Ca;Ca*=sa-da;qa=(qa-Aa)*Ja;ya=(1-(U+ya))*Ja;Ja*=ba+fa;sa=(sa+da)*ja;ba=(ba-fa)*ja;U=(1-(U+Y))*ja;N[0]=Z;N[1]=Ia;N[2]=Ca;N[3]=0;N[4]=qa;N[5]=ya;N[6]=Ja;N[7]=0;N[8]=sa;N[9]=ba;N[10]=U;N[11]=0;N[12]=ia[0]+P-(Z*P+qa*ha+sa*V);N[13]=ia[1]+ha-(Ia*P+ya*ha+ba*V);N[14]=ia[2]+V-(Ca*P+Ja*ha+U*V);N[15]=1;return N}function J(N,U){var ia=U[0],P=U[1],V=U[2];U=U[3];var Y=ia+ia,ba=P+P;const fa=V+V;ia*=Y;const ha=P*Y;P*=ba;const Z=V*Y,da=V*ba;V*=fa;
Y*=U;ba*=U;U*=fa;N[0]=1-P-V;N[1]=ha+U;N[2]=Z-ba;N[3]=0;N[4]=ha-U;N[5]=1-ia-V;N[6]=da+Y;N[7]=0;N[8]=Z+ba;N[9]=da-Y;N[10]=1-ia-P;N[11]=0;N[12]=0;N[13]=0;N[14]=0;N[15]=1;return N}function F(N,U,ia,P,V,Y,ba){const fa=1/(ia-U),ha=1/(V-P),Z=1/(Y-ba);N[0]=2*Y*fa;N[1]=0;N[2]=0;N[3]=0;N[4]=0;N[5]=2*Y*ha;N[6]=0;N[7]=0;N[8]=(ia+U)*fa;N[9]=(V+P)*ha;N[10]=(ba+Y)*Z;N[11]=-1;N[12]=0;N[13]=0;N[14]=ba*Y*2*Z;N[15]=0;return N}function K(N,U,ia,P,V){U=1/Math.tan(U/2);let Y=void 0;N[0]=U/ia;N[1]=0;N[2]=0;N[3]=0;N[4]=
0;N[5]=U;N[6]=0;N[7]=0;N[8]=0;N[9]=0;N[11]=-1;N[12]=0;N[13]=0;N[15]=0;null!=V&&Infinity!==V?(Y=1/(P-V),N[10]=(V+P)*Y,N[14]=2*V*P*Y):(N[10]=-1,N[14]=-2*P);return N}function M(N,U,ia,P){const V=Math.tan(U.upDegrees*Math.PI/180),Y=Math.tan(U.downDegrees*Math.PI/180),ba=Math.tan(U.leftDegrees*Math.PI/180);U=Math.tan(U.rightDegrees*Math.PI/180);const fa=2/(ba+U),ha=2/(V+Y);N[0]=fa;N[1]=0;N[2]=0;N[3]=0;N[4]=0;N[5]=ha;N[6]=0;N[7]=0;N[8]=-((ba-U)*fa*.5);N[9]=(V-Y)*ha*.5;N[10]=P/(ia-P);N[11]=-1;N[12]=0;N[13]=
0;N[14]=P*ia/(ia-P);N[15]=0;return N}function R(N,U,ia,P,V,Y,ba){const fa=1/(U-ia),ha=1/(P-V),Z=1/(Y-ba);N[0]=-2*fa;N[1]=0;N[2]=0;N[3]=0;N[4]=0;N[5]=-2*ha;N[6]=0;N[7]=0;N[8]=0;N[9]=0;N[10]=2*Z;N[11]=0;N[12]=(U+ia)*fa;N[13]=(V+P)*ha;N[14]=(ba+Y)*Z;N[15]=1;return N}function T(N,U,ia,P){let V=void 0,Y=void 0;var ba=void 0,fa=void 0;let ha=void 0,Z=void 0;var da=void 0,ja=void 0;let qa=void 0,sa=void 0;const ya=U[0],Aa=U[1];U=U[2];ba=P[0];fa=P[1];P=P[2];da=ia[0];ja=ia[1];ia=ia[2];if(Math.abs(ya-da)<z.EPSILON&&
Math.abs(Aa-ja)<z.EPSILON&&Math.abs(U-ia)<z.EPSILON)return u(N);da=ya-da;ja=Aa-ja;qa=U-ia;sa=1/Math.sqrt(da*da+ja*ja+qa*qa);da*=sa;ja*=sa;qa*=sa;V=fa*qa-P*ja;Y=P*da-ba*qa;ba=ba*ja-fa*da;(sa=Math.sqrt(V*V+Y*Y+ba*ba))?(sa=1/sa,V*=sa,Y*=sa,ba*=sa):ba=Y=V=0;fa=ja*ba-qa*Y;ha=qa*V-da*ba;Z=da*Y-ja*V;(sa=Math.sqrt(fa*fa+ha*ha+Z*Z))?(sa=1/sa,fa*=sa,ha*=sa,Z*=sa):Z=ha=fa=0;N[0]=V;N[1]=fa;N[2]=da;N[3]=0;N[4]=Y;N[5]=ha;N[6]=ja;N[7]=0;N[8]=ba;N[9]=Z;N[10]=qa;N[11]=0;N[12]=-(V*ya+Y*Aa+ba*U);N[13]=-(fa*ya+ha*Aa+
Z*U);N[14]=-(da*ya+ja*Aa+qa*U);N[15]=1;return N}function Q(N,U,ia,P){const V=U[0],Y=U[1];U=U[2];var ba=P[0];const fa=P[1];var ha=P[2];P=V-ia[0];let Z=Y-ia[1];ia=U-ia[2];let da=P*P+Z*Z+ia*ia;0<da&&(da=1/Math.sqrt(da),P*=da,Z*=da,ia*=da);let ja=fa*ia-ha*Z;ha=ha*P-ba*ia;ba=ba*Z-fa*P;da=ja*ja+ha*ha+ba*ba;0<da&&(da=1/Math.sqrt(da),ja*=da,ha*=da,ba*=da);N[0]=ja;N[1]=ha;N[2]=ba;N[3]=0;N[4]=Z*ba-ia*ha;N[5]=ia*ja-P*ba;N[6]=P*ha-Z*ja;N[7]=0;N[8]=P;N[9]=Z;N[10]=ia;N[11]=0;N[12]=V;N[13]=Y;N[14]=U;N[15]=1;return N}
function S(N){return"mat4("+N[0]+", "+N[1]+", "+N[2]+", "+N[3]+", "+N[4]+", "+N[5]+", "+N[6]+", "+N[7]+", "+N[8]+", "+N[9]+", "+N[10]+", "+N[11]+", "+N[12]+", "+N[13]+", "+N[14]+", "+N[15]+")"}function X(N){return Math.sqrt(N[0]**2+N[1]**2+N[2]**2+N[3]**2+N[4]**2+N[5]**2+N[6]**2+N[7]**2+N[8]**2+N[9]**2+N[10]**2+N[11]**2+N[12]**2+N[13]**2+N[14]**2+N[15]**2)}function aa(N,U,ia){N[0]=U[0]+ia[0];N[1]=U[1]+ia[1];N[2]=U[2]+ia[2];N[3]=U[3]+ia[3];N[4]=U[4]+ia[4];N[5]=U[5]+ia[5];N[6]=U[6]+ia[6];N[7]=U[7]+
ia[7];N[8]=U[8]+ia[8];N[9]=U[9]+ia[9];N[10]=U[10]+ia[10];N[11]=U[11]+ia[11];N[12]=U[12]+ia[12];N[13]=U[13]+ia[13];N[14]=U[14]+ia[14];N[15]=U[15]+ia[15];return N}function ma(N,U,ia){N[0]=U[0]-ia[0];N[1]=U[1]-ia[1];N[2]=U[2]-ia[2];N[3]=U[3]-ia[3];N[4]=U[4]-ia[4];N[5]=U[5]-ia[5];N[6]=U[6]-ia[6];N[7]=U[7]-ia[7];N[8]=U[8]-ia[8];N[9]=U[9]-ia[9];N[10]=U[10]-ia[10];N[11]=U[11]-ia[11];N[12]=U[12]-ia[12];N[13]=U[13]-ia[13];N[14]=U[14]-ia[14];N[15]=U[15]-ia[15];return N}function ra(N,U,ia){N[0]=U[0]*ia;N[1]=
U[1]*ia;N[2]=U[2]*ia;N[3]=U[3]*ia;N[4]=U[4]*ia;N[5]=U[5]*ia;N[6]=U[6]*ia;N[7]=U[7]*ia;N[8]=U[8]*ia;N[9]=U[9]*ia;N[10]=U[10]*ia;N[11]=U[11]*ia;N[12]=U[12]*ia;N[13]=U[13]*ia;N[14]=U[14]*ia;N[15]=U[15]*ia;return N}function za(N,U,ia,P){N[0]=U[0]+ia[0]*P;N[1]=U[1]+ia[1]*P;N[2]=U[2]+ia[2]*P;N[3]=U[3]+ia[3]*P;N[4]=U[4]+ia[4]*P;N[5]=U[5]+ia[5]*P;N[6]=U[6]+ia[6]*P;N[7]=U[7]+ia[7]*P;N[8]=U[8]+ia[8]*P;N[9]=U[9]+ia[9]*P;N[10]=U[10]+ia[10]*P;N[11]=U[11]+ia[11]*P;N[12]=U[12]+ia[12]*P;N[13]=U[13]+ia[13]*P;N[14]=
U[14]+ia[14]*P;N[15]=U[15]+ia[15]*P;return N}function wa(N,U){return N[0]===U[0]&&N[1]===U[1]&&N[2]===U[2]&&N[3]===U[3]&&N[4]===U[4]&&N[5]===U[5]&&N[6]===U[6]&&N[7]===U[7]&&N[8]===U[8]&&N[9]===U[9]&&N[10]===U[10]&&N[11]===U[11]&&N[12]===U[12]&&N[13]===U[13]&&N[14]===U[14]&&N[15]===U[15]}function va(N,U){const ia=N[0],P=N[1],V=N[2],Y=N[3],ba=N[4],fa=N[5],ha=N[6],Z=N[7],da=N[8],ja=N[9],qa=N[10],sa=N[11],ya=N[12],Aa=N[13],Ca=N[14];N=N[15];const Ja=U[0],Ia=U[1],Ka=U[2],Ga=U[3],La=U[4],ta=U[5],eb=U[6],
fb=U[7],bb=U[8],H=U[9],hb=U[10],gb=U[11],Ta=U[12],vb=U[13],yb=U[14];U=U[15];return Math.abs(ia-Ja)<=z.EPSILON*Math.max(1,Math.abs(ia),Math.abs(Ja))&&Math.abs(P-Ia)<=z.EPSILON*Math.max(1,Math.abs(P),Math.abs(Ia))&&Math.abs(V-Ka)<=z.EPSILON*Math.max(1,Math.abs(V),Math.abs(Ka))&&Math.abs(Y-Ga)<=z.EPSILON*Math.max(1,Math.abs(Y),Math.abs(Ga))&&Math.abs(ba-La)<=z.EPSILON*Math.max(1,Math.abs(ba),Math.abs(La))&&Math.abs(fa-ta)<=z.EPSILON*Math.max(1,Math.abs(fa),Math.abs(ta))&&Math.abs(ha-eb)<=z.EPSILON*Math.max(1,
Math.abs(ha),Math.abs(eb))&&Math.abs(Z-fb)<=z.EPSILON*Math.max(1,Math.abs(Z),Math.abs(fb))&&Math.abs(da-bb)<=z.EPSILON*Math.max(1,Math.abs(da),Math.abs(bb))&&Math.abs(ja-H)<=z.EPSILON*Math.max(1,Math.abs(ja),Math.abs(H))&&Math.abs(qa-hb)<=z.EPSILON*Math.max(1,Math.abs(qa),Math.abs(hb))&&Math.abs(sa-gb)<=z.EPSILON*Math.max(1,Math.abs(sa),Math.abs(gb))&&Math.abs(ya-Ta)<=z.EPSILON*Math.max(1,Math.abs(ya),Math.abs(Ta))&&Math.abs(Aa-vb)<=z.EPSILON*Math.max(1,Math.abs(Aa),Math.abs(vb))&&Math.abs(Ca-yb)<=
z.EPSILON*Math.max(1,Math.abs(Ca),Math.abs(yb))&&Math.abs(N-U)<=z.EPSILON*Math.max(1,Math.abs(N),Math.abs(U))}function Fa(N){const U=z.EPSILON,ia=N[0],P=N[1],V=N[2],Y=N[4],ba=N[5],fa=N[6],ha=N[8],Z=N[9];N=N[10];return Math.abs(1-(ia*ia+Y*Y+ha*ha))<=U&&Math.abs(1-(P*P+ba*ba+Z*Z))<=U&&Math.abs(1-(V*V+fa*fa+N*N))<=U}const Ba=c.create();c=Object.freeze({__proto__:null,copy:x,set:r,identity:u,transpose:m,invert:v,adjoint:p,determinant:f,multiply:q,translate:l,scale:t,rotate:g,rotateX:a,rotateY:b,rotateZ:d,
fromTranslation:h,fromScaling:k,fromRotation:e,fromXRotation:w,fromYRotation:y,fromZRotation:C,fromRotationTranslation:B,fromQuat2:A,getTranslation:D,getScaling:E,getRotation:G,fromRotationTranslationScale:I,fromRotationTranslationScaleOrigin:L,fromQuat:J,frustum:F,perspective:K,perspectiveFromFieldOfView:M,ortho:R,lookAt:T,targetTo:Q,str:S,frob:X,add:aa,subtract:ma,multiplyScalar:ra,multiplyScalarAndAdd:za,exactEquals:wa,equals:va,isOrthoNormal:Fa,mul:q,sub:ma});n.add=aa;n.adjoint=p;n.copy=x;n.determinant=
f;n.equals=va;n.exactEquals=wa;n.frob=X;n.fromQuat=J;n.fromQuat2=A;n.fromRotation=e;n.fromRotationTranslation=B;n.fromRotationTranslationScale=I;n.fromRotationTranslationScaleOrigin=L;n.fromScaling=k;n.fromTranslation=h;n.fromXRotation=w;n.fromYRotation=y;n.fromZRotation=C;n.frustum=F;n.getRotation=G;n.getScaling=E;n.getTranslation=D;n.identity=u;n.invert=v;n.isOrthoNormal=Fa;n.lookAt=T;n.mat4=c;n.mul=q;n.multiply=q;n.multiplyScalar=ra;n.multiplyScalarAndAdd=za;n.ortho=R;n.perspective=K;n.perspectiveFromFieldOfView=
M;n.rotate=g;n.rotateX=a;n.rotateY=b;n.rotateZ=d;n.scale=t;n.set=r;n.str=S;n.sub=ma;n.subtract=ma;n.targetTo=Q;n.translate=l;n.transpose=m})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(n,c,z,x,r){function u(){return!!c._pe}function m(){return!!r("esri-wasm")}function v(){return g?g:g=(new Promise(function(b,d){n(["./pe-wasm"],b,d)})).then(function(b){return b.peWasm}).then(({default:b})=>b({locateFile:d=>x.getAssetUrl(`esri/geometry/support/${d}`)})).then(b=>
{p(b)})}function p(b){function d(e,w,y){e[w]=y(e[w])}c._pe=b;c.PeDefs.init();c.PeGTlistExtended.init();c.PeNotationMgrs.init();c.PeNotationUtm.init();c.PePCSInfo.init();c.PeGCSExtent=function(e){function w(){return e.apply(this,arguments)||this}z._inheritsLoose(w,e);w.prototype.destroy=function(){c._pe.destroy(this)};return w}(c._pe.PeGCSExtent);b=[c._pe.PeDatum,c._pe.PeGeogcs,c._pe.PeGeogtran,c._pe.PeObject,c._pe.PeParameter,c._pe.PePrimem,c._pe.PeProjcs,c._pe.PeSpheroid,c._pe.PeUnit];for(var h of b)d(h.prototype,
"getName",e=>function(){return e.call(this,Array(c.PeDefs.PE_NAME_MAX))});for(const e of[c._pe.PeGeogtran,c._pe.PeProjcs])d(e.prototype,"getParameters",w=>function(){const y=Array(c.PeDefs.PE_PARM_MAX);let C=w.call(this);for(let B=0;B<y.length;B++){const A=c._pe.getValue(C,"*");y[B]=A?c._pe.wrapPointer(A,c._pe.PeParameter):null;C+=Int32Array.BYTES_PER_ELEMENT}return y});d(c._pe.PeHorizon.prototype,"getCoord",e=>function(){const w=this.getSize();if(!w)return null;const y=[],C=e.call(this);t(y,w,C);
return y});d(c._pe.PeGTlistExtendedEntry.prototype,"getEntries",e=>{const w=c._pe._pe_getPeGTlistExtendedGTsSize();return function(){let y=null;var C=e.call(this);if(!c._pe.compare(C,c._pe.NULL)){y=[C];const B=this.getSteps();if(1<B){C=c._pe.getPointer(C);for(let A=1;A<B;A++)y.push(c._pe.wrapPointer(C+w*A,c._pe.PeGTlistExtendedGTs))}}return y}});const k=c._pe._pe_getPeHorizonSize();h=e=>function(){let w=this._cache;w||(this._cache=w=new Map);if(w.has(e))return w.get(e);let y=null;var C=e.call(this);
if(!c._pe.compare(C,c._pe.NULL)){y=[C];const B=C.getNump();if(1<B){C=c._pe.getPointer(C);for(let A=1;A<B;A++)y.push(c._pe.wrapPointer(C+k*A,c._pe.PeHorizon))}}w.set(e,y);return y};d(c._pe.PeProjcs.prototype,"horizonGcsGenerate",h);d(c._pe.PeProjcs.prototype,"horizonPcsGenerate",h);c._pe.PeObject.prototype.toString=function(e=c.PeDefs.PE_STR_OPTS_NONE){c._pe.ensureCache.prepare();const w=c._pe.getPointer(this),y=c._pe.ensureInt8(Array(c.PeDefs.PE_BUFFER_MAX));return c._pe.UTF8ToString(c._pe._pe_object_to_string_ext(w,
e,y))}}function f(b){if(b){var d=c._pe.getClass(b);d&&(d=c._pe.getCache(d))&&(b=c._pe.getPointer(b))&&delete d[b]}}function q(b,d){const h=[];d=Array(d);for(let k=0;k<b;k++)h.push(c._pe.ensureInt8(d));return h}function l(b){let d;Array.isArray(b[0])?(d=[],b.forEach(h=>{d.push(h[0],h[1])})):d=b;return d}function t(b,d,h,k=!1){if(k)for(k=0;k<2*d;k++)b[k]=c._pe.getValue(h+k*Float64Array.BYTES_PER_ELEMENT,"double");else{k=0===b.length;for(let e=0;e<d;e++)k&&(b[e]=Array(2)),b[e][0]=c._pe.getValue(h,"double"),
b[e][1]=c._pe.getValue(h+Float64Array.BYTES_PER_ELEMENT,"double"),h+=2*Float64Array.BYTES_PER_ELEMENT}}let g;c._pe=null;c.PeCSTransformations=void 0;(function(b){function d(e,w,y){c._pe.ensureCache.prepare();var C=l(y);const B=y===C;C=c._pe.ensureFloat64(C);(e=c._pe._pe_geog_to_proj(c._pe.getPointer(e),w,C))&&t(y,w,C,B);return e}function h(e,w,y){return k(e,w,y,0)}function k(e,w,y,C){c._pe.ensureCache.prepare();var B=l(y);const A=y===B;B=c._pe.ensureFloat64(B);(e=c._pe._pe_proj_to_geog_center(c._pe.getPointer(e),
w,B,C))&&t(y,w,B,A);return e}b.geogToProj=d;b.projGeog=function(e,w,y,C){switch(C){case c.PeDefs.PE_TRANSFORM_P_TO_G:return h(e,w,y);case c.PeDefs.PE_TRANSFORM_G_TO_P:return d(e,w,y)}return 0};b.projToGeog=h;b.projToGeogCenter=k})(c.PeCSTransformations||(c.PeCSTransformations={}));c.PeDefs=void 0;(function(b){b.init=function(){b.PE_BUFFER_MAX=c._pe.PeDefs.prototype.PE_BUFFER_MAX;b.PE_NAME_MAX=c._pe.PeDefs.prototype.PE_NAME_MAX;b.PE_MGRS_MAX=c._pe.PeDefs.prototype.PE_MGRS_MAX;b.PE_USNG_MAX=c._pe.PeDefs.prototype.PE_USNG_MAX;
b.PE_DD_MAX=c._pe.PeDefs.prototype.PE_DD_MAX;b.PE_DDM_MAX=c._pe.PeDefs.prototype.PE_DDM_MAX;b.PE_DMS_MAX=c._pe.PeDefs.prototype.PE_DMS_MAX;b.PE_UTM_MAX=c._pe.PeDefs.prototype.PE_UTM_MAX;b.PE_PARM_MAX=c._pe.PeDefs.prototype.PE_PARM_MAX;b.PE_TYPE_NONE=c._pe.PeDefs.prototype.PE_TYPE_NONE;b.PE_TYPE_GEOGCS=c._pe.PeDefs.prototype.PE_TYPE_GEOGCS;b.PE_TYPE_PROJCS=c._pe.PeDefs.prototype.PE_TYPE_PROJCS;b.PE_TYPE_GEOGTRAN=c._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;b.PE_TYPE_COORDSYS=c._pe.PeDefs.prototype.PE_TYPE_COORDSYS;
b.PE_TYPE_UNIT=c._pe.PeDefs.prototype.PE_TYPE_UNIT;b.PE_TYPE_LINUNIT=c._pe.PeDefs.prototype.PE_TYPE_LINUNIT;b.PE_STR_OPTS_NONE=c._pe.PeDefs.prototype.PE_STR_OPTS_NONE;b.PE_STR_AUTH_NONE=c._pe.PeDefs.prototype.PE_STR_AUTH_NONE;b.PE_STR_AUTH_TOP=c._pe.PeDefs.prototype.PE_STR_AUTH_TOP;b.PE_STR_NAME_CANON=c._pe.PeDefs.prototype.PE_STR_NAME_CANON;b.PE_PARM_X0=c._pe.PeDefs.prototype.PE_PARM_X0;b.PE_PARM_ND=c._pe.PeDefs.prototype.PE_PARM_ND;b.PE_TRANSFORM_1_TO_2=c._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;
b.PE_TRANSFORM_2_TO_1=c._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;b.PE_TRANSFORM_P_TO_G=c._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;b.PE_TRANSFORM_G_TO_P=c._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;b.PE_HORIZON_RECT=c._pe.PeDefs.prototype.PE_HORIZON_RECT;b.PE_HORIZON_POLY=c._pe.PeDefs.prototype.PE_HORIZON_POLY;b.PE_HORIZON_LINE=c._pe.PeDefs.prototype.PE_HORIZON_LINE;b.PE_HORIZON_DELTA=c._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(c.PeDefs||(c.PeDefs={}));c.PeFactory=void 0;(function(b){function d(w,y){let C=
null,B=h[w];B||(B={},h[w]=B);B.hasOwnProperty(String(y))?C=B[y]:(w=c._pe.PeFactory.prototype.factoryByType(w,y),c._pe.compare(w,c._pe.NULL)||(C=w,B[y]=C));return C=e(C)}const h={},k={},e=w=>{if(w){const y=w.getType();switch(y){case c.PeDefs.PE_TYPE_GEOGCS:w=c._pe.castObject(w,c._pe.PeGeogcs);break;case c.PeDefs.PE_TYPE_PROJCS:w=c._pe.castObject(w,c._pe.PeProjcs);break;case c.PeDefs.PE_TYPE_GEOGTRAN:w=c._pe.castObject(w,c._pe.PeGeogtran);break;default:y&c.PeDefs.PE_TYPE_UNIT&&(w=c._pe.castObject(w,
c._pe.PeUnit))}}return w};b.initialize=function(){c._pe.PeFactory.prototype.initialize(null)};b.coordsys=function(w){return d(c.PeDefs.PE_TYPE_COORDSYS,w)};b.factoryByType=d;b.fromString=function(w,y){let C=null,B=k[w];B||(B={},k[w]=B);B.hasOwnProperty(y)?C=B[y]:(w=c._pe.PeFactory.prototype.fromString(w,y),c._pe.compare(w,c._pe.NULL)||(C=w,B[y]=C));return C=e(C)};b.geogcs=function(w){return d(c.PeDefs.PE_TYPE_GEOGCS,w)};b.geogtran=function(w){return d(c.PeDefs.PE_TYPE_GEOGTRAN,w)};b.getCode=function(w){return c._pe.PeFactory.prototype.getCode(w)};
b.projcs=function(w){return d(c.PeDefs.PE_TYPE_PROJCS,w)};b.unit=function(w){return d(c.PeDefs.PE_TYPE_UNIT,w)}})(c.PeFactory||(c.PeFactory={}));c.PeGCSExtent=null;c.PeGTlistExtended=void 0;(function(b){let d;b.init=function(){b.PE_GTLIST_OPTS_COMMON=c._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;d=c._pe._pe_getPeGTlistExtendedEntrySize()};b.getGTlist=function(h,k,e,w,y,C){let B=null;const A=new c._pe.PeInteger(C);try{const D=c._pe.PeGTlistExtended.prototype.getGTlist(h,k,e,w,y,A);if(C=A.val)if(B=
[D],1<C){const E=c._pe.getPointer(D);for(h=1;h<C;h++)B.push(c._pe.wrapPointer(E+d*h,c._pe.PeGTlistExtendedEntry))}}finally{c._pe.destroy(A)}return B}})(c.PeGTlistExtended||(c.PeGTlistExtended={}));c.PeGTlistExtendedEntry=void 0;(function(b){b.destroy=function(d){if(d&&d.length){for(const h of d)f(h),h.getEntries().forEach(k=>{f(k);k=k.getGeogtran();f(k);k.getParameters().forEach(f);[k.getGeogcs1(),k.getGeogcs2()].forEach(e=>{f(e);const w=e.getDatum();f(w);f(w.getSpheroid());f(e.getPrimem());f(e.getUnit())})});
c._pe.PeGTlistExtendedEntry.prototype.Delete(d[0])}}})(c.PeGTlistExtendedEntry||(c.PeGTlistExtendedEntry={}));c.PeGTTransformations=void 0;(function(b){b.geogToGeog=function(d,h,k,e,w){c._pe.ensureCache.prepare();var y=l(k);const C=k===y;y=c._pe.ensureFloat64(y);let B=0;e&&(B=c._pe.ensureFloat64(e));(d=c._pe._pe_geog_to_geog(c._pe.getPointer(d),h,y,B,w))&&t(k,h,y,C);return d}})(c.PeGTTransformations||(c.PeGTTransformations={}));c.PeNotationDms=void 0;(function(b){const d=(k,e,w,y,C,B)=>{c._pe.ensureCache.prepare();
switch(k){case "dd":var A=c._pe._pe_geog_to_dd;var D=c.PeDefs.PE_DD_MAX;break;case "ddm":A=c._pe._pe_geog_to_ddm;D=c.PeDefs.PE_DDM_MAX;break;case "dms":A=c._pe._pe_geog_to_dms,D=c.PeDefs.PE_DMS_MAX}k=0;e&&(k=c._pe.getPointer(e));e=l(y);e=c._pe.ensureFloat64(e);D=q(w,D);y=c._pe.ensureInt32(D);if(C=A(k,w,e,C,y))for(A=0;A<w;A++)B[A]=c._pe.UTF8ToString(D[A]);return C},h=(k,e,w,y,C)=>{c._pe.ensureCache.prepare();switch(k){case "dd":var B=c._pe._pe_dd_to_geog;break;case "ddm":B=c._pe._pe_ddm_to_geog;break;
case "dms":B=c._pe._pe_dms_to_geog}k=0;e&&(k=c._pe.getPointer(e));e=y.map(A=>c._pe.ensureString(A));y=c._pe.ensureInt32(e);e=c._pe.ensureFloat64(Array(2*w));(B=B(k,w,y,e))&&t(C,w,e);return B};b.geog_to_dms=function(k,e,w,y,C){return d("dms",k,e,w,y,C)};b.dms_to_geog=function(k,e,w,y){return h("dms",k,e,w,y)};b.geog_to_ddm=function(k,e,w,y,C){return d("ddm",k,e,w,y,C)};b.ddm_to_geog=function(k,e,w,y){return h("ddm",k,e,w,y)};b.geog_to_dd=function(k,e,w,y,C){return d("dd",k,e,w,y,C)};b.dd_to_geog=function(k,
e,w,y){return h("dd",k,e,w,y)}})(c.PeNotationDms||(c.PeNotationDms={}));c.PeNotationMgrs=void 0;(function(b){b.init=function(){b.PE_MGRS_STYLE_NEW=c._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;b.PE_MGRS_STYLE_OLD=c._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;b.PE_MGRS_STYLE_AUTO=c._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;b.PE_MGRS_180_ZONE_1_PLUS=c._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;b.PE_MGRS_ADD_SPACES=c._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};b.geog_to_mgrs_extended=
function(d,h,k,e,w,y,C){c._pe.ensureCache.prepare();let B=0;d&&(B=c._pe.getPointer(d));d=l(k);k=c._pe.ensureFloat64(d);d=q(h,c.PeDefs.PE_MGRS_MAX);const A=c._pe.ensureInt32(d);if(e=c._pe._pe_geog_to_mgrs_extended(B,h,k,e,w,y,A))for(w=0;w<h;w++)C[w]=c._pe.UTF8ToString(d[w]);return e};b.mgrs_to_geog_extended=function(d,h,k,e,w){c._pe.ensureCache.prepare();let y=0;d&&(y=c._pe.getPointer(d));d=k.map(C=>c._pe.ensureString(C));k=c._pe.ensureInt32(d);d=c._pe.ensureFloat64(Array(2*h));(e=c._pe._pe_mgrs_to_geog_extended(y,
h,k,e,d))&&t(w,h,d);return e}})(c.PeNotationMgrs||(c.PeNotationMgrs={}));c.PeNotationUsng=void 0;(function(b){b.geog_to_usng=function(d,h,k,e,w,y,C){c._pe.ensureCache.prepare();let B=0;d&&(B=c._pe.getPointer(d));d=l(k);k=c._pe.ensureFloat64(d);d=q(h,c.PeDefs.PE_MGRS_MAX);const A=c._pe.ensureInt32(d);if(e=c._pe._pe_geog_to_usng(B,h,k,e,w,y,A))for(w=0;w<h;w++)C[w]=c._pe.UTF8ToString(d[w]);return e};b.usng_to_geog=function(d,h,k,e){c._pe.ensureCache.prepare();var w=0;d&&(w=c._pe.getPointer(d));d=k.map(y=>
c._pe.ensureString(y));k=c._pe.ensureInt32(d);d=c._pe.ensureFloat64(Array(2*h));(w=c._pe._pe_usng_to_geog(w,h,k,d))&&t(e,h,d);return w}})(c.PeNotationUsng||(c.PeNotationUsng={}));c.PeNotationUtm=void 0;(function(b){b.init=function(){b.PE_UTM_OPTS_NONE=c._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;b.PE_UTM_OPTS_ADD_SPACES=c._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;b.PE_UTM_OPTS_NS=c._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};b.geog_to_utm=function(d,h,k,e,w){c._pe.ensureCache.prepare();
var y=0;d&&(y=c._pe.getPointer(d));d=l(k);k=c._pe.ensureFloat64(d);d=q(h,c.PeDefs.PE_UTM_MAX);const C=c._pe.ensureInt32(d);if(e=c._pe._pe_geog_to_utm(y,h,k,e,C))for(y=0;y<h;y++)w[y]=c._pe.UTF8ToString(d[y]);return e};b.utm_to_geog=function(d,h,k,e,w){c._pe.ensureCache.prepare();let y=0;d&&(y=c._pe.getPointer(d));d=k.map(C=>c._pe.ensureString(C));k=c._pe.ensureInt32(d);d=c._pe.ensureFloat64(Array(2*h));(e=c._pe._pe_utm_to_geog(y,h,k,e,d))&&t(w,h,d);return e}})(c.PeNotationUtm||(c.PeNotationUtm={}));
c.PePCSInfo=void 0;(function(b){const d=new Map;b.init=function(){b.PE_PCSINFO_OPTION_NONE=c._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;b.PE_PCSINFO_OPTION_DOMAIN=c._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;b.PE_POLE_OUTSIDE_BOUNDARY=c._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;b.PE_POLE_POINT=c._pe.PePCSInfo.prototype.PE_POLE_POINT};b.generate=function(h,k=b.PE_PCSINFO_OPTION_DOMAIN){let e,w;d.has(h)&&(w=d.get(h),w[k]&&(e=w[k]));e||(e=c._pe.PePCSInfo.prototype.generate(h,k),w||(w=
[],d.set(h,w)),w[k]=e);return e}})(c.PePCSInfo||(c.PePCSInfo={}));c.PeVersion=void 0;(function(b){b.version_string=function(){return c._pe.PeVersion.prototype.version_string()}})(c.PeVersion||(c.PeVersion={}));var a=Object.freeze({__proto__:null,get _pe(){return c._pe},isLoaded:u,isSupported:m,load:v,get PeCSTransformations(){return c.PeCSTransformations},get PeDefs(){return c.PeDefs},get PeFactory(){return c.PeFactory},get PeGCSExtent(){return c.PeGCSExtent},get PeGTlistExtended(){return c.PeGTlistExtended},
get PeGTlistExtendedEntry(){return c.PeGTlistExtendedEntry},get PeGTTransformations(){return c.PeGTTransformations},get PeNotationDms(){return c.PeNotationDms},get PeNotationMgrs(){return c.PeNotationMgrs},get PeNotationUsng(){return c.PeNotationUsng},get PeNotationUtm(){return c.PeNotationUtm},get PePCSInfo(){return c.PePCSInfo},get PeVersion(){return c.PeVersion},_init:p});c._init=p;c.isLoaded=u;c.isSupported=m;c.load=v;c.pe=a})},"esri/geometry/support/geodesicConstants":function(){define(["exports",
"./Ellipsoid"],function(n,c){const z=Math.PI/180;var x=c.earth.radius;const r=c.earth.eccentricitySquared;x={a1:x*r,a2:x*r*x*r,a3:x*r*r/2,a4:x*r*x*r*2.5,a5:x*r+x*r*r/2,a6:1-r};c={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:c.earth.radius,f:c.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:c.moon.radius,f:c.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:c.mars.radius,f:c.mars.flattening},104906:{a:6200,
f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,
f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},
104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:c.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};
n.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;n.earthEllipsoidConstants=x;n.spheroids=c;n.toRadians=z;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(n){return function(){function c(x){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(x&&x.steps)for(const r of x.steps)r instanceof n?this.steps.push(r):this.steps.push(new n({wkid:r.wkid,wkt:r.wkt,isInverse:r.isInverse}))}
c.cacheKey=function(x,r){return[void 0!==x.wkid&&null!==x.wkid?x.wkid.toString():"-1",void 0!==x.wkt&&null!==x.wkt?x.wkt.toString():"",void 0!==r.wkid&&null!==r.wkid?r.wkid.toString():"-1",void 0!==r.wkt&&null!==r.wkt?r.wkt.toString():""].join()};c.fromGE=function(x){const r=new c;let u="";for(const m of x.steps)x=n.fromGE(m),r.steps.push(x),u+=x.uid.toString()+",";r._cached_projection={};r._gtlistentry=null;r._chain=u;return r};var z=c.prototype;z.getInverse=function(){const x=new c;x.steps=[];for(let r=
this.steps.length-1;0<=r;r--)x.steps.push(this.steps[r].getInverse());return x};z.getGTListEntry=function(){let x="";for(const r of this.steps)x+=r.uid.toString()+",";x!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=x);return this._gtlistentry};z.assignCachedGe=function(x,r,u){this._cached_projection[c.cacheKey(x,r)]=u};z.getCachedGeTransformation=function(x,r){let u="";for(const m of this.steps)u+=m.uid.toString()+",";u!==this._chain&&(this._gtlistentry=null,this._cached_projection=
{},this._chain=u);x=this._cached_projection[c.cacheKey(x,r)];return void 0===x?null:x};return c}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(n){let c=0;return function(){function z(x=null){this.uid=c++;x?(this._wkt=void 0!==x.wkt?x.wkt:null,this._wkid=void 0!==x.wkid?x.wkid:-1,this._isInverse=void 0!==x.isInverse?!0===x.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}z.fromGE=function(x){const r=new z;
r._wkt=x.wkt;r._wkid=x.wkid;r._isInverse=x.isInverse;return r};z.prototype.getInverse=function(){const x=new z;x._wkt=this.wkt;x._wkid=this._wkid;x._isInverse=!this.isInverse;return x};n._createClass(z,[{key:"wkt",get:function(){return this._wkt},set:function(x){this._wkt=x;this.uid=c++}},{key:"wkid",get:function(){return this._wkid},set:function(x){this._wkid=x;this.uid=c++}},{key:"isInverse",get:function(){return this._isInverse},set:function(x){this._isInverse=x;this.uid=c++}}]);return z}()})},
"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(n){let c=function(m,v,p){this.x=m;this.y=v;this.spatialReference=p;this.m=this.z=void 0},z=function(m,v,p,f){this.rings=m;this.spatialReference=v;this.hasM=this.hasZ=void 0;p&&(this.hasZ=p);f&&(this.hasM=f)},x=function(m,v,p,f){this.paths=m;this.spatialReference=v;this.hasM=this.hasZ=void 0;p&&(this.hasZ=p);f&&(this.hasM=f)},r=function(m,v,p,f){this.points=m;this.spatialReference=v;this.hasM=this.hasZ=void 0;p&&(this.hasZ=
p);f&&(this.hasM=f)},u=function(m,v,p,f,q){this.xmin=m;this.ymin=v;this.xmax=p;this.ymax=f;this.spatialReference=q;this.mmax=this.mmin=this.zmax=this.zmin=void 0};n.jsonAdapter={convertToGEGeometry:function(m,v){return null==v?null:m.convertJSONToGeometry(v)},exportPoint:function(m,v,p){p=new c(m.getPointX(v),m.getPointY(v),p);const f=m.hasZ(v),q=m.hasM(v);f&&(p.z=m.getPointZ(v));q&&(p.m=m.getPointM(v));return p},exportPolygon:function(m,v,p){return new z(m.exportPaths(v),p,m.hasZ(v),m.hasM(v))},
exportPolyline:function(m,v,p){return new x(m.exportPaths(v),p,m.hasZ(v),m.hasM(v))},exportMultipoint:function(m,v,p){return new r(m.exportPoints(v),p,m.hasZ(v),m.hasM(v))},exportExtent:function(m,v,p){var f=m.hasZ(v);const q=m.hasM(v);p=new u(m.getXMin(v),m.getYMin(v),m.getXMax(v),m.getYMax(v),p);f&&(f=m.getZExtent(v),p.zmin=f.vmin,p.zmax=f.vmax);q&&(m=m.getMExtent(v),p.mmin=m.vmin,p.mmax=m.vmax);return p}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],
function(n){n.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,
supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./AttributesBuilder ./attributeSupport ./projectionSupport ./timeSupport ./utils ../../support/fieldUtils ../../../smartMapping/statistics/support/utils ../../../support/arcadeOnDemand".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t){function g(h){return h.substr(24,12)+h.substr(19,4)+h.substr(16,2)+h.substr(14,2)+h.substr(11,2)+h.substr(9,2)+h.substr(6,2)+h.substr(4,2)+h.substr(2,2)+h.substr(0,2)}function a(h,k,e,w){if(e&&"esriFieldTypeDate"===e.type){const y=(new Date(h)).getTime(),C=(new Date(k)).getTime();if(!isNaN(y)&&!isNaN(C))return w?C-y:y-C}return"number"===typeof h&&"number"===typeof k?w?k-h:h-k:"string"===typeof h&&"string"===typeof k?(h=h.toUpperCase(),k=k.toUpperCase(),!e||"esriFieldTypeGUID"!==
e.type&&"esriFieldTypeGlobalID"!==e.type?w=(w?h>k:h<k)?-1:(w?h<k:h>k)?1:0:(e=g(h),k=g(k),w=(w?e>k:e<k)?-1:(w?e<k:e>k)?1:0),w):w?1:-1}function b(h,k,e,w,y,C){y-=e;C-=w;h=Math.min(1,Math.max(0,((h-e)*y+(k-w)*C)/(y*y+C*C)));return{x:e+y*h,y:w+C*h}}function d(h,k){return h?k?4:3:k?3:2}return function(){function h(e,w,y){this.items=e;this.queryGeometry=w;this.definitionExpression=y.definitionExpression;this.geometryType=y.geometryType;this.hasM=y.hasM;this.hasZ=y.hasZ;this.objectIdField=y.objectIdField;
this.spatialReference=y.spatialReference;this.fieldsIndex=y.fieldsIndex;this.timeInfo=y.timeInfo;this.featureAdapter=y.featureAdapter;this.aggregateAdapter=y.aggregateAdapter}var k=h.prototype;k.createQueryResponseForCount=function(e){const w=new u(e,this.featureAdapter,this.fieldsIndex);if(!e.outStatistics)return w.countDistinctValues(this.items);const {groupByFieldsForStatistics:y,having:C}=e;if(null==y||!y.length)return 1;const B=new Map,A=new Map,D=new Set;e=e.outStatistics;for(const G of e){({statisticType:e}=
G);e="exceedslimit"!==e?G.onStatisticField:void 0;if(!A.has(e)){var E=[];for(const I of y){const L=this._getAttributeValues(w,I,B);E.push(L)}A.set(e,this._calculateUniqueValues(E,w.returnDistinctValues))}e=A.get(e);for(const I in e){const {data:L,items:J}=e[I];E=L.join(",");C&&!w.validateItems(J,C)||D.add(E)}}return D.size};k.createQueryResponse=function(e){let w;w=e.outStatistics?e.outStatistics.some(y=>"exceedslimit"===y.statisticType)?this._createExceedsLimitQueryResponse(e):this._createStatisticsQueryResponse(e):
this._createFeatureQueryResponse(e);e.returnQueryGeometry&&(x.isValid(e.outSR)&&!x.equals(this.queryGeometry.spatialReference,e.outSR)?w.queryGeometry=f.cleanFromGeometryEngine({spatialReference:e.outSR,...v.project(this.queryGeometry,this.queryGeometry.spatialReference,e.outSR)}):w.queryGeometry=f.cleanFromGeometryEngine({spatialReference:e.outSR,...this.queryGeometry}));return w};k.createSnappingResponse=function(e,w){const y=this.featureAdapter,C=d(this.hasZ,this.hasM),{x:B,y:A}=e.point,D="number"===
typeof e.distance?e.distance:e.distance.x,E="number"===typeof e.distance?e.distance:e.distance.y,G={candidates:[]},I="esriGeometryPolygon"===this.geometryType;w=this.getPointCreator(e.point,this.spatialReference,w);for(const Q of this.items){var L=y.getGeometry(Q);if(c.isNone(L))continue;const {coords:S,lengths:X}=L;if(e.types&1){L=0;for(var J=0;J<X.length;J++){var F=X[J];for(var K=0;K<F;K++,L+=C){var M=S[L],R=S[L+1];if(K!==F-1){const aa=S[L+C],ma=S[L+C+1],{x:ra,y:za}=b(B,A,M,R,aa,ma);var T=(B-ra)/
D;const wa=(A-za)/E;T=T*T+wa*wa;1>=T&&G.candidates.push({type:"edge",objectId:y.getObjectId(Q),distance:Math.sqrt(T),target:w(ra,za),start:w(M,R),end:w(aa,ma)})}}}}if(e.types&2)for(L=I?S.length-C:S.length,J=0;J<L;J+=C)F=S[J],K=S[J+1],M=(B-F)/D,R=(A-K)/E,M=M*M+R*R,1>=M&&G.candidates.push({type:"vertex",objectId:y.getObjectId(Q),distance:Math.sqrt(M),target:w(F,K)})}G.candidates.sort((Q,S)=>Q.distance-S.distance);return G};k.getPointCreator=function(e,w,y){const C=c.isSome(y)&&!x.equals(w,y)?B=>v.project(B,
w,y):B=>B;return null!=e.z&&null!=e.m?(B,A)=>C({x:B,y:A,z:e.z,m:e.m}):null!=e.z?(B,A)=>C({x:B,y:A,z:e.z}):null!=e.m?(B,A)=>C({x:B,y:A,m:e.m}):(B,A)=>C({x:B,y:A})};k.executeAttributesQuery=function(e){var w=m.getWhereClause(e.where,this.fieldsIndex);if(!w)return Promise.resolve(this);if(w.isStandardized){let y=0;const C=[];for(const B of this.items)w.testFeature(B,this.featureAdapter)&&(C[y++]=B);w=new h(C,this.queryGeometry,this);w.definitionExpression=e.where;return Promise.resolve(w)}return Promise.reject(new TypeError("Where clause is not standardized"))};
k.executeAggregateIdsQuery=function(e){if(!e.aggregateIds||!e.aggregateIds.length||c.isNone(this.aggregateAdapter))return Promise.resolve(this);const w=new Set;for(const C of e.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(C).forEach(B=>w.add(B));const y=this.featureAdapter.getObjectId;return Promise.resolve(new h(this.items.filter(C=>w.has(y(C))),this.queryGeometry,this))};k.executeObjectIdsQuery=function(e){if(!e.objectIds||!e.objectIds.length)return Promise.resolve(this);const w=new Set(e.objectIds),
y=this.featureAdapter.getObjectId;return Promise.resolve(new h(this.items.filter(C=>w.has(y(C))),this.queryGeometry,this))};k.executeTimeQuery=function(e){e=p.getTimeOperator(this.timeInfo,e.timeExtent,this.featureAdapter);if(!c.isSome(e))return Promise.resolve(this);e=this.items.filter(e);return Promise.resolve(new h(e,this.queryGeometry,this))};k.filterLatest=function(){const {trackIdField:e,startTimeField:w,endTimeField:y}=this.timeInfo;var C=y||w;const B=new Map,A=this.featureAdapter.getAttribute;
for(const D of this.items){const E=A(D,e),G=A(D,C),I=B.get(E);(!I||G>A(I,C))&&B.set(E,D)}C=Array.from(B.values());return Promise.resolve(new h(C,this.queryGeometry,this))};k.project=function(){var e=n._asyncToGenerator(function*(w){if(!w||x.equals(this.spatialReference,w))return this;const y=this.featureAdapter,C=(yield v.projectMany(this.items.map(B=>f.getGeometry(this.geometryType,this.hasZ,this.hasM,y.getGeometry(B))),this.spatialReference,w)).map((B,A)=>y.cloneWithGeometry(this.items[A],r.convertFromGeometry(B,
this.hasZ,this.hasM)));return new h(C,this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:w,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})});return function(w){return e.apply(this,arguments)}}();k.createSummaryStatisticsResponse=function(){var e=n._asyncToGenerator(function*(w,y){const {field:C,normalizationField:B,normalizationType:A,
normalizationTotal:D,minValue:E,maxValue:G}=y;var I=new u(w,this.featureAdapter,this.fieldsIndex);w=this.fieldsIndex.isDateField(C);y=y.valueExpression?yield this._getAttributeExpressionValues(I,y.valueExpression,y.viewInfoParams):this._getAttributeNormalizedValues(I,{field:C,normalizationField:B,normalizationType:A,normalizationTotal:D});I=l.isNullCountSupported({normalizationType:A,normalizationField:B,minValue:E,maxValue:G});y=q.isStringField(this.fieldsIndex.get(C))?l.calculateStringStatistics({values:y,
supportsNullCount:I}):l.calculateStatistics({values:y,minValue:E,maxValue:G,useSampleStdDev:!A,supportsNullCount:I});return l.processStatsResult(y,w)});return function(w,y){return e.apply(this,arguments)}}();k._sortFeatures=function(e,w,y){if(1<e.length&&w&&w.length)for(const C of w.reverse()){w=C.split(" ");const B=w[0],A=this.fieldsIndex.get(B),D=w[1]&&"desc"===w[1].toLowerCase();e.sort((E,G)=>{E=y(E,B,A);G=y(G,B,A);return a(E,G,A,D)})}};k._createFeatureQueryResponse=function(e){const w=this.items,
{geometryType:y,hasM:C,hasZ:B,objectIdField:A,spatialReference:D}=this,{outFields:E,outSR:G,quantizationParameters:I,resultRecordCount:L,resultOffset:J,returnZ:F,returnM:K}=e,M=null!=L?w.length>(J||0)+L:!1,R=E&&(-1<E.indexOf("*")?[...this.fieldsIndex.fields]:E.map(T=>this.fieldsIndex.get(T)));return{exceededTransferLimit:M,features:this._createFeatures(e,w),fields:R,geometryType:y,hasM:C&&K,hasZ:B&&F,objectIdFieldName:A,spatialReference:f.cleanFromGeometryEngine(G?G:D),transform:I&&z.toQuantizationTransform(I)||
null}};k._createFeatures=function(e,w){const y=new u(e,this.featureAdapter,this.fieldsIndex),{hasM:C,hasZ:B}=this,{orderByFields:A,quantizationParameters:D,returnGeometry:E,returnCentroid:G,maxAllowableOffset:I,resultOffset:L,resultRecordCount:J,returnZ:F=!1,returnM:K=!1}=e,M=B&&F,R=C&&K;e=[];var T=0;w=[...w];this._sortFeatures(w,A,(X,aa,ma)=>y.getFieldValue(X,aa,ma));if(E||G){var Q=z.toQuantizationTransform(D);if(E&&!G)for(var S of w)e[T++]={attributes:y.getAttributes(S),geometry:f.getGeometry(this.geometryType,
this.hasZ,this.hasM,this.featureAdapter.getGeometry(S),I,Q,M,R)};else if(!E&&G)for(const X of w)e[T++]={attributes:y.getAttributes(X),centroid:f.transformCentroid(this,this.featureAdapter.getCentroid(X,this),Q)};else for(const X of w)e[T++]={attributes:y.getAttributes(X),centroid:f.transformCentroid(this,this.featureAdapter.getCentroid(X,this),Q),geometry:f.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(X),I,Q,M,R)}}else for(Q of w)(S=y.getAttributes(Q))&&(e[T++]=
{attributes:S});T=L||0;null!=J&&(e=e.slice(T,Math.min(e.length,T+J)));return e};k._createExceedsLimitQueryResponse=function(e){var w=!1;let y=Number.POSITIVE_INFINITY,C=Number.POSITIVE_INFINITY;w=Number.POSITIVE_INFINITY;for(const B of e.outStatistics)if("exceedslimit"===B.statisticType){y=null!=B.maxPointCount?B.maxPointCount:Number.POSITIVE_INFINITY;C=null!=B.maxRecordCount?B.maxRecordCount:Number.POSITIVE_INFINITY;w=null!=B.maxVertexCount?B.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===
this.geometryType)w=this.items.length>y;else if(this.items.length>C)w=!0;else{e=this.hasZ?this.hasM?4:3:this.hasM?3:2;const B=this.featureAdapter;w=this.items.reduce((A,D)=>{D=B.getGeometry(D);return A+(c.isSome(D)&&D.coords.length||0)},0)/e>w}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(w)}}]}};k._createStatisticsQueryResponse=function(e){var w={attributes:{}};
const y=[],C=new Map,B=new Map,A=new Map,D=new Map,E=new u(e,this.featureAdapter,this.fieldsIndex);var G=e.outStatistics;const {groupByFieldsForStatistics:I,having:L,orderByFields:J}=e;e=I&&I.length;const F=!!e,K=F&&I[0],M=F&&!this.fieldsIndex.get(K);for(const X of G){const {outStatisticFieldName:aa,statisticType:ma}=X;G=X;var R="exceedslimit"!==ma?X.onStatisticField:void 0;const ra="percentile_disc"===ma||"percentile_cont"===ma,za=F&&1===e&&(R===K||M)&&"count"===ma;if(F){if(!A.has(R)){var T=[];for(const wa of I){var Q=
this._getAttributeValues(E,wa,C);T.push(Q)}A.set(R,this._calculateUniqueValues(T,E.returnDistinctValues))}T=A.get(R);for(const wa in T){const {count:va,data:Fa,items:Ba,itemPositions:N}=T[wa];Q=Fa.join(",");if(!L||E.validateItems(Ba,L)){const U=D.get(Q)||{attributes:{}};var S=null;if(za)S=va;else{const ia=this._getAttributeValues(E,R,C);S=N.map(P=>ia[P]);S=ra&&"statisticParameters"in G?this._getPercentileValue(G,S):this._getStatisticValue(G,S,null,E.returnDistinctValues)}U.attributes[aa]=S;I.forEach((ia,
P)=>U.attributes[this.fieldsIndex.get(ia)?ia:`EXPR_${P+1}`]=Fa[P]);D.set(Q,U)}}}else R=this._getAttributeValues(E,R,C),w.attributes[aa]=ra&&"statisticParameters"in G?this._getPercentileValue(G,R):this._getStatisticValue(G,R,B,E.returnDistinctValues);y.push({name:aa,alias:aa,type:"esriFieldTypeDouble"})}w=F?Array.from(D.values()):[w];this._sortFeatures(w,J,(X,aa)=>X.attributes[aa]);return{fields:y,features:w}};k._getStatisticValue=function(e,w,y,C){const {onStatisticField:B,statisticType:A}=e;e=null;
e=null!=y&&y.has(B)?y.get(B):q.isStringField(this.fieldsIndex.get(B))?l.calculateStringStatistics({values:w,returnDistinct:C}):l.calculateStatistics({values:w,minValue:null,maxValue:null,useSampleStdDev:!0});y&&y.set(B,e);return e["var"===A?"variance":A]};k._getPercentileValue=function(e,w){const {onStatisticField:y,statisticParameters:C,statisticType:B}=e,{value:A,orderBy:D}=C,E="desc"===D,G=this.fieldsIndex.get(y);e=[...w].filter(I=>null!=I).sort((I,L)=>a(I,L,G,E));return this._calculatePercentile(e,
A,"percentile_disc"===B)};k._getAttributeValues=function(e,w,y){if(y.has(w))return y.get(w);const C=this.fieldsIndex.get(w),B=this.items.map(A=>e.getFieldValue(A,w,C));y.set(w,B);return B};k._getAttributeNormalizedValues=function(e,w){return this.items.map(y=>e.getNormalizedValue(y,{field:w.field,fieldInfo:this.fieldsIndex.get(w.field),normalizationField:w.normalizationField,normalizationFieldInfo:this.fieldsIndex.get(w.normalizationField),normalizationType:w.normalizationType,normalizationTotal:w.normalizationTotal}))};
k._getAttributeExpressionValues=function(){var e=n._asyncToGenerator(function*(w,y,C){const {arcadeUtils:B}=yield t.loadArcade(),A=B.createFunction(y),D=C&&B.getViewInfo(C);return this.items.map(E=>w.getExpressionValue(E,{compiledFunc:A,viewInfo:D},B))});return function(w,y,C){return e.apply(this,arguments)}}();k._calculateUniqueValues=function(e,w){const y={},C=this.items,B=C.length;for(let A=0;A<B;A++){const D=C[A],E=[];for(const I of e)E.push(I[A]);const G=E.join(",");w?null==y[G]&&(y[G]={count:1,
data:E,items:[D],itemPositions:[A]}):null==y[G]?y[G]={count:1,data:E,items:[D],itemPositions:[A]}:(y[G].count++,y[G].items.push(D),y[G].itemPositions.push(A))}return y};k._calculatePercentile=function(e,w,y){if(0===e.length)return null;if(0>=w)return e[0];if(1<=w)return e[e.length-1];var C=(e.length-1)*w,B=Math.floor(C);w=B+1;C%=1;B=e[B];const A=e[w];return w>=e.length||y||"string"===typeof B||"string"===typeof A?B:B*(1-C)+A*C};n._createClass(h,[{key:"size",get:function(){return this.items.length}}]);
return h}()})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe","./jsonUtils"],function(n,c,z){function x({scale:E,translate:G},I){return Math.round((I-G[0])/E[0])}function r({scale:E,translate:G},I){return Math.round((G[1]-I)/E[1])}function u(E,G,I){const L=[];let J,F,K,M;for(let R=0;R<I.length;R++){const T=I[R];if(0<R){if(K=x(E,T[0]),M=r(E,T[1]),K!==J||M!==F)L.push(G(T,K-J,M-F)),J=K,F=M}else J=x(E,T[0]),F=r(E,T[1]),L.push(G(T,J,F))}return 0<L.length?L:null}
function m(E,G,I,L){return u(E,I?L?D:A:L?A:B,G)}function v(E,G,I,L){const J=[];I=I?L?D:A:L?A:B;for(L=0;L<G.length;L++){const F=u(E,I,G[L]);F&&3<=F.length&&J.push(F)}return J.length?J:null}function p(E,G,I,L){const J=[];I=I?L?D:A:L?A:B;for(L=0;L<G.length;L++){const F=u(E,I,G[L]);F&&2<=F.length&&J.push(F)}return J.length?J:null}function f({scale:E,translate:G},I){return I*E[0]+G[0]}function q({scale:E,translate:G},I){return G[1]-I*E[1]}function l(E,G,I){const L=Array(I.length);if(!I.length)return L;
const [J,F]=E.scale;let K=f(E,I[0][0]);E=q(E,I[0][1]);L[0]=G(I[0],K,E);for(let M=1;M<I.length;M++){const R=I[M];K+=R[0]*J;E-=R[1]*F;L[M]=G(R,K,E)}return L}function t(E,G,I){const L=Array(I.length);for(let J=0;J<I.length;J++)L[J]=l(E,G,I[J]);return L}function g(E,G,I,L){return l(E,I?L?D:A:L?A:B,G)}function a(E,G,I,L){return t(E,I?L?D:A:L?A:B,G)}function b(E,G,I,L){return t(E,I?L?D:A:L?A:B,G)}function d(E,G,I){let [L,J]=I[0],F=Math.min(L,G[0]),K=Math.min(J,G[1]),M=Math.max(L,G[2]);G=Math.max(J,G[3]);
for(let R=1;R<I.length;R++){const [T,Q]=I[R];L+=T;J+=Q;0>T&&(F=Math.min(F,L));0<T&&(M=Math.max(M,L));0>Q?K=Math.min(K,J):0<Q&&(G=Math.max(G,J))}E[0]=F;E[1]=K;E[2]=M;E[3]=G;return E}function h(E,G){if(!G.length)return null;E[0]=E[1]=Number.POSITIVE_INFINITY;E[2]=E[3]=Number.NEGATIVE_INFINITY;for(let I=0;I<G.length;I++)d(E,E,G[I]);return E}function k(E,G,I,L,J){G.xmin=x(E,I.xmin);G.ymin=r(E,I.ymin);G.xmax=x(E,I.xmax);G.ymax=r(E,I.ymax);G!==I&&(L&&(G.zmin=I.zmin,G.zmax=I.zmax),J&&(G.mmin=I.mmin,G.mmax=
I.mmax));return G}function e(E,G,I,L,J){G.points=m(E,I.points,L,J);return G}function w(E,G,I,L,J){G.x=x(E,I.x);G.y=r(E,I.y);G!==I&&(L&&(G.z=I.z),J&&(G.m=I.m));return G}function y(E,G,I,L,J){E=v(E,I.rings,L,J);if(!E)return null;G.rings=E;return G}function C(E,G,I,L,J){E=p(E,I.paths,L,J);if(!E)return null;G.paths=E;return G}const B=(E,G,I)=>[G,I],A=(E,G,I)=>[G,I,E[2]],D=(E,G,I)=>[G,I,E[2],E[3]];n.equals=function(E,G){if(E===G||null==E&&null==G)return!0;if(null==E||null==G)return!1;let I,L,J,F;E&&"upperLeft"===
E.originPosition?(I=E.translate[0],L=E.translate[1],E=E.scale[0]):(I=E.extent.xmin,L=E.extent.ymax,E=E.tolerance);G&&"upperLeft"===G.originPosition?(J=G.translate[0],F=G.translate[1],G=G.scale[0]):(J=G.extent.xmin,F=G.extent.ymax,G=G.tolerance);return I===J&&L===F&&E===G};n.getQuantizedBoundsCoordsArray=d;n.getQuantizedBoundsCoordsArrayArray=h;n.getQuantizedBoundsPaths=function(E){return h([0,0,0,0],E)};n.getQuantizedBoundsPoints=function(E){const G=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,
Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return d(G,G,E)};n.getQuantizedBoundsRings=function(E){return h([0,0,0,0],E)};n.quantizeBounds=function(E,G,I){G[0]=x(E,I[0]);G[3]=r(E,I[1]);G[2]=x(E,I[2]);G[1]=r(E,I[3]);return G};n.quantizeExtent=k;n.quantizeGeometry=function(E,G){return E&&G?z.isPoint(G)?w(E,{},G,!1,!1):z.isPolyline(G)?C(E,{},G,!1,!1):z.isPolygon(G)?y(E,{},G,!1,!1):z.isMultipoint(G)?e(E,{},G,!1,!1):z.isExtent(G)?k(E,{},G,!1,!1):null:null};n.quantizeMultipoint=e;n.quantizePaths=
p;n.quantizePoint=w;n.quantizePoints=m;n.quantizePolygon=y;n.quantizePolyline=C;n.quantizeRings=v;n.quantizeX=x;n.quantizeY=r;n.toQuantizationTransform=function(E){return E?{originPosition:"upper-left"===E.originPosition?"upperLeft":"lower-left"===E.originPosition?"lowerLeft":E.originPosition,scale:E.tolerance?[E.tolerance,E.tolerance]:[1,1],translate:E.extent?[E.extent.xmin,E.extent.ymax]:[0,0]}:null};n.unquantizeBounds=function(E,G,I){return I?(G[0]=f(E,I[0]),G[1]=q(E,I[3]),G[2]=f(E,I[2]),G[3]=
q(E,I[1]),G):[f(E,G[0]),q(E,G[3]),f(E,G[2]),q(E,G[1])]};n.unquantizeCoordsArray=l;n.unquantizeCoordsArrayArray=t;n.unquantizeExtent=function(E,G,I,L,J){G.xmin=f(E,I.xmin);G.ymin=q(E,I.ymin);G.xmax=f(E,I.xmax);G.ymax=q(E,I.ymax);G!==I&&(L&&(G.zmin=I.zmin,G.zmax=I.zmax),J&&(G.mmin=I.mmin,G.mmax=I.mmax));return G};n.unquantizeMultipoint=function(E,G,I,L,J){c.isSome(I)&&(G.points=g(E,I.points,L,J));return G};n.unquantizePaths=a;n.unquantizePoint=function(E,G,I,L,J){if(c.isNone(I))return G;G.x=f(E,I.x);
G.y=q(E,I.y);G!==I&&(L&&(G.z=I.z),J&&(G.m=I.m));return G};n.unquantizePoints=g;n.unquantizePolygon=function(E,G,I,L,J){c.isSome(I)&&(G.rings=b(E,I.rings,L,J));return G};n.unquantizePolyline=function(E,G,I,L,J){c.isSome(I)&&(G.paths=a(E,I.paths,L,J));return G};n.unquantizeRings=b;n.unquantizeX=f;n.unquantizeY=q;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe","./attributeSupport","../../../smartMapping/statistics/support/utils"],
function(n,c,z){return function(){function x(u,m,v){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=u.returnDistinctValues;this.fieldsIndex=v;this.featureAdapter=m;if((m=u.outFields)&&-1===m.indexOf("*")){this.outFields=m;u=0;for(const f of m){var p=c.getExpressionFromFieldName(f);p=(m=this.fieldsIndex.get(p))?null:c.getWhereClause(p,v);m=m?m.name:c.getAliasFromFieldName(f)||`FIELD_EXP_${u++}`;this._fieldDataCache.set(f,{alias:m,clause:p})}}}var r=x.prototype;
r.countDistinctValues=function(u){if(!this.returnDistinctValues)return u.length;u.forEach(m=>this.getAttributes(m));return this._returnDistinctMap.size};r.getAttributes=function(u){u=this._processAttributesForOutFields(u);return this._processAttributesForDistinctValues(u)};r.getFieldValue=function(u,m,v){const p=v?v.name:m;let f=null;this._fieldDataCache.has(p)?f=this._fieldDataCache.get(p).clause:v||(f=c.getWhereClause(m,this.fieldsIndex),this._fieldDataCache.set(p,{alias:p,clause:f}));return v?
this.featureAdapter.getAttribute(u,p):f.calculateValue(u,this.featureAdapter)};r.getNormalizedValue=function(u,m){const v=m.normalizationType,p=m.normalizationTotal;let f=this.getFieldValue(u,m.field,m.fieldInfo);v&&Number.isFinite(f)&&(u=this.getFieldValue(u,m.normalizationField,m.normalizationFieldInfo),f=z.getNormalizedValue(f,v,u,p));return f};r.getExpressionValue=function(u,m,v){u={attributes:this.featureAdapter.getAttributes(u)};u=v.createExecContext(u,m.viewInfo);return v.executeFunction(m.compiledFunc,
u)};r.validateItem=function(u,m){this._fieldDataCache.has(m)||this._fieldDataCache.set(m,{alias:m,clause:c.getWhereClause(m,this.fieldsIndex)});return this._fieldDataCache.get(m).clause.testFeature(u,this.featureAdapter)};r.validateItems=function(u,m){this._fieldDataCache.has(m)||this._fieldDataCache.set(m,{alias:m,clause:c.getWhereClause(m,this.fieldsIndex)});return this._fieldDataCache.get(m).clause.testSet(u,this.featureAdapter)};r._processAttributesForOutFields=function(u){const m=this.outFields;
if(!m||!m.length)return this.featureAdapter.getAttributes(u);const v={};for(const p of m){const {alias:f,clause:q}=this._fieldDataCache.get(p);v[f]=q?q.calculateValue(u,this.featureAdapter):this.featureAdapter.getAttribute(u,f)}return v};r._processAttributesForDistinctValues=function(u){if(n.isNone(u)||!this.returnDistinctValues)return u;var m=this.outFields,v=[];if(m)for(const f of m){var {alias:p}=this._fieldDataCache.get(f);v.push(u[p])}else for(p in u)v.push(u[p]);m=`${(m||["*"]).join(",")}=${v.join(",")}`;
v=this._returnDistinctMap.get(m)||0;this._returnDistinctMap.set(m,++v);return 1<v?null:u};return x}()})},"esri/smartMapping/statistics/support/utils":function(){define(["exports","../../../core/Error","../../../core/maybe","../../../layers/support/fieldUtils"],function(n,c,z,x){function r(p,f){return new c(p,f)}function u(p,f){p=z.isSome(p)?p:"";z.isSome(f)&&f&&(p=p?"("+p+") AND ("+f+")":f);return p}function m(p){const f=p.layer;return p.fields.filter(q=>!f.getField(q))}function v(p){const f=p.layer;
return p.fields.filter(q=>{q=f.getFieldUsageInfo(q);return!q||!q.supportsStatistics})}n.calculateStatistics=function(p){const {values:f,useSampleStdDev:q,supportsNullCount:l}=p;var t=Number.POSITIVE_INFINITY;let g=Number.NEGATIVE_INFINITY,a=null,b=null;var d=null;let h=null,k=0;const e=null==p.minValue?-Infinity:p.minValue;p=null==p.maxValue?Infinity:p.maxValue;for(const w of f)Number.isFinite(w)?w>=e&&w<=p&&(a+=w,t=Math.min(t,w),g=Math.max(g,w),k++):"string"===typeof w&&k++;if(k&&null!=a){b=a/k;
d=0;for(const w of f)Number.isFinite(w)&&w>=e&&w<=p&&(d+=(w-b)**2);h=q?1<k?d/(k-1):0:0<k?d/k:0;d=Math.sqrt(h)}else g=t=null;t={avg:b,count:k,max:g,min:t,stddev:d,sum:a,variance:h};l&&(t.nullcount=f.length-k);return t};n.calculateStringStatistics=function(p){const f=p.returnDistinct?[...new Set(p.values)]:p.values,q=f.filter(t=>null!=t).length,l={count:q};p.supportsNullCount&&(l.nullcount=f.length-q);return l};n.createError=r;n.getNormalizedValue=function(p,f,q,l){let t=null;switch(f){case "log":0!==
p&&(t=Math.log(p)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(l)&&0!==l&&(t=p/l*100);break;case "field":Number.isFinite(q)&&0!==q&&(t=p/q);break;case "natural-log":0<p&&(t=Math.log(p));break;case "square-root":0<p&&(t=p**.5)}return t};n.getRangeExpr=function(p,f,q){f=null!=f?p+" \x3e\x3d "+f:"";p=null!=q?p+" \x3c\x3d "+q:"";q="";return(q=f&&p?u(f,p):f||p)?"("+q+")":""};n.getSQLFilterForNormalization=function(p){const f=p.field,q=p.normalizationType;p=p.normalizationField;let l;if("log"===
q)l="(NOT "+f+" \x3d 0)";else if("field"===q)l="(NOT "+p+" \x3d 0)";else if("natural-log"===q||"square-root"===q)l=`(${f} > 0)`;return l};n.isNullCountSupported=function(p){const f=null!=p.minValue||null!=p.maxValue,q=!!p.sqlExpression&&p.supportsSQLExpression;return!(null!=p.normalizationField||null!=p.normalizationType)&&!f&&!q};n.mergeWhereClauses=u;n.processStatsResult=function(p,f){if(!f)return p;["avg","stddev","variance"].forEach(q=>{null!=p[q]&&(p[q]=Math.ceil(p[q]))});return p};n.verifyBasicFieldValidity=
function(p,f,q){const l=m({layer:p,fields:f});if(l.length)return r(q,"Unknown fields: "+l.join(", ")+". You can only use fields defined in the layer schema");p=v({layer:p,fields:f});if(p.length)return r(q,"Unsupported fields: "+p.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true")};n.verifyFieldType=function(p,f,q,l){let t=null;if(!f)t=r(q,"'field' is not defined in the layer schema");else if(f.name===p.objectIdField||-1===l.indexOf(f.type))t=
r(q,"'field' should be one of these types: "+l.join(","));return t};n.verifyNumericField=function(p,f,q){let l;f?f.name!==p.objectIdField&&x.isNumericField(f)||(l=r(q,"'field' should be one of these numeric types: "+x.numericTypes.join(","))):l=r(q,"'field' is not defined in the layer schema");return l};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),
function(n,c,z,x,r,u,m,v){function p(Z,da,ja){if(Z)for(const qa of Z)(Z=(Z=u.getDeepValue(qa,da))&&"function"!==typeof Z&&ja.get(Z))&&u.setDeepValue(qa,Z.name,da)}function f(Z,da){if(!Z||!da)return[];U.clear();q(U,Z,da);return Array.from(U).sort()}function q(Z,da,ja){var qa;if(ja)if(null!=da&&null!=(qa=da.fields)&&qa.length)if(ja.includes("*"))for(const {name:sa}of da.fields)Z.add(sa);else for(const sa of ja)l(Z,da,sa);else if(ja.includes("*"))Z.clear(),Z.add("*");else for(const sa of ja)Z.add(sa)}
function l(Z,da,ja){"string"===typeof ja&&(da?(da=da.get(ja))&&Z.add(da.name):Z.add(ja))}function t(Z,da,ja){return g.apply(this,arguments)}function g(){g=z._asyncToGenerator(function*(Z,da,ja){var qa;if(ja){var {arcadeUtils:sa}=yield v.loadArcade();ja=sa.extractFieldNames(ja,null==da?void 0:null==(qa=da.fields)?void 0:qa.map(ya=>ya.name));for(const ya of ja)l(Z,da,ya)}});return g.apply(this,arguments)}function a(Z,da,ja){return b.apply(this,arguments)}function b(){b=z._asyncToGenerator(function*(Z,
da,ja){if(ja&&"1\x3d1"!==ja){ja=(yield new Promise(function(qa,sa){n(["../../core/sql/WhereClause"],qa,sa)})).WhereClause.create(ja,da);if(!ja.isStandardized)throw new x("fieldUtils:collectFilterFields","Where clause is not standardized");q(Z,da,ja.fieldNames)}});return b.apply(this,arguments)}function d(Z,da){for(const ja of Z)if(ja&&ja.valueType&&ja.valueType===da)return ja.name;return null}function h(){h=z._asyncToGenerator(function*(Z){if(!Z)return[];const da=new Set;yield k(da,Z);return Array.from(da).sort()});
return h.apply(this,arguments)}function k(Z,da){return e.apply(this,arguments)}function e(){e=z._asyncToGenerator(function*(Z,da){if(da){var ja=u.getDeepValue("elevationInfo.featureExpressionInfo",da);if(ja)return ja.collectRequiredFields(Z,da.fieldsIndex)}});return e.apply(this,arguments)}function w(Z,da,ja){return y.apply(this,arguments)}function y(){y=z._asyncToGenerator(function*(Z,da,ja){ja.outStatistic.onStatisticValueExpression?t(Z,da,ja.outStatistic.onStatisticValueExpression):Z.add(ja.outStatistic.onStatisticField)});
return y.apply(this,arguments)}function C(){C=z._asyncToGenerator(function*(Z,da,ja){var qa;if(da&&ja&&"cluster"===ja.type){var sa=[];null!=(qa=ja.popupTemplate)&&qa.expressionInfos&&sa.push(...ja.popupTemplate.expressionInfos.map(ya=>t(Z,da.fieldsIndex,ya.expression)));ja.fields&&sa.push(...ja.fields.map(ya=>w(Z,da.fieldsIndex,ya)));yield Promise.all(sa)}});return C.apply(this,arguments)}function B(){B=z._asyncToGenerator(function*(Z,da,ja){da&&(da.timeInfo&&r.isSome(ja)&&ja.timeExtent&&q(Z,da.fieldsIndex,
[da.timeInfo.startField,da.timeInfo.endField]),da.floorInfo&&q(Z,da.fieldsIndex,[da.floorInfo.floorField]),r.isSome(ja)&&r.isSome(ja.where)&&(yield a(Z,da.fieldsIndex,ja.where)))});return B.apply(this,arguments)}function A(){A=z._asyncToGenerator(function*(Z,da,ja){da&&ja&&(yield Promise.all(ja.map(qa=>D(Z,da,qa))))});return A.apply(this,arguments)}function D(Z,da,ja){return E.apply(this,arguments)}function E(){E=z._asyncToGenerator(function*(Z,da,ja){da&&ja&&(ja.valueExpression?yield t(Z,da.fieldsIndex,
ja.valueExpression):ja.field&&l(Z,da.fieldsIndex,ja.field))});return E.apply(this,arguments)}function G(){G=z._asyncToGenerator(function*(Z){if(!Z)return[];const da="timeInfo"in Z&&Z.timeInfo;return da?f(Z.fieldsIndex,[Z.trackIdField,da.startField,da.endField]):[]});return G.apply(this,arguments)}function I(){I=z._asyncToGenerator(function*(Z){if(!Z)return[];const da=new Set;yield L(da,Z);return Array.from(da).sort()});return I.apply(this,arguments)}function L(Z,da){return J.apply(this,arguments)}
function J(){J=z._asyncToGenerator(function*(Z,da){const {labelingInfo:ja,fieldsIndex:qa}=da;ja&&ja.length&&(yield Promise.all(ja.map(sa=>F(Z,qa,sa))))});return J.apply(this,arguments)}function F(Z,da,ja){return K.apply(this,arguments)}function K(){K=z._asyncToGenerator(function*(Z,da,ja){if(ja){var qa=ja.getLabelExpression();ja=ja.where;"arcade"===qa.type?yield t(Z,da,qa.expression):(qa=qa.expression.match(/{[^}]*}/g))&&qa.forEach(sa=>{l(Z,da,sa.slice(1,-1))});yield a(Z,da,ja)}});return K.apply(this,
arguments)}function M(Z){return"number"===typeof Z&&!isNaN(Z)&&isFinite(Z)}function R(Z){return null===Z||M(Z)}function T(Z){return null===Z||ia(Z)}function Q(Z){return null!=Z&&"string"===typeof Z}function S(Z){return null===Z||Q(Z)}function X(){return!0}function aa(Z,da){let ja;switch(Z.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":ja=Z.nullable?T:ia;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":ja=
Z.nullable?R:M;break;case "string":case "esriFieldTypeString":ja=Z.nullable?S:Q;break;default:ja=X}return 1===arguments.length?ja:ja(da)}function ma(Z){return null!=Z&&V.has(Z.type)}function ra(Z,da){return Z.nullable&&null===da?null:ma(Z)&&!za(Z.type,Number(da))?c.NumericRangeValidationError.OUT_OF_RANGE:aa(Z,da)?Z.domain?m.validateDomainValue(Z.domain,da):null:c.TypeValidationError.INVALID_TYPE}function za(Z,da){return(Z="string"===typeof Z?wa(Z):Z)?Z.isInteger?ia(da)&&da>=Z.min&&da<=Z.max:da>=
Z.min&&da<=Z.max:!1}function wa(Z){switch(Z){case "esriFieldTypeSmallInteger":case "small-integer":return Y;case "esriFieldTypeInteger":case "integer":return ba;case "esriFieldTypeSingle":case "single":return fa;case "esriFieldTypeDouble":case "double":return ha}}function va(Z,da,ja){if(!da||!da.attributes||!Z){if(r.isSome(ja))for(var qa of Z)ja.add(qa);return!0}da=da.attributes;qa=!1;for(const sa of Z)if(!(sa in da))if(qa=!0,r.isSome(ja))ja.add(sa);else break;return qa}function Fa(){Fa=z._asyncToGenerator(function*(Z,
da){const ja=new Set;for(const qa of da)yield t(ja,Z.fieldsIndex,qa);return Array.from(ja).sort()});return Fa.apply(this,arguments)}const Ba="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),N=["field","normalizationField"],U=new Set,ia=(()=>"isInteger"in Number?Number.isInteger:Z=>"number"===typeof Z&&isFinite(Z)&&Math.floor(Z)===Z)(),P=["integer","small-integer",
"single","double"],V=new Set([...P,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);c.NumericRangeValidationError=void 0;(c.NumericRangeValidationError||(c.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";c.TypeValidationError=void 0;(c.TypeValidationError||(c.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const Y={min:-32768,max:32767,isInteger:!0},ba={min:-2147483648,max:2147483647,
isInteger:!0},fa={min:-3.4E38,max:1.2E38,isInteger:!1},ha={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};c.collectArcadeFieldNames=t;c.collectElevationFields=k;c.collectFeatureReductionFields=function(Z,da,ja){return C.apply(this,arguments)};c.collectField=l;c.collectFields=q;c.collectFilterFields=function(Z,da,ja){return B.apply(this,arguments)};c.collectLabelingFields=L;c.collectOrderByInfos=function(Z,da,ja){return A.apply(this,arguments)};c.doubleRange=ha;c.featureHasFields=function(Z,
da){return!va(Z,da,null)};c.fixFields=f;c.fixRendererFields=function(Z,da){if(null!=Z&&null!=da)for(const ja of Array.isArray(Z)?Z:[Z])if(p(Ba,ja,da),"visualVariables"in ja&&ja.visualVariables)for(const qa of ja.visualVariables)p(N,qa,da)};c.fixTimeInfoFields=function(Z,da){if(null!=Z&&null!=da&&da.fields.length)if("startField"in Z){var ja=da.get(Z.startField);da=da.get(Z.endField);Z.startField=ja&&ja.name||null;Z.endField=da&&da.name||null}else ja=da.get(Z.startTimeField),da=da.get(Z.endTimeField),
Z.startTimeField=ja&&ja.name||null,Z.endTimeField=da&&da.name||null};c.getDisplayFieldName=function({displayField:Z,fields:da}){if(Z)return Z;if(!da||!da.length)return null;if(!(Z=d(da,"name-or-title")||d(da,"unique-identifier")||d(da,"type-or-category")))a:{for(const ja of da)if(ja&&ja.name&&(da=ja.name.toLowerCase(),-1<da.indexOf("name")||-1<da.indexOf("title"))){Z=ja.name;break a}Z=null}return Z};c.getElevationFields=function(Z){return h.apply(this,arguments)};c.getExpressionFields=function(Z,
da){return Fa.apply(this,arguments)};c.getFeatureEditFields=function(Z){if(!Z)return[];const da="editFieldsInfo"in Z&&Z.editFieldsInfo;return da?f(Z.fieldsIndex,[da&&da.creatorField,da&&da.creationDateField,da&&da.editorField,da&&da.editDateField]):[]};c.getFeatureGeometryFields=function(Z){if(!Z)return[];const da=Z.geometryFieldsInfo;return da?f(Z.fieldsIndex,[da.shapeAreaField,da.shapeLengthField]):[]};c.getFieldDefaultValue=function(Z){const da=Z.defaultValue;if(void 0!==da&&aa(Z,da))return da;
if(Z.nullable)return null};c.getFieldRange=function(Z){const da=m.getDomainRange(Z.domain);if(da)return da;if(ma(Z))return wa(Z.type)};c.getLabelingFields=function(Z){return I.apply(this,arguments)};c.getNumericTypeForValue=function(Z){if(!M(Z))return null;if(ia(Z)){if(Z>=Y.min&&Z<=Y.max)return"esriFieldTypeSmallInteger";if(Z>=ba.min&&Z<=ba.max)return"esriFieldTypeInteger"}return Z>=fa.min&&Z<=fa.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};c.getTimeFields=function(Z){return G.apply(this,arguments)};
c.integerRange=ba;c.isDateField=function(Z){return null!=Z&&("date"===Z.type||"esriFieldTypeDate"===Z.type)};c.isNumberInRange=za;c.isNumericField=ma;c.isStringField=function(Z){return null!=Z&&("string"===Z.type||"esriFieldTypeString"===Z.type)};c.isValidFieldValue=function(Z,da){return null===ra(Z,da)};c.isValueMatchingFieldType=aa;c.numericTypes=P;c.packFields=function(Z,da,ja=1){if(!da||!Z)return[];if(da.includes("*"))return["*"];da=f(Z,da);return da.length/Z.fields.length>=ja?["*"]:da};c.populateMissingFields=
va;c.rendererFields=Ba;c.sanitizeNullFieldValue=function(Z){return null==Z||"number"===typeof Z&&isNaN(Z)?null:Z};c.singleRange=fa;c.smallIntegerRange=Y;c.unpackFieldNames=function(Z,da){return r.isNone(da)||r.isNone(Z)?[]:da.includes("*")?Z.fields.map(ja=>ja.name):da};c.validateFieldValue=ra;c.validationErrorToString=function(Z,da,ja){switch(Z){case m.DomainValidationError.INVALID_CODED_VALUE:return`Value ${ja} is not in the coded domain - field: ${da.name}, domain: ${JSON.stringify(da.domain)}`;
case m.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${ja} is out of the range of valid values - field: ${da.name}, domain: ${JSON.stringify(da.domain)}`;case c.TypeValidationError.INVALID_TYPE:return`Value ${ja} is not a valid value for the field type - field: ${da.name}, type: ${da.type}, nullable: ${da.nullable}`;case c.NumericRangeValidationError.OUT_OF_RANGE:{const {min:qa,max:sa}=wa(da.type);return`Value ${ja} is out of range for the number type - field: ${da.name}, type: ${da.type}, value range is ${qa} to ${sa}`}}};
c.visualVariableFields=N;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/support/domainUtils":function(){define(["exports"],function(n){function c(z,x){switch(z.type){case "range":{const r="range"in z?z.range[1]:z.maxValue;if(+x<("range"in z?z.range[0]:z.minValue)||+x>r)return n.DomainValidationError.VALUE_OUT_OF_RANGE;break}case "coded-value":case "codedValue":if(null==z.codedValues||z.codedValues.every(r=>null==r||r.code!==x))return n.DomainValidationError.INVALID_CODED_VALUE}return null}
n.DomainValidationError=void 0;(function(z){z.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";z.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(n.DomainValidationError||(n.DomainValidationError={}));n.getDomainRange=function(z){if(z&&"range"===z.type)return{min:"range"in z?z.range[0]:z.minValue,max:"range"in z?z.range[1]:z.maxValue}};n.isValidDomainValue=function(z,x){return null===c(z,x)};n.validateDomainValue=c;Object.defineProperty(n,"__esModule",{value:!0})})},
"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/maybe ../geometry/SpatialReference".split(" "),function(n,c,z,x,r,u){function m(){v||(v=z._asyncToGenerator(function*(){const f=yield new Promise(function(q,l){n(["./arcadeUtils"],q,l)});return{arcade:f.arcade,arcadeUtils:f,Dictionary:f.Dictionary,Feature:f.arcadeFeature}})());return v}let v;x=(f,q,l)=>p.create(f,q,l,null,["$feature","$view"]);let p=function(){function f(l,t,g,
a,b,d,h,k){this.script=l;this.evaluate=b;this.fields=Array.isArray(h)?h:h.fields;this._syntaxTree=a;this._arcade=t;this._arcadeDictionary=g;this._arcadeFeature=d;this._spatialReference=k;this._referencesGeometry=t.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}f.create=function(){var l=z._asyncToGenerator(function*(t,g,a,b,d,h){const {arcade:k,Feature:e,Dictionary:w}=yield m(),y=u.fromJSON(g);g=k.parseScript(t,h);d=d.reduce((E,
G)=>({...E,[G]:null}),{});let C=null;r.isSome(b)&&(C=new w(b),C.immutable=!0,d.$config=null);b=k.scriptUsesGeometryEngine(g)&&k.enableGeometrySupport();h=k.scriptUsesFeatureSet(g)&&k.enableFeatureSetSupport();const B=k.scriptIsAsync(g)&&k.enableAsyncSupport();d={vars:d,spatialReference:y,useAsync:!!B};const A=new w;A.immutable=!1;A.setField("scale",0);const D=k.compileScript(g,d);yield Promise.all([b,h,B]);return new f(t,k,w,g,E=>{"$view"in E&&E.$view&&(A.setField("scale",E.$view.scale),E.$view=A);
C&&(E.$config=C);return D({vars:E,spatialReference:y})},new e,a,y)});return function(t,g,a,b,d,h){return l.apply(this,arguments)}}();var q=f.prototype;q.repurposeFeature=function(l){l.geometry&&!l.geometry.spatialReference&&(l.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(l.geometry,l.attributes,{fields:this.fields});return this._arcadeFeature};q.repurposeAdapter=function(l){this._arcadeFeature.repurposeFromAdapter(l,{fields:this.fields});return this._arcadeFeature};
q.createDictionary=function(){return new this._arcadeDictionary};q.referencesMember=function(l){return this._arcade.referencesMember(this._syntaxTree,l)};q.referencesFunction=function(l){return this._arcade.referencesFunction(this._syntaxTree,l)};q.referencesGeometry=function(){return this._referencesGeometry};q.referencesScale=function(){return this._referencesScale};q.extractFieldLiterals=function(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)};return f}();c.ArcadeExpression=
p;c.createDictionaryExpression=(f,q,l,t)=>p.create(f,q,l,t,["$feature","$view"]);c.createLabelExpression=(f,q,l)=>p.create(f,q,l,null,["$feature"]);c.createRendererExpression=x;c.createVVExpression=x;c["default"]=p;c.loadArcade=m;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(n){function c(r,u,m,v,p){if(null!=v&&null!=p)return f=>{const q=r.getAttribute(f,u);f=r.getAttribute(f,m);return(null==q||q<=p)&&(null==f||f>=
v)};if(null!=v)return f=>{f=r.getAttribute(f,m);return null==f||f>=v};if(null!=p)return f=>{f=r.getAttribute(f,u);return null==f||f<=p}}function z(r,u,m,v){if(null!=m&&null!=v&&m===v)return p=>r.getAttribute(p,u)===m;if(null!=m&&null!=v)return p=>{p=r.getAttribute(p,u);return p>=m&&p<=v};if(null!=m)return p=>r.getAttribute(p,u)>=m;if(null!=v)return p=>r.getAttribute(p,u)<=v}function x(){return()=>!1}n.getTimeExtent=function(r,u){if(!r)return null;const m=u.featureAdapter,{startTimeField:v,endTimeField:p}=
r;let f=Number.POSITIVE_INFINITY,q=Number.NEGATIVE_INFINITY;if(v&&p)u.forEach(l=>{const t=m.getAttribute(l,v);l=m.getAttribute(l,p);null==t||isNaN(t)||(f=Math.min(f,t));null==l||isNaN(l)||(q=Math.max(q,l))});else{const l=v||p;u.forEach(t=>{t=m.getAttribute(t,l);null==t||isNaN(t)||(f=Math.min(f,t),q=Math.max(q,t))})}return{start:f,end:q}};n.getTimeOperator=function(r,u,m){if(!u||!r)return null;const {startTimeField:v,endTimeField:p}=r;if(!v&&!p)return null;const {start:f,end:q}=u;return null===f&&
null===q?null:void 0===f&&void 0===q?x():v&&p?c(m,v,p,f,q):z(m,v||p,f,q)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../centroid ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g){function a(J,F,K,M=J.hasZ,R=J.hasM){if(r.isNone(F))return null;const T=J.hasZ&&M,Q=J.hasM&&R;return K?(J=l.quantizeOptimizedGeometry(G,F,J.hasZ,J.hasM,"esriGeometryPoint",K,M,R),l.convertToPoint(J,T,Q)):l.convertToPoint(F,T,Q)}function b(){b=z._asyncToGenerator(function*(J,F,K){const {outFields:M,orderByFields:R,groupByFieldsForStatistics:T,outStatistics:Q}=J;if(M)for(var S=0;S<M.length;S++)M[S]=M[S].trim();if(R)for(S=0;S<R.length;S++)R[S]=R[S].trim();if(T)for(S=
0;S<T.length;S++)T[S]=T[S].trim();if(Q)for(S=0;S<Q.length;S++)Q[S].onStatisticField&&(Q[S].onStatisticField=Q[S].onStatisticField.trim());J.geometry&&!J.outSR&&(J.outSR=J.geometry.spatialReference);return h(J,F,K)});return b.apply(this,arguments)}function d(){d=z._asyncToGenerator(function*(J,F,K){return h(J,F,K)});return d.apply(this,arguments)}function h(J,F,K){return k.apply(this,arguments)}function k(){k=z._asyncToGenerator(function*(J,F,K){if(!J)return null;var {where:M}=J;J.where=M=M&&M.trim();
if(!M||/^1 *= *1$/.test(M)||F&&F===M)J.where=null;if(!J.geometry)return J;F=yield e(J);J.distance=0;J.units=null;"esriSpatialRelEnvelopeIntersects"===J.spatialRel&&({spatialReference:M}=J.geometry,F=m.getGeometryExtent(F),F.spatialReference=M);J.geometry=F;yield g.checkProjectionSupport(F.spatialReference,K);F=(yield p.normalizeCentralMeridian(v.fromJSON(F)))[0];if(r.isNone(F))throw A;F=F.toJSON();F=yield g.project(F,F.spatialReference,K);if(!F)throw A;F.spatialReference=K;J.geometry=F;return J});
return k.apply(this,arguments)}function e(J){return w.apply(this,arguments)}function w(){w=z._asyncToGenerator(function*(J){const {geometry:F,distance:K,units:M}=J;if(null==K||"vertexAttributes"in F)return F;var R=F.spatialReference;J=M?B.fromJSON(M):u.getUnitString(R);R=R&&(f.isGeographic(R)||f.isWebMercator(R))?F:yield g.checkProjectionSupport(R,f.WGS84).then(()=>g.project(F,f.WGS84));return(yield y())(R.spatialReference,R,K,J)});return w.apply(this,arguments)}function y(){return C.apply(this,arguments)}
function C(){C=z._asyncToGenerator(function*(){return(yield new Promise(function(J,F){n(["../../../geometry/geometryEngineJSON"],J,F)})).geodesicBuffer});return C.apply(this,arguments)}const B=new x.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),A=Object.freeze({}),D=new t,E=new t,G=new t,I={esriGeometryPoint:l.convertToPoint,esriGeometryPolyline:l.convertToPolyline,
esriGeometryPolygon:l.convertToPolygon,esriGeometryMultipoint:l.convertToMultipoint},L=(J,F)=>"_geVersion"!==J?F:void 0;c.QUERY_ENGINE_EMPTY_RESULT=A;c.cleanFromGeometryEngine=function(J){return J&&"_geVersion"in J?JSON.parse(JSON.stringify(J,L)):J};c.getCentroid=function(J,F,K){if("esriGeometryPolygon"!==J.geometryType||!F||!F.centroid&&!F.geometry)return null;F.centroid||(F.centroid=q.getCentroidOptimizedGeometry(new t,F.geometry,J.hasZ,J.hasM));return a(J,F.centroid,K)};c.getGeometry=function(J,
F,K,M,R,T,Q=F,S=K){const X=F&&Q,aa=K&&S;M=r.isSome(M)?"coords"in M?M:M.geometry:null;if(r.isNone(M))return null;if(R)return F=l.generalizeOptimizedGeometry(E,M,F,K,J,R,Q,S),T&&(F=l.quantizeOptimizedGeometry(G,F,X,aa,J,T)),I[J](F,X,aa);if(T)return T=l.quantizeOptimizedGeometry(G,M,F,K,J,T,Q,S),I[J](T,X,aa);l.removeZMValues(D,M,F,K,Q,S);return I[J](D,X,aa)};c.normalizeFilter=function(J,F,K){return d.apply(this,arguments)};c.normalizeQuery=function(J,F,K){return b.apply(this,arguments)};c.normalizeQueryLike=
h;c.transformCentroid=a;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/graphics/centroid":function(){define(["exports","../../core/maybe"],function(n,c){function z(r,u,m,v,p,f,q=1){f=p?f?4:3:f?3:2;let l=m,t=m+f,g=0,a=0,b=m=0,d=0;for(let h=0,k=v-1;h<k;h++,l+=f,t+=f){v=u[l];const e=u[l+1],w=u[l+2],y=u[t],C=u[t+1],B=u[t+2];let A=v*C-y*e;b+=A;g+=(v+y)*A;a+=(e+C)*A;p&&(A=v*B-y*w,m+=(w+B)*A,d+=A);v<r[0]&&(r[0]=v);v>r[1]&&(r[1]=v);e<r[2]&&(r[2]=e);e>r[3]&&(r[3]=e);p&&(w<r[4]&&(r[4]=w),
w>r[5]&&(r[5]=w))}0<b*q&&(b*=-1);0<d*q&&(d*=-1);if(!b)return null;r=[g,a,.5*b];p&&(r[3]=m,r[4]=.5*d);return r}function x(r,u,m,v,p){p=v?p?4:3:p?3:2;let f=u,q=u+p,l=0,t=0,g=0,a=0;for(let k=0,e=m-1;k<e;k++,f+=p,q+=p){var b=r[f];const w=r[f+1],y=r[f+2],C=r[q],B=r[q+1],A=r[q+2];if(v){{var d=C-b;var h=B-w;const D=A-y;d=Math.sqrt(d*d+h*h+D*D)}}else d=C-b,h=B-w,d=Math.sqrt(d*d+h*h);d&&(l+=d,v?(b=[b+.5*(C-b),w+.5*(B-w),y+.5*(A-y)],t+=d*b[0],g+=d*b[1],a+=d*b[2]):(b=[b+.5*(C-b),w+.5*(B-w)],t+=d*b[0],g+=d*b[1]))}return 0<
l?v?[t/l,g/l,a/l]:[t/l,g/l]:0<m?v?[r[u],r[u+1],r[u+2]]:[r[u],r[u+1]]:null}n.getCentroidOptimizedGeometry=function(r,u,m,v,p){if(c.isNone(u)||!u.lengths.length)return null;const f="upperLeft"===(null==p?void 0:p.originPosition)?-1:1;r.lengths.length&&(r.lengths.length=0);r.coords.length&&(r.coords.length=0);p=r.coords;const q=[],l=m?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,
Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:t,coords:g}=u,a=m?v?4:3:v?3:2;let b=0;for(var d of t){const h=z(l,g,b,d,m,v,f);h&&q.push(h);b+=d*a}q.sort((h,k)=>{let e=f*h[2]-f*k[2];0===e&&m&&(e=h[4]-k[4]);return e});q.length&&(d=6*q[0][2],p[0]=q[0][0]/d,p[1]=q[0][1]/d,m&&(d=6*q[0][4],p[2]=0!==d?q[0][3]/d:0),p[0]<l[0]||p[0]>l[1]||p[1]<l[2]||p[1]>l[3]||m&&(p[2]<l[4]||p[2]>l[5]))&&(p.length=0);if(!p.length)if(u=u.lengths[0]?x(g,0,t[0],m,v):null)p[0]=u[0],p[1]=u[1],
m&&2<u.length&&(p[2]=u[2]);else return null;return r};n.lineCentroid=x;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t){function g(){return new Promise(function(h,k){n(["../../../geometry/geometryEngineJSON"],h,k)})}function a(){a=z._asyncToGenerator(function*(h,k,e){const {spatialRel:w,geometry:y}=h;if(y){if(!0!==d.spatialRelationship[w])throw new x("feature-store:unsupported-query","Unsupported query spatial relationship",{query:h});if(v.isValid(y.spatialReference)&&v.isValid(e)){if(!0!==d.queryGeometry[m.getJsonType(y)])throw new x("feature-store:unsupported-query","Unsupported query geometry type",
{query:h});if(!0!==d.layerGeometry[k])throw new x("feature-store:unsupported-query","Unsupported layer geometry type",{query:h});if(h.outSR)return l.checkProjectionSupport(h.geometry&&h.geometry.spatialReference,h.outSR)}}});return a.apply(this,arguments)}const b={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",
esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},d={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},
layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};c.canQueryWithRBush=function(h){if(m.isExtent(h))return!0;if(m.isPolygon(h)){for(const k of h.rings)if(5!==k.length||k[0][0]!==k[1][0]||k[0][0]!==k[4][0]||k[2][0]!==k[3][0]||k[0][1]!==k[3][1]||k[0][1]!==k[4][1]||k[1][1]!==k[2][1])return!1;return!0}return!1};c.checkSpatialQuerySupport=function(h,k,e){return a.apply(this,arguments)};c.getSpatialQueryOperator=function(h,
k,e,w,y){if(m.isPolygon(k)&&"esriGeometryPoint"===e&&("esriSpatialRelIntersects"===h||"esriSpatialRelContains"===h)){const C=f.convertFromPolygon(new q,k,!1,!1);return Promise.resolve(B=>p.polygonContainsPoint(C,!1,!1,B))}if(m.isPolygon(k)&&"esriGeometryMultipoint"===e){const C=f.convertFromPolygon(new q,k,!1,!1);if("esriSpatialRelContains"===h)return Promise.resolve(B=>p.polygonContainsMultipoint(C,!1,!1,B,w,y))}if(m.isExtent(k)&&"esriGeometryPoint"===e&&("esriSpatialRelIntersects"===h||"esriSpatialRelContains"===
h))return Promise.resolve(C=>r.extentContainsPoint(k,t.getGeometry(e,w,y,C)));if(m.isExtent(k)&&"esriGeometryMultipoint"===e&&"esriSpatialRelContains"===h)return Promise.resolve(C=>r.extentContainsMultipoint(k,t.getGeometry(e,w,y,C)));if(m.isExtent(k)&&"esriSpatialRelIntersects"===h){const C=u.getExtentIntersector(e);return Promise.resolve(B=>C(k,t.getGeometry(e,w,y,B)))}return g().then(C=>{const B=C[b[h]].bind(null,k.spatialReference,k);return A=>B(t.getGeometry(e,w,y,A))})};Object.defineProperty(c,
"__esModule",{value:!0})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(n,c){n.extentIntersectsExtent=c.extentIntersectsExtent;n.extentIntersectsMultipoint=c.extentIntersectsMultipoint;n.extentIntersectsPoint=c.extentIntersectsPoint;n.extentIntersectsPolygon=c.extentIntersectsPolygon;n.extentIntersectsPolyline=c.extentIntersectsPolyline;n.getFeatureExtentIntersector=c.getFeatureExtentIntersector;n.isSelfIntersecting=c.isSelfIntersecting;n.segmentIntersects=
c.segmentIntersects;n.getExtentIntersector=function(z){return"mesh"===z?c.extentIntersectsExtent:c.getFeatureExtentIntersector(z)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/contains":function(){define(["exports"],function(n){function c(z,x,r,u,m){if(!z)return!1;x=x?r?4:3:r?3:2;const {coords:v,lengths:p}=z;r=!1;z=0;for(const q of p){var f=z;for(let l=z,t=z+q*x;l<t;l+=x){f=l+x;f===t&&(f=z);const g=v[l],a=v[l+1],b=v[f];f=v[f+1];(a<m&&f>=m||f<m&&a>=m)&&g+(m-a)/(f-a)*(b-
g)<u&&(r=!r)}z+=q*x}return r}n.polygonContainsCoords=c;n.polygonContainsMultipoint=function(z,x,r,u,m,v){m=m?v?4:3:v?3:2;const {coords:p,lengths:f}=u;if(!f)return!1;for(let q=0,l=0;q<f.length;q++,l+=m)if(!c(z,x,r,p[l],p[l+1]))return!1;return!0};n.polygonContainsPoint=function(z,x,r,u){return c(z,x,r,u.coords[0],u.coords[1])};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/support/FieldsIndex":function(){define(function(){return function(){function n(z){this.fields=z;this._fieldsMap=
new Map;this._dateFieldsSet=new Set;this.dateFields=[];if(z){var x=[];for(const r of z)if(z=r&&r.name){const u=z.toLowerCase().trim();this._fieldsMap.set(z,r);this._fieldsMap.set(u,r);x.push(u);if("date"===r.type||"esriFieldTypeDate"===r.type)this.dateFields.push(r),this._dateFieldsSet.add(r)}x.sort();this.uid=x.join(",")}}var c=n.prototype;c.destroy=function(){this._fieldsMap.clear()};c.has=function(z){return null!=this.get(z)};c.get=function(z){return null!=z?this._fieldsMap.get(z)||this._fieldsMap.get(z.toLowerCase().trim()):
void 0};c.isDateField=function(z){return this._dateFieldsSet.has(this.get(z))};c.normalizeFieldName=function(z){if(z=this.get(z))return z.name};return n}()})},"esri/layers/support/PromiseQueue":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/promiseUtils"],function(n,c){let z=function(x,r,u,m,v){this.resolve=x;this.reject=r;this.callback=u;this.signal=m;this.abortCallback=v};return function(){function x(){this._tasks=[]}var r=x.prototype;r.push=function(u,m,v){return new Promise((p,
f)=>this._tasks.push(new z(p,f,u,m,v)))};r.unshift=function(u,m,v){return new Promise((p,f)=>this._tasks.unshift(new z(p,f,u,m,v)))};r.process=function(){if(0===this._tasks.length)return!1;const u=this._tasks.shift();try{const m=c.isAborted(u.signal);if(m&&!u.abortCallback)u.reject(c.createAbortError());else{const v=m?u.abortCallback(c.createAbortError()):u.callback();c.isPromise(v)?v.then(u.resolve,u.reject):u.resolve(v)}}catch(m){u.reject(m)}return!0};r.cancelAll=function(){const u=c.createAbortError();
for(const m of this._tasks)if(m.abortCallback){const v=m.abortCallback(u);m.resolve(v)}else m.reject(u);this._tasks.length=0};n._createClass(x,[{key:"length",get:function(){return this._tasks.length}}]);return x}()})},"esri/views/2d/layers/features/FeatureStore2D":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/CircularArray ../../../../core/Evented ../../../../core/has ../../../../core/maybe ../../../../chunks/rbush ../../../../geometry/support/aaBoundingBox ./Store2D ./support/FeatureSetReaderPBFIndirect".split(" "),
function(n,c,z,x,r,u,m,v,p,f){const q={getObjectId(l){return l.getObjectId()},getAttributes(l){return l.readAttributes()},getAttribute(l,t){return l.readAttribute(t)},cloneWithGeometry(l,t){return l},getGeometry(l){return l.readHydratedGeometry()},getCentroid(l,t){return l.readCentroid()}};r=function(l){function t(a,b,d){var h=l.call(this,a,b)||this;h.featureAdapter=q;h.events=new x;h._featureSetsByInstance=new Map;h._objectIdToDisplayId=new Map;h._spatialIndexInvalid=!0;h._indexSearchCache=new z(50);
h._index=m.rbush(9,k=>({minX:h._storage.getXMin(k),minY:h._storage.getYMin(k),maxX:h._storage.getXMax(k),maxY:h._storage.getYMax(k)}));h._storage=b;h.mode=d;return h}c._inheritsLoose(t,l);var g=t.prototype;g.hasInstance=function(a){return this._featureSetsByInstance.has(a)};g.onTileData=function(a,b){if(u.isNone(b.addOrUpdate))return b;b.addOrUpdate.attachStorage(this._storage);if("snapshot"===this.mode){for(var d=b.addOrUpdate.getCursor();d.next();){const h=d.getDisplayId();this.setComputedAttributes(this._storage,
d,h,a.scale)}return b}this._featureSetsByInstance.set(b.addOrUpdate.instance,b.addOrUpdate);for(d=b.addOrUpdate.getCursor();d.next();)this._insertFeature(d,a.scale);this._spatialIndexInvalid=!0;this.events.emit("changed");return b};g.search=function(a){this._rebuildIndex();const b=a.id;var d=this._indexSearchCache.find(e=>e.tileId===b);if(u.isSome(d))return d.readers;d=new Map;a=this._searchIndex(a.bounds);const h=[];for(const e of a){var k=this._storage.getInstanceId(e);a=(4294901760&k)>>>16;k&=
65535;d.has(a)||d.set(a,[]);d.get(a).push(k)}d.forEach((e,w)=>{w=this._featureSetsByInstance.get(w);h.push(f.FeatureSetReaderIndirect.from(w,e))});this._indexSearchCache.enqueue({tileId:b,readers:h});return h};g.insert=function(a){const b=a.getCursor(),d=this._storage;for(;b.next();){var h,k=b.getIndex();k|=b.instance<<16;const e=b.getObjectId(),w=null!=(h=this._objectIdToDisplayId.get(e))?h:this._storage.createDisplayId();b.setDisplayId(w);d.setInstanceId(w,k);this._objectIdToDisplayId.set(e,w)}this._featureSetsByInstance.set(a.instance,
a);this._spatialIndexInvalid=!0};g.remove=function(a){const b=this._objectIdToDisplayId.get(a);if(b){var d=this._storage.getInstanceId(b),h=65535&d;d=(4294901760&d)>>>16;var k=this._featureSetsByInstance.get(d);this._objectIdToDisplayId.delete(a);this._storage.releaseDisplayId(b);k.removeAtIndex(h);k.isEmpty&&this._featureSetsByInstance.delete(d);this._spatialIndexInvalid=!0}};g.forEach=function(a){this._objectIdToDisplayId.forEach(b=>{b=this._storage.getInstanceId(b);b=this._lookupFeature(b);a(b)})};
g.forEachUnsafe=function(a){this._objectIdToDisplayId.forEach(b=>{var d=this._storage.getInstanceId(b);b=65535&d;d=this._getFeatureSet((4294901760&d)>>>16);d.setIndex(b);a(d)})};g.forEachInBounds=function(a,b){a=this._searchIndex(a);for(const d of a)a=this.lookupFeatureByDisplayId(d,this._storage),b(u.unwrap(a))};g.forEachBounds=function(a,b,d){this._rebuildIndex();const h=[0,0,0,0];for(const k of a)k.readGeometry()&&(a=k.getDisplayId(),h[0]=this._storage.getXMin(a),h[1]=this._storage.getYMin(a),
h[2]=this._storage.getXMax(a),h[3]=this._storage.getYMax(a),b(v.fromRect(d,h)))};g.sweepFeatures=function(a,b,d){this._spatialIndexInvalid=!0;this._objectIdToDisplayId.forEach((h,k)=>{a.has(h)||(b.releaseDisplayId(h),d&&d.unsetAttributeData(h),this._objectIdToDisplayId.delete(k))});this.events.emit("changed")};g.sweepFeatureSets=function(a){this._spatialIndexInvalid=!0;this._featureSetsByInstance.forEach((b,d)=>{a.has(d)||this._featureSetsByInstance.delete(d)})};g.lookupObjectId=function(a,b){a=this.lookupFeatureByDisplayId(a,
b);return u.isNone(a)?null:a.getObjectId()};g.lookupDisplayId=function(a){return this._objectIdToDisplayId.get(a)};g.lookupFeatureByDisplayId=function(a,b){a=b.getInstanceId(a);return this._lookupFeature(a)};g.lookupByDisplayIdUnsafe=function(a){var b=this._storage.getInstanceId(a);a=65535&b;b=this._getFeatureSet((4294901760&b)>>>16);if(!b)return null;b.setIndex(a);return b};g._insertFeature=function(a,b){const d=this._storage,h=a.getObjectId();var k=a.getIndex();k|=a.instance<<16;d.getInstanceId(a.getDisplayId());
let e=this._objectIdToDisplayId.get(h);e||(e=d.createDisplayId(),this._objectIdToDisplayId.set(h,e),this._spatialIndexInvalid=!0);a.setDisplayId(e);d.setInstanceId(e,k);this.setComputedAttributes(d,a,e,b)};g._searchIndex=function(a){this._rebuildIndex();return this._index.search({minX:a[0],minY:a[1],maxX:a[2],maxY:a[3]})};g._rebuildIndex=function(){if(this._spatialIndexInvalid){var a=[];"snapshot"===this.mode?this._featureSetsByInstance.forEach(b=>{for(b=b.getCursor();b.next();){const d=b.getDisplayId();
this._storage.setBounds(d,b)&&a.push(d)}}):this._objectIdToDisplayId.forEach(b=>{const d=this._storage.getInstanceId(b);this._storage.setBounds(b,this._lookupFeature(d))&&a.push(b)});this._index.clear();this._index.load(a);this._indexSearchCache.clear();this._spatialIndexInvalid=!1}};g._lookupFeature=function(a){const b=65535&a;a=this._getFeatureSet((4294901760&a)>>>16);if(!a)return null;a=a.getCursor();a.setIndex(b);return a};g._getFeatureSet=function(a){return this._featureSetsByInstance.get(a)};
c._createClass(t,[{key:"storage",get:function(){return this._storage}},{key:"storeStatistics",get:function(){let a=0,b=0,d=0;this.forEach(h=>{if(h=h.readGeometry())b+=h.isPoint?1:h.lengths.reduce((k,e)=>k+e,0),d+=h.isPoint?1:h.lengths.length,a+=1});return{featureCount:a,vertexCount:b,ringCount:d}}}]);return t}(p.Store2D);n.FeatureStore2D=r;n.featureAdapter=q;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/CircularArray":function(){define(["../chunks/_rollupPluginBabelHelpers","./maybe"],
function(n,c){return function(){function z(r){this._start=this.size=0;this.maxSize=r;this._buffer=Array(r)}var x=z.prototype;x.enqueue=function(r){if(this.size===this.maxSize){const u=this._buffer[this._start];this._buffer[this._start]=r;this._start=(this._start+1)%this.maxSize;return u}this._buffer[(this._start+this.size++)%this.maxSize]=r;return null};x.dequeue=function(){if(0===this.size)return null;const r=this._buffer[this._start];this._buffer[this._start]=null;this.size--;this._start=(this._start+
1)%this.maxSize;return r};x.peek=function(){return 0===this.size?null:this._buffer[this._start]};x.find=function(r){if(0===this.size)return null;for(const u of this._buffer)if(c.isSome(u)&&r(u))return u;return null};x.clear=function(r){let u=this.dequeue();for(;c.isSome(u);)r&&r(u),u=this.dequeue()};n._createClass(z,[{key:"entries",get:function(){return this._buffer}}]);return z}()})},"esri/chunks/rbush":function(){define(["exports","./quickselect"],function(n,c){function z(a,b){if(!(this instanceof
z))return new z(a,b);this._maxEntries=Math.max(4,a||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));b&&("function"===typeof b?this.toBBox=b:this._initFormat(b));this.clear()}function x(a,b){r(a,0,a.children.length,b,a)}function r(a,b,d,h,k){k||(k=t(null));k.minX=Infinity;k.minY=Infinity;k.maxX=-Infinity;k.maxY=-Infinity;for(var e;b<d;b++)e=a.children[b],u(k,a.leaf?h(e):e);return k}function u(a,b){a.minX=Math.min(a.minX,b.minX);a.minY=Math.min(a.minY,b.minY);a.maxX=Math.max(a.maxX,b.maxX);
a.maxY=Math.max(a.maxY,b.maxY);return a}function m(a,b){return a.minX-b.minX}function v(a,b){return a.minY-b.minY}function p(a){return(a.maxX-a.minX)*(a.maxY-a.minY)}function f(a){return a.maxX-a.minX+(a.maxY-a.minY)}function q(a,b){return a.minX<=b.minX&&a.minY<=b.minY&&b.maxX<=a.maxX&&b.maxY<=a.maxY}function l(a,b){return b.minX<=a.maxX&&b.minY<=a.maxY&&b.maxX>=a.minX&&b.maxY>=a.minY}function t(a){return{children:a,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function g(a,
b,d,h,k){for(var e=[b,d],w;e.length;)d=e.pop(),b=e.pop(),d-b<=h||(w=b+Math.ceil((d-b)/h/2)*h,c.quickselect(a,w,b,d,k),e.push(b,w,w,d))}z.prototype={all:function(){return this._all(this.data,[])},search:function(a){var b=this.data,d=[],h=this.toBBox;if(!l(a,b))return d;for(var k=[],e,w,y,C;b;){e=0;for(w=b.children.length;e<w;e++)y=b.children[e],C=b.leaf?h(y):y,l(a,C)&&(b.leaf?d.push(y):q(a,C)?this._all(y,d):k.push(y));b=k.pop()}return d},collides:function(a){var b=this.data,d=this.toBBox;if(!l(a,b))return!1;
for(var h=[],k,e,w,y;b;){k=0;for(e=b.children.length;k<e;k++)if(w=b.children[k],y=b.leaf?d(w):w,l(a,y)){if(b.leaf||q(a,y))return!0;h.push(w)}b=h.pop()}return!1},load:function(a){if(!a||!a.length)return this;if(a.length<this._minEntries){for(var b=0,d=a.length;b<d;b++)this.insert(a[b]);return this}a=this._build(a.slice(),0,a.length-1,0);this.data.children.length?this.data.height===a.height?this._splitRoot(this.data,a):(this.data.height<a.height&&(b=this.data,this.data=a,a=b),this._insert(a,this.data.height-
a.height-1,!0)):this.data=a;return this},insert:function(a){a&&this._insert(a,this.data.height-1);return this},clear:function(){this.data=t([]);return this},remove:function(a,b){if(!a)return this;for(var d=this.data,h=this.toBBox(a),k=[],e=[],w,y,C,B;d||k.length;){d||(d=k.pop(),y=k[k.length-1],w=e.pop(),B=!0);if(d.leaf){a:{C=a;var A=d.children,D=b;if(D){for(var E=0;E<A.length;E++)if(D(C,A[E])){C=E;break a}C=-1}else C=A.indexOf(C)}if(-1!==C){d.children.splice(C,1);k.push(d);this._condense(k);break}}B||
d.leaf||!q(d,h)?y?(w++,d=y.children[w],B=!1):d=null:(k.push(d),e.push(w),w=0,y=d,d=d.children[0])}return this},toBBox:function(a){return a},compareMinX:m,compareMinY:v,toJSON:function(){return this.data},fromJSON:function(a){this.data=a;return this},_all:function(a,b){for(var d=[];a;)a.leaf?b.push.apply(b,a.children):d.push.apply(d,a.children),a=d.pop();return b},_build:function(a,b,d,h){var k=d-b+1,e=this._maxEntries;if(k<=e){var w=t(a.slice(b,d+1));x(w,this.toBBox);return w}h||(h=Math.ceil(Math.log(k)/
Math.log(e)),e=Math.ceil(k/Math.pow(e,h-1)));w=t([]);w.leaf=!1;w.height=h;k=Math.ceil(k/e);e=k*Math.ceil(Math.sqrt(e));var y;for(g(a,b,d,e,this.compareMinX);b<=d;b+=e){var C=Math.min(b+e-1,d);g(a,b,C,k,this.compareMinY);for(y=b;y<=C;y+=k){var B=Math.min(y+k-1,C);w.children.push(this._build(a,y,B,h-1))}}x(w,this.toBBox);return w},_chooseSubtree:function(a,b,d,h){for(var k,e,w,y,C,B,A,D;;){h.push(b);if(b.leaf||h.length-1===d)break;A=D=Infinity;k=0;for(e=b.children.length;k<e;k++)w=b.children[k],C=p(w),
B=(Math.max(w.maxX,a.maxX)-Math.min(w.minX,a.minX))*(Math.max(w.maxY,a.maxY)-Math.min(w.minY,a.minY))-C,B<D?(D=B,A=C<A?C:A,y=w):B===D&&C<A&&(A=C,y=w);b=y||b.children[0]}return b},_insert:function(a,b,d){var h=this.toBBox;d=d?a:h(a);h=[];var k=this._chooseSubtree(d,this.data,b,h);k.children.push(a);for(u(k,d);0<=b;)if(h[b].children.length>this._maxEntries)this._split(h,b),b--;else break;this._adjustParentBBoxes(d,h,b)},_split:function(a,b){var d=a[b],h=d.children.length,k=this._minEntries;this._chooseSplitAxis(d,
k,h);h=this._chooseSplitIndex(d,k,h);h=t(d.children.splice(h,d.children.length-h));h.height=d.height;h.leaf=d.leaf;x(d,this.toBBox);x(h,this.toBBox);b?a[b-1].children.push(h):this._splitRoot(d,h)},_splitRoot:function(a,b){this.data=t([a,b]);this.data.height=a.height+1;this.data.leaf=!1;x(this.data,this.toBBox)},_chooseSplitIndex:function(a,b,d){var h,k;var e=k=Infinity;for(h=b;h<=d-b;h++){var w=r(a,0,h,this.toBBox);var y=r(a,h,d,this.toBBox);var C=Math.max(0,Math.min(w.maxX,y.maxX)-Math.max(w.minX,
y.minX))*Math.max(0,Math.min(w.maxY,y.maxY)-Math.max(w.minY,y.minY));w=p(w)+p(y);if(C<e){e=C;var B=h;k=w<k?w:k}else C===e&&w<k&&(k=w,B=h)}return B},_chooseSplitAxis:function(a,b,d){var h=a.leaf?this.compareMinX:m,k=a.leaf?this.compareMinY:v,e=this._allDistMargin(a,b,d,h);b=this._allDistMargin(a,b,d,k);e<b&&a.children.sort(h)},_allDistMargin:function(a,b,d,h){a.children.sort(h);h=this.toBBox;var k=r(a,0,b,h),e=r(a,d-b,d,h),w=f(k)+f(e),y;for(y=b;y<d-b;y++){var C=a.children[y];u(k,a.leaf?h(C):C);w+=
f(k)}for(y=d-b-1;y>=b;y--)C=a.children[y],u(e,a.leaf?h(C):C),w+=f(e);return w},_adjustParentBBoxes:function(a,b,d){for(;0<=d;d--)u(b[d],a)},_condense:function(a){for(var b=a.length-1,d;0<=b;b--)0===a[b].children.length?0<b?(d=a[b-1].children,d.splice(d.indexOf(a[b]),1)):this.clear():x(a[b],this.toBBox)},_initFormat:function(a){var b=["return a"," - b",";"];this.compareMinX=new Function("a","b",b.join(a[0]));this.compareMinY=new Function("a","b",b.join(a[1]));this.toBBox=new Function("a","return {minX: a"+
a[0]+", minY: a"+a[1]+", maxX: a"+a[2]+", maxY: a"+a[3]+"};")}};n.rbush=z})},"esri/chunks/quickselect":function(){define(["exports"],function(n){var c={exports:{}};(function(z){(function(x){x=x();void 0!==x&&(z.exports=x)})(function(){function x(m,v,p,f,q){for(;f>p;){if(600<f-p){var l=f-p+1,t=v-p+1,g=Math.log(l),a=.5*Math.exp(2*g/3);g=.5*Math.sqrt(g*a*(l-a)/l)*(0>t-l/2?-1:1);x(m,v,Math.max(p,Math.floor(v-t*a/l+g)),Math.min(f,Math.floor(v+(l-t)*a/l+g)),q)}l=m[v];t=p;a=f;r(m,p,v);for(0<q(m[f],l)&&r(m,
p,f);t<a;){r(m,t,a);t++;for(a--;0>q(m[t],l);)t++;for(;0<q(m[a],l);)a--}0===q(m[p],l)?r(m,p,a):(a++,r(m,a,f));a<=v&&(p=a+1);v<=a&&(f=a-1)}}function r(m,v,p){var f=m[v];m[v]=m[p];m[p]=f}function u(m,v){return m<v?-1:m>v?1:0}return function(m,v,p,f,q){x(m,v,p||0,f||m.length-1,q||u)}})})(c);n.quickselect=c.exports})},"esri/views/2d/layers/features/Store2D":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/maybe ../../../../core/accessorSupport/diffUtils ../../../../support/arcadeOnDemand ../../arcade/callExpressionWithCursor".split(" "),
function(n,c,z,x,r,u,m,v){const p=new Promise(function(q,l){n(["../../../../layers/support/labelFormatUtils"],q,l)});let f=function(){function q(t,g){this._canCacheExpressionValue=!1;this._sourceInfo=t;this._bitsets={computed:g.getBitset(g.createBitset())}}var l=q.prototype;l.invalidate=function(){this._bitsets.computed.clear()};l.updateSchema=function(){var t=z._asyncToGenerator(function*(g,a){var b=u.diff(this._schema,a);if((this._schema=a)&&!r.isNone(b)&&u.hasDiff(b,"attributes")){x("esri-2d-update-debug")&&
console.debug("Applying Update - Store:",b);this._bitsets.computed.clear();g.targets[a.name]=!0;g=a.attributes;a=[];b=[];for(const d in g){const h=g[d];switch(h.type){case "expression":a.push(this._createArcadeComputedField(h));break;case "label-expression":a.push(this._createLabelArcadeComputedField(h));break;case "statistic":b.push(h)}}this._computedFields=yield Promise.all(a);this._canCacheExpressionValue=!this._computedFields.some(d=>"expression"===d.type&&d.expression.referencesScale());this._statisticFields=
b}});return function(g,a){return t.apply(this,arguments)}}();l.setComputedAttributes=function(t,g,a,b){var d=this._bitsets.computed;if(!this._canCacheExpressionValue||!d.has(a)){d.set(a);for(const h of this._computedFields)switch(d=this._evaluateField(g,h,b),h.resultType){case "numeric":t.setComputedNumericAtIndex(a,h.fieldIndex,d);break;case "string":t.setComputedStringAtIndex(a,h.fieldIndex,d)}}};l._createArcadeComputedField=function(){var t=z._asyncToGenerator(function*(g){return{...g,expression:yield m.createRendererExpression(g.valueExpression,
this._sourceInfo.spatialReference,this._sourceInfo.fieldsIndex)}});return function(g){return t.apply(this,arguments)}}();l._createLabelArcadeComputedField=function(){var t=z._asyncToGenerator(function*(g){var a=this._sourceInfo.spatialReference;const b=this._sourceInfo.fieldsIndex,{createLabelFunction:d}=yield p;a=yield d(g.label,b,a);return{...g,builder:a}});return function(g){return t.apply(this,arguments)}}();l._evaluateField=function(t,g,a){switch(g.type){case "label-expression":return t=t.readArcadeFeature(),
g.builder.evaluate(t)||"";case "expression":return{expression:g}=g,v(g,t,{$view:{scale:a}})}};return q}();c.Store2D=f;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/core/accessorSupport/diffUtils":function(){define(["exports","../Accessor","../Collection","../maybe","./utils"],function(n,c,z,x,r){function u(g){return g instanceof z?Object.keys(g.items):g instanceof c?r.getProperties(g).keys():g?Object.keys(g):[]}function m(g,a){return g instanceof z?g.items[a]:g[a]}function v(g,a){return Array.isArray(g)&&
Array.isArray(a)?g.length!==a.length:!1}function p(g){return g?g.declaredClass:null}function f(g,a){const b=g.diff;if(b&&"function"===typeof b)return b(g,a);const d=u(g),h=u(a);if(0!==d.length||0!==h.length){if(!d.length||!h.length||v(g,a))return{type:"complete",oldValue:g,newValue:a};var k=h.filter(y=>-1===d.indexOf(y)),e=d.filter(y=>-1===h.indexOf(y));e=d.filter(y=>-1<h.indexOf(y)&&m(g,y)!==m(a,y)).concat(k,e).sort();if((k=p(g))&&-1<t.indexOf(k)&&e.length)return{type:"complete",oldValue:g,newValue:a};
var w;k=g instanceof c&&a instanceof c;for(const y of e){e=m(g,y);const C=m(a,y);!(k||"function"!==typeof e&&"function"!==typeof C)||e===C||null==e&&null==C||(e=b&&b[y]&&"function"===typeof b[y]?b[y](e,C):"object"===typeof e&&"object"===typeof C&&p(e)===p(C)?f(e,C):{type:"complete",oldValue:e,newValue:C},x.isSome(e)&&(x.isSome(w)?w.diff[y]=e:w={type:"partial",diff:{[y]:e}}))}return w}}function q(g,a){if(x.isNone(g))return!1;a=a.split(".");for(const b of a){if("complete"===g.type)break;if("partial"===
g.type){if(g=g.diff[b],!g)return!1}else return!1}return!0}function l(g){if(x.isNone(g))return!0;switch(g.type){case "complete":return!1;case "collection":for(const a of g.added)if(!l(a))return!1;for(const a of g.removed)if(!l(a))return!1;for(const a of g.changed)if(!l(a))return!1;return!0;case "partial":for(const a in g.diff)if(!l(g.diff[a]))return!1;return!0}}const t=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];
n.diff=function(g,a){if("function"!==typeof g&&"function"!==typeof a&&(g||a))return!g||!a||"object"===typeof g&&"object"===typeof a&&p(g)!==p(a)?{type:"complete",oldValue:g,newValue:a}:f(g,a)};n.hasDiff=q;n.hasDiffAny=function(g,a){for(const b of a)if(q(g,b))return!0;return!1};n.isEmpty=l;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/arcade/callExpressionWithCursor":function(){define(["../../../core/Logger"],function(n){return function(c,z,x){c.referencesGeometry();z=z.readArcadeFeature();
try{return c.evaluate({...x,$feature:z})}catch(r){return n.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",r),null}}})},"esri/views/2d/layers/features/support/FeatureSetReaderPBFIndirect":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","./FeatureSetReader"],function(n,c,z){let x=function(r){function u(v,p){var f=r.call(this,z.FeatureSetReader.createInstance())||this;f._currentIndex=-1;f._reader=v;f._indices=p;return f}c._inheritsLoose(u,
r);u.from=function(v,p){return new u(v.copy(),p)};var m=u.prototype;m.getSize=function(){return this._indices.length};m.getCursor=function(){return this.copy()};m.copy=function(){const v=new u(this._reader.copy(),this._indices);v._currentIndex=this._currentIndex;return v};m.next=function(){for(;this._nextIndex()&&!this._reader._getExists(););return this._currentIndex<this._indices.length};m._nextIndex=function(){return++this._currentIndex<this._indices.length?(this._reader.setIndex(this._indices[this._currentIndex]),
!0):!1};m.setArcadeSpatialReference=function(v){this._reader.setArcadeSpatialReference(v)};m.attachStorage=function(v){this._reader.attachStorage(v)};m.getStorage=function(){return this._reader.getStorage()};m.getComputedNumeric=function(v){return this._reader.getComputedNumericAtIndex(0)};m.setComputedNumeric=function(v,p){return this._reader.setComputedNumericAtIndex(p,0)};m.getComputedString=function(v){return this._reader.getComputedStringAtIndex(0)};m.setComputedString=function(v,p){return this._reader.setComputedStringAtIndex(0,
p)};m.getComputedNumericAtIndex=function(v){return this._reader.getComputedNumericAtIndex(v)};m.setComputedNumericAtIndex=function(v,p){this._reader.setComputedNumericAtIndex(v,p)};m.getComputedStringAtIndex=function(v){return this._reader.getComputedStringAtIndex(v)};m.setComputedStringAtIndex=function(v,p){return this._reader.setComputedStringAtIndex(v,p)};m.transform=function(v,p,f,q){const l=this.copy();l._reader=this._reader.transform(v,p,f,q);return l};m.readAttribute=function(v,p=!1){return this._reader.readAttribute(v,
p)};m.readAttributes=function(){return this._reader.readAttributes()};m.joinAttributes=function(v){return this._reader.joinAttributes(v)};m.readArcadeFeature=function(){return this._reader.readArcadeFeature()};m.geometry=function(){return this._reader.geometry()};m.field=function(v){return this.readAttribute(v,!0)};m.hasField=function(v){return this._reader.hasField(v)};m.setField=function(v,p){return this._reader.setField(v,p)};m.keys=function(){return this._reader.keys()};m.castToText=function(){return this._reader.castToText()};
m.getQuantizationTransform=function(){return this._reader.getQuantizationTransform()};m.getAttributeHash=function(){return this._reader.getAttributeHash()};m.getObjectId=function(){return this._reader.getObjectId()};m.getDisplayId=function(){return this._reader.getDisplayId()};m.setDisplayId=function(v){return this._reader.setDisplayId(v)};m.getGroupId=function(){return this._reader.getGroupId()};m.setGroupId=function(v){return this._reader.setGroupId(v)};m.getXHydrated=function(){return this._reader.getXHydrated()};
m.getYHydrated=function(){return this._reader.getYHydrated()};m.getX=function(){return this._reader.getX()};m.getY=function(){return this._reader.getY()};m.setIndex=function(v){return this._reader.setIndex(v)};m.getIndex=function(){return this._reader.getIndex()};m.readLegacyFeature=function(){return this._reader.readLegacyFeature()};m.readOptimizedFeature=function(){return this._reader.readOptimizedFeature()};m.readLegacyPointGeometry=function(){return this._reader.readLegacyPointGeometry()};m.readLegacyGeometry=
function(){return this._reader.readLegacyGeometry()};m.readLegacyCentroid=function(){return this._reader.readLegacyCentroid()};m.readGeometryArea=function(){return this._reader.readGeometryArea()};m.readUnquantizedGeometry=function(){return this._reader.readUnquantizedGeometry()};m.readHydratedGeometry=function(){return this._reader.readHydratedGeometry()};m.readGeometry=function(){return this._reader.readGeometry()};m.readCentroid=function(){return this._reader.readCentroid()};m._readAttribute=function(v,
p){throw Error("Error: Should not be called. Underlying _reader should be used instead");};m._readAttributes=function(){throw Error("Error: Should not be called. Underlying _reader should be used instead");};c._createClass(u,[{key:"hasNext",get:function(){return this._currentIndex+1<this._indices.length}},{key:"geometryType",get:function(){return this._reader.geometryType}},{key:"hasFeatures",get:function(){return this._reader.hasFeatures}},{key:"exceededTransferLimit",get:function(){return this._reader.exceededTransferLimit}},
{key:"hasZ",get:function(){return this._reader.hasZ}},{key:"hasM",get:function(){return this._reader.hasM}}]);return u}(z.FeatureSetReader);n.FeatureSetReaderIndirect=x;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/FeatureSetReader":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../geometry ../../../../../core/has ../../../../../core/maybe ../../../../../layers/graphics/centroid ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/OptimizedGeometry ./StaticBitSet ../../../../../geometry/support/jsonUtils".split(" "),
function(n,c,z,x,r,u,m,v,p,f){var q,l;let t=0;z=null!=(q=x("featurelayer-simplify-thresholds"))?q:[.5,.5,.5,.5];const g=z[0],a=z[1],b=z[2],d=z[3];x=null!=(l=x("featurelayer-simplify-payload-size-factors"))?l:[1,2,4];const h=x[0],k=x[1],e=x[2];l=function(){function w(C){this.type="FeatureSetReader";this.seen=!1;this._ty=this._tx=this.instance=0;this._sy=this._sx=1;this._deleted=null;this._joined=[];this._objectIdToIndex=null;this._level=0;this.instance=C}w.createInstance=function(){t++;return t=65535<
t?0:t};var y=w.prototype;y.getAreaSimplificationThreshold=function(C,B){let A=1;4E6<B?A=e:1E6<B?A=k:5E5<B&&(A=h);B=0;4E3<C?B=d*A:2E3<C?B=b*A:100<C?B=a:15<C&&(B=g);C=8;4>this._level?C=1:5>this._level?C=2:6>this._level&&(C=4);return B*C};y.setArcadeSpatialReference=function(C){this._arcadeSpatialReference=C};y.attachStorage=function(C){this._storage=C};y.getQuantizationTransform=function(){throw Error("Unable to find transform for featureSet");};y.getStorage=function(){return this._storage};y.getComputedNumeric=
function(C){return this.getComputedNumericAtIndex(0)};y.setComputedNumeric=function(C,B){return this.setComputedNumericAtIndex(B,0)};y.getComputedString=function(C){return this.getComputedStringAtIndex(0)};y.setComputedString=function(C,B){return this.setComputedStringAtIndex(0,B)};y.getComputedNumericAtIndex=function(C){return this._storage.getComputedNumericAtIndex(this.getDisplayId(),C)};y.setComputedNumericAtIndex=function(C,B){this._storage.setComputedNumericAtIndex(this.getDisplayId(),C,B)};
y.getComputedStringAtIndex=function(C){return this._storage.getComputedStringAtIndex(this.getDisplayId(),C)};y.setComputedStringAtIndex=function(C,B){return this._storage.setComputedStringAtIndex(this.getDisplayId(),C,B)};y.transform=function(C,B,A,D){const E=this.copy();E._tx+=C;E._ty+=B;E._sx*=A;E._sy*=D;return E};y.readAttribute=function(C,B=!1){var A=this._readAttribute(C,B);if(void 0!==A)return A;for(const D of this._joined)if(D.setIndex(this.getIndex()),A=D._readAttribute(C,B),void 0!==A)return A};
y.readAttributes=function(){const C=this._readAttributes();for(const B of this._joined){B.setIndex(this.getIndex());const A=B._readAttributes();for(const D of Object.keys(A))C[D]=A[D]}return C};y.joinAttributes=function(C){this._joined.push(C)};y.readArcadeFeature=function(){return this};y.geometry=function(){var C=this.readHydratedGeometry();C=m.convertToGeometry(C,this.geometryType,this.hasZ,this.hasM);if(C=f.fromJSON(C))C.spatialReference=this._arcadeSpatialReference;return C};y.field=function(C){return this.readAttribute(C,
!0)};y.hasField=function(C){return!0};y.setField=function(C,B){};y.keys=function(){return[]};y.castToText=function(){return""};y.removeIds=function(C){if(r.isNone(this._objectIdToIndex)){var B=new Map;const A=this.getCursor();for(;A.next();)B.set(A.getObjectId(),A.getIndex());this._objectIdToIndex=B}B=this._objectIdToIndex;for(const A of C)B.has(A)&&this.removeAtIndex(B.get(A))};y.removeAtIndex=function(C){r.isNone(this._deleted)&&(this._deleted=p.StaticBitSet.create(this.getSize()));this._deleted.set(C)};
y.readGeometryForDisplay=function(){return this.readUnquantizedGeometry(!0)};y.readLegacyGeometryForDisplay=function(){return this.readLegacyGeometry(!0)};y.features=function*(){const C=this.getCursor();for(;C.next();)yield C.readOptimizedFeature()};y._getExists=function(){return r.isNone(this._deleted)||!this._deleted.has(this.getIndex())};y._computeCentroid=function(){if("esriGeometryPolygon"!==this.geometryType)return null;const C=this.readUnquantizedGeometry();if(!C||C.hasIndeterminateRingOrder)return null;
const B=r.unwrapOr(this.getQuantizationTransform(),null);return u.getCentroidOptimizedGeometry(new v,C,this.hasM,this.hasZ,B)};y.copyInto=function(C){C.seen=this.seen;C._storage=this._storage;C._arcadeSpatialReference=this._arcadeSpatialReference;C._joined=this._joined;C._tx=this._tx;C._ty=this._ty;C._sx=this._sx;C._sy=this._sy;C._deleted=this._deleted;C._objectIdToIndex=this._objectIdToIndex};c._createClass(w,[{key:"isEmpty",get:function(){return r.isSome(this._deleted)&&this._deleted.countSet()===
this.getSize()}},{key:"level",set:function(C){this._level=C}}]);return w}();n.FeatureSetReader=l;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/StaticBitSet":function(){define(["exports"],function(n){let c=function(){function z(r,u){this._mask=0;this._buf=r;this._mask=u}z.fromBuffer=function(r,u){return new z(r,u)};z.create=function(r,u=4294967295){r=new Uint32Array(Math.ceil(r/32));return new z(r,u)};var x=z.prototype;x._getIndex=function(r){return Math.floor(r/
32)};x.has=function(r){r&=this._mask;return!!(this._buf[this._getIndex(r)]&1<<r%32)};x.hasRange=function(r,u){for(;r%32&&r!==u;){if(this.has(r))return!0;r++}for(;u%32&&r!==u;){if(this.has(r))return!0;u--}if(r===u)return!1;for(r/=32;r!==u/32;r++)if(this._buf[r])return!0;return!1};x.set=function(r){r&=this._mask;const u=this._getIndex(r);this._buf[u]|=1<<r%32};x.setRange=function(r,u){for(;r%32&&r!==u;)this.set(r++);for(;u%32&&r!==u;)this.set(u--);if(r!==u)for(r/=32;r!==u/32;r++)this._buf[r]=4294967295};
x.unset=function(r){r&=this._mask;const u=this._getIndex(r);this._buf[u]&=4294967295^1<<r%32};x.resize=function(r){const u=this._buf;r=new Uint32Array(Math.ceil(r/32));r.set(u);this._buf=r};x.or=function(r){for(let u=0;u<this._buf.length;u++)this._buf[u]|=r._buf[u];return this};x.and=function(r){for(let u=0;u<this._buf.length;u++)this._buf[u]&=r._buf[u];return this};x.xor=function(r){for(let u=0;u<this._buf.length;u++)this._buf[u]^=r._buf[u];return this};x.ior=function(r){for(let u=0;u<this._buf.length;u++)this._buf[u]|=
~r._buf[u];return this};x.iand=function(r){for(let u=0;u<this._buf.length;u++)this._buf[u]&=~r._buf[u];return this};x.ixor=function(r){for(let u=0;u<this._buf.length;u++)this._buf[u]^=~r._buf[u];return this};x.any=function(){for(let r=0;r<this._buf.length;r++)if(this._buf[r])return!0;return!1};x.copy=function(r){for(let u=0;u<this._buf.length;u++)this._buf[u]=r._buf[u];return this};x.clone=function(){return new z(this._buf.slice(),this._mask)};x.clear=function(){for(let r=0;r<this._buf.length;r++)this._buf[r]=
0};x.forEachSet=function(r){for(let u=0;u<this._buf.length;u++){let m=this._buf[u],v=32*u;if(m)for(;m;)m&1&&r(v),m>>>=1,v++}};x.countSet=function(){let r=0;this.forEachSet(u=>{r++});return r};return z}();n.StaticBitSet=c;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/sources/createSource":function(){define("exports ../../../../../core/maybe ../../../../../layers/support/arcgisLayerUrl ./DrillDownFeatureSource ./GeoEventSource ./PagedFeatureSource ./SnapshotFeatureSource".split(" "),
function(n,c,z,x,r,u,m){n.createSource=function(v,p,f,q,l,t){a:{switch(v.type){case "snapshot":v={type:"feature",origin:"snapshot",featureCount:c.unwrapOr(v.featureCount,0),serviceInfo:v,onMessage:q,outSR:p,tileInfoView:f,canAcceptRequest:l,store:t};break a;case "stream":v={type:"geoevent",serviceInfo:v,onMessage:q,outSR:p,canAcceptRequest:l};break a;case "memory":case "on-demand":t=v.source;t=Array.isArray(t)?"local":"path"in t&&z.isHostedAgolService(t.path)?"hosted":"unknown";v={type:"feature",
serviceInfo:v,onMessage:q,outSR:p,origin:t,tileInfoView:f,canAcceptRequest:l};break a}v=void 0}switch(v.type){case "feature":switch(v.origin){case "hosted":case "local":return new u.PagedFeatureSource(v);case "snapshot":return new m.SnapshotFeatureSource(v);case "unknown":return new x.DrillDownFeatureSource(v)}case "geoevent":return new r.GeoEventSource(v)}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/support/arcgisLayerUrl":function(){define(["exports","../../core/maybe","../../core/urlUtils",
"../../chunks/persistableUrlUtils"],function(n,c,z,x){function r(t){t=z.urlToObject(t);t=t.path.match(f)||t.path.match(q);if(!t)return null;const [,g,a,b,d]=t;t=a.indexOf("/");return{title:m(-1!==t?a.slice(t+1):a),serverType:v[b.toLowerCase()],sublayer:null!=d&&""!==d?parseInt(d,10):null,url:{path:g}}}function u(t){return(t=z.urlToObject(t).path.match(l))?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function m(t){t=t.replace(/\s*[/_]+\s*/g," ");return t[0].toUpperCase()+t.slice(1)}const v={mapserver:"MapServer",
imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},p=Object.values(v),f=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${p.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),q=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${p.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),l=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;n.cleanTitle=m;n.isAGOLUrl=function(t){return t?(new z.Url(z.makeAbsolute(t))).authority.toLowerCase().includes("arcgis.com"):
!1};n.isArcGISUrl=function(t){return!!f.test(t)};n.isHostedAgolService=function(t){if(!t)return!1;t=t.toLowerCase();const g=-1!==t.indexOf(".arcgis.com/");t=-1!==t.indexOf("//services")||-1!==t.indexOf("//tiles")||-1!==t.indexOf("//features");return g&&t};n.isHostedSecuredProxyService=function(t,g){return g&&t&&-1!==t.toLowerCase().indexOf(g.toLowerCase())};n.isServerOrServicesAGOLUrl=function(t){if(!t)return!1;t=(new z.Url(z.makeAbsolute(t))).authority.toLowerCase();return"server.arcgisonline.com"===
t||"services.arcgisonline.com"===t};n.isWmsServer=function(t){if(!t)return!1;var g=t.toLowerCase();t=-1!==g.indexOf("/services/");const a=-1!==g.indexOf("/mapserver/wmsserver"),b=-1!==g.indexOf("/imageserver/wmsserver");g=-1!==g.indexOf("/wmsserver");return t&&(a||b||g)};n.parse=r;n.parseNonStandardSublayerUrl=u;n.sanitizeUrl=function(t,g){return t?z.removeTrailingSlash(z.removeQueryParameters(t,g)):t};n.sanitizeUrlWithLayerId=function(t){let {url:g}=t;if(!g)return{url:g};g=z.removeQueryParameters(g,
t.logger);const a=z.urlToObject(g),b=r(a.path);let d;c.isSome(b)?(null!=b.sublayer&&null==t.layer.layerId&&(d=b.sublayer),g=b.url.path):t.nonStandardUrlAllowed&&(t=u(a.path),c.isSome(t)&&(g=t.serviceUrl,d=t.sublayerId));return{url:z.removeTrailingSlash(g),layerId:d}};n.serverTypes=p;n.titleFromUrlAndName=function(t,g){const a=[];t&&(t=r(t),c.isSome(t)&&t.title&&a.push(t.title));g&&(g=m(g),a.push(g));if(2===a.length){if(-1!==a[0].toLowerCase().indexOf(a[1].toLowerCase()))return a[0];if(-1!==a[1].toLowerCase().indexOf(a[0].toLowerCase()))return a[1]}return a.join(" - ")};
n.writeUrlWithLayerId=function(t,g,a,b,d){x.write(g,b,"url",d);b.url&&null!=t.layerId&&(b.url=z.join(b.url,a,t.layerId.toString()))};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/chunks/persistableUrlUtils":function(){define(["exports","../core/maybe","../core/urlUtils"],function(n,c,z){function x(t,g){var a=g&&g.url&&g.url.path;t&&a&&(t=z.makeAbsolute(t,a,{preserveProtocolRelative:!0}),g.portalItem&&g.readResourcePaths&&(a=z.makeRelative(t,g.portalItem.itemUrl),q.test(a)&&g.readResourcePaths.push(g.portalItem.resourceFromPath(a).path)));
return p(t,g&&g.portal)}function r(t,g,a=0){if(!t)return t;!z.isAbsolute(t)&&g&&g.blockedRelativeUrls&&g.blockedRelativeUrls.push(t);var b=z.makeAbsolute(t);if(g){var d=g.verifyItemRelativeUrls&&g.verifyItemRelativeUrls.rootPath||g.url&&g.url.path;d&&(d=p(d,g.portal),b=z.makeRelative(p(b,g.portal),d,d),b!==t&&g.verifyItemRelativeUrls&&g.verifyItemRelativeUrls.writtenUrls.push(b))}t=b;b=(b=g&&g.portal)&&!b.isPortal&&b.urlKey&&b.customBaseUrl?z.changeDomain(t,`${b.urlKey}.${b.customBaseUrl}`,b.portalHostname):
t;z.isAbsolute(b)&&(b=z.normalize(b));null!=g&&g.resources&&null!=g&&g.portalItem&&!z.isAbsolute(b)&&!z.isDataProtocol(b)&&0===a&&g.resources.toKeep.push({resource:g.portalItem.resourceFromPath(b)});return b}function u(t,g,a){return x(t,a)}function m(t,g,a,b){t=r(t,b);void 0!==t&&(g[a]=t)}function v(t){t=c.isSome(t)?t.match(f):null;return c.isSome(t)?t[1]:null}function p(t,g){if(!g||g.isPortal||!g.urlKey||!g.customBaseUrl)return t;const a=`${g.urlKey}.${g.customBaseUrl}`;return z.hasSameOrigin(z.appUrl,
`${z.appUrl.scheme}://${a}`)?z.changeDomain(t,g.portalHostname,a):z.changeDomain(t,a,g.portalHostname)}const f=/\/items\/([^\/]+)\/resources\//,q=/^\.\/resources\//;var l=Object.freeze({__proto__:null,fromJSON:x,toJSON:r,read:u,write:m,itemIdFromResourceUrl:v});n.fromJSON=x;n.itemIdFromResourceUrl=v;n.persistableUrlUtils=l;n.read=u;n.toJSON=r;n.write=m})},"esri/views/2d/layers/features/sources/DrillDownFeatureSource":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/has",
"../../../../../core/promiseUtils","./BaseFeatureSource"],function(n,c,z,x,r){var u=(z=z("esri-mobile"))?1:4,m=z?1:3;r=function(v){function p(f){return v.call(this,f)||this}c._inheritsLoose(p,v);p.prototype._fetchDataTile=function(){var f=c._asyncToGenerator(function*(q){var l=this;const t=this._serviceInfo.capabilities.query.supportsMaxRecordCountFactor,g=this._subscriptions.get(q.key.id),a=g.signal,b=q.getQuantizationParameters();let d=0;const h=function(){var k=c._asyncToGenerator(function*(e,
w){const y=l._queryInfo,C=l.createTileQuery(e,{maxRecordCountFactor:t?m:void 0,returnExceededLimitFeatures:!1,quantizationParameters:b});d++;try{const A=yield l._queue.push({tile:q,query:C,signal:a,depth:w});d--;x.throwIfAborted(a);if(A)if(y!==l._queryInfo)h(e,w);else if(A.exceededTransferLimit&&w<u)for(const D of e.createChildTiles())h(D,w+1);else{var B={id:q.id,addOrUpdate:A,end:0===d,type:"append"};g.add({query:C,message:B});l._onMessage(B)}}catch(A){x.isAbortError(A)||l._onMessage({id:q.id,addOrUpdate:null,
end:!0,type:"append"})}});return function(e,w){return k.apply(this,arguments)}}();h(q,0)});return function(q){return f.apply(this,arguments)}}();return p}(r.BaseFeatureSource);n.DrillDownFeatureSource=r;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/sources/BaseFeatureSource":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../request ../../../../../core/Error ../../../../../core/has ../../../../../core/Logger ../../../../../core/maybe ../../../../../core/promiseUtils ../controllers/support/sourceAdapters ./DataTileSource ../../../../support/QueueProcessor".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q){const l=u.getLogger("esri.views.2d.layers.features.sources.BaseFeatureSource");u=function(t){function g(b){var d=t.call(this,b)||this;d.type="feature";d.mode="on-demand";d._adapter=p.createSourceAdapter(b.serviceInfo);d._queue=new q.QueueProcessor({concurrency:8,process:function(){var h=c._asyncToGenerator(function*(k){v.throwIfAborted(k);if(m.isSome(k.tile)){var e=k.tile.key.id,{signal:w}=k;e=r("esri-tiles-debug")?{tile:e.replace(/\//g,"."),depth:k.depth}:void 0;w=
yield d._adapter.executeQuery(k.query,{signal:w,query:{...e,...d._schema.customParameters}});w.level=k.tile.key.level;return w}return d._adapter.executeQuery(k.query,{...k,query:d._schema.customParameters})});return function(k){return h.apply(this,arguments)}}()});d._patchQueue=new q.QueueProcessor({concurrency:8,process:function(){var h=c._asyncToGenerator(function*(k){v.throwIfAborted(k);if(m.isSome(k.tile)){var e=k.tile.key.id,{signal:w}=k;e=r("esri-tiles-debug")?{tile:e.replace(/\//g,"."),depth:k.depth}:
void 0;w=yield d._adapter.executeQuery(k.query,{signal:w,query:{...e,...d._schema.customParameters}});w.level=k.tile.key.level;return w}return d._adapter.executeQuery(k.query,{...k,query:d._schema.customParameters})});return function(k){return h.apply(this,arguments)}}()});return d}c._inheritsLoose(g,t);var a=g.prototype;a.destroy=function(){t.prototype.destroy.call(this);this._adapter.destroy();this._queue.destroy();this._patchQueue.destroy()};a.enableEvent=function(b,d){};a.subscribe=function(b){t.prototype.subscribe.call(this,
b);const d=this._subscriptions.get(b.id);this._fetchDataTile(b).catch(h=>{v.isAbortError(h)||l.error(new x("mapview-query-error","Encountered error when fetching tile",{tile:b,error:h}))}).then(()=>d.end())};a.unsubscribe=function(b){t.prototype.unsubscribe.call(this,b)};a.readers=function(b){return this._subscriptions.get(b).readers()};a.query=function(){var b=c._asyncToGenerator(function*(d){return this._adapter.executeQuery(d,{query:this._schema.customParameters})});return function(d){return b.apply(this,
arguments)}}();a.queryLastEditDate=function(){var b=c._asyncToGenerator(function*(){const d=this._serviceInfo.source;return(yield z(d.path,{query:{...d.query,f:"json"},responseType:"json"})).data.editingInfo.lastEditDate});return function(){return b.apply(this,arguments)}}();a.createTileQuery=function(b,d={}){var h;const k=this.createQuery(d);k.quantizationParameters=null!=(h=d.quantizationParameters)?h:b.getQuantizationParameters();k.resultType="tile";k.geometry=b.extent;k.quantizationParameters&&
"esriGeometryPolyline"===this._serviceInfo.geometryType&&(k.maxAllowableOffset=b.resolution);return k};a._executePatchQuery=function(){var b=c._asyncToGenerator(function*(d,h,k,e){h=h.clone();h.outFields=[this._serviceInfo.objectIdField,...k];h.returnCentroid=!1;h.returnGeometry=!1;k=m.isSome(h.start)?h.start/8E3:0;return this._patchQueue.push({tile:d,query:h,signal:e.signal,depth:k})});return function(d,h,k,e){return b.apply(this,arguments)}}();a._resend=function(){var b=c._asyncToGenerator(function*(d,
h){const {query:k,message:e}=d,w=m.isSome(k.outFields)?k.outFields:[];d=this._queryInfo.outFields;const y=d.filter(C=>-1===w.indexOf(C));if(m.isNone(e.addOrUpdate))this._onMessage({...e,type:"append"});else if(y.length)try{const C=this._subscriptions.get(e.id).tile,B=yield this._executePatchQuery(C,k,y,h);v.throwIfAborted(h);k.outFields=d;e.addOrUpdate.joinAttributes(B);this._onMessage({...e,end:e.end,type:"append"})}catch(C){}else this._onMessage({...e,type:"append"})});return function(d,h){return b.apply(this,
arguments)}}();a._resendSubscription=function(){var b=c._asyncToGenerator(function*(d){if(d.empty)return this._onMessage({id:d.tile.id,addOrUpdate:null,end:!1,type:"append"});const h=d.signal;for(const k of d.requests.done)yield this._resend(k,{signal:h});if(m.isSome(d.edits))return this._onMessage(d.edits)});return function(d){return b.apply(this,arguments)}}();a.resend=function(){var b=c._asyncToGenerator(function*(){const d=Array.from(this._subscriptions.values());yield Promise.all(d.map(h=>this._resendSubscription(h)))});
return function(){return b.apply(this,arguments)}}();c._createClass(g,[{key:"updating",get:function(){return!!this._queue.length||Array.from(this._subscriptions.values()).some(b=>!b.done)}},{key:"maxRecordCountFactor",get:function(){const {query:b}=this._serviceInfo.capabilities;return b.supportsMaxRecordCountFactor?4:null}},{key:"maxPageSize",get:function(){var b,{query:d}=this._serviceInfo.capabilities;d=null!=(b=d.maxRecordCount)?b:8E3;b=m.unwrapOr(this.maxRecordCountFactor,1);return d*b}},{key:"pageSize",
get:function(){return Math.min(8E3,this.maxPageSize)}}]);return g}(f.DataTileSource);n.BaseFeatureSource=u;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/controllers/support/sourceAdapters":function(){define("exports ../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/has ../../../../../../core/maybe ../../../../../../core/workers/Connection ../../../../../../geometry/support/quantizationUtils ../../../../../../layers/graphics/featureConversionUtils ../../../../../../layers/ogc/ogcFeatureUtils ../../../../../../rest/query/operations/query ../../support/FeatureSetReaderJSON ../../support/FeatureSetReaderPBF".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q){function l(k){return t.apply(this,arguments)}function t(){t=c._asyncToGenerator(function*(k){const e=new r;yield e.open(k,{});return e});return t.apply(this,arguments)}let g=function(){function k(e){this.service=e}k.prototype.destroy=function(){};return k}(),a=function(k){function e(y){var C=k.call(this,y)||this;C._portsOpen=l(y.source).then(B=>C.client=B);return C}c._inheritsLoose(e,k);var w=e.prototype;w.destroy=function(){this.client.close();this.client=null};w.executeQuery=
function(){var y=c._asyncToGenerator(function*(C,B){yield this._portsOpen;C=yield this.client.invoke("queryFeatures",C.toJSON(),B);return f.FeatureSetReaderJSON.fromFeatureSet(C,this.service.objectIdField)});return function(C,B){return y.apply(this,arguments)}}();return e}(g),b=function(k){function e(){return k.apply(this,arguments)||this}c._inheritsLoose(e,k);e.prototype.executeQuery=function(){var w=c._asyncToGenerator(function*(y,C){({data:C}=yield p.executeQueryPBFBuffer(this.service.source,y,
C));return q.FeatureSetReaderPBF.fromBuffer(C,this.service.geometryType,!y.quantizationParameters)});return function(y,C){return w.apply(this,arguments)}}();return e}(g),d=function(k){function e(){return k.apply(this,arguments)||this}c._inheritsLoose(e,k);e.prototype.executeQuery=function(){var w=c._asyncToGenerator(function*(y,C){const {source:B,capabilities:A,spatialReference:D,objectIdField:E,geometryType:G}=this.service;if(x.isSome(y.quantizationParameters)&&!A.query.supportsQuantization){const I=
y.clone();y=u.toQuantizationTransform(x.unwrap(I.quantizationParameters));I.quantizationParameters=null;({data:C}=yield p.executeQuery(B,I,D,C));C=m.convertFromFeatureSet(C,E);m.quantizeOptimizedFeatureSet(y,C);return f.FeatureSetReaderJSON.fromOptimizedFeatureSet(C)}({data:y}=yield p.executeQuery(B,y,this.service.spatialReference,C));"esriGeometryPoint"===G&&(y.features=y.features.filter(I=>x.isSome(I.geometry)?(I=I.geometry,Number.isFinite(I.x)&&Number.isFinite(I.y)):!0));return f.FeatureSetReaderJSON.fromFeatureSet(y,
this.service.objectIdField)});return function(y,C){return w.apply(this,arguments)}}();return e}(g),h=function(k){function e(){return k.apply(this,arguments)||this}c._inheritsLoose(e,k);e.prototype.executeQuery=function(){var w=c._asyncToGenerator(function*(y,C){var {capabilities:B}=this.service;if(y.quantizationParameters&&!B.query.supportsQuantization){const A=y.clone();B=u.toQuantizationTransform(x.unwrap(A.quantizationParameters));A.quantizationParameters=null;y=yield v.queryOptimizedFeatureSet(this.service.source,
y,C);m.quantizeOptimizedFeatureSet(B,y);return f.FeatureSetReaderJSON.fromOptimizedFeatureSet(y)}y=yield v.queryOptimizedFeatureSet(this.service.source,y,C);return f.FeatureSetReaderJSON.fromOptimizedFeatureSet(y)});return function(y,C){return w.apply(this,arguments)}}();return e}(g);n.SourceAdapter=g;n.createSourceAdapter=function(k){const {capabilities:e}=k;var w=k.source;return w&&w.capabilities&&w.collection&&w.layerDefinition?new h(k):Array.isArray(k.source)?new a(k):e.query.supportsFormatPBF&&
z("featurelayer-pbf")?new b(k):new d(k)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/workers/Connection":function(){define(["../../chunks/_rollupPluginBabelHelpers","../handleUtils","../Logger","../promiseUtils","./RemoteClient"],function(n,c,z,x,r){const u=z.getLogger("esri.core.workers.Connection");return function(){function m(){this._clients=[];this._clientPromises=[];this._clientIdx=0}var v=m.prototype;v.destroy=function(){this.close()};v.open=function(p,f){return new Promise((q,
l)=>{let t=!0;const g=a=>{x.throwIfAborted(f.signal);t&&(t=!1,a())};this._clients.length=p.length;this._clientPromises.length=p.length;for(let a=0;a<p.length;++a){const b=p[a];x.isPromiseLike(b)?this._clientPromises[a]=b.then(d=>{this._clients[a]=new r(d,f);g(q);return this._clients[a]},()=>{g(l);return null}):(this._clients[a]=new r(b,f),this._clientPromises[a]=Promise.resolve(this._clients[a]),g(q))}})};v.broadcast=function(p,f,q){const l=Array(this._clientPromises.length);for(let t=0;t<this._clientPromises.length;++t)l[t]=
this._clientPromises[t].then(g=>g.invoke(p,f,q));return l};v.close=function(){for(const p of this._clientPromises)p.then(f=>f.close());this._clients.length=0;this._clientPromises.length=0};v.getAvailableClient=function(){let p;for(let f=0;f<this._clients.length;++f){const q=this._clients[f];if(!q)p=p||[],p.push(this._clientPromises[f]);else if(!q.isBusy())return Promise.resolve(q)}return p?Promise.race(p):(this._clientIdx=(this._clientIdx+1)%this._clients.length,Promise.resolve(this._clients[this._clientIdx]))};
v.invoke=function(p,f,q){let l=null;Array.isArray(q)?(u.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),l={transferList:q}):l=q;return this.closed?Promise.reject(Error("Connection closed")):this.getAvailableClient().then(t=>t.invoke(p,f,l))};v.on=function(p,f){return Promise.all(this._clientPromises).then(()=>c.handlesGroup(this._clients.map(q=>q.on(p,f))))};v.openPorts=function(){return new Promise(p=>{const f=Array(this._clientPromises.length);let q=f.length;
for(let l=0;l<this._clientPromises.length;++l)this._clientPromises[l].then(t=>{f[l]=t.openPort();0===--q&&p(f)})})};n._createClass(m,[{key:"closed",get:function(){return!this._clients||!this._clients.length}},{key:"test",get:function(){return{numClients:this._clients.length}}}]);return m}()})},"esri/layers/ogc/ogcFeatureUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ../graphics/featureConversionUtils ../graphics/OptimizedFeatureSet ../graphics/sources/geojson/geojson ../graphics/sources/support/clientSideDefaults ../support/FieldsIndex ../support/fieldType ../../geometry/SpatialReference".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a,b){function d(){d=c._asyncToGenerator(function*(F,K,M={},R=5){({links:F}=F);F=L(F,"items","application/geo+json")||L(F,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if(m.isNone(F))throw new r("ogc-feature-layer:missing-items-page","Missing items url");({data:M}=yield x(F.href,{signal:M.signal,query:{limit:R,...M.customParameters,token:M.apiKey},headers:{accept:"application/geo+json"}}));yield l.validateGeoJSON(M);const T=l.inferLayerProperties(M,
{geometryType:K.geometryType});M=K.fields||T.fields||[];R=null!=K.hasZ?K.hasZ:T.hasZ;F=T.geometryType;const Q=K.objectIdField||T.objectIdFieldName||"OBJECTID";K=K.timeInfo;var S=M.find(aa=>aa.name===Q);if(S)S.type="esriFieldTypeOID",S.editable=!1,S.nullable=!1;else{if(!T.objectIdFieldType)throw new r("ogc-feature-layer:missing-feature-id","Collection geojson require a feature id as a unique identifier");M.unshift({name:Q,alias:Q,type:"esriFieldTypeOID",editable:!1,nullable:!1})}Q!==T.objectIdFieldName&&
(S=M.find(aa=>aa.name===T.objectIdFieldName))&&(S.type="esriFieldTypeInteger");M===T.fields&&0<T.unknownFields.length&&J.warn({name:"ogc-feature-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:T.unknownFields}});for(var X of M){null==X.name&&(X.name=X.alias);null==X.alias&&(X.alias=X.name);"esriFieldTypeOID"!==X.type&&"esriFieldTypeGlobalID"!==X.type&&(X.editable=null==X.editable?!0:!!X.editable,X.nullable=null==
X.nullable?!0:!!X.nullable);if(!X.name)throw new r("ogc-feature-layer:invalid-field-name","field name is missing",{field:X});if(-1===a.kebabDict.jsonValues.indexOf(X.type))throw new r("ogc-feature-layer:invalid-field-type",`invalid type for field "${X.name}"`,{field:X});}K&&(X=new g(M),K.startTimeField&&((S=X.get(K.startTimeField))?(K.startTimeField=S.name,S.type="esriFieldTypeDate"):K.startTimeField=null),K.endTimeField&&((S=X.get(K.endTimeField))?(K.endTimeField=S.name,S.type="esriFieldTypeDate"):
K.endTimeField=null),K.trackIdField&&((X=X.get(K.trackIdField))?K.trackIdField=X.name:(K.trackIdField=null,J.warn({name:"ogc-feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:K}}))),K.startTimeField||K.endTimeField||(J.warn({name:"ogc-feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:K}}),K=null));return{drawingInfo:F?t.createDrawingInfo(F):null,geometryType:F,fields:M,hasZ:!!R,objectIdField:Q,timeInfo:K}});
return d.apply(this,arguments)}function h(){h=c._asyncToGenerator(function*(F,K={}){({links:F}=F);F=L(F,"data","application/json")||L(F,"http://www.opengis.net/def/rel/ogc/1.0/data","application/json");if(m.isNone(F))throw new r("ogc-feature-layer:missing-collections-page","Missing collections url");const {apiKey:M,customParameters:R,signal:T}=K;({data:K}=yield x(F.href,{signal:T,headers:{accept:"application/json"},query:{...R,token:M}}));return K});return h.apply(this,arguments)}function k(){k=c._asyncToGenerator(function*(F,
K={}){({links:F}=F);F=L(F,"conformance","application/json")||L(F,"http://www.opengis.net/def/rel/ogc/1.0/conformance","application/json");if(m.isNone(F))throw new r("ogc-feature-layer:missing-conformance-page","Missing conformance url");const {apiKey:M,customParameters:R,signal:T}=K;({data:K}=yield x(F.href,{signal:T,headers:{accept:"application/json"},query:{...R,token:M}}));return K});return k.apply(this,arguments)}function e(){e=c._asyncToGenerator(function*(F,K={}){const {apiKey:M,customParameters:R,
signal:T}=K;({data:F}=yield x(F,{signal:T,headers:{accept:"application/json"},query:{...R,token:M}}));return F});return e.apply(this,arguments)}function w(){w=c._asyncToGenerator(function*(F,K={}){F=L(F.links,"service-desc","application/vnd.oai.openapi+json;version\x3d3.0");if(m.isNone(F))return J.warn("ogc-feature-layer:missing-openapi-page","The OGC API-Features server does not have an OpenAPI page."),null;const {apiKey:M,customParameters:R,signal:T}=K;({data:K}=yield x(F.href,{signal:T,headers:{accept:"application/vnd.oai.openapi+json;version\x3d3.0"},
query:{...R,token:M}}));return K});return w.apply(this,arguments)}function y(){y=c._asyncToGenerator(function*(F,K,M){F=yield C(F,K,M);return f.convertToFeatureSet(F)});return y.apply(this,arguments)}function C(F,K,M){return B.apply(this,arguments)}function B(){B=c._asyncToGenerator(function*(F,K,M){const {capabilities:{query:{maxRecordCount:R}},collection:T,layerDefinition:Q,queryParameters:{apiKey:S,customParameters:X},spatialReference:aa,supportedCrs:ma}=F;({links:F}=T);var ra=L(F,"items","application/geo+json")||
L(F,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if(m.isNone(ra))throw new r("ogc-feature-layer:missing-items-page","Missing items url");const {geometry:za,num:wa,start:va,timeExtent:Fa,where:Ba}=K;if(K.objectIds)throw new r("ogc-feature-layer:query-by-objectids-not-supported","Queries with objectids are not supported");F=b.fromJSON(aa);K=m.unwrapOr(K.outSpatialReference,F);F=K.isWGS84?null:A(K,ma);var N=I(za,ma),U=E(Fa);const ia=G(Ba);({data:N}=yield x(ra.href,{...M,query:{...X,
...N,crs:F,datetime:U,query:ia,limit:null!=wa?wa:null!=va&&void 0!==va?10:R,startindex:va,token:S},headers:{accept:"application/geo+json"}}));M=!1;N.links&&(M=!!N.links.find(da=>"next"===da.rel));!M&&Number.isInteger(N.numberMatched)&&Number.isInteger(N.numberReturned)&&(M=N.numberReturned<N.numberMatched);const {fields:P,globalIdField:V,hasM:Y,hasZ:ba,objectIdField:fa}=Q;ra=Q.geometryType;N=l.createOptimizedFeatures(N,{geometryType:ra,hasZ:ba,objectIdField:fa});if(!F&&K.isWebMercator)for(var ha of N)m.isSome(ha.geometry)&&
(U=f.convertToGeometry(ha.geometry,ra,ba,!1),U.spatialReference=b.WGS84,ha.geometry=f.convertFromGeometry(p.project(U,K)));for(var Z of N)Z.objectId=Z.attributes[fa];ha=F||!F&&K.isWebMercator?K.toJSON():v.WGS84;Z=new q;Z.exceededTransferLimit=M;Z.features=N;Z.fields=P;Z.geometryType=ra;Z.globalIdFieldName=V;Z.hasM=Y;Z.hasZ=ba;Z.objectIdFieldName=fa;Z.spatialReference=ha;return Z});return B.apply(this,arguments)}function A(F,K){var M;const {isWebMercator:R,wkid:T}=F;if(!T)return null;if(R){var Q,S,
X,aa;return null!=(Q=null!=(S=null!=(X=null!=(aa=K[3857])?aa:K[102100])?X:K[102113])?S:K[900913])?Q:null}return null!=(M=K[F.wkid])?M:null}function D(F){if(m.isNone(F))return"";const {xmin:K,ymin:M,xmax:R,ymax:T}=F;return`${K},${M},${R},${T}`}function E(F){if(m.isNone(F))return null;const {start:K,end:M}=F;return`${m.isSome(K)?K.toISOString():".."}/${m.isSome(M)?M.toISOString():".."}`}function G(F){return m.isNone(F)||!F||"1\x3d1"===F?null:F}function I(F,K){if(!m.isSome(F)||"extent"!==F.type)return null;
const {spatialReference:M}=F;return!M||M.isWGS84?{bbox:D(F)}:(K=A(M,K))?{bbox:D(F),"bbox-crs":K}:M.isWebMercator?{bbox:D(p.project(F,b.WGS84))}:null}function L(F,K,M){return F.find(R=>R.rel===K&&R.type===M)||F.find(R=>R.rel===K&&!R.type)}const J=u.getLogger("esri.layers.graphics.sources.ogcfeature");n.getCollectionDefinition=function(F,K){return d.apply(this,arguments)};n.getServerCollections=function(F){return h.apply(this,arguments)};n.getServerConformance=function(F){return k.apply(this,arguments)};
n.getServerLandingPage=function(F){return e.apply(this,arguments)};n.getServerOpenApi=function(F){return w.apply(this,arguments)};n.getSpatialReferenceWkid=function(F){F=/^http:\/\/www\.opengis.net\/def\/crs\/(?<authority>.*)\/(?<version>.*)\/(?<code>.*)$/i.exec(F);F=null==F?void 0:F.groups;if(!F)return null;const {authority:K,code:M}=F;switch(K.toLowerCase()){case "ogc":switch(M.toLowerCase()){case "crs27":return b.GCS_NAD_1927.wkid;case "crs83":return 4269;case "crs84":case "crs84h":return b.WGS84.wkid;
default:return null}case "esri":case "epsg":return F=Number.parseInt(M,10),Number.isNaN(F)?null:F;default:return null}};n.queryFeatureSetJSON=function(F,K,M){return y.apply(this,arguments)};n.queryOptimizedFeatureSet=C;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/sources/geojson/geojson":function(){define(["exports","../../../../core/Error","../../OptimizedFeature","../../OptimizedGeometry"],function(n,c,z,x){function*r(h){switch(h.type){case "Feature":yield h;break;case "FeatureCollection":for(const k of h.features)k&&
(yield k)}}function*u(h){if(!h)return null;switch(h.type){case "Point":yield h.coordinates;break;case "LineString":case "MultiPoint":yield*h.coordinates;break;case "MultiLineString":case "Polygon":for(const k of h.coordinates)yield*k;break;case "MultiPolygon":for(const k of h.coordinates)for(const e of k)yield*e}}function*m(h,k={}){const {geometryType:e,objectIdField:w}=k;for(const C of h){var y;const {geometry:B,properties:A,id:D}=C;if(B&&d[B.type]!==e)continue;h=A||{};let E=null!=(y=h[w])?y:null;
w&&null!=D&&!h[w]&&(h[w]=E=D);yield new z["default"](B?q(new x,B,k):null,h,null,E)}}function v(h){for(const k of h)if(2<k.length)return!0;return!1}function p(h){let k=0;for(let e=0;e<h.length;e++){const w=h[e],y=h[(e+1)%h.length];k+=w[0]*y[1]-y[0]*w[1]}return 0>=k}function f(h){const k=h[0],e=h[h.length-1];k[0]===e[0]&&k[1]===e[1]&&k[2]===e[2]||h.push(k);return h}function q(h,k,e){switch(k.type){case "LineString":return g(h,k.coordinates,e),h;case "MultiLineString":for(const y of k.coordinates)g(h,
y,e);return h;case "MultiPoint":return g(h,k.coordinates,e),h;case "MultiPolygon":for(var w of k.coordinates)for(l(h,w[0],e),k=1;k<w.length;k++)t(h,w[k],e);return h;case "Point":return b(h,k.coordinates,e),h;case "Polygon":w=k.coordinates;l(h,w[0],e);for(k=1;k<w.length;k++)t(h,w[k],e);return h}}function l(h,k,e){k=f(k);p(k)?g(h,k,e):a(h,k,e)}function t(h,k,e){k=f(k);p(k)?a(h,k,e):g(h,k,e)}function g(h,k,e){for(const w of k)b(h,w,e);h.lengths.push(k.length)}function a(h,k,e){for(let w=k.length-1;0<=
w;w--)b(h,k[w],e);h.lengths.push(k.length)}function b(h,k,e){const [w,y,C]=k;h.coords.push(w,y);e.hasZ&&h.coords.push(C||0)}const d={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};n.createOptimizedFeatures=function(h,k){return Array.from(m(r(h),k))};n.getGeometryType=function(h){return d[h]};n.inferLayerProperties=function(h,k={}){const e=[];var w=
new Set;const y=new Set;var C=!1;let B=Number.NEGATIVE_INFINITY,A=null,D=!1,E=void 0;({geometryType:k=null}=k);var G=!1;for(const I of r(h)){const {geometry:L,properties:J,id:F}=I;if(L&&(k||(k=d[L.type]),d[L.type]!==k))continue;C||(C=u(L),C=v(C));!D&&(D=null!=F)&&(E=typeof F,"number"===E&&(A=Object.keys(J).filter(K=>J[K]===F)));D&&"number"===E&&null!=F&&(B=Math.max(B,F),1<A.length?A=A.filter(K=>J[K]===F):1===A.length&&(A=J[A[0]]===F?A:[]));if(!G&&J){h=!0;for(const K in J)if(!w.has(K))if(G=J[K],null==
G)h=!1,y.add(K);else{a:switch(typeof G){case "string":G="esriFieldTypeString";break a;case "number":G="esriFieldTypeDouble";break a;default:G="unknown"}"unknown"===G?y.add(K):(y.delete(K),w.add(K),e.push({name:K,alias:K,type:G}))}G=h}}if(w=A&&1===A.length&&A[0]||null)for(const I of e)I.name===w&&(I.type="esriFieldTypeOID");return{fields:e,geometryType:k,hasZ:C,maxObjectId:Math.max(0,B),objectIdFieldName:w,objectIdFieldType:E,unknownFields:Array.from(y)}};n.validateGeoJSON=function(h){if(!h)throw new c("geojson-layer:empty",
"GeoJSON data is empty");if("Feature"!==h.type&&"FeatureCollection"!==h.type)throw new c("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:h});({crs:h}=h);if(h){var k="string"===typeof h?h:"name"===h.type?h.properties.name:"EPSG"===h.type?h.properties.code:null,e=/.*(CRS84H?|4326)$/i;if(!k||!e.test(k))throw new c("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:h});}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports",
"../../../../core/has","../../../../core/lang","../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],function(n,c,z,x,r){n.createCapabilities=function(u,m){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:u},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:m,supportsDelete:m,supportsEditing:m,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAttachments:!1,
supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:m,supportsExceedsLimitStatistics:!0},query:x.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0},editing:{supportsGeometryUpdate:m,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}};n.createDefaultAttributesFunction=
function(u,m){if(c("csp-restrictions"))return()=>({[m]:null,...u});try{let v=`this.${m} = null;`;for(const f in u){const q=f.indexOf(".")?`["${f}"]`:`.${f}`;v+=`this${q} = ${JSON.stringify(u[f])};`}const p=new Function(v);return()=>new p}catch(v){return()=>({[m]:null,...u})}};n.createDefaultTemplate=function(u={}){return[{name:"New Feature",description:"",prototype:{attributes:z.clone(u)}}]};n.createDrawingInfo=function(u){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===u||"esriGeometryMultipoint"===
u?r.defaultPointSymbolJSON:"esriGeometryPolyline"===u?r.defaultPolylineSymbolJSON:r.defaultPolygonSymbolJSON}}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],function(n){const c=[252,146,31,255],z={type:"esriSMS",style:"esriSMSCircle",size:6,color:c,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},x={type:"esriSLS",style:"esriSLSSolid",width:.75,color:c};n.defaultColor=c;n.defaultOutlineColor=[153,
153,153,255];n.defaultPointSymbolJSON=z;n.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};n.defaultPolylineSymbolJSON=x;n.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};n.errorPointSymbolJSON={type:"esriSMS",
style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};n.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};n.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(n,c){c=new c.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",
esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});n.kebabDict=c;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/query/operations/query":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../request ../../../core/maybe ../../../core/urlUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ./pbfQueryUtils ./queryZScale ../../../tasks/operations/urlUtils".split(" "),
function(n,c,z,x,r,u,m,v,p,f){function q(b,d){const h=b.geometry;b=b.toJSON();x.isSome(h)&&(b.geometry=JSON.stringify(h),b.geometryType=u.getJsonType(h),b.inSR=h.spatialReference.wkid||JSON.stringify(h.spatialReference));b.groupByFieldsForStatistics&&(b.groupByFieldsForStatistics=b.groupByFieldsForStatistics.join(","));b.objectIds&&(b.objectIds=b.objectIds.join(","));b.orderByFields&&(b.orderByFields=b.orderByFields.join(","));!b.outFields||!b.returnDistinctValues&&(null!=d&&d.returnCountOnly||null!=
d&&d.returnExtentOnly||null!=d&&d.returnIdsOnly)?delete b.outFields:-1!==b.outFields.indexOf("*")?b.outFields="*":b.outFields=b.outFields.join(",");b.outSR?b.outSR=b.outSR.wkid||JSON.stringify(b.outSR):h&&(b.returnGeometry||b.returnCentroid)&&(b.outSR=b.inSR);b.returnGeometry&&delete b.returnGeometry;b.outStatistics&&(b.outStatistics=JSON.stringify(b.outStatistics));b.pixelSize&&(b.pixelSize=JSON.stringify(b.pixelSize));b.quantizationParameters&&(b.quantizationParameters=JSON.stringify(b.quantizationParameters));
b.parameterValues&&(b.parameterValues=JSON.stringify(b.parameterValues));b.rangeValues&&(b.rangeValues=JSON.stringify(b.rangeValues));b.dynamicDataSource&&(b.layer=JSON.stringify({source:b.dynamicDataSource}),delete b.dynamicDataSource);if(b.timeExtent){const {start:k,end:e}=b.timeExtent;if(null!=k||null!=e)b.time=k===e?k:`${null==k?"null":k},${null==e?"null":e}`;delete b.timeExtent}return b}function l(){l=c._asyncToGenerator(function*(b,d,h,k){b=x.isSome(d.timeExtent)&&d.timeExtent.isEmpty?{data:{features:[]}}:
yield a(b,d,"json",k);p.applyFeatureSetZUnitScaling(d,h,b.data);return b});return l.apply(this,arguments)}function t(){t=c._asyncToGenerator(function*(b,d,h,k){if(x.isSome(d.timeExtent)&&d.timeExtent.isEmpty)return Promise.resolve({data:h.createFeatureResult()});b=yield g(b,d,k);b.data=v.parsePBFFeatureQuery(b.data,h);return b});return t.apply(this,arguments)}function g(b,d,h){return a(b,d,"pbf",h)}function a(b,d,h,k={},e={}){const w="string"===typeof b?r.urlToObject(b):b;b=d.geometry?[d.geometry]:
[];k.responseType="pbf"===h?"array-buffer":"json";return m.normalizeCentralMeridian(b,null,k).then(y=>{y=y&&y[0];x.isSome(y)&&(d=d.clone(),d.geometry=y);y=f.mapParameters({...w.query,f:h,...e,...q(d,e)});return z(r.join(w.path,"query"),{...k,query:{...y,...k.query}})})}n.executeQuery=function(b,d,h,k){return l.apply(this,arguments)};n.executeQueryForCount=function(b,d,h){return x.isSome(d.timeExtent)&&d.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):a(b,d,"json",h,{returnIdsOnly:!0,returnCountOnly:!0})};
n.executeQueryForExtent=function(b,d,h){return x.isSome(d.timeExtent)&&d.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):a(b,d,"json",h,{returnExtentOnly:!0,returnCountOnly:!0}).then(k=>{const e=k.data;if(e.hasOwnProperty("extent"))return k;if(e.features)throw Error("Layer does not support extent calculation.");if(e.hasOwnProperty("count"))throw Error("Layer does not support extent calculation.");return k})};n.executeQueryForIds=function(b,d,h){return x.isSome(d.timeExtent)&&d.timeExtent.isEmpty?
Promise.resolve({data:{objectIds:[]}}):a(b,d,"json",h,{returnIdsOnly:!0})};n.executeQueryPBF=function(b,d,h,k){return t.apply(this,arguments)};n.executeQueryPBFBuffer=g;n.queryToQueryStringParameters=q;n.runQuery=a;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/query/operations/pbfQueryUtils":function(){define(["exports","./pbfFeatureServiceParser"],function(n,c){n.parsePBFFeatureQuery=function(z,x){var r=c.parseFeatureQuery(z,x);z=r.queryResult.featureResult;x=r.queryResult.queryGeometry;
r=r.queryResult.queryGeometryType;if(z&&z.features&&z.features.length&&z.objectIdFieldName){const u=z.objectIdFieldName;for(const m of z.features)m.attributes&&(m.objectId=m.attributes[u])}z&&(z.queryGeometry=x,z.queryGeometryType=r);return z};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/query/operations/pbfFeatureServiceParser":function(){define("exports ../../../core/Error ../../../core/maybe ../../../core/pbf ../../../layers/graphics/OptimizedGeometry ./pbfOptimizedFeatureSet".split(" "),
function(n,c,z,x,r,u){function m(A){return A>=y.length?null:y[A]}function v(A,D,E){for(E=D.createPointGeometry(E);A.next();)switch(A.tag()){case 3:{var G=A.getUInt32();G=A.pos()+G;let I=0;for(;A.pos()<G;)D.addCoordinatePoint(E,A.getSInt64(),I++);break}default:A.skip()}return E}function p(A,D,E){const G=D.createGeometry(E);for(E=2+(E.hasZ?1:0)+(E.hasM?1:0);A.next();)switch(A.tag()){case 2:var I=A.getUInt32();I=A.pos()+I;for(var L=0;A.pos()<I;)D.addLength(G,A.getUInt32(),L++);break;case 3:I=A.getUInt32();
I=A.pos()+I;L=0;for(D.allocateCoordinates(G);A.pos()<I;)D.addCoordinate(G,A.getSInt64(),L),L++,L===E&&(L=0);break;default:A.skip()}return G}function f(A){const D=new r;let E="esriGeometryPoint";for(;A.next();)switch(A.tag()){case 2:var G=A.getUInt32();for(G=A.pos()+G;A.pos()<G;)D.lengths.push(A.getUInt32());break;case 3:G=A.getUInt32();for(G=A.pos()+G;A.pos()<G;)D.coords.push(A.getSInt64());break;case 1:E=u.OPTIMIZED_GEOMETRY_TYPES[A.getEnum()];break;default:A.skip()}return{queryGeometry:D,queryGeometryType:E}}
function q(A){for(;A.next();)switch(A.tag()){case 1:return A.getString();case 2:return A.getFloat();case 3:return A.getDouble();case 4:return A.getSInt32();case 5:return A.getUInt32();case 6:return A.getInt64();case 7:return A.getUInt64();case 8:return A.getSInt64();case 9:return A.getBool();default:return A.skip(),null}return null}function l(A){const D={type:m(0)};for(;A.next();)switch(A.tag()){case 1:D.name=A.getString();break;case 2:D.type=m(A.getEnum());break;case 3:D.alias=A.getString();break;
case 4:var E=A.getEnum();E=E>=C.length?null:C[E];D.sqlType=E;break;case 5:A.skip();break;case 6:D.defaultValue=A.getString();break;default:A.skip()}return D}function t(A){const D={};for(;A.next();)switch(A.tag()){case 1:D.name=A.getString();break;case 2:D.isSystemMaintained=A.getBool();break;default:A.skip()}return D}function g(A,D,E,G){const I=D.createFeature(E);let L=0;for(;A.next();)switch(A.tag()){case 1:{const J=G[L++].name;I.attributes[J]=A.processMessage(q);break}case 2:I.geometry=A.processMessageWithArgs(p,
D,E);break;case 4:I.centroid=A.processMessageWithArgs(v,D,E);break;default:A.skip()}return I}function a(A){const D=[1,1,1,1];for(;A.next();)switch(A.tag()){case 1:D[0]=A.getDouble();break;case 2:D[1]=A.getDouble();break;case 4:D[2]=A.getDouble();break;case 3:D[3]=A.getDouble();break;default:A.skip()}return D}function b(A){const D=[0,0,0,0];for(;A.next();)switch(A.tag()){case 1:D[0]=A.getDouble();break;case 2:D[1]=A.getDouble();break;case 4:D[2]=A.getDouble();break;case 3:D[3]=A.getDouble();break;
default:A.skip()}return D}function d(A){const D={originPosition:0>=B.length?null:B[0]};for(;A.next();)switch(A.tag()){case 1:var E=A.getEnum();D.originPosition=E>=B.length?null:B[E];break;case 2:D.scale=A.processMessage(a);break;case 3:D.translate=A.processMessage(b);break;default:A.skip()}return D}function h(A){const D={};for(;A.next();)switch(A.tag()){case 1:D.shapeAreaFieldName=A.getString();break;case 2:D.shapeLengthFieldName=A.getString();break;case 3:D.units=A.getString();break;default:A.skip()}return D}
function k(A,D){for(D=D.createSpatialReference();A.next();)switch(A.tag()){case 1:D.wkid=A.getUInt32();break;case 5:D.wkt=A.getString();break;case 2:D.latestWkid=A.getUInt32();break;case 3:D.vcsWkid=A.getUInt32();break;case 4:D.latestVcsWkid=A.getUInt32();break;default:A.skip()}return D}function e(A,D){const E=D.createFeatureResult();E.geometryType=0>=D.geometryTypes.length?null:D.geometryTypes[0];let G=!1;for(;A.next();)switch(A.tag()){case 1:E.objectIdFieldName=A.getString();break;case 3:E.globalIdFieldName=
A.getString();break;case 4:E.geohashFieldName=A.getString();break;case 5:E.geometryProperties=A.processMessage(h);break;case 7:var I=A.getEnum();E.geometryType=I>=D.geometryTypes.length?null:D.geometryTypes[I];break;case 8:E.spatialReference=A.processMessageWithArgs(k,D);break;case 10:E.hasZ=A.getBool();break;case 11:E.hasM=A.getBool();break;case 12:E.transform=A.processMessage(d);break;case 9:I=A.getBool();E.exceededTransferLimit=I;break;case 13:D.addField(E,A.processMessage(l));break;case 15:G||
(D.prepareFeatures(E),G=!0);D.addFeature(E,A.processMessageWithArgs(g,D,E,E.fields));break;case 2:E.uniqueIdField=A.processMessage(t);break;default:A.skip()}D.finishFeatureResult(E);return E}function w(A,D){const E={};let G=null;for(;A.next();)switch(A.tag()){case 4:G=A.processMessageWithArgs(f);break;case 1:E.featureResult=A.processMessageWithArgs(e,D);break;default:A.skip()}z.isSome(G)&&E.featureResult&&D.addQueryGeometry(E,G);return E}const y="esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate esriFieldTypeOID esriFieldTypeGeometry esriFieldTypeBlob esriFieldTypeRaster esriFieldTypeGUID esriFieldTypeGlobalID esriFieldTypeXML".split(" "),
C="sqlTypeBigInt sqlTypeBinary sqlTypeBit sqlTypeChar sqlTypeDate sqlTypeDecimal sqlTypeDouble sqlTypeFloat sqlTypeGeometry sqlTypeGUID sqlTypeInteger sqlTypeLongNVarchar sqlTypeLongVarbinary sqlTypeLongVarchar sqlTypeNChar sqlTypeNVarchar sqlTypeOther sqlTypeReal sqlTypeSmallInt sqlTypeSqlXml sqlTypeTime sqlTypeTimestamp sqlTypeTimestamp2 sqlTypeTinyInt sqlTypeVarbinary sqlTypeVarchar".split(" "),B=["upperLeft","lowerLeft"];n.parseFeatureQuery=function(A,D){try{const E=new x(new Uint8Array(A),new DataView(A));
for(A={};E.next();)switch(E.tag()){case 2:A.queryResult=E.processMessageWithArgs(w,D);break;default:E.skip()}return A}catch(E){throw new c("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:E});}};n.parseFieldType=m;n.parseTransform=d;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/query/operations/pbfOptimizedFeatureSet":function(){define("exports ../../../core/unitUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/graphics/OptimizedFeature ../../../layers/graphics/OptimizedFeatureSet ../../../layers/graphics/OptimizedGeometry".split(" "),
function(n,c,z,x,r,u){const m=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let v=function(){function p(q){this.options=q;this.geometryTypes=m;this._vertexDimension=this._coordinatePtr=0}var f=p.prototype;f.createFeatureResult=function(){return new r};f.prepareFeatures=function(q){this._vertexDimension=2;q.hasZ&&this._vertexDimension++;q.hasM&&this._vertexDimension++};f.finishFeatureResult=function(q){if(q&&q.features&&q.hasZ&&this.options.sourceSpatialReference&&
q.spatialReference&&!z.equals(q.spatialReference,this.options.sourceSpatialReference)&&!q.spatialReference.vcsWkid){var l=c.getMetersPerVerticalUnitForSR(this.options.sourceSpatialReference),t=c.getMetersPerVerticalUnitForSR(q.spatialReference);l/=t;if(1!==l)for(const g of q.features)if(x.hasGeometry(g))for(q=g.geometry.coords,t=2;t<q.length;t+=3)q[t]*=l}};f.addFeature=function(q,l){q.features.push(l)};f.createFeature=function(){return new x["default"]};f.createSpatialReference=function(){return{wkid:0}};
f.createGeometry=function(){return new u};f.addField=function(q,l){q.fields.push(l)};f.allocateCoordinates=function(q){q.coords.length=q.lengths.reduce((l,t)=>l+t,0)*this._vertexDimension;this._coordinatePtr=0};f.addCoordinate=function(q,l){q.coords[this._coordinatePtr++]=l};f.addCoordinatePoint=function(q,l){q.coords.push(l)};f.addLength=function(q,l){q.lengths.push(l)};f.addQueryGeometry=function(q,l){q.queryGeometry=l.queryGeometry;q.queryGeometryType=l.queryGeometryType};f.createPointGeometry=
function(){return new u};return p}();n.OPTIMIZED_GEOMETRY_TYPES=m;n.OptimizedFeatureSetParserContext=v;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/query/operations/queryZScale":function(){define(["exports","./zscale"],function(n,c){n.applyFeatureSetZUnitScaling=function(z,x,r){if(r&&r.features&&r.hasZ&&(z=c.getGeometryZScaler(r.geometryType,x,z.outSpatialReference)))for(const u of r.features)z(u.geometry)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/query/operations/zscale":function(){define(["exports",
"../../../core/maybe","../../../core/unitUtils","../../../geometry/support/spatialReferenceUtils"],function(n,c,z,x){function r(m,v,p){if(null==m.hasM||m.hasZ)for(const f of v)for(const q of f)2<q.length&&(q[2]*=p)}function u(m,v,p){if(m)for(const l of m){m=l.geometry;var f=v,q=p;if(!c.isNone(m)&&m.spatialReference&&!x.equals(m.spatialReference,f)&&(f=z.getMetersPerVerticalUnitForSR(m.spatialReference)/q,1!==f))if("x"in m)null!=m.z&&(m.z*=f);else if("rings"in m)r(m,m.rings,f);else if("paths"in m)r(m,
m.paths,f);else if("points"in m&&(null==m.hasM||m.hasZ))for(const t of m.points)2<t.length&&(t[2]*=f)}}n.getGeometryZScaler=function(m,v,p){if(c.isNone(v)||c.isNone(p)||p.vcsWkid||x.equals(v,p))return null;v=z.getMetersPerVerticalUnitForSR(v);p=z.getMetersPerVerticalUnitForSR(p);const f=v/p;if(1===f)return null;switch(m){case "point":case "esriGeometryPoint":return q=>{q&&null!=q.z&&(q.z*=f)};case "polyline":case "esriGeometryPolyline":return q=>{if(q)for(const l of q.paths)for(const t of l)2<t.length&&
(t[2]*=f)};case "polygon":case "esriGeometryPolygon":return q=>{if(q)for(const l of q.rings)for(const t of l)2<t.length&&(t[2]*=f)};case "multipoint":case "esriGeometryMultipoint":return q=>{if(q)for(const l of q.points)2<l.length&&(l[2]*=f)};default:return null}};n.unapplyEditsZUnitScaling=function(m,v,p){if((m||v)&&p){var f=z.getMetersPerVerticalUnitForSR(p);u(m,p,f);u(v,p,f)}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/tasks/operations/urlUtils":function(){define(["exports"],function(n){function c(z){const x=
{};for(const r in z){if("declaredClass"===r)continue;const u=z[r];if(null!=u&&"function"!==typeof u)if(Array.isArray(u)){x[r]=[];for(let m=0;m<u.length;m++)x[r][m]=c(u[m])}else"object"===typeof u?u.toJSON&&(x[r]=JSON.stringify(u)):x[r]=u}return x}n.mapParameters=c;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/FeatureSetReaderJSON":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/OptimizedFeature ./FeatureSetReader".split(" "),
function(n,c,z,x,r,u){function m({coords:p,lengths:f}){let q=0;for(const l of f){for(f=1;f<l;f++)p[2*(q+f)]+=p[2*(q+f)-2],p[2*(q+f)+1]+=p[2*(q+f)-1];q+=l}}let v=function(p){function f(l,t,g){l=p.call(this,l)||this;l._featureIndex=-1;l._dateFields=new Set;l._geometryType=g;l._features=t;return l}c._inheritsLoose(f,p);f.fromFeatures=function(l,t,g){g=x.convertFromFeatures([],l,t,!1,!1,g);for(let a=0;a<g.length;a++)g[a].displayId=l[a].displayId;return f.fromOptimizedFeatures(g,t)};f.fromFeatureSet=function(l,
t){l=x.convertFromFeatureSet(l,t);return f.fromOptimizedFeatureSet(l)};f.fromOptimizedFeatureSet=function(l){const {features:t,geometryType:g}=l,a=f.fromOptimizedFeatures(t,g);a._exceededTransferLimit=l.exceededTransferLimit;a._transform=l.transform;for(const b of l.fields)"esriFieldTypeDate"===b.type&&a._dateFields.add(b.name);return a};f.fromOptimizedFeatures=function(l,t,g){const a=u.FeatureSetReader.createInstance();l=new f(a,l,t);l._transform=g;return l};var q=f.prototype;q.removeIds=function(l){const t=
new Set(l);this._features=this._features.filter(g=>!t.has(g.objectId))};q.append=function(l){for(const t of l)this._features.push(t)};q.getSize=function(){return this._features.length};q.getCursor=function(){return this.copy()};q.getQuantizationTransform=function(){return this._transform};q.getAttributeHash=function(){let l="";for(const t in this._current.attributes)l+=this._current.attributes[t];return l};q.getIndex=function(){return this._featureIndex};q.setIndex=function(l){this._featureIndex=
l};q.getObjectId=function(){return this._current.objectId};q.getDisplayId=function(){return this._current.displayId};q.setDisplayId=function(l){this._current.displayId=l};q.getGroupId=function(){return this._current.groupId};q.setGroupId=function(l){this._current.groupId=l};q.copy=function(){const l=new f(this.instance,this._features,this.geometryType);this.copyInto(l);return l};q.next=function(){for(;++this._featureIndex<this._features.length&&!this._getExists(););return this._featureIndex<this._features.length};
q.readLegacyFeature=function(){return x.convertToFeature(this._current,this.geometryType,this.hasZ,this.hasM)};q.readOptimizedFeature=function(){return this._current};q.readLegacyPointGeometry=function(){return this.readGeometry()?{x:this.getX(),y:this.getY()}:null};q.readLegacyGeometry=function(){const l=this.readGeometry();return x.convertToGeometry(l,this.geometryType,this.hasZ,this.hasM)};q.readLegacyCentroid=function(){const l=this.readCentroid();return z.isNone(l)?null:{x:l.coords[0]*this._sx+
this._tx,y:l.coords[1]*this._sy+this._ty}};q.readGeometryArea=function(){return r.hasGeometry(this._current)?x.getQuantizedArea(this._current.geometry,2):0};q.readUnquantizedGeometry=function(){var l=this.readGeometry();if("esriGeometryPoint"===this.geometryType||!l)return l;l=l.clone();m(l);return l};q.readHydratedGeometry=function(){var l=this._current.geometry;if(z.isNone(l))return null;l=l.clone();z.isSome(this._transform)&&x.unquantizeOptimizedGeometry(l,l,this.hasZ,this.hasM,this._transform);
return l};q.getXHydrated=function(){if(!r.hasGeometry(this._current))return 0;const l=this._current.geometry.coords[0],t=this.getQuantizationTransform();return z.isNone(t)?l:l*t.scale[0]+t.translate[0]};q.getYHydrated=function(){if(!r.hasGeometry(this._current))return 0;const l=this._current.geometry.coords[1],t=this.getQuantizationTransform();return z.isNone(t)?l:t.translate[1]-l*t.scale[1]};q.getX=function(){return r.hasGeometry(this._current)?this._current.geometry.coords[0]*this._sx+this._tx:
0};q.getY=function(){return r.hasGeometry(this._current)?this._current.geometry.coords[1]*this._sy+this._ty:0};q.readGeometry=function(){if(!r.hasGeometry(this._current))return null;const l=this._current.geometry.clone();if(l.isPoint)return l.coords[0]=l.coords[0]*this._sx+this._tx,l.coords[1]=l.coords[1]*this._sy+this._ty,l;let t=0;for(const g of l.lengths)l.coords[2*t]=l.coords[2*t]*this._sx+this._tx,l.coords[2*t+1]=l.coords[2*t+1]*this._sy+this._ty,t+=g;return l};q.readCentroid=function(){if(!r.hasGeometry(this._current))return null;
if(!this._current.centroid){var l=this._computeCentroid();if(!l)return null;l.coords[0]=(l.coords[0]-this._tx)/this._sx;l.coords[1]=(l.coords[1]-this._ty)/this._sy;this._current.centroid=l}l=this._current.centroid.clone();l.coords[0]=l.coords[0]*this._sx+this._tx;l.coords[1]=l.coords[1]*this._sx+this._ty;return l};q._readAttribute=function(l,t){var g=this._current.attributes[l];if(void 0!==g)return null!=g&&t&&this._dateFields.has(l)?new Date(g):g;g=this.readAttributes();l=l.toLocaleLowerCase().trim();
for(const a in g)if(a.toLocaleLowerCase().trim()===l)return l=this._current.attributes[a],null!=l&&t&&this._dateFields.has(a)?new Date(l):l};q.copyInto=function(l){p.prototype.copyInto.call(this,l);l._featureIndex=this._featureIndex;l._transform=this._transform;l._dateFields=this._dateFields};q._readAttributes=function(){return this._current.attributes};c._createClass(f,[{key:"_current",get:function(){return this._features[this._featureIndex]}},{key:"geometryType",get:function(){return this._geometryType}},
{key:"hasFeatures",get:function(){return!!this._features.length}},{key:"hasNext",get:function(){return this._featureIndex+1<this._features.length}},{key:"exceededTransferLimit",get:function(){return this._exceededTransferLimit}},{key:"hasZ",get:function(){return!1}},{key:"hasM",get:function(){return!1}}]);return f}(u.FeatureSetReader);n.FeatureSetReaderJSON=v;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/FeatureSetReaderPBF":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Error ../../../../../core/Logger ../../../../../core/maybe ../../../../../core/pbf ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/OptimizedFeature ../../../../../layers/graphics/OptimizedGeometry ./FeatureSetReader ./FeatureSetReaderPBFHeader".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q){function l(d){if(d<=b.small.delta.length)return b.small;if(d<=b.large.delta.length)return b.large;b.large.delta=new Int32Array(Math.round(1.25*d));b.large.decoded=new Int32Array(Math.round(1.25*d));return b.large}function t(d){var h=d.getLength();for(h=d.pos()+h;d.pos()<h&&d.next();)switch(d.tag()){case 1:return d.getString();case 2:return d.getFloat();case 3:return d.getDouble();case 4:return d.getSInt32();case 5:return d.getUInt32();case 6:return d.getInt64();case 7:return d.getUInt64();
case 8:return d.getSInt64();case 9:return d.getBool();default:return d.skip(),null}return null}function g(d,h,k,e){return 0===d*e-k*h&&0<d*k+h*e}const a=x.getLogger("esri.view.2d.layers.features.support.FeatureSetReaderPBF"),b={small:{delta:new Int32Array(128),decoded:new Int32Array(128)},large:{delta:new Int32Array(128E3),decoded:new Int32Array(128E3)}};x=function(d){function h(e,w,y,C){e=d.call(this,e)||this;e._hasNext=!1;e._isPoints=!1;e._featureIndex=-1;e._featureOffset=0;e._cache={area:0,unquantGeometry:void 0,
geometry:void 0,centroid:void 0,legacyFeature:void 0,optFeature:void 0};e._geometryType=C;e._reader=w;e._header=y;e._hasNext=y.hasFeatures;e._isPoints="esriGeometryPoint"===C;return e}c._inheritsLoose(h,d);h.fromBuffer=function(e,w,y=!1){a:{try{const A=new u(new Uint8Array(e),new DataView(e));for(;A.next();)switch(A.tag()){case 2:b:{for(var C=A.getMessage();C.next();)switch(C.tag()){case 1:var B=C.getMessage();break b;default:C.skip()}B=null}break a;default:A.skip()}}catch(A){e=new z("query:parsing-pbf",
"Error while parsing FeatureSet PBF payload",{error:A}),a.error(e)}B=null}e=B;y=q.parseHeader(e,"esriGeometryPoint"===w,y);B=f.FeatureSetReader.createInstance();return new h(B,e,y,w)};var k=h.prototype;k.getSize=function(){return this.size};k.getQuantizationTransform=function(){return this._header.transform};k.getCursor=function(){return this.copy()};k.getIndex=function(){return this._featureIndex};k.setIndex=function(e){this._cache.area=0;this._cache.unquantGeometry=void 0;this._cache.geometry=void 0;
this._cache.centroid=void 0;this._cache.legacyFeature=void 0;this._cache.optFeature=void 0;this._featureIndex=e};k.getAttributeHash=function(){let e="";this._header.fields.forEach(({index:w})=>{e+=this._readAttributeAtIndex(w)+"."});return e};k.getObjectId=function(){return this._readAttributeAtIndex(this._header.objectIdFieldIndex)};k.getDisplayId=function(){return this._header.displayIds[this._featureIndex]};k.setDisplayId=function(e){this._header.displayIds[this._featureIndex]=e};k.getGroupId=
function(){return this._header.groupIds[this._featureIndex]};k.setGroupId=function(e){this._header.groupIds[this._featureIndex]=e};k.readLegacyFeature=function(){if(void 0===this._cache.legacyFeature){var e,w=this.readCentroid();w={attributes:this.readAttributes(),geometry:this._isPoints?this.readLegacyPointGeometry():this.readLegacyGeometry(),centroid:null!=(e=w&&{x:w.coords[0],y:w.coords[1]})?e:null};return this._cache.legacyFeature=w}return this._cache.legacyFeature};k.readOptimizedFeature=function(){if(void 0===
this._cache.optFeature){const e=new v["default"](this.readGeometry(),this.readAttributes(),this.readCentroid());e.objectId=this.getObjectId();e.displayId=this.getDisplayId();return this._cache.optFeature=e}return this._cache.optFeature};k.getXHydrated=function(){const e=this._header.centroid[2*this._featureIndex],w=this.getQuantizationTransform();return r.isNone(w)?e:e*w.scale[0]+w.translate[0]};k.getYHydrated=function(){const e=this._header.centroid[2*this._featureIndex+1],w=this.getQuantizationTransform();
return r.isNone(w)?e:w.translate[1]-e*w.scale[1]};k.getX=function(){return this._header.centroid[2*this._featureIndex]*this._sx+this._tx};k.getY=function(){return this._header.centroid[2*this._featureIndex+1]*this._sy+this._ty};k.readLegacyPointGeometry=function(){const e=this.getX(),w=this.getY();return{x:e,y:w}};k.readLegacyGeometry=function(e){e=this.readGeometry(e);return m.convertToGeometry(e,this.geometryType,!1,!1)};k.readLegacyCentroid=function(){const e=this.readCentroid();if(!e)return null;
const [w,y]=e.coords;return{x:w,y}};k.readGeometryArea=function(){this._cache.area||this.readGeometry(!0);return this._cache.area};k.readUnquantizedGeometry=function(e=!1){if(void 0===this._cache.unquantGeometry){e=this.readGeometry(e);if(!e)return this._cache.unquantGeometry=null;var w=l(e.coords.length).decoded;e=e.clone(w);w=e.coords;let y=0;for(const C of e.lengths){for(let B=1;B<C;B++){const A=2*(y+B),D=2*(y+B-1);w[A]+=w[D];w[A+1]+=w[D+1]}y+=C}return this._cache.unquantGeometry=e}return this._cache.unquantGeometry};
k.readHydratedGeometry=function(){if(this._isPoints){if(268435455===this._header.centroid[2*this._featureIndex])return null;var e=this.getXHydrated(),w=this.getYHydrated();return new p([],[e,w])}e=this.readGeometry();if(!e)return null;e=e.clone();w=this.getQuantizationTransform();r.isSome(w)&&m.unquantizeOptimizedGeometry(e,e,this.hasZ,this.hasM,w);return e};k.readGeometry=function(e=!1){if(void 0===this._cache.geometry){var w=null;if(this._isPoints){if(268435455===this._header.centroid[2*this._featureIndex])return null;
e=this.getX();w=this.getY();w=new p([],[e,w])}else{const y=this._header.offsets.geometry[this._featureIndex],C=this._reader;if(0===y)return null;C.move(y);try{w=e?this._parseGeometryForDisplay(C):this._parseGeometry(C)}catch(B){return console.error("Failed to parse geometry!",B),null}}return this._cache.geometry=w}return this._cache.geometry};k.readCentroid=function(){if(void 0===this._cache.centroid){var e=null;e=this._header.centroid[2*this._featureIndex]+this._tx;const w=this._header.centroid[2*
this._featureIndex+1]+this._ty;if(268435455===e){if(e=this._computeCentroid())this._header.centroid[2*this._featureIndex]=e.coords[0]-this._tx,this._header.centroid[2*this._featureIndex+1]=e.coords[1]-this._ty}else e=new p([],[e,w]);return this._cache.centroid=e}return this._cache.centroid};k.copy=function(){var e=this._reader.clone();e=new h(this.instance,e,this._header,this.geometryType);this.copyInto(e);return e};k.next=function(){this._cache.area=0;this._cache.unquantGeometry=void 0;this._cache.geometry=
void 0;this._cache.centroid=void 0;this._cache.legacyFeature=void 0;for(this._cache.optFeature=void 0;++this._featureIndex<this.size&&!this._getExists(););return this._featureIndex<this.size};k._readAttribute=function(e,w){e=this._header.hasField(e)?e:e.toLowerCase().trim();var y=this._header.getFieldIndex(e);if(null!=y)return y=this._readAttributeAtIndex(y),w&&null!=y?this._header.isDateField(e)?new Date(y):y:y};k._readAttributes=function(){const e={};this._header.fields.forEach(({fieldName:w,index:y})=>
{e[w]=this._readAttributeAtIndex(y)});return e};k.copyInto=function(e){d.prototype.copyInto.call(this,e);e._featureIndex=this._featureIndex;e._featureOffset=this._featureOffset;e._hasNext=this._hasNext};k._readAttributeAtIndex=function(e){const w=this._reader;w.move(this._header.offsets.attributes[this._featureIndex*this._header.fieldCount+e]);return t(w)};k._parseGeometry=function(e){var w=e.getLength();w=e.pos()+w;const y=[],C=[];for(;e.pos()<w&&e.next();)switch(e.tag()){case 2:var B=e.getUInt32();
for(B=e.pos()+B;e.pos()<B;)C.push(e.getUInt32());break;case 3:B=e.getUInt32();B=e.pos()+B;y.push(e.getSInt32()+this._tx);y.push(e.getSInt32()+this._ty);this.hasZ&&e.getSInt32();for(this.hasM&&e.getSInt32();e.pos()<B;)y.push(e.getSInt32()),y.push(e.getSInt32()),this.hasZ&&e.getSInt32(),this.hasM&&e.getSInt32();break;default:e.skip()}return new p(C,y)};k._parseGeometryForDisplay=function(e){var w=e.getLength();const y=e.pos()+w,C=[];w=[];let B=0,A=0;var D=null;let E=0;const G="esriGeometryPolygon"===
this.geometryType;for(;e.pos()<y&&e.next();)switch(e.tag()){case 2:D=e.getUInt32();for(D=e.pos()+D;e.pos()<D;){var I=e.getUInt32();C.push(I);B+=I}D=l(2*B).delta;break;case 3:e.getUInt32();I=2+(this.hasZ?1:0)+(this.hasM?1:0);for(const S of C)if(A+I*S>D.length)for(var L=0;L<S;L++)e.getSInt32(),e.getSInt32(),this.hasZ&&e.getSInt32(),this.hasM&&e.getSInt32();else if(G){L=this.getAreaSimplificationThreshold(S,this._header.vertexCount);var J=2,F=1,K=e.getSInt32(),M=e.getSInt32();D[A++]=K;D[A++]=M;this.hasZ&&
e.getSInt32();this.hasM&&e.getSInt32();var R=e.getSInt32(),T=e.getSInt32();this.hasZ&&e.getSInt32();for(this.hasM&&e.getSInt32();J<S;){var Q=e.getSInt32();let X=e.getSInt32();this.hasZ&&e.getSInt32();this.hasM&&e.getSInt32();const aa=K+R,ma=M+T,ra=aa+Q,za=ma+X;.5*Math.abs(K*ma+aa*za+ra*M-K*za-aa*M-ra*ma)>=L?(E+=-.5*(aa-K)*(ma+M),1<F&&g(D[A-2],D[A-1],R,T)?(D[A-2]+=R,D[A-1]+=T):(D[A++]=R,D[A++]=T,F++),K=aa,M=ma):(Q+=R,X+=T);R=Q;T=X;J++}3>F?A-=2*F:(E+=-.5*(K+R-K)*(M+T+M),g(D[A-2],D[A-1],R,T)?(D[A-2]+=
R,D[A-1]+=T,w.push(F)):(D[A++]=R,D[A++]=T,w.push(++F)))}else{L=0;J=e.getSInt32();F=e.getSInt32();this.hasZ&&e.getSInt32();this.hasM&&e.getSInt32();D[A++]=J;D[A++]=F;L+=1;for(K=1;K<S;K++)M=e.getSInt32(),R=e.getSInt32(),T=J+M,Q=F+R,E+=-.5*(T-J)*(Q+F),this.hasZ&&e.getSInt32(),this.hasM&&e.getSInt32(),2<K&&g(D[A-2],D[A-1],M,R)?(D[A-2]+=M,D[A-1]+=R):(D[A++]=M,D[A++]=R,L+=1),J=T,F=Q;w.push(L)}break;default:e.skip()}this._cache.area=E;if(!w.length)return null;if(this._tx||this._ty){e=0;for(const S of w)D[2*
e]+=this._tx,D[2*e+1]+=this._ty,e+=S}return new p(w,D)};c._createClass(h,[{key:"geometryType",get:function(){return this._geometryType}},{key:"size",get:function(){return this._header.featureCount}},{key:"hasZ",get:function(){return!1}},{key:"hasM",get:function(){return!1}},{key:"stride",get:function(){return 2+(this.hasZ?1:0)+(this.hasM?1:0)}},{key:"hasFeatures",get:function(){return this._header.hasFeatures}},{key:"hasNext",get:function(){return this._hasNext}},{key:"exceededTransferLimit",get:function(){return this._header.exceededTransferLimit}}]);
return h}(f.FeatureSetReader);n.FeatureSetReaderPBF=x;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/FeatureSetReaderPBFHeader":function(){define(["exports","../../../../../core/Error","../../../../../rest/query/operations/pbfFeatureServiceParser"],function(n,c,z){let x=function(){function r(){this.fieldMap=new Map;this.fields=[];this.hasFeatures=!1;this.vertexCount=this.objectIdFieldIndex=this.featureCount=this.fieldCount=0;this.offsets={attributes:[],
geometry:[]};this.centroid=[]}var u=r.prototype;u.hasField=function(m){return this.fieldMap.has(m)};u.isDateField=function(m){var v;return null==(v=this.fieldMap.get(m))?void 0:v.isDate};u.getFieldIndex=function(m){var v;return null==(v=this.fieldMap.get(m))?void 0:v.index};return r}();n.FeatureSetHeader=x;n.parseHeader=function(r,u,m=!1){const v=r.pos(),p=new x;let f=0,q=0,l=null,t=null,g=null,a=!1;for(;r.next();)switch(r.tag()){case 1:l=r.getString();break;case 3:t=r.getString();break;case 12:g=
r.processMessage(z.parseTransform);break;case 9:p.exceededTransferLimit=r.getBool();if(p.exceededTransferLimit){p.offsets.geometry=m?new Float64Array(8E3):new Int32Array(8E3);p.centroid=m?new Float64Array(16E3):new Int32Array(16E3);for(var b=0;b<p.centroid.length;b++)p.centroid[b]=268435455}break;case 13:b=r;var d=b.getLength();d=b.pos()+d;for(var h={name:"",isDate:!1};b.pos()<d&&b.next();)switch(b.tag()){case 1:h.name=b.getString();break;case 2:"esriFieldTypeDate"===z.parseFieldType(b.getEnum())&&
(h.isDate=!0);break;default:b.skip()}b=h;h=b.name;d=b.name.toLowerCase().trim();h={fieldName:h,index:f++,isDate:b.isDate};p.fields.push(h);p.fieldMap.set(b.name,h);p.fieldMap.set(d,h);break;case 15:b=r.getLength();b=r.pos()+b;p.exceededTransferLimit||(d=p.centroid,p.offsets.geometry.push(0),d.push(268435455),d.push(268435455));!a&&p.exceededTransferLimit&&(a=!0,p.offsets.attributes=m?new Float64Array(8E3*f):new Uint32Array(8E3*f));for(d=q*f;r.pos()<b&&r.next();)switch(r.tag()){case 1:a?p.offsets.attributes[d++]=
r.pos():p.offsets.attributes.push(r.pos());h=r.getLength();r.skipLen(h);break;case 2:if(u)for(h=r.getLength(),h=r.pos()+h;r.pos()<h&&r.next();)switch(r.tag()){case 3:r.getUInt32();var k=r.getSInt64(),e=r.getSInt64();p.centroid[2*q]=k;p.centroid[2*q+1]=e;break;default:r.skip()}else p.offsets.geometry[q]=r.pos(),h=r.getLength(),p.vertexCount+=h,r.skipLen(h);break;case 4:h=r.getLength();for(h=r.pos()+h;r.pos()<h&&r.next();)switch(r.tag()){case 3:r.getUInt32();k=r.getSInt64();e=r.getSInt64();p.centroid[2*
q]=k;p.centroid[2*q+1]=e;break;default:r.skip()}break;default:r.skip()}q++;p.hasFeatures=!0;break;default:r.skip()}u=l||t;if(!u)throw new c("FeatureSet has no objectId or globalId field name");p.featureCount=q;p.fieldCount=f;p.objectIdFieldIndex=p.getFieldIndex(u);p.transform=g;p.displayIds=new Uint32Array(p.featureCount);p.groupIds=new Uint16Array(p.featureCount);r.move(v);return p};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/sources/DataTileSource":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../TimeExtent ../../../../../core/Evented ../../../../../core/has ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/accessorSupport/diffUtils ../../../../../rest/support/Query ./DataTileSubscription".split(" "),
function(n,c,z,x,r,u,m,v,p,f){function q(t,g){const a=new Set;t&&t.forEach(b=>a.add(b));g&&g.forEach(b=>a.add(b));return a.has("*")?["*"]:Array.from(a)}let l=function(){function t(a){this.events=new x;this._resolver=m.createResolver();this._didEdit=!1;this._subscriptions=new Map;this._outSR=a.outSR;this._serviceInfo=a.serviceInfo;this._onTileUpdateMessage=a.onMessage}var g=t.prototype;g.destroy=function(){};g._onMessage=function(){var a=c._asyncToGenerator(function*(b){var d;const h=this._subscriptions.get(b.id);
if(h)return b={...b,remove:null!=(d=b.remove)?d:[],status:b.status},this._onTileUpdateMessage(b,h.options)});return function(b){return a.apply(this,arguments)}}();g.update=function(a,b){var d,h=b.fields.length;b.outFields=q(null==(d=this._schema)?void 0:d.outFields,b.outFields);b.outFields=b.outFields.length>=.75*h?["*"]:b.outFields;b.outFields.sort();if(d=v.diff(this._schema,b)){r("esri-2d-update-debug")&&console.debug("Applying Update - Source:",d);h="orderByFields"in this._serviceInfo&&this._serviceInfo.orderByFields?
this._serviceInfo.orderByFields:this._serviceInfo.objectIdField+" ASC";h={returnCentroid:r("esri-2d-query-centroid-enabled")&&"esriGeometryPolygon"===this._serviceInfo.geometryType,returnGeometry:!0,timeReferenceUnknownClient:"stream"!==this._serviceInfo.type&&this._serviceInfo.timeReferenceUnknownClient,outFields:b.outFields,outSpatialReference:this._outSR,orderByFields:[h],where:b.definitionExpression||"1\x3d1",gdbVersion:b.gdbVersion,historicMoment:b.historicMoment,timeExtent:z.fromJSON(b.timeExtent),
customParameters:b.customParameters};var k=this._schema&&v.hasDiff(d,"outFields");this._schema&&v.hasDiffAny(d,["timeExtent","definitionExpression","gdbVersion","historicMoment","customParameters"])&&(a.why.mesh.push("Layer filter and/or custom parameters changed"),a.why.source.push("Layer filter and/or custom parameters changed"),a.mesh=!0,a.source=!0,a.queryFilter=!0);k&&(a.why.source.push("Layer required fields changed"),a.source=!0);v.diff(h,this._queryInfo)&&(this._queryInfo=h);this._schema=
b;this._resolver.resolve()}};g.whenInitialized=function(){return this._resolver.promise};g.applyUpdate=function(){var a=c._asyncToGenerator(function*(b){b.queryFilter||b.source&&this._didEdit?(this.refresh(),this._didEdit=!1):(this._subscriptions.forEach(d=>d.applyUpdate(b)),yield this.resend())});return function(b){return a.apply(this,arguments)}}();g.refresh=function(){for(const a of this._tiles())this.unsubscribe(a),this.subscribe(a)};g.subscribe=function(a){const b=new f.DataTileSubscription(a);
this._subscriptions.set(a.id,b)};g.unsubscribe=function(a){const b=this.get(a.id);u.isSome(b)&&b.abort();this._subscriptions.delete(a.id)};g.createQuery=function(a={}){return new p({...this._queryInfo,historicMoment:this._queryInfo.historicMoment?new Date(this._queryInfo.historicMoment):null,...a})};g.get=function(a){return this._subscriptions.has(a)?this._subscriptions.get(a):null};g.queryLastEditDate=function(){var a=c._asyncToGenerator(function*(){throw Error("Service does not support query type");
});return function(){return a.apply(this,arguments)}}();g.query=function(){var a=c._asyncToGenerator(function*(b){throw Error("Service does not support query");});return function(b){return a.apply(this,arguments)}}();g._tiles=function*(){const a=Array.from(this._subscriptions.values());for(const b of a)yield b.tile};g.edit=function(){var a=c._asyncToGenerator(function*(b,d){var h=this,k=Array.from(this._subscriptions.values());const e=k.map(({tile:w})=>w);for(const w of k)w.removeIds(d);b.length&&
(k=e.map(w=>{const y=this.createTileQuery(w);y.objectIds=b;return{tile:w,query:y}}).map(function(){var w=c._asyncToGenerator(function*({tile:y,query:C}){return{tile:y,result:yield h.query(C),query:C}});return function(y){return w.apply(this,arguments)}}()),k=(yield m.eachAlwaysValues(k)).map(function(){var w=c._asyncToGenerator(function*({tile:y,result:C}){(C.hasFeatures||d.length||b.length)&&(y=h._subscriptions.get(y.key.id))&&y.edit(C,b)});return function(y){return w.apply(this,arguments)}}()),
yield m.eachAlways(k));this._didEdit=!0});return function(b,d){return a.apply(this,arguments)}}();return t}();n.DataTileSource=l;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/TimeExtent":function(){define("./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/JSONSupport ./core/maybe ./core/timeUtils ./core/accessorSupport/decorators/property ./core/has ./core/accessorSupport/ensureType ./core/Logger ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l){var t;z=t=function(b){function d(k){k=b.call(this,k)||this;k.end=null;k.start=null;return k}n._inheritsLoose(d,b);var h=d.prototype;h.readEnd=function(k,e){return null!=e.end?new Date(e.end):null};h.writeEnd=function(k,e){e.end=k?k.getTime():null};h.readStart=function(k,e){return null!=e.start?new Date(e.start):null};h.writeStart=function(k,e){e.start=k?k.getTime():null};h.clone=function(){return new t({end:this.end,start:this.start})};h.equals=function(k){if(!k)return!1;
const e=x.isSome(this.start)?this.start.getTime():this.start,w=x.isSome(this.end)?this.end.getTime():this.end,y=x.isSome(k.start)?k.start.getTime():k.start;k=x.isSome(k.end)?k.end.getTime():k.end;return e===y&&w===k};h.expandTo=function(k){if(this.isEmpty||this.isAllTime)return this.clone();const e=x.andThen(this.start,y=>r.truncateDate(y,k)),w=x.andThen(this.end,y=>r.offsetDate(r.truncateDate(y,k),1,k));return new t({start:e,end:w})};h.intersection=function(k){if(!k)return this.clone();if(this.isEmpty||
k.isEmpty)return t.empty;if(this.isAllTime)return k.clone();if(k.isAllTime)return this.clone();var e=x.mapOr(this.start,-Infinity,A=>A.getTime());const w=x.mapOr(this.end,Infinity,A=>A.getTime()),y=x.mapOr(k.start,-Infinity,A=>A.getTime());k=x.mapOr(k.end,Infinity,A=>A.getTime());let C,B;y>=e&&y<=w?C=y:e>=y&&e<=k&&(C=e);w>=y&&w<=k?B=w:k>=e&&k<=w&&(B=k);return isNaN(C)||isNaN(B)?t.empty:(e=new t,e.start=-Infinity===C?null:new Date(C),e.end=Infinity===B?null:new Date(B),e)};h.offset=function(k,e){if(this.isEmpty||
this.isAllTime)return this.clone();const w=new t,{start:y,end:C}=this;x.isSome(y)&&(w.start=r.offsetDate(y,k,e));x.isSome(C)&&(w.end=r.offsetDate(C,k,e));return w};h.union=function(k){if(!k||k.isEmpty)return this.clone();if(this.isEmpty)return k.clone();if(this.isAllTime||k.isAllTime)return g.clone();const e=x.isSome(this.start)&&x.isSome(k.start)?new Date(Math.min(this.start.getTime(),k.start.getTime())):null;k=x.isSome(this.end)&&x.isSome(k.end)?new Date(Math.max(this.end.getTime(),k.end.getTime())):
null;return new t({start:e,end:k})};n._createClass(d,[{key:"isAllTime",get:function(){return this.equals(t.allTime)}},{key:"isEmpty",get:function(){return this.equals(t.empty)}}],[{key:"allTime",get:function(){return g}},{key:"empty",get:function(){return a}}]);return d}(z.JSONSupport);c.__decorate([u.property({type:Date,json:{write:{allowNull:!0}}})],z.prototype,"end",void 0);c.__decorate([f.reader("end")],z.prototype,"readEnd",null);c.__decorate([l.writer("end")],z.prototype,"writeEnd",null);c.__decorate([u.property({readOnly:!0,
json:{read:!1}})],z.prototype,"isAllTime",null);c.__decorate([u.property({readOnly:!0,json:{read:!1}})],z.prototype,"isEmpty",null);c.__decorate([u.property({type:Date,json:{write:{allowNull:!0}}})],z.prototype,"start",void 0);c.__decorate([f.reader("start")],z.prototype,"readStart",null);c.__decorate([l.writer("start")],z.prototype,"writeStart",null);z=t=c.__decorate([q.subclass("esri.TimeExtent")],z);const g=new z,a=new z({start:void 0,end:void 0});return z})},"esri/core/timeUtils":function(){define(["exports",
"./has"],function(n,c){function z(u,m,v){return 0===u?0:u*x[m]/x[v]}const x={milliseconds:1,seconds:1E3,minutes:6E4,hours:36E5,days:864E5,weeks:6048E5,months:26784E5,years:31536E6,decades:31536E7,centuries:31536E8},r={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",
setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};n.convertTime=z;n.makeUTCTime=function(u,m,v="milliseconds"){m=new Date(z(m,v,"milliseconds"));m.setUTCFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate());
return m};n.offsetDate=function(u,m,v){u=new Date(u.getTime());if(m&&v){const {getter:p,setter:f,multiplier:q}=r[v];u[f](u[p]()+m*q)}return u};n.offsetDateUTC=function(u,m,v="milliseconds"){u=u.getTime();m=z(m,v,"milliseconds");return new Date(u+m)};n.resetUTCDate=function(u,m){u=new Date(u.getTime());u.setUTCFullYear(m.getFullYear(),m.getMonth(),m.getDate());return u};n.timeSinceUTCMidnight=function(u,m="milliseconds"){const v=z(u.getUTCHours(),"hours","milliseconds"),p=z(u.getUTCMinutes(),"minutes",
"milliseconds"),f=z(u.getUTCSeconds(),"seconds","milliseconds");u=u.getUTCMilliseconds();return z(v+p+f+u,"milliseconds",m)};n.truncateDate=function(u,m){switch(m){case "milliseconds":return new Date(u.getTime());case "seconds":return new Date(u.getFullYear(),u.getMonth(),u.getDate(),u.getHours(),u.getMinutes(),u.getSeconds());case "minutes":return new Date(u.getFullYear(),u.getMonth(),u.getDate(),u.getHours(),u.getMinutes());case "hours":return new Date(u.getFullYear(),u.getMonth(),u.getDate(),u.getHours());
case "days":return new Date(u.getFullYear(),u.getMonth(),u.getDate());case "weeks":return new Date(u.getFullYear(),u.getMonth(),u.getDate()-u.getDay());case "months":return new Date(u.getFullYear(),u.getMonth(),1);case "years":return new Date(u.getFullYear(),0,1);case "decades":return new Date(u.getFullYear()-u.getFullYear()%10,0,1);case "centuries":return new Date(u.getFullYear()-u.getFullYear()%100,0,1);default:return new Date}};n.truncateLocalTime=function(u){const m=new Date(0);m.setHours(0);
m.setMinutes(0);m.setSeconds(0);m.setMilliseconds(0);m.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate());return m};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/support/Query":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils ../../layers/support/source/DataLayerSource ./QuantizationParameters ./StatisticDefinition ../../geometry/SpatialReference ../../geometry/Point".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a,b,d,h,k,e,w,y){var C;q=new r.JSONMap({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});r=new r.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",
esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});u=C=function(B){function A(E){E=B.call(this,E)||this;E.aggregateIds=null;E.cacheHint=void 0;E.datumTransformation=null;E.distance=void 0;E.dynamicDataSource=void 0;E.formatOf3DObjects=null;E.gdbVersion=null;E.geometry=null;E.geometryPrecision=void 0;E.groupByFieldsForStatistics=null;E.having=null;E.historicMoment=null;E.maxAllowableOffset=void 0;E.maxRecordCountFactor=
1;E.multipatchOption=null;E.num=void 0;E.objectIds=null;E.orderByFields=null;E.outFields=null;E.outSpatialReference=null;E.outStatistics=null;E.parameterValues=null;E.pixelSize=null;E.quantizationParameters=null;E.rangeValues=null;E.relationParameter=null;E.resultType=null;E.returnCentroid=!1;E.returnDistinctValues=!1;E.returnExceededLimitFeatures=!0;E.returnGeometry=!1;E.returnQueryGeometry=!1;E.returnM=void 0;E.returnZ=void 0;E.sourceSpatialReference=null;E.spatialRelationship="intersects";E.start=
void 0;E.sqlFormat=null;E.text=null;E.timeExtent=null;E.timeReferenceUnknownClient=!1;E.units=null;E.where=null;return E}n._inheritsLoose(A,B);A.from=function(E){return b.ensureClass(C,E)};var D=A.prototype;D.castDatumTransformation=function(E){return"number"===typeof E||"object"===typeof E?E:null};D.writeHistoricMoment=function(E,G){G.historicMoment=E&&E.getTime()};D.writeParameterValues=function(E,G){if(E){const I={};for(const L in E){const J=E[L];Array.isArray(J)?I[L]=J.map(F=>F instanceof Date?
F.getTime():F):I[L]=J instanceof Date?J.getTime():J}G.parameterValues=I}};D.writeStart=function(E,G){G.resultOffset=this.start;G.resultRecordCount=this.num||10;G.where="1\x3d1"};D.writeWhere=function(E,G){G.where=E||"1\x3d1"};D.clone=function(){return new C(m.clone({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,
having:this.having,historicMoment:v.isSome(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,
rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,
sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))};return A}(u.JSONSupport);u.MAX_MAX_RECORD_COUNT_FACTOR=5;c.__decorate([p.property({json:{write:!0}})],u.prototype,"aggregateIds",void 0);c.__decorate([p.property({type:Boolean,json:{write:!0}})],u.prototype,"cacheHint",void 0);c.__decorate([p.property({json:{write:!0}})],u.prototype,"datumTransformation",void 0);c.__decorate([f.cast("datumTransformation")],
u.prototype,"castDatumTransformation",null);c.__decorate([p.property({type:Number,json:{write:{overridePolicy(B){return{enabled:0<B}}}}})],u.prototype,"distance",void 0);c.__decorate([p.property({type:h.DataLayerSource,json:{write:!0}})],u.prototype,"dynamicDataSource",void 0);c.__decorate([p.property({type:String,json:{write:!0}})],u.prototype,"formatOf3DObjects",void 0);c.__decorate([p.property({type:String,json:{write:!0}})],u.prototype,"gdbVersion",void 0);c.__decorate([p.property({types:z.geometryTypes,
json:{read:d.fromJSON,write:!0}})],u.prototype,"geometry",void 0);c.__decorate([p.property({type:Number,json:{write:!0}})],u.prototype,"geometryPrecision",void 0);c.__decorate([p.property({type:[String],json:{write:!0}})],u.prototype,"groupByFieldsForStatistics",void 0);c.__decorate([p.property({type:String,json:{write:!0}})],u.prototype,"having",void 0);c.__decorate([p.property({type:Date})],u.prototype,"historicMoment",void 0);c.__decorate([a.writer("historicMoment")],u.prototype,"writeHistoricMoment",
null);c.__decorate([p.property({type:Number,json:{write:!0}})],u.prototype,"maxAllowableOffset",void 0);c.__decorate([p.property({type:Number,cast(B){return 1>B?1:B>C.MAX_MAX_RECORD_COUNT_FACTOR?C.MAX_MAX_RECORD_COUNT_FACTOR:B},json:{write:{overridePolicy(B){return{enabled:1<B}}}}})],u.prototype,"maxRecordCountFactor",void 0);c.__decorate([p.property({type:["xyFootprint"],json:{write:!0}})],u.prototype,"multipatchOption",void 0);c.__decorate([p.property({type:Number,json:{read:{source:"resultRecordCount"}}})],
u.prototype,"num",void 0);c.__decorate([p.property({json:{write:!0}})],u.prototype,"objectIds",void 0);c.__decorate([p.property({type:[String],json:{write:!0}})],u.prototype,"orderByFields",void 0);c.__decorate([p.property({type:[String],json:{write:!0}})],u.prototype,"outFields",void 0);c.__decorate([p.property({type:w,json:{name:"outSR",write:!0}})],u.prototype,"outSpatialReference",void 0);c.__decorate([p.property({type:[e],json:{write:{enabled:!0,overridePolicy(){return{enabled:v.isSome(this.outStatistics)&&
0<this.outStatistics.length}}}}})],u.prototype,"outStatistics",void 0);c.__decorate([p.property({json:{write:!0}})],u.prototype,"parameterValues",void 0);c.__decorate([a.writer("parameterValues")],u.prototype,"writeParameterValues",null);c.__decorate([p.property({type:y,json:{write:!0}})],u.prototype,"pixelSize",void 0);c.__decorate([p.property({type:k,json:{write:!0}})],u.prototype,"quantizationParameters",void 0);c.__decorate([p.property({type:[Object],json:{write:!0}})],u.prototype,"rangeValues",
void 0);c.__decorate([p.property({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],u.prototype,"relationParameter",void 0);c.__decorate([p.property({type:String,json:{write:!0}})],u.prototype,"resultType",void 0);c.__decorate([p.property({type:Boolean,json:{default:!1,write:!0}})],u.prototype,"returnCentroid",void 0);c.__decorate([p.property({type:Boolean,json:{default:!1,write:!0}})],u.prototype,
"returnDistinctValues",void 0);c.__decorate([p.property({type:Boolean,json:{default:!0,write:!0}})],u.prototype,"returnExceededLimitFeatures",void 0);c.__decorate([p.property({type:Boolean,json:{write:!0}})],u.prototype,"returnGeometry",void 0);c.__decorate([p.property({type:Boolean,json:{default:!1,write:!0}})],u.prototype,"returnQueryGeometry",void 0);c.__decorate([p.property({type:Boolean,json:{default:!1,write:!0}})],u.prototype,"returnM",void 0);c.__decorate([p.property({type:Boolean,json:{write:{overridePolicy(B){return{enabled:B}}}}})],
u.prototype,"returnZ",void 0);c.__decorate([p.property({type:w,json:{write:!0}})],u.prototype,"sourceSpatialReference",void 0);c.__decorate([t.enumeration(q,{ignoreUnknown:!1,name:"spatialRel"})],u.prototype,"spatialRelationship",void 0);c.__decorate([p.property({type:Number,json:{read:{source:"resultOffset"}}})],u.prototype,"start",void 0);c.__decorate([a.writer("start"),a.writer("num")],u.prototype,"writeStart",null);c.__decorate([p.property({type:String,json:{write:!0}})],u.prototype,"sqlFormat",
void 0);c.__decorate([p.property({type:String,json:{write:!0}})],u.prototype,"text",void 0);c.__decorate([p.property({type:x,json:{write:!0}})],u.prototype,"timeExtent",void 0);c.__decorate([p.property({type:Boolean,json:{default:!1,write:!0}})],u.prototype,"timeReferenceUnknownClient",void 0);c.__decorate([t.enumeration(r,{ignoreUnknown:!1}),p.property({json:{write:{overridePolicy(B){return{enabled:B&&0<this.distance}}}}})],u.prototype,"units",void 0);c.__decorate([p.property({type:String,json:{write:{overridePolicy(B){return{enabled:null!=
B||0<this.start}}}}})],u.prototype,"where",void 0);c.__decorate([a.writer("where")],u.prototype,"writeWhere",null);return u=C=c.__decorate([g.subclass("esri.rest.support.Query")],u)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(n,c,z){n.enumeration=function(x,r={}){var u;x=x instanceof c.JSONMap?x:new c.JSONMap(x,r);x={type:(null!=(u=null==r?void 0:r.ignoreUnknown)?u:1)?x.apiValues:String,readOnly:null==r?void 0:r.readOnly,
json:{type:x.jsonValues,read:null!=r&&r.readOnly?!1:{reader:x.read},write:{writer:x.write}}};void 0!==(null==r?void 0:r.default)&&(x.json.default=r.default);void 0!==(null==r?void 0:r.name)&&(x.json.name=r.name);return z.property(x)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/support/source/DataLayerSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/jsonMap ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/decorators/cast ../../../core/Logger ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/extensions/serializableProperty/reader ../Field ./MapLayerSource ./QueryTableDataSource ./RasterDataSource ./TableDataSource".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a,b,d,h,k){function e(){B||(B=g.createTypeReader({types:w()}));return B}function w(){A||(A={key:"type",base:null,typeMap:{"data-layer":n.DataLayerSource,"map-layer":b.MapLayerSource}});return A}var y,C;x=x.strict()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});n.JoinTableDataSource=y=function(D){function E(I){I=D.call(this,I)||this;I.type="join-table";return I}c._inheritsLoose(E,D);var G=E.prototype;G.readLeftTableSource=function(I,
L,J){return e()(I,L,J)};G.castLeftTableSource=function(I){return t.ensureOneOfType(w(),I)};G.readRightTableSource=function(I,L,J){return e()(I,L,J)};G.castRightTableSource=function(I){return t.ensureOneOfType(w(),I)};G.clone=function(){var I,L;const {leftTableKey:J,rightTableKey:F,leftTableSource:K,rightTableSource:M,joinType:R}=this,T={leftTableKey:J,rightTableKey:F,leftTableSource:null!=(I=null==K?void 0:K.clone())?I:void 0,rightTableSource:null!=(L=null==M?void 0:M.clone())?L:void 0,joinType:R};
return new y(T)};return E}(r.JSONSupport);z.__decorate([f.enumeration({joinTable:"join-table"})],n.JoinTableDataSource.prototype,"type",void 0);z.__decorate([u.property({type:String,json:{write:!0}})],n.JoinTableDataSource.prototype,"leftTableKey",void 0);z.__decorate([u.property({type:String,json:{write:!0}})],n.JoinTableDataSource.prototype,"rightTableKey",void 0);z.__decorate([u.property({json:{write:!0}})],n.JoinTableDataSource.prototype,"leftTableSource",void 0);z.__decorate([q.reader("leftTableSource")],
n.JoinTableDataSource.prototype,"readLeftTableSource",null);z.__decorate([v.cast("leftTableSource")],n.JoinTableDataSource.prototype,"castLeftTableSource",null);z.__decorate([u.property({json:{write:!0}})],n.JoinTableDataSource.prototype,"rightTableSource",void 0);z.__decorate([q.reader("rightTableSource")],n.JoinTableDataSource.prototype,"readRightTableSource",null);z.__decorate([v.cast("rightTableSource")],n.JoinTableDataSource.prototype,"castRightTableSource",null);z.__decorate([f.enumeration(x)],
n.JoinTableDataSource.prototype,"joinType",void 0);n.JoinTableDataSource=y=z.__decorate([l.subclass("esri.layers.support.source.JoinTableDataSource")],n.JoinTableDataSource);let B=null,A=null;v={key:"type",base:null,typeMap:{"join-table":n.JoinTableDataSource,"query-table":d.QueryTableDataSource,raster:h.RasterDataSource,table:k.TableDataSource}};n.DataLayerSource=C=function(D){function E(G){G=D.call(this,G)||this;G.type="data-layer";return G}c._inheritsLoose(E,D);E.prototype.clone=function(){const {fields:G,
dataSource:I}=this;return new C({fields:G,dataSource:I})};return E}(r.JSONSupport);z.__decorate([f.enumeration({dataLayer:"data-layer"})],n.DataLayerSource.prototype,"type",void 0);z.__decorate([u.property({type:[a],json:{write:!0}})],n.DataLayerSource.prototype,"fields",void 0);z.__decorate([u.property({types:v,json:{write:!0}})],n.DataLayerSource.prototype,"dataSource",void 0);n.DataLayerSource=C=z.__decorate([l.subclass("esri.layers.support.source.DataLayerSource")],n.DataLayerSource);n.DataLayerSource.from=
t.ensureType(n.DataLayerSource);Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/support/Field":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./domains ./fieldType".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t){var g;const a=new z.JSONMap({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});z=g=function(b){function d(k){k=b.call(this,k)||this;
k.alias=null;k.defaultValue=void 0;k.description=null;k.domain=null;k.editable=!0;k.length=-1;k.name=null;k.nullable=!0;k.type=null;k.valueType=null;return k}n._inheritsLoose(d,b);var h=d.prototype;h.readDescription=function(k,{description:e}){let w;try{w=JSON.parse(e)}catch(y){}return w?w.value:null};h.readValueType=function(k,{description:e}){let w;try{w=JSON.parse(e)}catch(y){}return w?a.fromJSON(w.fieldValueType):null};h.clone=function(){return new g({alias:this.alias,defaultValue:this.defaultValue,
description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})};return d}(x.JSONSupport);c.__decorate([r.property({type:String,json:{write:!0}})],z.prototype,"alias",void 0);c.__decorate([r.property({type:[String,Number],json:{write:{allowNull:!0}}})],z.prototype,"defaultValue",void 0);c.__decorate([r.property()],z.prototype,"description",void 0);c.__decorate([f.reader("description")],
z.prototype,"readDescription",null);c.__decorate([r.property({types:l.types,json:{read:{reader:l.fromJSON},write:!0}})],z.prototype,"domain",void 0);c.__decorate([r.property({type:Boolean,json:{write:!0}})],z.prototype,"editable",void 0);c.__decorate([r.property({type:m.Integer,json:{write:!0}})],z.prototype,"length",void 0);c.__decorate([r.property({type:String,json:{write:!0}})],z.prototype,"name",void 0);c.__decorate([r.property({type:Boolean,json:{write:!0}})],z.prototype,"nullable",void 0);c.__decorate([p.enumeration(t.kebabDict)],
z.prototype,"type",void 0);c.__decorate([r.property()],z.prototype,"valueType",void 0);c.__decorate([f.reader("valueType",["description"])],z.prototype,"readValueType",null);return z=g=c.__decorate([q.subclass("esri.layers.support.Field")],z)})},"esri/layers/support/domains":function(){define("exports ../../core/has ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),function(n,c,z,x,r,u){c={key:"type",base:x,typeMap:{range:u,"coded-value":z,inherited:r}};n.CodedValueDomain=z;
n.DomainBase=x;n.InheritedDomain=r;n.RangeDomain=u;n.fromJSON=function(m){if(!m||!m.type)return null;switch(m.type){case "range":return u.fromJSON(m);case "codedValue":return z.fromJSON(m);case "inherited":return r.fromJSON(m)}return null};n.types=c;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/support/CodedValueDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./CodedValue ./Domain".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q){var l;r=l=function(t){function g(b){b=t.call(this,b)||this;b.codedValues=null;b.type="coded-value";return b}n._inheritsLoose(g,t);var a=g.prototype;a.getName=function(b){let d=null;if(this.codedValues){const h=String(b);this.codedValues.some(k=>{String(k.code)===h&&(d=k.name);return!!d})}return d};a.clone=function(){return new l({codedValues:z.clone(this.codedValues),name:this.name})};return g}(q);c.__decorate([x.property({type:[f["default"]],json:{write:!0}})],r.prototype,
"codedValues",void 0);c.__decorate([v.enumeration({codedValue:"coded-value"})],r.prototype,"type",void 0);return r=l=c.__decorate([p.subclass("esri.layers.support.CodedValueDomain")],r)})},"esri/layers/support/CodedValue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(n,c,z,x,r,u,m,v,p){var f;n.CodedValue=f=function(q){function l(t){t=q.call(this,t)||this;t.name=null;t.code=null;return t}c._inheritsLoose(l,q);l.prototype.clone=function(){return new f({name:this.name,code:this.code})};return l}(x.JSONSupport);z.__decorate([r.property({type:String,json:{write:!0}})],n.CodedValue.prototype,"name",void 0);z.__decorate([r.property({type:[String,Number],json:{write:!0}})],n.CodedValue.prototype,"code",void 0);n.CodedValue=f=z.__decorate([p.subclass("esri.layers.support.CodedValue")],
n.CodedValue);n["default"]=n.CodedValue;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/support/Domain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),function(n,c,z,x,r,u,m,v,p,f){z=
new z.JSONMap({inherited:"inherited",codedValue:"coded-value",range:"range"});x=function(q){function l(t){t=q.call(this,t)||this;t.name=null;t.type=null;return t}n._inheritsLoose(l,q);return l}(x.JSONSupport);c.__decorate([r.property({type:String,json:{write:!0}})],x.prototype,"name",void 0);c.__decorate([p.enumeration(z)],x.prototype,"type",void 0);return x=c.__decorate([f.subclass("esri.layers.support.Domain")],x)})},"esri/layers/support/InheritedDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(n,c,z,x,r,u,m,v,p){var f;z=f=function(q){function l(t){t=q.call(this,t)||this;t.type="inherited";return t}n._inheritsLoose(l,q);l.prototype.clone=function(){return new f};return l}(p);c.__decorate([m.enumeration({inherited:"inherited"})],z.prototype,"type",void 0);return z=f=c.__decorate([v.subclass("esri.layers.support.InheritedDomain")],z)})},"esri/layers/support/RangeDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(n,c,z,x,r,u,m,v,p){var f;x=f=function(q){function l(t){t=q.call(this,t)||this;t.maxValue=null;t.minValue=null;t.type="range";return t}n._inheritsLoose(l,q);l.prototype.clone=function(){return new f({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};return l}(p);c.__decorate([z.property({type:Number,json:{type:[Number],read:{source:"range",reader(q,l){return l.range&&l.range[1]}},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",
writer(q,l,t){l[t]=[this.minValue||0,q]}}}})],x.prototype,"maxValue",void 0);c.__decorate([z.property({type:Number,json:{type:[Number],read:{source:"range",reader(q,l){return l.range&&l.range[0]}},write:{target:"range",writer(q,l,t){l[t]=[q,this.maxValue||0]}}}})],x.prototype,"minValue",void 0);c.__decorate([m.enumeration({range:"range"})],x.prototype,"type",void 0);return x=f=c.__decorate([v.subclass("esri.layers.support.RangeDomain")],x)})},"esri/layers/support/source/MapLayerSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(n,c,z,x,r,u,m,v,p,f){var q;n.MapLayerSource=q=function(l){function t(g){g=l.call(this,g)||this;g.type="map-layer";return g}c._inheritsLoose(t,l);t.prototype.clone=function(){const {mapLayerId:g,gdbVersion:a}=this;return new q({mapLayerId:g,gdbVersion:a})};return t}(x.JSONSupport);z.__decorate([p.enumeration({mapLayer:"map-layer"})],n.MapLayerSource.prototype,"type",void 0);z.__decorate([r.property({type:m.Integer,json:{write:!0}})],n.MapLayerSource.prototype,"mapLayerId",void 0);z.__decorate([r.property({type:String,
json:{write:!0}})],n.MapLayerSource.prototype,"gdbVersion",void 0);n.MapLayerSource=q=z.__decorate([f.subclass("esri.layers.support.source.MapLayerSource")],n.MapLayerSource);Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/support/source/QueryTableDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ../../../geometry/SpatialReference ../../../geometry/support/typeUtils".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t){var g;n.QueryTableDataSource=g=function(a){function b(d){d=a.call(this,d)||this;d.type="query-table";return d}c._inheritsLoose(b,a);b.prototype.clone=function(){var d;const {workspaceId:h,query:k,oidFields:e,spatialReference:w,geometryType:y}=this,C={workspaceId:h,query:k,oidFields:e,spatialReference:null!=(d=null==w?void 0:w.clone())?d:void 0,geometryType:y};return new g(C)};return b}(r.JSONSupport);z.__decorate([f.enumeration({queryTable:"query-table"})],n.QueryTableDataSource.prototype,
"type",void 0);z.__decorate([u.property({type:String,json:{write:!0}})],n.QueryTableDataSource.prototype,"workspaceId",void 0);z.__decorate([u.property({type:String,json:{write:!0}})],n.QueryTableDataSource.prototype,"query",void 0);z.__decorate([u.property({type:String,json:{write:!0}})],n.QueryTableDataSource.prototype,"oidFields",void 0);z.__decorate([u.property({type:l,json:{write:!0}})],n.QueryTableDataSource.prototype,"spatialReference",void 0);z.__decorate([f.enumeration(t.featureGeometryTypeKebabDictionary)],
n.QueryTableDataSource.prototype,"geometryType",void 0);n.QueryTableDataSource=g=z.__decorate([q.subclass("esri.layers.support.source.QueryTableDataSource")],n.QueryTableDataSource);Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/support/source/RasterDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(n,c,z,x,r,u,m,v,p,f){var q;n.RasterDataSource=q=function(l){function t(g){g=l.call(this,g)||this;g.type="raster";return g}c._inheritsLoose(t,l);t.prototype.clone=function(){const {workspaceId:g,dataSourceName:a}=this;return new q({workspaceId:g,dataSourceName:a})};return t}(x.JSONSupport);z.__decorate([p.enumeration({raster:"raster"})],n.RasterDataSource.prototype,"type",void 0);z.__decorate([r.property({type:String,json:{write:!0}})],n.RasterDataSource.prototype,"dataSourceName",void 0);
z.__decorate([r.property({type:String,json:{write:!0}})],n.RasterDataSource.prototype,"workspaceId",void 0);n.RasterDataSource=q=z.__decorate([f.subclass("esri.layers.support.source.RasterDataSource")],n.RasterDataSource);Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/support/source/TableDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(n,c,z,x,r,u,m,v,p,f){var q;n.TableDataSource=q=function(l){function t(g){g=l.call(this,g)||this;g.type="table";return g}c._inheritsLoose(t,l);t.prototype.clone=function(){const {workspaceId:g,gdbVersion:a,dataSourceName:b}=this;return new q({workspaceId:g,gdbVersion:a,dataSourceName:b})};return t}(x.JSONSupport);z.__decorate([p.enumeration({table:"table"})],n.TableDataSource.prototype,"type",void 0);z.__decorate([r.property({type:String,json:{write:!0}})],n.TableDataSource.prototype,"workspaceId",
void 0);z.__decorate([r.property({type:String,json:{write:!0}})],n.TableDataSource.prototype,"gdbVersion",void 0);z.__decorate([r.property({type:String,json:{write:!0}})],n.TableDataSource.prototype,"dataSourceName",void 0);n.TableDataSource=q=z.__decorate([f.subclass("esri.layers.support.source.TableDataSource")],n.TableDataSource);Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/support/QuantizationParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../geometry/Extent".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l){var t;z=new x.JSONMap({upperLeft:"upper-left",lowerLeft:"lower-left"});r=t=function(g){function a(b){b=g.call(this,b)||this;b.extent=null;b.mode="view";b.originPosition="upper-left";b.tolerance=1;return b}n._inheritsLoose(a,g);a.prototype.clone=function(){return new t(u.clone({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))};return a}(r.JSONSupport);c.__decorate([m.property({type:l,json:{write:{overridePolicy(){return{enabled:"view"===
this.mode}}}}})],r.prototype,"extent",void 0);c.__decorate([m.property({type:["view","edit"],json:{write:!0}})],r.prototype,"mode",void 0);c.__decorate([m.property({type:String,json:{read:z.read,write:z.write}})],r.prototype,"originPosition",void 0);c.__decorate([m.property({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],r.prototype,"tolerance",void 0);return r=t=c.__decorate([q.subclass("esri.rest.support.QuantizationParameters")],r)})},"esri/rest/support/StatisticDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q){var l;z=new z.JSONMap({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete"});x=l=function(t){function g(b){b=t.call(this,b)||this;b.maxPointCount=void 0;b.maxRecordCount=void 0;b.maxVertexCount=void 0;b.onStatisticField=null;b.outStatisticFieldName=null;b.statisticType=null;b.statisticParameters=null;return b}n._inheritsLoose(g,t);var a=
g.prototype;a.writeStatisticParameters=function(b,d){if("percentile-continuous"===this.statisticType||"percentile-discrete"===this.statisticType)d.statisticParameters=r.clone(b)};a.clone=function(){return new l({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:r.clone(this.statisticParameters)})};return g}(x.JSONSupport);
c.__decorate([u.property({type:Number,json:{write:!0}})],x.prototype,"maxPointCount",void 0);c.__decorate([u.property({type:Number,json:{write:!0}})],x.prototype,"maxRecordCount",void 0);c.__decorate([u.property({type:Number,json:{write:!0}})],x.prototype,"maxVertexCount",void 0);c.__decorate([u.property({type:String,json:{write:!0}})],x.prototype,"onStatisticField",void 0);c.__decorate([u.property({type:String,json:{write:!0}})],x.prototype,"outStatisticFieldName",void 0);c.__decorate([u.property({type:String,
json:{read:{source:"statisticType",reader:z.read},write:{target:"statisticType",writer:z.write}}})],x.prototype,"statisticType",void 0);c.__decorate([u.property({type:Object})],x.prototype,"statisticParameters",void 0);c.__decorate([q.writer("statisticParameters")],x.prototype,"writeStatisticParameters",null);return x=l=c.__decorate([f.subclass("esri.rest.support.StatisticDefinition")],x)})},"esri/views/2d/layers/features/sources/DataTileSubscription":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/CircularArray ../../../../../core/maybe ../support/FeatureSetReaderJSON ../support/UpdateToken".split(" "),
function(n,c,z,x,r,u){let m=function(){function v(f){this.requests={done:[],stream:new z(10)};this._edits=null;this._abortController=new AbortController;this.didSend=this._done=!1;this.tile=f}var p=v.prototype;p.end=function(){this._done=!0};p.clear=function(){this.requests.done=[]};p.applyUpdate=function(f){this.requests.done.forEach(q=>q.message.status.unset(f));x.isSome(this._edits)&&this._edits.status.unset(f)};p.add=function(f){var q;f.message.status=null!=(q=f.message.status)?q:u.UpdateToken.empty();
f.message.end&&this.requests.done.forEach(l=>{x.isSome(l.message)&&l.message.end&&(l.message.end=!1)});this.requests.done.push(f)};p.edit=function(f,q){const l=f.getQuantizationTransform(),t=f.geometryType,g=Array.from(f.features()),a=g.map(b=>b.objectId);q=[...q,...a];this.removeIds(q);this._invalidate();x.isNone(this._edits)?this._edits={type:"append",addOrUpdate:r.FeatureSetReaderJSON.fromOptimizedFeatures(g,t,x.unwrap(l)),id:this.tile.id,status:u.UpdateToken.empty(),end:!0}:(this.requests.done.forEach(b=>
b.message.end=!1),x.unwrap(this._edits.addOrUpdate).append(f.features()))};p.readers=function*(){for(const {message:f}of this.requests.done)x.isSome(f.addOrUpdate)&&(yield f.addOrUpdate);x.isSome(this._edits)&&x.isSome(this._edits.addOrUpdate)&&(yield this._edits.addOrUpdate)};p._invalidate=function(){for(const f of this.requests.done)f.message.status=u.UpdateToken.empty();x.isSome(this._edits)&&(this._edits.status=u.UpdateToken.empty())};p.removeIds=function(f){this._invalidate();for(const {message:q}of this.requests.done){const l=
q.addOrUpdate;x.isSome(l)&&(l.removeIds(f),l.isEmpty&&(q.addOrUpdate=null))}x.isSome(this._edits)&&x.isSome(this._edits.addOrUpdate)&&this._edits.addOrUpdate.removeIds(f);this.requests.done=this.requests.done.filter(q=>q.message.addOrUpdate||q.message.end)};p.abort=function(){this._abortController.abort()};c._createClass(v,[{key:"signal",get:function(){return this._abortController.signal}},{key:"options",get:function(){return{signal:this._abortController.signal}}},{key:"empty",get:function(){return!this.requests.done.length}},
{key:"edits",get:function(){return this._edits}},{key:"done",get:function(){return this._done}}]);return v}();n.DataTileSubscription=m;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/UpdateToken":function(){define(["exports"],function(n){let c=function(){function z(){this.source=!1;this.targets={feature:!1,aggregate:!1};this.storage={filters:!1,data:!1};this.queryFilter=this.mesh=!1;this.why={mesh:[],source:[]}}z.create=function(r){const u=new z;for(const m in r){const v=
r[m];if("object"===typeof v)for(const p in v)u[m][p]=v[p];u[m]=v}return u};z.empty=function(){return z.create({})};z.all=function(){return z.create({source:!0,targets:{feature:!0,aggregate:!0},storage:{filters:!0,data:!0},mesh:!0})};var x=z.prototype;x.unset=function(r){r.source&&(this.source=!1);r.targets.feature&&(this.targets.feature=!1);r.targets.aggregate&&(this.targets.aggregate=!1);r.storage.filters&&(this.storage.filters=!1);r.storage.data&&(this.storage.data=!1);r.mesh&&(this.mesh=!1);r.queryFilter&&
(this.queryFilter=!1)};x.any=function(){return this.source||this.mesh||this.storage.filters||this.storage.data||this.targets.feature||this.targets.aggregate||this.queryFilter};x.describe=function(){let r=0,u="";if(this.mesh){r+=20;u+="-\x3e (20) Mesh needs update\n";for(const m of this.why.mesh)u+=`    + ${m}\n`}if(this.source){r+=10;u+="-\x3e (10) The source needs update\n";for(const m of this.why.source)u+=`    + ${m}\n`}this.targets.feature&&(r+=5,u+="-\x3e (5) Feature target parameters changed\n");
this.storage.filters&&(r+=5,u+="-\x3e (5) Feature filter parameters changed\n");this.targets.aggregate&&(r+=4,u+="-\x3e (4) Aggregate target parameters changed\n");this.storage.data&&(r+=1,u+="-\x3e (1) Texture storage parameters changed");console.debug(`Applying ${5>r?"Fastest":10>r?"Fast":15>r?"Moderate":20>r?"Slow":"Very Slow"} update of cost ${r}/45 `);console.debug(u)};x.toJSON=function(){return{queryFilter:this.queryFilter,source:this.source,targets:this.targets,storage:this.storage,mesh:this.mesh}};
return z}();n.UpdateToken=c;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/support/QueueProcessor":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/scheduling".split(" "),function(n,c,z,x,r,u){let m=function(p,f){this.item=p;this.controller=f;this.promise=null},v=function(){function p(q){this._deferreds=new Map;this._controllers=new Map;this._processingItems=new Map;this._isPaused=!1;this._task=
this._schedule=null;this.concurrency=1;q.concurrency&&(this.concurrency=q.concurrency);this._queue=new r(q.peeker);this.process=q.process;const l=q.scheduler;q.priority&&z.isSome(l)&&(this._task=l.registerTask(q.priority,this))}var f=p.prototype;f.destroy=function(){this.clear();this._schedule&&(this._schedule.remove(),this._schedule=null);this._task&&(this._task.remove(),this._task=null)};f.abort=function(q){(q=this._controllers.get(q))&&q.abort()};f.clear=function(){this._queue.clear();const q=
[];this._controllers.forEach(l=>q.push(l));this._controllers.clear();q.forEach(l=>l.abort());this._processingItems.clear();this._cancelNext()};f.forEach=function(q){this._deferreds.forEach((l,t)=>q(t))};f.get=function(q){return(q=this._deferreds.get(q))?q.promise:void 0};f.isOngoing=function(q){return this._processingItems.has(q)};f.has=function(q){return this._deferreds.has(q)};f.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};f.push=function(q,l){const t=this.get(q);if(t)return t;
const g=x.createAbortController();let a=null;l&&(a=x.onAbort(l,()=>g.abort()));const b=()=>{d.remove();z.isSome(a)&&a.remove();this._deferreds.delete(q);this._controllers.delete(q);this._queue.remove(q);this._processingItems.delete(q);this._scheduleNext()},d=x.onAbortOrThrow(g.signal,()=>{const k=this._processingItems.get(q);k&&k.controller.abort();b();h.reject(x.createAbortError())}),h=x.createDeferred();this._deferreds.set(q,h);this._controllers.set(q,g);h.promise.then(b,b);this._queue.push(q);
this._scheduleNext();return h.promise};f.last=function(){return this._queue.last()};f.peek=function(){return this._queue.peek()};f.popLast=function(){return this._queue.popLast()};f.reset=function(){const q=[];this._processingItems.forEach(l=>q.push(l));this._processingItems.clear();for(const l of q)this._queue.push(l.item),l.controller.abort();this._scheduleNext()};f.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};f.takeAll=function(){const q=[];for(;this._queue.length;)q.push(this._queue.pop());
this.clear();return q};f.runTask=function(q){for(;!q.done&&0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),q.madeProgress()};f._scheduleNext=function(){this._task||this._isPaused||this._schedule||(this._schedule=u.schedule(()=>{this._schedule=null;this._next()}))};f._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};f._cancelNext=function(){this._schedule&&(this._schedule.remove(),
this._schedule=null)};f._processResult=function(q,l){this._canProcessFulfillment(q)&&(this._scheduleNext(),this._deferreds.get(q.item).resolve(l))};f._processError=function(q,l){this._canProcessFulfillment(q)&&(this._scheduleNext(),this._deferreds.get(q.item).reject(l))};f._canProcessFulfillment=function(q){return this._deferreds.get(q.item)&&this._processingItems.get(q.item)===q?!0:!1};f._process=function(q){if(!z.isNone(q)){var l=x.createAbortController(),t=new m(q,l);this._processingItems.set(q,
t);try{var g=this.process(q,l.signal)}catch(a){this._processError(t,a)}x.isPromiseLike(g)?(t.promise=g,g.then(a=>this._processResult(t,a),a=>this._processError(t,a))):this._processResult(t,g)}};c._createClass(p,[{key:"length",get:function(){return this._processingItems.size+this._queue.length}},{key:"running",get:function(){return!this._isPaused&&0<this._queue.length&&this._processingItems.size<this.concurrency}},{key:"test",get:function(){return{update:q=>this.runTask(q)}}}]);return p}();n.QueueProcessor=
v;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/Queue":function(){define(["../chunks/_rollupPluginBabelHelpers","./maybe"],function(n,c){return function(){function z(r=u=>u.values().next().value){this._peeker=r;this._items=new Set}var x=z.prototype;x.clear=function(){this._items.clear()};x.last=function(){if(0!==this._items.size){for(var r of this._items);return r}};x.peek=function(){if(0!==this._items.size)return this._peeker(this._items)};x.push=function(r){this.contains(r)||this._items.add(r)};
x.contains=function(r){return this._items.has(r)};x.pop=function(){if(0!==this.length){var r=this.peek();this._items.delete(c.assumeNonNull(r));return r}};x.popLast=function(){if(0!==this.length){var r=this.last();this._items.delete(c.assumeNonNull(r));return r}};x.remove=function(r){this._items.delete(r)};x.filter=function(r){this._items.forEach(u=>{r(u)||this._items.delete(u)});return this};n._createClass(z,[{key:"length",get:function(){return this._items.size}}]);return z}()})},"esri/views/2d/layers/features/sources/GeoEventSource":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/has ../../../../../core/maybe ../../../../../chunks/rbush ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/OptimizedGeometry ../../../../../layers/graphics/data/StreamFeatureManager ../../../../../layers/graphics/sources/connections/createConnection ./DataTileSource ../support/FeatureSetReaderJSON ../support/UpdateToken".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l){function t(d,h){const k=d.weakClone();if(x.isSome(d.geometry)){const e=u.quantizeX(h,d.geometry.coords[0]);d=u.quantizeY(h,d.geometry.coords[1]);k.geometry=new m([],[e,d])}return k}function g(d){switch(d){case "esriGeometryPoint":return t;default:return(h,k)=>{const e=h.weakClone(),w=new m;h=u.quantizeOptimizedGeometry(w,h.geometry,!1,!1,d,k,!1,!1);e.geometry=h;return e}}}function a(d){switch(d){case "esriGeometryPoint":return h=>x.isSome(h.geometry)?{minX:h.geometry.coords[0],
minY:h.geometry.coords[1],maxX:h.geometry.coords[0],maxY:h.geometry.coords[1]}:{minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity};default:return h=>{let k=Infinity,e=Infinity,w=-Infinity,y=-Infinity;x.isSome(h.geometry)&&h.geometry.forEachVertex((C,B)=>{k=Math.min(k,C);e=Math.min(e,B);w=Math.max(w,C);y=Math.max(y,B)});return{minX:k,minY:e,maxX:w,maxY:y}}}}let b=function(){function d(k,e){this.onUpdate=k;this._geometryType=e;this._objectIdToFeature=new Map}var h=d.prototype;h.add=function(k){this._objectIdToFeature.set(k.objectId,
k);this._index=null};h.get=function(k){return this._objectIdToFeature.has(k)?this._objectIdToFeature.get(k):null};h.forEach=function(k){this._objectIdToFeature.forEach(k)};h.search=function(k){if(!this._index){{var e=this._features;const w=r.rbush(9,a(this._geometryType));w.load(e);e=w}this._index=e}return this._index.search({minX:k.bounds[0],minY:k.bounds[1],maxX:k.bounds[2],maxY:k.bounds[3]})};h.removeById=function(k){const e=this._objectIdToFeature.get(k);return e?(this._objectIdToFeature.delete(k),
this._index=null,e):null};h.update=function(k,e){this.onUpdate(k,e)};c._createClass(d,[{key:"_features",get:function(){const k=[];this._objectIdToFeature.forEach(e=>k.push(e));return k}},{key:"size",get:function(){return this._objectIdToFeature.size}}]);return d}();z=function(d){function h(e){var w=d.call(this,e)||this;w.type="geoevent";w._dataReceiveEventEnabled=!1;w._level=0;w._updateInfo={websocket:0,client:0};var {outSR:y}=e;const {geometryType:C,objectIdField:B,timeInfo:A,purgeOptions:D,source:E,
spatialReference:G,serviceFilter:I,maxReconnectionAttempts:L,maxReconnectionInterval:J,updateInterval:F,enableDataReceived:K}=e.serviceInfo,M=new b(w._onUpdate.bind(c._assertThisInitialized(w)),C),R=new v["default"](M,B,A,D);y=p.createConnection(E,G,y,C,I,L,J);w._store=M;w._manager=R;w._connection=y;w._quantize=g(C);w._dataReceiveEventEnabled=K;w._handles=[w._connection.on("feature",Q=>w._onFeature(Q)),w._connection.watch("connectionStatus",Q=>w.events.emit("connectionStatus",Q)),w._connection.watch("errorString",
Q=>w.events.emit("errorString",Q))];let T=performance.now();w._updateIntervalId=setInterval(()=>{var Q=performance.now(),S=Q-T;2500<S&&(T=Q,Q=Math.round(w._updateInfo.client/(S/1E3)),S=Math.round(w._updateInfo.websocket/(S/1E3)),w._updateInfo.client=0,w._updateInfo.websocket=0,w.events.emit("updateRate",{client:Q,websocket:S}));e.canAcceptRequest()&&w._manager.checkForUpdates()},F);return w}c._inheritsLoose(h,d);var k=h.prototype;k.destroy=function(){d.prototype.destroy.call(this);clearInterval(this._updateIntervalId);
this._handles.forEach(e=>e.remove());this._connection.destroy()};k._fetchDataTile=function(){};k.resume=function(){};k.enableEvent=function(e,w){"data-received"===e&&(this._dataReceiveEventEnabled=w)};k.subscribe=function(e){d.prototype.subscribe.call(this,e);const w=this._subscriptions.get(e.id);this._level=e.level;const y=this._getTileFeatures(e);this._onMessage({type:"append",id:e.key.id,addOrUpdate:y,end:!0});w.didSend=!0};k.unsubscribe=function(e){d.prototype.unsubscribe.call(this,e)};k.readers=
function*(e){e=this._subscriptions.get(e);const {tile:w}=e;yield this._getTileFeatures(w);for(const y of e.requests.stream.entries)x.isSome(y)&&x.isSome(y.addOrUpdate)&&(yield y.addOrUpdate)};k.createTileQuery=function(e){throw Error("Service does not support tile  queries");};k.resend=function(){var e=c._asyncToGenerator(function*(){this._subscriptions.forEach(w=>{({tile:w}=w);w={type:"append",id:w.id,addOrUpdate:this._getTileFeatures(w),end:!0};this._onMessage(w)})});return function(){return e.apply(this,
arguments)}}();k._getTileFeatures=function(e){const w=this._store.search(e).map(y=>this._quantize(y,e.transform));return q.FeatureSetReaderJSON.fromOptimizedFeatures(w,this._serviceInfo.geometryType,e.transform)};k._onFeature=function(e){this._updateInfo.websocket++;try{this._dataReceiveEventEnabled&&this.events.emit("feature",e);const w=u.convertFromFeature(e,this._serviceInfo.geometryType,!1,!1,this._serviceInfo.objectIdField);this._manager.add(w)}catch(w){}};k._onUpdate=function(e,w){x.isSome(e)&&
(this._updateInfo.client+=e.length);this._subscriptions.forEach((y,C)=>{y.didSend&&y.tile.level===this._level&&this._onMessage({type:"append",id:C,addOrUpdate:null,clear:!0,end:!1})});this._subscriptions.forEach((y,C)=>{if(y.didSend&&y.tile.level===this._level){var B=this._getTileFeatures(y.tile);C={type:"append",id:C,addOrUpdate:B,remove:[],end:!0,status:l.UpdateToken.empty()};y.requests.stream.enqueue(C);this._onMessage(C)}})};c._createClass(h,[{key:"updating",get:function(){return!1}}]);return h}(f.DataTileSource);
n.GeoEventSource=z;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/StreamFeatureManager":function(){define(["exports","../../../core/CircularArray","../../../core/mathUtils","../../../core/maybe"],function(n,c,z,x){let r=function(){function u(v,p,f,q,l=128){this._trackIdToObservations=new Map;this._idCounter=0;this._lastPurge=performance.now();this._addOrUpdated=new Map;this._removed=[];this._maxAge=0;this._timeInfo=f;this._purgeOptions=q;this.store=v;this.objectIdField=
p;this.purgeInterval=l;this._useGeneratedIds="__esri_stream_id__"===this.objectIdField}var m=u.prototype;m.add=function(v){if(this._useGeneratedIds){var p=this._nextId();v.attributes[this.objectIdField]=p;v.objectId=p}else v.objectId=v.attributes[this.objectIdField];this._addOrUpdated.set(v.objectId,v);this._maxAge=Math.max(this._maxAge,v.attributes[this._timeInfo.startTimeField]);if(this._timeInfo.trackIdField){p=v.attributes[this._timeInfo.trackIdField];if(!this._trackIdToObservations.has(p)){var f=
x.isSome(this._purgeOptions)&&null!=this._purgeOptions.maxObservations?this._purgeOptions.maxObservations:1E3;f=z.clamp(f,0,1E3);this._trackIdToObservations.set(p,new c(f))}v=this._trackIdToObservations.get(p).enqueue(v.objectId);x.isSome(v)&&(this._addOrUpdated.has(v)?this._addOrUpdated.delete(v):this._removed.push(v))}else x.isNone(this._trackIdLessObservations)&&(this._trackIdLessObservations=new c(1E5)),this._trackIdLessObservations.enqueue(v.objectId)};m.checkForUpdates=function(){const v=this._getToAdd();
var p=this._getToRemove();const f=performance.now();f-this._lastPurge>=this.purgeInterval&&(this._purge(f),this._lastPurge=f);const q=[];if(x.isSome(p))for(const l of p)p=this.store.removeById(l),x.isSome(p)&&q.push(p);if(x.isSome(v))for(const l of v)l.attributes.__esri_timestamp__=f,this.store.add(l);(v||q)&&this.store.update(v,q)};m._getToAdd=function(){if(!this._addOrUpdated.size)return null;const v=Array(this._addOrUpdated.size);let p=0;this._addOrUpdated.forEach(f=>v[p++]=f);this._addOrUpdated.clear();
return v};m._getToRemove=function(){const v=this._removed;if(!this._removed.length)return null;this._removed=[];return v};m._nextId=function(){const v=this._idCounter;this._idCounter=(this._idCounter+1)%4294967294+1;return v};m._purge=function(v){const p=this._purgeOptions;x.isSome(p)&&(this._purgeSomeByDisplayCount(p),this._purgeByAge(p),this._purgeByAgeReceived(v,p),this._purgeTracks())};m._purgeSomeByDisplayCount=function(v){if(v.displayCount){var p=this.store.size;if(p>v.displayCount){if(this._timeInfo.trackIdField)for(const f of this._trackIdToObservations.values())if(p>
v.displayCount&&f.size){const q=x.unwrap(f.dequeue());this._removed.push(q);p--}if(x.isSome(this._trackIdLessObservations))for(v=p-v.displayCount;0<v--;)p=this._trackIdLessObservations.dequeue(),x.isSome(p)&&this._removed.push(p)}}};m._purgeByAge=function(v){var p;if(v.age&&null!=(p=this._timeInfo)&&p.startTimeField){var f=this._maxAge-6E4*v.age;this.store.forEach(q=>{q.attributes[this._timeInfo.startTimeField]<f&&this._removed.push(q.objectId)})}};m._purgeByAgeReceived=function(v,p){if(p.ageReceived){var f=
v-6E4*p.ageReceived;this.store.forEach(q=>{q.attributes.__esri_timestamp__<f&&this._removed.push(q.objectId)})}};m._purgeTracks=function(){this._trackIdToObservations.forEach((v,p)=>{0===v.size&&this._trackIdToObservations.delete(p)})};return u}();n.DEFAULT_STREAM_ID_FIELD="__esri_stream_id__";n.ESRI_TIMESTAMP="__esri_timestamp__";n["default"]=r;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/sources/connections/createConnection":function(){define(["exports","./GeoEventConnection",
"./WebSocketConnection"],function(n,c,z){n.createConnection=function(x,r,u,m,v,p,f){const q=0===x.path.indexOf("wss://")||0===x.path.indexOf("ws://");x={source:x,sourceSpatialReference:r,spatialReference:u,geometryType:m,filter:v,maxReconnectionAttempts:p,maxReconnectionInterval:f};return q?new z.WebSocketConnection(x):new c(x)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/sources/connections/GeoEventConnection":function(){define("require ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../geometry ../../../../request ../../../../core/Error ../../../../core/Logger ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/accessorSupport/decorators/property ../../../../core/has ../../../../core/accessorSupport/ensureType ../../../../core/accessorSupport/decorators/subclass ./WebSocketConnection ../../../../rest/query/operations/query ../../../../rest/support/Query ../../../../geometry/support/jsonUtils ../../../../geometry/SpatialReference".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a,b,d,h){const k=m.getLogger("esri.layers.graphics.sources.connections.GeoEventConnection"),e={maxQueryDepth:5,maxRecordCountFactor:3};x=function(w){function y(B){return w.call(this,{...e,...B})||this}c._inheritsLoose(y,w);var C=y.prototype;C._open=function(){var B=c._asyncToGenerator(function*(){var A=yield this._fetchServiceDefinition(this._config.source);A.timeInfo.trackIdField||k.warn("GeoEvent service was configured without a TrackIdField. This may result in certain functionality being disabled. The purgeOptions.maxObservations property will have no effect.");
A=yield this._fetchWebSocketUrl(A.streamUrls,this._config.spatialReference);this._buddyServicesQuery||(this._buddyServicesQuery=this._queryBuddyServices());yield this._buddyServicesQuery;yield this._tryCreateWebSocket(A);const {filter:D,outFields:E}=this._config;this.destroyed||this._setFilter(D,E)});return function(){return B.apply(this,arguments)}}();C._onMessage=function(B){let A;try{A=this._enrich(JSON.parse(B.data)),this._featureZScaler&&this._featureZScaler(A.geometry)}catch(D){k.error(new u("geoevent-connection",
"Failed to parse message",D));return}this.onFeature(A)};C._fetchServiceDefinition=function(){var B=c._asyncToGenerator(function*(A){return this._serviceDefinition=A=(yield r(A.path,{query:{f:"json"},responseType:"json"})).data});return function(A){return B.apply(this,arguments)}}();C._fetchWebSocketUrl=function(){var B=c._asyncToGenerator(function*(A,D){const {urls:E,token:G}=A[0];return`${this._inferWebSocketBaseUrl(E)}/subscribe?outSR=${D.wkid}${G?"\x26token\x3d"+G:""}`});return function(A,D){return B.apply(this,
arguments)}}();C._inferWebSocketBaseUrl=function(B){if(1===B.length)return B[0];for(const A of B)if(-1!==A.indexOf("wss"))return A;k.error(new u("geoevent-connection","Unable to infer WebSocket url",B));return null};C._setFilter=function(){var B=c._asyncToGenerator(function*(A,D){const E=this._websocket;if(!(v.isNone(E)||v.isNone(A)&&v.isNone(D))){A=JSON.stringify({filter:this._serializeFilter(A,D)});var G=!1,I=p.createResolver();E.onmessage=L=>{L=JSON.parse(L.data);L.filter&&(L.error&&(k.error(new u("geoevent-connection",
"Failed to set service filter",L.error)),this._set("errorString",`Could not set service filter - ${L.error}`),I.reject(L.error)),E.onmessage=this._onMessage.bind(this),G=!0,I.resolve())};E.send(A);setTimeout(()=>{G||(this.destroyed||this._websocket!==E||k.error(new u("geoevent-connection","Server timed out when setting filter")),I.reject())},1E4);return I.promise}});return function(A,D){return B.apply(this,arguments)}}();C._serializeFilter=function(B,A){const D={};if(v.isNone(B)&&v.isNone(A))return D;
if(v.isSome(B)&&B.geometry)try{const E=d.fromJSON(B.geometry);if("extent"!==E.type)throw new u(`Expected extent but found type ${E.type}`);D.geometry=JSON.stringify(E.shiftCentralMeridian())}catch(E){k.error(new u("geoevent-connection","Encountered an error when setting connection geometryDefinition",E))}v.isSome(B)&&B.where&&"1 \x3d 1"!==B.where&&(D.where=B.where);v.isSome(A)&&(D.outFields=A.join(","));return D};C._enrich=function(B){if(!this._relatedFeatures)return B;const A=B.attributes[this._serviceDefinition.relatedFeatures.joinField];
if(!this._relatedFeatures.has(A))return k.warn("geoevent-connection","Feature join failed. Is the join field configured correctly?",B),B;const {attributes:D,geometry:E}=this._relatedFeatures.get(A);for(const G in D)B.attributes[G]=D[G];E&&(B.geometry=E);B.geometry||B.centroid||k.error(new u("geoevent-connection","Found malformed feature - no geometry found",B));return B};C._queryBuddyServices=function(){var B=c._asyncToGenerator(function*(){try{const {relatedFeatures:A,keepLatestArchive:D}=this._serviceDefinition,
E=this._queryRelatedFeatures(A),G=this._queryArchive(D);yield E;const I=yield G;if(I)for(const L of I.features)this.onFeature(this._enrich(L))}catch(A){k.error(new u("geoevent-connection","Encountered an error when querying buddy services",{error:A}))}});return function(){return B.apply(this,arguments)}}();C._queryRelatedFeatures=function(){var B=c._asyncToGenerator(function*(A){A&&(A=yield this._queryBuddy(A.featuresUrl),this._addRelatedFeatures(A))});return function(A){return B.apply(this,arguments)}}();
C._queryArchive=function(){var B=c._asyncToGenerator(function*(A){if(A)return this._queryBuddy(A.featuresUrl)});return function(A){return B.apply(this,arguments)}}();C._queryBuddy=function(){var B=c._asyncToGenerator(function*(A){const D=new (yield new Promise(function(K,M){n(["../../../FeatureLayer"],function(R){K(Object.freeze({__proto__:null,default:R}))},M)})).default({url:A});var {capabilities:E}=yield D.load();const G=E.query.supportsMaxRecordCountFactor,I=E.query.supportsPagination;E=E.query.supportsCentroid;
const L=this._config.maxRecordCountFactor;var J=D.capabilities.query.maxRecordCount;J=G?J*L:J;const F=new b;F.outFields=v.unwrapOr(this._config.outFields,["*"]);F.where=v.unwrapOr(v.get(this._config.filter,"where"),"1\x3d1");F.returnGeometry=!0;F.returnExceededLimitFeatures=!0;F.outSpatialReference=h.fromJSON(this._config.spatialReference);E&&(F.returnCentroid=!0);G&&(F.maxRecordCountFactor=L);if(I)return F.num=J,D.destroy(),this._queryPages(A,F);A=yield a.executeQuery(A,F,this._config.sourceSpatialReference);
D.destroy();return A.data});return function(A){return B.apply(this,arguments)}}();C._queryPages=function(){var B=c._asyncToGenerator(function*(A,D,E=[],G=0){D.start=v.isSome(D.num)?G*D.num:null;const {data:I}=yield a.executeQuery(A,D,this._config.sourceSpatialReference);if(I.exceededTransferLimit&&G<this._config.maxQueryDepth)return I.features.forEach(L=>E.push(L)),this._queryPages(A,D,E,G+1);E.forEach(L=>I.features.push(L));return I});return function(A,D){return B.apply(this,arguments)}}();C._addRelatedFeatures=
function(B){const A=new Map;B=B.features;const D=this._serviceDefinition.relatedFeatures.joinField;for(const E of B)A.set(E.attributes[D],E);this._relatedFeatures=A};return y}(g.WebSocketConnection);return x=z.__decorate([t.subclass("esri.layers.graphics.sources.connections.GeoEventConnection")],x)})},"esri/layers/graphics/sources/connections/WebSocketConnection":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Error ../../../../core/Logger ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/accessorSupport/decorators/property ../../../../core/has ../../../../core/accessorSupport/ensureType ../../../../core/accessorSupport/decorators/subclass ./StreamConnection ../../../../rest/query/operations/zscale".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t){const g=r.getLogger("esri.layers.graphics.sources.connections.WebSocketConnection");n.ReadyState=void 0;(function(a){a[a.CONNECTING=0]="CONNECTING";a[a.OPEN=1]="OPEN";a[a.CLOSING=2]="CLOSING";a[a.CLOSED=3]="CLOSED"})(n.ReadyState||(n.ReadyState={}));n.WebSocketConnection=function(a){function b(h){var k=a.call(this)||this;k.errorString=null;const {geometryType:e,spatialReference:w,sourceSpatialReference:y}=h;k._config=h;k._featureZScaler=t.getGeometryZScaler(e,y,
w);k._open();return k}c._inheritsLoose(b,a);var d=b.prototype;d._open=function(){var h=c._asyncToGenerator(function*(){yield this._tryCreateWebSocket();this.destroyed||(yield this._handshake())});return function(){return h.apply(this,arguments)}}();d.destroy=function(){u.isSome(this._websocket)&&(this._websocket.onopen=null,this._websocket.onclose=null,this._websocket.onerror=null,this._websocket.onmessage=null,this._websocket.close());this._websocket=null};d._tryCreateWebSocket=function(){var h=
c._asyncToGenerator(function*(k=this._config.source.path,e=1E3,w=0){try{this.destroyed||(this._websocket=yield this._createWebSocket(k),this.notifyChange("connectionStatus"))}catch(y){const C=e/1E3;if(this._config.maxReconnectionAttempts&&w>=this._config.maxReconnectionAttempts)g.error(new x("websocket-connection","Exceeded maxReconnectionAttempts attempts. No further attempts will be made")),this.destroy();else return g.error(new x("websocket-connection",`Failed to connect. Attempting to reconnect in ${C}s`,
y)),yield m.after(e),this._tryCreateWebSocket(k,Math.min(1.5*e,1E3*this._config.maxReconnectionInterval),w+1)}});return function(){return h.apply(this,arguments)}}();d._createWebSocket=function(h){const k=new WebSocket(h);h=new Promise((e,w)=>{k.onopen=()=>e(k);k.onclose=y=>w(y)});h.then(()=>{this.destroyed?(k.onclose=()=>{},k.close()):(k.onclose=e=>this._onClose(e),k.onerror=e=>this._onError(e),k.onmessage=e=>this._onMessage(e))});return h};d._handshake=function(){var h=c._asyncToGenerator(function*(k=
1E4){const e=this._websocket;if(!u.isNone(e)){var w=m.createResolver(),y=e.onmessage,{filter:C,outFields:B,spatialReference:A}=this._config;w.timeout(k);e.onmessage=D=>{var E;let G=null;try{G=JSON.parse(D.data)}catch(I){}G&&"object"===typeof G||(g.error(new x("websocket-connection","Protocol violation. Handshake failed - malformed message",D.data)),w.reject(),this.destroy());(null==(E=G.spatialReference)?void 0:E.wkid)!==(null==A?void 0:A.wkid)&&(g.error(new x("websocket-connection",`Protocol violation. Handshake failed - expected wkid of ${A.wkid}`,
D.data)),w.reject(),this.destroy());"json"!==G.format&&(g.error(new x("websocket-connection","Protocol violation. Handshake failed - format is not set",D.data)),w.reject(),this.destroy());C&&G.filter!==C&&g.error(new x("websocket-connection","Tried to set filter, but server doesn't support it"));B&&G.outFields!==B&&g.error(new x("websocket-connection","Tried to set outFields, but server doesn't support it"));e.onmessage=y;w.resolve()};e.send(JSON.stringify({filter:C,outFields:B,format:"json",spatialReference:{wkid:A.wkid}}));
return w.promise}});return function(){return h.apply(this,arguments)}}();d._onMessage=function(h){try{const k=JSON.parse(h.data);if("featureResult"!==k.type)throw new x("websocket-connection","Protocol violation - Expected to find message of type 'featureResult'",k);for(const e of k.features)this._featureZScaler&&this._featureZScaler(e.geometry),this.onFeature(e)}catch(k){g.error(new x("websocket-connection","Failed to parse message",k)),this.destroy()}};d._onError=function(h){this._set("errorString",
"Encountered an error over WebSocket connection");g.error("websocket-connection","Encountered an error over WebSocket connection")};d._onClose=function(h){this._websocket=null;this.notifyChange("connectionStatus");1E3!==h.code&&g.error("websocket-connection",`WebSocket closed unexpectedly with error code ${h.code}`);this.destroyed||this._open()};c._createClass(b,[{key:"connectionStatus",get:function(){if(u.isNone(this._websocket))return"disconnected";switch(this._websocket.readyState){case n.ReadyState.CONNECTING:case n.ReadyState.OPEN:return"connected";
case n.ReadyState.CLOSING:case n.ReadyState.CLOSED:return"disconnected"}}}]);return b}(l);z.__decorate([v.property()],n.WebSocketConnection.prototype,"connectionStatus",null);z.__decorate([v.property()],n.WebSocketConnection.prototype,"errorString",void 0);n.WebSocketConnection=z.__decorate([q.subclass("esri.layers.graphics.sources.connections.WebSocketConnection")],n.WebSocketConnection);Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/sources/connections/StreamConnection":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Evented ../../../../core/HandleOwner ../../../../core/accessorSupport/decorators/property ../../../../core/has ../../../../core/accessorSupport/ensureType ../../../../core/Logger ../../../../core/accessorSupport/decorators/subclass".split(" "),
function(n,c,z,x,r,u,m,v,p){z=function(f){function q(){return f.apply(this,arguments)||this}n._inheritsLoose(q,f);q.prototype.onFeature=function(l){this.emit("feature",l)};return q}(z.EventedMixin(x.HandleOwner));return z=c.__decorate([p.subclass("esri.layers.graphics.sources.connections.StreamConnection")],z)})},"esri/views/2d/layers/features/sources/PagedFeatureSource":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Error ../../../../../core/Logger ../../../../../core/maybe ../../../../../core/promiseUtils ./BaseFeatureSource".split(" "),
function(n,c,z,x,r,u,m){const v=x.getLogger("esri.views.2d.layers.features.sources.FeatureSource");x=function(p){function f(l){return p.call(this,l)||this}c._inheritsLoose(f,p);var q=f.prototype;q._fetchDataTile=function(){var l=c._asyncToGenerator(function*(t){const g=this._subscriptions.get(t.key.id);let a=!1,b=0,d=0;const h=(w,y)=>{d--;u.throwIfAborted(g);const C=t.id,B=w.reader;w=w.query;B.exceededTransferLimit?(y={id:C,addOrUpdate:B,end:a&&0===d,type:"append"},g.add({message:y,query:w}),this._onMessage(y)):
(a=!0,y={id:C,addOrUpdate:B,end:0===d,type:"append"},g.add({message:y,query:w}),this._onMessage(y))};let k=0,e=0;for(;!a&&20>e++;){let w;for(let y=0;y<k+1;y++){const C=b++;d++;w=this._fetchDataTilePage(t,C,g).then(B=>B&&h(B,C)).catch(B=>{a=!0;u.isAbortError(B)||(v.error(new z("mapview-query-error","Encountered error when fetching tile",{tile:t,error:B})),this._onMessage({id:t.id,addOrUpdate:null,end:a,type:"append"}))})}yield w;u.throwIfAborted(g);k=Math.min(k+2,6)}});return function(t){return l.apply(this,
arguments)}}();q._fetchDataTilePage=function(){var l=c._asyncToGenerator(function*(t,g,a){const b=this._queryInfo;var d={start:this.pageSize*g,num:this.pageSize,returnExceededLimitFeatures:!0,quantizationParameters:t.getQuantizationParameters()};r.isSome(this.maxRecordCountFactor)&&(d.maxRecordCountFactor=this.maxRecordCountFactor);d=this.createTileQuery(t,d);try{const h=yield this._queue.push({tile:t,query:d,signal:a.signal,depth:g});u.throwIfAborted(a);return h?b!==this._queryInfo?this._fetchDataTilePage(t,
g,a):{reader:h,query:d}:null}catch(h){return u.throwIfNotAbortError(h),null}});return function(t,g,a){return l.apply(this,arguments)}}();return f}(m.BaseFeatureSource);n.PagedFeatureSource=x;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/sources/SnapshotFeatureSource":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/has ../../../../../core/Logger ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/RandomLCG ./BaseFeatureSource ../support/FeatureSetReaderPBFIndirect ../support/UpdateToken".split(" "),
function(n,c,z,x,r,u,m,v,p,f){function q(g,a,b){var d=g.getXHydrated();g=g.getYHydrated();d=a.getColumnForX(d);d=Math.floor(a.normalizeCol(d));a=Math.floor(a.getRowForY(g));return`${b}/${a}/${d}`}function l(g,a){if(r.isNone(g))return null;a=a.transform;const b=g.getQuantizationTransform();if(r.isNone(b)){const [A,D]=a.scale,[E,G]=a.translate;return g.transform(-E/A,G/D,1/A,1/-D)}const [d,h]=b.scale,[k,e]=b.translate,[w,y]=a.scale,[C,B]=a.translate;return g.transform((k-C)/w,(-e+B)/y,d/w,h/y)}const t=
x.getLogger("esri.views.2d.layers.features.sources.SnapshotFeatureSource");z=function(g){function a(d){var h=g.call(this,d)||this;h.mode="snapshot";h._loading=!0;h._controller=new AbortController;h._downloadPromise=null;h._didSendEnd=!1;h._queries=[];h._invalidated=!1;h._hasAggregates=!1;h._random=new m(1E3);h._featureCount=d.featureCount;h._store=d.store;h._markedIdsBufId=h._store.storage.createBitset();return h}c._inheritsLoose(a,g);var b=a.prototype;b.destroy=function(){g.prototype.destroy.call(this);
this._controller.abort()};b.update=function(d,h){g.prototype.update.call(this,d,h);this._hasAggregates=d.targets.aggregate};b.resend=function(){var d=c._asyncToGenerator(function*(h=!1){yield this._downloadPromise;this._invalidated||h?(this._invalidated=!1,this._subscriptions.forEach(k=>k.clear()),this._downloadPromise=this._download(this._featureCount),yield this._downloadPromise):(h=this._queries.map(({query:k,reader:e})=>this._sendPatchQuery(k,e)),yield Promise.all(h),this._subscriptions.forEach(k=>
{k.requests.done.forEach(e=>this._onMessage(e.message))}))});return function(){return d.apply(this,arguments)}}();b.refresh=function(){var d=c._asyncToGenerator(function*(){yield this.resend(!0)});return function(){return d.apply(this,arguments)}}();b._sendPatchQuery=function(){var d=c._asyncToGenerator(function*(h,k){const e=r.isSome(h.outFields)?h.outFields:[],w=this._queryInfo.outFields,y=w.filter(A=>-1===e.indexOf(A));if(y.length){var C=h.clone(),B=this._signal;C.returnGeometry=!1;C.returnCentroid=
!1;C.outFields=y;h.outFields=w;h=yield this._queue.push({query:C,depth:0,signal:B});u.throwIfAborted({signal:B});k.joinAttributes(h)}});return function(h,k){return d.apply(this,arguments)}}();b._fetchDataTile=function(){var d=c._asyncToGenerator(function*(h){this._downloadPromise||(this._downloadPromise=this._download(this._featureCount));var k=this._store.search(h);const e=this._subscriptions.get(h.key.id),w=k.length-1;for(let C=0;C<w;C++){var y=l(k[C],h);y={type:"append",id:h.id,addOrUpdate:y,end:!1,
status:f.UpdateToken.empty()};e.add({query:null,message:y});this._hasAggregates||(yield u.after(1));this._onMessage(y)}k=l(0<=w?k[w]:null,h);h={type:"append",id:h.id,addOrUpdate:k,end:this._didSendEnd,status:f.UpdateToken.empty()};e.add({query:null,message:h});this._onMessage(h)});return function(h){return d.apply(this,arguments)}}();b._download=function(){var d=c._asyncToGenerator(function*(h){try{yield this.whenInitialized();const k=this._store.storage.getBitset(this._markedIdsBufId),e=new Set;
k.clear();const w=Array.from({length:Math.ceil(h/this.pageSize)},(y,C)=>C).sort((y,C)=>this._random.getInt()-this._random.getInt()).map(y=>this._downloadPage(y,k,e));yield Promise.all(w);this._store.sweepFeatures(k,this._store.storage);this._store.sweepFeatureSets(e)}catch(k){t.error("mapview-snapshot-source","Encountered and error when downloading feature snapshot",k)}this._sendEnd();this._loading=!1});return function(h){return d.apply(this,arguments)}}();b._downloadPage=function(){var d=c._asyncToGenerator(function*(h,
k,e){var w=this.pageSize;w={start:h*w,num:w,cacheHint:!0};r.isSome(this.maxRecordCountFactor)&&(w.maxRecordCountFactor=this.maxRecordCountFactor);w=this.createQuery(w);const y=this._signal;h=yield this._queue.push({query:w,depth:h,signal:y});u.throwIfAborted({signal:y});this._queries.push({query:w,reader:h});this._store.insert(h);e.add(h.instance);for(e=h.getCursor();e.next();)k.set(e.getDisplayId());this._send(h)});return function(h,k,e){return d.apply(this,arguments)}}();b._send=function(d){if(this._subscriptions.size){var h=
null,k=new Map,e=new Set,w=new Map;this._subscriptions.forEach(C=>{var B,A=C.tile;k.set(A.key.id,null);h=A.tileInfoView;e.add(A.level);const {row:D,col:E}=A.key;A=`${A.level}/${D}/${E}`;const G=null!=(B=w.get(A))?B:[];G.push(C);w.set(A,G)});for(const C of e){const B=h.getLODInfoAt(C),A=d.getCursor();for(;A.next();){var y=q(A,B,C);const D=A.getIndex();if(w.has(y))for(const E of w.get(y)){y=E.tile.id;let G=k.get(y);r.isNone(G)&&(G=[],k.set(y,G));G.push(D)}}}k.forEach((C,B)=>{if(r.isSome(C)){const A=
this._subscriptions.get(B);C=l(p.FeatureSetReaderIndirect.from(d,C),A.tile);B={type:"append",id:B,addOrUpdate:C,end:!1,status:f.UpdateToken.empty()};A.add({query:null,message:B});this._onMessage(B)}})}};b._sendEnd=function(){this._subscriptions.forEach(d=>{const h={type:"append",id:d.tile.id,addOrUpdate:null,end:!0,status:f.UpdateToken.empty()};d.add({query:null,message:h});this._onMessage(h)});this._didSendEnd=!0};c._createClass(a,[{key:"loading",get:function(){return this._loading}},{key:"_signal",
get:function(){return this._controller.signal}}]);return a}(v.BaseFeatureSource);n.SnapshotFeatureSource=z;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/AttributeStore":function(){define("require exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Error ../../../../../core/has ../../../../../core/Logger ../../../../../core/mathUtils ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/accessorSupport/diffUtils ../../../../../layers/support/FieldsIndex ../../../engine/webgl/definitions ../../../engine/webgl/Utils ../../../engine/webgl/util/debug ../tileRenderers/support/visualVariablesUtils".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a){function b(C,B){return A=>B(C(A))}const d=u.getLogger("esri.views.layers.2d.features.support.AttributeStore"),h=g.createDebugLogger(g.DEBUG_ATTR_UPDATES,d),k=C=>1===(C&2147483648)>>>31?254:255;var e=r("esri-shared-array-buffer"),w=r("esri-atomics");let y=function(){function C(A,D,E,G){this.size=0;this.texelSize=4;const {pixelType:I,layout:L,textureOnly:J}=G;this.textureOnly=J||!1;this.pixelType=I;this._ctype=D;this.layout=L;this._resetRange();this._shared=A;
this.size=E;J||(this.data=this._initData(I,E,A,D))}var B=C.prototype;B.unsetComponentAllTexels=function(A,D){const E=v.unwrap(this.data);for(let G=0;G<this.size*this.size;G++)E[G*this.texelSize+A]&=~D;this.dirtyStart=0;this.dirtyEnd=this.size*this.size-1};B.setComponentAllTexels=function(A,D){const E=v.unwrap(this.data);for(let G=0;G<this.size*this.size;G++)E[G*this.texelSize+A]|=255&D;this.dirtyStart=0;this.dirtyEnd=this.size*this.size-1};B.setComponent=function(A,D,E){const G=v.unwrap(this.data);
for(const I of E)G[I*this.texelSize+A]|=D,this.dirtyStart=Math.min(this.dirtyStart,I),this.dirtyEnd=Math.max(this.dirtyEnd,I)};B.setComponentTexel=function(A,D,E){v.unwrap(this.data)[E*this.texelSize+A]|=D;this.dirtyStart=Math.min(this.dirtyStart,E);this.dirtyEnd=Math.max(this.dirtyEnd,E)};B.unsetComponentTexel=function(A,D,E){v.unwrap(this.data)[E*this.texelSize+A]&=~D;this.dirtyStart=Math.min(this.dirtyStart,E);this.dirtyEnd=Math.max(this.dirtyEnd,E)};B.getData=function(A,D){A&=2147483647;return v.unwrap(this.data)[A*
this.texelSize+D]};B.setData=function(A,D,E){A&=2147483647;0===(this.layout&1<<D)?d.error("mapview-attributes-store","Tried to set a value for a texel's readonly component"):(this.data[A*this.texelSize+D]=E,this.dirtyStart=Math.min(this.dirtyStart,A),this.dirtyEnd=Math.max(this.dirtyEnd,A))};B.lock=function(){5121===this.pixelType&&this._shared&&w&&"local"!==this._ctype&&Atomics.store(this.data,0,1)};B.unlock=function(){5121===this.pixelType&&this._shared&&w&&"local"!==this._ctype&&Atomics.store(this.data,
0,0)};B.expand=function(A){this.size=A;if(!this.textureOnly){A=this._initData(this.pixelType,A,this._shared,this._ctype);const D=v.unwrap(this.data);A.set(D);this.data=A}};B.toMessage=function(){const A=this.dirtyStart,D=this.dirtyEnd;var E=this.texelSize;if(A>D)return null;this._resetRange();const G=!this._shared&&"local"!==this._ctype,I=this.pixelType,L=this.layout,J=v.unwrap(this.data);E=G&&J.slice(A*E,(D+1)*E)||null;return{start:A,end:D,data:E,pixelType:I,layout:L}};B._initData=function(A,D,E,
G){E=E&&"local"!==G?SharedArrayBuffer:ArrayBuffer;A=t.getPixelArrayCtor(A);D=new A(new E(D*D*4*A.BYTES_PER_ELEMENT));for(A=0;A<D.length;A+=4)D[A+1]=255;return D};B._resetRange=function(){this.dirtyStart=2147483647;this.dirtyEnd=0};z._createClass(C,[{key:"buffer",get:function(){return v.andThen(this.data,A=>A.buffer)}}]);return C}();u=function(){function C(A,D){this._client=A;this.config=D;this._attributeComputeMap=new Map;this._blocks=[];this._filters=Array(l.MAX_FILTERS);this._targetType=0;this._abortController=
p.createAbortController();this._hasScaleExpr=!1;this._size=32;this._idsToHighlight=new Set;A=D.supportsTextureFloat?5126:5121;h(`Creating AttributeStore ${e?"with":"without"} shared memory`);this._blockDescriptors=[{pixelType:5121,layout:1},{pixelType:5121,layout:15,textureOnly:!0},{pixelType:A,layout:15},{pixelType:A,layout:15}];this._blocks=this._blockDescriptors.map(()=>null)}var B=C.prototype;B.destroy=function(){this._abortController.abort()};B.update=function(A,D){this.config=D;D=D.schema.processors[0].storage;
const E=f.diff(this._schema,D);if(A.targets.feature||A.targets.aggregate)A.storage.data=!0;if(E&&(r("esri-2d-update-debug")&&console.debug("Applying Update - AttributeStore:",E),A.storage.data=!0,this._schema=D,this._attributeComputeMap.clear(),!v.isNone(D))){switch(D.target){case "feature":this._targetType=0;break;case "aggregate":this._targetType=1}if("subtype"===D.type)for(const G in D.mapping){if(A=D.mapping[G],v.isSome(A))for(const I of A.mapping)this._bindAttribute(I)}else for(const G of D.mapping)this._bindAttribute(G)}};
B.onTileData=function(A,D){if(!v.isNone(D.addOrUpdate))for(A=D.addOrUpdate.getCursor();A.next();)D=A.getDisplayId(),this.setAttributeData(D,A)};B.invalidateResources=function(){this._createResourcesPromise=null;this._abortController.abort();this._abortController=p.createAbortController()};B.setHighlight=function(){var A=z._asyncToGenerator(function*(D,E){const G=this._getBlock(0);E=E.map(I=>I&2147483647);G.lock();G.unsetComponentAllTexels(0,1);G.setComponent(0,1,E);G.unlock();this._idsToHighlight.clear();
for(const I of D)this._idsToHighlight.add(I);yield this.sendUpdates()});return function(D,E){return A.apply(this,arguments)}}();B.updateFilters=function(){var A=z._asyncToGenerator(function*(D,E){const {config:G,service:I,spatialReference:L}=E;({filters:E}=G);E=E.map((J,F)=>this._updateFilter(J,F,I,L));(yield Promise.all(E)).some(J=>J)&&(D.storage.filters=!0,r("esri-2d-update-debug")&&console.debug("Applying Update - AttributeStore:","Filters changed"))});return function(D,E){return A.apply(this,
arguments)}}();B.setData=function(A,D,E,G){this._ensureSizeForTexel(A&2147483647);this._getBlock(D).setData(A,E,G)};B.getData=function(A,D,E){return this._getBlock(D).getData(A,E)};B.getHighlightFlag=function(A){return this._idsToHighlight.has(A)?l.HIGHLIGHT_FLAG:0};B.unsetAttributeData=function(A){A&=2147483647;this._getBlock(0).setData(A,0,0)};B.setAttributeData=function(A,D){const E=A&2147483647;this._ensureSizeForTexel(E);this._getBlock(0).setData(E,0,this.getFilterFlags(D));if(this._targetType===
(A&2147483648)>>>31){A=this._attributeComputeMap;var G=this.config.supportsTextureFloat?1:2;A.size&&A.forEach((I,L)=>{const J=L*G%4;L=this._getBlock(Math.floor(L*G/4)+l.ATTRIBUTE_DATA_VV);I=I(D);if(this.config.supportsTextureFloat)L.setData(E,J,I);else if(I===l.NAN_MAGIC_NUMBER)L.setData(E,J,255),L.setData(E,J+1,255);else{I=m.clamp(Math.round(I),-32767,32766)+32768;const F=(I&65280)>>8;L.setData(E,J,I&255);L.setData(E,J+1,F)}})}};B.sendUpdates=function(){if(this._nextUpdate)return this._nextUpdate.promise;
if(this._currUpdate)return this._nextUpdate=p.createResolver(),this._nextUpdate.promise;const A={blocks:this._blocks.map(D=>v.isSome(D)?D.toMessage():null)};return this._currUpdate=this._createResources().then(()=>{var D=()=>{this._currUpdate=null;if(this._nextUpdate){const E=this._nextUpdate;this._nextUpdate=null;this.sendUpdates().then(()=>E.resolve())}};D=this._client.update(A,this._signal).then(D).catch(D);this._client.render(this._signal);return D}).catch(D=>{if(p.isAbortError(D))return this._createResourcesPromise=
null,this._createResources();d.error(new x("mapview-attribute-store","Encountered an error during client update",D));return Promise.resolve()})};B._ensureSizeForTexel=function(A){for(;A>=this._size*this._size&&!this._expand(););};B._bindAttribute=function(A){function D(){return A.normalizationField?I=>{const L=I.readAttribute(A.normalizationField);return L?I.readAttribute(A.field)/L:null}:I=>I.readAttribute(A.field)}function E(){A.normalizationField&&d.warn("mapview-arcade","Ignoring normalizationField specified with an arcade expression which is not supported.");
return I=>I.getComputedNumericAtIndex(A.fieldIndex)}let G;if(null!=A.fieldIndex)G=E();else if(A.field)G=D();else return;A.valueRepresentation&&(G=b(G,I=>a.getVisualVariableSizeValueRepresentationRatio(I,A.valueRepresentation)));this._attributeComputeMap.set(A.binding,b(G,I=>null===I||isNaN(I)||Infinity===I?l.NAN_MAGIC_NUMBER:I))};B._createResources=function(){if(v.isSome(this._createResourcesPromise))return this._createResourcesPromise;this._getBlock(l.ATTRIBUTE_DATA_ANIMATION);h("Initializing AttributeStore");
var A={shared:e&&"local"!==this._client.type,size:this._size,blocks:v.mapMany(this._blocks,D=>({textureOnly:D.textureOnly,buffer:D.buffer,pixelType:D.pixelType}))};this._createResourcesPromise=A=this._client.initialize(A,this._signal).catch(D=>{p.isAbortError(D)?this._createResourcesPromise=null:d.error(new x("mapview-attribute-store","Encountered an error during client initialization",D))});A.then(()=>v.isNone(this._createResourcesPromise)?this._createResources():void 0);return A};B._getBlock=function(A){var D=
this._blocks[A];if(v.isSome(D))return D;h(`Initializing AttributeBlock at index ${A}`);D=new y(e,this._client.type,this._size,this._blockDescriptors[A]);this._blocks[A]=D;this._createResourcesPromise=null;return D};B._expand=function(){if(this._size<this.config.maxTextureSize){const A=this._size<<=1;h("Expanding block size to",A,this._blocks);v.forEachSome(this._blocks,D=>D.expand(A));this._createResourcesPromise=null;this._size=A;return 0}d.error(new x("mapview-limitations","Maximum number of onscreen features exceeded."));
return-1};B._updateFilter=function(){var A=z._asyncToGenerator(function*(D,E,G,I){const L=this._filters[E],J=v.isSome(L)&&L.hash;if(!L&&!D||J===JSON.stringify(D))return!1;if(v.isNone(D)){if(!L)return!1;D=1<<E+1;G=this._getBlock(0);this._filters[E]=null;G.setComponentAllTexels(0,D);this.sendUpdates();return!0}yield(yield this._getFilter(E,G)).update(D,I);return!0});return function(D,E,G,I){return A.apply(this,arguments)}}();B._getFilter=function(){var A=z._asyncToGenerator(function*(D,E){var G=this._filters[D];
if(v.isSome(G))return G;({default:G}=yield new Promise(function(I,L){n(["../../../../../layers/graphics/data/FeatureFilter"],function(J){I(Object.freeze({__proto__:null,default:J}))},L)}));E=new G({geometryType:E.geometryType,hasM:!1,hasZ:!1,timeInfo:E.timeInfo,fieldsIndex:new q(E.fields)});return this._filters[D]=E});return function(D,E){return A.apply(this,arguments)}}();B.isVisible=function(A){return!!(this._getBlock(0).getData(A,0)&2)};B.getFilterFlags=function(A){let D=0;var E=k(A.getDisplayId());
for(let I=0;I<this._filters.length;I++){var G=this._filters[I];G=!(E&1<<I)||v.isNone(G)||G.check(A);D|=(G?1:0)<<I}E=0;this._idsToHighlight.size&&(A=A.getObjectId(),E=this.getHighlightFlag(A));return D<<1|E};z._createClass(C,[{key:"hasScaleExpr",get:function(){return this._hasScaleExpr}},{key:"_signal",get:function(){return this._abortController.signal}}]);return C}();c.DISPLAY_ID_TYPE_AGGREGATE=1;c.DISPLAY_ID_TYPE_FEATURE=0;c["default"]=u;c.getDisplayIdFilterMask=k;c.getDisplayIdTexel=C=>C&2147483647;
c.getDisplayIdType=C=>(C&2147483648)>>>31;c.isAggregateId=function(C){return 1===(C&2147483648)>>>31};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/Utils":function(){define("exports ../../../../core/Error ../../../../core/Logger ../../../../core/mathUtils ../../../../core/screenUtils ./color ./enums ./SymbolProperties ../../../webgl/Texture".split(" "),function(n,c,z,x,r,u,m,v,p){function f(K){const M={};for(const R of K)M[R.name]=R.strideInBytes;return M}function q(K){switch(K){case m.WGLGeometryType.MARKER:return E;
case m.WGLGeometryType.FILL:return G;case m.WGLGeometryType.LINE:return I;case m.WGLGeometryType.TEXT:return L;case m.WGLGeometryType.LABEL:return J}}function l(K){switch(K%4){case 0:case 2:return 4;case 1:case 3:return 1}}function t(K){switch(K){case 5120:case 5121:return 1;case 5122:case 5123:return 2;case 5126:case 5124:case 5125:return 4}}function g(K){const M={};for(const R in K){let T=0;M[R]=K[R].map(Q=>{const S={...Q,normalized:Q.normalized||!1,divisor:Q.divisor||0,offset:T,stride:0};T+=Q.count*
t(Q.type);return S});M[R].forEach(Q=>Q.stride=T)}return M}const a=z.getLogger("esri.views.2d.engine.webgl.Utils");z=[{name:"geometry",strideInBytes:36,divisor:0}];const b=[{name:"geometry",strideInBytes:36,divisor:0}],d=[{name:"geometry",strideInBytes:12,divisor:0}],h=[{name:"geometry",strideInBytes:40,divisor:0}],k=[{name:"geometry",strideInBytes:36,divisor:0}],e=[{name:"geometry",strideInBytes:36,divisor:0}],w=f(z),y=f(b),C=f(d),B=f(h),A=f(k),D=f(e),E=["geometry"],G=["geometry"],I=["geometry"],
L=["geometry"],J=["geometry"],F=new Map;n.C_FILL_STRIDE_SPEC=y;n.C_FILL_STRIDE_SPEC_DD=C;n.C_FILL_VERTEX_DEF=b;n.C_FILL_VERTEX_DEF_DD=d;n.C_ICON_STRIDE_SPEC=w;n.C_ICON_VERTEX_DEF=z;n.C_LABEL_STRIDE_SPEC=D;n.C_LABEL_VERTEX_DEF=e;n.C_LINE_STRIDE_SPEC=B;n.C_LINE_VERTEX_DEF=h;n.C_TEXT_STRIDE_SPEC=A;n.C_TEXT_VERTEX_DEF=k;n.C_VBO_GEOMETRY="geometry";n.C_VBO_INFO={["geometry"]:35044};n.C_VBO_PERINSTANCE="per_instance";n.C_VBO_PERINSTANCE_VV="per_instance_vv";n.allocateTypedArrayBuffer=function(K,M){switch(M%
4){case 0:case 2:return new Uint32Array(Math.floor(K*M/4));case 1:case 3:return new Uint8Array(K*M)}};n.allocateTypedArrayBufferwithData=function(K,M){switch(M%4){case 0:case 2:return new Uint32Array(K);case 1:case 3:return new Uint8Array(K)}};n.copyMeshData=function(K,M,R,T,Q,S,X){for(const ra in S){var aa=S[ra].stride,ma=l(aa);const za=S[ra].data,wa=R[ra].data,va=aa*Q.vertexCount/ma,Fa=aa*K/ma;aa=aa*Q.vertexFrom/ma;for(ma=0;ma<va;++ma)wa[ma+Fa]=za[ma+aa]}R=Q.indexCount;for(S=0;S<R;++S)T[S+M]=X[S+
Q.indexFrom]-Q.vertexFrom+K};n.createGeometryData=function(K,M){const R=[];for(let T=0;5>T;++T){const Q=q(T),S={};for(const X of Q)S[X]={data:M(T,X)};R.push({data:K(T),buffers:S})}return R};n.createProgramDescriptor=(K,M)=>{if(!F.has(K)){const Q=g(M);var R=Q;var T={};for(const S in R){const X=R[S];T[S]=X.length?X[0].stride:0}R=T;T=new Map;for(const S in M)for(const X of M[S])T.set(X.name,X.location);M=T;F.set(K,{strides:R,bufferLayouts:Q,attributes:M})}return F.get(K)};n.createTextureFromTexelData=
function(K,M){let R,T;x.isPowerOfTwo(M.width)&&x.isPowerOfTwo(M.height)?(R=!0,T=9987):(R=!1,T=9729);return new p(K,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,hasMipmap:R,samplingMode:T,wrapMode:33071,flipped:!0},M)};n.forEachGeometryType=function(K){K(m.WGLGeometryType.FILL);K(m.WGLGeometryType.LINE);K(m.WGLGeometryType.MARKER);K(m.WGLGeometryType.TEXT);K(m.WGLGeometryType.LABEL)};n.geometryToMappedGeometry=function(K){return{vertexFrom:void 0,vertexTo:void 0,geometry:K}};n.getBytes=
t;n.getCapType=function(K){switch(K){case "butt":return 0;case "round":return 1;case "square":return 2;default:return a.error(new c("mapview-invalid-type",`Cap type ${K} is not a valid option. Defaulting to round`)),1}};n.getJoinType=function(K){switch(K){case "miter":return 2;case "bevel":return 0;case "round":return 1;default:return a.error(new c("mapview-invalid-type",`Join type ${K} is not a valid option. Defaulting to round`)),1}};n.getNamedBuffers=q;n.getPixelArrayCtor=function(K){switch(K){case 5121:return Uint8Array;
case 32819:return Uint16Array;case 5126:return Float32Array;default:a.error(new c("webgl-utils",`Unable to handle type ${K}`))}};n.getPixelBytes=function(K){switch(K){case 5121:return 1;case 32819:return 2;case 5126:return 4;default:a.error(new c("webgl-utils",`Unable to handle type ${K}`))}};n.getStrides=function(K,M){switch(K){case m.WGLGeometryType.MARKER:return w;case m.WGLGeometryType.FILL:return M?C:y;case m.WGLGeometryType.LINE:return B;case m.WGLGeometryType.TEXT:return A;case m.WGLGeometryType.LABEL:return D}};
n.getTextProperties=function(K){return v.TextProperties.pool.acquire(K.color?u.copyAndPremultiply(K.color):[255,255,255,255],K.haloColor?u.copyAndPremultiply(K.haloColor):[255,255,255,255],r.pt2px(K.haloSize),r.pt2px(K.font.size),K.angle*Math.PI/180,K.xoffset/K.font.size,K.yoffset/K.font.size,"left"===K.horizontalAlignment?0:"right"===K.horizontalAlignment?1:.5,"top"===K.verticalAlignment?0:"bottom"===K.verticalAlignment?1:.5)};n.getTransformParams=function(K){const {transform:M,hasZ:R,hasM:T}=K;
return{transform:M,hasZ:R,hasM:T}};n.getVVType=function(K){switch(K){case "opacity":return m.VVType.OPACITY;case "color":return m.VVType.COLOR;case "rotation":return m.VVType.ROTATION;case "size":return m.VVType.SIZE;default:return a.error(`Cannot interpret unknown vv: ${K}`),null}};n.isDefined=function(K){return null!=K};n.isNumber=function(K){return"number"===typeof K};n.strideToPackingFactor=l;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/screenUtils":function(){define(["exports"],
function(n){function c(x){return x?72*x/96:0}const z=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;n.castRenderScreenPointArray=function(x){return x};n.castRenderScreenPointArray3=function(x){return x};n.castScreenPointArray=function(x){return x};n.createRenderScreenPoint=function(x=0,r=0){return{x,y:r}};n.createRenderScreenPointArray=function(x=0,r=0){return[x,r]};n.createRenderScreenPointArray3=function(x=0,r=0,u=0){return[x,r,u]};n.createScreenPoint=function(x=0,r=0){return{x,y:r}};n.createScreenPointArray=
function(x=0,r=0){return[x,r]};n.pt2px=function(x){return x?x/72*96:0};n.px2pt=c;n.screenPointArrayToObject=function(x,r){return r?(r.x=x[0],r.y=x[1],r):{x:x[0],y:x[1]}};n.screenPointObjectToArray=function(x,r){return r?(r[0]=x.x,r[1]=x.y,2<r.length&&(r[2]=0),r):[x.x,x.y]};n.toPt=function(x){if("string"===typeof x){if(z.test(x)){var r=x.match(z),u=Number(r[1]);r=r[3]&&r[3].toLowerCase();x="-"===x.charAt(0);u="px"===r?c(u):u;return x?-u:u}console.warn("screenUtils.toPt: input not recognized!");return null}return x};
Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/color":function(){define(["exports","./number"],function(n,c){function z(u,m){Array.isArray(m)?(u[0]=m[0],u[1]=m[1],u[2]=m[2],u[3]=m[3]):(u[0]=m.r,u[1]=m.g,u[2]=m.b,u[3]=m.a);return u}function x(u,m=0,v=!1){const p=u[m+3];u[m+0]*=p;u[m+1]*=p;u[m+2]*=p;v||(u[m+3]*=255);return u}const r=[0,0,0,0];n.copyAndPremultiply=function(u){return x(z([],u))};n.premultiplyAlpha=x;n.premultiplyAlphaRGBA=function(u){if(!u)return 0;const {r:m,
g:v,b:p,a:f}=u;return c.i8888to32(m*f,v*f,p*f,255*f)};n.premultiplyAlphaRGBAArray=function(u){if(!u)return 0;const [m,v,p,f]=u;return c.i8888to32(f/255*m,f/255*v,f/255*p,f)};n.premultiplyAlphaUint32=function(u){x(z(r,u));return c.i8888to32(r[0],r[1],r[2],r[3])};n.white=[255,255,255,1];Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/number":function(){define(["exports"],function(n){function c(r,u,m){return Math.round(Math.max(Math.min(r,m),u))}const z=new Float32Array(1),
x=new Uint32Array(z.buffer);n.i16=function(r){return c(r,-32768,32767)};n.i1616to32=function(r,u){return 65535&r|u<<16};n.i32=function(r){return c(r,-2147483648,2147483647)};n.i8=function(r){return c(r,-128,127)};n.i8816to32=function(r,u,m){return r&255|(u&255)<<8|m<<16};n.i8888to32=function(r,u,m,v){return r&255|(u&255)<<8|(m&255)<<16|v<<24};n.numTo32=function(r){return r|0};n.toFloat32=function(r){x[0]=r;return z[0]};n.toUint32=function(r){z[0]=r;return x[0]};n.u16=function(r){return c(r,0,65535)};
n.u32=function(r){return c(r,0,4294967295)};n.u32to4Xu8=function(r){return[r&255,(r&65280)>>>8,(r&16711680)>>>16,(r&4278190080)>>>24]};n.u8=function(r){return c(r,0,255)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/enums":function(){define(["exports"],function(n){n.WGLGeometryType=void 0;(function(c){c[c.FILL=0]="FILL";c[c.LINE=1]="LINE";c[c.MARKER=2]="MARKER";c[c.TEXT=3]="TEXT";c[c.LABEL=4]="LABEL"})(n.WGLGeometryType||(n.WGLGeometryType={}));n.WGLGeometryTransactionStatus=
void 0;(function(c){c[c.SUCCEEDED=0]="SUCCEEDED";c[c.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"})(n.WGLGeometryTransactionStatus||(n.WGLGeometryTransactionStatus={}));n.WGLDrawPhase=void 0;(function(c){c[c.NONE=0]="NONE";c[c.MAP=1]="MAP";c[c.LABEL=2]="LABEL";c[c.LABEL_ALPHA=4]="LABEL_ALPHA";c[c.HITTEST=8]="HITTEST";c[c.HIGHLIGHT=16]="HIGHLIGHT";c[c.CLIP=32]="CLIP";c[c.DEBUG=64]="DEBUG";c[c.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"})(n.WGLDrawPhase||(n.WGLDrawPhase={}));n.VVType=void 0;(function(c){c[c.SIZE=
0]="SIZE";c[c.COLOR=1]="COLOR";c[c.OPACITY=2]="OPACITY";c[c.ROTATION=3]="ROTATION"})(n.VVType||(n.VVType={}));n.WGLVVFlag=void 0;(function(c){c[c.NONE=0]="NONE";c[c.OPACITY=1]="OPACITY";c[c.COLOR=2]="COLOR";c[c.ROTATION=4]="ROTATION";c[c.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE";c[c.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS";c[c.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS";c[c.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"})(n.WGLVVFlag||(n.WGLVVFlag={}));n.WGLVVTarget=void 0;(function(c){c[c.MINMAX_TARGETS_OUTLINE=
128]="MINMAX_TARGETS_OUTLINE";c[c.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE";c[c.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE";c[c.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"})(n.WGLVVTarget||(n.WGLVVTarget={}));n.MosaicType=void 0;(function(c){c[c.SPRITE=0]="SPRITE";c[c.GLYPH=1]="GLYPH"})(n.MosaicType||(n.MosaicType={}));Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/SymbolProperties":function(){define(["exports","../../../../core/ObjectPool"],
function(n,c){let z=function(){function x(){this.color=[0,0,0,0];this.haloColor=[0,0,0,0];this.haloSize=0;this.size=12;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=0}var r=x.prototype;r.acquire=function(u,m,v,p,f,q,l,t,g){this.color=u;this.haloColor=m;this.haloSize=v;this.size=p;this.angle=f;this.offsetX=q;this.offsetY=l;this.hAnchor=t;this.vAnchor=g};r.release=function(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=
this.angle=this.size=this.haloSize=this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0};return x}();z.pool=new c(z);n.TextProperties=z;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/webgl/Texture":function(){define("../../chunks/_rollupPluginBabelHelpers ../../core/mathUtils ../../core/maybe ./checkWebGLError ./enums ./capabilities/isWebGL2Context".split(" "),function(n,c,z,x,r,u){let m=function(){function v(f,q,l=null){this._context=f;this.type="texture";this._glName=
null;this._descriptor=void 0;this._wrapModeDirty=this._samplingModeDirty=!1;f.instanceCounter.increment(r.ResourceType.Texture,this);this._descriptor={target:3553,samplingMode:9729,wrapMode:10497,flipped:!1,hasMipmap:!1,isOpaque:!1,unpackAlignment:4,preMultiplyAlpha:!1,...q};34067===this._descriptor.target?this.setDataCubeMap(l):this.setData(l)}var p=v.prototype;p.dispose=function(){this._context.gl&&this._glName&&(this._context.unbindTextureAllUnits(this),this._context.gl.deleteTexture(this._glName),
this._glName=null,this._context.instanceCounter.decrement(r.ResourceType.Texture,this))};p.release=function(){this.dispose()};p.resize=function(f,q){const l=this._descriptor;if(l.width!==f||l.height!==q)l.width=f,l.height=q,34067===this._descriptor.target?this.setDataCubeMap(null):this.setData(null)};p.setDataCubeMap=function(f=null){for(let q=34069;34074>=q;q++)this.setData(f,q)};p.setData=function(f,q=3553){if(this._context&&this._context.gl){var l=this._context.gl;this._glName||(this._glName=l.createTexture());
void 0===f&&(f=null);null===f&&(this._descriptor.width=this._descriptor.width||4,this._descriptor.height=this._descriptor.height||4);var t=this._context.bindTexture(this,v.TEXTURE_UNIT_FOR_UPDATES),g=this._descriptor;v._validateTexture(this._context,g);l.pixelStorei(l.UNPACK_ALIGNMENT,g.unpackAlignment);l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,g.flipped?1:0);l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,g.preMultiplyAlpha?1:0);var a=g.pixelFormat,b=g.internalFormat?g.internalFormat:this._deriveInternalFormat(a,
g.dataType);if(f instanceof ImageData||f instanceof HTMLImageElement||f instanceof HTMLCanvasElement||f instanceof HTMLVideoElement){var d=f.width,h=f.height;f instanceof HTMLVideoElement&&(d=f.videoWidth,h=f.videoHeight);l.texImage2D(q,0,b,a,g.dataType,f);x.checkWebGLError(l);g.hasMipmap&&this.generateMipmap();void 0===g.width&&(g.width=d);void 0===g.height&&(g.height=h)}else{null!=g.width&&null!=g.height||console.error("Width and height must be specified!");l.DEPTH24_STENCIL8&&b===l.DEPTH_STENCIL&&
(b=l.DEPTH24_STENCIL8);d=g.width;h=g.height;var k=f;if(z.isSome(k)&&"type"in k&&"compressed"===k.type)for(a=Math.round(Math.log(Math.max(d,h))/Math.LN2)+1,g.hasMipmap=g.hasMipmap&&a===f.levels.length,a=0;;++a){l.compressedTexImage2D(q,a,b,d,h,0,f.levels[Math.min(a,f.levels.length-1)]);if(1===d&&1===h||!g.hasMipmap)break;d=Math.max(1,d>>1);h=Math.max(1,h>>1)}else if(z.isSome(f))l.texImage2D(q,0,b,d,h,0,a,g.dataType,f),x.checkWebGLError(l),g.hasMipmap&&this.generateMipmap();else for(f=0;;++f){l.texImage2D(q,
f,b,d,h,0,a,g.dataType,null);x.checkWebGLError(l);if(1===d&&1===h||!g.hasMipmap)break;d=Math.max(1,d>>1);h=Math.max(1,h>>1)}}v._applySamplingMode(l,this._descriptor);v._applyWrapMode(l,this._descriptor);v._applyAnisotropicFilteringParameters(this._context,this._descriptor);x.checkWebGLError(l);this._context.bindTexture(t,v.TEXTURE_UNIT_FOR_UPDATES)}};p.updateData=function(f,q,l,t,g,a,b=3553){a||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");
const d=this._context.gl,h=this._descriptor,k=this._context.bindTexture(this,v.TEXTURE_UNIT_FOR_UPDATES);(0>q||0>l||t>h.width||g>h.height||q+t>h.width||l+g>h.height)&&console.error("An attempt to update out of bounds of the texture!");d.pixelStorei(d.UNPACK_ALIGNMENT,h.unpackAlignment);d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,h.flipped?1:0);d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,h.preMultiplyAlpha?1:0);a instanceof ImageData||a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof
HTMLVideoElement?d.texSubImage2D(b,f,q,l,h.pixelFormat,h.dataType,a):d.texSubImage2D(b,f,q,l,t,g,h.pixelFormat,h.dataType,a);this._context.bindTexture(k,v.TEXTURE_UNIT_FOR_UPDATES)};p.generateMipmap=function(){const f=this._descriptor;f.hasMipmap||(this._samplingModeDirty=f.hasMipmap=!0,v._validateTexture(this._context,f));9729===f.samplingMode?(this._samplingModeDirty=!0,f.samplingMode=9985):9728===f.samplingMode&&(this._samplingModeDirty=!0,f.samplingMode=9984);const q=this._context.bindTexture(this,
v.TEXTURE_UNIT_FOR_UPDATES);this._context.gl.generateMipmap(f.target);this._context.bindTexture(q,v.TEXTURE_UNIT_FOR_UPDATES)};p.setSamplingMode=function(f){f!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=f,this._samplingModeDirty=!0)};p.setWrapMode=function(f){f!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=f,v._validateTexture(this._context,this._descriptor),this._wrapModeDirty=!0)};p.applyChanges=function(){const f=this._context.gl,q=this._descriptor;this._samplingModeDirty&&
(v._applySamplingMode(f,q),this._samplingModeDirty=!1);this._wrapModeDirty&&(v._applyWrapMode(f,q),this._wrapModeDirty=!1)};p._deriveInternalFormat=function(f,q){if("webgl"===this._context.webglVersion)return f;switch(q){case 5126:switch(f){case 6408:return 34836;case 6407:return 34837;default:throw Error("Unable to derive format");}default:return f}};v._validateTexture=function(f,q){(0>q.width||0>q.height)&&console.error("Negative dimension parameters are not allowed!");const l=c.isPowerOfTwo(q.width)&&
c.isPowerOfTwo(q.height);u(f.gl)||l||("number"===typeof q.wrapMode?33071!==q.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):(33071!==q.wrapMode.s||33071!==q.wrapMode.t)&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),q.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))};v._applySamplingMode=function(f,q){let l=q.samplingMode,t=q.samplingMode;if(9985===l||9987===l)l=9729,q.hasMipmap||(t=9729);else if(9984===
l||9986===l)l=9728,q.hasMipmap||(t=9728);f.texParameteri(q.target,f.TEXTURE_MAG_FILTER,l);f.texParameteri(q.target,f.TEXTURE_MIN_FILTER,t)};v._applyWrapMode=function(f,q){"number"===typeof q.wrapMode?(f.texParameteri(q.target,f.TEXTURE_WRAP_S,q.wrapMode),f.texParameteri(q.target,f.TEXTURE_WRAP_T,q.wrapMode)):(f.texParameteri(q.target,f.TEXTURE_WRAP_S,q.wrapMode.s),f.texParameteri(q.target,f.TEXTURE_WRAP_T,q.wrapMode.t))};v._applyAnisotropicFilteringParameters=function(f,q){var l;const t=f.capabilities.textureFilterAnisotropic;
t&&f.gl.texParameterf(q.target,t.TEXTURE_MAX_ANISOTROPY,null!=(l=q.maxAnisotropy)?l:1)};n._createClass(v,[{key:"glName",get:function(){return this._glName}},{key:"descriptor",get:function(){return this._descriptor}}]);return v}();m.TEXTURE_UNIT_FOR_UPDATES=0;return m})},"esri/views/webgl/checkWebGLError":function(){define(["exports","../../core/Error","../../core/has","../../core/Logger"],function(n,c,z,x){function r(v,p){switch(p){case v.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";
case v.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case v.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case v.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case v.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case v.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";
default:return"Unknown error"}}const u=x.getLogger("esri/views/webgl"),m=!!z("enable-feature:webgl-debug");n.checkWebGLError=function(v){if(m){const p=v.getError();p&&(v=r(v,p),u.error(new c("webgl-error","WebGL error occured",{message:v,stack:Error().stack})))}};n.hasFeatureFlagWebGLDebug=m;n.webglDebugEnabled=function(){return m};n.webglValidateShadersEnabled=function(){return m};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/webgl/enums":function(){define(["exports"],function(n){n.ResourceType=
void 0;var c=n.ResourceType||(n.ResourceType={});c[c.Texture=0]="Texture";c[c.Buffer=1]="Buffer";c[c.VAO=2]="VAO";c[c.Program=3]="Program";c[c.Framebuffer=4]="Framebuffer";c[c.Renderbuffer=5]="Renderbuffer";c[c.COUNT=6]="COUNT";n.BASE_TEXTURE_UNIT=33984;n.DepthStencilAttachment=33306;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/webgl/capabilities/isWebGL2Context":function(){define(function(){return function(n){return window.WebGL2RenderingContext&&n instanceof window.WebGL2RenderingContext}})},
"esri/views/2d/engine/webgl/util/debug":function(){define(["exports"],function(n){n.DEBUG_ATTR_UPDATES=!1;n.createDebugLogger=(c,z)=>c&&((...x)=>z.warn("DEBUG:",...x))||(()=>null);Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/tileRenderers/support/visualVariablesUtils":function(){define("exports ../../../../../../core/maybe ../../../../../../core/screenUtils ../../../../engine/webgl/color ../../../../engine/webgl/definitions ../../../../engine/webgl/enums ../../../../engine/webgl/visualVariablesUtils".split(" "),
function(n,c,z,x,r,u,m){function v(a){return{value:a.value,size:z.toPt(a.size)}}function p(a){return a.map(b=>v(b))}function f(a){return"string"===typeof a||"number"===typeof a?z.toPt(a):{type:"size",expression:a.expression,stops:p(a.stops)}}function q(a){const b={values:[0,0,0,0,0,0,0,0],opacities:[0,0,0,0,0,0,0,0]};if("string"===typeof a.field)if(a.stops){if(8<a.stops.length)return null;a=a.stops;for(var d=0;8>d;++d){const h=a[Math.min(d,a.length-1)];b.values[d]=h.value;b.opacities[d]=h.opacity}}else return null;
else if(a.stops&&0<=a.stops.length)for(a=a.stops&&0<=a.stops.length&&a.stops[0].opacity,d=0;8>d;d++)b.values[d]=Infinity,b.opacities[d]=a;else return null;return b}function l(a,b,d){a[4*b]=d.r/255;a[4*b+1]=d.g/255;a[4*b+2]=d.b/255;a[4*b+3]=d.a}function t(a){if(c.isNone(a)||a.normalizationField)return null;const b={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};if("string"===typeof a.field)if(a.stops){if(8<a.stops.length)return null;b.field=
a.field;a=a.stops;for(var d=0;8>d;++d){const h=a[Math.min(d,a.length-1)];b.values[d]=h.value;l(b.colors,d,h.color)}}else return null;else if(a.stops&&0<=a.stops.length)for(a=a.stops&&0<=a.stops.length&&a.stops[0].color,d=0;8>d;d++)b.values[d]=Infinity,l(b.colors,d,a);else return null;for(a=0;32>a;a+=4)x.premultiplyAlpha(b.colors,a,!0);return b}const g=a=>{const b=[],d=[];a=p(a);const h=a.length;for(let k=0;6>k;k++){const e=a[Math.min(k,h-1)];b.push(e.value);d.push(null==e.size?r.NAN_MAGIC_NUMBER:
z.pt2px(e.size))}return{values:new Float32Array(b),sizes:new Float32Array(d)}};n.convertColorVariable=t;n.convertVisualVariables=function(a){const b=a&&0<a.length?{}:null,d=b?{}:null;if(!b)return{vvFields:b,vvRanges:d};for(const h of a)if(h.field&&(b[h.type]=h.field),"size"===h.type)switch(d.size||(d.size={}),a=h,m.getTypeOfSizeVisualVariable(a)){case u.WGLVVFlag.SIZE_MINMAX_VALUE:d.size.minMaxValue={minDataValue:a.minDataValue,maxDataValue:a.maxDataValue,minSize:f(a.minSize),maxSize:f(a.maxSize)};
break;case u.WGLVVFlag.SIZE_SCALE_STOPS:d.size.scaleStops={stops:p(a.stops)};break;case u.WGLVVFlag.SIZE_FIELD_STOPS:if(a.levels){const k={};for(const e in a.levels)k[e]=g(a.levels[e]);d.size.fieldStops={type:"level-dependent",levels:k}}else d.size.fieldStops={type:"static",...g(a.stops)};break;case u.WGLVVFlag.SIZE_UNIT_VALUE:d.size.unitValue={unit:a.valueUnit,valueRepresentation:a.valueRepresentation}}else"color"===h.type?d.color=t(h):"opacity"===h.type?d.opacity=q(h):"rotation"===h.type&&(d.rotation=
{type:h.rotationType});return{vvFields:b,vvRanges:d}};n.getVisualVariableSizeValueRepresentationRatio=function(a,b){if(!a||!b)return a;switch(b){case "radius":case "distance":return 2*a;case "area":return Math.sqrt(a)}return a};n.getVisualVariablesFields=function(a){const b=a&&0<a.length?{}:null;b&&a.forEach(d=>{const h=d.type;d.field&&(b[h]=d.field)});return b};n.normalizeSizeElement=f;n.normalizeSizeStops=p;n.stopToSizeStop=v;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/visualVariablesUtils":function(){define(["exports",
"../../../../core/Error","../../../../core/Logger","./enums","./Utils"],function(n,c,z,x,r){const u=z.getLogger("esri.views.2d.engine.webgl");n.getTypeOfSizeVisualVariable=function(m){if(r.isNumber(m.minDataValue)&&r.isNumber(m.maxDataValue)&&null!=m.minSize&&null!=m.maxSize)return x.WGLVVFlag.SIZE_MINMAX_VALUE;if((m.expression&&"view.scale"===m.expression||m.valueExpression&&"$view.scale"===m.valueExpression)&&Array.isArray(m.stops))return x.WGLVVFlag.SIZE_SCALE_STOPS;if((null!=m.field||m.expression&&
"view.scale"!==m.expression||m.valueExpression&&"$view.scale"!==m.valueExpression)&&(Array.isArray(m.stops)||"levels"in m&&m.levels))return x.WGLVVFlag.SIZE_FIELD_STOPS;if((null!=m.field||m.expression&&"view.scale"!==m.expression||m.valueExpression&&"$view.scale"!==m.valueExpression)&&null!=m.valueUnit)return x.WGLVVFlag.SIZE_UNIT_VALUE;u.error(new c("mapview-bad-type","Found invalid size VisualVariable",m));return x.WGLVVFlag.NONE};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/ClusterStore":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../geometry ../../../../../core/Evented ../../../../../core/has ../../../../../core/maybe ../../../../../core/accessorSupport/diffUtils ../../../../../geohash/GeohashTree ../../../../../geohash/geohashUtils ../../../../../geometry/support/Ellipsoid ../../../../../geometry/support/spatialReferenceUtils ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/OptimizedFeature ../../../../../layers/graphics/OptimizedGeometry ../../../../../layers/graphics/data/projectionSupport ../../../engine/webgl/definitions ../Store2D ./FeatureSetReaderJSON ../../../../../geometry/SpatialReference".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a,b,d,h,k){let e=function(w){function y(B,A,D,E,G){A=new g([],[A,D]);B=w.call(this,A,E,null,B)||this;B.geohashBoundsInfo=G;return B}c._inheritsLoose(y,w);y.create=function(B,A,D,E,G,I,L,J){A=new y(A,D,E,I,L);A.displayId=B.createDisplayId(!0);A.referenceId=J;A.tileLevel=G;return A};var C=y.prototype;C.update=function(B,A,D,E,G,I){this.geometry.coords[0]=B;this.geometry.coords[1]=A;this.tileLevel=D;this.attributes=E;this.geohashBoundsInfo=G;this.referenceId=null;
this.referenceId=I;return this};C.toJSON=function(){return{objectId:this.objectId,referenceId:1===this.attributes.cluster_count?this.referenceId:null,attributes:{...this.attributes,clusterId:this.objectId},geometry:{x:this.geometry.coords[0],y:this.geometry.coords[1]}}};c._createClass(y,[{key:"count",get:function(){return this.attributes.cluster_count}}]);return y}(t.OptimizedFeatureWithGeometry);z=function(w){function y(B,A,D){var E=w.call(this,B,D)||this;E.events=new x;E._geohashLevel=0;E._tileLevel=
0;E._aggregateValueRanges={};E._aggregateValueRangesChanged=!1;E._geohashBuf=[];E._clusters=new Map;E._tiles=new Map;E.geometryInfo=B.geometryInfo;E._spatialReference=A;E._projectionSupportCheck=a.checkProjectionSupport(A,k.WGS84);E._bitsets.geohash=D.getBitset(D.createBitset());E._bitsets.inserted=D.getBitset(D.createBitset());return E}c._inheritsLoose(y,w);var C=y.prototype;C.updateSchema=function(){var B=c._asyncToGenerator(function*(A,D){const E=this._schema;try{yield w.prototype.updateSchema.call(this,
A,D),yield this._projectionSupportCheck}catch(I){}const G=m.diff(E,D);if(!D||u.isNone(G)&&!A.source&&!A.storage.filters)E&&(A.mesh=!0);else{if(m.hasDiff(G,"params.fields")||!this._tree||A.source)this._tree=new v.GeohashTree(this._statisticFields),this._rebuildTree(),r("esri-2d-update-debug")&&console.debug("Aggregate mesh needs update due to tree changing");r("esri-2d-update-debug")&&console.debug("Applying Update - ClusterStore:",G);A.targets[D.name]=!0;A.mesh=!1;this._aggregateValueRanges={}}});
return function(A,D){return B.apply(this,arguments)}}();C.clear=function(){this._rebuildTree()};C.sweepFeatures=function(B,A){this._bitsets.inserted.forEachSet(D=>{B.has(D)||(D=A.lookupByDisplayIdUnsafe(D),this._remove(D))})};C.sweepClusters=function(B,A,D){this._clusters.forEach((E,G)=>{E&&E.tileLevel!==D&&(B.releaseDisplayId(E.displayId),A.unsetAttributeData(E.displayId),this._clusters.delete(G))})};C.onTileData=function(B,A,D,E,G=!0){if(!this._schema||u.isNone(A.addOrUpdate))return A;var I=this._getTransforms(B,
this._spatialReference);{const L=A.addOrUpdate.getCursor();for(;L.next();)this._update(L,E)}if(A.status.mesh||!G)return A;E=[];this._getClustersForTile(E,B,this._schema.params.clusterRadius,D,I);A.addOrUpdate=h.FeatureSetReaderJSON.fromOptimizedFeatures(E,"esriGeometryPoint");A.addOrUpdate.attachStorage(D);A.end=!0;for(I=A.addOrUpdate.getCursor();I.next();)E=I.getDisplayId(),this._bitsets.computed.unset(E),this.setComputedAttributes(D,I,E,B.scale);this._aggregateValueRangesChanged&&A.end&&(this.events.emit("valueRangesChanged",
{valueRanges:this._aggregateValueRanges}),this._aggregateValueRangesChanged=!1);return A};C.onTileUpdate=function({added:B,removed:A}){B.length&&(this._tileLevel=B=B[0].level,this._setGeohashLevel(B));if(this._schema){var D=this._schema.params.clusterRadius;A.forEach(E=>{this._tiles.delete(E.key.id);this._markTileClustersForDeletion(E,D)})}};C.getAggregate=function(B){let A=null;this._clusters.forEach(D=>{D&&D.displayId===B&&(A=D.toJSON())});return A};C.getAggregates=function(){const B=[];this._clusters.forEach(A=>
{A&&A.tileLevel===this._tileLevel&&B.push(A.toJSON())});return B};C.getDisplayId=function(B){return(B=this._clusters.get(B))?B.displayId:null};C.getFeatureDisplayIdsForAggregate=function(B){B=this._clusters.get(B);if(!B)return[];B=B.geohashBoundsInfo;return this._tree.getRegionDisplayIds(B.xLL,B.yLL,B.xTR,B.yTR,B.level)};C.getDisplayIdForReferenceId=function(B){let A;this._clusters.forEach(D=>{D&&D.referenceId===B&&(A=D.displayId)});return A};C.getAggregateValueRanges=function(){return this._aggregateValueRanges};
C.forEach=function(B){this._clusters.forEach((A,D)=>{A&&B(A,D)})};C.size=function(){let B=0;this.forEach(A=>B++);return B};C._rebuildTree=function(){this._bitsets.computed.clear();this._bitsets.inserted.clear();this._tree&&this._tree.clear()};C._remove=function(B){const A=B.getDisplayId(),D=B.getXHydrated(),E=B.getYHydrated(),G=this._geohashBuf[2*A],I=this._geohashBuf[2*A+1];this._bitsets.inserted.has(A)&&(this._bitsets.inserted.unset(A),this._tree.removeCursor(B,D,E,G,I,this._geohashLevel))};C._update=
function(B,A){const D=B.getDisplayId(),E=this._bitsets.inserted;A=A.isVisible(D);var G=E.has(D);A!==G&&(A?(A=B.getXHydrated(),G=B.getYHydrated(),this._setGeohash(D,A,G)&&(this._tree.insertCursor(B,D,A,G,this._geohashBuf[2*D],this._geohashBuf[2*D+1],this._geohashLevel),E.set(D))):this._remove(B))};C._setGeohash=function(B,A,D){if(this._bitsets.geohash.has(B))return!0;const E=this._geohashBuf;if(this._spatialReference.isWebMercator)A=A/f.earth.radius*57.29577951308232,p.setGeohashBuf(E,B,57.29577951308232*
(Math.PI/2-2*Math.atan(Math.exp(-D/f.earth.radius))),A-360*Math.floor((A+180)/360),12);else{D=a.project({x:A,y:D},this._spatialReference,k.WGS84);if(!D)return!1;p.setGeohashBuf(E,B,D.y,D.x,12)}this._bitsets.geohash.set(B);return!0};C._getClustersForTile=function(B,A,D,E,G,I=!0){var L=this._schema.params.clusterPixelBuffer,J=2*D;D=this._getGeohashLevel(A.key.level);const F=Math.ceil(2**A.key.level*b.TILE_SIZE/J);var K=Math.ceil(L/J)+0,M=Math.ceil(b.TILE_SIZE/J);const {row:R,col:T}=A.key;var Q=Math.floor(T*
b.TILE_SIZE/J)-K;J=Math.floor(R*b.TILE_SIZE/J)-K;L=Q+M+2*K;K=J+M+2*K;for(M=A.tileInfoView.getLODInfoAt(A.key.level);Q<=L;Q++)for(let aa=J;aa<=K;aa++){var S=Q;M.wrap&&(S=0>Q?Q+F:Q%F);const ma=M.wrap&&0>Q,ra=M.wrap&&Q%F!==Q;S=this._lookupCluster(E,M,A.key.level,S,aa,D);if(u.isSome(S)){var X=u.andThen(G,za=>ma?za.left:ra?za.right:za.tile);if((!I||!u.isNone(X))&&S.count&&u.isSome(X)&&I){const za=S.geometry.clone();let wa=S.attributes;za.coords[0]=l.quantizeX(X,za.coords[0]);za.coords[1]=l.quantizeY(X,
za.coords[1]);1===S.count&&u.isSome(S.referenceId)&&(wa={...S.attributes,referenceId:S.referenceId});X=new t["default"](za,wa);X.displayId=S.displayId;B.push(X)}}}};C._getGeohashLevel=function(B){return Math.min(Math.ceil(B/2+2),12)};C._setGeohashLevel=function(B){B=this._getGeohashLevel(B);B=1*(Math.floor(B/1)+1)-1;this._geohashLevel!==B&&(this._geohashLevel=B,this._rebuildTree(),this._bitsets.geohash.clear())};C._getTransforms=function(B,A){const D={originPosition:"upperLeft",scale:[B.resolution,
B.resolution],translate:[B.bounds[0],B.bounds[3]]};A=q.getInfo(A);if(!A)return{tile:D,left:null,right:null};const [E,G]=A.valid;return{tile:D,left:{...D,translate:[G,B.bounds[3]]},right:{...D,translate:[E-G+B.bounds[0],B.bounds[3]]}}};C._getClusterId=function(B,A,D){return(B&15)<<28|(A&16383)<<14|D&16383};C._markForDeletion=function(B,A,D){B=this._getClusterId(B,A,D);this._clusters.delete(B)};C._getClusterBounds=function(B,A,D){var E=this._schema.params.clusterRadius,G=2*E;A=D%2?A*G:A*G-E;const I=
D*G;E=A+G;D=2**B.level*b.TILE_SIZE;B.wrap&&0>A&&(A=0);B.wrap&&E>D&&(E=D);D=I/b.TILE_SIZE;E/=b.TILE_SIZE;G=(I-G)/b.TILE_SIZE;A=B.getXForColumn(A/b.TILE_SIZE);D=B.getYForRow(D);E=B.getXForColumn(E);B=B.getYForRow(G);return[A,D,E,B]};C._lookupCluster=function(B,A,D,E,G,I){const L=this._getClusterId(D,E,G),J=this._clusters.get(L),[F,K,M,R]=this._getClusterBounds(A,E,G);var T={x:F,y:K};G={x:M,y:R};var Q=E=A=0,S=0;if(this._spatialReference.isWebMercator)A=T.x/f.earth.radius*57.29577951308232,A-=360*Math.floor((A+
180)/360),E=57.29577951308232*(Math.PI/2-2*Math.atan(Math.exp(-T.y/f.earth.radius))),Q=G.x/f.earth.radius*57.29577951308232,Q-=360*Math.floor((Q+180)/360),S=57.29577951308232*(Math.PI/2-2*Math.atan(Math.exp(-G.y/f.earth.radius)));else{E=a.project(T,this._spatialReference,k.WGS84);G=a.project(G,this._spatialReference,k.WGS84);if(!E||!G)return null;A=E.x;E=E.y;Q=G.x;S=G.y}T={geohashX:0,geohashY:0};G={geohashX:0,geohashY:0};p.setGeohashXY(T,E,A,I);p.setGeohashXY(G,S,Q,I);E=T.geohashX;Q=T.geohashY;S=
G.geohashX;G=G.geohashY;A={xLL:E,yLL:Q,xTR:S,yTR:G,level:I};G=this._tree.getRegionStatistics(E,Q,S,G,I);const {count:X,xTotal:aa,yTotal:ma,referenceId:ra}=G;I=X?aa/X:0;E=X?ma/X:0;if(0===X)return this._clusters.set(L,null),null;G={cluster_count:X,...G.attributes};B=u.isSome(J)?J.update(I,E,D,G,A,ra):e.create(B,L,I,E,D,G,A,ra);0===X&&(B.geometry.coords[0]=(F+M)/2,B.geometry.coords[1]=(K+R)/2);this._clusters.set(L,B);this._updateAggregateValueRangeForCluster(B,B.tileLevel);return B};C._updateAggregateValueRangeForCluster=
function(B,A){const D=this._aggregateValueRanges[A]||{minValue:Infinity,maxValue:0},E=D.minValue,G=D.maxValue;D.minValue=Math.min(E,B.count);D.maxValue=Math.max(G,B.count);this._aggregateValueRanges[A]=D;if(E!==D.minValue||G!==D.maxValue)this._aggregateValueRangesChanged=!0};C._markTileClustersForDeletion=function(B,A){var D=2*A;A=Math.ceil(b.TILE_SIZE/D);const {row:E,col:G}=B.key,I=Math.floor(G*b.TILE_SIZE/D);D=Math.floor(E*b.TILE_SIZE/D);for(let L=I;L<I+A;L++)for(let J=D;J<D+A;J++)this._markForDeletion(B.key.level,
L,J)};return y}(d.Store2D);n.ClusterInfo=e;n.ClusterStore=z;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/geohash/GeohashTree":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../core/CircularArray ../core/maybe ./geohashUtils ../views/2d/layers/features/support/FeatureSetReaderJSON".split(" "),function(n,c,z,x,r,u){let m=function(){function p(q=[],l=8096){this._nodes=0;this._root=new v(0,0,0);this._statisticFields=q;this._pool=l?new z(8096):null}var f=p.prototype;f._acquire=
function(q,l,t){this._nodes++;let g=null;x.isSome(this._pool)&&(g=this._pool.dequeue());return x.isSome(g)?g.realloc(q,l,t):new v(q,l,t)};f._release=function(q){this._nodes--;x.isSome(this._pool)&&this._pool.enqueue(q)};f.dropLevels=function(q){this._forEachNode(l=>{if(l.depth>=q)for(let t=0;t<l.children.length;t++){const g=l.children[t];l.children[t]=null;g&&this._release(g)}})};f.clear=function(){this.dropLevels(0)};f.insert=function(q,l,t=0){const g=u.FeatureSetReaderJSON.fromOptimizedFeatures([q],
"esriGeometryPoint").getCursor();g.next();const a=g.readGeometry();if(a){var [b,d]=a.coords;this.insertCursor(g,q.displayId,b,d,q.geohashX,q.geohashY,l,t)}};f.insertCursor=function(q,l,t,g,a,b,d,h=0){let k=this._root,e=0,w=0,y=0;for(;null!==k;){k.depth>=h&&(k.count+=1,k.xTotal+=t,k.yTotal+=g,k.xGeohashTotal+=a,k.yGeohashTotal+=b,k.displayId=l,this._updateStatisticsCursor(q,k,1));if(e>=d){k.add(l);break}var C=Math.ceil((e+1)/2),B=Math.floor((e+1)/2);const D=1-e%2;var A=30-(3*C+2*B);C=30-(2*C+3*B);
A=(a&7*D+3*(1-D)<<A)>>A;C=(b&3*D+7*(1-D)<<C)>>C;B=A+C*(8*D+4*(1-D));const E=2*D+3*(1-D);w=w<<3*D+2*(1-D)|A;y=y<<E|C;null==k.children[B]&&(k.children[B]=this._acquire(w,y,e+1));e+=1;k=k.children[B]}};f.remove=function(q,l){const t=u.FeatureSetReaderJSON.fromOptimizedFeatures([q],"esriGeometryPoint").getCursor();t.next();const g=t.readGeometry();if(g){var [a,b]=g.coords;this.removeCursor(t,a,b,q.geohashX,q.geohashY,l)}};f.removeCursor=function(q,l,t,g,a,b){let d=this._root,h=0;for(;null!==d;){--d.count;
d.xTotal-=l;d.yTotal-=t;d.xGeohashTotal-=g;d.yGeohashTotal-=a;this._updateStatisticsCursor(q,d,-1);if(h>=b){d.remove(q.getDisplayId());break}var k=Math.ceil((h+1)/2);const y=Math.floor((h+1)/2);var e=1-h%2,w=30-(3*k+2*y);k=30-(2*k+3*y);e=((g&7*e+3*(1-e)<<w)>>w)+((a&3*e+7*(1-e)<<k)>>k)*(8*e+4*(1-e));w=d.children[e];1===w.count&&(this._release(w),d.children[e]=null);h+=1;d=w}};f.find=function(q,l,t){return this._root.find(q,l,t,0,0,0)};f.findSingleOccupancyNode=function(q,l,t,g,a){let b=this._root;
for(;null!==b;){var d=b.depth,h=b.xNode,k=b.yNode;const A=1-d%2;var e=b.xGeohashTotal/b.count,w=b.yGeohashTotal/b.count;if(1===b.count&&q<e&&e<=t&&l<w&&w<=g)return b;if(d>=a)b=b.next;else{w=Math.ceil((d+1)/2);d=Math.floor((d+1)/2);e=30-(3*w+2*d);var y=30-(2*w+3*d),C=~((1<<e)-1),B=~((1<<y)-1);h<<=3*A+2*(1-A);k<<=2*A+3*(1-A);d=Math.max(h,(q&C)>>e);w=Math.max(k,(l&B)>>y);e=Math.min(h+8*A+4*(1-A),(t&C)>>e);y=Math.min(k+4*A+8*(1-A),(g&B)>>y);for(C=B=null;w<=y;w++)for(let D=d;D<=e;D++){const E=b.children[D-
h+(w-k)*(8*A+4*(1-A))];E&&(B||(B=E,B.next=b.next),C&&(C.next=E),C=E,E.next=b.next)}b=B||b.next}}return null};f.getRegionDisplayIds=function(q,l,t,g,a){let b=this._root;const d=[];for(;null!==b;){var h=b.depth,k=b.xNode,e=b.yNode;if(h>=a)h=b.xGeohashTotal/b.count,k=b.yGeohashTotal/b.count,q<=h&&h<=t&&l<=k&&k<=g&&b.displayIds.forEach(E=>d.push(E)),b=b.next;else{var w=Math.ceil((h+1)/2),y=Math.floor((h+1)/2);h=1-h%2;var C=30-(3*w+2*y),B=30-(2*w+3*y),A=~((1<<C)-1),D=~((1<<B)-1);k<<=3*h+2*(1-h);e<<=2*
h+3*(1-h);w=Math.max(k,(q&A)>>C);y=Math.max(e,(l&D)>>B);C=Math.min(k+8*h+4*(1-h),(t&A)>>C);B=Math.min(e+4*h+8*(1-h),(g&D)>>B);for(A=D=null;y<=B;y++)for(let E=w;E<=C;E++){const G=b.children[E-k+(y-e)*(8*h+4*(1-h))];G&&(D||(D=G,D.next=b.next),A&&(A.next=G),A=G,G.next=b.next)}b=D||b.next}}return d};f.getRegionStatistics=function(q,l,t,g,a){let b=this._root,d=0,h=0,k=0;const e={};let w=0;for(;null!==b;){var y=b.depth,C=b.xNode,B=b.yNode;if(y>=a)y=b.xGeohashTotal/b.count,C=b.yGeohashTotal/b.count,q<y&&
y<=t&&l<C&&C<=g&&(d+=b.count,h+=b.xTotal,k+=b.yTotal,1===b.count&&(w=b.displayId),this._aggregateStatistics(e,b.statistics)),b=b.next;else{var A=Math.ceil((y+1)/2),D=Math.floor((y+1)/2);y=1-y%2;var E=30-(3*A+2*D),G=30-(2*A+3*D),I=~((1<<E)-1),L=~((1<<G)-1);C<<=3*y+2*(1-y);B<<=2*y+3*(1-y);A=Math.max(C,(q&I)>>E);D=Math.max(B,(l&L)>>G);E=Math.min(C+8*y+4*(1-y),(t&I)>>E);G=Math.min(B+4*y+8*(1-y),(g&L)>>G);I=L=null;for(let J=D;J<=G;J++)for(let F=A;F<=E;F++){const K=b.children[F-C+(J-B)*(8*y+4*(1-y))];if(K)if(J!==
D&&J!==G&&F!==A&&F!==E){const M=K.xGeohashTotal/K.count,R=K.yGeohashTotal/K.count;q<M&&M<=t&&l<R&&R<=g&&(d+=K.count,h+=K.xTotal,k+=K.yTotal,1===K.count&&(w=K.displayId),this._aggregateStatistics(e,K.statistics))}else L||(L=K,L.next=b.next),I&&(I.next=K),I=K,K.next=b.next}b=L||b.next}}q=this._normalizeStatistics(e,d);return{count:d,attributes:q,xTotal:h,yTotal:k,referenceId:w}};f._forEachNode=function(q){let l=this._root;for(;null!==l;){const t=this._linkChildren(l)||l.next;q(l);l=t}};f._linkChildren=
function(q){let l=null,t=null;for(let g=0;g<=q.children.length;g++){const a=q.children[g];a&&(l||(l=a,l.next=q.next),t&&(t.next=a),t=a,a.next=q.next)}return l};f._updateStatisticsCursor=function(q,l,t){for(const d of this._statisticFields){const h=d.name,k=d.inField?q.readAttribute(d.inField):q.getComputedNumericAtIndex(d.inFieldIndex);switch(d.statisticType){case "norm":l.statistics[h]||(l.statistics[h]={});var g=q.readAttribute(d.inNormalizationField),a=l.statistics[h].onStatisticField||0,b=l.statistics[h].onStatisticNormalizationField||
0;null==k||isNaN(k)||null==g||0===g||isNaN(g)||(l.statistics[h].onStatisticField=a+t*k,l.statistics[h].onStatisticNormalizationField=b+t*g);break;case "sum":case "avg":l.statistics[h]||(l.statistics[h]={value:0,nanCount:0});g=l.statistics[h].value;a=l.statistics[h].nanCount;null==k||isNaN(k)?l.statistics[h].nanCount=a+t:l.statistics[h].value=g+t*k;break;case "avg_angle":{l.statistics[h]||(l.statistics[h]={x:0,y:0,nanCount:0});g=l.statistics[h].x;a=l.statistics[h].y;b=l.statistics[h].nanCount;const e=
Math.PI/180;null==k||isNaN(k)?l.statistics[h].nanCount=b+t:(l.statistics[h].x=g+t*Math.cos(k*e),l.statistics[h].y=a+t*Math.sin(k*e));break}case "mode":l.statistics[h]||(l.statistics[h]={}),l.statistics[h][k]=(l.statistics[h][k]||0)+t}}};f._aggregateStatistics=function(q,l){for(const t of this._statisticFields){const g=t.name;switch(t.statisticType){case "sum":case "avg":case "avg_angle":case "mode":case "norm":q[g]||(q[g]={});for(const a in l[g])q[g][a]=(q[g][a]||0)+l[g][a]}}};f._normalizeStatistics=
function(q,l){const t={};for(const a of this._statisticFields){const b=a.name;switch(a.statisticType){case "norm":var g=q[b];if(l&&null==g.onStatisticNormalizationField)break;if(l&&g.onStatisticNormalizationField){t[b]=g.onStatisticField/g.onStatisticNormalizationField;break}t[b]=0;break;case "sum":{if(!l)break;const {value:d,nanCount:h}=q[b];if(!(l-h))break;t[b]=d;break}case "avg":{if(!l)break;const {value:d,nanCount:h}=q[b];if(!(l-h))break;t[b]=d/(l-h);break}case "avg_angle":{if(!l)break;const {x:d,
y:h,nanCount:k}=q[b];if(!(l-k))break;t[b]=180/Math.PI*Math.atan2(h/(l-k),d/(l-k));break}case "mode":{g=q[b];let d=0,h=null;for(const k in g){const e=g[k];e>d&&(d=e,h=k)}t[b]="null"===h?null:h}}}return t};c._createClass(p,[{key:"count",get:function(){return this._root.count}},{key:"size",get:function(){return this._nodes}},{key:"poolSize",get:function(){return x.mapOr(this._pool,0,q=>q.size)}},{key:"depth",get:function(){let q=0;this._forEachNode(l=>q=Math.max(q,l.depth));return q}}]);return p}(),
v=function(){function p(q,l,t){this.yTotal=this.xTotal=this.count=0;this.statistics={};this.displayId=0;this.displayIds=new Set;this.next=null;this.yGeohashTotal=this.xGeohashTotal=this.yNode=this.xNode=this.depth=0;this.children=Array(32);for(let g=0;g<this.children.length;g++)this.children[g]=null;this.xNode=q;this.yNode=l;this.depth=t}var f=p.prototype;f.realloc=function(q,l,t){for(let g=0;g<this.children.length;g++)this.children[g]=null;this.xNode=q;this.yNode=l;this.depth=t;this.next=null;this.count=
this.yTotal=this.xTotal=this.yGeohashTotal=this.xGeohashTotal=0;this.statistics={};this.displayIds.clear();return this};f.add=function(q){this.displayIds.add(q)};f.remove=function(q){this.displayIds.delete(q)};f.getLngLatBounds=function(){var q=this.depth;const l=Math.ceil(q/2);q=Math.floor(q/2);return r.decodeGeohashXY({geohashX:this.xNode<<30-(3*l+2*q),geohashY:this.yNode<<30-(2*l+3*q)},this.depth)};f.find=function(q,l,t,g,a,b){if(g>=t)return this;var d=1-g%2;const h=3*d+2*(1-d),k=2*d+3*(1-d),e=
30-a-h,w=30-b-k;d=this.children[((q&7*d+3*(1-d)<<e)>>e)+((l&3*d+7*(1-d)<<w)>>w)*(8*d+4*(1-d))];return null==d?null:d.find(q,l,t,g+1,a+h,b+k)};return p}();n.GeohashTree=m;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/geohash/geohashUtils":function(){define(["exports"],function(n){function c(a){return 57>=a?a-48:104>=a?a-88:107>=a?a-89:110>=a?a-90:a-91}function z(a,b,d){a[0]=b;a[1]=d;return a}function x(a,b){const d=(a[0]+a[1])/2,h=!b;a[0]=h*a[0]+b*d;a[1]=h*d+b*a[1]}function r(a,b){b=b>
(a[0]+a[1])/2;x(a,b);return b}function u(a,b){const d=z(t,-90,90),h=z(g,-180,180);for(let e=0;e<b.length;e++){var k=b.charCodeAt(e);k=c(k);0===e%2?(x(h,!!(16&k)),x(h,!!(4&k)),x(h,!!(1&k)),x(d,!!(8&k)),x(d,!!(2&k))):(x(d,!!(16&k)),x(d,!!(4&k)),x(d,!!(1&k)),x(h,!!(8&k)),x(h,!!(2&k)))}a[0]=(d[0]+d[1])/2;a[1]=(h[0]+h[1])/2;return a}function m(a,b,d){let h="";const k=z(t,-90,90),e=z(g,-180,180);for(let w=0;w<d;w++){let y=0;w%2?(y|=r(k,a)<<4,y|=r(e,b)<<3,y|=r(k,a)<<2,y|=r(e,b)<<1,y|=r(k,a)<<0):(y|=r(e,
b)<<4,y|=r(k,a)<<3,y|=r(e,b)<<2,y|=r(k,a)<<1,y|=r(e,b)<<0);h+="0123456789bcdefghjkmnpqrstuvwxyz"[y]}return h}function v(a){return 180/2**Math.floor(5*a/2)}function p(a){return 360/2**Math.ceil(5*a/2)}function f(a,b){return b?1&a|(4&a)>>1|(16&a)>>2:(2&a)>>1|(8&a)>>2}function q(a,b){return b?(2&a)>>1|(8&a)>>2:1&a|(4&a)>>1|(16&a)>>2}function l(a,b,d){var h=!((a.length-1)%2);const k=a.substring(0,a.length-1);var e=c(a.charCodeAt(a.length-1)),w=0,y=0;let C=0;var B=0;h?(w=8,y=4,C=1&e|(4&e)>>1|(16&e)>>2,
B=(2&e)>>1|(8&e)>>2):(w=4,y=8,B=1&e|(4&e)>>1|(16&e)>>2,C=(2&e)>>1|(8&e)>>2);b=C+b;e=B+d;d=Math.floor(b/w);B=Math.floor(e/y);w=b-d*w;y=e-B*y;h="0123456789bcdefghjkmnpqrstuvwxyz"[h?w&1|(y&1)<<1|(w&2)<<1|(y&2)<<2|(w&4)<<2:y&1|(w&1)<<1|(y&2)<<1|(w&2)<<2|(y&4)<<2];return 1<a.length&&(d||B)?l(k,d,B)+h:k+h}const t=new Float64Array(2),g=new Float64Array(2);n.convertGeohash32ToXY=function(a,b){let d=a=0,h=30,k=30;for(let y=0;y<b.length;y++){var e=b.charCodeAt(y),w=c(e);e=0===y%2;const C=f(w,e);w=q(w,e);h-=
e?3:2;k-=e?2:3;a|=C<<h;d|=w<<k}return{geohashX:a,geohashY:d}};n.decodeBase32Char=c;n.decodeGeohash=u;n.decodeGeohashXY=function(a,b){let d=-90,h=90,k=-180,e=180;for(let D=0;D<b;D++){var w=Math.ceil((D+1)/2),y=Math.floor((D+1)/2),C=1-D%2,B=30-(3*w+2*y),A=30-(2*w+3*y);y=3*C+2*(1-C);w=2*C+3*(1-C);B=(7*C+3*(1-C)<<B&a.geohashX)>>B;C=(3*C+7*(1-C)<<A&a.geohashY)>>A;for(--y;0<=y;y--){A=(k+e)/2;const E=B&1<<y?1:0;k=(1-E)*k+E*A;e=(1-E)*A+E*e}for(--w;0<=w;w--)B=(d+h)/2,y=C&1<<w?1:0,d=(1-y)*d+y*B,h=(1-y)*B+y*
h}return[k,d,e,h]};n.encodeBase32Char=function(a){return"0123456789bcdefghjkmnpqrstuvwxyz"[a]};n.encodeGeohash=m;n.forEachIntersectingGeohash=function(a,b,d,h,k,e){var w=Math.abs(d-a),y=Math.abs(h-b);const C=v(k),B=p(k);y=Math.ceil(y/B);w=Math.ceil(w/C);k=m(a,b,k);for(let A=0;A<y;A++)for(let D=0;D<w;D++){const E=l(k,A,D),[G,I]=u([0,0],E);e(E,Math.abs((Math.min(d,G+C/2)-Math.max(a,G-C/2))*(Math.min(h,I+B/2)-Math.max(b,I-B/2)))/(C*B))}};n.getIntersectingGeohashes=function(a,b,d,h,k){d=Math.abs(d-a);
h=Math.abs(h-b);var e=v(k);const w=p(k);h=Math.ceil(h/w);d=Math.ceil(d/e);a=m(a,b,k);b=[];for(k=0;k<h;k++)for(e=0;e<d;e++)b.push(l(a,k,e));return b};n.getRelativeGeohash=l;n.latDistPerGeohash=v;n.lonDistPerGeohash=p;n.setGeohashBuf=function(a,b,d,h,k){k%2&&(k+=1);let e=0,w=0,y=-90,C=90,B=-180,A=180;for(let I=0;I<k/2;I++){for(var D=0;5>D;D++){var E=(B+A)/2,G=h>E?1:0;e|=G<<29-(D+5*I);B=(1-G)*B+G*E;A=(1-G)*E+G*A}for(D=0;5>D;D++)E=(y+C)/2,G=d>E?1:0,w|=G<<29-(D+5*I),y=(1-G)*y+G*E,C=(1-G)*E+G*C}a[2*b]=
e;a[2*b+1]=w};n.setGeohashXY=function(a,b,d,h){h%2&&(h+=1);let k=0,e=0,w=-90,y=90,C=-180,B=180;for(let G=0;G<h/2;G++){for(var A=0;5>A;A++){var D=(C+B)/2,E=d>D?1:0;k|=E<<29-(A+5*G);C=(1-E)*C+E*D;B=(1-E)*D+E*B}for(A=0;5>A;A++)D=(w+y)/2,E=b>D?1:0,e|=E<<29-(A+5*G),w=(1-E)*w+E*D,y=(1-E)*D+E*y}a.geohashX=k;a.geohashY=e};n.unpackXBits=f;n.unpackYBits=q;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/ComputedAttributeStorage":function(){define(["exports","./displayIdUtils",
"./StaticBitSet"],function(n,c,z){function x(u,m,v){if(!(u.length>m))for(;u.length<=m;)u.push(v)}let r=function(){function u(){this._numerics=[];this._strings=[];this._idGenerator=new c.DisplayIdGenerator;this._allocatedSize=256;this._bitsets=[];this._instanceIds=[];this._bounds=[]}var m=u.prototype;m.createBitset=function(){const v=this._bitsets.length;this._bitsets.push(z.StaticBitSet.create(this._allocatedSize,2147483647));return v+1};m.getBitset=function(v){return this._bitsets[v-1]};m._expand=
function(){this._allocatedSize<<=1;for(const v of this._bitsets)v.resize(this._allocatedSize)};m._ensureNumeric=function(v,p){this._numerics[v]||(this._numerics[v]=[]);x(this._numerics[v],p,0)};m._ensureInstanceId=function(v){x(this._instanceIds,v,0)};m._ensureString=function(v,p){this._strings[v]||(this._strings[v]=[]);x(this._strings[v],p,null)};m.createDisplayId=function(v=!1){const p=this._idGenerator.createId();p>this._allocatedSize&&this._expand();return((v?2147483648:0)|p)>>>0};m.releaseDisplayId=
function(v){for(const p of this._bitsets)p.unset(v);return this._idGenerator.releaseId(v&2147483647)};m.getComputedNumeric=function(v,p){return this.getComputedNumericAtIndex(v&2147483647,0)};m.setComputedNumeric=function(v,p,f){return this.setComputedNumericAtIndex(v&2147483647,f,0)};m.getComputedString=function(v,p){return this.getComputedStringAtIndex(v&2147483647,0)};m.setComputedString=function(v,p,f){return this.setComputedStringAtIndex(v&2147483647,0,f)};m.getComputedNumericAtIndex=function(v,
p){v&=2147483647;this._ensureNumeric(p,v);return this._numerics[p][v]};m.setComputedNumericAtIndex=function(v,p,f){v&=2147483647;this._ensureNumeric(p,v);this._numerics[p][v]=f};m.getInstanceId=function(v){v&=2147483647;this._ensureInstanceId(v);return this._instanceIds[v]};m.setInstanceId=function(v,p){v&=2147483647;this._ensureInstanceId(v);this._instanceIds[v]=p};m.getComputedStringAtIndex=function(v,p){v&=2147483647;this._ensureString(p,v);return this._strings[p][v]};m.setComputedStringAtIndex=
function(v,p,f){v&=2147483647;this._ensureString(p,v);this._strings[p][v]=f};m.getXMin=function(v){return this._bounds[4*(v&2147483647)]};m.getYMin=function(v){return this._bounds[4*(v&2147483647)+1]};m.getXMax=function(v){return this._bounds[4*(v&2147483647)+2]};m.getYMax=function(v){return this._bounds[4*(v&2147483647)+3]};m.setBounds=function(v,p){p=p.readHydratedGeometry();if(!p||!p.coords.length)return!1;let f=Infinity,q=Infinity,l=-Infinity,t=-Infinity;p.forEachVertex((g,a)=>{f=Math.min(f,g);
q=Math.min(q,a);l=Math.max(l,g);t=Math.max(t,a)});v&=2147483647;x(this._bounds,4*v+4,0);this._bounds[4*v]=f;this._bounds[4*v+1]=q;this._bounds[4*v+2]=l;this._bounds[4*v+3]=t;return!0};return u}();n.ComputedAttributeStorage=r;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/displayIdUtils":function(){define(["exports"],function(n){let c=function(){function z(){this._freeIds=[];this._idCounter=1}var x=z.prototype;x.createId=function(r=!1){var u=this._getFreeId();
return((r?2147483648:0)|u)>>>0};x.releaseId=function(r){this._freeIds.push(r)};x._getFreeId=function(){return this._freeIds.length?this._freeIds.pop():this._idCounter++};return z}();n.DISPLAY_ID_TYPE_AGGREGATE=1;n.DISPLAY_ID_TYPE_FEATURE=0;n.DisplayIdGenerator=c;n.getDisplayIdIndex=function(z){return z&2147483647};n.getDisplayIdType=function(z){return(z&2147483648)>>>31};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/TileStore":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Evented ../../../../../core/has ../../../../../chunks/rbush ./Tile ../../../tiling/TileCoverage ../../../tiling/TileKey".split(" "),
function(n,c,z,x,r,u,m){const v={added:[],removed:[]},p=new Set,f=new m(0,0,0,0);return function(q){function l(g){var a=q.call(this)||this;a._tiles=new Map;a._index=x.rbush(9,z("csp-restrictions")?b=>({minX:b.bounds[0],minY:b.bounds[1],maxX:b.bounds[2],maxY:b.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]);a.tiles=[];a.tileScheme=g;return a}n._inheritsLoose(l,q);var t=l.prototype;t.destroy=function(){this.clear()};t.clear=function(){this.tiles.length=0;this._tiles.clear();this._index.clear()};
t.has=function(g){return this._tiles.has(g)};t.get=function(g){return this._tiles.get(g)};t.boundsIntersections=function(g){return this._index.search({minX:g[0],minY:g[1],maxX:g[2],maxY:g[3]})};t.updateTiles=function(g){const a={added:[],removed:[]};for(const b of g.added)if(!this.has(b)){const d=new r.Tile(this.tileScheme,b);this._tiles.set(b,d);this._index.insert(d);a.added.push(d)}for(const b of g.removed)this.has(b)&&(g=this.get(b),this._tiles.delete(b),this._index.remove(g),a.removed.push(g));
this.tiles.length=0;this._tiles.forEach(b=>this.tiles.push(b));(a.added.length||a.removed.length)&&this.emit("update",a)};t.setViewState=function(g){if(g=this.tileScheme.getTileCoverage(g,0)){var {spans:a,lodInfo:b}=g,{level:d}=b;if(0<a.length)for(const {row:k,colFrom:e,colTo:w}of a)for(var h=e;h<=w;h++){const y=f.set(d,k,b.normalizeCol(h),b.getWorldForColumn(h)).id;p.add(y);if(!this.has(y)){const C=new r.Tile(this.tileScheme,y);this._tiles.set(y,C);this._index.insert(C);this.tiles.push(C);v.added.push(C)}}for(d=
this.tiles.length-1;0<=d;d--)h=this.tiles[d],p.has(h.id)||(this._tiles.delete(h.id),this.tiles.splice(d,1),this._index.remove(h),v.removed.push(h));(v.added.length||v.removed.length)&&this.emit("update",v);u.pool.release(g);p.clear();v.added.length=0;v.removed.length=0}};return l}(c)})},"esri/views/2d/layers/features/support/Tile":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/ArrayPool ../../../../../geometry/Extent ../../../../../geometry/support/aaBoundingRect ../../../../../rest/support/QuantizationParameters ../../../tiling/TileKey".split(" "),
function(n,c,z,x,r,u,m){let v=function(){function p(q,l){this.key=new m(0,0,0,0);this.bounds=r.create();this.objectIds=new Set;this.key.set(l);l=q.getLODInfoAt(this.key);this.tileInfoView=q;this.tileInfoView.getTileBounds(this.bounds,this.key,!0);this.resolution=l.resolution;this.scale=l.scale;this.level=l.level}var f=p.prototype;f.createChildTiles=function(){const q=this.key.getChildKeys(),l=z.acquire();for(let t=0;t<q.length;t++)l[t]=new p(this.tileInfoView,q[t]);return l};f.getQuantizationParameters=
function(){return u.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})};c._createClass(p,[{key:"id",get:function(){return this.key.id}},{key:"extent",get:function(){return x.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}},{key:"transform",get:function(){return{originPosition:"upperLeft",scale:[this.resolution,
this.resolution],translate:[this.bounds[0],this.bounds[3]]}}}]);return p}();n.Tile=v;n["default"]=v;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/tiling/TileKey":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../core/ObjectPool"],function(n,c){let z=function(){function x(u,m,v,p){this.set(u,m,v,p)}x.getId=function(u,m,v,p){return"object"===typeof u?`${u.level}/${u.row}/${u.col}/${u.world}`:`${u}/${m}/${v}/${p}`};var r=x.prototype;r.acquire=function(u,m,
v,p){this.set(u,m,v,p)};r.contains=function(u){const m=u.level-this.level;return this.row===u.row>>m&&this.col===u.col>>m&&this.world===u.world};r.equals=function(u){return this.level===u.level&&this.row===u.row&&this.col===u.col&&this.world===u.world};r.clone=function(){return new x(this)};r.release=function(){this.world=this.col=this.row=this.level=0};r.set=function(u,m,v,p){if(null==u)this.world=this.col=this.row=this.level=0;else if("object"===typeof u)this.level=u.level||0,this.row=u.row||0,
this.col=u.col||0,this.world=u.world||0;else if("string"===typeof u){const [f,q,l,t]=u.split("/");this.level=parseFloat(f);this.row=parseFloat(q);this.col=parseFloat(l);this.world=parseFloat(t)}else this.level=+u,this.row=+m,this.col=+v,this.world=+p||0;return this};r.toString=function(){return`${this.level}/${this.row}/${this.col}/${this.world}`};r.getParentKey=function(){return 0>=this.level?null:new x(this.level-1,this.row>>1,this.col>>1,this.world)};r.getChildKeys=function(){const u=this.level+
1,m=this.row<<1,v=this.col<<1,p=this.world;return[new x(u,m,v,p),new x(u,m,v+1,p),new x(u,m+1,v,p),new x(u,m+1,v+1,p)]};r.compareRowMajor=function(u){return this.row<u.row?-1:this.row>u.row?1:this.col<u.col?-1:this.col>u.col?1:0};n._createClass(x,[{key:"key",get:function(){return this}},{key:"id",get:function(){return this.toString()},set:function(u){this.set(u)}},{key:"hash",get:function(){return(this.world&3)<<30|(this.col&4095)<<22|(this.row&4095)<<8|this.level&63}}]);return x}();z.pool=new c(z,
null,null,25,50);return z})},"esri/views/2d/tiling/TileCoverage":function(){define(["../../../core/ObjectPool"],function(n){let c=function(){function z(){this.spans=[]}var x=z.prototype;x.acquire=function(r){this.lodInfo=r};x.release=function(){this.lodInfo=null;this.spans.length=0};x.forEach=function(r,u){const {spans:m,lodInfo:v}=this,{level:p}=v;if(0!==m.length)for(const {row:f,colFrom:q,colTo:l}of m)for(let t=q;t<=l;t++)r.call(u,p,f,v.normalizeCol(t),v.getWorldForColumn(t))};return z}();c.pool=
new n(c);return c})},"esri/views/2d/tiling/TileInfoView":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(n,c,z,x,r,u){const m=new r("0/0/0/0");let v=function(){function f(l,t,g,a,b,d,h,k){this.x=l;this.ymin=t;this.ymax=g;this.invM=a;this.leftAdjust=b;this.rightAdjust=d;this.leftBound=h;this.rightBound=k}f.create=function(l,t){l[1]>t[1]&&([l,t]=[t,l]);const [g,a]=l,[b,d]=
t;l=b-g;t=d-a;t=0!==t?l/t:0;const h=(Math.ceil(a)-a)*t,k=(Math.floor(a)-a)*t;return new f(g,Math.floor(a),Math.ceil(d),t,0>l?h:k,0>l?k:h,0>l?b:g,0>l?g:b)};var q=f.prototype;q.incrRow=function(){this.x+=this.invM};q.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};q.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return f}();const p=[[0,0],[0,0],[0,0],[0,0]];return function(){function f(l,t){this.tileInfo=l;this.fullExtent=t;this.scales=
[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};const g=l.lods.slice();g.sort(function(b,d){return d.scale-b.scale});const a=this._lodInfos=g.map(b=>z.create(l,b,t));g.forEach((b,d)=>{this._infoByLevel[b.level]=a[d];this._infoByScale[b.scale]=a[d];this.scales[d]=b.scale},this);this._wrap=l.isWrappable}var q=f.prototype;q.getLODInfoAt=function(l){return this._infoByLevel["number"===typeof l?l:l.level]};q.getTileBounds=function(l,t,g=!1){m.set(t);return(t=this._infoByLevel[m.level])?
t.getTileBounds(l,m,g):l};q.getTileCoords=function(l,t,g=!1){m.set(t);return(t=this._infoByLevel[m.level])?t.getTileCoords(l,m,g):l};q.getTileCoverage=function(l,t=192,g="closest"){g="closest"===g?this.getClosestInfoForScale(l.scale):this.getSmallestInfoForScale(l.scale);const a=x.pool.acquire(g),b=this._wrap;var d=Infinity;let h=-Infinity;const k=a.spans;p[0][0]=p[0][1]=p[1][1]=p[3][0]=-t;p[1][0]=p[2][0]=l.size[0]+t;p[2][1]=p[3][1]=l.size[1]+t;for(e of p)l.toMap(e,e),e[0]=g.getColumnForX(e[0]),e[1]=
g.getRowForY(e[1]);l=[];var e=3;for(t=0;4>t;t++)p[t][1]===p[e][1]?e=t:(e=v.create(p[t],p[e]),d=Math.min(e.ymin,d),h=Math.max(e.ymax,h),void 0===l[e.ymin]&&(l[e.ymin]=[]),l[e.ymin].push(e),e=t);if(null==d||null==h||100<h-d)return null;for(t=[];d<h;){null!=l[d]&&(t=t.concat(l[d]));e=Infinity;var w=-Infinity;for(var y=t.length-1;0<=y;y--){var C=t[y];e=Math.min(e,C.getLeftCol());w=Math.max(w,C.getRightCol())}e=Math.floor(e);w=Math.floor(w);if(d>=g.first[1]&&d<=g.last[1])if(b)if(g.size[0]<g.worldSize[0])for(y=
Math.floor(w/g.worldSize[0]),C=Math.floor(e/g.worldSize[0]);C<=y;C++)k.push(new u(d,Math.max(g.getFirstColumnForWorld(C),e),Math.min(g.getLastColumnForWorld(C),w)));else k.push(new u(d,e,w));else e>g.last[0]||w<g.first[0]||(e=Math.max(e,g.first[0]),w=Math.min(w,g.last[0]),k.push(new u(d,e,w)));d+=1;for(e=t.length-1;0<=e;e--)w=t[e],w.ymax>=d?w.incrRow():t.splice(e,1)}return a};q.getTileParentId=function(l){m.set(l);l=this._lodInfos.indexOf(this._infoByLevel[m.level])-1;if(0>l)return null;this._getTileIdAtLOD(m,
this._lodInfos[l],m);return m.id};q.getTileResolution=function(l){return(l=this._infoByLevel["object"===typeof l?l.level:l])?l.resolution:-1};q.getTileScale=function(l){return(l=this._infoByLevel[l.level])?l.scale:-1};q.intersects=function(l,t){m.set(t);t=this._infoByLevel[m.level];const g=l.lodInfo;if(g.resolution>t.resolution){this._getTileIdAtLOD(m,g,m);var a=g.denormalizeCol(m.col,m.world);for(var b of l.spans)if(b.row===m.row&&b.colFrom<=a&&b.colTo>=a)return!0}if(g.resolution<t.resolution){const [h,
k,e,w]=l.spans.reduce((y,C)=>{y[0]=Math.min(y[0],C.row);y[1]=Math.max(y[1],C.row);y[2]=Math.min(y[2],C.colFrom);y[3]=Math.max(y[3],C.colTo);return y},[Infinity,-Infinity,Infinity,-Infinity]);a=t.denormalizeCol(m.col,m.world);l=g.getColumnForX(t.getXForColumn(a));b=g.getRowForY(t.getYForRow(m.row));a=g.getColumnForX(t.getXForColumn(a+1))-1;t=g.getRowForY(t.getYForRow(m.row+1))-1;return!(l>w||a<e||b>k||t<h)}const d=g.denormalizeCol(m.col,m.world);return l.spans.some(h=>h.row===m.row&&h.colFrom<=d&&
h.colTo>=d)};q.normalizeBounds=function(l,t,g){l[0]=t[0];l[1]=t[1];l[2]=t[2];l[3]=t[3];this._wrap&&(t=c.getInfo(this.tileInfo.spatialReference),g=-g*(t.valid[1]-t.valid[0]),l[0]+=g,l[2]+=g);return l};q.getSmallestInfoForScale=function(l){const t=this.scales;if(this._infoByScale[l])return this._infoByScale[l];if(l>t[0])return this._infoByScale[t[0]];for(let g=1;g<t.length-1;g++)if(l>t[g]+1E-6)return this._infoByScale[t[g-1]];return this._infoByScale[t[t.length-1]]};q.getClosestInfoForScale=function(l){const t=
this.scales;if(this._infoByScale[l])return this._infoByScale[l];l=t.reduce((g,a)=>Math.abs(a-l)<Math.abs(g-l)?a:g,t[0]);return this._infoByScale[l]};q.scaleToLevel=function(l){const t=this.scales;if(this._infoByScale[l])return this._infoByScale[l].level;for(let g=t.length-1;0<=g;g--)if(l<t[g])return g===t.length-1?this._infoByScale[t[t.length-1]].level:this._infoByScale[t[g]].level+(t[g]-l)/(t[g]-t[g+1]);return this._infoByScale[t[0]].level};q.scaleToZoom=function(l){return this.tileInfo.scaleToZoom(l)};
q._getTileIdAtLOD=function(l,t,g){const a=this._infoByLevel[g.level];l.set(g);if(t.resolution<a.resolution)return null;if(t.resolution===a.resolution)return l;l.level=t.level;l.col=Math.floor(g.col*a.resolution/t.resolution+.01);l.row=Math.floor(g.row*a.resolution/t.resolution+.01);return l};n._createClass(f,[{key:"spatialReference",get:function(){return this.tileInfo.spatialReference}}]);return f}()})},"esri/views/2d/tiling/LODInfo":function(){define(["../../../geometry/support/spatialReferenceUtils",
"./TileKey"],function(n,c){function z(r,u,m){r[0]=u;r[1]=m;return r}const x=new c("0/0/0/0");return function(){function r(m,v,p,f,q,l,t,g,a,b,d,h){this.level=m;this.resolution=v;this.scale=p;this.origin=f;this.first=q;this.last=l;this.size=t;this.norm=g;this.worldStart=a;this.worldEnd=b;this.worldSize=d;this.wrap=h}r.create=function(m,v,p){var f=n.getInfo(m.spatialReference);const q=[m.origin.x,m.origin.y],l=[m.size[0]*v.resolution,m.size[1]*v.resolution],t=[-Infinity,-Infinity],g=[Infinity,Infinity],
a=[Infinity,Infinity];p&&(z(t,Math.max(0,Math.floor((p.xmin-q[0])/l[0])),Math.max(0,Math.floor((q[1]-p.ymax)/l[1]))),z(g,Math.max(0,Math.floor((p.xmax-q[0])/l[0])),Math.max(0,Math.floor((q[1]-p.ymin)/l[1]))),z(a,g[0]-t[0]+1,g[1]-t[1]+1));const {cols:b,rows:d}=v;!p&&b&&d&&(z(t,0,0),z(g,b-1,d-1),z(a,b,d));let h;m.isWrappable?(m=[Math.ceil(Math.round((f.valid[1]-f.valid[0])/v.resolution)/m.size[0]),a[1]],f=[Math.floor((f.origin[0]-q[0])/l[0]),t[1]],p=[m[0]+f[0]-1,g[1]],h=!0):(f=t,p=g,m=a,h=!1);return new r(v.level,
v.resolution,v.scale,q,t,g,a,l,f,p,m,h)};var u=r.prototype;u.normalizeCol=function(m){if(!this.wrap)return m;const v=this.worldSize[0];return 0>m?v-1-Math.abs((m+1)%v):m%v};u.denormalizeCol=function(m,v){return this.wrap?this.worldSize[0]*v+m:m};u.getWorldForColumn=function(m){return this.wrap?Math.floor(m/this.worldSize[0]):0};u.getFirstColumnForWorld=function(m){return m*this.worldSize[0]+this.first[0]};u.getLastColumnForWorld=function(m){return m*this.worldSize[0]+this.first[0]+this.size[0]-1};
u.getColumnForX=function(m){return(m-this.origin[0])/this.norm[0]};u.getXForColumn=function(m){return this.origin[0]+m*this.norm[0]};u.getRowForY=function(m){return(this.origin[1]-m)/this.norm[1]};u.getYForRow=function(m){return this.origin[1]-m*this.norm[1]};u.getTileBounds=function(m,v,p=!1){x.set(v);var f=p?x.col:this.denormalizeCol(x.col,x.world),q=x.row;v=this.getXForColumn(f);p=this.getYForRow(q+1);f=this.getXForColumn(f+1);q=this.getYForRow(q);m[0]=v;m[1]=p;m[2]=f;m[3]=q;return m};u.getTileCoords=
function(m,v,p=!1){x.set(v);v=p?x.col:this.denormalizeCol(x.col,x.world);Array.isArray(m)?z(m,this.getXForColumn(v),this.getYForRow(x.row)):(m.x=this.getXForColumn(v),m.y=this.getYForRow(x.row));return m};return r}()})},"esri/views/2d/tiling/TileSpan":function(){define(function(){return function(n,c,z){this.row=n;this.colFrom=c;this.colTo=z}})},"esri/views/2d/layers/features/processors/SymbolProcessor":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Error ../../../../../core/has ../../../../../core/Logger ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/accessorSupport/diffUtils ../../../../../geometry/SpatialReference ../../../engine/webgl/mesh/MeshData ../../../engine/webgl/mesh/factories/WGLMeshFactory ../../../engine/webgl/mesh/templates/WGLTemplateStore ../../../engine/webgl/util/BidiText ../../../engine/webgl/util/Matcher ../textUtils ./BaseProcessor ../support/AttributeStore".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a,b,d,h,k,e){function w(C,B){return(!C.minScale||C.minScale>=B)&&(!C.maxScale||C.maxScale<=B)}function y(C){C=C.message;const B={message:{data:{},tileKey:C.tileKey,tileKeyOrigin:C.tileKeyOrigin},transferList:[]};for(const E in C.data){var A=C.data[E];B.message.data[E]=null;if(u.isSome(A)){var D=A.stride;const G=A.indices.slice(0),I=A.vertices.slice(0),L=A.records.slice(0);A=u.andThen(A.metrics,J=>J.slice(0));D={stride:D,indices:G,vertices:I,records:L,metrics:A};
B.transferList.push(G,I,L);B.message.data[E]=D}}return B}r.getLogger("esri.views.2d.layers.features.processors.SymbolProcessor");z=function(C){function B(){var D=C.apply(this,arguments)||this;D.type="symbol";D._matchers={feature:null,aggregate:null};D._bufferData=new Map;D._bufferIds=new Map;return D}n._inheritsLoose(B,C);var A=B.prototype;A.initialize=function(){this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this))])};A.destroy=function(){};A.forEachBufferId=function(D){this._bufferIds.forEach(E=>
{E.forEach(D)})};A.update=function(){var D=n._asyncToGenerator(function*(E,G){G=G.schema.processors[0];if("symbol"===G.type){var I=q.diff(this._schema,G);q.hasDiff(I,"mesh")&&(x("esri-2d-update-debug")&&console.debug("Applying Update - Processor:",I),E.mesh=!0,E.why.mesh.push("Symbology changed"),this._schema=G,this._factory=this._createFactory(G),this._factory.update(G,this.tileStore.tileScheme.tileInfo))}});return function(E,G){return D.apply(this,arguments)}}();A.onTileMessage=function(D,E,G,I){m.throwIfAborted(I);
return this._onTileData(D,E,G,I)};A.onTileClear=function(D){this._bufferData.delete(D.key.id);this._bufferIds.delete(D.key.id);return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:D.id,data:{clear:!0}})};A.onTileError=function(D,E,G){return this.remoteClient.invoke("tileRenderer.onTileError",{tileKey:D.id,error:E},{signal:G.signal})};A.onTileUpdate=function(D){for(const E of D.removed)this._bufferData.has(E.key.id)&&this._bufferData.delete(E.key.id),this._bufferIds.has(E.key.id)&&this._bufferIds.delete(E.key.id);
for(const E of D.added)this._bufferData.forEach(G=>{for(const I of G)I.message.tileKey===E.id&&this._updateTileMesh("append",E,y(I),[],!1,!1,null)})};A._addBufferData=function(D,E){this._bufferData.has(D)||this._bufferData.set(D,[]);this._bufferData.get(D).push(y(E))};A._createFactory=function(D){const {geometryType:E,objectIdField:G,fields:I}=this.service,L=l.fromJSON(this.spatialReference),J={geometryType:E,fields:I,spatialReference:L},F=new a.WGLTemplateStore((R,T)=>this.remoteClient.invoke("tileRenderer.getMaterialItems",
R,T),this.tileStore.tileScheme.tileInfo),{matcher:K,aggregateMatcher:M}=D.mesh;this._store=F;this._matchers.feature=d.createMatcher(K,F,J);this._matchers.aggregate=u.andThen(M,R=>d.createMatcher(R,F,J));return new g.WGLMeshFactory(E,G,F)};A._onTileData=function(){var D=n._asyncToGenerator(function*(E,G,I,L){m.throwIfAborted(L);const {type:J,addOrUpdate:F,remove:K}=G;var M=G.end;const R=!!this._schema.mesh.sortKey;if(!F)return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:E.id,data:{type:J,
addOrUpdate:null,remove:K,clear:!1,end:M,sort:R}},L);I=this._processFeatures(E,F,I,L);try{var T=yield I;if(u.isNone(T))return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:E.id,data:{type:J,addOrUpdate:null,remove:K,clear:!1,end:M,sort:R}},L);M=[];for(const Q of T){T=!1;const S=Q.message.bufferIds,X=E.key.id,aa=Q.message.tileKey;if(X!==aa&&u.isSome(S)){if(!this.tileStore.get(aa))continue;let ma=this._bufferIds.get(aa);ma||(ma=new Set,this._bufferIds.set(aa,ma));const ra=Array.from(S);
for(const za of ra)if(ma.has(za)){T=!0;break}else ma.add(za)}T||(this._addBufferData(X,Q),M.push(Q))}yield m.all(M.map(Q=>{const S=E.key.id===Q.message.tileKey;return this._updateTileMesh(J,E,Q,S?G.remove:[],S&&G.end,G.clear,L.signal)}))}catch(Q){this._handleError(E,Q,L)}});return function(E,G,I,L){return D.apply(this,arguments)}}();A._updateTileMesh=function(){var D=n._asyncToGenerator(function*(E,G,I,L,J,F,K){F=I.message.tileKey;const M=!!this._schema.mesh.sortKey;F!==G.key.id&&(J=!1);G=u.andThen(I,
R=>R.message);I=u.andThen(I,R=>R.transferList)||[];E={type:E,addOrUpdate:G,remove:L,clear:!1,end:J,sort:M};K={transferList:u.unwrap(I)||[],signal:K};m.throwIfAborted(K);return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:F,data:E},K)});return function(E,G,I,L,J,F,K){return D.apply(this,arguments)}}();A._processFeatures=function(){var D=n._asyncToGenerator(function*(E,G,I,L){if(u.isNone(G)||!G.hasFeatures)return null;const J={transform:E.transform,hasZ:!1,hasM:!1},F=this._factory,K=
{viewingMode:"",scale:E.scale},M=yield this._matchers.feature,R=yield this._matchers.aggregate;m.throwIfAborted(L);const T=this._getLabelInfos(E,G);yield F.analyze(G.getCursor(),M,R,J,K);m.throwIfAborted(L);return this._writeFeatureSet(E,G,J,T,F,I)});return function(E,G,I,L){return D.apply(this,arguments)}}();A._writeFeatureSet=function(D,E,G,I,L,J){var F=E.getSize();J=new t.MeshData(D.key.id,{features:F,records:F,metrics:0},"simple"===this._schema.mesh.matcher.type&&this._schema.mesh.matcher.isDotDensity,
J,!0);F={viewingMode:"",scale:D.scale};for(E=E.getCursor();E.next();)try{const K=E.getDisplayId(),M=u.isSome(I)?I.get(K):null;L.writeCursor(J,E,G,F,D.level,M)}catch(K){}return J.serialize(D.tileInfoView.tileInfo.isWrappable)};A._handleError=function(D,E,G){if(!m.isAbortError(E))return this.remoteClient.invoke("tileRenderer.onTileError",{tileKey:D.id,error:E.message},{signal:G.signal})};A._getLabelingSchemaForScale=function(D){var E=this._schema.mesh.labels;if(u.isNone(E))return null;if("subtype"===
E.type){const G={type:"subtype",classes:{}};let I=!1;for(const L in E.classes){const J=E.classes[L].filter(F=>w(F,D.scale));I=I||!!J.length;G.classes[L]=J}return I?G:null}E=E.classes.filter(G=>w(G,D.scale));return E.length?{type:"simple",classes:E}:null};A._getLabels=function(D,E){if("subtype"===E.type){var G;const I=u.unwrapOrThrow(this.service.subtypeField,"Expected to find subtype Field");D=D.readAttribute(I);return null==D?[]:null!=(G=E.classes[D])?G:[]}return E.classes};A._getLabelInfos=function(D,
E){D=this._getLabelingSchemaForScale(D);if(u.isNone(D))return null;const G=new Map;for(E=E.getCursor();E.next();){const L=E.getDisplayId(),J=[],F=e.isAggregateId(L),K=F&&1!==E.readAttribute("cluster_count")?"aggregate":"feature";var I=this._getLabels(E,D);for(const M of I){if(M.target!==K)continue;I=E.getStorage();I=F&&"feature"===K?I.getComputedStringAtIndex(E.readAttribute("referenceId"),M.fieldIndex):I.getComputedStringAtIndex(L,M.fieldIndex);if(!I)continue;I=b.bidiText(I.toString());const R=I[1];
this._store.getMosaicItem(M.symbol,h.codepoints(I[0])).then(T=>{J[M.index]={glyphs:T.glyphMosaicItems,rtl:R,index:M.index}})}G.set(L,J)}return G};n._createClass(B,[{key:"supportsTileUpdates",get:function(){return!0}}]);return B}(k);return z=c.__decorate([f.subclass("esri.views.2d.layers.features.processors.SymbolProcessor")],z)})},"esri/views/2d/engine/webgl/mesh/MeshData":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../tiling/PagedTileQueue ../../../tiling/TileInfoView ../../../tiling/TileKey ../../../tiling/TileQueue ../../../tiling/TileStrategy ../definitions ../enums ../Utils ./VertexDataWriter ../../../layers/features/support/AttributeStore ../../../layers/features/support/tileUtils".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t){function g(b){switch(b){case 1:case 8:case 32:return-1;case 2:case 64:return 0;case 4:case 16:case 128:return 1}}function a(b){switch(b){case 1:case 2:case 4:return-1;case 8:case 16:return 0;case 32:case 64:case 128:return 1}}z=function(){function b(h,k,e,w,y){this.hasRecords=this._hasAggregate=this._hasDotDensity=!1;this._data={self:new Map,neighbors:[]};this._current={geometryType:0,writer:null,overlaps:0,start:0,insertAfter:0,sortKey:0,id:0,materialKey:0,indexStart:0,
vertStart:0,isDotDensity:!1,bufferingEnabled:!1,metricBoxLenPointer:0};this.hint=k;this.tileKey=h;this._hasDotDensity=e;this._hasAggregate=w;this._pixelBufferEnabled=y}var d=b.prototype;d.serialize=function(h){const k=[];k.push(this._serializeTileVertexData(this.tileKey,this.tileKey,this._data.self));this._data.neighbors.forEach((e,w)=>{var y=1<<w;w=g(y);y=a(y);w=t.getPow2NeighborKey(new r(this.tileKey),w,y,h);w=this._serializeTileVertexData(this.tileKey,w.id,e.vertexData);w.message.bufferIds=e.displayIds;
k.push(w)});return k};d._serializeTileVertexData=function(h,k,e){var w,y,C,B,A;const D=[];e={[p.WGLGeometryType.MARKER]:null==(w=e.get(p.WGLGeometryType.MARKER))?void 0:w.serialize(D),[p.WGLGeometryType.FILL]:null==(y=e.get(p.WGLGeometryType.FILL))?void 0:y.serialize(D),[p.WGLGeometryType.LINE]:null==(C=e.get(p.WGLGeometryType.LINE))?void 0:C.serialize(D),[p.WGLGeometryType.TEXT]:null==(B=e.get(p.WGLGeometryType.TEXT))?void 0:B.serialize(D),[p.WGLGeometryType.LABEL]:null==(A=e.get(p.WGLGeometryType.LABEL))?
void 0:A.serialize(D)};return{message:{tileKeyOrigin:h,tileKey:k,data:e},transferList:D}};d.featureStart=function(h,k){this._current.insertAfter=h;this._current.sortKey=k};d.featureEnd=function(){};d.recordStart=function(h,k,e,w,y){this._current.writer=this._getVertexWriter(e,w);this._current.overlaps=0;this._current.indexStart=this._current.writer.indexCount;this._current.vertStart=this._current.writer.vertexCount;this._current.bufferingEnabled=y;this._current.id=h;this._current.materialKey=k;this._current.geometryType=
e;this._current.isDotDensity=!1;this._current.writer.recordStart()};d.recordCount=function(){return this._current.writer.recordCount};d.vertexCount=function(){return this._current.writer.vertexCount};d.indexCount=function(){return this._current.writer.indexCount};d.vertexEnsureSize=function(h){this._current.writer.vertexEnsureSize(h)};d.indexEnsureSize=function(h){this._current.writer.indexEnsureSize(h)};d.vertexBounds=function(h,k,e,w){this._current.bufferingEnabled&&this._addOverlap(h,k,e,w)};d.vertexWrite=
function(h){this._current.writer.writeVertex(h)};d.vertexWriteF32=function(h){this._current.writer.writeVertexF32(h)};d.vertexEnd=function(){};d.vertexWriter=function(){return this._current.writer.vertexWriter};d.indexWrite=function(h){this._current.writer.writeIndex(h)};d.indexWriter=function(){return this._current.writer.indexWriter};d.metricWriter=function(){return this._current.writer.metricWriter};d.metricStart=function(h,k,e,w,y,C,B,A){this._current.writer=this._getVertexWriter(p.WGLGeometryType.LABEL,
!1);const D=this._current.writer.metricWriter;D.push(l.getDisplayIdTexel(h));D.push(k);D.push(e);D.push(w);D.push(y);D.push(C);D.push(B);D.push(A);D.push(255);this._current.metricBoxLenPointer=D.push(0)};d.metricEnd=function(){const h=this._current.writer.metricWriter;0===h.getValue(this._current.metricBoxLenPointer)&&h.seek(h.length-10)};d.metricBoxWrite=function(h,k,e,w){const y=this._current.writer.metricWriter;y.incr(this._current.metricBoxLenPointer);y.push(0);y.push(0);y.push(h);y.push(k);y.push(e);
y.push(w)};d.recordEnd=function(){var h=this._current.indexStart,k=this._current.writer.indexCount;if(h===k)return!1;this.hasRecords=!0;var e=this._current.vertStart;this._current.writer.recordEnd(this._current.id,this._current.materialKey,this._current.insertAfter,h,k-h,e,this._current.writer.vertexCount-e,this._current.sortKey);if(!this._pixelBufferEnabled||this._hasAggregate||0===this._current.overlaps||this._current.geometryType===p.WGLGeometryType.LABEL)return!0;h=this._current.writer;for(k=
0;8>k;k++){var w=1<<k;if(this._current.overlaps&w){this._data.neighbors[k]||(this._data.neighbors[k]={vertexData:new Map,displayIds:new Set});e=this._data.neighbors[k];var y=this._current.geometryType;if(!e.vertexData.has(y)){var C=f.getStrides(y,this._current.isDotDensity).geometry;C=new q.VertexDataWriter(y,C,v.PATCH_PIXEL_BUFFER_ALLOC_SIZE);e.vertexData.set(y,C)}y=e.vertexData.get(this._current.geometryType);C=4096*-g(w);w=4096*-a(w);y.copyLastFrom(h,C,w);e.displayIds.add(this._current.id)}}return!0};
d._addOverlap=function(h,k,e,w){this._current.overlaps|=255^((h<0+e?148:h>=v.TILE_SIZE-e?41:189)|(k<0+w?224:k>=v.TILE_SIZE-w?7:231))};d._getVertexWriter=function(h,k){if(!this._data.self.has(h)){k=this._data.self;const e=f.getStrides(h,this._hasDotDensity).geometry;k.set(h,new q.VertexDataWriter(h,e,this.hint.records))}return this._data.self.get(h)};c._createClass(b,[{key:"hasAggregates",get:function(){return this._hasAggregate}},{key:"hasPixelBufferEnabled",get:function(){return this._pixelBufferEnabled}}]);
return b}();n.MeshData=z;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/tiling/PagedTileQueue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec2 ../../support/QueueProcessor".split(" "),function(n,c,z,x,r,u,m,v,p,f){function q(b,
d){b.length=0;d.forEach(h=>b.push(h));return b}const l=new Set,t=[],g=new Map,a=[0,0];z=function(b){function d(k){k=b.call(this,k)||this;k._keyToItem=new Map;k.concurrency=6;k.strategy="scale-first";k.tileInfoView=null;return k}n._inheritsLoose(d,b);var h=d.prototype;h.initialize=function(){const {concurrency:k,process:e}=this;this._queue=new f.QueueProcessor({concurrency:k,process:(w,y)=>{w=this._keyToItem.get(w);return e(w,{signal:y})},peeker:w=>w.values().next().value})};h.destroy=function(){this.clear();
this._queue.destroy();this._queue=null};h.abort=function(k){this._queue.abort("string"===typeof k?k:k.id)};h.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};h.has=function(k){return"string"===typeof k?this._keyToItem.has(k):this._keyToItem.has(k.id)};h.isOngoing=function(k){k="string"===typeof k?k:k.id;return this.has(k)&&this._queue.isOngoing(k)};h.pause=function(){this._queue.pause()};h.push=function(k,e){const w=k.key.id+"-"+e;if(this.has(w))return this.get(w);
e=this._queue.push(w);const y=()=>{this._keyToItem.delete(w);this.notifyChange("updating")};this._keyToItem.set(w,k);e.then(y,y);this.notifyChange("updating");return e};h.reset=function(){this._queue.reset();this.notifyChange("updating")};h.resume=function(){this._queue.resume()};h._peekByScaleFirst=function(k){if(!this.state)return k.values().next().value;const e=this.tileInfoView;let w=Number.NEGATIVE_INFINITY,y=Number.POSITIVE_INFINITY;k.forEach(E=>{E=this._keyToItem.get(E);const G=this.tileInfoView.getTileScale(E.key);
g.has(G)||(g.set(G,[]),w=Math.max(G,w),y=Math.min(G,y));g.get(G).push(E.key);l.add(G)});let C=this.state.scale;g.has(C)||(q(t,l),t.sort(),C=t.reduce((E,G)=>Math.abs(G-C)<Math.abs(E-C)?G:E,t[0]));C=Math.min(C,w);C=Math.max(C,y);k=g.get(C);const B=e.getClosestInfoForScale(C),A=B.getColumnForX(this.state.center[0]),D=B.getRowForY(this.state.center[1]);k.sort((E,G)=>{const I=B.denormalizeCol(E.col,E.world),L=B.denormalizeCol(G.col,G.world);return Math.sqrt((A-I)*(A-I)+(D-E.row)*(D-E.row))-Math.sqrt((A-
L)*(A-L)+(D-G.row)*(D-G.row))});l.clear();g.clear();return k[0].id};h._peekByCenterFirst=function(k){if(!this.state)return k.values().next().value;const e=this.tileInfoView,w=this.state.center;let y=Number.POSITIVE_INFINITY,C=null;k.forEach(B=>{B=this._keyToItem.get(B);e.getTileCoords(a,B.key);const A=p.distance(a,w);A<y&&(y=A,C=B.key)});return C.id};n._createClass(d,[{key:"length",get:function(){return this._queue?this._queue.length:0}},{key:"onGoingCount",get:function(){return this._keyToItem.size}},
{key:"updating",get:function(){return 0<this.length||0<this.onGoingCount}}]);return d}(z);c.__decorate([x.property({constructOnly:!0})],z.prototype,"concurrency",void 0);c.__decorate([x.property({constructOnly:!0})],z.prototype,"process",void 0);c.__decorate([x.property()],z.prototype,"state",void 0);c.__decorate([x.property({constructOnly:!0})],z.prototype,"strategy",void 0);c.__decorate([x.property({constructOnly:!0})],z.prototype,"tileInfoView",void 0);c.__decorate([x.property({readOnly:!0})],
z.prototype,"updating",null);return z=c.__decorate([v.subclass("esri.views.2d.tiling.PagedTileQueue")],z)})},"esri/chunks/vec2":function(){define(["exports","./common"],function(n,c){function z(S,X){S[0]=X[0];S[1]=X[1];return S}function x(S,X,aa){S[0]=X;S[1]=aa;return S}function r(S,X,aa){S[0]=X[0]+aa[0];S[1]=X[1]+aa[1];return S}function u(S,X,aa){S[0]=X[0]-aa[0];S[1]=X[1]-aa[1];return S}function m(S,X,aa){S[0]=X[0]*aa[0];S[1]=X[1]*aa[1];return S}function v(S,X,aa){S[0]=X[0]/aa[0];S[1]=X[1]/aa[1];
return S}function p(S,X){S[0]=Math.ceil(X[0]);S[1]=Math.ceil(X[1]);return S}function f(S,X){S[0]=Math.floor(X[0]);S[1]=Math.floor(X[1]);return S}function q(S,X,aa){S[0]=Math.min(X[0],aa[0]);S[1]=Math.min(X[1],aa[1]);return S}function l(S,X,aa){S[0]=Math.max(X[0],aa[0]);S[1]=Math.max(X[1],aa[1]);return S}function t(S,X){S[0]=Math.round(X[0]);S[1]=Math.round(X[1]);return S}function g(S,X,aa){S[0]=X[0]*aa;S[1]=X[1]*aa;return S}function a(S,X,aa,ma){S[0]=X[0]+aa[0]*ma;S[1]=X[1]+aa[1]*ma;return S}function b(S,
X){const aa=X[0]-S[0];S=X[1]-S[1];return Math.sqrt(aa*aa+S*S)}function d(S,X){const aa=X[0]-S[0];S=X[1]-S[1];return aa*aa+S*S}function h(S){const X=S[0];S=S[1];return Math.sqrt(X*X+S*S)}function k(S){const X=S[0];S=S[1];return X*X+S*S}function e(S,X){S[0]=-X[0];S[1]=-X[1];return S}function w(S,X){S[0]=1/X[0];S[1]=1/X[1];return S}function y(S,X){var aa=X[0];const ma=X[1];aa=aa*aa+ma*ma;0<aa&&(aa=1/Math.sqrt(aa),S[0]=X[0]*aa,S[1]=X[1]*aa);return S}function C(S,X){return S[0]*X[0]+S[1]*X[1]}function B(S,
X,aa){X=X[0]*aa[1]-X[1]*aa[0];S[0]=S[1]=0;S[2]=X;return S}function A(S,X,aa,ma){const ra=X[0];X=X[1];S[0]=ra+ma*(aa[0]-ra);S[1]=X+ma*(aa[1]-X);return S}function D(S,X){X=X||1;const aa=2*c.RANDOM()*Math.PI;S[0]=Math.cos(aa)*X;S[1]=Math.sin(aa)*X;return S}function E(S,X,aa){const ma=X[0];X=X[1];S[0]=aa[0]*ma+aa[2]*X;S[1]=aa[1]*ma+aa[3]*X;return S}function G(S,X,aa){const ma=X[0];X=X[1];S[0]=aa[0]*ma+aa[2]*X+aa[4];S[1]=aa[1]*ma+aa[3]*X+aa[5];return S}function I(S,X,aa){const ma=X[0];X=X[1];S[0]=aa[0]*
ma+aa[3]*X+aa[6];S[1]=aa[1]*ma+aa[4]*X+aa[7];return S}function L(S,X,aa){const ma=X[0];X=X[1];S[0]=aa[0]*ma+aa[4]*X+aa[12];S[1]=aa[1]*ma+aa[5]*X+aa[13];return S}function J(S,X,aa,ma){const ra=X[0]-aa[0];X=X[1]-aa[1];const za=Math.sin(ma);ma=Math.cos(ma);S[0]=ra*ma-X*za+aa[0];S[1]=ra*za+X*ma+aa[1];return S}function F(S,X){var aa=S[0];S=S[1];const ma=X[0];X=X[1];let ra=aa*aa+S*S;0<ra&&(ra=1/Math.sqrt(ra));let za=ma*ma+X*X;0<za&&(za=1/Math.sqrt(za));aa=(aa*ma+S*X)*ra*za;return 1<aa?0:-1>aa?Math.PI:Math.acos(aa)}
function K(S){return"vec2("+S[0]+", "+S[1]+")"}function M(S,X){return S[0]===X[0]&&S[1]===X[1]}function R(S,X){const aa=S[0];S=S[1];const ma=X[0];X=X[1];return Math.abs(aa-ma)<=c.EPSILON*Math.max(1,Math.abs(aa),Math.abs(ma))&&Math.abs(S-X)<=c.EPSILON*Math.max(1,Math.abs(S),Math.abs(X))}function T(S,X,aa,ma,ra){let za=X[0]-aa[0];aa=X[1]-aa[1];ra=(ma[0]*za+ma[1]*aa)*(ra-1);za=ma[0]*ra;aa=ma[1]*ra;S[0]=X[0]+za;S[1]=X[1]+aa;return S}var Q=Object.freeze({__proto__:null,copy:z,set:x,add:r,subtract:u,multiply:m,
divide:v,ceil:p,floor:f,min:q,max:l,round:t,scale:g,scaleAndAdd:a,distance:b,squaredDistance:d,length:h,squaredLength:k,negate:e,inverse:w,normalize:y,dot:C,cross:B,lerp:A,random:D,transformMat2:E,transformMat2d:G,transformMat3:I,transformMat4:L,rotate:J,angle:F,str:K,exactEquals:M,equals:R,projectAndScale:T,len:h,sub:u,mul:m,div:v,dist:b,sqrDist:d,sqrLen:k});n.add=r;n.angle=F;n.ceil=p;n.copy=z;n.cross=B;n.dist=b;n.distance=b;n.div=v;n.divide=v;n.dot=C;n.equals=R;n.exactEquals=M;n.floor=f;n.inverse=
w;n.len=h;n.length=h;n.lerp=A;n.max=l;n.min=q;n.mul=m;n.multiply=m;n.negate=e;n.normalize=y;n.projectAndScale=T;n.random=D;n.rotate=J;n.round=t;n.scale=g;n.scaleAndAdd=a;n.set=x;n.sqrDist=d;n.sqrLen=k;n.squaredDistance=d;n.squaredLength=k;n.str=K;n.sub=u;n.subtract=u;n.transformMat2=E;n.transformMat2d=G;n.transformMat3=I;n.transformMat4=L;n.vec2=Q})},"esri/views/2d/tiling/TileQueue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec2 ../../support/QueueProcessor".split(" "),
function(n,c,z,x,r,u,m,v,p,f){function q(b,d){b.length=0;d.forEach(h=>b.push(h));return b}const l=new Set,t=[],g=new Map,a=[0,0];z=function(b){function d(k){k=b.call(this,k)||this;k._keyToItem=new Map;k.concurrency=6;k.strategy="scale-first";k.tileInfoView=null;return k}n._inheritsLoose(d,b);var h=d.prototype;h.initialize=function(){const {concurrency:k,process:e,strategy:w}=this;this._queue=new f.QueueProcessor({concurrency:k,process:(y,C)=>{y=this._keyToItem.get(y);return e(y,{signal:C})},peeker:"scale-first"===
w?y=>this._peekByScaleFirst(y):y=>this._peekByCenterFirst(y)})};h.destroy=function(){this.clear();this._queue.destroy();this._queue=null};h.abort=function(k){this._queue.abort("string"===typeof k?k:k.id)};h.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};h.has=function(k){return"string"===typeof k?this._keyToItem.has(k):this._keyToItem.has(k.id)};h.isOngoing=function(k){k="string"===typeof k?k:k.id;return this.has(k)&&this._queue.isOngoing(k)};h.pause=function(){this._queue.pause()};
h.push=function(k){const e=k.key.id;if(this._queue.has(e))return this._queue.get(e);const w=this._queue.push(e),y=()=>{this._keyToItem.delete(e);this.notifyChange("updating")};this._keyToItem.set(e,k);w.then(y,y);this.notifyChange("updating");return w};h.reset=function(){this._queue.reset()};h.resume=function(){this._queue.resume()};h._peekByScaleFirst=function(k){if(!this.state)return k.values().next().value;const e=this.tileInfoView;let w=Number.NEGATIVE_INFINITY,y=Number.POSITIVE_INFINITY;k.forEach(E=>
{E=this._keyToItem.get(E);const G=this.tileInfoView.getTileScale(E.key);g.has(G)||(g.set(G,[]),w=Math.max(G,w),y=Math.min(G,y));g.get(G).push(E.key);l.add(G)});let C=this.state.scale;g.has(C)||(q(t,l),t.sort(),C=t.reduce((E,G)=>Math.abs(G-C)<Math.abs(E-C)?G:E,t[0]));C=Math.min(C,w);C=Math.max(C,y);k=g.get(C);const B=e.getClosestInfoForScale(C),A=B.getColumnForX(this.state.center[0]),D=B.getRowForY(this.state.center[1]);k.sort((E,G)=>{const I=B.denormalizeCol(E.col,E.world),L=B.denormalizeCol(G.col,
G.world);return Math.sqrt((A-I)*(A-I)+(D-E.row)*(D-E.row))-Math.sqrt((A-L)*(A-L)+(D-G.row)*(D-G.row))});l.clear();g.clear();return k[0].id};h._peekByCenterFirst=function(k){if(!this.state)return k.values().next().value;const e=this.tileInfoView,w=this.state.center;let y=Number.POSITIVE_INFINITY,C=null;k.forEach(B=>{B=this._keyToItem.get(B);e.getTileCoords(a,B.key);const A=p.distance(a,w);A<y&&(y=A,C=B.key)});return C.id};n._createClass(d,[{key:"length",get:function(){return this._queue?this._queue.length:
0}},{key:"onGoingCount",get:function(){return this._keyToItem.size}},{key:"updating",get:function(){return 0<this.length||0<this.onGoingCount}}]);return d}(z);c.__decorate([x.property({constructOnly:!0})],z.prototype,"concurrency",void 0);c.__decorate([x.property({constructOnly:!0})],z.prototype,"process",void 0);c.__decorate([x.property()],z.prototype,"state",void 0);c.__decorate([x.property({constructOnly:!0})],z.prototype,"strategy",void 0);c.__decorate([x.property({constructOnly:!0})],z.prototype,
"tileInfoView",void 0);c.__decorate([x.property({readOnly:!0})],z.prototype,"updating",null);return z=c.__decorate([v.subclass("esri.views.2d.tiling.TileQueue")],z)})},"esri/views/2d/tiling/TileStrategy":function(){define(["../../../geometry/support/aaBoundingRect","./TileCache","./TileCoverage","./TileKey"],function(n,c,z,x){const r=new x(0,0,0,0),u=new Map,m=[],v=[];return function(){function p(q){this._previousScale=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";
this.resampling=!0;this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=q.acquireTile;this.releaseTile=q.releaseTile;this.tileInfoView=q.tileInfoView;this.resampling=null==q.resampling||!!q.resampling;q.cachePolicy&&(this.cachePolicy=q.cachePolicy);q.coveragePolicy&&(this.coveragePolicy=q.coveragePolicy);null!=q.buffer&&(this.buffer=q.buffer);q.cacheSize&&(this._tileCache=new c(q.cacheSize,this.tileInfoView,l=>{this.releaseTile(l)}))}var f=p.prototype;f.destroy=function(){this.tileIndex.clear()};
f.update=function(q){const {resampling:l,tileIndex:t}=this,g=this.tileInfoView.getTileCoverage(q.state,this.buffer,this.coveragePolicy);v.length=0;m.length=0;u.clear();if(g){var {minScale:a,maxScale:b}=this.tileInfoView.tileInfo,{spans:d,lodInfo:h}=g,{level:k}=h,{scale:e,center:w,resolution:y}=q.state,C=!q.stationary&&e>this._previousScale;this._previousScale=e;this.tiles.length=0;if(!l&&(e>a||e<b))return this.tiles.length=0,u.clear(),t.forEach(G=>{this.releaseTile(G)}),t.clear(),v.length=0,m.length=
0,u.clear(),z.pool.release(g),!0;t.forEach(G=>G.visible=!0);var B=q=0;if(0<d.length)for(const {row:G,colFrom:I,colTo:L}of d)for(let J=I;J<=L;J++){q++;const F=r.set(k,G,h.normalizeCol(J),h.getWorldForColumn(J)).id;if(t.has(F)){var A=t.get(F);A.isReady?(u.set(F,A),B++):C||this._addParentTile(F,u)}else{if(this._tileCache&&this._tileCache.has(F)){if(A=this._tileCache.pop(F),this.tileIndex.set(F,A),A.isReady){u.set(F,A);B++;continue}}else A=this.acquireTile(r),this.tileIndex.set(F,A);C||this._addParentTile(F,
u)}}var D=B===q;t.forEach((G,I)=>{r.set(I);if(!u.has(I)){var L=this.tileInfoView.intersects(g,r),J="purge"===this.cachePolicy?r.level!==k:r.level>k;!L||!C&&D?!J&&L||m.push(I):G.isReady?J&&"purge"===this.cachePolicy&&this._hasReadyAncestor(r,k)?m.push(I):v.push(I):J&&m.push(I)}});for(var E of v)(q=t.get(E))&&q.isReady&&u.set(E,q);for(const G of m)E=t.get(G),this._tileCache?this._tileCache.add(E):this.releaseTile(E),t.delete(G);u.forEach(G=>this.tiles.push(G));t.forEach(G=>{u.has(G.key.id)||(G.visible=
!1)});this._tileCache&&this._tileCache.prune(k,w,y);z.pool.release(g);u.clear();return D}};f.clear=function(q=!0){const {tileIndex:l}=this;q&&l.forEach(t=>{this.releaseTile(t)});l.clear()};f.updateCacheSize=function(q){this._tileCache&&(this._tileCache.maxSize=q)};f._addParentTile=function(q,l){let t=null;for(;;){q=this.tileInfoView.getTileParentId(q);if(!q)break;if(this.tileIndex.has(q)){if((t=this.tileIndex.get(q))&&t.isReady){l.has(t.key.id)||l.set(t.key.id,t);break}}else if(this._tileCache&&this._tileCache.has(q)&&
(t=this._tileCache.pop(q),this.tileIndex.set(q,t),t&&t.isReady)){l.has(t.key.id)||l.set(t.key.id,t);break}}};f._hasReadyAncestor=function(q,l){const t=n.create();this.tileInfoView.getTileBounds(t,q,!0);for(const g of this.tileIndex.values())if(g.isReady&&g.key.level>=l&&g.key.level<q.level){const a=n.create();this.tileInfoView.getTileBounds(a,g.key,!0);if(n.contains(a,t))return!0}return!1};return p}()})},"esri/views/2d/tiling/TileCache":function(){define(["../../../chunks/vec2"],function(n){return function(){function c(x,
r,u){this.maxSize=x;this.tileInfoView=r;this.removedFunc=u;this._tilePerId=new Map;this._tileKeysPerLevel=[]}var z=c.prototype;z.has=function(x){return this._tilePerId.has(x)};z.get=function(x){return this._tilePerId.get(x)};z.pop=function(x){const r=this._tilePerId.get(x);if(!r)return null;const u=this._tileKeysPerLevel[r.key.level];this._tilePerId["delete"](x);for(let m=0;m<u.length;m++)if(u[m].id===x){u.splice(m,1);break}r.visible=!0;return r};z.add=function(x){x.visible=!1;const r=x.key,u=r.id;
this._tilePerId.has(u)||(this._tilePerId.set(u,x),x=r.level,this._tileKeysPerLevel[x]||(this._tileKeysPerLevel[x]=[]),this._tileKeysPerLevel[x].push(r))};z.prune=function(x,r,u){let m=this._tilePerId.size;if(!(m<=this.maxSize)){for(var v=this._tileKeysPerLevel.length-1;m>this.maxSize&&0<=v;)v!==x&&(m=this._pruneAroundCenterTile(m,r,u,v)),v--;m>this.maxSize&&(m=this._pruneAroundCenterTile(m,r,u,x))}};z._pruneAroundCenterTile=function(x,r,u,m){m=this._tileKeysPerLevel[m];if(!m||0===m.length)return x;
const {size:v,origin:p}=this.tileInfoView.tileInfo,f=u*v[0],q=u*v[1],l=[0,0],t=[0,0];for(m.sort((g,a)=>{l[0]=p.x+f*(g.col+.5);l[1]=p.y-q*(g.row+.5);t[0]=p.x+f*(a.col+.5);t[1]=p.y-q*(a.row+.5);return n.squaredDistance(l,r)-n.squaredDistance(t,r)});0<m.length&&(u=m.pop(),this._removeTile(u.id),x--,x!==this.maxSize););return x};z._removeTile=function(x){const r=this._tilePerId.get(x);this.removedFunc&&this.removedFunc(r);this._tilePerId["delete"](x)};return c}()})},"esri/views/2d/engine/webgl/mesh/VertexDataWriter":function(){define(["exports",
"../../../../../chunks/_rollupPluginBabelHelpers","../definitions","./heuristics","../util/Writer"],function(n,c,z,x,r){let u=function(){function m(p,f,q){this._start={index:0,vertex:0};q=x.getMeshSizeHint(p,f,q);f/=4;this.geometryType=p;this._records=new r(Int32Array,q.recordBytes);this._indices=new r(Uint32Array,q.indexBytes);this._vertices=new r(Uint32Array,q.vertexBytes);this._metrics=new r(Float32Array,0);this._strideInt=f}var v=m.prototype;v.serialize=function(p){const f=this._records.buffer(),
q=this._indices.buffer(),l=this._vertices.buffer(),t=this._metrics.length?this._metrics.buffer():null,g=4*this._strideInt;p.push(f,q,l);return{stride:g,records:f,indices:q,vertices:l,metrics:t}};v.vertexEnsureSize=function(p){this._vertices.ensureSize(p)};v.indexEnsureSize=function(p){this._indices.ensureSize(p)};v.recordStart=function(){this._start.index=this._indices.length;this._start.vertex=this._vertices.length};v.recordEnd=function(p,f,q,l,t,g,a,b){this._records.push(p);this._records.push(f);
this._records.push(q);this._records.push(l);this._records.push(t);this._records.push(g);this._records.push(a);this._records.writeF32(b)};v.writeIndex=function(p){this._indices.push(p)};v.writeVertex=function(p){this._vertices.push(p)};v.writeVertexF32=function(p){this._vertices.writeF32(p)};v.copyLastFrom=function(p,f,q){var l=p._records.length-z.DISPLAY_RECORD_INT_PER_ELEMENT;const t=p._records.getValue(l),g=p._records.getValue(l+1),a=p._records.getValue(l+2),b=p._records.getValue(l+4),d=p._records.getValue(l+
6);l=p._records.getValue(l+7);const h=this._vertices.length;var k=(p._start.vertex-this._vertices.length)/this._strideInt;const e=this._indices.length,w=this.vertexCount;for(var y=p._start.index;y!==p._indices.length;y++){const C=p._indices.getValue(y);this._indices.push(C-k)}for(k=p._start.vertex;k!==p._vertices.length;k++)y=p._vertices.getValue(k),this._vertices.push(y);for(p=h;p<=this._vertices.length;p+=this._strideInt)this._vertices.i1616Add(p,f,q);this._records.push(t);this._records.push(g);
this._records.push(a);this._records.push(e);this._records.push(b);this._records.push(w);this._records.push(d);this._records.push(l)};c._createClass(m,[{key:"strideInt",get:function(){return this._strideInt}},{key:"recordCount",get:function(){return this._records.length/z.DISPLAY_RECORD_INT_PER_ELEMENT}},{key:"vertexCount",get:function(){return this._vertices.length/this._strideInt}},{key:"indexCount",get:function(){return this._indices.length}},{key:"indexWriter",get:function(){return this._indices}},
{key:"vertexWriter",get:function(){return this._vertices}},{key:"metricWriter",get:function(){return this._metrics}}]);return m}();n.VertexDataWriter=u;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/heuristics":function(){define(["exports","../definitions","../enums"],function(n,c,z){const x=new Map;x.set(z.WGLGeometryType.MARKER,{multiplier:1,indicesPerRecord:6,verticesPerRecord:4});x.set(z.WGLGeometryType.LINE,{multiplier:1,indicesPerRecord:24,verticesPerRecord:8});
x.set(z.WGLGeometryType.FILL,{multiplier:1,indicesPerRecord:10,verticesPerRecord:10});x.set(z.WGLGeometryType.TEXT,{multiplier:8,indicesPerRecord:6,verticesPerRecord:4});x.set(z.WGLGeometryType.LABEL,{multiplier:8,indicesPerRecord:6,verticesPerRecord:4});n.getMeshHeuristic=function(r){return x.get(r)};n.getMeshSizeHint=function(r,u,m){const {indicesPerRecord:v,multiplier:p,verticesPerRecord:f}=x.get(r);return{recordBytes:m*c.DISPLAY_RECORD_INT_PER_ELEMENT*Uint32Array.BYTES_PER_ELEMENT,indexBytes:p*
v*m*Uint32Array.BYTES_PER_ELEMENT,vertexBytes:p*f*m*u}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/util/Writer":function(){define(["../../../../../chunks/_rollupPluginBabelHelpers"],function(n){return function(){function c(x,r){this._pos=0;r=r?this._roundToNearest(r,x.BYTES_PER_ELEMENT):40;this._array=new ArrayBuffer(r);this._buffer=new x(this._array);this._ctor=x;this._i16View=new Int16Array(this._array)}var z=c.prototype;z._roundToNearest=function(x,r){x=Math.round(x);
return x+(r-x%r)};z._ensureSize=function(x){if(this._pos+x>=this._buffer.length){x=this._roundToNearest(1.5*(this._array.byteLength+x*this._buffer.BYTES_PER_ELEMENT),this._buffer.BYTES_PER_ELEMENT);x=new ArrayBuffer(x);const r=new this._ctor(x);r.set(this._buffer,0);this._array=x;this._buffer=r;this._i16View=new Int16Array(this._array)}};z.ensureSize=function(x){this._ensureSize(x)};z.writeF32=function(x){this._ensureSize(1);const r=this._pos;(new Float32Array(this._array,4*this._pos,1))[0]=x;this._pos++;
return r};z.push=function(x){this._ensureSize(1);const r=this._pos;this._buffer[this._pos++]=x;return r};z.writeFixed=function(x){this._buffer[this._pos++]=x};z.setValue=function(x,r){this._buffer[x]=r};z.i1616Add=function(x,r,u){this._i16View[2*x]+=r;this._i16View[2*x+1]+=u};z.getValue=function(x){return this._buffer[x]};z.incr=function(x){if(this._buffer.length<x)throw Error("Increment index overflows the target buffer");this._buffer[x]++};z.decr=function(x){this._buffer[x]--};z.writeRegion=function(x){this._ensureSize(x.length);
const r=this._pos;this._buffer.set(x,this._pos);this._pos+=x.length;return r};z.writeManyFrom=function(x,r,u){for(this._ensureSize(u-r);r!==u;r++)this.writeFixed(x._buffer[r])};z.buffer=function(){const x=this._array.slice(0,4*this._pos);this.destroy();return x};z.toArray=function(){const x=this._array,r=[];for(let u=0;u<x.byteLength/4;u++)r.push(x[u]);return r};z.seek=function(x){this._pos=x};z.destroy=function(){this._buffer=this._array=null};n._createClass(c,[{key:"length",get:function(){return this._pos}}]);
return c}()})},"esri/views/2d/layers/features/support/tileUtils":function(){define(["exports","./Tile"],function(n,c){function z(x,r,u,m){x=x.clone();const v=1<<x.level;r=x.col+r;u=x.row+u;m&&0>r?(x.col=r+v,--x.world):r>=v?(x.col=r-v,x.world+=1):x.col=r;x.row=u;return x}n.getPow2NeighborKey=z;n.getPow2NeighborTile=function(x,r,u){r=z(x.key,r,u,x.tileInfoView.tileInfo.isWrappable);return new c.Tile(x.tileInfoView,r)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/factories/WGLMeshFactory":function(){define("exports ../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/has ../../../../../../core/maybe ../../../../../../core/promiseUtils ../../../../../../geometry/libtess ../templates/WGLLabelTemplate ../templates/WGLMarkerTemplate ../templates/WGLTemplateStore ../../../../layers/features/support/AttributeStore".split(" "),
function(n,c,z,x,r,u,m,v,p,f){z=function(){function q(t,g,a){this._loadPromise=u.loadLibtess();this._geometryType=t;this._idField=g;this._templateStore=a}var l=q.prototype;l.update=function(t,g){x.isSome(t.mesh.labels)&&(this._labelTemplates=this._createLabelTemplates(t.mesh.labels,g));this._schema=t};l._createLabelTemplates=function(t,g){const a=new Map;if("simple"===t.type){for(var b of t.classes)t=m.fromLabelClass(b,g),a.set(b.index,t);return a}for(const d in t.classes){b=t.classes[d];for(const h of b)b=
m.fromLabelClass(h,g),a.set(h.index,b)}return a};l.analyze=function(){var t=c._asyncToGenerator(function*(g,a,b,d,h,k){if(!r.isAborted(k)){var e;"dictionary"===a.type&&(e=yield a.analyze(this._idField,g.copy(),d,h,k));for(var w=0;g.next();){var y=void 0;y=e?e[w++]:x.isSome(b)&&f.isAggregateId(g.getDisplayId())&&1!==g.readAttribute("cluster_count")?b.match(this._idField,g,this._geometryType,d,h):a.match(this._idField,g,this._geometryType,d,h);g.setGroupId(y);if(p.isDynamicId(y)){y=this._templateStore.getDynamicTemplateGroup(y);
for(const C of y)C&&C.analyze&&C.analyze(this._templateStore,g,d,h)}}yield this._loadPromise;return this._templateStore.finalize(k)}});return function(g,a,b,d,h,k){return t.apply(this,arguments)}}();l.analyzeGraphics=function(){var t=c._asyncToGenerator(function*(g,a,b,d,h){if(!r.isAborted(h)){g=g.getCursor();for(a&&(yield a.analyze(this._idField,g.copy(),b,d,h));g.next();){let k=g.getGroupId();if(null==k||-1===k)k=a.match(this._idField,g,g.geometryType,b,d),g.setGroupId(k);if(p.isDynamicId(k)){const e=
this._templateStore.getDynamicTemplateGroup(k);for(const w of e)w&&w.analyze&&w.analyze(this._templateStore,g,b,d)}g.setGroupId(k)}yield this._loadPromise;return this._templateStore.finalize(h)}});return function(g,a,b,d,h){return t.apply(this,arguments)}}();l.writeGraphic=function(t,g,a){const b=g.getGroupId(),d=g.getDisplayId(),h=this._templateStore.getTemplateGroup(b);t.featureStart(g.insertAfter,0);if(null!=d){if(p.isDynamicId(b))for(const k of h)k.bindFeature(g,null,null);if(h){for(const k of h)k&&
k.write(t,g,a);t.featureEnd()}}};l.writeCursor=function(t,g,a,b,d,h){const k=g.getGroupId(),e=g.getDisplayId(),w=this._templateStore.getTemplateGroup(k),y=this._schema.mesh.sortKey;let C=0;x.isSome(y)&&(C=null!=y.fieldIndex?g.getComputedNumericAtIndex(y.fieldIndex):null!=y.field?g.readAttribute(y.field):g.readAttribute(this._idField),C*="asc"===y.order?1:-1);t.featureStart(0,null==C||isNaN(C)?0:C);if(null!=e&&w){if(p.isDynamicId(k))for(const B of w)B.bindFeature(g,a,b);for(const B of w)B.write(t,
g,d);x.isSome(h)&&t.hasRecords&&(a=h&&this._findLabelRef(w),this._writeLabels(t,g,h,a,d));t.featureEnd()}};l._findLabelRef=function(t){for(const g of t)if(g instanceof v)return g;return null};l._writeLabels=function(t,g,a,b,d){for(const h of a)if(x.isSome(h)&&h){const {glyphs:k,rtl:e,index:w}=h;a=this._labelTemplates.get(w);a.setZoomLevel(d);a.bindReferenceTemplate(b);a.bindTextInfo(k,e);a.write(t,g,null)}};c._createClass(q,[{key:"templates",get:function(){return this._templateStore}}]);return q}();
n.WGLMeshFactory=z;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/WGLLabelTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../core/mathUtils ../../../../../../core/maybe ../../../../../../core/screenUtils ../../alignmentUtils ../../color ../../definitions ../../enums ../../number ../../materialKey/MaterialKey ./meshUtils ./segmentUtils ./WGLTextTemplate".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a){const b=z.getLogger("esri.views.2d.engine.webgl.WGLLabelTemplate"),d=(k,e="mapview-labeling")=>b.error(new c(e,k)),h=function(k){const e=new Map;return w=>{e.has(w)||e.set(w,k(w));return e.get(w)}}(k=>{let e=0;if(0===k)return Infinity;for(;!(k%2);)e++,k/=2;return e});return function(k){function e(y,C,B,A){var D=k.call(this,y,B.font.size,B.haloSize||0,B.color&&v.premultiplyAlphaRGBAArray(B.color)||0,B.haloColor&&v.premultiplyAlphaRGBAArray(B.haloColor)||0,B.horizontalAlignment,
B.verticalAlignment,t.isMapAligned(C.labelPlacement)?1:0,B.font.decoration,!1,B.angle||0,B.xoffset,B.yoffset,B.lineWidth,B.lineHeight,null,null,null,null,null)||this;D._outLineLabelAngle=0;D._refPlacementPadding=0;D._refPlacementDirX=0;D._refPlacementDirY=0;D._refOffsetX=0;D._refOffsetY=0;D._zoomLevel=0;D.geometryType=f.WGLGeometryType.LABEL;var E=!!C.minScale&&A.scaleToZoom(C.minScale)||0;E=x.clamp(E,0,25.5);A=!!C.maxScale&&A.scaleToZoom(C.maxScale)||255;A=x.clamp(A,0,25.5);const [G,I]=m.getAlignmentFromPlacement(C.labelPlacement);
D._xAlignD=G;D._yAlignD=I;D._minZoom=E;D._maxZoom=A;D._refPlacementPadding=u.pt2px(B.haloSize)+p.TEXT_PLACEMENT_PADDING;y=l.LabelMaterialKey.load(y);y.sdf=!0;D._materialKey=y.data;return D}n._inheritsLoose(e,k);e.fromLabelClass=function(y,C){if("esriServerLinePlacementCenterAlong"===y.labelPlacement){const B=y.symbol;B.xoffset=0;B.yoffset=0;B.angle=0;B.font.decoration="none"}return new e(y.materialKey,y,y.symbol,C)};var w=e.prototype;w.setZoomLevel=function(y){this._zoomLevel=y};w.bindReferenceTemplate=
function(y){let C=m.getXDirection(this._xAlignD),B=m.getYDirection(this._yAlignD);this._refOffsetY=this._refOffsetX=0;if(r.isNone(y))this._refSymbolAndPlacementOffset=q.i8888to32(0,0,Math.floor(127*C+127),Math.floor(127*B+127));else{if("circle"===y.boundsType&&(C||B)){var A=Math.sqrt(C*C+B*B);C/=A;B/=A}A=Math.max(y.height,y.width);this._refSymbolAndPlacementOffset=q.i8888to32(4*this._refPlacementPadding,A,Math.floor(127*C+127),Math.floor(127*B+127));this._referenceSize=A;this._refPlacementDirX=C;
this._refPlacementDirY=B;this._refOffsetX=y.xOffset;this._refOffsetY=y.yOffset}};w._write=function(y,C){if(!r.isNone(this._shapingInfo)){var B=this._shapingInfo,A=C.getDisplayId(),D="esriGeometryPolygon"===C.geometryType?C.readLegacyCentroid():C.readLegacyGeometry();if(D)switch(this.current={out:y,inId:A,inShaping:B,zoomLevel:this._zoomLevel},C.geometryType){case "esriGeometryPolyline":this._placeLineLabels(D);break;case "esriGeometryPoint":case "esriGeometryPolygon":this._placePointLabels(D);break;
default:d("mapview-labeling",`Geometry of type ${C.geometryType} is not supported`)}}};w._isVisible=function(y,C){const B=Math.floor(10*this.current.zoomLevel);return Math.floor(10*y)<=B&&B<=Math.floor(10*C)};w._placePointLabels=function(y){const {out:C,inId:B,inShaping:A}=this.current;this._writeGlyphs(C,B,y,A)};w._placeLineLabels=function(y){y=g.smoothPaths(y.paths,this.current.inShaping.bounds.width);const C=this._placeSubdivGlyphs.bind(this),B=(this._shapedBox.width+128)/2;for(const A of y)g.pathDivide(A,
B,C)};w._placeSubdivGlyphs=function(y,C,B,A){var D=h(C);B=x.log2(Math.min(B,A-B)/(8+this._shapedBox.width/2/2));D=Math.max(this._minZoom,this.current.zoomLevel+1-(0===C?B:Math.min(D,B)));B=this._shapedBox.width/2*2**(this.current.zoomLevel-D);this.current.inShaping.isMultiline?0===C&&this._placeStraight(y,D):this._placeCurved(y,D,B)};w._placeStraight=function(y,C){const {out:B,inId:A,inShaping:D}=this.current;this._writeGlyphs(B,A,y,D,C)};w._placeCurved=function(y,C,B){const {out:A,inId:D}=this.current;
A.metricStart(D,C,y.x,y.y,0,0,0,0);const E=y.clone(),G=(180/Math.PI*y.angle+180)%360;this._outLineLabelAngle=Math.round(180/Math.PI*y.angle%360*(254/360));this._placeFirst(E,C,1);this._placeBack(y,E,C,B,1);this._placeForward(y,E,C,B,1);this._outLineLabelAngle=Math.round(254/360*G);this._placeFirst(E,C,0);this._placeBack(y,E,C,B,0);this._placeForward(y,E,C,B,0);A.metricEnd()};w._placeBack=function(y,C,B,A,D){const E=y.clone();for(y=y.backwardLength+0;E.prev()&&!(y>=A);)this._placeOnSegment(E,C,y,B,
-1,D),y+=E.length+0};w._placeForward=function(y,C,B,A,D){const E=y.clone();for(y=y.remainingLength+0;E.next()&&!(y>=A);)this._placeOnSegment(E,C,y,B,1,D),y+=E.length+0};w._placeFirst=function(y,C,B){const A=this.current.inShaping;var D=A.glyphs;const E=this.current.zoomLevel,{out:G,inId:I}=this.current;for(const L of D)D=L.x>A.bounds.x?B:1-B,D=Math.max(0,E+x.log2(Math.abs(L.x+L.width/2-A.bounds.x)/(D*y.remainingLength+(1-D)*y.backwardLength))),D=Math.max(C,D),L.maxZoom=25,L.angle=y.angle+(1-B)*Math.PI,
L.minZoom=D,this._writeGlyph(G,I,y.x,y.y,L),B&&this._isVisible(L.minZoom,L.maxZoom)&&(D=L.bounds,G.metricBoxWrite(D.center[0],D.center[1],D.width,D.height))};w._placeOnSegment=function(y,C,B,A,D,E){var G=this.current.inShaping.glyphs;const {out:I,inId:L}=this.current,J=this.current.inShaping,F=this.current.zoomLevel;var K=y.x+y.dx/y.length*-D*B,M=y.y+y.dy/y.length*-D*B;for(const T of G)if((G=T.x>J.bounds.x?E:1-E)&&1===D||!G&&-1===D){var R=Math.abs(T.x+T.width/2-J.bounds.x);G=Math.max(0,F+x.log2(R/
B)-.1);R=Math.max(A,F+x.log2(R/(B+y.length+0)));0!==G&&(T.angle=y.angle+(1-E)*Math.PI,T.minZoom=R,T.maxZoom=G,this._writeGlyph(I,L,K,M,T),E&&this._isVisible(T.minZoom,T.maxZoom)&&(G=T.bounds,I.metricBoxWrite(G.center[0]+(y.x-C.x),G.center[1]+(y.y-C.y),G.width,G.height)))}};w._writeGlyphs=function(y,C,B,A,D=this._minZoom){if(!(0>B.x||512<=B.x||0>B.y||512<=B.y)){var E=B.x+this._refOffsetX;B=B.y-this._refOffsetY;for(const G of A.glyphs)G.minZoom=D,G.maxZoom=this._maxZoom,this._writeGlyph(y,C,E,B,G);
A=A.boundsT;y.metricStart(C,D,E,B,this._refPlacementDirX,this._refPlacementDirY,this._referenceSize,this._materialKey);y.metricBoxWrite(A.center[0],A.center[1],A.width,A.height);y.metricEnd()}};w._writeVertexCommon=function(y,C,B,A){const D=this._color,E=this._haloColor,G=q.i8888to32(0,0,this._size,this._haloSize);A=q.i8888to32(Math.floor(10*Math.max(A.minZoom,this._minZoom)),Math.floor(10*Math.min(A.maxZoom,this._maxZoom)),this._outLineLabelAngle,0);y.vertexWrite(B);y.vertexWrite(C);y.vertexWrite(D);
y.vertexWrite(E);y.vertexWrite(G);y.vertexWrite(this._refSymbolAndPlacementOffset);y.vertexWrite(A)};n._createClass(e,[{key:"_shapedBox",get:function(){return r.unwrap(this._shapingInfo).bounds}}]);return e}(a)})},"esri/views/2d/engine/webgl/alignmentUtils":function(){define(["exports"],function(n){n.HAlign=void 0;(function(c){c[c.Left=-1]="Left";c[c.Center=0]="Center";c[c.Right=1]="Right"})(n.HAlign||(n.HAlign={}));n.VAlign=void 0;(function(c){c[c.Top=1]="Top";c[c.Center=0]="Center";c[c.Bottom=-1]=
"Bottom";c[c.Baseline=2]="Baseline"})(n.VAlign||(n.VAlign={}));n.getAlignmentFromPlacement=function(c){switch(c){case "above-left":case "esriServerPointLabelPlacementAboveLeft":return[n.HAlign.Right,n.VAlign.Bottom];case "above-center":case "above-along":case "esriServerPointLabelPlacementAboveCenter":case "esriServerLinePlacementAboveAlong":return[n.HAlign.Center,n.VAlign.Bottom];case "above-right":case "esriServerPointLabelPlacementAboveRight":return[n.HAlign.Left,n.VAlign.Bottom];case "center-left":case "esriServerPointLabelPlacementCenterLeft":return[n.HAlign.Right,
n.VAlign.Center];case "center-center":case "center-along":case "esriServerPointLabelPlacementCenterCenter":case "esriServerLinePlacementCenterAlong":return[n.HAlign.Center,n.VAlign.Center];case "center-right":case "esriServerPointLabelPlacementCenterRight":return[n.HAlign.Left,n.VAlign.Center];case "below-left":case "esriServerPointLabelPlacementBelowLeft":return[n.HAlign.Right,n.VAlign.Top];case "below-center":case "below-along":case "esriServerPointLabelPlacementBelowCenter":case "esriServerLinePlacementBelowAlong":return[n.HAlign.Center,
n.VAlign.Top];case "below-right":case "esriServerPointLabelPlacementBelowRight":return[n.HAlign.Left,n.VAlign.Top];case "always-horizontal":case "esriServerPolygonPlacementAlwaysHorizontal":return[n.HAlign.Center,n.VAlign.Baseline];default:return console.debug(`Found invalid placement type ${c}`),[n.HAlign.Center,n.VAlign.Center]}};n.getJustification=function(c){switch(c){case "left":return n.HAlign.Left;case "right":return n.HAlign.Right;case "center":case "justify":return n.HAlign.Center}};n.getXAnchorDirection=
function(c){switch(c){case "left":return n.HAlign.Left;case "right":return n.HAlign.Right;case "center":case "justify":return n.HAlign.Center}};n.getXDirection=function(c){switch(c){case n.HAlign.Right:return-1;case n.HAlign.Center:return 0;case n.HAlign.Left:return 1;default:return console.debug(`Found invalid horizontal alignment ${c}`),0}};n.getYAnchorDirection=function(c){switch(c){case "top":return n.VAlign.Top;case "middle":return n.VAlign.Center;case "baseline":return n.VAlign.Baseline;case "bottom":return n.VAlign.Bottom}};
n.getYDirection=function(c){switch(c){case n.VAlign.Top:return 1;case n.VAlign.Center:return 0;case n.VAlign.Bottom:case n.VAlign.Baseline:return-1;default:return console.debug(`Found invalid vertical alignment ${c}`),0}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/materialKey/MaterialKey":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/Error","../enums","../mesh/templates/meshUtils"],function(n,c,z,x,r){function u(h,
k=!1){const e=x.WGLVVFlag.SIZE_FIELD_STOPS|x.WGLVVFlag.SIZE_MINMAX_VALUE|x.WGLVVFlag.SIZE_SCALE_STOPS|x.WGLVVFlag.SIZE_UNIT_VALUE;h=(h&(x.WGLVVTarget.FIELD_TARGETS_OUTLINE|x.WGLVVTarget.MINMAX_TARGETS_OUTLINE|x.WGLVVTarget.SCALE_TARGETS_OUTLINE|x.WGLVVTarget.UNIT_TARGETS_OUTLINE))>>>4;return k?e&h:e&~h}function m(h){const k=u(h,!1);return h&(x.WGLVVFlag.COLOR|x.WGLVVFlag.OPACITY|x.WGLVVFlag.ROTATION|k)}let v=function(){function h(e){this._data=0;this._data=e}h.load=function(e){const w=this.shared;
w.data=e;return w};var k=h.prototype;k.setBit=function(e,w){e=1<<e;this._data=w?this._data|e:this._data&~e};k.bit=function(e){return(this._data&1<<e)>>e};k.setBits=function(e,w,y){for(let C=w,B=0;C<y;C++,B++)this.setBit(C,0!==(e&1<<B))};k.bits=function(e,w){let y=0;for(let C=e,B=0;C<w;C++,B++)y|=this.bit(C)<<B;return y};k.hasVV=function(){return!1};k.setVV=function(e,w){};k.getVariation=function(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf}};k.getVariationHash=function(){return this._data&
~(7&this.textureBinding)};c._createClass(h,[{key:"data",get:function(){return this._data},set:function(e){this._data=e}},{key:"geometryType",get:function(){return this.bits(8,11)},set:function(e){this.setBits(e,8,11)}},{key:"mapAligned",get:function(){return!!this.bit(20)},set:function(e){this.setBit(20,e)}},{key:"sdf",get:function(){return!!this.bit(11)},set:function(e){this.setBit(11,e)}},{key:"pattern",get:function(){return!!this.bit(12)},set:function(e){this.setBit(12,e)}},{key:"textureBinding",
get:function(){return this.bits(0,8)},set:function(e){this.setBits(e,0,8)}},{key:"geometryTypeString",get:function(){switch(this.geometryType){case x.WGLGeometryType.FILL:return"fill";case x.WGLGeometryType.MARKER:return"marker";case x.WGLGeometryType.LINE:return"line";case x.WGLGeometryType.TEXT:return"text";case x.WGLGeometryType.LABEL:return"label";default:throw new z(`Unable to handle unknown geometryType: ${this.geometryType}`);}}}]);return h}();v.shared=new v(0);const p=h=>function(k){function e(){return k.apply(this,
arguments)||this}c._inheritsLoose(e,k);var w=e.prototype;w.hasVV=function(){return k.prototype.hasVV.call(this)||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue};w.setVV=function(y,C){k.prototype.setVV.call(this,y,C);y&=u(y,C);this.vvSizeMinMaxValue=!!(y&x.WGLVVFlag.SIZE_MINMAX_VALUE);this.vvSizeFieldStops=!!(y&x.WGLVVFlag.SIZE_FIELD_STOPS);this.vvSizeUnitValue=!!(y&x.WGLVVFlag.SIZE_UNIT_VALUE);this.vvSizeScaleStops=!!(y&x.WGLVVFlag.SIZE_SCALE_STOPS)};c._createClass(e,
[{key:"vvSizeMinMaxValue",get:function(){return 0!==this.bit(16)},set:function(y){this.setBit(16,y)}},{key:"vvSizeScaleStops",get:function(){return 0!==this.bit(17)},set:function(y){this.setBit(17,y)}},{key:"vvSizeFieldStops",get:function(){return 0!==this.bit(18)},set:function(y){this.setBit(18,y)}},{key:"vvSizeUnitValue",get:function(){return 0!==this.bit(19)},set:function(y){this.setBit(19,y)}}]);return e}(h),f=h=>function(k){function e(){return k.apply(this,arguments)||this}c._inheritsLoose(e,
k);var w=e.prototype;w.hasVV=function(){return k.prototype.hasVV.call(this)||this.vvRotation};w.setVV=function(y,C){k.prototype.setVV.call(this,y,C);this.vvRotation=!C&&!!(y&x.WGLVVFlag.ROTATION)};c._createClass(e,[{key:"vvRotation",get:function(){return 0!==this.bit(15)},set:function(y){this.setBit(15,y)}}]);return e}(h),q=h=>function(k){function e(){return k.apply(this,arguments)||this}c._inheritsLoose(e,k);var w=e.prototype;w.hasVV=function(){return k.prototype.hasVV.call(this)||this.vvColor};
w.setVV=function(y,C){k.prototype.setVV.call(this,y,C);this.vvColor=!C&&!!(y&x.WGLVVFlag.COLOR)};c._createClass(e,[{key:"vvColor",get:function(){return 0!==this.bit(13)},set:function(y){this.setBit(13,y)}}]);return e}(h),l=h=>function(k){function e(){return k.apply(this,arguments)||this}c._inheritsLoose(e,k);var w=e.prototype;w.hasVV=function(){return k.prototype.hasVV.call(this)||this.vvOpacity};w.setVV=function(y,C){k.prototype.setVV.call(this,y,C);this.vvOpacity=!C&&!!(y&x.WGLVVFlag.OPACITY)};
c._createClass(e,[{key:"vvOpacity",get:function(){return 0!==this.bit(14)},set:function(y){this.setBit(14,y)}}]);return e}(h);let t=function(h){function k(){return h.apply(this,arguments)||this}c._inheritsLoose(k,h);k.load=function(e){const w=this.shared;w.data=e;return w};k.from=function(e,w){const y=this.load(0);y.geometryType=x.WGLGeometryType.FILL;w?y.dotDensity=!0:y.setVV(e,!1);return y.data};k.prototype.getVariation=function(){return{...h.prototype.getVariation.call(this),dotDensity:this.dotDensity,
vvColor:this.vvColor,vvOpacity:this.vvOpacity}};c._createClass(k,[{key:"dotDensity",get:function(){return!!this.bit(15)},set:function(e){this.setBit(15,e)}}]);return k}(q(l(v)));t.shared=new t(0);let g=function(h){function k(){return h.apply(this,arguments)||this}c._inheritsLoose(k,h);k.load=function(e){const w=this.shared;w.data=e;return w};k.from=function(e){const w=this.load(0);w.geometryType=x.WGLGeometryType.MARKER;w.setVV(e,!1);return w.data};k.prototype.getVariation=function(){return{...h.prototype.getVariation.call(this),
vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}};return k}(q(l(f(p(v)))));g.shared=new g(0);let a=function(h){function k(){return h.apply(this,arguments)||this}c._inheritsLoose(k,h);k.load=function(e){const w=this.shared;w.data=e;return w};k.from=function(e,w){const y=this.load(0);y.geometryType=x.WGLGeometryType.LINE;
y.setVV(e,w);return y.data};k.prototype.getVariation=function(){return{...h.prototype.getVariation.call(this),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}};return k}(q(l(p(v))));a.shared=new a(0);let b=function(h){function k(){return h.apply(this,arguments)||this}c._inheritsLoose(k,h);k.load=function(e){const w=this.shared;w.data=e;return w};
k.from=function(e){const w=this.load(e);w.geometryType=x.WGLGeometryType.TEXT;w.setVV(e,!1);return w.data};k.prototype.getVariation=function(){return{...h.prototype.getVariation.call(this),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}};return k}(q(l(f(p(v)))));b.shared=new b(0);let d=function(h){function k(){return h.apply(this,
arguments)||this}c._inheritsLoose(k,h);k.load=function(e){const w=this.shared;w.data=e;return w};k.from=function(e,w){const y=this.load(0);y.geometryType=x.WGLGeometryType.LABEL;y.setVV(e,!1);y.mapAligned=r.isMapAligned(w);return y.data};k.prototype.getVariation=function(){return{...h.prototype.getVariation.call(this),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}};return k}(p(v));d.shared=
new d(0);n.FillMaterialKey=t;n.LabelMaterialKey=d;n.LineMaterialKey=a;n.MarkerMaterialKey=g;n.MaterialKeyBase=v;n.TextMaterialKey=b;n.createMaterialKey=function(h,k,e,w,y){switch(h){case x.WGLGeometryType.FILL:return t.from(k,w);case x.WGLGeometryType.LINE:return a.from(k,e);case x.WGLGeometryType.MARKER:return g.from(k);case x.WGLGeometryType.TEXT:return b.from(k);case x.WGLGeometryType.LABEL:return d.from(k,y);default:throw Error(`Unable to createMaterialKey for unknown geometryType ${h}`);}};n.getFillVVFlags=
function(h){return h&(x.WGLVVFlag.COLOR|x.WGLVVFlag.OPACITY)};n.getLabelVVFlags=function(h){const k=u(h,!1);return h&k};n.getLineVVFlags=function(h,k){if(k)return k=u(h,!0),h&k;k=u(h,!1);return h&(x.WGLVVFlag.COLOR|x.WGLVVFlag.OPACITY|k)};n.getMarkerVVFlags=m;n.getSizeFlagsMask=u;n.getTextVVFlags=function(h){return m(h)};n.hydrateMaterialKey=function(h){switch(v.load(h).geometryType){case x.WGLGeometryType.MARKER:return new g(h);case x.WGLGeometryType.FILL:return new t(h);case x.WGLGeometryType.LINE:return new a(h);
case x.WGLGeometryType.TEXT:return new b(h);case x.WGLGeometryType.LABEL:return new d(h)}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/meshUtils":function(){define(["exports"],function(n){n.isMapAligned=function(c){switch(c){case "above-along":case "below-along":case "center-along":case "esriServerLinePlacementAboveAlong":case "esriServerLinePlacementBelowAlong":case "esriServerLinePlacementCenterAlong":return!0;default:return!1}};Object.defineProperty(n,
"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/segmentUtils":function(){define(["exports","../../../../../../chunks/_rollupPluginBabelHelpers","../../../../../../core/maybe","./util"],function(n,c,z,x){function r(f){return f.length-1}function u(f){let q=0;for(let l=0;l<r(f);l++)q+=m(f,l);return q}function m(f,q,l=1){const [t,g]=f[q+1];return Math.sqrt(t*t+g*g)*l}function v(f,q,l,t,g){if(!(l<q)){var a=t.clone().seek(l/2);z.isNone(a)||(f(a.clone(),l,g),l=(l-q)/2,a=z.unwrap(a.seek(q/
2)),v(f,q,l,t,g+1),v(f,q,l,a,g+1))}}let p=function(){function f(l,t,g,a,b){this._segments=l;this._index=t;this._distance=g;this._xStart=a;this._yStart=b;this._done=!1}f.create=function(l){return new f(l,0,0,l[0][0],l[0][1])};var q=f.prototype;q.clone=function(){return new f(this._segments,this._index,this._distance,this.xStart,this.yStart)};q.equals=function(l){return this._index===l._index||l._index===this._index-1&&(0===this._distance||1===l._distance)||l._index===this._index+1&&(1===this._distance||
0===l._distance)};q.leq=function(l){return this._index<l._index||this._index===l._index&&this._distance<=l._distance};q.geq=function(l){return this._index>l._index||this._index===l._index&&this._distance>=l._distance};q.hasPrev=function(){return 0<=this._index-1};q.hasNext=function(){return this._index+1<r(this._segments)};q.next=function(){if(!this.hasNext())return null;this._xStart+=this.dx;this._yStart+=this.dy;this._distance=0;this._index+=1;return this};q.prev=function(){if(!this.hasPrev())return this._done=
!0,null;--this._index;this._xStart-=this.dx;this._yStart-=this.dy;this._distance=1;return this};q._seekBackwards=function(l,t){var g=this.backwardLength;if(l<=g)return this._distance=(g-l)/this.length,this;for(g=this.backwardLength;this.prev();){if(g+this.length>l)return this._seekBackwards(l-g);g+=this.length}this._distance=0;return t?this:null};q.seek=function(l,t=!1){if(0>l)return this._seekBackwards(Math.abs(l),t);if(l<=this.remainingLength)return this._distance=(this.backwardLength+l)/this.length,
this;let g=this.remainingLength;for(;this.next();){if(g+this.length>l)return this.seek(l-g,t);g+=this.length}this._distance=1;return t?this:null};c._createClass(f,[{key:"_segment",get:function(){return this._segments[this._index+1]}},{key:"angle",get:function(){const l=this.dy;let t=Math.acos((0*l+-1*-this.dx)/(1*this.length));0<l&&(t=2*Math.PI-t);return t}},{key:"xStart",get:function(){return this._xStart}},{key:"yStart",get:function(){return this._yStart}},{key:"x",get:function(){return this.xStart+
this.distance*this.dx}},{key:"y",get:function(){return this.yStart+this.distance*this.dy}},{key:"dx",get:function(){return this._segment[0]}},{key:"dy",get:function(){return this._segment[1]}},{key:"xMidpoint",get:function(){return this.xStart+.5*this.dx}},{key:"yMidpoint",get:function(){return this.yStart+.5*this.dy}},{key:"xEnd",get:function(){return this.xStart+this.dx}},{key:"yEnd",get:function(){return this.yStart+this.dy}},{key:"length",get:function(){const {dx:l,dy:t}=this;return Math.sqrt(l*
l+t*t)}},{key:"remainingLength",get:function(){return this.length*(1-this._distance)}},{key:"backwardLength",get:function(){return this.length*this._distance}},{key:"distance",get:function(){return this._distance}},{key:"done",get:function(){return this._done}}]);return f}();n.SegmentCursor=p;n.pathDivide=function(f,q,l){const t=u(f);f=p.create(f);const g=t/2,a=Math.floor((t-q)/2/q);f.seek(g-a*q);for(let b=-a;b<=a;b++)512>f.x&&0<=f.x&&512>f.y&&0<=f.y&&l(f.clone(),b,g+b*q,t),f.seek(q)};n.pathLength=
u;n.pathSubdivide=function(f,q,l){v(l,q,u(f),p.create(f),0)};n.segmentAt=function(f,q){return f[q+1]};n.segmentCount=r;n.segmentLength=m;n.smoothPaths=function(f,q){for(let E=0;E<f.length;E++){var l=f[E];const G=[];G.push(l[0]);for(var t=1;t<l.length;t++){let [I,L]=G[t-1];I+=l[t][0];L+=l[t][1];G.push([I,L])}a:{l=G;t=q;if(0>=t)break a;const I=l.length;if(3>I)break a;const L=[];var g=0;L.push(0);for(var a=1;a<I;a++)g+=x.dist(l[a],l[a-1]),L.push(g);t=Math.min(t,.2*g);g=[];g.push(l[0][0]);g.push(l[0][1]);
a=l[I-1][0];const J=l[I-1][1];var b=x.sub([0,0],l[0],l[1]);x.normalize(b);l[0][0]+=t*b[0];l[0][1]+=t*b[1];x.sub(b,l[I-1],l[I-2]);x.normalize(b);l[I-1][0]+=t*b[0];l[I-1][1]+=t*b[1];for(b=1;b<I;b++)L[b]+=t;L[I-1]+=t;b=.5*t;for(let F=1;F<I-1;F++){let K=0,M=0,R=0;for(var d=F-1;0<=d&&!(L[d+1]<L[F]-b);d--){var h=b+L[d+1]-L[F],k=L[d+1]-L[d],e=L[F]-L[d]<b?1:h/k;if(1E-6>Math.abs(e))break;var w=e*e,y=e*h-.5*w*k,C=e*k/t,B=l[d+1],A=l[d][0]-B[0],D=l[d][1]-B[1];K+=C/y*(B[0]*e*h+.5*w*(h*A-k*B[0])-w*e*k*A/3);M+=
C/y*(B[1]*e*h+.5*w*(h*D-k*B[1])-w*e*k*D/3);R+=C}for(d=F+1;d<I&&!(L[d-1]>L[F]+b);d++){h=b-L[d-1]+L[F];k=L[d]-L[d-1];e=L[d]-L[F]<b?1:h/k;if(1E-6>Math.abs(e))break;w=e*e;y=e*h-.5*w*k;C=e*k/t;B=l[d-1];A=l[d][0]-B[0];D=l[d][1]-B[1];K+=C/y*(B[0]*e*h+.5*w*(h*A-k*B[0])-w*e*k*A/3);M+=C/y*(B[1]*e*h+.5*w*(h*D-k*B[1])-w*e*k*D/3);R+=C}g.push(K/R);g.push(M/R)}g.push(a);g.push(J);for(let F=0,K=0;F<I;F++)l[F][0]=g[K++],l[F][1]=g[K++]}l=[];l.push(G[0]);for(t=1;t<G.length;t++){const [I,L]=G[t-1],[J,F]=G[t];l.push([Math.round(J-
I),Math.round(F-L)])}f[E]=l}return f};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/util":function(){define(["exports"],function(n){function c(z,x){return Math.sqrt(z*z+x*x)}n.DEFAULT_MAX_ZOOM=100;n.DEFAULT_MIN_ZOOM=0;n.dist=function(z,x){return c(z[0]-x[0],z[1]-x[1])};n.getLimitCosine=function(z=2){return 1/Math.max(z,1)};n.getMinMaxZoom=function(z,x){const r=!!z.minScale&&x.scaleToZoom(z.minScale)||0;z=!!z.maxScale&&x.scaleToZoom(z.maxScale)||100;
return[r,z]};n.isExtent=function(z){return void 0!==z.xmin&&void 0!==z.ymin&&void 0!==z.xmax&&void 0!==z.ymax};n.isFunction=function(z){return"function"===typeof z};n.isMultipoint=function(z){return void 0!==z.points};n.isPoint=function(z){return void 0!==z.x&&void 0!==z.y};n.isPolygon=function(z){return void 0!==z.rings};n.isPolyline=function(z){return void 0!==z.paths};n.len=c;n.normalize=function(z){const x=c(z[0],z[1]);z[0]/=x;z[1]/=x};n.sub=function(z,x,r){z[0]=x[0]-r[0];z[1]=x[1]-r[1];return z};
Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/WGLTextTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/screenUtils ../../alignmentUtils ../../color ../../definitions ../../number ../../materialKey/MaterialKey ./util ./WGLBaseTextTemplate ./WGLMeshTemplate ../../util/BidiText".split(" "),function(n,c,z,x,r,u,m,v,p,f,q){return function(l){function t(g,a,b,d,h,k,e,w,y,C,B,A,D,E,G,I,L,J=!1,F,K){var M=
l.call(this)||this;M._xOffset=c.pt2px(A);M._yOffset=c.pt2px(D);M._decoration=y||"none";M._color=d;M._haloColor=h;M._haloSize=Math.min(Math.floor(5*c.pt2px(c.toPt(b))),127);M._size=Math.min(Math.round(c.pt2px(a)),127);a=Math.min(Math.round(c.pt2px(a)),127);M._referenceSize=Math.round(Math.sqrt(256*a));M._scale=M._size/24;M._angle=B;M._justify=z.getJustification(k||"center");M._xAlignD=z.getXAnchorDirection(k||"center");M._yAlignD=z.getYAnchorDirection(e||"baseline");M._baseline="baseline"===(e||"baseline");
M._bitset=(1===w?1:0)|(C?1:0)<<1;g=m.MaterialKeyBase.load(g);g.sdf=!0;M._materialKey=g.data;M._lineWidth=c.pt2px(E)||512;M._lineHeight=G||1;M._textPlacement=I;M._effects=L;M._isCIM=J;M._minMaxZoom=u.i1616to32(Math.round(F*r.MIN_MAX_ZOOM_PRECISION_FACTOR),Math.round(K*r.MIN_MAX_ZOOM_PRECISION_FACTOR));return M}n._inheritsLoose(t,l);t.fromText=function(g,a){const b=new t(g.materialKey,g.font.size,g.haloSize||0,g.color&&x.premultiplyAlphaRGBAArray(g.color)||0,g.haloColor&&x.premultiplyAlphaRGBAArray(g.haloColor)||
0,g.horizontalAlignment,g.verticalAlignment,0,g.font.decoration,!1,g.angle||0,g.xoffset,g.yoffset,g.lineWidth,g.lineHeight,null,null,!1,v.DEFAULT_MIN_ZOOM,v.DEFAULT_MAX_ZOOM),[,d]=q.bidiText(g.text);b.bindTextInfo(a,d);b._vertexBoundsScale=g.maxVVSize?g.maxVVSize/g.font.size:1;return b};t.fromCIMText=function(g,a,b){var d=g.scaleFactor||1;const h=g.size*g.sizeRatio*d,[k,e]=v.getMinMaxZoom(g.scaleInfo,b);b=new t(g.materialKey,h,g.outlineSize*g.sizeRatio,x.premultiplyAlphaRGBA(g.color),x.premultiplyAlphaRGBA(g.outlineColor),
g.horizontalAlignment,g.verticalAlignment,g.alignment,g.decoration,g.colorLocked,g.angle,g.offsetX*g.sizeRatio*d,g.offsetY*g.sizeRatio*d,512,1,g.markerPlacement,g.effects,!0,k,e);[,d]=q.bidiText(g.text);b.bindTextInfo(a,d);b._vertexBoundsScale=g.maxVVSize?g.maxVVSize/h:1;return b};return t}(p(f))})},"esri/views/2d/engine/webgl/mesh/templates/WGLBaseTextTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../../../../../core/screenUtils ../../../../../../layers/graphics/featureConversionUtils ../../../../../../symbols/cim/placements/CIMMarkerPlacementHelper ../../definitions ../../enums ../../number ../../materialKey/MaterialKey ./shapingUtils".split(" "),
function(n,c,z,x,r,u,m,v,p,f){return q=>function(l){function t(...a){a=l.call(this,...a)||this;a._isCIM=!1;a._vertexBoundsScale=1;a.geometryType=m.WGLGeometryType.TEXT;a._aux=v.i8888to32(0,0,a._referenceSize,a._bitset);return a}n._inheritsLoose(t,l);var g=t.prototype;g.bindTextInfo=function(a,b){this._shapingInfo=a&&a.length?c.andThen(a,d=>f.shapeGlyphs(d,b,{scale:this._scale,angle:this._angle,xOffset:this._xOffset,yOffset:this._yOffset,hAlign:this._xAlignD,vAlign:this._yAlignD,maxLineWidth:Math.max(32,
Math.min(this._lineWidth,512)),lineHeight:u.MAGIC_LABEL_LINE_HEIGHT*Math.max(.25,Math.min(this._lineHeight,4)),decoration:this._decoration,isCIM:this._isCIM})):null};g._write=function(a,b,d){const h=b.getDisplayId();this._writeGeometry(a,b,h,d)};g._writeGeometry=function(a,b,d,h){const k=this._shapingInfo;if(!c.isNone(k)){if(c.isSome(this._textPlacement))return b=null!=h?h:b.readLegacyGeometryForDisplay(),this._writePlacedText(a,d,b,k);b=h?x.deltaDecodeGeometry(x.convertFromGeometry(h),2):"esriGeometryPolygon"===
b.geometryType?b.readCentroid():b.readGeometryForDisplay();if(!c.isNone(b)){if(b.isPoint){const [e,w]=b.coords;return this._writeGlyphs(a,d,{x:e,y:w},k)}b.forEachVertex((e,w)=>this._writeGlyphs(a,d,{x:e,y:w},k))}}};g._writePlacedText=function(a,b,d,h){var k=c.unwrap(this._textPlacement);if(d=r.CIMMarkerPlacementHelper.getPlacement(d,k,z.pt2px(1)))for(var e=d.next();null!=e;){k=e.getAngle();h.setRotation(k);const w=e.tx;e=e.ty;0>w||512<=w||0>e||512<=e||(this._writeGlyphs(a,b,{x:w,y:e},h),h.setRotation(-k));
e=d.next()}};g._writeGlyphs=function(a,b,d,h){const k=p.MaterialKeyBase.load(this._materialKey),e=v.i1616to32(Math.round(8*d.x),Math.round(8*d.y)),w=this._vertexBoundsScale,y=h.bounds,C=2*Math.max(y.width,y.height);for(const B of h.glyphs)k.textureBinding=B.textureBinding,a.recordStart(b,k.data,this.geometryType,!1,!0),a.vertexBounds(d.x+y.x+this._xOffset,d.y+y.y-this._yOffset,C*w,C*w),this._writeVertices(a,b,e,B),a.recordEnd()};g._writeGlyph=function(a,b,d,h,k){var e=p.MaterialKeyBase.load(this._materialKey);
const w=v.i1616to32(Math.round(8*d),Math.round(8*h));e.textureBinding=k.textureBinding;a.recordStart(b,e.data,this.geometryType,!1,!0);e=k.bounds;const y=this._vertexBoundsScale;a.vertexBounds(d+e.x*y,h+e.y*y,e.width*y,e.height*y);this._writeVertices(a,b,w,k);a.recordEnd()};g._writeVertices=function(a,b,d,h){const k=a.vertexCount();this._writeVertexCommon(a,b,d,h);a.vertexWrite(h.offsets.upperLeft);a.vertexWrite(h.texcoords.upperLeft);a.vertexEnd();this._writeVertexCommon(a,b,d,h);a.vertexWrite(h.offsets.upperRight);
a.vertexWrite(h.texcoords.upperRight);a.vertexEnd();this._writeVertexCommon(a,b,d,h);a.vertexWrite(h.offsets.lowerLeft);a.vertexWrite(h.texcoords.lowerLeft);a.vertexEnd();this._writeVertexCommon(a,b,d,h);a.vertexWrite(h.offsets.lowerRight);a.vertexWrite(h.texcoords.lowerRight);a.vertexEnd();a.indexWrite(k+0);a.indexWrite(k+1);a.indexWrite(k+2);a.indexWrite(k+1);a.indexWrite(k+3);a.indexWrite(k+2)};g._writeVertexCommon=function(a,b,d,h){h=this._color;const k=this._haloColor,e=v.i8888to32(0,0,this._referenceSize,
this._bitset),w=v.i8888to32(0,0,this._size,this._haloSize);a.vertexWrite(d);a.vertexWrite(b);a.vertexWrite(h);a.vertexWrite(k);a.vertexWrite(w);a.vertexWrite(e);a.vertexWrite(this._minMaxZoom)};return t}(q)})},"esri/symbols/cim/placements/CIMMarkerPlacementHelper":function(){define(["exports","../CIMCursor","../CIMOperators"],function(n,c,z){let x=function(){function r(){}r.getPlacement=function(u,m,v){const p=z.getPlacementOperator(m);if(!p)return null;u=c.cloneAndDecodeGeometry(u);return p.execute(u,
m,v)};return r}();n.CIMMarkerPlacementHelper=x;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/CIMCursor":function(){define(["exports","../../core/lang","../../geometry/support/jsonUtils","./CIMPlacements"],function(n,c,z,x){function r(g){if(g){var a=g.length;for(--a;0<a;--a)g[a][0]-=g[a-1][0],g[a][1]-=g[a-1][1]}}function u(g){if(g)for(const a of g)r(a)}function m(g){if(g){const a=g.length;for(let b=1;b<a;++b)g[b][0]+=g[b-1][0],g[b][1]+=g[b-1][1]}}function v(g){if(g)for(const a of g)m(a)}
function p(g){g&&(z.isPolygon(g)?v(g.rings):z.isPolyline(g)?v(g.paths):z.isMultipoint(g)&&m(g.points))}function f(g){g&&g.reverse()}function q(g){return{rings:[[[g.xmin,g.ymin],[g.xmin,g.ymax],[g.xmax,g.ymax],[g.xmax,g.ymin],[g.xmin,g.ymin]]]}}let l=function(){function g(a,b,d,h){this.acceptPolygon=b;this.acceptPolyline=d;this.geomUnitsPerPoint=h;this.pathIndex=this.pathCount=-1;this.iteratePath=!1;a&&(z.isPolygon(a)?b&&(this.multiPath=a.rings,this.isClosed=!0):z.isPolyline(a)?d&&(this.multiPath=
a.paths,this.isClosed=!1):z.isExtent(a)&&b&&(this.multiPath=q(a).rings,this.isClosed=!0),this.multiPath&&(this.pathCount=this.multiPath.length));this.internalPlacement=new x.Placement}g.prototype.next=function(){if(!this.multiPath)return null;for(;this.iteratePath||this.pathIndex<this.pathCount-1;){this.iteratePath||this.pathIndex++;const a=this.processPath(this.multiPath[this.pathIndex]);if(a)return a}this.pathIndex=this.pathCount=-1;return this.multiPath=null};return g}(),t=function(){function g(a,
b,d,h){this.inputGeometries=a;this.acceptPolygon=b;this.acceptPolyline=d;this.geomUnitsPerPoint=h;this.pathIndex=this.pathCount=-1;this.iteratePath=!1}g.prototype.next=function(){for(;;){if(!this.multiPath){for(var a=this.inputGeometries.next();a;)if(z.isPolygon(a)?this.acceptPolygon&&(this.multiPath=a.rings,this.isClosed=!0):z.isPolyline(a)?this.acceptPolyline&&(this.multiPath=a.paths,this.isClosed=!1):z.isExtent(a)&&this.acceptPolygon&&(this.multiPath=q(a).rings,this.isClosed=!0),this.multiPath){this.pathCount=
this.multiPath.length;this.pathIndex=-1;break}else a=this.inputGeometries.next();if(!this.multiPath)return null}for(;this.iteratePath||this.pathIndex<this.pathCount-1;)if(this.iteratePath||this.pathIndex++,a=this.processPath(this.multiPath[this.pathIndex]))return a;this.pathIndex=this.pathCount=-1;this.multiPath=null}};return g}();n.PathGeometryCursor=t;n.PathTransformationCursor=l;n.cloneAndDecodeGeometry=function(g){g=c.clone(g);p(g);return g};n.deltaDecodeGeometry=p;n.deltaEncodeGeometry=function(g){g&&
(z.isPolygon(g)?u(g.rings):z.isPolyline(g)?u(g.paths):z.isMultipoint(g)&&r(g.points))};n.getCoord2D=function(g,a,b){return[g[0]+(a[0]-g[0])*b,g[1]+(a[1]-g[1])*b]};n.getId=function(g){return g[4]};n.isClosedPath=function(g){return g&&0!==g.length?g[0][0]===g[g.length-1][0]&&g[0][1]===g[g.length-1][1]:!1};n.reverseMultipath=function(g){if(g)for(const a of g)f(a)};n.reversePath=f;n.setId=function(g,a){g[4]=a};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/CIMPlacements":function(){define(["exports"],
function(n){let c=function(){function x(){this.setIdentity()}var r=x.prototype;r.getAngle=function(){if(null==this.rz||0===this.rz&&1!==this.rz_c&&0!==this.rz_s)this.rz=Math.atan2(this.rz_s,this.rz_c);return this.rz};r.setIdentity=function(){this.tz=this.ty=this.tx=0;this.s=1;this.rz=this.ry=this.rx=0;this.rz_c=1;this.rz_s=0};r.setTranslate=function(u,m){this.tx=u;this.ty=m};r.setTranslateZ=function(u){this.tz=u};r.setRotateCS=function(u,m){this.rz=void 0;this.rz_c=u;this.rz_s=m};r.setRotate=function(u){this.rz=
u;this.rz_s=this.rz_c=void 0};r.setRotateY=function(u){this.ry=u};r.setScale=function(u){this.s=u};r.setMeasure=function(u){this.m=u};return x}(),z=function(){function x(){}x.prototype.next=function(){return null};return x}();n.EmptyPlacementCursor=z;n.Placement=c;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/CIMOperators":function(){define("exports ./effects/EffectAddControlPoints ./effects/EffectArrow ./effects/EffectBuffer ./effects/EffectCut ./effects/EffectDashes ./effects/EffectDonut ./effects/EffectJog ./effects/EffectMove ./effects/EffectOffset ./effects/EffectReverse ./effects/EffectRotate ./effects/EffectScale ./effects/EffectWave ./placements/PlacementAlongLineSameSize ./placements/PlacementAtExtremities ./placements/PlacementAtRatioPositions ./placements/PlacementInsidePolygon ./placements/PlacementOnLine ./placements/PlacementOnVertices ./placements/PlacementPolygonCenter".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a,b,d,h,k,e,w){n.getEffectOperator=function(y){if(!y)return null;switch(y.type){case "CIMGeometricEffectAddControlPoints":return c.EffectAddControlPoints.local();case "CIMGeometricEffectArrow":return z.EffectArrow.local();case "CIMGeometricEffectBuffer":return x.EffectBuffer.local();case "CIMGeometricEffectCut":return r.EffectCut.local();case "CIMGeometricEffectDashes":return u.EffectDashes.local();case "CIMGeometricEffectDonut":return m.EffectDonut.local();case "CIMGeometricEffectJog":return v.EffectJog.local();
case "CIMGeometricEffectMove":return p.EffectMove.local();case "CIMGeometricEffectOffset":return f.EffectOffset.local();case "CIMGeometricEffectReverse":return q.EffectReverse.local();case "CIMGeometricEffectRotate":return l.EffectRotate.local();case "CIMGeometricEffectScale":return t.EffectScale.local();case "CIMGeometricEffectWave":return g.EffectWave.local()}return null};n.getPlacementOperator=function(y){if(!y)return null;switch(y.type){case "CIMMarkerPlacementAlongLineSameSize":return a.PlacementAlongLineSameSize.local();
case "CIMMarkerPlacementAtExtremities":return b.PlacementAtExtremities.local();case "CIMMarkerPlacementAtRatioPositions":return d.PlacementAtRatioPositions.local();case "CIMMarkerPlacementInsidePolygon":return h.PlacementInsidePolygon.local();case "CIMMarkerPlacementOnLine":return k.PlacementOnLine.local();case "CIMMarkerPlacementOnVertices":return e.PlacementOnVertices.local();case "CIMMarkerPlacementPolygonCenter":return w.PlacementPolygonCenter.local()}return null};Object.defineProperty(n,"__esModule",
{value:!0})})},"esri/symbols/cim/effects/EffectAddControlPoints":function(){define(["exports","../../../core/lang","../../../geometry/support/jsonUtils","../CIMCursor"],function(n,c,z,x){let r=function(){function m(){}m.local=function(){null===m.instance&&(m.instance=new m);return m.instance};m.prototype.execute=function(v,p,f){return new u(v,p,f)};return m}();r.instance=null;let u=function(){function m(p,f,q){this._inputGeometries=p;this._angleTolerance=void 0!==f.angleTolerance?f.angleTolerance:
120;this._maxCosAngle=Math.cos((1-Math.abs(this._angleTolerance)/180)*Math.PI)}var v=m.prototype;v.next=function(){for(var p=this._inputGeometries.next();p;){if(z.isPolygon(p))return this._isClosed=!0,p=c.clone(p),this._processMultipath(p.rings),p;if(z.isPolyline(p))return this._isClosed=!1,p=c.clone(p),this._processMultipath(p.paths),p;if(z.isExtent(p)){if(this._maxCosAngle)return p;this._isClosed=!0;p=[[p.xmin,p.ymin],[p.xmin,p.ymax],[p.xmax,p.ymax],[p.xmax,p.ymin],[p.xmin,p.ymin]];this._processPath(p);
return{rings:[p]}}p=this._inputGeometries.next()}return null};v._processMultipath=function(p){if(p)for(const f of p)this._processPath(f)};v._processPath=function(p){if(p){let f=p.length,q=p[0],l,t,g,a,b,d;this._isClosed&&++f;for(let h=1;h<f;++h){let k;k=this._isClosed&&h===f-1?p[0]:p[h];const e=k[0]-q[0],w=k[1]-q[1],y=Math.sqrt(e*e+w*w);1<h&&0<y&&0<g&&(l*e+t*w)/y/g<=this._maxCosAngle&&x.setId(q,1);1===h&&(a=e,b=w,d=y);0<y&&(q=k,l=e,t=w,g=y)}this._isClosed&&0<g&&0<d&&(l*a+t*b)/d/g<=this._maxCosAngle&&
x.setId(p[0],1)}};return m}();n.EffectAddControlPoints=r;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectArrow":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper"],function(n,c,z,x){let r=function(){function m(){}m.local=function(){null===m.instance&&(m.instance=new m);return m.instance};m.prototype.execute=function(v,p,f){return new u(v,p,f)};return m}();r.instance=null;let u=function(m){function v(f,q,l){f=
m.call(this,f,!1,!0)||this;f._curveHelper=new x.CurveHelper;f._width=(void 0!==q.width?q.width:5)*l;f._arrowType=void 0!==q.geometricEffectArrowType?q.geometricEffectArrowType:"OpenEnded";f._offsetFlattenError=x.PIXEL_TOLERANCE*l;return f}c._inheritsLoose(v,m);var p=v.prototype;p.processPath=function(f){switch(this._arrowType){default:return this._constructSimpleArrow(f,!0);case "Block":return this._constructSimpleArrow(f,!1);case "Crossed":return this._constructCrossedArrow(f)}};p._constructSimpleArrow=
function(f,q){var l=this._curveHelper.calculatePathLength(f),t=this._width;l<2*t&&(t=l/2);l=this._curveHelper.getSubCurve(f,0,l-t);if(!l)return null;var g=t/2;if(this._curveHelper.isEmpty(l,!1))return null;t=this._constructOffset(l,-g);if(!t)return null;l=this._constructOffset(l,g);if(!l)return null;const a=this._constructArrowBasePoint(t,-g/2);if(!a)return null;g=this._constructArrowBasePoint(l,g/2);if(!g)return null;f=f[f.length-1];q||(this._makeControlPoint(l,!0),this._makeControlPoint(t,!0));
const b=new x.PathHelper;b.addPath(l,!0);b.lineTo(g);this._makeControlPoint(b.path());b.lineTo(f);this._makeControlPoint(b.path());b.lineTo(a);this._makeControlPoint(b.path());b.addPath(t,!1);return q?{paths:[b.path()]}:(b.close(),{rings:[b.path()]})};p._constructCrossedArrow=function(f){var q=this._curveHelper.calculatePathLength(f),l=this._width;q<3.732050807568877*l&&(l=q/3.732050807568877);var t=this._curveHelper.getSubCurve(f,0,q-2.732050807568877*l);if(!t)return null;var g=l/2;if(this._curveHelper.isEmpty(t,
!1))return null;const a=this._constructOffset(t,g);if(!a)return null;t=this._constructOffset(t,-g);if(!t)return null;q=this._curveHelper.getSubCurve(f,0,q-l);if(!q||this._curveHelper.isEmpty(q,!1))return null;l=this._constructOffset(q,g);if(!l)return null;var b=this._constructOffset(q,-g);if(!b)return null;q=l[l.length-1];l=this._constructArrowBasePoint(l,g/2);if(!l)return null;const d=b[b.length-1];g=this._constructArrowBasePoint(b,-g/2);if(!g)return null;f=f[f.length-1];this._makeControlPoint(a,
!1);this._makeControlPoint(t,!1);b=new x.PathHelper;b.addPath(a,!0);this._makeControlPoint(b.path());b.lineTo(d);b.lineTo(g);this._makeControlPoint(b.path());b.lineTo(f);this._makeControlPoint(b.path());b.lineTo(l);this._makeControlPoint(b.path());b.lineTo(q);this._makeControlPoint(b.path());b.addPath(t,!1);return{paths:[b.path()]}};p._constructOffset=function(f,q){return this._curveHelper.offset(f,q,"Rounded",4,this._offsetFlattenError)};p._constructArrowBasePoint=function(f,q){if(!f||2>f.length)return null;
var l=f[f.length-2];f=f[f.length-1];l=[f[0]-l[0],f[1]-l[1]];this._curveHelper.normalize(l);return[f[0]+l[1]*q,f[1]-l[0]*q]};p._makeControlPoint=function(f,q=!1){q?z.setId(f[0],1):z.setId(f[f.length-1],1)};return v}(z.PathGeometryCursor);n.EffectArrow=r;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/CurveHelper":function(){define(["exports"],function(n){let c=function(){function x(){this._path=[]}var r=x.prototype;r.path=function(){return this._path};r.addPath=function(u,m){m||
u.reverse();Array.prototype.push.apply(this._path,u);m||u.reverse()};x.mergePath=function(u,m){m&&Array.prototype.push.apply(u,m)};r.startPath=function(u){this._path.push(u)};r.lineTo=function(u){this._path.push(u)};r.close=function(){const u=this._path;1<u.length&&(u[0][0]!==u[u.length-1][0]||u[0][1]!==u[u.length-1][1])&&u.push([u[0][0],u[0][1]])};return x}(),z=function(){function x(u,m){}var r=x.prototype;r.normalize=function(u){const m=Math.sqrt(u[0]*u[0]+u[1]*u[1]);u[0]/=m;u[1]/=m};r.calculateLength=
function(u,m){const v=m[0]-u[0];u=m[1]-u[1];return Math.sqrt(v*v+u*u)};r.calculateSegLength=function(u,m){return this.calculateLength(u[m],u[m+1])};r.calculatePathLength=function(u){let m=0;const v=u?u.length:0;for(let p=0;p<v-1;++p)m+=this.calculateSegLength(u,p);return m};r.calculatePathArea=function(u){let m=0;const v=u?u.length:0;for(let p=0;p<v-1;++p)m+=(u[p+1][0]-u[p][0])*(u[p+1][1]+u[p][1]);return m/2};r.getCoord2D=function(u,m,v){return[u[0]+(m[0]-u[0])*v,u[1]+(m[1]-u[1])*v]};r.getSegCoord2D=
function(u,m,v){return this.getCoord2D(u[m],u[m+1],v)};r.getAngle=function(u,m,v){return Math.atan2(m[1]-u[1],m[0]-u[0])};r.getSegAngle=function(u,m,v){return this.getAngle(u[m],u[m+1],v)};r.getAngleCS=function(u,m,v){v=m[0]-u[0];u=m[1]-u[1];m=Math.sqrt(v*v+u*u);return 0<m?[v/m,u/m]:[1,0]};r.getSegAngleCS=function(u,m,v){return this.getAngleCS(u[m],u[m+1],v)};r.cut=function(u,m,v,p){v=0>=v?u[m]:this.getSegCoord2D(u,m,v);u=1<=p?u[m+1]:this.getSegCoord2D(u,m,p);return[v,u]};r.addSegment=function(u,
m,v){v&&u.push(m[0]);u.push(m[1])};r.getSubCurve=function(u,m,v){const p=[];return this.appendSubCurve(p,u,m,v)?p:null};r.appendSubCurve=function(u,m,v,p){const f=m?m.length-1:0;let q=0,l=!0,t=0;for(;t<f;){const a=this.calculateSegLength(m,t);if(0!==a){if(l){if(q+a>v){var g=(v-q)/a;let b=1,d=!1;q+a>=p&&(b=(p-q)/a,d=!0);(g=this.cut(m,t,g,b))&&this.addSegment(u,g,l);if(d)break;l=!1}}else{if(q+a>p){(m=this.cut(m,t,0,(p-q)/a))&&this.addSegment(u,m,l);break}this.addSegment(u,[m[t],m[t+1]],l)}q+=a}++t}return!0};
r.getCIMPointAlong=function(u,m){const v=u?u.length-1:0;let p=0,f=-1;for(;f<v;){++f;const q=this.calculateSegLength(u,f);if(0!==q){if(p+q>m)return this.getCoord2D(u[f],u[f+1],(m-p)/q);p+=q}}return null};r.isEmpty=function(u,m){if(!u||1>=u.length)return!0;const v=u?u.length-1:0;let p=-1;for(;p<v;)if(++p,u[p+1][0]!==u[p][0]||u[p+1][1]!==u[p][1]||m&&u[p+1][2]!==u[p][2])return!1;return!0};r.offset=function(u,m,v,p,f){if(!u||2>u.length)return null;f=u.length;const q=u[0][0]===u[f-1][0]&&u[0][1]===u[f-
1][1];if(q){if(3>u.length)return null;--f}const l=[];var t=q?u[f-1]:null;let g=u[0];for(let h=0;h<f;h++){const k=h===f-1?q?u[0]:null:u[h+1];if(t)if(k){var a=[k[0]-g[0],k[1]-g[1]];this.normalize(a);t=[g[0]-t[0],g[1]-t[1]];this.normalize(t);var b=t[0]*a[1]-t[1]*a[0],d=t[0]*a[0]+t[1]*a[1];if(0<=b===0>=m)a=[a[0]-t[0],a[1]-t[1]],this.normalize(a),t=Math.sqrt((1+d)/2),t>1/p&&(t=-Math.abs(m)/t,l.push([g[0]-a[0]*t,g[1]-a[1]*t]));else switch(v){case "Mitered":if(d=Math.sqrt((1+d)/2),0<d&&1/d<p){a=[a[0]-t[0],
a[1]-t[1]];this.normalize(a);t=Math.abs(m)/d;l.push([g[0]-a[0]*t,g[1]-a[1]*t]);break}case "Bevelled":l.push([g[0]+t[1]*m,g[1]-t[0]*m]);l.push([g[0]+a[1]*m,g[1]-a[0]*m]);break;case "Rounded":l.push([g[0]+t[1]*m,g[1]-t[0]*m]);d=.2;for(b=1;5>b;b++,d+=.2){const e=[t[1]*(1-d)+a[1]*d,-t[0]*(1-d)-a[0]*d];this.normalize(e);l.push([g[0]+e[0]*m,g[1]+e[1]*m])}l.push([g[0]+a[1]*m,g[1]-a[0]*m]);break;default:0>b?(l.push([g[0]+(t[1]+t[0])*m,g[1]+(t[1]-t[0])*m]),l.push([g[0]+(a[1]-a[0])*m,g[1]-(a[0]+a[1])*m])):
(d=Math.sqrt((1+Math.abs(d))/2),a=[a[0]-t[0],a[1]-t[1]],this.normalize(a),t=m/d,l.push([g[0]-a[0]*t,g[1]-a[1]*t]))}}else a=[g[0]-t[0],g[1]-t[1]],this.normalize(a),l.push([g[0]+a[1]*m,g[1]-a[0]*m]);else a=[k[0]-g[0],k[1]-g[1]],this.normalize(a),l.push([g[0]+a[1]*m,g[1]-a[0]*m]);t=g;g=k}q&&l.push([l[0][0],l[0][1]]);return l};return x}();n.CurveHelper=z;n.PIXEL_TOLERANCE=.03;n.PathHelper=c;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectBuffer":function(){define(["exports",
"../../../geometry/support/jsonUtils","../CurveHelper"],function(n,c,z){let x=function(){function u(){}u.local=function(){null===u.instance&&(u.instance=new u);return u.instance};u.prototype.execute=function(m,v,p){return new r(m,v,p)};return u}();x.instance=null;let r=function(){function u(m,v,p){this._inputGeometries=m;this._curveHelper=new z.CurveHelper;this._size=(void 0!==v.size?v.size:1)*p;this._offsetFlattenError=z.PIXEL_TOLERANCE*p}u.prototype.next=function(){let m=this._inputGeometries.next();
for(;m;){if(c.isExtent(m))if(0<this._size){var v=this._curveHelper.offset([[m.xmin,m.ymin],[m.xmin,m.ymax],[m.xmax,m.ymax],[m.xmax,m.ymin],[m.xmin,m.ymin]],this._size,"Rounded",4,this._offsetFlattenError);if(v)return{rings:[v]}}else if(0>this._size){if(0<Math.min(m.xmax-m.xmin,m.ymax-m.ymin)+2*this._size)return{xmin:m.xmin-this._size,xmax:m.xmax+this._size,ymin:m.ymin-this._size,ymax:m.ymax+this._size}}else return m;if(c.isPolygon(m)){if(0===this._size)return m;v=[];for(const f of m.rings){var p=
this._curveHelper.offset(f,this._size,"Rounded",4,this._offsetFlattenError);p&&v.push(p)}if(v.length)return{rings:v}}if(c.isPolyline(m)&&0<this._size){v=[];for(const f of m.paths)if(f&&1<f.length){p=this._curveHelper.offset(f,this._size,"Rounded",4,this._offsetFlattenError);const q=this._curveHelper.offset(f,-this._size,"Rounded",4,this._offsetFlattenError);if(p&&q){for(let l=q.length-1;0<=l;l--)p.push(q[l]);p.push([p[0][0],p[0][1]]);v.push(p)}}if(v.length)return{rings:v}}c.isPoint(m);m=this._inputGeometries.next()}return null};
return u}();n.EffectBuffer=x;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectCut":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper"],function(n,c,z,x){let r=function(){function m(){}m.local=function(){null===m.instance&&(m.instance=new m);return m.instance};m.prototype.execute=function(v,p,f){return new u(v,p,f)};return m}();r.instance=null;let u=function(m){function v(p,f,q){p=m.call(this,p,!0,!0)||this;p._curveHelper=
new x.CurveHelper;p._beginCut=(void 0!==f.beginCut?f.beginCut:1)*q;p._endCut=(void 0!==f.endCut?f.endCut:1)*q;p._middleCut=(void 0!==f.middleCut?f.middleCut:0)*q;p._invert=void 0!==f.invert?f.invert:!1;0>p._beginCut&&(p._beginCut=0);0>p._endCut&&(p._endCut=0);0>p._middleCut&&(p._middleCut=0);return p}c._inheritsLoose(v,m);v.prototype.processPath=function(p){var f=this._beginCut;const q=this._endCut,l=this._middleCut,t=this._curveHelper.calculatePathLength(p),g=[];if(!this._invert)0===f&&0===q&&0===
l?g.push(p):f+q+l>=t||(0===l?(p=this._curveHelper.getSubCurve(p,f,t-q))&&g.push(p):((f=this._curveHelper.getSubCurve(p,f,.5*(t-l)))&&g.push(f),(f=this._curveHelper.getSubCurve(p,.5*(t+l),t-q))&&g.push(f)));else if(0!==f||0!==q||0!==l)f+q+l>=t?g.push(p):((f=this._curveHelper.getSubCurve(p,0,f))&&g.push(f),(f=this._curveHelper.getSubCurve(p,.5*(t-l),.5*(t+l)))&&g.push(f),(f=this._curveHelper.getSubCurve(p,t-q,q))&&g.push(f));return 0===g.length?null:{paths:g}};return v}(z.PathGeometryCursor);n.EffectCut=
r;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectDashes":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper","../GeometryWalker"],function(n,c,z,x,r){let u=function(){function v(){}v.local=function(){null===v.instance&&(v.instance=new v);return v.instance};v.prototype.execute=function(p,f,q){return new m(p,f,q)};return v}();u.instance=null;let m=function(v){function p(f,q,l){f=v.call(this,f,!0,!0)||this;f._walker=
new r.GeometryWalker;f._walker.updateTolerance(l);f._endings=q.lineDashEnding;f._customDashPos=void 0!==q.offsetAlongLine?q.offsetAlongLine*l:0;f._offsetAtEnd=void 0!==q.customEndingOffset?q.customEndingOffset*l:0;f._pattern=new r.DashPattern;f._pattern.init(q.dashTemplate,!0);f._pattern.scale(l);return f}c._inheritsLoose(p,v);p.prototype.processPath=function(f){if(0===this._pattern.length())return this.iteratePath=!1,{paths:[f]};if(!this.iteratePath){var q=!0;switch(this._endings){default:this._pattern.extPtGap=
0;break;case "FullPattern":this.isClosed||(this._pattern.extPtGap=.5*this._pattern.firstValue());break;case "FullGap":this.isClosed||(this._pattern.extPtGap=.5*this._pattern.lastValue());break;case "NoConstraint":this.isClosed||(q=!1);break;case "Custom":this.isClosed||(this._pattern.extPtGap=.5*this._offsetAtEnd)}var l=this._walker.calculatePathLength(f);if(this._pattern.isEmpty()||l<.1*this._pattern.length()||!this._walker.init(f,this._pattern,q))return{paths:[f]}}if(this.iteratePath)f=this._pattern.nextValue();
else{switch(this._endings){default:q=.5*this._pattern.firstValue();break;case "HalfGap":q=.5*-this._pattern.lastValue();break;case "FullGap":q=-this._pattern.lastValue();break;case "FullPattern":q=0;break;case "NoConstraint":case "Custom":q=-this._customDashPos}f=q/this._pattern.length();f-=Math.floor(f);q=f*this._pattern.length();this._pattern.reset();f=this._pattern.nextValue();for(l=!1;q>=f;)q-=f,f=this._pattern.nextValue(),l=!l;f-=q;l?(this._walker.nextPosition(f),f=this._pattern.nextValue()):
this.isClosed&&(this._firstCurve=this._walker.nextCurve(f),f=this._pattern.nextValue(),this._walker.nextPosition(f),f=this._pattern.nextValue())}(q=this._walker.nextCurve(f))?this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(this._firstCurve.splice(0,1),x.PathHelper.mergePath(q,this._firstCurve),this._firstCurve=null)):(f=this._pattern.nextValue(),!this._walker.nextPosition(f)||this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(q=this._firstCurve,this._firstCurve=null)):
this.iteratePath=!0):(this.iteratePath=!1,q=this._firstCurve,this._firstCurve=null);return{paths:[q]}};return p}(z.PathGeometryCursor);n.EffectDashes=u;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/GeometryWalker":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","./CIMCursor","./CurveHelper"],function(n,c,z,x){let r=function(){function v(){this._values=[];this._currentValue=this._length=this.ctrlPtGap=this.extPtGap=0}var p=v.prototype;p.isEmpty=function(){return 0===
this._values.length};p.size=function(){return this._values.length};p.init=function(f,q,l=!0){this._setEmpty();if(!f||0===f.length)return!1;for(let t=0;t<f.length;t++){let g=Math.abs(f[t]);l&&1E-7>g&&(g=1E-7);this._values.push(g);this._length+=g}q&&f.length&1&&(this._length*=2);if(0===this._length)return!1;this.ctrlPtGap=this.extPtGap=0;this._currentValue=-1;return!0};p.scale=function(f){const q=this._values?this._values.length:0;for(let l=0;l<q;++l)this._values[l]*=f;this._length*=f;this.extPtGap*=
f;this.ctrlPtGap*=f};p.addValue=function(f){this._length+=f;this._values.push(f)};p.firstValue=function(){return this._values[0]};p.lastValue=function(){return this._values[this._values.length-1]};p.nextValue=function(){this._currentValue++;this._currentValue===this._values.length&&(this._currentValue=0);return this._values[this._currentValue]};p.reset=function(){this._currentValue=-1};p.length=function(){return this._length};p._setEmpty=function(){this.extPtGap=this.ctrlPtGap=this._length=0;this._currentValue=
-1;this._values.length=0};return v}(),u=function(){function v(){this.reset()}var p=v.prototype;p.reset=function(){this.segment=-1;this.abscissa=this.segmentLength=0;this.isPartEnd=this.isPathEnd=!1};p.isValid=function(){return-1!==this.segment};p.copyTo=function(f){f.segment=this.segment;f.segmentLength=this.segmentLength;f.abscissa=this.abscissa;f.isPathEnd=this.isPathEnd;f.isPartEnd=this.isPartEnd};return v}(),m=function(v){function p(q=0,l=!1){q=v.call(this,q,l)||this;q._tolerance=x.PIXEL_TOLERANCE;
q._currentPosition=new u;return q}c._inheritsLoose(p,v);var f=p.prototype;f.updateTolerance=function(q){this._tolerance=x.PIXEL_TOLERANCE*q};f.init=function(q,l,t=!0){t?(this._patternLength=l.length(),this._partExtPtGap=l.extPtGap,this._partCtrlPtGap=l.ctrlPtGap):this._partCtrlPtGap=this._partExtPtGap=this._patternLength=0;this._currentPosition.reset();this._partSegCount=0;this._path=q;this._seg=-1;return this.setPosAtNextPart()};f.curPositionIsValid=function(){return this._currentPosition.isValid()};
f.nextPosition=function(q,l=0){const t=new u;if(!this._nextPosition(q,t,null,l))return!1;t.copyTo(this._currentPosition);return!0};f.curPointAndAngle=function(q){q.pt=this._getPoint(this._currentPosition);const [l,t]=this._getAngle(this._currentPosition);q.ca=l;q.sa=t};f.nextPointAndAngle=function(q,l,t=0){const g=new u;if(!this._nextPosition(q,g,null,t))return!1;g.copyTo(this._currentPosition);l.pt=this._getPoint(g);const [a,b]=this._getAngle(g);l.ca=a;l.sa=b;return!0};f.nextCurve=function(q){if(0===
q)return null;const l=[],t=new u;if(!this._nextPosition(q,t,l,1))return null;t.copyTo(this._currentPosition);return l};f.isPathEnd=function(){return this._currentPosition.isPathEnd};f.getPathEnd=function(){if(-1===this._currentPosition.segment)throw Error("missing segment");return this._path[this._currentPosition.segment+1]};f._nextPosition=function(q,l,t,g){if(this._currentPosition.isPathEnd)return!1;var a=this._currentPosition.abscissa;0<this._currentPosition.segmentLength&&(a/=this._currentPosition.segmentLength);
for(this._currentPosition.copyTo(l);l.abscissa+q*this._partLengthRatio>l.segmentLength+this._tolerance;)if(t&&(0===t.length&&(0===a?(a=this._path[l.segment],t.push([a[0],a[1]])):t.push(this.getSegCoord2D(this._path,l.segment,a))),a=this._path[l.segment+1],t.push([a[0],a[1]])),a=0,q-=(l.segmentLength-l.abscissa)/this._partLengthRatio,this._partSegCount)l.segment=this.nextSegment(),l.segmentLength=this.calculateSegLength(this._path,l.segment),l.abscissa=0,this._partSegCount--;else{if(!this.setPosAtNextPart()){if(0===
g)return!1;l.segmentLength=this.calculateSegLength(this._path,l.segment);l.isPartEnd=!0;1===g?(l.abscissa=l.segmentLength,l.isPathEnd=!0):l.abscissa=l.segmentLength+q;return!0}this._currentPosition.copyTo(l)}l.abscissa+=q*this._partLengthRatio;t&&(0===t.length&&(0===a?(q=this._path[l.segment],t.push([q[0],q[1]])):t.push(this.getSegCoord2D(this._path,l.segment,a))),q=l.abscissa/l.segmentLength,1===q?(q=this._path[l.segment+1],t.push([q[0],q[1]])):t.push(this.getSegCoord2D(this._path,l.segment,q)));
!this._partSegCount&&Math.abs(l.abscissa-l.segmentLength)<this._tolerance&&(l.isPathEnd=this._partIsLast,l.isPartEnd=!0);return!0};f._getPoint=function(q){if(-1===q.segment)throw Error("missing segment");return this.getSegCoord2D(this._path,q.segment,0>=q.segmentLength?0:q.abscissa/q.segmentLength)};f._getAngle=function(q){if(-1===q.segment)throw Error("missing segment");return this.getSegAngleCS(this._path,q.segment,0>=q.segmentLength?0:q.abscissa/q.segmentLength)};f.setPosAtNextPart=function(){for(;this._partSegCount;)this.hasNextSegment()&&
this.nextSegment(),this._partSegCount--;if(!this.hasNextSegment())return!1;this._partLength=0;this._partIsLast=!0;for(this._partSegCount=0;this.hasNextSegment();)if(this._partLength+=this.calculateSegLength(this._path,this.nextSegment()),this._partSegCount++,1===z.getId(this._path[this.getEndPointIndex()])){this._partIsLast=!this.hasNextSegment();break}for(var q=this._partSegCount;q;)this.previousSegment(),--q;this._currentPosition.segment=this.nextSegment();this._currentPosition.segmentLength=this.calculateSegLength(this._path,
this._currentPosition.segment);this._currentPosition.abscissa=0;this._currentPosition.isPathEnd=this._currentPosition.isPartEnd=!1;--this._partSegCount;q=this.getStartPointIndex();this._ctrlPtBegin=1===z.getId(this._path[q]);q=q+this._partSegCount+1;q>=this._path.length&&(q=0);this._ctrlPtEnd=1===z.getId(this._path[q]);if(0<this._patternLength){q=this._ctrlPtBegin?this._partCtrlPtGap:this._partExtPtGap;const l=this._ctrlPtEnd?this._partCtrlPtGap:this._partExtPtGap;let t=Math.round((this._partLength-
(q+l))/this._patternLength);0>=t&&(t=0<q+l?0:1);this._partLengthRatio=this._partLength/(q+l+t*this._patternLength);.01>this._partLengthRatio&&(this._partLengthRatio=1)}else this._partLengthRatio=1;return!0};f.hasNextSegment=function(){return this._seg<this._path.length-2};f.previousSegment=function(){return--this._seg};f.nextSegment=function(){return++this._seg};f.getStartPointIndex=function(){return this._seg};f.getEndPointIndex=function(){return this._seg+1};return p}(x.CurveHelper);n.DashPattern=
r;n.GeometryWalker=m;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectDonut":function(){define(["exports","../../../geometry/support/jsonUtils","../CurveHelper"],function(n,c,z){let x=function(){function u(){}u.local=function(){null===u.instance&&(u.instance=new u);return u.instance};u.prototype.execute=function(m,v,p){return new r(m,v,p)};return u}();x.instance=null;let r=function(){function u(m,v,p){this._inputGeometries=m;this._curveHelper=new z.CurveHelper;this._width=
(void 0!==v.width?v.width:2)*p;switch(v.method){default:this._method="Mitered";break;case "Bevelled":this._method="Bevelled";break;case "Rounded":case "TrueBuffer":this._method="Rounded";break;case "Square":this._method="Square"}this._option=v.option;this._offsetFlattenError=z.PIXEL_TOLERANCE*p}u.prototype.next=function(){for(var m=this._inputGeometries.next();m;){if(c.isExtent(m)&&0<this._width){if(0>Math.min(m.xmax-m.xmin,m.ymax-m.ymin)-2*this._width)return m;var v=[];v.push([[m.xmin,m.ymin],[m.xmin,
m.ymax],[m.xmax,m.ymax],[m.xmax,m.ymin],[m.xmin,m.ymin]]);v.push([[m.xmin+this._width,m.ymin+this._width],[m.xmax-this._width,m.ymin+this._width],[m.xmax-this._width,m.ymax-this._width],[m.xmin+this._width,m.ymax-this._width],[m.xmin+this._width,m.ymin+this._width]]);return{rings:v}}if(c.isPolygon(m)&&0<this._width){v=[];for(const p of m.rings){m=this._curveHelper.calculatePathLength(p);const f=this._curveHelper.offset(p,this._width,this._method,4,this._offsetFlattenError);f&&(0>m&&f.reverse(),v.push(f))}if(v.length)return{rings:v}}m=
this._inputGeometries.next()}return null};return u}();n.EffectDonut=x;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectJog":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper"],function(n,c,z,x){let r=function(){function m(){}m.local=function(){null===m.instance&&(m.instance=new m);return m.instance};m.prototype.execute=function(v,p,f){return new u(v,p,f)};return m}();r.instance=null;let u=function(m){function v(p,
f,q){p=m.call(this,p,!1,!0)||this;p._curveHelper=new x.CurveHelper;p._length=(void 0!==f.length?f.length:20)*q;p._angle=void 0!==f.angle?f.angle:225;p._position=void 0!==f.position?f.position:50;0>p._length&&(p._length=-p._length);20>p._position&&(p._position=20);80<p._position&&(p._position=80);p._mirror=!1;return p}c._inheritsLoose(v,m);v.prototype.processPath=function(p){if(this._curveHelper.isEmpty(p,!1))return null;const f=p[0];p=p[p.length-1];this._curveHelper.normalize([p[0]-f[0],p[1]-f[1]]);
const q=[f[0]+(p[0]-f[0])*this._position/100,f[1]+(p[1]-f[1])*this._position/100],l=Math.cos((90-this._angle)/180*Math.PI);let t=Math.sin((90-this._angle)/180*Math.PI);this._mirror&&(t=-t);this._mirror=!this._mirror;return{paths:[[f,[q[0]-this._length/2*l,q[1]-this._length/2*t],[q[0]+this._length/2*l,q[1]+this._length/2*t],p]]}};return v}(z.PathGeometryCursor);n.EffectJog=r;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectMove":function(){define(["exports","../../../core/lang",
"../../../geometry/support/jsonUtils"],function(n,c,z){let x=function(){function u(){}u.local=function(){null===u.instance&&(u.instance=new u);return u.instance};u.prototype.execute=function(m,v,p){return new r(m,v,p)};return u}();x.instance=null;let r=function(){function u(v,p,f){this._inputGeometries=v;this._offsetX=void 0!==p.offsetX?p.offsetX*f:0;this._offsetY=void 0!==p.offsetY?-p.offsetY*f:0}var m=u.prototype;m.next=function(){for(var v=this._inputGeometries.next();v;){if(z.isExtent(v))return{xmin:v.xmin+
this._offsetX,xmax:v.xmax+this._offsetX,ymin:v.ymin+this._offsetY,ymax:v.ymax+this._offsetY};if(z.isPolygon(v))return v=c.clone(v),this._moveMultipath(v.rings,this._offsetX,this._offsetY),v;if(z.isPolyline(v))return v=c.clone(v),this._moveMultipath(v.paths,this._offsetX,this._offsetY),v;if(z.isMultipoint(v))return v=c.clone(v),this._movePath(v.points,this._offsetX,this._offsetY),v;if(z.isPoint(v))return{x:v.x+this._offsetX,y:v.y+this._offsetY};v=this._inputGeometries.next()}return null};m._moveMultipath=
function(v,p,f){if(v)for(const q of v)this._movePath(q,p,f)};m._movePath=function(v,p,f){if(v)for(const q of v)q[0]+=p,q[1]+=f};return u}();n.EffectMove=x;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectOffset":function(){define(["exports","../../../geometry/support/jsonUtils","../CurveHelper"],function(n,c,z){let x=function(){function u(){}u.local=function(){null===u.instance&&(u.instance=new u);return u.instance};u.prototype.execute=function(m,v,p){return new r(m,
v,p)};return u}();x.instance=null;let r=function(){function u(m,v,p){this._inputGeometries=m;this._curveHelper=new z.CurveHelper;this._offset=(void 0!==v.offset?v.offset:1)*p;this._method=v.method;this._option=v.option;this._offsetFlattenError=z.PIXEL_TOLERANCE*p}u.prototype.next=function(){for(var m=this._inputGeometries.next();m;){if(0===this._offset)return m;if(c.isExtent(m)){if("Rounded"===this._method&&0<this._offset){var v=this._curveHelper.offset([[m.xmin,m.ymin],[m.xmin,m.ymax],[m.xmax,m.ymax],
[m.xmax,m.ymin],[m.xmin,m.ymin]],this._offset,this._method,4,this._offsetFlattenError);return v?{rings:[v]}:null}if(0<Math.min(m.xmax-m.xmin,m.ymax-m.ymin)+2*this._offset)return{xmin:m.xmin-this._offset,xmax:m.xmax+this._offset,ymin:m.ymin-this._offset,ymax:m.ymax+this._offset}}if(c.isPolygon(m)){var p=[];for(v of m.rings){const f=this._curveHelper.offset(v,this._offset,this._method,4,this._offsetFlattenError);f&&p.push(f)}if(p.length)return{rings:p}}if(c.isPolyline(m)){p=[];for(const f of m.paths)(m=
this._curveHelper.offset(f,this._offset,this._method,4,this._offsetFlattenError))&&p.push(m);if(p.length)return{paths:p}}m=this._inputGeometries.next()}return null};return u}();n.EffectOffset=x;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectReverse":function(){define(["exports","../../../core/lang","../../../geometry/support/jsonUtils","../CIMCursor"],function(n,c,z,x){let r=function(){function m(){}m.local=function(){null===m.instance&&(m.instance=new m);return m.instance};
m.prototype.execute=function(v,p,f){return new u(v,p,f)};return m}();r.instance=null;let u=function(){function m(v,p,f){this._inputGeometries=v;this._reverse=void 0!==p.reverse?p.reverse:!0}m.prototype.next=function(){for(var v=this._inputGeometries.next();v;){if(!this._reverse)return v;if(z.isPolyline(v))return v=c.clone(v),x.reverseMultipath(v.paths),v;v=this._inputGeometries.next()}return null};return m}();n.EffectReverse=r;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectRotate":function(){define(["exports",
"../../../core/lang","../../../geometry/support/aaBoundingRect","../../../geometry/support/boundsUtils","../../../geometry/support/jsonUtils"],function(n,c,z,x,r){let u=function(){function v(){}v.local=function(){null===v.instance&&(v.instance=new v);return v.instance};v.prototype.execute=function(p,f,q){return new m(p,f,q)};return v}();u.instance=null;let m=function(){function v(f,q,l){this._inputGeometries=f;this._rotateAngle=void 0!==q.angle?-q.angle*Math.PI/180:0}var p=v.prototype;p.next=function(){for(var f=
this._inputGeometries.next();f;){if(0===this._rotateAngle)return f;var q=z.create();x.getBoundsXY(q,f);const l=(q[2]+q[0])/2;q=(q[3]+q[1])/2;if(r.isExtent(f))return f={rings:[[[f.xmin,f.ymin],[f.xmin,f.ymax],[f.xmax,f.ymax],[f.xmax,f.ymin],[f.xmin,f.ymin]]]},this._rotateMultipath(f.rings,l,q),f;if(r.isPolygon(f))return f=c.clone(f),this._rotateMultipath(f.rings,l,q),f;if(r.isPolyline(f))return f=c.clone(f),this._rotateMultipath(f.paths,l,q),f;if(r.isMultipoint(f))return f=c.clone(f),this._rotatePath(f.points,
l,q),f;if(r.isPoint(f))return f;f=this._inputGeometries.next()}return null};p._rotateMultipath=function(f,q,l){if(f)for(const t of f)this._rotatePath(t,q,l)};p._rotatePath=function(f,q,l){if(f){const t=Math.cos(this._rotateAngle),g=Math.sin(this._rotateAngle);for(const a of f){f=a[0]-q;const b=a[1]-l;a[0]=q+f*t-b*g;a[1]=l+f*g+b*t}}};return v}();n.EffectRotate=u;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectScale":function(){define(["exports","../../../core/lang",
"../../../geometry/support/aaBoundingRect","../../../geometry/support/boundsUtils","../../../geometry/support/jsonUtils"],function(n,c,z,x,r){let u=function(){function v(){}v.local=function(){null===v.instance&&(v.instance=new v);return v.instance};v.prototype.execute=function(p,f,q){return new m(p,f,q)};return v}();u.instance=null;let m=function(){function v(f,q,l){this._inputGeometries=f;this._xFactor=void 0!==q.xScaleFactor?q.xScaleFactor:1.15;this._yFactor=void 0!==q.yScaleFactor?q.yScaleFactor:
1.15}var p=v.prototype;p.next=function(){for(var f=this._inputGeometries.next();f;){if(1===this._xFactor&&1===this._yFactor)return f;var q=z.create();x.getBoundsXY(q,f);const l=(q[2]+q[0])/2;q=(q[3]+q[1])/2;if(r.isExtent(f))return f={rings:[[[f.xmin,f.ymin],[f.xmin,f.ymax],[f.xmax,f.ymax],[f.xmax,f.ymin],[f.xmin,f.ymin]]]},this._scaleMultipath(f.rings,l,q),f;if(r.isPolygon(f))return f=c.clone(f),this._scaleMultipath(f.rings,l,q),f;if(r.isPolyline(f))return f=c.clone(f),this._scaleMultipath(f.paths,
l,q),f;if(r.isMultipoint(f))return f=c.clone(f),this._scalePath(f.points,l,q),f;if(r.isPoint(f))return f;f=this._inputGeometries.next()}return null};p._scaleMultipath=function(f,q,l){if(f)for(const t of f)this._scalePath(t,q,l)};p._scalePath=function(f,q,l){if(f)for(const t of f)f=(t[1]-l)*this._yFactor,t[0]=q+(t[0]-q)*this._xFactor,t[1]=l+f};return v}();n.EffectScale=u;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectWave":function(){define(["exports","../../../geometry/support/jsonUtils",
"../CurveHelper","../GeometryWalker"],function(n,c,z,x){let r=function(){function m(){}m.local=function(){null===m.instance&&(m.instance=new m);return m.instance};m.prototype.execute=function(v,p,f){return new u(v,p,f)};return m}();r.instance=null;let u=function(){function m(p,f,q){this._inputGeometries=p;this._height=(void 0!==f.amplitude?f.amplitude:2)*q;this._period=(void 0!==f.period?f.period:3)*q;this._style=f.waveform;0>=this._height&&(this._height=Math.abs(this._height));0>=this._period&&(this._period=
Math.abs(this._period));this._pattern=new x.DashPattern;this._pattern.addValue(this._period);this._pattern.addValue(this._period);this._walker=new x.GeometryWalker;this._walker.updateTolerance(q)}var v=m.prototype;v.next=function(){for(var p=this._inputGeometries.next();p;){if(0===this._height||0===this._period)return p;if(c.isPolyline(p)){const f=this._processGeom(p.paths);if(f.length)return{paths:f}}if(c.isPolygon(p)&&(p=this._processGeom(p.rings),p.length))return{rings:p};p=this._inputGeometries.next()}return null};
v._processGeom=function(p){const f=[];for(const q of p)if(this._walker.init(q,this._pattern))switch(this._style){default:f.push(this._constructCurve(q,!1));break;case "Square":f.push(this._constructSquare(q));break;case "Triangle":f.push(this._constructTriangle(q));break;case "Random":f.push(this._constructCurve(q,!0))}else f.push(q);return f};v._constructCurve=function(p,f){const q=new z.PathHelper;var l=this._walker.calculatePathLength(p),t=Math.round(l/this._period);0===t&&(t=1);const g=this._period/
16,a=1/(16*t+1);l=2*Math.PI*l/(l/t);t=2*Math.PI*Math.random();const b=2*Math.PI*Math.random(),d=2*Math.PI*Math.random(),h=.75-Math.random()/2,k=.75-Math.random()/2,e={};this._walker.curPointAndAngle(e);q.startPath(e.pt);let w=0;for(;;)if(this._walker.nextPointAndAngle(g,e)){const y=w;w+=a;let C;if(f){const B=this._height/2*(1+.3*Math.sin(h*l*y+t));C=B*Math.sin(l*y+b);C+=B*Math.sin(k*l*y+d);C/=2}else C=.5*this._height*Math.sin(.5*l*y);q.lineTo([e.pt[0]-C*e.sa,e.pt[1]+C*e.ca])}else{q.lineTo(p[p.length-
1]);break}return q.path()};v._constructSquare=function(p){const f=new z.PathHelper;p=this._walker.calculatePathLength(p);Math.round(p/this._period);for(p=!0;;){let q=!1;if(this._walker.curPositionIsValid()){const l={};this._walker.curPointAndAngle(l);const t={};if(this._walker.nextPointAndAngle(this._period,t)){const g={};this._walker.nextPointAndAngle(this._period,g)&&(p?(f.startPath(l.pt),p=!1):f.lineTo(l.pt),f.lineTo([l.pt[0]-this._height/2*l.sa,l.pt[1]+this._height/2*l.ca]),f.lineTo([t.pt[0]-
this._height/2*t.sa,t.pt[1]+this._height/2*t.ca]),f.lineTo([t.pt[0]+this._height/2*t.sa,t.pt[1]-this._height/2*t.ca]),f.lineTo([g.pt[0]+this._height/2*g.sa,g.pt[1]-this._height/2*g.ca]),q=!0)}}if(!q){f.lineTo(this._walker.getPathEnd());break}}return f.path()};v._constructTriangle=function(p){const f=new z.PathHelper;p=this._walker.calculatePathLength(p);Math.round(p/this._period);for(p=!0;;){let q=!1;if(this._walker.curPositionIsValid()){const l={};this._walker.curPointAndAngle(l);const t={};if(this._walker.nextPointAndAngle(this._period/
2,t)){const g={};this._walker.nextPointAndAngle(this._period,g)&&(this._walker.nextPosition(this._period/2)&&(p?(f.startPath(l.pt),p=!1):f.lineTo(l.pt),f.lineTo([t.pt[0]-this._height/2*t.sa,t.pt[1]+this._height/2*t.ca]),f.lineTo([g.pt[0]+this._height/2*g.sa,g.pt[1]-this._height/2*g.ca])),q=!0)}}if(!q){f.lineTo(this._walker.getPathEnd());break}}return f.path()};return m}();n.EffectWave=r;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/placements/PlacementAlongLineSameSize":function(){define(["exports",
"../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../enums","../GeometryWalker"],function(n,c,z,x,r){let u=function(){function v(){}v.local=function(){null===v.instance&&(v.instance=new v);return v.instance};v.prototype.execute=function(p,f,q){return new m(p,f,q)};return v}();u.instance=null;let m=function(v){function p(q,l,t){q=v.call(this,q,!0,!0)||this;q._grometryWalker=new r.GeometryWalker;q._grometryWalker.updateTolerance(t);q._angleToLine=void 0!==l.angleToLine?l.angleToLine:!0;q._offset=
void 0!==l.offset?l.offset*t:0;q._originalEndings=l.endings;q._offsetAtEnd=void 0!==l.customEndingOffset?l.customEndingOffset*t:0;q._position=void 0!==l.offsetAlongLine?l.offsetAlongLine*t:0;q._pattern=new r.DashPattern;q._pattern.init(l.placementTemplate,!1);q._pattern.scale(t);q._endings=q._originalEndings;return q}c._inheritsLoose(p,v);var f=p.prototype;f.processPath=function(q){if(this._pattern.isEmpty())return null;if(this.iteratePath)var l=this._pattern.nextValue();else{this._endings=this._originalEndings===
x.PlacementEndings.WithFullGap&&this.isClosed?x.PlacementEndings.WithMarkers:this._originalEndings;this._pattern.extPtGap=0;let t=!0;switch(this._endings){case x.PlacementEndings.NoConstraint:l=-this._position;l=this._adjustPosition(l);t=!1;break;default:l=-this._pattern.lastValue()/2;break;case x.PlacementEndings.WithFullGap:l=-this._pattern.lastValue();this._pattern.extPtGap=this._pattern.lastValue();break;case x.PlacementEndings.WithMarkers:l=0;break;case x.PlacementEndings.Custom:l=-this._position,
l=this._adjustPosition(l),this._pattern.extPtGap=.5*this._offsetAtEnd}if(!this._grometryWalker.init(q,this._pattern,t))return null;this._pattern.reset();for(q=0;l>q;)l-=q,q=this._pattern.nextValue();l=q-=l;this.iteratePath=!0}q={};if(!this._grometryWalker.nextPointAndAngle(l,q)||this._endings===x.PlacementEndings.WithFullGap&&this._grometryWalker.isPathEnd())return this.iteratePath=!1,null;if(this._endings===x.PlacementEndings.WithMarkers&&this._grometryWalker.isPathEnd()&&(this.iteratePath=!1,this.isClosed))return null;
this.internalPlacement.setTranslate(q.pt[0]+this._offset*q.sa,q.pt[1]-this._offset*q.ca);this._angleToLine&&this.internalPlacement.setRotateCS(q.ca,q.sa);return this.internalPlacement};f._adjustPosition=function(q){q/=this._pattern.length();q-=Math.floor(q);return q*this._pattern.length()};return p}(z.PathTransformationCursor);n.PlacementAlongLineSameSize=u;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/enums":function(){define(["exports"],function(n){n.PlacementEndings=void 0;
var c=n.PlacementEndings||(n.PlacementEndings={});c.NoConstraint="NoConstraint";c.WithMarkers="WithMarkers";c.WithFullGap="WithFullGap";c.WithHalfGap="WithHalfGap";c.Custom="Custom";Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/placements/PlacementAtExtremities":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper"],function(n,c,z,x){let r=function(){function m(){}m.local=function(){null===m.instance&&(m.instance=new m);return m.instance};
m.prototype.execute=function(v,p,f){return new u(v,p,f)};return m}();r.instance=null;let u=function(m){function v(f,q,l){f=m.call(this,f,!1,!0)||this;f._curveHelper=new x.CurveHelper;f._angleToLine=void 0!==q.angleToLine?q.angleToLine:!0;f._offset=void 0!==q.offset?q.offset*l:0;f._type=q.extremityPlacement;f._position=void 0!==q.offsetAlongLine?q.offsetAlongLine*l:0;f._beginProcessed=!1;return f}c._inheritsLoose(v,m);var p=v.prototype;p.processPath=function(f){let q;switch(this._type){default:this._beginProcessed?
(q=this._atExtremities(f,this._position,!1),this.iteratePath=this._beginProcessed=!1):(q=this._atExtremities(f,this._position,!0),this.iteratePath=this._beginProcessed=!0);break;case "JustBegin":q=this._atExtremities(f,this._position,!0);break;case "JustEnd":q=this._atExtremities(f,this._position,!1);case "None":}return q};p._atExtremities=function(f,q,l){var t=f.length;if(2>t)return null;var g=l?1:t-2;const a=l?t:-1,b=l?1:-1;let d=0;l=l?f[0]:f[t-1];for(t=g;t!==a;t+=b){g=l;l=f[t];const h=this._curveHelper.calculateLength(g,
l);if(d+h>q){f=(q-d)/h;const [k,e]=this._curveHelper.getAngleCS(g,l,f);f=z.getCoord2D(g,l,f);this.internalPlacement.setTranslate(f[0]-this._offset*e,f[1]+this._offset*k);this._angleToLine&&this.internalPlacement.setRotateCS(-k,-e);return this.internalPlacement}d+=h}return null};return v}(z.PathTransformationCursor);n.PlacementAtExtremities=r;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/placements/PlacementAtRatioPositions":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers",
"../CIMCursor","../GeometryWalker"],function(n,c,z,x){let r=function(){function m(){}m.local=function(){null===m.instance&&(m.instance=new m);return m.instance};m.prototype.execute=function(v,p,f){return new u(v,p,f)};return m}();r.instance=null;let u=function(m){function v(p,f,q){p=m.call(this,p,!0,!0)||this;p._walker=new x.GeometryWalker;p._walker.updateTolerance(q);p._angleToLine=void 0!==f.angleToLine?f.angleToLine:!0;p._offset=void 0!==f.offset?f.offset*q:0;p._beginGap=void 0!==f.beginPosition?
f.beginPosition*q:0;p._endGap=void 0!==f.endPosition?f.endPosition*q:0;p._flipFirst=void 0!==f.flipFirst?f.flipFirst:!0;p._pattern=new x.DashPattern;p._pattern.init(f.positionArray,!1,!1);p._subPathLen=0;p._posCount=p._pattern.size();p._isFirst=!0;p._prevPos=0;return p}c._inheritsLoose(v,m);v.prototype.processPath=function(p){if(this._pattern.isEmpty())return null;if(this.iteratePath){p=this._pattern.nextValue()*this._subPathLen;var f=this._beginGap+p;p=f-this._prevPos;this._prevPos=f}else{this._posCount=
this._pattern.size();this._isFirst=!0;this._prevPos=0;this._subPathLen=this._walker.calculatePathLength(p)-this._beginGap-this._endGap;if(0>this._subPathLen)return this.iteratePath=!1,null;if(!this._walker.init(p,this._pattern,!1))return null;this._pattern.reset();p=this._pattern.nextValue()*this._subPathLen;f=this._beginGap+p;p=f-this._prevPos;this._prevPos=f;this.iteratePath=!0}f={};if(!this._walker.nextPointAndAngle(p,f,1))return this.iteratePath=!1,null;this.internalPlacement.setTranslate(f.pt[0]+
this._offset*f.sa,f.pt[1]-this._offset*f.ca);p=this._isFirst&&this._flipFirst;let q;this._angleToLine?(q=f.ca,f=f.sa):(q=1,f=0);p&&(q=-q,f=-f);this.internalPlacement.setRotateCS(q,f);this._isFirst=!1;this._posCount--;0===this._posCount&&(this.iteratePath=!1);return this.internalPlacement};return v}(z.PathTransformationCursor);n.PlacementAtRatioPositions=r;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/placements/PlacementInsidePolygon":function(){define(["exports","../CIMPlacements"],
function(n,c){let z=function(){function r(){}r.local=function(){null===r.instance&&(r.instance=new r);return r.instance};r.prototype.execute=function(u,m,v){return new x(u,m,v)};return r}();z.instance=null;let x=function(){function r(m,v,p){this._currentY=this._currentX=this._yMax=this._yMin=this._xMax=this._xMin=0;this._stepX=(void 0!==v.stepX?Math.abs(v.stepX):16)*p;this._stepY=(void 0!==v.stepY?Math.abs(v.stepY):16)*p;if(0!==this._stepX&&0!==this._stepY&&m&&void 0!==m.rings&&m.rings){this._gridType=
void 0!==v.gridType?v.gridType:"Fixed";if("Random"===this._gridType)this._randomness=void 0!==v.randomness?v.randomness/100:1,this._gridAngle=0,this._shiftOddRows=!1,this._cosAngle=1,this._offsetY=this._offsetX=this._sinAngle=0;else{this._randomness=0;this._gridAngle=void 0!==v.gridAngle?v.gridAngle:0;this._shiftOddRows=void 0!==v.shiftOddRows?v.shiftOddRows:!1;this._offsetX=void 0!==v.offsetX?v.offsetX*p:0;this._offsetY=void 0!==v.offsetY?v.offsetY*p:0;this._cosAngle=Math.cos(this._gridAngle/180*
Math.PI);this._sinAngle=-Math.sin(this._gridAngle/180*Math.PI);if(this._stepX)if(0>this._offsetX)for(;this._offsetX<-.5*this._stepX;)this._offsetX+=this._stepX;else for(;this._offsetX>=.5*this._stepX;)this._offsetX-=this._stepX;if(this._stepY)if(0>this._offsetY)for(;this._offsetY<-.5*this._stepY;)this._offsetY+=this._stepY;else for(;this._offsetY>=.5*this._stepY;)this._offsetY-=this._stepY}this._graphicOriginY=this._graphicOriginX=0;this._internalPlacement=new c.Placement;this._calculateMinMax(m);
this._geometry=m}}var u=r.prototype;u.next=function(){return this._geometry?this._nextInside():null};u._calculateMinMax=function(m){this._yMax=this._yMin=this._xMax=this._xMin=0;let v,p,f,q,l;p=f=Number.MAX_VALUE;q=l=-Number.MAX_VALUE;for(const g of m.rings){const a=g?g.length:0;for(let b=0;b<a;++b){var t=g[b][0]-this._graphicOriginX-this._offsetX;v=g[b][1]-this._graphicOriginY-this._offsetY;m=this._cosAngle*t-this._sinAngle*v;t=this._sinAngle*t+this._cosAngle*v;p=Math.min(p,m);q=Math.max(q,m);f=
Math.min(f,t);l=Math.max(l,t)}}p+=this._graphicOriginX;q+=this._graphicOriginX;f+=this._graphicOriginY;l+=this._graphicOriginY;this._xMin=Math.round(p/this._stepX);this._xMax=Math.round(q/this._stepX);this._yMin=Math.round(f/this._stepY);this._yMax=Math.round(l/this._stepY);this._currentX=this._xMax+1;this._currentY=this._yMin-1};u._nextInside=function(){for(;;){if(this._currentX>this._xMax){this._currentY++;if(this._currentY>this._yMax)return null;this._currentX=this._xMin;this._shiftOddRows&&this._currentY%
2&&this._currentX--}var m=this._currentX*this._stepX+this._offsetX;this._shiftOddRows&&this._currentY%2&&(m+=.5*this._stepX);const v=this._currentY*this._stepY+this._offsetY;this._currentX++;let p;"Random"===this._gridType?(p=this._graphicOriginX+m+this._stepX*this._randomness*(.5-Math.random())*2/3,m=this._graphicOriginY+v+this._stepY*this._randomness*(.5-Math.random())*2/3):(p=this._graphicOriginX+this._cosAngle*m+this._sinAngle*v,m=this._graphicOriginY-this._sinAngle*m+this._cosAngle*v);this._internalPlacement.setTranslate(p,
m);return this._internalPlacement}};return r}();n.PlacementInsidePolygon=z;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/placements/PlacementOnLine":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper"],function(n,c,z,x){let r=function(){function m(){}m.local=function(){null===m.instance&&(m.instance=new m);return m.instance};m.prototype.execute=function(v,p,f){return new u(v,p,f)};return m}();r.instance=null;let u=function(m){function v(f,
q,l){f=m.call(this,f,!0,!0)||this;f._curveHelper=new x.CurveHelper;f._angleToLine=void 0!==q.angleToLine?q.angleToLine:!0;f._offset=void 0!==q.offset?q.offset*l:0;f._relativeTo=q.relativeTo;f._position=void 0!==q.startPointOffset?q.startPointOffset*l:0;f._epsilon=.001*l;return f}c._inheritsLoose(v,m);var p=v.prototype;p.processPath=function(f){var q=this._position;if("SegmentMidpoint"===this._relativeTo){this.iteratePath||(this._segmentCount=f.length,this._curSegment=1,this.iteratePath=!0);for(;this._curSegment<
this._segmentCount;){var l=this._curSegment;this._curSegment++;q=f[l-1];l=f[l];const t=this._curveHelper.calculateLength(q,l);if(t<this._epsilon)continue;f=.5+this._position/t;const [g,a]=this._curveHelper.getAngleCS(q,l,f);f=z.getCoord2D(q,l,f);this.internalPlacement.setTranslate(f[0]-this._offset*a,f[1]+this._offset*g);this._angleToLine&&this.internalPlacement.setRotateCS(g,a);return this.internalPlacement}this.iteratePath=!1;return null}"LineEnd"===this._relativeTo&&z.reversePath(f);q=this.onLine(f,
q);"LineEnd"===this._relativeTo&&z.reversePath(f);return q};p.onLine=function(f,q){let l,t=!1;switch(this._relativeTo){default:l=this._curveHelper.calculatePathLength(f)/2+q;break;case "LineBeginning":l=q;break;case "LineEnd":l=q,t=!0}const g=f.length;let a=0,b=f[0];for(let d=1;d<g;++d){q=b;b=f[d];const h=this._curveHelper.calculateLength(q,b);if(a+h>l){f=(l-a)/h;const [k,e]=this._curveHelper.getAngleCS(q,b,f);f=z.getCoord2D(q,b,f);q=t?this._offset:-this._offset;this.internalPlacement.setTranslate(f[0]-
q*e,f[1]+q*k);this._angleToLine&&(t?this.internalPlacement.setRotateCS(-k,-e):this.internalPlacement.setRotateCS(k,e));return this.internalPlacement}a+=h}return null};return v}(z.PathTransformationCursor);n.PlacementOnLine=r;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/placements/PlacementOnVertices":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper"],function(n,c,z,x){function r(v,p){const f=Math.PI;for(;Math.abs(p-v)>
f+2E-15;)p=p-v>f?p-2*f:p+2*f;return(v+p)/2}let u=function(){function v(){}v.local=function(){null===v.instance&&(v.instance=new v);return v.instance};v.prototype.execute=function(p,f,q){return new m(p,f,q)};return v}();u.instance=null;let m=function(v){function p(q,l,t){q=v.call(this,q,!0,!0)||this;q._curveHelper=new x.CurveHelper;q._angleToLine=void 0!==l.angleToLine?l.angleToLine:!0;q._offset=void 0!==l.offset?l.offset*t:0;q._endPoints=void 0!==l.placeOnEndPoints?l.placeOnEndPoints:!0;q._controlPoints=
void 0!==l.placeOnControlPoints?l.placeOnControlPoints:!0;q._regularVertices=void 0!==l.placeOnRegularVertices?l.placeOnRegularVertices:!0;q._tags=[];q._tagIterator=0;return q}c._inheritsLoose(p,v);var f=p.prototype;f.processPath=function(q){this.iteratePath||(this._preparePath(q),this.iteratePath=!0);if(this._tagIterator>=this._tags.length)return this._tagIterator=this._tags.length=0,this.iteratePath=!1,null;q=this._tags[this._tagIterator];this._angleToLine&&this.internalPlacement.setRotate(q[2]);
let l=q[0],t=q[1];if(0!==this._offset){const g=Math.cos(q[2]);l-=this._offset*Math.sin(q[2]);t+=this._offset*g}this.internalPlacement.setTranslate(l,t);this._tagIterator++;return this.internalPlacement};f._preparePath=function(q){this._tagIterator=this._tags.length=0;const l=z.isClosedPath(q),t=q.length-1;let g=0,a=0,b=0,d=0,h=0,k,e;for(;g<t;){g++;k=q[g-1];e=q[g];const w=z.getId(k),y=z.getId(e);if(this._angleToLine||0!==this._offset)d=this._curveHelper.getAngle(k,e,0);1===g?l?(a=d,b=w):this._endPoints&&
this._tags.push([k[0],k[1],d]):1===w?this._controlPoints&&this._tags.push([k[0],k[1],r(h,d)]):this._regularVertices&&this._tags.push([k[0],k[1],r(h,d)]);if(this._angleToLine||0!==this._offset)h=this._curveHelper.getAngle(k,e,1);g===t&&(l?1===y||1===b?this._controlPoints&&this._tags.push([e[0],e[1],r(h,a)]):this._regularVertices&&this._tags.push([e[0],e[1],r(h,a)]):this._endPoints&&this._tags.push([e[0],e[1],h]))}this._tagIterator=0};return p}(z.PathTransformationCursor);n.PlacementOnVertices=u;Object.defineProperty(n,
"__esModule",{value:!0})})},"esri/symbols/cim/placements/PlacementPolygonCenter":function(){define(["exports","../../../geometry/support/aaBoundingRect","../../../geometry/support/boundsUtils","../CIMPlacements"],function(n,c,z,x){let r=function(){function m(){}m.local=function(){null===m.instance&&(m.instance=new m);return m.instance};m.prototype.execute=function(v,p,f){return new u(v,p,f)};return m}();r.instance=null;let u=function(){function m(p,f,q){this._geometry=p;this._offsetX=void 0!==f.offsetX?
f.offsetX*q:0;this._offsetY=void 0!==f.offsetY?f.offsetY*q:0;this._method=void 0!==f.method?f.method:"OnPolygon";this._internalPlacement=new x.Placement}var v=m.prototype;v.next=function(){const p=this._geometry;this._geometry=null;return p&&void 0!==p.rings?this._polygonCenter(p):null};v._polygonCenter=function(p){switch(this._method){default:case "CenterOfMass":case "BoundingBoxCenter":{const f=c.create();z.getBoundsXY(f,p);this._internalPlacement.setTranslate((f[2]+f[0])/2+this._offsetX,(f[3]+
f[1])/2-this._offsetY)}}return this._internalPlacement};return m}();n.PlacementPolygonCenter=r;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/shapingUtils":function(){define("exports ../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../chunks/mat2d ../../../../../../chunks/mat2df32 ../../../../../../chunks/vec2 ../../../../../../chunks/vec2f32 ../../alignmentUtils ../../number ../../Rect ../../collisions/BoundingBox".split(" "),function(n,
c,z,x,r,u,m,v,p,f){const q=Math.PI/180;let l=function(){function b(h,k,e,w){this._rotationT=x.create();this.minZoom=this._yBounds=this._xBounds=0;this.maxZoom=255;this._bounds=null;const y=e.rect,C=new Float32Array(8);h*=w;k*=w;const B=e.code?y.width*w:e.metrics.width,A=e.code?y.height*w:e.metrics.height;C[0]=h;C[1]=k;C[2]=h+B;C[3]=k;C[4]=h;C[5]=k+A;C[6]=h+B;C[7]=k+A;this._data=C;this._setTextureCoords(y);this._scale=w;this._mosaic=e;this.x=h;this.y=k;this.maxOffset=Math.max(h+B,k+A)}var d=b.prototype;
d.setTransform=function(h){this._T=h;this._offsets=null};d._setOffsets=function(h){this._offsets||(this._offsets={upperLeft:0,upperRight:0,lowerLeft:0,lowerRight:0});const k=this._offsets,e=new Float32Array(8),w=z.multiply(x.create(),this._rotationT,this._T);x.transformMany(e,h,w);k.upperLeft=v.i1616to32(8*e[0],8*e[1]);k.upperRight=v.i1616to32(8*e[2],8*e[3]);k.lowerLeft=v.i1616to32(8*e[4],8*e[5]);k.lowerRight=v.i1616to32(8*e[6],8*e[7])};d._setTextureCoords=function({x:h,y:k,width:e,height:w}){this._texcoords=
{upperLeft:v.i1616to32(h,k),upperRight:v.i1616to32(h+e,k),lowerLeft:v.i1616to32(h,k+w),lowerRight:v.i1616to32(h+e,k+w)}};c._createClass(b,[{key:"width",get:function(){return this._mosaic.metrics.width*this._scale}},{key:"mosaic",get:function(){return this._mosaic}},{key:"angle",get:function(){return this._angle},set:function(h){this._angle=h;z.identity(this._rotationT);z.rotate(this._rotationT,this._rotationT,-h);this._setOffsets(this._data)}},{key:"xTopLeft",get:function(){return this._data[0]}},
{key:"yTopLeft",get:function(){return this._data[1]}},{key:"xBottomRight",get:function(){return this._data[6]}},{key:"yBottomRight",get:function(){return this._data[7]}},{key:"texcoords",get:function(){return this._texcoords}},{key:"textureBinding",get:function(){return this._mosaic.textureBinding}},{key:"offsets",get:function(){this._offsets||this._setOffsets(this._data);return this._offsets}},{key:"char",get:function(){return String.fromCharCode(this._mosaic.code)}},{key:"code",get:function(){return this._mosaic.code}},
{key:"bounds",get:function(){if(!this._bounds){const {height:y,width:C}=this._mosaic.metrics;var h=C*this._scale,k=Math.abs(y)*this._scale,e=new Float32Array(8);e[0]=this.x;e[1]=this.y;e[2]=this.x+h;e[3]=this.y;e[4]=this.x;e[5]=this.y+k;e[6]=this.x+h;e[7]=this.y+k;h=z.multiply(x.create(),this._rotationT,this._T);x.transformMany(e,e,h);k=h=Infinity;let B=0;var w=0;for(let A=0;4>A;A++){const D=e[2*A],E=e[2*A+1];h=Math.min(h,D);k=Math.min(k,E);B=Math.max(B,D);w=Math.max(w,E)}e=B-h;w-=k;this._bounds=
new f(h+e/2,k+w/2,e,w)}return this._bounds}}]);return b}();const t=(b,d)=>({code:0,page:0,sdf:!0,rect:new p(0,0,11,8),textureBinding:d,metrics:{advance:0,height:4,width:b,left:0,top:0}});let g=function(){function b(h,k,e){this._rotation=0;this._decorate(h,k,e);this.glyphs=h;this.bounds=this._createBounds(h);this.isMultiline=1<k.length;this._hasRotation=0!==e.angle;this._T=this._createGlyphTransform(this.bounds,e);for(const w of h)w.setTransform(this._T)}var d=b.prototype;d.setRotation=function(h){if(0!==
h||0!==this._rotation){this._rotation=h;var k=this._T;h=z.fromRotation(x.create(),h);z.multiply(k,h,k);for(const e of this.glyphs)e.setTransform(this._T)}};d._decorate=function(h,k,e){if(e.decoration&&"none"!==e.decoration&&h.length){var w=e.scale;e="underline"===e.decoration?30:20;var y=h[0].textureBinding;for(const C of k)h.push(new l(C.startX*w,C.startY*w+e*w,t((C.width+C.glyphWidthEnd)*w,y),1))}};d._createBounds=function(h){let k=Infinity,e=Infinity,w=0;var y=0;for(const C of h)k=Math.min(k,C.xTopLeft),
e=Math.min(e,C.yTopLeft),w=Math.max(w,C.xTopLeft+C.width),y=Math.max(y,C.yBottomRight);h=w-k;y-=e;return new f(k+h/2,e+y/2,h,y)};d._createGlyphTransform=function(h,k){const e=q*k.angle,w=x.create(),y=u.create();z.translate(w,w,r.set(y,k.xOffset,-k.yOffset));k.isCIM?z.rotate(w,w,e):(z.translate(w,w,r.set(y,h.x,h.y)),z.rotate(w,w,e),z.translate(w,w,r.set(y,-h.x,-h.y)));return w};c._createClass(b,[{key:"boundsT",get:function(){var h=this.bounds;const k=r.set(u.create(),h.x,h.y);r.transformMat2d(k,k,
this._T);return this._hasRotation?(h=Math.max(h.width,h.height),new f(k[0],k[1],h,h)):new f(k[0],k[1],h.width,h.height)}}]);return b}(),a=function(b,d,h,k,e,w){this.startY=this.startX=this.glyphWidthEnd=0;this.start=Math.max(0,Math.min(d,h));this.end=Math.max(0,Math.max(d,h));this.end<b.length&&(this.glyphWidthEnd=b[this.end].metrics.width);this.width=k;this.yMin=e;this.yMax=w};n.ShapedGlyph=l;n.ShapingInfo=g;n.shapeGlyphs=function(b,d,h){const k=h.scale,e=[];{var w=[];var y=1/h.scale*h.maxLineWidth;
var C=d?b.length-1:0;var B=d?-1:b.length;d=d?-1:1;var A=C,D=0,E=0;let J=A,F=J,K=0,M=Infinity,R=0;for(;A!==B;){const {code:T,metrics:Q}=b[A];var G=Math.abs(Q.top);10!==T&&32!==T&&(M=Math.min(M,G),R=Math.max(R,G+Q.height));10===T?(A!==C&&(w.push(new a(b,J,A-d,D,M,R)),M=Infinity,R=0),D=0,J=A+d,F=A+d,E=0):32===T?(F=A+d,E=0,K=Q.advance,D+=Q.advance):(D>y&&(F!==J?(G=F-2*d,D-=K,w.push(new a(b,J,G,D-E,M,R)),M=Infinity,R=0,J=F,D=E):(w.push(new a(b,J,A-d,D,M,R)),M=Infinity,R=0,F=J=A,D=0)),D+=Q.advance,E+=Q.advance);
A+=d}y=new a(b,J,A-d,D,M,R);0<=y.start&&y.end<b.length&&w.push(y)}for(y=0;y<w.length;y++);y=C=w[0].yMin;C=w[w.length-1].yMax+h.lineHeight*(w.length-1)+("underline"===h.decoration?4:0)-C;const {vAlign:I,hAlign:L}=h;B=I===m.VAlign.Baseline?1:0;y=(1-B)*-y+C/2*(B?0:I-1)+-26*(B?1:0);for(C=0;C<w.length;C++){const {start:J,end:F,width:K}=w[C];B=K/2*(L+1)*-1-3;d=C*h.lineHeight+y-3;w[C].startX=B;w[C].startY=d;for(A=J;A<=F;A++)D=b[A],10!==D.code&&(E=new l(B+D.metrics.left,d-D.metrics.top,D,k),B+=D.metrics.advance,
e.push(E))}return new g(e,w,h)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/chunks/mat2d":function(){define(["exports","./common"],function(n,c){function z(B,A){B[0]=A[0];B[1]=A[1];B[2]=A[2];B[3]=A[3];B[4]=A[4];B[5]=A[5];return B}function x(B){B[0]=1;B[1]=0;B[2]=0;B[3]=1;B[4]=0;B[5]=0;return B}function r(B,A,D,E,G,I,L){B[0]=A;B[1]=D;B[2]=E;B[3]=G;B[4]=I;B[5]=L;return B}function u(B,A){const D=A[0],E=A[1],G=A[2],I=A[3],L=A[4];A=A[5];let J=D*I-E*G;if(!J)return null;J=1/J;B[0]=I*J;B[1]=
-E*J;B[2]=-G*J;B[3]=D*J;B[4]=(G*A-I*L)*J;B[5]=(E*L-D*A)*J;return B}function m(B){return B[0]*B[3]-B[1]*B[2]}function v(B,A,D){const E=A[0],G=A[1],I=A[2],L=A[3],J=A[4];A=A[5];const F=D[0],K=D[1],M=D[2],R=D[3],T=D[4];D=D[5];B[0]=E*F+I*K;B[1]=G*F+L*K;B[2]=E*M+I*R;B[3]=G*M+L*R;B[4]=E*T+I*D+J;B[5]=G*T+L*D+A;return B}function p(B,A,D){const E=A[0],G=A[1],I=A[2],L=A[3],J=A[4];A=A[5];const F=Math.sin(D);D=Math.cos(D);B[0]=E*D+I*F;B[1]=G*D+L*F;B[2]=E*-F+I*D;B[3]=G*-F+L*D;B[4]=J;B[5]=A;return B}function f(B,
A,D){const E=A[1],G=A[2],I=A[3],L=A[4],J=A[5],F=D[0];D=D[1];B[0]=A[0]*F;B[1]=E*F;B[2]=G*D;B[3]=I*D;B[4]=L;B[5]=J;return B}function q(B,A,D){const E=A[0],G=A[1],I=A[2],L=A[3],J=A[4];A=A[5];const F=D[0];D=D[1];B[0]=E;B[1]=G;B[2]=I;B[3]=L;B[4]=E*F+I*D+J;B[5]=G*F+L*D+A;return B}function l(B,A){const D=Math.sin(A);A=Math.cos(A);B[0]=A;B[1]=D;B[2]=-D;B[3]=A;B[4]=0;B[5]=0;return B}function t(B,A){B[0]=A[0];B[1]=0;B[2]=0;B[3]=A[1];B[4]=0;B[5]=0;return B}function g(B,A){B[0]=1;B[1]=0;B[2]=0;B[3]=1;B[4]=A[0];
B[5]=A[1];return B}function a(B){return"mat2d("+B[0]+", "+B[1]+", "+B[2]+", "+B[3]+", "+B[4]+", "+B[5]+")"}function b(B){return Math.sqrt(B[0]**2+B[1]**2+B[2]**2+B[3]**2+B[4]**2+B[5]**2+1)}function d(B,A,D){B[0]=A[0]+D[0];B[1]=A[1]+D[1];B[2]=A[2]+D[2];B[3]=A[3]+D[3];B[4]=A[4]+D[4];B[5]=A[5]+D[5];return B}function h(B,A,D){B[0]=A[0]-D[0];B[1]=A[1]-D[1];B[2]=A[2]-D[2];B[3]=A[3]-D[3];B[4]=A[4]-D[4];B[5]=A[5]-D[5];return B}function k(B,A,D){B[0]=A[0]*D;B[1]=A[1]*D;B[2]=A[2]*D;B[3]=A[3]*D;B[4]=A[4]*D;
B[5]=A[5]*D;return B}function e(B,A,D,E){B[0]=A[0]+D[0]*E;B[1]=A[1]+D[1]*E;B[2]=A[2]+D[2]*E;B[3]=A[3]+D[3]*E;B[4]=A[4]+D[4]*E;B[5]=A[5]+D[5]*E;return B}function w(B,A){return B[0]===A[0]&&B[1]===A[1]&&B[2]===A[2]&&B[3]===A[3]&&B[4]===A[4]&&B[5]===A[5]}function y(B,A){const D=B[0],E=B[1],G=B[2],I=B[3],L=B[4];B=B[5];const J=A[0],F=A[1],K=A[2],M=A[3],R=A[4];A=A[5];return Math.abs(D-J)<=c.EPSILON*Math.max(1,Math.abs(D),Math.abs(J))&&Math.abs(E-F)<=c.EPSILON*Math.max(1,Math.abs(E),Math.abs(F))&&Math.abs(G-
K)<=c.EPSILON*Math.max(1,Math.abs(G),Math.abs(K))&&Math.abs(I-M)<=c.EPSILON*Math.max(1,Math.abs(I),Math.abs(M))&&Math.abs(L-R)<=c.EPSILON*Math.max(1,Math.abs(L),Math.abs(R))&&Math.abs(B-A)<=c.EPSILON*Math.max(1,Math.abs(B),Math.abs(A))}var C=Object.freeze({__proto__:null,copy:z,identity:x,set:r,invert:u,determinant:m,multiply:v,rotate:p,scale:f,translate:q,fromRotation:l,fromScaling:t,fromTranslation:g,str:a,frob:b,add:d,subtract:h,multiplyScalar:k,multiplyScalarAndAdd:e,exactEquals:w,equals:y,mul:v,
sub:h});n.add=d;n.copy=z;n.determinant=m;n.equals=y;n.exactEquals=w;n.frob=b;n.fromRotation=l;n.fromScaling=t;n.fromTranslation=g;n.identity=x;n.invert=u;n.mat2d=C;n.mul=v;n.multiply=v;n.multiplyScalar=k;n.multiplyScalarAndAdd=e;n.rotate=p;n.scale=f;n.set=r;n.str=a;n.sub=h;n.subtract=h;n.translate=q})},"esri/chunks/mat2df32":function(){define(["exports"],function(n){function c(){const p=new Float32Array(6);p[0]=1;p[3]=1;return p}function z(p){const f=new Float32Array(6);f[0]=p[0];f[1]=p[1];f[2]=p[2];
f[3]=p[3];f[4]=p[4];f[5]=p[5];return f}function x(p,f,q,l,t,g){const a=new Float32Array(6);a[0]=p;a[1]=f;a[2]=q;a[3]=l;a[4]=t;a[5]=g;return a}function r(p,f){return new Float32Array(p,f,6)}function u(p,f,q,l){const t=f[l];f=f[l+1];p[l]=q[0]*t+q[2]*f+q[4];p[l+1]=q[1]*t+q[3]*f+q[5]}function m(p,f,q,l=0,t=0,g=2){for(t=t||f.length/g;l<t;l++)u(p,f,q,l*g)}var v=Object.freeze({__proto__:null,create:c,clone:z,fromValues:x,createView:r,transform:u,transformMany:m});n.clone=z;n.create=c;n.createView=r;n.fromValues=
x;n.mat2df32=v;n.transform=u;n.transformMany=m})},"esri/chunks/vec2f32":function(){define(["exports"],function(n){function c(){return new Float32Array(2)}function z(a){const b=new Float32Array(2);b[0]=a[0];b[1]=a[1];return b}function x(a,b){const d=new Float32Array(2);d[0]=a;d[1]=b;return d}function r(a,b){return new Float32Array(a,b,2)}function u(){return c()}function m(){return x(1,1)}function v(){return x(1,0)}function p(){return x(0,1)}const f=c(),q=m(),l=v(),t=p();var g=Object.freeze({__proto__:null,
create:c,clone:z,fromValues:x,createView:r,zeros:u,ones:m,unitX:v,unitY:p,ZEROS:f,ONES:q,UNIT_X:l,UNIT_Y:t});n.ONES=q;n.UNIT_X=l;n.UNIT_Y=t;n.ZEROS=f;n.clone=z;n.create=c;n.createView=r;n.fromValues=x;n.ones=m;n.unitX=v;n.unitY=p;n.vec2f32=g;n.zeros=u})},"esri/views/2d/engine/webgl/collisions/BoundingBox":function(){define(["../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/mathUtils","../../../../../chunks/vec2f32"],function(n,c,z){return function(){function x(u,m,v,p){this.center=
z.fromValues(u,m);this.centerT=z.create();this.halfWidth=v/2;this.halfHeight=p/2;this.width=v;this.height=p}var r=x.prototype;r.clone=function(){return new x(this.x,this.y,this.width,this.height)};r.serialize=function(u){u.writeF32(this.center[0]);u.writeF32(this.center[1]);u.push(this.width);u.push(this.height);return u};r.findCollisionDelta=function(u,m=4){return c.log2(Math.min((u.halfWidth+this.halfWidth+m)/Math.abs(u.centerT[0]-this.centerT[0]),(u.halfHeight+this.halfHeight+m)/Math.abs(u.centerT[1]-
this.centerT[1])))};r.extend=function(u){const m=Math.min(this.xmin,u.xmin),v=Math.min(this.ymin,u.ymin),p=Math.max(this.xmax,u.xmax)-m;u=Math.max(this.ymax,u.ymax)-v;this.width=p;this.height=u;this.halfWidth=p/2;this.halfHeight=u/2;this.x=m+p/2;this.y=v+u/2};x.deserialize=function(u){const m=u.readF32(),v=u.readF32(),p=u.readInt32();u=u.readInt32();return new x(m,v,p,u)};n._createClass(x,[{key:"x",get:function(){return this.center[0]},set:function(u){this.center[0]=u}},{key:"y",get:function(){return this.center[1]},
set:function(u){this.center[1]=u}},{key:"blX",get:function(){return this.center[0]+this.halfWidth}},{key:"blY",get:function(){return this.center[1]+this.halfHeight}},{key:"trX",get:function(){return this.center[0]-this.halfWidth}},{key:"trY",get:function(){return this.center[1]-this.halfHeight}},{key:"xmin",get:function(){return this.x-this.halfWidth}},{key:"xmax",get:function(){return this.x+this.halfWidth}},{key:"ymin",get:function(){return this.y-this.halfHeight}},{key:"ymax",get:function(){return this.y+
this.halfHeight}}]);return x}()})},"esri/views/2d/engine/webgl/mesh/templates/WGLMeshTemplate":function(){define(["../../../../../../core/maybe","../../../../../../symbols/cim/effects/CIMEffectHelper"],function(n,c){return function(){function z(){}var x=z.prototype;x.bindFeature=function(r,u,m){};x.write=function(r,u,m){if(n.isNone(this._effects))return this._write(r,u);m=c.CIMEffectHelper.executeEffects(this._effects,u.readLegacyGeometryForDisplay());let v=c.CIMEffectHelper.next(m);for(;v;)this._write(r,
u,v),v=c.CIMEffectHelper.next(m)};x._write=function(r,u,m){};return z}()})},"esri/symbols/cim/effects/CIMEffectHelper":function(){define(["exports","../CIMCursor","../CIMEffects","../CIMOperators"],function(n,c,z,x){const r=96/72;let u=function(){function m(){}m.executeEffects=function(v,p){p=c.cloneAndDecodeGeometry(p);p=new z.SimpleGeometryCursor(p);for(const f of v)(v=x.getEffectOperator(f))&&(p=v.execute(p,f,r));return p};m.next=function(v){v=v.next();c.deltaEncodeGeometry(v);return v};return m}();
n.CIMEffectHelper=u;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/CIMEffects":function(){define(["exports","../../core/lang"],function(n,c){let z=function(){function x(r){this._geometry=r}x.prototype.next=function(){const r=this._geometry;this._geometry=null;return r};return x}();n.SimpleGeometryCursor=z;n.clone=function(x){return c.clone(x)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/util/BidiText":function(){define(["exports","../../../../../core/BidiEngine"],
function(n,c){const z=new c;n.bidiText=function(x){if(!z.hasBidiChar(x))return[x,!1];let r;r="rtl"===z.checkContextual(x)?"IDNNN":"ICNNN";return[z.bidiTransform(x,r,"VLYSN"),!0]};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/WGLMarkerTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../../../../../core/screenUtils ../../../../../../chunks/mat2df32 ../../../../../../chunks/vec2f32 ../../color ../../definitions ../../number ../../materialKey/MaterialKey ./util ./WGLBaseMarkerTemplate ./WGLMeshTemplate".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l){return function(t){function g(a,b,d,h,k,e,w,y,C,B,A,D,E,G,I,L,J,F,K,M,R,T,Q){var S=t.call(this)||this;S.angle=h;S.height=w;S.width=e;S.xOffset=b*K;S.yOffset=d*K;S._markerPlacement=M;S._effects=R;S._anchorX=.5-(.5+L)*I.width/I.width;S._anchorY=.5-(.5+J)*I.height/I.height;S._minMaxZoom=v.i1616to32(Math.round(T*m.MIN_MAX_ZOOM_PRECISION_FACTOR),Math.round(Q*m.MIN_MAX_ZOOM_PRECISION_FACTOR));b=(1===G?1:0)|(A?1:0)<<1|(E?1:0)<<2|(D?1:0)<<3;d=I&&I.sdf;a=p.MarkerMaterialKey.load(a);
a.sdf=d;a.pattern=!0;a.textureBinding=I.textureBinding;S._materialKey=a.data;S._fillColor=k;S._outlineColor=C;S._sizeOutlineWidth=v.i8888to32(Math.round(Math.min(Math.sqrt(128*e),255)),Math.round(Math.min(Math.sqrt(128*w),255)),Math.round(Math.min(Math.sqrt(128*B),255)),Math.round(Math.min(Math.sqrt(128*y),255)));k=I.rect.x+m.SPRITE_PADDING;y=I.rect.y+m.SPRITE_PADDING;C=k+I.width;I=y+I.height;S._offsets.xUpperLeft=k;S._offsets.yUpperLeft=y;S._offsets.xUpperRight=C;S._offsets.yUpperRight=y;S._offsets.xBottomLeft=
k;S._offsets.yBottomLeft=I;S._offsets.xBottomRight=C;S._offsets.yBottomRight=I;S._texUpperLeft=v.i1616to32(k,y);S._texUpperRight=v.i1616to32(C,y);S._texBottomLeft=v.i1616to32(k,I);S._texBottomRight=v.i1616to32(C,I);e=e*F*K;w=w*F*K;S._bitestAndDistRatio=v.i1616to32(b,Math.round(64*F));S._computedWidth=e;S._computedHeight=w;e=r.create();w=x.create();S._applyTransformation(w,e);return S}n._inheritsLoose(g,t);g.fromCIMMarker=function(a,b,d){const h=a.size,k=(b&&b.width||1)/(b&&b.height||1)*a.scaleX;var e=
a.scaleSymbolsProportionally&&a.frameHeight?h/a.frameHeight:1;const w=u.premultiplyAlphaRGBA(a.color),y=u.premultiplyAlphaRGBA(a.outlineColor),C=z.pt2px(h),B=C*k,A=z.pt2px(a.offsetX||0),D=z.pt2px(a.offsetY||0);e*=z.pt2px(a.outlineWidth||0);const E=a.alignment||0,G=z.pt2px(a.referenceSize),[I,L]=f.getMinMaxZoom(a.scaleInfo,d);d=a.rotation||0;a.rotateClockwise||(d=-d);let J=0,F=0;const K=a.anchorPoint;K&&(a.isAbsoluteAnchorPoint?h&&(J=-K.x/(h*k),F=K.y/h):(J=K.x,F=K.y));b=new g(a.materialKey,A,D,d,w,
B,C,G,y,e,a.colorLocked,a.scaleSymbolsProportionally,!1,E,b,J,F,a.sizeRatio,c.unwrapOr(a.scaleFactor,1),a.markerPlacement,a.effects,I,L);b._vertexBoundsScaleX=a.maxVVSize?a.maxVVSize/B:1;b._vertexBoundsScaleY=a.maxVVSize?a.maxVVSize/C:1;return b};g.fromPictureMarker=function(a,b){const d=Math.round(z.pt2px(a.width)),h=Math.round(z.pt2px(a.height)),k=m.PICTURE_FILL_COLOR,e=Math.round(z.pt2px(a.xoffset||0)),w=Math.round(z.pt2px(a.yoffset||0));b=new g(a.materialKey,e,w,a.angle,k,d,h,h,0,0,!1,!1,!1,0,
b,0,0,1,1,null,null,f.DEFAULT_MIN_ZOOM,f.DEFAULT_MAX_ZOOM);b._vertexBoundsScaleX=a.maxVVSize?a.maxVVSize/a.width:1;b._vertexBoundsScaleY=a.maxVVSize?a.maxVVSize/a.height:1;return b};g.fromSimpleMarker=function(a,b){const d=u.premultiplyAlphaRGBAArray(a.color),h=Math.round(z.pt2px(a.size)),k=Math.round(z.pt2px(a.xoffset||0)),e=Math.round(z.pt2px(a.yoffset||0)),w=a.style;var y=a.outline;const C=(y&&y.color&&u.premultiplyAlphaRGBAArray(y.color))|0;y=(y&&y.width&&Math.round(z.pt2px(y.width)))|0;b=new g(a.materialKey,
k,e,a.angle,d,h,h,h,C,y,!1,!1,"esriSMSCross"===w||"esriSMSX"===w,0,b,0,0,1.96875,1,null,null,f.DEFAULT_MIN_ZOOM,f.DEFAULT_MAX_ZOOM);b.boundsType="esriSMSCircle"===w?"circle":"square";b._vertexBoundsScaleX=a.maxVVSize?a.maxVVSize/a.size:1;b._vertexBoundsScaleY=a.maxVVSize?a.maxVVSize/a.size:1;return b};g.fromLineSymbolMarker=function(a,b){const d=u.premultiplyAlphaRGBAArray(a.color),h=Math.round(z.pt2px(6*a.lineWidth)),k="cross"===a.style||"x"===a.style;switch(a.placement){case "begin-end":var e="Both";
break;case "begin":e="JustBegin";break;case "end":e="JustEnd";break;default:e="None"}e={type:"CIMMarkerPlacementAtExtremities",angleToLine:!0,offset:0,extremityPlacement:e,offsetAlongLine:0};b=new g(a.materialKey,0,0,0,d,h,h,h/6,d,k?Math.round(z.pt2px(a.lineWidth)):0,!1,!1,k,1,b,0,0,1.96875,1,e,null,f.DEFAULT_MIN_ZOOM,f.DEFAULT_MAX_ZOOM);b.boundsType="circle"===a.style?"circle":"square";return b};return g}(q(l))})},"esri/views/2d/engine/webgl/mesh/templates/WGLBaseMarkerTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../../../../../core/screenUtils ../../../../../../chunks/mat2d ../../../../../../chunks/mat2df32 ../../../../../../chunks/vec2 ../../../../../../chunks/vec2f32 ../../../../../../layers/graphics/featureConversionUtils ../../../../../../symbols/cim/placements/CIMMarkerPlacementHelper ../../enums ../../number".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q){const l=3.14159265359/180;return t=>function(g){function a(...d){d=g.call(this,...d)||this;d.angle=0;d.xOffset=0;d.yOffset=0;d.width=0;d.height=0;d.boundsType="square";d._anchorX=0;d._anchorY=0;d._computedWidth=0;d._computedHeight=0;d._vertexBoundsScaleX=1;d._vertexBoundsScaleY=1;d._offsets={xUpperLeft:0,yUpperLeft:0,xUpperRight:0,yUpperRight:0,xBottomLeft:0,yBottomLeft:0,xBottomRight:0,yBottomRight:0};d.geometryType=f.WGLGeometryType.MARKER;return d}n._inheritsLoose(a,
g);var b=a.prototype;b._write=function(d,h,k){const e=h.getDisplayId();d.recordStart(e,this._materialKey,this.geometryType,!1,!0);this._writeGeometry(d,h,e,k);d.recordEnd()};b._writeGeometry=function(d,h,k,e){if(c.isSome(this._markerPlacement))return this._writePlacedMarkers(d,h,e);h=e?v.deltaDecodeGeometry(v.convertFromGeometry(e),2):"esriGeometryPolygon"===h.geometryType?h.readCentroid():h.readGeometryForDisplay();if(!c.isNone(h)){if(h.isPoint){const [w,y]=h.coords;return!d.hasAggregates&&d.hasPixelBufferEnabled&&
(-1>w||513<=w||-1>y||513<=y)?void 0:this._writeVertices(d,k,this._getPos(w,y),w,y)}h.forEachVertex((w,y)=>this._writeVertices(d,k,this._getPos(w,y),w,y))}};b._writePlacedMarkers=function(d,h,k){k=null!=k?k:h.readLegacyGeometryForDisplay();if(k=p.CIMMarkerPlacementHelper.getPlacement(k,c.unwrap(this._markerPlacement),z.pt2px(1))){h=h.getDisplayId();for(var e=m.create(),w=r.create(),y=k.next();null!=y;){const {tx:C,ty:B}=y;-128<=C&&640>=C&&-128<=B&&640>=B&&(this._applyTransformation(w,e,y.getAngle()/
l),this._writeVertices(d,h,this._getPos(C,B),C,B));y=k.next()}}};b._writeVertices=function(d,h,k,e,w){const y=d.vertexCount();d.vertexBounds(e+this.xOffset,w-this.yOffset,this._computedWidth*this._vertexBoundsScaleX,this._computedHeight*this._vertexBoundsScaleY);d.vertexWrite(k);d.vertexWrite(this._offsetUpperLeft);d.vertexWrite(this._texUpperLeft);d.vertexWrite(this._bitestAndDistRatio);d.vertexWrite(h);d.vertexWrite(this._fillColor);d.vertexWrite(this._outlineColor);d.vertexWrite(this._sizeOutlineWidth);
d.vertexWrite(this._minMaxZoom);d.vertexEnd();d.vertexWrite(k);d.vertexWrite(this._offsetUpperRight);d.vertexWrite(this._texUpperRight);d.vertexWrite(this._bitestAndDistRatio);d.vertexWrite(h);d.vertexWrite(this._fillColor);d.vertexWrite(this._outlineColor);d.vertexWrite(this._sizeOutlineWidth);d.vertexWrite(this._minMaxZoom);d.vertexEnd();d.vertexWrite(k);d.vertexWrite(this._offsetBottomLeft);d.vertexWrite(this._texBottomLeft);d.vertexWrite(this._bitestAndDistRatio);d.vertexWrite(h);d.vertexWrite(this._fillColor);
d.vertexWrite(this._outlineColor);d.vertexWrite(this._sizeOutlineWidth);d.vertexWrite(this._minMaxZoom);d.vertexEnd();d.vertexWrite(k);d.vertexWrite(this._offsetBottomRight);d.vertexWrite(this._texBottomRight);d.vertexWrite(this._bitestAndDistRatio);d.vertexWrite(h);d.vertexWrite(this._fillColor);d.vertexWrite(this._outlineColor);d.vertexWrite(this._sizeOutlineWidth);d.vertexWrite(this._minMaxZoom);d.vertexEnd();d.indexWrite(y+0);d.indexWrite(y+1);d.indexWrite(y+2);d.indexWrite(y+1);d.indexWrite(y+
3);d.indexWrite(y+2)};b._applyTransformation=function(d,h,k=0){x.identity(d);x.translate(d,d,m.fromValues(this.xOffset,-this.yOffset));0!==this.angle+k&&x.rotate(d,d,l*(this.angle+k));k=this._computedWidth;const e=this._computedHeight,w=(this._anchorX-.5)*k,y=(this._anchorY-.5)*e;u.set(h,w,y);u.transformMat2d(h,h,d);this._offsetUpperLeft=q.i1616to32(16*h[0],16*h[1]);this._offsets.xUpperLeft=h[0];this._offsets.yUpperLeft=h[1];u.set(h,w+k,y);u.transformMat2d(h,h,d);this._offsetUpperRight=q.i1616to32(16*
h[0],16*h[1]);this._offsets.xUpperRight=h[0];this._offsets.yUpperRight=h[1];u.set(h,w,y+e);u.transformMat2d(h,h,d);this._offsetBottomLeft=q.i1616to32(16*h[0],16*h[1]);this._offsets.xBottomLeft=h[0];this._offsets.yBottomLeft=h[1];u.set(h,w+k,y+e);u.transformMat2d(h,h,d);this._offsetBottomRight=q.i1616to32(16*h[0],16*h[1]);this._offsets.xBottomRight=h[0];this._offsets.yBottomRight=h[1]};b._getPos=function(d,h){return q.i1616to32(Math.round(8*d),Math.round(8*h))};return a}(t)})},"esri/views/2d/engine/webgl/mesh/templates/WGLTemplateStore":function(){define("exports ../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../core/promiseUtils ../../../../../../symbols/support/defaults ./WGLDynamicFillTemplate ./WGLDynamicLineTemplate ./WGLDynamicMarkerTemplate ./WGLDynamicTextTemplate ./WGLFillTemplate ./WGLLineTemplate ./WGLMarkerTemplate ./WGLTextTemplate ../../util/Lock ../../util/Result ../../../../layers/features/schemaUtils ../../../../layers/features/textUtils".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a,b,d,h){function k(C,B){const A=C.length;C.push(null);B.then(D=>C[A]=D);return C}function e(C){return!!(C&1)}const w=x.getLogger("esri.views.2d.engine.webgl.mesh.templates.WGLTemplateStore"),y=[];x=function(){function C(A,D){this._templateIdCounter=this._idCounter=1;this._idToTemplateGroup=new Map;this._symbolToTemplate=new Map;this._fetchQueue=[];this._idToResolver=new Map;this._cimTemplateCache=new Map;this._cimAnalyses=[];this._lock=new a["default"];this._fetchResource=
A;this._tileInfo=D}var B=C.prototype;B.createTemplateGroup=function(A,D){this._initErrorTemplates();const E=A.hash;if(this._symbolToTemplate.has(E))return this._symbolToTemplate.get(E);const G=[];D&&this._createMeshTemplates(G,D,!0);this._createMeshTemplates(G,A,!1);A=this._createGroupId("expanded-cim"===A.type);this._idToTemplateGroup.set(A,G);this._symbolToTemplate.set(E,A);return A};B.getTemplateGroup=function(A){return this._idToTemplateGroup.has(A)?this._idToTemplateGroup.get(A):y};B.getDynamicTemplateGroup=
function(A){if(!this._idToTemplateGroup.has(A))return y;e(A)||w.error("mapview-template-store",`Id ${A} does not refer to a dynamic template`);return this._idToTemplateGroup.get(A)};B.getMosaicItem=function(A,D){const E=this._createTemplateId(),G=new Promise(I=>this._idToResolver.set(E,I));this._fetchQueue.push({symbol:A,id:E,glyphIds:D});return G};B.finalize=function(A){return this._fetchQueue.length||this._lock.isHeld()?a.withLock(this._lock,this._fetchAllQueuedResources.bind(this),A):Promise.resolve()};
B._initErrorTemplates=function(){this._errorTemplates||(this._errorTemplates={fill:this._createMeshTemplates([],d.createSymbolSchema(u.errorPolygonSymbol2D),!1),marker:this._createMeshTemplates([],d.createSymbolSchema(u.errorPointSymbol2D),!1),line:this._createMeshTemplates([],d.createSymbolSchema(u.errorPolylineSymbol2D),!1)})};B._fetchAllQueuedResources=function(A){if(!this._fetchQueue.length)return Promise.resolve();const D=this._fetchQueue,E=this._cimAnalyses;this._fetchQueue=[];this._cimAnalyses=
[];return Promise.all(E).then(()=>this._fetchResource(D,A).then(G=>{for(const {id:I,mosaicItem:L}of G)this._idToResolver.get(I)(L),this._idToResolver.delete(I)})).catch(G=>{r.isAbortError(G)?this._fetchQueue=this._fetchQueue.concat(D):"worker:port-closed"!==G.name&&w.error(new z("mapview-template-store","Unable to fetch requested texture resources",G))})};B._createGroupId=function(A){return this._idCounter++<<1|(A?1:0)};B._createTemplateId=function(){return this._templateIdCounter++};B._createSMS=
function(){var A=c._asyncToGenerator(function*(D){const {spriteMosaicItem:E}=yield this.getMosaicItem(D);return b.ok(E,w)?t.fromSimpleMarker(D,E):this._markerError});return function(D){return A.apply(this,arguments)}}();B._createPMS=function(){var A=c._asyncToGenerator(function*(D){const {spriteMosaicItem:E}=yield this.getMosaicItem(D);return b.ok(E,w)?t.fromPictureMarker(D,E):this._markerError});return function(D){return A.apply(this,arguments)}}();B._createSFS=function(){var A=c._asyncToGenerator(function*(D,
E){const {spriteMosaicItem:G}=yield this.getMosaicItem(D);return b.ok(G,w)?q.fromSimpleFill(D,G,E):this._fillError});return function(D,E){return A.apply(this,arguments)}}();B._createPFS=function(){var A=c._asyncToGenerator(function*(D,E){const {spriteMosaicItem:G}=yield this.getMosaicItem(D);return b.ok(G,w)?q.fromPictureFill(D,G,E):this._fillError});return function(D,E){return A.apply(this,arguments)}}();B._createSLS=function(){var A=c._asyncToGenerator(function*(D,E){({spriteMosaicItem:E}=yield this.getMosaicItem(D));
return b.ok(E,w)?l.fromSimpleLine(D,E):this._lineError});return function(D,E){return A.apply(this,arguments)}}();B._createLMS=function(){var A=c._asyncToGenerator(function*(D){const {spriteMosaicItem:E}=yield this.getMosaicItem(D);return b.ok(E,w)?t.fromLineSymbolMarker(D,E):this._markerError});return function(D){return A.apply(this,arguments)}}();B._createTS=function(){var A=c._asyncToGenerator(function*(D){const {glyphMosaicItems:E}=yield this.getMosaicItem(D);return g.fromText(D,E)});return function(D){return A.apply(this,
arguments)}}();B._createCIMText=function(){var A=c._asyncToGenerator(function*(D){const {glyphMosaicItems:E}=yield this.getMosaicItem(D.cim,h.codepoints(D.text));return b.ok(E,w)?g.fromCIMText(D,E,this._tileInfo):this._textError});return function(D){return A.apply(this,arguments)}}();B._createCIMFill=function(){var A=c._asyncToGenerator(function*(D){const {spriteMosaicItem:E}=yield this.getMosaicItem(D.cim);return b.ok(E,w)?q.fromCIMFill(D,E,this._tileInfo):this._fillError});return function(D){return A.apply(this,
arguments)}}();B._createCIMLine=function(){var A=c._asyncToGenerator(function*(D){const {spriteMosaicItem:E}=yield this.getMosaicItem(D.cim);return b.ok(E,w)?l.fromCIMLine(D,E,this._tileInfo):this._lineError});return function(D){return A.apply(this,arguments)}}();B._createCIMMarker=function(){var A=c._asyncToGenerator(function*(D){const {spriteMosaicItem:E}=yield this.getMosaicItem(D.cim);return b.ok(E,w)?t.fromCIMMarker(D,E,this._tileInfo):this._markerError});return function(D){return A.apply(this,
arguments)}}();B._createCIM=function(){var A=c._asyncToGenerator(function*(D){const E=D.templateHash;if(this._cimTemplateCache.has(E))return this._cimTemplateCache.get(E);D={...D,cim:{...D.cim,mosaicHash:D.materialHash}};let G;switch(D.type){case "marker":G=this._createCIMMarker(D);break;case "line":G=this._createCIMLine(D);break;case "fill":G=this._createCIMFill(D);break;case "text":G=this._createCIMText(D)}G.then(I=>this._cimTemplateCache.set(E,I));return G});return function(D){return A.apply(this,
arguments)}}();B._createDynamicCIM=function(A){const D=A.templateHash;if(this._cimTemplateCache.has(D))return this._cimTemplateCache.get(D);let E;switch(A.type){case "marker":E=p.fromCIMMarker(A,this._tileInfo);break;case "line":E=v.fromCIMLine(A,this._tileInfo);break;case "fill":E=m.fromCIMFill(A,this._tileInfo);break;case "text":E=f.fromCIMText(A,this._tileInfo)}this._cimTemplateCache.set(D,E);return E};B._createPrimitiveMeshTemplates=function(A,D,E){switch(D.type){case "esriSMS":return k(A,this._createSMS(D));
case "esriPMS":return k(A,this._createPMS(D));case "esriSFS":return k(A,this._createSFS(D,E));case "line-marker":return k(A,this._createLMS(D));case "esriPFS":return k(A,this._createPFS(D,E));case "esriSLS":return k(A,this._createSLS(D,!1));case "esriTS":return k(A,this._createTS(D));default:return w.error("Unable to create mesh template for unknown symbol type {: $ }{symbol.type}"),A}};B._createMeshTemplates=function(A,D,E){if(-1!==D.type.indexOf("3d"))return w.error("3D symbols are not supported with MapView"),
A;if("expanded-cim"===D.type){for(const G of D.layers)"function"===typeof G.materialHash?A.push(this._createDynamicCIM(G)):k(A,this._createCIM(G));return A}if("composite-symbol"===D.type){for(const G of D.layers)this._createPrimitiveMeshTemplates(A,G,E);return A}return"cim"===D.type||"label"===D.type||"web-style"===D.type?A:this._createPrimitiveMeshTemplates(A,D,E)};c._createClass(C,[{key:"_markerError",get:function(){return this._errorTemplates.marker[0]}},{key:"_fillError",get:function(){return this._errorTemplates.fill[0]}},
{key:"_lineError",get:function(){return this._errorTemplates.line[0]}},{key:"_textError",get:function(){return this._errorTemplates.line[0]}}]);return C}();n.WGLTemplateStore=x;n.isDynamicId=e;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/support/defaults":function(){define("exports ../../core/has ../../core/maybe ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../TextSymbol ./defaultsJSON".split(" "),function(n,c,z,x,r,u,m,v){const p=u.fromJSON(v.defaultPointSymbolJSON),
f=r.fromJSON(v.defaultPolylineSymbolJSON),q=x.fromJSON(v.defaultPolygonSymbolJSON);c=m.fromJSON(v.defaultTextSymbolJSON);u=u.fromJSON(v.errorPointSymbolJSON);r=r.fromJSON(v.errorPolylineSymbolJSON);x=x.fromJSON(v.errorPolygonSymbolJSON);n.defaultPointSymbol2D=p;n.defaultPolygonSymbol2D=q;n.defaultPolylineSymbol2D=f;n.defaultTextSymbol2D=c;n.errorPointSymbol2D=u;n.errorPolygonSymbol2D=x;n.errorPolylineSymbol2D=r;n.getDefaultSymbol2D=function(l){if(z.isNone(l))return null;switch(l.type){case "point":case "multipoint":return p;
case "polyline":return f;case "polygon":case "extent":return q}return null};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/SimpleFillSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./FillSymbol ./SimpleLineSymbol".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t){var g;x=new x.JSONMap({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});l=g=function(a){function b(...h){h=a.call(this,...h)||this;h.color=new z([0,0,0,.25]);h.outline=new t;h.type="simple-fill";h.style="solid";return h}n._inheritsLoose(b,a);var d=b.prototype;d.normalizeCtorArgs=
function(h,k,e){if(h&&"string"!==typeof h)return h;const w={};h&&(w.style=h);k&&(w.outline=k);e&&(w.color=e);return w};d.clone=function(){return new g({color:r.clone(this.color),outline:this.outline&&this.outline.clone(),style:this.style})};d.hash=function(){return`${a.prototype.hash.call(this)}${this.style}.${this.color&&this.color.hash()}`};return b}(l);c.__decorate([u.property()],l.prototype,"color",void 0);c.__decorate([u.property()],l.prototype,"outline",void 0);c.__decorate([f.enumeration({esriSFS:"simple-fill"},
{readOnly:!0})],l.prototype,"type",void 0);c.__decorate([u.property({type:x.apiValues,json:{read:x.read,write:x.write}})],l.prototype,"style",void 0);return l=g=c.__decorate([q.subclass("esri.symbols.SimpleFillSymbol")],l)})},"esri/symbols/FillSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/subclass ./SimpleLineSymbol ./Symbol".split(" "),
function(n,c,z,x,r,u,m,v,p){x=function(f){function q(l){l=f.call(this,l)||this;l.outline=null;l.type=null;return l}n._inheritsLoose(q,f);q.prototype.hash=function(){return`${this.type}.${this.outline&&this.outline.hash()}`};return q}(p);c.__decorate([z.property({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":v}},json:{default:null,write:!0}})],x.prototype,"outline",void 0);c.__decorate([z.property({type:["simple-fill","picture-fill"],readOnly:!0})],x.prototype,"type",
void 0);return x=c.__decorate([m.subclass("esri.symbols.FillSymbol")],x)})},"esri/symbols/SimpleLineSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/jsonMap ../core/lang ../core/screenUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./LineSymbol ./LineSymbolMarker".split(" "),function(n,c,z,x,r,u,m,v,p,f,
q,l,t){var g;z=new z.JSONMap({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});l=g=function(a){function b(...h){h=a.call(this,...h)||this;h.type="simple-line";h.style="solid";
h.cap="round";h.join="round";h.marker=null;h.miterLimit=2;return h}n._inheritsLoose(b,a);var d=b.prototype;d.normalizeCtorArgs=function(h,k,e,w,y,C){if(h&&"string"!==typeof h)return h;const B={};null!=h&&(B.style=h);null!=k&&(B.color=k);null!=e&&(B.width=r.toPt(e));null!=w&&(B.cap=w);null!=y&&(B.join=y);null!=C&&(B.miterLimit=r.toPt(C));return B};d.clone=function(){var h;return new g({color:x.clone(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,
marker:null==(h=this.marker)?void 0:h.clone()})};d.hash=function(){var h,k;return`${a.prototype.hash.call(this)}.${null==(h=this.color)?void 0:h.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${null==(k=this.marker)?void 0:k.hash()}`};return b}(l);c.__decorate([f.enumeration({esriSLS:"simple-line"},{readOnly:!0})],l.prototype,"type",void 0);c.__decorate([u.property({type:z.apiValues,json:{read:z.read,write:z.write}})],l.prototype,"style",void 0);c.__decorate([u.property({type:["butt",
"round","square"],json:{write:{overridePolicy:(a,b,d)=>({enabled:"round"!==a&&(null==d||null==d.origin)})}}})],l.prototype,"cap",void 0);c.__decorate([u.property({type:["miter","round","bevel"],json:{write:{overridePolicy:(a,b,d)=>({enabled:"round"!==a&&(null==d||null==d.origin)})}}})],l.prototype,"join",void 0);c.__decorate([u.property({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":t}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],l.prototype,"marker",void 0);
c.__decorate([u.property({type:Number,json:{read:!1,write:!1}})],l.prototype,"miterLimit",void 0);return l=g=c.__decorate([q.subclass("esri.symbols.SimpleLineSymbol")],l)})},"esri/symbols/LineSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/screenUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./Symbol".split(" "),
function(n,c,z,x,r,u,m,v,p,f){r=function(q){function l(t){t=q.call(this,t)||this;t.type="simple-line";t.width=.75;return t}n._inheritsLoose(l,q);l.prototype.hash=function(){return`${this.type}.${this.width}`};return l}(f);c.__decorate([v.enumeration({esriSLS:"simple-line"},{readOnly:!0})],r.prototype,"type",void 0);c.__decorate([x.property({type:Number,cast:z.toPt,json:{write:!0}})],r.prototype,"width",void 0);return r=c.__decorate([p.subclass("esri.symbols.LineSymbol")],r)})},"esri/symbols/Symbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q){x=new x.JSONMap({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let l=0;r=function(t){function g(b){b=t.call(this,b)||this;b.id=`sym${l++}`;b.type=null;return b}n._inheritsLoose(g,
t);var a=g.prototype;a.readColor=function(b){return b&&null!=b[0]?[b[0],b[1],b[2],b[3]/255]:b};a.collectRequiredFields=function(){var b=n._asyncToGenerator(function*(d,h){});return function(d,h){return b.apply(this,arguments)}}();a.hash=function(){return JSON.stringify(this.toJSON())};a.clone=function(){};n._createClass(g,[{key:"color",set:function(b){this._set("color",b)}}]);return g}(r.JSONSupport);c.__decorate([u.property({type:x.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:x.write}}})],
r.prototype,"type",void 0);c.__decorate([u.property({type:z,value:new z([0,0,0,1]),json:{write:{allowNull:!0}}})],r.prototype,"color",null);c.__decorate([f.reader("color")],r.prototype,"readColor",null);return r=c.__decorate([q.subclass("esri.symbols.Symbol")],r)})},"esri/symbols/LineSymbolMarker":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t){var g;x=g=function(a){function b(h){h=a.call(this,h)||this;h.placement="begin-end";h.type="line-marker";h.style="arrow";return h}n._inheritsLoose(b,a);var d=b.prototype;d.writeStyle=function(h,k,e,w){k[e]="web-map"===(null==w?void 0:w.origin)?"arrow":h};d.readColor=function(h){return h&&null!=h[0]?[h[0],h[1],h[2],h[3]/255]:h};d.writeColor=function(h,k,e,w){"web-map"!==(null==w?void 0:w.origin)&&(k[e]=h)};d.clone=function(){return new g({color:r.clone(this.color),
placement:this.placement,style:this.style})};d.hash=function(){var h;return`${this.placement}.${null==(h=this.color)?void 0:h.hash()}.${this.style}`};n._createClass(b,[{key:"color",set:function(h){this._set("color",h)}}]);return b}(x.JSONSupport);c.__decorate([u.property({type:["begin","end","begin-end"],json:{write:!0}})],x.prototype,"placement",void 0);c.__decorate([f.enumeration({"line-marker":"line-marker"},{readOnly:!0}),u.property({json:{origins:{"web-map":{write:!1}}}})],x.prototype,"type",
void 0);c.__decorate([u.property({type:"arrow circle square diamond cross x".split(" ")})],x.prototype,"style",void 0);c.__decorate([t.writer("style")],x.prototype,"writeStyle",null);c.__decorate([u.property({type:z,value:null,json:{write:{allowNull:!0}}})],x.prototype,"color",null);c.__decorate([q.reader("color")],x.prototype,"readColor",null);c.__decorate([t.writer("color")],x.prototype,"writeColor",null);return x=g=c.__decorate([l.subclass("esri.symbols.LineSymbolMarker")],x)})},"esri/symbols/SimpleMarkerSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/lang ../core/screenUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./MarkerSymbol ./SimpleLineSymbol".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a){var b;x=new x.JSONMap({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});g=b=function(d){function h(...e){e=d.call(this,...e)||this;e.color=new z([255,255,255,.25]);e.type="simple-marker";e.size=12;e.style="circle";e.outline=new a;return e}n._inheritsLoose(h,d);var k=h.prototype;k.normalizeCtorArgs=function(e,w,y,C){if(e&&"string"!==typeof e)return e;const B=
{};e&&(B.style=e);null!=w&&(B.size=u.toPt(w));y&&(B.outline=y);C&&(B.color=C);return B};k.writeColor=function(e,w){e&&"x"!==this.style&&"cross"!==this.style&&(w.color=e.toJSON());null===e&&(w.color=null)};k.clone=function(){return new b({angle:this.angle,color:r.clone(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})};k.hash=function(){var e;return`${d.prototype.hash.call(this)}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${null==
(e=this.outline)?void 0:e.hash()}`};n._createClass(h,[{key:"path",set:function(e){this.style="path";this._set("path",e)}}]);return h}(g);c.__decorate([m.property()],g.prototype,"color",void 0);c.__decorate([t.writer("color")],g.prototype,"writeColor",null);c.__decorate([q.enumeration({esriSMS:"simple-marker"},{readOnly:!0})],g.prototype,"type",void 0);c.__decorate([m.property()],g.prototype,"size",void 0);c.__decorate([m.property({type:x.apiValues,json:{read:x.read,write:x.write}})],g.prototype,"style",
void 0);c.__decorate([m.property({type:String,json:{write:!0}})],g.prototype,"path",null);c.__decorate([m.property({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":a}},json:{default:null,write:!0}})],g.prototype,"outline",void 0);return g=b=c.__decorate([l.subclass("esri.symbols.SimpleMarkerSymbol")],g)})},"esri/symbols/MarkerSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/screenUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/subclass ./Symbol".split(" "),
function(n,c,z,x,r,u,m,v,p){r=function(f){function q(l){l=f.call(this,l)||this;l.angle=0;l.type=null;l.xoffset=0;l.yoffset=0;l.size=9;return l}n._inheritsLoose(q,f);q.prototype.hash=function(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`};return q}(p);c.__decorate([x.property({type:Number,json:{read:f=>f&&-1*f,write:(f,q)=>q.angle=f&&-1*f}})],r.prototype,"angle",void 0);c.__decorate([x.property({type:["simple-marker","picture-marker"],readOnly:!0})],r.prototype,
"type",void 0);c.__decorate([x.property({type:Number,cast:z.toPt,json:{write:!0}})],r.prototype,"xoffset",void 0);c.__decorate([x.property({type:Number,cast:z.toPt,json:{write:!0}})],r.prototype,"yoffset",void 0);c.__decorate([x.property({type:Number,cast:f=>"auto"===f?f:z.toPt(f),json:{write:!0}})],r.prototype,"size",void 0);return r=c.__decorate([v.subclass("esri.symbols.MarkerSymbol")],r)})},"esri/symbols/TextSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/lang ../core/screenUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./Font ./Symbol".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g){var a;v=a=function(b){function d(...k){k=b.call(this,...k)||this;k.backgroundColor=null;k.borderLineColor=null;k.borderLineSize=null;k.font=new t;k.horizontalAlignment="center";k.kerning=!0;k.haloColor=null;k.haloSize=null;k.rightToLeft=null;k.rotated=!1;k.text="";k.type="text";k.verticalAlignment=null;k.xoffset=0;k.yoffset=0;k.angle=0;k.width=null;k.lineWidth=192;k.lineHeight=1;return k}n._inheritsLoose(d,b);var h=d.prototype;h.normalizeCtorArgs=function(k,e,
w){if(k&&"string"!==typeof k)return k;const y={};k&&(y.text=k);e&&(y.font=e);w&&(y.color=w);return y};h.writeLineWidth=function(k,e,w,y){y&&"string"!==typeof y||(e[w]=k)};h.castLineWidth=function(k){return r.toPt(k)};h.writeLineHeight=function(k,e,w,y){y&&"string"!==typeof y||(e[w]=k)};h.clone=function(){return new a({angle:this.angle,backgroundColor:x.clone(this.backgroundColor),borderLineColor:x.clone(this.borderLineColor),borderLineSize:this.borderLineSize,color:x.clone(this.color),font:this.font&&
this.font.clone(),haloColor:x.clone(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})};h.hash=function(){return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color.hash()}.${this.font&&
this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`};return d}(g);c.__decorate([u.property({type:z,json:{write:!0}})],v.prototype,"backgroundColor",void 0);c.__decorate([u.property({type:z,json:{write:!0}})],v.prototype,"borderLineColor",void 0);c.__decorate([u.property({type:Number,
json:{write:!0}})],v.prototype,"borderLineSize",void 0);c.__decorate([u.property({type:t,json:{write:!0}})],v.prototype,"font",void 0);c.__decorate([u.property({type:["left","right","center","justify"],json:{write:!0}})],v.prototype,"horizontalAlignment",void 0);c.__decorate([u.property({type:Boolean,json:{write:!0}})],v.prototype,"kerning",void 0);c.__decorate([u.property({type:z,json:{write:!0}})],v.prototype,"haloColor",void 0);c.__decorate([u.property({type:Number,cast:r.toPt,json:{write:!0}})],
v.prototype,"haloSize",void 0);c.__decorate([u.property({type:Boolean,json:{write:!0}})],v.prototype,"rightToLeft",void 0);c.__decorate([u.property({type:Boolean,json:{write:!0}})],v.prototype,"rotated",void 0);c.__decorate([u.property({type:String,json:{write:!0}})],v.prototype,"text",void 0);c.__decorate([f.enumeration({esriTS:"text"},{readOnly:!0})],v.prototype,"type",void 0);c.__decorate([u.property({type:["baseline","top","middle","bottom"],json:{write:!0}})],v.prototype,"verticalAlignment",
void 0);c.__decorate([u.property({type:Number,cast:r.toPt,json:{write:!0}})],v.prototype,"xoffset",void 0);c.__decorate([u.property({type:Number,cast:r.toPt,json:{write:!0}})],v.prototype,"yoffset",void 0);c.__decorate([u.property({type:Number,json:{read:b=>b&&-1*b,write:(b,d)=>d.angle=b&&-1*b}})],v.prototype,"angle",void 0);c.__decorate([u.property({type:Number,json:{write:!0}})],v.prototype,"width",void 0);c.__decorate([u.property({type:Number})],v.prototype,"lineWidth",void 0);c.__decorate([l.writer("lineWidth")],
v.prototype,"writeLineWidth",null);c.__decorate([m.cast("lineWidth")],v.prototype,"castLineWidth",null);c.__decorate([u.property({type:Number})],v.prototype,"lineHeight",void 0);c.__decorate([l.writer("lineHeight")],v.prototype,"writeLineHeight",null);return v=a=c.__decorate([q.subclass("esri.symbols.TextSymbol")],v)})},"esri/symbols/Font":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/screenUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/decorators/cast ../core/Logger ../core/accessorSupport/decorators/subclass".split(" "),
function(n,c,z,x,r,u,m,v,p){var f;z=f=function(q){function l(g){g=q.call(this,g)||this;g.decoration="none";g.family="sans-serif";g.size=9;g.style="normal";g.weight="normal";return g}n._inheritsLoose(l,q);var t=l.prototype;t.castSize=function(g){return x.toPt(g)};t.clone=function(){return new f({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})};t.hash=function(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`};return l}(z.JSONSupport);
c.__decorate([r.property({type:["underline","line-through","none"],json:{default:"none",write:!0}})],z.prototype,"decoration",void 0);c.__decorate([r.property({type:String,json:{write:!0}})],z.prototype,"family",void 0);c.__decorate([r.property({type:Number,json:{write:{overridePolicy(q,l,t){return{enabled:!t||!t.textSymbol3D}}}}})],z.prototype,"size",void 0);c.__decorate([m.cast("size")],z.prototype,"castSize",null);c.__decorate([r.property({type:["normal","italic","oblique"],json:{default:"normal",
write:!0}})],z.prototype,"style",void 0);c.__decorate([r.property({type:["normal","bold","bolder","lighter"],json:{default:"normal",write:!0}})],z.prototype,"weight",void 0);return z=f=c.__decorate([p.subclass("esri.symbols.Font")],z)})},"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicFillTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/mathUtils ../../../../../../core/screenUtils ../../color ../../definitions ../../GeometryUtils ../../number ../../materialKey/MaterialKey ./util ./WGLBaseFillTemplate ./WGLDynamicMeshTemplate ../../util/Result".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l){return function(t){function g(a,b,d){var h;var k=t.call(this,a)||this;k._minMaxZoom=m.i1616to32(Math.round(b*r.MIN_MAX_ZOOM_PRECISION_FACTOR),Math.round(d*r.MIN_MAX_ZOOM_PRECISION_FACTOR));p.isFunction(a.color)?k._dynamicPropertyMap.set("fillColor",(D,E,G)=>(D=a.color(D,E,G))&&x.premultiplyAlphaRGBA(D)||0):(b=a.color,k.fillColor=b&&x.premultiplyAlphaRGBA(b)||0);let e=0;p.isFunction(a.height)||(e=a.height||0);const w="CIMMarkerPlacementInsidePolygon"===(null==(h=a.cim.placement)?
void 0:h.type)&&a.cim.placement.shiftOddRows?2:1;k._dynamicPropertyMap.set("_height",(D,E,G)=>p.isFunction(a.height)?a.height(D,E,G)*w:e*w);let y=0;p.isFunction(a.offsetX)||(y=z.pt2px(a.offsetX||0)+128,255<y&&(y=255));k._dynamicPropertyMap.set("_offsetX",(D,E,G)=>p.isFunction(a.offsetX)?(D=z.pt2px(a.offsetX(D,E,G))+128,255<D&&(D=255),D):y);let C=1;p.isFunction(a.scaleX)||(C=a.scaleX||1);k._dynamicPropertyMap.set("_scaleX",(D,E,G)=>p.isFunction(a.scaleX)?a.scaleX(D,E,G):C);let B=0;p.isFunction(a.offsetY)||
(B=z.pt2px(-a.offsetY||0)+128,255<B&&(B=255));k._dynamicPropertyMap.set("_offsetY",(D,E,G)=>p.isFunction(a.offsetY)?(D=z.pt2px(-a.offsetY(D,E,G))+128,255<D&&(D=255),D):B);let A=0;p.isFunction(a.angle)||(A=u.radToByte(a.angle)||0);k._dynamicPropertyMap.set("_angle",(D,E,G)=>p.isFunction(a.angle)?u.radToByte(a.angle(D,E,G)):A);k._effects=a.effects;k._cimFillLayer=a;k._fillMaterialKey=v.FillMaterialKey.load(a.materialKey);return k}n._inheritsLoose(g,t);g.fromCIMFill=function(a,b){const [d,h]=p.getMinMaxZoom(a.scaleInfo,
b);return new g(a,d,h)};g.prototype.bindFeature=function(a,b,d){const h=a.readLegacyFeature();this._dynamicPropertyMap.forEach((w,y)=>{this[y]=w(h,b,d)});a=this._fillMaterialKey;var k=this._materialCache,e=this._cimFillLayer;this.aux3=m.i8888to32(0,0,this._angle,e.colorLocked?1:0);e=e.materialHash;e=e(h,b,d);e=k.get(e);k=null;e&&l.ok(e.spriteMosaicItem)&&(k=e.spriteMosaicItem);if(k){const {rect:w,width:y,height:C}=k;e=w.x+r.SPRITE_PADDING;const B=w.y+r.SPRITE_PADDING,A=e+y,D=B+C;let E=c.nextHighestPowerOfTwo(z.pt2px(this._height));
255<E?E=255:0>=E&&(E=c.nextHighestPowerOfTwo(D-B));let G=c.nextHighestPowerOfTwo(z.pt2px(this._height/C*y||0));255<G?G=255:0>=G&&(G=c.nextHighestPowerOfTwo(A-e));const I=this._scaleX;this.tl=m.i1616to32(e,B);this.br=m.i1616to32(A,D);this.aux1=m.i8888to32(G,E,this._offsetX,this._offsetY);this.aux2=m.i1616to32(128*I,128);a.sdf=k.sdf;a.pattern=!0;a.textureBinding=k.textureBinding}else this.aux2=this.aux1=this.br=this.tl=0,a.sdf=!1,a.pattern=!1,a.textureBinding=0;this._materialKey=a.data};return g}(f(q))})},
"esri/views/2d/engine/webgl/mesh/templates/WGLBaseFillTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../../../../../layers/graphics/featureConversionUtils ../../enums ../../number ../../materialKey/MaterialKey ./templateUtils".split(" "),function(n,c,z,x,r,u,m){return v=>function(p){function f(...l){l=p.call(this,...l)||this;l.forceLibtess=!1;l.geometryType=x.WGLGeometryType.FILL;return l}n._inheritsLoose(f,p);var q=f.prototype;q._write=
function(l,t,g){const a="esriGeometryPoint"===t.geometryType,b=u.FillMaterialKey.load(this._materialKey);l.recordStart(t.getDisplayId(),this._materialKey,this.geometryType,b.dotDensity,a);this._writeGeometry(l,t,b,g,a);l.recordEnd()};q._writeGeometry=function(l,t,g,a,b){b=this._getGeometry(t,a,b);if(!c.isNone(b))if(a=l.indexCount(),100<b.maxLength||this.forceLibtess||!m.triangulate(l,b)){b=m.triangulateLibtess(l,b);var d=l.indexCount();a!==d&&this._writeVertices(l,t,b,[b.length/2],g)}else d=l.indexCount(),
a!==d&&this._writeVertices(l,t,b.coords,b.lengths,g)};q._writeVertices=function(l,t,g,a,b){const d=t.getDisplayId();let h=0;var k=a.reduce((e,w)=>e+w);l.vertexEnsureSize((b.dotDensity?4:10)*k);for(const e of a){k=h;for(a=e+h;k<a;k++){const w=g[2*k],y=g[2*k+1],C=r.i1616to32(1*w,1*y);l.vertexBounds(w,y,0,0);l.vertexWrite(C);l.vertexWrite(d);b.dotDensity?l.vertexWriteF32(1/Math.abs(t.readGeometryArea())):(l.vertexWrite(this.fillColor),l.vertexWrite(this.tl),l.vertexWrite(this.br),l.vertexWrite(this.aux1),
l.vertexWrite(this.aux2),l.vertexWrite(this.aux3),l.vertexWrite(this._minMaxZoom))}h+=e}};q._getGeometry=function(l,t,g){return(l=t?z.deltaDecodeGeometry(z.convertFromGeometry(t),2):l.readGeometryForDisplay())?m.clipMarshall(l,g?256:8):null};return f}(v)})},"esri/views/2d/engine/webgl/mesh/templates/templateUtils":function(){define("exports ../../../../../../core/maybe ../../../../../../chunks/earcut ../../../../../../geometry/libtess ../../../../../../layers/graphics/OptimizedGeometry ../../definitions ../../TileClipper ../bufcut".split(" "),
function(n,c,z,x,r,u,m,v){function p(t,g,a){let b=0;for(let d=1;d<a;d++)b+=(t[2*(g+d)]-t[2*(g+d-1)])*(t[2*(g+d)+1]+t[2*(g+d-1)+1]);return b}function f(t,g,a,b,d){let h=0;for(;a<b;a+=3){const k=2*(t.getValue(a)-d),e=2*(t.getValue(a+1)-d),w=2*(t.getValue(a+2)-d);h+=Math.abs((g[k]-g[w])*(g[e+1]-g[k+1])-(g[k]-g[e])*(g[w+1]-g[k+1]))}return h}const q=new m.TileClipper(0,0,0,1,0),l=new m.TileClipper(0,0,0,1,0);q.setExtent(u.TILE_SIZE);l.setExtent(u.TILE_SIZE);n.area=p;n.clipLinesMarshall=function(t,g){l.setPixelMargin(g);
const a=-g;g=u.TILE_SIZE+g;let b=[];var d=!1;let h=0;for(;h<t.length;){const k=[],e=t[h];if(!e)return null;l.reset(2);let [w,y]=e[0];if(d)l.moveTo(w,y);else{if(w<a||w>g||y<a||y>g){d=!0;continue}k.push({x:w,y})}let C=!1;const B=e.length;for(let A=1;A<B;++A)if(w+=e[A][0],y+=e[A][1],d)l.lineTo(w,y);else{if(w<a||w>g||y<a||y>g){C=!0;break}k.push({x:w,y})}if(C)d=!0;else{if(d){if(d=l.resultWithStarts())for(const A of d)b.push(A)}else b.push({line:k,start:0});h++;d=!1}}b=b.filter(k=>1<k.line.length);return 0===
b.length?null:b};n.clipMarshall=function(t,g){if(c.isNone(t))return null;a:{var a=u.TILE_SIZE+128;var b=0;for(var d=0;d<t.lengths.length;d++){var h=t.lengths[d];for(var k=0;k<h;k++){const e=t.coords[2*(k+b)],w=t.coords[2*(k+b)+1];if(-128>e||e>a||-128>w||w>a){a=!0;break a}}b+=h}a=!1}if(!a)return t;q.setPixelMargin(g);q.reset(3);g=0;for(a=0;a<t.lengths.length;a++){b=t.lengths[a];d=t.coords[2*(0+g)];h=t.coords[2*(0+g)+1];q.moveTo(d,h);for(k=1;k<b;k++)d=t.coords[2*(k+g)],h=t.coords[2*(k+g)+1],q.lineTo(d,
h);q.close();g+=b}a=q.result(!1);if(!a)return null;t=[];g=[];for(const e of a){a=0;for(const w of e)g.push(w.x),g.push(w.y),a++;t.push(a)}return new r(t,g)};n.triangleArea=f;n.triangulate=function(t,g){const {coords:a,lengths:b,hasIndeterminateRingOrder:d}=g;g=t.indexWriter();t=t.vertexCount();if(d)return!1;const h=g.length;let k=0;for(var e=0;e<b.length;){let C=e,B=b[e];e=p(a,k,B);for(var w=[];++C<b.length;){var y=b[C];const A=p(a,k+B,y);if(!(0<A))break;e+=A;w.push(k+B);B+=y}y=g.length;v.bufcut(g,
a,k,k+B,w,2,t);w=f(g,a,y,g.length,t);e=Math.abs(e);if(1E-5<Math.abs((w-e)/Math.max(1E-7,e)))return g.seek(h),!1;e=C;k+=B}return!0};n.triangulateEarcut=function(t,g,a){const {coords:b,lengths:d,hasIndeterminateRingOrder:h}=g;if(h)return!1;let k=0;for(var e=0;e<d.length;){let y=e,C=d[e];for(e=[];++y<d.length;){var w=d[y];if(!(0<p(b,k+C,w)))break;e.push(k+C-k);C+=w}w=g.coords.slice(2*k,2*(k+C));e=z.earcut(w,e,2);for(const B of e)t.push(B+a+k);e=y;k+=C}return!0};n.triangulateLibtess=function(t,g){const a=
t.indexWriter();t=t.vertexCount();const {coords:b,lengths:d}=g,{buffer:h,vertexCount:k}=x.triangulate(b,d);a.ensureSize(k);for(g=0;g<k;g++)a.push(g+t);return h};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/bufcut":function(){define(["exports"],function(n){function c(y,C,B,A,D,E,G){let I;B=0;for(let L=A,J=D-E;L<D;L+=E)B+=(y[J+C*E]-y[L+C*E])*(y[L+1+C*E]+y[J+1+C*E]),J=L;if(G===0<B)for(;A<D;A+=E)I=u(A+C*E,y[A+C*E],y[A+1+C*E],I);else for(D-=E;D>=A;D-=E)I=u(D+C*E,
y[D+C*E],y[D+1+C*E],I);I&&b(I,I.next)&&(m(I),I=I.next);return I}function z(y,C=y){if(!y)return y;let B;do if(B=!1,y.steiner||!b(y,y.next)&&0!==q(y.prev,y,y.next))y=y.next;else{m(y);y=C=y.prev;if(y===y.next)break;B=!0}while(B||y!==C);return C}function x(y,C,B,A,D,E,G,I){if(y){!I&&E&&(y=f(y,A,D,E));for(var L=y;y.prev!==y.next;){var J=y.prev,F=y.next;if(E)var K=r(y,A,D,E);else a:{K=y;var M=K.prev,R=K;const T=K.next;if(0<=q(M,R,T)){K=!1;break a}let Q=K.next.next;const S=Q;let X=0;for(;Q!==K.prev&&(0===
X||Q!==S);){X++;if(t(M.x,M.y,R.x,R.y,T.x,T.y,Q.x,Q.y)&&0<=q(Q.prev,Q,Q.next)){K=!1;break a}Q=Q.next}K=!0}if(K)C.push(J.index/B+G),C.push(y.index/B+G),C.push(F.index/B+G),m(y),L=y=F.next;else if(y=F,y===L){if(!I)x(z(y),C,B,A,D,E,G,1);else if(1===I){I=C;L=B;J=G;F=y;do K=F.prev,M=F.next.next,!b(K,M)&&l(K,F,F.next,M)&&g(K,M)&&g(M,K)&&(I.push(K.index/L+J),I.push(F.index/L+J),I.push(M.index/L+J),m(F),m(F.next),F=y=M),F=F.next;while(F!==y);y=F;x(y,C,B,A,D,E,G,2)}else if(2===I)a:{I=y;do{for(L=I.next.next;L!==
I.prev;){if(J=I.index!==L.index){K=K=K=void 0;J=I;F=L;if(K=J.next.index!==F.index&&J.prev.index!==F.index){b:{K=J;do{if(K.index!==J.index&&K.next.index!==J.index&&K.index!==F.index&&K.next.index!==F.index&&l(K,K.next,J,F)){K=!0;break b}K=K.next}while(K!==J);K=!1}K=!K}if(K=K&&g(J,F)&&g(F,J)){K=J;M=!1;R=(J.x+F.x)/2;F=(J.y+F.y)/2;do K.y>F!==K.next.y>F&&K.next.y!==K.y&&R<(K.next.x-K.x)*(F-K.y)/(K.next.y-K.y)+K.x&&(M=!M),K=K.next;while(K!==J);K=M}J=K}if(J){y=h(I,L);I=z(I,I.next);y=z(y,y.next);x(I,C,B,
A,D,E,G,0);x(y,C,B,A,D,E,G,0);break a}L=L.next}I=I.next}while(I!==y)}break}}}}function r(y,C,B,A){const D=y.prev,E=y.next;if(0<=q(D,y,E))return!1;const G=D.x>y.x?D.x>E.x?D.x:E.x:y.x>E.x?y.x:E.x,I=D.y>y.y?D.y>E.y?D.y:E.y:y.y>E.y?y.y:E.y,L=a(D.x<y.x?D.x<E.x?D.x:E.x:y.x<E.x?y.x:E.x,D.y<y.y?D.y<E.y?D.y:E.y:y.y<E.y?y.y:E.y,C,B,A);C=a(G,I,C,B,A);B=y.prevZ;for(A=y.nextZ;B&&B.z>=L&&A&&A.z<=C;){if(B!==y.prev&&B!==y.next&&t(D.x,D.y,y.x,y.y,E.x,E.y,B.x,B.y)&&0<=q(B.prev,B,B.next))return!1;B=B.prevZ;if(A!==y.prev&&
A!==y.next&&t(D.x,D.y,y.x,y.y,E.x,E.y,A.x,A.y)&&0<=q(A.prev,A,A.next))return!1;A=A.nextZ}for(;B&&B.z>=L;){if(B!==y.prev&&B!==y.next&&t(D.x,D.y,y.x,y.y,E.x,E.y,B.x,B.y)&&0<=q(B.prev,B,B.next))return!1;B=B.prevZ}for(;A&&A.z<=C;){if(A!==y.prev&&A!==y.next&&t(D.x,D.y,y.x,y.y,E.x,E.y,A.x,A.y)&&0<=q(A.prev,A,A.next))return!1;A=A.nextZ}return!0}function u(y,C,B,A){y=k.create(y,C,B);A?(y.next=A.next,y.prev=A,A.next.prev=y,A.next=y):(y.prev=y,y.next=y);return y}function m(y){y.next.prev=y.prev;y.prev.next=
y.next;y.prevZ&&(y.prevZ.nextZ=y.nextZ);y.nextZ&&(y.nextZ.prevZ=y.prevZ)}function v(y){let C=y,B=y;do{if(C.x<B.x||C.x===B.x&&C.y<B.y)B=C;C=C.next}while(C!==y);return B}function p(y,C){let B=C;const A=y.x,D=y.y;let E=-Infinity,G;do{if(D<=B.y&&D>=B.next.y&&B.next.y!==B.y){var I=B.x+(D-B.y)*(B.next.x-B.x)/(B.next.y-B.y);if(I<=A&&I>E){E=I;if(I===A){if(D===B.y)return B;if(D===B.next.y)return B.next}G=B.x<B.next.x?B:B.next}}B=B.next}while(B!==C);if(!G)return null;if(A===E)return G.prev;C=G;I=G.x;const L=
G.y;let J=Infinity,F;for(B=G.next;B!==C;)A>=B.x&&B.x>=I&&A!==B.x&&t(D<L?A:E,D,I,L,D<L?E:A,D,B.x,B.y)&&(F=Math.abs(D-B.y)/(A-B.x),(F<J||F===J&&B.x>G.x)&&g(B,y)&&(G=B,J=F)),B=B.next;return G}function f(y,C,B,A){for(var D;D!==y;D=D.next){D=D||y;null===D.z&&(D.z=a(D.x,D.y,C,B,A));if(D.prev.next!==D||D.next.prev!==D)return D.prev.next=D,D.next.prev=D,f(y,C,B,A);D.prevZ=D.prev;D.nextZ=D.next}y.prevZ.nextZ=null;y.prevZ=null;a:for(B=1;;){A=y;C=y=null;let E=0;for(;A;){E++;D=A;let G=0;for(;G<B&&D;G++)D=D.nextZ;
let I=B;for(;0<G||0<I&&D;){let L;0===G?(L=D,D=D.nextZ,I--):0!==I&&D?A.z<=D.z?(L=A,A=A.nextZ,G--):(L=D,D=D.nextZ,I--):(L=A,A=A.nextZ,G--);C?C.nextZ=L:y=L;L.prevZ=C;C=L}A=D}C.nextZ=null;B*=2;if(2>E)break a}return y}function q(y,C,B){return(C.y-y.y)*(B.x-C.x)-(C.x-y.x)*(B.y-C.y)}function l(y,C,B,A){return b(y,C)&&b(B,A)||b(y,A)&&b(B,C)?!0:0<q(y,C,B)!==0<q(y,C,A)&&0<q(B,A,y)!==0<q(B,A,C)}function t(y,C,B,A,D,E,G,I){return 0<=(D-G)*(C-I)-(y-G)*(E-I)&&0<=(y-G)*(A-I)-(B-G)*(C-I)&&0<=(B-G)*(E-I)-(D-G)*(A-
I)}function g(y,C){return 0>q(y.prev,y,y.next)?0<=q(y,C,y.next)&&0<=q(y,y.prev,C):0>q(y,C,y.prev)||0>q(y,y.next,C)}function a(y,C,B,A,D){y=32767*(y-B)*D;C=32767*(C-A)*D;y=(y|y<<8)&16711935;y=(y|y<<4)&252645135;y=(y|y<<2)&858993459;C=(C|C<<8)&16711935;C=(C|C<<4)&252645135;C=(C|C<<2)&858993459;return(y|y<<1)&1431655765|((C|C<<1)&1431655765)<<1}function b(y,C){return y.x===C.x&&y.y===C.y}function d(y,C){return y.x-C.x}function h(y,C){const B=k.create(y.index,y.x,y.y),A=k.create(C.index,C.x,C.y),D=y.next,
E=C.prev;y.next=C;C.prev=y;B.next=D;D.prev=B;A.next=B;B.prev=A;E.next=A;A.prev=E;return A}let k=function(){function y(){this.y=this.x=this.index=0;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}y.create=function(C,B,A){const D=w<e.length?e[w++]:new y;D.index=C;D.x=B;D.y=A;D.prev=null;D.next=null;D.z=null;D.prevZ=null;D.nextZ=null;D.steiner=!1;return D};return y}();const e=[];let w=0;for(let y=0;8096>y;y++)e.push(new k);n.bufcut=function(y,C,B,A,D,E,G){w=0;var I=(A-B)*E,L=D&&
D.length;const J=L?(D[0]-B)*E:I;var F=c(C,B,A,0,J,E,!0);if(F&&F.next!==F.prev){var K;if(L){L=[];for(let Q=0,S=D.length;Q<S;Q++){const X=c(C,B,A,D[Q]*E,Q<S-1?D[Q+1]*E:A*E,E,!1);X===X.next&&(X.steiner=!0);L.push(v(X))}L.sort(d);for(var M of L){A=M;D=F;if(D=p(A,D))A=h(D,A),z(A,A.next);F=z(F,F.next)}}if(I>80*E){var R=I=C[B*E];var T=K=C[1+B*E];for(M=E;M<J;M+=E)A=C[M+B*E],D=C[M+1+B*E],R=Math.min(R,A),T=Math.min(T,D),I=Math.max(I,A),K=Math.max(K,D);K=Math.max(I-R,K-T);K=0!==K?1/K:0}x(F,y,E,R,T,K,G,0)}};
Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicMeshTemplate":function(){define(["../../../../../../chunks/_rollupPluginBabelHelpers","../../../../../../core/Logger","../../../../../../symbols/cim/cimAnalyzer","./WGLMeshTemplate"],function(n,c,z,x){const r=c.getLogger("esri.views.2d.engine.webgl.WGLDynamicMeshTemplate");return function(u){function m(v){var p=u.call(this)||this;p._ongoingMaterialRequestMap=new Map;p._materialCache=new Map;p._dynamicPropertyMap=
new Map;p._cimLayer=v;return p}n._inheritsLoose(m,u);m.prototype.analyze=function(v,p,f,q){p=p.readLegacyFeature();const l=this._materialCache,t=this._cimLayer.materialHash;if(!t)return r.error("A Dynamic mesh template must have a material hash value or function!"),Promise.reject(null);const g="function"===typeof t?t(p,f,q):t;if(l.has(g))return v=l.get(g),Promise.resolve(v);if(this._ongoingMaterialRequestMap.has(g))return this._ongoingMaterialRequestMap.get(g);f=z.analyzeCIMResource(this._cimLayer.cim,
this._cimLayer.materialOverrides);f.mosaicHash=g;v=v.getMosaicItem(f).then(a=>{this._ongoingMaterialRequestMap.delete(g);l.set(g,a);return a}).catch(a=>{this._ongoingMaterialRequestMap.delete(g);r.error(".analyze()",a.message);return null});this._ongoingMaterialRequestMap.set(g,v);return v};return m}(x)})},"esri/symbols/cim/cimAnalyzer":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../core/Logger ../../core/screenUtils ../../core/string ../../support/arcadeOnDemand ./CIMSymbolHelper ./SDFHelper ./utils ../../views/2d/arcade/callExpressionWithFeature".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q){function l(Q){switch(Q){case "Butt":return 0;case "Square":return 2;default:return 1}}function t(Q){switch(Q){case "Bevel":return 0;case "Miter":return 2;default:return 1}}function g(Q){switch(Q){default:return"left";case "Right":return"right";case "Center":return"center";case "Justify":return"justify"}}function a(Q){switch(Q){default:return"top";case "Center":return"middle";case "Baseline":return"baseline";case "Bottom":return"bottom"}}function b(Q){let S="normal",
X="normal";Q&&(Q=Q.toLowerCase(),-1!==Q.indexOf("italic")?S="italic":-1!==Q.indexOf("oblique")&&(S="oblique"),-1!==Q.indexOf("bold")?X="bold":-1!==Q.indexOf("light")&&(X="lighter"));return{style:S,weight:X}}function d(Q,S,X,aa){let ma;Q[S]?ma=Q[S]:(ma={},Q[S]=ma);ma[X]=aa}function h(Q){return(Q=Q.markerPlacement)&&Q.angleToLine?1:0}function k(){k=c._asyncToGenerator(function*(Q,S,X,aa){X=null!=X?X:[];if(!Q)return X;let ma;const ra={};if("CIMSymbolReference"===Q.type){if(ma=Q.symbol,Q=Q.primitiveOverrides){const wa=
[];for(const va of Q){var za=va.valueExpressionInfo;za&&S?(za=m.createRendererExpression(za.expression,S.spatialReference,S.fields).then(Fa=>{Fa&&d(ra,va.primitiveName,va.propertyName,Fa)}),wa.push(za)):null!=va.value&&d(ra,va.primitiveName,va.propertyName,va.value)}yield Promise.all(wa)}}else return T.error("Expect cim type to be 'CIMSymbolReference'"),X;switch(ma.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":e(ma,Q,ra,S,X,aa)}return X});return k.apply(this,arguments)}
function e(Q,S,X,aa,ma,ra){if(Q){var za=Q.symbolLayers;if(za){var wa,va=v.CIMSymbolHelper.getSize(Q);"CIMPointSymbol"===Q.type&&"Map"===Q.angleAlignment&&(wa=1);for(var Fa=za.length;Fa--;){var Ba=za[Fa];if(Ba&&!1!==Ba.enable){var N=[];v.OverrideHelper.findApplicableOverrides(Ba,S,N);switch(Ba.type){case "CIMSolidFill":w(Ba,X,N,aa,ma);break;case "CIMPictureFill":y(Ba,X,N,aa,ma);break;case "CIMHatchFill":C(Ba,X,N,aa,ma);break;case "CIMGradientFill":{var U=X,ia=aa,P=ma;const [da,ja]=R(N,Ba.primitiveName);
var V=u.numericHash(JSON.stringify(Ba)+ja).toString();P.push({type:"fill",templateHash:V,materialHash:da?M(V,U,N,ia):V,cim:Ba,materialOverrides:null,colorLocked:Ba.colorLocked,effects:Ba.effects,color:{r:128,g:128,b:128,a:1},height:0,angle:0,offsetX:0,offsetY:0,scaleX:1})}break;case "CIMSolidStroke":B(Ba,X,N,aa,ma,"CIMPolygonSymbol"===Q.type,va);break;case "CIMPictureStroke":A(Ba,X,N,aa,ma,"CIMPolygonSymbol"===Q.type,va);break;case "CIMGradientStroke":{U=X;ia=aa;P=ma;V="CIMPolygonSymbol"===Q.type;
var Y=va,ba=Ba.primitiveName,fa=void 0!==Ba.width?Ba.width:4,ha=l(Ba.capStyle),Z=t(Ba.joinStyle);const da=Ba.miterLimit,[ja,qa]=R(N,ba),sa=u.numericHash(JSON.stringify(Ba)+qa).toString();P.push({type:"line",templateHash:sa,materialHash:ja?M(sa,U,N,ia):sa,cim:Ba,materialOverrides:null,isOutline:V,colorLocked:Ba.colorLocked,effects:Ba.effects,color:{r:128,g:128,b:128,a:1},width:K(ba,U,"Width",ia,fa),cap:K(ba,U,"CapStyle",ia,ha),join:K(ba,U,"JoinStyle",ia,Z),miterLimit:K(ba,U,"MiterLimit",ia,da),referenceWidth:Y,
zOrder:J(Ba.name),isDashed:!1})}break;case "CIMCharacterMarker":D(Ba,X,N,aa,ma);break;case "CIMPictureMarker":if(D(Ba,X,N,aa,ma))break;"CIMLineSymbol"===Q.type&&(wa=h(Ba));E(Ba,X,N,aa,ma,wa,va);break;case "CIMVectorMarker":if(D(Ba,X,N,aa,ma))break;"CIMLineSymbol"===Q.type&&(wa=h(Ba));U=X;ia=aa;P=ma;V=wa;Y=va;ba=ra;if(ha=Ba.markerGraphics){fa=0;Ba.scaleSymbolsProportionally&&(Z=Ba.frame)&&(fa=Z.ymax-Z.ymin);for(const da of ha)if(da&&(ha=da.symbol))switch(ha.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":I(Ba,
da,N,U,ia,P,V,Y,fa,ba);break;case "CIMTextSymbol":G(Ba,da,U,N,ia,P,V,Y,fa)}}break;default:T.error("Cannot analyze CIM layer",Ba.type)}}}}}}function w(Q,S,X,aa,ma){const ra=Q.primitiveName,za=f.fromCIMColor(Q.color),[wa,va]=R(X,ra),Fa=u.numericHash(JSON.stringify(Q)+va).toString();ma.push({type:"fill",templateHash:Fa,materialHash:wa?()=>Fa:Fa,cim:Q,materialOverrides:null,colorLocked:Q.colorLocked,color:K(ra,S,"Color",aa,za,F),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,effects:Q.effects})}function y(Q,
S,X,aa,ma){const ra=Q.primitiveName,za=Q.tintColor?f.fromCIMColor(Q.tintColor):{r:255,g:255,b:255,a:1},[wa,va]=R(X,ra);X=u.numericHash(JSON.stringify(Q)+va).toString();const Fa=u.numericHash(`${Q.url}${JSON.stringify(Q.colorSubstitutions)}`).toString();ma.push({type:"fill",templateHash:X,materialHash:wa?()=>Fa:Fa,cim:Q,materialOverrides:null,colorLocked:Q.colorLocked,effects:Q.effects,color:K(ra,S,"TintColor",aa,za,F),height:K(ra,S,"Height",aa,Q.height),scaleX:K(ra,S,"ScaleX",aa,Q.scaleX),angle:K(ra,
S,"Rotation",aa,Q.rotation),offsetX:K(ra,S,"OffsetX",aa,Q.offsetX),offsetY:K(ra,S,"OffsetY",aa,Q.offsetY)})}function C(Q,S,X,aa,ma){const ra=["Rotation","OffsetX","OffsetY"],za=X.filter(N=>N.primitiveName!==Q.primitiveName&&-1===ra.indexOf(N.propertyName)),wa=Q.primitiveName,[va,Fa]=R(X,wa);X=u.numericHash(JSON.stringify(Q)+Fa).toString();const Ba=u.numericHash(`${Q.separation}${JSON.stringify(Q.lineSymbol)}`).toString();ma.push({type:"fill",templateHash:X,materialHash:va?M(Ba,S,za,aa):Ba,cim:Q,materialOverrides:za,
colorLocked:Q.colorLocked,effects:Q.effects,color:{r:255,g:255,b:255,a:1},height:K(wa,S,"Separation",aa,Q.separation),scaleX:1,angle:K(wa,S,"Rotation",aa,Q.rotation),offsetX:K(wa,S,"OffsetX",aa,Q.offsetX),offsetY:K(wa,S,"OffsetY",aa,Q.offsetY)})}function B(Q,S,X,aa,ma,ra,za){const wa=Q.primitiveName,va=f.fromCIMColor(Q.color),Fa=void 0!==Q.width?Q.width:4,Ba=l(Q.capStyle),N=t(Q.joinStyle),U=Q.miterLimit,[ia,P]=R(X,wa),V=u.numericHash(JSON.stringify(Q)+P).toString();ma.push({type:"line",templateHash:V,
materialHash:ia?()=>V:V,cim:Q,materialOverrides:null,isOutline:ra,colorLocked:Q.colorLocked,effects:Q.effects,color:K(wa,S,"Color",aa,va,F),width:K(wa,S,"Width",aa,Fa),cap:K(wa,S,"CapStyle",aa,Ba),join:K(wa,S,"JoinStyle",aa,N),miterLimit:K(wa,S,"MiterLimit",aa,U),referenceWidth:za,zOrder:J(Q.name),isDashed:!1})}function A(Q,S,X,aa,ma,ra,za){const wa=u.numericHash(`${Q.url}${JSON.stringify(Q.colorSubstitutions)}`).toString(),va=Q.primitiveName,Fa=f.fromCIMColor(Q.tintColor),Ba=void 0!==Q.width?Q.width:
4,N=l(Q.capStyle),U=t(Q.joinStyle),ia=Q.miterLimit,[P,V]=R(X,va);X=u.numericHash(JSON.stringify(Q)+V).toString();ma.push({type:"line",templateHash:X,materialHash:P?()=>wa:wa,cim:Q,materialOverrides:null,isOutline:ra,colorLocked:Q.colorLocked,effects:Q.effects,color:K(va,S,"TintColor",aa,Fa,F),width:K(va,S,"Width",aa,Ba),cap:K(va,S,"CapStyle",aa,N),join:K(va,S,"JoinStyle",aa,U),miterLimit:K(va,S,"MiterLimit",aa,ia),referenceWidth:za,zOrder:J(Q.name),isDashed:!1})}function D(Q,S,X,aa,ma){const ra=Q.markerPlacement;
if(!ra||"CIMMarkerPlacementInsidePolygon"!==ra.type)return!1;const za=["Rotation","OffsetX","OffsetY"],wa=X.filter(Ba=>Ba.primitiveName!==Q.primitiveName&&-1===za.indexOf(Ba.propertyName)),[va,Fa]=R(X,ra.primitiveName);X=u.numericHash(JSON.stringify(Q)+Fa).toString();ma.push({type:"fill",templateHash:X,materialHash:va?M(X,S,wa,aa):X,cim:Q,materialOverrides:wa,colorLocked:Q.colorLocked,effects:Q.effects,color:{r:255,g:255,b:255,a:1},height:K(ra.primitiveName,S,"StepY",aa,ra.stepY),scaleX:1,angle:K(ra.primitiveName,
S,"GridAngle",aa,ra.gridAngle),offsetX:K(ra.primitiveName,S,"OffsetX",aa,ra.offsetX),offsetY:K(ra.primitiveName,S,"OffsetY",aa,ra.offsetY)});return!0}function E(Q,S,X,aa,ma,ra,za){const wa=Q.primitiveName,va=Q.size,Fa=Q.scaleX,Ba=Q.rotation,N=Q.offsetX,U=Q.offsetY,ia=Q.tintColor?f.fromCIMColor(Q.tintColor):{r:255,g:255,b:255,a:1},P=u.numericHash(`${Q.url}${JSON.stringify(Q.colorSubstitutions)}`).toString(),[V,Y]=R(X,wa);X=u.numericHash(JSON.stringify(Q)+Y).toString();ma.push({type:"marker",templateHash:X,
materialHash:V?()=>P:P,cim:Q,materialOverrides:null,colorLocked:Q.colorLocked,effects:Q.effects,scaleSymbolsProportionally:!1,alignment:ra,size:K(wa,S,"Size",aa,va),scaleX:K(wa,S,"ScaleX",aa,Fa),rotation:K(wa,S,"Rotation",aa,Ba),offsetX:K(wa,S,"OffsetX",aa,N),offsetY:K(wa,S,"OffsetY",aa,U),color:K(wa,S,"TintColor",aa,ia,F),anchorPoint:Q.anchorPoint,isAbsoluteAnchorPoint:"Relative"!==Q.anchorPointUnits,outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,frameHeight:0,rotateClockwise:Q.rotateClockwise,referenceSize:za,
sizeRatio:1,markerPlacement:Q.markerPlacement})}function G(Q,S,X,aa,ma,ra,za,wa,va){v.OverrideHelper.findApplicableOverrides(S,aa,[]);var Fa=S.geometry;if("x"in Fa&&"y"in Fa){var Ba=S.symbol;var N=Ba.underline?"underline":Ba.strikethrough?"line-through":"none";var U=b(Ba.fontStyleName);Ba.font={family:Ba.fontFamilyName,decoration:N,...U};var ia=Q.frame,P=Q.size/va;va=Q.primitiveName;N=(Ba.height||0)*P;U=Ba.angle||0;var V=((Ba.offsetX||0)+(Fa.x-.5*(ia.xmin+ia.xmax)))*P;Fa=((Ba.offsetY||0)+(Fa.y-.5*
(ia.ymin+ia.ymax)))*P;ia=f.fromCIMColor(v.CIMSymbolHelper.getFillColor(Ba));var Y=f.fromCIMColor(v.CIMSymbolHelper.getStrokeColor(Ba)),ba=v.CIMSymbolHelper.getStrokeWidth(Ba);ba||(Y=f.fromCIMColor(v.CIMSymbolHelper.getFillColor(Ba.haloSymbol)),ba=Ba.haloSize*P);P="";for(const fa of aa)fa.primitiveName===va&&void 0!==fa.value&&(P+=`-${fa.primitiveName}-${fa.propertyName}-${JSON.stringify(fa.value)}`);aa=JSON.stringify(Q.effects)+Number(Q.colorLocked)+JSON.stringify(Q.anchorPoint)+Q.anchorPointUnits+
JSON.stringify(Q.markerPlacement);aa=u.numericHash(JSON.stringify(S)+aa+P).toString();ra.push({type:"text",templateHash:aa,materialHash:()=>u.numericHash(JSON.stringify(Ba.font)).toString(),cim:Ba,materialOverrides:null,colorLocked:Q.colorLocked,effects:Q.effects,alignment:za,anchorPoint:{x:Q.anchorPoint?Q.anchorPoint.x:0,y:Q.anchorPoint?Q.anchorPoint.y:0},isAbsoluteAnchorPoint:"Relative"!==Q.anchorPointUnits,fontName:Ba.fontFamilyName,decoration:"none",weight:"normal",style:"normal",size:K(va,X,
"Size",ma,N),angle:K(va,X,"Rotation",ma,U),offsetX:K(va,X,"OffsetX",ma,V),offsetY:K(va,X,"OffsetY",ma,Fa),horizontalAlignment:g(Ba.horizontalAlignment),verticalAlignment:a(Ba.verticalAlignment),text:K(S.primitiveName,X,"TextString",ma,S.textString,f._adjustTextCase,Ba.textCase),color:ia,outlineColor:Y,outlineSize:ba,referenceSize:wa,sizeRatio:1,markerPlacement:Q.markerPlacement})}}function I(Q,S,X,aa,ma,ra,za,wa,va,Fa){const Ba=S.geometry;if(Ba){var N=S.symbol.symbolLayers;if(N)if(Fa)L(Q,S,aa,X,ma,
ra,za,wa,va);else for(Fa=N.length;Fa--;){var U=N[Fa];if(U&&!1!==U.enable)switch(U.type){case "CIMSolidFill":case "CIMSolidStroke":{var ia=p.getExtent(Ba);if(!ia)continue;const [Y,ba,fa]=p.getSDFMetrics(ia,Q.frame,Q.size,Q.anchorPoint,"Relative"!==Q.anchorPointUnits);var P="CIMSolidFill"===U.type;ia={type:"sdf",geom:Ba,asFill:P};var V=Q.primitiveName;const ha=Q.size,Z=Q.rotation||0,da=Q.offsetX,ja=Q.offsetY,qa=U.primitiveName,sa=P?f.fromCIMColor(v.CIMSymbolHelper.getFillColor(U)):f.fromCIMColor(v.CIMSymbolHelper.getStrokeColor(U)),
ya=P?{r:0,g:0,b:0,a:0}:f.fromCIMColor(v.CIMSymbolHelper.getStrokeColor(U)),Aa=v.CIMSymbolHelper.getStrokeWidth(U);if(!P&&!Aa)break;P=!1;let Ca="";for(const Ia of X)if(Ia.primitiveName===qa||Ia.primitiveName===V)void 0!==Ia.value?Ca+=`-${Ia.primitiveName}-${Ia.propertyName}-${JSON.stringify(Ia.value)}`:Ia.valueExpressionInfo&&(P=!0);V=JSON.stringify({...Q,markerGraphics:null});const Ja=u.numericHash(JSON.stringify(ia)).toString();U={type:"marker",templateHash:u.numericHash(JSON.stringify(S)+JSON.stringify(U)+
V+Ca).toString(),materialHash:P?()=>Ja:Ja,cim:ia,materialOverrides:null,colorLocked:Q.colorLocked,effects:Q.effects,scaleSymbolsProportionally:Q.scaleSymbolsProportionally,alignment:za,anchorPoint:{x:ba,y:fa},isAbsoluteAnchorPoint:!1,size:K(Q.primitiveName,aa,"Size",ma,ha),rotation:K(Q.primitiveName,aa,"Rotation",ma,Z),offsetX:K(Q.primitiveName,aa,"OffsetX",ma,da),offsetY:K(Q.primitiveName,aa,"OffsetY",ma,ja),scaleX:1,frameHeight:va,rotateClockwise:Q.rotateClockwise,referenceSize:wa,sizeRatio:Y,color:K(qa,
aa,"Color",ma,sa,F),outlineColor:K(qa,aa,"Color",ma,ya,F),outlineWidth:K(qa,aa,"Width",ma,Aa),markerPlacement:Q.markerPlacement};ra.push(U);break}default:L(Q,S,aa,X,ma,ra,za,wa,va)}}}}function L(Q,S,X,aa,ma,ra,za,wa,va){S={type:Q.type,enable:!0,name:Q.name,colorLocked:Q.colorLocked,primitiveName:Q.primitiveName,anchorPoint:Q.anchorPoint,anchorPointUnits:Q.anchorPointUnits,offsetX:0,offsetY:0,rotateClockwise:Q.rotateClockwise,rotation:0,size:Q.size,billboardMode3D:Q.billboardMode3D,depth3D:Q.depth3D,
frame:Q.frame,markerGraphics:[S],scaleSymbolsProportionally:Q.scaleSymbolsProportionally,respectFrame:Q.respectFrame,clippingPath:Q.clippingPath,effects:Q.effects};let Fa=[];const Ba=["Rotation","OffsetX","OffsetY"];Fa=aa.filter(fa=>fa.primitiveName!==Q.primitiveName||-1===Ba.indexOf(fa.propertyName));var N="";for(var U of aa)void 0!==U.value&&(N+=`-${U.primitiveName}-${U.propertyName}-${JSON.stringify(U.value)}`);const [ia,P,V]=v.CIMSymbolHelper.getTextureAnchor(S);aa=Q.primitiveName;U=Q.rotation||
0;const Y=Q.offsetX||0,ba=Q.offsetY||0;N=u.numericHash(JSON.stringify(S)+N).toString();X={type:"marker",templateHash:N,materialHash:0===Fa.length?N:M(N,X,Fa,ma),cim:S,materialOverrides:Fa,colorLocked:Q.colorLocked,effects:Q.effects,scaleSymbolsProportionally:Q.scaleSymbolsProportionally,alignment:za,anchorPoint:{x:ia,y:P},isAbsoluteAnchorPoint:!1,size:Q.size,rotation:K(aa,X,"Rotation",ma,U),offsetX:K(aa,X,"OffsetX",ma,Y),offsetY:K(aa,X,"OffsetY",ma,ba),color:{r:255,g:255,b:255,a:1},outlineColor:{r:0,
g:0,b:0,a:0},outlineWidth:0,scaleX:1,frameHeight:va,rotateClockwise:Q.rotateClockwise,referenceSize:wa,sizeRatio:V/r.pt2px(Q.size),markerPlacement:Q.markerPlacement};ra.push(X)}function J(Q){return Q&&0===Q.indexOf("Level_")?parseInt(Q.substr(6),10):0}function F(Q){if(!Q||0===Q.length)return null;Q=(new z(Q)).toRgba();return{r:Q[0],g:Q[1],b:Q[2],a:Q[3]}}function K(Q,S,X,aa,ma,ra,za){if(Q=S[Q]){const wa=Q[X];if("string"===typeof wa||"number"===typeof wa||wa instanceof Array)return ra?ra.call(null,
wa,za):wa;if(null!=wa&&wa instanceof m.ArcadeExpression)return(va,Fa,Ba)=>{va=q(wa,va,{$view:Ba},aa.geometryType,Fa);null!==va&&ra&&(va=ra.call(null,va,za));return null!==va?va:ma}}return ma}function M(Q,S,X,aa){for(const ma of X)if(ma.valueExpressionInfo){const ra=S[ma.primitiveName]&&S[ma.primitiveName][ma.propertyName];ra instanceof m.ArcadeExpression&&(ma.fn=(za,wa,va)=>q(ra,za,{$view:va},aa.geometryType,wa))}return(ma,ra,za)=>{for(const wa of X)wa.fn&&(wa.value=wa.fn(ma,ra,za));return u.numericHash(Q+
v.OverrideHelper.buildOverrideKey(X)).toString()}}function R(Q,S){let X=!1,aa="";for(const ma of Q)ma.primitiveName===S&&(void 0!==ma.value?aa+=`-${ma.primitiveName}-${ma.propertyName}-${JSON.stringify(ma.value)}`:ma.valueExpressionInfo&&(X=!0));return[X,aa]}const T=x.getLogger("esri.symbols.cim.cimAnalyzer");n.analyzeCIMResource=function(Q,S){if(!S||0===S.length)return Q;Q=JSON.parse(JSON.stringify(Q));v.OverrideHelper.applyOverrides(Q,S);return Q};n.analyzeCIMSymbol=function(Q,S,X,aa){return k.apply(this,
arguments)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/CIMSymbolHelper":function(){define("exports ../../Color ../../core/Logger ../../core/mathUtils ./CIMPlacements ./CIMSymbolDrawHelper ./packingUtils".split(" "),function(n,c,z,x,r,u,m){function v(g,a){switch(a.type){case "CIMSymbolReference":g.drawSymbol(a.symbol,{type:"point",x:0,y:0});break;case "CIMPointSymbol":g.drawSymbol(a,{type:"point",x:0,y:0});break;case "CIMVectorMarker":{const b=new r.Placement;g.drawMarker(a,
b)}}return g.envelope()}const p=Math.PI,f=p/2,q=z.getLogger("esri.symbols.cim.CIMSymbolHelper");z=function(){function g(){}g.getEnvelope=function(a){const b=new u.EnvDrawHelper;if(Array.isArray(a)){let d;for(const h of a)d?d.union(v(b,h)):d=v(b,h);return d}return v(b,a)};g.getTextureAnchor=function(a){a=this.getEnvelope(a);if(!a||0>=a.width||0>=a.height)return[0,0,0];const b=96/72,d=a.height*b+2;return[(a.x+.5*a.width)*b/(a.width*b+2),-(a.y+.5*a.height)*b/d,d]};g.rasterize=function(a,b,d,h=!0){var k=
d||this.getEnvelope(b);if(!k||0>=k.width||0>=k.height)return[null,0,0,0,0];var e=96/72;const w=(k.x+.5*k.width)*e,y=(k.y+.5*k.height)*e;a.width=k.width*e;a.height=k.height*e;d||(a.width+=2,a.height+=2);d=a.getContext("2d");e=u.Transformation.createScale(e,-e);e.translate(.5*a.width-w,.5*a.height+y);e=new u.CanvasDrawHelper(d,e);switch(b.type){case "CIMPointSymbol":e.drawSymbol(b,{type:"point",x:0,y:0});break;case "CIMVectorMarker":k=new r.Placement,e.drawMarker(b,k)}b=d.getImageData(0,0,a.width,a.height);
b=new Uint8Array(b.data);if(h)for(d=0;d<b.length;d+=4)h=b[d+3]/255,b[d]*=h,b[d+1]*=h,b[d+2]*=h;return[b,a.width,a.height,-w/a.width,-y/a.height]};g.fromSimpleMarker=function(a){var b=a.style;if("circle"===b||"esriSMSCircle"===b){var d=Math.acos(.995);var h=Math.ceil(p/d/4);0===h&&(h=1);d=f/h;h*=4;b=[];b.push([50,0]);for(let e=1;e<h;e++)b.push([50*Math.cos(e*d),-50*Math.sin(e*d)]);b.push([50,0]);d={rings:[b]};h={xmin:-50,ymin:-50,xmax:50,ymax:50}}else if("cross"===b||"esriSMSCross"===b)d={rings:[[[0,
50],[0,0],[50,0],[50,-0],[0,-0],[0,-50],[-0,-50],[-0,-0],[-50,-0],[-50,0],[-0,0],[-0,50],[0,50]]]},h={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("diamond"===b||"esriSMSDiamond"===b)d={rings:[[[-50,0],[0,50],[50,0],[0,-50],[-50,0]]]},h={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("square"===b||"esriSMSSquare"===b)d={rings:[[[-50,-50],[-50,50],[50,50],[50,-50],[-50,-50]]]},h={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("x"===b||"esriSMSX"===b)d={rings:[[[0,0],[50,50],[50,50],[0,0],[50,-50],[50,-50],[0,
-0],[-50,-50],[-50,-50],[-0,0],[-50,50],[-50,50],[0,0]]]},h={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("triangle"===b||"esriSMSTriangle"===b)h=2/3*100,b=h-100,d={rings:[[[-57.735026918962575,b],[0,h],[57.735026918962575,b],[-57.735026918962575,b]]]},h={xmin:-57.735026918962575,ymin:b,xmax:57.735026918962575,ymax:h};else if("arrow"===b||"esriSMSArrow"===b)d={rings:[[[-50,50],[50,0],[-50,-50],[-33,-20],[-33,20],[-50,50]]]},h={xmin:-50,ymin:-50,xmax:50,ymax:50};if(d&&h){var k=[{type:"CIMSolidFill",
enable:!0,color:a.color}];a.outline&&k.push({type:"CIMSolidStroke",enable:!0,width:a.outline.width,color:a.outline.color});k={type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:a.angle,size:a.size,offsetX:a.xoffset,offsetY:a.yoffset,frame:h,markerGraphics:[{type:"CIMMarkerGraphic",geometry:d,symbol:{type:"CIMPolygonSymbol",symbolLayers:k}}]}]}}return k};g.fromCIMHatchFill=function(a){const b=void 0!==a.separation?a.separation:4,d=b/2;for(var h=this._getLineSymbolPeriod(a.lineSymbol)||
4;4>h;)h*=2;h/=2;return{type:"CIMVectorMarker",frame:{xmin:-h,xmax:h,ymin:-d,ymax:d},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[-h,0],[h,0]]]},symbol:a.lineSymbol}],size:b}};g._getLineSymbolPeriod=function(a){if(a){const b=this._getEffectsRepeat(a.effects);if(b)return b;if(a.symbolLayers)for(const d of a.symbolLayers)if((a=this._getEffectsRepeat(d.effects))||d&&(a=this._getPlacementRepeat(d.markerPlacement)))return a}return 0};g._getEffectsRepeat=function(a){if(a)for(var b of a)if(b)switch(b.type){case "CIMGeometricEffectDashes":if((a=
b.dashTemplate)&&a.length){b=0;for(const d of a)b+=d;a.length&1&&(b*=2);return b}break;case "CIMGeometricEffectWave":return b.period;default:q.error(`unsupported geometric effect type ${b.type}`)}return 0};g._getPlacementRepeat=function(a){if(a)switch(a.type){case "CIMMarkerPlacementAlongLineSameSize":case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineVariableSize":if((a=a.placementTemplate)&&a.length){let b=0;for(const d of a)b+=d;a.length&1&&(b*=2);return b}}return 0};
g.fromCIMInsidePolygon=function(a){var b=a.markerPlacement;const d={type:a.type,...a,markerPlacement:null,anchorPoint:null};let h,k;!0===b.shiftOddRows?(a=b.stepX/2,h=b.stepY,k=2*b.stepY,b=[{x:-a,y:0},{x:a,y:0},{x:0,y:h},{x:0,y:-h}].map(e=>({type:"CIMMarkerGraphic",geometry:e,symbol:{type:"CIMPointSymbol",symbolLayers:[d]}}))):(a=b.stepX/2,h=b.stepY/2,k=b.stepY,b=[{type:"CIMMarkerGraphic",geometry:{x:0,y:0},symbol:{type:"CIMPointSymbol",symbolLayers:[d]}}]);return{type:"CIMVectorMarker",frame:{xmin:-a,
xmax:a,ymin:-h,ymax:h},markerGraphics:b,size:k}};g.getFillColor=function(a){if(!a)return null;switch(a.type){case "CIMPolygonSymbol":if(a.symbolLayers)for(const b of a.symbolLayers)if(a=g.getFillColor(b),null!=a)return a;break;case "CIMTextSymbol":return g.getFillColor(a.symbol);case "CIMSolidFill":return a.color}};g.getStrokeColor=function(a){if(a)switch(a.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(a.symbolLayers)for(const b of a.symbolLayers)if(a=g.getStrokeColor(b),void 0!==a)return a;
break;case "CIMTextSymbol":return g.getStrokeColor(a.symbol);case "CIMSolidStroke":return a.color}};g.getStrokeWidth=function(a){if(a)switch(a.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(a.symbolLayers)for(const b of a.symbolLayers)if(a=g.getStrokeWidth(b),void 0!==a)return a;break;case "CIMTextSymbol":return g.getStrokeWidth(a.symbol);case "CIMSolidStroke":case "CIMGradientStroke":case "CIMPictureStroke":return a.width}};g.getSize=function(a){if(a)switch(a.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":{let b=
0;if(a.symbolLayers)for(const d of a.symbolLayers)a=g.getSize(d),a>b&&(b=a);return b}case "CIMSolidStroke":case "CIMPictureStroke":case "CIMGradientStroke":return a.width;case "CIMCharacterMarker":case "CIMPictureMarker":case "CIMVectorMarker":return a.size}};g.getMarkerScaleRatio=function(a){if(a)switch(a.type){case "CIMVectorMarker":if(!1!==a.scaleSymbolsProportionally&&a.frame)return a.size/(a.frame.ymax-a.frame.ymin)}return 1};return g}();let l=function(){function g(){}g.rasterizeSimpleFill=function(a,
b,d){"solid"!==b&&"none"!==b&&"esriSFSSolid"!==b&&"esriSFSNull"!==b||console.error("Unexpected: style does not require rasterization");d=x.nextPowerOfTwo(Math.ceil(d));var h=this._isHorizontalOrVertical(b)?8*d:16*d;const k=2*d;a.width=h;a.height=h;const e=a.getContext("2d");e.strokeStyle="#FFFFFF";e.lineWidth=d;e.beginPath();if("vertical"===b||"cross"===b||"esriSFSCross"===b||"esriSFSVertical"===b)e.moveTo(h/2,-k),e.lineTo(h/2,h+k);if("horizontal"===b||"cross"===b||"esriSFSCross"===b||"esriSFSHorizontal"===
b)e.moveTo(-k,h/2),e.lineTo(h+k,h/2);if("forward-diagonal"===b||"diagonal-cross"===b||"esriSFSDiagonalCross"===b||"esriSFSForwardDiagonal"===b)e.moveTo(-k,-k),e.lineTo(h+k,h+k),e.moveTo(h-k,-k),e.lineTo(h+k,k),e.moveTo(-k,h-k),e.lineTo(k,h+k);if("backward-diagonal"===b||"diagonal-cross"===b||"esriSFSBackwardDiagonal"===b||"esriSFSDiagonalCross"===b)e.moveTo(h+k,-k),e.lineTo(-k,h+k),e.moveTo(k,-k),e.lineTo(-k,k),e.moveTo(h+k,h-k),e.lineTo(h-k,h+k);e.stroke();b=e.getImageData(0,0,a.width,a.height);
b=new Uint8Array(b.data);for(h=0;h<b.length;h+=4)d=b[h+3]/255,b[h]*=d,b[h+1]*=d,b[h+2]*=d;return[b,a.width,a.height]};g.rasterizeSimpleLine=function(a,b){switch(b){case "butt":b="Butt";break;case "square":b="Square";break;default:b="Round"}const d="Butt"===b;switch(a){case "dash":case "esriSLSDash":a=d?[4,3]:[3,4];break;case "dash-dot":case "esriSLSDashDot":a=d?[4,3,1,3]:[3,4,0,4];break;case "dot":case "esriSLSDot":a=d?[1,3]:[0,4];break;case "long-dash":case "esriSLSLongDash":a=d?[8,3]:[7,4];break;
case "long-dash-dot":case "esriSLSLongDashDot":a=d?[8,3,1,3]:[7,4,0,4];break;case "long-dash-dot-dot":case "esriSLSDashDotDot":a=d?[8,3,1,3,1,3]:[7,4,0,4,0,4];break;case "short-dash":case "esriSLSShortDash":a=d?[4,1]:[3,2];break;case "short-dash-dot":case "esriSLSShortDashDot":a=d?[4,1,1,1]:[3,2,0,2];break;case "short-dash-dot-dot":case "esriSLSShortDashDotDot":a=d?[4,1,1,1,1,1]:[3,2,0,2,0,2];break;case "short-dot":case "esriSLSShortDot":a=d?[1,1]:[0,2];break;case "solid":case "esriSLSSolid":case "none":q.error("Unexpected: style does not require rasterization");
a=[0,0];break;default:q.error(`Tried to rasterize SLS, but found an unexpected style: ${a}!`),a=[0,0]}return this.rasterizeDash(a,b)};g.rasterizeDash=function(a,b){var d="Butt"===b,h="Square"===b;b=!d&&!h;1===a.length%2&&(a=[...a,...a]);var k=0;for(var e of a)k+=e;e=Math.round(15.5*k);k=new Float32Array(31*e);let w=0,y=0,C=.5,B=!0;for(var A of a){w=y;for(y+=15.5*A;C<=y;){for(a=.5;31>a;){const D=b?(a-15.5)*(a-15.5):Math.abs(a-15.5);k[(a-.5)*e+C-.5]=B?d?Math.max(Math.max(w+7.75-C,D),Math.max(C-y+7.75,
D)):D:b?Math.min((C-w)*(C-w)+D,(C-y)*(C-y)+D):h?Math.min(Math.max(C-w,D),Math.max(y-C,D)):Math.min(Math.max(C-w+7.75,D),Math.max(y+7.75-C,D));a++}C++}B=!B}d=k.length;A=new Uint8Array(4*d);for(h=0;h<d;++h)m.packFloatRGBA((b?Math.sqrt(k[h]):k[h])/15.5,A,4*h);return[A,e,31]};g._isHorizontalOrVertical=function(a){return"vertical"===a||"horizontal"===a||"cross"===a||"esriSFSCross"===a||"esriSFSVertical"===a||"esriSFSHorizontal"===a};return g}(),t=function(){function g(){}g.findApplicableOverrides=function(a,
b,d){if(b){if(a.primitiveName){let h=!1;for(const k of d)if(k.primitiveName===a.primitiveName){h=!0;break}if(!h)for(const k of b)k.primitiveName===a.primitiveName&&d.push(k)}switch(a.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":if(a.effects)for(const h of a.effects)g.findApplicableOverrides(h,b,d);if(a.symbolLayers)for(const h of a.symbolLayers)g.findApplicableOverrides(h,b,d);break;case "CIMSolidStroke":case "CIMPictureStroke":case "CIMGradientStroke":case "CIMSolidFill":case "CIMPictureFill":case "CIMHatchFill":case "CIMGradientFill":case "CIMVectorMarker":case "CIMCharacterMarker":case "CIMPictureMarker":if(a.effects)for(const h of a.effects)g.findApplicableOverrides(h,
b,d);a.markerPlacement&&g.findApplicableOverrides(a.markerPlacement,b,d);if("CIMVectorMarker"===a.type){if(a.markerGraphics)for(const h of a.markerGraphics)g.findApplicableOverrides(h,b,d),g.findApplicableOverrides(h.symbol,b,d)}else"CIMCharacterMarker"===a.type?g.findApplicableOverrides(a.symbol,b,d):"CIMHatchFill"===a.type&&g.findApplicableOverrides(a.lineSymbol,b,d)}}};g.applyOverrides=function(a,b,d,h){if(b){if(a.primitiveName)for(const e of b)if(e.primitiveName===a.primitiveName){var k=(k=e.propertyName)?
k.charAt(0).toLowerCase()+k.substr(1):k;h&&h.push({cim:a,nocapPropertyName:k,value:a[k]});e.expression&&(e.value=g.toValue(e.propertyName,e.expression));if(d){let w=!1;for(const y of d)y.primitiveName===a.primitiveName&&(w=!0);w||d.push(e)}a[k]=e.value}switch(a.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":if(a.effects)for(const e of a.effects)g.applyOverrides(e,b,d,h);if(a.symbolLayers)for(const e of a.symbolLayers)g.applyOverrides(e,b,d,h);break;case "CIMSolidStroke":case "CIMSolidFill":case "CIMVectorMarker":if(a.effects)for(const e of a.effects)g.applyOverrides(e,
b,d,h);if("CIMVectorMarker"===a.type&&a.markerGraphics)for(const e of a.markerGraphics)g.applyOverrides(e,b,d,h),g.applyOverrides(e.symbol,b,d,h)}}};g.restoreOverrides=function(a){for(const b of a)b.cim[b.nocapPropertyName]=b.value};g.buildOverrideKey=function(a){let b="";for(const d of a)void 0!==d.value&&(b+=`${d.primitiveName}${d.propertyName}${JSON.stringify(d.value)}`);return b};g.toValue=function(a,b){return"DashTemplate"===a?b.split(" ").map(d=>Number(d)):"Color"===a?(a=(new c(b)).toRgba(),
a[3]*=255,a):b};return g}();n.CIMSymbolHelper=z;n.OverrideHelper=t;n.SymbolHelper=l;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/CIMSymbolDrawHelper":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Logger ../../geometry/support/aaBoundingRect ../../geometry/support/boundsUtils ../../geometry/support/jsonUtils ./CIMEffects ./CIMOperators ./CIMPlacements ./Rect".split(" "),function(n,c,z,x,r,u,m,v,p,f){const q=Math.PI/180,l=z.getLogger("esri.symbols.cim.CIMSymbolDrawHelper");
let t=function(){function d(k){this._t=k}d.createIdentity=function(){return new d([1,0,0,0,1,0])};var h=d.prototype;h.clone=function(){return new d(this._t.slice())};h.transform=function(k){const e=this._t;return[e[0]*k[0]+e[1]*k[1]+e[2],e[3]*k[0]+e[4]*k[1]+e[5]]};d.createScale=function(k,e){return new d([k,0,0,0,e,0])};h.scale=function(k,e){const w=this._t;w[0]*=k;w[1]*=k;w[2]*=k;w[3]*=e;w[4]*=e;w[5]*=e;return this};h.scaleRatio=function(){return Math.sqrt(this._t[0]*this._t[0]+this._t[1]*this._t[1])};
d.createTranslate=function(k,e){return new d([0,0,k,0,0,e])};h.translate=function(k,e){const w=this._t;w[2]+=k;w[5]+=e;return this};d.createRotate=function(k){const e=Math.cos(k);k=Math.sin(k);return new d([e,-k,0,k,e,0])};h.rotate=function(k){return this.multiply(d.createRotate(k))};h.multiply=function(k){const e=this._t;k=k._t;const w=e[1]*k[0]+e[4]*k[1],y=e[2]*k[0]+e[5]*k[1]+k[2],C=e[0]*k[3]+e[3]*k[4],B=e[1]*k[3]+e[4]*k[4],A=e[2]*k[3]+e[5]*k[4]+k[5];e[0]=e[0]*k[0]+e[3]*k[1];e[1]=w;e[2]=y;e[3]=
C;e[4]=B;e[5]=A;return this};return d}();z=function(){function d(k){this._transfos=[];this._sizeTransfos=[];this._transfos.push(k||t.createIdentity());this._sizeTransfos.push(k?k.scaleRatio():1)}var h=d.prototype;h.transformPt=function(k){return this._transfos[this._transfos.length-1].transform(k)};h.transformSize=function(k){return k*this._sizeTransfos[this._sizeTransfos.length-1]};h.back=function(){return this._transfos[this._transfos.length-1]};h.push=function(k,e){e=e?k.scaleRatio():1;k.multiply(this.back());
this._transfos.push(k);this._sizeTransfos.push(this._sizeTransfos[this._sizeTransfos.length-1]*e)};h.pop=function(){this._transfos.splice(-1,1);this._sizeTransfos.splice(-1,1)};h.drawSymbol=function(k,e){if(k)switch(k.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":this.drawMultiLayerSymbol(k,e)}};h.drawMultiLayerSymbol=function(k,e){if(k){var w=k.symbolLayers;if(w)if(k=k.effects){if(e=this.executeEffects(k,e))for(k=e.next();k;)this.drawSymbolLayers(w,k),k=e.next()}else this.drawSymbolLayers(w,
e)}};h.executeEffects=function(k,e){e=new m.SimpleGeometryCursor(e);for(const w of k)(k=v.getEffectOperator(w))&&(e=k.execute(e,w,1));return e};h.drawSymbolLayers=function(k,e){let w=k.length;for(;w--;){const C=k[w];if(C&&!1!==C.enable){var y=C.effects;if(y){if(y=this.executeEffects(y,e)){let B=y.next();for(;B;)this.drawSymbolLayer(C,B),B=y.next()}}else this.drawSymbolLayer(C,e)}}};h.drawSymbolLayer=function(k,e){switch(k.type){case "CIMSolidFill":this.drawSolidFill(e,k.color);break;case "CIMHatchFill":this.drawHatchFill(k,
e);break;case "CIMSolidStroke":this.drawSolidStroke(e,k.color,k.width,k.capStyle,k.joinStyle,k.miterLimit);break;case "CIMCharacterMarker":case "CIMPictureMarker":case "CIMVectorMarker":this.drawMarkerLayer(k,e)}};h.drawHatchFill=function(k,e){const w=this._buildHatchPolyline(k,e,1);w&&(this.pushClipPath(e),this.drawMultiLayerSymbol(k.lineSymbol,w),this.popClipPath())};h.drawMarkerLayer=function(k,e){var w=k.markerPlacement;if(w){const C=v.getPlacementOperator(w);if(C){var y="CIMMarkerPlacementInsidePolygon"===
w.type;y&&this.pushClipPath(e);if(e=C.execute(e,w,1))for(w=e.next();w;)this.drawMarker(k,w),w=e.next();y&&this.popClipPath()}}else y=new p.Placement,y.tx=e.x,y.ty=e.y,this.drawMarker(k,y)};h.drawMarker=function(k,e){switch(k.type){case "CIMCharacterMarker":case "CIMPictureMarker":this.drawPictureMarker(k,e);break;case "CIMVectorMarker":this.drawVectorMarker(k,e)}};h.drawPictureMarker=function(k,e){if(k){var w=k.size||10,y=t.createIdentity(),C=k.anchorPoint;if(C){let B=C.x;C=C.y;"Absolute"!==k.anchorPointUnits&&
(B*=w,C*=w);y.translate(-B,-C)}k.rotation&&y.rotate(k.rotation*q);y.translate(k.offsetX||0,k.offsetY||0);y.translate(e.tx,e.ty);this.push(y,!1);this.drawImage(k.url,w,k.scaleX);this.pop()}};h.drawVectorMarker=function(k,e){if(k){var w=k.markerGraphics;if(w){var y=k.size,C=k.frame,B=C?C.ymax-C.ymin:0;y=y&&B?y/B:1;B=t.createIdentity();C&&B.translate(.5*-(C.xmax+C.xmin),.5*-(C.ymax+C.ymin));var A=k.anchorPoint;if(A){let D=A.x;A=A.y;"Absolute"!==k.anchorPointUnits?C&&(D*=C.xmax-C.xmin,A*=C.ymax-C.ymin):
(D/=y,A/=y);B.translate(-D,-A)}1!==y&&B.scale(y,y);k.rotation&&B.rotate(k.rotation*q);B.translate(k.offsetX||0,k.offsetY||0);B.translate(e.tx,e.ty);this.push(B,k.scaleSymbolsProportionally);for(const D of w)D&&D.symbol&&D.geometry||l.error("Invalid marker graphic",D),this.drawSymbol(D.symbol,D.geometry);this.pop()}}};h._buildHatchPolyline=function(k,e,w){var y=(void 0!==k.separation?k.separation:4)*w,C=void 0!==k.rotation?k.rotation:0;if(0===y)return null;0>y&&(y=-y);for(var B=0,A=.5*y;B>A;)B-=y;
for(;B<-A;)B+=y;B=x.create();r.getBoundsXY(B,e);B[0]-=A;B[1]-=A;B[2]+=A;B[3]+=A;for(var D=[[B[0],B[1]],[B[0],B[3]],[B[2],B[3]],[B[2],B[1]]];180<C;)C-=180;for(;0>C;)C+=180;A=Math.cos(C*q);var E=Math.sin(C*q);C=-y*E;e=y*A;B=(void 0!==k.offsetX?k.offsetX*w:0)*E-(void 0!==k.offsetY?k.offsetY*w:0)*A;let G;var I=k=Number.MAX_VALUE;G=w=-Number.MAX_VALUE;for(var L of D){var J=L[0];const F=L[1];D=A*J+E*F;J=-E*J+A*F;I=Math.min(I,D);k=Math.min(k,J);G=Math.max(G,D);w=Math.max(w,J)}k=Math.floor(k/y)*y;L=A*I-E*
k-C*B/y;I=E*I+A*k-e*B/y;D=A*G-E*k-C*B/y;B=E*G+A*k-e*B/y;y=1+Math.round((w-k)/y);A=[];for(E=0;E<y;E++)L+=C,I+=e,D+=C,B+=e,A.push([[L,I],[D,B]]);return{paths:A}};return d}();let g=function(d){function h(){var e=d.call(this)||this;e.reset();return e}c._inheritsLoose(h,d);var k=h.prototype;k.reset=function(){this._xmin=this._ymin=Infinity;this._xmax=this._ymax=-Infinity;this._clipCount=0};k.envelope=function(){return new f(this._xmin,this._ymin,this._xmax-this._xmin,this._ymax-this._ymin)};k.drawSolidFill=
function(e){!e||0<this._clipCount||(u.isPolygon(e)?this._processPath(e.rings,0):u.isPolyline(e)?this._processPath(e.paths,0):u.isExtent(e)&&(e=b(e))&&this._processPath(e.rings,0))};k.drawSolidStroke=function(e,w,y){!e||0<this._clipCount||(w=.5*this.transformSize(y),u.isPolygon(e)?this._processPath(e.rings,w):u.isPolyline(e)?this._processPath(e.paths,w):u.isExtent(e)&&(e=b(e))&&this._processPath(e.rings,w))};k.pushClipPath=function(e){this.drawSolidFill(e);++this._clipCount};k.popClipPath=function(){--this._clipCount};
k.drawImage=function(e,w,y){e=w/2;this._merge(this.transformPt([0,0]),e)};k._processPath=function(e,w){if(e)for(const y of e)if(e=y?y.length:0,1<e){this._merge(this.transformPt(y[0]),w);for(let C=1;C<e;++C)this._merge(this.transformPt(y[C]),w)}};k._merge=function(e,w){e[0]-w<this._xmin&&(this._xmin=e[0]-w);e[0]+w>this._xmax&&(this._xmax=e[0]+w);e[1]-w<this._ymin&&(this._ymin=e[1]-w);e[1]+w>this._ymax&&(this._ymax=e[1]+w)};return h}(z),a=function(d){function h(e,w){w=d.call(this,w)||this;w._ctx=e;
return w}c._inheritsLoose(h,d);var k=h.prototype;k.drawSolidFill=function(e,w){if(e){if(u.isPolygon(e))this._buildPath(e.rings,!0);else if(u.isPolyline(e))this._buildPath(e.paths,!0);else if(u.isExtent(e))this._buildPath(b(e).rings,!0);else return;e=this._ctx;e.fillStyle="string"===typeof w?w:"rgba("+Math.round(w[0])+","+Math.round(w[1])+","+Math.round(w[2])+","+w[3]/255+")";e.fill("evenodd")}};k.drawSolidStroke=function(e,w,y,C,B,A){if(e&&w&&0!==y){if(u.isPolygon(e))this._buildPath(e.rings,!0);else if(u.isPolyline(e))this._buildPath(e.paths,
!1);else if(u.isExtent(e))this._buildPath(b(e).rings,!0);else return;e=this._ctx;e.strokeStyle="string"===typeof w?w:"rgba("+Math.round(w[0])+","+Math.round(w[1])+","+Math.round(w[2])+","+w[3]/255+")";e.lineWidth=this.transformSize(y)+.5;this._setCapStyle(C);this._setJoinStyle(B);e.miterLimit=A;e.stroke()}};k.pushClipPath=function(e){this._ctx.save();if(u.isPolygon(e))this._buildPath(e.rings,!0);else if(u.isPolyline(e))this._buildPath(e.paths,!0);else if(u.isExtent(e))this._buildPath(b(e).rings,!0);
else return;this._ctx.clip("evenodd")};k.popClipPath=function(){this._ctx.restore()};k.drawImage=function(e,w,y){};k._buildPath=function(e,w){const y=this._ctx;y.beginPath();if(e)for(const C of e)if(e=C?C.length:0,1<e){let B=this.transformPt(C[0]);y.moveTo(B[0],B[1]);for(let A=1;A<e;++A)B=this.transformPt(C[A]),y.lineTo(B[0],B[1]);w&&y.closePath()}};k._setCapStyle=function(e){switch(e){case "Butt":this._ctx.lineCap="butt";break;case "Round":this._ctx.lineCap="round";break;case "Square":this._ctx.lineCap=
"square"}};k._setJoinStyle=function(e){switch(e){case "Bevel":this._ctx.lineJoin="bevel";break;case "Round":this._ctx.lineJoin="round";break;case "Miter":this._ctx.lineJoin="miter"}};return h}(z);const b=d=>d?{spatialReference:d.spatialReference,rings:[[[d.xmin,d.ymin],[d.xmin,d.ymax],[d.xmax,d.ymax],[d.xmax,d.ymin],[d.xmin,d.ymin]]]}:null;n.CIMSymbolDrawHelper=z;n.C_DEG_TO_RAD=q;n.CanvasDrawHelper=a;n.EnvDrawHelper=g;n.Transformation=t;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/Rect":function(){define(["../../chunks/_rollupPluginBabelHelpers"],
function(n){return function(){function c(z=0,x=0,r=0,u=0){this.x=z;this.y=x;this.width=r;this.height=u}c.prototype.union=function(z){this.x=Math.min(this.x,z.x);this.y=Math.min(this.y,z.y);this.width=Math.max(this.width,z.width);this.height=Math.max(this.height,z.height)};n._createClass(c,[{key:"isEmpty",get:function(){return 0>=this.width||0>=this.height}}]);return c}()})},"esri/symbols/cim/packingUtils":function(){define(["exports"],function(n){function c(m,v=0){let p=0;for(let f=0;4>f;f++)p+=m[v+
f]*r[f];return p}function z(m){return m-Math.floor(m)}const x=[1,256,65536,16777216],r=[1/256,1/65536,1/16777216,1/4294967296],u=c(new Uint8ClampedArray([255,255,255,255]));n.packFloatRGBA=function(m,v,p=0){m=0>m?0:m>u?u:m;for(let f=0;4>f;f++)v[p+f]=Math.floor(256*z(m*x[f]))};n.unpackFloatRGBA=c;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/SDFHelper":function(){define(["exports","../../geometry/support/jsonUtils","./packingUtils","./Rect"],function(n,c,z,x){function r(m){if(!m)return null;
switch(m.type){case "CIMPointSymbol":m=m.symbolLayers;if(!m||1!==m.length)break;return r(m[0]);case "CIMVectorMarker":m=m.markerGraphics;if(!m||1!==m.length)break;var v=m[0];if(!v)break;m=v.geometry;if(!m)break;v=v.symbol;if(!v||"CIMPolygonSymbol"!==v.type&&"CIMLineSymbol"!==v.type)break;return{geom:m,asFill:"CIMPolygonSymbol"===v.type};case "sdf":return{geom:m.geom,asFill:m.asFill}}return null}function u(m){let v=Infinity,p=-Infinity,f=Infinity,q=-Infinity;for(const l of m)for(const t of l)t[0]<
v&&(v=t[0]),t[0]>p&&(p=t[0]),t[1]<f&&(f=t[1]),t[1]>q&&(q=t[1]);return[v,f,p,q]}n.buildSDF=function(m){var v=m.geom;var p=v?v.rings?v.rings:v.paths?v.paths:void 0!==v.xmin&&void 0!==v.ymin&&void 0!==v.xmax&&void 0!==v.ymax?[[[v.xmin,v.ymin],[v.xmin,v.ymax],[v.xmax,v.ymax],[v.xmax,v.ymin],[v.xmin,v.ymin]]]:null:null;v=Infinity;var f=-Infinity;var q=Infinity,l=-Infinity;for(var t of p)for(var g of t)g[0]<v&&(v=g[0]),g[0]>f&&(f=g[0]),g[1]<q&&(q=g[1]),g[1]>l&&(l=g[1]);f=new x(v,q,f-v,l-q);q=64/Math.max(f.width,
f.height);t=Math.round(f.width*q)+62;g=Math.round(f.height*q)+62;v=[];for(var a of p)if(a&&1<a.length){p=[];for(var b of a){let [D,E]=b;D-=f.x;E-=f.y;D*=q;E*=q;D+=30.5;E+=30.5;m.asFill?p.push([D,E]):p.push([Math.round(D),Math.round(E)])}m.asFill&&(l=p.length-1,p[0][0]===p[l][0]&&p[0][1]===p[l][1]||p.push(p[0]));v.push(p)}var d;a=t*g;b=Array(a);for(p=0;p<a;++p)b[p]=962;for(d of v)for(p=d.length,f=1;f<p;++f){q=d[f-1];l=d[f];var h=void 0,k=void 0;q[0]<l[0]?(h=q[0],k=l[0]):(h=l[0],k=q[0]);var e=void 0,
w=void 0;q[1]<l[1]?(e=q[1],w=l[1]):(e=l[1],w=q[1]);var y=Math.floor(h)-31;k=Math.floor(k)+31;e=Math.floor(e)-31;w=Math.floor(w)+31;0>y&&(y=0);k>t&&(k=t);0>e&&(e=0);w>g&&(w=g);h=l[0]-q[0];const D=l[1]-q[1],E=h*h+D*D;for(;y<k;y++)for(let G=e;G<w;G++){var C=(y-q[0])*h+(G-q[1])*D,B=void 0;0>C?(B=q[0],C=q[1]):C>E?(B=l[0],C=l[1]):(C/=E,B=q[0]+C*h,C=q[1]+C*D);B=(y-B)*(y-B)+(G-C)*(G-C);C=(g-G-1)*t+y;B<b[C]&&(b[C]=B)}}for(d=0;d<a;++d)b[d]=Math.sqrt(b[d]);d=b;if(m.asFill)for(var A of v)for(m=A.length,v=1;v<
m;++v)for(a=A[v-1],b=A[v],a[0]<b[0]?(p=a[0],f=b[0]):(p=b[0],f=a[0]),a[1]<b[1]?(l=a[1],q=b[1]):(l=b[1],q=a[1]),p=Math.floor(p),f=Math.floor(f)+1,l=Math.floor(l),q=Math.floor(q)+1,31>p&&(p=31),f>t-31&&(f=t-31),31>l&&(l=31),q>g-31&&(q=g-31);l<q;++l)if(a[1]>l!==b[1]>l){k=(g-l-1)*t;for(e=p;e<f;++e)e<(b[0]-a[0])*(l-a[1])/(b[1]-a[1])+a[0]&&(d[k+e]=-d[k+e]);for(e=31;e<p;++e)d[k+e]=-d[k+e]}A=d.length;m=new Uint8Array(4*A);for(v=0;v<A;++v)z.packFloatRGBA(.5-d[v]/62,m,4*v);A=m;return[A,t,g]};n.getExtent=function(m){return m?
m.rings?u(m.rings):m.paths?u(m.paths):c.isExtent(m)?[m.xmin,m.ymin,m.xmax,m.ymax]:null:null};n.getSDFInfo=r;n.getSDFMetrics=function(m,v,p,f,q){const [l,t,g,a]=m;if(g<l||a<t)return[0,0,0];var b=g-l,d=a-t;m=64/Math.max(b,d);b=Math.round(b*m);d=Math.round(d*m)+62;let h=1;v&&(h=d/m/(v.ymax-v.ymin));let k=0,e=0;f&&(q?v&&p&&0<v.ymax-v.ymin&&(k=f.x/((v.xmax-v.xmin)/(v.ymax-v.ymin)*p),e=f.y/p):(k=f.x,e=f.y));k=.5*(v.xmax+v.xmin)+k*(v.xmax-v.xmin);e=.5*(v.ymax+v.ymin)+e*(v.ymax-v.ymin);k=(k-l)*m+31;e=(e-
t)*m+31;return[h,k/(b+62)-.5,-(e/d-.5)]};n.getSDFSymbol=function(m){m=m.markerGraphics;if(!m||1!==m.length)return null;m=m[0];if(!m)return null;m=m.symbol;return!m||"CIMPolygonSymbol"!==m.type&&"CIMLineSymbol"!==m.type?null:m};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/utils":function(){define(["exports"],function(n){function c(z,x){"string"!==typeof z&&(z=String(z));switch(x){case "LowerCase":return z.toLowerCase();case "Allcaps":return z.toUpperCase();default:return z}}
n._adjustTextCase=c;n.colorToArray=function(z){return[z.r,z.g,z.b,z.a]};n.createLabelOverrideFunction=function(z,x,r){const u=f=>{let q=f.length;for(;q--;)if(-1===" /-,\n".indexOf(f.charAt(q)))return!1;return!0},m=[];var v=0;let p=-1;do p=x.indexOf("[",v),p>=v&&(p>v&&(v=x.substr(v,p-v),m.push([v,null,u(v)])),v=p+1,p=x.indexOf("]",v),p>=v&&(p>v&&(v=x.substr(v,p-v),(v=z[v])&&m.push([null,v,!1])),v=p+1));while(-1!==p);v<x.length-1&&(z=x.substr(v),m.push([z,null,u(z)]));return f=>{let q="",l=null;for(const t of m){const [g,
a,b]=t;if(g)b?l=g:(l&&(q+=l,l=null),q+=g);else{const d=f.attributes[a];d&&(l&&(q+=l,l=null),q+=d)}}return c(q,r)}};n.evaluateValueOrFunction=function(z,x,r,u){return"function"===typeof z?z(x,r,u):z};n.fromCIMColor=function(z){return z?{r:z[0],g:z[1],b:z[2],a:z[3]/255}:{r:0,g:0,b:0,a:0}};n.isCIMFill=function(z){return"CIMGradientFill"===z.type||"CIMHatchFill"===z.type||"CIMPictureFill"===z.type||"CIMSolidFill"===z.type||"CIMWaterFill"===z.type};n.isCIMMarker=function(z){return"CIMVectorMarker"===z.type||
"CIMPictureMarker"===z.type||"CIMBarChartMarker"===z.type||"CIMCharacterMarker"===z.type||"CIMPieChartMarker"===z.type||"CIMStackedBarChartMarker"===z.type};n.isCIMMarkerStrokePlacement=function(z){return"CIMMarkerPlacementAlongLineRandomSize"===z.type||"CIMMarkerPlacementAlongLineSameSize"===z.type||"CIMMarkerPlacementAlongLineVariableSize"===z.type||"CIMMarkerPlacementAtExtremities"===z.type||"CIMMarkerPlacementAtMeasuredUnits"===z.type||"CIMMarkerPlacementAtRatioPositions"===z.type||"CIMMarkerPlacementOnLine"===
z.type||"CIMMarkerPlacementOnVertices"===z.type};n.isCIMStroke=function(z){return"CIMGradientStroke"===z.type||"CIMPictureStroke"===z.type||"CIMSolidStroke"===z.type};n.resampleHermite=function(z,x,r,u,m,v,p=!0){const f=x/m;r/=v;const q=Math.ceil(f/2),l=Math.ceil(r/2);for(let a=0;a<v;a++)for(let b=0;b<m;b++){const d=4*(b+(p?v-a-1:a)*m);var t=0;let h=0,k=0,e=0,w=0,y=0,C=0;const B=(a+.5)*r;for(let A=Math.floor(a*r);A<(a+1)*r;A++){var g=Math.abs(B-(A+.5))/l;const D=(b+.5)*f;g*=g;for(let E=Math.floor(b*
f);E<(b+1)*f;E++){let G=Math.abs(D-(E+.5))/q;t=Math.sqrt(g+G*G);-1<=t&&1>=t&&(t=2*t*t*t-3*t*t+1,0<t&&(G=4*(E+A*x),C+=t*z[G+3],k+=t,255>z[G+3]&&(t=t*z[G+3]/250),e+=t*z[G],w+=t*z[G+1],y+=t*z[G+2],h+=t))}}u[d]=e/h;u[d+1]=w/h;u[d+2]=y/h;u[d+3]=C/k}};n.toCIMSymbolJSON=function(z){var x;return null==(x=z.data)?void 0:x.symbol};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/arcade/callExpressionWithFeature":function(){define(["../../../core/Error","../../../core/Logger","../../../geometry/support/quantizationUtils"],
function(n,c,z){function x(u){const m={};switch(u){case "esriGeometryPoint":return(v,p,f,q)=>z.unquantizePoint(p,m,v,f,q);case "esriGeometryPolygon":return(v,p,f,q)=>z.unquantizePolygon(p,m,v,f,q);case "esriGeometryPolyline":return(v,p,f,q)=>z.unquantizePolyline(p,m,v,f,q);case "esriGeometryMultipoint":return(v,p,f,q)=>z.unquantizeMultipoint(p,m,v,f,q);default:return c.getLogger("esri.views.2d.support.arcadeOnDemand").error(new n("mapview-arcade",`Unable to handle geometryType: ${u}`)),v=>v}}const r=
new Map;return function(u,m,v,p,f){if(u.referencesGeometry()&&f){{const {transform:q,hasZ:l,hasM:t}=f;r.has(p)||r.set(p,x(p));p=r.get(p)(m.geometry,q,l,t);m={...m,geometry:p}}}m=u.repurposeFeature(m);try{return u.evaluate({...v,$feature:m})}catch(q){return c.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",q),null}}})},"esri/views/2d/engine/webgl/util/Result":function(){define(["exports","../../../../../core/Error"],function(n,c){n.ok=function(z,x){return z&&
"name"in z?(x&&x.error(new c(z.name,z.message,z.details)),!1):!0};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicLineTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/screenUtils ../../color ../../definitions ../../number ../../materialKey/MaterialKey ./util ./WGLBaseLineTemplate ./WGLDynamicMeshTemplate ../../util/Result".split(" "),function(n,c,z,x,r,u,m,v,p,f){return function(q){function l(t,
g,a){var b=q.call(this,t)||this;b._minMaxZoom=r.i1616to32(Math.round(g*x.MIN_MAX_ZOOM_PRECISION_FACTOR),Math.round(a*x.MIN_MAX_ZOOM_PRECISION_FACTOR));b._cimLineLayer=t;let d=0;m.isFunction(t.width)||(d=.5*c.pt2px(t.width));b._dynamicPropertyMap.set("_halfWidth",(h,k,e)=>m.isFunction(t.width)?.5*c.pt2px(t.width(h,k,e)):d);m.isFunction(t.cap)?b._dynamicPropertyMap.set("_capType",t.cap):b._capType=t.cap;m.isFunction(t.join)?b._dynamicPropertyMap.set("_joinType",t.join):b._joinType=t.join;m.isFunction(t.color)?
b._dynamicPropertyMap.set("_fillColor",(h,k,e)=>(h=t.color(h,k,e))&&z.premultiplyAlphaRGBA(h)||0):(g=t.color,b._fillColor=g&&z.premultiplyAlphaRGBA(g)||0);m.isFunction(t.miterLimit)?b._dynamicPropertyMap.set("_miterLimitCosine",(h,k,e)=>m.getLimitCosine(t.miterLimit(h,k,e))):b._miterLimitCosine=m.getLimitCosine(t.miterLimit);b._scaleFactor=t.scaleFactor||1;b._isDashed=t.isDashed;b._effects=t.effects;b.tessellationProperties._bitset=t.colorLocked?1:0;b._materialKey=t.materialKey;b._initializeTessellator(!0);
return b}n._inheritsLoose(l,q);l.fromCIMLine=function(t,g){const [a,b]=m.getMinMaxZoom(t.scaleInfo,g);return new l(t,a,b)};l.prototype.bindFeature=function(t,g,a){const b=t.readLegacyFeature();this._dynamicPropertyMap.forEach((h,k)=>{this[k]=h(b,g,a)});this._halfWidth*=this._scaleFactor;t=this._materialCache;var d=this._cimLineLayer.materialHash;d=d(b,g,a);d=t.get(d);t=null;d&&f.ok(d.spriteMosaicItem)&&(t=d.spriteMosaicItem);if(t){this._hasPattern=!0;const {rect:h,width:k,height:e}=t;d=h.x+x.SPRITE_PADDING;
const w=h.y+x.SPRITE_PADDING,y=d+k,C=w+e;this.tessellationProperties._tl=r.i1616to32(d,w);this.tessellationProperties._br=r.i1616to32(y,C)}else this._hasPattern=!1,this.tessellationProperties._tl=0,this.tessellationProperties._br=0;this.tessellationProperties._fillColor=this._fillColor;this.tessellationProperties._halfWidth=this._halfWidth;this.tessellationProperties.offset=0;this.tessellationProperties._halfReferenceWidth=this.tessellationProperties._halfWidth;d=u.LineMaterialKey.load(this._materialKey);
t&&(d.sdf=t.sdf,d.pattern=!0,d.textureBinding=t.textureBinding);this._materialKey=d.data};return l}(v(p))})},"esri/views/2d/engine/webgl/mesh/templates/WGLBaseLineTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../definitions ../../enums ../../number ../../TurboLine ../../materialKey/MaterialKey ./templateUtils".split(" "),function(n,c,z,x,r,u,m,v){const p=(q,l,t)=>(g,a,b,d,h,k,e,w,y,C,B)=>{b=r.i1616to32(B,Math.ceil(1024*q._halfWidth));
e=r.i8888to32(Math.round(31*e),Math.round(31*w),Math.round(31*y),Math.round(31*C));h=r.i8888to32(31*h,31*k,0,q._bitset);k=q.out;k.vertexBounds(g,a,l,t);k.vertexWrite(r.i1616to32(8*g,8*a));k.vertexWrite(q.id);k.vertexWrite(q._fillColor);k.vertexWrite(e);k.vertexWrite(b);k.vertexWrite(q._tl);k.vertexWrite(q._br);k.vertexWrite(h);k.vertexWrite(r.i1616to32(Math.ceil(1024*q._halfReferenceWidth),0));k.vertexWrite(q.minMaxZoom);k.vertexEnd();return q.offset+q.vertexCount++},f=q=>(l,t,g)=>{const a=q.out;
a.indexWrite(l);a.indexWrite(t);a.indexWrite(g);q.indexCount+=3};return q=>function(l){function t(...a){a=l.call(this,...a)||this;a.tessellationProperties={};a._tessellationOptions={halfWidth:0,pixelCoordRatio:1,offset:0};a.geometryType=x.WGLGeometryType.LINE;return a}n._inheritsLoose(t,l);var g=t.prototype;g._initializeTessellator=function(a){var b=m.LineMaterialKey.load(this._materialKey),d=this._tessellationOptions;b=b.vvSizeFieldStops||b.vvSizeMinMaxValue||b.vvSizeScaleStops||b.vvSizeUnitValue;
const h=this.tessellationProperties._halfWidth<z.THIN_LINE_HALF_WIDTH_THRESHOLD;this.tessellationProperties.minMaxZoom=this._minMaxZoom;a=h&&!a&&!b;d.wrapDistance=65535;d.textured=this._isDashed||this._hasPattern;d.offset=this.tessellationProperties.offset;d.halfWidth=this.tessellationProperties._halfWidth;d=a?0:1;this._lineTessellator=new u.LineTessellation(p(this.tessellationProperties,d,d),f(this.tessellationProperties),a)};g._write=function(a,b,d){const h="esriGeometryPoint"===b.geometryType;
a.recordStart(b.getDisplayId(),this._materialKey,this.geometryType,!1,h);this._writeGeometry(a,b,d,h);a.recordEnd()};g._writeGeometry=function(a,b,d,h){d=null!=d?d:b.readLegacyGeometryForDisplay();h=this._getLines(d,h);c.isNone(h)||this._writeVertices(a,b,h)};g._getLines=function(a,b){if(c.isNone(a))return null;a=a.paths||a.rings;return c.isNone(a)?null:v.clipLinesMarshall(a,b?256:16)};g._writeVertices=function(a,b,d){b=b.getDisplayId();const h=a.vertexCount(),k=this.tessellationProperties,e=this._tessellationOptions;
k.out=a;k.id=b;k.indexCount=0;k.vertexCount=0;k.offset=h;e.capType=this._capType;e.joinType=this._joinType;for(const {line:w,start:y}of d)e.initialDistance=y%65535,this._lineTessellator.tessellate(w,e)};return t}(q)})},"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicMarkerTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../core/maybe ../../../../../../core/screenUtils ../../../../../../chunks/mat2df32 ../../../../../../chunks/vec2f32 ../../color ../../definitions ../../number ../../materialKey/MaterialKey ./util ./WGLBaseMarkerTemplate ./WGLDynamicMeshTemplate ../../util/Result".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a){const b=m.create(),d=u.create(),h=z.getLogger("esri.views.2d.engine.webgl.WGLDynamicMarkerTemplate");return function(k){function e(w,y,C){var B=k.call(this,w)||this;B._cimMarkerLayer=w;B._minMaxZoom=f.i1616to32(Math.round(y*p.MIN_MAX_ZOOM_PRECISION_FACTOR),Math.round(C*p.MIN_MAX_ZOOM_PRECISION_FACTOR));l.isFunction(w.color)?B._dynamicPropertyMap.set("_fillColor",(A,D,E)=>v.premultiplyAlphaRGBA(w.color(A,D,E))):B._fillColor=v.premultiplyAlphaRGBA(w.color);l.isFunction(w.outlineColor)?
B._dynamicPropertyMap.set("_outlineColor",(A,D,E)=>v.premultiplyAlphaRGBA(w.outlineColor(A,D,E))):B._outlineColor=v.premultiplyAlphaRGBA(w.outlineColor);l.isFunction(w.size)?B._dynamicPropertyMap.set("_size",(A,D,E)=>r.pt2px(w.size(A,D,E))):B._size=r.pt2px(w.size)||0;l.isFunction(w.scaleX)?B._dynamicPropertyMap.set("_scaleX",w.scaleX):B._scaleX=w.scaleX||1;l.isFunction(w.offsetX)?B._dynamicPropertyMap.set("xOffset",(A,D,E)=>r.pt2px(w.offsetX(A,D,E))):B.xOffset=r.pt2px(w.offsetX)||0;l.isFunction(w.offsetY)?
B._dynamicPropertyMap.set("yOffset",(A,D,E)=>r.pt2px(w.offsetY(A,D,E))):B.yOffset=r.pt2px(w.offsetY)||0;l.isFunction(w.outlineWidth)?B._dynamicPropertyMap.set("_outlineWidth",(A,D,E)=>r.pt2px(w.outlineWidth(A,D,E))):B._outlineWidth=r.pt2px(w.outlineWidth)||0;l.isFunction(w.rotation)?B._dynamicPropertyMap.set("_angle",w.rotation):B._angle=w.rotation||0;B._scaleFactor=x.unwrapOr(w.scaleFactor,1);B._markerPlacement=w.markerPlacement;B._effects=w.effects;B._bitSet=(1===w.alignment?1:0)|(w.colorLocked?
1:0)<<1|(w.scaleSymbolsProportionally?1:0)<<3;B._materialKey=w.materialKey;return B}n._inheritsLoose(e,k);e.fromCIMMarker=function(w,y){const [C,B]=l.getMinMaxZoom(w.scaleInfo,y);return new e(w,C,B)};e.prototype.bindFeature=function(w,y,C){const B=w.readLegacyFeature();this._dynamicPropertyMap.forEach((Q,S)=>{this[S]=Q(B,y,C)});w=this._cimMarkerLayer.materialHash;w="function"===typeof w?w(B,y,C):w;if((w=this._materialCache.get(w))&&a.ok(w.spriteMosaicItem)&&w.spriteMosaicItem){w=w.spriteMosaicItem;
var A=this._cimMarkerLayer.sizeRatio,D=w.width/w.height*this._scaleX,E=this._cimMarkerLayer.rotateClockwise?this._angle:-this._angle,G=this._size,I=G*D,L=this.xOffset,J=this.yOffset;this.xOffset*=this._scaleFactor;this.yOffset*=this._scaleFactor;var F=this._cimMarkerLayer.scaleSymbolsProportionally&&this._cimMarkerLayer.frameHeight?this._size/r.pt2px(this._cimMarkerLayer.frameHeight):1,K=this._outlineWidth*F,M=r.pt2px(this._cimMarkerLayer.referenceSize),R=F=0,T=this._cimMarkerLayer.anchorPoint;T&&
(this._cimMarkerLayer.isAbsoluteAnchorPoint?this._size&&(F=-T.x/(this._size*D),R=T.y/this._size):(F=T.x,R=T.y));this._sizeOutlineWidth=f.i8888to32(Math.round(Math.min(Math.sqrt(128*I),255)),Math.round(Math.min(Math.sqrt(128*G),255)),Math.round(Math.min(Math.sqrt(128*K),255)),Math.round(Math.min(Math.sqrt(128*M),255)));this.angle=E;this._bitestAndDistRatio=f.i1616to32(this._bitSet,Math.round(64*A));D=w.rect.x+p.SPRITE_PADDING;E=w.rect.y+p.SPRITE_PADDING;K=D+w.width;M=E+w.height;this._texUpperLeft=
f.i1616to32(D,E);this._texUpperRight=f.i1616to32(K,E);this._texBottomLeft=f.i1616to32(D,M);this._texBottomRight=f.i1616to32(K,M);D=q.MarkerMaterialKey.load(this._materialKey);D.sdf=w.sdf;D.pattern=!0;D.textureBinding=w.textureBinding;this._materialKey=D.data;this._anchorX=.5-(.5+F)*w.width/w.width;this._anchorY=.5-(.5+R)*w.height/w.height;I=I*A*this._scaleFactor;G=G*A*this._scaleFactor;I*=w.rect.width/w.width;G*=w.rect.height/w.height;this._computedWidth=I;this._computedHeight=G;this._applyTransformation(d,
b);this.xOffset=L;this.yOffset=J}else h.error(new c("mapview-cim","Encountered an error when binding feature"))};return e}(t(g))})},"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicTextTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/screenUtils ../../alignmentUtils ../../color ../../definitions ../../number ../../materialKey/MaterialKey ./util ./WGLBaseTextTemplate ./WGLDynamicMeshTemplate ../../../../layers/features/textUtils".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q){return function(l){function t(a,b,d){var h=l.call(this,a)||this;h._horizontalAlignment="center";h._verticalAlignment="middle";h._textToGlyphs=new Map;h._minMaxZoom=u.i1616to32(Math.round(b*r.MIN_MAX_ZOOM_PRECISION_FACTOR),Math.round(d*r.MIN_MAX_ZOOM_PRECISION_FACTOR));b=a.scaleFactor||1;h._cimTextLayer=a;v.isFunction(a.color)?h._dynamicPropertyMap.set("_color",(y,C,B)=>x.premultiplyAlphaRGBA(a.color(y,C,B))):h._color=x.premultiplyAlphaRGBA(a.color);v.isFunction(a.color)?
h._dynamicPropertyMap.set("_haloColor",(y,C,B)=>x.premultiplyAlphaRGBA(a.outlineColor(y,C,B))):h._haloColor=x.premultiplyAlphaRGBA(a.outlineColor);let k;v.isFunction(a.size)||(k=Math.min(Math.round(c.pt2px(a.size*a.sizeRatio)),127));h._dynamicPropertyMap.set("_size",(y,C,B)=>v.isFunction(a.size)?Math.min(Math.round(c.pt2px(a.size(y,C,B)*a.sizeRatio)),127):k);v.isFunction(a.outlineSize)?h._dynamicPropertyMap.set("_haloSize",(y,C,B)=>Math.min(Math.floor(5*c.pt2px(a.outlineSize(y,C,B)*a.sizeRatio)),
127)):h._haloSize=Math.min(Math.floor(5*c.pt2px(a.outlineSize*a.sizeRatio)),127);let e;v.isFunction(a.offsetX)||(e=Math.round(c.pt2px(a.offsetX*a.sizeRatio)));h._dynamicPropertyMap.set("_xOffset",(y,C,B)=>v.isFunction(a.offsetX)?Math.round(c.pt2px(a.offsetX(y,C,B)*a.sizeRatio)):e);let w;v.isFunction(a.offsetY)||(w=Math.round(c.pt2px(a.offsetY*a.sizeRatio)));h._dynamicPropertyMap.set("_yOffset",(y,C,B)=>v.isFunction(a.offsetY)?Math.round(c.pt2px(a.offsetY(y,C,B)*a.sizeRatio)):w);v.isFunction(a.angle)?
h._dynamicPropertyMap.set("_angle",a.angle):h._angle=a.angle;v.isFunction(a.horizontalAlignment)?h._dynamicPropertyMap.set("_horizontalAlignment",a.horizontalAlignment):h._horizontalAlignment=a.horizontalAlignment;v.isFunction(a.verticalAlignment)?h._dynamicPropertyMap.set("_verticalAlignment",a.verticalAlignment):h._verticalAlignment=a.verticalAlignment;h._scaleFactor=b;v.isFunction(a.text)?h._dynamicPropertyMap.set("_text",a.text):h._text=a.text;b=Math.min(Math.round(c.pt2px(a.referenceSize*a.sizeRatio)),
127);h._referenceSize=Math.round(Math.sqrt(256*b));h._materialKey=a.materialKey;b=m.TextMaterialKey.load(h._materialKey);b.sdf=!0;h._bitset=(1===a.alignment?1:0)|(a.colorLocked?1:0)<<1;h._materialKey=b.data;h._decoration="none";h._lineHeight=1;h._lineWidth=512;h._textPlacement=a.markerPlacement;h._effects=a.effects;h._isCIM=!0;return h}n._inheritsLoose(t,l);t.fromCIMText=function(a,b){const [d,h]=v.getMinMaxZoom(a.scaleInfo,b);return new t(a,d,h)};var g=t.prototype;g.analyze=function(){var a=n._asyncToGenerator(function*(b,
d,h,k){d=d.readLegacyFeature();var e=this._cimTextLayer;h="string"===typeof e.text?e.text:"function"===typeof e.text?e.text(d,h,k):"";b=yield b.getMosaicItem(this._cimTextLayer.cim,q.codepoints(h));this._textToGlyphs.set(h,b.glyphMosaicItems);return b});return function(b,d,h,k){return a.apply(this,arguments)}}();g.bindFeature=function(a,b,d){const h=a.readLegacyFeature();this._dynamicPropertyMap.forEach((k,e)=>{this[e]=k(h,b,d)});this._text&&0!==this._text.length?(this._size*=this._scaleFactor,this._scale=
this._size/24,this._xOffset*=this._scaleFactor,this._yOffset*=this._scaleFactor,this._xAlignD=z.getXAnchorDirection(this._horizontalAlignment||"center"),this._yAlignD=z.getYAnchorDirection(this._verticalAlignment||"baseline"),a=this._textToGlyphs.get(this._text),this.bindTextInfo(a,!1)):this._shapingInfo=null};return t}(p(f))})},"esri/views/2d/layers/features/textUtils":function(){define(["exports"],function(n){n.codepoints=function(c){const z=Array(c.length);for(let x=0;x<c.length;x++)z[x]=c.charCodeAt(x);
return z};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/WGLFillTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/mathUtils ../../../../../../core/screenUtils ../../color ../../definitions ../../GeometryUtils ../../number ../../materialKey/MaterialKey ./util ./WGLBaseFillTemplate ./WGLMeshTemplate".split(" "),function(n,c,z,x,r,u,m,v,p,f,q){return function(l){function t(g,a,b,d,h,k,e,w,y,C,B){var A=
l.call(this)||this;A._effects=y;g=v.FillMaterialKey.load(g);a&&(g.sdf=a.sdf,g.pattern=!0,g.textureBinding=a.textureBinding);A.fillColor=b;A.tl=d;A.br=h;A.aux1=k;A.aux2=e;A.aux3=w;A._minMaxZoom=m.i1616to32(Math.round(C*r.MIN_MAX_ZOOM_PRECISION_FACTOR),Math.round(B*r.MIN_MAX_ZOOM_PRECISION_FACTOR));A._materialKey=g.data;return A}n._inheritsLoose(t,l);t.fromCIMFill=function(g,a,b){var d=g.color;d=d&&x.premultiplyAlphaRGBA(d)||0;const h=g.materialKey,[k,e]=p.getMinMaxZoom(g.scaleInfo,b);if(!a)return a=
m.i8888to32(0,0,0,g.colorLocked?1:0),new t(h,null,d,0,0,0,0,a,g.effects,k,e);const {rect:w,width:y,height:C}=a;var B=w.x+r.SPRITE_PADDING;const A=w.y+r.SPRITE_PADDING;var D=B+y;const E=A+C;var G=c.nextHighestPowerOfTwo(C);255<G?G=255:0>=G&&(G=c.nextHighestPowerOfTwo(E-A));var I=c.nextHighestPowerOfTwo(y||0);255<I?I=255:0>=I&&(I=c.nextHighestPowerOfTwo(D-B));let L=z.pt2px(g.offsetX||0)+128;255<L&&(L=255);let J=z.pt2px(-g.offsetY||0)+128;255<J&&(J=255);b=g.scaleX||1;B=m.i1616to32(B,A);D=m.i1616to32(D,
E);G=m.i8888to32(I,G,L,J);b=m.i1616to32(128*b,128);I=m.i8888to32(0,0,u.degToByte(g.angle),g.colorLocked?1:0);return new t(h,a,d,B,D,G,b,I,g.effects,k,e)};t.fromSimpleFill=function(g,a,b=!1){var {color:d}=g;d=d&&"esriSFSNull"!==g.style&&x.premultiplyAlphaRGBAArray(d)||0;b=m.i8888to32(0,0,0,b?255:0);g=g.materialKey;if(!a)return new t(g,null,d,0,0,0,0,b,null,p.DEFAULT_MIN_ZOOM,p.DEFAULT_MAX_ZOOM);const {rect:h,width:k,height:e}=a;var w=h.x+r.SPRITE_PADDING,y=h.y+r.SPRITE_PADDING;const C=w+k,B=y+e,A=
m.i1616to32(w,y),D=m.i1616to32(C,B);w=m.i8888to32(c.nextHighestPowerOfTwo(C-w),c.nextHighestPowerOfTwo(B-y),0,0);y=m.i1616to32(128,128);return new t(g,a,d,A,D,w,y,b,null,p.DEFAULT_MIN_ZOOM,p.DEFAULT_MAX_ZOOM)};t.fromPictureFill=function(g,a,b=!1){const d=r.PICTURE_FILL_COLOR,{rect:h,width:k,height:e}=a;var w=h.x+r.SPRITE_PADDING,y=h.y+r.SPRITE_PADDING,C=w+k,B=y+e;w=m.i1616to32(w,y);C=m.i1616to32(C,B);B=c.nextHighestPowerOfTwo(z.pt2px(g.width));255<B&&(B=255);y=c.nextHighestPowerOfTwo(z.pt2px(g.height));
255<y&&(y=255);let A=z.pt2px(g.xoffset)+128;255<A&&(A=255);let D=z.pt2px(-g.yoffset)+128;255<D&&(D=255);B=m.i8888to32(B,y,A,D);y=m.i1616to32(128*g.xscale,128*g.yscale);b=m.i8888to32(0,0,0,b?255:0);return new t(g.materialKey,a,d,w,C,B,y,b,null,p.DEFAULT_MIN_ZOOM,p.DEFAULT_MAX_ZOOM)};return t}(f(q))})},"esri/views/2d/engine/webgl/mesh/templates/WGLLineTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/Logger ../../../../../../core/screenUtils ../../color ../../definitions ../../number ../../Utils ../../materialKey/MaterialKey ./util ./WGLBaseLineTemplate ./WGLMeshTemplate".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q){const l=c.getLogger("esri.views.2d.engine.webgl.WGLLineTemplate");return function(t){function g(a,b,d,h,k,e,w,y,C,B,A,D,E,G,I,L,J){var F=t.call(this)||this;a=v.LineMaterialKey.load(a);b&&(a.sdf=b.sdf,a.pattern=!0,a.textureBinding=b.textureBinding);F._capType=h;F._joinType=k;F._miterLimitCosine=p.getLimitCosine(e);F.tessellationProperties._fillColor=w;F.tessellationProperties._tl=y;F.tessellationProperties._br=C;F._hasPattern=B;F._isDashed=A;F._isColorLocked=D;F._zOrder=
G;F._effects=I;F._minMaxZoom=u.i1616to32(Math.round(L*r.MIN_MAX_ZOOM_PRECISION_FACTOR),Math.round(J*r.MIN_MAX_ZOOM_PRECISION_FACTOR));F._materialKey=a.data;F.tessellationProperties._bitset=D?1:0;F.tessellationProperties._halfWidth=.5*d;F.tessellationProperties._halfReferenceWidth=.5*E;F.tessellationProperties.offset=0;F._initializeTessellator(!1);return F}n._inheritsLoose(g,t);g.fromCIMLine=function(a,b,d){var h=a.color,k=a.scaleFactor||1;const e=a.isDashed;let w=a.cap;e&&1===w&&(w=2);const y=a.join;
k*=z.pt2px(a.width);const C=z.pt2px(a.referenceWidth),B=z.pt2px(a.miterLimit);h=h&&x.premultiplyAlphaRGBA(h)||0;const [A,D]=p.getMinMaxZoom(a.scaleInfo,d);if(!b)return new g(a.materialKey,b,k,w,y,B,h,0,0,!1,e,a.colorLocked,C,a.zOrder,a.effects,A,D);const {rect:E,width:G,height:I}=b;var L=E.x+r.SPRITE_PADDING;const J=E.y+r.SPRITE_PADDING;d=L+G;const F=J+I;L=u.i1616to32(L,J);d=u.i1616to32(d,F);return new g(a.materialKey,b,k,w,y,B,h,L,d,!0,e,a.colorLocked,C,a.zOrder,a.effects,A,D)};g.fromSimpleLine=
function(a,b){var {color:d}=a;const h="esriSLSSolid"!==a.style&&"esriSLSNull"!==a.style,k=m.getCapType(a.cap||"round"),e=m.getJoinType(a.join||"round");d=d&&"esriSLSNull"!==a.style&&x.premultiplyAlphaRGBAArray(d)||0;"esriSLSNull"===a.style&&(d=0);const w=z.pt2px(a.width),y=a.miterLimit;if(!b)return new g(a.materialKey,b,w,k,e,y,d,0,0,!1,h,!1,w,0,null,p.DEFAULT_MIN_ZOOM,p.DEFAULT_MAX_ZOOM);const {rect:C,width:B,height:A}=b;var D=C.x+r.SPRITE_PADDING;const E=C.y+r.SPRITE_PADDING;var G=D+B;const I=E+
A;D=u.i1616to32(D,E);G=u.i1616to32(G,I);return new g(a.materialKey,b,w,k,e,y,d,D,G,!0,h,!1,w,0,null,p.DEFAULT_MIN_ZOOM,p.DEFAULT_MAX_ZOOM)};g.fromPictureLineSymbol=function(a,b,d,h){l.error("PictureLineSymbol support does not exist!");return null};return g}(f(q))})},"esri/views/2d/engine/webgl/util/Lock":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/promiseUtils"],function(n,c,z){function x(){x=c._asyncToGenerator(function*(u,m,v){try{yield u.acquire(),
yield m(v),u.release()}catch(p){throw u.release(),p;}});return x.apply(this,arguments)}let r=function(){function u(){this._resolver=null}var m=u.prototype;m.isHeld=function(){return!!this._resolver};m.acquire=function(){var v=c._asyncToGenerator(function*(){if(!this._resolver)return this._resolver=z.createResolver(),Promise.resolve();yield this._resolver.promise;yield this.acquire()});return function(){return v.apply(this,arguments)}}();m.release=function(){const v=this._resolver;this._resolver=null;
v.resolve()};return u}();n["default"]=r;n.withLock=function(u,m,v){return x.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/schemaUtils":function(){define("exports ../../../../renderers/ClassBreaksRenderer ../../../../renderers/DictionaryRenderer ../../../../renderers/DotDensityRenderer ../../../../renderers/HeatmapRenderer ../../../../renderers/Renderer ../../../../renderers/SimpleRenderer ../../../../renderers/UniqueValueRenderer ../../../../renderers/support/jsonUtils ../../../../core/Error ../../../../core/has ../../../../core/lang ../../../../core/Logger ../../../../core/maybe ../../../../core/screenUtils ../../../../symbols/support/jsonUtils ../../engine/webgl/enums ../../engine/webgl/Utils ../../engine/webgl/materialKey/MaterialKey ../../engine/webgl/util/vvFlagUtils ./support/pixelBuffering ./support/rendererUtils ../support/clusterUtils ../support/util".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a,b,d,h,k,e,w,y,C,B){function A(P){switch(P.type){case "line-marker":var V;return{type:"line-marker",color:null==(V=P.color)?void 0:V.toJSON(),placement:P.placement,style:P.style};default:return b.fromJSON(P.toJSON()).toJSON()}}function D(P,V,Y){if(!P)return null;var ba=0;let fa=!1,ha=0;g.isSome(V)&&(ha=w.getPtMaxVVSize(V),"visualVariables"in V&&(ba=e.getVVFlags(V.visualVariables||[]),fa="dot-density"===V.type));switch(P.type){case "simple-fill":case "picture-fill":return E(P,
ba,fa,Y);case "simple-marker":case "picture-marker":return V=ha,ba=k.createMaterialKey(d.WGLGeometryType.MARKER,ba,!1,!1),Y=Y?k.hydrateMaterialKey(ba):ba,ba=A(P),P={materialKey:Y,hash:P.hash(),...ba,angle:P.angle,maxVVSize:V};case "simple-line":return G(P,ba,Y);case "text":return V=ha,ba=k.createMaterialKey(d.WGLGeometryType.TEXT,ba,!1,!1),Y=Y?k.hydrateMaterialKey(ba):ba,ba=A(P),P={materialKey:Y,hash:P.hash(),...ba,angle:P.angle,maxVVSize:V};case "label":return V=ba,ba=P.toJSON(),V=k.createMaterialKey(d.WGLGeometryType.LABEL,
V,!1,!1,ba.labelPlacement),P={materialKey:Y?k.hydrateMaterialKey(V):V,hash:P.hash(),...ba,labelPlacement:ba.labelPlacement};case "cim":return{type:"cim",rendererKey:ba,data:P.data,maxVVSize:ha};case "web-style":return{...A(P),type:"web-style",hash:P.hash(),rendererKey:ba,maxVVSize:ha};default:throw Error(`symbol not supported ${P.type}`);}}function E(P,V,Y,ba){Y=k.createMaterialKey(d.WGLGeometryType.FILL,V,!1,Y);var fa=ba?k.hydrateMaterialKey(Y):Y;const ha=P.clone();Y=ha.outline;ha.outline=null;P=
[];fa={materialKey:fa,hash:ha.hash(),...A(ha)};P.push(fa);Y&&(V=k.createMaterialKey(d.WGLGeometryType.LINE,V,!0,!1),ba={materialKey:ba?k.hydrateMaterialKey(V):V,hash:Y.hash(),...A(Y)},P.push(ba));return{type:"composite-symbol",layers:P,hash:P.reduce((Z,da)=>da.hash+Z,"")}}function G(P,V,Y){var ba=k.createMaterialKey(d.WGLGeometryType.LINE,V,!1,!1);const fa=Y?k.hydrateMaterialKey(ba):ba;P=P.clone();ba=P.marker;P.marker=null;const ha=[];ha.push({materialKey:fa,hash:P.hash(),...A(P)});if(ba){var Z;V=
k.createMaterialKey(d.WGLGeometryType.MARKER,V,!1,!1);Y=Y?k.hydrateMaterialKey(V):V;ba.color=null!=(Z=ba.color)?Z:P.color;ha.push({materialKey:Y,hash:ba.hash(),lineWidth:P.width,...A(ba)})}return{type:"composite-symbol",layers:ha,hash:ha.reduce((da,ja)=>ja.hash+da,"")}}function I(P,V){const Y=P.labelPlacement;var ba=ia[V];if(!P.symbol)return U.warn("No ILabelClass symbol specified."),!0;if(!ba)return U.error(new f("mapview-labeling:unsupported-geometry-type",`Unable to create labels for Feature Layer, ${V} is not supported`)),
!0;ba.some(fa=>fa===Y)||(ba=ba[0],Y&&U.warn(`Found invalid label placement type ${Y} for ${V}. Defaulting to ${ba}`),P.labelPlacement=ba);return!1}function L(P,V){P=l.clone(P);return P.some(Y=>I(Y,V))?[]:P}function J(P,V=!1){try{var Y,ba;const fa=Q(P,V),ha={};fa.map(Z=>{a:{switch(Z.target){case "feature":M(ha,K(P),Z);Z=void 0;break a;case "aggregate":if(!("featureReduction"in P)){Z=void 0;break a}var da=P.featureReduction;if("selection"===da.type)throw new f("ValidationError","Mapview does not support `selection` reduction type",
da);M(ha,K(P),Z);ha.aggregate||(ha.aggregate={name:"aggregate",input:"feature",filters:null,attributes:{},params:{clusterRadius:a.pt2px(da.clusterRadius/2),clusterPixelBuffer:64*Math.ceil(a.pt2px(da.clusterMaxSize)/64),fields:Z.aggregateFields}});F(ha.aggregate,Z.attributes.fields);Z=void 0;break a}Z=void 0}return Z});return{source:{definitionExpression:P.definitionExpression,fields:P.fields.map(Z=>Z.toJSON()),gdbVersion:P.gdbVersion,historicMoment:null==(Y=P.historicMoment)?void 0:Y.getTime(),outFields:P.availableFields,
pixelBuffer:P.pixelBuffer,spatialReference:P.spatialReference.toJSON(),timeExtent:null==(ba=P.timeExtent)?void 0:ba.toJSON(),customParameters:P.customParameters},attributes:{fields:{},indexCount:0},processors:fa,targets:ha}}catch(fa){if("ValidationError"===fa.fieldName)return U.error(fa),null;throw fa;}}function F(P,V){for(const Y in V){const ba=V[Y];if(ba.target!==P.name)continue;const fa=P.attributes[Y];fa?(fa.context.mesh=fa.context.mesh||ba.context.mesh,fa.context.storage=fa.context.storage||
ba.context.storage):P.attributes[Y]=ba}return P}function K(P){var V,Y,ba,fa,ha;return[null!=(V=null==(Y=P.filter)?void 0:Y.toJSON())?V:null,null!=(ba=null==(fa=P.effect)?void 0:null==(ha=fa.filter)?void 0:ha.toJSON())?ba:null]}function M(P,V,Y){P.feature||(P.feature={name:"feature",input:"source",filters:V,attributes:{}});F(P.feature,Y.attributes.fields);return P}function R(P,V){return V.field?T(P,{...V,type:"field",field:V.field}):V.valueExpression?T(P,{...V,type:"expression",valueExpression:V.valueExpression}):
{field:null,fieldIndex:null}}function T(P,V){switch(V.type){case "expression":var Y=V.valueExpression;if(!P.fields[Y]){var ba=P.indexCount++;P.fields[Y]={...V,name:Y,fieldIndex:ba}}return{fieldIndex:P.fields[Y].fieldIndex};case "label-expression":return Y=JSON.stringify(V.label),P.fields[Y]||(ba=P.indexCount++,P.fields[Y]={...V,name:Y,fieldIndex:ba}),{fieldIndex:P.fields[Y].fieldIndex};case "field":Y=V.field;if("aggregate"===V.target&&P.fields[Y])return{field:Y};P.fields[Y]={...V,name:Y};return{field:Y};
case "statistic":return P.fields[V.name]={...V},{field:V.name}}}function Q(P,V=!1){const Y=[];let ba=0;Y.push(X(P,ba++,V));return Y}function S(P,V,Y,ba,fa,ha=!1){V=T(V,{type:"label-expression",target:ba,context:{mesh:!0},resultType:"string",label:{labelExpression:Y.labelExpression,labelExpressionInfo:Y.labelExpressionInfo?{expression:Y.labelExpressionInfo.expression}:null,symbol:!!Y.symbol,where:Y.where}});({fieldIndex:V}=V);return{...D(Y,P,ha),fieldIndex:V,target:ba,index:fa}}function X(P,V,Y=!1){const ba=
{indexCount:0,fields:{}};var fa="featureReduction"in P&&P.featureReduction;V=fa?"aggregate":"feature";if("sublayers"in P){var ha={type:"subtype",subtypeField:P.subtypeField,renderers:{}},Z={type:"subtype",mapping:{},target:"feature"},da={type:"subtype",classes:{}},ja={type:"symbol",target:"feature",aggregateFields:[],attributes:ba,storage:Z,mesh:{matcher:ha,aggregateMatcher:null,labels:da,sortKey:null}};fa=new Set;let ya=0;for(const {renderer:Aa,subtypeCode:Ca,labelingInfo:Ja,labelsVisible:Ia}of P.sublayers){P=
va(ba,V,Aa,Y);var qa=ra(ba,V,Aa),sa=Ia&&Ja;if("visualVariables"in Aa&&Aa.visualVariables&&Aa.visualVariables.length)throw new f("ValidationError","Visual variables are currently not supported for subtype layers");if("dictionary"===P.type)throw new f("ValidationError","Dictionary renderer is not supported in subtype layers");if("subtype"===P.type)throw new f("ValidationError","Nested subtype renderers is not supported");if(g.isSome(qa)&&"subtype"===qa.type)throw new f("ValidationError","Nested subtype storage is not supported");
if(g.isSome(qa)&&"dot-density"===qa.type)throw new f("ValidationError","Dot density attributes are not supported in subtype layers");if(fa.has(Ca))throw new f("ValidationError","Subtype codes for sublayers must be unique");fa.add(Ca);ha.renderers[Ca]=P;Z.mapping[Ca]=qa;sa&&(da.classes[Ca]=sa.map(Ka=>S(Aa,ba,Ka,"feature",ya++,Y)))}return ja}switch(P.renderer.type){case "heatmap":{const {blurRadius:ya,fieldOffset:Aa,field:Ca}=P.renderer;return{type:"heatmap",aggregateFields:[],attributes:ba,target:V,
storage:null,mesh:{blurRadius:ya,fieldOffset:Aa,field:R(ba,{target:V,field:Ca,resultType:"numeric"}).field}}}default:{ha=[];const ya="aggregate"===V?C.createClusterRenderer(ha,P.renderer,fa,null):P.renderer;ma(ba,ha);Z=va(ba,V,ya,Y);ja=null;da=ra(ba,V,ya);qa=B.toJSONGeometryType(P.geometryType);sa=P.labelsVisible&&P.labelingInfo||[];let Aa=[];if(fa){if("selection"===fa.type)throw new f("ValidationError","Mapview does not support `selection` reduction type",fa);fa.symbol&&(ja=new m({symbol:fa.symbol,
visualVariables:"visualVariables"in ya?ya.visualVariables:null}),ja=va(ba,V,ja,Y));Aa=fa&&fa.labelsVisible&&fa.labelingInfo||[]}sa=L(sa,qa);Aa=L(Aa,qa);let Ca=0;fa=[...sa.map(Ja=>S(ya,ba,Ja,"feature",Ca++,Y)),...Aa.map(Ja=>S(ya,ba,Ja,"aggregate",Ca++,Y))];P=aa(ba,P.orderBy);return{type:"symbol",target:V,attributes:ba,aggregateFields:ha,storage:da,mesh:{matcher:Z,labels:{type:"simple",classes:fa},aggregateMatcher:ja,sortKey:P}}}}}function aa(P,V){if(g.isNone(V)||!V.length)return null;1<V.length&&U.warn(`Layer rendering currently only supports ordering by 1 orderByInfo, but found ${V.length}. All but the first will be discarded`);
V=V[0];const Y="ascending"===V.order?"asc":"desc";if(V.field)return{field:V.field,order:Y};if(V.valueExpression)return{fieldIndex:T(P,{type:"expression",target:"feature",valueExpression:V.valueExpression,resultType:"numeric"}).fieldIndex,order:Y};U.error(new f("ValidationError","Expected to find a field or valueExpression for OrderByInfo",V));return null}function ma(P,V){const Y={mesh:!0,storage:!0};for(const ba of V){const {name:fa,outStatistic:ha}=ba,{statisticType:Z,onStatisticField:da}=ha;let ja=
V=null,qa=null;"onStatisticValueExpression"in ha?ja=T(P,{type:"expression",target:"feature",valueExpression:ha.onStatisticValueExpression,resultType:"numeric"}).fieldIndex:"onStatisticNormalizationField"in ha?(V=T(P,{type:"field",target:"feature",field:da,resultType:"numeric"}).field,qa=ha.onStatisticNormalizationField):V=T(P,{type:"field",target:"feature",field:da,resultType:"numeric"}).field;T(P,{type:"statistic",target:"aggregate",name:fa,context:Y,inField:V,inNormalizationField:qa,inFieldIndex:ja,
statisticType:Z})}}function ra(P,V,Y){switch(Y.type){case "dot-density":return za(P,V,Y.attributes);case "simple":case "class-breaks":case "unique-value":case "dictionary":return wa(P,V,Y.visualVariables);case "heatmap":return null}}function za(P,V,Y){return Y&&Y.length?{type:"dot-density",mapping:Y.map((ba,fa)=>{const {field:ha,fieldIndex:Z}=R(P,{valueExpression:ba.valueExpression,field:ba.field,resultType:"numeric",target:V});return{binding:fa,field:ha,fieldIndex:Z}}),target:V}:{type:"dot-density",
mapping:[],target:V}}function wa(P,V,Y){if(!Y||!Y.length)return{type:"visual-variable",mapping:[],target:V};const ba={storage:!0};return{type:"visual-variable",mapping:y.simplifyVisualVariables(Y).map(fa=>{var ha;const Z=h.getVVType(fa.type),{field:da,fieldIndex:ja}=R(P,{target:V,valueExpression:fa.valueExpression,field:fa.field,context:ba,resultType:"numeric"});switch(fa.type){case "size":return"$view.scale"===fa.valueExpression?null:{type:"size",binding:Z,field:da,fieldIndex:ja,normalizationField:R(P,
{target:V,field:fa.normalizationField,context:ba,resultType:"numeric"}).field,valueRepresentation:null!=(ha=fa.valueRepresentation)?ha:null};case "color":return{type:"color",binding:Z,field:da,fieldIndex:ja,normalizationField:R(P,{target:V,field:fa.normalizationField,context:ba,resultType:"numeric"}).field};case "opacity":return{type:"opacity",binding:Z,field:da,fieldIndex:ja,normalizationField:R(P,{target:V,field:fa.normalizationField,context:ba,resultType:"numeric"}).field};case "rotation":return{type:"rotation",
binding:Z,field:da,fieldIndex:ja}}}).filter(fa=>fa),target:V}}function va(P,V,Y,ba=!1){P=g.unwrapOr(P,{indexCount:0,fields:{}});switch(Y.type){case "simple":case "dot-density":return Fa(P,Y,"dot-density"===Y.type,ba);case "class-breaks":return Ba(P,V,Y,ba);case "unique-value":return N(P,V,Y,ba);case "dictionary":return{type:"dictionary",renderer:Y.toJSON()}}}function Fa(P,V,Y,ba=!1){P=V.getSymbols();return{type:"simple",symbol:D(P.length?P[0]:null,V,ba),isDotDensity:Y}}function Ba(P,V,Y,ba=!1){const fa=
Y.backgroundFillSymbol,{field:ha,fieldIndex:Z}=R(P,{target:V,field:Y.field,valueExpression:Y.valueExpression,resultType:"numeric",context:{mesh:!0,use:"renderer.field"}});V=Y.normalizationType;V="log"===V?"esriNormalizeByLog":"percent-of-total"===V?"esriNormalizeByPercentOfTotal":"field"===V?"esriNormalizeByField":null;const da=Y.classBreakInfos.map(ja=>({symbol:D(ja.symbol,Y,ba),min:ja.minValue,max:ja.maxValue})).sort((ja,qa)=>ja.min-qa.min);return{type:"interval",attributes:P.fields,field:ha,fieldIndex:Z,
backgroundFillSymbol:D(fa,Y,ba),defaultSymbol:D(Y.defaultSymbol,Y,ba),intervals:da,normalizationField:Y.normalizationField,normalizationTotal:Y.normalizationTotal,normalizationType:V,isMaxInclusive:Y.isMaxInclusive}}function N(P,V,Y,ba=!1){const fa=[],ha=Y.backgroundFillSymbol;V={target:V,context:{mesh:!0},resultType:"string"};if(Y.field&&"string"!==typeof Y.field)throw new f("ValidationError","Expected renderer.field to be a string",Y);const {field:Z,fieldIndex:da}=R(P,{...V,field:Y.field,valueExpression:Y.valueExpression});
for(const ja of Y.uniqueValueInfos)fa.push({value:""+ja.value,symbol:D(ja.symbol,Y,ba)});return{type:"map",attributes:P.fields,field:Z,fieldIndex:da,field2:R(P,{...V,field:Y.field2}).field,field3:R(P,{...V,field:Y.field3}).field,fieldDelimiter:Y.fieldDelimiter,backgroundFillSymbol:D(ha,Y),defaultSymbol:D(Y.defaultSymbol,Y),map:fa}}const U=t.getLogger("esri.views.2d.layers.features.schemaUtils"),ia={esriGeometryPoint:"above-right above-center above-left center-center center-left center-right below-center below-left below-right".split(" "),
esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null};n.addAggregateFields=ma;n.createMatcherSchema=va;n.createSchema=function(P){q("esri-2d-update-debug")&&console.debug("Created new schema",J(P,!0));return J(P)};n.createSymbolSchema=D;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/renderers/ClassBreaksRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../symbols ../core/jsonMap ../core/lang ../core/Logger ../core/maybe ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/has ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/accessorSupport/ensureType ../layers/support/fieldUtils ./Renderer ./mixins/VisualVariablesMixin ./support/ClassBreakInfo ./support/commonProperties ./support/LegendOptions ../support/arcadeOnDemand".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a,b,d,h,k,e,w,y){var C;const B=u.getLogger("esri.renderers.ClassBreaksRenderer");x=new x.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});const A=a.ensureType(k);d=C=function(D){function E(I){I=D.call(this,I)||this;I._compiledValueExpression={valueExpression:null,compiledFunction:null};I.backgroundFillSymbol=null;I.classBreakInfos=null;I.defaultLabel=null;I.defaultSymbol=null;I.field=null;I.isMaxInclusive=
!0;I.legendOptions=null;I.normalizationField=null;I.normalizationTotal=null;I.type="class-breaks";I.valueExpression=null;I.valueExpressionTitle=null;I._set("classBreakInfos",[]);return I}n._inheritsLoose(E,D);var G=E.prototype;G.readClassBreakInfos=function(I,L,J){if(Array.isArray(I)){var F=L.minValue;return I.map(K=>{const M=new k;M.read(K,J);null==M.minValue&&(M.minValue=F);null==M.maxValue&&(M.maxValue=M.minValue);F=M.maxValue;return M})}};G.writeClassBreakInfos=function(I,L,J,F){I=I.map(K=>K.write({},
F));this._areClassBreaksConsecutive()&&I.forEach(K=>delete K.classMinValue);L[J]=I};G.castField=function(I){return null==I?I:"function"===typeof I?(B.error(".field: field must be a string value"),null):a.ensureString(I)};G.addClassBreakInfo=function(I,L,J){let F=null;F="number"===typeof I?new k({minValue:I,maxValue:L,symbol:z.ensureType(J)}):A(r.clone(I));this.classBreakInfos.push(F);1===this.classBreakInfos.length&&this.notifyChange("minValue")};G.removeClassBreakInfo=function(I,L){const J=this.classBreakInfos.length;
for(let F=0;F<J;F++){const K=[this.classBreakInfos[F].minValue,this.classBreakInfos[F].maxValue];if(K[0]===I&&K[1]===L){this.classBreakInfos.splice(F,1);break}}};G.getBreakIndex=function(I,L){this.valueExpression&&(m.isNone(L)||m.isNone(L.arcade))&&B.warn("");return this.valueExpression?this._getBreakIndexForExpression(I,L):this._getBreakIndexForField(I)};G.getClassBreakInfo=function(){var I=n._asyncToGenerator(function*(L,J){let F=J;this.valueExpression&&(m.isNone(J)||m.isNone(J.arcade))&&(F={...F,
arcade:yield y.loadArcade()});L=this.getBreakIndex(L,F);return-1!==L?this.classBreakInfos[L]:null});return function(L,J){return I.apply(this,arguments)}}();G.getSymbol=function(I,L){if(this.valueExpression&&(m.isNone(L)||m.isNone(L.arcade)))B.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");else return I=this.getBreakIndex(I,L),-1<I?this.classBreakInfos[I].symbol:this.defaultSymbol};G.getSymbolAsync=function(){var I=n._asyncToGenerator(function*(L,J){let F=J;if(this.valueExpression&&
(m.isNone(J)||m.isNone(J.arcade))){J=yield y.loadArcade();const {arcadeUtils:K}=J;K.hasGeometryOperations(this.valueExpression)&&(yield K.enableGeometryOperations());F={...F,arcade:J}}L=this.getBreakIndex(L,F);return-1<L?this.classBreakInfos[L].symbol:this.defaultSymbol});return function(L,J){return I.apply(this,arguments)}}();G.getSymbols=function(){const I=[];this.classBreakInfos.forEach(L=>{L.symbol&&I.push(L.symbol)});this.defaultSymbol&&I.push(this.defaultSymbol);return I};G.getAttributeHash=
function(){return this.visualVariables&&this.visualVariables.reduce((I,L)=>I+L.getAttributeHash(),"")};G.getMeshHash=function(){const I=JSON.stringify(this.backgroundFillSymbol),L=JSON.stringify(this.defaultSymbol),J=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`,F=this.classBreakInfos.reduce((K,M)=>K+M.getMeshHash(),"");return`${I}.${L}.${F}.${J}.${this.field}.${this.valueExpression}`};G.clone=function(){return new C({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&
this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:r.clone(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:r.clone(this.visualVariables),legendOptions:r.clone(this.legendOptions),
authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})};G.collectRequiredFields=function(){var I=n._asyncToGenerator(function*(L,J){L=[this.collectVVRequiredFields(L,J),this.collectSymbolFields(L,J)];yield Promise.all(L)});return function(L,J){return I.apply(this,arguments)}}();G.collectSymbolFields=function(){var I=n._asyncToGenerator(function*(L,J){const F=[...this.getSymbols().map(K=>K.collectRequiredFields(L,J)),b.collectArcadeFieldNames(L,J,this.valueExpression)];b.collectField(L,J,this.field);
b.collectField(L,J,this.normalizationField);yield Promise.all(F)});return function(L,J){return I.apply(this,arguments)}}();G._getBreakIndexForExpression=function(I,L){const {viewingMode:J,scale:F,spatialReference:K,arcade:M}=m.unwrapOr(L,{});var R=this._compiledValueExpression.valueExpression===this.valueExpression?this._compiledValueExpression.compiledFunction:null;L=m.unwrap(M).arcadeUtils;R||(R=L.createSyntaxTree(this.valueExpression),R=L.createFunction(R),this._compiledValueExpression.compiledFunction=
R);this._compiledValueExpression.valueExpression=this.valueExpression;I=L.executeFunction(R,L.createExecContext(I,L.getViewInfo({viewingMode:J,scale:F,spatialReference:K})));return this._getBreakIndexfromInfos(I)};G._getBreakIndexForField=function(I){var L=I.attributes;I=this.normalizationType;let J=parseFloat(L[this.field]);if(I){const F=this.normalizationTotal;L=parseFloat(L[this.normalizationField]);if("log"===I)J=Math.log(J)*Math.LOG10E;else if("percent-of-total"===I&&!isNaN(F))J=J/F*100;else if("field"===
I&&!isNaN(L)){if(isNaN(J)||isNaN(L))return-1;J/=L}}return this._getBreakIndexfromInfos(J)};G._getBreakIndexfromInfos=function(I){const L=this.isMaxInclusive;if(null!=I&&"number"===typeof I&&!isNaN(I))for(let J=0;J<this.classBreakInfos.length;J++){const F=[this.classBreakInfos[J].minValue,this.classBreakInfos[J].maxValue];if(F[0]<=I&&(L?I<=F[1]:I<F[1]))return J}return-1};G._areClassBreaksConsecutive=function(){const I=this.classBreakInfos,L=I.length;for(let J=1;J<L;J++)if(I[J-1].maxValue!==I[J].minValue)return!1;
return!0};n._createClass(E,[{key:"minValue",get:function(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}},{key:"normalizationType",get:function(){let I=this._get("normalizationType");const L=!!this.normalizationField,J=null!=this.normalizationTotal;if(L||J)I=L&&"field"||J&&"percent-of-total"||null,L&&J&&B.warn("warning: both normalizationField and normalizationTotal are set!");else if("field"===I||"percent-of-total"===I)I=null;return I},set:function(I){this._set("normalizationType",
I)}},{key:"arcadeRequired",get:function(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}}]);return E}(h.VisualVariablesMixin(d));c.__decorate([v.property(e.rendererBackgroundFillSymbolProperty)],d.prototype,"backgroundFillSymbol",void 0);c.__decorate([v.property({type:[k]})],d.prototype,"classBreakInfos",void 0);c.__decorate([l.reader("classBreakInfos")],d.prototype,"readClassBreakInfos",null);c.__decorate([g.writer("classBreakInfos")],d.prototype,"writeClassBreakInfos",null);
c.__decorate([v.property({type:String,json:{write:!0}})],d.prototype,"defaultLabel",void 0);c.__decorate([v.property(e.rendererSymbolProperty)],d.prototype,"defaultSymbol",void 0);c.__decorate([v.property({type:String,json:{write:!0}})],d.prototype,"field",void 0);c.__decorate([p.cast("field")],d.prototype,"castField",null);c.__decorate([v.property({type:Boolean})],d.prototype,"isMaxInclusive",void 0);c.__decorate([v.property({type:w["default"],json:{write:!0}})],d.prototype,"legendOptions",void 0);
c.__decorate([v.property({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],d.prototype,"minValue",null);c.__decorate([v.property({type:String,json:{write:!0}})],d.prototype,"normalizationField",void 0);c.__decorate([v.property({type:Number,cast:D=>a.ensureNumber(D),json:{write:!0}})],d.prototype,"normalizationTotal",void 0);c.__decorate([v.property({type:x.apiValues,value:null,
json:{type:x.jsonValues,read:x.read,write:x.write}})],d.prototype,"normalizationType",null);c.__decorate([q.enumeration({classBreaks:"class-breaks"})],d.prototype,"type",void 0);c.__decorate([v.property({type:String,json:{write:!0}})],d.prototype,"valueExpression",void 0);c.__decorate([v.property({type:String,json:{write:!0}})],d.prototype,"valueExpressionTitle",void 0);return d=C=c.__decorate([t.subclass("esri.renderers.ClassBreaksRenderer")],d)})},"esri/symbols":function(){define("exports ./core/accessorSupport/ensureType ./core/accessorSupport/extensions/serializableProperty/reader ./symbols/CIMSymbol ./symbols/ExtrudeSymbol3DLayer ./symbols/FillSymbol ./symbols/FillSymbol3DLayer ./symbols/Font ./symbols/IconSymbol3DLayer ./symbols/LabelSymbol3D ./symbols/LineSymbol3D ./symbols/LineSymbol3DLayer ./symbols/MarkerSymbol ./symbols/MeshSymbol3D ./symbols/ObjectSymbol3DLayer ./symbols/PathSymbol3DLayer ./symbols/PictureFillSymbol ./symbols/PictureMarkerSymbol ./symbols/PointSymbol3D ./symbols/PolygonSymbol3D ./symbols/SimpleFillSymbol ./symbols/SimpleLineSymbol ./symbols/SimpleMarkerSymbol ./symbols/Symbol ./symbols/Symbol3D ./symbols/Symbol3DLayer ./symbols/TextSymbol ./symbols/TextSymbol3DLayer ./symbols/WaterSymbol3DLayer ./symbols/WebStyleSymbol ./symbols/callouts/LineCallout3D ./chunks/LineCallout3DBorder ./symbols/support/Symbol3DVerticalOffset".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a,b,d,h,k,e,w,y,C,B,A,D,E,G,I,L,J,F,K){const M={base:B,key:"type",typeMap:{"simple-fill":w,"picture-fill":d,"picture-marker":h,"simple-line":y,"simple-marker":C,text:E,"label-3d":f,"line-3d":q,"mesh-3d":g,"point-3d":k,"polygon-3d":e,"web-style":L,cim:x},errorContext:"symbol"},R={base:B,key:"type",typeMap:{"picture-marker":h,"simple-marker":C,text:E,"web-style":L,cim:x},errorContext:"symbol"};z=z.createTypeReader({types:M});const T={base:B,key:"type",typeMap:{"simple-fill":w,
"picture-fill":d,"picture-marker":h,"simple-line":y,"simple-marker":C,text:E,"line-3d":q,"mesh-3d":g,"point-3d":k,"polygon-3d":e,"web-style":L,cim:x},errorContext:"symbol"},Q={base:B,key:"type",typeMap:{text:E,"label-3d":f},errorContext:"symbol"},S={base:B,key:"type",typeMap:{"label-3d":f,"line-3d":q,"mesh-3d":g,"point-3d":k,"polygon-3d":e,"web-style":L},errorContext:"symbol"},X={base:B,key:"type",typeMap:{"line-3d":q,"mesh-3d":g,"point-3d":k,"polygon-3d":e,"web-style":L},errorContext:"symbol"},aa=
{base:B,key:"type",typeMap:{"label-3d":f},errorContext:"symbol"};c=c.ensureOneOfType(M);n.CIMSymbol=x;n.ExtrudeSymbol3DLayer=r;n.BaseFillSymbol=u;n.FillSymbol3DLayer=m;n.Font=v;n.IconSymbol3DLayer=p;n.LabelSymbol3D=f;n.LineSymbol3D=q;n.LineSymbol3DLayer=l;n.BaseMarkerSymbol=t;n.MeshSymbol3D=g;n.ObjectSymbol3DLayer=a;n.PathSymbol3DLayer=b;n.PictureFillSymbol=d;n.PictureMarkerSymbol=h;n.PointSymbol3D=k;n.PolygonSymbol3D=e;n.SimpleFillSymbol=w;n.SimpleLineSymbol=y;n.SimpleMarkerSymbol=C;n.BaseSymbol=
B;n.BaseSymbol3D=A;n.BaseSymbol3DLayer=D;n.TextSymbol=E;n.TextSymbol3DLayer=G;n.WaterSymbol3DLayer=I;n.WebStyleSymbol=L;n.LineCallout3D=J;n.LineCallout3DBorder=F.LineCallout3DBorder;Object.defineProperty(n,"Symbol3DVerticalOffset",{enumerable:!0,get:function(){return K.Symbol3DVerticalOffset}});n.ensureType=c;n.isSymbol=function(ma){return ma instanceof B};n.isSymbol2D=function(ma){if(!ma)return!1;switch(ma.type){case "picture-fill":case "picture-marker":case "simple-fill":case "simple-line":case "simple-marker":case "text":case "cim":return!0;
default:return!1}};n.isSymbol3D=function(ma){if(!ma)return!1;switch(ma.type){case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return!0;default:return!1}};n.readSymbol=z;n.symbolTypes=M;n.symbolTypes3D=S;n.symbolTypesCluster=R;n.symbolTypesLabel=Q;n.symbolTypesLabel3D=aa;n.symbolTypesRenderer=T;n.symbolTypesRenderer3D=X;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/CIMSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/lang ../core/string ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../layers/support/fieldUtils ./Symbol".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g){var a;u=a=function(b){function d(k){k=b.call(this,k)||this;k.data=null;k.type="cim";return k}n._inheritsLoose(d,b);var h=d.prototype;h.readData=function(k,e){return e};h.writeData=function(k,e){if(k)for(const w in k)e[w]=k[w]};h.collectRequiredFields=function(){var k=n._asyncToGenerator(function*(e,w){if("CIMSymbolReference"===this.data.type){var y=this.data.primitiveOverrides;y&&(y=y.map(C=>t.collectArcadeFieldNames(e,w,C.valueExpressionInfo.expression)),yield Promise.all(y))}});
return function(e,w){return k.apply(this,arguments)}}();h.clone=function(){return new a({data:z.clone(this.data)})};h.hash=function(){return x.numericHash(JSON.stringify(this.data)).toString()};return d}(g);c.__decorate([r.property({json:{write:!1}})],u.prototype,"color",void 0);c.__decorate([r.property({json:{write:!0}})],u.prototype,"data",void 0);c.__decorate([f.reader("data",["symbol"])],u.prototype,"readData",null);c.__decorate([l.writer("data")],u.prototype,"writeData",null);c.__decorate([p.enumeration({CIMSymbolReference:"cim"},
{readOnly:!0})],u.prototype,"type",void 0);return u=a=c.__decorate([q.subclass("esri.symbols.CIMSymbol")],u)})},"esri/symbols/ExtrudeSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./Symbol3DLayer ./edges/utils ./support/Symbol3DMaterial".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l){var t;r=t=function(g){function a(b){b=g.call(this,b)||this;b.type="extrude";b.size=1;b.material=null;b.castShadows=!0;b.edges=null;return b}n._inheritsLoose(a,g);a.prototype.clone=function(){return new t({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:z.isSome(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})};return a}(f);c.__decorate([v.enumeration({Extrude:"extrude"},{readOnly:!0})],r.prototype,"type",void 0);
c.__decorate([x.property({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],r.prototype,"size",void 0);c.__decorate([x.property({type:l["default"],json:{write:!0}})],r.prototype,"material",void 0);c.__decorate([x.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],r.prototype,"castShadows",void 0);c.__decorate([x.property(q.symbol3dEdgesProperty)],r.prototype,"edges",void 0);return r=t=c.__decorate([p.subclass("esri.symbols.ExtrudeSymbol3DLayer")],r)})},"esri/symbols/Symbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer".split(" "),
function(n,c,z,x,r,u,m,v,p){z=function(f){function q(l){l=f.call(this,l)||this;l.enabled=!0;l.type=null;return l}n._inheritsLoose(q,f);q.prototype.writeEnabled=function(l,t,g){l||(t[g]=l)};return q}(z.JSONSupport);c.__decorate([x.property({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],z.prototype,"enabled",void 0);c.__decorate([p.writer("enabled")],z.prototype,"writeEnabled",null);c.__decorate([x.property({type:"icon object line path fill water extrude text".split(" "),readOnly:!0})],
z.prototype,"type",void 0);return z=c.__decorate([v.subclass("esri.symbols.Symbol3DLayer")],z)})},"esri/symbols/edges/utils":function(){define(["exports","./Edges3D","./SketchEdges3D","./SolidEdges3D"],function(n,c,z,x){n.symbol3dEdgesProperty={types:{key:"type",base:c,typeMap:{solid:x,sketch:z}},json:{write:!0}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/edges/Edges3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/lang ../../core/screenUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ../support/materialUtils".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l){x=function(t){function g(b){b=t.call(this,b)||this;b.color=new z([0,0,0,1]);b.extensionLength=0;b.size=u.px2pt(1);return b}n._inheritsLoose(g,t);var a=g.prototype;a.clone=function(){};a.cloneProperties=function(){return{color:r.clone(this.color),size:this.size,extensionLength:this.extensionLength}};return g}(x.JSONSupport);c.__decorate([m.property({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],x.prototype,"type",void 0);c.__decorate([m.property(l.colorAndTransparencyProperty)],
x.prototype,"color",void 0);c.__decorate([m.property({...l.screenSizeProperty,json:{write:{overridePolicy(t){return{enabled:!!t}}}}})],x.prototype,"extensionLength",void 0);c.__decorate([m.property(l.screenSizeProperty)],x.prototype,"size",void 0);return x=c.__decorate([q.subclass("esri.symbols.edges.Edges3D")],x)})},"esri/symbols/support/materialUtils":function(){define(["exports","../../Color","../../core/screenUtils","../../core/accessorSupport/ensureType","../../webdoc/support/opacityUtils"],
function(n,c,z,x,r){const u={type:Number,cast:z.toPt,json:{write:!0}},m={type:[Number],cast(v){return null!=v?v:Array.isArray(v)?v.map(z.toPt):null},json:{read:!1,write:!1}};n.colorAndTransparencyProperty={type:c,json:{type:[x.Integer],default:null,read:{source:["color","transparency"],reader:function(v,p){v=null!=p.transparency?r.transparencyToOpacity(p.transparency):1;return(p=p.color)&&Array.isArray(p)?new c([p[0]||0,p[1]||0,p[2]||0,v]):null}},write:{target:{color:{type:[x.Integer]},transparency:{type:x.Integer}},
writer:function(v,p){p.color=v.toJSON().slice(0,3);v=r.opacityToTransparency(v.a);0!==v&&(p.transparency=v)}}}};n.screenSizeProperty=u;n.stipplePatternProperty=m;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/webdoc/support/opacityUtils":function(){define(["exports","../../core/accessorSupport/ensureType"],function(n,c){n.opacityToTransparency=function(z){z=c.ensureInteger(100*(1-z));return Math.max(0,Math.min(z,100))};n.transparencyToOpacity=function(z){return Math.max(0,Math.min(1-z/
100,1))};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/edges/SketchEdges3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Edges3D".split(" "),function(n,c,z,x,r,u,m,v,p){var f;z=f=function(q){function l(t){t=q.call(this,t)||this;
t.type="sketch";return t}n._inheritsLoose(l,q);l.prototype.clone=function(){return new f(this.cloneProperties())};return l}(p);c.__decorate([m.enumeration({sketch:"sketch"},{readOnly:!0})],z.prototype,"type",void 0);return z=f=c.__decorate([v.subclass("esri.symbols.edges.SketchEdges3D")],z)})},"esri/symbols/edges/SolidEdges3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Edges3D".split(" "),
function(n,c,z,x,r,u,m,v,p){var f;z=f=function(q){function l(t){t=q.call(this,t)||this;t.type="solid";return t}n._inheritsLoose(l,q);l.prototype.clone=function(){return new f(this.cloneProperties())};return l}(p);c.__decorate([m.enumeration({solid:"solid"},{readOnly:!0})],z.prototype,"type",void 0);return z=f=c.__decorate([v.subclass("esri.symbols.support.SolidEdges3D")],z)})},"esri/symbols/support/Symbol3DMaterial":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./materialUtils".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q){var l;n.Symbol3DMaterial=l=function(t){function g(){var a=t.apply(this,arguments)||this;a.color=null;return a}c._inheritsLoose(g,t);g.prototype.clone=function(){return new l({color:r.isSome(this.color)?this.color.clone():null})};return g}(x.JSONSupport);z.__decorate([u.property(q.colorAndTransparencyProperty)],n.Symbol3DMaterial.prototype,"color",void 0);n.Symbol3DMaterial=l=z.__decorate([f.subclass("esri.symbols.support.Symbol3DMaterial")],n.Symbol3DMaterial);n["default"]=
n.Symbol3DMaterial;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/FillSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./Symbol3DLayer ./edges/utils ./patterns/StylePattern3D ./patterns/utils ./support/colors ./support/Symbol3DFillMaterial ./support/Symbol3DOutline".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a,b){var d;r=d=function(h){function k(e){e=h.call(this,e)||this;e.type="fill";e.material=null;e.pattern=null;e.castShadows=!0;e.outline=null;e.edges=null;return e}n._inheritsLoose(k,h);k.prototype.clone=function(){return new d({edges:z.isSome(this.edges)?this.edges.clone():null,enabled:this.enabled,material:z.isSome(this.material)?this.material.clone():null,pattern:z.isSome(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:z.isSome(this.outline)?
this.outline.clone():null})};k.fromSimpleFillSymbol=function(e){return new d({material:{color:(e.color||g.transparentWhite).clone()},pattern:e.style&&"solid"!==e.style?new l({style:e.style}):null,outline:e.outline?new b["default"]({size:e.outline.width||0,color:(e.outline.color||g.white).clone(),pattern:"solid",patternCap:e.outline.cap||"butt"}):null})};return k}(f);c.__decorate([v.enumeration({Fill:"fill"},{readOnly:!0})],r.prototype,"type",void 0);c.__decorate([x.property({type:a["default"],json:{write:!0}})],
r.prototype,"material",void 0);c.__decorate([x.property(t.symbol3dPatternProperty)],r.prototype,"pattern",void 0);c.__decorate([x.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],r.prototype,"castShadows",void 0);c.__decorate([x.property({type:b["default"],json:{write:!0}})],r.prototype,"outline",void 0);c.__decorate([x.property(q.symbol3dEdgesProperty)],r.prototype,"edges",void 0);return r=d=c.__decorate([p.subclass("esri.symbols.FillSymbol3DLayer")],r)})},"esri/symbols/patterns/StylePattern3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./Pattern3D ./styles".split(" "),
function(n,c,z,x,r,u,m,v,p){var f;x=f=function(q){function l(t){t=q.call(this,t)||this;t.type="style";t.style="solid";return t}n._inheritsLoose(l,q);l.prototype.clone=function(){return new f({style:this.style})};return l}(v);c.__decorate([z.property({type:["style"]})],x.prototype,"type",void 0);c.__decorate([z.property({type:p,json:{read:!0,write:!0}})],x.prototype,"style",void 0);return x=f=c.__decorate([m.subclass("esri.symbols.patterns.StylePattern3D")],x)})},"esri/symbols/patterns/Pattern3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(n,c,z,x,r,u,m,v){z=function(p){function f(q){return p.call(this,q)||this}n._inheritsLoose(f,p);f.prototype.clone=function(){};return f}(z.JSONSupport);c.__decorate([x.property({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],z.prototype,"type",void 0);return z=c.__decorate([v.subclass("esri.symbols.patterns.Pattern3D")],z)})},"esri/symbols/patterns/styles":function(){define(function(){return"backward-diagonal cross diagonal-cross forward-diagonal horizontal none solid vertical".split(" ")})},
"esri/symbols/patterns/utils":function(){define(["exports","./Pattern3D","./StylePattern3D"],function(n,c,z){function x(r,u,m){if(!r)return r;switch(r.type){case "style":return u=new z,u.read(r,m),u}}c={types:{key:"type",base:c,typeMap:{style:z}},json:{read:x,write:!0}};n.read=x;n.symbol3dPatternProperty=c;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/support/colors":function(){define(["exports","../../Color"],function(n,c){const z=new c("white"),x=new c("black");c=new c([255,
255,255,0]);n.black=x;n.isBlack=function(r){return 0===r.r&&0===r.g&&0===r.b};n.transparentWhite=c;n.white=z;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/support/Symbol3DFillMaterial":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Symbol3DMaterial".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q){var l;n.Symbol3DFillMaterial=l=function(t){function g(){return t.apply(this,arguments)||this}c._inheritsLoose(g,t);g.prototype.clone=function(){return new l({color:x.isSome(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode})};return g}(q["default"]);z.__decorate([p.enumeration({multiply:"multiply",replace:"replace",tint:"tint"})],n.Symbol3DFillMaterial.prototype,"colorMixMode",void 0);n.Symbol3DFillMaterial=l=z.__decorate([f.subclass("esri.symbols.support.Symbol3DFillMaterial")],
n.Symbol3DFillMaterial);n["default"]=n.Symbol3DFillMaterial;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/support/Symbol3DOutline":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/maybe ../../core/screenUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./materialUtils ./symbolLayerUtils3D".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g){var a;n.Symbol3DOutline=a=function(b){function d(){var h=b.apply(this,arguments)||this;h.color=new x([0,0,0,1]);h.size=m.px2pt(1);h.pattern="solid";h.patternCap="butt";h.stipplePattern=null;h.stippleOffColor=null;return h}c._inheritsLoose(d,b);d.prototype.clone=function(){return new a({color:u.isSome(this.color)?this.color.clone():null,size:this.size,pattern:this.pattern,patternCap:this.patternCap,stipplePattern:this.stipplePattern?this.stipplePattern.slice():
null,stippleOffColor:this.stippleOffColor?this.stippleOffColor.clone():null})};return d}(r.JSONSupport);z.__decorate([v.property(t.colorAndTransparencyProperty)],n.Symbol3DOutline.prototype,"color",void 0);z.__decorate([v.property(t.screenSizeProperty)],n.Symbol3DOutline.prototype,"size",void 0);z.__decorate([v.property({type:g.linePatterns})],n.Symbol3DOutline.prototype,"pattern",void 0);z.__decorate([v.property({type:["butt","square","round"]})],n.Symbol3DOutline.prototype,"patternCap",void 0);
z.__decorate([v.property(t.stipplePatternProperty)],n.Symbol3DOutline.prototype,"stipplePattern",void 0);z.__decorate([v.property({type:x})],n.Symbol3DOutline.prototype,"stippleOffColor",void 0);n.Symbol3DOutline=a=z.__decorate([l.subclass("esri.symbols.support.Symbol3DOutline")],n.Symbol3DOutline);n["default"]=n.Symbol3DOutline;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/support/symbolLayerUtils3D":function(){define(["exports","../../core/has","../../chunks/vec3f64","../../geometry/support/aaBoundingBox"],
function(n,c,z,x){const r=x.fromValues(-.5,-.5,-.5,.5,.5,.5),u=x.fromValues(-.5,-.5,0,.5,.5,1),m=x.fromValues(-.5,-.5,0,.5,.5,.5);n.OBJECT_SYMBOL_LAYER_BOUNDING_BOX_TETRAHEDRON=m;n.OBJECT_SYMBOL_LAYER_BOUNDING_BOX_UNIT_CUBE=r;n.OBJECT_SYMBOL_LAYER_BOUNDING_BOX_UNIT_CYLINDER=u;n.linePatterns="dash dash-dot dot long-dash long-dash-dot long-dash-dot-dot none short-dash short-dash-dot short-dash-dot-dot short-dot solid".split(" ");n.objectSymbolLayerPrimitiveBoundingBox=function(v){switch(v){case "sphere":case "cube":case "diamond":return r;
case "cylinder":case "cone":case "inverted-cone":return u;case "tetrahedron":return m}};n.objectSymbolLayerSizeWithResourceSize=function(v,{isPrimitive:p,width:f,depth:q,height:l}){p=p?10:1;if(null==f&&null==l&&null==q)return[p*v[0],p*v[1],p*v[2]];f=z.fromValues(f,q,l);let t;for(q=0;3>q;q++)if(l=f[q],null!=l){t=l/v[q];break}for(q=0;3>q;q++)null==f[q]&&(f[q]=v[q]*t);return f};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/IconSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Logger ../core/maybe ../core/urlUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./Symbol3DLayer ./support/colors ./support/IconSymbol3DLayerResource ./support/materialUtils ./support/Symbol3DAnchorPosition2D ./support/Symbol3DMaterial ./support/Symbol3DOutline".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a,b,d){function h(C){const B="width"in C?C.width:C.size,A="height"in C?C.height:C.size,D=k(C.xoffset);C=k(C.yoffset);return(D||C)&&B&&A?{x:-D/B,y:C/A}:null}function k(C){return isFinite(C)?C:0}var e;const w=z.getLogger("esri.symbols.IconSymbol3DLayer");z=e=function(C){function B(A){A=C.call(this,A)||this;A.material=null;A.resource=null;A.type="icon";A.size=12;A.anchor="center";A.anchorPosition=void 0;A.outline=void 0;return A}n._inheritsLoose(B,C);B.prototype.clone=
function(){return new e({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:x.isSome(this.material)?this.material.clone():null,outline:x.isSome(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})};B.fromSimpleMarkerSymbol=function(A){const D=A.color||l.white,E=h(A),G=A.outline&&0<A.outline.width?{size:A.outline.width,color:(A.outline.color||l.white).clone()}:null;var I=e,L=A.size;{A=A.style;
const J=y[A];J?A=J:(w.warn(`${A} cannot be mapped to Icon symbol. Fallback to "circle"`),A="circle")}return new I({size:L,resource:{primitive:A},material:{color:D},outline:G,anchor:E?"relative":void 0,anchorPosition:E})};B.fromPictureMarkerSymbol=function(A){const D=!A.color||l.isBlack(A.color)?l.white:A.color,E=h(A);return new e({size:A.width<=A.height?A.height:A.width,resource:{href:A.url},material:{color:D.clone()},anchor:E?"relative":void 0,anchorPosition:E})};B.fromCIMSymbol=function(A){return new e({resource:{href:r.makeData({mediaType:"application/json",
data:JSON.stringify(A.data)})}})};return B}(q);c.__decorate([u.property({type:b["default"],json:{write:!0}})],z.prototype,"material",void 0);c.__decorate([u.property({type:t["default"],json:{write:!0}})],z.prototype,"resource",void 0);c.__decorate([p.enumeration({Icon:"icon"},{readOnly:!0})],z.prototype,"type",void 0);c.__decorate([u.property(g.screenSizeProperty)],z.prototype,"size",void 0);c.__decorate([p.enumeration({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",
topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),u.property({json:{default:"center"}})],z.prototype,"anchor",void 0);c.__decorate([u.property({type:a.Symbol3DAnchorPosition2D,json:{type:[Number],read:{reader:C=>new a.Symbol3DAnchorPosition2D({x:C[0],y:C[1]})},write:{writer:(C,B)=>{B.anchorPosition=[C.x,C.y]},overridePolicy(){return{enabled:"relative"===this.anchor}}}}})],z.prototype,"anchorPosition",void 0);c.__decorate([u.property({type:d["default"],
json:{write:!0}})],z.prototype,"outline",void 0);z=e=c.__decorate([f.subclass("esri.symbols.IconSymbol3DLayer")],z);const y={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};return z})},"esri/symbols/support/IconSymbol3DLayerResource":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/urlUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../chunks/persistableUrlUtils".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a){var b;x=x.strict()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});n.IconSymbol3DLayerResource=b=function(d){function h(e){return d.call(this,e)||this}c._inheritsLoose(h,d);var k=h.prototype;k.readHref=function(e,w,y){return e?a.fromJSON(e,y):w.dataURI};k.writeHref=function(e,w,y,C){e&&(u.isDataProtocol(e)?w.dataURI=e:(w.href=a.toJSON(e,C),u.isAbsolute(w.href)&&(w.href=u.normalize(w.href))))};k.clone=function(){return new b({href:this.href,
primitive:this.primitive})};return h}(r.JSONSupport);z.__decorate([m.property({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],n.IconSymbol3DLayerResource.prototype,"href",void 0);z.__decorate([l.reader("href")],n.IconSymbol3DLayerResource.prototype,"readHref",null);z.__decorate([g.writer("href",{href:{type:String},dataURI:{type:String}})],n.IconSymbol3DLayerResource.prototype,"writeHref",null);z.__decorate([q.enumeration(x)],n.IconSymbol3DLayerResource.prototype,"primitive",void 0);
n.IconSymbol3DLayerResource=b=z.__decorate([t.subclass("esri.symbols.support.IconSymbol3DLayerResource")],n.IconSymbol3DLayerResource);n["default"]=n.IconSymbol3DLayerResource;n.defaultPrimitive="circle";Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/support/Symbol3DAnchorPosition2D":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(n,c,z,x,r,u,m,v,p){var f;n.Symbol3DAnchorPosition2D=f=function(q){function l(){var t=q.apply(this,arguments)||this;t.x=0;t.y=0;return t}c._inheritsLoose(l,q);l.prototype.clone=function(){return new f({x:this.x,y:this.y})};return l}(x);z.__decorate([r.property({type:Number})],n.Symbol3DAnchorPosition2D.prototype,"x",void 0);z.__decorate([r.property({type:Number})],n.Symbol3DAnchorPosition2D.prototype,"y",void 0);n.Symbol3DAnchorPosition2D=f=z.__decorate([p.subclass("esri.symbols.support.Symbol3DAnchorPosition2D")],
n.Symbol3DAnchorPosition2D);n["default"]=n.Symbol3DAnchorPosition2D;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/LabelSymbol3D":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./Symbol3D ./TextSymbol3DLayer ./callouts/calloutUtils ./support/Symbol3DVerticalOffset".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g){var a;const b=z.ofType({base:null,key:"type",typeMap:{text:l}});z=a=function(d){function h(e){e=d.call(this,e)||this;e.verticalOffset=null;e.callout=null;e.styleOrigin=null;e.symbolLayers=new b;e.type="label-3d";return e}n._inheritsLoose(h,d);var k=h.prototype;k.supportsCallout=function(){return!0};k.hasVisibleCallout=function(){return t.hasVisibleCallout(this)};k.hasVisibleVerticalOffset=function(){return t.hasVisibleVerticalOffset(this)};k.clone=function(){return new a({styleOrigin:x.clone(this.styleOrigin),
symbolLayers:x.clone(this.symbolLayers),thumbnail:x.clone(this.thumbnail),callout:x.clone(this.callout),verticalOffset:x.clone(this.verticalOffset)})};h.fromTextSymbol=function(e){return new a({symbolLayers:[l.fromTextSymbol(e)]})};return h}(q);c.__decorate([r.property({type:g["default"],json:{write:!0}})],z.prototype,"verticalOffset",void 0);c.__decorate([r.property(t.calloutProperty)],z.prototype,"callout",void 0);c.__decorate([r.property({json:{read:!1,write:!1}})],z.prototype,"styleOrigin",void 0);
c.__decorate([r.property({type:b})],z.prototype,"symbolLayers",void 0);c.__decorate([p.enumeration({LabelSymbol3D:"label-3d"},{readOnly:!0})],z.prototype,"type",void 0);return z=a=c.__decorate([f.subclass("esri.symbols.LabelSymbol3D")],z)})},"esri/symbols/Symbol3D":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/collectionUtils ../core/Logger ../core/urlUtils ../core/Warning ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../portal/Portal ../chunks/persistableUrlUtils ./ExtrudeSymbol3DLayer ./FillSymbol3DLayer ./IconSymbol3DLayer ./LineSymbol3DLayer ./ObjectSymbol3DLayer ./PathSymbol3DLayer ./Symbol ./Symbol3DLayer ./TextSymbol3DLayer ./WaterSymbol3DLayer ./support/StyleOrigin ./support/Thumbnail".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a,b,d,h,k,e,w,y,C,B,A,D,E){const G={icon:h,object:e,line:k,path:w,fill:d,extrude:b,text:B,water:A};p=z.ofType({base:C,key:"type",typeMap:G,errorContext:"symbol-layer"});const I=r.getLogger("esri.symbols.Symbol3D");r=function(L){function J(K){K=L.call(this,K)||this;K.styleOrigin=null;K.thumbnail=null;K.type=null;const M=K.__accessor__&&K.__accessor__.metadatas&&K.__accessor__.metadatas.symbolLayers;K._set("symbolLayers",new (M&&M.type||z));return K}n._inheritsLoose(J,
L);var F=J.prototype;F.readStyleOrigin=function(K,M,R){if(K.styleUrl&&K.name)return M=a.fromJSON(K.styleUrl,R),new D({styleUrl:M,name:K.name});if(K.styleName&&K.name)return new D({portal:R&&R.portal||g.getDefault(),styleName:K.styleName,name:K.name});R&&R.messages&&R.messages.push(new m("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:R,definition:K}))};F.writeStyleOrigin=function(K,M,R,T){K.styleUrl&&K.name?(R=a.toJSON(K.styleUrl,
T),u.isAbsolute(R)&&(R=u.normalize(R)),M.styleOrigin={styleUrl:R,name:K.name}):K.styleName&&K.name&&(K.portal&&T&&T.portal&&!u.hasSamePortal(K.portal.restUrl,T.portal.restUrl)?T&&T.messages&&T.messages.push(new m("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):M.styleOrigin={styleName:K.styleName,name:K.name})};F.normalizeCtorArgs=function(K){return K instanceof C||K&&G[K.type]?{symbolLayers:[K]}:
Array.isArray(K)?{symbolLayers:K}:K};n._createClass(J,[{key:"color",get:function(){return null},set:function(K){I.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}},{key:"symbolLayers",set:function(K){x.referenceSetter(K,this._get("symbolLayers"))}}]);return J}(y);c.__decorate([v.property({json:{read:!1,write:!1}})],r.prototype,"color",null);c.__decorate([v.property({type:p,nonNullable:!0,json:{write:!0}}),f.cast(x.castForReferenceSetter)],
r.prototype,"symbolLayers",null);c.__decorate([v.property({type:D})],r.prototype,"styleOrigin",void 0);c.__decorate([q.reader("styleOrigin")],r.prototype,"readStyleOrigin",null);c.__decorate([t.writer("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],r.prototype,"writeStyleOrigin",null);c.__decorate([v.property({type:E["default"],json:{read:!1}})],r.prototype,"thumbnail",void 0);c.__decorate([v.property({type:["point-3d",
"line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],r.prototype,"type",void 0);return r=c.__decorate([l.subclass("esri.symbols.Symbol3D")],r)})},"esri/core/collectionUtils":function(){define(["exports","./Collection"],function(n,c){n.castForReferenceSetter=function(z){return z};n.referenceSetter=function(z,x,r=c){x||(x=new r);if(x===z)return x;x.removeAll();z&&(Array.isArray(z)||"items"in z&&Array.isArray(z.items))?x.addMany(z):z&&x.add(z);return x};Object.defineProperty(n,"__esModule",{value:!0})})},
"esri/portal/Portal":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../config ../intl ../kernel ../request ../core/deprecate ../core/Error ../core/JSONSupport ../core/Loadable ../core/Logger ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ./PortalQueryParams ./PortalQueryResult ./PortalUser ../intl/locale".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a,b,d,h,k,e,w,y,C,B){function A(I){return Object.freeze({__proto__:null,default:I})}var D;let E;const G={PortalGroup:()=>new Promise(function(I,L){n(["./PortalGroup"],function(J){I(A(J))},L)}),PortalItem:()=>new Promise(function(I,L){n(["./PortalItem"],function(J){I(A(J))},L)}),PortalUser:()=>new Promise(function(I,L){n(["./PortalUser"],function(J){I(A(J))},L)})};r=D=function(I){function L(F){F=I.call(this,F)||this;F.access=null;F.allSSL=!1;F.authMode="auto";F.authorizedCrossOriginDomains=
null;F.basemapGalleryGroupQuery=null;F.bingKey=null;F.canListApps=!1;F.canListData=!1;F.canListPreProvisionedItems=!1;F.canProvisionDirectPurchase=!1;F.canSearchPublic=!0;F.canShareBingPublic=!1;F.canSharePublic=!1;F.canSignInArcGIS=!1;F.canSignInIDP=!1;F.colorSetsGroupQuery=null;F.commentsEnabled=!1;F.created=null;F.culture=null;F.customBaseUrl=null;F.defaultBasemap=null;F.defaultExtent=null;F.defaultVectorBasemap=null;F.description=null;F.eueiEnabled=null;F.featuredGroups=null;F.featuredItemsGroupQuery=
null;F.galleryTemplatesGroupQuery=null;F.livingAtlasGroupQuery=null;F.hasCategorySchema=!1;F.helperServices=null;F.homePageFeaturedContent=null;F.homePageFeaturedContentCount=null;F.httpPort=null;F.httpsPort=null;F.id=null;F.ipCntryCode=null;F.isPortal=!1;F.isReadOnly=!1;F.layerTemplatesGroupQuery=null;F.maxTokenExpirationMinutes=null;F.modified=null;F.name=null;F.portalHostname=null;F.portalMode=null;F.portalProperties=null;F.region=null;F.rotatorPanels=null;F.showHomePageDescription=!1;F.sourceJSON=
null;F.supportsHostedServices=!1;F.symbolSetsGroupQuery=null;F.templatesGroupQuery=null;F.units=null;F.url=x.portalUrl;F.urlKey=null;F.user=null;F.useStandardizedQuery=!1;F.useVectorBasemaps=!1;F.vectorBasemapGalleryGroupQuery=null;return F}c._inheritsLoose(L,I);var J=L.prototype;J.normalizeCtorArgs=function(F){return"string"===typeof F?{url:F}:F};J.destroy=function(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)};J.readAuthorizedCrossOriginDomains=
function(F){if(F)for(const K of F)-1===x.request.trustedServers.indexOf(K)&&x.request.trustedServers.push(K);return F};J.readDefaultBasemap=function(F){return F?(F=E.fromJSON(F),F.portalItem={portal:this},F):null};J.readDefaultVectorBasemap=function(F){return F?(F=E.fromJSON(F),F.portalItem={portal:this},F):null};J.readUrlKey=function(F){return F?F.toLowerCase():F};J.readUser=function(F){let K=null;F&&(K=C.fromJSON(F),K.portal=this);return K};J.load=function(F){const K=(new Promise(function(M,R){n(["../Basemap"],
function(T){M(A(T))},R)})).then(({default:M})=>{g.throwIfAborted(F);E=M}).then(()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,F)).then(M=>{if(u.id){const R=u.id;this.credential=R.findCredential(this.restUrl);this.credential||this.authMode!==D.AUTH_MODE_AUTO||(this._esriId_credentialCreateHandle=R.on("credential-create",()=>{R.findCredential(this.restUrl)&&this._signIn()}))}this.sourceJSON=M;this.read(M)});this.addResolvingPromise(K);return Promise.resolve(this)};J.createClosestFacilityTask=
function(){var F=c._asyncToGenerator(function*(){v.deprecatedFunction(l.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/closestFacility",version:"4.21"});yield this.load();const K=this._getHelperServiceUrl("closestFacility");return new (yield new Promise(function(M,R){n(["../tasks/ClosestFacilityTask"],function(T){M(A(T))},R)})).default(K)});return function(){return F.apply(this,arguments)}}();J.createElevationLayers=function(){var F=c._asyncToGenerator(function*(){yield this.load();
const K=this._getHelperService("defaultElevationLayers"),M=(yield new Promise(function(R,T){n(["../layers/ElevationLayer"],function(Q){R(A(Q))},T)})).default;return K?K.map(R=>new M({id:R.id,url:R.url})):[]});return function(){return F.apply(this,arguments)}}();J.createGeometryService=function(){var F=c._asyncToGenerator(function*(){v.deprecatedFunction(l.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/geometryService",version:"4.21"});yield this.load();const K=
this._getHelperServiceUrl("geometry");return new (yield new Promise(function(M,R){n(["../tasks/GeometryService"],function(T){M(A(T))},R)})).default({url:K})});return function(){return F.apply(this,arguments)}}();J.createPrintTask=function(){var F=c._asyncToGenerator(function*(){v.deprecatedFunction(l.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/print",version:"4.21"});yield this.load();const K=this._getHelperServiceUrl("printTask");return new (yield new Promise(function(M,
R){n(["../tasks/PrintTask"],function(T){M(A(T))},R)})).default(K)});return function(){return F.apply(this,arguments)}}();J.createRouteTask=function(){var F=c._asyncToGenerator(function*(){v.deprecatedFunction(l.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/route",version:"4.21"});yield this.load();const K=this._getHelperServiceUrl("route");return new (yield new Promise(function(M,R){n(["../tasks/RouteTask"],function(T){M(A(T))},R)})).default(K)});return function(){return F.apply(this,
arguments)}}();J.createServiceAreaTask=function(){var F=c._asyncToGenerator(function*(){v.deprecatedFunction(l.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/serviceArea",version:"4.21"});yield this.load();const K=this._getHelperServiceUrl("serviceArea");return new (yield new Promise(function(M,R){n(["../tasks/ServiceAreaTask"],function(T){M(A(T))},R)})).default(K)});return function(){return F.apply(this,arguments)}}();J.fetchBasemaps=function(F,K){const M=
new w;M.query=F||(this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery);M.disableExtraQuery=!0;return this.queryGroups(M,K).then(R=>{M.num=100;M.query='type:"Web Map" -type:"Web Application"';return R.total?(R=R.results[0],M.sortField=R.sortField||"name",M.sortOrder=R.sortOrder||"desc",R.queryItems(M,K)):null}).then(R=>R&&R.total?R.results.filter(T=>"Web Map"===T.type).map(T=>new E({portalItem:T})):[])};J.fetchCategorySchema=function(F){return this.hasCategorySchema?
this._request(this.restUrl+"/portals/self/categorySchema",F).then(K=>K.categorySchema):g.isAborted(F)?Promise.reject(g.createAbortError()):Promise.resolve([])};J.fetchFeaturedGroups=function(F){const K=this.featuredGroups,M=new w;M.num=100;M.sortField="title";if(K&&K.length){const R=[];for(const T of K)R.push(`(title:"${T.title}" AND owner:${T.owner})`);M.query=R.join(" OR ");return this.queryGroups(M,F).then(T=>T.results)}return g.isAborted(F)?Promise.reject(g.createAbortError()):Promise.resolve([])};
J.fetchRegions=function(F){const K=this.user&&this.user.culture||this.culture||B.getLocale();return this._request(this.restUrl+"/portals/regions",{...F,query:{culture:K}})};L.getDefault=function(){if(!D._default||D._default.destroyed)D._default=new D;return D._default};J.queryGroups=function(F,K){return this._queryPortal("/community/groups",F,"PortalGroup",K)};J.queryItems=function(F,K){return this._queryPortal("/search",F,"PortalItem",K)};J.queryUsers=function(F,K){F.sortField||(F.sortField="username");
return this._queryPortal("/community/users",F,"PortalUser",K)};J.toJSON=function(){throw new p("internal:not-yet-implemented","Portal.toJSON is not yet implemented");};L.fromJSON=function(F){if(!F)return null;if(F.declaredClass)throw Error("JSON object is already hydrated");return new D({sourceJSON:F})};J._getHelperService=function(F){const K=this.helperServices&&this.helperServices[F];if(!K)throw new p("portal:service-not-found",`The \`helperServices\` do not include an entry named "${F}"`);return K};
J._getHelperServiceUrl=function(F){const K=this._getHelperService(F);if(!K.url)throw new p("portal:service-url-not-found",`The \`helperServices\` entry "${F}" does not include a \`url\` value`);return K.url};J._fetchSelf=function(F=this.authMode,K=!1,M){const R=this.restUrl+"/portals/self";F={authMode:F,query:{culture:B.getLocale().toLowerCase()},...M};"auto"===F.authMode&&(F.authMode="no-prompt");K&&(F.query.default=!0);return this._request(R,F)};J._queryPortal=function(F,K,M,R){const T=d.ensureType(w,
K),Q=S=>this._request(this.restUrl+F,{...T.toRequestOptions(this),...R}).then(X=>{const aa=T.clone();aa.start=X.nextStart;return new y({nextQueryParams:aa,queryParams:T,total:X.total,results:D._resultsToTypedArray(S,{portal:this},X,R)})}).then(X=>Promise.all(X.results.map(aa=>"function"===typeof aa.when?aa.when():X)).then(()=>X,aa=>{g.throwIfAbortError(aa);return X}));return M&&G[M]?G[M]().then(({default:S})=>{g.throwIfAborted(R);return Q(S)}):Q()};J._signIn=function(){if(this.authMode===D.AUTH_MODE_ANONYMOUS)return Promise.reject(new p("portal:invalid-auth-mode",
`Current "authMode"' is "${this.authMode}"`));if("failed"===this.loadStatus)return Promise.reject(this.loadError);const F=K=>Promise.resolve().then(()=>{if("not-loaded"===this.loadStatus)return K||(this.authMode="immediate"),this.load().then(()=>null);if("loading"===this.loadStatus)return this.load().then(()=>{if(this.credential)return null;this.credential=K;return this._fetchSelf("immediate")});if(this.user&&this.credential===K)return null;this.credential=K;return this._fetchSelf("immediate")}).then(M=>
{M&&(this.sourceJSON=M,this.read(M))});return u.id?u.id.getCredential(this.restUrl).then(K=>F(K)):F(this.credential)};J._normalizeSSL=function(F){return F.replace(/^http:/i,"https:").replace(":7080",":7443")};J._normalizeUrl=function(F){const K=this.credential&&this.credential.token;return this._normalizeSSL(K?F+(-1<F.indexOf("?")?"\x26":"?")+"token\x3d"+K:F)};J._requestToTypedArray=function(F,K,M){return this._request(F,K).then(R=>{const T=D._resultsToTypedArray(M,{portal:this},R);return Promise.all(T.map(Q=>
"function"===typeof Q.when?Q.when():R)).then(()=>T,()=>T)})};J._request=function(F,K={}){const M={f:"json",...K.query},{authMode:R=this.authMode===D.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:T=null,cacheBust:Q=!1,method:S="auto",responseType:X="json",signal:aa}=K;K={authMode:R,body:T,cacheBust:Q,method:S,query:M,responseType:X,timeout:0,signal:aa};return m(this._normalizeSSL(F),K).then(ma=>ma.data)};L._resultsToTypedArray=function(F,K,M,R){if(M){const T=t.isSome(R)?R.signal:null;M=M.listings||M.notifications||
M.userInvitations||M.tags||M.items||M.groups||M.comments||M.provisions||M.results||M.relatedItems||M;if(F||K)M=M.map(Q=>{Q=Object.assign(F?F.fromJSON(Q):Q,K);"function"===typeof Q.load&&Q.load(T);return Q})}else M=[];return M};c._createClass(L,[{key:"extraQuery",get:function(){const F=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!F?` AND orgid:${this.id}`:null}},{key:"isOrganization",get:function(){return!!this.access}},{key:"restUrl",get:function(){let F=this.url;if(F){const K=
F.indexOf("/sharing");F=0<K?F.substring(0,K):this.url.replace(/\/+$/,"");F+="/sharing/rest"}return F}},{key:"stylesGroupQuery",get:function(){v.deprecatedProperty(l.getLogger(this.declaredClass),"stylesGroupQuery",{replacement:"stylesGroupQuery3d",version:"4.21"});return this.stylesGroupQuery3d}},{key:"thumbnailUrl",get:function(){const F=this.restUrl,K=this.thumbnail;return F&&K?this._normalizeSSL(F+"/portals/self/resources/"+K):null}}]);return L}(f.JSONSupportMixin(q));r.AUTH_MODE_ANONYMOUS="anonymous";
r.AUTH_MODE_AUTO="auto";r.AUTH_MODE_IMMEDIATE="immediate";z.__decorate([a.property()],r.prototype,"access",void 0);z.__decorate([a.property()],r.prototype,"allSSL",void 0);z.__decorate([a.property()],r.prototype,"authMode",void 0);z.__decorate([a.property()],r.prototype,"authorizedCrossOriginDomains",void 0);z.__decorate([h.reader("authorizedCrossOriginDomains")],r.prototype,"readAuthorizedCrossOriginDomains",null);z.__decorate([a.property()],r.prototype,"basemapGalleryGroupQuery",void 0);z.__decorate([a.property()],
r.prototype,"bingKey",void 0);z.__decorate([a.property()],r.prototype,"canListApps",void 0);z.__decorate([a.property()],r.prototype,"canListData",void 0);z.__decorate([a.property()],r.prototype,"canListPreProvisionedItems",void 0);z.__decorate([a.property()],r.prototype,"canProvisionDirectPurchase",void 0);z.__decorate([a.property()],r.prototype,"canSearchPublic",void 0);z.__decorate([a.property()],r.prototype,"canShareBingPublic",void 0);z.__decorate([a.property()],r.prototype,"canSharePublic",void 0);
z.__decorate([a.property()],r.prototype,"canSignInArcGIS",void 0);z.__decorate([a.property()],r.prototype,"canSignInIDP",void 0);z.__decorate([a.property()],r.prototype,"colorSetsGroupQuery",void 0);z.__decorate([a.property()],r.prototype,"commentsEnabled",void 0);z.__decorate([a.property({type:Date})],r.prototype,"created",void 0);z.__decorate([a.property()],r.prototype,"credential",void 0);z.__decorate([a.property()],r.prototype,"culture",void 0);z.__decorate([a.property()],r.prototype,"currentVersion",
void 0);z.__decorate([a.property()],r.prototype,"customBaseUrl",void 0);z.__decorate([a.property()],r.prototype,"defaultBasemap",void 0);z.__decorate([h.reader("defaultBasemap")],r.prototype,"readDefaultBasemap",null);z.__decorate([a.property({type:e})],r.prototype,"defaultExtent",void 0);z.__decorate([a.property()],r.prototype,"defaultVectorBasemap",void 0);z.__decorate([h.reader("defaultVectorBasemap")],r.prototype,"readDefaultVectorBasemap",null);z.__decorate([a.property()],r.prototype,"description",
void 0);z.__decorate([a.property()],r.prototype,"eueiEnabled",void 0);z.__decorate([a.property({readOnly:!0})],r.prototype,"extraQuery",null);z.__decorate([a.property()],r.prototype,"featuredGroups",void 0);z.__decorate([a.property()],r.prototype,"featuredItemsGroupQuery",void 0);z.__decorate([a.property()],r.prototype,"galleryTemplatesGroupQuery",void 0);z.__decorate([a.property()],r.prototype,"livingAtlasGroupQuery",void 0);z.__decorate([a.property()],r.prototype,"hasCategorySchema",void 0);z.__decorate([a.property()],
r.prototype,"helpBase",void 0);z.__decorate([a.property()],r.prototype,"helperServices",void 0);z.__decorate([a.property()],r.prototype,"helpMap",void 0);z.__decorate([a.property()],r.prototype,"homePageFeaturedContent",void 0);z.__decorate([a.property()],r.prototype,"homePageFeaturedContentCount",void 0);z.__decorate([a.property()],r.prototype,"httpPort",void 0);z.__decorate([a.property()],r.prototype,"httpsPort",void 0);z.__decorate([a.property()],r.prototype,"id",void 0);z.__decorate([a.property()],
r.prototype,"ipCntryCode",void 0);z.__decorate([a.property({readOnly:!0})],r.prototype,"isOrganization",null);z.__decorate([a.property()],r.prototype,"isPortal",void 0);z.__decorate([a.property()],r.prototype,"isReadOnly",void 0);z.__decorate([a.property()],r.prototype,"layerTemplatesGroupQuery",void 0);z.__decorate([a.property()],r.prototype,"maxTokenExpirationMinutes",void 0);z.__decorate([a.property({type:Date})],r.prototype,"modified",void 0);z.__decorate([a.property()],r.prototype,"name",void 0);
z.__decorate([a.property()],r.prototype,"portalHostname",void 0);z.__decorate([a.property()],r.prototype,"portalMode",void 0);z.__decorate([a.property()],r.prototype,"portalProperties",void 0);z.__decorate([a.property()],r.prototype,"region",void 0);z.__decorate([a.property({readOnly:!0})],r.prototype,"restUrl",null);z.__decorate([a.property()],r.prototype,"rotatorPanels",void 0);z.__decorate([a.property()],r.prototype,"showHomePageDescription",void 0);z.__decorate([a.property()],r.prototype,"sourceJSON",
void 0);z.__decorate([a.property()],r.prototype,"staticImagesUrl",void 0);z.__decorate([a.property({readOnly:!0,json:{read:!1}})],r.prototype,"stylesGroupQuery",null);z.__decorate([a.property({json:{name:"2DStylesGroupQuery"}})],r.prototype,"stylesGroupQuery2d",void 0);z.__decorate([a.property({json:{name:"stylesGroupQuery"}})],r.prototype,"stylesGroupQuery3d",void 0);z.__decorate([a.property()],r.prototype,"supportsHostedServices",void 0);z.__decorate([a.property()],r.prototype,"symbolSetsGroupQuery",
void 0);z.__decorate([a.property()],r.prototype,"templatesGroupQuery",void 0);z.__decorate([a.property()],r.prototype,"thumbnail",void 0);z.__decorate([a.property({readOnly:!0})],r.prototype,"thumbnailUrl",null);z.__decorate([a.property()],r.prototype,"units",void 0);z.__decorate([a.property()],r.prototype,"url",void 0);z.__decorate([a.property()],r.prototype,"urlKey",void 0);z.__decorate([h.reader("urlKey")],r.prototype,"readUrlKey",null);z.__decorate([a.property()],r.prototype,"user",void 0);z.__decorate([h.reader("user")],
r.prototype,"readUser",null);z.__decorate([a.property()],r.prototype,"useStandardizedQuery",void 0);z.__decorate([a.property()],r.prototype,"useVectorBasemaps",void 0);z.__decorate([a.property()],r.prototype,"vectorBasemapGalleryGroupQuery",void 0);return r=D=z.__decorate([k.subclass("esri.portal.Portal")],r)})},"esri/intl":function(){define("exports ./intl/date ./intl/number ./intl/substitute ./intl/locale ./intl/messages ./intl/t9n ./assets".split(" "),function(n,c,z,x,r,u,m,v){u.registerMessageBundleLoader(m.createJSONLoader({pattern:"esri/",
location:v.getAssetUrl}));n.convertDateFormatToIntlOptions=c.convertDateFormatToIntlOptions;n.formatDate=c.formatDate;n.convertNumberFormatToIntlOptions=z.convertNumberFormatToIntlOptions;n.formatNumber=z.formatNumber;n.substitute=x.substitute;n.getLocale=r.getLocale;n.onLocaleChange=r.onLocaleChange;n.prefersRTL=r.prefersRTL;n.setLocale=r.setLocale;n.fetchMessageBundle=u.fetchMessageBundle;n.normalizeMessageBundleLocale=u.normalizeMessageBundleLocale;n.registerMessageBundleLoader=u.registerMessageBundleLoader;
n.createJSONLoader=m.createJSONLoader;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/intl/date":function(){define(["exports","../core/jsonMap","./locale"],function(n,c,z){function x(a){a=a||g;if(!t.has(a)){var b=z.getLocale();b=l[z.getLocale()]||b;t.set(a,new Intl.DateTimeFormat(b,a))}return t.get(a)}var r={year:"numeric",month:"numeric",day:"numeric"},u={year:"numeric",month:"long",day:"numeric"},m={year:"numeric",month:"short",day:"numeric"};const v={year:"numeric",month:"long",weekday:"long",
day:"numeric"},p={hour:"numeric",minute:"numeric"},f={...p,second:"numeric"},q={"short-date":r,"short-date-short-time":{...r,...p},"short-date-short-time-24":{...r,...p,hour12:!1},"short-date-long-time":{...r,...f},"short-date-long-time-24":{...r,...f,hour12:!1},"short-date-le":r,"short-date-le-short-time":{...r,...p},"short-date-le-short-time-24":{...r,...p,hour12:!1},"short-date-le-long-time":{...r,...f},"short-date-le-long-time-24":{...r,...f,hour12:!1},"long-month-day-year":u,"long-month-day-year-short-time":{...u,
...p},"long-month-day-year-short-time-24":{...u,...p,hour12:!1},"long-month-day-year-long-time":{...u,...f},"long-month-day-year-long-time-24":{...u,...f,hour12:!1},"day-short-month-year":m,"day-short-month-year-short-time":{...m,...p},"day-short-month-year-short-time-24":{...m,...p,hour12:!1},"day-short-month-year-long-time":{...m,...f},"day-short-month-year-long-time-24":{...m,...f,hour12:!1},"long-date":v,"long-date-short-time":{...v,...p},"long-date-short-time-24":{...v,...p,hour12:!1},"long-date-long-time":{...v,
...f},"long-date-long-time-24":{...v,...f,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":p,"long-time":f};c=c.strict()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",
shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",
dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});r=c.apiValues;u=c.toJSON.bind(c);m=c.fromJSON.bind(c);const l={ar:"ar-u-nu-latn-ca-gregory"};let t=new WeakMap,
g=q["short-date-short-time"];z.beforeLocaleChange(()=>{t=new WeakMap;g=q["short-date-short-time"]});n.convertDateFormatToIntlOptions=function(a){return q[a]||null};n.dateFormats=r;n.dictionary=c;n.formatDate=function(a,b){return x(b).format(a)};n.fromJSON=m;n.getDateTimeFormatter=x;n.toJSON=u;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/intl/locale":function(){define(["exports","../core/global"],function(n,c){function z(){var b,d;return null!=(b=null!=l?l:null==(d=c.navigator)?void 0:
d.language)?b:"en"}function x(){void 0===q&&(q=z());return q}function r(b=x()){b=/^([a-zA-Z]{2,3})(?:[_\-]\w+)*$/.exec(b);return null==b?void 0:b[1].toLowerCase()}function u(){var b;const d=null!=(b=f)?b:z();q!==d&&(q=d,[...a].forEach(h=>{h.call(null,d)}),[...g].forEach(h=>{h.call(null,d)}))}var m,v,p;let f=void 0,q=void 0;const l=null!=(m=null==(v=c.esriConfig)?void 0:v.locale)?m:null==(p=c.dojoConfig)?void 0:p.locale,t={he:!0,ar:!0},g=[],a=[];null==c.addEventListener?void 0:c.addEventListener("languagechange",
u);n.beforeLocaleChange=function(b){a.push(b);return{remove(){g.splice(a.indexOf(b),1)}}};n.getDefaultLocale=z;n.getLanguage=r;n.getLocale=x;n.onLocaleChange=function(b){g.push(b);return{remove(){g.splice(g.indexOf(b),1)}}};n.prefersRTL=function(b=x()){b=r(b);return void 0!==b&&(t[b]||!1)};n.setLocale=function(b){f=b?b:void 0;u()};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/intl/number":function(){define(["exports","../core/maybe","./locale"],function(n,c,z){function x(v){const p=v||
m;if(!u.has(p)){var f=z.getLocale();f=r[z.getLocale()]||f;u.set(p,new Intl.NumberFormat(f,v))}return c.assumeNonNull(u.get(p))}const r={ar:"ar-u-nu-latn"};let u=new WeakMap,m={};z.beforeLocaleChange(()=>{u=new WeakMap;m={}});n.convertNumberFormatToIntlOptions=function(v={}){const p={};null!=v.digitSeparator&&(p.useGrouping=v.digitSeparator);null!=v.places&&(p.minimumFractionDigits=p.maximumFractionDigits=v.places);return p};n.formatNumber=function(v,p){return x(p).format(v)};n.getFormatter=x;Object.defineProperty(n,
"__esModule",{value:!0})})},"esri/intl/substitute":function(){define("exports ../core/Logger ../core/object ../core/string ./date ./number".split(" "),function(n,c,z,x,r,u){function m(p){switch(typeof p){case "string":return p;case "number":return u.formatNumber(p);case "boolean":return""+p;default:return p instanceof Date?r.formatDate(p):""}}const v=c.getLogger("esri.intl");n.substitute=function(p,f,q={}){const {format:l={}}=q;return x.replace(p,t=>{{const b=t.indexOf(":");if(-1===b)var g=t.trim();
else{g=t.slice(0,b).trim();var a=t.slice(b+1).trim()}if(g)if(t=z.getDeepValue(g,f),null==t)a="";else if(g=l[a]||l[g])b:switch(g.type){case "date":a=r.formatDate(t,g.intlOptions);break b;case "number":a=u.formatNumber(t,g.intlOptions);break b;default:v.warn("missing format descriptor for key {key}"),a=m(t)}else if(a)b:switch(a.toLowerCase()){case "dateformat":a=r.formatDate(t);break b;case "numberformat":a=u.formatNumber(t);break b;default:v.warn(`inline format is unsupported since 4.12: ${a}`),a=
/^(dateformat|datestring)/i.test(a)?r.formatDate(t):/^numberformat/i.test(a)?u.formatNumber(t):m(t)}else a=m(t);else a=""}return a})};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/intl/messages":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","../core/Error","../core/promiseUtils","./locale"],function(n,c,z,x,r){function u(h){var k;return null!=(k=t[h])?k:!1}function m(h){for(const k of a.keys())q(h.pattern,k)&&a.delete(k)}function v(){v=c._asyncToGenerator(function*(h){const k=
r.getLocale();a.has(h)||a.set(h,p(h,k));h=a.get(h);yield b.add(h);return h});return v.apply(this,arguments)}function p(h,k){return f.apply(this,arguments)}function f(){f=c._asyncToGenerator(function*(h,k){const e=[];for(const w of g)if(q(w.pattern,h))try{return yield w.fetchMessageBundle(h,k)}catch(y){e.push(y)}if(e.length)throw new z("intl:message-bundle-error",`Errors occurred while loading "${h}"`,{errors:e});throw new z("intl:no-message-bundle-loader",`No loader found for message bundle "${h}"`);
});return f.apply(this,arguments)}function q(h,k){return"string"===typeof h?k.startsWith(h):h.test(k)}const l=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,t={ar:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0},g=[],a=new Map;r.beforeLocaleChange(()=>{a.clear()});const b=new (function(){function h(){this._numLoading=
0}var k=h.prototype;k.waitForAll=function(){var e=c._asyncToGenerator(function*(){this._dfd&&(yield this._dfd.promise)});return function(){return e.apply(this,arguments)}}();k.add=function(e){this._increase();e.then(()=>this._decrease(),()=>this._decrease());return this.waitForAll()};k._increase=function(){this._numLoading++;this._dfd||(this._dfd=x.createDeferred())};k._decrease=function(){this._numLoading=Math.max(this._numLoading-1,0);this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=
null)};return h}()),d={cache:a,loaders:g};n.fetchMessageBundle=function(h){return v.apply(this,arguments)};n.normalizeMessageBundleLocale=function(h){if(!l.test(h))return null;const [,k,e]=l.exec(h);h=k+(e?"-"+e.toUpperCase():"");return u(h)?h:u(k)?k:null};n.registerMessageBundleLoader=function(h){g.includes(h)||(m(h),g.unshift(h));return{remove(){const k=g.indexOf(h);-1<k&&(g.splice(k,1),m(h))}}};n.test=d;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/intl/t9n":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../request ../core/Error ../core/global ../core/maybe ./messages".split(" "),
function(n,c,z,x,r,u,m){function v(g,a,b,d){return p.apply(this,arguments)}function p(){p=c._asyncToGenerator(function*(g,a,b,d){var h=a.exec(b);if(!h)throw new x("esri-intl:invalid-bundle",`Bundle id "${b}" is not compatible with the pattern "${a}"`);a=h[1]?`${h[1]}/`:"";h=h[2];const k=m.normalizeMessageBundleLocale(d);d=`${a}${h}.json`;a=k?`${a}${h}_${k}.json`:d;let e;try{e=yield f(g(a))}catch(w){if(a===d)throw new x("intl:unknown-bundle",`Bundle "${b}" cannot be loaded`,{error:w});try{e=yield f(g(d))}catch(y){throw new x("intl:unknown-bundle",
`Bundle "${b}" cannot be loaded`,{error:y});}}return e});return p.apply(this,arguments)}function f(g){return q.apply(this,arguments)}function q(){q=c._asyncToGenerator(function*(g){if(u.isSome(t.fetchBundleAsset))return t.fetchBundleAsset(g);g=yield z(g,{responseType:"text"});return JSON.parse(g.data)});return q.apply(this,arguments)}let l=function(){function g({base:a="",pattern:b,location:d=new URL(window.location.href)}){let h;h="string"===typeof d?k=>(new URL(k,new URL(d,r.location))).href:d instanceof
URL?k=>(new URL(k,d)).href:d;this.pattern="string"===typeof b?new RegExp(`^${b}`):b;this.getAssetUrl=h;a=a?a.endsWith("/")?a:a+"/":"";this.matcher=new RegExp(`^${a}(?:(.*)/)?(.*)$`)}g.prototype.fetchMessageBundle=function(a,b){return v(this.getAssetUrl,this.matcher,a,b)};return g}();const t={};n.JSONLoader=l;n.createJSONLoader=function(g){return new l(g)};n.test=t;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/Loadable":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Error ./Promise ./promiseUtils ./Warning ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),
function(n,c,z,x,r,u,m,v){const p=f=>{f=function(q){function l(...g){var a=q.call(this,...g)||this;a._loadController=null;a.loadError=null;a.loadStatus="not-loaded";a._set("loadWarnings",[]);a.addResolvingPromise(new Promise(b=>{const d=a.load.bind(n._assertThisInitialized(a));a.load=h=>{const k=new Promise((e,w)=>{const y=r.onAbortOrThrow(h,w);a.destroyed&&w(new z("load:instance-destroyed",`Instance of '${a.declaredClass||a.constructor.name}' is already destroyed`,{instance:n._assertThisInitialized(a)}));
a._promiseProps.when(e,w).finally(()=>{y&&y.remove()})});if("not-loaded"===a.loadStatus){a._set("loadStatus","loading");const e=a._loadController=r.createAbortController();d({signal:e.signal});r.onAbort(e.signal,()=>{a._promiseProps.abort()})}b();return k}}));a.when(()=>{a._set("loadStatus","loaded");a._loadController=null},b=>{a._set("loadStatus","failed");a._set("loadError",b);a._loadController=null});return a}n._inheritsLoose(l,q);var t=l.prototype;t.load=function(){return null};t.cancelLoad=function(){var g;
if(this.isFulfilled())return this;this._set("loadError",new z("load:cancelled","Cancelled"));null==(g=this._loadController)?void 0:g.abort();return this};n._createClass(l,[{key:"loaded",get:function(){return"loaded"===this.loadStatus}},{key:"loadWarnings",get:function(){return this._get("loadWarnings")}}]);return l}(f);c.__decorate([m.property({readOnly:!0})],f.prototype,"loaded",null);c.__decorate([m.property({readOnly:!0})],f.prototype,"loadError",void 0);c.__decorate([m.property()],f.prototype,
"loadStatus",void 0);c.__decorate([m.property({type:[u],readOnly:!0})],f.prototype,"loadWarnings",null);return f=c.__decorate([v.subclass("esri.core.Loadable")],f)};x=function(f){function q(){return f.apply(this,arguments)||this}n._inheritsLoose(q,f);return q}(p(x.EsriPromise));x=c.__decorate([v.subclass("esri.core.Loadable")],x);(function(f){f.LoadableMixin=p;f.isLoadable=function(q){return!(!q||!q.load)}})(x||(x={}));return x})},"esri/core/Promise":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./maybe ./promiseUtils ./accessorSupport/decorators/subclass".split(" "),
function(n,c,z,x,r,u,m){let v=function(){function f(l){this.instance=l;this._resolver=u.createDeferred();this._status=0;this._resolvingPromises=[];this._resolver.promise.then(()=>{this._status=1;this._cleanUp()},()=>{this._status=2;this._cleanUp()})}var q=f.prototype;q.addResolvingPromise=function(l){this._resolvingPromises.push(l);this._tryResolve()};q.isResolved=function(){return 1===this._status};q.isRejected=function(){return 2===this._status};q.isFulfilled=function(){return 0!==this._status};
q.abort=function(){this._resolver.reject(u.createAbortError())};q.when=function(l,t){return this._resolver.promise.then(l,t)};q._cleanUp=function(){this._allPromise=this._resolvingPromises=this._allPromise=null};q._tryResolve=function(){if(!this.isFulfilled()){var l=u.createDeferred(),t=[...this._resolvingPromises,r.assumeNonNull(l.promise)],g=this._allPromise=Promise.all(t);g.then(()=>{this.isFulfilled()||this._allPromise!==g||this._resolver.resolve(this.instance)},a=>{this.isFulfilled()||this._allPromise!==
g||u.isAbortError(a)||this._resolver.reject(a)});l.resolve()}};return f}();const p=f=>{f=function(q){function l(...g){g=q.call(this,...g)||this;g._promiseProps=new v(c._assertThisInitialized(g));g.addResolvingPromise(Promise.resolve());return g}c._inheritsLoose(l,q);var t=l.prototype;t.isResolved=function(){return this._promiseProps.isResolved()};t.isRejected=function(){return this._promiseProps.isRejected()};t.isFulfilled=function(){return this._promiseProps.isFulfilled()};t.when=function(g,a){return(new Promise((b,
d)=>{this._promiseProps.when(b,d)})).then(g,a)};t.catch=function(g){return this.when(null,g)};t.addResolvingPromise=function(g){g&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in g?g.when():g)};return l}(f);return f=z.__decorate([m.subclass("esri.core.Promise")],f)};n.EsriPromise=function(f){function q(){return f.apply(this,arguments)||this}c._inheritsLoose(q,f);return q}(p(x));n.EsriPromise=z.__decorate([m.subclass("esri.core.Promise")],n.EsriPromise);
n.EsriPromiseMixin=p;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/portal/PortalQueryParams":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Accessor ../core/jsonMap ../core/lang ../core/maybe ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/subclass ../geometry/Extent ../geometry/SpatialReference ../geometry/support/webMercatorUtils".split(" "),function(n,c,z,
x,r,u,m,v,p,f,q,l,t,g){var a;const b=new x.JSONMap({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});z=a=function(d){function h(e){e=d.call(this,e)||this;e.categories=null;e.disableExtraQuery=!1;e.extent=null;e.num=10;e.query=null;e.sortField=null;e.start=1;return e}n._inheritsLoose(h,d);var k=h.prototype;k.clone=function(){return new a({categories:this.categories?r.clone(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?
this.extent.clone():null,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})};k.toRequestOptions=function(e,w){let y;this.categories&&(y=this.categories.map(A=>Array.isArray(A)?JSON.stringify(A):A));let C;if(this.extent){var B=g.project(this.extent,t.WGS84);u.isSome(B)&&(C=`${B.xmin},${B.ymin},${B.xmax},${B.ymax}`)}B=this.query;!this.disableExtraQuery&&e.extraQuery&&(B="("+B+")"+e.extraQuery);e={categories:y,bbox:C,q:B,num:this.num,sortField:null,sortOrder:null,
start:this.start};this.sortField&&(e.sortField=this.sortField.split(",").map(A=>b.toJSON(A.trim())).join(","),e.sortOrder=this.sortOrder);return{query:{...w,...e}}};n._createClass(h,[{key:"sortOrder",get:function(){return this._get("sortOrder")||"asc"},set:function(e){"asc"!==e&&"desc"!==e||this._set("sortOrder",e)}}]);return h}(z);c.__decorate([m.property()],z.prototype,"categories",void 0);c.__decorate([m.property()],z.prototype,"disableExtraQuery",void 0);c.__decorate([m.property({type:l})],z.prototype,
"extent",void 0);c.__decorate([m.property()],z.prototype,"num",void 0);c.__decorate([m.property()],z.prototype,"query",void 0);c.__decorate([m.property()],z.prototype,"sortField",void 0);c.__decorate([m.property()],z.prototype,"sortOrder",null);c.__decorate([m.property()],z.prototype,"start",void 0);return z=a=c.__decorate([q.subclass("esri.portal.PortalQueryParams")],z)})},"esri/portal/PortalQueryResult":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/subclass".split(" "),
function(n,c,z,x,r,u,m,v){z=function(p){function f(q){q=p.call(this,q)||this;q.nextQueryParams=null;q.queryParams=null;q.results=null;q.total=null;return q}n._inheritsLoose(f,p);return f}(z);c.__decorate([x.property()],z.prototype,"nextQueryParams",void 0);c.__decorate([x.property()],z.prototype,"queryParams",void 0);c.__decorate([x.property()],z.prototype,"results",void 0);c.__decorate([x.property()],z.prototype,"total",void 0);return z=c.__decorate([v.subclass("esri.portal.PortalQueryResult")],
z)})},"esri/portal/PortalUser":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/subclass ./PortalFolder ./PortalGroup".split(" "),function(n,c,z,x,r,u,m,v,p,f,q,l){var t;r=t=function(g){function a(...d){d=g.call(this,...d)||this;d.access=null;d.created=null;d.culture=null;d.description=null;
d.email=null;d.fullName=null;d.modified=null;d.orgId=null;d.portal=null;d.preferredView=null;d.privileges=null;d.region=null;d.role=null;d.roleId=null;d.sourceJSON=null;d.units=null;d.username=null;d.userType=null;return d}c._inheritsLoose(a,g);var b=a.prototype;b.addItem=function(d){const h=d&&d.item;var k=d&&d.data;d=d&&d.folder;const e={method:"post"};h&&(e.query=h.createPostQuery(),null!=k&&("string"===typeof k?e.query.text=k:"object"===typeof k&&(e.query.text=JSON.stringify(k))));k=this.userContentUrl;
d&&(k+="/"+("string"===typeof d?d:d.id));return this.portal._request(k+"/addItem",e).then(w=>{h.id=w.id;h.portal=this.portal;return h.loaded?h.reload():h.load()})};b.deleteItem=function(d){let h=this.userContentUrl;d.ownerFolder&&(h+="/"+d.ownerFolder);return this.portal._request(h+`/items/${d.id}/delete`,{method:"post"}).then(()=>{d.id=null;d.portal=null})};b.deleteItems=function(d){const h=this.userContentUrl+"/deleteItems";var k=d.map(e=>e.id);return k.length?(k={method:"post",query:{items:k.join(",")}},
this.portal._request(h,k).then(()=>{d.forEach(e=>{e.id=null;e.portal=null})})):Promise.resolve(void 0)};b.fetchFolders=function(){return this.portal._request(this.userContentUrl,{query:{num:1}}).then(d=>d&&d.folders?d.folders.map(h=>{h=q.fromJSON(h);h.portal=this.portal;return h}):[])};b.fetchGroups=function(){return this.portal._request(this.url).then(d=>d&&d.groups?d.groups.map(h=>{h=l.fromJSON(h);h.portal=this.portal;return h}):[])};b.fetchItems=function(d){d||(d={});let h=this.userContentUrl;
d.folder&&(h+="/"+d.folder.id);let k;return(new Promise(function(e,w){n(["./PortalItem"],function(y){e(Object.freeze({__proto__:null,default:y}))},w)})).then(({default:e})=>{k=e;return this.portal._request(h,{query:{folders:!1,num:d.num||10,start:d.start||1,sortField:d.sortField||"created",sortOrder:d.sortOrder||"asc"}})}).then(e=>{let w;return e&&e.items?(w=e.items.map(y=>{y=k.fromJSON(y);y.portal=this.portal;return y}),Promise.all(w.map(y=>y.load())).catch(y=>y).then(()=>({items:w,nextStart:e.nextStart,
total:e.total}))):{items:[],nextStart:-1,total:0}})};b.fetchTags=function(){return this.portal._request(this.url+"/tags").then(d=>d.tags)};b.getThumbnailUrl=function(d){let h=this.thumbnailUrl;h&&d&&(h+=`&w=${d}`);return h};b.queryFavorites=function(d){return this.favGroupId?(this._favGroup||(this._favGroup=new l({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(d)):Promise.reject(new x("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))};b.toJSON=
function(){throw new x("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};a.fromJSON=function(d){if(!d)return null;if(d.declaredClass)throw Error("JSON object is already hydrated");const h=new t;h.sourceJSON=d;h.read(d);return h};c._createClass(a,[{key:"thumbnailUrl",get:function(){const d=this.url,h=this.thumbnail;return d&&h?this.portal._normalizeUrl(`${d}/info/${h}?f=json`):null}},{key:"userContentUrl",get:function(){const d=this.get("portal.restUrl");return d?`${d}/content/users/${this.username}`:
null}},{key:"url",get:function(){const d=this.get("portal.restUrl");return d?`${d}/community/users/${this.username}`:null}}]);return a}(r.JSONSupport);z.__decorate([u.property()],r.prototype,"access",void 0);z.__decorate([u.property({type:Date})],r.prototype,"created",void 0);z.__decorate([u.property()],r.prototype,"culture",void 0);z.__decorate([u.property()],r.prototype,"description",void 0);z.__decorate([u.property()],r.prototype,"email",void 0);z.__decorate([u.property()],r.prototype,"favGroupId",
void 0);z.__decorate([u.property()],r.prototype,"fullName",void 0);z.__decorate([u.property({type:Date})],r.prototype,"modified",void 0);z.__decorate([u.property()],r.prototype,"orgId",void 0);z.__decorate([u.property()],r.prototype,"portal",void 0);z.__decorate([u.property()],r.prototype,"preferredView",void 0);z.__decorate([u.property()],r.prototype,"privileges",void 0);z.__decorate([u.property()],r.prototype,"region",void 0);z.__decorate([u.property()],r.prototype,"role",void 0);z.__decorate([u.property()],
r.prototype,"roleId",void 0);z.__decorate([u.property()],r.prototype,"sourceJSON",void 0);z.__decorate([u.property()],r.prototype,"thumbnail",void 0);z.__decorate([u.property({readOnly:!0})],r.prototype,"thumbnailUrl",null);z.__decorate([u.property()],r.prototype,"units",void 0);z.__decorate([u.property({readOnly:!0})],r.prototype,"userContentUrl",null);z.__decorate([u.property({readOnly:!0})],r.prototype,"url",null);z.__decorate([u.property()],r.prototype,"username",void 0);z.__decorate([u.property()],
r.prototype,"userType",void 0);return r=t=z.__decorate([f.subclass("esri.portal.PortalUser")],r)})},"esri/portal/PortalFolder":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/subclass".split(" "),function(n,c,z,x,r,u,m,v,p){x=function(f){function q(l){l=f.call(this,l)||this;l.created=null;l.id=null;
l.portal=null;l.title=null;l.username=null;return l}n._inheritsLoose(q,f);q.prototype.toJSON=function(){throw new z("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented");};n._createClass(q,[{key:"url",get:function(){const l=this.get("portal.restUrl");return l?`${l}/content/users/${this.username}/${this.id}`:null}}]);return q}(x.JSONSupport);c.__decorate([r.property({type:Date})],x.prototype,"created",void 0);c.__decorate([r.property()],x.prototype,"id",void 0);c.__decorate([r.property()],
x.prototype,"portal",void 0);c.__decorate([r.property()],x.prototype,"title",void 0);c.__decorate([r.property({readOnly:!0})],x.prototype,"url",null);c.__decorate([r.property()],x.prototype,"username",void 0);return x=c.__decorate([p.subclass("esri.portal.PortalFolder")],x)})},"esri/portal/PortalGroup":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/subclass ./PortalQueryParams".split(" "),
function(n,c,z,x,r,u,m,v,p,f){x=function(q){function l(g){g=q.call(this,g)||this;g.access=null;g.created=null;g.description=null;g.id=null;g.isInvitationOnly=!1;g.modified=null;g.owner=null;g.portal=null;g.snippet=null;g.sortField=null;g.sortOrder=null;g.tags=null;g.title=null;return g}n._inheritsLoose(l,q);var t=l.prototype;t.fetchCategorySchema=function(g){return this.portal._request(this.url+"/categorySchema",g).then(a=>{a=a.categorySchema||[];return a.some(b=>"contentCategorySetsGroupQuery.LivingAtlas"===
b.source)?this._fetchCategorySchemaSet("LivingAtlas",g):a})};t.fetchMembers=function(g){return this.portal._request(this.url+"/users",g)};t.getThumbnailUrl=function(g){let a=this.thumbnailUrl;a&&g&&(a+=`&w=${g}`);return a};t.toJSON=function(){throw new z("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};t.queryItems=function(g,a){g=m.ensureType(f,g);if(5<parseFloat(this.portal.currentVersion))return g=g||new f,this.portal._queryPortal(`/content/groups/${this.id}/search`,
g,"PortalItem",a);g=g?g.clone():new f;g.query="group:"+this.id+(g.query?" "+g.query:"");return this.portal.queryItems(g,a)};t._fetchCategorySchemaSet=function(g,a){return this.portal._fetchSelf(this.portal.authMode,!0,a).then(b=>{if(b=b.contentCategorySetsGroupQuery){const d=new f;d.disableExtraQuery=!0;d.num=1;d.query=b;return this.portal.queryGroups(d,a)}throw new z("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found");}).then(b=>{if(b.total){b=b.results[0];const d=
new f;d.num=1;d.query=`typekeywords:"${g}"`;return b.queryItems(d,a)}throw new z("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found");}).then(b=>b.total?b.results[0].fetchData("json",a).then(d=>(d=d&&d.categorySchema)&&d.length?d:[]):[])};n._createClass(l,[{key:"thumbnailUrl",get:function(){const g=this.url,a=this.thumbnail;return g&&a?this.portal._normalizeUrl(`${g}/info/${a}?f=json`):null}},{key:"url",get:function(){const g=this.get("portal.restUrl");return g?g+"/community/groups/"+
this.id:null}}]);return l}(x.JSONSupport);c.__decorate([r.property()],x.prototype,"access",void 0);c.__decorate([r.property({type:Date})],x.prototype,"created",void 0);c.__decorate([r.property()],x.prototype,"description",void 0);c.__decorate([r.property()],x.prototype,"id",void 0);c.__decorate([r.property()],x.prototype,"isInvitationOnly",void 0);c.__decorate([r.property({type:Date})],x.prototype,"modified",void 0);c.__decorate([r.property()],x.prototype,"owner",void 0);c.__decorate([r.property()],
x.prototype,"portal",void 0);c.__decorate([r.property()],x.prototype,"snippet",void 0);c.__decorate([r.property()],x.prototype,"sortField",void 0);c.__decorate([r.property()],x.prototype,"sortOrder",void 0);c.__decorate([r.property()],x.prototype,"tags",void 0);c.__decorate([r.property()],x.prototype,"thumbnail",void 0);c.__decorate([r.property({readOnly:!0})],x.prototype,"thumbnailUrl",null);c.__decorate([r.property()],x.prototype,"title",void 0);c.__decorate([r.property({readOnly:!0})],x.prototype,
"url",null);return x=c.__decorate([p.subclass("esri.portal.PortalGroup")],x)})},"esri/symbols/LineSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/maybe ../core/screenUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./Symbol3DLayer ./support/colors ./support/materialUtils ./support/Symbol3DMaterial ./support/symbolLayerUtils3D".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a,b){var d;m=d=function(h){function k(e){e=h.call(this,e)||this;e.material=null;e.type="line";e.join="miter";e.cap="butt";e.size=r.px2pt(1);e.pattern="solid";e.stipplePattern=null;e.stippleOffColor=null;return e}n._inheritsLoose(k,h);k.prototype.clone=function(){return new d({enabled:this.enabled,material:x.isSome(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern,stipplePattern:this.stipplePattern?this.stipplePattern.slice():
null,stippleOffColor:this.stippleOffColor?this.stippleOffColor.clone():null})};k.fromSimpleLineSymbol=function(e){return new d({size:e.width||1,cap:e.cap||"butt",join:e.join||"miter",pattern:"solid",material:{color:(e.color||t.white).clone()}})};return k}(l);c.__decorate([u.property({type:a["default"],json:{write:!0}})],m.prototype,"material",void 0);c.__decorate([f.enumeration({Line:"line"},{readOnly:!0})],m.prototype,"type",void 0);c.__decorate([u.property({type:["miter","bevel","round"],json:{write:!0,
default:"miter"}})],m.prototype,"join",void 0);c.__decorate([u.property({type:["butt","square","round"],json:{write:!0,default:"butt"}})],m.prototype,"cap",void 0);c.__decorate([u.property(g.screenSizeProperty)],m.prototype,"size",void 0);c.__decorate([u.property({type:b.linePatterns})],m.prototype,"pattern",void 0);c.__decorate([u.property(g.stipplePatternProperty)],m.prototype,"stipplePattern",void 0);c.__decorate([u.property({type:z})],m.prototype,"stippleOffColor",void 0);return m=d=c.__decorate([q.subclass("esri.symbols.LineSymbol3DLayer")],
m)})},"esri/symbols/ObjectSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./Symbol3DLayer ./support/ObjectSymbol3DLayerResource ./support/Symbol3DAnchorPosition3D ./support/Symbol3DMaterial".split(" "),function(n,c,z,x,r,u,m,v,p,f,q,l,t){var g;r=g=
function(a){function b(d){d=a.call(this,d)||this;d.material=null;d.castShadows=!0;d.resource=null;d.type="object";d.width=void 0;d.height=void 0;d.depth=void 0;d.anchor=void 0;d.anchorPosition=void 0;d.heading=void 0;d.tilt=void 0;d.roll=void 0;return d}n._inheritsLoose(b,a);b.prototype.clone=function(){return new g({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,
material:z.isSome(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})};n._createClass(b,[{key:"isPrimitive",get:function(){return!this.resource||"string"!==typeof this.resource.href}}]);return b}(f);c.__decorate([x.property({type:t["default"],json:{write:!0}})],r.prototype,"material",void 0);c.__decorate([x.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],r.prototype,"castShadows",void 0);c.__decorate([x.property({type:q["default"],
json:{write:!0}})],r.prototype,"resource",void 0);c.__decorate([v.enumeration({Object:"object"},{readOnly:!0})],r.prototype,"type",void 0);c.__decorate([x.property({type:Number,json:{write:!0}})],r.prototype,"width",void 0);c.__decorate([x.property({type:Number,json:{write:!0}})],r.prototype,"height",void 0);c.__decorate([x.property({type:Number,json:{write:!0}})],r.prototype,"depth",void 0);c.__decorate([v.enumeration({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),
x.property({json:{default:"origin"}})],r.prototype,"anchor",void 0);c.__decorate([x.property({type:l.Symbol3DAnchorPosition3D,json:{type:[Number],read:{reader:a=>new l.Symbol3DAnchorPosition3D({x:a[0],y:a[1],z:a[2]})},write:{writer:(a,b)=>{b.anchorPosition=[a.x,a.y,a.z]},overridePolicy(){return{enabled:"relative"===this.anchor}}}}})],r.prototype,"anchorPosition",void 0);c.__decorate([x.property({type:Number,json:{write:!0}})],r.prototype,"heading",void 0);c.__decorate([x.property({type:Number,json:{write:!0}})],
r.prototype,"tilt",void 0);c.__decorate([x.property({type:Number,json:{write:!0}})],r.prototype,"roll",void 0);c.__decorate([x.property({readOnly:!0})],r.prototype,"isPrimitive",null);return r=g=c.__decorate([p.subclass("esri.symbols.ObjectSymbol3DLayer")],r)})},"esri/symbols/support/ObjectSymbol3DLayerResource":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../chunks/persistableUrlUtils".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l){var t;x=x.strict()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});n.ObjectSymbol3DLayerResource=t=function(g){function a(){return g.apply(this,arguments)||this}c._inheritsLoose(a,g);a.prototype.clone=function(){return new t({href:this.href,primitive:this.primitive})};return a}(r.JSONSupport);z.__decorate([u.property({type:String,json:{read:l.read,write:l.write}})],n.ObjectSymbol3DLayerResource.prototype,
"href",void 0);z.__decorate([f.enumeration(x)],n.ObjectSymbol3DLayerResource.prototype,"primitive",void 0);n.ObjectSymbol3DLayerResource=t=z.__decorate([q.subclass("esri.symbols.support.ObjectSymbol3DLayerResource")],n.ObjectSymbol3DLayerResource);n["default"]=n.ObjectSymbol3DLayerResource;n.defaultPrimitive="sphere";Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/support/Symbol3DAnchorPosition3D":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(n,c,z,x,r,u,m,v,p){var f;n.Symbol3DAnchorPosition3D=f=function(q){function l(){var t=q.apply(this,arguments)||this;t.x=0;t.y=0;t.z=0;return t}c._inheritsLoose(l,q);l.prototype.clone=function(){return new f({x:this.x,y:this.y,z:this.z})};return l}(x);z.__decorate([r.property({type:Number})],n.Symbol3DAnchorPosition3D.prototype,"x",void 0);z.__decorate([r.property({type:Number})],n.Symbol3DAnchorPosition3D.prototype,"y",void 0);z.__decorate([r.property({type:Number})],n.Symbol3DAnchorPosition3D.prototype,
"z",void 0);n.Symbol3DAnchorPosition3D=f=z.__decorate([p.subclass("esri.symbols.support.Symbol3DAnchorPosition3D")],n.Symbol3DAnchorPosition3D);n["default"]=n.Symbol3DAnchorPosition3D;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/PathSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ./Symbol3DLayer ./support/Symbol3DMaterial".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l){var t;r=t=function(g){function a(d){d=g.call(this,d)||this;d.material=null;d.castShadows=!0;d.type="path";d.profile="circle";d.join="miter";d.cap="butt";d.width=void 0;d.height=void 0;d.anchor="center";d.profileRotation="all";return d}n._inheritsLoose(a,g);var b=a.prototype;b.readWidth=function(d,h){return null!=d?d:null==h.height&&null!=h.size?h.size:void 0};b.readHeight=function(d,h){return null!=d?d:null==h.width&&null!=h.size?h.size:void 0};b.clone=function(){return new t({enabled:this.enabled,
material:z.isSome(this.material)?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})};return a}(q);c.__decorate([x.property({type:l["default"],json:{write:!0}})],r.prototype,"material",void 0);c.__decorate([x.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],r.prototype,"castShadows",void 0);c.__decorate([v.enumeration({Path:"path"},{readOnly:!0})],
r.prototype,"type",void 0);c.__decorate([x.property({type:["circle","quad"],json:{write:!0,default:"circle"}})],r.prototype,"profile",void 0);c.__decorate([x.property({type:["miter","bevel","round"],json:{write:!0,default:"miter"}})],r.prototype,"join",void 0);c.__decorate([x.property({type:["none","butt","square","round"],json:{write:!0,default:"butt"}})],r.prototype,"cap",void 0);c.__decorate([x.property({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],r.prototype,
"width",void 0);c.__decorate([p.reader("width",["width","size","height"])],r.prototype,"readWidth",null);c.__decorate([x.property({type:Number,json:{write:!0}})],r.prototype,"height",void 0);c.__decorate([p.reader("height",["height","size","width"])],r.prototype,"readHeight",null);c.__decorate([x.property({type:["center","bottom","top"],json:{write:!0,default:"center"}})],r.prototype,"anchor",void 0);c.__decorate([x.property({type:["heading","all"],json:{write:!0,default:"all"}})],r.prototype,"profileRotation",
void 0);return r=t=c.__decorate([f.subclass("esri.symbols.PathSymbol3DLayer")],r)})},"esri/symbols/TextSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/lang ../core/maybe ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./Font ./Symbol3DLayer ./support/materialUtils ./support/Symbol3DHalo ./support/Symbol3DMaterial".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a,b){var d;u=d=function(h){function k(w){w=h.call(this,w)||this;w._userSize=void 0;w.halo=null;w.material=null;w.text=void 0;w.type="text";return w}n._inheritsLoose(k,h);var e=k.prototype;e.writeFont=function(w,y,C,B){y.font=w.write({},{...B,textSymbol3D:!0});delete y.font.size};e.clone=function(){return new d({enabled:this.enabled,font:this.font&&z.clone(this.font),halo:this.halo&&z.clone(this.halo),material:x.isSome(this.material)?this.material.clone():null,
size:this.size,text:this.text})};k.fromTextSymbol=function(w){var y=w.haloColor;var C=w.haloSize;y=y&&0<C?{color:z.clone(y),size:C}:null;C=w.font?w.font.clone():new l;return new d({size:C.size,font:C,halo:y,material:w.color?{color:w.color.clone()}:null,text:w.text})};n._createClass(k,[{key:"font",get:function(){return this._get("font")||null},set:function(w){w&&this._userSize&&(w.size=this._userSize);this._set("font",w)}},{key:"size",get:function(){return null!=this._userSize?this._userSize:this.font&&
null!=this.font.size?this.font.size:9},set:function(w){this._userSize=w;this.font&&(this.font.size=this._userSize);this.notifyChange("size")}}]);return k}(t);c.__decorate([r.property({type:l,json:{write:!0}})],u.prototype,"font",null);c.__decorate([q.writer("font")],u.prototype,"writeFont",null);c.__decorate([r.property({type:a["default"],json:{write:!0}})],u.prototype,"halo",void 0);c.__decorate([r.property({type:b["default"],json:{write:!0}})],u.prototype,"material",void 0);c.__decorate([r.property(g.screenSizeProperty),
r.property()],u.prototype,"size",null);c.__decorate([r.property({type:String,json:{write:!0}})],u.prototype,"text",void 0);c.__decorate([p.enumeration({Text:"text"},{readOnly:!0})],u.prototype,"type",void 0);return u=d=c.__decorate([f.subclass("esri.symbols.TextSymbol3DLayer")],u)})},"esri/symbols/support/Symbol3DHalo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ./materialUtils".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l){var t;n.Symbol3DHalo=t=function(g){function a(){var b=g.apply(this,arguments)||this;b.color=new x([0,0,0,1]);b.size=0;return b}c._inheritsLoose(a,g);a.prototype.clone=function(){return new t({color:u.clone(this.color),size:this.size})};return a}(r.JSONSupport);z.__decorate([m.property(l.colorAndTransparencyProperty)],n.Symbol3DHalo.prototype,"color",void 0);z.__decorate([m.property(l.screenSizeProperty)],n.Symbol3DHalo.prototype,"size",void 0);n.Symbol3DHalo=t=z.__decorate([q.subclass("esri.symbols.support.Symbol3DHalo")],
n.Symbol3DHalo);n["default"]=n.Symbol3DHalo;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/WaterSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./Symbol3DLayer".split(" "),function(n,c,z,x,r,u,m,v,p,f,q){var l;m=l=function(g){function a(b){b=
g.call(this,b)||this;b.color=t.clone();b.type="water";b.waterbodySize="medium";b.waveDirection=null;b.waveStrength="moderate";return b}n._inheritsLoose(a,g);a.prototype.clone=function(){return new l({color:x.clone(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})};return a}(q);c.__decorate([r.property({type:z,nonNullable:!0,json:{type:[u.Integer],write:(g,a,b)=>a[b]=g.toArray(1),default:()=>t.clone(),defaultEquals:g=>g.toCss(!0)===t.toCss(!0)}})],
m.prototype,"color",void 0);c.__decorate([p.enumeration({Water:"water"},{readOnly:!0})],m.prototype,"type",void 0);c.__decorate([r.property({type:["small","medium","large"],json:{write:!0,default:"medium"}})],m.prototype,"waterbodySize",void 0);c.__decorate([r.property({type:Number,json:{write:!0,default:null}})],m.prototype,"waveDirection",void 0);c.__decorate([r.property({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],m.prototype,"waveStrength",void 0);m=l=c.__decorate([f.subclass("esri.symbols.WaterSymbol3DLayer")],
m);const t=new z([0,119,190]);return m})},"esri/symbols/support/StyleOrigin":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../portal/Portal".split(" "),function(n,c,z,x,r,u,m,v,p){var f;z=f=function(q){function l(){var t=q.apply(this,arguments)||this;t.portal=null;return t}n._inheritsLoose(l,
q);l.prototype.clone=function(){return new f({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})};return l}(z);c.__decorate([x.property({type:String})],z.prototype,"name",void 0);c.__decorate([x.property({type:String})],z.prototype,"styleUrl",void 0);c.__decorate([x.property({type:String})],z.prototype,"styleName",void 0);c.__decorate([x.property({type:p})],z.prototype,"portal",void 0);return z=f=c.__decorate([v.subclass("esri.symbols.support.StyleOrigin")],z)})},
"esri/symbols/support/Thumbnail":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),function(n,c,z,x,r,u,m,v,p){var f;n.Thumbnail=f=function(q){function l(){return q.apply(this,arguments)||this}c._inheritsLoose(l,q);l.prototype.clone=function(){return new f({url:this.url})};
return l}(x);z.__decorate([r.property({type:String})],n.Thumbnail.prototype,"url",void 0);n.Thumbnail=f=z.__decorate([p.subclass("esri.symbols.support.Thumbnail")],n.Thumbnail);n["default"]=n.Thumbnail;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/callouts/calloutUtils":function(){define(["exports","./Callout3D","./LineCallout3D"],function(n,c,z){function x(r){if(!r)return!1;r=r.verticalOffset;return!r||0>=r.screenLength||0>=r.maxWorldLength?!1:!0}n.calloutProperty={types:{key:"type",
base:c,typeMap:{line:z}},json:{write:!0}};n.hasVisibleCallout=function(r){if(!r||!r.supportsCallout||!r.supportsCallout())return!1;const u=r.callout;return u&&u.visible?x(r)?!0:!1:!1};n.hasVisibleVerticalOffset=x;n.isCalloutSupport=function(r){return"point-3d"===r.type||"label-3d"===r.type};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/callouts/Callout3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(n,c,z,x,r,u,m,v){z=function(p){function f(q){q=p.call(this,q)||this;q.visible=!0;return q}n._inheritsLoose(f,p);f.prototype.clone=function(){};return f}(z.JSONSupport);c.__decorate([x.property({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],z.prototype,"type",void 0);c.__decorate([x.property({readOnly:!0})],z.prototype,"visible",void 0);return z=c.__decorate([v.subclass("esri.symbols.callouts.Callout3D")],z)})},"esri/symbols/callouts/LineCallout3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/lang ../../core/maybe ../../core/screenUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Callout3D ../../chunks/LineCallout3DBorder ../support/materialUtils".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a){var b;v=b=function(d){function h(k){k=d.call(this,k)||this;k.type="line";k.color=new z([0,0,0,1]);k.size=u.px2pt(1);k.border=null;return k}n._inheritsLoose(h,d);h.prototype.clone=function(){return new b({color:x.clone(this.color),size:this.size,border:x.clone(this.border)})};n._createClass(h,[{key:"visible",get:function(){return 0<this.size&&r.isSome(this.color)&&0<this.color.a}}]);return h}(t);c.__decorate([q.enumeration({line:"line"},{readOnly:!0})],v.prototype,
"type",void 0);c.__decorate([m.property(a.colorAndTransparencyProperty)],v.prototype,"color",void 0);c.__decorate([m.property(a.screenSizeProperty)],v.prototype,"size",void 0);c.__decorate([m.property({type:g.LineCallout3DBorder$1,json:{write:!0}})],v.prototype,"border",void 0);c.__decorate([m.property({readOnly:!0})],v.prototype,"visible",null);return v=b=c.__decorate([l.subclass("esri.symbols.callouts.LineCallout3D")],v)})},"esri/chunks/LineCallout3DBorder":function(){define("exports ./_rollupPluginBabelHelpers ./tslib.es6 ../Color ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/subclass ../symbols/support/materialUtils".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l){var t;n.LineCallout3DBorder$2=t=function(g){function a(){var b=g.apply(this,arguments)||this;b.color=new x("white");return b}c._inheritsLoose(a,g);a.prototype.clone=function(){return new t({color:u.clone(this.color)})};return a}(r.JSONSupport);z.__decorate([m.property(l.colorAndTransparencyProperty)],n.LineCallout3DBorder$2.prototype,"color",void 0);n.LineCallout3DBorder$2=t=z.__decorate([q.subclass("esri.symbols.callouts.LineCallout3DBorder")],n.LineCallout3DBorder$2);
z=n.LineCallout3DBorder$2;r=Object.freeze({__proto__:null,get LineCallout3DBorder(){return n.LineCallout3DBorder$2},default:z});n.LineCallout3DBorder=r;n.LineCallout3DBorder$1=z})},"esri/symbols/support/Symbol3DVerticalOffset":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./materialUtils".split(" "),
function(n,c,z,x,r,u,m,v,p,f){var q;n.Symbol3DVerticalOffset=q=function(l){function t(){var g=l.apply(this,arguments)||this;g.screenLength=0;g.minWorldLength=0;return g}c._inheritsLoose(t,l);t.prototype.clone=function(){return new q({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})};return t}(x.JSONSupport);z.__decorate([r.property(f.screenSizeProperty)],n.Symbol3DVerticalOffset.prototype,"screenLength",void 0);z.__decorate([r.property({type:Number,
json:{write:!0,default:0}})],n.Symbol3DVerticalOffset.prototype,"minWorldLength",void 0);z.__decorate([r.property({type:Number,json:{write:!0}})],n.Symbol3DVerticalOffset.prototype,"maxWorldLength",void 0);n.Symbol3DVerticalOffset=q=z.__decorate([p.subclass("esri.symbols.support.Symbol3DVerticalOffset")],n.Symbol3DVerticalOffset);n["default"]=n.Symbol3DVerticalOffset;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/LineSymbol3D":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./LineSymbol3DLayer ./PathSymbol3DLayer ./Symbol3D".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t){var g;const a=z.ofType({base:null,key:"type",typeMap:{line:q,path:l}});z=z.ofType({base:null,key:"type",typeMap:{line:q,path:l}});t=g=function(b){function d(h){h=b.call(this,h)||this;h.symbolLayers=new a;h.type="line-3d";return h}n._inheritsLoose(d,b);d.prototype.clone=function(){return new g({styleOrigin:x.clone(this.styleOrigin),symbolLayers:x.clone(this.symbolLayers),thumbnail:x.clone(this.thumbnail)})};d.fromSimpleLineSymbol=function(h){return new g({symbolLayers:[q.fromSimpleLineSymbol(h)]})};
return d}(t);c.__decorate([r.property({type:a,json:{type:z}})],t.prototype,"symbolLayers",void 0);c.__decorate([p.enumeration({LineSymbol3D:"line-3d"},{readOnly:!0})],t.prototype,"type",void 0);return t=g=c.__decorate([f.subclass("esri.symbols.LineSymbol3D")],t)})},"esri/symbols/MeshSymbol3D":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./FillSymbol3DLayer ./Symbol3D".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l){var t;const g=z.ofType({base:null,key:"type",typeMap:{fill:q}});z=t=function(a){function b(d){d=a.call(this,d)||this;d.symbolLayers=new g;d.type="mesh-3d";return d}n._inheritsLoose(b,a);b.prototype.clone=function(){return new t({styleOrigin:x.clone(this.styleOrigin),symbolLayers:x.clone(this.symbolLayers),thumbnail:x.clone(this.thumbnail)})};return b}(l);c.__decorate([r.property({type:g})],z.prototype,"symbolLayers",void 0);c.__decorate([p.enumeration({MeshSymbol3D:"mesh-3d"},
{readOnly:!0})],z.prototype,"type",void 0);return z=t=c.__decorate([f.subclass("esri.symbols.MeshSymbol3D")],z)})},"esri/symbols/PictureFillSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/lang ../core/screenUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./FillSymbol ./support/urlUtils".split(" "),function(n,
c,z,x,r,u,m,v,p,f,q,l){var t;u=t=function(g){function a(...d){d=g.call(this,...d)||this;d.type="picture-fill";d.url=null;d.xscale=1;d.yscale=1;d.width=12;d.height=12;d.xoffset=0;d.yoffset=0;d.source=null;return d}n._inheritsLoose(a,g);var b=a.prototype;b.normalizeCtorArgs=function(d,h,k,e){if(d&&"string"!==typeof d&&null==d.imageData)return d;const w={};d&&(w.url=d);h&&(w.outline=h);null!=k&&(w.width=x.toPt(k));null!=e&&(w.height=x.toPt(e));return w};b.clone=function(){const d=new t({color:z.clone(this.color),
height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});d._set("source",z.clone(this.source));return d};b.hash=function(){var d;return`${g.prototype.hash.call(this)}.${null==(d=this.color)?void 0:d.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`};return a}(q);c.__decorate([p.enumeration({esriPFS:"picture-fill"},{readOnly:!0})],
u.prototype,"type",void 0);c.__decorate([r.property(l.urlPropertyDefinition)],u.prototype,"url",void 0);c.__decorate([r.property({type:Number,json:{write:!0}})],u.prototype,"xscale",void 0);c.__decorate([r.property({type:Number,json:{write:!0}})],u.prototype,"yscale",void 0);c.__decorate([r.property({type:Number,cast:x.toPt,json:{write:!0}})],u.prototype,"width",void 0);c.__decorate([r.property({type:Number,cast:x.toPt,json:{write:!0}})],u.prototype,"height",void 0);c.__decorate([r.property({type:Number,
cast:x.toPt,json:{write:!0}})],u.prototype,"xoffset",void 0);c.__decorate([r.property({type:Number,cast:x.toPt,json:{write:!0}})],u.prototype,"yoffset",void 0);c.__decorate([r.property(l.sourcePropertyDefinition)],u.prototype,"source",void 0);return u=t=c.__decorate([f.subclass("esri.symbols.PictureFillSymbol")],u)})},"esri/symbols/support/urlUtils":function(){define(["exports","../../core/urlUtils","../../chunks/persistableUrlUtils"],function(n,c,z){function x(v,p,f){return p.imageData?c.makeData({mediaType:p.contentType||
"image/png",isBase64:!0,data:p.imageData}):r(p.url,f)}function r(v,p){return!p||"service"!==p.origin&&"portal-item"!==p.origin||!p.layer||"feature"!==p.layer.type&&"stream"!==p.layer.type||c.isAbsolute(v)||!p.layer.parsedUrl?z.fromJSON(v,p):c.join(p.layer.parsedUrl.path,"images",v)}function u(v,p,f,q){c.isDataProtocol(v)?(v=c.dataComponents(v),p.contentType=v.mediaType,p.imageData=v.data,f&&f.imageData===p.imageData&&f.url&&z.write(f.url,p,"url",q)):z.write(v,p,"url",q)}const m={json:{read:{source:["imageData",
"url"],reader:x},write:{writer(v,p,f,q){u(v,p,this.source,q)}}}};n.read=r;n.readImageDataOrUrl=x;n.sourcePropertyDefinition={readOnly:!0,json:{read:{source:["imageData","url"],reader(v,p,f){v={};p.imageData&&(v.imageData=p.imageData);p.contentType&&(v.contentType=p.contentType);p.url&&(v.url=r(p.url,f));return v}}}};n.urlPropertyDefinition=m;n.writeImageDataAndUrl=u;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/PictureMarkerSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/lang ../core/screenUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ./MarkerSymbol ./support/urlUtils".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t){var g;u=g=function(a){function b(...h){h=a.call(this,...h)||this;h.color=null;h.type="picture-marker";h.url=null;h.source=null;h.height=12;h.width=12;h.size=null;return h}n._inheritsLoose(b,a);var d=b.prototype;d.normalizeCtorArgs=function(h,k,e){if(h&&"string"!==typeof h&&null==h.imageData)return h;const w={};h&&(w.url=h);null!=k&&(w.width=x.toPt(k));null!=e&&(w.height=x.toPt(e));return w};d.readHeight=function(h,k){return k.size||h};d.readWidth=function(h,k){return k.size||
h};d.clone=function(){const h=new g({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});h._set("source",z.clone(this.source));return h};d.hash=function(){return`${a.prototype.hash.call(this)}.${this.height}.${this.url}.${this.width}`};return b}(l);c.__decorate([r.property({json:{write:!1}})],u.prototype,"color",void 0);c.__decorate([p.enumeration({esriPMS:"picture-marker"},{readOnly:!0})],u.prototype,"type",void 0);c.__decorate([r.property(t.urlPropertyDefinition)],
u.prototype,"url",void 0);c.__decorate([r.property(t.sourcePropertyDefinition)],u.prototype,"source",void 0);c.__decorate([r.property({type:Number,cast:x.toPt,json:{write:!0}})],u.prototype,"height",void 0);c.__decorate([f.reader("height",["height","size"])],u.prototype,"readHeight",null);c.__decorate([r.property({type:Number,cast:x.toPt,json:{write:!0}})],u.prototype,"width",void 0);c.__decorate([r.property({json:{write:!1}})],u.prototype,"size",void 0);return u=g=c.__decorate([q.subclass("esri.symbols.PictureMarkerSymbol")],
u)})},"esri/symbols/PointSymbol3D":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/Error ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./IconSymbol3DLayer ./ObjectSymbol3DLayer ./Symbol3D ./TextSymbol3DLayer ./callouts/calloutUtils ./support/Symbol3DVerticalOffset".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a,b,d,h){var k;const e=z.ofType({base:null,key:"type",typeMap:{icon:t,object:g,text:b}});z=z.ofType({base:null,key:"type",typeMap:{icon:t,object:g}});a=k=function(w){function y(B){B=w.call(this,B)||this;B.verticalOffset=null;B.callout=null;B.symbolLayers=new e;B.type="point-3d";return B}n._inheritsLoose(y,w);var C=y.prototype;C.writeSymbolLayers=function(B,A,D,E){const G=B.filter(I=>"text"!==I.type);E&&E.messages&&G.length<B.length&&(B=B.find(I=>"text"===I.type),
E.messages.push(new x("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PointSymbol3D",{symbolLayer:B})));A[D]=G.map(I=>I.write({},E)).toArray()};C.supportsCallout=function(){if(1>(this.symbolLayers?this.symbolLayers.length:0))return!1;for(const B of this.symbolLayers.items)switch(B.type){case "icon":case "text":case "object":continue;default:return!1}return!0};C.hasVisibleCallout=function(){return d.hasVisibleCallout(this)};C.hasVisibleVerticalOffset=function(){return d.hasVisibleVerticalOffset(this)};
C.clone=function(){return new k({verticalOffset:r.clone(this.verticalOffset),callout:r.clone(this.callout),styleOrigin:r.clone(this.styleOrigin),symbolLayers:r.clone(this.symbolLayers),thumbnail:r.clone(this.thumbnail)})};y.fromSimpleMarkerSymbol=function(B){return new k({symbolLayers:[t.fromSimpleMarkerSymbol(B)]})};y.fromPictureMarkerSymbol=function(B){return new k({symbolLayers:[t.fromPictureMarkerSymbol(B)]})};y.fromCIMSymbol=function(B){if(B.data&&B.data.symbol){const A=B.data.symbol;if("CIMPointSymbol"===
A.type&&A.callout)return new k({symbolLayers:[t.fromCIMSymbol(B)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}})}return new k({symbolLayers:[t.fromCIMSymbol(B)]})};y.fromTextSymbol=function(B){return new k({symbolLayers:[b.fromTextSymbol(B)]})};return y}(a);c.__decorate([u.property({type:h["default"],json:{write:!0}})],a.prototype,"verticalOffset",void 0);c.__decorate([u.property(d.calloutProperty)],a.prototype,"callout",void 0);c.__decorate([u.property({type:e,json:{type:z,
origins:{"web-scene":{type:z}}}})],a.prototype,"symbolLayers",void 0);c.__decorate([l.writer("web-scene","symbolLayers")],a.prototype,"writeSymbolLayers",null);c.__decorate([f.enumeration({PointSymbol3D:"point-3d"},{readOnly:!0})],a.prototype,"type",void 0);return a=k=c.__decorate([q.subclass("esri.symbols.PointSymbol3D")],a)})},"esri/symbols/PolygonSymbol3D":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/Error ../core/lang ../core/maybe ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./ExtrudeSymbol3DLayer ./FillSymbol3DLayer ./IconSymbol3DLayer ./LineSymbol3DLayer ./ObjectSymbol3DLayer ./Symbol3D ./TextSymbol3DLayer ./WaterSymbol3DLayer".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a,b,d,h,k,e,w){var y;const C=z.ofType({base:null,key:"type",typeMap:{extrude:g,fill:a,icon:b,line:d,object:h,text:e,water:w}});z=z.ofType({base:null,key:"type",typeMap:{extrude:g,fill:a,icon:b,line:d,object:h,water:w}});k=y=function(B){function A(E){E=B.call(this,E)||this;E.symbolLayers=new C;E.type="polygon-3d";return E}n._inheritsLoose(A,B);var D=A.prototype;D.writeSymbolLayers=function(E,G,I,L){const J=E.filter(F=>"text"!==F.type);L&&L.messages&&J.length<E.length&&
(E=E.find(F=>"text"===F.type),L.messages.push(new x("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PolygonSymbol3D",{symbolLayer:E})));G[I]=J.map(F=>F.write({},L)).toArray()};D.clone=function(){return new y({styleOrigin:r.clone(this.styleOrigin),symbolLayers:r.clone(this.symbolLayers),thumbnail:r.clone(this.thumbnail)})};A.fromJSON=function(E){const G=new y;G.read(E);if(2===G.symbolLayers.length&&"fill"===G.symbolLayers.getItemAt(0).type&&"line"===G.symbolLayers.getItemAt(1).type){const I=
G.symbolLayers.getItemAt(0),L=G.symbolLayers.getItemAt(1);!L.enabled||E.symbolLayers&&E.symbolLayers[1]&&!1===E.symbolLayers[1].enable||(I.outline={size:L.size,color:u.isSome(L.material)?L.material.color:null});G.symbolLayers.removeAt(1)}return G};A.fromSimpleFillSymbol=function(E){return new y({symbolLayers:[a.fromSimpleFillSymbol(E)]})};return A}(k);c.__decorate([m.property({type:C,json:{type:z}})],k.prototype,"symbolLayers",void 0);c.__decorate([t.writer("web-scene","symbolLayers")],k.prototype,
"writeSymbolLayers",null);c.__decorate([q.enumeration({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],k.prototype,"type",void 0);return k=y=c.__decorate([l.subclass("esri.symbols.PolygonSymbol3D")],k)})},"esri/symbols/WebStyleSymbol":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Logger ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../portal/Portal ../chunks/persistableUrlUtils ./Symbol ./support/Thumbnail".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g){function a(){return new Promise(function(h,k){n(["./support/styleUtils"],h,k)})}var b;const d=x.getLogger("esri.symbols.WebStyleSymbol");x=b=function(h){function k(w){w=h.call(this,w)||this;w.styleName=null;w.portal=null;w.styleUrl=null;w.thumbnail=null;w.name=null;w.type="web-style";return w}c._inheritsLoose(k,h);var e=k.prototype;e.read=function(w,y){this.portal=y?y.portal:void 0;h.prototype.read.call(this,w,y)};e.clone=function(){return new b({name:this.name,
styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})};e.fetchSymbol=function(w){return this._fetchSymbol("webRef",w)};e.fetchCIMSymbol=function(w){return this._fetchSymbol("cimRef",w)};e._fetchSymbol=function(){var w=c._asyncToGenerator(function*(y,C){const B=yield a();r.throwIfAborted(C);y=B.resolveWebStyleSymbol(this,{portal:this.portal},y,C);y.catch(A=>{d.error("#fetchSymbol()","Failed to create symbol from style",A)});return y});return function(y,C){return w.apply(this,arguments)}}();
return k}(t);z.__decorate([u.property({json:{write:!1}})],x.prototype,"color",void 0);z.__decorate([u.property({type:String,json:{write:!0}})],x.prototype,"styleName",void 0);z.__decorate([u.property({type:q,json:{write:!1}})],x.prototype,"portal",void 0);z.__decorate([u.property({type:String,json:{read:l.read,write:l.write}})],x.prototype,"styleUrl",void 0);z.__decorate([u.property({type:g["default"],json:{read:!1}})],x.prototype,"thumbnail",void 0);z.__decorate([u.property({type:String,json:{write:!0}})],
x.prototype,"name",void 0);z.__decorate([p.enumeration({styleSymbolReference:"web-style"},{readOnly:!0})],x.prototype,"type",void 0);return x=b=z.__decorate([f.subclass("esri.symbols.WebStyleSymbol")],x)})},"esri/renderers/Renderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/subclass ./support/AuthoringInfo".split(" "),
function(n,c,z,x,r,u,m,v,p,f){z=new z.JSONMap({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary"},{ignoreUnknown:!0});x=function(q){function l(g){g=q.call(this,g)||this;g.authoringInfo=null;g.type=null;return g}n._inheritsLoose(l,q);var t=l.prototype;t.getRequiredFields=function(){var g=n._asyncToGenerator(function*(a){if(!this.collectRequiredFields)return[];const b=new Set;yield this.collectRequiredFields(b,a);
return Array.from(b).sort()});return function(a){return g.apply(this,arguments)}}();t.getSymbol=function(g,a){};t.getSymbolAsync=function(){var g=n._asyncToGenerator(function*(a,b){});return function(a,b){return g.apply(this,arguments)}}();t.getSymbols=function(){return[]};t.getAttributeHash=function(){return JSON.stringify(this)};t.getMeshHash=function(){return JSON.stringify(this)};return l}(x.JSONSupport);c.__decorate([r.property({type:f,json:{write:!0}})],x.prototype,"authoringInfo",void 0);c.__decorate([r.property({type:z.apiValues,
readOnly:!0,json:{type:z.jsonValues,read:!1,write:{writer:z.write,ignoreOrigin:!0}}})],x.prototype,"type",void 0);return x=c.__decorate([p.subclass("esri.renderers.Renderer")],x)})},"esri/renderers/support/AuthoringInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./AuthoringInfoFieldInfo ./AuthoringInfoVisualVariable ../../rest/support/colorRamps".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g){var a;v=new z.JSONMap({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"});z=new z.JSONMap({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"});
p="inches feet yards miles nautical-miles millimeters centimeters decimeters meters kilometers decimal-degrees".split(" ");x=a=function(b){function d(k){k=b.call(this,k)||this;k.colorRamp=null;k.lengthUnit=null;k.maxSliderValue=null;k.minSliderValue=null;k.visualVariables=null;return k}n._inheritsLoose(d,b);var h=d.prototype;h.readColorRamp=function(k){if(k)return g.fromJSON(k)};h.clone=function(){return new a({classificationMethod:this.classificationMethod,colorRamp:r.clone(this.colorRamp),fields:this.fields&&
this.fields.slice(0),field1:r.clone(this.field1),field2:r.clone(this.field2),focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(k=>k.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme})};n._createClass(d,[{key:"classificationMethod",
get:function(){const k=this._get("classificationMethod"),e=this.type;return e&&"relationship"!==e?"class-breaks-size"===e||"class-breaks-color"===e?k||"manual":null:k},set:function(k){this._set("classificationMethod",k)}},{key:"fields",get:function(){return this.type&&"predominance"!==this.type?null:this._get("fields")},set:function(k){this._set("fields",k)}},{key:"field1",get:function(){return this.type&&"relationship"!==this.type?null:this._get("field1")},set:function(k){this._set("field1",k)}},
{key:"field2",get:function(){return this.type&&"relationship"!==this.type?null:this._get("field2")},set:function(k){this._set("field2",k)}},{key:"focus",get:function(){return this.type&&"relationship"!==this.type?null:this._get("focus")},set:function(k){this._set("focus",k)}},{key:"numClasses",get:function(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")},set:function(k){this._set("numClasses",k)}},{key:"statistics",get:function(){return"univariate-color-size"===this.type&&
"above-and-below"===this.univariateTheme?this._get("statistics"):null},set:function(k){this._set("statistics",k)}},{key:"standardDeviationInterval",get:function(){const k=this.type;return k&&"relationship"!==k&&"class-breaks-size"!==k&&"class-breaks-color"!==k?null:this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")},set:function(k){this._set("standardDeviationInterval",k)}},{key:"type",get:function(){return this._get("type")},set:function(k){let e=
k;"classed-size"===k?e="class-breaks-size":"classed-color"===k&&(e="class-breaks-color");this._set("type",e)}},{key:"univariateSymbolStyle",get:function(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("univariateSymbolStyle"):null},set:function(k){this._set("univariateSymbolStyle",k)}},{key:"univariateTheme",get:function(){return"univariate-color-size"===this.type?this._get("univariateTheme"):null},set:function(k){this._set("univariateTheme",k)}}]);
return d}(x.JSONSupport);c.__decorate([u.property({type:v.apiValues,value:null,json:{type:v.jsonValues,read:v.read,write:v.write,origins:{"web-document":{default:"manual",type:v.jsonValues,read:v.read,write:v.write}}}})],x.prototype,"classificationMethod",null);c.__decorate([u.property({types:g.types,json:{write:!0}})],x.prototype,"colorRamp",void 0);c.__decorate([f.reader("colorRamp")],x.prototype,"readColorRamp",null);c.__decorate([u.property({type:[String],value:null,json:{write:!0}})],x.prototype,
"fields",null);c.__decorate([u.property({type:l["default"],value:null,json:{write:!0}})],x.prototype,"field1",null);c.__decorate([u.property({type:l["default"],value:null,json:{write:!0}})],x.prototype,"field2",null);c.__decorate([u.property({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],x.prototype,"focus",null);c.__decorate([u.property({type:Number,value:null,json:{type:m.Integer,write:!0}})],x.prototype,"numClasses",null);c.__decorate([u.property({type:p,json:{type:p,read:!1,write:!1,
origins:{"web-scene":{read:!0,write:!0}}}})],x.prototype,"lengthUnit",void 0);c.__decorate([u.property({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],x.prototype,"maxSliderValue",void 0);c.__decorate([u.property({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],x.prototype,"minSliderValue",void 0);c.__decorate([u.property({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],x.prototype,"statistics",null);c.__decorate([u.property({type:[.25,
.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],x.prototype,"standardDeviationInterval",null);c.__decorate([u.property({type:z.apiValues,value:null,json:{type:z.jsonValues,read:z.read,write:z.write}})],x.prototype,"type",null);c.__decorate([u.property({type:[t],json:{write:!0}})],x.prototype,"visualVariables",void 0);c.__decorate([u.property({type:"caret circle-caret arrow circle-arrow plus-minus circle-plus-minus square circle triangle happy-sad thumb custom".split(" "),value:null,json:{write:!0,
origins:{"web-scene":{write:!1}}}})],x.prototype,"univariateSymbolStyle",null);c.__decorate([u.property({type:["high-to-low","above-and-below","above","below","90-10"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],x.prototype,"univariateTheme",null);return x=a=c.__decorate([q.subclass("esri.renderers.support.AuthoringInfo")],x)})},"esri/renderers/support/AuthoringInfoFieldInfo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ./AuthoringInfoClassBreakInfo".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q){var l;n.AuthoringInfoFieldInfo=l=function(t){function g(a){a=t.call(this,a)||this;a.field="";a.normalizationField="";a.label="";a.classBreakInfos=[];return a}c._inheritsLoose(g,t);g.prototype.clone=function(){return new l({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:r.clone(this.classBreakInfos)})};return g}(x.JSONSupport);z.__decorate([u.property({type:String,json:{write:!0}})],n.AuthoringInfoFieldInfo.prototype,"field",
void 0);z.__decorate([u.property({type:String,json:{write:!0}})],n.AuthoringInfoFieldInfo.prototype,"normalizationField",void 0);z.__decorate([u.property({type:String,json:{write:!0}})],n.AuthoringInfoFieldInfo.prototype,"label",void 0);z.__decorate([u.property({type:[q["default"]],json:{write:!0}})],n.AuthoringInfoFieldInfo.prototype,"classBreakInfos",void 0);n.AuthoringInfoFieldInfo=l=z.__decorate([f.subclass("esri.renderers.support.AuthoringInfoFieldInfo")],n.AuthoringInfoFieldInfo);n["default"]=
n.AuthoringInfoFieldInfo;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/renderers/support/AuthoringInfoClassBreakInfo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),function(n,c,z,x,r,u,m,v,p){var f;n.AuthoringInfoClassBreakInfo=f=function(q){function l(t){t=
q.call(this,t)||this;t.minValue=0;t.maxValue=0;return t}c._inheritsLoose(l,q);l.prototype.clone=function(){return new f({minValue:this.minValue,maxValue:this.maxValue})};return l}(x.JSONSupport);z.__decorate([r.property({type:Number,json:{write:!0}})],n.AuthoringInfoClassBreakInfo.prototype,"minValue",void 0);z.__decorate([r.property({type:Number,json:{write:!0}})],n.AuthoringInfoClassBreakInfo.prototype,"maxValue",void 0);n.AuthoringInfoClassBreakInfo=f=z.__decorate([p.subclass("esri.renderer.support.AuthoringInfoClassBreakInfo")],
n.AuthoringInfoClassBreakInfo);n["default"]=n.AuthoringInfoClassBreakInfo;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/renderers/support/AuthoringInfoVisualVariable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/decorators/cast ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),function(n,c,z,x,
r,u,m,v,p){var f;u=new z.JSONMap({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"});z=new z.JSONMap({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"});v={key(g){return"number"===typeof g?"number":"string"},typeMap:{number:Number,string:String},base:null};const q=["high-to-low","above-and-below","centered-on","extremes"],l=[...new Set("high-to-low above-and-below centered-on extremes 90-10 above below high-to-low above-and-below 90-10 above below".split(" "))],
t="seconds minutes hours days months years".split(" ");x=f=function(g){function a(d){d=g.call(this,d)||this;d.endTime=null;d.field=null;d.maxSliderValue=null;d.minSliderValue=null;d.startTime=null;d.type=null;d.units=null;return d}n._inheritsLoose(a,g);var b=a.prototype;b.castEndTime=function(d){return"string"===typeof d||"number"===typeof d?d:null};b.castStartTime=function(d){return"string"===typeof d||"number"===typeof d?d:null};b.clone=function(){return new f({endTime:this.endTime,field:this.field,
maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})};n._createClass(a,[{key:"style",get:function(){return"color"===this.type?this._get("style"):null},set:function(d){this._set("style",d)}},{key:"theme",get:function(){return"color"===this.type||"size"===this.type?this._get("theme")||"high-to-low":null},set:function(d){this._set("theme",d)}}]);return a}(x.JSONSupport);c.__decorate([r.property({types:v,
json:{write:!0}})],x.prototype,"endTime",void 0);c.__decorate([m.cast("endTime")],x.prototype,"castEndTime",null);c.__decorate([r.property({type:String,json:{write:!0}})],x.prototype,"field",void 0);c.__decorate([r.property({type:Number,json:{write:!0}})],x.prototype,"maxSliderValue",void 0);c.__decorate([r.property({type:Number,json:{write:!0}})],x.prototype,"minSliderValue",void 0);c.__decorate([r.property({types:v,json:{write:!0}})],x.prototype,"startTime",void 0);c.__decorate([m.cast("startTime")],
x.prototype,"castStartTime",null);c.__decorate([r.property({type:u.apiValues,value:null,json:{type:u.jsonValues,read:u.read,write:u.write}})],x.prototype,"style",null);c.__decorate([r.property({type:l,value:null,json:{type:l,origins:{"web-scene":{type:q,write:{writer:(g,a)=>{-1<q.indexOf(g)&&(a.theme=g)}}}},write:!0}})],x.prototype,"theme",null);c.__decorate([r.property({type:z.apiValues,json:{type:z.jsonValues,read:z.read,write:z.write}})],x.prototype,"type",void 0);c.__decorate([r.property({type:t,
json:{type:t,write:!0}})],x.prototype,"units",void 0);return x=f=c.__decorate([p.subclass("esri.renderers.support.AuthoringInfoVisualVariable")],x)})},"esri/rest/support/colorRamps":function(){define(["exports","./AlgorithmicColorRamp","./ColorRamp","./MultipartColorRamp"],function(n,c,z,x){z={key:"type",base:z,typeMap:{algorithmic:c,multipart:x}};n.fromJSON=function(r){return r&&r.type?"algorithmic"===r.type?c.fromJSON(r):"multipart"===r.type?x.fromJSON(r):null:null};n.types=z;Object.defineProperty(n,
"__esModule",{value:!0})})},"esri/rest/support/AlgorithmicColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./ColorRamp".split(" "),function(n,c,z,x,r,u,m,v,p,f,q){var l;m=l=function(t){function g(a){a=t.call(this,a)||
this;a.algorithm=null;a.fromColor=null;a.toColor=null;a.type="algorithmic";return a}n._inheritsLoose(g,t);g.prototype.clone=function(){return new l({fromColor:x.clone(this.fromColor),toColor:x.clone(this.toColor),algorithm:this.algorithm})};return g}(q);c.__decorate([p.enumeration({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],m.prototype,"algorithm",void 0);c.__decorate([r.property({type:z,json:{type:[u.Integer],write:!0}})],m.prototype,"fromColor",void 0);
c.__decorate([r.property({type:z,json:{type:[u.Integer],write:!0}})],m.prototype,"toColor",void 0);c.__decorate([r.property({type:["algorithmic"]})],m.prototype,"type",void 0);return m=l=c.__decorate([f.subclass("esri.rest.support.AlgorithmicColorRamp")],m)})},"esri/rest/support/ColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(n,c,z,x,r,u,m,v){z=function(p){function f(q){q=p.call(this,q)||this;q.type=null;return q}n._inheritsLoose(f,p);return f}(z.JSONSupport);c.__decorate([x.property({readOnly:!0,json:{read:!1,write:!0}})],z.prototype,"type",void 0);return z=c.__decorate([v.subclass("esri.rest.support.ColorRamp")],z)})},"esri/rest/support/MultipartColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ./AlgorithmicColorRamp ./ColorRamp".split(" "),
function(n,c,z,x,r,u,m,v,p,f){var q;r=q=function(l){function t(g){g=l.call(this,g)||this;g.colorRamps=null;g.type="multipart";return g}n._inheritsLoose(t,l);t.prototype.clone=function(){return new q({colorRamps:z.clone(this.colorRamps)})};return t}(f);c.__decorate([x.property({type:[p],json:{write:!0}})],r.prototype,"colorRamps",void 0);c.__decorate([x.property({type:["multipart"]})],r.prototype,"type",void 0);return r=q=c.__decorate([v.subclass("esri.rest.support.MultipartColorRamp")],r)})},"esri/renderers/mixins/VisualVariablesMixin":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../layers/support/fieldUtils ../visualVariables/ColorVariable ../visualVariables/OpacityVariable ../visualVariables/RotationVariable ../visualVariables/SizeVariable ../visualVariables/VisualVariable ../visualVariables/VisualVariableFactory".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a,b,d){const h={base:b,key:"type",typeMap:{opacity:t,color:l,rotation:g,size:a}};n.VisualVariablesMixin=k=>{k=function(e){function w(){var C=e.apply(this,arguments)||this;C._vvFactory=new d;return C}c._inheritsLoose(w,e);var y=w.prototype;y.readVisualVariables=function(C,B,A){return this._vvFactory.readVariables(C,B,A)};y.writeVisualVariables=function(C,B,A,D){B[A]=this._vvFactory.writeVariables(C,D)};y.hasVisualVariables=function(C,B){return C?0<this.getVisualVariablesForType(C,
B).length:0<this.getVisualVariablesForType("size",B).length||0<this.getVisualVariablesForType("color",B).length||0<this.getVisualVariablesForType("opacity",B).length||0<this.getVisualVariablesForType("rotation",B).length};y.getVisualVariablesForType=function(C,B){const A=this.visualVariables;return A?A.filter(D=>D.type===C&&("string"===typeof B?D.target===B:!1===B?!D.target:!0)):[]};y.collectVVRequiredFields=function(){var C=c._asyncToGenerator(function*(B,A){let D=[];this.visualVariables&&(D=D.concat(this.visualVariables));
for(const E of D)E&&(E.field&&q.collectField(B,A,E.field),E.normalizationField&&q.collectField(B,A,E.normalizationField),E.valueExpression&&(yield q.collectArcadeFieldNames(B,A,E.valueExpression)))});return function(B,A){return C.apply(this,arguments)}}();c._createClass(w,[{key:"visualVariables",set:function(C){this._vvFactory.visualVariables=C;this._set("visualVariables",this._vvFactory.visualVariables)}},{key:"arcadeRequiredForVisualVariables",get:function(){if(!this.visualVariables)return!1;for(const C of this.visualVariables)if(C.arcadeRequired)return!0;
return!1}}]);return w}(k);z.__decorate([x.property({types:[h],value:null,json:{write:!0}})],k.prototype,"visualVariables",null);z.__decorate([v.reader("visualVariables",["visualVariables","rotationType","rotationExpression"])],k.prototype,"readVisualVariables",null);z.__decorate([f.writer("visualVariables")],k.prototype,"writeVisualVariables",null);return k=z.__decorate([p.subclass("esri.renderers.mixins.VisualVariablesMixin")],k)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/renderers/visualVariables/ColorVariable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./VisualVariable ./support/ColorStop".split(" "),
function(n,c,z,x,r,u,m,v,p){var f;x=f=function(q){function l(g){g=q.call(this,g)||this;g.type="color";g.normalizationField=null;return g}n._inheritsLoose(l,q);var t=l.prototype;t.clone=function(){return new f({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(g=>g.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})};t.getAttributeHash=function(){return`${q.prototype.getAttributeHash.call(this)}-${this.normalizationField}`};
t._interpolateData=function(){return this.stops&&this.stops.map(g=>g.value||0)};n._createClass(l,[{key:"cache",get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}},{key:"stops",set:function(g){g&&Array.isArray(g)&&(g=g.filter(a=>!!a),g.sort((a,b)=>a.value-b.value));this._set("stops",g)}}]);return l}(v);c.__decorate([z.property({readOnly:!0})],x.prototype,"cache",null);c.__decorate([z.property({type:["color"],json:{type:["colorInfo"]}})],x.prototype,
"type",void 0);c.__decorate([z.property({type:String,json:{write:!0}})],x.prototype,"normalizationField",void 0);c.__decorate([z.property({type:[p],json:{write:!0}})],x.prototype,"stops",null);return x=f=c.__decorate([m.subclass("esri.renderers.visualVariables.ColorVariable")],x)})},"esri/renderers/visualVariables/VisualVariable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/ensureType ./support/VisualVariableLegendOptions".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q){const l=r.getLogger("esri.renderers.visualVariables.VisualVariable");z=new z.JSONMap({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});x=function(t){function g(b){b=t.call(this,b)||this;b.index=null;b.type=null;b.field=null;b.valueExpression=null;b.valueExpressionTitle=null;b.legendOptions=null;return b}n._inheritsLoose(g,t);var a=g.prototype;a.castField=function(b){return null==b?b:"function"===typeof b?(l.error(".field: field must be a string value"),
null):f.ensureString(b)};a.clone=function(){};a.getAttributeHash=function(){return`${this.type}-${this.field}-${this.valueExpression}`};n._createClass(g,[{key:"arcadeRequired",get:function(){return!!this.valueExpression}}]);return g}(x.JSONSupport);c.__decorate([u.property()],x.prototype,"index",void 0);c.__decorate([u.property({type:z.apiValues,readOnly:!0,json:{read:z.read,write:z.write}})],x.prototype,"type",void 0);c.__decorate([u.property({type:String,json:{write:!0}})],x.prototype,"field",void 0);
c.__decorate([v.cast("field")],x.prototype,"castField",null);c.__decorate([u.property({type:String,json:{write:!0}})],x.prototype,"valueExpression",void 0);c.__decorate([u.property({type:String,json:{write:!0}})],x.prototype,"valueExpressionTitle",void 0);c.__decorate([u.property({readOnly:!0})],x.prototype,"arcadeRequired",null);c.__decorate([u.property({type:q,json:{write:!0}})],x.prototype,"legendOptions",void 0);return x=c.__decorate([p.subclass("esri.renderers.visualVariables.VisualVariable")],
x)})},"esri/renderers/visualVariables/support/VisualVariableLegendOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ../../support/LegendOptions".split(" "),function(n,c,z,x,r,u,m,v){var p;x=p=function(f){function q(){var l=f.apply(this,arguments)||this;l.showLegend=null;return l}
n._inheritsLoose(q,f);q.prototype.clone=function(){return new p({title:this.title,showLegend:this.showLegend})};return q}(v["default"]);c.__decorate([z.property({type:Boolean,json:{write:!0}})],x.prototype,"showLegend",void 0);return x=p=c.__decorate([m.subclass("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],x)})},"esri/renderers/support/LegendOptions":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(n,c,z,x,r,u,m,v,p){var f;n.LegendOptions=f=function(q){function l(){var t=q.apply(this,arguments)||this;t.title=null;return t}c._inheritsLoose(l,q);l.prototype.clone=function(){return new f({title:this.title})};return l}(x.JSONSupport);z.__decorate([r.property({type:String,json:{write:!0}})],n.LegendOptions.prototype,"title",void 0);n.LegendOptions=f=z.__decorate([p.subclass("esri.renderers.support.LegendOptions")],n.LegendOptions);n["default"]=n.LegendOptions;Object.defineProperty(n,"__esModule",
{value:!0})})},"esri/renderers/visualVariables/support/ColorStop":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Color ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer".split(" "),function(n,c,z,x,r,u,m,v,p,f){var q;x=q=function(l){function t(a){a=
l.call(this,a)||this;a.color=null;a.label=null;a.value=null;return a}n._inheritsLoose(t,l);var g=t.prototype;g.writeValue=function(a,b,d){b[d]=null==a?0:a};g.clone=function(){return new q({color:this.color&&this.color.clone(),label:this.label,value:this.value})};return t}(x.JSONSupport);c.__decorate([r.property({type:z,json:{type:[m.Integer],write:!0}})],x.prototype,"color",void 0);c.__decorate([r.property({type:String,json:{write:!0}})],x.prototype,"label",void 0);c.__decorate([r.property({type:Number,
json:{write:{allowNull:!0}}})],x.prototype,"value",void 0);c.__decorate([f.writer("value")],x.prototype,"writeValue",null);return x=q=c.__decorate([p.subclass("esri.renderers.visualVariables.support.ColorStop")],x)})},"esri/renderers/visualVariables/OpacityVariable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./VisualVariable ./support/OpacityStop".split(" "),
function(n,c,z,x,r,u,m,v,p){var f;x=f=function(q){function l(g){g=q.call(this,g)||this;g.type="opacity";g.normalizationField=null;return g}n._inheritsLoose(l,q);var t=l.prototype;t.clone=function(){return new f({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(g=>g.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})};t.getAttributeHash=function(){return`${q.prototype.getAttributeHash.call(this)}-${this.normalizationField}`};
t._interpolateData=function(){return this.stops&&this.stops.map(g=>g.value||0)};n._createClass(l,[{key:"cache",get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}},{key:"stops",set:function(g){g&&Array.isArray(g)&&(g=g.filter(a=>!!a),g.sort((a,b)=>a.value-b.value));this._set("stops",g)}}]);return l}(v);c.__decorate([z.property({readOnly:!0})],x.prototype,"cache",null);c.__decorate([z.property({type:["opacity"],json:{type:["transparencyInfo"]}})],
x.prototype,"type",void 0);c.__decorate([z.property({type:String,json:{write:!0}})],x.prototype,"normalizationField",void 0);c.__decorate([z.property({type:[p],json:{write:!0}})],x.prototype,"stops",null);return x=f=c.__decorate([m.subclass("esri.renderers.visualVariables.OpacityVariable")],x)})},"esri/renderers/visualVariables/support/OpacityStop":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ../../../webdoc/support/opacityUtils".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q){var l;z=l=function(t){function g(b){b=t.call(this,b)||this;b.label=null;b.opacity=null;b.value=null;return b}n._inheritsLoose(g,t);var a=g.prototype;a.readOpacity=function(b,d){return q.transparencyToOpacity(d.transparency)};a.writeOpacity=function(b,d,h){d[h]=q.opacityToTransparency(b)};a.clone=function(){return new l({label:this.label,opacity:this.opacity,value:this.value})};return g}(z.JSONSupport);c.__decorate([x.property({type:String,json:{write:!0}})],z.prototype,
"label",void 0);c.__decorate([x.property({type:Number,json:{type:u.Integer,write:{target:"transparency"}}})],z.prototype,"opacity",void 0);c.__decorate([v.reader("opacity",["transparency"])],z.prototype,"readOpacity",null);c.__decorate([f.writer("opacity")],z.prototype,"writeOpacity",null);c.__decorate([x.property({type:Number,json:{write:!0}})],z.prototype,"value",void 0);return z=l=c.__decorate([p.subclass("esri.renderers.visualVariables.support.OpacityStop")],z)})},"esri/renderers/visualVariables/RotationVariable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Error ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./VisualVariable".split(" "),
function(n,c,z,x,r,u,m,v,p,f){var q;r=q=function(l){function t(a){a=l.call(this,a)||this;a.axis=null;a.type="rotation";a.rotationType="geographic";a.valueExpressionTitle=null;return a}n._inheritsLoose(t,l);var g=t.prototype;g.writeValueExpressionTitleWebScene=function(a,b,d,h){h&&h.messages&&h.messages.push(new z("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:`visualVariables[${this.index}]`+
".valueExpressionTitle",context:h}))};g.clone=function(){return new q({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})};n._createClass(t,[{key:"cache",get:function(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}}]);return t}(f);c.__decorate([x.property({readOnly:!0})],r.prototype,"cache",null);c.__decorate([x.property({type:["heading",
"tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],r.prototype,"axis",void 0);c.__decorate([x.property({type:["rotation"],json:{type:["rotationInfo"]}})],r.prototype,"type",void 0);c.__decorate([x.property({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],r.prototype,"rotationType",void 0);c.__decorate([x.property({type:String,json:{write:!0}})],r.prototype,"valueExpressionTitle",void 0);c.__decorate([p.writer("web-scene",
"valueExpressionTitle")],r.prototype,"writeValueExpressionTitleWebScene",null);return r=q=c.__decorate([v.subclass("esri.renderers.visualVariables.RotationVariable")],r)})},"esri/renderers/visualVariables/SizeVariable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Error ../../core/jsonMap ../../core/Logger ../../core/screenUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./VisualVariable ./support/SizeStop ./support/SizeVariableLegendOptions ./support/sizeVariableUtils ./support/visualVariableUtils".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a,b,d){function h(B){if(null!=B){if("string"===typeof B||"number"===typeof B)return u.toPt(B);if("size"===B.type){if(b.isSizeVariable(B))return B;B={...B};delete B.type;return new C(B)}}}function k(B,A,D){if("object"!==typeof B)return B;A=new C;A.read(B,D);return A}var e;const w=r.getLogger("esri.renderers.visualVariables.SizeVariable");r=new x.JSONMap({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"});const y=new x.JSONMap({unknown:"unknown",
inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});let C=e=function(B){function A(E){E=B.call(this,E)||this;E.axis=null;E.legendOptions=null;E.normalizationField=null;E.scaleBy=null;E.target=null;E.type="size";E.useSymbolValue=null;E.valueExpression=null;E.valueRepresentation=null;E.valueUnit=null;return E}n._inheritsLoose(A,
B);var D=A.prototype;D.castMaxSize=function(E){return h(E)};D.readMaxSize=function(E,G,I){return k(E,G,I)};D.castMinSize=function(E){return h(E)};D.readMinSize=function(E,G,I){return k(E,G,I)};D.readValueExpression=function(E,G){return E||G.expression&&"$view.scale"};D.writeValueExpressionWebScene=function(E,G,I,L){"$view.scale"===E?L&&L.messages&&(E=this.index,L.messages.push(new z("property:unsupported",this.type+"VisualVariable.valueExpression \x3d '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",
{instance:this,propertyName:("string"===typeof E?E:`visualVariables[${E}]`)+".valueExpression",context:L}))):G[I]=E};D.readValueUnit=function(E){return E?y.read(E):null};D.clone=function(){return new e({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:b.isSizeVariable(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:b.isSizeVariable(this.minSize)?this.minSize.clone():
this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(E=>E.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})};D.flipSizes=function(){if("clamped-linear"===this.transformationType){const {minSize:E,maxSize:G}=this;this.minSize=G;this.maxSize=E;return this}if("stops"===this.transformationType){const E=this.stops,G=E.map(L=>
L.size).reverse(),I=E.length;for(let L=0;L<I;L++)E[L].size=G[L]}return this};D.getAttributeHash=function(){return`${B.prototype.getAttributeHash.call(this)}-${this.target}-${this.normalizationField}`};D._interpolateData=function(){return this.stops&&this.stops.map(E=>E.value||0)};n._createClass(A,[{key:"cache",get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:d.viewScaleRE.test(this.valueExpression)}}},{key:"expression",set:function(E){w.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'.");
"view.scale"===E?(this.valueExpression="$view.scale",this._set("expression",E)):this._set("expression",null)}},{key:"index",set:function(E){b.isSizeVariable(this.maxSize)&&(this.maxSize.index=`visualVariables[${E}].maxSize`);b.isSizeVariable(this.minSize)&&(this.minSize.index=`visualVariables[${E}].minSize`);this._set("index",E)}},{key:"inputValueType",get:function(){return b.getInputValueType(this)}},{key:"maxDataValue",set:function(E){E&&this.stops&&(w.warn("cannot set maxDataValue when stops is not null."),
E=null);this._set("maxDataValue",E)}},{key:"maxSize",set:function(E){E&&this.stops&&(w.warn("cannot set maxSize when stops is not null."),E=null);this._set("maxSize",E)}},{key:"minDataValue",set:function(E){E&&this.stops&&(w.warn("cannot set minDataValue when stops is not null."),E=null);this._set("minDataValue",E)}},{key:"minSize",set:function(E){E&&this.stops&&(w.warn("cannot set minSize when stops is not null."),E=null);this._set("minSize",E)}},{key:"arcadeRequired",get:function(){return this.valueExpression?
!0:this.minSize&&"object"===typeof this.minSize&&this.minSize.arcadeRequired||this.maxSize&&"object"===typeof this.maxSize&&this.maxSize.arcadeRequired}},{key:"stops",set:function(E){null==this.minDataValue&&null==this.maxDataValue&&null==this.minSize&&null==this.maxSize?E&&Array.isArray(E)&&(E=E.filter(G=>!!G),E.sort((G,I)=>G.value-I.value)):E&&(w.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),E=null);this._set("stops",E)}},{key:"transformationType",
get:function(){return b.getTransformationType(this,this.inputValueType)}}]);return A}(t);c.__decorate([m.property({readOnly:!0})],C.prototype,"cache",null);c.__decorate([m.property({type:r.apiValues,json:{type:r.jsonValues,origins:{"web-map":{read:!1}},read:r.read,write:r.write}})],C.prototype,"axis",void 0);c.__decorate([m.property({type:String,value:null,json:{read:!1}})],C.prototype,"expression",null);c.__decorate([m.property()],C.prototype,"index",null);c.__decorate([m.property({type:String,readOnly:!0})],
C.prototype,"inputValueType",null);c.__decorate([m.property({type:a,json:{write:!0}})],C.prototype,"legendOptions",void 0);c.__decorate([m.property({type:Number,value:null,json:{write:!0}})],C.prototype,"maxDataValue",null);c.__decorate([m.property({type:Number,value:null,json:{write:!0}})],C.prototype,"maxSize",null);c.__decorate([p.cast("maxSize")],C.prototype,"castMaxSize",null);c.__decorate([f.reader("maxSize")],C.prototype,"readMaxSize",null);c.__decorate([m.property({type:Number,value:null,
json:{write:!0}})],C.prototype,"minDataValue",null);c.__decorate([m.property({type:Number,value:null,json:{write:!0}})],C.prototype,"minSize",null);c.__decorate([p.cast("minSize")],C.prototype,"castMinSize",null);c.__decorate([f.reader("minSize")],C.prototype,"readMinSize",null);c.__decorate([m.property({type:String,json:{write:!0}})],C.prototype,"normalizationField",void 0);c.__decorate([m.property({readOnly:!0})],C.prototype,"arcadeRequired",null);c.__decorate([m.property({type:String})],C.prototype,
"scaleBy",void 0);c.__decorate([m.property({type:[g],value:null,json:{write:!0}})],C.prototype,"stops",null);c.__decorate([m.property({type:["outline"],json:{write:!0}})],C.prototype,"target",void 0);c.__decorate([m.property({type:String,readOnly:!0})],C.prototype,"transformationType",null);c.__decorate([m.property({type:["size"],json:{type:["sizeInfo"]}})],C.prototype,"type",void 0);c.__decorate([m.property({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],C.prototype,"useSymbolValue",
void 0);c.__decorate([m.property({type:String,json:{write:!0}})],C.prototype,"valueExpression",void 0);c.__decorate([f.reader("valueExpression",["valueExpression","expression"])],C.prototype,"readValueExpression",null);c.__decorate([l.writer("web-scene","valueExpression")],C.prototype,"writeValueExpressionWebScene",null);c.__decorate([m.property({type:["radius","diameter","area","width","distance"],json:{write:!0}})],C.prototype,"valueRepresentation",void 0);c.__decorate([m.property({type:y.apiValues,
json:{write:y.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],C.prototype,"valueUnit",void 0);c.__decorate([f.reader("valueUnit")],C.prototype,"readValueUnit",null);return C=e=c.__decorate([q.subclass("esri.renderers.visualVariables.SizeVariable")],C)})},"esri/renderers/visualVariables/support/SizeStop":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/screenUtils ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass".split(" "),
function(n,c,z,x,r,u,m,v,p){var f;z=f=function(q){function l(t){t=q.call(this,t)||this;t.label=null;t.size=null;t.value=null;return t}n._inheritsLoose(l,q);l.prototype.clone=function(){return new f({label:this.label,size:this.size,value:this.value})};return l}(z.JSONSupport);c.__decorate([r.property({type:String,json:{write:!0}})],z.prototype,"label",void 0);c.__decorate([r.property({type:Number,cast:x.toPt,json:{write:!0}})],z.prototype,"size",void 0);c.__decorate([r.property({type:Number,json:{write:!0}})],
z.prototype,"value",void 0);return z=f=c.__decorate([p.subclass("esri.renderers.visualVariables.support.SizeStop")],z)})},"esri/renderers/visualVariables/support/SizeVariableLegendOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ./VisualVariableLegendOptions".split(" "),function(n,
c,z,x,r,u,m,v){var p;x=p=function(f){function q(){var l=f.apply(this,arguments)||this;l.customValues=null;return l}n._inheritsLoose(q,f);q.prototype.clone=function(){return new p({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})};return q}(v);c.__decorate([z.property({type:[Number],json:{write:!0}})],x.prototype,"customValues",void 0);return x=p=c.__decorate([m.subclass("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],x)})},
"esri/renderers/visualVariables/support/sizeVariableUtils":function(){define(["exports"],function(n){function c(z){return z.valueExpression?"expression":z.field&&"string"===typeof z.field?"field":"unknown"}n.getInputValueType=c;n.getTransformationType=function(z,x){return"unknown"===(x||c(z))?"constant":z.stops?"stops":null!=z.minSize&&null!=z.maxSize&&null!=z.minDataValue&&null!=z.maxDataValue?"clamped-linear":"unknown"===(z.valueUnit||"unknown")?null!=z.minSize&&null!=z.minDataValue?z.minSize&&
z.minDataValue?"proportional":"additive":"identity":"real-world-size"};n.isSizeVariable=function(z){return z&&"esri.renderers.visualVariables.SizeVariable"===z.declaredClass};n.isValidNumber=function(z){return null!=z&&!isNaN(z)&&isFinite(z)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/renderers/visualVariables/support/visualVariableUtils":function(){define("exports ../../../Color ../../../Graphic ../../../core/compilerUtils ../../../core/Logger ../../../core/maybe ../../support/lengthUtils ./sizeVariableUtils".split(" "),
function(n,c,z,x,r,u,m,v){function p(w,y,C){if(w="visualVariables"in w&&w.visualVariables?w.visualVariables.filter(J=>"color"===J.type)[0]:w)if("esri.renderers.visualVariables.ColorVariable"!==w.declaredClass)h.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");else{var B="number"===typeof y,A=B?null:y,D=A&&A.attributes,E=B?y:null,G=w.field,{ipData:I,hasExpression:L}=w.cache;y=w.cache.compiledFunc;if(!G&&!L)return(C=w.stops)&&C[0]&&C[0].color;if("number"!==
typeof E)if(L){if(!u.isSome(C)||!u.isSome(C.arcade)){h.error("Use of arcade expressions requires an arcade context");return}E=C.arcade.arcadeUtils;G=E.getViewInfo({viewingMode:C.viewingMode,scale:C.scale,spatialReference:C.spatialReference});A=E.createExecContext(A,G);y||(y=E.createSyntaxTree(w.valueExpression),y=E.createFunction(y),w.cache.compiledFunc=y);E=E.executeFunction(y,A)}else D&&(E=D[G]);A=w.normalizationField;D=D?parseFloat(D[A]):void 0;if(null!=E&&(!A||B||!isNaN(D)&&0!==D)&&(isNaN(D)||
B||(E/=D),B=d(E,I)))return D=B[0],A=B[1],C=D===A?w.stops[D].color:c.blendColors(w.stops[D].color,w.stops[A].color,B[2],u.isSome(C)?C.color:void 0),new c(C)}}function f(w,y,C){if(w="visualVariables"in w&&w.visualVariables?w.visualVariables.filter(J=>"opacity"===J.type)[0]:w)if("esri.renderers.visualVariables.OpacityVariable"!==w.declaredClass)h.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");else{var B="number"===typeof y,A=B?null:y,D=A&&A.attributes,
E=B?y:null,G=w.field,{ipData:I,hasExpression:L}=w.cache;y=w.cache.compiledFunc;if(!G&&!L)return(w=w.stops)&&w[0]&&w[0].opacity;if("number"!==typeof E)if(L){if(u.isNone(C)||u.isNone(C.arcade)){h.error("Use of arcade expressions requires an arcade context");return}E=C.arcade.arcadeUtils;C=E.getViewInfo({viewingMode:C.viewingMode,scale:C.scale,spatialReference:C.spatialReference});C=E.createExecContext(A,C);y||(A=E.createSyntaxTree(w.valueExpression),y=E.createFunction(A),w.cache.compiledFunc=y);E=E.executeFunction(y,
C)}else D&&(E=D[G]);C=w.normalizationField;D=D?parseFloat(D[C]):void 0;if(null!=E&&(!C||B||!isNaN(D)&&0!==D)&&(isNaN(D)||B||(E/=D),B=d(E,I))){C=B[0];D=B[1];if(C===D)return w.stops[C].opacity;C=w.stops[C].opacity;return C+(w.stops[D].opacity-C)*B[2]}}}function q(w,y,C){if(w="visualVariables"in w&&w.visualVariables?w.visualVariables.filter(J=>"rotation"===J.type)[0]:w)if("esri.renderers.visualVariables.RotationVariable"!==w.declaredClass)h.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");
else{var B=w.axis||"heading",A="heading"===B&&"arithmetic"===w.rotationType?90:0;B="heading"===B&&"arithmetic"===w.rotationType?-1:1;var D="number"===typeof y?null:y,E=D&&D.attributes,G=w.field,{hasExpression:I}=w.cache;y=w.cache.compiledFunc;var L=0;if(!G&&!I)return L;if(I){if(u.isNone(C)||u.isNone(C.arcade)){h.error("Use of arcade expressions requires an arcade context");return}E=C.arcade.arcadeUtils;C=E.getViewInfo({viewingMode:C.viewingMode,scale:C.scale,spatialReference:C.spatialReference});
C=E.createExecContext(D,C);y||(y=E.createSyntaxTree(w.valueExpression),y=E.createFunction(y),w.cache.compiledFunc=y);L=E.executeFunction(y,C)}else E&&(L=E[G]||0);return L="number"!==typeof L||isNaN(L)?null:A+B*L}}function l(w,y,C){const B="number"===typeof y;var A=B?null:y;const D=A&&A.attributes;var E=B?y:null;const {isScaleDriven:G}=w.cache;y=w.cache.compiledFunc;if(G)A=u.isSome(C)?C.scale:void 0,C=u.isSome(C)?C.view:void 0,null==A||"3d"===C?(A=C=null,(A=w.stops)?(C=A[0].value,A=A[A.length-1].value):
(C=w.minDataValue||0,A=w.maxDataValue||0),C=(C+A)/2):C=A,E=C;else if(!B)switch(w.inputValueType){case "expression":if(u.isNone(C)||u.isNone(C.arcade)){h.error("Use of arcade expressions requires an arcade context");return}E=C.arcade.arcadeUtils;C=E.getViewInfo({viewingMode:C.viewingMode,scale:C.scale,spatialReference:C.spatialReference});C=E.createExecContext(A,C);y||(A=E.createSyntaxTree(w.valueExpression),y=E.createFunction(A),w.cache.compiledFunc=y);E=E.executeFunction(y,C);break;case "field":D&&
(E=D[w.field]);break;case "unknown":E=null}if(!v.isValidNumber(E))return null;if(B||!w.normalizationField)return E;w=D?parseFloat(D[w.normalizationField]):null;return v.isValidNumber(w)&&0!==w?E/w:null}function t(w,y,C){if(w="visualVariables"in w&&w.visualVariables?w.visualVariables.filter(A=>"size"===A.type)[0]:w)if("esri.renderers.visualVariables.SizeVariable"!==w.declaredClass)h.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");else{var B=l(w,y,C);
y=b(B,w,y,C,w.cache.ipData);return null===y||void 0===y||isNaN(y)?0:y}}function g(w,y,C){return null==w?null:v.isSizeVariable(w)?t(w,y,C):v.isValidNumber(w)?w:null}function a(w,y,C){return v.isValidNumber(C)&&w>C?C:v.isValidNumber(y)&&w<y?y:w}function b(w,y,C,B,A){switch(y.transformationType){case "additive":return B=g(y.minSize,C,B),y=w+(B||y.minDataValue);case "constant":return w=(w=y.stops)&&w.length&&w[0].size,null==w&&(w=y.minSize),y=g(w,C,B);case "clamped-linear":A=(w-y.minDataValue)/(y.maxDataValue-
y.minDataValue);var D=g(y.minSize,C,B);C=g(y.maxSize,C,B);B=u.isSome(B)?B.shape:void 0;w<=y.minDataValue?y=D:w>=y.maxDataValue?y=C:"area"===y.scaleBy&&B?(w=(y="circle"===B)?e*(D/2)**2:D*D,w+=A*((y?e*(C/2)**2:C*C)-w),y=y?2*Math.sqrt(w/e):Math.sqrt(w)):y=D+A*(C-D);return y;case "proportional":return A=u.isSome(B)?B.shape:void 0,w/=y.minDataValue,D=g(y.minSize,C,B),y=g(y.maxSize,C,B),B=null,B="circle"===A?2*Math.sqrt(w*(D/2)**2):"square"===A||"diamond"===A||"image"===A?Math.sqrt(w*D**2):w*D,y=a(B,D,
y);case "stops":{const [E,G,I]=d(w,A);E===G?y=g(y.stops[E].size,C,B):(w=g(y.stops[E].size,C,B),y=g(y.stops[G].size,C,B),y=w+(y-w)*I)}return y;case "real-world-size":return A=(u.isSome(B)&&B.resolution?B.resolution:1)*m.meterIn[y.valueUnit],D=g(y.minSize,C,B),B=g(y.maxSize,C,B),{valueRepresentation:y}=y,C=null,C="area"===y?2*Math.sqrt(w/e)/A:"radius"===y||"distance"===y?2*w/A:w/A,y=a(C,D,B);case "identity":return w;case "unknown":return null}}function d(w,y){if(y){var C=0,B=y.length-1;y.some((A,D)=>
{if(w<A)return B=D,!0;C=D;return!1});return[C,B,(w-y[C])/(y[B]-y[C])]}}const h=r.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),k=new z,e=Math.PI;n.getAllSizes=function(w,y,C){const B=["proportional","proportional","proportional"];for(const A of w)switch(w=A.useSymbolValue?"symbol-value":t(A,y,C),A.axis){case "width":B[0]=w;break;case "depth":B[1]=w;break;case "height":B[2]=w;break;case "width-and-depth":B[0]=w;B[1]=w;break;case "all":case void 0:case null:B[0]=w;B[1]=w;B[2]=
w;break;default:x.neverReached(A.axis)}return B};n.getColor=p;n.getOpacity=f;n.getRotationAngle=q;n.getSize=t;n.getSizeForValue=b;n.getSizeFromNumberOrVariable=g;n.getSizeRangeAtScale=function(w,y,C){const {isScaleDriven:B}=w.cache;if(!(B&&"3d"===C||y))return null;C={scale:y,view:C};y=g(w.minSize,k,C);w=g(w.maxSize,k,C);if(null!=y||null!=w)return y>w&&(C=w,w=y,y=C),{minSize:y,maxSize:w}};n.getVisualVariableValues=function(w,y,C){if(w.visualVariables){var B=[],A=[],D=[],E=[],G=[];for(const I of w.visualVariables)switch(I.type){case "color":A.push(I);
break;case "opacity":D.push(I);break;case "rotation":G.push(I);break;case "size":E.push(I)}A.forEach(I=>{const L=p(I,y,C);B.push({variable:I,value:L})});D.forEach(I=>{const L=f(I,y,C);B.push({variable:I,value:L})});G.forEach(I=>{const L=q(I,y,C);B.push({variable:I,value:L})});E.forEach(I=>{const L=t(I,y,C);B.push({variable:I,value:L})});return B.filter(I=>null!=I.value)}};n.viewScaleRE=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/Graphic":function(){define("./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./geometry ./PopupTemplate ./symbols ./core/JSONSupport ./core/lang ./core/maybe ./core/uid ./core/accessorSupport/decorators/property ./core/accessorSupport/ensureType ./core/has ./core/Logger ./core/accessorSupport/decorators/subclass ./geometry/support/jsonUtils".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a){var b;u=b=function(d){function h(...e){e=d.call(this,...e)||this;e.isAggregate=!1;e.layer=null;e.popupTemplate=null;e.sourceLayer=null;Object.defineProperty(n._assertThisInitialized(e),"uid",{value:p.generateUID(),configurable:!0});return e}n._inheritsLoose(h,d);var k=h.prototype;k.normalizeCtorArgs=function(e,w,y,C){return e&&!e.declaredClass?e:{geometry:e,symbol:w,attributes:y,popupTemplate:C}};k.getEffectivePopupTemplate=function(e=!1){if(this.popupTemplate)return this.popupTemplate;
for(const w of[this.sourceLayer,this.layer])if(w){if("popupTemplate"in w&&w.popupTemplate)return w.popupTemplate;if(e&&"defaultPopupTemplate"in w&&v.isSome(w.defaultPopupTemplate))return w.defaultPopupTemplate}return null};k.getAttribute=function(e){return this.attributes&&this.attributes[e]};k.setAttribute=function(e,w){if(this.attributes){const y=this.getAttribute(e);this.attributes[e]=w;this._notifyLayer("attributes",y,w,e)}else this.attributes={[e]:w},this._notifyLayer("attributes",void 0,w,e)};
k.getObjectId=function(){return this.sourceLayer?"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null:null};k.toJSON=function(){return{geometry:v.isSome(this.geometry)?this.geometry.toJSON():null,symbol:v.isSome(this.symbol)?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}};k.clone=function(){return new b(this.cloneProperties())};k.notifyGeometryChanged=function(){this._notifyLayer("geometry",
this.geometry,this.geometry)};k.cloneProperties=function(){return{attributes:m.clone(this.attributes),geometry:m.clone(this.geometry),layer:this.layer,popupTemplate:this.popupTemplate&&this.popupTemplate.clone(),sourceLayer:this.sourceLayer,symbol:m.clone(this.symbol),visible:this.visible}};k._notifyLayer=function(e,w,y,C){this.layer&&"graphicChanged"in this.layer&&(w={graphic:this,property:e,oldValue:w,newValue:y},"attributes"===e&&(w.attributeName=C),this.layer.graphicChanged(w))};n._createClass(h,
[{key:"attributes",set:function(e){const w=this._get("attributes");w!==e&&(this._set("attributes",e),this._notifyLayer("attributes",w,e))}},{key:"geometry",set:function(e){const w=this._get("geometry");w!==e&&(this._set("geometry",e),this._notifyLayer("geometry",w,e))}},{key:"symbol",set:function(e){const w=this._get("symbol");w!==e&&(this._set("symbol",e),this._notifyLayer("symbol",w,e))}},{key:"visible",set:function(e){const w=this._get("visible");w!==e&&(this._set("visible",e),this._notifyLayer("visible",
w,e))}}]);return h}(u.JSONSupport);c.__decorate([f.property({value:null})],u.prototype,"attributes",null);c.__decorate([f.property({value:null,types:z.geometryTypes,json:{read:a.fromJSON}})],u.prototype,"geometry",null);c.__decorate([f.property({type:Boolean})],u.prototype,"isAggregate",void 0);c.__decorate([f.property()],u.prototype,"layer",void 0);c.__decorate([f.property({type:x})],u.prototype,"popupTemplate",void 0);c.__decorate([f.property()],u.prototype,"sourceLayer",void 0);c.__decorate([f.property({value:null,
types:r.symbolTypes})],u.prototype,"symbol",null);c.__decorate([f.property({type:Boolean,value:!0})],u.prototype,"visible",null);u=b=c.__decorate([g.subclass("esri.Graphic")],u);(u||(u={})).generateUID=p.generateUID;return u})},"esri/PopupTemplate":function(){define("./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/Collection ./core/JSONSupport ./core/lang ./core/Logger ./core/promiseUtils ./core/accessorSupport/decorators/property ./core/accessorSupport/decorators/cast ./core/has ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./core/accessorSupport/ensureType ./layers/support/fieldUtils ./popup/content ./popup/ExpressionInfo ./popup/FieldInfo ./popup/LayerOptions ./popup/RelatedRecordsInfo ./popup/content/AttachmentsContent ./popup/content/Content ./popup/content/CustomContent ./popup/content/FieldsContent ./popup/content/MediaContent ./popup/content/TextContent ./popup/content/support/mediaInfoTypes ./support/actions/ActionBase ./support/actions/ActionButton ./support/actions/ActionToggle".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a,b,d,h,k,e,w,y,C,B,A,D,E,G,I,L){var J;f=z.ofType({key:"type",defaultKeyValue:"button",base:G,typeMap:{button:I,toggle:L}});const F={base:y,key:"type",typeMap:{media:A,custom:C,text:D,attachments:w,fields:B}},K=u.getLogger("esri.PopupTemplate"),M=["attachments","fields","media","text"];x=J=function(R){function T(){var S=R.apply(this,arguments)||this;S.actions=null;S.content="";S.expressionInfos=null;S.fieldInfos=null;S.layerOptions=null;S.lastEditInfoEnabled=!0;
S.outFields=null;S.overwriteActions=!1;S.returnGeometry=!1;S.title="";S.relatedRecordsInfo=null;return S}n._inheritsLoose(T,R);var Q=T.prototype;Q.castContent=function(S){if(Array.isArray(S))return S.map(X=>g.ensureOneOfType(F,X));if("string"===typeof S||"function"===typeof S||S instanceof HTMLElement||m.isPromiseLike(S))return S;K.error("content error","unsupported content value",{value:S});return null};Q.readContent=function(S,X){({popupElements:S}=X);return Array.isArray(S)&&0<S.length?this._readPopupInfoElements(X):
this._readPopupInfo(X)};Q.writeContent=function(S,X,aa,ma){"string"===typeof S?X.description=S:Array.isArray(S)&&(X.popupElements=S.filter(ra=>-1!==M.indexOf(ra.type)).map(ra=>ra&&ra.toJSON(ma)),X.popupElements.forEach(ra=>{"attachments"===ra.type?this._writeAttachmentContent(X):"media"===ra.type?this._writeMediaContent(ra,X):"text"===ra.type&&this._writeTextContent(ra,X)}))};Q.writeFieldInfos=function(S,X,aa,ma){({content:aa}=this);aa=Array.isArray(aa)?aa:null;if(S){const ra=aa?aa.filter(wa=>"fields"===
wa.type):[],za=ra.length&&ra.every(wa=>{var va;return null==(va=wa.fieldInfos)?void 0:va.length});X.fieldInfos=S.filter(Boolean).map(wa=>{wa=wa.toJSON(ma);za&&(wa.visible=!1);return wa})}if(aa)for(const ra of aa)"fields"===ra.type&&this._writeFieldsContent(ra,X)};Q.writeLayerOptions=function(S,X,aa,ma){X[aa]=!S||null===S.showNoDataRecords&&null===S.returnTopmostRaster?null:S.toJSON(ma)};Q.writeTitle=function(S,X){X.title=S||""};Q.clone=function(){var {actions:S}=this;S=S?r.clone(S.toArray()):[];return new J({actions:S,
content:Array.isArray(this.content)?r.clone(this.content):this.content,expressionInfos:Array.isArray(this.expressionInfos)?r.clone(this.expressionInfos):null,fieldInfos:Array.isArray(this.fieldInfos)?r.clone(this.fieldInfos):null,layerOptions:this.layerOptions?r.clone(this.layerOptions):null,lastEditInfoEnabled:this.lastEditInfoEnabled,outFields:Array.isArray(this.outFields)?r.clone(this.outFields):null,overwriteActions:this.overwriteActions,returnGeometry:this.returnGeometry,title:this.title,relatedRecordsInfo:this.relatedRecordsInfo?
r.clone(this.relatedRecordsInfo):null})};Q.collectRequiredFields=function(){var S=n._asyncToGenerator(function*(X,aa){yield this._collectExpressionInfoFields(X,aa,this.expressionInfos);a.collectFields(X,aa,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])});return function(X,aa){return S.apply(this,arguments)}}();Q.getRequiredFields=function(){var S=n._asyncToGenerator(function*(X){const aa=new Set;yield this.collectRequiredFields(aa,
X);return[...aa].sort()});return function(X){return S.apply(this,arguments)}}();Q._writeFieldsContent=function(S,X){Array.isArray(S.fieldInfos)&&S.fieldInfos.length&&(S=r.clone(S.fieldInfos),Array.isArray(X.fieldInfos)?S.forEach(aa=>{const ma=X.fieldInfos.find(ra=>ra.fieldName.toLowerCase()===aa.fieldName.toLowerCase());ma?ma.visible=!0:X.fieldInfos.push(aa)}):X.fieldInfos=S)};Q._writeAttachmentContent=function(S){S.showAttachments||(S.showAttachments=!0)};Q._writeTextContent=function(S,X){!X.description&&
S.text&&(X.description=S.text)};Q._writeMediaContent=function(S,X){Array.isArray(S.mediaInfos)&&S.mediaInfos.length&&(S=r.clone(S.mediaInfos),Array.isArray(X.mediaInfos)?X.mediaInfos=[...X.mediaInfos,...S]:X.mediaInfos=S)};Q._readPopupInfoElements=function({description:S,mediaInfos:X,popupElements:aa}){var ma=!1,ra=!1;return aa.map(za=>{if("media"===za.type)return za.mediaInfos||!X||ra||(za.mediaInfos=X,ra=!0),A.fromJSON(za);if("text"===za.type)return za.text||!S||ma||(za.text=S,ma=!0),D.fromJSON(za);
if("attachments"===za.type)return w.fromJSON(za);if("fields"===za.type)return B.fromJSON(za)}).filter(Boolean)};Q._readPopupInfo=function({description:S,mediaInfos:X,showAttachments:aa}){const ma=[];S?ma.push(new D({text:S})):ma.push(new B);Array.isArray(X)&&X.length&&ma.push(A.fromJSON({mediaInfos:X}));aa&&ma.push(w.fromJSON({displayType:"list"}));return ma.length?ma:S};Q._getContentElementFields=function(S){if(!S||"attachments"===S.type)return[];if("custom"===S.type)return S.outFields||[];if("fields"===
S.type)return this._getFieldInfoFields(S.fieldInfos||this.fieldInfos);if("media"===S.type)return(S.mediaInfos||[]).reduce((X,aa)=>[...X,...this._getMediaInfoFields(aa)],[]);if("text"===S.type)return this._extractFieldNames(S.text)};Q._getMediaInfoFields=function(S){const {caption:X,title:aa,value:ma}=S,{fields:ra=[],normalizeField:za,tooltipField:wa,sourceURL:va,linkURL:Fa}=ma||{};S=[...this._extractFieldNames(aa),...this._extractFieldNames(X),...this._extractFieldNames(va),...this._extractFieldNames(Fa),
...ra];za&&S.push(za);wa&&S.push(wa);return S};Q._getContentFields=function(S){return"string"===typeof S?this._extractFieldNames(S):Array.isArray(S)?S.reduce((X,aa)=>[...X,...this._getContentElementFields(aa)],[]):[]};Q._collectExpressionInfoFields=function(){var S=n._asyncToGenerator(function*(X,aa,ma){ma&&(yield Promise.all(ma.map(ra=>a.collectArcadeFieldNames(X,aa,ra.expression))))});return function(X,aa,ma){return S.apply(this,arguments)}}();Q._getFieldInfoFields=function(S){return S?S.filter(X=>
"undefined"===typeof X.visible?!0:!!X.visible).map(X=>X.fieldName).filter(X=>-1===X.indexOf("relationships/")&&-1===X.indexOf("expression/")):[]};Q._getActionsFields=function(S){return S?S.toArray().reduce((X,aa)=>[...X,...this._getActionFields(aa)],[]):[]};Q._getActionFields=function(S){const {className:X,title:aa,type:ma}=S;S="button"===ma||"toggle"===ma?S.image:"";return[...this._extractFieldNames(aa),...this._extractFieldNames(X),...this._extractFieldNames(S)]};Q._getTitleFields=function(S){return"string"===
typeof S?this._extractFieldNames(S):[]};Q._extractFieldNames=function(S){if(!S||"string"!==typeof S)return[];S=S.match(/{[^}]*}/g);if(!S)return[];const X=/\{(\w+):.+\}/;return(S=S.filter(aa=>!(0===aa.indexOf("{relationships/")||0===aa.indexOf("{expression/"))).map(aa=>aa.replace(X,"{$1}")))?S.map(aa=>aa.slice(1,-1)):[]};return T}(x.JSONSupport);c.__decorate([v.property({type:f})],x.prototype,"actions",void 0);c.__decorate([v.property()],x.prototype,"content",void 0);c.__decorate([p.cast("content")],
x.prototype,"castContent",null);c.__decorate([q.reader("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments"])],x.prototype,"readContent",null);c.__decorate([t.writer("content",{popupElements:{type:z.ofType(b.persistableTypes)},showAttachments:{type:Boolean},mediaInfos:{type:z.ofType(E.types)},description:{type:String}})],x.prototype,"writeContent",null);c.__decorate([v.property({type:[d],json:{write:!0}})],x.prototype,"expressionInfos",void 0);c.__decorate([v.property({type:[h]})],
x.prototype,"fieldInfos",void 0);c.__decorate([t.writer("fieldInfos")],x.prototype,"writeFieldInfos",null);c.__decorate([v.property({type:k})],x.prototype,"layerOptions",void 0);c.__decorate([t.writer("layerOptions")],x.prototype,"writeLayerOptions",null);c.__decorate([v.property({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],x.prototype,"lastEditInfoEnabled",void 0);c.__decorate([v.property()],x.prototype,"outFields",void 0);c.__decorate([v.property()],
x.prototype,"overwriteActions",void 0);c.__decorate([v.property()],x.prototype,"returnGeometry",void 0);c.__decorate([v.property({json:{type:String}})],x.prototype,"title",void 0);c.__decorate([t.writer("title")],x.prototype,"writeTitle",null);c.__decorate([v.property({type:e,json:{write:!0}})],x.prototype,"relatedRecordsInfo",void 0);return x=J=c.__decorate([l.subclass("esri.PopupTemplate")],x)})},"esri/popup/content":function(){define("exports ./content/AttachmentsContent ./content/Content ./content/CustomContent ./content/FieldsContent ./content/MediaContent ./content/TextContent".split(" "),
function(n,c,z,x,r,u,m){const v={base:null,key:"type",typeMap:{attachment:c,media:u,text:m,field:r}};n.AttachmentsContent=c;n.BaseContent=z;n.CustomContent=x;n.FieldsContent=r;n.MediaContent=u;n.TextContent=m;n.isContent=function(p){return p instanceof z};n.persistableTypes=v;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/popup/content/AttachmentsContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./Content".split(" "),
function(n,c,z,x,r,u,m,v){var p;x=p=function(f){function q(l){l=f.call(this,l)||this;l.description=null;l.displayType=null;l.title=null;l.type="attachments";return l}n._inheritsLoose(q,f);q.prototype.clone=function(){return new p({description:this.description,displayType:this.displayType,title:this.title})};return q}(v);c.__decorate([z.property({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],x.prototype,"description",void 0);c.__decorate([z.property({type:["preview","list"],json:{write:!0}})],
x.prototype,"displayType",void 0);c.__decorate([z.property({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],x.prototype,"title",void 0);c.__decorate([z.property({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],x.prototype,"type",void 0);return x=p=c.__decorate([m.subclass("esri.popup.content.AttachmentsContent")],x)})},"esri/popup/content/Content":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(n,c,z,x,r,u,m,v){z=function(p){function f(q){q=p.call(this,q)||this;q.type=null;return q}n._inheritsLoose(f,p);return f}(z.JSONSupport);c.__decorate([x.property({type:["attachments","custom","fields","media","text"],readOnly:!0,json:{read:!1,write:!0}})],z.prototype,"type",void 0);return z=c.__decorate([v.subclass("esri.popup.content.Content")],z)})},"esri/popup/content/CustomContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ./Content".split(" "),
function(n,c,z,x,r,u,m,v,p){var f;r=f=function(q){function l(t){t=q.call(this,t)||this;t.creator=null;t.destroyer=null;t.outFields=null;t.type="custom";return t}n._inheritsLoose(l,q);l.prototype.clone=function(){return new f({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?z.clone(this.outFields):null})};return l}(p);c.__decorate([x.property()],r.prototype,"creator",void 0);c.__decorate([x.property()],r.prototype,"destroyer",void 0);c.__decorate([x.property()],
r.prototype,"outFields",void 0);c.__decorate([x.property({type:["custom"],readOnly:!0})],r.prototype,"type",void 0);return r=f=c.__decorate([v.subclass("esri.popup.content.CustomContent")],r)})},"esri/popup/content/FieldsContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../FieldInfo ./Content".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q){var l;r=l=function(t){function g(b){b=t.call(this,b)||this;b.description=null;b.fieldInfos=null;b.title=null;b.type="fields";return b}n._inheritsLoose(g,t);var a=g.prototype;a.writeFieldInfos=function(b,d){d.fieldInfos=b&&b.map(h=>h.toJSON())};a.clone=function(){return new l({description:this.description,fieldInfos:Array.isArray(this.fieldInfos)?z.clone(this.fieldInfos):null,title:this.title})};return g}(q);c.__decorate([x.property({json:{write:!0,origins:{"web-scene":{write:!1,
read:!1}}}})],r.prototype,"description",void 0);c.__decorate([x.property({type:[f]})],r.prototype,"fieldInfos",void 0);c.__decorate([p.writer("fieldInfos")],r.prototype,"writeFieldInfos",null);c.__decorate([x.property({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],r.prototype,"title",void 0);c.__decorate([x.property({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],r.prototype,"type",void 0);return r=l=c.__decorate([v.subclass("esri.popup.content.FieldsContent")],r)})},"esri/popup/FieldInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/jsonMap ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./support/FieldInfoFormat".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l){var t;x=t=function(g){function a(b){b=g.call(this,b)||this;b.fieldName=null;b.format=null;b.isEditable=!1;b.label=null;b.stringFieldOption="text-box";b.statisticType=null;b.tooltip=null;b.visible=!0;return b}n._inheritsLoose(a,g);a.prototype.clone=function(){return new t({fieldName:this.fieldName,format:this.format?r.clone(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,
visible:this.visible})};return a}(x.JSONSupport);c.__decorate([u.property({type:String,json:{write:!0}})],x.prototype,"fieldName",void 0);c.__decorate([u.property({type:l,json:{write:!0}})],x.prototype,"format",void 0);c.__decorate([u.property({type:Boolean,json:{write:!0,default:!1}})],x.prototype,"isEditable",void 0);c.__decorate([u.property({type:String,json:{write:!0}})],x.prototype,"label",void 0);c.__decorate([f.enumeration(new z.JSONMap({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),
{default:"text-box"})],x.prototype,"stringFieldOption",void 0);c.__decorate([u.property({type:"count sum min max avg stddev var".split(" "),json:{write:!0}})],x.prototype,"statisticType",void 0);c.__decorate([u.property({type:String,json:{write:!0}})],x.prototype,"tooltip",void 0);c.__decorate([u.property({type:Boolean,json:{write:!0}})],x.prototype,"visible",void 0);return x=t=c.__decorate([q.subclass("esri.popup.FieldInfo")],x)})},"esri/popup/support/FieldInfoFormat":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/date ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../intl/date ../../intl/number".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l){var t;x=t=function(g){function a(d){d=g.call(this,d)||this;d.dateFormat=null;d.dateTimeFormatOptions=null;d.digitSeparator=!1;d.places=null;return d}n._inheritsLoose(a,g);var b=a.prototype;b.clone=function(){return new t({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})};b.format=function(d){return this.dateFormat?q.formatDate(d,{...q.convertDateFormatToIntlOptions(this.dateFormat),...this.dateTimeFormatOptions}):l.formatNumber(d,
l.convertNumberFormatToIntlOptions(this))};return a}(x.JSONSupport);c.__decorate([p.enumeration(z.dictionary)],x.prototype,"dateFormat",void 0);c.__decorate([r.property({type:Object,json:{read:!1}})],x.prototype,"dateTimeFormatOptions",void 0);c.__decorate([r.property({type:Boolean,json:{write:!0}})],x.prototype,"digitSeparator",void 0);c.__decorate([r.property({type:m.Integer,json:{write:!0}})],x.prototype,"places",void 0);return x=t=c.__decorate([f.subclass("esri.popup.support.FieldInfoFormat")],
x)})},"esri/core/date":function(){define(["exports","./jsonMap"],function(n,c){const z={"short-date":"(datePattern: 'M/d/y', selector: 'date')","short-date-short-time":"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')","short-date-short-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')","short-date-long-time":"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')","short-date-long-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')",
"short-date-le":"(datePattern: 'd/M/y', selector: 'date')","short-date-le-short-time":"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')","short-date-le-short-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')","short-date-le-long-time":"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')","short-date-le-long-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')","long-month-day-year":"(datePattern: 'MMMM d, y', selector: 'date')",
"long-month-day-year-short-time":"(datePattern: 'MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')","long-month-day-year-short-time-24":"(datePattern: 'MMMM d, y', timePattern: 'H:mm', selector: 'date and time')","long-month-day-year-long-time":"(datePattern: 'MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')","long-month-day-year-long-time-24":"(datePattern: 'MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')","day-short-month-year":"(datePattern: 'd MMM y', selector: 'date')",
"day-short-month-year-short-time":"(datePattern: 'd MMM y', timePattern: 'h:mm a', selector: 'date and time')","day-short-month-year-short-time-24":"(datePattern: 'd MMM y', timePattern: 'H:mm', selector: 'date and time')","day-short-month-year-long-time":"(datePattern: 'd MMM y', timePattern: 'h:mm:ss a', selector: 'date and time')","day-short-month-year-long-time-24":"(datePattern: 'd MMM y', timePattern: 'H:mm:ss', selector: 'date and time')","long-date":"(datePattern: 'EEEE, MMMM d, y', selector: 'date')",
"long-date-short-time":"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')","long-date-short-time-24":"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm', selector: 'date and time')","long-date-long-time":"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')","long-date-long-time-24":"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')","long-month-year":"(datePattern: 'MMMM y', selector: 'date')","short-month-year":"(datePattern: 'MMM y', selector: 'date')",
year:"(datePattern: 'y', selector: 'date')"};c=c.strict()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",
longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",
longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});const x=c.toJSON.bind(c),r=c.fromJSON.bind(c);n.dictionary=c;n.formats=z;n.fromJSON=r;n.getFormat=function(u){return z[u]};n.toJSON=x;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/popup/content/MediaContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./BarChartMediaInfo ./ColumnChartMediaInfo ./Content ./ImageMediaInfo ./LineChartMediaInfo ./PieChartMediaInfo ./support/mediaInfoTypes".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a,b,d){var h;r=h=function(k){function e(y){y=k.call(this,y)||this;y.activeMediaInfoIndex=null;y.description=null;y.mediaInfos=null;y.title=null;y.type="media";return y}n._inheritsLoose(e,k);var w=e.prototype;w.readMediaInfos=function(y){return y&&y.map(C=>{if("image"===C.type)return g.fromJSON(C);if("barchart"===C.type)return q.fromJSON(C);if("columnchart"===C.type)return l.fromJSON(C);if("linechart"===C.type)return a.fromJSON(C);if("piechart"===C.type)return b.fromJSON(C)}).filter(Boolean)};
w.writeMediaInfos=function(y,C){C.mediaInfos=y&&y.map(B=>B.toJSON())};w.clone=function(){return new h({activeMediaInfoIndex:this.activeMediaInfoIndex,description:this.description,mediaInfos:this.mediaInfos?z.clone(this.mediaInfos):null,title:this.title})};return e}(t);c.__decorate([x.property()],r.prototype,"activeMediaInfoIndex",void 0);c.__decorate([x.property({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],r.prototype,"description",void 0);c.__decorate([x.property({types:[d.types]})],
r.prototype,"mediaInfos",void 0);c.__decorate([v.reader("mediaInfos")],r.prototype,"readMediaInfos",null);c.__decorate([f.writer("mediaInfos")],r.prototype,"writeMediaInfos",null);c.__decorate([x.property({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],r.prototype,"title",void 0);c.__decorate([x.property({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],r.prototype,"type",void 0);return r=h=c.__decorate([p.subclass("esri.popup.content.MediaContent")],r)})},"esri/popup/content/BarChartMediaInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),
function(n,c,z,x,r,u,m,v,p){var f;x=f=function(q){function l(t){t=q.call(this,t)||this;t.type="bar-chart";return t}n._inheritsLoose(l,q);l.prototype.clone=function(){return new f({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};return l}(v);c.__decorate([z.property({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:p.chartTypeKebabDict.write}})],x.prototype,"type",void 0);return x=f=c.__decorate([m.subclass("esri.popup.content.BarChartMediaInfo")],
x)})},"esri/popup/content/mixins/ChartMediaInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ./MediaInfo ../support/ChartMediaInfoValue".split(" "),function(n,c,z,x,r,u,m,v,p){x=function(f){function q(l){l=f.call(this,l)||this;l.type=null;l.value=null;return l}n._inheritsLoose(q,
f);return q}(v);c.__decorate([z.property({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],x.prototype,"type",void 0);c.__decorate([z.property({type:p,json:{write:!0}})],x.prototype,"value",void 0);return x=c.__decorate([m.subclass("esri.popup.content.mixins.ChartMediaInfo")],x)})},"esri/popup/content/mixins/MediaInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass".split(" "),
function(n,c,z,x,r,u,m,v){z=function(p){function f(q){q=p.call(this,q)||this;q.altText=null;q.caption="";q.title="";q.type=null;return q}n._inheritsLoose(f,p);return f}(z.JSONSupport);c.__decorate([x.property({type:String,json:{write:!0}})],z.prototype,"altText",void 0);c.__decorate([x.property({type:String,json:{write:!0}})],z.prototype,"caption",void 0);c.__decorate([x.property({type:String,json:{write:!0}})],z.prototype,"title",void 0);c.__decorate([x.property({type:["image","bar-chart","column-chart",
"line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],z.prototype,"type",void 0);return z=c.__decorate([v.subclass("esri.popup.content.mixins.MediaInfo")],z)})},"esri/popup/content/support/ChartMediaInfoValue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/has ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ./ChartMediaInfoValueSeries".split(" "),
function(n,c,z,x,r,u,m,v,p,f){var q;z=q=function(l){function t(g){g=l.call(this,g)||this;g.fields=[];g.normalizeField=null;g.series=[];g.tooltipField=null;return g}n._inheritsLoose(t,l);t.prototype.clone=function(){return new q({fields:x.clone(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})};return t}(z.JSONSupport);c.__decorate([r.property({type:[String],json:{write:!0}})],z.prototype,"fields",void 0);c.__decorate([r.property({type:String,json:{write:!0}})],z.prototype,
"normalizeField",void 0);c.__decorate([r.property({type:[f],json:{read:!1}})],z.prototype,"series",void 0);c.__decorate([r.property({type:String,json:{write:!0}})],z.prototype,"tooltipField",void 0);return z=q=c.__decorate([p.subclass("esri.popup.content.support.ChartMediaInfoValue")],z)})},"esri/popup/content/support/ChartMediaInfoValueSeries":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/aliasOf ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/subclass".split(" "),
function(n,c,z,x,r,u,m,v,p){var f;z=f=function(q){function l(t){t=q.call(this,t)||this;t.tooltip=null;t.value=null;t.x=null;t.y=null;return t}n._inheritsLoose(l,q);l.prototype.clone=function(){return new f({tooltip:this.tooltip,value:this.value})};return l}(z);c.__decorate([v.property()],z.prototype,"tooltip",void 0);c.__decorate([v.property()],z.prototype,"value",void 0);c.__decorate([x.aliasOf("value")],z.prototype,"x",void 0);c.__decorate([x.aliasOf("tooltip")],z.prototype,"y",void 0);return z=
f=c.__decorate([p.subclass("esri.popup.content.support.ChartMediaInfoValueSeries")],z)})},"esri/core/accessorSupport/decorators/aliasOf":function(){define(["exports","./property"],function(n,c){n.aliasOf=function(z,x){return c.property({aliasOf:x?{...x,source:z}:z})};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/popup/content/support/chartMediaInfoUtils":function(){define(["exports","../../../core/jsonMap"],function(n,c){c=c.strict()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",
piechart:"pie-chart"});n.chartTypeKebabDict=c;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/popup/content/ColumnChartMediaInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),function(n,c,z,x,r,u,m,v,p){var f;x=f=function(q){function l(t){t=
q.call(this,t)||this;t.type="column-chart";return t}n._inheritsLoose(l,q);l.prototype.clone=function(){return new f({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};return l}(v);c.__decorate([z.property({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:p.chartTypeKebabDict.write}})],x.prototype,"type",void 0);return x=f=c.__decorate([m.subclass("esri.popup.content.ColumnChartMediaInfo")],x)})},"esri/popup/content/ImageMediaInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./mixins/MediaInfo ./support/ImageMediaInfoValue".split(" "),
function(n,c,z,x,r,u,m,v,p){var f;x=f=function(q){function l(t){t=q.call(this,t)||this;t.refreshInterval=null;t.type="image";t.value=null;return t}n._inheritsLoose(l,q);l.prototype.clone=function(){return new f({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})};return l}(v);c.__decorate([z.property({type:Number,json:{write:!0}})],x.prototype,"refreshInterval",void 0);c.__decorate([z.property({type:["image"],
readOnly:!0,json:{read:!1,write:!0}})],x.prototype,"type",void 0);c.__decorate([z.property({type:p,json:{write:!0}})],x.prototype,"value",void 0);return x=f=c.__decorate([m.subclass("esri.popup.content.ImageMediaInfo")],x)})},"esri/popup/content/support/ImageMediaInfoValue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass".split(" "),
function(n,c,z,x,r,u,m,v){var p;z=p=function(f){function q(l){l=f.call(this,l)||this;l.linkURL=null;l.sourceURL=null;return l}n._inheritsLoose(q,f);q.prototype.clone=function(){return new p({linkURL:this.linkURL,sourceURL:this.sourceURL})};return q}(z.JSONSupport);c.__decorate([x.property({type:String,json:{write:!0}})],z.prototype,"linkURL",void 0);c.__decorate([x.property({type:String,json:{write:!0}})],z.prototype,"sourceURL",void 0);return z=p=c.__decorate([v.subclass("esri.popup.content.support.ImageMediaInfoValue")],
z)})},"esri/popup/content/LineChartMediaInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),function(n,c,z,x,r,u,m,v,p){var f;x=f=function(q){function l(t){t=q.call(this,t)||this;t.type="line-chart";return t}n._inheritsLoose(l,q);l.prototype.clone=
function(){return new f({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};return l}(v);c.__decorate([z.property({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:p.chartTypeKebabDict.write}})],x.prototype,"type",void 0);return x=f=c.__decorate([m.subclass("esri.popup.content.LineChartMediaInfo")],x)})},"esri/popup/content/PieChartMediaInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),
function(n,c,z,x,r,u,m,v,p){var f;x=f=function(q){function l(t){t=q.call(this,t)||this;t.type="pie-chart";return t}n._inheritsLoose(l,q);l.prototype.clone=function(){return new f({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};return l}(v);c.__decorate([z.property({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:p.chartTypeKebabDict.write}})],x.prototype,"type",void 0);return x=f=c.__decorate([m.subclass("esri.popup.content.PieChartMediaInfo")],
x)})},"esri/popup/content/support/mediaInfoTypes":function(){define("exports ../BarChartMediaInfo ../ColumnChartMediaInfo ../ImageMediaInfo ../LineChartMediaInfo ../PieChartMediaInfo ../mixins/MediaInfo".split(" "),function(n,c,z,x,r,u,m){c={base:m,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":c,"column-chart":z,"line-chart":r,"pie-chart":u,image:x}};n["default"]=c;n.types=c;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/popup/content/TextContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./Content".split(" "),
function(n,c,z,x,r,u,m,v){var p;x=p=function(f){function q(l){l=f.call(this,l)||this;l.text=null;l.type="text";return l}n._inheritsLoose(q,f);q.prototype.clone=function(){return new p({text:this.text})};return q}(v);c.__decorate([z.property({type:String,json:{write:!0}})],x.prototype,"text",void 0);c.__decorate([z.property({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],x.prototype,"type",void 0);return x=p=c.__decorate([m.subclass("esri.popup.content.TextContent")],x)})},"esri/popup/ExpressionInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/subclass".split(" "),
function(n,c,z,x,r,u,m,v){var p;z=p=function(f){function q(l){l=f.call(this,l)||this;l.name=null;l.title=null;l.expression=null;l.returnType=null;return l}n._inheritsLoose(q,f);q.prototype.clone=function(){return new p({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})};return q}(z.JSONSupport);c.__decorate([x.property({type:String,json:{write:!0}})],z.prototype,"name",void 0);c.__decorate([x.property({type:String,json:{write:!0}})],z.prototype,"title",void 0);
c.__decorate([x.property({type:String,json:{write:!0}})],z.prototype,"expression",void 0);c.__decorate([x.property({type:["string","number"],json:{write:!0}})],z.prototype,"returnType",void 0);return z=p=c.__decorate([v.subclass("esri.popup.ExpressionInfo")],z)})},"esri/popup/LayerOptions":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/subclass".split(" "),
function(n,c,z,x,r,u,m,v){var p;z=p=function(f){function q(l){l=f.call(this,l)||this;l.returnTopmostRaster=null;l.showNoDataRecords=null;return l}n._inheritsLoose(q,f);q.prototype.clone=function(){return new p({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})};return q}(z.JSONSupport);c.__decorate([x.property({type:Boolean,json:{write:!0}})],z.prototype,"returnTopmostRaster",void 0);c.__decorate([x.property({type:Boolean,json:{write:!0}})],z.prototype,"showNoDataRecords",
void 0);return z=p=c.__decorate([v.subclass("esri.popup.LayerOptions")],z)})},"esri/popup/RelatedRecordsInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/subclass ./support/RelatedRecordsInfoFieldOrder".split(" "),function(n,c,z,x,r,u,m,v,p,f){var q;z=q=function(l){function t(g){g=l.call(this,g)||
this;g.showRelatedRecords=null;g.orderByFields=null;return g}n._inheritsLoose(t,l);t.prototype.clone=function(){return new q({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?x.clone(this.orderByFields):null})};return t}(z.JSONSupport);c.__decorate([r.property({type:Boolean,json:{write:!0}})],z.prototype,"showRelatedRecords",void 0);c.__decorate([r.property({type:[f],json:{write:!0}})],z.prototype,"orderByFields",void 0);return z=q=c.__decorate([p.subclass("esri.popup.RelatedRecordsInfo")],
z)})},"esri/popup/support/RelatedRecordsInfoFieldOrder":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),function(n,c,z,x,r,u,m,v){var p;z=p=function(f){function q(l){l=f.call(this,l)||this;l.field=null;l.order=null;return l}n._inheritsLoose(q,f);q.prototype.clone=function(){return new p({field:this.field,
order:this.order})};return q}(z.JSONSupport);c.__decorate([x.property({type:String,json:{write:!0}})],z.prototype,"field",void 0);c.__decorate([x.property({type:["asc","desc"],json:{write:!0}})],z.prototype,"order",void 0);return z=p=c.__decorate([v.subclass("esri.popup.support.RelatedRecordsInfoFieldOrder")],z)})},"esri/support/actions/ActionBase":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Identifiable ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(n,c,z,x,r,u,m,v,p){var f;z=f=function(q){function l(t){t=q.call(this,t)||this;t.active=!1;t.className=null;t.disabled=!1;t.id=null;t.indicator=!1;t.title=null;t.type=null;t.visible=!0;return t}n._inheritsLoose(l,q);l.prototype.clone=function(){return new f({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})};return l}(x.IdentifiableMixin(z));c.__decorate([r.property()],z.prototype,"active",void 0);
c.__decorate([r.property()],z.prototype,"className",void 0);c.__decorate([r.property()],z.prototype,"disabled",void 0);c.__decorate([r.property()],z.prototype,"id",void 0);c.__decorate([r.property()],z.prototype,"indicator",void 0);c.__decorate([r.property()],z.prototype,"title",void 0);c.__decorate([r.property()],z.prototype,"type",void 0);c.__decorate([r.property()],z.prototype,"visible",void 0);return z=f=c.__decorate([p.subclass("esri.support.actions.ActionBase")],z)})},"esri/core/Identifiable":function(){define(["exports",
"../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./accessorSupport/decorators/subclass"],function(n,c,z,x){let r=0;const u=m=>{m=function(v){function p(...f){f=v.call(this,...f)||this;Object.defineProperty(c._assertThisInitialized(f),"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+r++});return f}c._inheritsLoose(p,v);return p}(m);return m=z.__decorate([x.subclass("esri.core.Identifiable")],m)};n.Identifiable=function(m){function v(){return m.apply(this,arguments)||
this}c._inheritsLoose(v,m);return v}(u(function(){return function(){}}()));n.Identifiable=z.__decorate([x.subclass("esri.core.Identifiable")],n.Identifiable);n.IdentifiableMixin=u;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/support/actions/ActionButton":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./ActionBase".split(" "),
function(n,c,z,x,r,u,m,v){var p;x=p=function(f){function q(l){l=f.call(this,l)||this;l.image=null;l.type="button";return l}n._inheritsLoose(q,f);q.prototype.clone=function(){return new p({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})};return q}(v);c.__decorate([z.property()],x.prototype,"image",void 0);return x=p=c.__decorate([m.subclass("esri.support.Action.ActionButton")],x)})},"esri/support/actions/ActionToggle":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./ActionBase".split(" "),
function(n,c,z,x,r,u,m,v){var p;x=p=function(f){function q(l){l=f.call(this,l)||this;l.image=null;l.type="toggle";l.value=!1;return l}n._inheritsLoose(q,f);q.prototype.clone=function(){return new p({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})};return q}(v);c.__decorate([z.property()],x.prototype,"image",void 0);c.__decorate([z.property()],x.prototype,"value",void 0);
return x=p=c.__decorate([m.subclass("esri.support.Action.ActionToggle")],x)})},"esri/core/compilerUtils":function(){define(["exports","./has"],function(n,c){n.neverReached=function(z){};n.neverReachedSilent=function(z){};n.tuple=(...z)=>z;n.typeCast=function(z){return()=>z};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/renderers/support/lengthUtils":function(){define(["exports","../../core/unitUtils","../../geometry/support/Ellipsoid"],function(n,c,z){c={inches:c.convertUnit(1,"meters",
"inches"),feet:c.convertUnit(1,"meters","feet"),"us-feet":c.convertUnit(1,"meters","us-feet"),yards:c.convertUnit(1,"meters","yards"),miles:c.convertUnit(1,"meters","miles"),"nautical-miles":c.convertUnit(1,"meters","nautical-miles"),millimeters:c.convertUnit(1,"meters","millimeters"),centimeters:c.convertUnit(1,"meters","centimeters"),decimeters:c.convertUnit(1,"meters","decimeters"),meters:c.convertUnit(1,"meters","meters"),kilometers:c.convertUnit(1,"meters","kilometers"),"decimal-degrees":1/c.lengthToDegrees(1,
"meters",z.earth.radius)};n.meterIn=c;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/renderers/visualVariables/VisualVariableFactory":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/jsonMap ../../core/Logger ../../core/Warning ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ColorVariable ./OpacityVariable ./RotationVariable ./SizeVariable".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g){const a=r.getLogger("esri.renderers.visualVariables.VisualVariableFactory"),b={color:q,size:g,opacity:l,rotation:t},d=new x.JSONMap({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),h=/^\[([^\]]+)\]$/i;z=function(k){function e(){var y=k.apply(this,arguments)||this;y.colorVariables=null;y.opacityVariables=null;y.rotationVariables=null;y.sizeVariables=null;return y}n._inheritsLoose(e,k);var w=e.prototype;w.readVariables=function(y,
C,B){const {rotationExpression:A,rotationType:D}=C;if(C=(C=A&&A.match(h))&&C[1])y||(y=[]),y.push({type:"rotationInfo",rotationType:D,field:C});if(y)return y.map(E=>{var G=d.read(E.type);const I=b[G];I||(a.warn(`Unknown variable type: ${G}`),B&&B.messages&&B.messages.push(new u("visual-variable:unsupported",`visualVariable of type '${G}' is not supported`,{definition:E,context:B})));G=new I;G.read(E,B);return G})};w.writeVariables=function(y,C){const B=[];for(const A of y)(y=A.toJSON(C))&&B.push(y);
return B};w._resetVariables=function(){this.colorVariables=[];this.opacityVariables=[];this.rotationVariables=[];this.sizeVariables=[]};n._createClass(e,[{key:"visualVariables",set:function(y){this._resetVariables();if((y=y&&y.filter(B=>!!B))&&y.length){for(var C of y)switch(C.type){case "color":this.colorVariables.push(C);break;case "opacity":this.opacityVariables.push(C);break;case "rotation":this.rotationVariables.push(C);break;case "size":this.sizeVariables.push(C)}this.sizeVariables.length&&
this.sizeVariables.some(B=>!!B.target)&&y.sort((B,A)=>{let D=null;return D=B.target===A.target?0:B.target?1:-1});for(C=0;C<y.length;C++)y[C].index=C}this._set("visualVariables",y)}}]);return e}(z);c.__decorate([m.property()],z.prototype,"visualVariables",null);return z=c.__decorate([f.subclass("esri.renderers.visualVariables.VisualVariableFactory")],z)})},"esri/renderers/support/ClassBreakInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../symbols ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../symbols/support/jsonUtils".split(" "),
function(n,c,z,x,r,u,m,v,p,f){var q;x=q=function(l){function t(a){a=l.call(this,a)||this;a.description=null;a.label=null;a.minValue=null;a.maxValue=0;a.symbol=null;return a}n._inheritsLoose(t,l);var g=t.prototype;g.clone=function(){return new q({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})};g.getMeshHash=function(){const a=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${a}`};return t}(x.JSONSupport);
c.__decorate([r.property({type:String,json:{write:!0}})],x.prototype,"description",void 0);c.__decorate([r.property({type:String,json:{write:!0}})],x.prototype,"label",void 0);c.__decorate([r.property({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],x.prototype,"minValue",void 0);c.__decorate([r.property({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],x.prototype,"maxValue",void 0);c.__decorate([r.property({types:z.symbolTypesRenderer,
json:{origins:{"web-scene":{types:z.symbolTypesRenderer3D,write:f.write}},write:f.write}})],x.prototype,"symbol",void 0);return x=q=c.__decorate([p.subclass("esri.renderers.support.ClassBreakInfo")],x)})},"esri/symbols/support/jsonUtils":function(){define("exports ../../symbols ../../core/Error ../Symbol3D ../WebStyleSymbol ./symbolConversion".split(" "),function(n,c,z,x,r,u){function m(v,p,f){if(!v)return null;if(!(!f||"web-scene"!==f.origin||v instanceof x||v instanceof r)){const q="cim"!==v.type?
u.to3D(v):{symbol:null,error:new z("symbol-conversion:unsupported-cim-symbol","CIM symbol is unsupported in web scenes",{symbol:v})};if(q.symbol)return q.symbol.write(p,f);f.messages&&f.messages.push(new z("symbol:unsupported",`Symbols of type '${v.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:v,context:f,error:q.error}));return null}return f&&"web-map"===f.origin&&"web-style"===v.type?(f.messages&&f.messages.push(new z("symbol:unsupported",
`Symbols of type '${v.declaredClass}' are not supported in webmaps. Use CIMSymbol instead when working with WebMap in MapView.`,{symbol:v,context:f})),null):v.write(p,f)}n.fromJSON=function(v,p){return c.readSymbol(v,null,p)};n.write=function(v,p,f,q){(v=m(v,{},q))&&(p[f]=v)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/support/symbolConversion":function(){define("exports ../../symbols ../../core/Error ../WebStyleSymbol ../PointSymbol3D ../SimpleLineSymbol ../LineSymbol3D ../SimpleMarkerSymbol ../PictureMarkerSymbol ../SimpleFillSymbol ../PolygonSymbol3D ../TextSymbol ../LabelSymbol3D".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t){n.to3D=function(g,a=!1,b=!1,d=!0){if(!g)return{symbol:null};if(c.isSymbol3D(g)||g instanceof x)d=g.clone();else if("cim"===g.type)d=r.fromCIMSymbol(g);else if(g instanceof u)d=m.fromSimpleLineSymbol(g);else if(g instanceof v)d=r.fromSimpleMarkerSymbol(g);else if(g instanceof p)d=r.fromPictureMarkerSymbol(g);else if(g instanceof f)d=q.fromSimpleFillSymbol(g);else if(g instanceof l)d=d?t.fromTextSymbol(g):r.fromTextSymbol(g);else return{error:new z("symbol-conversion:unsupported-2d-symbol",
`2D symbol of type '${g.type||g.declaredClass}' is unsupported in 3D`,{symbol:g})};a&&(d.id=g.id);if(b&&c.isSymbol3D(d))for(g=0;g<d.symbolLayers.length;++g)d.symbolLayers.getItemAt(g)._ignoreDrivers=!0;return{symbol:d}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/renderers/support/commonProperties":function(){define(["exports","../../symbols","../../symbols/support/jsonUtils","../../symbols/Symbol","../../symbols/PolygonSymbol3D"],function(n,c,z,x,r){const u={types:c.symbolTypesRenderer,
json:{write:{writer:z.write},origins:{"web-scene":{types:c.symbolTypesRenderer3D,write:{writer:z.write}}}}};n.rendererBackgroundFillSymbolProperty={types:{base:x,key:"type",typeMap:{"simple-fill":c.symbolTypes.typeMap["simple-fill"],"picture-fill":c.symbolTypes.typeMap["picture-fill"],"polygon-3d":c.symbolTypes.typeMap["polygon-3d"]}},json:{write:{writer:z.write},origins:{"web-scene":{type:r,write:{writer:z.write}}}}};n.rendererSymbolProperty=u;Object.defineProperty(n,"__esModule",{value:!0})})},
"esri/renderers/DictionaryRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../request ../core/Error ../core/lang ../core/Logger ../core/LRUCache ../core/maybe ../core/promiseUtils ../core/string ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../layers/support/fieldUtils ./Renderer ./mixins/VisualVariablesMixin ../support/arcadeOnDemand ../symbols/CIMSymbol".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a,b,d,h,k,e,w){var y;const C=m.getLogger("esri.renderers.DictionaryRenderer"),B={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};m=y=function(A){function D(G){G=A.call(this,G)||this;G._ongoingRequests=new Map;G._symbolCache=new v(100);G.config=null;G.fieldMap=null;G.scaleExpression=null;G.scaleExpressionTitle=null;G.url=null;G.type="dictionary";return G}n._inheritsLoose(D,A);var E=
D.prototype;E.writeData=function(G,I){G&&(I.scalingExpressionInfo={expression:G,returnType:"number"})};E.writeVisualVariables=function(G,I,L,J){null!=J&&J.origin||A.prototype.writeVisualVariables.call(this,G,I,L,J)};E.clone=function(){return new y({config:u.clone(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:u.clone(this.fieldMap),url:u.clone(this.url),visualVariables:u.clone(this.visualVariables)})};E.getSymbolAsync=function(){var G=n._asyncToGenerator(function*(I,
L){this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(L));try{var J=yield this._dictionaryPromise}catch(Q){if(f.isAbortError(Q))return this._dictionaryPromise=null}var F={};if(this.fieldMap)for(var K of this._symbolFields){var M=this.fieldMap[K];F[K]=M&&null!==I.attributes[M]&&void 0!==I.attributes[M]?""+I.attributes[M]:""}J=J(F,L);if(!J||"string"!==typeof J)return null;const R=q.numericHash(J).toString();if(F=this._symbolCache.get(R))return F.catch(()=>{this._symbolCache.pop(R)}),
F;K=J.split(";");J=[];F=[];for(const Q of K)if(Q&&0!==Q.length)if(-1!==Q.indexOf("po:")){var T=Q.substr(3).split("|");3===T.length&&(K=T[0],M=T[1],T=T[2],"DashTemplate"===M?T=T.split(" ").map(S=>Number(S)):"Color"===M?(T=(new z(T)).toRgba(),T=[T[0],T[1],T[2],255*T[3]]):T=Number(T),F.push({primitiveName:K,propertyName:M,value:T}))}else if(-1!==Q.indexOf("|"))for(const S of Q.split("|"))this._itemNames.has(S)&&J.push(S);else this._itemNames.has(Q)&&J.push(Q);I=p.isSome(I.geometry)&&(I.geometry.hasZ||
"point"!==I.geometry.type)?!1:!0;L=this._cimPartsToCIMSymbol(J,F,I,L);this._symbolCache.put(R,L,1);return L});return function(I,L){return G.apply(this,arguments)}}();E.collectRequiredFields=function(){var G=n._asyncToGenerator(function*(I,L){yield this.collectVVRequiredFields(I,L);this.scaleExpression&&(yield d.collectArcadeFieldNames(I,L,this.scaleExpression));for(const J in this.fieldMap){const F=this.fieldMap[J];L.has(F)&&I.add(F)}});return function(I,L){return G.apply(this,arguments)}}();E.fetchResources=
function(){var G=n._asyncToGenerator(function*(I){if(this._dictionaryPromise)return this._dictionaryPromise;if(this.url){var L=p.isSome(I)?I.abortOptions:null;L=x(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},...L});var [{data:J}]=yield Promise.all([L,e.loadArcade()]);if(!J)throw this._dictionaryPromise=null,new r("esri.renderers.DictionaryRenderer","Bad dictionary data!");L=J.expression;var F=J.authoringInfo;this._refSymbolUrlTemplate=this.url+"/"+J.cimRefTemplateUrl;
this._itemNames=new Set(J.itemsNames);this._symbolFields=F.symbol;J={};if(this.config){const R=this.config;for(var K in R)J[K]=R[K]}if(F.configuration)for(var M of F.configuration)J.hasOwnProperty(M.name)||(J[M.name]=M.value);K=[];if(p.isSome(I)&&I.fields&&this.fieldMap)for(const R of this._symbolFields){const T=this.fieldMap[R];M=I.fields.filter(Q=>Q.name===T);0<M.length&&K.push({...M[0],name:R})}return this._dictionaryPromise=e.createDictionaryExpression(L,p.isSome(I)?I.spatialReference:null,K,
J).then(R=>{const T={scale:0};return(Q,S)=>{Q=R.repurposeFeature({geometry:null,attributes:Q});T.scale=p.isSome(S)?S.scale:void 0;return R.evaluate({$feature:Q,$view:T})}}).catch(R=>{C.error("Creating dictinoary expression failed:",R);return null})}C.error("no valid URL!")});return function(I){return G.apply(this,arguments)}}();E.getSymbol=function(){return null};E.getSymbols=function(){return[]};E.getAttributeHash=function(){return this.visualVariables&&this.visualVariables.reduce((G,I)=>G+I.getAttributeHash(),
"")};E.getMeshHash=function(){return`${this.url}-${JSON.stringify(this.fieldMap)}`};E.getSymbolFields=function(){return this._symbolFields};E._getSymbolPart=function(){var G=n._asyncToGenerator(function*(I,L){if(this._ongoingRequests.has(I))return this._ongoingRequests.get(I).then(F=>F.data);const J=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,I);L=x(J,{responseType:"json",query:{f:"json"},...L});this._ongoingRequests.set(I,L);try{return(yield L).data}catch(F){return this._ongoingRequests.delete(I),
Promise.reject(F)}});return function(I,L){return G.apply(this,arguments)}}();E._combineSymbolParts=function(G,I,L){if(!G||0===G.length)return null;const J={...G[0]};if(1<G.length){J.symbolLayers=[];for(const F of G)J.symbolLayers.unshift(...F.symbolLayers)}L&&(J.callout=B);return{type:"CIMSymbolReference",symbol:J,primitiveOverrides:I}};E._cimPartsToCIMSymbol=function(){var G=n._asyncToGenerator(function*(I,L,J,F){const K=Array(I.length);for(let M=0;M<I.length;M++)K[M]=this._getSymbolPart(I[M],F);
I=yield Promise.all(K);return new w({data:this._combineSymbolParts(I,L,J)})});return function(I,L,J,F){return G.apply(this,arguments)}}();n._createClass(D,[{key:"arcadeRequired",get:function(){return!0}}]);return D}(k.VisualVariablesMixin(h));c.__decorate([l.property({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],m.prototype,"config",void 0);c.__decorate([l.property({type:Object,json:{write:!0}})],m.prototype,"fieldMap",void 0);c.__decorate([l.property({type:String,
json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],m.prototype,"scaleExpression",void 0);c.__decorate([b.writer("scaleExpression")],m.prototype,"writeData",null);c.__decorate([l.property({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(A){return{enabled:!!A&&!!this.scaleExpression}}}}})],m.prototype,"scaleExpressionTitle",void 0);c.__decorate([l.property({type:String,json:{write:!0}})],m.prototype,"url",void 0);
c.__decorate([b.writer("visualVariables")],m.prototype,"writeVisualVariables",null);return m=y=c.__decorate([a.subclass("esri.renderers.DictionaryRenderer")],m)})},"esri/core/LRUCache":function(){define(["../chunks/_rollupPluginBabelHelpers","./MemCache"],function(n,c){return function(){function z(r,u){this._storage=new c.MemCacheStorage;this._storage.maxSize=r;u&&this._storage.registerRemoveFunc("",u)}var x=z.prototype;x.put=function(r,u,m){this._storage.put(r,u,m,1)};x.pop=function(r){return this._storage.pop(r)};
x.get=function(r){return this._storage.get(r)};x.clear=function(){this._storage.clearAll()};x.destroy=function(){this._storage.destroy()};n._createClass(z,[{key:"maxSize",get:function(){return this._storage.maxSize},set:function(r){this._storage.maxSize=r}}]);return z}()})},"esri/renderers/DotDensityRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/lang ../core/accessorSupport/decorators/aliasOf ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ../layers/support/fieldUtils ./Renderer ./mixins/VisualVariablesMixin ./support/AttributeColorInfo ./support/DotDensityLegendOptions ../symbols/SimpleFillSymbol ../symbols/SimpleLineSymbol".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a,b,d,h){var k;u=k=function(e){function w(C){C=e.call(this,C)||this;C.attributes=null;C.backgroundColor=new z([0,0,0,0]);C.blendDots=!0;C.dotBlendingEnabled=!0;C.dotShape="square";C.dotSize=1;C.legendOptions=null;C.outline=new h;C.dotValue=null;C.referenceDotValue=null;C.referenceScale=null;C.seed=1;C.type="dot-density";return C}n._inheritsLoose(w,e);var y=w.prototype;y.calculateDotValue=function(C){if(null==this.referenceScale)return this.dotValue;C=C/this.referenceScale*
this.dotValue;return 1>C?1:C};y.getSymbol=function(){return new d({outline:this.outline})};y.getSymbolAsync=function(){var C=n._asyncToGenerator(function*(){return this.getSymbol()});return function(){return C.apply(this,arguments)}}();y.getSymbols=function(){return[this.getSymbol()]};y.getAttributeHash=function(){return this.attributes&&this.attributes.reduce((C,B)=>C+B.getAttributeHash(),"")};y.getMeshHash=function(){return JSON.stringify(this.outline)};y.clone=function(){return new k({attributes:x.clone(this.attributes),
backgroundColor:x.clone(this.backgroundColor),dotBlendingEnabled:x.clone(this.dotBlendingEnabled),dotShape:x.clone(this.dotShape),dotSize:x.clone(this.dotSize),dotValue:x.clone(this.dotValue),legendOptions:x.clone(this.legendOptions),outline:x.clone(this.outline),referenceScale:x.clone(this.referenceScale),visualVariables:x.clone(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})};y.getControllerHash=function(){const C=this.attributes.map(A=>A.field||A.valueExpression||
""),B=this.outline&&JSON.stringify(this.outline.toJSON())||"";return`${C}-${B}`};y.collectRequiredFields=function(){var C=n._asyncToGenerator(function*(B,A){yield this.collectVVRequiredFields(B,A);for(const D of this.attributes)D.valueExpression&&(yield l.collectArcadeFieldNames(B,A,D.valueExpression)),D.field&&B.add(D.field)});return function(B,A){return C.apply(this,arguments)}}();return w}(g.VisualVariablesMixin(t));c.__decorate([f.property({type:[a],json:{write:!0}})],u.prototype,"attributes",
void 0);c.__decorate([f.property({type:z,json:{write:!0}})],u.prototype,"backgroundColor",void 0);c.__decorate([f.property({type:Boolean}),r.aliasOf("dotBlendingEnabled")],u.prototype,"blendDots",void 0);c.__decorate([f.property({type:Boolean,json:{write:!0}})],u.prototype,"dotBlendingEnabled",void 0);c.__decorate([f.property({type:String,json:{write:!1}})],u.prototype,"dotShape",void 0);c.__decorate([f.property({type:Number,json:{write:!1}})],u.prototype,"dotSize",void 0);c.__decorate([f.property({type:b,
json:{write:!0}})],u.prototype,"legendOptions",void 0);c.__decorate([f.property({type:h,json:{default:null,write:!0}})],u.prototype,"outline",void 0);c.__decorate([f.property({type:Number,json:{write:!0}})],u.prototype,"dotValue",void 0);c.__decorate([f.property({type:Number}),r.aliasOf("dotValue")],u.prototype,"referenceDotValue",void 0);c.__decorate([f.property({type:Number,json:{write:!0}})],u.prototype,"referenceScale",void 0);c.__decorate([f.property({type:Number,json:{write:!0}})],u.prototype,
"seed",void 0);c.__decorate([p.enumeration({dotDensity:"dot-density"})],u.prototype,"type",void 0);return u=k=c.__decorate([q.subclass("esri.renderers.DotDensityRenderer")],u)})},"esri/renderers/support/AttributeColorInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/ensureType".split(" "),
function(n,c,z,x,r,u,m,v,p,f){var q;const l=r.getLogger("esri.renderers.support.AttributeColorInfo");x=q=function(t){function g(b){b=t.call(this,b)||this;b.color=null;b.field=null;b.label=null;b.valueExpression=null;b.valueExpressionTitle=null;return b}n._inheritsLoose(g,t);var a=g.prototype;a.castField=function(b){return null==b?b:"function"===typeof b?(l.error(".field: field must be a string value"),null):f.ensureString(b)};a.getAttributeHash=function(){return`${this.field}-${this.valueExpression}`};
a.clone=function(){return new q({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})};return g}(x.JSONSupport);c.__decorate([u.property({type:z,json:{type:[Number],write:!0}})],x.prototype,"color",void 0);c.__decorate([u.property({type:String,json:{write:!0}})],x.prototype,"field",void 0);c.__decorate([v.cast("field")],x.prototype,"castField",null);c.__decorate([u.property({type:String,json:{write:!0}})],
x.prototype,"label",void 0);c.__decorate([u.property({type:String,json:{write:!0}})],x.prototype,"valueExpression",void 0);c.__decorate([u.property({type:String,json:{write:!0}})],x.prototype,"valueExpressionTitle",void 0);return x=q=c.__decorate([p.subclass("esri.renderers.support.AttributeColorInfo")],x)})},"esri/renderers/support/DotDensityLegendOptions":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(n,c,z,x,r,u,m,v){var p;z=p=function(f){function q(){var l=f.apply(this,arguments)||this;l.unit=null;return l}n._inheritsLoose(q,f);q.prototype.clone=function(){return new p({unit:this.unit})};return q}(z.JSONSupport);c.__decorate([x.property({type:String,json:{write:!0}})],z.prototype,"unit",void 0);return z=p=c.__decorate([v.subclass("esri.renderers.support.DotDensityLegendOptions")],z)})},"esri/renderers/HeatmapRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../layers/support/fieldUtils ./Renderer ./support/HeatmapColorStop".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t){var g;u=g=function(a){function b(h){h=a.call(this,h)||this;h.blurRadius=10;h.colorStops=[new t({ratio:0,color:new z("rgba(255, 140, 0, 0)")}),new t({ratio:.75,color:new z("rgba(255, 140, 0, 1)")}),new t({ratio:.9,color:new z("rgba(255, 0,   0, 1)")})];h.field=null;h.fieldOffset=0;h.maxPixelIntensity=100;h.minPixelIntensity=0;h.type="heatmap";return h}n._inheritsLoose(b,a);var d=b.prototype;d.collectRequiredFields=function(){var h=n._asyncToGenerator(function*(k,
e){const w=this.field;w&&"string"===typeof w&&q.collectField(k,e,w)});return function(k,e){return h.apply(this,arguments)}}();d.getAttributeHash=function(){return null};d.getMeshHash=function(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`};d.clone=function(){return new g({blurRadius:this.blurRadius,colorStops:x.clone(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity})};return b}(l);c.__decorate([r.property({type:Number,
json:{write:!0}})],u.prototype,"blurRadius",void 0);c.__decorate([r.property({type:[t],json:{write:!0}})],u.prototype,"colorStops",void 0);c.__decorate([r.property({type:String,json:{write:!0}})],u.prototype,"field",void 0);c.__decorate([r.property({type:Number,json:{write:{overridePolicy:(a,b,d)=>({enabled:null==d})}}})],u.prototype,"fieldOffset",void 0);c.__decorate([r.property({type:Number,json:{write:!0}})],u.prototype,"maxPixelIntensity",void 0);c.__decorate([r.property({type:Number,json:{write:!0}})],
u.prototype,"minPixelIntensity",void 0);c.__decorate([p.enumeration({heatmap:"heatmap"})],u.prototype,"type",void 0);return u=g=c.__decorate([f.subclass("esri.renderers.HeatmapRenderer")],u)})},"esri/renderers/support/HeatmapColorStop":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(n,c,z,x,r,u,m,v,p){var f;x=f=function(q){function l(t){t=q.call(this,t)||this;t.color=null;t.ratio=null;return t}n._inheritsLoose(l,q);l.prototype.clone=function(){return new f({color:this.color,ratio:this.ratio})};return l}(x.JSONSupport);c.__decorate([r.property({type:z,json:{write:!0}})],x.prototype,"color",void 0);c.__decorate([r.property({type:Number,json:{write:!0}})],x.prototype,"ratio",void 0);return x=f=c.__decorate([p.subclass("esri.renderers.support.HeatmapColorStop")],x)})},"esri/renderers/SimpleRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./Renderer ./mixins/VisualVariablesMixin ./support/commonProperties".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l){var t;r=t=function(g){function a(d){d=g.call(this,d)||this;d.description=null;d.label=null;d.symbol=null;d.type="simple";return d}n._inheritsLoose(a,g);var b=a.prototype;b.collectRequiredFields=function(){var d=n._asyncToGenerator(function*(h,k){yield Promise.all([this.collectSymbolFields(h,k),this.collectVVRequiredFields(h,k)])});return function(h,k){return d.apply(this,arguments)}}();b.collectSymbolFields=function(){var d=n._asyncToGenerator(function*(h,k){yield Promise.all(this.getSymbols().map(e=>
e.collectRequiredFields(h,k)))});return function(h,k){return d.apply(this,arguments)}}();b.getSymbol=function(d,h){return this.symbol};b.getSymbolAsync=function(){var d=n._asyncToGenerator(function*(h,k){return this.symbol});return function(h,k){return d.apply(this,arguments)}}();b.getSymbols=function(){return this.symbol?[this.symbol]:[]};b.getAttributeHash=function(){return this.visualVariables&&this.visualVariables.reduce((d,h)=>d+h.getAttributeHash(),"")};b.getMeshHash=function(){return this.getSymbols().reduce((d,
h)=>d+=JSON.stringify(h),"")};b.clone=function(){return new t({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:z.clone(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})};n._createClass(a,[{key:"arcadeRequired",get:function(){return this.arcadeRequiredForVisualVariables}}]);return a}(q.VisualVariablesMixin(f));c.__decorate([x.property({type:String,json:{write:!0}})],r.prototype,"description",void 0);c.__decorate([x.property({type:String,
json:{write:!0}})],r.prototype,"label",void 0);c.__decorate([x.property(l.rendererSymbolProperty)],r.prototype,"symbol",void 0);c.__decorate([v.enumeration({simple:"simple"})],r.prototype,"type",void 0);return r=t=c.__decorate([p.subclass("esri.renderers.SimpleRenderer")],r)})},"esri/renderers/UniqueValueRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../symbols ../core/Error ../core/lang ../core/Logger ../core/maybe ../core/object ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/has ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/accessorSupport/diffUtils ../core/accessorSupport/ensureType ../layers/support/fieldUtils ../portal/Portal ./Renderer ./mixins/VisualVariablesMixin ./support/commonProperties ./support/LegendOptions ./support/UniqueValueInfo ../support/arcadeOnDemand ../chunks/persistableUrlUtils ../symbols/support/styleUtils ../symbols/WebStyleSymbol".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a,b,d,h,k,e,w,y,C,B,A,D,E,G){var I;const L=u.getLogger("esri.renderers.UniqueValueRenderer"),J=d.ensureType(B);u=I=function(F){function K(R){R=F.call(this,R)||this;R._valueInfoMap={};R._isDefaultSymbolDerived=!1;R.type="unique-value";R.backgroundFillSymbol=null;R.field=null;R.field2=null;R.field3=null;R.valueExpression=null;R.valueExpressionTitle=null;R.legendOptions=null;R.defaultLabel=null;R.fieldDelimiter=null;R.portal=null;R.styleOrigin=null;R.diff={uniqueValueInfos(T,
Q){if(T||Q){if(!T||!Q)return{type:"complete",oldValue:T,newValue:Q};var S=!1,X={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let aa=0;aa<Q.length;aa++){const ma=T.find(ra=>ra.value===Q[aa].value);ma?b.diff(ma,Q[aa])?(X.changed.push({type:"complete",oldValue:ma,newValue:Q[aa]}),S=!0):X.unchanged.push({oldValue:ma,newValue:Q[aa]}):(X.added.push(Q[aa]),S=!0)}for(let aa=0;aa<T.length;aa++)Q.find(ma=>ma.value===T[aa].value)||(X.removed.push(T[aa]),S=!0);return S?X:void 0}}};R._set("uniqueValueInfos",
[]);return R}n._inheritsLoose(K,F);var M=K.prototype;M.castField=function(R){return null==R||"function"===typeof R?R:d.ensureString(R)};M.writeField=function(R,T,Q,S){"string"===typeof R?T[Q]=R:S&&S.messages?S.messages.push(new x("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):L.error(".field: cannot write field to JSON since it's not a string value")};M.readPortal=function(R,T,Q){return Q.portal||k.getDefault()};M.readStyleOrigin=function(R,T,Q){if(T.styleName)return Object.freeze({styleName:T.styleName});
if(T.styleUrl)return R=D.fromJSON(T.styleUrl,Q),Object.freeze({styleUrl:R})};M.writeStyleOrigin=function(R,T,Q,S){R.styleName?T.styleName=R.styleName:R.styleUrl&&(T.styleUrl=D.toJSON(R.styleUrl,S))};M.addUniqueValueInfo=function(R,T){this.styleOrigin?L.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(R="object"===typeof R?J(R):new B({value:R,symbol:z.ensureType(T)}),this.uniqueValueInfos.push(R),this._valueInfoMap[R.value]=R)};M.removeUniqueValueInfo=
function(R){if(this.styleOrigin)L.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(let T=0;T<this.uniqueValueInfos.length;T++)if(this.uniqueValueInfos[T].value===R+""){delete this._valueInfoMap[R];this.uniqueValueInfos.splice(T,1);break}};M.getUniqueValueInfo=function(){var R=n._asyncToGenerator(function*(T,Q){let S=Q;this.valueExpression&&(m.isNone(Q)||m.isNone(Q.arcade))&&(S={...S,arcade:yield A.loadArcade()});return this._getUniqueValueInfo(T,
S)});return function(T,Q){return R.apply(this,arguments)}}();M.getSymbol=function(R,T){if(this.valueExpression&&(m.isNone(T)||m.isNone(T.arcade)))L.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");else return(R=this._getUniqueValueInfo(R,T))&&R.symbol||this.defaultSymbol};M.getSymbolAsync=function(){var R=n._asyncToGenerator(function*(T,Q){if(this.valueExpression&&(m.isNone(Q)||m.isNone(Q.arcade))){const S=yield A.loadArcade(),{arcadeUtils:X}=S;X.hasGeometryOperations(this.valueExpression)&&
(yield X.enableGeometryOperations());Q={...Q,arcade:S}}return(T=this._getUniqueValueInfo(T,Q))&&T.symbol||this.defaultSymbol});return function(T,Q){return R.apply(this,arguments)}}();M.getSymbols=function(){const R=[];for(const T of this.uniqueValueInfos)T.symbol&&R.push(T.symbol);this.defaultSymbol&&R.push(this.defaultSymbol);return R};M.getAttributeHash=function(){return this.visualVariables&&this.visualVariables.reduce((R,T)=>R+T.getAttributeHash(),"")};M.getMeshHash=function(){const R=JSON.stringify(this.backgroundFillSymbol),
T=JSON.stringify(this.defaultSymbol),Q=this.uniqueValueInfos.reduce((S,X)=>S+X.getMeshHash(),"");return`${R}.${T}.${Q}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`};M.clone=function(){const R=new I({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:r.clone(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:r.clone(this.visualVariables),
legendOptions:r.clone(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:r.clone(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(R._isDefaultSymbolDerived=!0);R._set("portal",this.portal);const T=r.clone(this.uniqueValueInfos);this.styleOrigin&&(R._set("styleOrigin",Object.freeze(r.clone(this.styleOrigin))),Object.freeze(T));R._set("uniqueValueInfos",T);R._updateValueInfoMap();return R};M.collectRequiredFields=function(){var R=n._asyncToGenerator(function*(T,
Q){T=[this.collectVVRequiredFields(T,Q),this.collectSymbolFields(T,Q)];yield Promise.all(T)});return function(T,Q){return R.apply(this,arguments)}}();M.collectSymbolFields=function(){var R=n._asyncToGenerator(function*(T,Q){const S=[...this.getSymbols().map(X=>X.collectRequiredFields(T,Q)),h.collectArcadeFieldNames(T,Q,this.valueExpression)];h.collectField(T,Q,this.field);h.collectField(T,Q,this.field2);h.collectField(T,Q,this.field3);yield Promise.all(S)});return function(T,Q){return R.apply(this,
arguments)}}();M.populateFromStyle=function(){return E.fetchStyle(this.styleOrigin,{portal:this.portal}).then(R=>{const T=[];this._valueInfoMap={};R&&R.data&&Array.isArray(R.data.items)&&R.data.items.forEach(Q=>{var S=new G({styleUrl:R.styleUrl,styleName:R.styleName,portal:this.portal,name:Q.name});this.defaultSymbol||Q.name!==R.data.defaultItem||(this.defaultSymbol=S,this._isDefaultSymbolDerived=!0);S=new B({value:Q.name,symbol:S});T.push(S);this._valueInfoMap[Q.name]=S});this._set("uniqueValueInfos",
Object.freeze(T));!this.defaultSymbol&&this.uniqueValueInfos.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0);return this})};M._updateValueInfoMap=function(){this._valueInfoMap={};this.uniqueValueInfos.forEach(R=>this._valueInfoMap[R.value+""]=R)};M._getUniqueValueInfo=function(R,T){return this.valueExpression?this._getUnqiueValueInfoForExpression(R,T):this._getUnqiueValueInfoForFields(R)};M._getUnqiueValueInfoForExpression=function(R,T){const {viewingMode:Q,
scale:S,spatialReference:X,arcade:aa}=m.unwrapOr(T,{});var ma=this._cache.compiledFunc;T=m.unwrap(aa).arcadeUtils;ma||(ma=T.createSyntaxTree(this.valueExpression),ma=T.createFunction(ma),this._cache.compiledFunc=ma);R=T.executeFunction(ma,T.createExecContext(R,T.getViewInfo({viewingMode:Q,scale:S,spatialReference:X})));return this._valueInfoMap[R+""]};M._getUnqiueValueInfoForFields=function(R){const T=this.field,Q=R.attributes;if("function"!==typeof T&&this.field2){R=this.field2;var S=this.field3;
const X=[];T&&X.push(Q[T]);R&&X.push(Q[R]);S&&X.push(Q[S]);S=X.join(this.fieldDelimiter||"")}else"function"===typeof T?S=T(R):T&&(S=Q[T]);return this._valueInfoMap[S+""]};K.fromPortalStyle=function(R,T){const Q=new I(T&&T.properties);Q._set("styleOrigin",Object.freeze({styleName:R}));Q._set("portal",T&&T.portal||k.getDefault());T=Q.populateFromStyle();T.catch(S=>{L.error(`#fromPortalStyle('${R}'[, ...])`,"Failed to create unique value renderer from style name",S)});return T};K.fromStyleUrl=function(R,
T){T=new I(T&&T.properties);T._set("styleOrigin",Object.freeze({styleUrl:R}));T=T.populateFromStyle();T.catch(Q=>{L.error(`#fromStyleUrl('${R}'[, ...])`,"Failed to create unique value renderer from style URL",Q)});return T};n._createClass(K,[{key:"_cache",get:function(){return{compiledFunc:null}}},{key:"defaultSymbol",set:function(R){this._isDefaultSymbolDerived=!1;this._set("defaultSymbol",R)}},{key:"uniqueValueInfos",set:function(R){this.styleOrigin?L.error("#uniqueValueInfos\x3d","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):
(this._set("uniqueValueInfos",R),this._updateValueInfoMap())}},{key:"arcadeRequired",get:function(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}}]);return K}(w.VisualVariablesMixin(e));c.__decorate([p.property({readOnly:!0})],u.prototype,"_cache",null);c.__decorate([l.enumeration({uniqueValue:"unique-value"})],u.prototype,"type",void 0);c.__decorate([p.property(y.rendererBackgroundFillSymbolProperty)],u.prototype,"backgroundFillSymbol",void 0);c.__decorate([p.property({json:{type:String,
read:{source:"field1"},write:{target:"field1"}}})],u.prototype,"field",void 0);c.__decorate([f.cast("field")],u.prototype,"castField",null);c.__decorate([a.writer("field")],u.prototype,"writeField",null);c.__decorate([p.property({type:String,json:{write:!0}})],u.prototype,"field2",void 0);c.__decorate([p.property({type:String,json:{write:!0}})],u.prototype,"field3",void 0);c.__decorate([p.property({type:String,json:{write:!0}})],u.prototype,"valueExpression",void 0);c.__decorate([p.property({type:String,
json:{write:!0}})],u.prototype,"valueExpressionTitle",void 0);c.__decorate([p.property({type:C["default"],json:{write:!0}})],u.prototype,"legendOptions",void 0);c.__decorate([p.property({type:String,json:{write:!0}})],u.prototype,"defaultLabel",void 0);c.__decorate([p.property(v.deepMerge({...y.rendererSymbolProperty},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],u.prototype,
"defaultSymbol",null);c.__decorate([p.property({type:String,json:{write:!0}})],u.prototype,"fieldDelimiter",void 0);c.__decorate([p.property({type:k,readOnly:!0})],u.prototype,"portal",void 0);c.__decorate([t.reader("portal",["styleName"])],u.prototype,"readPortal",null);c.__decorate([p.property({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],u.prototype,"styleOrigin",void 0);c.__decorate([t.reader("styleOrigin",["styleName","styleUrl"])],u.prototype,"readStyleOrigin",
null);c.__decorate([a.writer("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],u.prototype,"writeStyleOrigin",null);c.__decorate([p.property({type:[B],json:{write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],u.prototype,"uniqueValueInfos",null);return u=I=c.__decorate([g.subclass("esri.renderers.UniqueValueRenderer")],u)})},"esri/renderers/support/UniqueValueInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../symbols ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../symbols/support/jsonUtils".split(" "),
function(n,c,z,x,r,u,m,v,p,f){var q;x=q=function(l){function t(a){a=l.call(this,a)||this;a.description=null;a.label=null;a.symbol=null;a.value=null;return a}n._inheritsLoose(t,l);var g=t.prototype;g.clone=function(){return new q({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})};g.getMeshHash=function(){const a=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${a}`};return t}(x.JSONSupport);c.__decorate([r.property({type:String,
json:{write:!0}})],x.prototype,"description",void 0);c.__decorate([r.property({type:String,json:{write:!0}})],x.prototype,"label",void 0);c.__decorate([r.property({types:z.symbolTypesRenderer,json:{origins:{"web-scene":{types:z.symbolTypesRenderer3D,write:f.write}},write:f.write}})],x.prototype,"symbol",void 0);c.__decorate([r.property({type:[String,Number],json:{type:String,write:{writer:(l,t)=>{t.value=null==l?void 0:l.toString()}}}})],x.prototype,"value",void 0);return x=q=c.__decorate([p.subclass("esri.renderers.support.UniqueValueInfo")],
x)})},"esri/symbols/support/styleUtils":function(){define("exports ../../request ../../symbols ../../core/devEnvironmentUtils ../../core/Error ../../core/urlUtils ../../portal/Portal ../../portal/PortalQueryParams ../../support/featureFlags ../../chunks/persistableUrlUtils ./jsonUtils ./StyleOrigin ./Thumbnail".split(" "),function(n,c,z,x,r,u,m,v,p,f,q,l,t){function g(B,A){return y(B,A).then(D=>({data:D.data,baseUrl:u.removeFile(B),styleUrl:B}))}function a(B,A,D){A=A.portal||m.getDefault();let E;
const G=`${A.url} - ${A.user&&A.user.username} - ${B}`;C[G]||(C[G]=b(B,A,D).then(I=>{E=I;return I.fetchData()}).then(I=>({data:I,baseUrl:E.itemUrl,styleName:B})));return C[G]}function b(B,A,D){return A.load(D).then(()=>{const E=new v({disableExtraQuery:!0,query:`owner:${"esri_en"} AND type:${"Style"} AND typekeywords:"${B}"`});return A.queryItems(E,D)}).then(({results:E})=>{let G=null;const I=B.toLowerCase();if(E&&Array.isArray(E))for(const L of E)if(L.typeKeywords.some(J=>J.toLowerCase()===I)&&"Style"===
L.type&&"esri_en"===L.owner){G=L;break}if(!G)throw new r("symbolstyleutils:style-not-found",`The style '${B}' could not be found`,{styleName:B});return G.load(D)})}function d(B,A,D){return B.styleUrl?g(B.styleUrl,D):B.styleName?a(B.styleName,A,D):Promise.reject(new r("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function h(B,A,D,E,G){var I=B.data;const L={portal:D.portal,url:u.urlToObject(B.baseUrl),origin:"portal-item"};I=I.items.find(R=>
R.name===A);if(!I)return Promise.reject(new r("symbolstyleutils:symbol-name-not-found",`The symbol name '${A}' could not be found`,{symbolName:A}));let J=f.fromJSON(e(I,E),L),F=I.thumbnail&&I.thumbnail.href;const K=I.thumbnail&&I.thumbnail.imageData;x.isDevEnvironment()&&(J=x.adjustStaticAGOUrl(J),F=x.adjustStaticAGOUrl(F));const M={portal:D.portal,url:u.urlToObject(u.removeFile(J)),origin:"portal-item"};return y(J,G).then(R=>{R="cimRef"===E?k(R.data):R.data;if((R=q.fromJSON(R,M))&&z.isSymbol3D(R)){if(F){const T=
f.fromJSON(F,L);R.thumbnail=new t["default"]({url:T})}else K&&(R.thumbnail=new t["default"]({url:`data:image/png;base64,${K}`}));B.styleUrl?R.styleOrigin=new l({portal:D.portal,styleUrl:B.styleUrl,name:A}):B.styleName&&(R.styleOrigin=new l({portal:D.portal,styleName:B.styleName,name:A}))}return R})}function k(B){return null===B||"CIMSymbolReference"===B.type?B:{type:"CIMSymbolReference",symbol:B}}function e(B,A){if("cimRef"===A)return B.cimRef;if(B.formatInfos&&!p.enableWebStyleForceWOSR())for(const D of B.formatInfos)if("gltf"===
D.type)return D.href;return B.webRef}function w(B,A,D){const E="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f\x3djson".replace(/\{SymbolName\}/gi,B.name);return y(E,D).then(G=>{G=k(G.data);return q.fromJSON(G,{portal:A.portal,url:u.urlToObject(u.removeFile(E)),origin:"portal-item"})})}function y(B,A){A={responseType:"json",query:{f:"json"},...A};return c(u.normalize(B),A)}const C={};n.fetchStyle=d;n.fetchSymbolFromStyle=
h;n.resolveWebStyleSymbol=function(B,A,D,E){return B.name?B.styleName&&"Esri2DPointSymbolsStyle"===B.styleName?w(B,A,E):d(B,A,E).then(G=>h(G,B.name,A,D,E)):Promise.reject(new r("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))};n.styleNameFromItem=function(B){for(const A of B.typeKeywords)if(/^Esri.*Style$/.test(A)&&"Esri Style"!==A)return A};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/devEnvironmentUtils":function(){define(["exports",
"./global"],function(n,c){const z=/^devext.arcgis.com$/,x=/^qaext.arcgis.com$/,r=/^[\w-]*\.mapsdevext.arcgis.com$/,u=/^[\w-]*\.mapsqa.arcgis.com$/,m=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,z,x,/^jsapps.esri.com$/,r,u];n.adjustStaticAGOUrl=function(v,p){return v?(p=p||c.location.hostname)?null!=p.match(z)||null!=p.match(r)?v.replace("static.arcgis.com","staticdev.arcgis.com"):null!=p.match(x)||null!=p.match(u)?v.replace("static.arcgis.com","staticqa.arcgis.com"):v:v:v};n.isDevEnvironment=function(v){v=
v||c.location.hostname;return m.some(p=>{var f;return null!=(null==(f=v)?void 0:f.match(p))})};n.isTelemetryDevEnvironment=function(v){v=v||c.location.hostname;return[/^zrh-.+?\.esri\.com$/].concat(m).some(p=>{var f;return null!=(null==(f=v)?void 0:f.match(p))})};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/support/featureFlags":function(){define(["exports","../core/has"],function(n,c){n.disableContextNavigation=()=>!!c("enable-feature:disable-context-navigation");n.enableClouds=()=>
!!c("enable-feature:enable-clouds");n.enableDirect3DObjectFeatureLayerDisplay=()=>!!c("enable-feature:direct-3d-object-feature-layer-display");n.enableNewAtmosphere=()=>!!c("enable-feature:new-atmosphere");n.enableWebStyleForceWOSR=()=>!!c("enable-feature:force-wosr");Object.defineProperty(n,"__esModule",{value:!0})})},"esri/renderers/support/jsonUtils":function(){define("exports ../../core/has ../../core/Error ../../core/object ../../core/Warning ../../core/accessorSupport/extensions/serializableProperty/reader ./types".split(" "),
function(n,c,z,x,r,u,m){function v(q,l){if(!l||"web-scene"!==l.origin)return!0;switch(q.type){case "simple":case "unique-value":case "class-breaks":return!0;case "heatmap":case "dictionary":case "dot-density":return!1;default:return!1}}function p(q,l,t){return q?q&&(q.styleName||q.styleUrl)&&"uniqueValue"!==q.type?(t&&t.messages&&t.messages.push(new r("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+q.type+"'",{definition:q,context:t})),null):f(q,l,
t):null}const f=u.createTypeReader({types:m.rendererTypes});n.fromJSON=function(q,l){return p(q,null,l)};n.read=p;n.write=function(q,l,t,g){q?v(q,g)?q=q.write({},g):(g.messages&&g.messages.push(new z("renderer:unsupported",`Renderer of type '${q.declaredClass}' are not supported in scenes.`,{renderer:q,context:g})),q=null):q=null;q&&x.setDeepValue(t,q,l)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/renderers/support/types":function(){define("exports ../ClassBreaksRenderer ../DictionaryRenderer ../DotDensityRenderer ../HeatmapRenderer ../Renderer ../SimpleRenderer ../UniqueValueRenderer".split(" "),
function(n,c,z,x,r,u,m,v){const p={key:"type",base:u,typeMap:{simple:m,"unique-value":v,"class-breaks":c},errorContext:"renderer"};n.rendererTypes={key:"type",base:u,typeMap:{heatmap:r,simple:m,"unique-value":v,"class-breaks":c,"dot-density":x,dictionary:z},errorContext:"renderer"};n.webSceneRendererTypes=p;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/util/vvFlagUtils":function(){define(["exports","../enums","../visualVariablesUtils"],function(n,c,z){n.getVVFlags=
function(x){if(!x)return c.WGLVVFlag.NONE;let r=0;for(const u of x)"size"===u.type?(x=z.getTypeOfSizeVisualVariable(u),r|=x,"outline"===u.target&&(r|=x<<4)):"color"===u.type?r|=c.WGLVVFlag.COLOR:"opacity"===u.type?r|=c.WGLVVFlag.OPACITY:"rotation"===u.type&&(r|=c.WGLVVFlag.ROTATION);return r};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/pixelBuffering":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/screenUtils ../../../../../symbols/cim/CIMSymbolHelper ../../../../../symbols/cim/Rect ../../../engine/webgl/definitions ../../graphics/graphicsUtils".split(" "),
function(n,c,z,x,r,u,m){function v(e){if(!("visualVariables"in e&&e.hasVisualVariables("size")))return 0;e=e.getVisualVariablesForType("size");if(!e[0])return 0;e=e[0];if("outline"===e.target)return 0;if("stops"===e.transformationType)return e.stops.map(w=>w.size).reduce(b,0);if("clamped-linear"===e.transformationType){let w=-Infinity,y=-Infinity;w="number"===typeof e.maxSize?e.maxSize:e.maxSize.stops.map(C=>C.size).reduce(b,0);y="number"===typeof e.minSize?e.minSize:e.minSize.stops.map(C=>C.size).reduce(b,
0);return Math.max(w,y)}if("real-world-size"===e.transformationType)return 30}function p(){p=c._asyncToGenerator(function*(e,w,y){if(!e||y&&"cluster"===y.type)return 0;if("heatmap"===e.type)return Math.round(3*e.blurRadius);if("dot-density"===e.type)return 0;if("dictionary"===e.type)return"esriGeometryPoint"===w||"esriGeometryMultipoint"===w?100:200;w=e.getSymbols();e=v(e);y=[];for(var C of w)y.push(t(C,e));C=yield Promise.all(y);return z.pt2px(C.reduce(b,0))});return p.apply(this,arguments)}function f(e,
w){return null==e?w:e}function q(e,w){return l.apply(this,arguments)}function l(){l=c._asyncToGenerator(function*(e,w){if("simple-marker"===e.type)return w=Math.max(f(e.size,12),w),a(e)+.707*w;if("picture-marker"===e.type){var y=Math.max(f(e.height,12),w);w=f(e.width,12)*(y/f(e.height,12))/2;y/=2;return a(e)+Math.sqrt(w*w+y*y)}if("text"===e.type){if(y=e.text&&e.text.length){w=[];for(let C=0;C<y;C++)w.push({...k,code:e.text.charCodeAt(C)});w={glyphMosaicItems:w}}else w={glyphMosaicItems:[k]};m.getTextSymbolSize(h,
e.toJSON(),w);return Math.max(Math.abs(h[0]),Math.abs(h[1]))+Math.max(h[2],h[3])}return"simple-line"===e.type?(y=Math.max(f(e.width,.75),w)/2,e.marker?Math.max(6*e.width,2*w):y):"simple-fill"===e.type||"picture-fill"===e.type?Math.max(null==e.outline?0:f(e.outline.width,0),w)/2:"cim"===e.type?(e=x.CIMSymbolHelper.getEnvelope(e.data))?Math.sqrt(e.width*e.width+e.height*e.height):0:"web-style"===e.type?q(yield e.fetchCIMSymbol(),w):0});return l.apply(this,arguments)}function t(e,w){return g.apply(this,
arguments)}function g(){g=c._asyncToGenerator(function*(e,w){return e.type in d?Math.min(yield q(e,w),75):0});return g.apply(this,arguments)}function a(e){const w=f(e.xoffset,0);e=f(e.yoffset,0);return Math.sqrt(w*w+e*e)}function b(e,w){return Math.max(e,w)}const d={"simple-marker":1,"picture-marker":1,text:0,"simple-line":0,"simple-fill":0,"picture-fill":0,cim:1,"web-style":1},h=[0,0,0,0],k={sdf:!0,code:99,metrics:u.AVERAGE_GLYPH_MOSAIC_ITEM.metrics,rect:new r(0,0,24,24),page:0,textureBinding:2};
n.computePxBuffer=function(e,w,y){return p.apply(this,arguments)};n.getPtMaxVVSize=v;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/graphics/graphicsUtils":function(){define("exports ../../../../core/has ../../../../core/maybe ../../../../core/screenUtils ../../../../chunks/mat2d ../../../../chunks/mat2df32 ../../../../chunks/vec2 ../../../../chunks/vec2f32 ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/boundsUtils ../../../../geometry/support/jsonUtils ../../../../geometry/support/normalizeUtils ../../../../geometry/support/normalizeUtilsCommon ../../../../geometry/support/spatialReferenceUtils ../../../../symbols/cim/CIMSymbolHelper ../../engine/webgl/alignmentUtils ../../engine/webgl/mesh/templates/shapingUtils ../../engine/webgl/util/BidiText".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l,t,g,a,b,d,h){function k(M,R,T,Q,S,X){let aa,ma;var ra=x.pt2px(T.xoffset);const za=x.pt2px(T.yoffset),wa=B*T.angle;X*=B;switch(T.type){case "esriSMS":aa=ma=x.pt2px(T.size);break;case "esriPMS":aa=x.pt2px(T.width),ma=x.pt2px(T.height)}.04>S&&(Q=.04*Q/S);T=r.identity(A);r.translate(T,T,m.set(D,M,R));r.rotate(T,T,X-wa);r.scale(T,T,m.set(D,Q,-Q));r.translate(T,T,m.set(D,ra,-za));M=[0,0];m.transformMat2d(M,m.set(D,-.5*aa,-.5*ma),T);R=[0,0];m.transformMat2d(R,m.set(D,-.5*
aa,.5*ma),T);Q=[0,0];m.transformMat2d(Q,m.set(D,.5*aa,-.5*ma),T);ra=[0,0];m.transformMat2d(ra,m.set(D,.5*aa,.5*ma),T);return{rings:[[M,Q,ra,R,M]]}}function e(M,R,T,Q,S,X){var aa=a.CIMSymbolHelper.getEnvelope(T.data);if(!aa)return null;.04>S&&(Q=.04*Q/S);S=x.pt2px(aa.width);var ma=x.pt2px(aa.height);T=x.pt2px(aa.x);aa=x.pt2px(aa.y);const ra=0*B,za=B*X;X=r.identity(A);r.translate(X,X,m.set(D,M,R));r.rotate(X,X,za-ra);r.scale(X,X,m.set(D,Q,Q));M=[0,0];m.transformMat2d(M,m.set(D,T,aa+ma),X);R=[0,0];m.transformMat2d(R,
m.set(D,T,aa),X);Q=[0,0];m.transformMat2d(Q,m.set(D,T+S,aa+ma),X);ma=[0,0];m.transformMat2d(ma,m.set(D,T+S,aa),X);return{rings:[[M,Q,ma,R,M]]}}function w(M,R,T,Q,S,X){var aa=x.pt2px(T.xoffset),ma=x.pt2px(T.yoffset);T=B*T.angle;const ra=B*X;X=r.identity(A);r.translate(X,X,m.set(D,M,R));r.rotate(X,X,ra);r.scale(X,X,m.set(D,S,-S));M=Q[0]+Q[2]/2;R=Q[1]+Q[3]/2;r.translate(X,X,m.set(D,aa,-ma));r.translate(X,X,m.set(D,M,R));r.rotate(X,X,T);r.translate(X,X,m.set(D,-M,-R));aa=[0,0];m.transformMat2d(aa,m.set(D,
Q[0],Q[1]),X);ma=[0,0];m.transformMat2d(ma,m.set(D,Q[0],Q[1]+Q[3]),X);T=[0,0];m.transformMat2d(T,m.set(D,Q[0]+Q[2],Q[1]),X);M=[0,0];m.transformMat2d(M,m.set(D,Q[0]+Q[2],Q[1]+Q[3]),X);return{rings:[[aa,T,M,ma,aa]]}}function y(M){switch(M.symbol.type){case "esriSFS":case "esriPFS":return(M=M.symbol.outline)?M.width:0;case "esriSLS":return x.pt2px(M.symbol.width);case "esriSMS":M=M.symbol;var R=x.pt2px(M.xoffset),T=x.pt2px(M.yoffset);return x.pt2px(M.size)+Math.sqrt(R*R+T*T);case "esriPMS":return M=
M.symbol,R=x.pt2px(M.xoffset),T=x.pt2px(M.yoffset),x.pt2px(Math.max(M.width,M.height))+Math.sqrt(R*R+T*T);case "esriTS":return R=[0,0,0,0],C(R,M.symbol,M.mosaicItem),Math.max(R[2],R[3])+Math.max(Math.abs(R[0]),Math.abs(R[1]));case "expanded-cim":M=a.CIMSymbolHelper.getEnvelope(M.symbol.data);if(-Infinity===M.width||-Infinity===M.height)M.width=10,M.height=10,M.x=0,M.y=0;return x.pt2px(Math.sqrt(M.width*M.width+M.height*M.height));case "composite-symbol":return M.symbol.layers.length?y({symbol:M.symbol.layers[M.symbol.layers.length-
1],mosaicItem:null}):0;default:return 0}}function C(M,R,T){if(!T||0===T.glyphMosaicItems.length)return M;const Q=h.bidiText(R.text)[1];R=d.shapeGlyphs(T.glyphMosaicItems,Q,{scale:x.pt2px(R.font.size)/24,angle:R.angle,xOffset:R.xoffset,yOffset:R.yoffset,hAlign:b.getXAnchorDirection(R.horizontalAlignment||"center"),vAlign:b.getYAnchorDirection(R.verticalAlignment||"baseline"),maxLineWidth:Math.max(32,Math.min(R.lineWidth||512,512)),lineHeight:30*Math.max(.25,Math.min(R.lineHeight||1,4)),decoration:R.font.decoration||
"none",isCIM:!1}).bounds;M[0]=x.pt2px(R.x-R.halfWidth);M[1]=x.pt2px(R.y-R.halfHeight);M[2]=x.pt2px(R.width);M[3]=x.pt2px(R.height);return M}const B=Math.PI/180,A=u.create(),D=v.create(),E=v.create(),G=v.create(),I=v.create(),L=v.create(),J=v.create(),F=v.create(),K=v.create();n.PIXEL_BUFFER=50;n.TILE_SIZE=512;n.getBounds=function(M,R,T,Q,S,X,aa){if(!Q||!T.symbol)return M[0]=M[1]=M[2]=M[3]=0,R[0]=R[1]=R[2]=R[3]=0,M;if(q.isPoint(Q)){var ma=Q.x;const za=Q.y;"esriTS"===T.symbol.type&&0===R[2]&&0===R[3]&&
C(R,T.symbol,T.mosaicItem);Q=ma;ma=za;T=T.symbol;switch(T.type){case "esriSMS":case "esriPMS":var ra=k(Q,ma,T,S,X,0);break;case "esriTS":ra=w(Q,ma,T,R,S,0);break;case "cim":case "CIMSymbolReference":case "expanded-cim":ra=e(Q,ma,T,S,X,0)}R=0;for(S=0;S<ra.rings[0].length-1;S++)T=ra.rings[0][S],T=(Q-T[0])*(Q-T[0])+(ma-T[1])*(ma-T[1]),R=Math.max(R,T);R=Math.sqrt(R);ra=l.normalizeMapX(Q-R,aa);Q=l.normalizeMapX(Q+R,aa);if(ra>Q&&(aa=g.getInfo(aa))){const [wa,va]=aa.valid;ra=wa;Q=va}M[0]=ra;M[1]=ma-R;M[2]=
Q;M[3]=ma+R}else f.getBoundsXY(M,Q),aa=R[0],0===aa&&(aa=y(T),R[0]=aa),aa=S*aa/2,M[0]-=aa,M[1]-=aa,M[2]+=aa,M[3]+=aa;return M};n.getCIMMarkerBounds=e;n.getMarkerSymbolBounds=k;n.getTextSymbolBounds=w;n.getTextSymbolSize=C;n.graphicGeometryToNumber=function(M){switch(z.unwrap(M.geometry).type){case "polyline":return 1;case "polygon":case "extent":return 2}return 0};n.intersectingInternationalDateline=function(M,R){if(!R.isWrappable)return null;const [T,Q]=t.getSpatialReferenceMinMaxX(R);return M[2]>
Q?[p.create([M[0],M[1],Q,M[3]]),p.create([T,M[1],T+M[2]-Q,M[3]])]:M[0]<T?[p.create([T,M[1],M[2],M[3]]),p.create([Q-(T-M[0]),M[1],Q,M[3]])]:null};n.isMarkerSymbol=function(M){return"simple-marker"===M||"picture-marker"===M||"esriSMS"===M||"esriPMS"===M};n.isPointOnPolyline=function(M,R,T,Q){m.set(I,R,T);M=M.paths;let S,X,aa,ma,ra,za,wa,va=Infinity;for(let Ba=0;Ba<M.length;Ba++){const N=M[Ba];if(!(2>N.length))for(let U=1;U<N.length;U++){var Fa=N[U-1][0];X=N[U-1][1];S=N[U][0];aa=N[U][1];ma=Math.min(Fa,
S)-Q;ra=Math.min(X,aa)-Q;za=Math.max(Fa,S)+Q;wa=Math.max(X,aa)+Q;R<ma||R>za||T<ra||T>wa||(m.set(E,Fa,X),m.set(G,S,aa),m.subtract(L,G,E),m.subtract(J,E,I),m.scale(F,L,m.dot(L,J)/m.dot(L,L)),m.subtract(K,J,F),Fa=m.dot(K,K),va>Fa&&(va=Fa))}}return Math.sqrt(va)<=Q};n.isTextSymbol=function(M){return"text"===M||"esriTS"===M};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/rendererUtils":function(){define(["exports","../../../../../core/Logger","../../../../../core/screenUtils"],
function(n,c,z){function x(m){return("size"===m.type||"color"===m.type||"opacity"===m.type)&&null!=m.stops}function r(m){var v=m.type;var p=m.stops;if(8>=p.length)v=p;else if(u.warn(`Found ${p.length} Visual Variable stops, but MapView only supports ${8}. Displayed stops will be simplified.`),16<p.length){{const [h,...k]=p;var f=k.pop(),q=k[0].value,l=k[k.length-1].value,t=(l-q)/6;const e=[];for(;q<l;q+=t){for(var g=0;q>=k[g].value;)g++;var a=k[g],b=p[g-1],d=q-b.value;a=a.value===b.value?1:d/(a.value-
b.value);"color"===v?(b=k[g],g=p[g-1],d=b.color.clone(),d.r=(1-a)*g.color.r+a*d.r,d.g=(1-a)*g.color.g+a*d.g,d.b=(1-a)*g.color.b+a*d.b,d.a=(1-a)*g.color.a+a*d.a,e.push({value:q,color:d,label:b.label})):"size"===v?(b=k[g],d=p[g-1],g=z.toPt(b.size),d=z.toPt(d.size),e.push({value:q,size:(1-a)*d+a*g,label:b.label})):(b=k[g],e.push({value:q,opacity:(1-a)*p[g-1].opacity+a*b.opacity,label:b.label}))}v=[h,...e,f]}}else{{const [h,...k]=p;for(v=k.pop();6<k.length;){f=p=0;for(l=1;l<k.length;l++)t=Math.abs(k[l].value-
k[l-1].value),t>f&&(f=t,p=l);k.splice(p,1)}v=[h,...k,v]}}m.stops=v;return m}const u=c.getLogger("esri.renderers.visualVariables.support.utils");n.simplifyVVRenderer=m=>{if(!("visualVariables"in m&&m.visualVariables&&m.visualVariables.length))return m;m=m.clone();const v=m.visualVariables.map(p=>x(p)?r(p):p);m.visualVariables=v;return m};n.simplifyVisualVariables=function(m){return m.map(v=>x(v)?r(v.clone()):v)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/support/clusterUtils":function(){define("exports ../../../../core/Error ../../../../core/has ../../../../core/Logger ../../../../core/maybe ../../../../core/MD5 ../../../../renderers/visualVariables/SizeVariable ../../../../renderers/visualVariables/support/SizeStop ../../engine/LevelDependentSizeVariable".split(" "),
function(n,c,z,x,r,u,m,v,p){function f(e,w,y){switch(e){case "avg":case "avg_angle":return`cluster_avg_${w}`;case "mode":return`cluster_type_${w}`;case "norm":return e=w.toLowerCase()+",norm:field,"+y.toLowerCase(),"cluster_avg_"+u.createMD5Hash(e)}}function q(e,w){const {name:y,outStatistic:C}=w,{onStatisticField:B,onStatisticValueExpression:A,statisticType:D}=C;A?(w=u.createMD5Hash(A.toLowerCase()),e.push({name:y,outStatistic:{onStatisticField:w,onStatisticValueExpression:A,statisticType:D}})):
B?e.push({name:y,outStatistic:{onStatisticField:B,statisticType:D}}):g.error(new c("mapview-unsupported-field","Unable to handle field",{field:w}))}function l(e,w,y){const C=u.createMD5Hash(w),B="mode"===y?`cluster_type_${C}`:`cluster_avg_${C}`;e.some(A=>A.name===B)||e.push({name:B,outStatistic:{onStatisticField:C,onStatisticValueExpression:w,statisticType:y}});return B}function t(e,w,y,C){if("cluster_count"===w||e.some(A=>A.name===w))return w;const B=f(y,w,C);e.some(A=>A.name===B)||("norm"===y?e.push({name:B,
outStatistic:{onStatisticField:w,onStatisticNormalizationField:C,statisticType:y}}):e.push({name:B,outStatistic:{onStatisticField:w,statisticType:y}}));return B}const g=x.getLogger("esri.views.2d.layers.support.clusterUtils");z.add("esri-cluster-arcade-enabled",!0);const a=z("esri-cluster-arcade-enabled"),b=e=>{for(const w of e)if("size"===w.type)return w;return null},d=e=>{for(const w of e)if("cluster_count"===w.field)return!0;return!1},h=(e,w)=>{const y=[new v({value:0,size:0}),new v({value:1})];
if(r.isNone(w))return new m({field:"cluster_count",stops:[...y,new v({value:2,size:0})]});const C=Object.keys(w).reduce((B,A)=>({...B,[A]:[...y,new v({value:Math.max(2,w[A].minValue),size:e.clusterMinSize}),new v({value:Math.max(3,w[A].maxValue),size:e.clusterMaxSize})]}),{});return new p.LevelDependentSizeVariable({field:"cluster_count",levels:C})},k=e=>{const w=y=>g.error(new c("Unsupported-renderer",y,{renderer:e}));if("unique-value"===e.type){if(e.field2||e.field3)return w("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),
!1}else if("class-breaks"===e.type){if(e.normalizationField){const y=e.normalizationType;if("field"!==y)return w(`FeatureReductionCluster does not support a normalizationType of ${y}`),!1}}else if("simple"!==e.type)return w(`FeatureReductionCluster does not support renderers of type ${e.type}`),!1;if(!a){if("valueExpression"in e&&e.valueExpression)return w("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in
e&&e.visualVariables||[]).some(y=>!!("valueExpression"in y&&y.valueExpression)))return w("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};n.createClusterCountSizeVariable=h;n.createClusterRenderer=(e,w,y,C)=>{w=w.clone();if(!k(w))return w;if(y.fields)for(var B of y.fields)q(e,B);if("visualVariables"in w){B=(w.visualVariables||[]).filter(D=>"$view.scale"!==D.valueExpression);const A=b(B);B.forEach(D=>
{"rotation"===D.type?D.field?D.field=t(e,D.field,"avg_angle"):D.valueExpression&&(D.field=l(e,D.valueExpression,"avg_angle"),D.valueExpression=null):D.normalizationField?(D.field=t(e,D.field,"norm",D.normalizationField),D.normalizationField=null):D.field?D.field=t(e,D.field,"avg"):(D.field=l(e,D.valueExpression,"avg"),D.valueExpression=null)});r.isNone(A)&&!d(B)&&(B.push(h(y,C)),w.dynamicClusterSize=!0);w.visualVariables=B}switch(w.type){case "unique-value":w.field?w.field=t(e,w.field,"mode"):w.valueExpression&&
(w.field=l(e,w.valueExpression,"mode"),w.valueExpression=null);break;case "class-breaks":w.normalizationField?(w.field=t(e,w.field,"norm",w.normalizationField),w.normalizationField=null):w.field?w.field=t(e,w.field,"avg"):(w.field=l(e,w.valueExpression,"avg"),w.valueExpression=null)}return w};n.findSizeVV=b;n.hasClusterCountVV=d;n.isClusterCompatibleRenderer=k;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/MD5":function(){define(["exports"],function(n){function c(v,p){const f=(v&65535)+
(p&65535);return(v>>16)+(p>>16)+(f>>16)<<16|f&65535}function z(v,p,f,q,l,t){v=c(c(p,v),c(q,t));return c(v<<l|v>>>32-l,f)}function x(v,p,f,q,l,t,g){return z(p&f|~p&q,v,p,l,t,g)}function r(v,p,f,q,l,t,g){return z(p&q|f&~q,v,p,l,t,g)}function u(v,p,f,q,l,t,g){return z(f^(p|~q),v,p,l,t,g)}const m={Base64:0,Hex:1,String:2,Raw:3};n.createMD5Hash=function(v,p=m.Hex){p=p||m.Base64;var f=[];for(let l=0,t=8*v.length;l<t;l+=8)f[l>>5]|=(v.charCodeAt(l/8)&255)<<l%32;{v=8*v.length;f[v>>5]|=128<<v%32;f[(v+64>>>
9<<4)+14]=v;v=1732584193;var q=-271733879;let l=-1732584194,t=271733878;for(let g=0;g<f.length;g+=16){const a=v,b=q,d=l,h=t;v=x(v,q,l,t,f[g+0],7,-680876936);t=x(t,v,q,l,f[g+1],12,-389564586);l=x(l,t,v,q,f[g+2],17,606105819);q=x(q,l,t,v,f[g+3],22,-1044525330);v=x(v,q,l,t,f[g+4],7,-176418897);t=x(t,v,q,l,f[g+5],12,1200080426);l=x(l,t,v,q,f[g+6],17,-1473231341);q=x(q,l,t,v,f[g+7],22,-45705983);v=x(v,q,l,t,f[g+8],7,1770035416);t=x(t,v,q,l,f[g+9],12,-1958414417);l=x(l,t,v,q,f[g+10],17,-42063);q=x(q,l,
t,v,f[g+11],22,-1990404162);v=x(v,q,l,t,f[g+12],7,1804603682);t=x(t,v,q,l,f[g+13],12,-40341101);l=x(l,t,v,q,f[g+14],17,-1502002290);q=x(q,l,t,v,f[g+15],22,1236535329);v=r(v,q,l,t,f[g+1],5,-165796510);t=r(t,v,q,l,f[g+6],9,-1069501632);l=r(l,t,v,q,f[g+11],14,643717713);q=r(q,l,t,v,f[g+0],20,-373897302);v=r(v,q,l,t,f[g+5],5,-701558691);t=r(t,v,q,l,f[g+10],9,38016083);l=r(l,t,v,q,f[g+15],14,-660478335);q=r(q,l,t,v,f[g+4],20,-405537848);v=r(v,q,l,t,f[g+9],5,568446438);t=r(t,v,q,l,f[g+14],9,-1019803690);
l=r(l,t,v,q,f[g+3],14,-187363961);q=r(q,l,t,v,f[g+8],20,1163531501);v=r(v,q,l,t,f[g+13],5,-1444681467);t=r(t,v,q,l,f[g+2],9,-51403784);l=r(l,t,v,q,f[g+7],14,1735328473);q=r(q,l,t,v,f[g+12],20,-1926607734);v=z(q^l^t,v,q,f[g+5],4,-378558);t=z(v^q^l,t,v,f[g+8],11,-2022574463);l=z(t^v^q,l,t,f[g+11],16,1839030562);q=z(l^t^v,q,l,f[g+14],23,-35309556);v=z(q^l^t,v,q,f[g+1],4,-1530992060);t=z(v^q^l,t,v,f[g+4],11,1272893353);l=z(t^v^q,l,t,f[g+7],16,-155497632);q=z(l^t^v,q,l,f[g+10],23,-1094730640);v=z(q^l^
t,v,q,f[g+13],4,681279174);t=z(v^q^l,t,v,f[g+0],11,-358537222);l=z(t^v^q,l,t,f[g+3],16,-722521979);q=z(l^t^v,q,l,f[g+6],23,76029189);v=z(q^l^t,v,q,f[g+9],4,-640364487);t=z(v^q^l,t,v,f[g+12],11,-421815835);l=z(t^v^q,l,t,f[g+15],16,530742520);q=z(l^t^v,q,l,f[g+2],23,-995338651);v=u(v,q,l,t,f[g+0],6,-198630844);t=u(t,v,q,l,f[g+7],10,1126891415);l=u(l,t,v,q,f[g+14],15,-1416354905);q=u(q,l,t,v,f[g+5],21,-57434055);v=u(v,q,l,t,f[g+12],6,1700485571);t=u(t,v,q,l,f[g+3],10,-1894986606);l=u(l,t,v,q,f[g+10],
15,-1051523);q=u(q,l,t,v,f[g+1],21,-2054922799);v=u(v,q,l,t,f[g+8],6,1873313359);t=u(t,v,q,l,f[g+15],10,-30611744);l=u(l,t,v,q,f[g+6],15,-1560198380);q=u(q,l,t,v,f[g+13],21,1309151649);v=u(v,q,l,t,f[g+4],6,-145523070);t=u(t,v,q,l,f[g+11],10,-1120210379);l=u(l,t,v,q,f[g+2],15,718787259);q=u(q,l,t,v,f[g+9],21,-343485551);v=c(v,a);q=c(q,b);l=c(l,d);t=c(t,h)}f=[v,q,l,t]}switch(p){case m.Raw:return f;case m.Hex:p=[];for(let l=0,t=4*f.length;l<t;l++)p.push("0123456789abcdef".charAt(f[l>>2]>>l%4*8+4&15)+
"0123456789abcdef".charAt(f[l>>2]>>l%4*8&15));return p=p.join("");case m.String:p=[];for(let l=0,t=32*f.length;l<t;l+=8)p.push(String.fromCharCode(f[l>>5]>>>l%32&255));return p=p.join("");case m.Base64:p=[];for(let l=0,t=4*f.length;l<t;l+=3)for(v=(f[l>>2]>>l%4*8&255)<<16|(f[l+1>>2]>>(l+1)%4*8&255)<<8|f[l+2>>2]>>(l+2)%4*8&255,q=0;4>q;q++)8*l+6*q>32*f.length?p.push("\x3d"):p.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(v>>6*(3-q)&63));return p=p.join("")}};n.outputTypes=
m;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/LevelDependentSizeVariable":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/has ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ../../../renderers/visualVariables/SizeVariable ../../../renderers/visualVariables/support/sizeVariableUtils".split(" "),
function(n,c,z,x,r,u,m,v,p,f,q,l){var t;n.LevelDependentSizeVariable=t=function(g){function a(){return g.apply(this,arguments)||this}c._inheritsLoose(a,g);var b=a.prototype;b.writeLevels=function(d,h,k){for(const e in d){h.stops=this.levels[e];break}};b.clone=function(){return new t({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:l.isSizeVariable(this.maxSize)?this.maxSize.clone():this.maxSize,
minDataValue:this.minDataValue,minSize:l.isSizeVariable(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(d=>d.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone(),levels:x.clone(this.levels)})};return a}(q);z.__decorate([r.property()],n.LevelDependentSizeVariable.prototype,"levels",void 0);
z.__decorate([f.writer("levels")],n.LevelDependentSizeVariable.prototype,"writeLevels",null);n.LevelDependentSizeVariable=t=z.__decorate([p.subclass("esri.views.2d.engine.LevelDependentSizeVariable")],n.LevelDependentSizeVariable);Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/support/util":function(){define(["exports","../../../../core/jsonMap"],function(n,c){const z=new c.JSONMap({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",
esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});n.analyzeRings=function(x,r,u){const m=[],v=[];let p=0,f=0;for(const q of x){x=f;let l=q[0][0],t=q[0][1];m[f++]=l;m[f++]=t;let g=0;for(let a=1;a<q.length;++a){const b=l,d=t;l=q[a][0];t=q[a][1];g+=t*b-l*d;m[f++]=l;m[f++]=t}r(g/2);0<g?(0<x-p&&(u(p,x,m,v),p=x),v.length=0):0>g?0<x-p?v.push(.5*(x-p)):f=x:f=x}0<f-p&&u(p,f,m,v)};n.toJSONGeometryType=function(x){return z.toJSON(x)};Object.defineProperty(n,"__esModule",{value:!0})})},
"esri/views/2d/engine/webgl/util/Matcher":function(){define("require exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Error ../../../../../core/Logger ../../../../../core/LRUCache ../../../../../support/arcadeOnDemand ../../../../../symbols/cim/cimSymbolUtils ../../../../../symbols/cim/utils ../../../arcade/callExpressionWithFeature ../../../layers/features/schemaUtils".split(" "),function(n,c,z,x,r,u,m,v,p,f,q){function l(y,C,B){return t.apply(this,arguments)}function t(){t=
z._asyncToGenerator(function*(y,C,B){switch(y.type){case "simple":return d.fromBasicRenderer(y,C,B);case "map":return e.fromUVRenderer(y,C,B);case "interval":return k.fromCBRenderer(y,C,B);case "dictionary":return w.fromDictionaryRenderer(y,C,B);case "subtype":return h.fromSubtypes(y,C,B)}});return t.apply(this,arguments)}function g(y,C){return a.apply(this,arguments)}function a(){a=z._asyncToGenerator(function*(y,C){const B=y||1;if("number"===typeof B)return(D,E,G)=>B;const A=yield m.createRendererExpression(B,
C.spatialReference,C.fields);return(D,E,G)=>f(A,D,{$view:G},C.geometryType,E)||1});return a.apply(this,arguments)}const b=r.getLogger("esri/views/2d/engine/webgl/util/Matcher");let d=function(){function y(){this.type="feature";this._defaultResult=null}y.fromBasicRenderer=function(){var B=z._asyncToGenerator(function*(A,D,E){const G=new y;A.symbol&&(A=yield v.expandSymbol(A.symbol,E),D=D.createTemplateGroup(A,null),G.setDefault(D));return G});return function(A,D,E){return B.apply(this,arguments)}}();
var C=y.prototype;C.size=function(){return 1};C.getDefault=function(){return this._defaultResult};C.setDefault=function(B){this._defaultResult=B};C.match=function(B,A,D,E,G){return this.getDefault()};C.analyze=function(){var B=z._asyncToGenerator(function*(A,D,E,G,I){return null});return function(A,D,E,G,I){return B.apply(this,arguments)}}();return y}(),h=function(y){function C(B,A){var D=y.call(this)||this;D._subMatchers=B;D._subtypeField=A;return D}z._inheritsLoose(C,y);C.fromSubtypes=function(){var B=
z._asyncToGenerator(function*(A,D,E){const G=new Map,I=[];for(const L in A.renderers){const J=parseInt(L,10),F=l(A.renderers[L],D,E).then(K=>G.set(J,K));I.push(F)}yield Promise.all(I);return new C(G,A.subtypeField)});return function(A,D,E){return B.apply(this,arguments)}}();C.prototype.match=function(B,A,D,E,G){var I=A.readAttribute(this._subtypeField);return(I=this._subMatchers.get(I))?I.match(B,A,D,E,G):null};return C}(d),k=function(y){function C(A,D,E,G){var I=y.call(this)||this;I.type="interval";
I._intervals=[];I._isMaxInclusive=D;I._fieldIndex=G;I._field=A;I._normalizationInfo=E;return I}z._inheritsLoose(C,y);C.fromCBRenderer=function(){var A=z._asyncToGenerator(function*(D,E,G){const {isMaxInclusive:I,normalizationField:L,normalizationTotal:J,normalizationType:F}=D,K=new C(D.field,I,{normalizationField:L,normalizationTotal:J,normalizationType:F},D.fieldIndex),M=yield v.expandSymbol(D.backgroundFillSymbol,G);yield Promise.all(D.intervals.map(function(){var R=z._asyncToGenerator(function*(T){var Q=
yield v.expandSymbol(T.symbol,G);Q=yield E.createTemplateGroup(Q,M);K.add({min:T.min,max:T.max},Q)});return function(T){return R.apply(this,arguments)}}()));if(D=yield v.expandSymbol(D.defaultSymbol,G))D=yield E.createTemplateGroup(D,M),K.setDefault(D);return K});return function(D,E,G){return A.apply(this,arguments)}}();var B=C.prototype;B.add=function(A,D){this._intervals.push({interval:A,result:D});this._intervals.sort((E,G)=>E.interval.min-G.interval.min)};B.size=function(){return y.prototype.size.call(this)+
this._intervals.length};B.match=function(A,D,E,G,I){if(null==this._fieldIndex&&!this._field)return this.getDefault();A=null!=this._fieldIndex?D.getComputedNumericAtIndex(this._fieldIndex):this._getValueFromField(D);if(!A&&(null===A||void 0===A||isNaN(A)))return this.getDefault();for(D=0;D<this._intervals.length;D++){const {interval:L,result:J}=this._intervals[D];E=this._isMaxInclusive?A<=L.max:A<L.max;if(A>=L.min&&E)return J}return this.getDefault()};B._needsNormalization=function(){const A=this._normalizationInfo;
return A&&(A.normalizationField||A.normalizationTotal||A.normalizationType)};B._getValueFromField=function(A){const D=A.readAttribute(this._field);if(!this._needsNormalization()||null==D)return D;const {normalizationField:E,normalizationTotal:G,normalizationType:I}=this._normalizationInfo;A=!!E&&A.readAttribute(E);if(I)switch(I){case "esriNormalizeByField":return(A||void 0)&&D/A;case "esriNormalizeByLog":return Math.log(D)*Math.LOG10E;case "esriNormalizeByPercentOfTotal":return D/G*100;default:b.error(`Found unknown normalization type: ${I}`)}else b.error("Normalization is required, but no type was set!")};
return C}(d),e=function(y){function C(A,D,E){var G=y.call(this)||this;G.type="map";G._nullResult=null;G._resultsMap=new Map;G._fieldsIndex=E;G._fields=A;G._seperator=D||"";return G}z._inheritsLoose(C,y);C.fromUVRenderer=function(){var A=z._asyncToGenerator(function*(D,E,G){const I=D.fieldDelimiter,L=[D.field];D.field2&&L.push(D.field2);D.field3&&L.push(D.field3);const J=yield v.expandSymbol(D.backgroundFillSymbol,G),F=new C(L,I,D.fieldIndex);yield Promise.all(D.map.map(function(){var K=z._asyncToGenerator(function*(M){var R=
yield v.expandSymbol(M.symbol,G);R=yield E.createTemplateGroup(R,J);"\x3cNull\x3e"===M.value?F.setNullResult(R):F.add(M.value,R)});return function(M){return K.apply(this,arguments)}}()));if(D=yield v.expandSymbol(D.defaultSymbol,G))D=yield E.createTemplateGroup(D,J),F.setDefault(D);return F});return function(D,E,G){return A.apply(this,arguments)}}();var B=C.prototype;B.setNullResult=function(A){this._nullResult=A};B.add=function(A,D){this._resultsMap.set(A.toString(),D)};B.size=function(){return y.prototype.size.call(this)+
this._resultsMap.size};B.match=function(A,D,E,G,I){if(null==this._fieldsIndex&&!this._fields)return this.getDefault();A=null!=this._fieldsIndex?D.getComputedStringAtIndex(this._fieldsIndex):this._getValueFromFields(D);if(null!==this._nullResult&&(null==A||""===A||"\x3cNull\x3e"===A))return this._nullResult;if(!A&&null==A)return this.getDefault();A=A.toString();return this._resultsMap.has(A)?this._resultsMap.get(A):this.getDefault()};B._getValueFromFields=function(A){const D=[];for(const E of this._fields){const G=
A.readAttribute(E);null==G||""===G?D.push("\x3cNull\x3e"):D.push(G)}return D.join(this._seperator)};return C}(d),w=function(y){function C(A,D,E,G){var I=y.call(this)||this;I.type="dictionary";I._groupIdCache=new u(100);I._renderer=A;I._fieldMap=A.fieldMap;I._symbolFields=A.getSymbolFields();I._templates=D;I._info=E;I._scaleFn=G;return I}z._inheritsLoose(C,y);C.fromDictionaryRenderer=function(){var A=z._asyncToGenerator(function*(D,E,G){D=(yield new Promise(function(L,J){n(["../../../../../renderers/DictionaryRenderer"],
function(F){L(Object.freeze({__proto__:null,default:F}))},J)})).default.fromJSON(D.renderer);yield D.fetchResources({spatialReference:G.spatialReference,fields:G.fields});const I=yield g(D.scaleExpression,G);return new C(D,E,G,I)});return function(D,E,G){return A.apply(this,arguments)}}();var B=C.prototype;B._analyzeFeature=function(){var A=z._asyncToGenerator(function*(D,E,G,I){D=D.readLegacyFeature();const L=this._scaleFn(D,E,G);E=this._attributeHash(D)+"-"+L;const J=this._groupIdCache.get(E);if(J)return J;
G=yield this._renderer.getSymbolAsync(D,{...G,spatialReference:this._info.spatialReference,abortOptions:I,fields:this._info.fields});G=q.createSymbolSchema(G,this._renderer);I=v.expandSymbol(G,this._info,I).then(F=>{if("expanded-cim"!==F.type)return b.error(new x("mapview-bad-type",`Found unexpected type ${F.type} in dictionary response`)),null;F.hash+="-"+L;for(const K of F.layers)K.scaleFactor=L,K.templateHash+="-"+L,"text"===K.type&&"string"===typeof K.text&&-1<K.text.indexOf("[")&&(K.text=p.createLabelOverrideFunction(this._fieldMap,
K.text,K.cim.textCase));return this._templates.createTemplateGroup(F,null)});this._groupIdCache.put(E,I,1);return I});return function(D,E,G,I){return A.apply(this,arguments)}}();B.analyze=function(){var A=z._asyncToGenerator(function*(D,E,G,I,L){D=E.getCursor();for(E=[];D.next();)E.push(this._analyzeFeature(D,G,I,L));return Promise.all(E)});return function(D,E,G,I,L){return A.apply(this,arguments)}}();B.match=function(A,D,E,G,I){return null};B._attributeHash=function(A){let D="";for(const E of this._symbolFields){const G=
this._fieldMap[E];G&&(D+=A.attributes[G]+"-")}return D};return C}(d);c.DictionaryMatcher=w;c.FeatureMatcher=d;c.IntervalMatcher=k;c.MapMatcher=e;c.SubtypeMatcher=h;c.createMatcher=l;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/symbols/cim/cimSymbolUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../symbols ./cimAnalyzer ./ExpandedCIM ../WebStyleSymbol".split(" "),function(n,c,z,x,r,u){z=function(){var p=c._asyncToGenerator(function*(f,q,l){return Promise.all(f.map(t=>
v(t,q,l)))});return function(f,q,l){return p.apply(this,arguments)}}();const m=function(){var p=c._asyncToGenerator(function*(f,q){return new r.ExpandedCIM(yield x.analyzeCIMSymbol(f.data,q),f.data,f.rendererKey,f.maxVVSize)});return function(f,q){return p.apply(this,arguments)}}(),v=function(){var p=c._asyncToGenerator(function*(f,q,l){return f?"cim"===f.type?m(f,q):"web-style"===f.type?(f={type:"cim",data:(yield u.fromJSON(f).fetchCIMSymbol(l)).data,rendererKey:f.rendererKey,maxVVSize:f.maxVVSize},
m(f,q)):f:null});return function(f,q,l){return p.apply(this,arguments)}}();n.expandSymbol=v;n.expandSymbols=z;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/ExpandedCIM":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../views/2d/engine/webgl/enums","../../views/2d/engine/webgl/materialKey/MaterialKey"],function(n,c,z,x){const r={marker:z.WGLGeometryType.MARKER,fill:z.WGLGeometryType.FILL,line:z.WGLGeometryType.LINE,text:z.WGLGeometryType.TEXT};z=function(){function u(m,
v,p,f){const q={minScale:null==v?void 0:v.minScale,maxScale:null==v?void 0:v.maxScale};var l=q.minScale||q.maxScale?q.minScale+"-"+q.maxScale:"";this.layers=m;this.data=v;this.hash=this._createHash()+l;this.rendererKey=p;for(const t of m)t.materialKey=x.createMaterialKey(r[t.type],this.rendererKey,!1,!1),t.maxVVSize=f,t.scaleInfo=q,t.templateHash+=l}u.prototype._createHash=function(){let m="";for(const v of this.layers)m+=v.templateHash;return m};c._createClass(u,[{key:"type",get:function(){return"expanded-cim"}}]);
return u}();n.ExpandedCIM=z;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/processors/BaseProcessor":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/HandleOwner ../../../../../core/accessorSupport/decorators/property ../../../../../core/has ../../../../../core/accessorSupport/ensureType ../../../../../core/Logger ../../../../../core/accessorSupport/decorators/subclass".split(" "),function(n,
c,z,x,r,u,m,v){z=function(p){function f(){return p.apply(this,arguments)||this}n._inheritsLoose(f,p);var q=f.prototype;q.initialize=function(){};q.destroy=function(){};n._createClass(f,[{key:"supportsTileUpdates",get:function(){return!1}},{key:"spatialReference",get:function(){const l=this.get("tileStore.tileScheme.spatialReference");return l&&l.toJSON()||null}}]);return f}(z.HandleOwner);c.__decorate([x.property({readOnly:!0})],z.prototype,"supportsTileUpdates",null);c.__decorate([x.property({constructOnly:!0})],
z.prototype,"remoteClient",void 0);c.__decorate([x.property({constructOnly:!0})],z.prototype,"service",void 0);c.__decorate([x.property()],z.prototype,"spatialReference",null);c.__decorate([x.property({constructOnly:!0})],z.prototype,"tileInfo",void 0);c.__decorate([x.property({constructOnly:!0})],z.prototype,"tileStore",void 0);return z=c.__decorate([v.subclass("esri.views.2d.layers.features.processors.BaseProcessor")],z)})},"*noref":1}});
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/HandleOwner ../../../../core/has ../../../../core/accessorSupport/decorators/property ../../../../core/accessorSupport/ensureType ../../../../core/Logger ../../../../core/accessorSupport/decorators/subclass ../../../../layers/support/TileInfo ./processors ./controllers/FeatureController2D ./support/TileStore ./support/UpdateToken ../../tiling/TileInfoView".split(" "),function(n,c,z,x,r,u,m,v,
p,f,q,l,t,g,a){const b=new Set;x=function(d){function h(){var e=d.apply(this,arguments)||this;e.controller=null;e.processor=null;e.remoteClient=null;e.tileStore=null;e.service=null;e.viewState=null;return e}c._inheritsLoose(h,d);var k=h.prototype;k.initialize=function(){this.handles.add(this.watch("updating",e=>{this.remoteClient.invoke("setUpdating",e).catch(w=>{})}))};k.destroy=function(){var e,w,y;null==(e=this.controller)?void 0:e.destroy();null==(w=this.processor)?void 0:w.destroy();null==(y=
this.tileStore)?void 0:y.destroy();this.controller=this.processor=this.tileStore=this.remoteClient=null};k.startup=function(){var e=c._asyncToGenerator(function*({service:w,config:y,tileInfo:C,tiles:B}){this.service=w;this.tileStore||(w=new a(f.fromJSON(C)),this.tileStore=new t(w));this.tileStore.clear();yield this._createProcessorAndController(y);yield this.update({config:y},!0);this.tileStore.updateTiles(B)});return function(w){return e.apply(this,arguments)}}();k.updateTiles=function(){var e=c._asyncToGenerator(function*(w){this.tileStore.updateTiles(w)});
return function(w){return e.apply(this,arguments)}}();k.update=function(){var e=c._asyncToGenerator(function*({config:w},y=!1){const C=g.UpdateToken.empty();y||this.controller.pause();yield Promise.all([this.processor.update(C,w),this.controller.update(C,w)]);return C.toJSON()});return function(w){return e.apply(this,arguments)}}();k.applyUpdate=function(){var e=c._asyncToGenerator(function*(w){return this.controller.applyUpdate(g.UpdateToken.create(w))});return function(w){return e.apply(this,arguments)}}();
k._createProcessorAndController=function(){var e=c._asyncToGenerator(function*(w){yield Promise.all([this._handleControllerConfig(w),this._handleProcessorConfig(w)]);this.controller.processor=this.processor});return function(w){return e.apply(this,arguments)}}();k._handleControllerConfig=function(){var e=c._asyncToGenerator(function*(w){w=yield this._createController(this.service,w);yield w.startup();return w});return function(w){return e.apply(this,arguments)}}();k._handleProcessorConfig=function(){var e=
c._asyncToGenerator(function*(w){return this._createProcessor(this.service,w)});return function(w){return e.apply(this,arguments)}}();k._createController=function(){var e=c._asyncToGenerator(function*(w,y){this.controller&&this.controller.destroy();const {tileStore:C,remoteClient:B}=this;return this.controller=w=new l({service:w,config:y,tileStore:C,remoteClient:B})});return function(w,y){return e.apply(this,arguments)}}();k._createProcessor=function(){var e=c._asyncToGenerator(function*(w,y){const C=
(yield q.loadProcessorModule(y.schema.processors[0].type)).default,{remoteClient:B,tileStore:A}=this;w=new C({service:w,config:y,tileStore:A,remoteClient:B});this.processor&&this.processor.destroy();return this.processor=w});return function(w,y){return e.apply(this,arguments)}}();c._createClass(h,[{key:"updating",get:function(){return!this.controller||this.controller.updating}}]);return h}(x.HandleOwner);z.__decorate([u.property()],x.prototype,"controller",void 0);z.__decorate([u.property()],x.prototype,
"processor",void 0);z.__decorate([u.property()],x.prototype,"updating",null);z.__decorate([u.property()],x.prototype,"viewState",void 0);x=z.__decorate([p.subclass("esri.views.2d.layers.features.Pipeline")],x);n["default"]=x;n.getInstances=function(){return b};Object.defineProperty(n,"__esModule",{value:!0})});