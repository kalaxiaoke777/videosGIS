// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.21/esri/copyright.txt for details.
//>>built
define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../../../../../layers/graphics/featureConversionUtils ../../enums ../../number ../../materialKey/MaterialKey ./templateUtils".split(" "),function(u,v,q,w,x,y,m){return z=>function(r){function n(...a){a=r.call(this,...a)||this;a.forceLibtess=!1;a.geometryType=w.WGLGeometryType.FILL;return a}u._inheritsLoose(n,r);var h=n.prototype;h._write=function(a,c,e){const d="esriGeometryPoint"===c.geometryType,b=y.FillMaterialKey.load(this._materialKey);
a.recordStart(c.getDisplayId(),this._materialKey,this.geometryType,b.dotDensity,d);this._writeGeometry(a,c,b,e,d);a.recordEnd()};h._writeGeometry=function(a,c,e,d,b){b=this._getGeometry(c,d,b);if(!v.isNone(b))if(d=a.indexCount(),100<b.maxLength||this.forceLibtess||!m.triangulate(a,b)){b=m.triangulateLibtess(a,b);var g=a.indexCount();d!==g&&this._writeVertices(a,c,b,[b.length/2],e)}else g=a.indexCount(),d!==g&&this._writeVertices(a,c,b.coords,b.lengths,e)};h._writeVertices=function(a,c,e,d,b){const g=
c.getDisplayId();let p=0;var f=d.reduce((k,l)=>k+l);a.vertexEnsureSize((b.dotDensity?4:10)*f);for(const k of d){f=p;for(d=k+p;f<d;f++){const l=e[2*f],t=e[2*f+1],A=x.i1616to32(1*l,1*t);a.vertexBounds(l,t,0,0);a.vertexWrite(A);a.vertexWrite(g);b.dotDensity?a.vertexWriteF32(1/Math.abs(c.readGeometryArea())):(a.vertexWrite(this.fillColor),a.vertexWrite(this.tl),a.vertexWrite(this.br),a.vertexWrite(this.aux1),a.vertexWrite(this.aux2),a.vertexWrite(this.aux3),a.vertexWrite(this._minMaxZoom))}p+=k}};h._getGeometry=
function(a,c,e){return(a=c?q.deltaDecodeGeometry(q.convertFromGeometry(c),2):a.readGeometryForDisplay())?m.clipMarshall(a,e?256:8):null};return n}(z)});