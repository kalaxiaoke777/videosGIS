// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.21/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/BreakpointsOwner":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/ArrayPool ../core/Handles ../core/watchUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/subclass".split(" "),function(p,c,f,l,w,C,z,G,E,y,n){function g(b,a){return a?d[b].valueToClassName[a].split(" "):[]}const d={widthBreakpoint:{getValue(b){const a=b.viewSize[0];b=
b.breakpoints;const h=this.values;return a<=b.xsmall?h.xsmall:a<=b.small?h.small:a<=b.medium?h.medium:a<=b.large?h.large:h.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",
medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},
heightBreakpoint:{getValue(b){const a=b.viewSize[1];b=b.breakpoints;const h=this.values;return a<=b.xsmall?h.xsmall:a<=b.small?h.small:a<=b.medium?h.medium:a<=b.large?h.large:h.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",
medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},
orientation:{getValue(b){b=b.viewSize;const a=this.values;return b[1]>=b[0]?a.portrait:a.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},e={xsmall:544,small:768,medium:992,large:1200};p.BreakpointsOwner=b=>{b=function(a){function h(...r){r=a.call(this,...r)||this;r._breakpointsHandles=new w;r.orientation=null;r.widthBreakpoint=null;r.heightBreakpoint=null;r.breakpoints=e;return r}
c._inheritsLoose(h,a);var u=h.prototype;u.initialize=function(){this._breakpointsHandles.add(C.init(this,["breakpoints","size"],this._updateClassNames))};u.destroy=function(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles.destroy(),this._breakpointsHandles=null)};u._updateClassNames=function(){if(this.container){var r=l.acquire(),q=l.acquire(),k=!1,m;for(m in d){const x=this[m],v=d[m].getValue({viewSize:this.size,breakpoints:this.breakpoints});x!==v&&(k=!0,this[m]=v,g(m,
x).forEach(B=>q.push(B)),g(m,v).forEach(B=>r.push(B)))}k&&(this._applyClassNameChanges(r,q),l.release(r),l.release(q))}};u._applyClassNameChanges=function(r,q){const k=this.container;k&&(q.forEach(m=>k.classList.remove(m)),r.forEach(m=>k.classList.add(m)))};u._removeActiveClassNames=function(){const r=this.container;if(r)for(var q in d)g(q,this[q]).forEach(k=>r.classList.remove(k))};c._createClass(h,[{key:"breakpoints",set:function(r){var q=this._get("breakpoints");if(r!==q){q=(q=r)&&q.xsmall<q.small&&
q.small<q.medium&&q.medium<q.large;if(!q){const k=JSON.stringify(e,null,2);console.warn("provided breakpoints are not valid, using defaults:"+k)}r=q?r:e;this._set("breakpoints",{...r})}}}]);return h}(b);f.__decorate([z.property()],b.prototype,"breakpoints",null);f.__decorate([z.property()],b.prototype,"orientation",void 0);f.__decorate([z.property()],b.prototype,"widthBreakpoint",void 0);f.__decorate([z.property()],b.prototype,"heightBreakpoint",void 0);return b=f.__decorate([n.subclass("esri.views.BreakpointsOwner")],
b)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/DOMContainer":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/domUtils ../core/scheduling ../core/watchUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/subclass ./overlay/ViewOverlay ../widgets/Popup".split(" "),function(p,c,f,l,w,C,z,G,E,y,n,g,d){function e(a){a&&(l.empty(a),a.parentNode&&a.parentNode.removeChild(a))}
const b=[0,0];p.DOMContainer=a=>{a=function(h){function u(...q){var k=h.call(this,...q)||this;k._freqInfo={freq:16,time:750};k._overlayRenderTaskHandle=null;k.height=0;k.position=null;k.resizing=!1;k.root=null;k.surface=null;k.suspended=!0;k.ui=null;k.userContent=null;k.width=0;k.widthBreakpoint=null;k.handles.add([k.watch("cursor",m=>{const x=k.surface;x&&x.setAttribute("data-cursor",m)}),k.watch("interacting",m=>{const x=k.surface;x&&x.setAttribute("data-interacting",m.toString())})]);return k}
c._inheritsLoose(u,h);var r=u.prototype;r.initialize=function(){this.handles.add(this.watch("ui",(q,k)=>this._handleUIChange(q,k)));this._wireUI(this.ui);this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])};r.destroy=function(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)};r.blur=function(){this.surface&&this.surface.blur()};r.focus=function(){this.surface&&
this.surface.focus()};r.pageToContainer=function(q,k,m){const x=this.position;q-=x[0];k-=x[1];m?(m[0]=q,m[1]=k):m=[q,k];return m};r.containerToPage=function(q,k,m){const x=this.position;q+=x[0];k+=x[1];m?(m[0]=q,m[1]=k):m=[q,k];return m};r._handleUIChange=function(q,k){k&&(this.handles.remove("ui"),k.destroy());q&&this._wireUI(q);this._set("ui",q)};r._wireUI=function(q){this.handles.remove("ui");q&&(q.view=this,this.handles.add([C.init(this,"root",k=>{if(k){{const m=document.createElement("div");
k.appendChild(m);k=m}}else k=null;q.container=k}),C.init(this,"popup",(k,m)=>{m&&q.remove(m,"popup");k&&(k.view=q.view,q.add(k,{key:"popup",position:"manual"}))})],"ui"))};r._stopMeasuring=function(){this.handles.remove("measuring");this._get("resizing")&&this._set("resizing",!1)};r._startMeasuring=function(){const q=this._freqInfo;q.freq=16;q.time=750;this.handles.add([(()=>{const k=()=>{q.freq=16;q.time=750};window.addEventListener("resize",k);return{remove(){window.removeEventListener("resize",
k)}}})(),w.addFrameTask({prepare:k=>{const m=this._measure(),x=this._freqInfo;x.time+=k.deltaTime;m&&(x.freq=16,this._get("resizing")||this._set("resizing",!0));x.time<x.freq||(x.time=0,this._position()||m?x.freq=16:x.freq=Math.min(750,2*x.freq),!m&&512<=x.freq&&this._get("resizing")&&this._set("resizing",!1))}})],"measuring");this._measure();this._position()};r._measure=function(){var q=this.container;const k=q?q.clientWidth:0;q=q?q.clientHeight:0;if(0===k||0===q)return this.suspended||this._set("suspended",
!0),!1;const m=this.width,x=this.height;if(k===m&&q===x)return this.suspended&&this._set("suspended",!1),!1;this._set("width",k);this._set("height",q);this.suspended&&this._set("suspended",!1);this.emit("resize",{oldWidth:m,oldHeight:x,width:k,height:q});return!0};r._position=function(){var q=this.container;const k=this.position;{const m=(q.ownerDocument||window.document).defaultView;q=q.getBoundingClientRect();b[0]=q.left+m.pageXOffset;b[1]=q.top+m.pageYOffset}return k&&b[0]===k[0]&&b[1]===k[1]?
!1:(this._set("position",[b[0],b[1]]),!0)};r.forceDOMReadyCycle=function(){};c._createClass(u,[{key:"container",set:function(q){var k=this._get("container");if(k!==q)if(this.handles.remove("dom-size"),this._stopMeasuring(),k&&(k.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),this._set("overlay",null),e(this.root),this._set("root",null),l.reparent(this.userContent,k),e(this.userContent),
this._set("userContent",null)),q){q.classList.add("esri-view");k=document.createElement("div");k.className="esri-view-user-storage";l.reparent(q,k);q.appendChild(k);this._set("userContent",k);k=document.createElement("div");k.className="esri-view-root";q.insertBefore(k,q.firstChild);this._set("root",k);const m=document.createElement("div");m.className="esri-view-surface";m.setAttribute("role","application");m.tabIndex=0;k.appendChild(m);this._set("surface",m);const x=new g;k.appendChild(x.surface);
this._set("overlay",x);x.watch("needsRender",v=>{v&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=w.addFrameTask({render:()=>{this.overlay.render()}}):this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null)});this.forceDOMReadyCycle();this.handles.add(C.init(this,"size",v=>{const [B,L]=v;B>=document.body.clientWidth||L>=document.body.clientHeight?m.classList.add("esri-view-surface--inset-outline"):m.classList.remove("esri-view-surface--inset-outline")}),
"dom-size");this._set("container",q);this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}},{key:"focused",get:function(){const q=document.activeElement===this.surface;return document.hasFocus()&&q}},{key:"popup",get:function(){return this._get("popup")||new d({view:this})},set:function(q){const k=this._get("popup");k&&k!==q&&k.destroy();this._set("popup",q)}},{key:"size",get:function(){return[this.width,
this.height]}}]);return u}(a);f.__decorate([z.property({value:null,cast:h=>l.byId(h)})],a.prototype,"container",null);f.__decorate([z.property({readOnly:!0})],a.prototype,"focused",null);f.__decorate([z.property({readOnly:!0})],a.prototype,"height",void 0);f.__decorate([z.property({type:d})],a.prototype,"popup",null);f.__decorate([z.property({type:g})],a.prototype,"overlay",void 0);f.__decorate([z.property({readOnly:!0})],a.prototype,"position",void 0);f.__decorate([z.property({readOnly:!0})],a.prototype,
"resizing",void 0);f.__decorate([z.property({readOnly:!0})],a.prototype,"root",void 0);f.__decorate([z.property({value:null,readOnly:!0})],a.prototype,"size",null);f.__decorate([z.property({readOnly:!0})],a.prototype,"surface",void 0);f.__decorate([z.property({readOnly:!0})],a.prototype,"suspended",void 0);f.__decorate([z.property()],a.prototype,"ui",void 0);f.__decorate([z.property({readOnly:!0})],a.prototype,"userContent",void 0);f.__decorate([z.property({readOnly:!0})],a.prototype,"width",void 0);
f.__decorate([z.property()],a.prototype,"widthBreakpoint",void 0);return a=f.__decorate([n.subclass("esri.views.DOMContainer")],a)};p.isDOMContainer=function(a){return a&&"focus"in a};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/overlay/ViewOverlay":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../libs/maquette/projection ../../libs/maquette/projector ../support/WatchUpdatingTracking".split(" "),
function(p,c,f,l,w,C,z,G,E,y,n,g){f=function(d){function e(){var a=d.apply(this,arguments)||this;a.items=new l;a._watchUpdatingTracking=new g.WatchUpdatingTracking;a._callbacks=new Map;a._projector=n.createProjector();a._hiddenProjector=n.createProjector();return a}p._inheritsLoose(e,d);var b=e.prototype;b.initialize=function(){const a=document.createElement("div");a.className="esri-overlay-surface";this._set("surface",a);this._hiddenSurface=document.createElement("div");this._hiddenSurface.setAttribute("style",
"visibility: hidden;");a.appendChild(this._hiddenSurface);this._watchUpdatingTracking.addOnCollectionChange(this.items,h=>{h.added.map(u=>{const r=()=>u.render();this._callbacks.set(u,r);this._projector.append(this.surface,r)});h.removed.map(u=>{const r=this._projector.detach(this._callbacks.get(u));this.surface.removeChild(r.domNode);this._callbacks.delete(u)})})};b.addItem=function(a){this.items.add(a)};b.removeItem=function(a){this.items.remove(a)};b.destroy=function(){this.items.removeAll();this._callbacks.forEach(a=>
this._projector.detach(a));this._projector=this._callbacks=null;this._watchUpdatingTracking.destroy()};b.render=function(){this._projector.renderNow()};b.computeBoundingRect=function(a){const h=this._hiddenSurface,u=this._hiddenProjector;let r=null;const q=()=>r=a.render();u.append(h,q);u.renderNow();const k={left:0,top:0,right:0,bottom:0};if(r&&r.domNode){const m=r.domNode.getBoundingClientRect();k.left=m.left;k.top=m.top;k.right=m.right;k.bottom=m.bottom}for(u.detach(q);h.firstChild;)h.removeChild(h.firstChild);
return k};b.overlaps=function(a,h){a=this.computeBoundingRect(a);h=this.computeBoundingRect(h);return Math.max(a.left,h.left)<=Math.min(a.right,h.right)&&Math.max(a.top,h.top)<=Math.min(a.bottom,h.bottom)};b.renderCanvas=function(a){if(this.items.some(u=>u.visible)){var h=a.getContext("2d");h.save();h.font=`10px ${getComputedStyle(this.surface).fontFamily}`;this.items.forEach(u=>{h.save();u.renderCanvas(h);h.restore()});h.restore()}};p._createClass(e,[{key:"needsRender",get:function(){return 0<this.items.length}},
{key:"hasVisibleItems",get:function(){return this.items.some(a=>a.visible)}}]);return e}(f);c.__decorate([w.property({readOnly:!0})],f.prototype,"surface",void 0);c.__decorate([w.property({readOnly:!0})],f.prototype,"items",void 0);c.__decorate([w.property({readOnly:!0})],f.prototype,"needsRender",null);c.__decorate([w.property({readOnly:!0})],f.prototype,"_watchUpdatingTracking",void 0);c.__decorate([w.property({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],f.prototype,"updating",void 0);
return f=c.__decorate([E.subclass("esri.views.overlay.ViewOverlay")],f)})},"esri/widgets/Popup":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/Collection ../core/events ../core/Handles ../core/Logger ../core/maybe ../core/throttle ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Feature ./Spinner ./Widget ./Feature/support/FeatureContentMixin ./Popup/PopupViewModel ./support/Heading ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ./support/widgetUtils ../intl/substitute".split(" "),
function(p,c,f,l,w,C,z,G,E,y,n,g,d,e,b,a,h,u,r,q,k,m,x,v,B,L,N){function M(V,ca){return void 0===ca?`${"esri-popup"}__${V}`:`${"esri-popup"}__${V}-${ca}`}const S={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},I=z.getLogger("esri.widgets.Popup"),P={closeButton:!0,featureNavigation:!0};f=function(V){function ca(t,F){var D=V.call(this,t,F)||this;D._blurClose=!1;D._blurContainer=!1;D._containerNode=null;D._mainContainerNode=null;D._featureMenuNode=null;D._actionsMenuNode=null;D._focusClose=
!1;D._focusContainer=!1;D._focusDockButton=!1;D._focusFeatureMenuButton=!1;D._focusActionsMenuButton=!1;D._focusFirstFeature=!1;D._focusFirstAction=!1;D._handles=new C;D._pointerOffsetInPx=16;D._spinner=null;D._feature=null;D._featureMenuIntersectionObserverCallback=([H])=>{null!=H&&H.isIntersecting&&D.viewModel.featurePage++};D._featureMenuIntersectionObserver=new IntersectionObserver(D._featureMenuIntersectionObserverCallback);D._displaySpinnerThrottled=E.throttle(()=>D._displaySpinner(),0);D.actions=
null;D.alignment="auto";D.autoCloseEnabled=null;D.autoOpenEnabled=null;D.defaultPopupTemplateEnabled=null;D.content=null;D.collapsed=!1;D.collapseEnabled=!0;D.dockEnabled=!1;D.featureCount=null;D.featureMenuOpen=!1;D.features=null;D.goToOverride=null;D.headingLevel=2;D.highlightEnabled=null;D.location=null;D.label=void 0;D.maxInlineActions=3;D.messages=null;D.messagesCommon=null;D.promises=null;D.selectedFeature=null;D.selectedFeatureIndex=null;D.spinnerEnabled=!0;D.title=null;D.updateLocationEnabled=
null;D.view=null;D.viewModel=new q;D.visible=null;D.visibleElements={...P};D._addSelectedFeatureIndexHandle();D.own([y.watch(p._assertThisInitialized(D),"viewModel.screenLocation",()=>D._positionContainer()),y.watch(p._assertThisInitialized(D),["viewModel.active","dockEnabled"],()=>D._toggleScreenLocationEnabled()),y.watch(p._assertThisInitialized(D),"viewModel.screenLocation",(H,K)=>{!!H!==!!K&&D.reposition()}),y.watch(p._assertThisInitialized(D),["viewModel.view.padding","viewModel.view.size","viewModel.active",
"viewModel.location","alignment"],()=>D.reposition()),y.watch(p._assertThisInitialized(D),"spinnerEnabled",H=>D._spinnerEnabledChange(H)),y.watch(p._assertThisInitialized(D),"viewModel.view.size",(H,K)=>D._updateDockEnabledForViewSize(H,K)),y.watch(p._assertThisInitialized(D),"viewModel.view",(H,K)=>D._viewChange(H,K)),y.watch(p._assertThisInitialized(D),"viewModel.view.ready",(H,K)=>D._viewReadyChange(H,K)),y.watch(p._assertThisInitialized(D),["viewModel.waitingForResult","viewModel.location"],()=>
{D._hideSpinner();D._displaySpinnerThrottled()}),y.watch(p._assertThisInitialized(D),["selectedFeatureWidget.viewModel.title","selectedFeatureWidget.viewModel.state"],()=>D._setTitleFromFeatureWidget()),y.watch(p._assertThisInitialized(D),["selectedFeatureWidget.viewModel.content","selectedFeatureWidget.viewModel.state"],()=>D._setContentFromFeatureWidget()),y.whenFalse(p._assertThisInitialized(D),"collapsed",()=>{var H,K;"xsmall"===(null==(H=D.viewModel)?void 0:null==(K=H.view)?void 0:K.widthBreakpoint)&&
D.viewModel.active&&D.collapseEnabled&&D.viewModel.centerAtLocation()}),y.on(p._assertThisInitialized(D),"viewModel.allActions","change",()=>D._watchActions()),y.init(p._assertThisInitialized(D),"viewModel.allActions",()=>D._watchActions()),y.watch(p._assertThisInitialized(D),"viewModel.featureViewModels",()=>D._featureMenuViewportScrollTop())]);return D}p._inheritsLoose(ca,V);var A=ca.prototype;A.destroy=function(){var t,F;this._destroySelectedFeatureWidget();this._destroySpinner();null==(t=this._handles)?
void 0:t.destroy();this._unobserveFeatureMenuObserver();null==(F=this._featureMenuIntersectionObserver)?void 0:F.disconnect();this._handles=null};A.castVisibleElements=function(t){return{...P,...t}};A.blur=function(){const {active:t}=this.viewModel;t||I.warn("Popup can only be blurred when currently active.");this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0;this.scheduleRender()};A.clear=function(){this.viewModel.clear()};A.close=function(){this.visible=!1};A.fetchFeatures=
function(t,F){return this.viewModel.fetchFeatures(t,F)};A.focus=function(){const {active:t}=this.viewModel;t||I.warn("Popup can only be focused when currently active.");this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0;this.scheduleRender()};A.next=function(){return this.viewModel.next()};A.open=function(t){var F,D;this._handles.remove("selected-index");const H={collapsed:t?!!t.collapsed:!1,actionsMenuOpen:t?!!t.actionsMenuOpen:!1,featureMenuOpen:t?!!t.featureMenuOpen:!1};
"xsmall"===(null==(F=this.viewModel)?void 0:null==(D=F.view)?void 0:D.widthBreakpoint)&&(H.collapsed=!0);this.set(H);this.viewModel.open(t);this._addSelectedFeatureIndexHandle()};A.previous=function(){return this.viewModel.previous()};A.reposition=function(){this.renderNow();this._positionContainer();this._setCurrentAlignment()};A.triggerAction=function(t){this.viewModel.triggerAction(t)};A.render=function(){var t,F,D,H;const {actionsMenuOpen:K,dockEnabled:J,featureMenuVisible:T,dividedActions:Y,
currentAlignment:da,currentDockPosition:ha}=this,{active:ia}=this.viewModel;var {menuActions:oa}=Y;oa=ia&&1<oa.length&&K;const ma=null==(t=this.selectedFeature)?void 0:null==(F=t.layer)?void 0:F.title;t=null==(D=this.selectedFeature)?void 0:null==(H=D.layer)?void 0:H.id;return B.tsx("div",{class:this.classes("esri-popup",{["esri-popup--aligned-top-center"]:"top-center"===da,["esri-popup--aligned-bottom-center"]:"bottom-center"===da,["esri-popup--aligned-top-left"]:"top-left"===da,["esri-popup--aligned-bottom-left"]:"bottom-left"===
da,["esri-popup--aligned-top-right"]:"top-right"===da,["esri-popup--aligned-bottom-right"]:"bottom-right"===da,["esri-popup--is-docked"]:ia&&J,["esri-popup--shadow"]:ia&&!J,["esri-popup--is-docked-top-left"]:"top-left"===ha,["esri-popup--is-docked-top-center"]:"top-center"===ha,["esri-popup--is-docked-top-right"]:"top-right"===ha,["esri-popup--is-docked-bottom-left"]:"bottom-left"===ha,["esri-popup--is-docked-bottom-center"]:"bottom-center"===ha,["esri-popup--is-docked-bottom-right"]:"bottom-right"===
ha,["esri-popup--feature-menu-open"]:T,["esri-popup--actions-menu-open"]:oa}),role:"presentation","data-layer-title":ma,"data-layer-id":t,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},ia?[this.renderMainContainer(),this.renderPointer()]:null)};A.renderLoadingIcon=function(){return B.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-loading-indicator","esri-rotating")})};A.renderNavigationLoading=function(){const {messagesCommon:t}=
this;return this.viewModel.pendingPromisesCount?B.tsx("div",{key:M("loading-container"),role:"presentation",class:"esri-popup__loading-container","aria-label":t.loading,title:t.loading},this.renderLoadingIcon()):null};A.renderPreviousIcon=function(){const t=L.isRTL(this.container);return B.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",{["esri-icon-right-triangle-arrow"]:t,["esri-popup__pagination-previous-icon--rtl"]:t,["esri-icon-left-triangle-arrow"]:!t,["esri-popup__pagination-previous-icon"]:!t})})};
A.renderPreviousButton=function(){const {messages:t}=this;return B.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes("esri-popup__button","esri-popup__pagination-previous"),"aria-label":t.previous,title:t.previous},this.renderPreviousIcon())};A.renderNextIcon=function(){const t=L.isRTL(this.container);return B.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",{["esri-icon-left-triangle-arrow"]:t,["esri-popup__pagination-next-icon--rtl"]:t,
["esri-icon-right-triangle-arrow"]:!t,["esri-popup__pagination-next-icon"]:!t})})};A.renderNextButton=function(){const {messages:t}=this;return B.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes("esri-popup__button","esri-popup__pagination-next"),"aria-label":t.next,title:t.next},this.renderNextIcon())};A.renderFeatureMenuButton=function(){const {featureMenuOpen:t,featureMenuId:F,messagesCommon:D}=this,{featureCount:H,selectedFeatureIndex:K}=
this.viewModel;return B.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes("esri-popup__button","esri-popup__feature-menu-button"),"aria-haspopup":"true","aria-controls":F,"aria-expanded":t.toString(),"aria-label":D.menu,title:D.menu},this._getPageText(H,K))};A.renderNavigationButtons=function(){return this.featureNavigationVisible?
[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null};A.renderDockIcon=function(){const {dockEnabled:t}=this,F=this._wouldDockTo();return B.tsx("span",{"aria-hidden":"true",class:this.classes({["esri-icon-minimize"]:t,["esri-popup__icon--dock-icon"]:!t,["esri-icon-dock-right"]:!t&&("top-right"===F||"bottom-right"===F),["esri-icon-dock-left"]:!t&&("top-left"===F||"bottom-left"===F),["esri-icon-maximize"]:!t&&"top-center"===F,["esri-icon-dock-bottom"]:!t&&
"bottom-center"===F},"esri-popup__icon")})};A.renderDockButton=function(){var t,F,D;const {dockEnabled:H,messages:K}=this,J=null==(t=this.viewModel)?void 0:null==(F=t.view)?void 0:F.widthBreakpoint;t=H?K.undock:K.dock;return"xsmall"!==J&&null!=(D=this.dockOptions)&&D.buttonEnabled?B.tsx("div",{role:"button","aria-label":t,title:t,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes("esri-popup__button",
"esri-popup__button--dock")},this.renderDockIcon()):null};A.renderTitle=function(){const {title:t}=this.viewModel,{titleId:F,collapsible:D,contentCollapsed:H,messagesCommon:K}=this;var J={["esri-popup__header-container--button"]:D};const T=B.tsx(k.Heading,{level:this.headingLevel,class:"esri-popup__header-title",innerHTML:t});J=D?B.tsx("button",{key:`${t}--collapsible`,id:F,title:H?K.expand:K.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes("esri-popup__header-container",
J),"aria-expanded":H?"false":"true",onclick:this._toggleCollapsed},T):B.tsx("div",{key:t,id:F,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes("esri-popup__header-container",J)},T);return t?J:null};A.renderCloseIcon=function(){return B.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-close")})};A.renderCloseButton=function(){const {visibleElements:t,messagesCommon:F}=this;return t.closeButton?B.tsx("div",{role:"button",tabIndex:0,bind:this,
onclick:this._close,onkeydown:this._close,class:"esri-popup__button","aria-label":F.close,title:F.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null};A.renderHeader=function(){return B.tsx("header",{class:"esri-popup__header"},this.renderTitle(),B.tsx("div",{class:"esri-popup__header-buttons"},this.renderDockButton(),this.renderCloseButton()))};A.renderContentContainer=function(){const {contentId:t,hasContent:F,contentCollapsed:D}=
this,{content:H}=this.viewModel;return F&&!D?B.tsx("article",{key:H,enterAnimation:this._createFeatureUpdatedAnimation(),id:t,class:"esri-popup__content"},this.renderContent()):null};A.renderActionsMenuButton=function(){const {actionsMenuId:t,actionsMenuButtonId:F,actionsMenuOpen:D,dividedActions:H,messagesCommon:K}=this,J=D?K.close:K.open,{menuActions:T}=H;return T.length?B.tsx("div",{key:M("actions-menu-button"),class:this.classes("esri-popup__button","esri-popup__actions-menu-button"),role:"button",
id:F,"aria-haspopup":"true","aria-controls":D?t:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":J,title:J},B.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"})):null};A.renderMenuActions=function(){const {actionsMenuId:t,actionsMenuButtonId:F,actionsMenuOpen:D,dividedActions:H}=this,{menuActions:K,inlineActions:J}=H;return K.length&&
D?B.tsx("ul",{id:t,role:"menu","aria-labelledby":F,key:M("actions"),class:"esri-popup__actions",bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},K.toArray().map((T,Y)=>this.renderAction({action:T,index:Y+J.length,type:"menu-item"}))):null};A.renderInlineActions=function(){const {inlineActions:t}=this.dividedActions;return!!t.length&&t.toArray().map((F,D)=>this.renderAction({action:F,index:D,type:"inline"}))};A.renderInlineActionsContainer=
function(){const {inlineActions:t,menuActions:F}=this.dividedActions,D=!!t.length,H=!!F.length;return D||H?B.tsx("div",{key:"inline-actions-container","data-inline-actions":D.toString(),"data-menu-actions":H.toString(),class:"esri-popup__inline-actions-container"},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null};A.renderNavigation=function(){return this.featureNavigationVisible?B.tsx("section",{key:M("navigation"),class:this.classes("esri-popup__navigation")},
this.renderNavigationButtons()):null};A.renderFooter=function(){const {featureNavigationVisible:t,dividedActions:F}=this,{inlineActions:D,menuActions:H}=F,K=!!D.length,J={["esri-popup__footer--has-pagination"]:t,["esri-popup__footer--has-actions"]:K,["esri-popup__footer--has-actions-menu"]:!!H.length};return t||K?B.tsx("div",{key:M("feature-buttons"),class:this.classes("esri-popup__footer",J)},this.renderInlineActionsContainer(),this.renderNavigation()):null};A.renderFeatureMenuContainer=function(){var {messages:t}=
this;const {featureViewModels:F,isLoadingFeature:D}=this.viewModel;t=N.substitute(t.selectedFeatures,{total:F.length});return B.tsx("section",{key:M("menu"),class:"esri-popup__feature-menu"},B.tsx("strong",{class:"esri-popup__feature-menu-header"},t),B.tsx("nav",{bind:this,class:"esri-popup__feature-menu-viewport","data-node-ref":"_featureMenuViewportNode",afterCreate:L.storeNode},this.renderFeatureMenu(),B.tsx("div",{class:"esri-popup__feature-menu-observer",bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),
D?B.tsx("div",{class:"esri-popup__feature-menu-loader"},this.renderLoadingIcon()):null))};A.renderPointer=function(){return this.dockEnabled?null:B.tsx("div",{key:M("pointer"),class:"esri-popup__pointer",role:"presentation"},B.tsx("div",{class:this.classes("esri-popup__pointer-direction","esri-popup--shadow")}))};A.renderMainContainer=function(){const {dockEnabled:t,currentAlignment:F,currentDockPosition:D,titleId:H,contentId:K,collapsible:J,hasContent:T,contentCollapsed:Y,visibleElements:da}=this,
{title:ha}=this.viewModel,ia="bottom-left"===F||"bottom-center"===F||"bottom-right"===F||"top-left"===D||"top-center"===D||"top-right"===D,oa="top-left"===F||"top-center"===F||"top-right"===F||"bottom-left"===D||"bottom-center"===D||"bottom-right"===D;return B.tsx("div",{class:this.classes("esri-popup__main-container","esri-widget",{["esri-popup--shadow"]:t,["esri-popup--is-collapsible"]:J,["esri-popup--is-collapsed"]:Y}),tabIndex:da.closeButton?null:-1,role:"dialog","aria-labelledby":ha?H:"","aria-describedby":T&&
!Y?K:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},ia?this.renderFooter():null,ia?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),oa?this.renderFooter():null,oa?this.renderFeatureMenuContainer():null)};A.renderContent=function(){var t;const F=null==(t=this.viewModel)?void 0:t.content;return F?"string"===typeof F?B.tsx("div",{key:F,innerHTML:F}):this.renderNodeContent(F):null};
A.renderActionText=function(t){return B.tsx("span",{key:"text",class:"esri-popup__action-text"},t)};A.renderActionIcon=function(t){const F=this._getActionClass(t),D=this._getActionImage(t),H={["esri-icon-loading-indicator"]:t.active,["esri-rotating"]:t.active,["esri-popup__icon"]:!!F,["esri-popup__action-image"]:!t.active&&!!D};F&&(H[F]=!t.active);return B.tsx("span",{key:"icon","aria-hidden":"true",class:this.classes("esri-popup__icon",H),styles:this._getIconStyles(D)})};A.renderAction=function(t){const {action:F,
index:D,type:H}=t;t=this._getActionTitle(F);const K={["esri-popup__action"]:"toggle"!==F.type,["esri-popup__action-toggle"]:"toggle"===F.type,["esri-popup__action-toggle--on"]:"toggle"===F.type&&F.value,["esri-popup__button--disabled"]:F.disabled},J=[this.renderActionIcon(F),this.renderActionText(t)];t="menu-item"===H?B.tsx("li",{key:F.uid,role:"menuitem",tabIndex:0,title:t,"aria-label":t,class:this.classes("esri-popup__button",K),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-index":D,
onclick:this._triggerAction,onkeydown:this._triggerAction},J):B.tsx("div",{key:F.uid,role:"button",tabIndex:0,title:t,"aria-label":t,class:this.classes("esri-popup__button",K),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-index":D,onclick:this._triggerAction,onkeydown:this._triggerAction},J);return F.visible?t:null};A.renderFeatureMenuItem=function(t,F){const {messages:D,messagesCommon:H}=this,{selectedFeatureIndex:K,selectedFeatureViewModel:J}=this.viewModel;var T=t===J;const Y=
{["esri-popup__feature-menu-item--selected"]:T};T=T?B.tsx("span",{key:M(`feature-menu-selected-feature-${K}`),title:D.selectedFeature,"aria-label":D.selectedFeature,class:"esri-icon-check-mark"}):null;t=B.tsx("span",{innerHTML:t.title||H.untitled});return B.tsx("li",{role:"menuitem",tabIndex:-1,key:M(`feature-menu-feature-${K}`),class:this.classes(Y,"esri-popup__feature-menu-item"),bind:this,"data-feature-index":F,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature},
B.tsx("span",{class:"esri-popup__feature-menu-title"},t,T))};A.renderFeatureMenu=function(){const {featureMenuId:t}=this,{featureViewModels:F}=this.viewModel;return 1<F.length?B.tsx("ol",{class:"esri-popup__feature-menu-list",id:t,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},F.filter(D=>!!D.graphic).map((D,H)=>this.renderFeatureMenuItem(D,H))):null};A._getActionTitle=function(t){const {messages:F,selectedFeature:D,
messagesCommon:H}=this,{id:K}=t,J=null==D?void 0:D.attributes;return(t="zoom-to-feature"===K?N.substitute(t.title,{messages:F}):"remove-selected-feature"===K?N.substitute(t.title,{messages:H}):"zoom-to-clustered-features"===K?N.substitute(t.title,{messages:F}):"browse-clustered-features"===K?N.substitute(t.title,{messages:F}):t.title)&&J?N.substitute(t,J):t};A._getActionClass=function(t){var {selectedFeature:F}=this;F=null==F?void 0:F.attributes;const {className:D,image:H}=t;return(t=H||D?D:"esri-icon-default-action")&&
F?N.substitute(t,F):t};A._getActionImage=function(t){var {selectedFeature:F}=this;F=null==F?void 0:F.attributes;({image:t}=t);return t&&F?N.substitute(t,F):t};A._createFeatureUpdatedAnimation=function(){return L.cssTransition("enter","esri-popup--feature-updated")};A._getInlineActionCount=function(){const {maxInlineActions:t,featureNavigationVisible:F}=this;if("number"!==typeof t)return null;const D=Math.round(t);return Math.max(F?D-1:D,0)};A._watchActions=function(){const {allActions:t}=this.viewModel;
this.notifyChange("dividedActions");this._handles.remove("actions");t&&t.forEach(F=>{this._handles.add(y.watch(F,"active className disabled id title image visible".split(" "),()=>this.scheduleRender()),"actions")})};A._divideActions=function(){const {allActions:t}=this.viewModel,F=this._getInlineActionCount(),D=null===F,H=0===F;return{inlineActions:D?t.slice(0):H?new l:t.slice(0,F),menuActions:D?new l:H?t.slice(0):t.slice(F)}};A._featureMenuOpenChanged=function(t){t?this._focusFirstFeature=!0:this._focusFeatureMenuButton=
!0};A._actionsMenuOpenChanged=function(t){t?this._focusFirstAction=!0:this._focusActionsMenuButton=!0};A._setTitleFromFeatureWidget=function(){const {selectedFeatureWidget:t,messagesCommon:F}=this;if(t){var D,H;this.viewModel.title="error"===(null==(D=t.viewModel)?void 0:D.state)?F.errorMessage:(null==(H=t.viewModel)?void 0:H.title)||""}};A._setContentFromFeatureWidget=function(){const {selectedFeatureWidget:t}=this;t&&(this.viewModel.content=t)};A._unobserveFeatureMenuObserver=function(){this._featureMenuIntersectionObserverNode&&
this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)};A._featureMenuIntersectionObserverCreated=function(t){this._unobserveFeatureMenuObserver();this._featureMenuIntersectionObserver.observe(t);this._featureMenuIntersectionObserverNode=t};A._handleFeatureMenuKeyup=function(t){"Escape"===w.eventKey(t)&&(t.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())};A._handleActionMenuKeyup=function(t){"Escape"===w.eventKey(t)&&
(t.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())};A._handleFeatureMenuItemKeyup=function(t){const F=w.eventKey(t);var {_featureMenuNode:D}=this;const H=t.currentTarget["data-feature-index"];if(D){D=D.querySelectorAll("li");var K=D.length;"ArrowUp"===F?(t.stopPropagation(),D[(H-1+K)%K].focus()):"ArrowDown"===F?(t.stopPropagation(),D[(H+1+K)%K].focus()):"Home"===F?(t.stopPropagation(),D[0].focus()):"End"===F&&(t.stopPropagation(),D[D.length-1].focus())}};
A._handleActionMenuItemKeyup=function(t){const F=w.eventKey(t);var {_actionsMenuNode:D}=this;const H=t.currentTarget["data-action-index"];if(D){D=D.querySelectorAll("li");var K=D.length;"ArrowUp"===F?(t.stopPropagation(),D[(H-1+K)%K].focus()):"ArrowDown"===F?(t.stopPropagation(),D[(H+1+K)%K].focus()):"Home"===F?(t.stopPropagation(),D[0].focus()):"End"===F&&(t.stopPropagation(),D[D.length-1].focus())}};A._handleMainKeyup=function(t){const F=w.eventKey(t);"ArrowLeft"===F&&(t.stopPropagation(),this.previous());
"ArrowRight"===F&&(t.stopPropagation(),this.next())};A._spinnerEnabledChange=function(t){this._destroySpinner();t&&(t=this.get("viewModel.view"),this._createSpinner(t))};A._hideSpinner=function(){const {_spinner:t}=this;t&&(t.location=null,t.hide())};A._displaySpinner=function(){const {_spinner:t}=this;if(t){var {location:F,waitingForResult:D}=this.viewModel;D?t.show({location:F}):t.hide()}};A._getIconStyles=function(t){return{"background-image":t?`url(${t})`:""}};A._addSelectedFeatureIndexHandle=
function(){const t=y.watch(this,"viewModel.selectedFeatureIndex",(F,D)=>this._selectedFeatureIndexUpdated(F,D));this._handles.add(t,"selected-index")};A._selectedFeatureIndexUpdated=function(t,F){const {featureCount:D}=this;D&&t!==F&&-1!==t&&(this.featureMenuOpen=this.actionsMenuOpen=!1)};A._destroySelectedFeatureWidget=function(){const {_feature:t}=this;t&&(t.viewModel=null,t&&!t.destroyed&&t.destroy());this._feature=null};A._isScreenLocationWithinView=function(t,F){return-1<t.x&&-1<t.y&&t.x<=F.width&&
t.y<=F.height};A._isOutsideView=function(t){const {popupHeight:F,popupWidth:D,screenLocation:H,side:K,view:J}=t;if(isNaN(D)||isNaN(F)||!J||!H)return!1;t=J.padding;return"right"===K&&H.x+D/2>J.width-t.right||"left"===K&&H.x-D/2<t.left||"top"===K&&H.y-F<t.top||"bottom"===K&&H.y+F>J.height-t.bottom?!0:!1};A._calculateAutoAlignment=function(t){if("auto"!==t)return t;const {_pointerOffsetInPx:F,_containerNode:D,_mainContainerNode:H,viewModel:K}=this,{screenLocation:J,view:T}=K;if(G.isNone(J)||!T||!D)return"top-center";
if(!this._isScreenLocationWithinView(J,T))return this._get("currentAlignment")||"top-center";var Y=(t=H?window.getComputedStyle(H,null):null)?parseInt(t.getPropertyValue("max-height").replace(/[^-\d\.]/g,""),10):0,da=t?parseInt(t.getPropertyValue("height").replace(/[^-\d\.]/g,""),10):0;const {height:ha,width:ia}=D.getBoundingClientRect();t=ia+F;const oa=Math.max(ha,Y,da)+F;Y=this._isOutsideView({popupHeight:oa,popupWidth:t,screenLocation:J,side:"right",view:T});da=this._isOutsideView({popupHeight:oa,
popupWidth:t,screenLocation:J,side:"left",view:T});const ma=this._isOutsideView({popupHeight:oa,popupWidth:t,screenLocation:J,side:"top",view:T});t=this._isOutsideView({popupHeight:oa,popupWidth:t,screenLocation:J,side:"bottom",view:T});return da?ma?"bottom-right":"top-right":Y?ma?"bottom-left":"top-left":ma?t?"top-center":"bottom-center":"top-center"};A._callCurrentAlignment=function(t){return"function"===typeof t?t.call(this):t};A._getCurrentAlignment=function(){const {alignment:t,dockEnabled:F}=
this;return F||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(t)))};A._setCurrentAlignment=function(){this._set("currentAlignment",this._getCurrentAlignment())};A._setCurrentDockPosition=function(){this._set("currentDockPosition",this._getCurrentDockPosition())};A._calculatePositionResult=function(t){const F=["left","right"];L.isRTL(this.container)&&F.reverse();return t.replace(/leading/gi,F[0]).replace(/trailing/gi,F[1])};A._callDockPosition=
function(t){return"function"===typeof t?t.call(this):t};A._getDockPosition=function(){var t;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(null==(t=this.dockOptions)?void 0:t.position)))};A._getCurrentDockPosition=function(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null};A._wouldDockTo=function(){return this.dockEnabled?null:this._getDockPosition()};A._calculateAutoDockPosition=function(t){var F;if("auto"!==t)return t;t=null==
(F=this.viewModel)?void 0:F.view;F=L.isRTL(this.container)?"top-left":"top-right";if(!t)return F;var D=t.padding||{left:0,right:0,top:0,bottom:0};D=t.width-D.left-D.right;({breakpoints:t}=t);return t&&D<=t.xsmall?"bottom-center":F};A._positionContainer=function(t=this._containerNode){t&&(this._containerNode=t);if(t){var {screenLocation:F}=this.viewModel,{width:D}=t.getBoundingClientRect();if(F=this._calculatePositionStyle(F,D))t.style.top=F.top,t.style.left=F.left,t.style.bottom=F.bottom,t.style.right=
F.right}};A._calculateFullWidth=function(t){const {currentAlignment:F,_pointerOffsetInPx:D}=this;return"top-left"===F||"bottom-left"===F||"top-right"===F||"bottom-right"===F?t+D:t};A._calculateAlignmentPosition=function(t,F,D,H){const {currentAlignment:K,_pointerOffsetInPx:J}=this;H/=2;const T=D.height-F;D=D.width-t;const {padding:Y}=this.view;if("bottom-center"===K)return{top:F+J-Y.top,left:t-H-Y.left};if("top-left"===K)return{bottom:T+J-Y.bottom,right:D+J-Y.right};if("bottom-left"===K)return{top:F+
J-Y.top,right:D+J-Y.right};if("top-right"===K)return{bottom:T+J-Y.bottom,left:t+J-Y.left};if("bottom-right"===K)return{top:F+J-Y.top,left:t+J-Y.left};if("top-center"===K)return{bottom:T+J-Y.bottom,left:t-H-Y.left}};A._calculatePositionStyle=function(t,F){const {dockEnabled:D,view:H}=this;if(H){if(D)return{left:"",top:"",right:"",bottom:""};if(!G.isNone(t)&&F&&(F=this._calculateFullWidth(F),t=this._calculateAlignmentPosition(t.x,t.y,H,F)))return{top:void 0!==t.top?`${t.top}px`:"auto",left:void 0!==
t.left?`${t.left}px`:"auto",bottom:void 0!==t.bottom?`${t.bottom}px`:"auto",right:void 0!==t.right?`${t.right}px`:"auto"}}};A._viewChange=function(t,F){t&&F&&(this.close(),this.clear())};A._viewReadyChange=function(t,F){t?(t=this.get("viewModel.view"),this._wireUpView(t)):F&&(this.close(),this.clear())};A._wireUpView=function(t){this._destroySpinner();if(t){var {spinnerEnabled:F}=this;F&&this._createSpinner(t);this._setDockEnabledForViewSize(this.dockOptions)}};A._dockingThresholdCrossed=function(t,
F,D){const [H,K]=t,[J,T]=F,{width:Y,height:da}=D;return H<=Y&&J>Y||H>Y&&J<=Y||K<=da&&T>da||K>da&&T<=da};A._updateDockEnabledForViewSize=function(t,F){if(t&&F){var D=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},H=D.left+D.right,K=D.top+D.bottom;D=[];var J=[];D[0]=t[0]-H;D[1]=t[1]-K;J[0]=F[0]-H;J[1]=F[1]-K;({dockOptions:t}=this);this._dockingThresholdCrossed(D,J,t.breakpoint)&&this._setDockEnabledForViewSize(t);this._setCurrentDockPosition()}};A._focusDockButtonNode=function(t){this._focusDockButton&&
(this._focusDockButton=!1,t.focus())};A._closeButtonNodeUpdated=function(t){this._focusClose?(this._focusClose=!1,t.focus()):this._blurClose&&(this._blurClose=!1,t.blur())};A._mainContainerNodeUpdated=function(t){this._mainContainerNode=t;this._focusContainer?(this._focusContainer=!1,t.focus()):this._blurContainer&&(this._blurContainer=!1,t.blur())};A._featureMenuNodeUpdated=function(t){(this._featureMenuNode=t)&&this._focusFirstFeature&&(this._focusFirstFeature=!1,t=t.querySelectorAll("li"),t.length&&
t[0].focus())};A._actionsMenuNodeUpdated=function(t){(this._actionsMenuNode=t)&&this._focusFirstAction&&(this._focusFirstAction=!1,t=t.querySelectorAll("li"),t.length&&t[0].focus())};A._focusFeatureMenuButtonNode=function(t){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,t.focus())};A._focusActionsMenuButtonNode=function(t){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,t.focus())};A._featureMenuViewportScrollTop=function(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=
0)};A._toggleScreenLocationEnabled=function(){const {dockEnabled:t,viewModel:F}=this;F&&(F.screenLocationEnabled=F.active&&!t)};A._shouldDockAtCurrentViewSize=function(t){var F,D;t=t.breakpoint;const H=null==(F=this.viewModel)?void 0:null==(D=F.view)?void 0:D.ui;if(!H)return!1;const {width:K,height:J}=H;if(isNaN(K)||isNaN(J))return!1;F=t.hasOwnProperty("width")&&K<=t.width;D=t.hasOwnProperty("height")&&J<=t.height;return F||D};A._setDockEnabledForViewSize=function(t){t.breakpoint&&(this.dockEnabled=
this._shouldDockAtCurrentViewSize(t))};A._getPageText=function(t,F){return this.featureNavigationVisible?N.substitute(this.messages.pageText,{index:F+1,total:t}):null};A._destroySpinner=function(){const {_spinner:t,view:F}=this;t&&(F&&F.ui&&F.ui.remove(this._spinner,"popup-spinner"),t.destroy(),this._spinner=null)};A._createSpinner=function(t){t&&(this._spinner=new h({view:t}),t.ui.add(this._spinner,{key:"popup-spinner",position:"manual"}))};A._toggleCollapsed=function(){this.collapsed=!this.collapsed};
A._close=function(){this.close();this.view&&this.view.focus()};A._toggleDockEnabled=function(){this.dockEnabled=!this.dockEnabled;this._focusDockButton=!0;this.scheduleRender()};A._toggleFeatureMenu=function(){const t=!this.featureMenuOpen;this._featureMenuOpenChanged(t);this.actionsMenuOpen=!1;this.featureMenuOpen=t};A._toggleActionsMenu=function(){const t=!this.actionsMenuOpen;this._actionsMenuOpenChanged(t);this.featureMenuOpen=!1;this.actionsMenuOpen=t};A._triggerAction=function(t){t=t.currentTarget["data-action-index"];
const F=this.viewModel.allActions.getItemAt(t);F&&"toggle"===F.type&&(F.value=!F.value);this.actionsMenuOpen=!1;this.viewModel.triggerAction(t)};A._selectFeature=function(t){t=t.currentTarget["data-feature-index"];isNaN(t)||(this.viewModel.selectedFeatureIndex=t);this.featureMenuOpen=!1;this._focusFeatureMenuButton=!0;this.scheduleRender()};A._next=function(){this.next()};A._previous=function(){this.previous()};p._createClass(ca,[{key:"actionsMenuId",get:function(){return`${this.id}-actions-menu`}},
{key:"actionsMenuButtonId",get:function(){return`${this.id}-actions-menu-button`}},{key:"featureMenuId",get:function(){return`${this.id}-feature-menu`}},{key:"titleId",get:function(){return`${this.id}-popup-title`}},{key:"contentId",get:function(){return`${this.id}-popup-content`}},{key:"hasContent",get:function(){var t,F,D,H,K,J,T;return!!(this.selectedFeatureWidget?(null==(t=this.selectedFeatureWidget)?0:null==(F=t.viewModel)?0:F.waitingForContent)||"error"===(null==(D=this.selectedFeatureWidget)?
void 0:null==(H=D.viewModel)?void 0:H.state)||(null==(K=this.selectedFeatureWidget)?0:null==(J=K.viewModel)?0:J.content):null==(T=this.viewModel)?0:T.content)}},{key:"featureNavigationVisible",get:function(){return this.viewModel.active&&1<this.viewModel.featureCount&&this.visibleElements.featureNavigation}},{key:"collapsible",get:function(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}},{key:"featureMenuVisible",get:function(){return this.featureNavigationVisible&&this.featureMenuOpen}},
{key:"contentCollapsed",get:function(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}},{key:"dividedActions",get:function(){return this._divideActions()}},{key:"actionsMenuOpen",get:function(){return this.viewModel.active?this._get("actionsMenuOpen"):!1},set:function(t){this._set("actionsMenuOpen",!!t)}},{key:"currentAlignment",get:function(){return this._getCurrentAlignment()}},{key:"currentDockPosition",get:function(){return this._getCurrentDockPosition()}},{key:"dockOptions",
get:function(){return this._get("dockOptions")||S},set:function(t){var F={...S};const D=this.get("viewModel.view.breakpoints");var H={};D&&(H.width=D.xsmall,H.height=D.xsmall);t={...F,...t};F={...F.breakpoint,...H};({breakpoint:H}=t);!0===H?t.breakpoint=F:"object"===typeof H&&(t.breakpoint={...F,...H});this._set("dockOptions",t);this._setCurrentDockPosition();this.reposition()}},{key:"selectedFeatureWidget",get:function(){const {_feature:t,visibleElements:F,headingLevel:D}=this,{selectedFeatureViewModel:H}=
this.viewModel,K={...F,title:!1};if(!H)return null;t?(t.viewModel=H,t.visibleElements=K):this._feature=new a({headingLevel:D+1,viewModel:H,visibleElements:K});return this._feature}}]);return ca}(r.FeatureContentMixin(u));c.__decorate([e.property({readOnly:!0})],f.prototype,"actionsMenuId",null);c.__decorate([e.property({readOnly:!0})],f.prototype,"actionsMenuButtonId",null);c.__decorate([e.property({readOnly:!0})],f.prototype,"featureMenuId",null);c.__decorate([e.property({readOnly:!0})],f.prototype,
"titleId",null);c.__decorate([e.property({readOnly:!0})],f.prototype,"contentId",null);c.__decorate([e.property({readOnly:!0})],f.prototype,"hasContent",null);c.__decorate([e.property({readOnly:!0})],f.prototype,"featureNavigationVisible",null);c.__decorate([e.property({readOnly:!0})],f.prototype,"collapsible",null);c.__decorate([e.property({readOnly:!0})],f.prototype,"featureMenuVisible",null);c.__decorate([e.property({readOnly:!0})],f.prototype,"contentCollapsed",null);c.__decorate([e.property({readOnly:!0})],
f.prototype,"dividedActions",null);c.__decorate([n.aliasOf("viewModel.actions")],f.prototype,"actions",void 0);c.__decorate([e.property()],f.prototype,"actionsMenuOpen",null);c.__decorate([e.property()],f.prototype,"alignment",void 0);c.__decorate([n.aliasOf("viewModel.autoCloseEnabled")],f.prototype,"autoCloseEnabled",void 0);c.__decorate([n.aliasOf("viewModel.autoOpenEnabled")],f.prototype,"autoOpenEnabled",void 0);c.__decorate([n.aliasOf("viewModel.defaultPopupTemplateEnabled")],f.prototype,"defaultPopupTemplateEnabled",
void 0);c.__decorate([n.aliasOf("viewModel.content")],f.prototype,"content",void 0);c.__decorate([e.property()],f.prototype,"collapsed",void 0);c.__decorate([e.property()],f.prototype,"collapseEnabled",void 0);c.__decorate([e.property({readOnly:!0})],f.prototype,"currentAlignment",null);c.__decorate([e.property({readOnly:!0})],f.prototype,"currentDockPosition",null);c.__decorate([e.property()],f.prototype,"dockOptions",null);c.__decorate([e.property()],f.prototype,"dockEnabled",void 0);c.__decorate([n.aliasOf("viewModel.featureCount")],
f.prototype,"featureCount",void 0);c.__decorate([e.property()],f.prototype,"featureMenuOpen",void 0);c.__decorate([n.aliasOf("viewModel.features")],f.prototype,"features",void 0);c.__decorate([n.aliasOf("viewModel.goToOverride")],f.prototype,"goToOverride",void 0);c.__decorate([e.property()],f.prototype,"headingLevel",void 0);c.__decorate([n.aliasOf("viewModel.highlightEnabled")],f.prototype,"highlightEnabled",void 0);c.__decorate([n.aliasOf("viewModel.location")],f.prototype,"location",void 0);c.__decorate([e.property({aliasOf:{source:"messages.widgetLabel",
overridable:!0}})],f.prototype,"label",void 0);c.__decorate([e.property()],f.prototype,"maxInlineActions",void 0);c.__decorate([e.property(),x.messageBundle("esri/widgets/Popup/t9n/Popup")],f.prototype,"messages",void 0);c.__decorate([e.property(),x.messageBundle("esri/t9n/common")],f.prototype,"messagesCommon",void 0);c.__decorate([n.aliasOf("viewModel.promises")],f.prototype,"promises",void 0);c.__decorate([n.aliasOf("viewModel.selectedFeature")],f.prototype,"selectedFeature",void 0);c.__decorate([n.aliasOf("viewModel.selectedFeatureIndex")],
f.prototype,"selectedFeatureIndex",void 0);c.__decorate([e.property({readOnly:!0})],f.prototype,"selectedFeatureWidget",null);c.__decorate([e.property()],f.prototype,"spinnerEnabled",void 0);c.__decorate([n.aliasOf("viewModel.title")],f.prototype,"title",void 0);c.__decorate([n.aliasOf("viewModel.updateLocationEnabled")],f.prototype,"updateLocationEnabled",void 0);c.__decorate([n.aliasOf("viewModel.view")],f.prototype,"view",void 0);c.__decorate([e.property({type:q}),v.vmEvent(["triggerAction","trigger-action"])],
f.prototype,"viewModel",void 0);c.__decorate([n.aliasOf("viewModel.visible")],f.prototype,"visible",void 0);c.__decorate([e.property()],f.prototype,"visibleElements",void 0);c.__decorate([d.cast("visibleElements")],f.prototype,"castVisibleElements",null);c.__decorate([m.accessibleHandler()],f.prototype,"_close",null);c.__decorate([m.accessibleHandler()],f.prototype,"_toggleDockEnabled",null);c.__decorate([m.accessibleHandler()],f.prototype,"_toggleFeatureMenu",null);c.__decorate([m.accessibleHandler()],
f.prototype,"_toggleActionsMenu",null);c.__decorate([m.accessibleHandler()],f.prototype,"_triggerAction",null);c.__decorate([m.accessibleHandler()],f.prototype,"_selectFeature",null);c.__decorate([m.accessibleHandler()],f.prototype,"_next",null);c.__decorate([m.accessibleHandler()],f.prototype,"_previous",null);return f=c.__decorate([b.subclass("esri.widgets.Popup")],f)})},"esri/core/throttle":function(){define(["exports"],function(p){function c(f,l,w,C){let z=null,G=1E3;"number"===typeof l?(G=l,
C=w):(z=null!=l?l:null,G=w);let E=0,y;const n=()=>{E=0;f.apply(C,y)};l=(...g)=>{z&&z.apply(C,g);y=g;G?E||(E=setTimeout(n,G)):n()};l.remove=()=>{E&&(clearTimeout(E),E=0)};l.forceUpdate=()=>{E&&(clearTimeout(E),n())};l.hasPendingUpdates=()=>!!E;return l}p["default"]=c;p.throttle=c;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/widgets/Feature":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/has ../core/accessorSupport/decorators/cast ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Feature/FeatureAttachments ./Feature/FeatureContent ./Feature/FeatureFields ./Feature/FeatureMedia ./Feature/FeatureViewModel ./Feature/support/FeatureContentMixin ./support/Heading ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory ../intl/substitute".split(" "),
function(p,c,f,l,w,C,z,G,E,y,n,g,d,e,b,a,h,u,r,q,k,m,x){const v={title:!0,content:!0,lastEditedInfo:!0};l=function(B){function L(M,S){M=B.call(this,M,S)||this;M._contentWidgets=[];M.graphic=null;M.defaultPopupTemplateEnabled=!1;M.headingLevel=2;M.label=void 0;M.messages=null;M.messagesCommon=null;M.messagesURIUtils=null;M.spatialReference=null;M.title=null;M.visibleElements={...v};M.map=null;M.view=null;M.viewModel=new h;return M}c._inheritsLoose(L,B);var N=L.prototype;N.initialize=function(){this.own(w.init(this,
"viewModel.contentViewModels",()=>this._setupContentWidgets()))};N.loadDependencies=function(){return new Promise(function(M,S){p(["../chunks/notice"],M,S)})};N.destroy=function(){this._destroyContentWidgets()};N.castVisibleElements=function(M){return{...v,...M}};N.render=function(){var {state:M}=this.viewModel;M=m.tsx("div",{class:"esri-feature__size-container",key:"container"},this.renderTitle(),"error"===M?this.renderError():"loading"===M?this.renderLoading():this.renderContentContainer());return m.tsx("div",
{class:this.classes("esri-feature","esri-widget")},M)};N.setActiveMedia=function(M,S){this.viewModel.setActiveMedia(M,S)};N.nextMedia=function(M){this.viewModel.nextMedia(M)};N.previousMedia=function(M){this.viewModel.previousMedia(M)};N.renderError=function(){const {messagesCommon:M,messages:S,visibleElements:I}=this;return m.tsx("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},I.title?m.tsx("div",{key:"error-title",slot:"title"},M.errorMessage):null,m.tsx("div",
{key:"error-message",slot:"message"},S.loadingError))};N.renderLoading=function(){return m.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},m.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")}))};N.renderContentContainer=function(){const {visibleElements:M}=this;return M.content?m.tsx("div",{class:"esri-feature__main-container"},[this.renderContent(),this.renderLastEditInfo()]):null};N.renderTitle=function(){const {visibleElements:M,
title:S}=this;return M.title?m.tsx(r.Heading,{level:this.headingLevel,class:"esri-feature__title",innerHTML:S}):null};N.renderContent=function(){var M=this.viewModel.content;return M?Array.isArray(M)?M.length?m.tsx("div",{key:"content-content-elements"},M.map(this.renderContentElement,this)):null:"string"===typeof M?(M=this._contentWidgets[0],!M||M.destroyed?null:m.tsx("div",{key:"content-content"},M.render())):this.renderNodeContent(M):null};N.renderContentElement=function(M,S){const {visibleElements:I}=
this;if("boolean"!==typeof I.content&&!I.content[M.type])return null;switch(M.type){case "attachments":return this.renderAttachments(S);case "custom":return this.renderCustom(M,S);case "fields":return this.renderFields(S);case "media":return this.renderMedia(S);case "text":return this.renderText(M,S);default:return null}};N.renderAttachments=function(M){const S=this._contentWidgets[M];if(!S||S.destroyed)return null;const {state:I,attachmentInfos:P}=S.viewModel;return"loading"===I||0<P.length?m.tsx("div",
{key:this._buildKey("attachments-element",M),class:this.classes("esri-feature__content-element")},S.render()):null};N.renderCustom=function(M,S){({creator:M}=M);const I=this._contentWidgets[S];return!I||I.destroyed?null:M?m.tsx("div",{key:this._buildKey("custom-element",S),class:"esri-feature__content-element"},I.render()):null};N.renderFields=function(M){const S=this._contentWidgets[M];return!S||S.destroyed?null:m.tsx("div",{key:this._buildKey("fields-element",M),class:"esri-feature__content-element"},
S.render())};N.renderMedia=function(M){const S=this._contentWidgets[M];return!S||S.destroyed?null:m.tsx("div",{key:this._buildKey("media-element",M),class:"esri-feature__content-element"},S.render())};N.renderLastEditInfo=function(){const {visibleElements:M,messages:S}=this;var {lastEditInfo:I}=this.viewModel;if(!I||!M.lastEditedInfo)return null;const {date:P,user:V}=I;I=x.substitute("edit"===I.type?V?S.lastEditedByUser:S.lastEdited:V?S.lastCreatedByUser:S.lastCreated,{date:P,user:V});return m.tsx("div",
{key:"edit-info-element",class:this.classes("esri-feature__last-edited-info","esri-feature__content-element")},I)};N.renderText=function(M,S){const I=this._contentWidgets[S];return!I||I.destroyed?null:M.text?m.tsx("div",{key:this._buildKey("text-element",S),class:this.classes("esri-feature__content-element","esri-feature__text")},I.render()):null};N._buildKey=function(M,...S){const I=this.get("viewModel.graphic.uid")||"0";S=S.join("-");return`${M}__${I}-${S}`};N._destroyContentWidgets=function(){this._contentWidgets.forEach(M=>
{M.viewModel=null;M&&!M.destroyed&&M.destroy()});this._contentWidgets=[]};N._setupContentWidgets=function(){this._destroyContentWidgets();const {headingLevel:M,visibleElements:S}=this;var I=this.get("viewModel.content");const {contentViewModels:P}=this.viewModel;Array.isArray(I)?I.forEach((V,ca)=>{"attachments"===V.type&&(this._contentWidgets[ca]=new d({displayType:V.displayType,headingLevel:S.title?M+1:M,viewModel:P[ca]}));"fields"===V.type&&(this._contentWidgets[ca]=new b({viewModel:P[ca]}));"media"===
V.type&&(this._contentWidgets[ca]=new a({viewModel:P[ca]}));"text"===V.type&&(this._contentWidgets[ca]=new e({viewModel:P[ca]}));"custom"===V.type&&(this._contentWidgets[ca]=new e({viewModel:P[ca]}))},this):(I=P[0])&&!I.destroyed&&(this._contentWidgets[0]=new e({viewModel:I}));this.scheduleRender()};return L}(u.FeatureContentMixin(g));f.__decorate([C.aliasOf("viewModel.graphic")],l.prototype,"graphic",void 0);f.__decorate([C.aliasOf("viewModel.defaultPopupTemplateEnabled")],l.prototype,"defaultPopupTemplateEnabled",
void 0);f.__decorate([y.property()],l.prototype,"headingLevel",void 0);f.__decorate([y.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],l.prototype,"label",void 0);f.__decorate([y.property(),k.messageBundle("esri/widgets/Feature/t9n/Feature")],l.prototype,"messages",void 0);f.__decorate([y.property(),k.messageBundle("esri/t9n/common")],l.prototype,"messagesCommon",void 0);f.__decorate([y.property(),k.messageBundle("esri/widgets/support/t9n/uriUtils")],l.prototype,"messagesURIUtils",
void 0);f.__decorate([C.aliasOf("viewModel.spatialReference")],l.prototype,"spatialReference",void 0);f.__decorate([C.aliasOf("viewModel.title")],l.prototype,"title",void 0);f.__decorate([y.property()],l.prototype,"visibleElements",void 0);f.__decorate([G.cast("visibleElements")],l.prototype,"castVisibleElements",null);f.__decorate([C.aliasOf("viewModel.map")],l.prototype,"map",void 0);f.__decorate([C.aliasOf("viewModel.view")],l.prototype,"view",void 0);f.__decorate([y.property({type:h})],l.prototype,
"viewModel",void 0);return l=f.__decorate([n.subclass("esri.widgets.Feature")],l)})},"esri/widgets/Feature/FeatureAttachments":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Attachments ../Widget ./FeatureAttachments/FeatureAttachmentsViewModel ./support/FeatureElementInfo ../support/widgetUtils ../support/jsxFactory".split(" "),
function(p,c,f,l,w,C,z,G,E,y,n,g,d,e,b){w=function(a){function h(r,q){r=a.call(this,r,q)||this;r._featureElementInfo=null;r.attachmentsWidget=new y;r.description=null;r.displayType=null;r.graphic=null;r.headingLevel=2;r.title=null;r.viewModel=new g;return r}p._inheritsLoose(h,a);var u=h.prototype;u.initialize=function(){this._featureElementInfo=new d;f.init(this,["viewModel.description","viewModel.title","headingLevel"],()=>this._setupFeatureElementInfo());f.init(this,"viewModel.graphic",r=>this.attachmentsWidget.graphic=
r)};u.destroy=function(){this.attachmentsWidget.destroy();this._featureElementInfo.destroy()};u.render=function(){var r;const {attachmentsWidget:q}=this;return b.tsx("div",{class:"esri-feature-attachments"},null==(r=this._featureElementInfo)?void 0:r.render(),null==q?void 0:q.render())};u._setupFeatureElementInfo=function(){const {description:r,title:q,headingLevel:k}=this;this._featureElementInfo.set({description:r,title:q,headingLevel:k})};return h}(n);c.__decorate([G.property({readOnly:!0})],w.prototype,
"attachmentsWidget",void 0);c.__decorate([l.aliasOf("viewModel.description")],w.prototype,"description",void 0);c.__decorate([l.aliasOf("attachmentsWidget.displayType")],w.prototype,"displayType",void 0);c.__decorate([l.aliasOf("viewModel.graphic")],w.prototype,"graphic",void 0);c.__decorate([G.property()],w.prototype,"headingLevel",void 0);c.__decorate([l.aliasOf("viewModel.title")],w.prototype,"title",void 0);c.__decorate([G.property({type:g})],w.prototype,"viewModel",void 0);return w=c.__decorate([E.subclass("esri.widgets.Feature.FeatureAttachments")],
w)})},"esri/widgets/Attachments":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/unitFormatUtils ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/has ../core/accessorSupport/decorators/cast ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Attachments/AttachmentsViewModel ./Attachments/support/attachmentUtils ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory".split(" "),
function(p,c,f,l,w,C,z,G,E,y,n,g,d,e,b,a,h){const u={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},r=window.CSS;z=function(q){function k(x,v){x=q.call(this,x,v)||this;x.abilities=null;x.displayType="list";x.graphic=null;x.label=void 0;x.messages=null;x.messagesUnits=null;x.selectedFile=null;x.submitting=!1;x.viewModel=new d;x.visibleElements={...u};x._supportsImageOrientation=r&&r.supports&&r.supports("image-orientation",
"from-image");x._addAttachmentForm=null;x._updateAttachmentForm=null;return x}p._inheritsLoose(k,q);var m=k.prototype;m.initialize=function(){this.own(w.on(this,"viewModel.attachmentInfos","change",()=>this.scheduleRender()),w.init(this,"viewModel.mode",()=>this._modeChanged()))};m.castVisibleElements=function(x){return{...u,...x}};m.addAttachment=function(){const {_addAttachmentForm:x,viewModel:v}=this;this._set("submitting",!0);this._set("error",null);return v.addAttachment(x).then(B=>{this._set("submitting",
!1);this._set("error",null);v.mode="view";return B}).catch(B=>{this._set("submitting",!1);this._set("error",new f("attachments:add-attachment",this.messages.addErrorMessage,B));throw B;})};m.deleteAttachment=function(x){const {viewModel:v}=this;this._set("submitting",!0);this._set("error",null);return v.deleteAttachment(x).then(B=>{this._set("submitting",!1);this._set("error",null);v.mode="view";return B}).catch(B=>{this._set("submitting",!1);this._set("error",new f("attachments:delete-attachment",
this.messages.deleteErrorMessage,B));throw B;})};m.updateAttachment=function(){const {viewModel:x}=this,{_updateAttachmentForm:v}=this;this._set("submitting",!0);this._set("error",null);return x.updateAttachment(v).then(B=>{this._set("submitting",!1);this._set("error",null);x.mode="view";return B}).catch(B=>{this._set("submitting",!1);this._set("error",new f("attachments:update-attachment",this.messages.updateErrorMessage,B));throw B;})};m.render=function(){const {submitting:x,viewModel:v}=this,{state:B}=
v;return h.tsx("div",{class:this.classes("esri-attachments","esri-widget")},x?this.renderProgressBar():null,"loading"===B?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())};m.renderErrorMessage=function(){const {error:x,visibleElements:v}=this;return x&&v.errorMessage?h.tsx("div",{key:"error-message",class:"esri-attachments__error-message"},x.message):null};m.renderAttachments=function(){const {mode:x,activeAttachmentInfo:v}=this.viewModel;return"add"===x?this.renderAddForm():
"edit"===x?this.renderDetailsForm(v):this.renderAttachmentContainer()};m.renderLoading=function(){return h.tsx("div",{class:"esri-attachments__loader-container",key:"loader"},h.tsx("div",{class:"esri-attachments__loader"}))};m.renderProgressBar=function(){return this.visibleElements.progressBar?h.tsx("div",{class:"esri-attachments__progress-bar",key:"progress-bar"}):null};m.renderAddForm=function(){const {submitting:x,selectedFile:v}=this;var B=x||!v,L=this.visibleElements.cancelAddButton?h.tsx("button",
{type:"button",bind:this,disabled:x,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--tertiary","esri-button--small","esri-button--half",x&&"esri-button--disabled")},this.messages.cancel):null;B=this.visibleElements.addSubmitButton?h.tsx("button",{type:"submit",disabled:B,class:this.classes("esri-button","esri-button--secondary","esri-button--small","esri-button--half",{["esri-button--disabled"]:B})},this.messages.add):null;const N=v?h.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},
v.name):null;L=h.tsx("form",{bind:this,afterCreate:b.storeNode,afterRemoved:b.discardNode,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},h.tsx("fieldset",{class:"esri-attachments__file-fieldset"},N,h.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},v?this.messages.changeFile:this.messages.selectFile,h.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),
B,L);return h.tsx("div",{key:"add-form-container",class:"esri-attachments__form-node"},L)};m.renderDetailsForm=function(x){const {visibleElements:v,viewModel:B,selectedFile:L,submitting:N}=this,{contentType:M,size:S,url:I}=x;var {abilities:P}=B,V=N||!L,ca=P.editing&&P.operations.delete&&v.deleteButton?h.tsx("button",{key:"delete-button",type:"button",disabled:N,bind:this,onclick:D=>this._submitDeleteAttachment(D,x),class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-attachments__delete-button",
{["esri-button--disabled"]:N})},this.messages.delete):null;V=P.editing&&P.operations.update&&v.updateButton?h.tsx("button",{disabled:V,key:"update-button",type:"submit",class:this.classes("esri-button","esri-button--small","esri-button--third",{["esri-button--disabled"]:V})},this.messages.update):null;const A=this.visibleElements.cancelUpdateButton?h.tsx("button",{disabled:N,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--small",
"esri-button--tertiary","esri-button--third",{["esri-button--disabled"]:N})},this.messages.cancel):null;var t=L?h.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},L.name):null;P=P.editing&&P.operations.update?h.tsx("fieldset",{key:"file",class:"esri-attachments__file-fieldset"},t,h.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},this.messages.changeFile,h.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",
bind:this,onchange:this._handleFileInputChange}))):null;t=h.tsx("fieldset",{key:"size",class:"esri-attachments__metadata-fieldset"},h.tsx("label",null,l.formatFileSize(this.messagesUnits,S)));const F=h.tsx("fieldset",{key:"content-type",class:"esri-attachments__metadata-fieldset"},h.tsx("label",null,M));ca=h.tsx("form",{bind:this,afterCreate:b.storeNode,afterRemoved:b.discardNode,"data-node-ref":"_updateAttachmentForm",onsubmit:this._submitUpdateAttachment},h.tsx("div",{class:"esri-attachments__metadata"},
t,F),P,h.tsx("div",{class:"esri-attachments__actions"},ca,A,V));return h.tsx("div",{key:"edit-form-container",class:"esri-attachments__form-node"},h.tsx("a",{class:"esri-attachments__item-link",href:I,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:x,size:400}),h.tsx("div",{class:"esri-attachments__item-link-overlay"},h.tsx("span",{class:"esri-attachments__item-link-overlay-icon"},h.tsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},h.tsx("path",
{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),h.tsx("path",{fill:"none",d:"M0 0h32v32H0z"}))))),ca)};m.renderImageMask=function({attachmentInfo:x,size:v}){var {supportsResizeAttachments:B}=this.viewModel;const {contentType:L,name:N,url:M}=x,S=B&&e.isSupportedImage(L);x=(x=this._getCSSTransform(x,S))?{transform:x,"image-orientation":"none"}:{};const I=-1===M.indexOf("?")?"?":"\x26";v=S?`${M}${I}w=${v}`:e.getIconPath(L);B={["esri-attachments__image--resizable"]:B};
return h.tsx("div",{class:this.classes({["esri-attachments__item-mask--icon"]:!S},"esri-attachments__item-mask")},h.tsx("img",{styles:x,alt:N,src:v,class:this.classes(B,"esri-attachments__image")}))};m.renderAttachmentInfo=function({attachmentInfo:x,displayType:v}){var {viewModel:B}=this;({abilities:B}=B);const {name:L,url:N}=x;v=this.renderImageMask({attachmentInfo:x,size:"list"===v?48:400});var M=B.editing?h.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-chevron-icon",
b.isRTL(this.container)?"esri-icon-left":"esri-icon-right")}):null;M=h.tsx("label",{class:"esri-attachments__label"},h.tsx("span",{class:"esri-attachments__filename"},L||this.messages.noTitle),M);v=[v,M];B=B.editing?h.tsx("button",{key:"details-button",bind:this,class:"esri-attachments__item-button",title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":x.id,onclick:()=>this._startEditAttachment(x),type:"button"},v):h.tsx("a",{key:"details-link",
class:"esri-attachments__item-button",href:N,target:"_blank"},v);return h.tsx("li",{class:"esri-attachments__item",key:x},B)};m.renderAttachmentContainer=function(){const {displayType:x,viewModel:v,visibleElements:B}=this,{attachmentInfos:L,abilities:N}=v;var M=L&&L.length;const S={["esri-attachments__container--list"]:"preview"!==x,["esri-attachments__container--preview"]:"preview"===x},I=N.editing&&N.operations.add&&B.addButton?h.tsx("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes("esri-button",
"esri-button--tertiary","esri-attachments__add-attachment-button"),type:"button"},h.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-add-icon","esri-icon-plus")}),this.messages.add):null;M=M?h.tsx("ul",{class:"esri-attachments__items"},L.toArray().map(P=>this.renderAttachmentInfo({attachmentInfo:P,displayType:x}))):h.tsx("div",{class:"esri-widget__content--empty"},this.messages.noAttachments);return h.tsx("div",{key:"attachments-container",class:this.classes("esri-attachments__container",
S)},M,I)};m._modeChanged=function(){this._set("error",null);this._set("selectedFile",null)};m._handleFileInputChange=function(x){x=(x=x.target)&&x.files&&x.files.item(0);this._set("selectedFile",x)};m._submitDeleteAttachment=function(x,v){x.preventDefault();this.deleteAttachment(v)};m._submitAddAttachment=function(x){x.preventDefault();this.addAttachment()};m._submitUpdateAttachment=function(x){x.preventDefault();this.updateAttachment()};m._startEditAttachment=function(x){const {viewModel:v}=this;
v.activeAttachmentInfo=x;v.mode="edit"};m._startAddAttachment=function(){this.viewModel.mode="add"};m._cancelForm=function(x){x.preventDefault();this.viewModel.mode="view"};m._getCSSTransform=function(x,v){({orientationInfo:x}=x);return!this._supportsImageOrientation&&v&&x?[x.rotation?`rotate(${x.rotation}deg)`:"",x.mirrored?"scaleX(-1)":""].join(" "):""};return k}(g);c.__decorate([C.aliasOf("viewModel.abilities")],z.prototype,"abilities",void 0);c.__decorate([y.property()],z.prototype,"displayType",
void 0);c.__decorate([C.aliasOf("viewModel.graphic")],z.prototype,"graphic",void 0);c.__decorate([y.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],z.prototype,"label",void 0);c.__decorate([y.property(),a.messageBundle("esri/widgets/Attachments/t9n/Attachments")],z.prototype,"messages",void 0);c.__decorate([y.property(),a.messageBundle("esri/core/t9n/Units")],z.prototype,"messagesUnits",void 0);c.__decorate([y.property({readOnly:!0})],z.prototype,"selectedFile",void 0);c.__decorate([y.property({readOnly:!0})],
z.prototype,"submitting",void 0);c.__decorate([y.property({readOnly:!0})],z.prototype,"error",void 0);c.__decorate([y.property({type:d})],z.prototype,"viewModel",void 0);c.__decorate([y.property()],z.prototype,"visibleElements",void 0);c.__decorate([G.cast("visibleElements")],z.prototype,"castVisibleElements",null);return z=c.__decorate([n.subclass("esri.widgets.Attachments")],z)})},"esri/core/unitFormatUtils":function(){define(["exports","./mathUtils","./string","./unitUtils","../intl/number"],function(p,
c,f,l,w){function C(E,y,n){return E.units[y][n]}function z(E,y,n,g=2,d="abbr"){return`${w.formatNumber(y,{minimumFractionDigits:g,maximumFractionDigits:g})} ${C(E,n,d)}`}const G=["B","kB","MB","GB","TB"];p.formatAngleDegrees=function(E,y,n=2){E=l.convertUnit(E,y,"degrees");return w.formatNumber(E,{style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:n,minimumFractionDigits:n})};p.formatDMS=function(E,y,n=2){E=l.convertUnit(E,y,"degrees");y=E-Math.floor(E);E-=y;y*=60;let g=y-Math.floor(y);
y-=g;g*=60;return`${E.toFixed()}\u00b0 ${y.toFixed()}' ${g.toFixed(n)}"`};p.formatDecimal=z;p.formatFileSize=function(E,y){let n=0===y?0:Math.floor(Math.log(y)/Math.log(1024));n=c.clamp(n,0,G.length-1);y=w.formatNumber(y/1024**n,{maximumFractionDigits:2});return f.replace(E.units.bytes[G[n]],{fileSize:y})};p.formatImperialArea=function(E,y,n,g=2,d="abbr"){const e=l.preferredImperialAreaUnit(y,n);return z(E,l.convertUnit(y,n,e),e,g,d)};p.formatImperialLength=function(E,y,n,g=2,d="abbr"){const e=l.preferredImperialLengthUnit(y,
n);return z(E,l.convertUnit(y,n,e),e,g,d)};p.formatImperialVerticalLength=function(E,y,n,g=2,d="abbr"){const e=l.preferredImperialVerticalLengthUnit(y,n);return z(E,l.convertUnit(y,n,e),e,g,d)};p.formatMetricArea=function(E,y,n,g=2,d="abbr"){const e=l.preferredMetricAreaUnit(y,n);return z(E,l.convertUnit(y,n,e),e,g,d)};p.formatMetricLength=function(E,y,n,g=2,d="abbr"){const e=l.preferredMetricLengthUnit(y,n);return z(E,l.convertUnit(y,n,e),e,g,d)};p.formatMetricVerticalLength=function(E,y,n,g=2,d=
"abbr"){const e=l.preferredMetricVerticalLengthUnit(y,n);return z(E,l.convertUnit(y,n,e),e,g,d)};p.unitName=C;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/widgets/Attachments/AttachmentsViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../core/Collection ../../core/Error ../../core/HandleOwner ../../core/maybe ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/decorators/cast ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../rest/query/support/AttachmentInfo ../../rest/support/AttachmentQuery ../Feature/support/featureUtils".split(" "),
function(p,c,f,l,w,C,z,G,E,y,n,g,d,e,b,a){const h={editing:!1,operations:{add:!0,update:!0,delete:!0}},u=l.ofType(e);l=function(r){function q(m){var x=r.call(this,m)||this;x._getAttachmentsPromise=null;x._attachmentLayer=null;x.abilities={...h};x.activeAttachmentInfo=null;x.attachmentInfos=new u;x.graphic=null;x.mode="view";x.handles.add([G.init(p._assertThisInitialized(x),"graphic",()=>x._graphicChanged())]);return x}p._inheritsLoose(q,r);var k=q.prototype;k.destroy=function(){this.graphic=this._attachmentLayer=
null};k.castAbilities=function(m){return{...h,...m}};k.getAttachments=function(){var m=p._asyncToGenerator(function*(){const {_attachmentLayer:x,attachmentInfos:v}=this;if(!x||"function"!==typeof x.queryAttachments)throw new w("invalid-layer","getAttachments(): A valid layer is required.");const B=this._getFeatureId();var L=new b({objectIds:[B],returnMetadata:!0});const N=[];this._getAttachmentsPromise=L=x.queryAttachments(L).then(M=>M[B]||N).catch(()=>N);this.notifyChange("state");L=yield L;v.removeAll();
L.length&&v.addMany(L);this._getAttachmentsPromise=null;this.notifyChange("state");return L});return function(){return m.apply(this,arguments)}}();k.addAttachment=function(){var m=p._asyncToGenerator(function*(x){const {_attachmentLayer:v,attachmentInfos:B,graphic:L,abilities:N}=this;if(!x)throw new w("invalid-attachment","addAttachment(): An attachment is required.",{attachment:x});if(!N.operations.add)throw new w("invalid-abilities","addAttachment(): add abilities are required.");if(!v||"function"!==
typeof v.addAttachment)throw new w("invalid-layer","addAttachment(): A valid layer is required.");x=yield v.addAttachment(L,x).then(M=>this._queryAttachment(M.objectId));B.add(x);return x});return function(x){return m.apply(this,arguments)}}();k.deleteAttachment=function(){var m=p._asyncToGenerator(function*(x){const {_attachmentLayer:v,attachmentInfos:B,graphic:L,abilities:N}=this;if(!x)throw new w("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:x});
if(!N.operations.delete)throw new w("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!v||"function"!==typeof v.deleteAttachments)throw new w("invalid-layer","deleteAttachment(): A valid layer is required.");const M=yield v.deleteAttachments(L,[x.id]).then(()=>x);B.remove(M);return M});return function(x){return m.apply(this,arguments)}}();k.updateAttachment=function(){var m=p._asyncToGenerator(function*(x,v=this.activeAttachmentInfo){const {_attachmentLayer:B,attachmentInfos:L,
graphic:N,abilities:M}=this;if(!x)throw new w("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:x});if(!v)throw new w("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:v});if(!M.operations.update)throw new w("invalid-abilities","updateAttachment(): Update abilities are required.");const S=L.findIndex(I=>I===v);if(!B||"function"!==typeof B.updateAttachment)throw new w("invalid-layer","updateAttachment(): A valid layer is required.");
x=yield B.updateAttachment(N,v.id,x).then(I=>this._queryAttachment(I.objectId));L.splice(S,1,x);return x});return function(x){return m.apply(this,arguments)}}();k._queryAttachment=function(){var m=p._asyncToGenerator(function*(x){if(!x)throw new w("invalid-attachment-id","Could not query attachment.");const {_attachmentLayer:v}=this,B=this._getFeatureId();x=new b({objectIds:[B],attachmentsWhere:`AttachmentId=${x}`,returnMetadata:!0});return v.queryAttachments(x).then(L=>L[B][0])});return function(x){return m.apply(this,
arguments)}}();k._getFeatureId=function(){const {_attachmentLayer:m,graphic:x}=this;if(!m||!x)return null;const {objectIdField:v}=m,{attributes:B}=x;return B&&B[v]};k._graphicChanged=function(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))};k._setAttachmentLayer=function(){var {graphic:m}=this;this._attachmentLayer=(m=a.getSourceLayer(m))?"scene"===m.type&&z.isSome(m.associatedLayer)?m.associatedLayer:m:null};p._createClass(q,[{key:"state",get:function(){return this._getAttachmentsPromise?
"loading":this.graphic?"ready":"disabled"}},{key:"supportsResizeAttachments",get:function(){return this.get("graphic.layer.capabilities.operations.supportsResizeAttachments")||!1}}]);return q}(C.HandleOwner);c.__decorate([E.property()],l.prototype,"abilities",void 0);c.__decorate([n.cast("abilities")],l.prototype,"castAbilities",null);c.__decorate([E.property()],l.prototype,"activeAttachmentInfo",void 0);c.__decorate([E.property({readOnly:!0,type:u})],l.prototype,"attachmentInfos",void 0);c.__decorate([E.property({type:f})],
l.prototype,"graphic",void 0);c.__decorate([E.property()],l.prototype,"mode",void 0);c.__decorate([E.property({readOnly:!0})],l.prototype,"state",null);c.__decorate([E.property({readOnly:!0})],l.prototype,"supportsResizeAttachments",null);return l=c.__decorate([d.subclass("esri.widgets.Attachments.AttachmentsViewModel")],l)})},"esri/widgets/Feature/support/featureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../intl ../../../core/Logger ../../../core/maybe ../../../core/string ../../../intl/date ../../../intl/number ../../../layers/support/fieldUtils ../../../popup/support/FieldInfoFormat ../../../support/arcadeOnDemand".split(" "),
function(p,c,f,l,w,C,z,G,E,y,n){function g(){g=c._asyncToGenerator(function*(Z,ba){return"function"===typeof Z?Z.call(null,ba):Z});return g.apply(this,arguments)}function d(Z){return J.test(Z)}function e(Z,ba){if(!d(ba)||!Z)return null;const fa=ba.replace(J,"").toLowerCase();let na;Z.some(O=>O.name.toLowerCase()===fa?(na=O,!0):!1);return na}function b(Z,ba){return(ba=a(ba,Z))?ba.name:Z}function a(Z,ba){return Z&&"function"===typeof Z.getField?Z.getField(ba):null}function h({formattedAttributes:Z,
template:ba,fieldInfoMap:fa}){return`${C.replace(C.replace(ba,na=>{{const O=fa.get(na.toLowerCase());na=`{${O&&O.fieldName||na}}`}return na}),Z).replace(D,"")}`.trim()}function u(Z,ba,fa=!1){const na=ba[Z];"string"===typeof na&&(fa=(fa?encodeURIComponent(na):na).replace(K,"%27"),ba[Z]=fa)}function r(Z,ba=!1){const fa={...Z};Object.keys(fa).forEach(na=>u(na,fa,ba));return fa}function q(Z,ba){return Z.replace(H,(fa,na,O)=>(fa=a(ba,O))?`{${fa.name}}`:na)}function k(Z,ba,fa){return(Z=q(Z,fa))?Z.replace(da,
(na,O,W)=>{O=`${O||W}`.trim();return C.replace(na,r(ba,O&&"{"!==O[0]))}):Z}function m(Z,ba){var fa=ba.fieldName,na=x(ba.fieldInfos,fa),O=null==na?void 0:na.clone();na=ba.preventPlacesFormatting;ba=ba.layer;fa=a(ba,fa);if(O&&"date"===(null==fa?void 0:fa.type)){fa=O.format||new y;fa.dateFormat=fa.dateFormat||"short-date-short-time";var W;if(!(W="feature"===(null==ba?void 0:ba.type)&&ba.datesInUnknownTimezone)){if(W=!(null==ba||!ba.layer))W=ba.layer,W="map-image"===(null==W?void 0:W.type);W=W&&ba.layer.datesInUnknownTimezone}fa.dateTimeFormatOptions=
W?{timeZone:"UTC"}:null;O.format=fa}O=O&&O.format;"string"!==typeof Z||!O||null!=O.dateFormat||null==O.places&&null==O.digitSeparator||(ba=Number(Z),isNaN(ba)||(Z=ba));return"string"===typeof Z||null==Z||null==O?Z:na?G.formatNumber(Z,{...G.convertNumberFormatToIntlOptions(O),minimumFractionDigits:0,maximumFractionDigits:20}):O.format(Z)}function x(Z,ba){if(Z&&Z.length&&ba){var fa=ba.toLowerCase(),na=void 0;Z.some(O=>O.fieldName&&O.fieldName.toLowerCase()===fa?(na=O,!0):!1);return na}}function v({fieldName:Z,
graphic:ba,layer:fa}){if(ca(Z)||!fa||"function"!==typeof fa.getFeatureType)return null;const {typeIdField:na}=fa;return na&&Z===na?(Z=fa.getFeatureType(ba))?Z.name:null:null}function B({fieldName:Z,value:ba,graphic:fa,layer:na}){return ca(Z)||!na||"function"!==typeof na.getFieldDomain?null:(Z=na.getFieldDomain(Z,{feature:fa}))&&"coded-value"===Z.type?Z.getName(ba):null}function L(Z){return"string"===typeof Z?Z.replace(T,'\x3cbr class\x3d"esri-text-new-line" /\x3e'):Z}function N(Z){const {value:ba,
fieldName:fa,fieldInfos:na,fieldInfoMap:O,layer:W,graphic:aa}=Z;return null==ba?"":(Z=B({fieldName:fa,value:ba,graphic:aa,layer:W}))||(Z=v({fieldName:fa,graphic:aa,layer:W}))?Z:O.get(fa.toLowerCase())?m(ba,{fieldInfos:na,fieldName:fa,layer:W}):(Z=W&&W.fieldsIndex)&&Z.isDateField(fa)?z.formatDate(ba,ia):L(ba)}function M(Z,ba){return S.apply(this,arguments)}function S(){S=c._asyncToGenerator(function*(Z,ba){var fa,na;const {layer:O,graphic:W,outFields:aa,objectIds:ea,returnGeometry:la,spatialReference:pa}=
Z;Z=ea[0];if("number"!==typeof Z&&"string"!==typeof Z)return F.warn("Could not query required fields for the specified feature. The feature's ID is invalid.",{layer:O,graphic:W,objectId:Z,requiredFields:aa}),null;if(null==(fa=O.capabilities)||null==(na=fa.operations)||!na.supportsQuery)return F.warn("The specified layer cannot be queried. The following fields will not be available.",{layer:O,graphic:W,requiredFields:aa,returnGeometry:la}),null;fa=O.createQuery();fa.objectIds=ea;fa.outFields=null!=
aa&&aa.length?aa:[O.objectIdField];fa.returnGeometry=!!la;fa.returnZ=!!la;fa.returnM=!!la;fa.outSpatialReference=pa;return(yield O.queryFeatures(fa,ba)).features[0]});return S.apply(this,arguments)}function I(Z){return P.apply(this,arguments)}function P(){P=c._asyncToGenerator(function*(Z){var ba;if(null==(ba=Z.expressionInfos)||!ba.length)return!1;ba=yield n.loadArcade();({arcadeUtils:{hasGeometryFunctions:ba}}=ba);return ba(Z)});return P.apply(this,arguments)}function V(){V=c._asyncToGenerator(function*({graphic:Z,
popupTemplate:ba,layer:fa,spatialReference:na},O){if(fa&&ba&&("function"===typeof fa.load&&(yield fa.load(O)),Z.attributes)){var W=Z.attributes[fa.objectIdField];if(null!=W){W=[W];var aa=yield ba.getRequiredFields(fa.fieldsIndex),ea=E.featureHasFields(aa,Z);aa=ea?[]:aa;ba=ba.returnGeometry||(yield I(ba));if(!ea||ba)if(fa=yield M({layer:fa,graphic:Z,outFields:aa,objectIds:W,returnGeometry:ba,spatialReference:na},O))fa.geometry&&(Z.geometry=fa.geometry),fa.attributes&&(Z.attributes={...Z.attributes,
...fa.attributes})}}});return V.apply(this,arguments)}function ca(Z=""){return Z?-1!==Z.indexOf("relationships/"):!1}function A({attributes:Z,graphic:ba,relatedInfo:fa}){Z&&ba&&fa&&Object.keys(ba.attributes).forEach(na=>{var O={layerId:fa.relation.id.toString(),fieldName:na};Z[O?`${"relationships/"}${O.layerId}/${O.fieldName}`:""]=ba.attributes[na]})}function t(Z,ba){Z&&ba&&(ba.relatedFeatures&&ba.relatedFeatures&&ba.relatedFeatures.forEach(fa=>A({attributes:Z,graphic:fa,relatedInfo:ba})),ba.relatedStatsFeatures&&
ba.relatedStatsFeatures&&ba.relatedStatsFeatures.forEach(fa=>A({attributes:Z,graphic:fa,relatedInfo:ba})))}const F=l.getLogger("esri.widgets.Feature.support.featureUtils"),D=/href=(""|'')/gi,H=/(\{([^\{\r\n]+)\})/g,K=/'/g,J=/^\s*expression\//i,T=/(\n)/gi,Y=/[\u00A0-\u9999<>&]/gim,da=/href\s*=\s*(?:"([^"]+)"|'([^']+)')/gi,ha=/^(?:mailto:|tel:)/,ia=z.convertDateFormatToIntlOptions("short-date-short-time"),oa=Z=>{if(!Z)return!1;Z=Z.toUpperCase();return-1<Z.indexOf("CURRENT_TIMESTAMP")||-1<Z.indexOf("CURRENT_DATE")||
-1<Z.indexOf("CURRENT_TIME")},ma=({layer:Z,method:ba,query:fa,definitionExpression:na})=>{var O,W;null!=(O=Z.capabilities)&&null!=(W=O.query)&&W.supportsCacheHint&&"attachments"!==ba&&(Z=w.isSome(fa.where)&&fa.where,ba=w.isSome(fa.geometry)&&fa.geometry,oa(na)||oa(Z)||"extent"===(null==ba?void 0:ba.type)||"tile"===fa.resultType||(fa.cacheHint=!0))};p.applyTextFormattingHTML=L;p.createfieldInfoMap=function(Z,ba){const fa=new Map;Z&&Z.forEach(na=>{const O=b(na.fieldName,ba);na.fieldName=O;fa.set(O.toLowerCase(),
na)});return fa};p.fixTokens=q;p.formatAttributes=function({fieldInfos:Z,attributes:ba,layer:fa,graphic:na,fieldInfoMap:O,relatedInfos:W}){const aa={...ba};null==W?void 0:W.forEach(ea=>t(aa,ea));Object.keys(aa).forEach(ea=>{aa[ea]=N({fieldName:ea,fieldInfos:Z,fieldInfoMap:O,layer:fa,value:aa[ea],graphic:na})});return aa};p.formatEditInfo=function(Z,ba){const {creatorField:fa,creationDateField:na,editorField:O,editDateField:W}=Z;if(ba){Z=ba[W];if("number"===typeof Z)return ba=ba[O],{type:"edit",date:z.formatDate(Z,
ia),user:ba};Z=ba[na];return"number"===typeof Z?(ba=ba[fa],{type:"create",date:z.formatDate(Z,ia),user:ba}):null}};p.formatValueToFieldInfo=m;p.getAllFieldInfos=function(Z){const ba=[];if(!Z)return ba;const {fieldInfos:fa,content:na}=Z;fa&&ba.push(...fa);if(!na||!Array.isArray(na))return ba;na.forEach(O=>{"fields"===O.type&&(O=O&&O.fieldInfos)&&ba.push(...O)});return ba};p.getFieldInfo=x;p.getFieldInfoLabel=function(Z,ba){return(ba=e(ba,null==Z?void 0:Z.fieldName))?ba.title||null:Z?Z.label||Z.fieldName:
null};p.getFixedFieldName=b;p.getFixedFieldNames=function(Z,ba){return Z&&Z.map(fa=>b(fa,ba))};p.getSourceLayer=function(Z){if(!w.isNone(Z))return Z.get("sourceLayer")||Z.get("layer")};p.graphicCallback=function(Z,ba){return g.apply(this,arguments)};p.htmlEntities=function(Z){return Z.replace(Y,ba=>`&#${ba.charCodeAt(0)};`)};p.isExpressionField=d;p.isRelatedField=ca;p.preLayerQueryCallback=({query:Z,layer:ba,method:fa})=>{ma({layer:ba,method:fa,query:Z,definitionExpression:`${ba.definitionExpression} ${ba.serviceDefinitionExpression}`})};
p.preRequestCallback=({queryPayload:Z,layer:ba,method:fa})=>{ma({layer:ba,method:fa,query:Z,definitionExpression:`${ba.definitionExpression} ${ba.serviceDefinitionExpression}`})};p.queryUpdatedFeature=function(Z,ba){return V.apply(this,arguments)};p.shouldOpenInNewTab=function(Z=""){if(Z)return!ha.test(Z.trim().toLowerCase())};p.substituteAttributes=h;p.substituteFieldsInLinksAndAttributes=function({attributes:Z,globalAttributes:ba,layer:fa,text:na,expressionAttributes:O,fieldInfoMap:W}){return na?
h({formattedAttributes:ba,template:k(na,{...ba,...O,...Z},fa),fieldInfoMap:W}):""};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/widgets/Attachments/support/attachmentUtils":function(){define(["exports","../../../assets"],function(p,c){p.getIconPath=function(f){const l=c.getAssetUrl("esri/themes/base/images/files/");return f?"text/plain"===f?`${l}text-32.svg`:"application/pdf"===f?`${l}pdf-32.svg`:"text/csv"===f?`${l}csv-32.svg`:"application/gpx+xml"===f?`${l}gpx-32.svg`:"application/x-dwf"===
f?`${l}cad-32.svg`:"application/postscript"===f||"application/json"===f||"text/xml"===f||"model/vrml"===f?`${l}code-32.svg`:"application/x-zip-compressed"===f||"application/x-7z-compressed"===f||"application/x-gzip"===f||"application/x-tar"===f||"application/x-gtar"===f||"application/x-bzip2"===f||"application/gzip"===f||"application/x-compress"===f||"application/x-apple-diskimage"===f||"application/x-rar-compressed"===f||"application/zip"===f?`${l}zip-32.svg`:-1!==f.indexOf("image/")?`${l}image-32.svg`:
-1!==f.indexOf("audio/")?`${l}sound-32.svg`:-1!==f.indexOf("video/")?`${l}video-32.svg`:-1!==f.indexOf("msexcel")||-1!==f.indexOf("ms-excel")||-1!==f.indexOf("spreadsheetml")?`${l}excel-32.svg`:-1!==f.indexOf("msword")||-1!==f.indexOf("ms-word")||-1!==f.indexOf("wordprocessingml")?`${l}word-32.svg`:-1!==f.indexOf("powerpoint")||-1!==f.indexOf("presentationml")?`${l}report-32.svg`:`${l}generic-32.svg`:`${l}generic-32.svg`};p.isSupportedImage=function(f){f=f.toLowerCase();return"image/bmp"===f||"image/emf"===
f||"image/exif"===f||"image/gif"===f||"image/x-icon"===f||"image/jpeg"===f||"image/png"===f||"image/tiff"===f||"image/x-wmf"===f};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureAttachments/FeatureAttachmentsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ../../Attachments/AttachmentsViewModel".split(" "),
function(p,c,f,l,w,C,z,G){l=function(E){function y(n){n=E.call(this,n)||this;n.description=null;n.title=null;return n}p._inheritsLoose(y,E);return y}(G);c.__decorate([f.property()],l.prototype,"description",void 0);c.__decorate([f.property()],l.prototype,"title",void 0);return l=c.__decorate([z.subclass("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],l)})},"esri/widgets/Feature/support/FeatureElementInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ../../Widget ../../support/Heading ../../support/widgetUtils ../../support/jsxFactory".split(" "),
function(p,c,f,l,w,C,z,G,E,y,n){l=function(g){function d(b,a){b=g.call(this,b,a)||this;b.description=null;b.headingLevel=2;b.title=null;return b}p._inheritsLoose(d,g);var e=d.prototype;e.render=function(){return n.tsx("div",{class:"esri-feature-element-info"},this.renderTitle(),this.renderDescription())};e.renderTitle=function(){const {title:b}=this;return b?n.tsx(E.Heading,{level:this.headingLevel,class:"esri-feature-element-info__title"},b):null};e.renderDescription=function(){const {description:b}=
this;return b?n.tsx("div",{key:"description",class:"esri-feature-element-info__description"},b):null};return d}(G);c.__decorate([f.property()],l.prototype,"description",void 0);c.__decorate([f.property()],l.prototype,"headingLevel",void 0);c.__decorate([f.property()],l.prototype,"title",void 0);return l=c.__decorate([z.subclass("esri.widgets.Feature.support.FeatureElementInfo")],l)})},"esri/widgets/support/Heading":function(){define("exports ../../core/mathUtils ./widgetUtils ../../core/has ../../core/Logger ./jsxFactory".split(" "),
function(p,c,f,l,w,C){const z={heading:"esri-widget__heading"};p.CSS=z;p.Heading=function(G,E){const y=`h${c.clamp(Math.ceil(G.level),1,6)}`;delete G.level;return C.tsx(y,{...G,class:f.classes(z.heading,G.class)},E)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/aliasOf ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent/FeatureContentViewModel ./support/featureUtils ../support/widget ../support/jsxFactory".split(" "),
function(p,c,f,l,w,C,z,G,E,y,n,g,d){l=function(e){function b(h,u){h=e.call(this,h,u)||this;h.creator=null;h.graphic=null;h.viewModel=null;h._addTargetToAnchors=r=>{Array.from(r.querySelectorAll("a")).forEach(q=>{n.shouldOpenInNewTab(q.href)&&!q.hasAttribute("target")&&q.setAttribute("target","_blank")})};return h}p._inheritsLoose(b,e);var a=b.prototype;a.renderLoading=function(){return d.tsx("div",{class:"esri-feature-content__loader-container",key:"loader"},d.tsx("div",{class:"esri-feature-content__loader"}))};
a.renderCreated=function(){var h;const u=null==(h=this.viewModel)?void 0:h.created;return u?u instanceof HTMLElement?d.tsx("div",{key:u,bind:u,afterCreate:this._attachToNode}):g.isWidget(u)?d.tsx("div",{key:u},!u.destroyed&&u.render()):d.tsx("div",{key:u,innerHTML:u,afterCreate:this._addTargetToAnchors}):null};a.render=function(){var h;const u=null==(h=this.viewModel)?void 0:h.state;return d.tsx("div",{class:"esri-feature-content"},"loading"===u?this.renderLoading():this.renderCreated())};a._attachToNode=
function(h){h.appendChild(this)};return b}(E);c.__decorate([f.aliasOf("viewModel.creator")],l.prototype,"creator",void 0);c.__decorate([f.aliasOf("viewModel.graphic")],l.prototype,"graphic",void 0);c.__decorate([z.property({type:y})],l.prototype,"viewModel",void 0);return l=c.__decorate([G.subclass("esri.widgets.Feature.FeatureContent")],l)})},"esri/widgets/Feature/FeatureContent/FeatureContentViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/HandleOwner ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ../support/featureUtils".split(" "),
function(p,c,f,l,w,C,z,G,E,y,n,g){l=function(d){function e(a){var h=d.call(this,a)||this;h._loadingPromise=null;h.created=null;h.creator=null;h.destroyer=null;h.graphic=null;h.handles.add(C.init(p._assertThisInitialized(h),"creator",u=>{h._destroyContent();h._createContent(u)}));return h}p._inheritsLoose(e,d);var b=e.prototype;b.destroy=function(){this._destroyContent()};b._destroyContent=function(){const {created:a,graphic:h,destroyer:u}=this;a&&(g.graphicCallback(u,{graphic:h}).catch(()=>null),
this._set("created",null))};b._createContent=function(){var a=p._asyncToGenerator(function*(h){var {graphic:u}=this;this._loadingPromise=h=g.graphicCallback(h,{graphic:u}).catch(()=>null);this.notifyChange("state");u=yield h;h===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",u))});return function(h){return a.apply(this,arguments)}}();p._createClass(e,[{key:"state",get:function(){return this._loadingPromise?"loading":"ready"}}]);return e}(w.HandleOwnerMixin(l));
c.__decorate([z.property({readOnly:!0})],l.prototype,"created",void 0);c.__decorate([z.property()],l.prototype,"creator",void 0);c.__decorate([z.property()],l.prototype,"destroyer",void 0);c.__decorate([z.property({type:f})],l.prototype,"graphic",void 0);c.__decorate([z.property({readOnly:!0})],l.prototype,"state",null);return l=c.__decorate([n.subclass("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],l)})},"esri/widgets/Feature/FeatureFields":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureFields/FeatureFieldsViewModel ./support/FeatureElementInfo ../support/uriUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory".split(" "),
function(p,c,f,l,w,C,z,G,E,y,n,g,d,e,b,a){w=function(h){function u(q,k){q=h.call(this,q,k)||this;q._featureElementInfo=null;q.attributes=null;q.description=null;q.expressionInfos=null;q.fieldInfos=null;q.title=null;q.viewModel=new n;q.messages=null;q.messagesURIUtils=null;return q}p._inheritsLoose(u,h);var r=u.prototype;r.initialize=function(){this._featureElementInfo=new g;f.init(this,["viewModel.description","viewModel.title"],()=>this._setupFeatureElementInfo())};r.destroy=function(){this._featureElementInfo.destroy()};
r.renderFieldInfo=function(q,k){var {attributes:m}=this.viewModel;const x=q.fieldName,v=q.label||x;m=m?null==m[x]?"":m[x]:"";q=!(!q.format||!q.format.dateFormat);m="number"!==typeof m||q?d.autoLink(this.messagesURIUtils,m):this._forceLTR(m);q={["esri-feature-fields__field-data--date"]:q};return a.tsx("tr",{key:`fields-element-info-row-${x}-${k}`},a.tsx("th",{key:`fields-element-info-row-header-${x}-${k}`,class:"esri-feature-fields__field-header",innerHTML:v}),a.tsx("td",{key:`fields-element-info-row-data-${x}-${k}`,
class:this.classes("esri-feature-fields__field-data",q),innerHTML:m}))};r.renderFields=function(){const {formattedFieldInfos:q}=this.viewModel;return null!=q&&q.length?a.tsx("table",{class:"esri-widget__table",summary:this.messages.fieldsSummary},a.tsx("tbody",null,q.map((k,m)=>this.renderFieldInfo(k,m)))):null};r.render=function(){var q;return a.tsx("div",{class:"esri-feature-fields"},null==(q=this._featureElementInfo)?void 0:q.render(),this.renderFields())};r._setupFeatureElementInfo=function(){const {description:q,
title:k}=this;this._featureElementInfo.set({description:q,title:k})};r._forceLTR=function(q){return`&lrm;${q}`};return u}(y);c.__decorate([l.aliasOf("viewModel.attributes")],w.prototype,"attributes",void 0);c.__decorate([l.aliasOf("viewModel.description")],w.prototype,"description",void 0);c.__decorate([l.aliasOf("viewModel.expressionInfos")],w.prototype,"expressionInfos",void 0);c.__decorate([l.aliasOf("viewModel.fieldInfos")],w.prototype,"fieldInfos",void 0);c.__decorate([l.aliasOf("viewModel.title")],
w.prototype,"title",void 0);c.__decorate([G.property({type:n})],w.prototype,"viewModel",void 0);c.__decorate([G.property(),b.messageBundle("esri/widgets/Feature/t9n/Feature")],w.prototype,"messages",void 0);c.__decorate([G.property(),b.messageBundle("esri/widgets/support/t9n/uriUtils")],w.prototype,"messagesURIUtils",void 0);return w=c.__decorate([E.subclass("esri.widgets.Feature.FeatureFields")],w)})},"esri/widgets/Feature/FeatureFields/FeatureFieldsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ../../../popup/ExpressionInfo ../../../popup/FieldInfo ../support/featureUtils".split(" "),
function(p,c,f,l,w,C,z,G,E,y,n){f=function(g){function d(e){e=g.call(this,e)||this;e.attributes=null;e.expressionInfos=null;e.description=null;e.fieldInfos=null;e.title=null;return e}p._inheritsLoose(d,g);p._createClass(d,[{key:"formattedFieldInfos",get:function(){const {expressionInfos:e,fieldInfos:b}=this,a=[];null==b?void 0:b.forEach(h=>{if(!h.hasOwnProperty("visible")||h.visible)h=h.clone(),h.label=n.getFieldInfoLabel(h,e),a.push(h)});return a}}]);return d}(f);c.__decorate([l.property()],f.prototype,
"attributes",void 0);c.__decorate([l.property({type:[E]})],f.prototype,"expressionInfos",void 0);c.__decorate([l.property()],f.prototype,"description",void 0);c.__decorate([l.property({type:[y]})],f.prototype,"fieldInfos",void 0);c.__decorate([l.property({readOnly:!0})],f.prototype,"formattedFieldInfos",null);c.__decorate([l.property()],f.prototype,"title",void 0);return f=c.__decorate([G.subclass("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],f)})},"esri/widgets/support/uriUtils":function(){define(["exports",
"../../core/string"],function(p,c){function f(w){let C=null;l.some(z=>{z.pattern.test(w)&&(C=z);return!!C});return C}const l=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",
appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",
appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];p.autoLink=function(w,C){if("string"!==typeof C||!C)return C;const z=f(C);if(!z)return C;const G=C.match(z.pattern);
w=c.replace(c.replace(z.label,{messages:w,hierPart:G&&G[2]}),{appName:z.appName});return C.replace(z.pattern,`<a${z.target?` target="${z.target}"`:""} href="$1"${"_blank"===z.target?' rel\x3d"noreferrer"':""}>${w}</a>`)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureMedia":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/events ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureMedia/FeatureMediaViewModel ./support/FeatureElementInfo ./support/featureUtils ../support/chartUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory".split(" "),
function(p,c,f,l,w,C,z,G,E,y,n,g,d,e,b,a,h,u){C=function(r){function q(m,x){m=r.call(this,m,x)||this;m._refreshTimer=null;m._refreshIntervalInfo=null;m._featureElementInfo=null;m.attributes=null;m.activeMediaInfoIndex=null;m.description=null;m.fieldInfoMap=null;m.layer=null;m.mediaInfos=null;m.popupTemplate=null;m.relatedInfos=null;m.title=null;m.viewModel=new g;m.messages=null;return m}p._inheritsLoose(q,r);var k=q.prototype;k.initialize=function(){this._featureElementInfo=new d;this.own(l.init(this,
["viewModel.activeMediaInfo","viewModel.activeMediaInfoIndex"],()=>this._setupMediaRefreshTimer()),l.init(this,["viewModel.description","viewModel.title"],()=>this._setupFeatureElementInfo()))};k.destroy=function(){this._clearMediaRefreshTimer();this._featureElementInfo.destroy()};k.render=function(){var m;return u.tsx("div",{bind:this,class:"esri-feature-media",onkeyup:this._handleMediaKeyup},null==(m=this._featureElementInfo)?void 0:m.render(),this.renderMedia())};k.renderMedia=function(){const {formattedMediaInfoCount:m}=
this.viewModel;return m?u.tsx("div",{key:"media-element-container",class:"esri-feature-media__container"},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null};k.renderImageMediaInfo=function(m){var {_refreshIntervalInfo:x}=this;const {activeMediaInfoIndex:v,formattedMediaInfoCount:B}=this.viewModel,{value:L,refreshInterval:N,altText:M,title:S,type:I}=m,{sourceURL:P,linkURL:V}=L;m=e.shouldOpenInNewTab(V)?"_blank":"_self";const ca="_blank"===m?"noreferrer":
"";x=N?x:null;x=u.tsx("img",{alt:M||S,key:`media-${I}-${v}-${B}-${x?x.timestamp:0}`,src:x?x.sourceURL:P});return(m=V?u.tsx("a",{title:S,href:V,rel:ca,target:m},x):null)?m:x};k.renderChartMediaInfo=function(m){const {activeMediaInfoIndex:x,formattedMediaInfoCount:v}=this.viewModel;return u.tsx("div",{key:`media-${m.type}-${x}-${v}`,bind:this,class:"esri-feature-media__chart",afterCreate:this._getChartDependencies})};k.renderMediaInfoType=function(){const {activeMediaInfo:m}=this.viewModel;return m?
"image"===m.type?this.renderImageMediaInfo(m):-1!==m.type.indexOf("chart")?this.renderChartMediaInfo(m):null:null};k.renderMediaInfo=function(){var {activeMediaInfo:m}=this.viewModel;if(!m)return null;const x=m.title?u.tsx("div",{key:"media-title",class:"esri-feature-media__item-title",innerHTML:m.title}):null;m=m.caption?u.tsx("div",{key:"media-caption",class:"esri-feature-media__item-caption",innerHTML:m.caption}):null;return u.tsx("div",{key:"media-container",class:"esri-feature-media__item-container"},
u.tsx("div",{key:"media-item-container",class:"esri-feature-media__item"},this.renderMediaInfoType()),x,m)};k.renderMediaPageButton=function(m){if(2>this.viewModel.formattedMediaInfoCount)return null;const x=(m="previous"===m)?this.messages.previous:this.messages.next,v=m?this.classes("esri-feature-media__button","esri-feature-media__previous"):this.classes("esri-feature-media__button","esri-feature-media__next"),B=m?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon","esri-icon-left-triangle-arrow"):
this.classes("esri-feature-media__icon","esri-feature-media__next-icon","esri-icon-right-triangle-arrow"),L=m?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon--rtl","esri-icon-right-triangle-arrow"):this.classes("esri-feature-media__icon","esri-feature-media__next-icon--rtl","esri-icon-left-triangle-arrow");return u.tsx("button",{type:"button",key:m?"media-previous":"media-next",title:x,"aria-label":x,tabIndex:0,class:v,bind:this,onclick:m?this._previous:this._next},u.tsx("span",
{"aria-hidden":"true",class:B}),u.tsx("span",{"aria-hidden":"true",class:L}))};k._setupFeatureElementInfo=function(){const {description:m,title:x}=this;this._featureElementInfo.set({description:m,title:x})};k._next=function(){this.viewModel.next()};k._previous=function(){this.viewModel.previous()};k._getChartDependencies=function(){var m=p._asyncToGenerator(function*(x){const v=yield b.loadChartsModule(),{activeMediaInfo:B}=this.viewModel;this._renderChart({chartDiv:x,mediaInfo:B,chartsModule:v})});
return function(x){return m.apply(this,arguments)}}();k._handleMediaKeyup=function(m){const x=f.eventKey(m);"ArrowLeft"===x&&(m.stopPropagation(),this.viewModel.previous());"ArrowRight"===x&&(m.stopPropagation(),this.viewModel.next())};k._renderChart=function(m){const {chartsModule:x,chartDiv:v,mediaInfo:B}=m,{value:L,type:N}=B,{am4core:M}=x,S=b.getColorSet(M);a.isDarkTheme()&&M.useTheme(x.am4themes_dark);M.useTheme(x.am4themes_animated);M.useTheme(function(I){I instanceof M.ColorSet&&S&&(I.list=
S)});m="pie-chart"===N?this._createPieChart(m):this._createXYChart(m);v.setAttribute("aria-label",B.altText||B.title);m.data=L.series.map(I=>({tooltip:I.tooltip,value:I.value})).filter(I=>"pie-chart"===N?0<I.value:!0)};k._customizeChartTooltip=function(m,x){m.label.wrap=!0;m.label.maxWidth=200;m.autoTextColor=!1;m.getFillFromObject=!1;m.label.fill=x.color("#ffffff");m.background.fill=x.color({r:0,g:0,b:0,a:.7})};k._createPieChart=function(m){const {chartDiv:x,chartsModule:v}=m,{am4core:B,am4charts:L}=
v;m=B.create(x,L.PieChart);m.rtl=a.isRTL(this.container);const N=m.series.push(new L.PieSeries);N.labels.template.disabled=!0;N.ticks.template.disabled=!0;N.dataFields.value="value";N.dataFields.category="tooltip";this._customizeChartTooltip(N.tooltip,B);return m};k._getMinSeriesValue=function(m){let x=0;m.forEach(v=>x=Math.min(v.value,x));return x};k._createColumnChart=function(m,x){const {chartsModule:v,mediaInfo:B}=x;({value:x}=B);const {am4core:L,am4charts:N}=v,M=m.xAxes.push(new N.CategoryAxis);
M.dataFields.category="tooltip";M.renderer.labels.template.disabled=!0;this._customizeChartTooltip(M.tooltip,L);M.tooltip.events.on("sizechanged",()=>{M.tooltip.dy=-M.tooltip.contentHeight});var S=m.yAxes.push(new N.ValueAxis);const I=S.renderer.labels.template;S.renderer.minLabelPosition=.05;S.renderer.maxLabelPosition=.95;S.min=this._getMinSeriesValue(x.series);this._customizeChartTooltip(S.tooltip,L);I.wrap=!0;S=m.series.push(new N.ColumnSeries);S.dataFields.valueY="value";S.dataFields.categoryX=
"tooltip";m.cursor=new N.XYCursor;15<x.series.length&&(m.scrollbarX=new L.Scrollbar)};k._createBarChart=function(m,x){const {chartsModule:v,mediaInfo:B}=x;({value:x}=B);const {am4core:L,am4charts:N}=v,M=m.yAxes.push(new N.CategoryAxis);M.dataFields.category="tooltip";M.renderer.inversed=!0;M.renderer.labels.template.disabled=!0;this._customizeChartTooltip(M.tooltip,L);M.tooltip.events.on("sizechanged",()=>{M.tooltip.dx=M.tooltip.contentWidth});var S=m.xAxes.push(new N.ValueAxis);const I=S.renderer.labels.template;
S.renderer.minLabelPosition=.05;S.renderer.maxLabelPosition=.95;S.min=this._getMinSeriesValue(x.series);this._customizeChartTooltip(S.tooltip,L);I.wrap=!0;S=m.series.push(new N.ColumnSeries);S.dataFields.valueX="value";S.dataFields.categoryY="tooltip";m.cursor=new N.XYCursor;15<x.series.length&&(m.scrollbarY=new L.Scrollbar)};k._createLineChart=function(m,x){const {chartsModule:v,mediaInfo:B}=x;({value:x}=B);const {am4core:L,am4charts:N}=v,M=m.xAxes.push(new N.CategoryAxis);M.dataFields.category=
"tooltip";M.renderer.labels.template.disabled=!0;this._customizeChartTooltip(M.tooltip,L);M.tooltip.events.on("sizechanged",()=>{M.tooltip.dy=-M.tooltip.contentHeight});var S=m.yAxes.push(new N.ValueAxis);const I=S.renderer.labels.template;S.renderer.minLabelPosition=.05;S.renderer.maxLabelPosition=.95;S.min=this._getMinSeriesValue(x.series);this._customizeChartTooltip(S.tooltip,L);I.wrap=!0;S=m.series.push(new N.LineSeries);S.dataFields.categoryX="tooltip";S.dataFields.valueY="value";m.cursor=new N.XYCursor;
15<x.series.length&&(m.scrollbarX=new L.Scrollbar)};k._createXYChart=function(m){const {chartDiv:x,chartsModule:v,mediaInfo:B}=m,{type:L}=B,{am4core:N,am4charts:M}=v,S=N.create(x,M.XYChart);S.rtl=a.isRTL(this.container);"column-chart"===L&&this._createColumnChart(S,m);"bar-chart"===L&&this._createBarChart(S,m);"line-chart"===L&&this._createLineChart(S,m);return S};k._clearMediaRefreshTimer=function(){const {_refreshTimer:m}=this;m&&(clearTimeout(m),this._refreshTimer=null)};k._updateMediaInfoTimestamp=
function(m){const x=Date.now();this._refreshIntervalInfo={timestamp:x,sourceURL:this._getImageSource(m,x)};this.scheduleRender()};k._setupMediaRefreshTimer=function(){this._clearMediaRefreshTimer();const {activeMediaInfo:m}=this.viewModel;m&&"image"===m.type&&m.refreshInterval&&this._setRefreshTimeout(m)};k._setRefreshTimeout=function(m){const {refreshInterval:x,value:v}=m;x&&(m=6E4*x,this._updateMediaInfoTimestamp(v.sourceURL),this._refreshTimer=setInterval(()=>{this._updateMediaInfoTimestamp(v.sourceURL)},
m))};k._getImageSource=function(m,x){const v=-1!==m.indexOf("?")?"\x26":"?",[B,L=""]=m.split("#");return`${B}${v}timestamp=${x}${L?"#":""}${L}`};return q}(n);c.__decorate([w.aliasOf("viewModel.attributes")],C.prototype,"attributes",void 0);c.__decorate([w.aliasOf("viewModel.activeMediaInfoIndex")],C.prototype,"activeMediaInfoIndex",void 0);c.__decorate([w.aliasOf("viewModel.description")],C.prototype,"description",void 0);c.__decorate([w.aliasOf("viewModel.fieldInfoMap")],C.prototype,"fieldInfoMap",
void 0);c.__decorate([w.aliasOf("viewModel.layer")],C.prototype,"layer",void 0);c.__decorate([w.aliasOf("viewModel.mediaInfos")],C.prototype,"mediaInfos",void 0);c.__decorate([w.aliasOf("viewModel.popupTemplate")],C.prototype,"popupTemplate",void 0);c.__decorate([w.aliasOf("viewModel.relatedInfos")],C.prototype,"relatedInfos",void 0);c.__decorate([w.aliasOf("viewModel.title")],C.prototype,"title",void 0);c.__decorate([E.property({type:g})],C.prototype,"viewModel",void 0);c.__decorate([E.property(),
h.messageBundle("esri/widgets/Feature/t9n/Feature")],C.prototype,"messages",void 0);return C=c.__decorate([y.subclass("esri.widgets.Feature.FeatureMedia")],C)})},"esri/widgets/Feature/FeatureMedia/FeatureMediaViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ../../../popup/FieldInfo ../../../popup/content/support/ChartMediaInfoValueSeries ../support/featureUtils ../support/relatedFeatureUtils".split(" "),
function(p,c,f,l,w,C,z,G,E,y,n,g){f=function(d){function e(a){a=d.call(this,a)||this;a.activeMediaInfoIndex=0;a.attributes=null;a.description=null;a.fieldInfoMap=null;a.formattedAttributes=null;a.expressionAttributes=null;a.layer=null;a.mediaInfos=null;a.popupTemplate=null;a.relatedInfos=null;a.title=null;return a}p._inheritsLoose(e,d);var b=e.prototype;b.setActiveMedia=function(a){this._setContentElementMedia(a)};b.next=function(){this._pageContentElementMedia(1)};b.previous=function(){this._pageContentElementMedia(-1)};
b._setContentElementMedia=function(a){const {formattedMediaInfoCount:h}=this;this.activeMediaInfoIndex=(a+h)%h};b._pageContentElementMedia=function(a){const {activeMediaInfoIndex:h}=this;this._setContentElementMedia(h+a)};b._formatMediaInfos=function(){const {attributes:a,mediaInfos:h,formattedAttributes:u,expressionAttributes:r,fieldInfoMap:q,layer:k}=this;return null==h?void 0:h.map(m=>{if(!m)return null;m.title=n.substituteFieldsInLinksAndAttributes({attributes:a,fieldInfoMap:q,globalAttributes:u,
expressionAttributes:r,layer:k,text:m.title});m.caption=n.substituteFieldsInLinksAndAttributes({attributes:a,fieldInfoMap:q,globalAttributes:u,expressionAttributes:r,layer:k,text:m.caption});m.altText=n.substituteFieldsInLinksAndAttributes({attributes:a,fieldInfoMap:q,globalAttributes:u,expressionAttributes:r,layer:k,text:m.altText});if("image"===m.type){var {value:x}=m;this._setImageValue({value:x,formattedAttributes:u,layer:k});return m.value.sourceURL?m:void 0}return"pie-chart"===m.type||"line-chart"===
m.type||"column-chart"===m.type||"bar-chart"===m.type?({value:x}=m,this._setChartValue({value:x,chartType:m.type,attributes:a,formattedAttributes:u,layer:k}),m):null}).filter(Boolean)};b._setImageValue=function(a){const {fieldInfoMap:h}=this,{value:u,formattedAttributes:r,layer:q}=a,{linkURL:k,sourceURL:m}=u;m&&(a=n.fixTokens(m,q),u.sourceURL=n.substituteAttributes({formattedAttributes:r,template:a,fieldInfoMap:h}));k&&(a=n.fixTokens(k,q),u.linkURL=n.substituteAttributes({formattedAttributes:r,template:a,
fieldInfoMap:h}))};b._setChartValue=function(a){const {value:h,attributes:u,formattedAttributes:r,chartType:q,layer:k}=a,{popupTemplate:m,relatedInfos:x}=this,{fields:v,normalizeField:B}=h;h.fields=n.getFixedFieldNames(v,k);B&&(h.normalizeField=n.getFixedFieldName(B,k));if(v.some(N=>!!(null!=r[N]||n.isRelatedField(N)&&x.size))){var L=null==m?void 0:m.fieldInfos;v.forEach(N=>{n.isRelatedField(N)?h.series=[...h.series,...this._getRelatedChartInfos({fieldInfos:L,fieldName:N,formattedAttributes:r,chartType:q,
value:h})]:(N=this._getChartOption({value:h,attributes:u,chartType:q,formattedAttributes:r,fieldName:N,fieldInfos:L}),h.series.push(N))})}};b._getRelatedChartInfos=function(a){var h;const {fieldInfos:u,fieldName:r,formattedAttributes:q,chartType:k,value:m}=a,x=[];a=g.getRelatedFieldInfo(r);const {layerId:v,fieldName:B}=a;a=null==(h=this.relatedInfos)?void 0:h.get(v.toString());if(!a)return x;const {relatedFeatures:L,relation:N}=a;if(!N||!L)return x;({cardinality:h}=N);L.forEach(M=>{const {attributes:S}=
M;S&&Object.keys(S).forEach(I=>{I===B&&x.push(this._getChartOption({value:m,attributes:S,formattedAttributes:q,fieldName:r,chartType:k,relatedFieldName:I,fieldInfos:u}))})});return"one-to-many"===h||"many-to-many"===h?x:[x[0]]};b._getTooltip=function({label:a,value:h,chartType:u}){return"pie-chart"===u?a:`${a}: ${h}`};b._getChartOption=function(a){const {value:h,attributes:u,formattedAttributes:r,fieldName:q,relatedFieldName:k,fieldInfos:m,chartType:x}=a;var {layer:v}=this;const {normalizeField:B,
tooltipField:L}=h;var N=B?n.isRelatedField(B)?u[g.getRelatedFieldInfo(B).fieldName]:u[B]:null;a=k&&void 0!==u[k]?u[k]:void 0!==u[q]?u[q]:r[q];const M=void 0===a?null:a&&N?a/N:a;a=new y({value:M});if(n.isRelatedField(q)){var S=g.getRelatedFieldInfo(q);var I=g.getRelatedFieldInfo(L);I=I?I.fieldName:null;v=n.formatValueToFieldInfo(M,{fieldInfos:m,fieldName:k,layer:v,preventPlacesFormatting:!!N});S=S?S.label||S.fieldName:k;a.tooltip=this._getTooltip({label:I&&void 0!==u[I]?u[I]:S,value:v,chartType:x});
return a}N=n.getFieldInfo(m,q);v=n.getFixedFieldName(q,v);N=L&&void 0!==r[L]?r[L]:n.getFieldInfoLabel(N||new E({fieldName:v}),null==(S=this.popupTemplate)?void 0:S.expressionInfos);a.tooltip=this._getTooltip({label:N,value:r[v],chartType:x});return a};p._createClass(e,[{key:"activeMediaInfo",get:function(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}},{key:"formattedMediaInfos",get:function(){return this._formatMediaInfos()||[]}},{key:"formattedMediaInfoCount",get:function(){return this.formattedMediaInfos.length}}]);
return e}(f);c.__decorate([l.property()],f.prototype,"activeMediaInfoIndex",void 0);c.__decorate([l.property({readOnly:!0})],f.prototype,"activeMediaInfo",null);c.__decorate([l.property()],f.prototype,"attributes",void 0);c.__decorate([l.property()],f.prototype,"description",void 0);c.__decorate([l.property()],f.prototype,"fieldInfoMap",void 0);c.__decorate([l.property()],f.prototype,"formattedAttributes",void 0);c.__decorate([l.property()],f.prototype,"expressionAttributes",void 0);c.__decorate([l.property({readOnly:!0})],
f.prototype,"formattedMediaInfos",null);c.__decorate([l.property()],f.prototype,"layer",void 0);c.__decorate([l.property({readOnly:!0})],f.prototype,"formattedMediaInfoCount",null);c.__decorate([l.property()],f.prototype,"mediaInfos",void 0);c.__decorate([l.property()],f.prototype,"popupTemplate",void 0);c.__decorate([l.property()],f.prototype,"relatedInfos",void 0);c.__decorate([l.property()],f.prototype,"title",void 0);return f=c.__decorate([G.subclass("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],
f)})},"esri/widgets/Feature/support/relatedFeatureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../request ../../../core/Error ../../../core/Logger ../../../core/promiseUtils ../../../layers/support/fieldUtils ../../../rest/support/Query ../../../rest/support/RelationshipQuery ../../../rest/support/StatisticDefinition ../../../tasks/QueryTask ./featureUtils".split(" "),function(p,c,f,l,w,C,z,G,E,y,n,g){function d(x,v){if(!v.relationships)return null;let B=null;
({relationships:v}=v);v.some(L=>L.id===parseInt(x,10)?(B=L,!0):!1);return B}function e({originRelationship:x,relationships:v,layerId:B}){let L;v&&v.some(N=>{`${N.relatedTableId}`===B&&N.id===x.id&&(L=N);return!!L});return L}function b(x,v){v=v.toLowerCase();for(const B in x)if(B.toLowerCase()===v)return x[B];return null}function a(x,v,B,L){const N=new E;N.outFields=["*"];N.relationshipId="number"===typeof v.id?v.id:parseInt(v.id,10);N.objectIds=[x.attributes[B.objectIdField]];return B.queryRelatedFeatures(N,
L)}function h(x,v,B){let L=0;const N=[];for(;L<v.length;)N.push(`${x} IN (${v.slice(L,B+L)})`),L+=B;return N.join(" OR ")}function u(x,v,B,L){return r.apply(this,arguments)}function r(){r=c._asyncToGenerator(function*(x,v,B,L){var N=B.layerId.toString();const {layerInfo:M,queryTask:S,relation:I,relatedFields:P,outStatistics:V}=v;N=e({originRelationship:I,relationships:M.relationships,layerId:N});if(N.relationshipTableId&&N.keyFieldInRelationshipTable){B=(yield a(x,N,B,L))[x.attributes[B.objectIdField]];
if(!B)return null;const ca=B.features.map(A=>A.attributes[M.objectIdField]);if(0<(null==V?void 0:V.length)&&M.supportsStatistics)return v=new G,v.where=h(M.objectIdField,ca,1E3),v.outFields=P,v.outStatistics=V,v={features:Promise.resolve(B),statsFeatures:S.execute(v)},C.eachAlways(v)}return(N=null==N?void 0:N.keyField)?(B=z.isNumericField(q(M.fields,N)),x=b(x.attributes,I.keyField),N=B?`${N}=${x}`:`${N}='${x}'`,x=S.execute(new G({where:N,outFields:v.relatedFields}),L),v=v.outStatistics&&0<v.outStatistics.length&&
M.supportsStatistics?S.execute(new G({where:N,outFields:v.relatedFields,outStatistics:v.outStatistics}),L):null,L={features:x},v&&(L.statsFeatures=v),C.eachAlways(L)):null});return r.apply(this,arguments)}function q(x,v){if(null!=x){v=v.toLowerCase();for(const B of x)if(B&&B.name.toLowerCase()===v)return B}return null}const k=w.getLogger("esri.widgets.Feature.support.relatedFeatureUtils"),m=new Map;p.createRelatedInfo=function(x,v){if(x=d(x,v)){var B=`${v.url}/${x.relatedTableId}`;v=new n({url:B,
sourceSpatialReference:v.spatialReference});return{url:B,queryTask:v,relation:x,relatedFields:[],outStatistics:[]}}};p.getDestinationRelation=e;p.getRelatedFieldInfo=function(x){if(!g.isRelatedField(x))return null;const [v,B]=x.split("/").slice(1);return{layerId:v,fieldName:B}};p.queryLayerInfos=function({relatedInfos:x,layer:v},B){const L={};x.forEach((N,M)=>{({relation:N}=N);if(!N)throw M=new l("relation-required","A relation is required on a layer to retrieve related records."),k.error(M),M;({relatedTableId:N}=
N);if("number"!==typeof N)throw M=new l("A related table ID is required on a layer to retrieve related records."),k.error(M),M;N=`${v.url}/${N}`;const S=m.get(N),I=S?S:f(N,{query:{f:"json"},signal:B&&B.signal});S||m.set(N,I);L[M]=I});return C.eachAlways(L)};p.queryRelatedFeatures=function({graphic:x,relatedInfos:v,layer:B},L){const N={};v.forEach((M,S)=>{M.layerInfo&&(N[S]=u(x,M,B,L))});return C.eachAlways(N)};p.setRelatedFeatures=function(x,v){if(v&&x){var {features:B,statsFeatures:L}=x;x=B&&B.value;
v.relatedFeatures=x?x.features:[];x=L&&L.value;v.relatedStatsFeatures=x?x.features:[]}};p.updateRelatedInfo=function({relatedInfo:x,fieldName:v,fieldInfo:B}){x.relatedFields.push(v);B.statisticType&&(v=new y({statisticType:B.statisticType,onStatisticField:v,outStatisticFieldName:v}),x.outStatistics.push(v))};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/widgets/support/chartUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../intl ../../core/has ../../intl/locale".split(" "),
function(p,c,f,l,w,C){function z(d){if(!d)return"en-us";if(y.has(d.toLowerCase()))return d.toLowerCase();{d=d.split("-")[0].toLowerCase();let b=null;for(e of y.keys())if(e.startsWith(d)){b=e;break}var e=b}return e||"en-us"}function G(){G=f._asyncToGenerator(function*(d=C.getLocale()){d=z(d);if(n&&d===g)return n;n=(new Promise(function(e,b){p(["../../chunks/index"],e,b)})).then(function(e){return e.index});g=d;try{const [e,b]=yield Promise.all([n,y.get(g)()]);g===d&&(e.am4core.options.defaultLocale=
b.default);e.am4core.options.suppressWarnings=!0;e.am4core.options.autoDispose=!0}catch{return g=n=null}return n});return G.apply(this,arguments)}l="#ffffff #858585 #ffbebe #ffebbe #ffebaf #ffffbe #e9ffbe #d3ffbe #beffe8 #bee8ff #bed2ff #e8beff #ffbee8 #ebebeb #707070 #ff7f7f #ffa77f #ffd37f #ffff73 #d1ff73 #a3ff73 #73ffdf #73dfff #73b2ff #df73ff #ff73df #d6d6d6 #5c5c5c #ff0000 #ff5500 #ffaa00 #ffff00 #aaff00 #55ff00 #00ffc5 #00c5ff #0070ff #c500ff #ff00c5 #c2c2c2 #474747 #e60000 #e64c00 #e69800 #e6e600 #98e600 #4ce600 #00e6a9 #00a9e6 #005ce6 #a900e6 #e600a9 #adadad #242424 #a80000 #a83800 #a87000 #a8a800 #70a800 #38a800 #00a884 #0084a8 #004da8 #8400a8 #a80084 #999999 #1a1a1a #730000 #732600 #734c00 #737300 #4c7300 #267300 #00734c #004c73 #002673 #4c0073 #73004".split(" ");
var E=[{name:"default",colors:[].concat(l.slice(30,39),l.slice(28,30).reverse())},{name:"cat-dark",colors:"#ed5151 #149ece #a7c636 #9e559c #fc921f #ffde3e #f789d8 #b7814a #3caf99 #6b6bd6 #b54779 #7f7f7f".split(" ")},{name:"tropical-bliss",colors:"#fce138 #ff9399 #fcd27e #f1983c #a553b7 #b1a9d0 #6ecffc #4c81cd #fc6f84 #fc3e5a #6af689 #48885c".split(" ")},{name:"desert-blooms",colors:"#102432 #144d59 #ffc730 #ed9310 #a64f1b #661510 #d9351a #b31515 #4a0932 #8c213f #18382e #2c6954".split(" ")},{name:"under-the-sea",
colors:"#bf9727 #607100 #00734c #704489 #01acca #024e76 #f09100 #ea311f #c6004b #7570b3 #666666 #333333".split(" ")},{name:"vibrant-rainbow",colors:"#fffb00 #f5cb11 #9fd40c #46e39c #32b8a6 #7ff2fa #ac08cc #dd33ff #eb7200 #e8a784 #bf2e2e #6c7000".split(" ")},{name:"ocean-bay",colors:"#191921 #11495c #78b1c2 #454f4b #8f8f82 #9be0c0 #87b051 #f7ec88 #ebdcc1 #dbb658 #c43541 #75351e".split(" ")},{name:"prairie-summer",colors:"#332424 #751555 #d47013 #d68989 #211173 #82aad6 #7bfaeb #6ec9a8 #6b6408 #eada40 #ccc54a #1fc235".split(" ")},
{name:"pastel-chalk",colors:"#fffd99 #f5e6a4 #c1d48c #b8e3d0 #a0b8b5 #cbf7fa #d791f2 #dfc1eb #f2b983 #e8c4b2 #bf8e8e #94995c".split(" ")},{name:"seq-yellow-orange-red-bright",colors:"#910000 #b1260b #c0370f #e05919 #ef6a1d #ff7b22 #ffa143 #ffb454 #ffda74 #ffed85".split(" ")},{name:"seq-reds-bright",colors:"#57453b #7b4238 #9f4036 #c23d33 #d7483c #ec5244 #f3696c #f9816c #ffc4ae #fff0dc".split(" ")},{name:"seq-purples-bright",colors:"#4e465c #5a4a78 #695291 #775baa #8663c3 #946bdc #aa89e8 #c1a6f3 #d7c4ff #e6e1ff".split(" ")},
{name:"seq-blues-bright",colors:"#404d54 #435c6c #48799d #4b88b6 #4d96ce #50a5e7 #74bbed #98d0f3 #bce6f9 #e6faff".split(" ")},{name:"seq-greens-bright",colors:"#39544c #386757 #368165 #359b73 #33b581 #4bc392 #64d2a2 #7ce0b3 #cbf6d9 #f4ffea".split(" ")},{name:"seq-browns-bright",colors:"#524834 #715b38 #8f6e3c #ae8140 #cc9444 #eba748 #eeb664 #f0c47f #f9e0b7 #fff8eb".split(" ")}];const y=new Map([["ar",()=>(new Promise(function(d,e){p(["../../chunks/ar2"],d,e)})).then(function(d){return d.ar})],["bs-ba",
()=>(new Promise(function(d,e){p(["../../chunks/bs_BA"],d,e)})).then(function(d){return d.bs_BA})],["ca-es",()=>(new Promise(function(d,e){p(["../../chunks/ca_ES"],d,e)})).then(function(d){return d.ca_ES})],["cs-cz",()=>(new Promise(function(d,e){p(["../../chunks/cs_CZ"],d,e)})).then(function(d){return d.cs_CZ})],["da-dk",()=>(new Promise(function(d,e){p(["../../chunks/da_DK"],d,e)})).then(function(d){return d.da_DK})],["de-de",()=>(new Promise(function(d,e){p(["../../chunks/de_DE"],d,e)})).then(function(d){return d.de_DE})],
["de-ch",()=>(new Promise(function(d,e){p(["../../chunks/de_CH"],d,e)})).then(function(d){return d.de_CH})],["el-gr",()=>(new Promise(function(d,e){p(["../../chunks/el_GR"],d,e)})).then(function(d){return d.el_GR})],["en-us",()=>(new Promise(function(d,e){p(["../../chunks/en_US"],d,e)})).then(function(d){return d.en_US})],["en-ca",()=>(new Promise(function(d,e){p(["../../chunks/en_CA"],d,e)})).then(function(d){return d.en_CA})],["es-es",()=>(new Promise(function(d,e){p(["../../chunks/es_ES"],d,e)})).then(function(d){return d.es_ES})],
["et-ee",()=>(new Promise(function(d,e){p(["../../chunks/et_EE"],d,e)})).then(function(d){return d.et_EE})],["fi-fi",()=>(new Promise(function(d,e){p(["../../chunks/fi_FI"],d,e)})).then(function(d){return d.fi_FI})],["fr-fr",()=>(new Promise(function(d,e){p(["../../chunks/fr_FR"],d,e)})).then(function(d){return d.fr_FR})],["he-il",()=>(new Promise(function(d,e){p(["../../chunks/he_IL"],d,e)})).then(function(d){return d.he_IL})],["hr-hr",()=>(new Promise(function(d,e){p(["../../chunks/hr_HR"],d,e)})).then(function(d){return d.hr_HR})],
["hu-hu",()=>(new Promise(function(d,e){p(["../../chunks/hu_HU"],d,e)})).then(function(d){return d.hu_HU})],["id-id",()=>(new Promise(function(d,e){p(["../../chunks/id_ID"],d,e)})).then(function(d){return d.id_ID})],["it-it",()=>(new Promise(function(d,e){p(["../../chunks/it_IT"],d,e)})).then(function(d){return d.it_IT})],["ja-jp",()=>(new Promise(function(d,e){p(["../../chunks/ja_JP"],d,e)})).then(function(d){return d.ja_JP})],["ko-kr",()=>(new Promise(function(d,e){p(["../../chunks/ko_KR"],d,e)})).then(function(d){return d.ko_KR})],
["lt-lt",()=>(new Promise(function(d,e){p(["../../chunks/lt_LT"],d,e)})).then(function(d){return d.lt_LT})],["lv-lv",()=>(new Promise(function(d,e){p(["../../chunks/lv_LV"],d,e)})).then(function(d){return d.lv_LV})],["nb-no",()=>(new Promise(function(d,e){p(["../../chunks/nb_NO"],d,e)})).then(function(d){return d.nb_NO})],["nl-nl",()=>(new Promise(function(d,e){p(["../../chunks/nl_NL"],d,e)})).then(function(d){return d.nl_NL})],["pl-pl",()=>(new Promise(function(d,e){p(["../../chunks/pl_PL"],d,e)})).then(function(d){return d.pl_PL})],
["pt-br",()=>(new Promise(function(d,e){p(["../../chunks/pt_BR"],d,e)})).then(function(d){return d.pt_BR})],["pt-pt",()=>(new Promise(function(d,e){p(["../../chunks/pt_PT"],d,e)})).then(function(d){return d.pt_PT})],["ro-ro",()=>(new Promise(function(d,e){p(["../../chunks/ro_RO"],d,e)})).then(function(d){return d.ro_RO})],["ru-ru",()=>(new Promise(function(d,e){p(["../../chunks/ru_RU"],d,e)})).then(function(d){return d.ru_RU})],["sk-sk",()=>(new Promise(function(d,e){p(["../../chunks/sk_SK"],d,e)})).then(function(d){return d.sk_SK})],
["sl-sl",()=>(new Promise(function(d,e){p(["../../chunks/sl_SL"],d,e)})).then(function(d){return d.sl_SL})],["sr-rs",()=>(new Promise(function(d,e){p(["../../chunks/sr_RS"],d,e)})).then(function(d){return d.sr_RS})],["sv-se",()=>(new Promise(function(d,e){p(["../../chunks/sv_SE"],d,e)})).then(function(d){return d.sv_SE})],["th-th",()=>(new Promise(function(d,e){p(["../../chunks/th_TH"],d,e)})).then(function(d){return d.th_TH})],["tr-tr",()=>(new Promise(function(d,e){p(["../../chunks/tr_TR"],d,e)})).then(function(d){return d.tr_TR})],
["uk-ua",()=>(new Promise(function(d,e){p(["../../chunks/uk_UA"],d,e)})).then(function(d){return d.uk_UA})],["vi-vn",()=>(new Promise(function(d,e){p(["../../chunks/vi_VN"],d,e)})).then(function(d){return d.vi_VN})],["zh-cn",()=>(new Promise(function(d,e){p(["../../chunks/zh_Hans"],d,e)})).then(function(d){return d.zh_Hans})],["zh-hk",()=>(new Promise(function(d,e){p(["../../chunks/zh_Hant"],d,e)})).then(function(d){return d.zh_Hant})],["zh-tw",()=>(new Promise(function(d,e){p(["../../chunks/zh_Hant"],
d,e)})).then(function(d){return d.zh_Hant})]]);let n,g;c.getChartLocale=z;c.getColorSet=function(d,e="default"){const b=E.find(a=>a.name===e);return b?b.colors.map(a=>d.color(a)):null};c.loadChartsModule=function(){return G.apply(this,arguments)};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../arcade/featureset/support/FeatureSetQueryInterceptor ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/throttle ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../popup/content/TextContent ./FeatureAttachments/FeatureAttachmentsViewModel ./FeatureContent/FeatureContentViewModel ./FeatureFields/FeatureFieldsViewModel ./FeatureMedia/FeatureMediaViewModel ./support/arcadeFeatureUtils ./support/featureUtils ./support/relatedFeatureUtils".split(" "),
function(p,c,f,l,w,C,z,G,E,y,n,g,d,e,b,a,h,u,r,q,k,m,x){var v;const B=z.getLogger("esri.widgets.FeatureViewModel"),L={attachmentsContent:!0,customContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0};w=v=function(N){function M(I){var P=N.call(this,I)||this;P._handles=new C;P._error=null;P._featureAbortController=null;P.graphicChangedThrottled=y.throttle(P.graphicChanged,1,p._assertThisInitialized(P));P._expressionAttributes=null;P.abilities={...L};P.content=null;P.contentViewModels=[];P.defaultPopupTemplateEnabled=
!1;P.formattedAttributes=null;P.lastEditInfo=null;P.relatedInfos=new Map;P.title="";P.view=null;P._isAllowedContentType=V=>{const {abilities:ca}=p._assertThisInitialized(P);return"attachments"===V.type&&ca.attachmentsContent||"custom"===V.type&&ca.customContent||"fields"===V.type&&ca.fieldsContent||"media"===V.type&&ca.mediaContent||"text"===V.type&&ca.textContent};P._handles.add(n.init(p._assertThisInitialized(P),["graphic","_effectivePopupTemplate","abilities"],()=>P.graphicChangedThrottled()));
return P}p._inheritsLoose(M,N);var S=M.prototype;S.destroy=function(){this._clear();this._cancelFeatureQuery();this._error=null;this._handles.destroy();this.graphic=this._handles=null;this._destroyContentViewModels();this.relatedInfos.clear()};S.castAbilities=function(I){return{...L,...I}};S.setActiveMedia=function(I,P){I=this.contentViewModels[I];I instanceof q&&I.setActiveMedia(P)};S.nextMedia=function(I){I=this.contentViewModels[I];I instanceof q&&I.next()};S.previousMedia=function(I){I=this.contentViewModels[I];
I instanceof q&&I.previous()};S._clear=function(){this._set("title","");this._set("content",null);this._set("formattedAttributes",null)};S.graphicChanged=function(){var I=p._asyncToGenerator(function*(){this._cancelFeatureQuery();this._error=null;this._clear();const {graphic:P}=this;if(P){var V=E.createAbortController();this._featureAbortController=V;try{yield this._queryFeature({signal:V.signal})}catch(ca){E.isAbortError(ca)||(this._error=ca,B.error("error","The popupTemplate could not be displayed for this feature.",
{error:ca,graphic:P,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===V&&(this._featureAbortController=null)}});return function(){return I.apply(this,arguments)}}();S._cancelFeatureQuery=function(){const {_featureAbortController:I}=this;I&&I.abort();this._featureAbortController=null};S._compileContent=function(I){this._destroyContentViewModels();if(this.graphic)return Array.isArray(I)?I.filter(this._isAllowedContentType).map((P,V)=>{if("attachments"===P.type)return this._compileAttachments(P,
V);if("custom"===P.type)return this._compileCustom(P,V);if("fields"===P.type)return this._compileFields(P,V);if("media"===P.type)return this._compileMedia(P,V);if("text"===P.type)return this._compileText(P,V)}):"string"===typeof I?this._compileText(new a({text:I}),0).text:I};S._destroyContentViewModels=function(){this.contentViewModels.forEach(I=>I&&!I.destroyed&&I.destroy());this._set("contentViewModels",[])};S._compileAttachments=function(I,P){const {graphic:V}=this,{description:ca,title:A}=I;this.contentViewModels[P]=
new h({graphic:V,...this._compileTitleAndDesc({title:A,description:ca})});return I};S._compileCustom=function(I,P){const {graphic:V}=this,{creator:ca,destroyer:A}=I;this.contentViewModels[P]=new u({graphic:V,creator:ca,destroyer:A});return I};S._compileTitleAndDesc=function({title:I,description:P}){const {_fieldInfoMap:V,_sourceLayer:ca,graphic:A,formattedAttributes:t,_expressionAttributes:F}=this,{attributes:D}=A,H=t.global;return{title:m.substituteFieldsInLinksAndAttributes({attributes:D,fieldInfoMap:V,
globalAttributes:H,expressionAttributes:F,layer:ca,text:I}),description:m.substituteFieldsInLinksAndAttributes({attributes:D,fieldInfoMap:V,globalAttributes:H,expressionAttributes:F,layer:ca,text:P})}};S._compileFields=function(I,P){const {_effectivePopupTemplate:V,formattedAttributes:ca}=this,A=I.clone();I=(null==I?void 0:I.fieldInfos)||(null==V?void 0:V.fieldInfos);const t=null==V?void 0:V.expressionInfos,F={...ca.global,...ca.content[P]},{description:D,title:H}=A;I=new r({attributes:F,expressionInfos:t,
fieldInfos:I,...this._compileTitleAndDesc({title:H,description:D})});this.contentViewModels[P]=I;A.fieldInfos=I.formattedFieldInfos.slice(0);return A};S._compileMedia=function(I,P){const {graphic:V,_fieldInfoMap:ca,_effectivePopupTemplate:A,relatedInfos:t,_sourceLayer:F,_expressionAttributes:D}=this;var {attributes:H}=V;const K=this.formattedAttributes.global;I=I.clone();const {description:J,mediaInfos:T,title:Y}=I;H=new q({activeMediaInfoIndex:I.activeMediaInfoIndex||0,attributes:H,layer:F,fieldInfoMap:ca,
formattedAttributes:K,expressionAttributes:D,mediaInfos:T,popupTemplate:A,relatedInfos:t,...this._compileTitleAndDesc({title:Y,description:J})});I.mediaInfos=H.formattedMediaInfos.slice(0);this.contentViewModels[P]=H;return I};S._compileText=function(I,P){I=I.clone();const {graphic:V,_fieldInfoMap:ca,_sourceLayer:A,_expressionAttributes:t}=this;if(I&&I.text){const {attributes:F}=V;I.text=m.substituteFieldsInLinksAndAttributes({attributes:F,fieldInfoMap:ca,globalAttributes:this.formattedAttributes.global,
expressionAttributes:t,layer:A,text:I.text})}this.contentViewModels[P]=new u({graphic:V,creator:I.text});return I};S._compileLastEditInfo=function(){const {_effectivePopupTemplate:I,_sourceLayer:P,graphic:V}=this;if(I){var {lastEditInfoEnabled:ca}=I,A=null==P?void 0:P.editFieldsInfo;if(ca&&A)return m.formatEditInfo(A,V.attributes)}};S._compileTitle=function(I){const {_fieldInfoMap:P,_sourceLayer:V,graphic:ca,_expressionAttributes:A}=this,{attributes:t}=ca;return m.substituteFieldsInLinksAndAttributes({attributes:t,
fieldInfoMap:P,globalAttributes:this.formattedAttributes.global,expressionAttributes:A,layer:V,text:I})};S._getTitle=function(){var I=p._asyncToGenerator(function*(){const {_effectivePopupTemplate:P,graphic:V}=this;return m.graphicCallback(null==P?void 0:P.title,{graphic:V})});return function(){return I.apply(this,arguments)}}();S._getContent=function(){var I=p._asyncToGenerator(function*(){const {_effectivePopupTemplate:P,graphic:V}=this;return m.graphicCallback(null==P?void 0:P.content,{graphic:V})});
return function(){return I.apply(this,arguments)}}();S._queryFeature=function(){var I=p._asyncToGenerator(function*(P){const {_featureAbortController:V,_sourceLayer:ca,graphic:A,_effectivePopupTemplate:t,spatialReference:F,map:D,view:H}=this,{content:{value:K},title:{value:J}}=yield E.eachAlways({content:this._getContent(),title:this._getTitle()});V===this._featureAbortController&&A&&(yield m.queryUpdatedFeature({graphic:A,popupTemplate:t,layer:ca,spatialReference:F},P),{expressionAttributes:{value:P}}=
yield E.eachAlways({checkForRelatedFeatures:this._checkForRelatedFeatures(P),expressionAttributes:k.createCompiledExpressions({popupTemplate:this._effectivePopupTemplate,spatialReference:F,graphic:A,map:D,interceptor:v.interceptor,view:H})}),V===this._featureAbortController&&A&&(this._expressionAttributes=P,this._set("formattedAttributes",this._createFormattedAttributes(K,P)),this._set("title",this._compileTitle(J)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(K)||
null)))});return function(P){return I.apply(this,arguments)}}();S._createFormattedAttributes=function(I,P){const {_effectivePopupTemplate:V,graphic:ca,relatedInfos:A,_sourceLayer:t,_fieldInfoMap:F}=this,D={...ca.attributes,...P},H={global:m.formatAttributes({fieldInfos:null==V?void 0:V.fieldInfos,graphic:ca,attributes:D,layer:t,fieldInfoMap:F,relatedInfos:A}),content:[]};Array.isArray(I)&&I.forEach((K,J)=>{"fields"===K.type&&K.fieldInfos&&(H.content[J]=m.formatAttributes({fieldInfos:K.fieldInfos,
graphic:ca,attributes:D,layer:t,fieldInfoMap:F,relatedInfos:A}))});return H};S._checkForRelatedFeatures=function(I){const {graphic:P,_effectivePopupTemplate:V}=this;return this._queryRelatedInfos(P,m.getAllFieldInfos(V),I)};S._queryRelatedInfos=function(){var I=p._asyncToGenerator(function*(P,V,ca){const {relatedInfos:A,_sourceLayer:t}=this;A.clear();const F=G.isSome(t.associatedLayer)?yield t.associatedLayer.load(ca):t;if(F){var D=V.filter(J=>J&&m.isRelatedField(J.fieldName));if(D&&D.length){V.forEach(J=>
this._configureRelatedInfo(J,F));var H=yield x.queryLayerInfos({relatedInfos:A,layer:F},ca);Object.keys(H).forEach(J=>{var T;const Y=A.get(J.toString());J=null==(T=H[J])?void 0:T.value;Y&&J&&(Y.layerInfo=J.data)});var K=yield x.queryRelatedFeatures({graphic:P,relatedInfos:A,layer:F},ca);Object.keys(K).forEach(J=>{var T;x.setRelatedFeatures(null==(T=K[J])?void 0:T.value,A.get(J.toString()))})}}});return function(P,V,ca){return I.apply(this,arguments)}}();S._configureRelatedInfo=function(I,P){const {relatedInfos:V}=
this,ca=x.getRelatedFieldInfo(I.fieldName);if(ca){var {layerId:A,fieldName:t}=ca;A&&(P=V.get(A.toString())||x.createRelatedInfo(A,P))&&(x.updateRelatedInfo({relatedInfo:P,fieldName:t,fieldInfo:I}),this.relatedInfos.set(A,P))}};p._createClass(M,[{key:"_effectivePopupTemplate",get:function(){return G.isSome(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}},{key:"_fieldInfoMap",get:function(){return m.createfieldInfoMap(m.getAllFieldInfos(this._effectivePopupTemplate),
this._sourceLayer)}},{key:"_sourceLayer",get:function(){return m.getSourceLayer(this.graphic)}},{key:"state",get:function(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}},{key:"graphic",set:function(I){this._set("graphic",I?I.clone():null)}},{key:"spatialReference",get:function(){return this.get("view.spatialReference")||null},set:function(I){void 0===I?this._clearOverride("spatialReference"):this._override("spatialReference",I)}},{key:"map",get:function(){return this.get("view.map")||
null},set:function(I){void 0===I?this._clearOverride("map"):this._override("map",I)}},{key:"waitingForContent",get:function(){return!!this._featureAbortController}}]);return M}(w);w.interceptor=new l.FeatureSetQueryInterceptor(m.preLayerQueryCallback,m.preRequestCallback);c.__decorate([g.property()],w.prototype,"_error",void 0);c.__decorate([g.property()],w.prototype,"_featureAbortController",void 0);c.__decorate([g.property({readOnly:!0})],w.prototype,"_effectivePopupTemplate",null);c.__decorate([g.property({readOnly:!0})],
w.prototype,"_fieldInfoMap",null);c.__decorate([g.property({readOnly:!0})],w.prototype,"_sourceLayer",null);c.__decorate([g.property()],w.prototype,"abilities",void 0);c.__decorate([e.cast("abilities")],w.prototype,"castAbilities",null);c.__decorate([g.property({readOnly:!0})],w.prototype,"content",void 0);c.__decorate([g.property({readOnly:!0})],w.prototype,"contentViewModels",void 0);c.__decorate([g.property({type:Boolean})],w.prototype,"defaultPopupTemplateEnabled",void 0);c.__decorate([g.property({readOnly:!0})],
w.prototype,"state",null);c.__decorate([g.property({readOnly:!0})],w.prototype,"formattedAttributes",void 0);c.__decorate([g.property({type:f,value:null})],w.prototype,"graphic",null);c.__decorate([g.property({readOnly:!0})],w.prototype,"lastEditInfo",void 0);c.__decorate([g.property()],w.prototype,"relatedInfos",void 0);c.__decorate([g.property()],w.prototype,"spatialReference",null);c.__decorate([g.property({readOnly:!0})],w.prototype,"title",void 0);c.__decorate([g.property()],w.prototype,"map",
null);c.__decorate([g.property({readOnly:!0})],w.prototype,"waitingForContent",null);c.__decorate([g.property()],w.prototype,"view",void 0);return w=v=c.__decorate([b.subclass("esri.widgets.FeatureViewModel")],w)})},"esri/arcade/featureset/support/FeatureSetQueryInterceptor":function(){define(["exports"],function(p){p.FeatureSetQueryInterceptor=function(c,f){this.preLayerQueryCallback=c;this.preRequestCallback=f;this.preLayerQueryCallback||(this.preLayerQueryCallback=l=>{});this.preRequestCallback||
(this.preLayerQueryCallback=l=>{})};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/widgets/Feature/support/arcadeFeatureUtils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Logger ../../../core/promiseUtils ../../../layers/FeatureLayer ./featureUtils".split(" "),function(p,c,f,l,w,C,z){function G(r){return`<ul class="esri-widget__list">${r.map(q=>`<li>${"string"===typeof q?z.applyTextFormattingHTML(z.htmlEntities(q)):q}</li>`).join("")}</ul>`}
function E(r){return`<table class="esri-widget__table">${r.keys().map(q=>{var k=r.field(q);k="string"===typeof k?z.applyTextFormattingHTML(z.htmlEntities(k)):k;return`<tr><th>${q}</th><td>${k}</td></tr>`}).join("")}</table>`}function y({aggregatedFeatures:r,arcadeUtils:q,featureSetVars:k,context:m,viewInfo:x,map:v,graphic:B,interceptor:L}){k.forEach(N=>{N=N.toLowerCase();var M={map:v,spatialReference:x.sr,interceptor:L};"$map"===N&&(m.vars[N]=q.convertMapToFeatureSetCollection(M));"$layer"===N&&(m.vars[N]=
q.convertFeatureLayerToFeatureSet({layer:B.sourceLayer,spatialReference:x.sr,interceptor:L}));"$datastore"===N&&(m.vars[N]=q.convertServiceUrlToWorkspace({url:B.sourceLayer.url,spatialReference:x.sr,interceptor:L}));if("$aggregatedfeatures"===N){M=B.layer;const {fields:S,objectIdField:I,geometryType:P,spatialReference:V,displayField:ca}=M;M=new C({fields:S,objectIdField:I,geometryType:P,spatialReference:V,displayField:ca,..."feature"===M.type?{templates:M.templates,typeIdField:M.typeIdField,types:M.types}:
null,source:r});m.vars[N]=q.convertFeatureLayerToFeatureSet({layer:M,spatialReference:x.sr,interceptor:L})}})}function n(){return new Promise(function(r,q){p(["../../../support/arcadeUtils"],r,q)})}function g(r){return d.apply(this,arguments)}function d(){d=f._asyncToGenerator(function*({graphic:r,view:q}){const {isAggregate:k,layer:m}=r;if(!k||!m||"2d"!==(null==q?void 0:q.type))return[];q=yield q.whenLayerView(m);if(!q.createQuery||!q.queryFeatures)return[];const x=q.createQuery();x.aggregateIds=
[r.getObjectId()];({features:r}=yield q.queryFeatures(x));return r});return d.apply(this,arguments)}function e(r){return b.apply(this,arguments)}function b(){b=f._asyncToGenerator(function*({expressionAttributes:r,info:q,arcadeUtils:k,interceptor:m,spatialReference:x,map:v,graphic:B,view:L}){const N=`expression/${q.name}`,M=k.createSyntaxTree(q.expression),S=h.filter(P=>k.hasVariable(M,P));yield k.loadScriptDependencies(M,!0,S);const I=k.getViewInfo({spatialReference:x});x=k.createExecContext(B,I);
x.interceptor=m;x.useAsync=!0;L=yield g({graphic:B,view:L});y({aggregatedFeatures:L,arcadeUtils:k,featureSetVars:S,context:x,viewInfo:I,map:v,graphic:B,interceptor:m});m=k.createFunction(M,x);m=yield k.executeAsyncFunction(m,x).catch(P=>u.error("arcade-execution-error",{error:P,graphic:B,expressionInfo:q}));r[N]="string"===typeof m?z.applyTextFormattingHTML(z.htmlEntities(m)):Array.isArray(m)?G(m):m&&"esri.arcade.Dictionary"===m.declaredClass?E(m):m});return b.apply(this,arguments)}function a(){a=
f._asyncToGenerator(function*({popupTemplate:r,spatialReference:q,graphic:k,interceptor:m,map:x,view:v}){r=r.expressionInfos;const B=[],L={};if(!r||!r.length)return L;const N=yield n();for(const M of r)B.push(e({expressionAttributes:L,info:M,arcadeUtils:N,interceptor:m,spatialReference:q,map:x,graphic:k,view:v}));yield w.eachAlways(B);return L});return a.apply(this,arguments)}const h=["$datastore","$map","$layer","$aggregatedfeatures"],u=l.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils");
c.createCompiledExpressions=function(r){return a.apply(this,arguments)};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/widgets/Feature/support/FeatureContentMixin":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ../../support/widget ../../support/jsxFactory".split(" "),
function(p,c,f,l,w,C,z,G,E,y){p.FeatureContentMixin=n=>{n=function(g){function d(){var e=g.apply(this,arguments)||this;e.renderNodeContent=b=>E.isWidget(b)&&!b.destroyed?y.tsx("div",{key:b},b.render()):b instanceof HTMLElement?y.tsx("div",{key:b,bind:b,afterCreate:e._attachToNode}):E.hasDomNode(b)?y.tsx("div",{key:b,bind:b.domNode,afterCreate:e._attachToNode}):null;return e}c._inheritsLoose(d,g);d.prototype._attachToNode=function(e){e.appendChild(this)};return d}(n);return n=f.__decorate([G.subclass("esri.widgets.Feature.ContentMixin")],
n)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/widgets/Spinner":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/promiseUtils ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Spinner/SpinnerViewModel ./support/widgetUtils ./support/jsxFactory".split(" "),function(p,
c,f,l,w,C,z,G,E,y,n,g,d,e,b){z=function(a){function h(r,q){r=a.call(this,r,q)||this;r._animationDelay=500;r._animationPromise=null;r.location=null;r.view=null;r.viewModel=new d;r.visible=!1;return r}p._inheritsLoose(h,a);var u=h.prototype;u.initialize=function(){this.own([w.watch(this,"visible",r=>this._visibleChange(r))])};u.destroy=function(){this._animationPromise=null};u.show=function(r){const {location:q,promise:k}=r;q&&(this.viewModel.location=q);this.visible=!0;r=()=>this.hide();k&&k.catch(()=>
{}).then(r)};u.hide=function(){this.visible=!1};u.render=function(){var {visible:r}=this,{screenLocation:q}=this.viewModel;q=!!q;r={["esri-spinner--start"]:r&&q,["esri-spinner--finish"]:!r&&q};q=this._getPositionStyles();return b.tsx("div",{class:this.classes("esri-spinner",r),styles:q})};u._visibleChange=function(r){if(r)this.viewModel.screenLocationEnabled=!0;else{var q=l.after(this._animationDelay);this._animationPromise=q;q.catch(()=>{}).then(()=>{this._animationPromise===q&&(this.viewModel.screenLocationEnabled=
!1,this._animationPromise=null)})}};u._getPositionStyles=function(){const {screenLocation:r,view:q}=this.viewModel;if(!q||f.isNone(r))return{};const {padding:k}=q;return{left:`${r.x-k.left}px`,top:`${r.y-k.top}px`}};return h}(g);c.__decorate([C.aliasOf("viewModel.location")],z.prototype,"location",void 0);c.__decorate([C.aliasOf("viewModel.view")],z.prototype,"view",void 0);c.__decorate([y.property({type:d})],z.prototype,"viewModel",void 0);c.__decorate([C.aliasOf("viewModel.visible")],z.prototype,
"visible",void 0);return z=c.__decorate([n.subclass("esri.widgets.Spinner")],z)})},"esri/widgets/Spinner/SpinnerViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../support/AnchorElementViewModel".split(" "),function(p,c,f,l,w,C,z,G){l=function(E){function y(n){n=E.call(this,n)||this;n.visible=
!1;return n}p._inheritsLoose(y,E);return y}(G);c.__decorate([f.property()],l.prototype,"visible",void 0);return l=c.__decorate([z.subclass("esri.widgets.CompassViewModel")],l)})},"esri/widgets/support/AnchorElementViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Evented ../../core/Handles ../../core/maybe ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,f,l,w,C,z,G,E,y,n){f=function(g){function d(b){var a=g.call(this,b)||this;a._anchorHandles=new l;a.location=null;a.screenLocation=null;a.screenLocationEnabled=!1;a.view=null;a._anchorHandles.add([C.watch(p._assertThisInitialized(a),["screenLocationEnabled","location","view.size","view.stationary"],()=>a._updateScreenPointAndHandle()),C.watch(p._assertThisInitialized(a),["view","view.ready"],()=>a._wireUpView())]);return a}p._inheritsLoose(d,g);var e=d.prototype;e.destroy=function(){this.view=
null;this._anchorHandles&&this._anchorHandles.destroy();this._viewpointHandle=this._anchorHandles=null};e._wireUpView=function(){this._anchorHandles.remove("view");this._viewpointHandle=null;if(this.get("view.ready")){this._setScreenLocation();var {view:b}=this;b=C.pausable(b,"3d"===b.type?"camera":"viewpoint",()=>this._viewpointChange());this._anchorHandles.add(b,"view");this._viewpointHandle=b;this._toggleWatchingViewpoint()}};e._viewpointChange=function(){this._setScreenLocation();this.emit("view-change")};
e._updateScreenPointAndHandle=function(){this._setScreenLocation();this._toggleWatchingViewpoint()};e._toggleWatchingViewpoint=function(){const {_viewpointHandle:b,location:a,screenLocationEnabled:h}=this;b&&(a&&h?b.resume():b.pause())};e._setScreenLocation=function(){const {location:b,view:a,screenLocationEnabled:h}=this;var u=this.get("view.ready");u=h&&u&&w.isSome(b)?a.toScreen(b):null;this._set("screenLocation",u)};return d}(f.EventedAccessor);c.__decorate([z.property()],f.prototype,"location",
void 0);c.__decorate([z.property({readOnly:!0})],f.prototype,"screenLocation",void 0);c.__decorate([z.property()],f.prototype,"screenLocationEnabled",void 0);c.__decorate([z.property()],f.prototype,"view",void 0);return f=c.__decorate([n.subclass("esri.widgets.support.AnchorElementViewModel")],f)})},"esri/widgets/Popup/PopupViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Graphic ../../symbols ../../core/Collection ../../core/Error ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/webMercatorUtils ../../layers/Layer ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionToggle ../../symbols/support/symbolUtils ../../views/input/InputManager ../../views/support/layerViewUtils ../Feature/FeatureViewModel ./actions ./actionUtils ../support/AnchorElementViewModel ../support/GoTo ../../geometry/Point ../../symbols/SimpleFillSymbol".split(" "),
function(p,c,f,l,w,C,z,G,E,y,n,g,d,e,b,a,h,u,r,q,k,m,x,v,B,L,N,M,S,I,P){const V=C.ofType({key:"type",defaultKeyValue:"button",base:r,typeMap:{button:q,toggle:k}}),ca=E.getLogger("esri.widgets.Popup.PopupViewModel");f=function(A){function t(D){D=A.call(this,D)||this;D._handles=new G;D._pendingPromises=new Set;D._fetchFeaturesController=null;D._selectedClusterFeature=null;D.featurePage=null;D.actions=new V;D.defaultPopupTemplateEnabled=!1;D.autoCloseEnabled=!1;D.autoOpenEnabled=!0;D.browseClusterEnabled=
!1;D.content=null;D.featuresPerPage=20;D.featureViewModelAbilities=null;D.featureViewModels=[];D.highlightEnabled=!0;D.includeDefaultActions=!0;D.selectedClusterBoundaryFeature=new l({symbol:new P({outline:{width:1.5,color:"cyan"},style:"none"})});D.title=null;D.updateLocationEnabled=!1;D.view=null;D.visible=!1;D.zoomFactor=4;D.zoomToLocation=null;return D}p._inheritsLoose(t,A);var F=t.prototype;F.initialize=function(){this._handles.add([g.init(this,["autoOpenEnabled","view"],()=>this._autoOpenEnabledChange()),
this.on("view-change",()=>this._autoClose()),g.watch(this,["highlightEnabled","selectedFeature","visible","view"],()=>this._highlightFeature()),g.watch(this,"view.animation.state",D=>this._animationStateChange(D)),g.watch(this,"location",D=>this._locationChange(D)),g.watch(this,"selectedFeature",D=>this._selectedFeatureChange(D)),g.watch(this,["selectedFeatureIndex","featureCount","featuresPerPage"],()=>this._selectedFeatureIndexChange()),g.watch(this,["featurePage","selectedFeatureIndex","featureCount",
"featuresPerPage, featureViewModels"],()=>this._setGraphicOnFeatureViewModels()),g.watch(this,"featureViewModels",()=>this._featureViewModelsChange()),this.on("trigger-action",D=>N.triggerAction({event:D,view:this.view})),g.whenFalse(this,"waitingForResult",()=>this._waitingForResultChange(),!0),g.watch(this,["features","view","view.map","view.spatialReference"],()=>this._updateFeatureVMs()),g.watch(this,["view.scale"],this._viewScaleChange),g.whenFalse(this,"visible",()=>this.browseClusterEnabled=
!1),g.watch(this,"browseClusterEnabled",D=>D?this.enableClusterBrowsing():this.disableClusterBrowsing())])};F.destroy=function(){this._cancelFetchingFeatures();this._handles.destroy();this._handles=null;this._pendingPromises.clear();this.browseClusterEnabled=!1;this.view=null};F.centerAtLocation=function(){var {view:D}=this;const H=N.getSelectedTarget(this);return H?this.callGoTo({target:{target:H,scale:D.scale}}):(D=new z("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",
{target:H,view:D}),ca.error(D),Promise.reject(D))};F.clear=function(){this.set({promises:[],features:[],content:null,title:null,location:null})};F.fetchFeatures=function(D,H){const {view:K}=this;return K&&D?K.fetchPopupFeatures(D,{event:H&&H.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:H&&H.signal}):(D=new z("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:D,view:K}),ca.error(D),Promise.reject(D))};F.open=
function(D){D={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...D,visible:!0};const {fetchFeatures:H}=D;delete D.fetchFeatures;H&&this._setFetchFeaturesPromises(D.location);this.set(D)};F.triggerAction=function(D){(D=this.allActions.getItemAt(D))&&!D.disabled&&this.emit("trigger-action",{action:D})};F.next=function(){this.selectedFeatureIndex+=1;return this};F.previous=function(){--this.selectedFeatureIndex;return this};F.disableClusterBrowsing=function(){N.removeClusteredFeaturesForBrowsing(this);
this._clearBrowsedClusterGraphics()};F.enableClusterBrowsing=function(){var D=p._asyncToGenerator(function*(){yield N.displayClusterExtent(this);yield N.browseAggregateFeatures(this)});return function(){return D.apply(this,arguments)}}();F._animationStateChange=function(D){this.zoomToLocation||(L.zoomToFeature.disabled="waiting-for-target"===D)};F._clearBrowsedClusterGraphics=function(){var D;const H=null==(D=this.view)?void 0:D.graphics;H&&(H.remove(this.selectedClusterBoundaryFeature),H.remove(this._selectedClusterFeature));
this._selectedClusterFeature=null;this.selectedClusterBoundaryFeature.geometry=null};F._viewScaleChange=function(){var D;if(null!=(D=this.selectedFeature)&&D.isAggregate||this.browseClusterEnabled)this.visible=this.browseClusterEnabled=!1};F._locationChange=function(D){const {selectedFeature:H,updateLocationEnabled:K}=this;K&&D&&(!H||H.geometry)&&this.centerAtLocation()};F._selectedFeatureIndexChange=function(){this.featurePage=1<this.featureCount?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+
1:null};F._featureViewModelsChange=function(){this.featurePage=1<this.featureCount?1:null};F._setGraphicOnFeatureViewModels=function(){const {features:D,featureCount:H,featurePage:K,featuresPerPage:J,featureViewModels:T}=this;if(null!==K){var Y=((K-1)*J+H)%H;T.slice(Y,Y+J).forEach((da,ha)=>{da&&!da.graphic&&(da.graphic=D[Y+ha])})}};F._selectedFeatureChange=function(){var D=p._asyncToGenerator(function*(H){if(H){var {location:K,updateLocationEnabled:J,view:T}=this;this.browseClusterEnabled?(this._selectedClusterFeature&&
(T.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),H.isAggregate||(H.symbol=yield m.getDisplayedSymbol(H),this._selectedClusterFeature=H,T.graphics.add(this._selectedClusterFeature))):!J&&K||!H.geometry?J&&!H.geometry&&this.centerAtLocation().then(()=>{this.location=T.center.clone()}):this.location=y.unwrap(this._getPointFromGeometry(H.geometry))}});return function(H){return D.apply(this,arguments)}}();F._waitingForResultChange=function(){!this.featureCount&&this.promises&&
(this.visible=!1)};F._setFetchFeaturesPromises=function(D){return this._fetchFeaturesWithController(this._getScreenPoint(D||this.location)).then(H=>{const {clientOnlyGraphics:K,promisesPerLayerView:J}=H;H=Promise.resolve(K);const T=J.map(Y=>Y.promise);this.promises=[H,...T]})};F._destroyFeatureVMs=function(){this.featureViewModels.forEach(D=>D&&!D.destroyed&&D.destroy());this._set("featureViewModels",[])};F._updateFeatureVMs=function(){const {selectedFeature:D,features:H,featureViewModels:K}=this;
null!=D&&D.isAggregate||(this.browseClusterEnabled=!1);this._destroyFeatureVMs();if(H&&H.length){var J=K.slice(0),T=[];H.forEach((Y,da)=>{if(Y){var ha=null;J.some((ma,Z)=>{ma&&ma.graphic===Y&&(ha=ma,J.splice(Z,1));return!!ha});if(ha)T[da]=ha;else{var ia,oa;const ma=new B({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:null==(ia=this.view)?void 0:ia.spatialReference,graphic:Y===D?Y:null,map:null==(oa=this.view)?void 0:oa.map,view:this.view});
T[da]=ma}}});J.forEach(Y=>Y&&!Y.destroyed&&Y.destroy());this._set("featureViewModels",T)}};F._getScreenPoint=function(D){const {view:H}=this;return H&&D&&"function"===typeof H.toScreen?H.toScreen(D):null};F._autoOpenEnabledChange=function(){const {_handles:D,autoOpenEnabled:H}=this;D.remove("auto-fetch-features");if(H&&this.view){const K=this.view.on("click",J=>{"mouse"===J.pointerType&&0!==J.button||this._fetchFeaturesAndOpen(J)},x.ViewEventPriorities.WIDGET);D.add(K,"auto-fetch-features")}};F._cancelFetchingFeatures=
function(){const D=this._fetchFeaturesController;D&&D.abort();this._fetchFeaturesController=null;this.notifyChange("waitingForResult")};F._fetchFeaturesWithController=function(D,H){this._cancelFetchingFeatures();const K=n.createAbortController(),{signal:J}=K;this._fetchFeaturesController=K;this.notifyChange("waitingForResult");D=this.fetchFeatures(D,{signal:J,event:H});D.catch(()=>{}).then(()=>{this._fetchFeaturesController=null;this.notifyChange("waitingForResult")});return D};F._fetchFeaturesAndOpen=
function(D){const {screenPoint:H,mapPoint:K}=D,{view:J}=this;this._fetchFeaturesWithController(H,D).then(T=>{const {clientOnlyGraphics:Y,promisesPerLayerView:da,location:ha}=T,ia=[Promise.resolve(Y),...da.map(oa=>oa.promise)];J.popup.open({location:ha||K,promises:ia});return T})};F._updatePendingPromises=function(D){D&&this._pendingPromises.has(D)&&(this._pendingPromises.delete(D),this.notifyChange("pendingPromisesCount"))};F._autoClose=function(){this.autoCloseEnabled&&(this.visible=!1)};F._getPointFromGeometry=
function(D){return y.isNone(D)?null:"point"===D.type?D:"extent"===D.type?D.center:"polygon"===D.type?D.centroid:"multipoint"===D.type||"polyline"===D.type?D.extent.center:null};F._getLayerView=function(){var D=p._asyncToGenerator(function*(H,K){yield H.when();return H.whenLayerView(K)});return function(H,K){return D.apply(this,arguments)}}();F._highlightFeature=function(){var D=p._asyncToGenerator(function*(){this._handles.remove("highlight");const {selectedFeature:H,highlightEnabled:K,view:J,visible:T}=
this;if(H&&J&&K&&T){var {layer:Y,sourceLayer:da}=H;if("map-notes"===(null==da?void 0:da.type)||"subtype-group"===(null==da?void 0:da.type))Y=da;if(Y&&Y instanceof u){var ha=this._getLayerView(J,Y);this._highlightPromise=ha;var ia=yield ha;if(ia&&v.highlightsSupported(ia)&&this._highlightPromise===ha&&this.selectedFeature&&this.highlightEnabled&&this.visible){ha="objectIdField"in Y&&Y.objectIdField;var oa=H.attributes;ia=ia.highlight(oa&&ha&&oa[ha]||H);this._handles.add(ia,"highlight")}}}});return function(){return D.apply(this,
arguments)}}();F._updateFeatures=function(D){const {features:H}=this;D&&D.length&&(H.length?(D=D.filter(K=>-1===H.indexOf(K)),this.features=H.concat(D)):this.features=D)};p._createClass(t,[{key:"isLoadingFeature",get:function(){return this.featureViewModels.some(D=>D.waitingForContent)}},{key:"active",get:function(){return!(!this.visible||this.waitingForResult)}},{key:"allActions",get:function(){const D=this._get("allActions")||new V;D.removeAll();const {actions:H,defaultActions:K,defaultPopupTemplateEnabled:J,
includeDefaultActions:T,selectedFeature:Y}=this;var da=T?K.concat(H):H;const ha=Y&&("function"===typeof Y.getEffectivePopupTemplate&&Y.getEffectivePopupTemplate(J)||Y.popupTemplate),ia=ha&&ha.actions;(da=ha&&ha.overwriteActions?ia:ia?ia.concat(da):da)&&da.filter(Boolean).forEach(oa=>D.add(oa));return D}},{key:"defaultActions",get:function(){var D;const H=this._get("defaultActions")||new V;H.removeAll();H.addMany(null!=(D=this.selectedFeature)&&D.isAggregate?[L.zoomToClusteredFeatures.clone(),L.browseClusteredFeatures.clone()]:
[L.zoomToFeature.clone()]);return H}},{key:"featureCount",get:function(){return this.features.length}},{key:"features",get:function(){return this._get("features")||[]},set:function(D){D=D||[];this._set("features",D);const {pendingPromisesCount:H,promiseCount:K,selectedFeatureIndex:J}=this,T=K&&D.length;T&&H&&-1===J?this.selectedFeatureIndex=0:T&&-1!==J||(this.selectedFeatureIndex=D.length?0:-1)}},{key:"location",get:function(){return this._get("location")||null},set:function(D){const H=this.get("view.spatialReference.isWebMercator");
D&&D.get("spatialReference.isWGS84")&&H&&(D=h.geographicToWebMercator(D));this._set("location",D)}},{key:"pendingPromisesCount",get:function(){return this._pendingPromises.size}},{key:"waitingForResult",get:function(){return!(!(this._fetchFeaturesController||0<this.pendingPromisesCount)||0!==this.featureCount)}},{key:"promiseCount",get:function(){return this.promises.length}},{key:"promises",get:function(){return this._get("promises")||[]},set:function(D){this._pendingPromises.clear();this.features=
[];Array.isArray(D)&&D.length?(this._set("promises",D),D=D.slice(0),D.forEach(H=>{this._pendingPromises.add(H);H.then(K=>{this._pendingPromises.has(H)&&this._updateFeatures(K);this._updatePendingPromises(H)},()=>this._updatePendingPromises(H))})):this._set("promises",[]);this.notifyChange("pendingPromisesCount")}},{key:"selectedFeature",get:function(){const {features:D,selectedFeatureIndex:H}=this;return-1===H?null:D[H]||null}},{key:"selectedFeatureIndex",get:function(){const D=this._get("selectedFeatureIndex");
return"number"===typeof D?D:-1},set:function(D){const {featureCount:H}=this;D=isNaN(D)||-1>D||!H?-1:(D+H)%H;this._set("selectedFeatureIndex",D)}},{key:"selectedFeatureViewModel",get:function(){return this.featureViewModels[this.selectedFeatureIndex]||null}},{key:"state",get:function(){return this.get("view.ready")?"ready":"disabled"}}]);return t}(S.GoToMixin(M));c.__decorate([d.property()],f.prototype,"featurePage",void 0);c.__decorate([d.property()],f.prototype,"isLoadingFeature",null);c.__decorate([d.property({type:V})],
f.prototype,"actions",void 0);c.__decorate([d.property({readOnly:!0})],f.prototype,"active",null);c.__decorate([d.property({readOnly:!0})],f.prototype,"allActions",null);c.__decorate([d.property({type:Boolean})],f.prototype,"defaultPopupTemplateEnabled",void 0);c.__decorate([d.property()],f.prototype,"autoCloseEnabled",void 0);c.__decorate([d.property()],f.prototype,"autoOpenEnabled",void 0);c.__decorate([d.property()],f.prototype,"browseClusterEnabled",void 0);c.__decorate([d.property()],f.prototype,
"content",void 0);c.__decorate([d.property({type:V,readOnly:!0})],f.prototype,"defaultActions",null);c.__decorate([d.property({readOnly:!0})],f.prototype,"featureCount",null);c.__decorate([d.property()],f.prototype,"features",null);c.__decorate([d.property()],f.prototype,"featuresPerPage",void 0);c.__decorate([d.property()],f.prototype,"featureViewModelAbilities",void 0);c.__decorate([d.property({readOnly:!0})],f.prototype,"featureViewModels",void 0);c.__decorate([d.property()],f.prototype,"highlightEnabled",
void 0);c.__decorate([d.property()],f.prototype,"includeDefaultActions",void 0);c.__decorate([d.property({type:I})],f.prototype,"location",null);c.__decorate([d.property({readOnly:!0})],f.prototype,"pendingPromisesCount",null);c.__decorate([d.property({readOnly:!0})],f.prototype,"selectedClusterBoundaryFeature",void 0);c.__decorate([d.property({readOnly:!0})],f.prototype,"waitingForResult",null);c.__decorate([d.property({readOnly:!0})],f.prototype,"promiseCount",null);c.__decorate([d.property()],
f.prototype,"promises",null);c.__decorate([d.property({value:null,readOnly:!0})],f.prototype,"selectedFeature",null);c.__decorate([d.property({value:-1})],f.prototype,"selectedFeatureIndex",null);c.__decorate([d.property({readOnly:!0})],f.prototype,"selectedFeatureViewModel",null);c.__decorate([d.property({readOnly:!0})],f.prototype,"state",null);c.__decorate([d.property()],f.prototype,"title",void 0);c.__decorate([d.property()],f.prototype,"updateLocationEnabled",void 0);c.__decorate([d.property()],
f.prototype,"view",void 0);c.__decorate([d.property()],f.prototype,"visible",void 0);c.__decorate([d.property()],f.prototype,"zoomFactor",void 0);c.__decorate([d.property()],f.prototype,"zoomToLocation",void 0);c.__decorate([d.property()],f.prototype,"centerAtLocation",null);return f=c.__decorate([a.subclass("esri.widgets.Popup.PopupViewModel")],f)})},"esri/symbols/support/symbolUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ../../core/maybe ../../support/arcadeOnDemand ./utils".split(" "),
function(p,c,f,l,w,C,z){function G(e,b){return E.apply(this,arguments)}function E(){E=f._asyncToGenerator(function*(e,b){switch(e.type){case "web-style":var {previewWebStyleSymbol:a}=yield new Promise(function(h,u){p(["./previewWebStyleSymbol"],h,u)});return a(e,G,b);case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return{previewSymbol3D:a}=yield new Promise(function(h,u){p(["./previewSymbol3D"],h,u)}),a(e,b);case "simple-marker":case "simple-line":case "simple-fill":case "picture-marker":case "picture-fill":case "text":return{previewSymbol2D:a}=
yield new Promise(function(h,u){p(["./previewSymbol2D"],h,u)}),a(e,b);case "cim":return{previewCIMSymbol:a}=yield new Promise(function(h,u){p(["./previewCIMSymbol"],h,u)}),a(e,b)}});return E.apply(this,arguments)}function y(e){return e&&"opacity"in e?e.opacity*y(e.parent):1}function n(){n=f._asyncToGenerator(function*(e,b){var a,h;if(e){var u=e.sourceLayer;u=null!=(a=w.isSome(b)&&null!=(h=b.useSourceLayer)&&h?u:e.layer)?a:u;a=y(u);if(w.isSome(e.symbol)&&(!w.isSome(b)||!0!==b.ignoreGraphicSymbol))return e=
"web-style"===e.symbol.type?yield e.symbol.fetchSymbol(w.isSome(b)?b.abortOptions:null):e.symbol.clone(),z.applyColorToSymbol(e,null,a),e;var r=w.isSome(b)&&b.renderer||u&&"renderer"in u&&u.renderer;if(h=r&&"getSymbolAsync"in r?yield r.getSymbolAsync(e,b):null){h="web-style"===h.type?yield h.fetchSymbol(w.isSome(b)?b.abortOptions:null):h.clone();if(!("visualVariables"in r&&r.visualVariables&&r.visualVariables.length))return z.applyColorToSymbol(h,null,a),h;"arcadeRequiredForVisualVariables"in r&&
r.arcadeRequiredForVisualVariables&&(w.isNone(b)||w.isNone(b.arcade))&&(b={...w.unwrap(b)},b.arcade=yield C.loadArcade());u=yield new Promise(function(B,L){p(["../../renderers/visualVariables/support/visualVariableUtils"],B,L)});var q=[],k=[],m=[],x=[];for(var v of r.visualVariables)switch(v.type){case "color":q.push(v);break;case "opacity":k.push(v);break;case "rotation":x.push(v);break;case "size":v.target||m.push(v)}v=(v=!!q.length&&q[q.length-1])?u.getColor(v,e,b):null;k=(k=!!k.length&&k[k.length-
1])?u.getOpacity(k,e,b):null;null!=a&&(k=null!=k?k*a:a);z.applyColorToSymbol(h,v,k);m.length&&(a=u.getAllSizes(m,e,b),yield z.applySizesToSymbol(h,a));for(const B of x)z.applyRotationToSymbol(h,u.getRotationAngle(B,e,b),B.axis);return h}}});return n.apply(this,arguments)}function g(){g=f._asyncToGenerator(function*(e,b){var a;if(e){var h=y(e.layer||e.sourceLayer);if(w.isSome(e.symbol)&&(!w.isSome(b)||!0!==b.ignoreGraphicSymbol))return e="web-style"===e.symbol.type?yield e.symbol.fetchSymbol(w.isSome(b)?
b.abortOptions:null):e.symbol.clone(),z.getColorFromSymbol(e,h);var u=w.isSome(b)&&b.renderer||e.get("layer.renderer")||e.get("sourceLayer.renderer"),r=yield u.getSymbolAsync(e,b);if(r){r="web-style"===r.type?yield r.fetchSymbol(w.isSome(b)?b.abortOptions:null):r.clone();r=z.getColorFromSymbol(r,h);if(!("visualVariables"in u)||"visualVariables"in u&&!u.visualVariables||"visualVariables"in u&&(null==(a=u.visualVariables)||!a.length))return r;u.arcadeRequiredForVisualVariables&&(w.isNone(b)||w.isNone(b.arcade))&&
(b={...w.unwrap(b)},b.arcade=yield C.loadArcade());a=yield new Promise(function(m,x){p(["../../renderers/visualVariables/support/visualVariableUtils"],m,x)});var q=[],k=[];for(const m of u.visualVariables)switch(m.type){case "color":q.push(m);break;case "opacity":k.push(m)}u=(u=0<q.length?q[q.length-1]:null)?a.getColor(u,e,b):r;e=(r=0<k.length?k[k.length-1]:null)?a.getOpacity(r,e,b):null;null!=h&&(e=null!=e?e*h:h);return u?z.applyOpacityToColor(u,e):null}}});return g.apply(this,arguments)}let d=null;
c.getDisplayedColor=function(e,b){return g.apply(this,arguments)};c.getDisplayedSymbol=function(e,b){return n.apply(this,arguments)};c.renderColorRampPreviewHTML=function(e,b={}){var a="horizontal"===b.align;const {width:h=a?75:24,height:u=a?24:75,gradient:r=!0}=b;b=window.devicePixelRatio;var q=h*b,k=u*b;b=document.createElement("canvas");b.width=q;b.height=k;b.style.width=`${h}px`;b.style.height=`${u}px`;const m=b.getContext("2d");var x=a?q:0,v=a?0:k;if(r){const B=m.createLinearGradient(0,0,x,v);
a=e.length;const L=1===a?0:1/(a-1);e.forEach((N,M)=>B.addColorStop(M*L,N.toString()));m.fillStyle=B;m.fillRect(0,0,q,k)}else{q=a?q/e.length:q;k=a?k:k/e.length;v=x=0;for(const B of e)m.fillStyle=B.toString(),m.fillRect(x,v,q,k),x=a?x+q:0,v=a?0:v+k}e=document.createElement("div");e.style.width=`${h}px`;e.style.height=`${u}px`;e.appendChild(b);return e};c.renderDotDensityPreviewHTML=function(e,b,a){const {backgroundColor:h,outline:u,dotSize:r}=e;a=a&&a.swatchSize||22;const q=Math.round(a*a/r**2*.8),
k=window.devicePixelRatio;e=document.createElement("canvas");const m=a*k;e.width=m;e.height=m;e.style.width=`${e.width/k}px`;e.style.height=`${e.height/k}px`;const x=e.getContext("2d");h&&(x.fillStyle=h.toCss(!0),x.fillRect(0,0,m,m),x.fill());x.fillStyle=b.toCss(!0);if(d&&d.length/2===q)for(b=0;b<2*q;b+=2)x.fillRect(d[b],d[b+1],r*k,r*k),x.fill();else for(d=[],b=0;b<2*q;b+=2){const v=Math.floor(Math.random()*(m-0+1)),B=Math.floor(Math.random()*(m-0+1));d.push(v,B);x.fillRect(v,B,r*k,r*k);x.fill()}u&&
(u.color&&(x.strokeStyle=u.color.toCss(!0)),x.lineWidth=u.width,x.strokeRect(0,0,m,m));a=new Image(a,a);a.src=e.toDataURL();return a};c.renderPreviewHTML=G;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/symbols/support/utils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ./gfxUtils ./Symbol3DMaterial".split(" "),function(p,c,f,l,w,C,z,G,
E,y,n,g){function d(I){I=I.symbolLayers;if(!I)return null;let P=null;I.forEach(V=>{if("object"!==V.type||null==V.resource.href)P="water"===V.type?G.unwrap(V.color):G.isSome(V.material)?G.unwrap(V.material.color):null});return P?new l(P):null}function e(I,P){if(null==P)return I;I=I.toRgba();I[3]*=P;return new l(I)}function b(I,P,V){if(I=I.symbolLayers){var ca=A=>{A=G.isSome(A)?A:null;P=P||A||null!=V&&S;return e(P,V)};I.forEach(A=>{if("object"!==A.type||null==A.resource.href||P)if("water"===A.type)A.color=
ca(A.color);else{var t=G.isSome(A.material)?A.material.color:null;t=ca(t);G.isNone(A.material)?A.material=new g["default"]({color:t}):A.material.color=t;null!=V&&"outline"in A&&G.isSome(A.outline)&&G.isSome(A.outline.color)&&(A.outline.color=e(A.outline.color,V))}})}}function a(I,P){return h.apply(this,arguments)}function h(){h=f._asyncToGenerator(function*(I,P){(I=I.symbolLayers)&&(yield C.forEach(I,function(){var V=f._asyncToGenerator(function*(ca){return u(ca,P)});return function(ca){return V.apply(this,
arguments)}}()))});return h.apply(this,arguments)}function u(I,P){return r.apply(this,arguments)}function r(){r=f._asyncToGenerator(function*(I,P){switch(I.type){case "extrude":I.size="number"===typeof P[2]?P[2]:0;break;case "icon":case "line":case "text":P=q(P);G.isSome(P)&&(I.size=P);break;case "path":{const V=x(P,y.ONES,[I.width,void 0,I.height]);I.width=L(P[0],I.width,1,V);I.height=L(P[2],I.height,1,V)}break;case "object":yield k(I,P)}});return r.apply(this,arguments)}function q(I){for(const P of I)if("number"===
typeof P)return P;return null}function k(I,P){return m.apply(this,arguments)}function m(){m=f._asyncToGenerator(function*(I,P){const {resourceSize:V,symbolSize:ca}=yield v(I),A=x(P,V,ca);I.width=L(P[0],ca[0],V[0],A);I.depth=L(P[1],ca[1],V[1],A);I.height=L(P[2],ca[2],V[2],A)});return m.apply(this,arguments)}function x(I,P,V){for(let ca=0;3>ca;ca++){const A=I[ca];switch(A){case "symbol-value":return null!=V[ca]?V[ca]/P[ca]:1;case "proportional":break;default:if(A&&P[ca])return A/P[ca]}}return 1}function v(I){return B.apply(this,
arguments)}function B(){B=f._asyncToGenerator(function*(I){const P=yield(yield new Promise(function(D,H){p(["./symbolLayerUtils"],D,H)})).computeObjectLayerResourceSize(I,10),{width:V,height:ca,depth:A}=I;I=[V,A,ca];let t=1;for(var F=0;3>F;F++)if(null!=I[F]){t=I[F]/P[F];break}for(F=0;3>F;F++)null==I[F]&&(I[F]=P[F]*t);return{resourceSize:P,symbolSize:I}});return B.apply(this,arguments)}function L(I,P,V,ca){switch(I){case "proportional":return V*ca;case "symbol-value":return null!=P?P:V;default:return I}}
function N(){N=f._asyncToGenerator(function*(I,P){if(I&&P){if(w.isSymbol3D(I))return a(I,P);if(w.isSymbol2D(I)&&(P=q(P),!G.isNone(P)))switch(I.type){case "simple-marker":I.size=P;break;case "picture-marker":{const V=I.width/I.height;1<V?(I.width=P,I.height=P*V):(I.width=P*V,I.height=P);break}case "simple-line":I.width=P;break;case "text":I.font.size=P}}});return N.apply(this,arguments)}const M=/\/resource\/(.*?)\.svg$/,S=new l("white");c.applyColorToSymbol=function(I,P,V){if(I&&(P||null!=V))if(P&&
(P=new l(P)),w.isSymbol3D(I))b(I,P,V);else if(w.isSymbol2D(I)){if(P=P||I.color)I.color=e(P,V);null!=V&&"outline"in I&&I.outline&&I.outline.color&&(I.outline.color=e(I.outline.color,V))}};c.applyOpacityToColor=e;c.applyRotationToSymbol=function(I,P,V){I&&null!=P&&(w.isSymbol3D(I)?(I=I.symbolLayers)&&I.forEach(ca=>{if(ca&&"object"===ca.type)switch(V){case "tilt":ca.tilt=P;break;case "roll":ca.roll=P;break;default:ca.heading=P}}):!w.isSymbol2D(I)||"simple-marker"!==I.type&&"picture-marker"!==I.type&&
"text"!==I.type||(I.angle=P))};c.applySizesToSymbol=function(I,P){return N.apply(this,arguments)};c.getColorFromSymbol=function(I,P){if(!I)return null;let V=null;w.isSymbol3D(I)?V=d(I):w.isSymbol2D(I)&&(V=I.color?new l(I.color):null);return V?e(V,P):null};c.getIconHref=function(I,P){P=P.resource.href;return!z("esri-canvas-svg-support")&&I.styleOrigin&&M.test(P)?P.replace(M,"/resource/png/$1.png"):P};c.getSymbolOutlineSize=function(I){if(!I)return 0;if(w.isSymbol3D(I)){{const P=I.symbolLayers&&I.symbolLayers.length;
P?(I=I.symbolLayers.getItemAt(P-1),I="outline"in I?G.get(I,"outline","size"):void 0):I=void 0}return G.isSome(I)?I:0}return(I=n.getStroke(I))&&E.px2pt(I.width)||0};c.isVolumetricSymbol=function(I){if(G.isNone(I)||!("symbolLayers"in I)||G.isNone(I.symbolLayers))return!1;switch(I.type){case "point-3d":return I.symbolLayers.some(P=>"object"===P.type);case "line-3d":return I.symbolLayers.some(P=>"path"===P.type);case "polygon-3d":return I.symbolLayers.some(P=>"object"===P.type||"extrude"===P.type);default:return!1}};
Object.defineProperty(c,"__esModule",{value:!0})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/screenUtils ./cimSymbolUtils".split(" "),function(p,c,f,l,w,C,z){function G(d){if(!d)return null;let e;switch(d.type){case "simple-fill":case "picture-fill":case "simple-marker":e=G(d.outline);break;case "simple-line":{const b=C.pt2px(d.width);"none"!==d.style&&0!==b&&(e={color:d.color,style:g(d.style),width:b,cap:d.cap,
join:"miter"===d.join?C.pt2px(d.miterLimit):d.join});break}default:e=null}return e}const E={left:"start",center:"middle",right:"end",justify:"start"},y={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},n=new w(1E3),g=function(){const d={};return function(e){if(d[e])return d[e];const b=e.replace(/-/g,"");return d[e]=b}}();f=new f([128,128,128]);p.defaultThematicColor=f;p.dekebabifyLineStyle=g;p.getFill=function(d){const e=d.style;let b=null;if(d)switch(d.type){case "simple-marker":"cross"!==
e&&"x"!==e&&(b=d.color);break;case "simple-fill":"solid"===e?b=d.color:"none"!==e&&(b={type:"pattern",x:0,y:0,src:c.getAssetUrl(`esri/symbols/patterns/${e}.png`),width:5,height:5});break;case "picture-fill":b={type:"pattern",src:d.url,width:C.pt2px(d.width)*d.xscale,height:C.pt2px(d.height)*d.yscale,x:C.pt2px(d.xoffset),y:C.pt2px(d.yoffset)};break;case "text":b=d.color;break;case "cim":b=z.getCIMSymbolColor(d)}return b};p.getPatternUrlWithColor=function(d,e){const b=d+"-"+e;return void 0!==n.get(b)?
Promise.resolve(n.get(b)):l(d,{responseType:"image"}).then(a=>{a=a.data;const h=a.naturalWidth,u=a.naturalHeight,r=document.createElement("canvas");r.width=h;r.height=u;const q=r.getContext("2d");q.fillStyle=e;q.fillRect(0,0,h,u);q.globalCompositeOperation="destination-in";q.drawImage(a,0,0);a=r.toDataURL();n.put(b,a);return a})};p.getSVGAlign=function(d){return d=(d=d.horizontalAlignment)&&E[d.toLowerCase()]||"middle"};p.getSVGBaseline=function(d){return(d=d.verticalAlignment)&&y[d.toLowerCase()]||
"alphabetic"};p.getSVGBaselineShift=function(d){return"bottom"===d.verticalAlignment?"super":null};p.getStroke=G;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(p){return function(){function c(l,w){this._storage=new p.MemCacheStorage;this._storage.maxSize=l;w&&this._storage.registerRemoveFunc("",w)}var f=c.prototype;f.put=function(l,w){this._storage.put(l,w,1,1)};f.pop=function(l){return this._storage.pop(l)};f.get=function(l){return this._storage.get(l)};
f.clear=function(){this._storage.clearAll()};f.destroy=function(){this._storage.destroy()};return c}()})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(p,c,f){function l(g){g=f.toCIMSymbolJSON(g);if("CIMTextSymbol"===g.type)return g.height;let d=0;if(g.symbolLayers)for(const e of g.symbolLayers)f.isCIMMarker(e)&&e.size>d?d=e.size:f.isCIMStroke(e)&&e.width>d?d=e.width:f.isCIMFill(e);return d}function w(g,d,e,b){if("CIMTextSymbol"===g.type)g.height*=
d;else{if(e&&g.effects)for(const a of g.effects)G(a,d);if(g.symbolLayers)for(const a of g.symbolLayers)switch(a.type){case "CIMPictureMarker":case "CIMVectorMarker":C(a,d,b);break;case "CIMPictureStroke":case "CIMSolidStroke":null!=b&&b.preserveOutlineWidth||(a.width*=d);break;case "CIMPictureFill":a.height*=d;a.offsetX*=d;a.offsetY*=d;break;case "CIMHatchFill":w(a.lineSymbol,d,!0,{...b,preserveOutlineWidth:!1}),a.offsetX*=d,a.offsetY*=d,a.separation*=d}}}function C(g,d,e){g.markerPlacement&&z(g.markerPlacement,
d);g.offsetX*=d;g.offsetY*=d;g.anchorPoint&&"Absolute"===g.anchorPointUnits&&(g.anchorPoint={x:g.anchorPoint.x*d,y:g.anchorPoint.y*d});g.size*=d;if("CIMVectorMarker"===g.type&&g.markerGraphics)for(const b of g.markerGraphics)g.scaleSymbolsProportionally||w(b.symbol,d,!0,e)}function z(g,d){f.isCIMMarkerStrokePlacement(g)&&(g.offset*=d);switch(g.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":g.customEndingOffset*=d;g.offsetAlongLine*=d;if(g.placementTemplate&&
g.placementTemplate.length){var e=g.placementTemplate.map(b=>b*d);g.placementTemplate=e}break;case "CIMMarkerPlacementAlongLineVariableSize":g.maxRandomOffset*=d;g.placementTemplate&&g.placementTemplate.length&&(e=g.placementTemplate.map(b=>b*d),g.placementTemplate=e);break;case "CIMMarkerPlacementOnLine":g.startPointOffset*=d;break;case "CIMMarkerPlacementAtExtremities":g.offsetAlongLine*=d;break;case "CIMMarkerPlacementAtRatioPositions":g.beginPosition*=d;g.endPosition*=d;break;case "CIMMarkerPlacementPolygonCenter":g.offsetX*=
d;g.offsetY*=d;break;case "CIMMarkerPlacementInsidePolygon":g.offsetX*=d,g.offsetY*=d,g.stepX*=d,g.stepY*=d}}function G(g,d){switch(g.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":g.width*=d;break;case "CIMGeometricEffectBuffer":g.size*=d;break;case "CIMGeometricEffectCut":g.beginCut*=d;g.endCut*=d;g.middleCut*=d;break;case "CIMGeometricEffectDashes":g.customEndingOffset*=d;g.offsetAlongLine*=d;if(g.dashTemplate&&g.dashTemplate.length){const e=g.dashTemplate.map(b=>b*d);g.dashTemplate=
e}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":g.length*=d;break;case "CIMGeometricEffectMove":g.offsetX*=d;g.offsetY*=d;break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":g.offset*=d;break;case "CIMGeometricEffectRegularPolygon":g.radius*=d;break;case "CIMGeometricEffectTaperedPolygon":g.fromWidth*=d;g.length*=d;g.toWidth*=d;break;case "CIMGeometricEffectWave":g.amplitude*=d,g.period*=d}}function E(g,d){let e;e="CIMTextSymbol"===
g.type?g.symbol:g;g="CIMPolygonSymbol"===g.type;if(e.symbolLayers)for(const b of e.symbolLayers)if(!(b.colorLocked||g&&(f.isCIMStroke(b)||f.isCIMMarker(b)&&b.markerPlacement&&f.isCIMMarkerStrokePlacement(b.markerPlacement))))switch(b.type){case "CIMVectorMarker":b.markerGraphics.forEach(a=>{E(a.symbol,d)});break;case "CIMSolidStroke":case "CIMSolidFill":y(d,b.color);break;case "CIMHatchFill":E(b.lineSymbol,d)}}function y(g,d){for(const e of g)if(e.join(".")===d.join("."))return;g.push(d)}function n(g,
d){var e="CIMTextSymbol"===g.type?g.symbol:g;g="CIMPolygonSymbol"===g.type?!0:!1;if(e.symbolLayers)for(const b of e.symbolLayers)if(!(b.colorLocked||g&&(f.isCIMStroke(b)||f.isCIMMarker(b)&&b.markerPlacement&&f.isCIMMarkerStrokePlacement(b.markerPlacement))))switch(e=d.toArray(0),b.type){case "CIMVectorMarker":b.markerGraphics.forEach(a=>{n(a.symbol,d)});break;case "CIMSolidStroke":case "CIMSolidFill":b.color=e;break;case "CIMHatchFill":n(b.lineSymbol,d)}}p.applyCIMSymbolColor=function(g,d){d instanceof
c||(d=new c(d));g=f.toCIMSymbolJSON(g);n(g,d)};p.applyCIMSymbolRotation=function(g,d,e=!1){g=f.toCIMSymbolJSON(g);e&&0!==d&&(d=360-d);if("CIMTextSymbol"===g.type)g.angle=d;else if("CIMPointSymbol"===g.type&&g.symbolLayers){e=d-(g.angle||0);for(const b of g.symbolLayers)if(f.isCIMMarker(b)){let a=b.rotation||0;a=b.rotateClockwise?a-e:a+e;b.rotation=a}g.angle=d}};p.getCIMSymbolColor=function(g){g=f.toCIMSymbolJSON(g);const d=[];E(g,d);return d.length?new c(f.fromCIMColor(d[0])):null};p.getCIMSymbolRotation=
function(g,d=!1){g=f.toCIMSymbolJSON(g);return"CIMTextSymbol"===g.type||"CIMPointSymbol"===g.type?d&&0!==g.angle?360-g.angle:g.angle||0:0};p.getCIMSymbolSize=l;p.scaleCIMMarker=C;p.scaleCIMSymbolTo=function(g,d,e){const b=f.toCIMSymbolJSON(g);g=l(g);if(0===g)if("CIMTextSymbol"===b.type)b.height=d;else{if(b.symbolLayers)for(const a of b.symbolLayers)switch(a.type){case "CIMPictureMarker":case "CIMVectorMarker":a.size=d;break;case "CIMPictureStroke":case "CIMSolidStroke":a.width=d}}else w(b,d/g,!1,
e)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/cim/utils":function(){define(["exports"],function(p){function c(f,l){"string"!==typeof f&&(f=String(f));switch(l){case "LowerCase":return f.toLowerCase();case "Allcaps":return f.toUpperCase();default:return f}}p._adjustTextCase=c;p.colorToArray=function(f){return[f.r,f.g,f.b,f.a]};p.createLabelOverrideFunction=function(f,l,w){const C=y=>{let n=y.length;for(;n--;)if(-1===" /-,\n".indexOf(y.charAt(n)))return!1;return!0},z=[];var G=
0;let E=-1;do E=l.indexOf("[",G),E>=G&&(E>G&&(G=l.substr(G,E-G),z.push([G,null,C(G)])),G=E+1,E=l.indexOf("]",G),E>=G&&(E>G&&(G=l.substr(G,E-G),(G=f[G])&&z.push([null,G,!1])),G=E+1));while(-1!==E);G<l.length-1&&(f=l.substr(G),z.push([f,null,C(f)]));return y=>{let n="",g=null;for(const d of z){const [e,b,a]=d;if(e)a?g=e:(g&&(n+=g,g=null),n+=e);else{const h=y.attributes[b];h&&(g&&(n+=g,g=null),n+=h)}}return c(n,w)}};p.evaluateValueOrFunction=function(f,l,w,C){return"function"===typeof f?f(l,w,C):f};
p.fromCIMColor=function(f){return f?{r:f[0],g:f[1],b:f[2],a:f[3]/255}:{r:0,g:0,b:0,a:0}};p.isCIMFill=function(f){return"CIMGradientFill"===f.type||"CIMHatchFill"===f.type||"CIMPictureFill"===f.type||"CIMSolidFill"===f.type||"CIMWaterFill"===f.type};p.isCIMMarker=function(f){return"CIMVectorMarker"===f.type||"CIMPictureMarker"===f.type||"CIMBarChartMarker"===f.type||"CIMCharacterMarker"===f.type||"CIMPieChartMarker"===f.type||"CIMStackedBarChartMarker"===f.type};p.isCIMMarkerStrokePlacement=function(f){return"CIMMarkerPlacementAlongLineRandomSize"===
f.type||"CIMMarkerPlacementAlongLineSameSize"===f.type||"CIMMarkerPlacementAlongLineVariableSize"===f.type||"CIMMarkerPlacementAtExtremities"===f.type||"CIMMarkerPlacementAtMeasuredUnits"===f.type||"CIMMarkerPlacementAtRatioPositions"===f.type||"CIMMarkerPlacementOnLine"===f.type||"CIMMarkerPlacementOnVertices"===f.type};p.isCIMStroke=function(f){return"CIMGradientStroke"===f.type||"CIMPictureStroke"===f.type||"CIMSolidStroke"===f.type};p.resampleHermite=function(f,l,w,C,z,G,E=!0){const y=l/z;w/=
G;const n=Math.ceil(y/2),g=Math.ceil(w/2);for(let b=0;b<G;b++)for(let a=0;a<z;a++){const h=4*(a+(E?G-b-1:b)*z);var d=0;let u=0,r=0,q=0,k=0,m=0,x=0;const v=(b+.5)*w;for(let B=Math.floor(b*w);B<(b+1)*w;B++){var e=Math.abs(v-(B+.5))/g;const L=(a+.5)*y;e*=e;for(let N=Math.floor(a*y);N<(a+1)*y;N++){let M=Math.abs(L-(N+.5))/n;d=Math.sqrt(e+M*M);-1<=d&&1>=d&&(d=2*d*d*d-3*d*d+1,0<d&&(M=4*(N+B*l),x+=d*f[M+3],r+=d,255>f[M+3]&&(d=d*f[M+3]/250),q+=d*f[M],k+=d*f[M+1],m+=d*f[M+2],u+=d))}}C[h]=q/u;C[h+1]=k/u;C[h+
2]=m/u;C[h+3]=x/r}};p.toCIMSymbolJSON=function(f){var l;return null==(l=f.data)?void 0:l.symbol};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/support/layerViewUtils":function(){define(["exports","../../core/maybe"],function(p,c){p.extractSafeScaleBounds=function(f){let {minScale:l,maxScale:w}=f;return{minScale:l||0,maxScale:w||0}};p.highlightsSupported=function(f){return f&&"function"===typeof f.highlight};p.occludeesSupported=function(f){return f&&"function"===typeof f.maskOccludee};
p.scaleBoundsPredicate=function(f,l,w){return c.isNone(f)||f>w&&(0===l||f<l)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/widgets/Popup/actions":function(){define(["exports","../../support/actions/ActionButton"],function(p,c){const f=new c({id:"zoom-to-feature",title:"{messages.zoom}",className:"esri-icon-zoom-in-magnifying-glass"}),l=new c({id:"remove-selected-feature",title:"{messages.remove}",className:"esri-icon-trash"}),w=new c({id:"zoom-to-clustered-features",title:"{messages.zoom}",
className:"esri-icon-zoom-in-magnifying-glass"});c=new c({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:"esri-icon-table"});p.all=[f,l,c,w];p.browseClusteredFeatures=c;p.removeSelectedFeature=l;p.zoomToClusteredFeatures=w;p.zoomToFeature=f;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/widgets/Popup/actionUtils":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/Error","../../core/Logger","./actions"],function(p,c,f,l,
w){function C(b){const {selectedFeature:a,location:h,view:u}=b;return u?"3d"===u.type?a||h:b.get("selectedFeature.geometry")||h:null}function z(b,a){if("3d"!==(null==a?void 0:a.type)||!b||"esri.Graphic"!==b.declaredClass)return!0;if((a=a.getViewForGraphic(b))&&"whenGraphicBounds"in a){let h=!1;a.whenGraphicBounds(b,{useViewElevation:!0}).then(u=>{h=!u||!u.boundingBox||u.boundingBox[0]===u.boundingBox[3]&&u.boundingBox[1]===u.boundingBox[4]&&u.boundingBox[2]===u.boundingBox[5]}).catch(()=>{const u=
new f("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:b});e.error(u)});return h}return!0}function G(b){return E.apply(this,arguments)}function E(){E=c._asyncToGenerator(function*(b){const {location:a,selectedFeature:h,view:u,zoomFactor:r}=b,q=C(b);if(!q)return b=new f("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:q,view:u}),e.error(b),Promise.reject(b);const k=u.scale/r,m=b.get("selectedFeature.geometry")||a,x=m&&
"point"===m.type&&z(h,u);w.zoomToFeature.active=!0;w.zoomToFeature.disabled=!0;yield b.view.goTo({target:q,scale:x?k:void 0});w.zoomToFeature.active=!1;w.zoomToFeature.disabled=!1;b.zoomToLocation=null;x&&(b.location=m)});return E.apply(this,arguments)}function y(b){return n.apply(this,arguments)}function n(){n=c._asyncToGenerator(function*(b){const {selectedFeature:a,view:h}=b;if("2d"!==(null==h?void 0:h.type))throw b=new f("zoomToCluster:invalid-view","View must be 2d MapView.",{view:h}),e.error(b),
b;if(!a.isAggregate)throw b=new f("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:a}),e.error(b),b;b=yield h.whenLayerView(a.sourceLayer);const u=b.createQuery();u.aggregateIds=[a.getObjectId()];w.zoomToClusteredFeatures.active=!0;w.zoomToClusteredFeatures.disabled=!0;({extent:b}=yield b.queryExtent(u));yield h.goTo({target:b});w.zoomToClusteredFeatures.active=!1;w.zoomToClusteredFeatures.disabled=!1});return n.apply(this,arguments)}
function g(){g=c._asyncToGenerator(function*(b){const {selectedFeature:a,view:h}=b;if("2d"!==(null==h?void 0:h.type))throw b=new f("displayClusterExtent:invalid-view","View must be 2d MapView.",{view:h}),e.error(b),b;if(!a.isAggregate)throw b=new f("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:a}),e.error(b),b;var u=yield h.whenLayerView(a.sourceLayer);const r=u.createQuery();r.aggregateIds=[a.getObjectId()];({extent:u}=yield u.queryExtent(r));
b.selectedClusterBoundaryFeature.geometry=u;h.graphics.add(b.selectedClusterBoundaryFeature)});return g.apply(this,arguments)}function d(){d=c._asyncToGenerator(function*(b){const {selectedFeature:a,view:h}=b;if("2d"!==(null==h?void 0:h.type))throw b=new f("browseAggregateFeatures:invalid-view","View must be 2d MapView.",{view:h}),e.error(b),b;if(!a.isAggregate)throw b=new f("browseAggregateFeatures:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:a}),
e.error(b),b;b=yield h.whenLayerView(a.sourceLayer);const u=b.createQuery();u.aggregateIds=[a.getObjectId()];w.browseClusteredFeatures.active=!0;w.browseClusteredFeatures.disabled=!0;({features:b}=yield b.queryFeatures(u));w.browseClusteredFeatures.active=!1;w.browseClusteredFeatures.disabled=!1;h.popup.open({features:[a].concat(b),featureMenuOpen:!0})});return d.apply(this,arguments)}const e=l.getLogger("esri.widgets.Popup.PopupViewModel");p.browseAggregateFeatures=function(b){return d.apply(this,
arguments)};p.displayClusterExtent=function(b){return g.apply(this,arguments)};p.getSelectedTarget=C;p.isZoomScreenSize=z;p.removeClusteredFeaturesForBrowsing=function(b){b.features=b.features.filter(a=>a.isAggregate)};p.triggerAction=function(b){const {event:a,view:h}=b;({action:b}=a);var u=h&&h.popup;if(!b)return Promise.reject(new f("trigger-action:missing-arguments","Event has no action"));if(!u)return Promise.reject(new f("trigger-action:missing-arguments","view.popup is missing"));const {disabled:r,
id:q}=b;if(!q)return Promise.reject(new f("trigger-action:invalid-action","action.id is missing"));if(r)return Promise.reject(new f("trigger-action:invalid-action","Action is disabled"));if(q===w.zoomToFeature.id)return G(u.viewModel);if(q===w.zoomToClusteredFeatures.id)return y(u.viewModel);if(q===w.browseClusteredFeatures.id)return u.featureMenuOpen=!u.featureMenuOpen,u.viewModel.browseClusterEnabled=!u.viewModel.browseClusterEnabled,Promise.resolve();u.viewModel.browseClusterEnabled=!1;if(q===
w.removeSelectedFeature.id){u.close();({selectedFeature:b}=u);if(!b)return Promise.reject(new f(`trigger-action:${w.removeSelectedFeature.id}`,"selectedFeature is required",{selectedFeature:b}));({sourceLayer:u}=b);u?u.remove(b):h.graphics.remove(b)}return Promise.resolve()};p.zoomToClusterExtent=y;p.zoomToLocation=G;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/widgets/support/GoTo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,f,l,w,C,z,G){p.GoToMixin=E=>{E=function(y){function n(...g){g=y.call(this,...g)||this;g.goToOverride=null;g.view=null;return g}c._inheritsLoose(n,y);n.prototype.callGoTo=function(g){const {view:d}=this;return this.goToOverride?this.goToOverride(d,g):d.goTo(g.target,g.options)};return n}(E);f.__decorate([l.property()],E.prototype,"goToOverride",void 0);f.__decorate([l.property()],E.prototype,"view",void 0);return E=f.__decorate([G.subclass("esri.widgets.support.GoTo")],E)};Object.defineProperty(p,
"__esModule",{value:!0})})},"esri/views/MapViewBase":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../geometry ../Viewpoint ../core/Error ../core/Logger ../core/maybe ../core/promiseUtils ../core/screenUtils ../core/watchUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../geometry/support/webMercatorUtils ../layers/support/TileInfo ./PopupView ./View ./ViewAnimation ./2d/AnimationManager ./2d/FrameTask ./2d/layerViewModuleImportUtils ./2d/MapViewConstraints ./2d/PaddedViewState ./2d/tiling/PagedTileQueue ./2d/tiling/TileInfoView ./2d/tiling/TileKey ./2d/tiling/TileQueue ./2d/tiling/TileStrategy ./2d/viewpointUtils ./2d/layers/features/support/TileStore ./2d/support/Timeline ../geometry/Point ../geometry/Extent ../geometry/SpatialReference".split(" "),
function(p,c,f,l,w,C,z,G,E,y,n,g,d,e,b,a,h,u,r,q,k,m,x,v,B,L,N,M,S,I,P,V,ca,A,t){const F=C.getLogger("esri.views.MapView");f=function(D){function H(J){var T=D.call(this,J)||this;T._stationaryTimer=null;T.frameTask=new k(p._assertThisInitialized(T));T.featuresTilingScheme=null;T.fullOpacity=1;T.graphicsView=null;T.initialExtent=null;T.labelManager=null;T.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0};T.resizeAlign="center";T.supportsGround=
!1;T.timeline=new V.Timeline;T.type="2d";T.constraints=new x;T.padding={top:0,right:0,bottom:0,left:0};const Y=T.handles,da=()=>T.notifyChange("updating");Y.add([T.watch("viewpoint",()=>{T._lastStationaryEventTimestamp=performance.now();T._flipStationary(160)},!0),T.on("resize",ha=>T._resizeHandler(ha)),T.watch("animationManager.animation",ha=>{T.animation=ha}),T.allLayerViews.on("change",()=>{da();Y.remove("map-view-base-layerViewsUpdating");Y.add(T.allLayerViews.map(ha=>ha.watch("updating",da)),
"map-view-base-layerViewsUpdating")})],"map-view-base");return T}p._inheritsLoose(H,D);var K=H.prototype;K.destroy=function(){this.destroyed||(this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null)};K.goTo=function(J,T){if(J)return this.animation&&(this.animation=null),this._createAnimation(),y.whenTrueOnce(this,"ready",T&&T.signal).then(()=>{const Y={animate:!0,...T},da=I.createAsync(J,this);this.animation.update(da);this._gotoTask={};return Y.animate?this._gotoAnimated(da,Y):this._gotoImmediate(da,
Y)});F.error("#goTo()","target cannot be null or undefined")};K.hitTest=function(J){return Promise.reject("Should be implemented by subclasses")};K.popupHitTest=function(J){return this.hitTest(J).then(T=>({...T,mapPoint:this.toMap(J)}))};K.toMap=function(J){if(!this.ready)return null;const [T,Y]=this.state.toMap([0,0],[J.x,J.y]);return new ca({x:T,y:Y,spatialReference:this.spatialReference})};K.isTileInfoRequired=function(){return!0};K.toScreen=function(J){if(!this.ready)return null;J=this._normalizeInput(J);
J=[J.x,J.y];this.state.toScreen(J,J);return E.createScreenPoint(J[0],J[1])};K.pixelSizeAt=function(){return this.ready?this.state.resolution:(F.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)};K.requestUpdate=function(){this.ready&&this.frameTask.requestUpdate()};K.getDefaultSpatialReference=function(){return this.get("map.initialViewProperties.spatialReference")||this.get("defaultsFromMap.spatialReference")||null};K.isSpatialReferenceSupported=function(J,T){return T||this._get("ready")?
!0:null!==this._getDefaultViewpoint()};K.importLayerView=function(J){return m.layerView2DImporter.importLayerView(J)};K.hasLayerViewModule=function(J){return m.layerView2DImporter.hasLayerViewModule(J)};K._createAnimation=function(){if(!this.animation||this.animation.done)this.animation=new r;return this.animation};K._cancellableGoTo=function(J,T,Y){const da=()=>J===this._gotoTask,ha=Y.then(()=>{da()&&(this.animation=null)}).catch(oa=>{da()&&(this.animation=null,T.done||(T.stop(),this.frameTask.animationInProgress=
!1));throw oa;}),ia=new Promise(oa=>oa(ha));T.when().catch(()=>{da()&&ia.cancel&&ia.cancel()});return ia};K._gotoImmediate=function(J,T){const Y=this._gotoTask,da=this.animation;J=J.then(ha=>{G.throwIfAborted(T);if(Y!==this._gotoTask)throw new w("view:goto-interrupted","Goto was interrupted");this.viewpoint=da.target=ha;da.finish()});return this._cancellableGoTo(Y,da,J)};K._gotoAnimated=function(J,T){const Y=this._gotoTask,da=this.animation;J=J.then(ha=>{G.throwIfAborted(T);if(Y!==this._gotoTask)throw new w("view:goto-interrupted",
"Goto was interrupted");da.update(ha);this.animationManager.animate(da,this.viewpoint,T);return da.when().then(()=>{},()=>{})});return this._cancellableGoTo(Y,da,J)};K._resizeHandler=function(J){const T=this.state;if(T){var Y=this.state.paddedViewState.viewpoint,da=this.state.paddedViewState.size.concat();T.size=[J.width,J.height];I.resize(Y,Y,da,this.state.paddedViewState.size,this.resizeAlign);Y=this.constraints.constrain(Y,null);this.state.viewpoint=Y}};K._startup=function(){const J=this._getDefaultViewpoint();
this.constraints.view=this;this.constraints.fit(J);this._set("animationManager",new q({view:this}));this._set("state",new v({padding:this._get("padding"),size:this.size,viewpoint:J}));this._set("featuresTilingScheme",new L(a.create({spatialReference:this.spatialReference,size:512,numLODs:36})));this._set("ready",!0);this.frameTask&&this.frameTask.start()};K._teardown=function(){this.frameTask&&this.frameTask.stop();this._set("ready",!1);this._stationaryTimer&&(clearTimeout(this._stationaryTimer),
this._stationaryTimer=null);const {center:[J,T],spatialReference:Y,rotation:da,scale:ha}=this.state.paddedViewState,ia=new ca({x:J,y:T,spatialReference:Y});this._set("viewpoint",null);this._set("extent",null);this._set("center",ia);this._set("zoom",-1);this._set("rotation",da);this._set("scale",ha);this._set("spatialReference",Y);this.constraints.view=null;this.animationManager.destroy();this._set("animationManager",null);this._set("state",null);this.animation=null};K._flipStationary=function(J){return null!==
this._stationaryTimer?this._stationaryTimer:this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const T=performance.now()-this._lastStationaryEventTimestamp;160>T&&(this._stationaryTimer=this._flipStationary(T))},J)};K._normalizeInput=function(J,T=this.spatialReference){const Y=J&&J.targetGeometry||J;return T?Y?T.equals(Y.spatialReference)?J:b.canProject(Y,T)?J&&"esri.Viewpoint"===J.declaredClass?(J.targetGeometry=b.project(Y,T),J):b.project(Y,T):null:null:J};K._getDefaultViewpoint=function(){var J=
this.constraints,T=this._get("zoom"),Y=this._get("scale"),da=this._normalizeInput(this._get("center")),ha=this._normalizeInput(this._get("extent")),ia=this._get("rotation"),oa=this._normalizeInput(this._get("viewpoint"));J.effectiveLODs?-1!==T&&(Y=J.zoomToScale(T)):T=-1;let ma=null;var Z=null;T=0;J=oa&&oa.rotation;var ba=oa&&oa.targetGeometry;z.isSome(ba)&&("extent"===ba.type?ma=ba:"point"===ba.type&&(Z=ba,T=oa.scale));oa=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent"));
ba=this._normalizeInput(this.initialExtent);ha=ha||ma||oa||ba;da=da||Z||ha&&ha.center;Z=this.get("map.initialViewProperties.viewpoint.scale");Y=Y||T||Z||ha&&I.extentToScale(ha,this.size);T=this.get("map.initialViewProperties.viewpoint.rotation");return da&&Y?new l({targetGeometry:da,scale:Y,rotation:ia||J||T||0}):null};p._createClass(H,[{key:"animation",set:function(J){var T=this._get("animation");J!==T&&(T&&T.stop(),!J||J.isFulfilled()?this._set("animation",null):(this._set("animation",J),this.frameTask.animationInProgress=
!0,T=()=>{J===this._get("animation")&&(this._set("animation",null),this.frameTask.requestFrame());this.frameTask.animationInProgress=!1},J.when(T,T)))}},{key:"center",get:function(){if(!this.ready)return this._get("center");const {center:J,spatialReference:T}=this.state.paddedViewState;return new ca({x:J[0],y:J[1],spatialReference:T})},set:function(J){if(null!=J)if(this._normalizeInput(J))if(this.ready){var T=this.viewpoint;I.centerAt(T,T,J);this.viewpoint=T}else this._set("center",J),this.notifyChange("initialExtentRequired");
else F.error("#center",`incompatible spatialReference ${JSON.stringify(J.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`)}},{key:"constraints",set:function(J){const T=this._get("constraints");T&&(this.handles.remove("map-view-base-constraints"),T.destroy());this._set("constraints",J);J&&(J.view=this,this.ready&&(this.state.viewpoint=J.fit(this.state.paddedViewState.viewpoint)),this.handles.add(J.on("update",()=>{this.ready&&this.state&&(this.state.viewpoint=
J.fit(this.state.paddedViewState.viewpoint))}),"map-view-base-constraints"))}},{key:"extent",get:function(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")},set:function(J){if(null!=J){var T=this._normalizeInput(J);T?T.width&&T.height?this.ready?(J=this.viewpoint,I.setExtent(J,J,T,this.size,{constraints:this.constraints}),this.viewpoint=J):(this._set("extent",T),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),this.notifyChange("initialExtentRequired")):
F.error("#extent","invalid extent size"):F.error("#center",`incompatible spatialReference ${JSON.stringify(J.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`)}}},{key:"graphicsTileStore",get:function(){return new P(this.featuresTilingScheme)}},{key:"initialExtentRequired",get:function(){const {extent:J,center:T,scale:Y,viewpoint:da,zoom:ha}=this;return this.get("map.initialViewProperties.viewpoint")||J||T&&(0!==Y||-1!==ha)||da?!1:!0}},{key:"padding",get:function(){return this.ready?
this.state.padding:this._get("padding")},set:function(J){this.ready?(this.state.padding=J,this._set("padding",this.state.padding)):this._set("padding",J)}},{key:"resolution",get:function(){return this.state?this.state.resolution:0}},{key:"rotation",get:function(){return this.ready?this.state.rotation:this._get("rotation")},set:function(J){if(!isNaN(J))if(this.ready){var T=this.viewpoint;I.rotateTo(T,T,J);this.viewpoint=T}else this._set("rotation",J)}},{key:"scale",get:function(){return this.ready?
this.state.scale:this._get("scale")},set:function(J){if(J&&!isNaN(J))if(this.ready){var T=this.viewpoint;I.scaleTo(T,T,J);this.viewpoint=T}else{this._set("scale",J);this._set("zoom",-1);if(J=this._get("extent"))this._set("extent",null),this._set("center",J.center);this.notifyChange("initialExtentRequired")}}},{key:"stationary",get:function(){return!this.animation&&!this.navigating&&!this._get("resizing")&&!this._stationaryTimer}},{key:"updating",get:function(){return!this.destroyed&&(!0===this.get("layerViewManager.updating")||
!0===this.get("labelManager.updating")||!0===this.get("graphicsView.updating")||this.allLayerViews.some(J=>!J.destroyed&&!("layerViews"in J)&&!0===J.updating))}},{key:"viewpoint",get:function(){if(!this.ready)return this._get("viewpoint");const J=this.state.paddedViewState;return J&&J.viewpoint.clone()},set:function(J){if(null!=J){var T=this._normalizeInput(J);T?this.ready?(J=new l({targetGeometry:new ca,scale:0,rotation:0}),I.copy(J,T),this.constraints.constrain(J,this.state.paddedViewState.viewpoint),
this.state.viewpoint=J,this.frameTask.requestFrame(),this._set("viewpoint",J)):(this._set("viewpoint",T),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),this.notifyChange("initialExtentRequired")):!J.scale||isNaN(J.scale)?F.error("#viewpoint",`invalid scale value of ${J.scale}`):z.isNone(J.targetGeometry)?F.error("#viewpoint","geometry not defined"):F.error("#viewpoint",`incompatible spatialReference ${JSON.stringify(J.targetGeometry.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`)}}},
{key:"zoom",get:function(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")},set:function(J){if(null!=J){if(!this.ready){this.notifyChange("initialExtentRequired");this._set("zoom",J);this._set("scale",0);var T=this._get("extent");T&&(this._set("extent",null),this._set("center",T.center))}this.constraints.effectiveLODs&&(T=this.viewpoint,I.scaleTo(T,T,this.constraints.zoomToScale(J)),this.viewpoint=T,this._set("zoom",this.constraints.scaleToZoom(this.scale)))}}}]);return H}(h.PopupView(u));
c.__decorate([n.property()],f.prototype,"_stationaryTimer",void 0);c.__decorate([n.property()],f.prototype,"animation",null);c.__decorate([n.property({readOnly:!0})],f.prototype,"animationManager",void 0);c.__decorate([n.property({value:null,type:ca,dependsOn:["state.id","ready"]})],f.prototype,"center",null);c.__decorate([n.property({type:x})],f.prototype,"constraints",null);c.__decorate([n.property({value:null,type:A,dependsOn:["state.id","ready"]})],f.prototype,"extent",null);c.__decorate([n.property({readOnly:!0})],
f.prototype,"featuresTilingScheme",void 0);c.__decorate([n.property()],f.prototype,"fullOpacity",void 0);c.__decorate([n.property({readOnly:!0})],f.prototype,"graphicsTileStore",null);c.__decorate([n.property()],f.prototype,"graphicsView",void 0);c.__decorate([n.property({type:A})],f.prototype,"initialExtent",void 0);c.__decorate([n.property({dependsOn:["map.initialViewProperties?.viewpoint"]})],f.prototype,"initialExtentRequired",null);c.__decorate([n.property()],f.prototype,"labelManager",void 0);
c.__decorate([n.property({value:{top:0,right:0,bottom:0,left:0},cast:D=>({top:0,right:0,bottom:0,left:0,...D})})],f.prototype,"padding",null);c.__decorate([n.property({type:Object})],f.prototype,"renderingOptions",void 0);c.__decorate([n.property()],f.prototype,"resizeAlign",void 0);c.__decorate([n.property({readOnly:!0,dependsOn:["state.id"]})],f.prototype,"resolution",null);c.__decorate([n.property({value:0,type:Number,dependsOn:["state.id","ready"]})],f.prototype,"rotation",null);c.__decorate([n.property({value:0,
type:Number,dependsOn:["state.id","ready"]})],f.prototype,"scale",null);c.__decorate([n.property({type:t,dependsOn:["map.initialViewProperties?.spatialReference","defaultsFromMap.isSpatialReferenceDone"]})],f.prototype,"spatialReference",void 0);c.__decorate([n.property({readOnly:!0})],f.prototype,"state",void 0);c.__decorate([n.property({dependsOn:["animation","navigating","resizing","_stationaryTimer"]})],f.prototype,"stationary",null);c.__decorate([n.property({readOnly:!0})],f.prototype,"supportsGround",
void 0);c.__decorate([n.property({type:V.Timeline,readOnly:!0})],f.prototype,"timeline",void 0);c.__decorate([n.property({readOnly:!0})],f.prototype,"type",void 0);c.__decorate([n.property({readOnly:!0,dependsOn:["layerViewManager.updating","labelManager.updating","graphicsView?.updating"]})],f.prototype,"updating",null);c.__decorate([n.property({value:null,type:l,dependsOn:["state.id","ready"]})],f.prototype,"viewpoint",null);c.__decorate([n.property({value:-1,dependsOn:["state.id"]})],f.prototype,
"zoom",null);return f=c.__decorate([e.subclass("esri.views.MapViewBase")],f)})},"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/maybe ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(p,c,f,l,w,C,z,G,E,y,n,g,d,e,b,a,h,u,r){var q;f=new f.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});l=q=function(k){function m(v){v=k.call(this,v)||this;v.dpi=96;v.format=null;v.origin=null;v.minScale=0;v.maxScale=0;v.size=null;v.spatialReference=null;return v}p._inheritsLoose(m,k);m.create=function(v=
{}){const {resolutionFactor:B=1,scales:L,size:N=256,spatialReference:M=b.WebMercator,numLODs:S=24}=v;if(!h.isValid(M)){v=[];if(L)for(var I=0;I<L.length;I++){var P=L[I];v.push({level:I,scale:P,resolution:P})}else for(I=5E-4,P=S-1;0<=P;P--)v.unshift({level:P,scale:I,resolution:I}),I*=2;return new q({dpi:96,lods:v,origin:new e(0,0,M),size:[N,N],spatialReference:M})}I=h.getInfo(M);v=v.origin?new e({x:v.origin.x,y:v.origin.y,spatialReference:M}):I?new e({x:I.origin[0],y:I.origin[1],spatialReference:M}):
new e({x:0,y:0,spatialReference:M});I=1/(39.37*C.getMetersPerUnitForSR(M)*96);P=[];if(L)for(var V=0;V<L.length;V++){var ca=L[V];P.push({level:V,scale:ca,resolution:ca*I})}else{var A=h.isGeographic(M)?512/N*5.916575275917094E8:256/N*5.91657527591555E8;V=Math.ceil(S/B);P.push({level:0,scale:A,resolution:A*I});for(ca=1;ca<V;ca++)A/=2**B,P.push({level:ca,scale:A,resolution:A*I})}return new q({dpi:96,lods:P,origin:v,size:[N,N],spatialReference:M})};var x=m.prototype;x.readOrigin=function(v,B){return e.fromJSON({spatialReference:B.spatialReference,
...v})};x.readSize=function(v,B){return[B.cols,B.rows]};x.writeSize=function(v,B){B.cols=v[0];B.rows=v[1]};x.zoomToScale=function(v){const B=this.scales;if(0>=v)return B[0];if(v>=B.length-1)return B[B.length-1];{const L=Math.floor(v);return B[L]/(B[L]/B[L+1])**(v-L)}};x.scaleToZoom=function(v){const B=this.scales,L=B.length-1;let N=0;for(;N<L;N++){const M=B[N],S=B[N+1];if(M<=v)break;if(S===v)return N+1;if(M>v&&S<v)return N+Math.log(M/v)/Math.log(M/S)}return N};x.snapScale=function(v,B=.95){v=this.scaleToZoom(v);
return v%Math.floor(v)>=B?this.zoomToScale(Math.ceil(v)):this.zoomToScale(Math.floor(v))};x.tileAt=function(v,B,L,N){var M=this.lodAt(v);if(!M)return null;let S;if("number"===typeof B)S=B,B=L;else{if(h.equals(B.spatialReference,this.spatialReference))S=B.x,B=B.y;else{N=u.project(B,this.spatialReference);if(w.isNone(N))return null;S=N.x;B=N.y}N=L}L=M.resolution*this.size[0];M=M.resolution*this.size[1];N||(N={id:null,level:0,row:0,col:0,extent:a.create()});N.level=v;N.row=Math.floor((this.origin.y-
B)/M+.001);N.col=Math.floor((S-this.origin.x)/L+.001);this.updateTileInfo(N);return N};x.updateTileInfo=function(v,B=0){var L=this.lodAt(v.level);L||1!==B||(B=this.lods[this.lods.length-1],B.level<v.level&&(L=B));if(L){var N=v.level-L.level;B=L.resolution*this.size[0]/2**N;L=L.resolution*this.size[1]/2**N;v.id=`${v.level}/${v.row}/${v.col}`;v.extent||(v.extent=a.create());v.extent[0]=this.origin.x+v.col*B;v.extent[1]=this.origin.y-(v.row+1)*L;v.extent[2]=v.extent[0]+B;v.extent[3]=v.extent[1]+L}};
x.upsampleTile=function(v){const B=this._upsampleLevels[v.level];if(!B||-1===B.parentLevel)return!1;v.level=B.parentLevel;v.row=Math.floor(v.row/B.factor+.001);v.col=Math.floor(v.col/B.factor+.001);this.updateTileInfo(v);return!0};x.getTileBounds=function(v,B){var {resolution:L}=this.lodAt(B.level);const N=L*this.size[0];L*=this.size[1];v[0]=this.origin.x+B.col*N;v[1]=this.origin.y-(B.row+1)*L;v[2]=v[0]+N;v[3]=v[1]+L;return v};x.lodAt=function(v){return this._levelToLOD&&this._levelToLOD[v]||null};
x.clone=function(){return q.fromJSON(this.write({}))};x._initializeUpsampleLevels=function(){const v=this.lods;this._upsampleLevels=[];let B=null;for(let L=0;L<v.length;L++){const N=v[L];this._upsampleLevels[N.level]={parentLevel:B?B.level:-1,factor:B?B.resolution/N.resolution:0};B=N}};p._createClass(m,[{key:"isWrappable",get:function(){const {spatialReference:v,origin:B}=this;if(v&&B){const L=h.getInfo(v);return v.isWrappable&&Math.abs(L.origin[0]-B.x)<=L.dx}return!1}},{key:"lods",set:function(v){let B=
0,L=0;const N=[];this._levelToLOD={};v&&(B=-Infinity,L=Infinity,v.forEach(M=>{N.push(M.scale);B=M.scale>B?M.scale:B;L=M.scale<L?M.scale:L;this._levelToLOD[M.level]=M}));this._set("scales",N);this._set("minScale",B);this._set("maxScale",L);this._set("lods",v);this._initializeUpsampleLevels()}}]);return m}(l.JSONSupport);c.__decorate([z.property({type:Number,json:{write:!0}})],l.prototype,"compressionQuality",void 0);c.__decorate([z.property({type:Number,json:{write:!0}})],l.prototype,"dpi",void 0);
c.__decorate([z.property({type:String,json:{read:f.read,write:f.write,origins:{"web-scene":{read:!1,write:!1}}}})],l.prototype,"format",void 0);c.__decorate([z.property({readOnly:!0})],l.prototype,"isWrappable",null);c.__decorate([z.property({type:e,json:{write:!0}})],l.prototype,"origin",void 0);c.__decorate([n.reader("origin")],l.prototype,"readOrigin",null);c.__decorate([z.property({type:[r],value:null,json:{write:!0}})],l.prototype,"lods",null);c.__decorate([z.property({readOnly:!0})],l.prototype,
"minScale",void 0);c.__decorate([z.property({readOnly:!0})],l.prototype,"maxScale",void 0);c.__decorate([z.property({readOnly:!0})],l.prototype,"scales",void 0);c.__decorate([z.property({cast:k=>Array.isArray(k)?k:"number"===typeof k?[k,k]:[256,256]})],l.prototype,"size",void 0);c.__decorate([n.reader("size",["rows","cols"])],l.prototype,"readSize",null);c.__decorate([d.writer("size",{cols:{type:E.Integer},rows:{type:E.Integer}})],l.prototype,"writeSize",null);c.__decorate([z.property({type:b,json:{write:!0}})],
l.prototype,"spatialReference",void 0);return l=q=c.__decorate([g.subclass("esri.layers.support.TileInfo")],l)})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),function(p,c,f,l,w,C,z,G){var E;f=E=function(y){function n(g){g=y.call(this,g)||
this;g.cols=null;g.level=0;g.levelValue=null;g.resolution=0;g.rows=null;g.scale=0;return g}p._inheritsLoose(n,y);n.prototype.clone=function(){return new E({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})};return n}(f.JSONSupport);c.__decorate([l.property({type:Number,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],f.prototype,"cols",void 0);c.__decorate([l.property({type:C.Integer,
json:{write:!0}})],f.prototype,"level",void 0);c.__decorate([l.property({type:String,json:{write:!0}})],f.prototype,"levelValue",void 0);c.__decorate([l.property({type:Number,json:{write:!0}})],f.prototype,"resolution",void 0);c.__decorate([l.property({type:Number,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],f.prototype,"rows",void 0);c.__decorate([l.property({type:Number,json:{write:!0}})],f.prototype,"scale",void 0);return f=E=c.__decorate([G.subclass("esri.layers.support.LOD")],
f)})},"esri/views/PopupView":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/arrayUtils ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/subclass".split(" "),function(p,c,f,l,w,C,z,G,E,y,n){p.PopupView=g=>{g=function(d){function e(){return d.apply(this,arguments)||this}c._inheritsLoose(e,d);var b=e.prototype;b.fetchPopupFeatures=
function(){var a=c._asyncToGenerator(function*(h,u){yield this.when();const {location:r,queryArea:q,layerViewsAndGraphics:k,clientOnlyGraphics:m}=yield this._prepareFetchPopupFeatures(h,u);h=Promise.resolve(m);u=this._queryLayerPopupFeatures({queryArea:q,layerViewsAndGraphics:k,options:u});const x=u.map(v=>v.promise);h=C.eachAlwaysValues([h,...x]).then(l.flatten);return{location:r,clientOnlyGraphics:m,allGraphicsPromise:h,promisesPerLayerView:u}});return function(h,u){return a.apply(this,arguments)}}();
b._queryLayerPopupFeatures=function({queryArea:a,layerViewsAndGraphics:h,options:u}){return h.map(({layerView:r,graphics:q})=>{q={clientGraphics:q,event:w.isSome(u)?u.event:null,signal:w.isSome(u)?u.signal:null,defaultPopupTemplateEnabled:w.isSome(u)?!!u.defaultPopupTemplateEnabled:!1};q=r.fetchPopupFeatures(a,q);return{layerView:r,promise:q}})};b._isValidPopupGraphic=function(a,h){return a&&!!a.getEffectivePopupTemplate(w.isSome(h)&&h.defaultPopupTemplateEnabled)};b._prepareFetchPopupFeatures=function(){var a=
c._asyncToGenerator(function*(h,u){const {clientGraphics:r,queryArea:q,location:k}=yield this._popupHitTestGraphics(h,u);h=this._getFetchPopupLayerViews();const {layerViewsAndGraphics:m,clientOnlyGraphics:x}=this._graphicsPerFetchPopupLayerView(r,h);return{clientOnlyGraphics:x,layerViewsAndGraphics:m,queryArea:q,location:k}});return function(h,u){return a.apply(this,arguments)}}();b._popupHitTestGraphics=function(){var a=c._asyncToGenerator(function*(h,u){const {results:r,mapPoint:q}=yield this.popupHitTest(h);
h=r.filter(m=>this._isValidPopupGraphic(m.graphic,u));const k=h.length?h[0].mapPoint:null;return{clientGraphics:h.map(m=>m.graphic),queryArea:q,location:q||k}});return function(h,u){return a.apply(this,arguments)}}();b._getFetchPopupLayerViews=function(){const a=[];this.allLayerViews.forEach(h=>{this._isValidPopupLayerView(h)&&a.push(h)});w.isSome(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&a.push(this.graphicsView);return a.reverse()};b._isValidPopupLayerView=function(a){return w.isSome(a)&&
(!("layer"in a)||!a.suspended)&&"fetchPopupFeatures"in a};b._graphicsPerFetchPopupLayerView=function(a,h){const u=[],r=new Map;h=h.map(q=>{const k=[];"layer"in q?r.set(q.layer,k):r.set(q.graphics,k);return{layerView:q,graphics:k}});for(const q of a)(a=r.get(q.layer)||r.get(q.sourceLayer)||null)?a.push(q):u.push(q);return{layerViewsAndGraphics:h,clientOnlyGraphics:u}};return e}(g);return g=f.__decorate([n.subclass("esri.views.PopupView")],g)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/AnimationManager":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Viewpoint ../../core/Accessor ../../core/scheduling ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../ViewAnimation ./unitBezier ./viewpointUtils ../../geometry/Point".split(" "),
function(p,c,f,l,w,C,z,G,E,y,n,g,d,e,b){let a=function(){function h(u,r,q,k){const m=u.targetGeometry,x=r.targetGeometry;k?"string"===typeof k&&(k=d.parse(k)||d.easingFunctions.ease):k=d.easingFunctions.ease;this.easing=k;this.duration=q;this.sCenterX=m.x;this.sCenterY=m.y;this.sScale=u.scale;this.sRotation=u.rotation;this.tCenterX=x.x;this.tCenterY=x.y;this.tScale=r.scale;this.tRotation=r.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-this.sCenterY;this.dScale=this.tScale-
this.sScale;this.dRotation=this.tRotation-this.sRotation;180<this.dRotation?this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)}h.prototype.applyRatio=function(u,r){var q=this.easing(r);let k,m;1<=r?(r=this.tCenterX,k=this.tCenterY,m=this.tRotation,q=this.tScale):(r=this.sCenterX+q*this.dCenterX,k=this.sCenterY+q*this.dCenterY,m=this.sRotation+q*this.dRotation,q=this.sScale+q*this.dScale);u.targetGeometry.x=r;u.targetGeometry.y=k;u.scale=q;u.rotation=m};return h}();f=function(h){function u(q){q=
h.call(this,q)||this;q.duration=200;q.transition=null;q.easing=d.easingFunctions.ease;q.view=null;q.viewpoint=null;q.viewpoint=new l({targetGeometry:new b,scale:0,rotation:0});q._updateTask=C.addFrameTask({postRender:q._postRender.bind(p._assertThisInitialized(q))});q._updateTask.pause();return q}p._inheritsLoose(u,h);var r=u.prototype;r.destroy=function(){this._updateTask.remove();this._updateTask=null};r.animate=function(q,k,m){this.stop();e.copy(this.viewpoint,k);this.transition=new a(this.viewpoint,
q.target,m&&m.duration||this.duration,m&&m.easing||this.easing);k=()=>{this.animation===q&&this._updateTask&&("finished"===q.state&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.updateFunction=this.animation=null)};q.when(k,k);this._startTime=performance.now();this._updateTask.resume();return this.animation=q};r.animateContinous=function(q,k){this.stop();this.updateFunction=k;this.viewpoint=q;const m=new g({target:q.clone()});
q=()=>{this.animation===m&&this._updateTask&&(this.updateFunction=this.animation=null)};m.when(q,q);this._startTime=performance.now();this._updateTask.resume();return this.animation=m};r.stop=function(){this.animation&&(this.animation.stop(),this.updateFunction=this.animation=null)};r._postRender=function(q){var k=this.animation;k&&k.state!==g.State.STOPPED?(this.updateFunction?this.updateFunction(this.viewpoint,q.deltaTime):(q=(performance.now()-this._startTime)/this.transition.duration,k=1<=q,this.transition.applyRatio(this.viewpoint,
q),k&&this.animation.finish()),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())):this._updateTask.pause()};return u}(w);c.__decorate([z.property()],f.prototype,"animation",void 0);c.__decorate([z.property()],f.prototype,"duration",void 0);c.__decorate([z.property()],f.prototype,"transition",void 0);c.__decorate([z.property()],f.prototype,"easing",void 0);c.__decorate([z.property()],f.prototype,"view",void 0);c.__decorate([z.property()],f.prototype,"viewpoint",void 0);return f=c.__decorate([n.subclass("esri.views.2d.AnimationManager")],
f)})},"esri/views/2d/unitBezier":function(){define(["exports"],function(p){function c(w,C,z,G){function E(a,h){var u;let r,q;r=a;for(u=0;8>u;u++){q=((g*r+n)*r+y)*r-a;if(Math.abs(q)<h)return r;var k=(3*g*r+2*n)*r+y;if(1E-6>Math.abs(k))break;r-=q/k}k=0;u=1;r=a;if(r<k)return k;if(r>u)return u;for(;k<u;){q=((g*r+n)*r+y)*r;if(Math.abs(q-a)<h)break;a>q?k=r:u=r;r=.5*(u-k)+k}return r}const y=3*w,n=3*(z-w)-y,g=1-y-n,d=3*C,e=3*(G-C)-d,b=1-d-e;return function(a,h=1E-6){a=E(a,h);return((b*a+e)*a+d)*a}}const f=
/^cubic-bezier\((.*)\)/,l={};l.ease=c(.25,.1,.25,1);l.linear=c(0,0,1,1);l.easeIn=l["ease-in"]=c(.42,0,1,1);l.easeOut=l["ease-out"]=c(0,0,.58,1);l.easeInOut=l["ease-in-out"]=c(.42,0,.58,1);p.easingFunctions=l;p.parse=function(w){let C=l[w]||null;!C&&(w=f.exec(w))&&(w=w[1].split(",").map(z=>parseFloat(z.trim())),4!==w.length||w.some(z=>isNaN(z))||(C=c.apply(c,w)));return C};p.unitBezier=c;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/viewpointUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../Viewpoint ../../core/Collection ../../core/maybe ../../core/unitUtils ../../chunks/common ../../chunks/mat2d ../../chunks/mat2df64 ../../chunks/vec2 ../../chunks/vec2f64 ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/Ellipsoid ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils".split(" "),
function(p,c,f,l,w,C,z,G,E,y,n,g,d,e,b,a,h,u){function r(O,W,aa,ea){return ea&&aa&&!ea.equals(aa)&&u.canProject(ea,aa)&&ea.isWebMercator?(ea.isWebMercator?(aa=W[1],89.99999<aa?aa=89.99999:-89.99999>aa&&(aa=-89.99999),aa=Math.sin(z.toRadian(aa)),O=y.set(O,z.toRadian(W[0])*a.earth.radius,.5*a.earth.radius*Math.log((1+aa)/(1-aa)))):(aa=z.toDegree(W[0]/a.earth.radius),O=y.set(O,aa-360*Math.floor((aa+180)/360),z.toDegree(.5*Math.PI-2*Math.atan(Math.exp(-W[1]/a.earth.radius))))),O):y.copy(O,W)}function q(O){return O.wkid?
O:O.spatialReference||b.WGS84}function k(O,W){return W.type?y.set(O,W.x,W.y):y.copy(O,W)}function m(O,W){return Math.max(O.width/W[0],O.height/W[1])*V(O.spatialReference)}function x(O,W,aa,ea){return v.apply(this,arguments)}function v(){v=c._asyncToGenerator(function*(O,W,aa,ea){if(!O||Array.isArray(O)&&!O.length)return null;l.isCollection(O)&&(O=O.toArray());if(Array.isArray(O)&&O.length&&"object"===typeof O[0]){var la=O.every(Ca=>"attributes"in Ca);var pa=O.some(Ca=>!Ca.geometry),ta=O;if(la&&pa&&
W&&W.allLayerViews){la=new Map;for(var Aa of O)O=Aa.layer,pa=la.get(O)||[],ta=Aa.attributes[O.objectIdField],null!=ta&&pa.push(ta),la.set(O,pa);const Ca=[];la.forEach((xa,Ea)=>{const Oa=W.allLayerViews.find(Ka=>Ka.layer.id===Ea.id);if("queryFeatures"in Oa){const Ka=Ea.createQuery();Ka.objectIds=xa;Ka.returnGeometry=!0;Ca.push(Oa.queryFeatures(Ka))}});Aa=yield Promise.all(Ca);O=[];for(var sa of Aa)if(sa&&sa.features&&sa.features.length)for(var va of sa.features)w.isSome(va.geometry)&&O.push(va.geometry);
ta=O}for(const Ca of ta)ea=yield x(Ca,W,aa,ea);return ea}if(Array.isArray(O)&&2===O.length&&"number"===typeof O[0]&&"number"===typeof O[1])la=new e(O);else if(O instanceof d)la=O;else if("geometry"in O)if(O.geometry)la=O.geometry;else if(O.layer){const Ca=O.layer;sa=W.allLayerViews.find(xa=>xa.layer.id===Ca.id);"queryFeatures"in sa&&(va=Ca.createQuery(),va.objectIds=[O.attributes[Ca.objectIdField]],va.returnGeometry=!0,sa=yield sa.queryFeatures(va),la=w.get(sa,"features",0,"geometry"))}if(w.isNone(la))return null;
sa="point"===la.type?new g({xmin:la.x,ymin:la.y,xmax:la.x,ymax:la.y,spatialReference:la.spatialReference}):la.extent;if(!sa)return null;aa=u.project(sa,aa);return w.isNone(aa)?null:ea=ea?ea.union(aa):aa});return v.apply(this,arguments)}function B(O){if(O&&(!Array.isArray(O)||"number"!==typeof O[0])&&("object"===typeof O||Array.isArray(O)&&"object"===typeof O[0])){if("layer"in O&&O.layer&&O.layer.minScale&&O.layer.maxScale){var W=O.layer;return{min:W.minScale,max:W.maxScale}}if(Array.isArray(O)&&O.length&&
O.every(aa=>"layer"in aa)){let aa=W=0;for(const ea of O)(O=ea.layer)&&O.minScale&&O.maxScale&&(W=O.minScale<W?O.minScale:W,aa=O.maxScale>aa?O.maxScale:aa);return W&&aa?{min:W,max:aa}:null}}}function L(O,W){return N.apply(this,arguments)}function N(){N=c._asyncToGenerator(function*(O,W){if(!O||!W)return new f({targetGeometry:new e,scale:0,rotation:0});var aa=W.spatialReference;const {constraints:ea,padding:la,viewpoint:pa,size:ta}=W,Aa=[la?ta[0]-la.left-la.right:ta[0],la?ta[1]-la.top-la.bottom:ta[1]];
let sa=null;O instanceof f?sa=O:O.viewpoint?sa=O.viewpoint:O.target&&"esri.Viewpoint"===O.target.declaredClass&&(sa=O.target);let va=null;if(sa&&sa.targetGeometry)va=sa.targetGeometry;else if(O instanceof g)va=O;else if(O||O&&("center"in O||"extent"in O||"target"in O))va=(yield x(O.center,W,aa))||(yield x(O.extent,W,aa))||(yield x(O.target,W,aa))||(yield x(O,W,aa));!va&&pa&&pa.targetGeometry?va=pa.targetGeometry:!va&&W.extent&&(va=W.extent);var Ca=q(va);aa||(aa=q(W.spatialReference||W.extent||va));
if(!u.canProject(va,aa)&&Ca&&!Ca.equals(aa))return null;var xa=k(n.create(),va.center?va.center:va);Ca=new e(r(xa,xa,Ca,aa),aa);xa=null;sa&&w.isSome(sa.targetGeometry)&&"point"===sa.targetGeometry.type?xa=sa.scale:O.hasOwnProperty("scale")&&O.scale?xa=O.scale:O.hasOwnProperty("zoom")&&-1!==O.zoom&&ea&&ea.effectiveLODs?xa=ea.zoomToScale(O.zoom):Array.isArray(va)||"point"===va.type||"extent"===va.type&&0===va.width&&0===va.height?(aa=u.project(W.extent,aa),xa=w.isSome(aa)?m(aa,Aa):W.extent?m(W.extent,
Aa):pa.scale):xa=u.canProject(va.extent,aa)?m(u.project(va.extent,aa),Aa):m(va.extent,Aa);if(W=B(O))W.min&&W.min>xa?xa=W.min:W.max&&W.max<xa&&(xa=W.max);W=0;sa?W=sa.rotation:O.hasOwnProperty("rotation")?W=O.rotation:pa&&(W=pa.rotation);O=new f({targetGeometry:Ca,scale:xa,rotation:W});ea&&(O=ea.fit(O),ea.constrainByGeometry(O),ea.rotationEnabled||(O.rotation=W));return O});return N.apply(this,arguments)}function M(O,W){const aa=O.targetGeometry,ea=W.targetGeometry;aa.x=ea.x;aa.y=ea.y;aa.spatialReference=
ea.spatialReference;O.scale=W.scale;O.rotation=W.rotation;return O}function S(O,W,aa){return aa?y.set(O,.5*(W[0]-aa.right+aa.left),.5*(W[1]-aa.bottom+aa.top)):y.scale(O,W,.5)}function I(O,W,aa,ea){K(O,W,aa,ea);return G.invert(O,O)}function P(O){var W=O.scale;O=O.targetGeometry;O=w.isSome(O)&&h.isValid(O.spatialReference)?1/(39.37*C.getMetersPerUnitForSR(O.spatialReference)*96):1;return W*O}function V(O){return h.isValid(O)?39.37*C.getMetersPerUnitForSR(O)*96:1}function ca(O){return O.isWrappable?
(O=h.getInfo(O),O.valid[1]-O.valid[0]):0}const A=180/Math.PI,t=function(){const O=n.create();return function(W,aa,ea){const la=aa.targetGeometry;k(O,la);aa=.5*P(aa);W.xmin=O[0]-aa*ea[0];W.ymin=O[1]-aa*ea[1];W.xmax=O[0]+aa*ea[0];W.ymax=O[1]+aa*ea[1];W.spatialReference=la.spatialReference;return W}}(),F=function(){const O=n.create();return function(W,aa,ea){return y.sub(W,y.scale(W,aa,.5),S(O,aa,ea))}}(),D=function(){const O=E.create(),W=n.create();return function(aa,ea,la,pa){const ta=P(ea);ea=z.toRadian(ea.rotation)||
0;y.set(W,ta,ta);G.fromScaling(O,W);G.rotate(O,O,ea);G.translate(O,O,F(W,la,pa));G.translate(O,O,[0,pa.top-pa.bottom]);return y.set(aa,O[4],O[5])}}(),H=function(){const O=n.create(),W=n.create(),aa=n.create();return function(ea,la,pa,ta,Aa,sa){y.negate(O,la);y.scale(W,pa,.5*sa);y.set(aa,1/ta*sa,-1/ta*sa);G.identity(ea);G.translate(ea,ea,W);Aa&&G.rotate(ea,ea,Aa);G.scale(ea,ea,aa);G.translate(ea,ea,O);return ea}}(),K=function(){const O=n.create();return function(W,aa,ea,la){const pa=P(aa),ta=z.toRadian(aa.rotation)||
0;k(O,aa.targetGeometry);return H(W,O,ea,pa,ta,la)}}(),J=function(){const O=n.create();return function(W,aa,ea,la){const pa=P(aa);k(O,aa.targetGeometry);return H(W,O,ea,pa,0,la)}}(),T=function(){const O=n.create(),W=n.create(),aa=[0,0,0];return function(ea,la,pa){y.subtract(O,ea,la);y.normalize(O,O);y.subtract(W,ea,pa);y.normalize(W,W);y.cross(aa,O,W);ea=Math.acos(y.dot(O,W)/(y.length(O)*y.length(W)))*A;0>aa[2]&&(ea=-ea);isNaN(ea)&&(ea=0);return ea}}(),Y=function(){const O=n.create();return function(W,
aa,ea,la){const pa=W.targetGeometry;M(W,aa);D(O,aa,ea,la);pa.x+=O[0];pa.y+=O[1];return W}}(),da=function(){const O=n.create();return function(W,aa,ea,la){const pa=W.targetGeometry;M(W,aa);D(O,aa,ea,la);pa.x-=O[0];pa.y-=O[1];return W}}(),ha=function(){const O=n.create();return function(W,aa,ea){M(W,aa);aa=W.targetGeometry;const la=q(ea),pa=q(aa);k(O,ea);r(O,O,la,pa);aa.x=O[0];aa.y=O[1];return W}}(),ia=function(){const O=n.create();return function(W,aa,ea,la,pa){pa||(pa="center");y.sub(O,ea,la);y.scale(O,
O,.5);ea=O[0];la=O[1];switch(pa){case "center":y.set(O,0,0);break;case "left":y.set(O,-ea,0);break;case "top":y.set(O,0,la);break;case "right":y.set(O,ea,0);break;case "bottom":y.set(O,0,-la);break;case "top-left":y.set(O,-ea,la);break;case "bottom-left":y.set(O,-ea,-la);break;case "top-right":y.set(O,ea,la);break;case "bottom-right":y.set(O,ea,-la)}na(W,aa,O);return W}}(),oa=function(){const O=n.create();return function(W,aa,ea,la,pa){M(W,aa);isNaN(ea)||0===ea||(ba(O,la,aa,pa),W.scale=aa.scale*ea,
fa(O,O,W,pa),na(W,W,y.set(O,O[0]-la[0],la[1]-O[1])));return W}}(),ma=function(){const O=n.create();return function(W,aa,ea,la,pa,ta){M(W,aa);isNaN(ea)||0===ea||(ba(O,pa,aa,ta),W.scale=aa.scale*ea,W.rotation+=la,fa(O,O,W,ta),na(W,W,y.set(O,O[0]-pa[0],pa[1]-O[1])));return W}}(),Z=function(){const O=n.create(),W=n.create();return function(aa,ea,la,pa,ta,Aa,sa){F(W,Aa,sa);y.add(O,ta,W);return pa?ma(aa,ea,la,pa,O,Aa):oa(aa,ea,la,O,Aa)}}(),ba=function(){const O=E.create();return function(W,aa,ea,la){return y.transformMat2d(W,
aa,I(O,ea,la,1))}}(),fa=function(){const O=E.create();return function(W,aa,ea,la){return y.transformMat2d(W,aa,K(O,ea,la,1))}}(),na=function(){const O=n.create(),W=E.create();return function(aa,ea,la){M(aa,ea);const pa=P(ea),ta=aa.targetGeometry;G.fromRotation(W,z.toRadian(ea.rotation)||0);G.scale(W,W,n.fromValues(pa,pa));y.transformMat2d(O,la,W);ta.x+=O[0];ta.y+=O[1];return aa}}();p.addPadding=Y;p.angleBetween=T;p.centerAt=ha;p.copy=M;p.create=L;p.createAsync=function(O,W){return L(O,W)};p.extentToScale=
m;p.getAnchor=S;p.getExtent=t;p.getMatrix=H;p.getOuterSize=function(O,W,aa){var ea=z.toRadian(W.rotation)||0;W=Math.abs(Math.cos(ea));ea=Math.abs(Math.sin(ea));return y.set(O,Math.round(aa[1]*ea+aa[0]*W),Math.round(aa[1]*W+aa[0]*ea))};p.getPaddingMapTranslation=D;p.getPaddingScreenTranslation=F;p.getResolution=P;p.getResolutionToScaleFactor=V;p.getTransform=K;p.getTransformNoRotation=J;p.getWorldScreenWidth=function(O,W){return Math.round(ca(O)/W)};p.getWorldWidth=ca;p.padAndScaleAndRotateBy=Z;p.pixelSize=
function(O){return P(O)};p.removePadding=da;p.resize=ia;p.rotateBy=function(O,W,aa){M(O,W);O.rotation+=aa;return O};p.rotateTo=function(O,W,aa){M(O,W);O.rotation=aa;return O};p.scaleAndRotateBy=ma;p.scaleBy=oa;p.scaleTo=function(O,W,aa){M(O,W);O.scale=aa;return O};p.setExtent=function(O,W,aa,ea,la){ha(O,W,aa.center);O.scale=m(aa,ea);la&&la.constraints&&la.constraints.constrain(O);return O};p.toMap=ba;p.toScreen=fa;p.translateBy=na;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/chunks/mat2d":function(){define(["exports",
"./common"],function(p,c){function f(v,B){v[0]=B[0];v[1]=B[1];v[2]=B[2];v[3]=B[3];v[4]=B[4];v[5]=B[5];return v}function l(v){v[0]=1;v[1]=0;v[2]=0;v[3]=1;v[4]=0;v[5]=0;return v}function w(v,B,L,N,M,S,I){v[0]=B;v[1]=L;v[2]=N;v[3]=M;v[4]=S;v[5]=I;return v}function C(v,B){const L=B[0],N=B[1],M=B[2],S=B[3],I=B[4];B=B[5];let P=L*S-N*M;if(!P)return null;P=1/P;v[0]=S*P;v[1]=-N*P;v[2]=-M*P;v[3]=L*P;v[4]=(M*B-S*I)*P;v[5]=(N*I-L*B)*P;return v}function z(v){return v[0]*v[3]-v[1]*v[2]}function G(v,B,L){const N=
B[0],M=B[1],S=B[2],I=B[3],P=B[4];B=B[5];const V=L[0],ca=L[1],A=L[2],t=L[3],F=L[4];L=L[5];v[0]=N*V+S*ca;v[1]=M*V+I*ca;v[2]=N*A+S*t;v[3]=M*A+I*t;v[4]=N*F+S*L+P;v[5]=M*F+I*L+B;return v}function E(v,B,L){const N=B[0],M=B[1],S=B[2],I=B[3],P=B[4];B=B[5];const V=Math.sin(L);L=Math.cos(L);v[0]=N*L+S*V;v[1]=M*L+I*V;v[2]=N*-V+S*L;v[3]=M*-V+I*L;v[4]=P;v[5]=B;return v}function y(v,B,L){const N=B[1],M=B[2],S=B[3],I=B[4],P=B[5],V=L[0];L=L[1];v[0]=B[0]*V;v[1]=N*V;v[2]=M*L;v[3]=S*L;v[4]=I;v[5]=P;return v}function n(v,
B,L){const N=B[0],M=B[1],S=B[2],I=B[3],P=B[4];B=B[5];const V=L[0];L=L[1];v[0]=N;v[1]=M;v[2]=S;v[3]=I;v[4]=N*V+S*L+P;v[5]=M*V+I*L+B;return v}function g(v,B){const L=Math.sin(B);B=Math.cos(B);v[0]=B;v[1]=L;v[2]=-L;v[3]=B;v[4]=0;v[5]=0;return v}function d(v,B){v[0]=B[0];v[1]=0;v[2]=0;v[3]=B[1];v[4]=0;v[5]=0;return v}function e(v,B){v[0]=1;v[1]=0;v[2]=0;v[3]=1;v[4]=B[0];v[5]=B[1];return v}function b(v){return"mat2d("+v[0]+", "+v[1]+", "+v[2]+", "+v[3]+", "+v[4]+", "+v[5]+")"}function a(v){return Math.sqrt(v[0]**
2+v[1]**2+v[2]**2+v[3]**2+v[4]**2+v[5]**2+1)}function h(v,B,L){v[0]=B[0]+L[0];v[1]=B[1]+L[1];v[2]=B[2]+L[2];v[3]=B[3]+L[3];v[4]=B[4]+L[4];v[5]=B[5]+L[5];return v}function u(v,B,L){v[0]=B[0]-L[0];v[1]=B[1]-L[1];v[2]=B[2]-L[2];v[3]=B[3]-L[3];v[4]=B[4]-L[4];v[5]=B[5]-L[5];return v}function r(v,B,L){v[0]=B[0]*L;v[1]=B[1]*L;v[2]=B[2]*L;v[3]=B[3]*L;v[4]=B[4]*L;v[5]=B[5]*L;return v}function q(v,B,L,N){v[0]=B[0]+L[0]*N;v[1]=B[1]+L[1]*N;v[2]=B[2]+L[2]*N;v[3]=B[3]+L[3]*N;v[4]=B[4]+L[4]*N;v[5]=B[5]+L[5]*N;return v}
function k(v,B){return v[0]===B[0]&&v[1]===B[1]&&v[2]===B[2]&&v[3]===B[3]&&v[4]===B[4]&&v[5]===B[5]}function m(v,B){const L=v[0],N=v[1],M=v[2],S=v[3],I=v[4];v=v[5];const P=B[0],V=B[1],ca=B[2],A=B[3],t=B[4];B=B[5];return Math.abs(L-P)<=c.EPSILON*Math.max(1,Math.abs(L),Math.abs(P))&&Math.abs(N-V)<=c.EPSILON*Math.max(1,Math.abs(N),Math.abs(V))&&Math.abs(M-ca)<=c.EPSILON*Math.max(1,Math.abs(M),Math.abs(ca))&&Math.abs(S-A)<=c.EPSILON*Math.max(1,Math.abs(S),Math.abs(A))&&Math.abs(I-t)<=c.EPSILON*Math.max(1,
Math.abs(I),Math.abs(t))&&Math.abs(v-B)<=c.EPSILON*Math.max(1,Math.abs(v),Math.abs(B))}var x=Object.freeze({__proto__:null,copy:f,identity:l,set:w,invert:C,determinant:z,multiply:G,rotate:E,scale:y,translate:n,fromRotation:g,fromScaling:d,fromTranslation:e,str:b,frob:a,add:h,subtract:u,multiplyScalar:r,multiplyScalarAndAdd:q,exactEquals:k,equals:m,mul:G,sub:u});p.add=h;p.copy=f;p.determinant=z;p.equals=m;p.exactEquals=k;p.frob=a;p.fromRotation=g;p.fromScaling=d;p.fromTranslation=e;p.identity=l;p.invert=
C;p.mat2d=x;p.mul=G;p.multiply=G;p.multiplyScalar=r;p.multiplyScalarAndAdd=q;p.rotate=E;p.scale=y;p.set=w;p.str=b;p.sub=u;p.subtract=u;p.translate=n})},"esri/chunks/mat2df64":function(){define(["exports"],function(p){function c(){return[1,0,0,1,0,0]}function f(z){return[z[0],z[1],z[2],z[3],z[4],z[5]]}function l(z,G,E,y,n,g){return[z,G,E,y,n,g]}function w(z,G){return new Float64Array(z,G,6)}var C=Object.freeze({__proto__:null,create:c,clone:f,fromValues:l,createView:w});p.clone=f;p.create=c;p.createView=
w;p.fromValues=l;p.mat2df64=C})},"esri/chunks/vec2":function(){define(["exports","./common"],function(p,c){function f(H,K){H[0]=K[0];H[1]=K[1];return H}function l(H,K,J){H[0]=K;H[1]=J;return H}function w(H,K,J){H[0]=K[0]+J[0];H[1]=K[1]+J[1];return H}function C(H,K,J){H[0]=K[0]-J[0];H[1]=K[1]-J[1];return H}function z(H,K,J){H[0]=K[0]*J[0];H[1]=K[1]*J[1];return H}function G(H,K,J){H[0]=K[0]/J[0];H[1]=K[1]/J[1];return H}function E(H,K){H[0]=Math.ceil(K[0]);H[1]=Math.ceil(K[1]);return H}function y(H,
K){H[0]=Math.floor(K[0]);H[1]=Math.floor(K[1]);return H}function n(H,K,J){H[0]=Math.min(K[0],J[0]);H[1]=Math.min(K[1],J[1]);return H}function g(H,K,J){H[0]=Math.max(K[0],J[0]);H[1]=Math.max(K[1],J[1]);return H}function d(H,K){H[0]=Math.round(K[0]);H[1]=Math.round(K[1]);return H}function e(H,K,J){H[0]=K[0]*J;H[1]=K[1]*J;return H}function b(H,K,J,T){H[0]=K[0]+J[0]*T;H[1]=K[1]+J[1]*T;return H}function a(H,K){const J=K[0]-H[0];H=K[1]-H[1];return Math.sqrt(J*J+H*H)}function h(H,K){const J=K[0]-H[0];H=
K[1]-H[1];return J*J+H*H}function u(H){const K=H[0];H=H[1];return Math.sqrt(K*K+H*H)}function r(H){const K=H[0];H=H[1];return K*K+H*H}function q(H,K){H[0]=-K[0];H[1]=-K[1];return H}function k(H,K){H[0]=1/K[0];H[1]=1/K[1];return H}function m(H,K){var J=K[0];const T=K[1];J=J*J+T*T;0<J&&(J=1/Math.sqrt(J),H[0]=K[0]*J,H[1]=K[1]*J);return H}function x(H,K){return H[0]*K[0]+H[1]*K[1]}function v(H,K,J){K=K[0]*J[1]-K[1]*J[0];H[0]=H[1]=0;H[2]=K;return H}function B(H,K,J,T){const Y=K[0];K=K[1];H[0]=Y+T*(J[0]-
Y);H[1]=K+T*(J[1]-K);return H}function L(H,K){K=K||1;const J=2*c.RANDOM()*Math.PI;H[0]=Math.cos(J)*K;H[1]=Math.sin(J)*K;return H}function N(H,K,J){const T=K[0];K=K[1];H[0]=J[0]*T+J[2]*K;H[1]=J[1]*T+J[3]*K;return H}function M(H,K,J){const T=K[0];K=K[1];H[0]=J[0]*T+J[2]*K+J[4];H[1]=J[1]*T+J[3]*K+J[5];return H}function S(H,K,J){const T=K[0];K=K[1];H[0]=J[0]*T+J[3]*K+J[6];H[1]=J[1]*T+J[4]*K+J[7];return H}function I(H,K,J){const T=K[0];K=K[1];H[0]=J[0]*T+J[4]*K+J[12];H[1]=J[1]*T+J[5]*K+J[13];return H}
function P(H,K,J,T){const Y=K[0]-J[0];K=K[1]-J[1];const da=Math.sin(T);T=Math.cos(T);H[0]=Y*T-K*da+J[0];H[1]=Y*da+K*T+J[1];return H}function V(H,K){var J=H[0];H=H[1];const T=K[0];K=K[1];let Y=J*J+H*H;0<Y&&(Y=1/Math.sqrt(Y));let da=T*T+K*K;0<da&&(da=1/Math.sqrt(da));J=(J*T+H*K)*Y*da;return 1<J?0:-1>J?Math.PI:Math.acos(J)}function ca(H){return"vec2("+H[0]+", "+H[1]+")"}function A(H,K){return H[0]===K[0]&&H[1]===K[1]}function t(H,K){const J=H[0];H=H[1];const T=K[0];K=K[1];return Math.abs(J-T)<=c.EPSILON*
Math.max(1,Math.abs(J),Math.abs(T))&&Math.abs(H-K)<=c.EPSILON*Math.max(1,Math.abs(H),Math.abs(K))}function F(H,K,J,T,Y){let da=K[0]-J[0];J=K[1]-J[1];Y=(T[0]*da+T[1]*J)*(Y-1);da=T[0]*Y;J=T[1]*Y;H[0]=K[0]+da;H[1]=K[1]+J;return H}var D=Object.freeze({__proto__:null,copy:f,set:l,add:w,subtract:C,multiply:z,divide:G,ceil:E,floor:y,min:n,max:g,round:d,scale:e,scaleAndAdd:b,distance:a,squaredDistance:h,length:u,squaredLength:r,negate:q,inverse:k,normalize:m,dot:x,cross:v,lerp:B,random:L,transformMat2:N,
transformMat2d:M,transformMat3:S,transformMat4:I,rotate:P,angle:V,str:ca,exactEquals:A,equals:t,projectAndScale:F,len:u,sub:C,mul:z,div:G,dist:a,sqrDist:h,sqrLen:r});p.add=w;p.angle=V;p.ceil=E;p.copy=f;p.cross=v;p.dist=a;p.distance=a;p.div=G;p.divide=G;p.dot=x;p.equals=t;p.exactEquals=A;p.floor=y;p.inverse=k;p.len=u;p.length=u;p.lerp=B;p.max=g;p.min=n;p.mul=z;p.multiply=z;p.negate=q;p.normalize=m;p.projectAndScale=F;p.random=L;p.rotate=P;p.round=d;p.scale=e;p.scaleAndAdd=b;p.set=l;p.sqrDist=h;p.sqrLen=
r;p.squaredDistance=h;p.squaredLength=r;p.str=ca;p.sub=C;p.subtract=C;p.transformMat2=N;p.transformMat2d=M;p.transformMat3=S;p.transformMat4=I;p.vec2=D})},"esri/chunks/vec2f64":function(){define(["exports"],function(p){function c(){return[0,0]}function f(a){return[a[0],a[1]]}function l(a,h){return[a,h]}function w(a){const h=[0,0],u=Math.min(2,a.length);for(let r=0;r<u;++r)h[r]=a[r];return h}function C(a,h){return new Float64Array(a,h,2)}function z(){return[0,0]}function G(){return[1,1]}function E(){return[1,
0]}function y(){return[0,1]}const n=[0,0],g=[1,1],d=[1,0],e=[0,1];var b=Object.freeze({__proto__:null,create:c,clone:f,fromValues:l,fromArray:w,createView:C,zeros:z,ones:G,unitX:E,unitY:y,ZEROS:n,ONES:g,UNIT_X:d,UNIT_Y:e});p.ONES=g;p.UNIT_X=d;p.UNIT_Y=e;p.ZEROS=n;p.clone=f;p.create=c;p.createView=C;p.fromArray=w;p.fromValues=l;p.ones=G;p.unitX=E;p.unitY=y;p.vec2f64=b;p.zeros=z})},"esri/views/2d/FrameTask":function(){define(["../../core/maybe","../../core/scheduling"],function(p,c){return function(){function f(w){this.view=
w;this._frameTaskHandle=null;this._updateRequested=!1;this.updateEnabled=this.stationary=!0;this.animationInProgress=!1;this.prepare=()=>{this._updateParameters.state=this.view.state;this._updateParameters.stationary=this.view.stationary;this._updateParameters.pixelRatio=window.devicePixelRatio;this._updateParameters.renderingOptions=this.view.renderingOptions};this.update=()=>{this._updateRequested=!1;if(this.updateEnabled){var {basemapView:C,graphicsView:z,labelManager:G,layerViews:E,state:{id:y}}=
this.view;C.baseLayerViews.forEach(this._updateLayerView,this);E.forEach(this._updateLayerView,this);C.referenceLayerViews.forEach(this._updateLayerView,this);p.isSome(G)&&(G.lastUpdateId!==y&&(G.viewChange(),G.lastUpdateId=y),G.updateRequested&&G.processUpdate(this._updateParameters));p.isSome(z)&&(z.lastUpdateId!==y&&(z.viewChange(),z.lastUpdateId=y),z.updateRequested&&z.processUpdate(this._updateParameters));this.view.graphicsTileStore.setViewState(this._updateParameters.state);this.animationInProgress||
this._updateRequested||this._frameTaskHandle.pause()}}}var l=f.prototype;l.destroy=function(){this.stop()};l.start=function(){this.stationary=this.view.stationary;this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:this.view.renderingOptions};this._stationaryHandle=this.view.watch("stationary",w=>{this.stationary=w;this.requestFrame()});this._frameTaskHandle=c.addFrameTask(this)};l.stop=function(){this._frameTaskHandle&&(this._stationaryHandle.remove(),
this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)};l.requestUpdate=function(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())};l.requestFrame=function(){this._frameTaskHandle&&this._frameTaskHandle.resume()};l._updateLayerView=function(w){const C=this.view.state,z=w.lastUpdateId;if(null==z||!this.stationary&&!w.moving)w.moving=!0,w.moveStart();z!==C.id&&w.viewChange();this.stationary&&
w.moving&&(w.moving=!1,w.moveEnd());w.lastUpdateId=C.id;w.updateRequested&&w.processUpdate(this._updateParameters);"layerViews"in w&&w.layerViews.forEach(this._updateLayerView,this)};return f}()})},"esri/views/2d/layerViewModuleImportUtils":function(){define(["require","exports","../../core/Error","../../core/maybe"],function(p,c,f,l){function w(y){return Object.freeze({__proto__:null,default:y})}function C(){return Promise.all([new Promise(function(y,n){p(["../webgl"],y,n)}),new Promise(function(y,
n){p(["./mapViewDeps"],y,n)})])}const z=()=>C().then(()=>new Promise(function(y,n){p(["./layers/TileLayerView2D"],function(g){y(w(g))},n)})),G=()=>C().then(()=>new Promise(function(y,n){p(["./layers/FeatureLayerView2D"],function(g){y(w(g))},n)})),E={"base-dynamic":()=>C().then(()=>new Promise(function(y,n){p(["./layers/BaseDynamicLayerView2D"],function(g){y(w(g))},n)})),"base-tile":z,"bing-maps":z,csv:G,"geo-rss":()=>C().then(()=>new Promise(function(y,n){p(["./layers/GeoRSSLayerView2D"],function(g){y(w(g))},
n)})),feature:G,geojson:G,graphics:()=>C().then(()=>new Promise(function(y,n){p(["./layers/GraphicsLayerView2D"],function(g){y(w(g))},n)})),group:()=>C().then(()=>new Promise(function(y,n){p(["./layers/GroupLayerView2D"],function(g){y(w(g))},n)})),imagery:()=>C().then(()=>new Promise(function(y,n){p(["./layers/ImageryLayerView2D"],function(g){y(w(g))},n)})),"imagery-tile":()=>C().then(()=>new Promise(function(y,n){p(["./layers/ImageryTileLayerView2D"],function(g){y(w(g))},n)})),kml:()=>C().then(()=>
new Promise(function(y,n){p(["./layers/KMLLayerView2D"],function(g){y(w(g))},n)})),"map-image":()=>C().then(()=>new Promise(function(y,n){p(["./layers/MapImageLayerView2D"],function(g){y(w(g))},n)})),"map-notes":()=>C().then(()=>new Promise(function(y,n){p(["./layers/MapNotesLayerView2D"],function(g){y(w(g))},n)})),"ogc-feature":()=>C().then(()=>new Promise(function(y,n){p(["./layers/OGCFeatureLayerView2D"],function(g){y(w(g))},n)})),"open-street-map":z,route:()=>C().then(()=>new Promise(function(y,
n){p(["./layers/RouteLayerView2D"],function(g){y(w(g))},n)})),stream:()=>C().then(()=>new Promise(function(y,n){p(["./layers/StreamLayerView2D"],function(g){y(w(g))},n)})),"subtype-group":()=>C().then(()=>new Promise(function(y,n){p(["./layers/SubtypeGroupLayerView2D"],function(g){y(w(g))},n)})),tile:z,"vector-tile":()=>C().then(()=>new Promise(function(y,n){p(["./layers/VectorTileLayerView2D"],function(g){y(w(g))},n)})),wcs:()=>C().then(()=>new Promise(function(y,n){p(["./layers/ImageryTileLayerView2D"],
function(g){y(w(g))},n)})),"web-tile":z,wfs:G,wms:()=>C().then(()=>new Promise(function(y,n){p(["./layers/WMSLayerView2D"],function(g){y(w(g))},n)})),wmts:()=>C().then(()=>new Promise(function(y,n){p(["./layers/WMTSLayerView2D"],function(g){y(w(g))},n)})),slice:null,"base-elevation":null,"building-scene":null,"direct-line-measurement":null,"area-measurement":null,elevation:null,"integrated-mesh":null,"line-of-sight":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};c.layerView2DImporter=
{hasLayerViewModule:y=>l.isSome(E[y.type]),importLayerView:y=>{var n=E[y.type];if(!l.isSome(n))throw y=y.declaredClass?y.declaredClass.slice(y.declaredClass.lastIndexOf(".")+1):"Unknown",n=y.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),y=new f(`${n}:view-not-supported`,`${y} is not supported in 2D`),y;return n(y)}};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/views/2d/MapViewConstraints":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/Evented ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../layers/support/LOD ./constraints/GeometryConstraint ./constraints/RotationConstraint ./constraints/ZoomConstraint ../../geometry/Extent ../../geometry/Polygon".split(" "),
function(p,c,f,l,w,C,z,G,E,y,n,g,d,e,b){f={base:null,key:"type",typeMap:{extent:e,polygon:b}};l=function(a){function h(){var r=a.apply(this,arguments)||this;r.lods=null;r.minScale=0;r.maxScale=0;r.minZoom=-1;r.maxZoom=-1;r.rotationEnabled=!0;r.snapToZoom=!0;return r}p._inheritsLoose(h,a);var u=h.prototype;u.initialize=function(){this.watch(["_zoom","_rotation"],this.emit.bind(this,"update"),!0)};u.destroy=function(){this.view=null;this._set("_zoom",null);this._set("_rotation",null)};u.canZoomInTo=
function(r){const q=this.effectiveMaxScale;return 0===q||r>=q};u.canZoomOutTo=function(r){const q=this.effectiveMinScale;return 0===q||r<=q};u.constrain=function(r,q){this._zoom.constrain(r,q);this._rotation.constrain(r,q);this._geometry.constrain(r,q);return r};u.constrainByGeometry=function(r){return this._geometry.constrain(r)};u.fit=function(r){return this._zoom.fit(r)};u.zoomToScale=function(r){return this._zoom.zoomToScale(r)};u.scaleToZoom=function(r){return this._zoom.scaleToZoom(r)};u.snapScale=
function(r){return this._zoom.snapToClosestScale(r)};u.snapToNextScale=function(r){return this._zoom.snapToNextScale(r)};u.snapToPreviousScale=function(r){return this._zoom.snapToPreviousScale(r)};p._createClass(h,[{key:"geometry",set:function(r){r?this._set("geometry",r):this._set("geometry",null)}},{key:"_defaultLODs",get:function(){const r=this.get("view.defaultsFromMap.tileInfo"),q=this.get("view.spatialReference");return r&&q&&r.spatialReference.equals(q)?r.lods:null}},{key:"_geometry",get:function(){return new n.GeometryConstraint({geometry:this.geometry,
spatialReference:this.view.spatialReference})}},{key:"_rotation",get:function(){return new g({rotationEnabled:this.rotationEnabled})}},{key:"_zoom",get:function(){return new d({lods:this.lods||this._defaultLODs,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})}}]);return h}(l.EventedAccessor);c.__decorate([w.property({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],l.prototype,"effectiveLODs",void 0);c.__decorate([w.property({readOnly:!0,
aliasOf:"_zoom.effectiveMinScale"})],l.prototype,"effectiveMinScale",void 0);c.__decorate([w.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],l.prototype,"effectiveMaxScale",void 0);c.__decorate([w.property({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],l.prototype,"effectiveMinZoom",void 0);c.__decorate([w.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],l.prototype,"effectiveMaxZoom",void 0);c.__decorate([w.property({types:f,value:null})],l.prototype,"geometry",null);c.__decorate([w.property({type:[y]})],
l.prototype,"lods",void 0);c.__decorate([w.property()],l.prototype,"minScale",void 0);c.__decorate([w.property()],l.prototype,"maxScale",void 0);c.__decorate([w.property()],l.prototype,"minZoom",void 0);c.__decorate([w.property()],l.prototype,"maxZoom",void 0);c.__decorate([w.property()],l.prototype,"rotationEnabled",void 0);c.__decorate([w.property()],l.prototype,"snapToZoom",void 0);c.__decorate([w.property()],l.prototype,"view",void 0);c.__decorate([w.property()],l.prototype,"_defaultLODs",null);
c.__decorate([w.property({type:n.GeometryConstraint})],l.prototype,"_geometry",null);c.__decorate([w.property({type:g})],l.prototype,"_rotation",null);c.__decorate([w.property({readOnly:!0,type:d})],l.prototype,"_zoom",null);return l=c.__decorate([E.subclass("esri.views.2d.MapViewConstraints")],l)})},"esri/views/2d/constraints/GeometryConstraint":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Logger ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../geometry/projection ../../../geometry/support/contains ../../../geometry/support/near ../../../geometry/support/webMercatorUtils".split(" "),
function(p,c,f,l,w,C,z,G,E,y,n,g,d,e){var b;const a=w.getLogger("esri.views.MapView");p.GeometryConstraint=b=function(h){function u(q){q=h.call(this,q)||this;q.geometry=null;q.spatialReference=null;return q}c._inheritsLoose(u,h);var r=u.prototype;r.constrain=function(q,k){if(C.isNone(this.normalizedGeometry))return q;k=q.targetGeometry;if("extent"===this.normalizedGeometry.type?g.extentContainsPoint(this.normalizedGeometry,k):g.polygonContainsPoint(this.normalizedGeometry,k))return q;({coordinate:k}=
d.nearestCoordinate(this.normalizedGeometry,k));if(!k)return q;q.targetGeometry=k;return q};r.clone=function(){var q,k;return new b({geometry:null==(q=this.geometry)?void 0:q.clone(),spatialReference:null==(k=this.spatialReference)?void 0:k.clone()})};c._createClass(u,[{key:"normalizedGeometry",get:function(){if(C.isNone(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference)){if(e.canProject(this.geometry,this.spatialReference))return e.project(this.geometry,
this.spatialReference);if(n.isLoaded())return n.project(this.geometry,this.spatialReference);a.error("#constraints.geometry","unsupported coordinate system. The source geometry cannot be projected to the view's coordinate system. The projection engine cannot be loaded.",{geometry:this.geometry});return null}return this.geometry}}]);return u}(l);f.__decorate([z.property({constructOnly:!0})],p.GeometryConstraint.prototype,"geometry",void 0);f.__decorate([z.property({readOnly:!0})],p.GeometryConstraint.prototype,
"normalizedGeometry",null);f.__decorate([z.property({constructOnly:!0})],p.GeometryConstraint.prototype,"spatialReference",void 0);p.GeometryConstraint=b=f.__decorate([y.subclass("esri.views.2d.constraints.GeometryConstraint")],p.GeometryConstraint);Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils".split(" "),
function(p,c,f,l,w,C,z,G,E,y,n,g,d,e,b,a,h,u,r,q,k,m,x){function v(){return!!Ha&&e.isLoaded()}function B(R){C.isNone(Pa)&&(Pa=Promise.all([e.load(),(new Promise(function(U,Q){p(["../chunks/geometryEngineBase"],U,Q)})).then(function(U){return U.geometryEngineBase}),new Promise(function(U,Q){p(["./geometryAdapters/hydrated"],U,Q)})]));return Pa.then(([,U,{hydratedAdapter:Q}])=>{z.throwIfAborted(R);Ma=Q;Ha=U.default;Ha._enableProjection(e.pe)})}function L(R,U,Q,X,ja=null){if(C.isNone(Q)||C.isNone(X))return U;
if(M(Q,X,ja))return U.map(ka=>C.unwrap(I(ka,Q,X)));if(C.isNone(ja)){const ka=m.cacheKey(Q,X);void 0!==Qa[ka]?ja=Qa[ka]:(ja=N(Q,X,null),C.isNone(ja)&&(ja=new m),Qa[ka]=ja)}if(C.isNone(Ha))throw new Ua;return Ha._project(R,U,Q,X,ja)}function N(R,U,Q=null){if(C.isNone(Ha))throw new Ua;if(C.isNone(R)||C.isNone(U))return null;R=Ha._getTransformation(Ma,R,U,Q,null==Q?void 0:Q.spatialReference);return null!==R?m.fromGE(R):null}function M(R,U,Q){return Q?!1:x.equals(R,U)?!0:x.isValid(R)&&x.isValid(U)&&!!Va(R,
U,Wa)}function S(){S=f._asyncToGenerator(function*(R,U,Q,X){if(!v())if(Array.isArray(R))for(const {source:ja,dest:ka,geographicTransformation:qa}of R){if(!M(ja,ka,qa))return B(X)}else if(!M(R,U,Q))return B(X)});return S.apply(this,arguments)}function I(R,U,Q){return R?"x"in R?P(R,U,new b,Q,0):"xmin"in R?t(R,U,new g,Q,0):"rings"in R?A(R,U,new a,Q,0):"paths"in R?ca(R,U,new h,Q,0):"points"in R?V(R,U,new d,Q,0):null:null}function P(R,U,Q,X,ja){ua[0]=R.x;ua[1]=R.y;const ka=R.z;ua[2]=void 0!==ka?ka:ja;
if(!K(ua,U,0,ua,X,0,1))return null;Q.x=ua[0];Q.y=ua[1];Q.spatialReference=X;void 0===ka?(Q.z=void 0,Q.hasZ=!1):(Q.z=ua[2],Q.hasZ=!0);void 0===R.m?(Q.m=void 0,Q.hasM=!1):(Q.m=R.m,Q.hasM=!0);return Q}function V(R,U,Q,X,ja){const {points:ka,hasZ:qa,hasM:ra}=R;R=[];const Ba=ka.length,za=[];for(var ya of ka)za.push(ya[0],ya[1],qa?ya[2]:ja);if(!K(za,U,0,za,X,0,Ba))return null;for(U=0;U<Ba;++U){ja=3*U;ya=za[ja];const Da=za[ja+1];qa&&ra?R.push([ya,Da,za[ja+2],ka[U][3]]):qa?R.push([ya,Da,za[ja+2]]):ra?R.push([ya,
Da,ka[U][2]]):R.push([ya,Da])}Q.points=R;Q.spatialReference=X;Q.hasZ=qa;Q.hasM=ra;return Q}function ca(R,U,Q,X,ja){const {paths:ka,hasZ:qa,hasM:ra}=R;R=[];if(!J(ka,qa,ra,U,R,X,ja))return null;Q.paths=R;Q.spatialReference=X;Q.hasZ=qa;Q.hasM=ra;return Q}function A(R,U,Q,X,ja){const {rings:ka,hasZ:qa,hasM:ra}=R;R=[];if(!J(ka,qa,ra,U,R,X,ja))return null;Q.rings=R;Q.spatialReference=X;Q.hasZ=qa;Q.hasM=ra;return Q}function t(R,U,Q,X,ja){const {xmin:ka,ymin:qa,xmax:ra,ymax:Ba,hasZ:za,hasM:ya}=R;if(!F(ka,
qa,za?R.zmin:ja,U,ua,X))return null;Q.xmin=ua[0];Q.ymin=ua[1];za&&(Q.zmin=ua[2]);if(!F(ra,Ba,za?R.zmax:ja,U,ua,X))return null;Q.xmax=ua[0];Q.ymax=ua[1];za&&(Q.zmax=ua[2]);ya&&(Q.mmin=R.mmin,Q.mmax=R.mmax);Q.spatialReference=X;return Q}function F(R,U,Q,X,ja,ka){wa[0]=R;wa[1]=U;wa[2]=Q;return K(wa,X,0,ja,ka,0,1)}function D(R,U,Q,X){if(C.isNone(U)||C.isNone(X)||2>R.length)return!1;2===R.length&&(wa[0]=R[0],wa[1]=R[1],wa[2]=0,R=wa);return K(R,U,0,Q,X,0,1)}function H(R,U,Q){if(C.isNone(U))return!1;U=ha(U,
Ra);U=Ia[U][6];if(C.isNone(U))return!1;U(R,0,wa,0);Q!==wa&&(Q[0]=wa[0],Q[1]=wa[1],2<Q.length&&(Q[2]=wa[2]));return!0}function K(R,U,Q,X,ja,ka,qa=1){U=Va(U,ja,Wa);if(C.isNone(U))return!1;if(U===ia){if(R===X&&Q===ka)return!0;qa=Q+3*qa;for(let ra=Q,Ba=ka;ra<qa;ra++,Ba++)X[Ba]=R[ra];return!0}qa=Q+3*qa;for(let ra=Q,Ba=ka;ra<qa;ra+=3,Ba+=3)U(R,ra,X,Ba);return!0}function J(R,U,Q,X,ja,ka,qa=0){const ra=[];for(const Ba of R)for(const za of Ba)ra.push(za[0],za[1],U?za[2]:qa);if(!K(ra,X,0,ra,ka,0,ra.length/
3))return!1;X=0;ja.length=0;for(const Ba of R){R=[];for(const za of Ba)U&&Q?R.push([ra[X++],ra[X++],ra[X++],za[3]]):U?R.push([ra[X++],ra[X++],ra[X++]]):(Q?R.push([ra[X++],ra[X++],za[2]]):R.push([ra[X++],ra[X++]]),X++);ja.push(R)}return!0}function T(R,U,Q,X){R=Math.abs(Fa*R)+Math.asin(Q/(X+U));return R>=Math.PI/2?Number.MAX_VALUE:Q/Math.cos(R)}function Y(R,U,Q){const X=Math.sin(R);R=Math.cos(R);const ja=Math.sin(U);U=Math.cos(U);Q[0]=-X;Q[4]=-ja*R;Q[8]=U*R;Q[12]=0;Q[1]=R;Q[5]=-ja*X;Q[9]=U*X;Q[13]=
0;Q[2]=0;Q[6]=U;Q[10]=ja;Q[14]=0;Q[3]=0;Q[7]=0;Q[11]=0;Q[15]=1;return Q}function da(R,U,Q){Y(R,U,Q);E.transpose(Q,Q);return Q}function ha(R,U){if(U.spatialReference===R)return U.spatialReferenceId;U.spatialReference=R;"metersPerUnit"in U&&(U.metersPerUnit=G.getMetersPerUnitForSR(R,1));return R.wkt===u.SphericalECEFSpatialReference.wkt?U.spatialReferenceId=1:x.isWGS84(R)?U.spatialReferenceId=2:x.isWebMercator(R)?U.spatialReferenceId=3:x.isPlateCarree(R)?U.spatialReferenceId=12:R.wkt===u.WGS84ECEFSpatialReference.wkt?
U.spatialReferenceId=4:4490===R.wkid?U.spatialReferenceId=5:R.wkt===u.SphericalPCPFMars.wkt?U.spatialReferenceId=7:R.wkt===u.SphericalPCPFMoon.wkt?U.spatialReferenceId=9:x.isMars(R)?U.spatialReferenceId=8:x.isMoon(R)?U.spatialReferenceId=10:U.spatialReferenceId=0}function ia(R,U,Q,X){R!==Q&&(Q[X++]=R[U++],Q[X++]=R[U++],Q[X]=R[U])}function oa(R,U,Q,X){Q[X++]=Na*(R[U++]/q.earth.radius);Q[X++]=Na*(Math.PI/2-2*Math.atan(Math.exp(-R[U++]/q.earth.radius)));Q[X]=R[U]}function ma(R,U,Q,X){oa(R,U,Q,X);la(Q,
X,Q,X)}function Z(R,U,Q,X){oa(R,U,Q,X);xa(Q,X,Q,X)}function ba(R,U,Q,X,ja){var ka=.4999999*Math.PI;ka=w.clamp(Fa*R[U+1],-ka,ka);ka=Math.sin(ka);Q[X++]=Fa*R[U]*ja.radius;Q[X++]=ja.halfSemiMajorAxis*Math.log((1+ka)/(1-ka));Q[X]=R[U+2]}function fa(R,U,Q,X){ba(R,U,Q,X,q.earth)}function na(R,U,Q,X){Q[X]=R[U]*Ya;Q[X+1]=R[U+1]*Ya;Q[X+2]=R[U+2]}function O(R,U,Q,X){Q[X]=R[U]*Sa;Q[X+1]=R[U+1]*Sa;Q[X+2]=R[U+2]}function W(R,U,Q,X,ja){ja+=R[U+2];const ka=Fa*R[U+1];R=Fa*R[U];U=Math.cos(ka);Q[X++]=Math.cos(R)*U*
ja;Q[X++]=Math.sin(R)*U*ja;Q[X]=Math.sin(ka)*ja}function aa(R,U,Q,X){W(R,U,Q,X,q.moon.radius)}function ea(R,U,Q,X){W(R,U,Q,X,q.mars.radius)}function la(R,U,Q,X){W(R,U,Q,X,q.earth.radius)}function pa(R,U,Q,X,ja){var ka=R[U];const qa=R[U+1];U=R[U+2];R=Math.sqrt(ka*ka+qa*qa+U*U);U=w.asinClamped(U/(0===R?1:R));ka=Math.atan2(qa,ka);Q[X++]=Na*ka;Q[X++]=Na*U;Q[X]=R-ja}function ta(R,U,Q,X){pa(R,U,Q,X,q.moon.radius)}function Aa(R,U,Q,X){pa(R,U,Q,X,q.mars.radius)}function sa(R,U,Q,X){pa(R,U,Q,X,q.earth.radius)}
function va(R,U,Q,X){sa(R,U,Q,X);fa(Q,X,Q,X)}function Ca(R,U,Q,X){sa(R,U,Q,X);xa(Q,X,Q,X)}function xa(R,U,Q,X){{var ja=q.earth;const qa=Fa*R[U];var ka=Fa*R[U+1];R=R[U+2];U=Math.sin(ka);ka=Math.cos(ka);const ra=ja.radius/Math.sqrt(1-ja.eccentricitySquared*U*U);Q[X++]=(ra+R)*ka*Math.cos(qa);Q[X++]=(ra+R)*ka*Math.sin(qa);Q[X++]=(ra*(1-ja.eccentricitySquared)+R)*U}}function Ea(R,U,Q,X){var ja=k.earthEllipsoidConstants,ka=R[U],qa=R[U+1];R=R[U+2];let ra;U=Math.abs(R);var Ba=ka*ka+qa*qa;var za=Math.sqrt(Ba);
var ya=Ba+R*R;var Da=Math.sqrt(ya);ka=Math.atan2(qa,ka);var Ja=R*R/ya;ya=Ba/ya;qa=ja.a2/Da;Ba=ja.a3-ja.a4/Da;.3<ya?(Ja=U/Da*(1+ya*(ja.a1+qa+Ja*Ba)/Da),Da=Math.asin(Ja),qa=Ja*Ja,ya=Math.sqrt(1-qa)):(ya=za/Da*(1-Ja*(ja.a5-qa-ya*Ba)/Da),Da=Math.acos(ya),qa=1-ya*ya,Ja=Math.sqrt(qa));ra=1-q.earth.eccentricitySquared*qa;qa=q.earth.radius/Math.sqrt(ra);ja=ja.a6*qa;qa=za-qa*ya;Ba=U-ja*Ja;U=ya*qa+Ja*Ba;za=ya*Ba-Ja*qa;ja=za/(ja/ra+U);Da+=ja;0>R&&(Da=-Da);Q[X++]=Na*ka;Q[X++]=Na*Da;Q[X]=U+za*ja/2}function Oa(R,
U,Q,X){Ea(R,U,Q,X);la(Q,X,Q,X)}function Ka(R,U,Q,X){Ea(R,U,Q,X);fa(Q,X,Q,X)}function Va(R,U,Q=Xa()){return C.isNone(R)||C.isNone(U)?null:Za(R,U,Q).projector}function Za(R,U,Q){if(C.isNone(R)||C.isNone(U)||Q.source.spatialReference===R&&Q.dest.spatialReference===U)return Q;const X=ha(R,Q.source),ja=ha(U,Q.dest);0===X&&0===ja?x.equals(R,U)?Q.projector=ia:Q.projector=null:Q.projector=Ia[X][ja];return Q}function Xa(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,
spatialReferenceId:0,metersPerUnit:1},projector:ia}}let Ha=null,Ma=null,Pa=null,Qa={},Ua=function(R){function U(){return R.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}f._inheritsLoose(U,R);return U}(l);const Ya=q.earth.radius*Math.PI/180,Sa=180/(q.earth.radius*Math.PI),Ia={[2]:{[5]:null,[8]:null,[10]:null,[11]:ia,[6]:ia,[1]:la,[7]:null,[9]:null,[0]:null,[3]:fa,[12]:na,[2]:ia,[4]:xa},[5]:{[5]:ia,[8]:null,[10]:null,[11]:ia,[6]:ia,[1]:la,[7]:null,
[9]:null,[0]:null,[3]:null,[12]:na,[2]:null,[4]:xa},[8]:{[5]:null,[8]:ia,[10]:null,[11]:ia,[6]:null,[1]:null,[7]:ea,[9]:null,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:ia,[11]:ia,[6]:null,[1]:null,[7]:null,[9]:aa,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[11]:oa,[6]:oa,[1]:ma,[7]:null,[9]:null,[0]:null,[3]:ia,[12]:function(R,U,Q,X){oa(R,U,Q,X);na(Q,X,Q,X)},[2]:oa,[4]:Z},[4]:{[5]:Ea,[8]:null,[10]:null,[11]:Ea,[6]:Ea,[1]:Oa,[7]:null,
[9]:null,[0]:null,[3]:Ka,[12]:function(R,U,Q,X){Ea(R,U,Q,X);na(Q,X,Q,X)},[2]:Ea,[4]:ia},[1]:{[5]:sa,[8]:null,[10]:null,[11]:sa,[6]:sa,[1]:ia,[7]:null,[9]:null,[0]:null,[3]:va,[12]:function(R,U,Q,X){sa(R,U,Q,X);na(Q,X,Q,X)},[2]:sa,[4]:Ca},[7]:{[5]:null,[8]:Aa,[10]:null,[11]:Aa,[6]:null,[1]:null,[7]:ia,[9]:null,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[9]:{[5]:null,[8]:null,[10]:ta,[11]:ta,[6]:null,[1]:null,[7]:null,[9]:ia,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,
[10]:null,[11]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:ia,[3]:null,[12]:null,[2]:null,[4]:null},[11]:{[5]:ia,[8]:ia,[10]:ia,[11]:ia,[6]:ia,[1]:la,[7]:ea,[9]:aa,[0]:null,[3]:fa,[12]:na,[2]:ia,[4]:xa},[6]:{[5]:null,[8]:null,[10]:null,[11]:ia,[6]:ia,[1]:la,[7]:null,[9]:null,[0]:null,[3]:null,[12]:na,[2]:ia,[4]:xa},[12]:{[5]:O,[8]:null,[10]:null,[11]:O,[6]:O,[1]:function(R,U,Q,X){O(R,U,Q,X);la(Q,X,Q,X)},[7]:null,[9]:null,[0]:null,[3]:function(R,U,Q,X){O(R,U,Q,X);fa(Q,X,Q,X)},[12]:ia,[2]:O,[4]:function(R,
U,Q,X){O(R,U,Q,X);xa(Q,X,Q,X)}}},Ra={spatialReference:null,spatialReferenceId:0},$a={spatialReference:null,spatialReferenceId:0},Wa=Xa(),ab=Xa(),Fa=w.deg2rad(1),Na=w.rad2deg(1),wa=n.create(),Ga=n.create(),La=n.create(),ua=n.create(),Ta=n.create();c.canProjectToWGS84ComparableLonLat=function(R){if(C.isNone(R))return!1;R=ha(R,Ra);return!!Ia[R][6]};c.canProjectWithoutEngine=M;c.computeENUToSphericalPCPFLocalRotation=Y;c.computeSphericalPCPFToENULocalRotation=da;c.computeTranslationToOriginAndRotation=
function(R,U,Q,X){if(C.isNone(R)||C.isNone(X))return!1;var ja=ha(R,Ra),ka=ha(X,$a);if(ja===ka&&1!==ka&&7!==ka&&9!==ka&&(0!==ja||x.equals(R,X)))return E.identity(Q),E.translate(Q,Q,U),!0;if(1===ka||7===ka||9===ka){ja=Ia[ja][11];ka=Ia[11][ka];if(C.isNone(ja)||C.isNone(ka))return!1;ja(U,0,Ga,0);ka(Ga,0,La,0);Y(Fa*Ga[0],Fa*Ga[1],Q);Q[12]=La[0];Q[13]=La[1];Q[14]=La[2];return!0}if(!(3!==ka&&12!==ka||2!==ja&&1!==ja)){R=Ia[ja][11];ka=Ia[11][ka];if(C.isNone(R)||C.isNone(ka))return!1;R(U,0,Ga,0);ka(Ga,0,La,
0);2===ja?E.identity(Q):da(Fa*Ga[0],Fa*Ga[1],Q);Q[12]=La[0];Q[13]=La[1];Q[14]=La[2];return!0}return!1};c.getProjectorName=function(R,U){switch(Va(R,U,Wa)){case ia:return"copy3";case la:return"wgs84ToSphericalECEF";case fa:return"wgs84ToWebMercator";case na:return"wgs84ToPlateCarree";case xa:return"wgs84ToWGS84ECEF";case oa:return"webMercatorToWGS84";case ma:return"webMercatorToSphericalECEF";case Z:return"webMercatorToWGS84ECEF";case Ea:return"wgs84ECEFToWGS84";case Oa:return"wgs84ECEFToSphericalECEF";
case Ka:return"wgs84ECEFToWebMercator";case sa:return"sphericalECEFToWGS84";case va:return"sphericalECEFToWebMercator";case Aa:return"sphericalMarsPCPFToMars2000";case ta:return"sphericalMoonPCPFToMoon2000";case Ca:return"sphericalECEFToWGS84ECEF";case ea:return"mars2000ToSphericalPCPF";case aa:return"moon2000ToSphericalPCPF";default:return null}};c.getTransformation=N;c.getTransformations=function(R,U,Q=null){if(C.isNone(Ha))throw new Ua;R=Ha._getTransformationBySuitability(Ma,R,U,Q,null==Q?void 0:
Q.spatialReference);if(null!==R){U=[];for(const X of R)U.push(m.fromGE(X));return U}return[]};c.initializeProjection=function(R,U,Q,X){return S.apply(this,arguments)};c.isLoaded=v;c.isSupported=function(){return!0};c.load=B;c.localLinearScaleFactors=function(R,U,Q,X){if(C.isNone(U)||C.isNone(X))return!1;const ja=ha(U,Ra);var ka=ha(X,$a);if(ja===ka&&0!==ja||x.equals(U,X))return Q[0]=1,Q[1]=1,Q[2]=1,!0;if(1===ja){U=y.length(R);R=U/Math.sqrt(R[0]*R[0]+R[1]*R[1]);U/=q.earth.radius;if(3===ka)return Q[0]=
R*U,Q[1]=R*U,Q[2]=1,!0;if(2===ka||5===ka)return ka=180/(q.earth.radius*Math.PI),Q[0]=ka*R*U,Q[1]=ka*U,Q[2]=1,!0}else if(12===ja&&(2===ka||5===ka))return Q[0]=Sa,Q[1]=Sa,Q[2]=1,!0;return!1};c.lonLatToSphericalPCPF=function(R,U,Q,X,ja=0){X+=ja;ja=Math.cos(Q);R[0]=Math.cos(U)*ja*X;R[1]=Math.sin(U)*ja*X;R[2]=Math.sin(Q)*X};c.lonLatToWebMercatorComparable=ba;c.project=function(R,U,Q=null){return Array.isArray(R)?0===R.length?[]:L(Ma,R,R[0].spatialReference,U,Q):L(Ma,[R],R.spatialReference,U,Q)[0]};c.projectBoundingRect=
function(R,U,Q,X){if(null==R)return!1;if(x.equals(U,X))return r.copy(Q,R),!0;wa[0]=R[0];wa[1]=R[1];wa[2]=0;if(!K(wa,U,0,wa,X,0,1))return!1;Q[0]=wa[0];Q[1]=wa[1];wa[0]=R[2];wa[1]=R[3];wa[2]=0;if(!K(wa,U,0,wa,X,0,1))return!1;Q[2]=wa[0];Q[3]=wa[1];return!0};c.projectBoundingSphere=function(R,U,Q,X){if(C.isNone(U)||C.isNone(X))return!1;U=Za(U,X,ab);if(U.projector===ia)return Q[0]=R[0],Q[1]=R[1],Q[2]=R[2],Q[3]=R[3],!0;if(C.isNone(U.projector))return!1;const {source:ja,dest:ka}=U;if(3===ka.spatialReferenceId){U=
Ia[ja.spatialReferenceId][2];if(C.isNone(U))return!1;U(R,0,Ga,0);fa(Ga,0,Q,0);Q[3]=T(Ga[1],R[2],R[3],q.earth.radius);return!0}if(2!==ja.spatialReferenceId&&5!==ja.spatialReferenceId||12!==ka.spatialReferenceId)U.projector(R,0,Q,0),Q[3]=R[3]*ja.metersPerUnit/ka.metersPerUnit;else{X=Ia[1][12];let qa=R[3];C.isSome(Ia[ja.spatialReferenceId][1])&&C.isSome(X)&&(qa=T(R[1],R[2],R[3],q.earth.radius));U.projector(R,0,Q,0);Q[3]=qa}return!0};c.projectBuffer=K;c.projectDirection=function(R,U,Q,X,ja){y.copy(ua,
R);y.add(Ta,R,U);D(ua,Q,ua,ja);D(Ta,Q,Ta,ja);y.subtract(X,Ta,ua);y.normalize(X,X)};c.projectExtent=function(R,U,Q=U.spatialReference,X=0){return C.isSome(Q)&&C.isSome(t(R,R.spatialReference,U,Q,X))};c.projectMany=L;c.projectMultipoint=function(R,U,Q=U.spatialReference,X=0){return C.isNone(Q)?!1:C.isSome(V(R,R.spatialReference,U,Q,X))};c.projectPoint=function(R,U,Q=U.spatialReference,X=0){return C.isNone(Q)?!1:C.isSome(P(R,R.spatialReference,U,Q,X))};c.projectPointToVector=function(R,U,Q,X=0){ua[0]=
R.x;ua[1]=R.y;const ja=R.z;ua[2]=void 0!==ja?ja:X;return K(ua,R.spatialReference,0,U,Q,0,1)};c.projectPointToWGS84ComparableLonLat=function(R,U){ua[0]=R.x;ua[1]=R.y;const Q=R.z;ua[2]=void 0!==Q?Q:0;return H(ua,R.spatialReference,U)};c.projectPolygon=function(R,U,Q=U.spatialReference,X=0){return C.isSome(Q)&&C.isSome(A(R,R.spatialReference,U,Q,X))};c.projectPolyline=function(R,U,Q=U.spatialReference,X=0){return C.isSome(Q)&&C.isSome(ca(R,R.spatialReference,U,Q,X))};c.projectVectorToDehydratedPoint=
function(R,U,Q){return K(R,U,0,ua,Q.spatialReference,0,1)?(Q.x=ua[0],Q.y=ua[1],Q.z=ua[2],Q):null};c.projectVectorToPoint=function(R,U,Q){if(C.isNone(U)||C.isNone(Q))return null;const X=new b({spatialReference:Q});return K(R,U,0,ua,Q,0,1)?(X.x=ua[0],X.y=ua[1],X.z=ua[2],X):null};c.projectVectorToVector=D;c.projectVectorToWGS84ComparableLonLat=function(R,U,Q){return H(R,U,Q)};c.projectWithoutEngine=I;c.projectXYZToVector=F;c.sphericalPCPFtoLonLatElevation=pa;c.unload=function(){Pa=Ma=Ha=null;Qa={}};
Object.defineProperty(c,"__esModule",{value:!0})})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(p,c,f,l,w){function C(){return!!c._pe}function z(){return!!w("esri-wasm")}function G(){return e?e:e=(new Promise(function(a,h){p(["./pe-wasm"],a,h)})).then(function(a){return a.peWasm}).then(({default:a})=>a({locateFile:h=>l.getAssetUrl(`esri/geometry/support/${h}`)})).then(a=>{E(a)})}function E(a){function h(q,k,m){q[k]=m(q[k])}
c._pe=a;c.PeDefs.init();c.PeGTlistExtended.init();c.PeNotationMgrs.init();c.PeNotationUtm.init();c.PePCSInfo.init();c.PeGCSExtent=function(q){function k(){return q.apply(this,arguments)||this}f._inheritsLoose(k,q);k.prototype.destroy=function(){c._pe.destroy(this)};return k}(c._pe.PeGCSExtent);a=[c._pe.PeDatum,c._pe.PeGeogcs,c._pe.PeGeogtran,c._pe.PeObject,c._pe.PeParameter,c._pe.PePrimem,c._pe.PeProjcs,c._pe.PeSpheroid,c._pe.PeUnit];for(var u of a)h(u.prototype,"getName",q=>function(){return q.call(this,
Array(c.PeDefs.PE_NAME_MAX))});for(const q of[c._pe.PeGeogtran,c._pe.PeProjcs])h(q.prototype,"getParameters",k=>function(){const m=Array(c.PeDefs.PE_PARM_MAX);let x=k.call(this);for(let v=0;v<m.length;v++){const B=c._pe.getValue(x,"*");m[v]=B?c._pe.wrapPointer(B,c._pe.PeParameter):null;x+=Int32Array.BYTES_PER_ELEMENT}return m});h(c._pe.PeHorizon.prototype,"getCoord",q=>function(){const k=this.getSize();if(!k)return null;const m=[],x=q.call(this);d(m,k,x);return m});h(c._pe.PeGTlistExtendedEntry.prototype,
"getEntries",q=>{const k=c._pe._pe_getPeGTlistExtendedGTsSize();return function(){let m=null;var x=q.call(this);if(!c._pe.compare(x,c._pe.NULL)){m=[x];const v=this.getSteps();if(1<v){x=c._pe.getPointer(x);for(let B=1;B<v;B++)m.push(c._pe.wrapPointer(x+k*B,c._pe.PeGTlistExtendedGTs))}}return m}});const r=c._pe._pe_getPeHorizonSize();u=q=>function(){let k=this._cache;k||(this._cache=k=new Map);if(k.has(q))return k.get(q);let m=null;var x=q.call(this);if(!c._pe.compare(x,c._pe.NULL)){m=[x];const v=x.getNump();
if(1<v){x=c._pe.getPointer(x);for(let B=1;B<v;B++)m.push(c._pe.wrapPointer(x+r*B,c._pe.PeHorizon))}}k.set(q,m);return m};h(c._pe.PeProjcs.prototype,"horizonGcsGenerate",u);h(c._pe.PeProjcs.prototype,"horizonPcsGenerate",u);c._pe.PeObject.prototype.toString=function(q=c.PeDefs.PE_STR_OPTS_NONE){c._pe.ensureCache.prepare();const k=c._pe.getPointer(this),m=c._pe.ensureInt8(Array(c.PeDefs.PE_BUFFER_MAX));return c._pe.UTF8ToString(c._pe._pe_object_to_string_ext(k,q,m))}}function y(a){if(a){var h=c._pe.getClass(a);
h&&(h=c._pe.getCache(h))&&(a=c._pe.getPointer(a))&&delete h[a]}}function n(a,h){const u=[];h=Array(h);for(let r=0;r<a;r++)u.push(c._pe.ensureInt8(h));return u}function g(a){let h;Array.isArray(a[0])?(h=[],a.forEach(u=>{h.push(u[0],u[1])})):h=a;return h}function d(a,h,u,r=!1){if(r)for(r=0;r<2*h;r++)a[r]=c._pe.getValue(u+r*Float64Array.BYTES_PER_ELEMENT,"double");else{r=0===a.length;for(let q=0;q<h;q++)r&&(a[q]=Array(2)),a[q][0]=c._pe.getValue(u,"double"),a[q][1]=c._pe.getValue(u+Float64Array.BYTES_PER_ELEMENT,
"double"),u+=2*Float64Array.BYTES_PER_ELEMENT}}let e;c._pe=null;c.PeCSTransformations=void 0;(function(a){function h(q,k,m){c._pe.ensureCache.prepare();var x=g(m);const v=m===x;x=c._pe.ensureFloat64(x);(q=c._pe._pe_geog_to_proj(c._pe.getPointer(q),k,x))&&d(m,k,x,v);return q}function u(q,k,m){return r(q,k,m,0)}function r(q,k,m,x){c._pe.ensureCache.prepare();var v=g(m);const B=m===v;v=c._pe.ensureFloat64(v);(q=c._pe._pe_proj_to_geog_center(c._pe.getPointer(q),k,v,x))&&d(m,k,v,B);return q}a.geogToProj=
h;a.projGeog=function(q,k,m,x){switch(x){case c.PeDefs.PE_TRANSFORM_P_TO_G:return u(q,k,m);case c.PeDefs.PE_TRANSFORM_G_TO_P:return h(q,k,m)}return 0};a.projToGeog=u;a.projToGeogCenter=r})(c.PeCSTransformations||(c.PeCSTransformations={}));c.PeDefs=void 0;(function(a){a.init=function(){a.PE_BUFFER_MAX=c._pe.PeDefs.prototype.PE_BUFFER_MAX;a.PE_NAME_MAX=c._pe.PeDefs.prototype.PE_NAME_MAX;a.PE_MGRS_MAX=c._pe.PeDefs.prototype.PE_MGRS_MAX;a.PE_USNG_MAX=c._pe.PeDefs.prototype.PE_USNG_MAX;a.PE_DD_MAX=c._pe.PeDefs.prototype.PE_DD_MAX;
a.PE_DDM_MAX=c._pe.PeDefs.prototype.PE_DDM_MAX;a.PE_DMS_MAX=c._pe.PeDefs.prototype.PE_DMS_MAX;a.PE_UTM_MAX=c._pe.PeDefs.prototype.PE_UTM_MAX;a.PE_PARM_MAX=c._pe.PeDefs.prototype.PE_PARM_MAX;a.PE_TYPE_NONE=c._pe.PeDefs.prototype.PE_TYPE_NONE;a.PE_TYPE_GEOGCS=c._pe.PeDefs.prototype.PE_TYPE_GEOGCS;a.PE_TYPE_PROJCS=c._pe.PeDefs.prototype.PE_TYPE_PROJCS;a.PE_TYPE_GEOGTRAN=c._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;a.PE_TYPE_COORDSYS=c._pe.PeDefs.prototype.PE_TYPE_COORDSYS;a.PE_TYPE_UNIT=c._pe.PeDefs.prototype.PE_TYPE_UNIT;
a.PE_TYPE_LINUNIT=c._pe.PeDefs.prototype.PE_TYPE_LINUNIT;a.PE_STR_OPTS_NONE=c._pe.PeDefs.prototype.PE_STR_OPTS_NONE;a.PE_STR_AUTH_NONE=c._pe.PeDefs.prototype.PE_STR_AUTH_NONE;a.PE_STR_AUTH_TOP=c._pe.PeDefs.prototype.PE_STR_AUTH_TOP;a.PE_STR_NAME_CANON=c._pe.PeDefs.prototype.PE_STR_NAME_CANON;a.PE_PARM_X0=c._pe.PeDefs.prototype.PE_PARM_X0;a.PE_PARM_ND=c._pe.PeDefs.prototype.PE_PARM_ND;a.PE_TRANSFORM_1_TO_2=c._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;a.PE_TRANSFORM_2_TO_1=c._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;
a.PE_TRANSFORM_P_TO_G=c._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;a.PE_TRANSFORM_G_TO_P=c._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;a.PE_HORIZON_RECT=c._pe.PeDefs.prototype.PE_HORIZON_RECT;a.PE_HORIZON_POLY=c._pe.PeDefs.prototype.PE_HORIZON_POLY;a.PE_HORIZON_LINE=c._pe.PeDefs.prototype.PE_HORIZON_LINE;a.PE_HORIZON_DELTA=c._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(c.PeDefs||(c.PeDefs={}));c.PeFactory=void 0;(function(a){function h(k,m){let x=null,v=u[k];v||(v={},u[k]=v);v.hasOwnProperty(String(m))?x=
v[m]:(k=c._pe.PeFactory.prototype.factoryByType(k,m),c._pe.compare(k,c._pe.NULL)||(x=k,v[m]=x));return x=q(x)}const u={},r={},q=k=>{if(k){const m=k.getType();switch(m){case c.PeDefs.PE_TYPE_GEOGCS:k=c._pe.castObject(k,c._pe.PeGeogcs);break;case c.PeDefs.PE_TYPE_PROJCS:k=c._pe.castObject(k,c._pe.PeProjcs);break;case c.PeDefs.PE_TYPE_GEOGTRAN:k=c._pe.castObject(k,c._pe.PeGeogtran);break;default:m&c.PeDefs.PE_TYPE_UNIT&&(k=c._pe.castObject(k,c._pe.PeUnit))}}return k};a.initialize=function(){c._pe.PeFactory.prototype.initialize(null)};
a.coordsys=function(k){return h(c.PeDefs.PE_TYPE_COORDSYS,k)};a.factoryByType=h;a.fromString=function(k,m){let x=null,v=r[k];v||(v={},r[k]=v);v.hasOwnProperty(m)?x=v[m]:(k=c._pe.PeFactory.prototype.fromString(k,m),c._pe.compare(k,c._pe.NULL)||(x=k,v[m]=x));return x=q(x)};a.geogcs=function(k){return h(c.PeDefs.PE_TYPE_GEOGCS,k)};a.geogtran=function(k){return h(c.PeDefs.PE_TYPE_GEOGTRAN,k)};a.getCode=function(k){return c._pe.PeFactory.prototype.getCode(k)};a.projcs=function(k){return h(c.PeDefs.PE_TYPE_PROJCS,
k)};a.unit=function(k){return h(c.PeDefs.PE_TYPE_UNIT,k)}})(c.PeFactory||(c.PeFactory={}));c.PeGCSExtent=null;c.PeGTlistExtended=void 0;(function(a){let h;a.init=function(){a.PE_GTLIST_OPTS_COMMON=c._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;h=c._pe._pe_getPeGTlistExtendedEntrySize()};a.getGTlist=function(u,r,q,k,m,x){let v=null;const B=new c._pe.PeInteger(x);try{const L=c._pe.PeGTlistExtended.prototype.getGTlist(u,r,q,k,m,B);if(x=B.val)if(v=[L],1<x){const N=c._pe.getPointer(L);for(u=1;u<
x;u++)v.push(c._pe.wrapPointer(N+h*u,c._pe.PeGTlistExtendedEntry))}}finally{c._pe.destroy(B)}return v}})(c.PeGTlistExtended||(c.PeGTlistExtended={}));c.PeGTlistExtendedEntry=void 0;(function(a){a.destroy=function(h){if(h&&h.length){for(const u of h)y(u),u.getEntries().forEach(r=>{y(r);r=r.getGeogtran();y(r);r.getParameters().forEach(y);[r.getGeogcs1(),r.getGeogcs2()].forEach(q=>{y(q);const k=q.getDatum();y(k);y(k.getSpheroid());y(q.getPrimem());y(q.getUnit())})});c._pe.PeGTlistExtendedEntry.prototype.Delete(h[0])}}})(c.PeGTlistExtendedEntry||
(c.PeGTlistExtendedEntry={}));c.PeGTTransformations=void 0;(function(a){a.geogToGeog=function(h,u,r,q,k){c._pe.ensureCache.prepare();var m=g(r);const x=r===m;m=c._pe.ensureFloat64(m);let v=0;q&&(v=c._pe.ensureFloat64(q));(h=c._pe._pe_geog_to_geog(c._pe.getPointer(h),u,m,v,k))&&d(r,u,m,x);return h}})(c.PeGTTransformations||(c.PeGTTransformations={}));c.PeNotationDms=void 0;(function(a){const h=(r,q,k,m,x,v)=>{c._pe.ensureCache.prepare();switch(r){case "dd":var B=c._pe._pe_geog_to_dd;var L=c.PeDefs.PE_DD_MAX;
break;case "ddm":B=c._pe._pe_geog_to_ddm;L=c.PeDefs.PE_DDM_MAX;break;case "dms":B=c._pe._pe_geog_to_dms,L=c.PeDefs.PE_DMS_MAX}r=0;q&&(r=c._pe.getPointer(q));q=g(m);q=c._pe.ensureFloat64(q);L=n(k,L);m=c._pe.ensureInt32(L);if(x=B(r,k,q,x,m))for(B=0;B<k;B++)v[B]=c._pe.UTF8ToString(L[B]);return x},u=(r,q,k,m,x)=>{c._pe.ensureCache.prepare();switch(r){case "dd":var v=c._pe._pe_dd_to_geog;break;case "ddm":v=c._pe._pe_ddm_to_geog;break;case "dms":v=c._pe._pe_dms_to_geog}r=0;q&&(r=c._pe.getPointer(q));q=
m.map(B=>c._pe.ensureString(B));m=c._pe.ensureInt32(q);q=c._pe.ensureFloat64(Array(2*k));(v=v(r,k,m,q))&&d(x,k,q);return v};a.geog_to_dms=function(r,q,k,m,x){return h("dms",r,q,k,m,x)};a.dms_to_geog=function(r,q,k,m){return u("dms",r,q,k,m)};a.geog_to_ddm=function(r,q,k,m,x){return h("ddm",r,q,k,m,x)};a.ddm_to_geog=function(r,q,k,m){return u("ddm",r,q,k,m)};a.geog_to_dd=function(r,q,k,m,x){return h("dd",r,q,k,m,x)};a.dd_to_geog=function(r,q,k,m){return u("dd",r,q,k,m)}})(c.PeNotationDms||(c.PeNotationDms=
{}));c.PeNotationMgrs=void 0;(function(a){a.init=function(){a.PE_MGRS_STYLE_NEW=c._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;a.PE_MGRS_STYLE_OLD=c._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;a.PE_MGRS_STYLE_AUTO=c._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;a.PE_MGRS_180_ZONE_1_PLUS=c._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;a.PE_MGRS_ADD_SPACES=c._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};a.geog_to_mgrs_extended=function(h,u,r,q,k,m,x){c._pe.ensureCache.prepare();let v=
0;h&&(v=c._pe.getPointer(h));h=g(r);r=c._pe.ensureFloat64(h);h=n(u,c.PeDefs.PE_MGRS_MAX);const B=c._pe.ensureInt32(h);if(q=c._pe._pe_geog_to_mgrs_extended(v,u,r,q,k,m,B))for(k=0;k<u;k++)x[k]=c._pe.UTF8ToString(h[k]);return q};a.mgrs_to_geog_extended=function(h,u,r,q,k){c._pe.ensureCache.prepare();let m=0;h&&(m=c._pe.getPointer(h));h=r.map(x=>c._pe.ensureString(x));r=c._pe.ensureInt32(h);h=c._pe.ensureFloat64(Array(2*u));(q=c._pe._pe_mgrs_to_geog_extended(m,u,r,q,h))&&d(k,u,h);return q}})(c.PeNotationMgrs||
(c.PeNotationMgrs={}));c.PeNotationUsng=void 0;(function(a){a.geog_to_usng=function(h,u,r,q,k,m,x){c._pe.ensureCache.prepare();let v=0;h&&(v=c._pe.getPointer(h));h=g(r);r=c._pe.ensureFloat64(h);h=n(u,c.PeDefs.PE_MGRS_MAX);const B=c._pe.ensureInt32(h);if(q=c._pe._pe_geog_to_usng(v,u,r,q,k,m,B))for(k=0;k<u;k++)x[k]=c._pe.UTF8ToString(h[k]);return q};a.usng_to_geog=function(h,u,r,q){c._pe.ensureCache.prepare();var k=0;h&&(k=c._pe.getPointer(h));h=r.map(m=>c._pe.ensureString(m));r=c._pe.ensureInt32(h);
h=c._pe.ensureFloat64(Array(2*u));(k=c._pe._pe_usng_to_geog(k,u,r,h))&&d(q,u,h);return k}})(c.PeNotationUsng||(c.PeNotationUsng={}));c.PeNotationUtm=void 0;(function(a){a.init=function(){a.PE_UTM_OPTS_NONE=c._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;a.PE_UTM_OPTS_ADD_SPACES=c._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;a.PE_UTM_OPTS_NS=c._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};a.geog_to_utm=function(h,u,r,q,k){c._pe.ensureCache.prepare();var m=0;h&&(m=c._pe.getPointer(h));h=g(r);r=c._pe.ensureFloat64(h);
h=n(u,c.PeDefs.PE_UTM_MAX);const x=c._pe.ensureInt32(h);if(q=c._pe._pe_geog_to_utm(m,u,r,q,x))for(m=0;m<u;m++)k[m]=c._pe.UTF8ToString(h[m]);return q};a.utm_to_geog=function(h,u,r,q,k){c._pe.ensureCache.prepare();let m=0;h&&(m=c._pe.getPointer(h));h=r.map(x=>c._pe.ensureString(x));r=c._pe.ensureInt32(h);h=c._pe.ensureFloat64(Array(2*u));(q=c._pe._pe_utm_to_geog(m,u,r,q,h))&&d(k,u,h);return q}})(c.PeNotationUtm||(c.PeNotationUtm={}));c.PePCSInfo=void 0;(function(a){const h=new Map;a.init=function(){a.PE_PCSINFO_OPTION_NONE=
c._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;a.PE_PCSINFO_OPTION_DOMAIN=c._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;a.PE_POLE_OUTSIDE_BOUNDARY=c._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;a.PE_POLE_POINT=c._pe.PePCSInfo.prototype.PE_POLE_POINT};a.generate=function(u,r=a.PE_PCSINFO_OPTION_DOMAIN){let q,k;h.has(u)&&(k=h.get(u),k[r]&&(q=k[r]));q||(q=c._pe.PePCSInfo.prototype.generate(u,r),k||(k=[],h.set(u,k)),k[r]=q);return q}})(c.PePCSInfo||(c.PePCSInfo={}));c.PeVersion=void 0;(function(a){a.version_string=
function(){return c._pe.PeVersion.prototype.version_string()}})(c.PeVersion||(c.PeVersion={}));var b=Object.freeze({__proto__:null,get _pe(){return c._pe},isLoaded:C,isSupported:z,load:G,get PeCSTransformations(){return c.PeCSTransformations},get PeDefs(){return c.PeDefs},get PeFactory(){return c.PeFactory},get PeGCSExtent(){return c.PeGCSExtent},get PeGTlistExtended(){return c.PeGTlistExtended},get PeGTlistExtendedEntry(){return c.PeGTlistExtendedEntry},get PeGTTransformations(){return c.PeGTTransformations},
get PeNotationDms(){return c.PeNotationDms},get PeNotationMgrs(){return c.PeNotationMgrs},get PeNotationUsng(){return c.PeNotationUsng},get PeNotationUtm(){return c.PeNotationUtm},get PePCSInfo(){return c.PePCSInfo},get PeVersion(){return c.PeVersion},_init:E});c._init=E;c.isLoaded=C;c.isSupported=z;c.load=G;c.pe=b})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(p,c){const f=Math.PI/180;var l=c.earth.radius;const w=c.earth.eccentricitySquared;l={a1:l*
w,a2:l*w*l*w,a3:l*w*w/2,a4:l*w*l*w*2.5,a5:l*w+l*w*w/2,a6:1-w};c={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:c.earth.radius,f:c.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:c.moon.radius,f:c.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:c.mars.radius,f:c.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},
104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,
f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},
104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:c.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};p.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;p.earthEllipsoidConstants=l;p.spheroids=c;p.toRadians=f;
Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(p){return function(){function c(l){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(l&&l.steps)for(const w of l.steps)w instanceof p?this.steps.push(w):this.steps.push(new p({wkid:w.wkid,wkt:w.wkt,isInverse:w.isInverse}))}c.cacheKey=function(l,w){return[void 0!==l.wkid&&null!==l.wkid?l.wkid.toString():"-1",
void 0!==l.wkt&&null!==l.wkt?l.wkt.toString():"",void 0!==w.wkid&&null!==w.wkid?w.wkid.toString():"-1",void 0!==w.wkt&&null!==w.wkt?w.wkt.toString():""].join()};c.fromGE=function(l){const w=new c;let C="";for(const z of l.steps)l=p.fromGE(z),w.steps.push(l),C+=l.uid.toString()+",";w._cached_projection={};w._gtlistentry=null;w._chain=C;return w};var f=c.prototype;f.getInverse=function(){const l=new c;l.steps=[];for(let w=this.steps.length-1;0<=w;w--)l.steps.push(this.steps[w].getInverse());return l};
f.getGTListEntry=function(){let l="";for(const w of this.steps)l+=w.uid.toString()+",";l!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=l);return this._gtlistentry};f.assignCachedGe=function(l,w,C){this._cached_projection[c.cacheKey(l,w)]=C};f.getCachedGeTransformation=function(l,w){let C="";for(const z of this.steps)C+=z.uid.toString()+",";C!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=C);l=this._cached_projection[c.cacheKey(l,w)];return void 0===
l?null:l};return c}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(p){let c=0;return function(){function f(l=null){this.uid=c++;l?(this._wkt=void 0!==l.wkt?l.wkt:null,this._wkid=void 0!==l.wkid?l.wkid:-1,this._isInverse=void 0!==l.isInverse?!0===l.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}f.fromGE=function(l){const w=new f;w._wkt=l.wkt;w._wkid=l.wkid;w._isInverse=l.isInverse;return w};f.prototype.getInverse=
function(){const l=new f;l._wkt=this.wkt;l._wkid=this._wkid;l._isInverse=!this.isInverse;return l};p._createClass(f,[{key:"wkt",get:function(){return this._wkt},set:function(l){this._wkt=l;this.uid=c++}},{key:"wkid",get:function(){return this._wkid},set:function(l){this._wkid=l;this.uid=c++}},{key:"isInverse",get:function(){return this._isInverse},set:function(l){this._isInverse=l;this.uid=c++}}]);return f}()})},"esri/geometry/support/near":function(){define(["exports","../../geometry","../../chunks/vec2",
"./coordsUtils","../Point"],function(p,c,f,l,w){p.nearestCoordinate=function(C,z){const {spatialReference:G}=z;z=[z.x,z.y];let E=Number.POSITIVE_INFINITY,y=0,n=0;const g=[0,0];C="extent"===C.type?[[[C.xmin,C.ymin],[C.xmin,C.ymax],[C.xmax,C.ymax],[C.xmax,C.ymin],[C.xmin,C.ymin]]]:C.rings;for(const d of C)for(C=0;C<d.length-1;C++){l.projectPointOnLine(g,z,d,C);const e=f.distance(z,g);e<E&&(E=e,y=g[0],n=g[1])}return{coordinate:new w({x:y,y:n,spatialReference:G}),distance:E}};Object.defineProperty(p,
"__esModule",{value:!0})})},"esri/views/2d/constraints/RotationConstraint":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass".split(" "),function(p,c,f,l,w,C,z,G){var E;f=E=function(y){function n(){var d=y.apply(this,arguments)||this;d.enabled=!0;d.rotationEnabled=
!0;return d}p._inheritsLoose(n,y);var g=n.prototype;g.constrain=function(d,e){if(!this.enabled||!e)return d;this.rotationEnabled||(d.rotation=e.rotation);return d};g.clone=function(){return new E({enabled:this.enabled,rotationEnabled:this.rotationEnabled})};return n}(f);c.__decorate([l.property()],f.prototype,"enabled",void 0);c.__decorate([l.property()],f.prototype,"rotationEnabled",void 0);return f=E=c.__decorate([G.subclass("esri.views.2d.constraints.RotationConstraint")],f)})},"esri/views/2d/constraints/ZoomConstraint":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ../../../layers/support/LOD".split(" "),
function(p,c,f,l,w,C,z,G,E){var y;f=y=function(n){function g(e){e=n.call(this,e)||this;e._lodByScale={};e._scales=[];e.effectiveLODs=null;e.effectiveMinZoom=-1;e.effectiveMaxZoom=-1;e.effectiveMinScale=0;e.effectiveMaxScale=0;e.lods=null;e.minZoom=-1;e.maxZoom=-1;e.minScale=0;e.maxScale=0;e.snapToZoom=!0;return e}p._inheritsLoose(g,n);var d=g.prototype;d.initialize=function(){let {lods:e,minScale:b,maxScale:a,minZoom:h,maxZoom:u}=this,r=-1,q=-1,k=!1,m=!1;0!==b&&0!==a&&b<a&&([b,a]=[a,b]);if(e&&e.length){e=
e.map(v=>v.clone());e.sort((v,B)=>B.scale-v.scale);e.forEach((v,B)=>v.level=B);for(const v of e){!k&&0<b&&b>=v.scale&&(r=v.level,k=!0);!m&&0<a&&a>=v.scale&&(q=x?x.level:-1,m=!0);var x=v}-1===h&&(h=0===b?0:r);-1===u&&(u=0===a?e.length-1:q);h=Math.max(h,0);h=Math.min(h,e.length-1);u=Math.max(u,0);u=Math.min(u,e.length-1);h>u&&([h,u]=[u,h]);b=e[h].scale;a=e[u].scale;e.splice(0,h);e.splice(u-h+1,e.length);e.forEach((v,B)=>{this._lodByScale[v.scale]=v;this._scales[B]=v.scale});this._set("effectiveLODs",
e);this._set("effectiveMinZoom",h);this._set("effectiveMaxZoom",u)}this._set("effectiveMinScale",b);this._set("effectiveMaxScale",a)};d.constrain=function(e,b){if(b&&e.scale===b.scale)return e;var a=this.effectiveMinScale;const h=this.effectiveMaxScale,u=e.targetGeometry,r=b&&b.targetGeometry,q=0!==a&&e.scale>a;if(0!==h&&e.scale<h||q)a=q?a:h,r&&(b=(a-b.scale)/(e.scale-b.scale),u.x=r.x+(u.x-r.x)*b,u.y=r.y+(u.y-r.y)*b),e.scale=a;this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale));
return e};d.fit=function(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const b=this.scaleToZoom(e.scale);e.scale=this.zoomToScale(.99<Math.abs(b-Math.floor(b))?Math.round(b):Math.floor(b));return e};d.zoomToScale=function(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom;e=Math.max(0,e);const b=this._scales;if(0>=e)return b[0];if(e>=b.length)return b[b.length-1];const a=Math.round(e);return b[a]+(a-e)*(b[Math.round(e-.5)]-b[a])};d.scaleToZoom=function(e){if(!this.effectiveLODs)return-1;
const b=this._scales;let a,h;if(e>=b[0])return this.effectiveMinZoom;if(e<=b[b.length-1])return this.effectiveMaxZoom;for(let u=0;u<b.length-1;u++){a=b[u];h=b[u+1];if(h===e)return u+this.effectiveMinZoom+1;if(a>e&&h<e)return u+this.effectiveMinZoom+1-(e-h)/(a-h)}};d.snapToClosestScale=function(e){if(!this.effectiveLODs)return e;e=this.scaleToZoom(e);return this.zoomToScale(Math.round(e))};d.snapToNextScale=function(e,b=.5){if(!this.effectiveLODs)return e*b;e=Math.round(this.scaleToZoom(e));return this.zoomToScale(e+
1)};d.snapToPreviousScale=function(e,b=2){if(!this.effectiveLODs)return e*b;e=Math.round(this.scaleToZoom(e));return this.zoomToScale(e-1)};d.clone=function(){return new y({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})};d._getClosestScale=function(e){if(this._lodByScale[e])return this._lodByScale[e].scale;e=this._scales.reduce((b,a)=>Math.abs(a-e)<=Math.abs(b-e)?a:b,this._scales[0]);return this._lodByScale[e].scale};return g}(f);c.__decorate([l.property({readOnly:!0})],
f.prototype,"effectiveLODs",void 0);c.__decorate([l.property({readOnly:!0})],f.prototype,"effectiveMinZoom",void 0);c.__decorate([l.property({readOnly:!0})],f.prototype,"effectiveMaxZoom",void 0);c.__decorate([l.property({readOnly:!0})],f.prototype,"effectiveMinScale",void 0);c.__decorate([l.property({readOnly:!0})],f.prototype,"effectiveMaxScale",void 0);c.__decorate([l.property({type:[E]})],f.prototype,"lods",void 0);c.__decorate([l.property()],f.prototype,"minZoom",void 0);c.__decorate([l.property()],
f.prototype,"maxZoom",void 0);c.__decorate([l.property()],f.prototype,"minScale",void 0);c.__decorate([l.property()],f.prototype,"maxScale",void 0);c.__decorate([l.property()],f.prototype,"snapToZoom",void 0);return f=y=c.__decorate([G.subclass("esri.views.2d.constraints.ZoomConstraint")],f)})},"esri/views/2d/PaddedViewState":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../chunks/vec2 ../../chunks/vec2f64 ./viewpointUtils ./ViewState".split(" "),
function(p,c,f,l,w,C,z,G,E,y,n,g){let d=function(e){function b(){var a=e.apply(this,arguments)||this;a.left=0;a.top=0;a.right=0;a.bottom=0;return a}p._inheritsLoose(b,e);return b}(f);c.__decorate([l.property()],d.prototype,"left",void 0);c.__decorate([l.property()],d.prototype,"top",void 0);c.__decorate([l.property()],d.prototype,"right",void 0);c.__decorate([l.property()],d.prototype,"bottom",void 0);d=c.__decorate([G.subclass("esri.views.2d.PaddedViewState.Padding")],d);f=function(e){function b(...a){var h=
e.call(this,...a)||this;h.paddedViewState=new g;h._updateContent=(()=>{const u=y.create();return()=>{var r=h._get("size");const q=h._get("padding");if(r&&q){var k=h.paddedViewState;E.set(u,q.left+q.right,q.top+q.bottom);E.subtract(u,r,u);E.copy(k.size,u);if(r=k.viewpoint)h.viewpoint=r}}})();h.watch(["size","padding"],h._updateContent,!0);h.padding=new d;h.size=[0,0];return h}p._inheritsLoose(b,e);p._createClass(b,[{key:"padding",set:function(a){this._set("padding",a||new d)}},{key:"viewpoint",set:function(a){if(a){const h=
a.clone();this.paddedViewState.viewpoint=a;n.addPadding(h,a,this._get("size"),this._get("padding"));a=this._viewpoint2D;const u=h.targetGeometry;a.center[0]=u.x;a.center[1]=u.y;a.rotation=h.rotation;a.scale=h.scale;a.spatialReference=u.spatialReference;this._update()}}}]);return b}(g);c.__decorate([l.property()],f.prototype,"paddedViewState",void 0);c.__decorate([l.property({type:d})],f.prototype,"padding",null);c.__decorate([l.property()],f.prototype,"viewpoint",null);return f=c.__decorate([G.subclass("esri.views.2d.PaddedViewState")],
f)})},"esri/views/2d/ViewState":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../chunks/common ../../chunks/mat2d ../../chunks/mat2df32 ../../chunks/mat2df64 ../../chunks/mat3 ../../chunks/mat3f32 ../../chunks/vec2 ../../chunks/vec2f32 ../../chunks/vec2f64 ../../core/libs/gl-matrix-2/types/vec2 ./viewpointUtils ../../geometry/Extent ../../geometry/Point".split(" "),
function(p,c,f,l,w,C,z,G,E,y,n,g,d,e,b,a,h,u,r,q,k,m,x){var v;const B=[0,0];f=v=function(L){function N(S){S=L.call(this,S)||this;S._viewpoint2D={center:r.create(),rotation:0,scale:0,spatialReference:null};S.center=[0,0];S.extent=new m;S.id=0;S.inverseTransform=e.create();S.resolution=0;S.rotation=0;S.scale=0;S.transform=e.create();S.transformNoRotation=e.create();S.displayMat3=a.create();S.displayViewMat3=a.create();S.viewMat3=a.create();S.viewMat2d=d.create();S.worldScreenWidth=0;S.size=[0,0];return S}
p._inheritsLoose(N,L);var M=N.prototype;M.copy=function(S){const I=this.size,P=this.viewpoint;P&&I?(this.viewpoint=k.copy(P,S.viewpoint),this._set("size",h.copy(I,S.size))):(this.viewpoint=S.viewpoint.clone(),this._set("size",[S.size[0],S.size[1]]));this._set("pixelRatio",S.pixelRatio);return this};M.clone=function(){return new v({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})};M.toMap=function(S,I,P){if(q.isVec2(I))return h.transformMat2d(S,I,this.inverseTransform);
B[0]=I;B[1]=P;return h.transformMat2d(S,B,this.inverseTransform)};M.toScreen=function(S,I,P){if(q.isVec2(I))return h.transformMat2d(S,I,this.transform);B[0]=I;B[1]=P;return h.transformMat2d(S,B,this.transform)};M.toScreenNoRotation=function(S,I,P){if(q.isVec2(I))return h.transformMat2d(S,I,this.transformNoRotation);B[0]=I;B[1]=P;return h.transformMat2d(S,B,this.transformNoRotation)};M.getScreenTransform=function(S,I){const {center:P}=this._viewpoint2D,V=this._get("pixelRatio")||1,ca=this._get("size");
k.getMatrix(S,P,ca,I,0,V);return S};M._update=function(){const {center:S,spatialReference:I,scale:P,rotation:V}=this._viewpoint2D,ca=this._get("pixelRatio")||1,A=this._get("size"),t=new l({targetGeometry:new x(S[0],S[1],I),scale:P,rotation:V});this._set("viewpoint",t);if(A&&I&&P){this.resolution=k.getResolution(t);this.rotation=V;this.scale=P;this.spatialReference=I;h.copy(this.center,S);b.set(this.displayMat3,0!==A[0]?2/A[0]:0,0,0,0,0!==A[1]?-2/A[1]:0,0,-1,1,1);var F=b.identity(this.viewMat3),D=
u.fromValues(A[0]/2,A[1]/2),H=u.fromValues(-A[0]/2,-A[1]/2),K=n.toRadian(V);b.translate(F,F,D);b.rotate(F,F,K);b.translate(F,F,H);b.multiply(this.displayViewMat3,this.displayMat3,F);F=g.identity(this.viewMat2d);g.translate(F,F,D);g.rotate(F,F,K);g.translate(F,F,H);k.getExtent(this.extent,t,A);k.getTransform(this.transform,t,A,ca);g.invert(this.inverseTransform,this.transform);k.getTransformNoRotation(this.transformNoRotation,t,A,ca);this.worldScreenWidth=k.getWorldScreenWidth(this.spatialReference,
this.resolution);this._set("id",this.id+1);return this}};p._createClass(N,[{key:"pixelRatio",set:function(S){this._set("pixelRatio",S);this._update()}},{key:"size",set:function(S){this._set("size",S);this._update()}},{key:"viewpoint",set:function(S){if(S){const I=this._viewpoint2D,P=S.targetGeometry;I.center[0]=P.x;I.center[1]=P.y;I.rotation=S.rotation;I.scale=S.scale;I.spatialReference=P.spatialReference}this._update()}}]);return N}(w.JSONSupport);c.__decorate([C.property({readOnly:!0})],f.prototype,
"id",void 0);c.__decorate([C.property({value:1,json:{write:!0}})],f.prototype,"pixelRatio",null);c.__decorate([C.property({json:{write:!0}})],f.prototype,"size",null);c.__decorate([C.property({type:l,json:{write:!0}})],f.prototype,"viewpoint",null);return f=v=c.__decorate([y.subclass("esri.views.2d.ViewState")],f)})},"esri/chunks/mat2df32":function(){define(["exports"],function(p){function c(){const E=new Float32Array(6);E[0]=1;E[3]=1;return E}function f(E){const y=new Float32Array(6);y[0]=E[0];y[1]=
E[1];y[2]=E[2];y[3]=E[3];y[4]=E[4];y[5]=E[5];return y}function l(E,y,n,g,d,e){const b=new Float32Array(6);b[0]=E;b[1]=y;b[2]=n;b[3]=g;b[4]=d;b[5]=e;return b}function w(E,y){return new Float32Array(E,y,6)}function C(E,y,n,g){const d=y[g];y=y[g+1];E[g]=n[0]*d+n[2]*y+n[4];E[g+1]=n[1]*d+n[3]*y+n[5]}function z(E,y,n,g=0,d=0,e=2){for(d=d||y.length/e;g<d;g++)C(E,y,n,g*e)}var G=Object.freeze({__proto__:null,create:c,clone:f,fromValues:l,createView:w,transform:C,transformMany:z});p.clone=f;p.create=c;p.createView=
w;p.fromValues=l;p.mat2df32=G;p.transform=C;p.transformMany=z})},"esri/chunks/mat3":function(){define(["exports","./common"],function(p,c){function f(A,t){A[0]=t[0];A[1]=t[1];A[2]=t[2];A[3]=t[4];A[4]=t[5];A[5]=t[6];A[6]=t[8];A[7]=t[9];A[8]=t[10];return A}function l(A,t){A[0]=t[0];A[1]=t[1];A[2]=t[2];A[3]=t[3];A[4]=t[4];A[5]=t[5];A[6]=t[6];A[7]=t[7];A[8]=t[8];return A}function w(A,t,F,D,H,K,J,T,Y,da){A[0]=t;A[1]=F;A[2]=D;A[3]=H;A[4]=K;A[5]=J;A[6]=T;A[7]=Y;A[8]=da;return A}function C(A){A[0]=1;A[1]=
0;A[2]=0;A[3]=0;A[4]=1;A[5]=0;A[6]=0;A[7]=0;A[8]=1;return A}function z(A,t){if(A===t){const F=t[1],D=t[2],H=t[5];A[1]=t[3];A[2]=t[6];A[3]=F;A[5]=t[7];A[6]=D;A[7]=H}else A[0]=t[0],A[1]=t[3],A[2]=t[6],A[3]=t[1],A[4]=t[4],A[5]=t[7],A[6]=t[2],A[7]=t[5],A[8]=t[8];return A}function G(A,t){const F=t[0],D=t[1],H=t[2],K=t[3],J=t[4],T=t[5],Y=t[6],da=t[7];t=t[8];const ha=t*J-T*da,ia=-t*K+T*Y,oa=da*K-J*Y;let ma=F*ha+D*ia+H*oa;if(!ma)return null;ma=1/ma;A[0]=ha*ma;A[1]=(-t*D+H*da)*ma;A[2]=(T*D-H*J)*ma;A[3]=ia*
ma;A[4]=(t*F-H*Y)*ma;A[5]=(-T*F+H*K)*ma;A[6]=oa*ma;A[7]=(-da*F+D*Y)*ma;A[8]=(J*F-D*K)*ma;return A}function E(A,t){const F=t[0],D=t[1],H=t[2],K=t[3],J=t[4],T=t[5],Y=t[6],da=t[7];t=t[8];A[0]=J*t-T*da;A[1]=H*da-D*t;A[2]=D*T-H*J;A[3]=T*Y-K*t;A[4]=F*t-H*Y;A[5]=H*K-F*T;A[6]=K*da-J*Y;A[7]=D*Y-F*da;A[8]=F*J-D*K;return A}function y(A){const t=A[3],F=A[4],D=A[5],H=A[6],K=A[7],J=A[8];return A[0]*(J*F-D*K)+A[1]*(-J*t+D*H)+A[2]*(K*t-F*H)}function n(A,t,F){const D=t[0],H=t[1],K=t[2],J=t[3],T=t[4],Y=t[5],da=t[6],
ha=t[7];t=t[8];const ia=F[0],oa=F[1],ma=F[2],Z=F[3],ba=F[4],fa=F[5],na=F[6],O=F[7];F=F[8];A[0]=ia*D+oa*J+ma*da;A[1]=ia*H+oa*T+ma*ha;A[2]=ia*K+oa*Y+ma*t;A[3]=Z*D+ba*J+fa*da;A[4]=Z*H+ba*T+fa*ha;A[5]=Z*K+ba*Y+fa*t;A[6]=na*D+O*J+F*da;A[7]=na*H+O*T+F*ha;A[8]=na*K+O*Y+F*t;return A}function g(A,t,F){const D=t[0],H=t[1],K=t[2],J=t[3],T=t[4],Y=t[5],da=t[6],ha=t[7];t=t[8];const ia=F[0];F=F[1];A[0]=D;A[1]=H;A[2]=K;A[3]=J;A[4]=T;A[5]=Y;A[6]=ia*D+F*J+da;A[7]=ia*H+F*T+ha;A[8]=ia*K+F*Y+t;return A}function d(A,t,
F){const D=t[0],H=t[1],K=t[2],J=t[3],T=t[4],Y=t[5],da=t[6],ha=t[7];t=t[8];const ia=Math.sin(F);F=Math.cos(F);A[0]=F*D+ia*J;A[1]=F*H+ia*T;A[2]=F*K+ia*Y;A[3]=F*J-ia*D;A[4]=F*T-ia*H;A[5]=F*Y-ia*K;A[6]=da;A[7]=ha;A[8]=t;return A}function e(A,t,F){const D=F[0],H=F[1];F=F[2];A[0]=D*t[0];A[1]=D*t[1];A[2]=D*t[2];A[3]=H*t[3];A[4]=H*t[4];A[5]=H*t[5];A[6]=F*t[6];A[7]=F*t[7];A[8]=F*t[8];return A}function b(A,t,F){const D=F[0];F=F[1];A[0]=D*t[0];A[1]=D*t[1];A[2]=D*t[2];A[3]=F*t[3];A[4]=F*t[4];A[5]=F*t[5];return A}
function a(A,t){A[0]=1;A[1]=0;A[2]=0;A[3]=0;A[4]=1;A[5]=0;A[6]=t[0];A[7]=t[1];A[8]=1;return A}function h(A,t){const F=Math.sin(t);t=Math.cos(t);A[0]=t;A[1]=F;A[2]=0;A[3]=-F;A[4]=t;A[5]=0;A[6]=0;A[7]=0;A[8]=1;return A}function u(A,t){A[0]=t[0];A[1]=0;A[2]=0;A[3]=0;A[4]=t[1];A[5]=0;A[6]=0;A[7]=0;A[8]=1;return A}function r(A,t){A[0]=t[0];A[1]=t[1];A[2]=0;A[3]=t[2];A[4]=t[3];A[5]=0;A[6]=t[4];A[7]=t[5];A[8]=1;return A}function q(A,t){var F=t[0],D=t[1],H=t[2];t=t[3];var K=F+F,J=D+D;const T=H+H;F*=K;const Y=
D*K;D*=J;const da=H*K,ha=H*J;H*=T;K*=t;J*=t;t*=T;A[0]=1-D-H;A[3]=Y-t;A[6]=da+J;A[1]=Y+t;A[4]=1-F-H;A[7]=ha-K;A[2]=da-J;A[5]=ha+K;A[8]=1-F-D;return A}function k(A,t){const F=t[0],D=t[1],H=t[2],K=t[4],J=t[5],T=t[6],Y=t[8],da=t[9];t=t[10];const ha=t*J-T*da,ia=-t*K+T*Y,oa=da*K-J*Y;var ma=F*ha+D*ia+H*oa;if(!ma)return null;ma=1/ma;A[0]=ha*ma;A[1]=(-t*D+H*da)*ma;A[2]=(T*D-H*J)*ma;A[3]=ia*ma;A[4]=(t*F-H*Y)*ma;A[5]=(-T*F+H*K)*ma;A[6]=oa*ma;A[7]=(-da*F+D*Y)*ma;A[8]=(J*F-D*K)*ma;return A}function m(A,t){const F=
t[0],D=t[1],H=t[2],K=t[3],J=t[4],T=t[5],Y=t[6],da=t[7];var ha=t[8],ia=t[9],oa=t[10],ma=t[11];const Z=t[12],ba=t[13],fa=t[14];t=t[15];const na=F*T-D*J,O=F*Y-H*J,W=F*da-K*J,aa=D*Y-H*T,ea=D*da-K*T,la=H*da-K*Y,pa=ha*ba-ia*Z,ta=ha*fa-oa*Z;ha=ha*t-ma*Z;const Aa=ia*fa-oa*ba;ia=ia*t-ma*ba;oa=oa*t-ma*fa;ma=na*oa-O*ia+W*Aa+aa*ha-ea*ta+la*pa;if(!ma)return null;ma=1/ma;A[0]=(T*oa-Y*ia+da*Aa)*ma;A[1]=(Y*ha-J*oa-da*ta)*ma;A[2]=(J*ia-T*ha+da*pa)*ma;A[3]=(H*ia-D*oa-K*Aa)*ma;A[4]=(F*oa-H*ha+K*ta)*ma;A[5]=(D*ha-F*
ia-K*pa)*ma;A[6]=(ba*la-fa*ea+t*aa)*ma;A[7]=(fa*W-Z*la-t*O)*ma;A[8]=(Z*ea-ba*W+t*na)*ma;return A}function x(A,t,F){A[0]=2/t;A[1]=0;A[2]=0;A[3]=0;A[4]=-2/F;A[5]=0;A[6]=-1;A[7]=1;A[8]=1;return A}function v(A){return"mat3("+A[0]+", "+A[1]+", "+A[2]+", "+A[3]+", "+A[4]+", "+A[5]+", "+A[6]+", "+A[7]+", "+A[8]+")"}function B(A){return Math.sqrt(A[0]**2+A[1]**2+A[2]**2+A[3]**2+A[4]**2+A[5]**2+A[6]**2+A[7]**2+A[8]**2)}function L(A,t,F){A[0]=t[0]+F[0];A[1]=t[1]+F[1];A[2]=t[2]+F[2];A[3]=t[3]+F[3];A[4]=t[4]+
F[4];A[5]=t[5]+F[5];A[6]=t[6]+F[6];A[7]=t[7]+F[7];A[8]=t[8]+F[8];return A}function N(A,t,F){A[0]=t[0]-F[0];A[1]=t[1]-F[1];A[2]=t[2]-F[2];A[3]=t[3]-F[3];A[4]=t[4]-F[4];A[5]=t[5]-F[5];A[6]=t[6]-F[6];A[7]=t[7]-F[7];A[8]=t[8]-F[8];return A}function M(A,t,F){A[0]=t[0]*F;A[1]=t[1]*F;A[2]=t[2]*F;A[3]=t[3]*F;A[4]=t[4]*F;A[5]=t[5]*F;A[6]=t[6]*F;A[7]=t[7]*F;A[8]=t[8]*F;return A}function S(A,t,F,D){A[0]=t[0]+F[0]*D;A[1]=t[1]+F[1]*D;A[2]=t[2]+F[2]*D;A[3]=t[3]+F[3]*D;A[4]=t[4]+F[4]*D;A[5]=t[5]+F[5]*D;A[6]=t[6]+
F[6]*D;A[7]=t[7]+F[7]*D;A[8]=t[8]+F[8]*D;return A}function I(A,t){return A[0]===t[0]&&A[1]===t[1]&&A[2]===t[2]&&A[3]===t[3]&&A[4]===t[4]&&A[5]===t[5]&&A[6]===t[6]&&A[7]===t[7]&&A[8]===t[8]}function P(A,t){const F=A[0],D=A[1],H=A[2],K=A[3],J=A[4],T=A[5],Y=A[6],da=A[7];A=A[8];const ha=t[0],ia=t[1],oa=t[2],ma=t[3],Z=t[4],ba=t[5],fa=t[6],na=t[7];t=t[8];return Math.abs(F-ha)<=c.EPSILON*Math.max(1,Math.abs(F),Math.abs(ha))&&Math.abs(D-ia)<=c.EPSILON*Math.max(1,Math.abs(D),Math.abs(ia))&&Math.abs(H-oa)<=
c.EPSILON*Math.max(1,Math.abs(H),Math.abs(oa))&&Math.abs(K-ma)<=c.EPSILON*Math.max(1,Math.abs(K),Math.abs(ma))&&Math.abs(J-Z)<=c.EPSILON*Math.max(1,Math.abs(J),Math.abs(Z))&&Math.abs(T-ba)<=c.EPSILON*Math.max(1,Math.abs(T),Math.abs(ba))&&Math.abs(Y-fa)<=c.EPSILON*Math.max(1,Math.abs(Y),Math.abs(fa))&&Math.abs(da-na)<=c.EPSILON*Math.max(1,Math.abs(da),Math.abs(na))&&Math.abs(A-t)<=c.EPSILON*Math.max(1,Math.abs(A),Math.abs(t))}function V(A){const t=c.EPSILON,F=A[0],D=A[1],H=A[2],K=A[3],J=A[4],T=A[5],
Y=A[6],da=A[7];A=A[8];return Math.abs(1-(F*F+K*K+Y*Y))<=t&&Math.abs(1-(D*D+J*J+da*da))<=t&&Math.abs(1-(H*H+T*T+A*A))<=t}var ca=Object.freeze({__proto__:null,fromMat4:f,copy:l,set:w,identity:C,transpose:z,invert:G,adjoint:E,determinant:y,multiply:n,translate:g,rotate:d,scale:e,scaleByVec2:b,fromTranslation:a,fromRotation:h,fromScaling:u,fromMat2d:r,fromQuat:q,normalFromMat4Legacy:k,normalFromMat4:m,projection:x,str:v,frob:B,add:L,subtract:N,multiplyScalar:M,multiplyScalarAndAdd:S,exactEquals:I,equals:P,
isOrthoNormal:V,mul:n,sub:N});p.add=L;p.adjoint=E;p.copy=l;p.determinant=y;p.equals=P;p.exactEquals=I;p.frob=B;p.fromMat2d=r;p.fromMat4=f;p.fromQuat=q;p.fromRotation=h;p.fromScaling=u;p.fromTranslation=a;p.identity=C;p.invert=G;p.isOrthoNormal=V;p.mat3=ca;p.mul=n;p.multiply=n;p.multiplyScalar=M;p.multiplyScalarAndAdd=S;p.normalFromMat4=m;p.normalFromMat4Legacy=k;p.projection=x;p.rotate=d;p.scale=e;p.scaleByVec2=b;p.set=w;p.str=v;p.sub=N;p.subtract=N;p.translate=g;p.transpose=z})},"esri/chunks/mat3f32":function(){define(["exports"],
function(p){function c(){const z=new Float32Array(9);z[0]=1;z[4]=1;z[8]=1;return z}function f(z){const G=new Float32Array(9);G[0]=z[0];G[1]=z[1];G[2]=z[2];G[3]=z[3];G[4]=z[4];G[5]=z[5];G[6]=z[6];G[7]=z[7];G[8]=z[8];return G}function l(z,G,E,y,n,g,d,e,b){const a=new Float32Array(9);a[0]=z;a[1]=G;a[2]=E;a[3]=y;a[4]=n;a[5]=g;a[6]=d;a[7]=e;a[8]=b;return a}function w(z,G){return new Float32Array(z,G,9)}var C=Object.freeze({__proto__:null,create:c,clone:f,fromValues:l,createView:w});p.clone=f;p.create=
c;p.createView=w;p.fromValues=l;p.mat3f32=C})},"esri/chunks/vec2f32":function(){define(["exports"],function(p){function c(){return new Float32Array(2)}function f(b){const a=new Float32Array(2);a[0]=b[0];a[1]=b[1];return a}function l(b,a){const h=new Float32Array(2);h[0]=b;h[1]=a;return h}function w(b,a){return new Float32Array(b,a,2)}function C(){return c()}function z(){return l(1,1)}function G(){return l(1,0)}function E(){return l(0,1)}const y=c(),n=z(),g=G(),d=E();var e=Object.freeze({__proto__:null,
create:c,clone:f,fromValues:l,createView:w,zeros:C,ones:z,unitX:G,unitY:E,ZEROS:y,ONES:n,UNIT_X:g,UNIT_Y:d});p.ONES=n;p.UNIT_X=g;p.UNIT_Y=d;p.ZEROS=y;p.clone=f;p.create=c;p.createView=w;p.fromValues=l;p.ones=z;p.unitX=G;p.unitY=E;p.vec2f32=e;p.zeros=C})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["exports"],function(p){function c(l){return l instanceof Float32Array&&2<=l.length}function f(l){return Array.isArray(l)&&2<=l.length}p.isVec2=function(l){return c(l)||f(l)};p.isVec2f32=c;
p.isVec2f64=f;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/tiling/PagedTileQueue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec2 ../../support/QueueProcessor".split(" "),function(p,c,f,l,w,C,z,G,E,y){function n(a,h){a.length=
0;h.forEach(u=>a.push(u));return a}const g=new Set,d=[],e=new Map,b=[0,0];f=function(a){function h(r){r=a.call(this,r)||this;r._keyToItem=new Map;r.concurrency=6;r.strategy="scale-first";r.tileInfoView=null;return r}p._inheritsLoose(h,a);var u=h.prototype;u.initialize=function(){const {concurrency:r,process:q}=this;this._queue=new y.QueueProcessor({concurrency:r,process:(k,m)=>{k=this._keyToItem.get(k);return q(k,{signal:m})},peeker:k=>k.values().next().value})};u.destroy=function(){this.clear();
this._queue.destroy();this._queue=null};u.abort=function(r){this._queue.abort("string"===typeof r?r:r.id)};u.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};u.has=function(r){return"string"===typeof r?this._keyToItem.has(r):this._keyToItem.has(r.id)};u.isOngoing=function(r){r="string"===typeof r?r:r.id;return this.has(r)&&this._queue.isOngoing(r)};u.pause=function(){this._queue.pause()};u.push=function(r,q){const k=r.key.id+"-"+q;if(this.has(k))return this.get(k);
q=this._queue.push(k);const m=()=>{this._keyToItem.delete(k);this.notifyChange("updating")};this._keyToItem.set(k,r);q.then(m,m);this.notifyChange("updating");return q};u.reset=function(){this._queue.reset();this.notifyChange("updating")};u.resume=function(){this._queue.resume()};u._peekByScaleFirst=function(r){if(!this.state)return r.values().next().value;const q=this.tileInfoView;let k=Number.NEGATIVE_INFINITY,m=Number.POSITIVE_INFINITY;r.forEach(N=>{N=this._keyToItem.get(N);const M=this.tileInfoView.getTileScale(N.key);
e.has(M)||(e.set(M,[]),k=Math.max(M,k),m=Math.min(M,m));e.get(M).push(N.key);g.add(M)});let x=this.state.scale;e.has(x)||(n(d,g),d.sort(),x=d.reduce((N,M)=>Math.abs(M-x)<Math.abs(N-x)?M:N,d[0]));x=Math.min(x,k);x=Math.max(x,m);r=e.get(x);const v=q.getClosestInfoForScale(x),B=v.getColumnForX(this.state.center[0]),L=v.getRowForY(this.state.center[1]);r.sort((N,M)=>{const S=v.denormalizeCol(N.col,N.world),I=v.denormalizeCol(M.col,M.world);return Math.sqrt((B-S)*(B-S)+(L-N.row)*(L-N.row))-Math.sqrt((B-
I)*(B-I)+(L-M.row)*(L-M.row))});g.clear();e.clear();return r[0].id};u._peekByCenterFirst=function(r){if(!this.state)return r.values().next().value;const q=this.tileInfoView,k=this.state.center;let m=Number.POSITIVE_INFINITY,x=null;r.forEach(v=>{v=this._keyToItem.get(v);q.getTileCoords(b,v.key);const B=E.distance(b,k);B<m&&(m=B,x=v.key)});return x.id};p._createClass(h,[{key:"length",get:function(){return this._queue?this._queue.length:0}},{key:"onGoingCount",get:function(){return this._keyToItem.size}},
{key:"updating",get:function(){return 0<this.length||0<this.onGoingCount}}]);return h}(f);c.__decorate([l.property({constructOnly:!0})],f.prototype,"concurrency",void 0);c.__decorate([l.property({constructOnly:!0})],f.prototype,"process",void 0);c.__decorate([l.property()],f.prototype,"state",void 0);c.__decorate([l.property({constructOnly:!0})],f.prototype,"strategy",void 0);c.__decorate([l.property({constructOnly:!0})],f.prototype,"tileInfoView",void 0);c.__decorate([l.property({readOnly:!0})],
f.prototype,"updating",null);return f=c.__decorate([G.subclass("esri.views.2d.tiling.PagedTileQueue")],f)})},"esri/views/support/QueueProcessor":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/scheduling".split(" "),function(p,c,f,l,w,C){let z=function(E,y){this.item=E;this.controller=y;this.promise=null},G=function(){function E(n){this._deferreds=new Map;this._controllers=new Map;this._processingItems=new Map;
this._isPaused=!1;this._task=this._schedule=null;this.concurrency=1;n.concurrency&&(this.concurrency=n.concurrency);this._queue=new w(n.peeker);this.process=n.process;const g=n.scheduler;n.priority&&f.isSome(g)&&(this._task=g.registerTask(n.priority,this))}var y=E.prototype;y.destroy=function(){this.clear();this._schedule&&(this._schedule.remove(),this._schedule=null);this._task&&(this._task.remove(),this._task=null)};y.abort=function(n){(n=this._controllers.get(n))&&n.abort()};y.clear=function(){this._queue.clear();
const n=[];this._controllers.forEach(g=>n.push(g));this._controllers.clear();n.forEach(g=>g.abort());this._processingItems.clear();this._cancelNext()};y.forEach=function(n){this._deferreds.forEach((g,d)=>n(d))};y.get=function(n){return(n=this._deferreds.get(n))?n.promise:void 0};y.isOngoing=function(n){return this._processingItems.has(n)};y.has=function(n){return this._deferreds.has(n)};y.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};y.push=function(n,g){const d=this.get(n);
if(d)return d;const e=l.createAbortController();let b=null;g&&(b=l.onAbort(g,()=>e.abort()));const a=()=>{h.remove();f.isSome(b)&&b.remove();this._deferreds.delete(n);this._controllers.delete(n);this._queue.remove(n);this._processingItems.delete(n);this._scheduleNext()},h=l.onAbortOrThrow(e.signal,()=>{const r=this._processingItems.get(n);r&&r.controller.abort();a();u.reject(l.createAbortError())}),u=l.createDeferred();this._deferreds.set(n,u);this._controllers.set(n,e);u.promise.then(a,a);this._queue.push(n);
this._scheduleNext();return u.promise};y.last=function(){return this._queue.last()};y.peek=function(){return this._queue.peek()};y.popLast=function(){return this._queue.popLast()};y.reset=function(){const n=[];this._processingItems.forEach(g=>n.push(g));this._processingItems.clear();for(const g of n)this._queue.push(g.item),g.controller.abort();this._scheduleNext()};y.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};y.takeAll=function(){const n=[];for(;this._queue.length;)n.push(this._queue.pop());
this.clear();return n};y.runTask=function(n){for(;!n.done&&0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),n.madeProgress()};y._scheduleNext=function(){this._task||this._isPaused||this._schedule||(this._schedule=C.schedule(()=>{this._schedule=null;this._next()}))};y._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};y._cancelNext=function(){this._schedule&&(this._schedule.remove(),
this._schedule=null)};y._processResult=function(n,g){this._canProcessFulfillment(n)&&(this._scheduleNext(),this._deferreds.get(n.item).resolve(g))};y._processError=function(n,g){this._canProcessFulfillment(n)&&(this._scheduleNext(),this._deferreds.get(n.item).reject(g))};y._canProcessFulfillment=function(n){return this._deferreds.get(n.item)&&this._processingItems.get(n.item)===n?!0:!1};y._process=function(n){if(!f.isNone(n)){var g=l.createAbortController(),d=new z(n,g);this._processingItems.set(n,
d);try{var e=this.process(n,g.signal)}catch(b){this._processError(d,b)}l.isPromiseLike(e)?(d.promise=e,e.then(b=>this._processResult(d,b),b=>this._processError(d,b))):this._processResult(d,e)}};c._createClass(E,[{key:"length",get:function(){return this._processingItems.size+this._queue.length}},{key:"running",get:function(){return!this._isPaused&&0<this._queue.length&&this._processingItems.size<this.concurrency}},{key:"test",get:function(){return{update:n=>this.runTask(n)}}}]);return E}();p.QueueProcessor=
G;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/tiling/TileInfoView":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(p,c,f,l,w,C){const z=new w("0/0/0/0");let G=function(){function y(g,d,e,b,a,h,u,r){this.x=g;this.ymin=d;this.ymax=e;this.invM=b;this.leftAdjust=a;this.rightAdjust=h;this.leftBound=u;this.rightBound=r}y.create=function(g,d){g[1]>d[1]&&([g,
d]=[d,g]);const [e,b]=g,[a,h]=d;g=a-e;d=h-b;d=0!==d?g/d:0;const u=(Math.ceil(b)-b)*d,r=(Math.floor(b)-b)*d;return new y(e,Math.floor(b),Math.ceil(h),d,0>g?u:r,0>g?r:u,0>g?a:e,0>g?e:a)};var n=y.prototype;n.incrRow=function(){this.x+=this.invM};n.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};n.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return y}();const E=[[0,0],[0,0],[0,0],[0,0]];return function(){function y(g,d){this.tileInfo=g;
this.fullExtent=d;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};const e=g.lods.slice();e.sort(function(a,h){return h.scale-a.scale});const b=this._lodInfos=e.map(a=>f.create(g,a,d));e.forEach((a,h)=>{this._infoByLevel[a.level]=b[h];this._infoByScale[a.scale]=b[h];this.scales[h]=a.scale},this);this._wrap=g.isWrappable}var n=y.prototype;n.getLODInfoAt=function(g){return this._infoByLevel["number"===typeof g?g:g.level]};n.getTileBounds=function(g,d,e=!1){z.set(d);return(d=
this._infoByLevel[z.level])?d.getTileBounds(g,z,e):g};n.getTileCoords=function(g,d,e=!1){z.set(d);return(d=this._infoByLevel[z.level])?d.getTileCoords(g,z,e):g};n.getTileCoverage=function(g,d=192,e="closest"){e="closest"===e?this.getClosestInfoForScale(g.scale):this.getSmallestInfoForScale(g.scale);const b=l.pool.acquire(e),a=this._wrap;var h=Infinity;let u=-Infinity;const r=b.spans;E[0][0]=E[0][1]=E[1][1]=E[3][0]=-d;E[1][0]=E[2][0]=g.size[0]+d;E[2][1]=E[3][1]=g.size[1]+d;for(q of E)g.toMap(q,q),
q[0]=e.getColumnForX(q[0]),q[1]=e.getRowForY(q[1]);g=[];var q=3;for(d=0;4>d;d++)E[d][1]===E[q][1]?q=d:(q=G.create(E[d],E[q]),h=Math.min(q.ymin,h),u=Math.max(q.ymax,u),void 0===g[q.ymin]&&(g[q.ymin]=[]),g[q.ymin].push(q),q=d);if(null==h||null==u||100<u-h)return null;for(d=[];h<u;){null!=g[h]&&(d=d.concat(g[h]));q=Infinity;var k=-Infinity;for(var m=d.length-1;0<=m;m--){var x=d[m];q=Math.min(q,x.getLeftCol());k=Math.max(k,x.getRightCol())}q=Math.floor(q);k=Math.floor(k);if(h>=e.first[1]&&h<=e.last[1])if(a)if(e.size[0]<
e.worldSize[0])for(m=Math.floor(k/e.worldSize[0]),x=Math.floor(q/e.worldSize[0]);x<=m;x++)r.push(new C(h,Math.max(e.getFirstColumnForWorld(x),q),Math.min(e.getLastColumnForWorld(x),k)));else r.push(new C(h,q,k));else q>e.last[0]||k<e.first[0]||(q=Math.max(q,e.first[0]),k=Math.min(k,e.last[0]),r.push(new C(h,q,k)));h+=1;for(q=d.length-1;0<=q;q--)k=d[q],k.ymax>=h?k.incrRow():d.splice(q,1)}return b};n.getTileParentId=function(g){z.set(g);g=this._lodInfos.indexOf(this._infoByLevel[z.level])-1;if(0>g)return null;
this._getTileIdAtLOD(z,this._lodInfos[g],z);return z.id};n.getTileResolution=function(g){return(g=this._infoByLevel["object"===typeof g?g.level:g])?g.resolution:-1};n.getTileScale=function(g){return(g=this._infoByLevel[g.level])?g.scale:-1};n.intersects=function(g,d){z.set(d);d=this._infoByLevel[z.level];const e=g.lodInfo;if(e.resolution>d.resolution){this._getTileIdAtLOD(z,e,z);var b=e.denormalizeCol(z.col,z.world);for(var a of g.spans)if(a.row===z.row&&a.colFrom<=b&&a.colTo>=b)return!0}if(e.resolution<
d.resolution){const [u,r,q,k]=g.spans.reduce((m,x)=>{m[0]=Math.min(m[0],x.row);m[1]=Math.max(m[1],x.row);m[2]=Math.min(m[2],x.colFrom);m[3]=Math.max(m[3],x.colTo);return m},[Infinity,-Infinity,Infinity,-Infinity]);b=d.denormalizeCol(z.col,z.world);g=e.getColumnForX(d.getXForColumn(b));a=e.getRowForY(d.getYForRow(z.row));b=e.getColumnForX(d.getXForColumn(b+1))-1;d=e.getRowForY(d.getYForRow(z.row+1))-1;return!(g>k||b<q||a>r||d<u)}const h=e.denormalizeCol(z.col,z.world);return g.spans.some(u=>u.row===
z.row&&u.colFrom<=h&&u.colTo>=h)};n.normalizeBounds=function(g,d,e){g[0]=d[0];g[1]=d[1];g[2]=d[2];g[3]=d[3];this._wrap&&(d=c.getInfo(this.tileInfo.spatialReference),e=-e*(d.valid[1]-d.valid[0]),g[0]+=e,g[2]+=e);return g};n.getSmallestInfoForScale=function(g){const d=this.scales;if(this._infoByScale[g])return this._infoByScale[g];if(g>d[0])return this._infoByScale[d[0]];for(let e=1;e<d.length-1;e++)if(g>d[e]+1E-6)return this._infoByScale[d[e-1]];return this._infoByScale[d[d.length-1]]};n.getClosestInfoForScale=
function(g){const d=this.scales;if(this._infoByScale[g])return this._infoByScale[g];g=d.reduce((e,b)=>Math.abs(b-g)<Math.abs(e-g)?b:e,d[0]);return this._infoByScale[g]};n.scaleToLevel=function(g){const d=this.scales;if(this._infoByScale[g])return this._infoByScale[g].level;for(let e=d.length-1;0<=e;e--)if(g<d[e])return e===d.length-1?this._infoByScale[d[d.length-1]].level:this._infoByScale[d[e]].level+(d[e]-g)/(d[e]-d[e+1]);return this._infoByScale[d[0]].level};n.scaleToZoom=function(g){return this.tileInfo.scaleToZoom(g)};
n._getTileIdAtLOD=function(g,d,e){const b=this._infoByLevel[e.level];g.set(e);if(d.resolution<b.resolution)return null;if(d.resolution===b.resolution)return g;g.level=d.level;g.col=Math.floor(e.col*b.resolution/d.resolution+.01);g.row=Math.floor(e.row*b.resolution/d.resolution+.01);return g};p._createClass(y,[{key:"spatialReference",get:function(){return this.tileInfo.spatialReference}}]);return y}()})},"esri/views/2d/tiling/LODInfo":function(){define(["../../../geometry/support/spatialReferenceUtils",
"./TileKey"],function(p,c){function f(w,C,z){w[0]=C;w[1]=z;return w}const l=new c("0/0/0/0");return function(){function w(z,G,E,y,n,g,d,e,b,a,h,u){this.level=z;this.resolution=G;this.scale=E;this.origin=y;this.first=n;this.last=g;this.size=d;this.norm=e;this.worldStart=b;this.worldEnd=a;this.worldSize=h;this.wrap=u}w.create=function(z,G,E){var y=p.getInfo(z.spatialReference);const n=[z.origin.x,z.origin.y],g=[z.size[0]*G.resolution,z.size[1]*G.resolution],d=[-Infinity,-Infinity],e=[Infinity,Infinity],
b=[Infinity,Infinity];E&&(f(d,Math.max(0,Math.floor((E.xmin-n[0])/g[0])),Math.max(0,Math.floor((n[1]-E.ymax)/g[1]))),f(e,Math.max(0,Math.floor((E.xmax-n[0])/g[0])),Math.max(0,Math.floor((n[1]-E.ymin)/g[1]))),f(b,e[0]-d[0]+1,e[1]-d[1]+1));const {cols:a,rows:h}=G;!E&&a&&h&&(f(d,0,0),f(e,a-1,h-1),f(b,a,h));let u;z.isWrappable?(z=[Math.ceil(Math.round((y.valid[1]-y.valid[0])/G.resolution)/z.size[0]),b[1]],y=[Math.floor((y.origin[0]-n[0])/g[0]),d[1]],E=[z[0]+y[0]-1,e[1]],u=!0):(y=d,E=e,z=b,u=!1);return new w(G.level,
G.resolution,G.scale,n,d,e,b,g,y,E,z,u)};var C=w.prototype;C.normalizeCol=function(z){if(!this.wrap)return z;const G=this.worldSize[0];return 0>z?G-1-Math.abs((z+1)%G):z%G};C.denormalizeCol=function(z,G){return this.wrap?this.worldSize[0]*G+z:z};C.getWorldForColumn=function(z){return this.wrap?Math.floor(z/this.worldSize[0]):0};C.getFirstColumnForWorld=function(z){return z*this.worldSize[0]+this.first[0]};C.getLastColumnForWorld=function(z){return z*this.worldSize[0]+this.first[0]+this.size[0]-1};
C.getColumnForX=function(z){return(z-this.origin[0])/this.norm[0]};C.getXForColumn=function(z){return this.origin[0]+z*this.norm[0]};C.getRowForY=function(z){return(this.origin[1]-z)/this.norm[1]};C.getYForRow=function(z){return this.origin[1]-z*this.norm[1]};C.getTileBounds=function(z,G,E=!1){l.set(G);var y=E?l.col:this.denormalizeCol(l.col,l.world),n=l.row;G=this.getXForColumn(y);E=this.getYForRow(n+1);y=this.getXForColumn(y+1);n=this.getYForRow(n);z[0]=G;z[1]=E;z[2]=y;z[3]=n;return z};C.getTileCoords=
function(z,G,E=!1){l.set(G);G=E?l.col:this.denormalizeCol(l.col,l.world);Array.isArray(z)?f(z,this.getXForColumn(G),this.getYForRow(l.row)):(z.x=this.getXForColumn(G),z.y=this.getYForRow(l.row));return z};return w}()})},"esri/views/2d/tiling/TileKey":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../core/ObjectPool"],function(p,c){let f=function(){function l(C,z,G,E){this.set(C,z,G,E)}l.getId=function(C,z,G,E){return"object"===typeof C?`${C.level}/${C.row}/${C.col}/${C.world}`:
`${C}/${z}/${G}/${E}`};var w=l.prototype;w.acquire=function(C,z,G,E){this.set(C,z,G,E)};w.contains=function(C){const z=C.level-this.level;return this.row===C.row>>z&&this.col===C.col>>z&&this.world===C.world};w.equals=function(C){return this.level===C.level&&this.row===C.row&&this.col===C.col&&this.world===C.world};w.clone=function(){return new l(this)};w.release=function(){this.world=this.col=this.row=this.level=0};w.set=function(C,z,G,E){if(null==C)this.world=this.col=this.row=this.level=0;else if("object"===
typeof C)this.level=C.level||0,this.row=C.row||0,this.col=C.col||0,this.world=C.world||0;else if("string"===typeof C){const [y,n,g,d]=C.split("/");this.level=parseFloat(y);this.row=parseFloat(n);this.col=parseFloat(g);this.world=parseFloat(d)}else this.level=+C,this.row=+z,this.col=+G,this.world=+E||0;return this};w.toString=function(){return`${this.level}/${this.row}/${this.col}/${this.world}`};w.getParentKey=function(){return 0>=this.level?null:new l(this.level-1,this.row>>1,this.col>>1,this.world)};
w.getChildKeys=function(){const C=this.level+1,z=this.row<<1,G=this.col<<1,E=this.world;return[new l(C,z,G,E),new l(C,z,G+1,E),new l(C,z+1,G,E),new l(C,z+1,G+1,E)]};w.compareRowMajor=function(C){return this.row<C.row?-1:this.row>C.row?1:this.col<C.col?-1:this.col>C.col?1:0};p._createClass(l,[{key:"key",get:function(){return this}},{key:"id",get:function(){return this.toString()},set:function(C){this.set(C)}},{key:"hash",get:function(){return(this.world&3)<<30|(this.col&4095)<<22|(this.row&4095)<<
8|this.level&63}}]);return l}();f.pool=new c(f,null,null,25,50);return f})},"esri/views/2d/tiling/TileCoverage":function(){define(["../../../core/ObjectPool"],function(p){let c=function(){function f(){this.spans=[]}var l=f.prototype;l.acquire=function(w){this.lodInfo=w};l.release=function(){this.lodInfo=null;this.spans.length=0};l.forEach=function(w,C){const {spans:z,lodInfo:G}=this,{level:E}=G;if(0!==z.length)for(const {row:y,colFrom:n,colTo:g}of z)for(let d=n;d<=g;d++)w.call(C,E,y,G.normalizeCol(d),
G.getWorldForColumn(d))};return f}();c.pool=new p(c);return c})},"esri/views/2d/tiling/TileSpan":function(){define(function(){return function(p,c,f){this.row=p;this.colFrom=c;this.colTo=f}})},"esri/views/2d/tiling/TileQueue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec2 ../../support/QueueProcessor".split(" "),
function(p,c,f,l,w,C,z,G,E,y){function n(a,h){a.length=0;h.forEach(u=>a.push(u));return a}const g=new Set,d=[],e=new Map,b=[0,0];f=function(a){function h(r){r=a.call(this,r)||this;r._keyToItem=new Map;r.concurrency=6;r.strategy="scale-first";r.tileInfoView=null;return r}p._inheritsLoose(h,a);var u=h.prototype;u.initialize=function(){const {concurrency:r,process:q,strategy:k}=this;this._queue=new y.QueueProcessor({concurrency:r,process:(m,x)=>{m=this._keyToItem.get(m);return q(m,{signal:x})},peeker:"scale-first"===
k?m=>this._peekByScaleFirst(m):m=>this._peekByCenterFirst(m)})};u.destroy=function(){this.clear();this._queue.destroy();this._queue=null};u.abort=function(r){this._queue.abort("string"===typeof r?r:r.id)};u.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};u.has=function(r){return"string"===typeof r?this._keyToItem.has(r):this._keyToItem.has(r.id)};u.isOngoing=function(r){r="string"===typeof r?r:r.id;return this.has(r)&&this._queue.isOngoing(r)};u.pause=function(){this._queue.pause()};
u.push=function(r){const q=r.key.id;if(this._queue.has(q))return this._queue.get(q);const k=this._queue.push(q),m=()=>{this._keyToItem.delete(q);this.notifyChange("updating")};this._keyToItem.set(q,r);k.then(m,m);this.notifyChange("updating");return k};u.reset=function(){this._queue.reset()};u.resume=function(){this._queue.resume()};u._peekByScaleFirst=function(r){if(!this.state)return r.values().next().value;const q=this.tileInfoView;let k=Number.NEGATIVE_INFINITY,m=Number.POSITIVE_INFINITY;r.forEach(N=>
{N=this._keyToItem.get(N);const M=this.tileInfoView.getTileScale(N.key);e.has(M)||(e.set(M,[]),k=Math.max(M,k),m=Math.min(M,m));e.get(M).push(N.key);g.add(M)});let x=this.state.scale;e.has(x)||(n(d,g),d.sort(),x=d.reduce((N,M)=>Math.abs(M-x)<Math.abs(N-x)?M:N,d[0]));x=Math.min(x,k);x=Math.max(x,m);r=e.get(x);const v=q.getClosestInfoForScale(x),B=v.getColumnForX(this.state.center[0]),L=v.getRowForY(this.state.center[1]);r.sort((N,M)=>{const S=v.denormalizeCol(N.col,N.world),I=v.denormalizeCol(M.col,
M.world);return Math.sqrt((B-S)*(B-S)+(L-N.row)*(L-N.row))-Math.sqrt((B-I)*(B-I)+(L-M.row)*(L-M.row))});g.clear();e.clear();return r[0].id};u._peekByCenterFirst=function(r){if(!this.state)return r.values().next().value;const q=this.tileInfoView,k=this.state.center;let m=Number.POSITIVE_INFINITY,x=null;r.forEach(v=>{v=this._keyToItem.get(v);q.getTileCoords(b,v.key);const B=E.distance(b,k);B<m&&(m=B,x=v.key)});return x.id};p._createClass(h,[{key:"length",get:function(){return this._queue?this._queue.length:
0}},{key:"onGoingCount",get:function(){return this._keyToItem.size}},{key:"updating",get:function(){return 0<this.length||0<this.onGoingCount}}]);return h}(f);c.__decorate([l.property({constructOnly:!0})],f.prototype,"concurrency",void 0);c.__decorate([l.property({constructOnly:!0})],f.prototype,"process",void 0);c.__decorate([l.property()],f.prototype,"state",void 0);c.__decorate([l.property({constructOnly:!0})],f.prototype,"strategy",void 0);c.__decorate([l.property({constructOnly:!0})],f.prototype,
"tileInfoView",void 0);c.__decorate([l.property({readOnly:!0})],f.prototype,"updating",null);return f=c.__decorate([G.subclass("esri.views.2d.tiling.TileQueue")],f)})},"esri/views/2d/tiling/TileStrategy":function(){define(["../../../geometry/support/aaBoundingRect","./TileCache","./TileCoverage","./TileKey"],function(p,c,f,l){const w=new l(0,0,0,0),C=new Map,z=[],G=[];return function(){function E(n){this._previousScale=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";
this.resampling=!0;this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=n.acquireTile;this.releaseTile=n.releaseTile;this.tileInfoView=n.tileInfoView;this.resampling=null==n.resampling||!!n.resampling;n.cachePolicy&&(this.cachePolicy=n.cachePolicy);n.coveragePolicy&&(this.coveragePolicy=n.coveragePolicy);null!=n.buffer&&(this.buffer=n.buffer);n.cacheSize&&(this._tileCache=new c(n.cacheSize,this.tileInfoView,g=>{this.releaseTile(g)}))}var y=E.prototype;y.destroy=function(){this.tileIndex.clear()};
y.update=function(n){const {resampling:g,tileIndex:d}=this,e=this.tileInfoView.getTileCoverage(n.state,this.buffer,this.coveragePolicy);G.length=0;z.length=0;C.clear();if(e){var {minScale:b,maxScale:a}=this.tileInfoView.tileInfo,{spans:h,lodInfo:u}=e,{level:r}=u,{scale:q,center:k,resolution:m}=n.state,x=!n.stationary&&q>this._previousScale;this._previousScale=q;this.tiles.length=0;if(!g&&(q>b||q<a))return this.tiles.length=0,C.clear(),d.forEach(M=>{this.releaseTile(M)}),d.clear(),G.length=0,z.length=
0,C.clear(),f.pool.release(e),!0;d.forEach(M=>M.visible=!0);var v=n=0;if(0<h.length)for(const {row:M,colFrom:S,colTo:I}of h)for(let P=S;P<=I;P++){n++;const V=w.set(r,M,u.normalizeCol(P),u.getWorldForColumn(P)).id;if(d.has(V)){var B=d.get(V);B.isReady?(C.set(V,B),v++):x||this._addParentTile(V,C)}else{if(this._tileCache&&this._tileCache.has(V)){if(B=this._tileCache.pop(V),this.tileIndex.set(V,B),B.isReady){C.set(V,B);v++;continue}}else B=this.acquireTile(w),this.tileIndex.set(V,B);x||this._addParentTile(V,
C)}}var L=v===n;d.forEach((M,S)=>{w.set(S);if(!C.has(S)){var I=this.tileInfoView.intersects(e,w),P="purge"===this.cachePolicy?w.level!==r:w.level>r;!I||!x&&L?!P&&I||z.push(S):M.isReady?P&&"purge"===this.cachePolicy&&this._hasReadyAncestor(w,r)?z.push(S):G.push(S):P&&z.push(S)}});for(var N of G)(n=d.get(N))&&n.isReady&&C.set(N,n);for(const M of z)N=d.get(M),this._tileCache?this._tileCache.add(N):this.releaseTile(N),d.delete(M);C.forEach(M=>this.tiles.push(M));d.forEach(M=>{C.has(M.key.id)||(M.visible=
!1)});this._tileCache&&this._tileCache.prune(r,k,m);f.pool.release(e);C.clear();return L}};y.clear=function(n=!0){const {tileIndex:g}=this;n&&g.forEach(d=>{this.releaseTile(d)});g.clear()};y.updateCacheSize=function(n){this._tileCache&&(this._tileCache.maxSize=n)};y._addParentTile=function(n,g){let d=null;for(;;){n=this.tileInfoView.getTileParentId(n);if(!n)break;if(this.tileIndex.has(n)){if((d=this.tileIndex.get(n))&&d.isReady){g.has(d.key.id)||g.set(d.key.id,d);break}}else if(this._tileCache&&this._tileCache.has(n)&&
(d=this._tileCache.pop(n),this.tileIndex.set(n,d),d&&d.isReady)){g.has(d.key.id)||g.set(d.key.id,d);break}}};y._hasReadyAncestor=function(n,g){const d=p.create();this.tileInfoView.getTileBounds(d,n,!0);for(const e of this.tileIndex.values())if(e.isReady&&e.key.level>=g&&e.key.level<n.level){const b=p.create();this.tileInfoView.getTileBounds(b,e.key,!0);if(p.contains(b,d))return!0}return!1};return E}()})},"esri/views/2d/tiling/TileCache":function(){define(["../../../chunks/vec2"],function(p){return function(){function c(l,
w,C){this.maxSize=l;this.tileInfoView=w;this.removedFunc=C;this._tilePerId=new Map;this._tileKeysPerLevel=[]}var f=c.prototype;f.has=function(l){return this._tilePerId.has(l)};f.get=function(l){return this._tilePerId.get(l)};f.pop=function(l){const w=this._tilePerId.get(l);if(!w)return null;const C=this._tileKeysPerLevel[w.key.level];this._tilePerId["delete"](l);for(let z=0;z<C.length;z++)if(C[z].id===l){C.splice(z,1);break}w.visible=!0;return w};f.add=function(l){l.visible=!1;const w=l.key,C=w.id;
this._tilePerId.has(C)||(this._tilePerId.set(C,l),l=w.level,this._tileKeysPerLevel[l]||(this._tileKeysPerLevel[l]=[]),this._tileKeysPerLevel[l].push(w))};f.prune=function(l,w,C){let z=this._tilePerId.size;if(!(z<=this.maxSize)){for(var G=this._tileKeysPerLevel.length-1;z>this.maxSize&&0<=G;)G!==l&&(z=this._pruneAroundCenterTile(z,w,C,G)),G--;z>this.maxSize&&(z=this._pruneAroundCenterTile(z,w,C,l))}};f._pruneAroundCenterTile=function(l,w,C,z){z=this._tileKeysPerLevel[z];if(!z||0===z.length)return l;
const {size:G,origin:E}=this.tileInfoView.tileInfo,y=C*G[0],n=C*G[1],g=[0,0],d=[0,0];for(z.sort((e,b)=>{g[0]=E.x+y*(e.col+.5);g[1]=E.y-n*(e.row+.5);d[0]=E.x+y*(b.col+.5);d[1]=E.y-n*(b.row+.5);return p.squaredDistance(g,w)-p.squaredDistance(d,w)});0<z.length&&(C=z.pop(),this._removeTile(C.id),l--,l!==this.maxSize););return l};f._removeTile=function(l){const w=this._tilePerId.get(l);this.removedFunc&&this.removedFunc(w);this._tilePerId["delete"](l)};return c}()})},"esri/views/2d/layers/features/support/TileStore":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Evented ../../../../../core/has ../../../../../chunks/rbush ./Tile ../../../tiling/TileCoverage ../../../tiling/TileKey".split(" "),
function(p,c,f,l,w,C,z){const G={added:[],removed:[]},E=new Set,y=new z(0,0,0,0);return function(n){function g(e){var b=n.call(this)||this;b._tiles=new Map;b._index=l.rbush(9,f("csp-restrictions")?a=>({minX:a.bounds[0],minY:a.bounds[1],maxX:a.bounds[2],maxY:a.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]);b.tiles=[];b.tileScheme=e;return b}p._inheritsLoose(g,n);var d=g.prototype;d.destroy=function(){this.clear()};d.clear=function(){this.tiles.length=0;this._tiles.clear();this._index.clear()};
d.has=function(e){return this._tiles.has(e)};d.get=function(e){return this._tiles.get(e)};d.boundsIntersections=function(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})};d.updateTiles=function(e){const b={added:[],removed:[]};for(const a of e.added)if(!this.has(a)){const h=new w.Tile(this.tileScheme,a);this._tiles.set(a,h);this._index.insert(h);b.added.push(h)}for(const a of e.removed)this.has(a)&&(e=this.get(a),this._tiles.delete(a),this._index.remove(e),b.removed.push(e));
this.tiles.length=0;this._tiles.forEach(a=>this.tiles.push(a));(b.added.length||b.removed.length)&&this.emit("update",b)};d.setViewState=function(e){if(e=this.tileScheme.getTileCoverage(e,0)){var {spans:b,lodInfo:a}=e,{level:h}=a;if(0<b.length)for(const {row:r,colFrom:q,colTo:k}of b)for(var u=q;u<=k;u++){const m=y.set(h,r,a.normalizeCol(u),a.getWorldForColumn(u)).id;E.add(m);if(!this.has(m)){const x=new w.Tile(this.tileScheme,m);this._tiles.set(m,x);this._index.insert(x);this.tiles.push(x);G.added.push(x)}}for(h=
this.tiles.length-1;0<=h;h--)u=this.tiles[h],E.has(u.id)||(this._tiles.delete(u.id),this.tiles.splice(h,1),this._index.remove(u),G.removed.push(u));(G.added.length||G.removed.length)&&this.emit("update",G);C.pool.release(e);E.clear();G.added.length=0;G.removed.length=0}};return g}(c)})},"esri/chunks/rbush":function(){define(["exports","./quickselect"],function(p,c){function f(b,a){if(!(this instanceof f))return new f(b,a);this._maxEntries=Math.max(4,b||9);this._minEntries=Math.max(2,Math.ceil(.4*
this._maxEntries));a&&("function"===typeof a?this.toBBox=a:this._initFormat(a));this.clear()}function l(b,a){w(b,0,b.children.length,a,b)}function w(b,a,h,u,r){r||(r=d(null));r.minX=Infinity;r.minY=Infinity;r.maxX=-Infinity;r.maxY=-Infinity;for(var q;a<h;a++)q=b.children[a],C(r,b.leaf?u(q):q);return r}function C(b,a){b.minX=Math.min(b.minX,a.minX);b.minY=Math.min(b.minY,a.minY);b.maxX=Math.max(b.maxX,a.maxX);b.maxY=Math.max(b.maxY,a.maxY);return b}function z(b,a){return b.minX-a.minX}function G(b,
a){return b.minY-a.minY}function E(b){return(b.maxX-b.minX)*(b.maxY-b.minY)}function y(b){return b.maxX-b.minX+(b.maxY-b.minY)}function n(b,a){return b.minX<=a.minX&&b.minY<=a.minY&&a.maxX<=b.maxX&&a.maxY<=b.maxY}function g(b,a){return a.minX<=b.maxX&&a.minY<=b.maxY&&a.maxX>=b.minX&&a.maxY>=b.minY}function d(b){return{children:b,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function e(b,a,h,u,r){for(var q=[a,h],k;q.length;)h=q.pop(),a=q.pop(),h-a<=u||(k=a+Math.ceil((h-
a)/u/2)*u,c.quickselect(b,k,a,h,r),q.push(a,k,k,h))}f.prototype={all:function(){return this._all(this.data,[])},search:function(b){var a=this.data,h=[],u=this.toBBox;if(!g(b,a))return h;for(var r=[],q,k,m,x;a;){q=0;for(k=a.children.length;q<k;q++)m=a.children[q],x=a.leaf?u(m):m,g(b,x)&&(a.leaf?h.push(m):n(b,x)?this._all(m,h):r.push(m));a=r.pop()}return h},collides:function(b){var a=this.data,h=this.toBBox;if(!g(b,a))return!1;for(var u=[],r,q,k,m;a;){r=0;for(q=a.children.length;r<q;r++)if(k=a.children[r],
m=a.leaf?h(k):k,g(b,m)){if(a.leaf||n(b,m))return!0;u.push(k)}a=u.pop()}return!1},load:function(b){if(!b||!b.length)return this;if(b.length<this._minEntries){for(var a=0,h=b.length;a<h;a++)this.insert(b[a]);return this}b=this._build(b.slice(),0,b.length-1,0);this.data.children.length?this.data.height===b.height?this._splitRoot(this.data,b):(this.data.height<b.height&&(a=this.data,this.data=b,b=a),this._insert(b,this.data.height-b.height-1,!0)):this.data=b;return this},insert:function(b){b&&this._insert(b,
this.data.height-1);return this},clear:function(){this.data=d([]);return this},remove:function(b,a){if(!b)return this;for(var h=this.data,u=this.toBBox(b),r=[],q=[],k,m,x,v;h||r.length;){h||(h=r.pop(),m=r[r.length-1],k=q.pop(),v=!0);if(h.leaf){a:{x=b;var B=h.children,L=a;if(L){for(var N=0;N<B.length;N++)if(L(x,B[N])){x=N;break a}x=-1}else x=B.indexOf(x)}if(-1!==x){h.children.splice(x,1);r.push(h);this._condense(r);break}}v||h.leaf||!n(h,u)?m?(k++,h=m.children[k],v=!1):h=null:(r.push(h),q.push(k),
k=0,m=h,h=h.children[0])}return this},toBBox:function(b){return b},compareMinX:z,compareMinY:G,toJSON:function(){return this.data},fromJSON:function(b){this.data=b;return this},_all:function(b,a){for(var h=[];b;)b.leaf?a.push.apply(a,b.children):h.push.apply(h,b.children),b=h.pop();return a},_build:function(b,a,h,u){var r=h-a+1,q=this._maxEntries;if(r<=q){var k=d(b.slice(a,h+1));l(k,this.toBBox);return k}u||(u=Math.ceil(Math.log(r)/Math.log(q)),q=Math.ceil(r/Math.pow(q,u-1)));k=d([]);k.leaf=!1;k.height=
u;r=Math.ceil(r/q);q=r*Math.ceil(Math.sqrt(q));var m;for(e(b,a,h,q,this.compareMinX);a<=h;a+=q){var x=Math.min(a+q-1,h);e(b,a,x,r,this.compareMinY);for(m=a;m<=x;m+=r){var v=Math.min(m+r-1,x);k.children.push(this._build(b,m,v,u-1))}}l(k,this.toBBox);return k},_chooseSubtree:function(b,a,h,u){for(var r,q,k,m,x,v,B,L;;){u.push(a);if(a.leaf||u.length-1===h)break;B=L=Infinity;r=0;for(q=a.children.length;r<q;r++)k=a.children[r],x=E(k),v=(Math.max(k.maxX,b.maxX)-Math.min(k.minX,b.minX))*(Math.max(k.maxY,
b.maxY)-Math.min(k.minY,b.minY))-x,v<L?(L=v,B=x<B?x:B,m=k):v===L&&x<B&&(B=x,m=k);a=m||a.children[0]}return a},_insert:function(b,a,h){var u=this.toBBox;h=h?b:u(b);u=[];var r=this._chooseSubtree(h,this.data,a,u);r.children.push(b);for(C(r,h);0<=a;)if(u[a].children.length>this._maxEntries)this._split(u,a),a--;else break;this._adjustParentBBoxes(h,u,a)},_split:function(b,a){var h=b[a],u=h.children.length,r=this._minEntries;this._chooseSplitAxis(h,r,u);u=this._chooseSplitIndex(h,r,u);u=d(h.children.splice(u,
h.children.length-u));u.height=h.height;u.leaf=h.leaf;l(h,this.toBBox);l(u,this.toBBox);a?b[a-1].children.push(u):this._splitRoot(h,u)},_splitRoot:function(b,a){this.data=d([b,a]);this.data.height=b.height+1;this.data.leaf=!1;l(this.data,this.toBBox)},_chooseSplitIndex:function(b,a,h){var u,r;var q=r=Infinity;for(u=a;u<=h-a;u++){var k=w(b,0,u,this.toBBox);var m=w(b,u,h,this.toBBox);var x=Math.max(0,Math.min(k.maxX,m.maxX)-Math.max(k.minX,m.minX))*Math.max(0,Math.min(k.maxY,m.maxY)-Math.max(k.minY,
m.minY));k=E(k)+E(m);if(x<q){q=x;var v=u;r=k<r?k:r}else x===q&&k<r&&(r=k,v=u)}return v},_chooseSplitAxis:function(b,a,h){var u=b.leaf?this.compareMinX:z,r=b.leaf?this.compareMinY:G,q=this._allDistMargin(b,a,h,u);a=this._allDistMargin(b,a,h,r);q<a&&b.children.sort(u)},_allDistMargin:function(b,a,h,u){b.children.sort(u);u=this.toBBox;var r=w(b,0,a,u),q=w(b,h-a,h,u),k=y(r)+y(q),m;for(m=a;m<h-a;m++){var x=b.children[m];C(r,b.leaf?u(x):x);k+=y(r)}for(m=h-a-1;m>=a;m--)x=b.children[m],C(q,b.leaf?u(x):x),
k+=y(q);return k},_adjustParentBBoxes:function(b,a,h){for(;0<=h;h--)C(a[h],b)},_condense:function(b){for(var a=b.length-1,h;0<=a;a--)0===b[a].children.length?0<a?(h=b[a-1].children,h.splice(h.indexOf(b[a]),1)):this.clear():l(b[a],this.toBBox)},_initFormat:function(b){var a=["return a"," - b",";"];this.compareMinX=new Function("a","b",a.join(b[0]));this.compareMinY=new Function("a","b",a.join(b[1]));this.toBBox=new Function("a","return {minX: a"+b[0]+", minY: a"+b[1]+", maxX: a"+b[2]+", maxY: a"+b[3]+
"};")}};p.rbush=f})},"esri/chunks/quickselect":function(){define(["exports"],function(p){var c={exports:{}};(function(f){(function(l){l=l();void 0!==l&&(f.exports=l)})(function(){function l(z,G,E,y,n){for(;y>E;){if(600<y-E){var g=y-E+1,d=G-E+1,e=Math.log(g),b=.5*Math.exp(2*e/3);e=.5*Math.sqrt(e*b*(g-b)/g)*(0>d-g/2?-1:1);l(z,G,Math.max(E,Math.floor(G-d*b/g+e)),Math.min(y,Math.floor(G+(g-d)*b/g+e)),n)}g=z[G];d=E;b=y;w(z,E,G);for(0<n(z[y],g)&&w(z,E,y);d<b;){w(z,d,b);d++;for(b--;0>n(z[d],g);)d++;for(;0<
n(z[b],g);)b--}0===n(z[E],g)?w(z,E,b):(b++,w(z,b,y));b<=G&&(E=b+1);G<=b&&(y=b-1)}}function w(z,G,E){var y=z[G];z[G]=z[E];z[E]=y}function C(z,G){return z<G?-1:z>G?1:0}return function(z,G,E,y,n){l(z,G,E||0,y||z.length-1,n||C)}})})(c);p.quickselect=c.exports})},"esri/views/2d/layers/features/support/Tile":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/ArrayPool ../../../../../geometry/Extent ../../../../../geometry/support/aaBoundingRect ../../../../../rest/support/QuantizationParameters ../../../tiling/TileKey".split(" "),
function(p,c,f,l,w,C,z){let G=function(){function E(n,g){this.key=new z(0,0,0,0);this.bounds=w.create();this.objectIds=new Set;this.key.set(g);g=n.getLODInfoAt(this.key);this.tileInfoView=n;this.tileInfoView.getTileBounds(this.bounds,this.key,!0);this.resolution=g.resolution;this.scale=g.scale;this.level=g.level}var y=E.prototype;y.createChildTiles=function(){const n=this.key.getChildKeys(),g=f.acquire();for(let d=0;d<n.length;d++)g[d]=new E(this.tileInfoView,n[d]);return g};y.getQuantizationParameters=
function(){return C.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})};c._createClass(E,[{key:"id",get:function(){return this.key.id}},{key:"extent",get:function(){return l.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}},{key:"transform",get:function(){return{originPosition:"upperLeft",scale:[this.resolution,
this.resolution],translate:[this.bounds[0],this.bounds[3]]}}}]);return E}();p.Tile=G;p["default"]=G;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/support/Timeline":function(){define(["exports"],function(p){let c=function(){function f(){this._names=new Map}var l=f.prototype;l.begin=function(w){this._names.has(w)||(this._names.set(w,!1),-1!==w.indexOf("Brush")&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${w}.Start`))};l.end=function(w){this._names.has(w)&&!this._names.get(w)&&
(this._names.set(w,!0),performance.mark(`Esri.${w}.End`))};l.record=function(w){this._names.has(w)||(this._names.set(w,!0),performance.mark(`Esri.${w}`))};return f}();p.Timeline=c;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/input/MapViewInputManager":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Handles ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ./handlers/DoubleClickZoom ./handlers/DoubleTapDragZoom ./handlers/DragPan ./handlers/DragRotate ./handlers/GamepadNavigation ./handlers/KeyPan ./handlers/KeyRotate ./handlers/KeyZoom ./handlers/MouseWheelZoom ./handlers/PinchAction ../../input/BrowserEventSource ../../input/InputManager ../../input/handlers/PreventContextMenu ../../input/recognizers/DoubleTapDrag ../../input/recognizers/Drag ../../input/recognizers/ImmediateDoubleClick ../../input/recognizers/PointerClickHoldAndDrag ../../input/recognizers/SingleAndDoubleClick".split(" "),
function(p,c,f,l,w,C,z,G,E,y,n,g,d,e,b,a,h,u,r,q,k,m,x,v,B,L,N,M){var S={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},I={zoomIn:["\x3d","+"],zoomOut:["-","_"]},P={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};f=function(V){function ca(){var t=V.apply(this,arguments)||this;t._handles=new l;return t}p._inheritsLoose(ca,V);var A=ca.prototype;A.initialize=function(){this._handles.add([w.whenNot(this.view,
"ready",()=>this._disconnect()),w.when(this.view,"ready",()=>this._connect())])};A.destroy=function(){this._handles&&(this._handles.removeAll(),this._handles=null);this._disconnect()};A._disconnect=function(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)};A._connect=function(){const t=new k.BrowserEventSource(this.view.surface,this.view.input);var F=[new L.ImmediateDoubleClick,new N.PointerClickHoldAndDrag,
new M.SingleAndDoubleClick,new B.Drag(this.view.navigation),new v.DoubleTapDrag];F=new m.InputManager({eventSource:t,recognizers:F});F.installHandlers("prevent-context-menu",[new x.PreventContextMenu],m.ViewEventPriorities.INTERNAL);F.installHandlers("navigation",[new q.PinchRotateAndZoom(this.view),new b.GamepadNavigation(this.view),new r.MouseWheelZoom(this.view),new n.DoubleClickZoom(this.view),new n.DoubleClickZoom(this.view,["Ctrl"]),new d.DragPan(this.view,"primary"),new a.KeyPan(this.view,
S),new u.KeyZoom(this.view,I),new h.KeyRotate(this.view,P),new e.DragRotate(this.view,"secondary"),new g.DoubleTapDragZoom(this.view,"touch")],m.ViewEventPriorities.INTERNAL);this.view.viewEvents.connect(F);this._source=t;this._inputManager=F;w.init(this.view.navigation,"browserTouchPanEnabled",D=>{this._source.browserTouchPanningEnabled=!D})};p._createClass(ca,[{key:"test",get:function(){return{inputManager:this._inputManager}}}]);return ca}(f);c.__decorate([C.property()],f.prototype,"view",void 0);
return f=c.__decorate([y.subclass("esri.views.2d.input.MapViewInputManager")],f)})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler","../../../input/handlers/support"],function(p,c,f,l){f=function(w){function C(z,G){var E=w.call(this,!0)||this;E.view=z;E.registerIncoming("double-click",G,y=>E._handleDoubleClick(y,G));return E}c._inheritsLoose(C,w);C.prototype._handleDoubleClick=function(z,G){l.eventMatchesPointerAction(z.data,
"primary")&&(z.stopPropagation(),G?this.view.mapViewNavigation.zoomOut([z.data.x,z.data.y]):this.view.mapViewNavigation.zoomIn([z.data.x,z.data.y]))};return C}(f.InputHandler);p.DoubleClickZoom=f;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/input/handlers/support":function(){define(["exports"],function(p){p.eventMatchesMousePointerAction=function(c,f){if("touch"===c.pointerType)return!1;switch(f){case "primary":return 0===c.button;case "secondary":return 2===c.button;case "tertiary":return 1===
c.button}};p.eventMatchesPointerAction=function(c,f){switch(f){case "primary":return"touch"===c.pointerType||0===c.button;case "secondary":return"touch"!==c.pointerType&&2===c.button;case "tertiary":return"touch"!==c.pointerType&&1===c.button}};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/DoubleTapDragZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/has","../../../input/InputHandler"],function(p,c,f,l){f=function(w){function C(z,
G,E){var y=w.call(this,!0)||this;y.view=z;y.pointerType=G;y.registerIncoming("double-tap-drag",E,n=>y._handleDoubleTapDrag(n));return y}c._inheritsLoose(C,w);C.prototype._handleDoubleTapDrag=function(z){var {data:G}=z,{pointerType:E}=G;if(E===this.pointerType){z.stopPropagation();var {action:y,delta:n}=G;({view:G}=this);({mapViewNavigation:z}=G);switch(y){case "begin":({scale:G}=G);this._currentScale=this._startScale=G;this._previousDelta=n;z.begin();break;case "update":if(this._previousDelta.y===
n.y)break;this._previousDelta=n;G=this._startScale*1.015**n.y;z.setViewpointImmediate(G/this._currentScale);this._currentScale=G;break;case "end":{({constraints:E}=G);const {effectiveLODs:g,snapToZoom:d}=E;d&&g?(G=E.snapScale(this._currentScale),G=(0<n.y?Math.max(G,E.snapToPreviousScale(this._startScale)):Math.min(G,E.snapToNextScale(this._startScale)))/this._currentScale,z.zoom(G)):z.end()}}}};return C}(l.InputHandler);p.DoubleTapDragZoom=f;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/DragPan":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","../../../input/DragEventSeparator","../../../input/InputHandler","../../../input/handlers/support"],function(p,c,f,l,w){l=function(C){function z(E,y,n){var g=C.call(this,!0)||this;g.view=E;g.pointerAction=y;g.registerIncoming("drag",n,e=>g._handleDrag(e));g.registerIncoming("pointer-down",()=>g.stopMomentumNavigation());const d=g.view.mapViewNavigation;g.dragEventSeparator=new f.DragEventSeparator({start:(e,b)=>{d.pan.begin(g.view,b.data);b.stopPropagation()},
update:(e,b)=>{d.pan.update(g.view,b.data);b.stopPropagation()},end:(e,b)=>{d.pan.end(g.view,b.data);b.stopPropagation()},condition:(e,b)=>1===e&&w.eventMatchesPointerAction(b.data,g.pointerAction)});return g}c._inheritsLoose(z,C);var G=z.prototype;G._handleDrag=function(E){const y=this.view.mapViewNavigation;y.pinch.zoomMomentum||y.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(E)};G.stopMomentumNavigation=function(){this.view.mapViewNavigation.pan.stopMomentumNavigation()};
return z}(l.InputHandler);p.DragPan=l;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/input/DragEventSeparator":function(){define(["exports"],function(p){let c=function(){function f(w){this.callbacks=w;this.currentCount=0;this.callbacks.condition||(this.callbacks.condition=()=>!0)}var l=f.prototype;l.handle=function(w){const C=w.data,z=C.pointers.size;switch(C.action){case "start":this.currentCount=z;this.emitStart(w);break;case "added":this.emitEnd(this.previousEvent);this.currentCount=
z;this.emitStart(w);break;case "update":this.emitUpdate(w);break;case "removed":this.startEvent&&this.emitEnd(this.previousEvent);this.currentCount=z;this.emitStart(w);break;case "end":this.emitEnd(w),this.currentCount=0}this.previousEvent=w};l.emitStart=function(w){this.startEvent=w;this.callbacks.condition(this.currentCount,w)&&this.callbacks.start(this.currentCount,w,this.startEvent)};l.emitUpdate=function(w){this.callbacks.condition(this.currentCount,w)&&this.callbacks.update(this.currentCount,
w,this.startEvent)};l.emitEnd=function(w){this.callbacks.condition(this.currentCount,w)&&this.callbacks.end(this.currentCount,w,this.startEvent);this.startEvent=null};return f}();p.DragEventSeparator=c;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/DragRotate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/DragEventSeparator","../../../input/InputHandler","../../../input/handlers/support"],function(p,c,f,l,w){l=function(C){function z(G,
E,y){var n=C.call(this,!0)||this;n.view=G;n.pointerAction=E;const g=n.view.mapViewNavigation;n.dragEventSeparator=new f.DragEventSeparator({start:(d,e)=>{g.rotate.begin(n.view,e.data);e.stopPropagation()},update:(d,e)=>{g.rotate.update(n.view,e.data);e.stopPropagation()},end:(d,e)=>{g.rotate.end();e.stopPropagation()},condition:(d,e)=>1===d&&w.eventMatchesPointerAction(e.data,n.pointerAction)});n.registerIncoming("drag",y,d=>n.dragEventSeparator.handle(d));return n}c._inheritsLoose(z,C);return z}(l.InputHandler);
p.DragRotate=l;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/GamepadNavigation":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Handles ../../../../core/scheduling ../../../../core/watchUtils ../../viewpointUtils ../../../input/InputHandler ../../../navigation/gamepadAndKeyboardUtils".split(" "),function(p,c,f,l,w,C,z,G){z=function(E){function y(g){var d=E.call(this,!0)||this;d.view=g;d.frameTask=null;d.watchHandles=new f;
d.currentDevice=null;d.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0};d.handle=d.registerIncoming("gamepad",e=>d.handleEvent(e));d.handle.pause();return d}c._inheritsLoose(y,E);var n=y.prototype;n.onInstall=function(g){E.prototype.onInstall.call(this,g);this.watchHandles.add([w.init(this.view.navigation.gamepad,"enabled",d=>{d?(this.handle.resume(),this.frameTask||(this.frameTask=l.addFrameTask({update:e=>this.frameUpdate(e.deltaTime)}))):(this.handle.pause(),this.frameTask&&(this.frameTask.remove(),
this.frameTask=null))})])};n.onUninstall=function(){this.watchHandles.removeAll();this.frameTask&&(this.frameTask.remove(),this.frameTask=null);E.prototype.onUninstall.call(this)};n.handleEvent=function(g){const d=this.view.navigation.gamepad.device;d&&g.data.device!==d||this.currentDevice&&this.currentDevice!==g.data.device||("end"===g.data.action?(this.currentDevice=null,G.resetTransformation(this.transformation)):(this.currentDevice=g.data.device,G.extractTransformation(g.data,this.view.navigation.gamepad,
this.transformation)))};n.frameUpdate=function(g){const d=this.transformation;if(!G.isZeroTransformation(d)){var e=this.view.viewpoint.clone(),b=.7*this.view.navigation.gamepad.velocityFactor*g;C.translateBy(e,e,[d.translation[0]*b,-d.translation[1]*b]);b=this.view.size;C.scaleAndRotateBy(e,e,1+6E-4*d.translation[2]*g,this.view.constraints.rotationEnabled?.06*-d.heading*g:0,[b[0]/2,b[1]],b);g=this.view.constraints.constrain(e,this.view.viewpoint);this.view.viewpoint=g}};return y}(z.InputHandler);
p.GamepadNavigation=z;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/navigation/gamepadAndKeyboardUtils":function(){define(["exports","../../chunks/vec3"],function(p,c){function f(l){let w=l*l;0>l&&(w*=-1);return w}p.extractTransformation=function(l,w,C){const z=l.state;l=l.device;w="forward-down"===w.tiltDirection?1:-1;"standard"===l.deviceType?(C.translation[0]=f(z.axes[0]),C.translation[1]=f(z.axes[1]),C.translation[2]=f(z.buttons[7])-f(z.buttons[6]),C.heading=f(z.axes[2]),C.tilt=
f(z.axes[3])):"spacemouse"===l.deviceType&&(C.translation[0]=1.2*f(z.axes[0]),C.translation[1]=1.2*f(z.axes[1]),C.translation[2]=2*-f(z.axes[2]),C.heading=1.2*f(z.axes[5]),C.tilt=1.2*f(z.axes[3]));C.tilt*=w;c.scale(C.translation,C.translation,1);return C};p.extractTransformationKeyboard=function(l,w){w.translation[0]=l[1]-l[0];w.translation[1]=l[3]-l[2];w.translation[2]=l[4]-l[5];w.heading=l[7]-l[6];w.tilt=l[8]-l[9];w.zoom=l[10]-l[11];return w};p.isZeroTransformation=function(l){return 0===l.translation[0]&&
0===l.translation[1]&&0===l.translation[2]&&0===l.heading&&0===l.tilt&&0===l.zoom};p.quadraticAccentuation=f;p.resetTransformation=function(l){l.translation[0]=0;l.translation[1]=0;l.translation[2]=0;l.heading=0;l.tilt=0;return l};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/KeyPan":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler"],function(p,c,f){f=function(l){function w(z,G,E){var y=l.call(this,!0)||this;
y.view=z;y.keys=G;y._pressed=!1;y._keyMap={[G.left]:"left",[G.right]:"right",[G.up]:"up",[G.down]:"down"};y.registerIncoming("key-down",E,n=>y._handleKeyDown(n));y.registerIncoming("key-up",E,n=>y._handleKeyUp(n));y.registerIncoming("blur",E,()=>y._handleBlur());return y}c._inheritsLoose(w,l);var C=w.prototype;C._handleKeyDown=function(z){z.data.repeat||this._handleKey(z,!0)};C._handleKeyUp=function(z){this._handleKey(z,!1)};C._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};
C._handleKey=function(z,G){const E=this._keyMap[z.data.key];if(this._pressed=null!=E){if(G)switch(this.view.mapViewNavigation.begin(),E){case "left":this.view.mapViewNavigation.continousPanLeft();break;case "right":this.view.mapViewNavigation.continousPanRight();break;case "up":this.view.mapViewNavigation.continousPanUp();break;case "down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();z.stopPropagation()}};return w}(f.InputHandler);p.KeyPan=
f;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler"],function(p,c,f){f=function(l){function w(z,G,E){var y=l.call(this,!0)||this;y.view=z;y.keys=G;y._pressed=!1;y._keyToDirection={[G.clockwiseOption1]:"clockwise",[G.clockwiseOption2]:"clockwise",[G.counterClockwiseOption1]:"counterClockwise",[G.counterClockwiseOption2]:"counterClockwise",[G.resetOption1]:"reset",
[G.resetOption2]:"reset"};y.registerIncoming("key-down",E,n=>y._handleKeyDown(n));y.registerIncoming("key-up",E,n=>y._handleKeyUp(n));y.registerIncoming("blur",E,()=>y._handleBlur());return y}c._inheritsLoose(w,l);var C=w.prototype;C._handleKeyDown=function(z){z.data.repeat||this._handleKey(z,!0)};C._handleKeyUp=function(z){this._handleKey(z,!1)};C._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};C._handleKey=function(z,G){var E=z.modifiers;if(!(0<E.size&&
!E.has("Shift")||!this.view.constraints.rotationEnabled)&&(E=this._keyToDirection[z.data.key],this._pressed=null!=E)){if(G)switch(this.view.mapViewNavigation.begin(),E){case "clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case "counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case "reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();z.stopPropagation()}};return w}(f.InputHandler);
p.KeyRotate=f;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/has","../../../input/InputHandler"],function(p,c,f,l){f=function(w){function C(G,E,y){var n=w.call(this,!0)||this;n.view=G;n.keys=E;n._keysToZoomAction={};n.registerIncoming("key-down",y,g=>n._handleKeyDown(g));E.zoomIn.forEach(g=>n._keysToZoomAction[g]=0);E.zoomOut.forEach(g=>n._keysToZoomAction[g]=1);
return n}c._inheritsLoose(C,w);var z=C.prototype;z._handleKeyDown=function(G){this._handleKey(G)};z._handleKey=function(G){var E=G.modifiers;if(!(0<E.size)||E.has("Shift"))if({key:E}=G.data,E in this._keysToZoomAction){E=this._keysToZoomAction[E];var {mapViewNavigation:y}=this.view,n=null;switch(E){case 0:n=y.zoomIn();break;case 1:n=y.zoomOut();break;default:return}y.begin();n.then(()=>y.end());G.stopPropagation()}};return C}(l.InputHandler);p.KeyZoom=f;Object.defineProperty(p,"__esModule",{value:!0})})},
"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler"],function(p,c,f){f=function(l){function w(C,z){var G=l.call(this,!0)||this;G.view=C;G._canZoom=!0;G.registerIncoming("mouse-wheel",z,E=>G._handleMouseWheel(E));return G}c._inheritsLoose(w,l);w.prototype._handleMouseWheel=function(C){if(this.view.navigation.mouseWheelZoomEnabled&&(C.preventDefault(),C.stopPropagation(),this._canZoom)){var z=this.view.mapViewNavigation,
{x:G,y:E,deltaY:y}=C.data;if(C=z.zoom(1/.6**(1/60*y),[G,E]))this._canZoom=!1,C.catch(()=>{}).then(()=>{this._canZoom=!0;z.end()})}};return w}(f.InputHandler);p.MouseWheelZoom=f;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/PinchAction":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/DragEventSeparator","../../../input/InputHandler"],function(p,c,f,l){l=function(w){function C(G){var E=w.call(this,!0)||this;E.view=G;E.registerIncoming("drag",
n=>E._handleDrag(n));E.registerIncoming("pointer-down",()=>E.stopMomentumNavigation());const y=E.view.mapViewNavigation;E.dragEventSeparator=new f.DragEventSeparator({start:(n,g)=>{y.pinch.begin(E.view,g.data);g.stopPropagation()},update:(n,g)=>{y.pinch.update(E.view,g.data);g.stopPropagation()},end:(n,g)=>{y.pinch.end(E.view);g.stopPropagation()},condition:n=>2<=n});return E}c._inheritsLoose(C,w);var z=C.prototype;z._handleDrag=function(G){this.dragEventSeparator.handle(G)};z.stopMomentumNavigation=
function(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()};return C}(l.InputHandler);p.PinchRotateAndZoom=l;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/input/BrowserEventSource":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ./keys ./gamepad/GamepadSource ../support/screenUtils".split(" "),function(p,c,f,l,w,C){const z=f("trident"),G=f("edge"),E=f("chrome"),y=f("ff"),n=f("safari");f=function(){function d(b,a){this.input=a;this._active=
{};this._activePointerCaptures=new Set;this._keyDownState=new Set;this._eventId=1;this._browserTouchPanningEnabled=!1;this._element=b;b.getAttribute("tabindex")||b.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,
"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost};this._updateTouchAction();this._element.addEventListener("keydown",this._preventAltKeyDefault);this._gamepadSource=new w.GamepadSource(b,this.input);this._gamepadSource.onEvent=h=>this._callback("gamepad",h)}var e=d.prototype;e.destroy=function(){this.activeEvents=this._callback=null;this._activePointerCaptures.forEach(b=>{this._releasePointerCaptureSafe(b)});this._gamepadSource&&(this._gamepadSource.destroy(),
this._gamepadSource=null);this._activePointerCaptures=null;this._removeTouchAction();this._element.removeEventListener("keydown",this._preventAltKeyDefault)};e.setPointerCapture=function(b,a){a?(this._element.setPointerCapture(b.pointerId),this._activePointerCaptures.add(b.pointerId)):(this._releasePointerCaptureSafe(b.pointerId),this._activePointerCaptures.delete(b.pointerId))};e._updateTouchAction=function(){this._element.classList.remove(this._browserTouchPanningEnabled?"esri-view-surface--touch-none":
"esri-view-surface--touch-pan");this._element.classList.add(this._browserTouchPanningEnabled?"esri-view-surface--touch-pan":"esri-view-surface--touch-none")};e._updateTouchEventHandling=function(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};e._removeTouchAction=function(){this._element.classList.remove("esri-view-surface--touch-none");this._element.classList.remove("esri-view-surface--touch-pan");
this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};e._releasePointerCaptureSafe=function(b){try{this._element.hasPointerCapture&&!this._element.hasPointerCapture(b)||this._element.releasePointerCapture(b)}catch(a){}};e._updateNormalizedPointerLikeEvent=function(b,a){b=C.createScreenPointFromNativeEvent(this._element,b);d.test.disableSubpixelCoordinates&&(b.x=Math.round(b.x),b.y=Math.round(b.y));a.x=b.x;a.y=b.y;return a};e._handleKey=function(b,a){const h=l.eventKey(a);
h&&"key-up"===b&&this._keyDownState.delete(h);a={native:a,key:h,repeat:h&&this._keyDownState.has(h)};h&&"key-down"===b&&this._keyDownState.add(a.key);this._callback(b,a)};e._handlePointer=function(b,a){a=this._updateNormalizedPointerLikeEvent(a,{native:a,x:0,y:0,pointerType:a.pointerType,button:a.button,buttons:a.buttons,eventId:this._eventId++});this._callback(b,a)};e._handlePointerPreventDefault=function(b,a){const h=this._updateNormalizedPointerLikeEvent(a,{native:a,x:0,y:0,pointerType:a.pointerType,
button:a.button,buttons:a.buttons,eventId:this._eventId++});a.preventDefault();this._callback(b,h)};e._handleMouseWheel=function(b,a){let h=a.deltaY;switch(a.deltaMode){case 0:if(z||G)h=h/document.documentElement.clientHeight*600;break;case 1:h*=30;break;case 2:h*=900}z||G?h*=.7:E||n?h*=.6:y&&(h*=1.375);const u=Math.abs(h);100<u&&(h=h/u*200/(1+Math.exp(-.02*(u-100))));a=this._updateNormalizedPointerLikeEvent(a,{native:a,x:0,y:0,deltaY:h});this._callback(b,a)};e._handlePointerCaptureLost=function(b,
a){this._activePointerCaptures.delete(a.pointerId);this._handleDefault(b,a)};e._handleDefault=function(b,a){const h={native:a};a.preventDefault();this._callback(b,h)};e._preventAltKeyDefault=function(b){"Alt"===b.key&&b.preventDefault()};e._preventMultiTouchPanning=function(b){1<b.touches.length&&b.preventDefault()};c._createClass(d,[{key:"browserTouchPanningEnabled",get:function(){return this._browserTouchPanningEnabled},set:function(b){this._browserTouchPanningEnabled=b;this._updateTouchAction();
this._updateTouchEventHandling()}},{key:"onEventReceived",set:function(b){this._callback=b}},{key:"activeEvents",set:function(b){for(const a in this._active)b&&b.has(a)||(this._element.removeEventListener(g[a],this._active[a]),delete this._active[a]);b&&b.forEach(a=>{if(!this._active[a]&&g[a]){const h=(this._eventHandlers[a]||this._handleDefault).bind(this,a);this._element.addEventListener(g[a],h);this._active[a]=h}});this._gamepadSource.hasEventListeners=b&&b.has("gamepad")}}]);return d}();f.test=
{disableSubpixelCoordinates:!1};const g={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};p.BrowserEventSource=f;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/input/gamepad/GamepadSource":function(){define(["exports",
"../../../chunks/_rollupPluginBabelHelpers","../../../core/scheduling","./GamepadInputDevice","./GamepadState"],function(p,c,f,l,w){let C=function(){function z(E,y){this.element=E;this.input=y;this._hasEventListeners=!1;this.onConnectGamepad=n=>{this.connectGamepad(n.gamepad)};this.onDisconnectGamepad=n=>{n=n.gamepad;const g=n.index,d=this.inputDevices[g];d&&(this.emitGamepadEvent(n,w.extractState(d),!1),this.inputDevices.splice(g,1),this.latestUpdate.splice(g,1),this.input.gamepad.devices.remove(d),
this.ensurePollingState())};this.frameTask=null;this.latestUpdate=[];this.inputDevices=[];this.callback=null;E=window.isSecureContext;if(this.supported="getGamepads"in window.navigator&&E)this.forEachGamepad(n=>this.connectGamepad(n)),window.addEventListener("gamepadconnected",this.onConnectGamepad),window.addEventListener("gamepaddisconnected",this.onDisconnectGamepad),this.ensurePollingState()}var G=z.prototype;G.destroy=function(){this.hasEventListeners=!1;this.supported&&(window.removeEventListener("gamepadconnected",
this.onConnectGamepad),window.removeEventListener("gamepaddisconnected",this.onDisconnectGamepad))};G.connectGamepad=function(E){const y=new l(E);"unknown"!==y.deviceType&&(this.inputDevices[E.index]=y,this.input.gamepad.devices.add(y));this.ensurePollingState()};G.ensurePollingState=function(){this.eventsEnabled?this.startPolling():this.stopPolling()};G.startPolling=function(){null==this.frameTask&&(this.frameTask=f.addFrameTask({update:()=>this.readGamepadState()}))};G.stopPolling=function(){null!=
this.frameTask&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=[])};G.readGamepadState=function(){const E=document.hasFocus(),y=this.element.contains(document.activeElement),n="document"===this.input.gamepad.enabledFocusMode&&!E||"view"===this.input.gamepad.enabledFocusMode&&!y;this.forEachGamepad(g=>{var d=this.inputDevices[g.index];if(d){var e=this.latestUpdate[g.index];d=w.extractState(d);var b=n||w.stateIdle(d);e&&(e.timestamp===g.timestamp||!e.active&&b||w.stateEqual(e.state,
d))||this.emitGamepadEvent(g,d,!b)}})};G.forEachGamepad=function(E){const y=window.navigator.getGamepads();for(let n=0;n<y.length;n++){const g=y[n];this.validate(g)&&E(g)}};G.emitGamepadEvent=function(E,y,n){var g=this.latestUpdate[E.index];if((g=g&&g.active)||n)this.latestUpdate[E.index]={timestamp:E.timestamp,state:y,active:n},this.callback&&this.callback({device:this.inputDevices[E.index],state:y,action:!g&&n?"start":g&&n?"update":"end"})};G.validate=function(E){if(!E||!E.connected)return!1;for(let y=
0;y<E.axes.length;y++)if(isNaN(E.axes[y]))return!1;return!0};c._createClass(z,[{key:"hasEventListeners",set:function(E){this._hasEventListeners!==E&&(this._hasEventListeners=E,this.ensurePollingState())}},{key:"eventsEnabled",get:function(){return this.supported&&0<this.inputDevices.length&&this._hasEventListeners}},{key:"onEvent",set:function(E){this.callback=E}}]);return z}();p.GamepadSource=C;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/input/gamepad/GamepadState":function(){define(["exports",
"../../../core/mathUtils"],function(p,c){p.extractState=function(f){const l=f.native;return l?{buttons:l.buttons.map(w=>w.pressed?w.value?w.value:1:0),axes:l.axes.map(w=>{{var C=f.axisThreshold;const z=Math.abs(w);w=z<C?0:c.sign(w)*(z-C)/(1-C)}return w})}:{buttons:[],axes:[]}};p.stateEqual=function(f,l){if(f.axes.length!==l.axes.length||f.buttons.length!==l.buttons.length)return!1;for(var w=0;w<f.axes.length;w++)if(f.axes[w]!==l.axes[w])return!1;for(w=0;w<f.buttons.length;w++)if(f.buttons[w]!==l.buttons[w])return!1;
return!0};p.stateIdle=function(f){for(var l=0;l<f.axes.length;l++)if(0!==f.axes[l])return!1;for(l=0;l<f.buttons.length;l++)if(0!==f.buttons[l])return!1;return!0};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/input/handlers/PreventContextMenu":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../InputHandler"],function(p,c,f){f=function(l){function w(){var C=l.call(this,!0)||this;C.registerIncoming("context-menu",z=>{z.data.native.preventDefault()});return C}
c._inheritsLoose(w,l);return w}(f.InputHandler);p.PreventContextMenu=f;p["default"]=f;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/input/recognizers/DoubleTapDrag":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../../../core/MapUtils ../../../core/screenUtils ../DragEventSeparator ../InputHandler ./SingleAndDoubleClick ./support".split(" "),function(p,c,f,l,w,C,z,G,E){z=function(y){function n(d=G.DefaultParameters.maximumDoubleClickDelay,
e=G.DefaultParameters.maximumDoubleClickDistance,b=G.DefaultParameters.maximumDoubleTouchDelay,a=G.DefaultParameters.maximumDoubleTouchDistance,h=f["default"]){var u=y.call(this,!1)||this;u.maximumDoubleClickDelay=d;u.maximumDoubleClickDistance=e;u.maximumDoubleTouchDelay=b;u.maximumDoubleTouchDistance=a;u._clock=h;u._doubleTapDragReady=!1;u._doubleTapDragActive=!1;u._dragStartCenter=w.createScreenPoint(0,0);u._pointerState=new Map;u._doubleTapDrag=u.registerOutgoing("double-tap-drag");u._dragEventSeparator=
new C.DragEventSeparator({start:(r,q)=>u._dragStart(r,q),update:(r,q)=>u._dragUpdate(q),end:(r,q)=>u._dragEnd(q)});u.registerIncoming("drag",r=>u._dragEventSeparator.handle(r));u.registerIncoming("pointer-down",r=>u._handlePointerDown(r));u.registerIncoming("pointer-up",()=>u._handlePointerUp());return u}c._inheritsLoose(n,y);var g=n.prototype;g.onUninstall=function(){this._pointerState.forEach(d=>{null!=d.doubleTapTimeout&&(d.doubleTapTimeout.remove(),d.doubleTapTimeout=null)})};g._clearPointerDown=
function(d){const e=this._pointerState.get(d);e&&(e.doubleTapTimeout.remove(),e.doubleTapTimeout=null,this._pointerState.delete(d),this.refreshHasPendingInputs())};g._createDoubleTapDragData=function(d,e,b){const {button:a,buttons:h,pointer:u,pointers:r,pointerType:q,timestamp:k}=b;return{action:d,delta:e,button:a,buttons:h,pointer:u,pointers:r,pointerType:q,timestamp:k}};g._dragStart=function(d,e){if(this._doubleTapDragReady&&1===d){this._doubleTapDragReady=!1;this._doubleTapDragActive=!0;var {data:b,
modifiers:a}=e;({center:d}=b);this._dragStartCenter=d;d=this._createDoubleTapDragData("begin",w.createScreenPoint(0,0),b);this._doubleTapDrag.emit(d,void 0,a);e.stopPropagation()}};g._dragUpdate=function(d){if(this._doubleTapDragActive){var {data:e,modifiers:b}=d,{center:a}=e;a=w.createScreenPoint(a.x-this._dragStartCenter.x,a.y-this._dragStartCenter.y);a=this._createDoubleTapDragData("update",a,e);this._doubleTapDrag.emit(a,void 0,b);d.stopPropagation()}};g._dragEnd=function(d){if(this._doubleTapDragActive){var {data:e,
modifiers:b}=d,{center:a}=e;a=w.createScreenPoint(a.x-this._dragStartCenter.x,a.y-this._dragStartCenter.y);a=this._createDoubleTapDragData("end",a,e);this._doubleTapDrag.emit(a,void 0,b);this._doubleTapDragActive=!1;d.stopPropagation()}};g._handlePointerDown=function(d){const {data:e}=d,b=this._pointerId(e),a=this._pointerState.get(b);var {pointerType:h}=e.native;a?(h="touch"===h?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance,this._clearPointerDown(b),E.manhattanDistance(a.event.data,
e)>h?this._storePointerDown(d):this._doubleTapDragReady=!0):this._storePointerDown(d)};g._handlePointerUp=function(){this._doubleTapDragReady=!1};g._pointerId=function(d){({native:d}=d);const {pointerId:e,button:b,pointerType:a}=d;return"mouse"===a?`${e}:${b}`:`${a}`};g._storePointerDown=function(d){var {data:e}=d;const {pointerType:b}=e.native,a=this._pointerId(e);e=this._clock.setTimeout(()=>this._clearPointerDown(a),"touch"===b?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay);this._pointerState.set(a,
{event:d,doubleTapTimeout:e});this.refreshHasPendingInputs()};c._createClass(n,[{key:"hasPendingInputs",get:function(){return l.someMap(this._pointerState,d=>null!=d.doubleTapTimeout)}}]);return n}(z.InputHandler);p.DoubleTapDrag=z;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../../../core/MapUtils ../InputHandler ./support".split(" "),function(p,c,f,
l,w,C){const z={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};w=function(G){function E(n=z.maximumDoubleClickDelay,g=z.maximumDoubleClickDistance,d=z.maximumDoubleTouchDelay,e=z.maximumDoubleTouchDistance,b=f["default"]){var a=G.call(this,!1)||this;a.maximumDoubleClickDelay=n;a.maximumDoubleClickDistance=g;a.maximumDoubleTouchDelay=d;a.maximumDoubleTouchDistance=e;a._clock=b;a._pointerState=new Map;a._click=a.registerOutgoing("click");
a._doubleClick=a.registerOutgoing("double-click");a.registerIncoming("immediate-click",a._handleImmediateClick.bind(c._assertThisInitialized(a)));a.registerIncoming("pointer-drag",a._handlePointerDrag.bind(c._assertThisInitialized(a)));a.registerIncoming("drag",a._handleDrag.bind(c._assertThisInitialized(a)));return a}c._inheritsLoose(E,G);var y=E.prototype;y.onUninstall=function(){this._pointerState.forEach(n=>{null!=n.doubleClickTimeout&&(n.doubleClickTimeout.remove(),n.doubleClickTimeout=null)})};
y._pointerId=function(n){n=n.native;return"mouse"===n.pointerType?`${n.pointerId}:${n.button}`:`${n.pointerType}`};y._handleImmediateClick=function(n){const g=n.data,d=this._pointerId(g),e=this._pointerState.get(d);if(e){const b="touch"===g.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;C.manhattanDistance(e.event.data,g)>b?(this._clearDoubleClickTimeout(d,!0),this._startClick(n)):(this._clearDoubleClickTimeout(d,!1),this._doubleClick.emit(e.event.data,void 0,e.event.modifiers))}else this._startClick(n)};
y._startClick=function(n){const g=this._pointerId(n.data);this._pointerState.set(g,{event:n,doubleClickTimeout:this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(g),"touch"===n.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)});this.refreshHasPendingInputs()};y._handlePointerDrag=function(n){n=this._pointerId(n.data.currentEvent);this._clearDoubleClickTimeout(n,!0)};y._handleDrag=function(n){n=this._pointerId(n.data.pointer);this._clearDoubleClickTimeout(n,
!0)};y._clearDoubleClickTimeout=function(n,g){const d=this._pointerState.get(n);d&&(d.doubleClickTimeout.remove(),d.doubleClickTimeout=null,g&&this._doubleClickTimeoutExceeded(n),this._pointerState.delete(n),this.refreshHasPendingInputs())};y._doubleClickTimeoutExceeded=function(n){const g=this._pointerState.get(n);this._click.emit(g.event.data,void 0,g.event.modifiers);g.doubleClickTimeout=null;this._pointerState.delete(n);this.refreshHasPendingInputs()};c._createClass(E,[{key:"hasPendingInputs",
get:function(){return l.someMap(this._pointerState,n=>null!=n.doubleClickTimeout)}}]);return E}(w.InputHandler);p.DefaultParameters=z;p.SingleAndDoubleClick=w;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/input/recognizers/support":function(){define(["exports","../../../core/screenUtils"],function(p,c){p.euclideanDistance=function(f,l){const w=l.x-f.x;f=l.y-f.y;return Math.sqrt(w*w+f*f)};p.fitCircleLSQ=function(f,l){l?(l.radius=0,l.center.x=0,l.center.y=0):l={radius:0,center:c.createScreenPoint()};
if(0===f.length)return l;if(1===f.length)return l.center.x=f[0].x,l.center.y=f[0].y,l;if(2===f.length){const [a,h]=f,[u,r]=[h.x-a.x,h.y-a.y];l.radius=Math.sqrt(u*u+r*r)/2;l.center.x=(a.x+h.x)/2;l.center.y=(a.y+h.y)/2;return l}let w=0,C=0;for(l=0;l<f.length;l++)w+=f[l].x,C+=f[l].y;w/=f.length;C/=f.length;var z=f.map(a=>a.x-w),G=f.map(a=>a.y-C);let E=l=0;var y=0,n=0,g=0,d=0,e=0;for(var b=0;b<z.length;b++){const a=z[b],h=G[b],u=a*a,r=h*h;l+=u;E+=r;y+=a*h;n+=u*a;g+=r*h;d+=a*r;e+=h*u}z=l;G=y;b=E;n=.5*
(n+d);g=.5*(g+e);e=z*b-y*G;d=(n*b-g*G)/e;g=(z*g-y*n)/e;e=c.createScreenPoint(d+w,g+C);return{radius:Math.sqrt(d*d+g*g+(l+E)/f.length),center:e}};p.manhattanDistance=function(f,l){return Math.abs(l.x-f.x)+Math.abs(l.y-f.y)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/input/recognizers/Drag":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/screenUtils ../../../core/time ../InputHandler ./support".split(" "),function(p,c,f,l,w,C){function z(n){const g=
[];n.forEach(d=>{g.push(f.createScreenPoint(d.event.x,d.event.y))});return C.fitCircleLSQ(g)}function G(n){const g=z(n);let d=0;n.forEach(e=>{var b=y(e,g);for(b-=e.lastAngle;b>Math.PI;)b-=2*Math.PI;for(;b<-Math.PI;)b+=2*Math.PI;b=e.lastAngle+b;e.lastAngle=b;d+=b-e.initialAngle});d/=n.size||1;return{angle:d,radius:g.radius,center:g.center}}function E(n){const g=new Map;n.forEach((d,e)=>g.set(e,d.event));return g}function y(n,g){n=n.event;return Math.atan2(n.y-g.center.y,n.x-g.center.x)}w=function(n){function g(e){var b=
n.call(this,!1)||this;b.navigationTouch=e;b.startStateModifiers=new Set;b.activePointerMap=new Map;b.isDragging=!1;b.isCurrentDragSuppressed=!1;b.drag=b.registerOutgoing("drag");b.registerIncoming("pointer-drag",b.handlePointerDrag.bind(c._assertThisInitialized(b)));b.registerIncoming("pointer-up",b.handlePointerUpAndPointerLost.bind(c._assertThisInitialized(b)));b.registerIncoming("pointer-capture-lost",b.handlePointerUpAndPointerLost.bind(c._assertThisInitialized(b)));b.registerIncoming("pointer-cancel",
b.handlePointerUpAndPointerLost.bind(c._assertThisInitialized(b)));return b}c._inheritsLoose(g,n);var d=g.prototype;d.createPayload=function(e,b,a,h){return{action:e,pointerType:this.pointerType,button:this.mouseButton,buttons:b.buttons,timestamp:h,pointers:E(this.activePointerMap),pointer:b,angle:a.angle,radius:a.radius,center:a.center}};d.addPointer=function(e){var b=e.native.pointerId;const a=G(this.activePointerMap).angle;e={event:e,initialAngle:0,lastAngle:0};this.activePointerMap.set(b,e);b=
y(e,z(this.activePointerMap));e.initialAngle=b;e.lastAngle=b;this.updatePointerAngles(a)};d.updatePointer=function(e){if(!e||null!=e.x||null!=e.y){var b=this.activePointerMap.get(e.native.pointerId);b?b.event=e:this.addPointer(e)}};d.removePointer=function(e){const b=G(this.activePointerMap).angle;this.activePointerMap.delete(e);this.updatePointerAngles(b)};d.updatePointerAngles=function(e){const b=G(this.activePointerMap);this.activePointerMap.forEach(a=>{a.initialAngle=y(a,b)-e;a.lastAngle=y(a,
b)-e})};d.emitEvent=function(e,b,a){const h=G(this.activePointerMap);this.drag.emit(this.createPayload(e,b,h,a),void 0,this.startStateModifiers)};d.handlePointerUpAndPointerLost=function(e){const b=e.data.native.pointerId,a=l.Milliseconds(e.timestamp);this.activePointerMap.get(b)&&(1===this.activePointerMap.size?(this.updatePointer(e.data),!this.isCurrentDragSuppressed&&this.emitEvent("end",e.data,a),this.isCurrentDragSuppressed=this.isDragging=!1,this.removePointer(b)):(this.removePointer(b),this.emitEvent("removed",
e.data,l.Milliseconds(e.timestamp))))};d.handlePointerDrag=function(e){const b=e.data,a=b.currentEvent,h=l.Milliseconds(e.timestamp);switch(b.action){case "start":case "update":this.isDragging?this.activePointerMap.has(a.native.pointerId)?(this.updatePointer(a),!this.isCurrentDragSuppressed&&this.emitEvent("update",a,h)):(this.addPointer(a),this.emitEvent("added",a,h),this.isCurrentDragSuppressed=this.isSuppressed):(this.updatePointer(a),this.pointerType=e.data.startEvent.pointerType,this.mouseButton=
e.data.startEvent.button,this.startStateModifiers=e.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this.emitEvent("start",a,h))}};c._createClass(g,[{key:"isSuppressed",get:function(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&"touch"===this.pointerType&&1===this.activePointerMap.size}}]);return g}(w.InputHandler);p.Button=void 0;(function(n){n[n.Left=0]="Left";n[n.Middle=1]="Middle";n[n.Right=2]="Right";n[n.Back=
3]="Back";n[n.Forward=4]="Forward";n[n.Undefined=-1]="Undefined"})(p.Button||(p.Button={}));p.Drag=w;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/input/recognizers/ImmediateDoubleClick":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../InputHandler ./SingleAndDoubleClick ./support".split(" "),function(p,c,f,l,w,C){l=function(z){function G(y=w.DefaultParameters.maximumDoubleClickDelay,n=w.DefaultParameters.maximumDoubleClickDistance,g=w.DefaultParameters.maximumDoubleTouchDelay,
d=w.DefaultParameters.maximumDoubleTouchDistance,e=f["default"]){var b=z.call(this,!1)||this;b.maximumDoubleClickDelay=y;b.maximumDoubleClickDistance=n;b.maximumDoubleTouchDelay=g;b.maximumDoubleTouchDistance=d;b._clock=e;b._pointerState=new Map;b._immediateDoubleClick=b.registerOutgoing("immediate-double-click");b.registerIncoming("pointer-down",b._handlePointerDown.bind(c._assertThisInitialized(b)));b.registerIncoming("pointer-up",a=>{b._handlePointerLoss(a,"pointer-up")});b.registerIncoming("pointer-capture-lost",
a=>{b._handlePointerLoss(a,"pointer-capture-lost")});b.registerIncoming("pointer-cancel",a=>{b._handlePointerLoss(a,"pointer-cancel")});return b}c._inheritsLoose(G,z);var E=G.prototype;E.onUninstall=function(){this._pointerState.forEach(y=>{y.immediateDoubleClick&&y.immediateDoubleClick.timeoutHandle.remove()});z.prototype.onUninstall.call(this)};E._handlePointerDown=function(y){y=y.data;const n=this._pointerId(y);this._pointerState.has(n)||(this._pointerState.set(n,{downButton:y.native.button,immediateDoubleClick:null}),
this.startCapturingPointer(y.native))};E._handlePointerLoss=function(y,n){const g=y.data;var d=this._pointerId(g);if((d=this._pointerState.get(d))&&"pointer-up"===n&&d.downButton===g.native.button)if(n=d.immediateDoubleClick){n.timeoutHandle.remove();const e="touch"===y.data.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;C.manhattanDistance(n,y.data)>e?this._startImmediateDoubleClick(y,d):(this._immediateDoubleClick.emit(y.data,void 0,n.modifiers),this._removeState(g))}else this._startImmediateDoubleClick(y,
d)};E._startImmediateDoubleClick=function(y,n){n.immediateDoubleClick={x:y.data.x,y:y.data.y,modifiers:y.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(y.data),"touch"===y.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)}};E._pointerId=function(y){y=y.native;return"mouse"===y.pointerType?`${y.pointerId}:${y.button}`:`${y.pointerType}`};E._removeState=function(y){const n=this._pointerId(y);this._pointerState.delete(n);this.stopCapturingPointer(y.native);
this.refreshHasPendingInputs()};return G}(l.InputHandler);p.ImmediateDoubleClick=l;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/clock","../InputHandler","./support"],function(p,c,f,l,w){const C={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};l=function(z){function G(y=C.maximumClickDelay,
n=C.movementUntilMouseDrag,g=C.movementUntilPenDrag,d=C.movementUntilTouchDrag,e=C.holdDelay,b=f["default"]){var a=z.call(this,!1)||this;a.maximumClickDelay=y;a.movementUntilMouseDrag=n;a.movementUntilPenDrag=g;a.movementUntilTouchDrag=d;a.holdDelay=e;a._clock=b;a._pointerState=new Map;a._pointerDrag=a.registerOutgoing("pointer-drag");a._immediateClick=a.registerOutgoing("immediate-click");a._pointerHold=a.registerOutgoing("hold");a.registerIncoming("pointer-down",a._handlePointerDown.bind(c._assertThisInitialized(a)));
a.registerIncoming("pointer-up",h=>{a._handlePointerLoss(h,"pointer-up")});a.registerIncoming("pointer-capture-lost",h=>{a._handlePointerLoss(h,"pointer-capture-lost")});a.registerIncoming("pointer-cancel",h=>{a._handlePointerLoss(h,"pointer-cancel")});a._moveHandle=a.registerIncoming("pointer-move",a._handlePointerMove.bind(c._assertThisInitialized(a)));a._moveHandle.pause();return a}c._inheritsLoose(G,z);var E=G.prototype;E.onUninstall=function(){this._pointerState.forEach(y=>{null!=y.holdTimeout&&
(y.holdTimeout.remove(),y.holdTimeout=null)});z.prototype.onUninstall.call(this)};E._handlePointerDown=function(y){const n=y.data,g=n.native.pointerId;var d=null;0===this._pointerState.size&&(d=this._clock.setTimeout(()=>{const e=this._pointerState.get(g);e&&(e.isDragging||(this._pointerHold.emit(e.previousEvent,void 0,y.modifiers),e.holdEmitted=!0),e.holdTimeout=null)},this.holdDelay));d={startEvent:n,previousEvent:n,startTimestamp:y.timestamp,isDragging:!1,downButton:n.native.button,holdTimeout:d,
modifiers:new Set};this._pointerState.set(g,d);this.startCapturingPointer(n.native);this._moveHandle.resume();1<this._pointerState.size&&this.startDragging(y)};E._createPointerDragData=function(y,n,g){return{action:y,startEvent:n.startEvent,previousEvent:n.previousEvent,currentEvent:g}};E._handlePointerMove=function(y){const n=y.data,g=this._pointerState.get(n.native.pointerId);if(g){if(g.isDragging)this._pointerDrag.emit(this._createPointerDragData("update",g,n),void 0,g.modifiers);else{const d=
w.euclideanDistance(n,g.startEvent),e=this._getDragThreshold(n.native.pointerType);d>e&&this.startDragging(y)}g.previousEvent=n}};E._getDragThreshold=function(y){switch(y){case "touch":return this.movementUntilTouchDrag;case "pen":return this.movementUntilPenDrag;default:return this.movementUntilMouseDrag}};E.startDragging=function(y){const n=y.data,g=n.native.pointerId;this._pointerState.forEach(d=>{null!=d.holdTimeout&&(d.holdTimeout.remove(),d.holdTimeout=null);d.isDragging||(d.modifiers=y.modifiers,
d.isDragging=!0,g===d.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",d,n)):this._pointerDrag.emit(this._createPointerDragData("start",d,d.previousEvent),y.timestamp))})};E._handlePointerLoss=function(y,n){const g=y.data,d=g.native.pointerId,e=this._pointerState.get(d);e&&(null!=e.holdTimeout&&(e.holdTimeout.remove(),e.holdTimeout=null),e.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",e,"pointer-up"===n?g:e.previousEvent),void 0,e.modifiers):
"pointer-up"===n&&e.downButton===g.native.button&&y.timestamp-e.startTimestamp<=this.maximumClickDelay&&!e.holdEmitted&&this._immediateClick.emit(g),this._pointerState.delete(d),this.stopCapturingPointer(g.native),0===this._pointerState.size&&this._moveHandle.pause())};return G}(l.InputHandler);p.DefaultParameters=C;p.PointerClickHoldAndDrag=l;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/2d/support/HighlightOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,f,l,w,C,z,G,E){let y=0;l=function(n){function g(){var d=n.apply(this,arguments)||this;d.color=new f([0,255,255]);d.haloOpacity=1;d.fillOpacity=.25;return d}p._inheritsLoose(g,n);p._createClass(g,[{key:"version",get:function(){return y++}}]);return g}(l);c.__decorate([w.property({readOnly:!0})],l.prototype,"version",null);c.__decorate([w.property({type:f})],l.prototype,"color",void 0);c.__decorate([w.property({type:f})],l.prototype,"haloColor",void 0);c.__decorate([w.property()],l.prototype,
"haloOpacity",void 0);c.__decorate([w.property()],l.prototype,"fillOpacity",void 0);return l=c.__decorate([E.subclass("esri.views.2d.support.HighlightOptions")],l)})},"esri/views/support/screenshotUtils":function(){define(["exports","../../core/has","../../core/mathUtils"],function(p,c,f){function l(b,a){const {format:h,quality:u,rotation:r,disableDecorations:q}=b||{};var k=E(b,a.padding);var m=a.width-k.left-k.right;a=a.height-k.top-k.bottom;k={x:0,y:0,width:m,height:a};if(b&&b.area){null!=b.area.x&&
(k.x=Math.floor(b.area.x));null!=b.area.y&&(k.y=Math.floor(b.area.y));var x=null!=b.area.width?Math.floor(b.area.width):null,v=null!=b.area.height?Math.floor(b.area.height):null;k.width=m-k.x;k.height=a-k.y;null!=x&&null!=v?(k.width=Math.min(k.width,x),k.height=Math.min(k.height,v)):null==x&&null!=v?(x=Math.min(k.width,x),k.height*=x/k.width,k.width=x):null!=x&&null==v&&(x=Math.min(k.height,v),k.width*=x/k.height,k.height=x)}k=G(k,b);x=Math.floor(Math.max(k.x,0));v=Math.floor(Math.max(k.y,0));m={x,
y:v,width:Math.floor(Math.min(k.width,m-x)),height:Math.floor(Math.min(k.height,a-v))};a=m.width/m.height;k=k.width/k.height;k!==a&&(k>a?(a=Math.floor(m.width/k),m={x:m.x,y:Math.floor(m.y+(m.height-a)/2),width:m.width,height:a}):(a=Math.floor(m.height*k),m={x:Math.floor(m.x+(m.width-a)/2),y:m.y,width:a,height:m.height}));const {width:B,height:L}=z(b,m);a:switch(h){case "png":case "jpg":case "jpeg":a=h;break a;case null:case void 0:a="png";break a;default:a="png"}k=d[a];k=f.clamp(null!=u?u:k,0,100);
return{format:a,quality:k,area:m,width:B,height:L,rotation:r,disableDecorations:!!q,ignoreBackground:!(!b||!b.ignoreBackground),ignorePadding:!(!b||!b.ignorePadding)}}function w(b,a){return b.toDataURL(g[a.format],a.quality/100)}function C(b,a,h){h||(y||(y=document.createElement("canvas"),y.width=1,y.height=1),h=y);return h.getContext("2d").createImageData(b,a)}function z(b,a){if(!b)return a;const h=b.width;b=b.height;if(null!=h&&null!=b)return{width:Math.floor(h),height:Math.floor(b)};if(null==h&&
null==b)return a;a=a.width/a.height;return null==b?{width:Math.floor(h),height:Math.floor(h/a)}:{width:Math.floor(b*a),height:Math.floor(b)}}function G(b,a){if(!a||null==a.width||null==a.height)return b;a=a.width/a.height;const h=b.width/b.height;if(h===a)return b;if(h<a)return a=Math.floor(b.height*a),b.x-=(a-b.width)/2,b.width=a,b;a=Math.floor(b.width/a);b.y-=(a-b.height)/2;b.height=a;return b}function E(b,a){return!a||b&&b.ignorePadding?e:a}let y=null,n=!0;const g={png:"image/png",jpg:"image/jpeg",
jpeg:"image/jpeg"},d={png:100,jpg:98,jpeg:98},e={top:0,right:0,bottom:0,left:0};p.completeUserSettings=l;p.createEmptyImageData=function(b,a,h){if(!b||!a)throw Error("Cannot construct image data without dimensions");if(n)try{return new ImageData(b,a)}catch(u){n=!1}return C(b,a,h)};p.encodeResult=function(b,a,h,u){if(u.premultipliedAlpha){{var r=b.data;const k=r.length;for(let m=0;m<k;m+=4){var q=r[m+3];0<q&&(q/=255,r[m+0]/=q,r[m+1]/=q,r[m+2]/=q)}}}h.width=b.width;h.height=b.height;r=h.getContext("2d");
r.putImageData(b,0,0);u.flipY&&(r.save(),r.globalCompositeOperation="copy",r.scale(1,-1),r.translate(0,-r.canvas.height),r.drawImage(r.canvas,0,0),r.restore());b=r.getImageData(0,0,b.width,b.height);a=w(h,a);h.width=0;h.height=0;return{dataUrl:a,data:b}};p.resampleHermite=function(b,a,h,u=0,r=0,q=b.width-u,k=b.height-r,m=!1){const {data:x}=b,{width:v,height:B,data:L}=a;q/=v;k/=B;const N=Math.ceil(q/2),M=Math.ceil(k/2);b=b.width;for(let P=0;P<B;P++)for(let V=0;V<v;V++){const ca=4*(V+(m?B-P-1:P)*v);
let A=0,t=0,F=0,D=0,H=0,K=0;const J=(P+.5)*k;for(let T=Math.floor(P*k);T<(P+1)*k;T++){var S=Math.abs(J-(T+.5))/M;const Y=(V+.5)*q;S*=S;for(let da=Math.floor(V*q);da<(V+1)*q;da++){var I=Math.abs(Y-(da+.5))/N;I=Math.sqrt(S+I*I);if(1<=I)continue;I=2*I*I*I-3*I*I+1;const ha=4*(u+da+(r+T)*b);K+=I*x[ha+3];t+=I;!h&&255>x[ha+3]&&(I=I*x[ha+3]/255);F+=I*x[ha];D+=I*x[ha+1];H+=I*x[ha+2];A+=I}}L[ca]=F/A;L[ca+1]=D/A;L[ca+2]=H/A;L[ca+3]=K/t}return a};p.screenshotSuperSampleSettings=function(b,a,h){if(!a)return b;
const {framebufferWidth:u,framebufferHeight:r,pixelRatio:q,region:k}=b;a=E(b,h);h=a.left+a.right;const m=a.top+a.bottom,x=u-h,v=r-m,B=Math.min(8,Math.min((2048-h)/x,(2048-m)/v));return 1.5>B?b:{...b,framebufferWidth:Math.round(x*B)+h,framebufferHeight:Math.round(v*B)+m,pixelRatio:q*B,resample:{region:{x:Math.round((k.x-a.left)*B)+a.left,y:Math.round((k.y-a.top)*B)+a.top,width:Math.round(k.width*B),height:Math.round(k.height*B)},width:u,height:r}}};p.toDataUrl=w;p.toRenderSettings=function(b,a){const h=
l(b,a),u=h.area,r=h.width/u.width,q=E(h,a.padding),k=q.left+q.right,m=q.top+q.bottom;return{framebufferWidth:Math.floor((a.width-k)*r+k),framebufferHeight:Math.floor((a.height-m)*r+m),region:{x:Math.floor(u.x*r)+q.left,y:Math.floor(u.y*r)+q.top,width:h.width,height:h.height},format:h.format,quality:h.quality,rotation:h.rotation,pixelRatio:r,layers:b&&b.layers?b.layers:[],disableDecorations:h.disableDecorations,ignoreBackground:h.ignoreBackground,ignorePadding:h.ignorePadding}};p.wrapImageData=function(b,
a,h,u){if(!a||!h)throw Error("Cannot construct image data without dimensions");if(n)try{return new ImageData(b,a,h)}catch(r){n=!1}a=C(a,h,u);a.data.set(b,0);return a};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/support/WebGLRequirements":function(){define(["exports","../../core/Error","../webgl/capabilities"],function(p,c,f){const l={checkMajorWebPerformanceCaveat:!0};p.check=function(w){w={...l,...w};const C=f();return C.available?w.checkMajorWebPerformanceCaveat&&C.majorPerformanceCaveat?
new c("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):C.supportsHighPrecisionFragment?C.supportsVertexShaderSamplers?C.supportsElementIndexUint?C.supportsStandardDerivatives?C.supportsInstancedArrays?null:new c("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported."):new c("webgl:standard-derivatives-required",
"WebGL support for standard derivatives is required but not supported."):new c("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported."):new c("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new c("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new c("webgl:required","WebGL is required but not supported.")};
Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/webgl/capabilities":function(){define(["../../core/maybe","./context-util"],function(p,c){function f(){const w={available:!1,version:0,majorPerformanceCaveat:!1,maxTextureSize:0,supportsHighPrecisionFragment:!1,supportsVertexShaderSamplers:!1,supportsElementIndexUint:!1,supportsStandardDerivatives:!1,supportsInstancedArrays:!1,supportsTextureFloat:!1,supportsColorBufferFloat:!1};var C=document.createElement("canvas");if(!C)return w;var z=
c.createContext(C,1,{failIfMajorPerformanceCaveat:!0});p.isNone(z)&&(z=c.createContext(C,1),p.isSome(z)&&(w.majorPerformanceCaveat=!0));if(p.isNone(z))return w;C=z.getParameter(z.VERSION);if(!C)return w;if(C=C.match(/^WebGL\s+([\d.]*)/)){C=parseFloat(C[1]);w.available=.94<=C;if(C=z.getShaderPrecisionFormat(z.FRAGMENT_SHADER,z.HIGH_FLOAT))w.supportsHighPrecisionFragment=0<C.precision;w.supportsVertexShaderSamplers=0<z.getParameter(z.MAX_VERTEX_TEXTURE_IMAGE_UNITS);w.supportsElementIndexUint=null!==
z.getExtension("OES_element_index_uint");w.supportsStandardDerivatives=null!==z.getExtension("OES_standard_derivatives");w.supportsInstancedArrays=null!==z.getExtension("ANGLE_instanced_arrays");w.supportsTextureFloat=null!==z.getExtension("OES_texture_float");w.supportsColorBufferFloat=null!==z.getExtension("WEBGL_color_buffer_float")&&null!==z.getExtension("EXT_float_blend")}w.maxTextureSize=z.getParameter(z.MAX_TEXTURE_SIZE);(z=document.createElement("canvas"))?(z=c.createContext(z,2),z=p.isSome(z)?
!0:!1):z=!1;w.version=z?2:1;return w}let l;return function(){l||(l=f());return l}})},"esri/views/webgl/context-util":function(){define(["exports","../../core/maybe"],function(p,c){function f(w,C,z={}){C=1===C?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let G=null;for(const E of C){try{G=w.getContext(E,z)}catch(y){}if(G)break}return G}function l(w,C){(w=w.parentNode)&&(w.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+
C+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}p.createContext=f;p.createContextOrErrorHTML=function(w,C,z={}){if(!window.WebGLRenderingContext)return l(w,'This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'),null;C=f(w,C,z);return c.isNone(C)?(l(w,'It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'),
null):C};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/views/ui/2d/DefaultUI2D":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ../DefaultUI".split(" "),function(p,c,f,l,w,C,z,G){l=function(E){function y(n){n=E.call(this,n)||this;n.components=["attribution","zoom"];return n}
p._inheritsLoose(y,E);return y}(G);c.__decorate([f.property()],l.prototype,"components",void 0);return l=c.__decorate([z.subclass("esri.views.ui.2d.DefaultUI2D")],l)})},"esri/views/ui/DefaultUI":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./Component ./UI ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom".split(" "),
function(p,c,f,l,w,C,z,G,E,y,n,g,d,e){l.getLogger("esri.views.ui.DefaultUI");f=function(b){function a(u){u=b.call(this,u)||this;u._defaultPositionLookup={attribution:"manual",compass:"top-leading","navigation-toggle":"top-leading",zoom:"top-leading"};u.components=[];return u}p._inheritsLoose(a,b);var h=a.prototype;h.initialize=function(){this._handles.add([w.init(this,"components",this._componentsWatcher.bind(this)),w.init(this,"view",this._updateViewAwareWidgets.bind(this))])};h._add=function(u,
r,q,k){if("string"===typeof u&&this._defaultPositionLookup[u]){if(this._find(u))return;u=this._createComponent(u)}b.prototype._add.call(this,u,r,q,k)};h._removeComponents=function(u){u.forEach(r=>{if(r=this._find(r))this.remove(r),r.destroy()})};h._updateViewAwareWidgets=function(u){this.components.forEach(r=>{(r=(r=this._find(r))&&r.widget)&&void 0!==r.view&&(r.view=u)})};h._componentsWatcher=function(u,r){this._removeComponents(r);this._addComponents(u);this._adjustPadding(u)};h._adjustPadding=
function(u){-1!==u.indexOf("attribution")||this._isOverridden("padding")||({top:u}=this.padding,this.padding=u)};h._addComponents=function(u){this.initialized&&u.forEach(r=>this.add(this._createComponent(r),this._defaultPositionLookup[r]))};h._createComponent=function(u){const r=this._createWidget(u);if(r)return new E({id:u,node:r})};h._createWidget=function(u){if("attribution"===u)return this._createAttribution();if("compass"===u)return this._createCompass();if("navigation-toggle"===u)return this._createNavigationToggle();
if("zoom"===u)return this._createZoom()};h._createAttribution=function(){return new n({view:this.view})};h._createCompass=function(){return new g({view:this.view})};h._createNavigationToggle=function(){return new d({view:this.view})};h._createZoom=function(){return new e({view:this.view})};return a}(y);c.__decorate([C.property()],f.prototype,"components",void 0);return f=c.__decorate([G.subclass("esri.views.ui.DefaultUI")],f)})},"esri/views/ui/Component":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/domUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/decorators/cast ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,f,l,w,C,z,G,E){f=function(y){function n(){var d=y.apply(this,arguments)||this;d.widget=null;return d}p._inheritsLoose(n,y);var g=n.prototype;g.destroy=function(){this.widget&&this.widget.destroy();this.node=null};g.castNode=function(d){if(!d)return this._set("widget",null),null;if("string"===typeof d||d&&"nodeType"in d)return this._set("widget",null),l.byId(d);d&&"function"===typeof d.render&&!d.domNode&&(d.domNode=document.createElement("div"));this._set("widget",d);return d.domNode};
p._createClass(n,[{key:"id",get:function(){return this.get("widget.id")||this.get("node.id")}},{key:"node",set:function(d){const e=this._get("node");d!==e&&(d&&d.classList.add("esri-component"),e&&e.classList.remove("esri-component"),this._set("node",d))}}]);return n}(f);c.__decorate([w.property({dependsOn:[]})],f.prototype,"id",null);c.__decorate([w.property()],f.prototype,"node",null);c.__decorate([z.cast("node")],f.prototype,"castNode",null);c.__decorate([w.property({readOnly:!0})],f.prototype,
"widget",void 0);return f=c.__decorate([E.subclass("esri.views.ui.Component")],f)})},"esri/views/ui/UI":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/domUtils ../../core/Evented ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/decorators/cast ../../core/Logger ../../core/accessorSupport/decorators/subclass ./Component ../../widgets/support/widgetUtils".split(" "),function(p,
c,f,l,w,C,z,G,E,y,n,g,d){function e(u){return"object"!==typeof u||u instanceof g||"declaredClass"in u||!("component"in u||"index"in u||"position"in u)?null:u}function b(u,{top:r,bottom:q,left:k,right:m}){u.style.top=r;u.style.bottom=q;u.style.left=k;u.style.right=m}const a={left:0,top:0,bottom:0,right:0},h={bottom:30,top:15,right:15,left:15};l=function(u){function r(k){k=u.call(this,k)||this;k._cornerNameToContainerLookup={};k._positionNameToContainerLookup={};k._components=[];k._componentToKey=new Map;
k._handles=new w;k.view=null;k._initContainers();return k}p._inheritsLoose(r,u);var q=r.prototype;q.initialize=function(){this._handles.add([C.init(this,"view.padding, container",this._applyViewPadding.bind(this)),C.init(this,"padding",this._applyUIPadding.bind(this))])};q.destroy=function(){this.container=null;for(const k of this._components)k.destroy();this._components.length=0;this._handles.destroy();this._componentToKey.clear()};q.castPadding=function(k){return"number"===typeof k?{bottom:k,top:k,
right:k,left:k}:{...h,...k}};q.add=function(k,m){let x,v;if(Array.isArray(k))k.forEach(L=>this.add(L,m));else{var B=e(k);B&&({index:x,position:m,component:k,key:v}=B);m&&"object"===typeof m&&({index:x,key:v,position:m}=m);!k||m&&!this._isValidPosition(m)||this._add(k,m,x,v)}};q.remove=function(k,m){if(k){if(Array.isArray(k))return k.map(B=>this.remove(B,m));var x=this._find(k);if(x){var v=this._componentToKey;if(!v.has(k)||v.get(k)===m)return v=this._components.indexOf(x),x.node.parentNode&&x.node.parentNode.removeChild(x.node),
this._componentToKey.delete(k),this._components.splice(v,1)[0]}}};q.empty=function(k){if(Array.isArray(k))return k.map(m=>this.empty(m)).reduce((m,x)=>m.concat(x));k=k||"manual";return"manual"===k?Array.prototype.slice.call(this._manualContainer.children).filter(m=>!m.classList.contains("esri-ui-corner")).map(m=>this.remove(m)):this._isValidPosition(k)?Array.prototype.slice.call(this._cornerNameToContainerLookup[k].children).map(this.remove,this):null};q.move=function(k,m){Array.isArray(k)&&k.forEach(B=>
this.move(B,m));if(k){var x=e(k)||e(m);if(x){var v=x.index;m=x.position;k=x.component||k}(!m||this._isValidPosition(m))&&(k=this.remove(k))&&this.add(k,{position:m,index:v})}};q.find=function(k){return k?(k=this._findById(k))&&(k.widget||k.node):null};q.getPosition=function(k){for(const m in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[m].contains(k))return m;return null};q._add=function(k,m,x,v){k instanceof g||(k=new g({node:k}));this._place({component:k,position:m,
index:x});this._components.push(k);v&&this._componentToKey.set(k,v)};q._find=function(k){return k?k instanceof g?this._findByComponent(k):"string"===typeof k?this._findById(k):this._findByNode(k.domNode||k):null};q._getViewPadding=function(){return this.get("view.padding")||a};q._attachContainers=function(k){k.appendChild(this._innerContainer);k.appendChild(this._manualContainer)};q._initContainers=function(){var k=document.createElement("div");k.classList.add("esri-ui-inner-container");k.classList.add("esri-ui-corner-container");
const m=document.createElement("div");m.classList.add("esri-ui-inner-container");m.classList.add("esri-ui-manual-container");const x=document.createElement("div");x.classList.add("esri-ui-top-left");x.classList.add("esri-ui-corner");k.appendChild(x);const v=document.createElement("div");v.classList.add("esri-ui-top-right");v.classList.add("esri-ui-corner");k.appendChild(v);const B=document.createElement("div");B.classList.add("esri-ui-bottom-left");B.classList.add("esri-ui-corner");k.appendChild(B);
const L=document.createElement("div");L.classList.add("esri-ui-bottom-right");L.classList.add("esri-ui-corner");k.appendChild(L);this._innerContainer=k;this._manualContainer=m;k=d.isRTL();this._cornerNameToContainerLookup={"top-left":x,"top-right":v,"bottom-left":B,"bottom-right":L,"top-leading":k?v:x,"top-trailing":k?x:v,"bottom-leading":k?L:B,"bottom-trailing":k?B:L};this._positionNameToContainerLookup={manual:m,...this._cornerNameToContainerLookup}};q._isValidPosition=function(k){return!!this._positionNameToContainerLookup[k]};
q._place=function(k){const m=k.component,x=k.index;k=this._positionNameToContainerLookup[k.position||"manual"];var v=-1<x,B=m.widget;B&&!B._started&&"function"===typeof B.postMixInProperties&&"function"===typeof B.buildRendering&&"function"===typeof B.postCreate&&"function"===typeof B.startup&&m.widget.startup();v?(v=Array.prototype.slice.call(k.children),0===x?k.firstChild?f.insertBefore(m.node,k.firstChild):k.appendChild(m.node):x>=v.length?k.appendChild(m.node):f.insertBefore(m.node,v[x])):k.appendChild(m.node)};
q._applyViewPadding=function(){const k=this.container;k&&b(k,this._toPxPosition(this._getViewPadding()))};q._applyUIPadding=function(){const k=this._innerContainer;k&&b(k,this._toPxPosition(this.padding))};q._toPxPosition=function(k){return{top:this._toPxUnit(k.top),left:this._toPxUnit(k.left),right:this._toPxUnit(k.right),bottom:this._toPxUnit(k.bottom)}};q._toPxUnit=function(k){return 0===k?"0":k+"px"};q._findByComponent=function(k){let m=null,x;this._components.some(v=>{(x=v===k)&&(m=v);return x});
return m};q._findById=function(k){let m=null,x;this._components.some(v=>{(x=v.id===k)&&(m=v);return x});return m};q._findByNode=function(k){let m=null,x;this._components.some(v=>{(x=v.node===k)&&(m=v);return x});return m};p._createClass(r,[{key:"container",set:function(k){const m=this._get("container");k!==m&&(k&&(k.classList.add("esri-ui"),k.classList.add(d.getCalciteThemeClass()),this._attachContainers(k)),m&&(m.classList.remove("esri-ui"),b(m,{top:"",bottom:"",left:"",right:""}),f.empty(m)),this._set("container",
k))}},{key:"height",get:function(){const k=this.get("view.height")||0;if(0===k)return k;const m=this._getViewPadding();return Math.max(k-(m.top+m.bottom),0)}},{key:"padding",get:function(){return this._get("padding")},set:function(k){k?this._override("padding",k):this._clearOverride("padding")}},{key:"width",get:function(){const k=this.get("view.width")||0;if(0===k)return k;const m=this._getViewPadding();return Math.max(k-(m.left+m.right),0)}}]);return r}(l.EventedAccessor);c.__decorate([z.property()],
l.prototype,"container",null);c.__decorate([z.property()],l.prototype,"height",null);c.__decorate([z.property({value:h})],l.prototype,"padding",null);c.__decorate([E.cast("padding")],l.prototype,"castPadding",null);c.__decorate([z.property()],l.prototype,"view",void 0);c.__decorate([z.property()],l.prototype,"width",null);return l=c.__decorate([n.subclass("esri.views.ui.UI")],l)})},"esri/widgets/Attribution":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Attribution/AttributionViewModel ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/jsxFactory ./support/widgetUtils".split(" "),
function(p,c,f,l,w,C,z,G,E,y,n,g,d,e,b){w=function(a){function h(r,q){r=a.call(this,r,q)||this;r._isOpen=!1;r._attributionTextOverflowed=!1;r._prevSourceNodeHeight=0;r.iconClass="esri-icon-description";r.itemDelimiter=" | ";r.label=void 0;r.messages=null;r.view=null;r.viewModel=new n;return r}p._inheritsLoose(h,a);var u=h.prototype;u.initialize=function(){this.own(f.on(this,"viewModel.items","change",()=>this.scheduleRender()))};u.render=function(){return e.tsx("div",{bind:this,class:this.classes("esri-attribution esri-widget",
{["esri-attribution--open"]:this._isOpen}),onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())};u.renderPoweredBy=function(){return e.tsx("div",{class:"esri-attribution__powered-by"},"Powered by"," ",e.tsx("a",{class:"esri-attribution__link",href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))};u.renderSourcesNode=function(){const r=this._isOpen,q=this._isInteractive(),k=q?0:-1,{attributionText:m}=this,x=q?"button":void 0;return e.tsx("div",
{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes("esri-attribution__sources",{["esri-attribution__sources--open"]:r,["esri-interactive"]:q}),innerHTML:m,role:x,tabIndex:k})};u._afterSourcesNodeCreate=function(r){this._prevSourceNodeHeight=r.clientWidth};u._afterSourcesNodeUpdate=function(r){let q=!1;const {clientHeight:k,clientWidth:m,scrollWidth:x}=r;r=x>=m;const v=this._attributionTextOverflowed!==r;this._attributionTextOverflowed=r;
v&&(q=!0);this._isOpen&&(r=k<this._prevSourceNodeHeight,this._prevSourceNodeHeight=k,r&&(this._isOpen=!1,q=!0));q&&this.scheduleRender()};u._toggleState=function(){this._isInteractive()&&(this._isOpen=!this._isOpen)};u._isInteractive=function(){return this._isOpen||this._attributionTextOverflowed};p._createClass(h,[{key:"attributionText",get:function(){return this.viewModel.items.reduce((r,q)=>{-1===r.indexOf(q.text)&&r.push(q.text);return r},[]).join(this.itemDelimiter)}}]);return h}(y);c.__decorate([G.property({readOnly:!0,
dependsOn:["viewModel.items.length","itemDelimiter"]})],w.prototype,"attributionText",null);c.__decorate([G.property()],w.prototype,"iconClass",void 0);c.__decorate([G.property()],w.prototype,"itemDelimiter",void 0);c.__decorate([G.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],w.prototype,"label",void 0);c.__decorate([G.property(),d.messageBundle("esri/widgets/Attribution/t9n/Attribution")],w.prototype,"messages",void 0);c.__decorate([l.aliasOf("viewModel.view")],w.prototype,
"view",void 0);c.__decorate([G.property({type:n})],w.prototype,"viewModel",void 0);c.__decorate([g.accessibleHandler()],w.prototype,"_toggleState",null);return w=c.__decorate([E.subclass("esri.widgets.Attribution")],w)})},"esri/widgets/Attribution/AttributionViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/asyncUtils ../../core/Collection ../../core/HandleOwner ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../geometry/support/contains ../../geometry/support/webMercatorUtils ../../geometry/SpatialReference".split(" "),
function(p,c,f,l,w,C,z,G,E,y,n,g,d,e,b){function a(q,k){return q&&"copyright"in q&&(!k||"function"===typeof q.originOf&&"user"===q.originOf("copyright"))}function h(q,k){return q.length!==k.length||q.some((m,x)=>m.text!==k[x].text)}function u(q,k,m){m&&k&&(q.find(x=>x.layerView===k&&x.text===m)||q.push({text:m,layerView:k}))}const r=[];f=function(q){function k(x){var v=q.call(this,x)||this;v.clear=()=>{v._fetchedAttributionData.clear();v._pendingAttributions.clear();v.handles.remove("suspension");
v.notifyChange("state")};v._pendingAttributions=new Set;v._fetchedAttributionData=new Map;v.items=new w;v.view=null;v._allLayerViewsChange=B=>{v.handles.remove("suspension");const L=v.get("view.allLayerViews");L&&v.handles.add(L.map(N=>N.watch(["suspended","attributionVisible"],v._updateAttributionItems)),"suspension");B&&B.removed&&B.removed.forEach(N=>{v._pendingAttributions.delete(N);v._fetchedAttributionData.delete(N)});v._updateAttributionItems()};v._updateAttributionItems=()=>{const B=v.get("view.allLayerViews");
r.length=0;B?(B.forEach(L=>{if(!L.suspended&&L.get("layer.attributionVisible")){var N=L.layer;if(a(N,"user"))u(r,L,N.copyright);else if(N.hasAttributionData)if(v._fetchedAttributionData.has(L)){var M=v._fetchedAttributionData.get(L);M?u(r,L,v._getDynamicAttribution(M,v.view,N)):a(N)&&u(r,L,N.copyright)}else v._fetchAttributionData(L);else(M=N.get("portalItem.accessInformation"))?u(r,L,M):u(r,L,N.copyright)}}),h(v.items,r)&&(v.items.removeAll(),v.items.addMany(r)),r.length=0,v.notifyChange("state")):
v.clear()};v.handles.add([z.on(p._assertThisInitialized(v),"view.allLayerViews","change",v._allLayerViewsChange,v._allLayerViewsChange,v.clear),z.whenTrue(p._assertThisInitialized(v),"view.stationary",()=>v._updateAttributionItems())]);return v}p._inheritsLoose(k,q);var m=k.prototype;m.destroy=function(){this.view=null;this._fetchedAttributionData.clear();this._pendingAttributions.clear();this.items.removeAll()};m._fetchAttributionData=function(){var x=p._asyncToGenerator(function*(v){if(!this._pendingAttributions.has(v)){this._pendingAttributions.add(v);
var B=yield l.result(v.layer.fetchAttributionData());this._pendingAttributions.has(v)&&(B=B.ok?this._createContributionIndex(B.value,"bing-maps"===v.layer.type):null,this._pendingAttributions.delete(v),this._fetchedAttributionData.set(v,B));this._updateAttributionItems()}});return function(v){return x.apply(this,arguments)}}();m._createContributionIndex=function(x,v){x=x.contributors;const B={};if(!x)return B;for(let S=0;S<x.length;S++){const I=x[S];var L=I.coverageAreas;if(!L)return;for(const P of L){var N=
P.bbox,M=P.zoomMin-(v&&P.zoomMin?1:0);L=P.zoomMax-(v&&P.zoomMax?1:0);for(N={extent:e.geographicToWebMercator({xmin:N[1],ymin:N[0],xmax:N[3],ymax:N[2],spatialReference:b.WGS84}),attribution:I.attribution||"",score:null!=P.score?P.score:100,id:S};M<=L;M++)B[M]=B[M]||[],B[M].push(N)}}B.maxKey=Math.max.apply(null,Object.keys(B));return B};m._getDynamicAttribution=function(x,v,B){const {extent:L,scale:N}=v;B=B.tileInfo.scaleToZoom(N);B=Math.min(x.maxKey,Math.round(B));if(!L||null==B||-1>=B)return"";x=
x[B];const M=e.project(L.center.clone().normalize(),v.spatialReference),S={};return x?x.filter(I=>{const P=!S[I.id]&&M&&d.extentContainsPoint(I.extent,M);P&&(S[I.id]=!0);return P}).sort((I,P)=>P.score-I.score||I.objectId-P.objectId).map(I=>I.attribution).join(", "):""};p._createClass(k,[{key:"state",get:function(){return this.get("view.ready")?0<this._pendingAttributions.size?"loading":"ready":"disabled"}}]);return k}(C.HandleOwner);c.__decorate([G.property({readOnly:!0,type:w})],f.prototype,"items",
void 0);c.__decorate([G.property({readOnly:!0})],f.prototype,"state",null);c.__decorate([G.property()],f.prototype,"view",void 0);return f=c.__decorate([g.subclass("esri.widgets.Attribution.AttributionViewModel")],f)})},"esri/widgets/Compass":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/aliasOf ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Compass/CompassViewModel ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/jsxFactory ./support/widgetUtils".split(" "),
function(p,c,f,l,w,C,z,G,E,y,n,g,d,e){l=function(b){function a(u,r){u=b.call(this,u,r)||this;u.goToOverride=null;u.iconClass="esri-icon-locate-circled";u.label=void 0;u.messages=null;u.view=null;u.viewModel=new y;return u}p._inheritsLoose(a,b);var h=a.prototype;h.reset=function(){return this.viewModel.reset()};h.render=function(){const {orientation:u,state:r}=this.viewModel;var q="disabled"===r,k="compass"===("rotation"===r?"rotation":"compass");const m=q?-1:0;q={["esri-disabled"]:q,["esri-interactive"]:!q};
k={["esri-icon-compass"]:k,["esri-icon-dial"]:!k};const {messages:x}=this;return d.tsx("div",{bind:this,class:this.classes("esri-compass esri-widget--button esri-widget",q),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:m,"aria-label":x.reset,title:x.reset},d.tsx("span",{"aria-hidden":"true",class:this.classes("esri-compass__icon",k),styles:this._toRotationTransform(u)}),d.tsx("span",{class:"esri-icon-font-fallback-text"},x.reset))};h._reset=function(){this.viewModel.reset()};h._toRotationTransform=
function(u){return{transform:`rotateZ(${u.z}deg)`}};return a}(E);c.__decorate([f.aliasOf("viewModel.goToOverride")],l.prototype,"goToOverride",void 0);c.__decorate([z.property()],l.prototype,"iconClass",void 0);c.__decorate([z.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],l.prototype,"label",void 0);c.__decorate([z.property(),g.messageBundle("esri/widgets/Compass/t9n/Compass")],l.prototype,"messages",void 0);c.__decorate([f.aliasOf("viewModel.view")],l.prototype,"view",void 0);
c.__decorate([z.property({type:y})],l.prototype,"viewModel",void 0);c.__decorate([n.accessibleHandler()],l.prototype,"_reset",null);return l=c.__decorate([G.subclass("esri.widgets.Compass")],l)})},"esri/widgets/Compass/CompassViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../support/GoTo".split(" "),
function(p,c,f,l,w,C,z,G,E,y,n){f=function(g){function d(b){b=g.call(this,b)||this;b._handles=new l;b.orientation={x:0,y:0,z:0};b.view=null;b._updateForCamera=b._updateForCamera.bind(p._assertThisInitialized(b));b._updateForRotation=b._updateForRotation.bind(p._assertThisInitialized(b));b._updateRotationWatcher=b._updateRotationWatcher.bind(p._assertThisInitialized(b));return b}p._inheritsLoose(d,g);var e=d.prototype;e.initialize=function(){this._handles.add(w.init(this,"view",this._updateRotationWatcher))};
e.destroy=function(){this._handles.destroy();this.view=this._handles=null};e.reset=function(){if(this.get("view.ready")){var b={};"2d"===this.view.type?b.rotation=0:b.heading=0;this.callGoTo({target:b})}};e._updateForRotation=function(b){void 0!==b&&null!==b&&(this.orientation={z:b})};e._updateForCamera=function(b){b&&(this.orientation={x:0,y:0,z:-b.heading})};e._updateRotationWatcher=function(b){this._handles.removeAll();b&&("2d"===b.type?this._handles.add(w.init(this,"view.rotation",this._updateForRotation)):
this._handles.add(w.init(this,"view.camera",this._updateForCamera)))};p._createClass(d,[{key:"canShowNorth",get:function(){const b=this.get("view.spatialReference");return!(!b||!b.isWebMercator&&!b.isGeographic)}},{key:"state",get:function(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}}]);return d}(n.GoToMixin(f));c.__decorate([C.property({readOnly:!0})],f.prototype,"canShowNorth",null);c.__decorate([C.property()],f.prototype,"orientation",void 0);c.__decorate([C.property({readOnly:!0})],
f.prototype,"state",null);c.__decorate([C.property()],f.prototype,"view",void 0);return f=c.__decorate([y.subclass("esri.widgets.CompassViewModel")],f)})},"esri/widgets/NavigationToggle":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/aliasOf ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./NavigationToggle/NavigationToggleViewModel ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/jsxFactory ./support/widgetUtils".split(" "),
function(p,c,f,l,w,C,z,G,E,y,n,g,d,e){l=function(b){function a(u,r){u=b.call(this,u,r)||this;u.iconClass="esri-icon-pan2";u.label=void 0;u.messages=null;u.view=null;u.viewModel=new y;return u}p._inheritsLoose(a,b);var h=a.prototype;h.toggle=function(){return this.viewModel.toggle()};h.render=function(){const u="disabled"===this.get("viewModel.state");var r="pan"===this.get("viewModel.navigationMode");const q={["esri-navigation-toggle__button--active"]:r};r={["esri-navigation-toggle__button--active"]:!r};
const k=u?-1:0,m=this.messages.toggle;return d.tsx("div",{bind:this,class:this.classes("esri-navigation-toggle esri-widget",{["esri-disabled"]:u,["esri-navigation-toggle--horizontal"]:"horizontal"===this.layout}),onclick:this._toggle,onkeydown:this._toggle,tabIndex:k,"aria-label":m,title:m},d.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--pan",q)},d.tsx("span",{class:"esri-icon-pan"})),d.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button",
"esri-navigation-toggle__button--rotate",r)},d.tsx("span",{class:"esri-icon-rotate"})))};h._toggle=function(){this.toggle()};p._createClass(a,[{key:"layout",set:function(u){"horizontal"!==u&&(u="vertical");this._set("layout",u)}}]);return a}(E);c.__decorate([z.property()],l.prototype,"iconClass",void 0);c.__decorate([z.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],l.prototype,"label",void 0);c.__decorate([z.property({value:"vertical"})],l.prototype,"layout",null);c.__decorate([z.property(),
g.messageBundle("esri/widgets/NavigationToggle/t9n/NavigationToggle")],l.prototype,"messages",void 0);c.__decorate([f.aliasOf("viewModel.view")],l.prototype,"view",void 0);c.__decorate([z.property({type:y})],l.prototype,"viewModel",void 0);c.__decorate([n.accessibleHandler()],l.prototype,"_toggle",null);return l=c.__decorate([G.subclass("esri.widgets.NavigationToggle")],l)})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,f,l,w,C,z,G,E,y){f=function(n){function g(e){e=n.call(this,e)||this;e._handles=new l;e.navigationMode="pan";e.view=null;return e}p._inheritsLoose(g,n);var d=g.prototype;d.initialize=function(){this._handles.add(w.when(this,"view.inputManager",this._setNavigationMode.bind(this)))};d.destroy=function(){this._handles.destroy();this.view=this._handles=null};d.toggle=function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())};
d._setNavigationMode=function(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"};p._createClass(g,[{key:"state",get:function(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"}}]);return g}(f);c.__decorate([C.property({readOnly:!0})],f.prototype,"state",null);c.__decorate([C.property()],f.prototype,"navigationMode",void 0);c.__decorate([C.property()],f.prototype,"view",void 0);return f=c.__decorate([y.subclass("esri.widgets.NavigationToggleViewModel")],
f)})},"esri/widgets/Zoom":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/aliasOf ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory ./Zoom/IconButton ./Zoom/ZoomViewModel".split(" "),function(p,c,f,l,w,C,z,G,E,y,n,g,d,e){l=function(b){function a(u,r){u=
b.call(this,u,r)||this;u.iconClass="esri-icon-zoom-in-magnifying-glass";u.label=void 0;u.messages=null;u.view=null;u.viewModel=new e;return u}p._inheritsLoose(a,b);var h=a.prototype;h.initialize=function(){this._zoomInButton=new d({action:this.zoomIn.bind(this),iconClass:"esri-icon-plus"});this._zoomOutButton=new d({action:this.zoomOut.bind(this),iconClass:"esri-icon-minus"})};h.destroy=function(){this._zoomInButton.destroy();this._zoomOutButton.destroy();this._zoomOutButton=this._zoomInButton=null};
h.render=function(){const u=this.viewModel,r={["esri-zoom--horizontal"]:"horizontal"===this.layout};this._zoomInButton.enabled="ready"===u.state&&u.canZoomIn;this._zoomOutButton.enabled="ready"===u.state&&u.canZoomOut;this._zoomInButton.title=this.messages.zoomIn;this._zoomOutButton.title=this.messages.zoomOut;return g.tsx("div",{class:this.classes("esri-zoom esri-widget",r)},this._zoomInButton.render(),this._zoomOutButton.render())};h.zoomIn=function(){return this.viewModel.zoomIn()};h.zoomOut=function(){return this.viewModel.zoomOut()};
p._createClass(a,[{key:"layout",set:function(u){"horizontal"!==u&&(u="vertical");this._set("layout",u)}}]);return a}(E);c.__decorate([z.property()],l.prototype,"iconClass",void 0);c.__decorate([z.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],l.prototype,"label",void 0);c.__decorate([z.property({value:"vertical"})],l.prototype,"layout",null);c.__decorate([z.property(),n.messageBundle("esri/widgets/Zoom/t9n/Zoom")],l.prototype,"messages",void 0);c.__decorate([f.aliasOf("viewModel.view")],
l.prototype,"view",void 0);c.__decorate([z.property({type:e})],l.prototype,"viewModel",void 0);return l=c.__decorate([G.subclass("esri.widgets.Zoom")],l)})},"esri/widgets/Zoom/IconButton":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../Widget ../support/decorators/accessibleHandler ../support/jsxFactory ../support/widgetUtils".split(" "),
function(p,c,f,l,w,C,z,G,E,y,n){l=function(g){function d(){var b=g.apply(this,arguments)||this;b.enabled=!0;b.iconClass="";b.title="";return b}p._inheritsLoose(d,g);var e=d.prototype;e.render=function(){const b=this.enabled?0:-1,a={[this.iconClass]:!!this.iconClass};return y.tsx("div",{bind:this,class:this.classes("esri-widget--button esri-widget",{["esri-disabled"]:!this.enabled,["esri-interactive"]:this.enabled}),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:b,
title:this.title},y.tsx("span",{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",a)}),y.tsx("span",{class:"esri-icon-font-fallback-text"},this.title))};e._triggerAction=function(){this.action.call(this)};return d}(G);c.__decorate([f.property()],l.prototype,"action",void 0);c.__decorate([f.property()],l.prototype,"enabled",void 0);c.__decorate([f.property()],l.prototype,"iconClass",void 0);c.__decorate([f.property()],l.prototype,"title",void 0);c.__decorate([E.accessibleHandler()],
l.prototype,"_triggerAction",null);return l=c.__decorate([z.subclass("esri.widgets.IconButton")],l)})},"esri/widgets/Zoom/ZoomViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./ZoomConditions2D ./ZoomConditions3D".split(" "),function(p,c,f,l,w,C,z,G,
E,y,n){f=function(g){function d(b){b=g.call(this,b)||this;b.canZoomIn=!1;b.canZoomOut=!1;return b}p._inheritsLoose(d,g);var e=d.prototype;e.destroy=function(){this.view=null};e.zoomIn=function(){if(this.canZoomIn){var b=this.view;"2d"===b.type?b.mapViewNavigation.zoomIn():l.ignoreAbortErrors(b.goTo({zoomFactor:2}))}};e.zoomOut=function(){if(this.canZoomOut){var b=this.view;"2d"===b.type?b.mapViewNavigation.zoomOut():l.ignoreAbortErrors(b.goTo({zoomFactor:.5}))}};p._createClass(d,[{key:"state",get:function(){return this.get("view.ready")?
"ready":"disabled"}},{key:"view",set:function(b){b?"2d"===b.type?this._zoomConditions=new y({view:b}):"3d"===b.type&&(this._zoomConditions=new n({view:b})):this._zoomConditions=null;this._set("view",b)}}]);return d}(f);c.__decorate([w.property()],f.prototype,"_zoomConditions",void 0);c.__decorate([w.property({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],f.prototype,"canZoomIn",void 0);c.__decorate([w.property({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],f.prototype,"canZoomOut",void 0);
c.__decorate([w.property({readOnly:!0})],f.prototype,"state",null);c.__decorate([w.property()],f.prototype,"view",null);return f=c.__decorate([E.subclass("esri.widgets.Zoom.ZoomViewModel")],f)})},"esri/widgets/Zoom/ZoomConditions2D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,f,l,w,C,z,G){f=function(E){function y(){return E.apply(this,arguments)||this}p._inheritsLoose(y,E);p._createClass(y,[{key:"canZoomIn",get:function(){if(!this.get("view.ready"))return!1;const n=this.get("view.animation.target.scale")||this.get("view.scale"),g=this.get("view.constraints.effectiveMaxScale");return 0===g||n>g}},{key:"canZoomOut",get:function(){if(!this.get("view.ready"))return!1;const n=this.get("view.animation.target.scale")||this.get("view.scale"),g=this.get("view.constraints.effectiveMinScale");
return 0===g||n<g}}]);return y}(f);c.__decorate([l.property({readOnly:!0})],f.prototype,"canZoomIn",null);c.__decorate([l.property({readOnly:!0})],f.prototype,"canZoomOut",null);c.__decorate([l.property()],f.prototype,"view",void 0);return f=c.__decorate([G.subclass("esri.widgets.Zoom.ZoomConditions2D")],f)})},"esri/widgets/Zoom/ZoomConditions3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(p,c,f,l,w,C,z,G){f=function(E){function y(){return E.apply(this,arguments)||this}p._inheritsLoose(y,E);p._createClass(y,[{key:"canZoomIn",get:function(){return!!this.get("view.ready")}},{key:"canZoomOut",get:function(){return!!this.get("view.ready")}}]);return y}(f);c.__decorate([l.property({readOnly:!0})],f.prototype,"canZoomIn",null);c.__decorate([l.property({readOnly:!0})],f.prototype,"canZoomOut",null);c.__decorate([l.property()],f.prototype,"view",void 0);return f=c.__decorate([G.subclass("esri.widgets.Zoom.ZoomConditions3D")],
f)})},"esri/webmap/background/ColorBackground":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),function(p,c,f,l,w,C,z,G,E,y){var n;l=n=function(g){function d(e){e=g.call(this,e)||this;e.color=new f([0,0,0,1]);return e}p._inheritsLoose(d,g);
d.prototype.clone=function(){return new n(w.clone({color:this.color}))};return d}(l.JSONSupport);c.__decorate([C.property({type:f,json:{write:!0}})],l.prototype,"color",void 0);return l=n=c.__decorate([y.subclass("esri.webmap.background.ColorBackground")],l)})},"*noref":1}});
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Graphic ../core/Collection ../core/CollectionFlattener ../core/Error ../core/has ../core/Logger ../core/maybe ../core/watchUtils ../core/workers/workers ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./BreakpointsOwner ./DOMContainer ./MapViewBase ./2d/input/MapViewInputManager ./2d/support/HighlightOptions ./support/screenshotUtils ./support/screenUtils ./support/WebGLRequirements ./ui/2d/DefaultUI2D ../webmap/background/ColorBackground".split(" "),function(p,
c,f,l,w,C,z,G,E,y,n,g,d,e,b,a,h,u,r,q,k,m,x,v,B){function L(){return N.apply(this,arguments)}function N(){N=c._asyncToGenerator(function*(){const [,{GraphicsView2D:F,GraphicContainer:D,LabelManager:H,MapViewNavigation:K,MagnifierView2D:J,Stage:T}]=yield Promise.all([new Promise(function(Y,da){p(["./webgl"],Y,da)}),new Promise(function(Y,da){p(["./2d/mapViewDeps"],Y,da)})]);P=F;V=D;ca=H;A=K;t=J;I=T});return N.apply(this,arguments)}function M(F,D,H){F&&(Array.isArray(F)||w.isCollection(F)?0!==F.length&&
F.forEach(K=>M(K,D,H)):F instanceof l?D.add(F):H.add(F))}const S=E.getLogger("esri.views.MapView");let I,P,V,ca,A,t;E=function(F){function D(K){var J=F.call(this,K)||this;J._magnifierView=null;J._stage=null;J._resolveWhenReady=[];J.rootLayerViews=new C({getCollections:()=>{var T,Y;return[null==(T=J.basemapView)?void 0:T.baseLayerViews,J.layerViews,null==(Y=J.basemapView)?void 0:Y.referenceLayerViews]},getChildrenFunction:()=>null});J.floors=new w;J.graphicsView=null;J.highlightOptions=new q;J.inputManager=
new r({view:c._assertThisInitialized(J)});J.mapViewNavigation=null;J.supersampleScreenhotsEnabled=!1;J.ui=new v;J.rendering=!1;g.initialize();return J}c._inheritsLoose(D,F);var H=D.prototype;H.destroy=function(){this.rootLayerViews.destroy();this.inputManager.destroy();this._set("inputManager",null)};H.toMap=function(K){return m.isSupportedScreenPointEvent(K)?(K=m.createScreenPointFromSupportedEvent(this,K),F.prototype.toMap.call(this,K)):F.prototype.toMap.call(this,K)};H.hitTest=function(K,J){const T=
m.isSupportedScreenPointEvent(K)?m.createScreenPointFromSupportedEvent(this,K):K;if(!this.ready||isNaN(T.x)||isNaN(T.y))return Promise.resolve({screenPoint:T,results:[]});const Y=this.toMap(T);K=[this.graphicsView];K.push.apply(K,this.allLayerViews.toArray().reverse());const da=new Set,ha=new Set,ia=new Set,oa=new Set;J&&(M(J&&J.include,da,ia),M(J&&J.exclude,ha,oa));return Promise.all(K.map(ma=>!ma||!ma.hitTest||0<ia.size&&!ma.layer||0<ia.size&&ma.layer&&!ia.has(ma.layer)||0<oa.size&&ma.layer&&oa.has(ma.layer)?
null:ma.hitTest(T.x,T.y))).then(ma=>({screenPoint:T,results:ma.filter(Z=>null!=Z&&(0<da.size?da.has(Z):!0)&&(0<ha.size?!ha.has(Z):!0)).map(Z=>({mapPoint:Y,graphic:Z}))}))};H.takeScreenshot=function(K){return this.ready?this._stage.takeScreenshot(k.toRenderSettings(K,this),this.allLayerViews):Promise.reject("Map view cannot be used before it is ready")};H.on=function(K,J,T,Y){return(T=this.inputManager&&this.viewEvents.on(K,J,T,Y))?T:F.prototype.on.call(this,K,J)};H.hasEventListener=function(K){return F.prototype.hasEventListener.call(this,
K)||this.viewEvents.hasHandler(K)};H.whenLayerView=function(K){return F.prototype.whenLayerView.call(this,K)};H.graphicChanged=function(K){this.graphicsView&&this.graphicsView.graphicUpdateHandler(K)};H.whenReady=function(){return new Promise(K=>{this.ready?K(this):this._resolveWhenReady.push(K)})};H.forceDOMReadyCycle=function(){this.forceReadyCycle()};H.validate=function(){let K=x.check({checkMajorWebPerformanceCaveat:!1});G("safari")&&9>G("safari")&&(K=new z("mapview:browser-not-supported","This browser is not supported by MapView (Safari \x3c 9)",
{type:"safari",requiredVersion:9,detectedVersion:G("safari")}));return y.isSome(K)?(S.warn("#validate()",K.message),Promise.reject(K)):L()};H._startup=function(){this.timeline.begin("MapView Startup");F.prototype._startup.call(this);this.graphics.owner=this;const K=new I(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenhotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,
timeline:this.timeline});var J=new P({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new V(this.featuresTilingScheme)});const T=new A({view:this,animationManager:this.animationManager}),Y=new ca({view:this});this._magnifierView=new t;this._magnifierView.magnifier=this.magnifier;this._stage=K;this.frameTask.graphicsView=J;this._set("graphicsView",J);this._set("mapViewNavigation",T);this._set("labelManager",Y);this.handles.add([this.rootLayerViews.on("change",
()=>this._updateStageChildren()),K.on("post-render",()=>this._set("rendering",K.renderRequested)),K.on("will-render",()=>this._set("rendering",K.renderRequested)),K.on("webgl-error",da=>this.fatalError=da.error),n.init(this,"stationary",da=>K.stationary=da,!0),n.init(this,"state.id",()=>K.state=this.state,!0),n.init(this,"background",da=>{K.background=da;this._magnifierView.background=da},!0),n.init(this,"magnifier",da=>this._magnifierView.magnifier=da,!0),n.init(this,"renderingOptions",da=>K.renderingOptions=
da,!0),n.init(this,"highlightOptions",()=>K.highlightOptions=this.highlightOptions,!0)],"map-view");K.state=this.state;this._updateStageChildren();J=this._resolveWhenReady;this._resolveWhenReady=[];J.forEach(da=>da(this));this.timeline.end("MapView Startup")};H._teardown=function(){this.handles.remove("map-view");this.layerViewManager.clear();this.labelManager.destroy();this._magnifierView.destroy();this._stage.destroy();this.graphicsView.destroy();this.mapViewNavigation.destroy();this._stage=null;
this._set("graphicsView",null);this._magnifierView=null;this._set("labelManager",null);this._set("mapViewNavigation",null);this.graphics.owner=null;F.prototype._teardown.call(this)};H._updateStageChildren=function(){this._stage.removeAllChildren();this.rootLayerViews.forEach(K=>{this._stage.addChild(K.container)});this._stage.addChild(this.graphicsView.container);this._stage.addChild(this._magnifierView)};c._createClass(D,[{key:"background",get:function(){return this.get("map.initialViewProperties.background")||
null},set:function(K){void 0===K?this._clearOverride("background"):this._override("background",K)}},{key:"textureManager",get:function(){return this._stage.painter.textureManager}},{key:"navigating",get:function(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}}]);return D}(a.BreakpointsOwner(h.DOMContainer(u)));f.__decorate([d.property({type:B})],E.prototype,"background",null);f.__decorate([d.property()],E.prototype,"floors",void 0);f.__decorate([d.property()],E.prototype,
"graphicsView",void 0);f.__decorate([d.property({type:q})],E.prototype,"highlightOptions",void 0);f.__decorate([d.property({readOnly:!0})],E.prototype,"inputManager",void 0);f.__decorate([d.property({readOnly:!0})],E.prototype,"textureManager",null);f.__decorate([d.property({readOnly:!0})],E.prototype,"mapViewNavigation",void 0);f.__decorate([d.property({type:Boolean})],E.prototype,"navigating",null);f.__decorate([d.property({type:Boolean,constructOnly:!0})],E.prototype,"supersampleScreenhotsEnabled",
void 0);f.__decorate([d.property({type:v})],E.prototype,"ui",void 0);f.__decorate([d.property({readOnly:!0})],E.prototype,"rendering",void 0);f.__decorate([d.property({constructOnly:!0})],E.prototype,"renderCanvas",void 0);f.__decorate([d.property({constructOnly:!0})],E.prototype,"deactivatedWebGLExtensions",void 0);f.__decorate([d.property({constructOnly:!0})],E.prototype,"debugWebGLExtensions",void 0);return E=f.__decorate([b.subclass("esri.views.MapView")],E)});