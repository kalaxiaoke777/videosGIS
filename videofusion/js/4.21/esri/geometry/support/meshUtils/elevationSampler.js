// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.21/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../core/workers/workers ../../../chunks/vec3f64 ../ray ../triangle ./ElevationSamplerWorker ../../../layers/support/ElevationSampler".split(" "),function(p,q,k,u,v,r,w,x,y){function l(){l=q._asyncToGenerator(function*(b,d){const a=yield z(),c=yield A.createIndex(b,a);B(a);return new C(b,c,d)});return l.apply(this,arguments)}function z(){++m;f&&(clearTimeout(f),f=0);return g?g:g=u.open("ElevationSamplerWorker").catch(()=>
null)}function B(b){--m;k.isSome(b)&&0===m&&(f=setTimeout(()=>{b.close();g=null;f=0},1E4))}let C=function(b){function d(a,c,h){var e=b.call(this)||this;e.rindex=c;e.demResolution={min:0,max:0};e.spatialReference=a.spatialReference.clone();e.extent=a.extent.clone();e.noDataValue=k.isSome(h)&&h.noDataValue||0;return e}q._inheritsLoose(d,b);d.prototype.elevationAt=function(a){a=this.projectIfRequired(a,this.spatialReference);if(k.isNone(a))return this.noDataValue;let c=Number.NEGATIVE_INFINITY;r.fromValues([a.x,
a.y,0],[0,0,-1],t);this.rindex.search({minX:a.x,maxX:a.x,minY:a.y,maxY:a.y},h=>{w.intersectRay(h,t,n)&&n[2]>c&&(c=n[2])});return c===Number.NEGATIVE_INFINITY?this.noDataValue:c};return d}(y.ElevationSamplerBase);const A=new x.ElevationSamplerWorker;let m=0,g=null,f=0;const t=r.fromValues([0,0,0],[0,0,-1]),n=v.create();p.create=function(b,d){return l.apply(this,arguments)};Object.defineProperty(p,"__esModule",{value:!0})});