// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.21/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/accessorSupport/originUtils":function(){define(["exports","../multiOriginJSONSupportUtils"],function(b,a){b.updateOrigins=function(d){d&&d.writtenProperties&&d.writtenProperties.forEach(h=>{const n=h.target;h.newOrigin&&h.oldOrigin!==h.newOrigin&&a.isMultiOriginJSONMixin(n)&&n.updateOrigin(h.propName,h.newOrigin)})};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/core/multiOriginJSONSupportUtils":function(){define(["exports"],function(b){b.isMultiOriginJSONMixin=
function(a){return a&&"getAtOrigin"in a&&"originOf"in a};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils".split(" "),
function(b,a,d,h,n,p,H,k,J,x,v,L,K,P,t,l,B,e,g,c,m,E,r){function F(){return!!pa&&P.isLoaded()}function R(A){p.isNone(ya)&&(ya=Promise.all([P.load(),(new Promise(function(M,z){b(["../chunks/geometryEngineBase"],M,z)})).then(function(M){return M.geometryEngineBase}),new Promise(function(M,z){b(["./geometryAdapters/hydrated"],M,z)})]));return ya.then(([,M,{hydratedAdapter:z}])=>{H.throwIfAborted(A);wa=z;pa=M.default;pa._enableProjection(P.pe)})}function w(A,M,z,X,ra=null){if(p.isNone(z)||p.isNone(X))return M;
if(fa(z,X,ra))return M.map(ua=>p.unwrap(ea(ua,z,X)));if(p.isNone(ra)){const ua=E.cacheKey(z,X);void 0!==Da[ua]?ra=Da[ua]:(ra=ca(z,X,null),p.isNone(ra)&&(ra=new E),Da[ua]=ra)}if(p.isNone(pa))throw new Na;return pa._project(A,M,z,X,ra)}function ca(A,M,z=null){if(p.isNone(pa))throw new Na;if(p.isNone(A)||p.isNone(M))return null;A=pa._getTransformation(wa,A,M,z,null==z?void 0:z.spatialReference);return null!==A?E.fromGE(A):null}function fa(A,M,z){return z?!1:r.equals(A,M)?!0:r.isValid(A)&&r.isValid(M)&&
!!aa(A,M,Za)}function ja(){ja=d._asyncToGenerator(function*(A,M,z,X){if(!F())if(Array.isArray(A))for(const {source:ra,dest:ua,geographicTransformation:za}of A){if(!fa(ra,ua,za))return R(X)}else if(!fa(A,M,z))return R(X)});return ja.apply(this,arguments)}function ea(A,M,z){return A?"x"in A?sa(A,M,new t,z,0):"xmin"in A?u(A,M,new L,z,0):"rings"in A?f(A,M,new l,z,0):"paths"in A?va(A,M,new B,z,0):"points"in A?oa(A,M,new K,z,0):null:null}function sa(A,M,z,X,ra){Ca[0]=A.x;Ca[1]=A.y;const ua=A.z;Ca[2]=void 0!==
ua?ua:ra;if(!C(Ca,M,0,Ca,X,0,1))return null;z.x=Ca[0];z.y=Ca[1];z.spatialReference=X;void 0===ua?(z.z=void 0,z.hasZ=!1):(z.z=Ca[2],z.hasZ=!0);void 0===A.m?(z.m=void 0,z.hasM=!1):(z.m=A.m,z.hasM=!0);return z}function oa(A,M,z,X,ra){const {points:ua,hasZ:za,hasM:Ba}=A;A=[];const Ha=ua.length,Ga=[];for(var Fa of ua)Ga.push(Fa[0],Fa[1],za?Fa[2]:ra);if(!C(Ga,M,0,Ga,X,0,Ha))return null;for(M=0;M<Ha;++M){ra=3*M;Fa=Ga[ra];const Ka=Ga[ra+1];za&&Ba?A.push([Fa,Ka,Ga[ra+2],ua[M][3]]):za?A.push([Fa,Ka,Ga[ra+2]]):
Ba?A.push([Fa,Ka,ua[M][2]]):A.push([Fa,Ka])}z.points=A;z.spatialReference=X;z.hasZ=za;z.hasM=Ba;return z}function va(A,M,z,X,ra){const {paths:ua,hasZ:za,hasM:Ba}=A;A=[];if(!D(ua,za,Ba,M,A,X,ra))return null;z.paths=A;z.spatialReference=X;z.hasZ=za;z.hasM=Ba;return z}function f(A,M,z,X,ra){const {rings:ua,hasZ:za,hasM:Ba}=A;A=[];if(!D(ua,za,Ba,M,A,X,ra))return null;z.rings=A;z.spatialReference=X;z.hasZ=za;z.hasM=Ba;return z}function u(A,M,z,X,ra){const {xmin:ua,ymin:za,xmax:Ba,ymax:Ha,hasZ:Ga,hasM:Fa}=
A;if(!V(ua,za,Ga?A.zmin:ra,M,Ca,X))return null;z.xmin=Ca[0];z.ymin=Ca[1];Ga&&(z.zmin=Ca[2]);if(!V(Ba,Ha,Ga?A.zmax:ra,M,Ca,X))return null;z.xmax=Ca[0];z.ymax=Ca[1];Ga&&(z.zmax=Ca[2]);Fa&&(z.mmin=A.mmin,z.mmax=A.mmax);z.spatialReference=X;return z}function V(A,M,z,X,ra,ua){Ea[0]=A;Ea[1]=M;Ea[2]=z;return C(Ea,X,0,ra,ua,0,1)}function Z(A,M,z,X){if(p.isNone(M)||p.isNone(X)||2>A.length)return!1;2===A.length&&(Ea[0]=A[0],Ea[1]=A[1],Ea[2]=0,A=Ea);return C(A,M,0,z,X,0,1)}function y(A,M,z){if(p.isNone(M))return!1;
M=U(M,Ua);M=Ma[M][6];if(p.isNone(M))return!1;M(A,0,Ea,0);z!==Ea&&(z[0]=Ea[0],z[1]=Ea[1],2<z.length&&(z[2]=Ea[2]));return!0}function C(A,M,z,X,ra,ua,za=1){M=aa(M,ra,Za);if(p.isNone(M))return!1;if(M===ba){if(A===X&&z===ua)return!0;za=z+3*za;for(let Ba=z,Ha=ua;Ba<za;Ba++,Ha++)X[Ha]=A[Ba];return!0}za=z+3*za;for(let Ba=z,Ha=ua;Ba<za;Ba+=3,Ha+=3)M(A,Ba,X,Ha);return!0}function D(A,M,z,X,ra,ua,za=0){const Ba=[];for(const Ha of A)for(const Ga of Ha)Ba.push(Ga[0],Ga[1],M?Ga[2]:za);if(!C(Ba,X,0,Ba,ua,0,Ba.length/
3))return!1;X=0;ra.length=0;for(const Ha of A){A=[];for(const Ga of Ha)M&&z?A.push([Ba[X++],Ba[X++],Ba[X++],Ga[3]]):M?A.push([Ba[X++],Ba[X++],Ba[X++]]):(z?A.push([Ba[X++],Ba[X++],Ga[2]]):A.push([Ba[X++],Ba[X++]]),X++);ra.push(A)}return!0}function T(A,M,z,X){A=Math.abs(Pa*A)+Math.asin(z/(X+M));return A>=Math.PI/2?Number.MAX_VALUE:z/Math.cos(A)}function q(A,M,z){const X=Math.sin(A);A=Math.cos(A);const ra=Math.sin(M);M=Math.cos(M);z[0]=-X;z[4]=-ra*A;z[8]=M*A;z[12]=0;z[1]=A;z[5]=-ra*X;z[9]=M*X;z[13]=
0;z[2]=0;z[6]=M;z[10]=ra;z[14]=0;z[3]=0;z[7]=0;z[11]=0;z[15]=1;return z}function G(A,M,z){q(A,M,z);J.transpose(z,z);return z}function U(A,M){if(M.spatialReference===A)return M.spatialReferenceId;M.spatialReference=A;"metersPerUnit"in M&&(M.metersPerUnit=k.getMetersPerUnitForSR(A,1));return A.wkt===e.SphericalECEFSpatialReference.wkt?M.spatialReferenceId=1:r.isWGS84(A)?M.spatialReferenceId=2:r.isWebMercator(A)?M.spatialReferenceId=3:r.isPlateCarree(A)?M.spatialReferenceId=12:A.wkt===e.WGS84ECEFSpatialReference.wkt?
M.spatialReferenceId=4:4490===A.wkid?M.spatialReferenceId=5:A.wkt===e.SphericalPCPFMars.wkt?M.spatialReferenceId=7:A.wkt===e.SphericalPCPFMoon.wkt?M.spatialReferenceId=9:r.isMars(A)?M.spatialReferenceId=8:r.isMoon(A)?M.spatialReferenceId=10:M.spatialReferenceId=0}function ba(A,M,z,X){A!==z&&(z[X++]=A[M++],z[X++]=A[M++],z[X]=A[M])}function na(A,M,z,X){z[X++]=Wa*(A[M++]/c.earth.radius);z[X++]=Wa*(Math.PI/2-2*Math.atan(Math.exp(-A[M++]/c.earth.radius)));z[X]=A[M]}function O(A,M,z,X){na(A,M,z,X);da(z,
X,z,X)}function W(A,M,z,X){na(A,M,z,X);Oa(z,X,z,X)}function ka(A,M,z,X,ra){var ua=.4999999*Math.PI;ua=n.clamp(Pa*A[M+1],-ua,ua);ua=Math.sin(ua);z[X++]=Pa*A[M]*ra.radius;z[X++]=ra.halfSemiMajorAxis*Math.log((1+ua)/(1-ua));z[X]=A[M+2]}function ma(A,M,z,X){ka(A,M,z,X,c.earth)}function ia(A,M,z,X){z[X]=A[M]*La;z[X+1]=A[M+1]*La;z[X+2]=A[M+2]}function Q(A,M,z,X){z[X]=A[M]*Qa;z[X+1]=A[M+1]*Qa;z[X+2]=A[M+2]}function N(A,M,z,X,ra){ra+=A[M+2];const ua=Pa*A[M+1];A=Pa*A[M];M=Math.cos(ua);z[X++]=Math.cos(A)*M*
ra;z[X++]=Math.sin(A)*M*ra;z[X]=Math.sin(ua)*ra}function I(A,M,z,X){N(A,M,z,X,c.moon.radius)}function S(A,M,z,X){N(A,M,z,X,c.mars.radius)}function da(A,M,z,X){N(A,M,z,X,c.earth.radius)}function ha(A,M,z,X,ra){var ua=A[M];const za=A[M+1];M=A[M+2];A=Math.sqrt(ua*ua+za*za+M*M);M=n.asinClamped(M/(0===A?1:A));ua=Math.atan2(za,ua);z[X++]=Wa*ua;z[X++]=Wa*M;z[X]=A-ra}function ta(A,M,z,X){ha(A,M,z,X,c.moon.radius)}function xa(A,M,z,X){ha(A,M,z,X,c.mars.radius)}function Aa(A,M,z,X){ha(A,M,z,X,c.earth.radius)}
function Ja(A,M,z,X){Aa(A,M,z,X);ma(z,X,z,X)}function Ra(A,M,z,X){Aa(A,M,z,X);Oa(z,X,z,X)}function Oa(A,M,z,X){{var ra=c.earth;const za=Pa*A[M];var ua=Pa*A[M+1];A=A[M+2];M=Math.sin(ua);ua=Math.cos(ua);const Ba=ra.radius/Math.sqrt(1-ra.eccentricitySquared*M*M);z[X++]=(Ba+A)*ua*Math.cos(za);z[X++]=(Ba+A)*ua*Math.sin(za);z[X++]=(Ba*(1-ra.eccentricitySquared)+A)*M}}function Ia(A,M,z,X){var ra=m.earthEllipsoidConstants,ua=A[M],za=A[M+1];A=A[M+2];let Ba;M=Math.abs(A);var Ha=ua*ua+za*za;var Ga=Math.sqrt(Ha);
var Fa=Ha+A*A;var Ka=Math.sqrt(Fa);ua=Math.atan2(za,ua);var Ta=A*A/Fa;Fa=Ha/Fa;za=ra.a2/Ka;Ha=ra.a3-ra.a4/Ka;.3<Fa?(Ta=M/Ka*(1+Fa*(ra.a1+za+Ta*Ha)/Ka),Ka=Math.asin(Ta),za=Ta*Ta,Fa=Math.sqrt(1-za)):(Fa=Ga/Ka*(1-Ta*(ra.a5-za-Fa*Ha)/Ka),Ka=Math.acos(Fa),za=1-Fa*Fa,Ta=Math.sqrt(za));Ba=1-c.earth.eccentricitySquared*za;za=c.earth.radius/Math.sqrt(Ba);ra=ra.a6*za;za=Ga-za*Fa;Ha=M-ra*Ta;M=Fa*za+Ta*Ha;Ga=Fa*Ha-Ta*za;ra=Ga/(ra/Ba+M);Ka+=ra;0>A&&(Ka=-Ka);z[X++]=Wa*ua;z[X++]=Wa*Ka;z[X]=M+Ga*ra/2}function Xa(A,
M,z,X){Ia(A,M,z,X);da(z,X,z,X)}function Y(A,M,z,X){Ia(A,M,z,X);ma(z,X,z,X)}function aa(A,M,z=qa()){return p.isNone(A)||p.isNone(M)?null:la(A,M,z).projector}function la(A,M,z){if(p.isNone(A)||p.isNone(M)||z.source.spatialReference===A&&z.dest.spatialReference===M)return z;const X=U(A,z.source),ra=U(M,z.dest);0===X&&0===ra?r.equals(A,M)?z.projector=ba:z.projector=null:z.projector=Ma[X][ra];return z}function qa(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,
spatialReferenceId:0,metersPerUnit:1},projector:ba}}let pa=null,wa=null,ya=null,Da={},Na=function(A){function M(){return A.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}d._inheritsLoose(M,A);return M}(h);const La=c.earth.radius*Math.PI/180,Qa=180/(c.earth.radius*Math.PI),Ma={[2]:{[5]:null,[8]:null,[10]:null,[11]:ba,[6]:ba,[1]:da,[7]:null,[9]:null,[0]:null,[3]:ma,[12]:ia,[2]:ba,[4]:Oa},[5]:{[5]:ba,[8]:null,[10]:null,[11]:ba,[6]:ba,[1]:da,[7]:null,
[9]:null,[0]:null,[3]:null,[12]:ia,[2]:null,[4]:Oa},[8]:{[5]:null,[8]:ba,[10]:null,[11]:ba,[6]:null,[1]:null,[7]:S,[9]:null,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:ba,[11]:ba,[6]:null,[1]:null,[7]:null,[9]:I,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[11]:na,[6]:na,[1]:O,[7]:null,[9]:null,[0]:null,[3]:ba,[12]:function(A,M,z,X){na(A,M,z,X);ia(z,X,z,X)},[2]:na,[4]:W},[4]:{[5]:Ia,[8]:null,[10]:null,[11]:Ia,[6]:Ia,[1]:Xa,[7]:null,
[9]:null,[0]:null,[3]:Y,[12]:function(A,M,z,X){Ia(A,M,z,X);ia(z,X,z,X)},[2]:Ia,[4]:ba},[1]:{[5]:Aa,[8]:null,[10]:null,[11]:Aa,[6]:Aa,[1]:ba,[7]:null,[9]:null,[0]:null,[3]:Ja,[12]:function(A,M,z,X){Aa(A,M,z,X);ia(z,X,z,X)},[2]:Aa,[4]:Ra},[7]:{[5]:null,[8]:xa,[10]:null,[11]:xa,[6]:null,[1]:null,[7]:ba,[9]:null,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[9]:{[5]:null,[8]:null,[10]:ta,[11]:ta,[6]:null,[1]:null,[7]:null,[9]:ba,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,
[11]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:ba,[3]:null,[12]:null,[2]:null,[4]:null},[11]:{[5]:ba,[8]:ba,[10]:ba,[11]:ba,[6]:ba,[1]:da,[7]:S,[9]:I,[0]:null,[3]:ma,[12]:ia,[2]:ba,[4]:Oa},[6]:{[5]:null,[8]:null,[10]:null,[11]:ba,[6]:ba,[1]:da,[7]:null,[9]:null,[0]:null,[3]:null,[12]:ia,[2]:ba,[4]:Oa},[12]:{[5]:Q,[8]:null,[10]:null,[11]:Q,[6]:Q,[1]:function(A,M,z,X){Q(A,M,z,X);da(z,X,z,X)},[7]:null,[9]:null,[0]:null,[3]:function(A,M,z,X){Q(A,M,z,X);ma(z,X,z,X)},[12]:ba,[2]:Q,[4]:function(A,M,z,
X){Q(A,M,z,X);Oa(z,X,z,X)}}},Ua={spatialReference:null,spatialReferenceId:0},$a={spatialReference:null,spatialReferenceId:0},Za=qa(),ab=qa(),Pa=n.deg2rad(1),Wa=n.rad2deg(1),Ea=v.create(),Sa=v.create(),Va=v.create(),Ca=v.create(),Ya=v.create();a.canProjectToWGS84ComparableLonLat=function(A){if(p.isNone(A))return!1;A=U(A,Ua);return!!Ma[A][6]};a.canProjectWithoutEngine=fa;a.computeENUToSphericalPCPFLocalRotation=q;a.computeSphericalPCPFToENULocalRotation=G;a.computeTranslationToOriginAndRotation=function(A,
M,z,X){if(p.isNone(A)||p.isNone(X))return!1;var ra=U(A,Ua),ua=U(X,$a);if(ra===ua&&1!==ua&&7!==ua&&9!==ua&&(0!==ra||r.equals(A,X)))return J.identity(z),J.translate(z,z,M),!0;if(1===ua||7===ua||9===ua){ra=Ma[ra][11];ua=Ma[11][ua];if(p.isNone(ra)||p.isNone(ua))return!1;ra(M,0,Sa,0);ua(Sa,0,Va,0);q(Pa*Sa[0],Pa*Sa[1],z);z[12]=Va[0];z[13]=Va[1];z[14]=Va[2];return!0}if(!(3!==ua&&12!==ua||2!==ra&&1!==ra)){A=Ma[ra][11];ua=Ma[11][ua];if(p.isNone(A)||p.isNone(ua))return!1;A(M,0,Sa,0);ua(Sa,0,Va,0);2===ra?J.identity(z):
G(Pa*Sa[0],Pa*Sa[1],z);z[12]=Va[0];z[13]=Va[1];z[14]=Va[2];return!0}return!1};a.getProjectorName=function(A,M){switch(aa(A,M,Za)){case ba:return"copy3";case da:return"wgs84ToSphericalECEF";case ma:return"wgs84ToWebMercator";case ia:return"wgs84ToPlateCarree";case Oa:return"wgs84ToWGS84ECEF";case na:return"webMercatorToWGS84";case O:return"webMercatorToSphericalECEF";case W:return"webMercatorToWGS84ECEF";case Ia:return"wgs84ECEFToWGS84";case Xa:return"wgs84ECEFToSphericalECEF";case Y:return"wgs84ECEFToWebMercator";
case Aa:return"sphericalECEFToWGS84";case Ja:return"sphericalECEFToWebMercator";case xa:return"sphericalMarsPCPFToMars2000";case ta:return"sphericalMoonPCPFToMoon2000";case Ra:return"sphericalECEFToWGS84ECEF";case S:return"mars2000ToSphericalPCPF";case I:return"moon2000ToSphericalPCPF";default:return null}};a.getTransformation=ca;a.getTransformations=function(A,M,z=null){if(p.isNone(pa))throw new Na;A=pa._getTransformationBySuitability(wa,A,M,z,null==z?void 0:z.spatialReference);if(null!==A){M=[];
for(const X of A)M.push(E.fromGE(X));return M}return[]};a.initializeProjection=function(A,M,z,X){return ja.apply(this,arguments)};a.isLoaded=F;a.isSupported=function(){return!0};a.load=R;a.localLinearScaleFactors=function(A,M,z,X){if(p.isNone(M)||p.isNone(X))return!1;const ra=U(M,Ua);var ua=U(X,$a);if(ra===ua&&0!==ra||r.equals(M,X))return z[0]=1,z[1]=1,z[2]=1,!0;if(1===ra){M=x.length(A);A=M/Math.sqrt(A[0]*A[0]+A[1]*A[1]);M/=c.earth.radius;if(3===ua)return z[0]=A*M,z[1]=A*M,z[2]=1,!0;if(2===ua||5===
ua)return ua=180/(c.earth.radius*Math.PI),z[0]=ua*A*M,z[1]=ua*M,z[2]=1,!0}else if(12===ra&&(2===ua||5===ua))return z[0]=Qa,z[1]=Qa,z[2]=1,!0;return!1};a.lonLatToSphericalPCPF=function(A,M,z,X,ra=0){X+=ra;ra=Math.cos(z);A[0]=Math.cos(M)*ra*X;A[1]=Math.sin(M)*ra*X;A[2]=Math.sin(z)*X};a.lonLatToWebMercatorComparable=ka;a.project=function(A,M,z=null){return Array.isArray(A)?0===A.length?[]:w(wa,A,A[0].spatialReference,M,z):w(wa,[A],A.spatialReference,M,z)[0]};a.projectBoundingRect=function(A,M,z,X){if(null==
A)return!1;if(r.equals(M,X))return g.copy(z,A),!0;Ea[0]=A[0];Ea[1]=A[1];Ea[2]=0;if(!C(Ea,M,0,Ea,X,0,1))return!1;z[0]=Ea[0];z[1]=Ea[1];Ea[0]=A[2];Ea[1]=A[3];Ea[2]=0;if(!C(Ea,M,0,Ea,X,0,1))return!1;z[2]=Ea[0];z[3]=Ea[1];return!0};a.projectBoundingSphere=function(A,M,z,X){if(p.isNone(M)||p.isNone(X))return!1;M=la(M,X,ab);if(M.projector===ba)return z[0]=A[0],z[1]=A[1],z[2]=A[2],z[3]=A[3],!0;if(p.isNone(M.projector))return!1;const {source:ra,dest:ua}=M;if(3===ua.spatialReferenceId){M=Ma[ra.spatialReferenceId][2];
if(p.isNone(M))return!1;M(A,0,Sa,0);ma(Sa,0,z,0);z[3]=T(Sa[1],A[2],A[3],c.earth.radius);return!0}if(2!==ra.spatialReferenceId&&5!==ra.spatialReferenceId||12!==ua.spatialReferenceId)M.projector(A,0,z,0),z[3]=A[3]*ra.metersPerUnit/ua.metersPerUnit;else{X=Ma[1][12];let za=A[3];p.isSome(Ma[ra.spatialReferenceId][1])&&p.isSome(X)&&(za=T(A[1],A[2],A[3],c.earth.radius));M.projector(A,0,z,0);z[3]=za}return!0};a.projectBuffer=C;a.projectDirection=function(A,M,z,X,ra){x.copy(Ca,A);x.add(Ya,A,M);Z(Ca,z,Ca,ra);
Z(Ya,z,Ya,ra);x.subtract(X,Ya,Ca);x.normalize(X,X)};a.projectExtent=function(A,M,z=M.spatialReference,X=0){return p.isSome(z)&&p.isSome(u(A,A.spatialReference,M,z,X))};a.projectMany=w;a.projectMultipoint=function(A,M,z=M.spatialReference,X=0){return p.isNone(z)?!1:p.isSome(oa(A,A.spatialReference,M,z,X))};a.projectPoint=function(A,M,z=M.spatialReference,X=0){return p.isNone(z)?!1:p.isSome(sa(A,A.spatialReference,M,z,X))};a.projectPointToVector=function(A,M,z,X=0){Ca[0]=A.x;Ca[1]=A.y;const ra=A.z;
Ca[2]=void 0!==ra?ra:X;return C(Ca,A.spatialReference,0,M,z,0,1)};a.projectPointToWGS84ComparableLonLat=function(A,M){Ca[0]=A.x;Ca[1]=A.y;const z=A.z;Ca[2]=void 0!==z?z:0;return y(Ca,A.spatialReference,M)};a.projectPolygon=function(A,M,z=M.spatialReference,X=0){return p.isSome(z)&&p.isSome(f(A,A.spatialReference,M,z,X))};a.projectPolyline=function(A,M,z=M.spatialReference,X=0){return p.isSome(z)&&p.isSome(va(A,A.spatialReference,M,z,X))};a.projectVectorToDehydratedPoint=function(A,M,z){return C(A,
M,0,Ca,z.spatialReference,0,1)?(z.x=Ca[0],z.y=Ca[1],z.z=Ca[2],z):null};a.projectVectorToPoint=function(A,M,z){if(p.isNone(M)||p.isNone(z))return null;const X=new t({spatialReference:z});return C(A,M,0,Ca,z,0,1)?(X.x=Ca[0],X.y=Ca[1],X.z=Ca[2],X):null};a.projectVectorToVector=Z;a.projectVectorToWGS84ComparableLonLat=function(A,M,z){return y(A,M,z)};a.projectWithoutEngine=ea;a.projectXYZToVector=V;a.sphericalPCPFtoLonLatElevation=ha;a.unload=function(){ya=wa=pa=null;Da={}};Object.defineProperty(a,"__esModule",
{value:!0})})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(b,a,d,h,n){function p(){return!!a._pe}function H(){return!!n("esri-wasm")}function k(){return P?P:P=(new Promise(function(l,B){b(["./pe-wasm"],l,B)})).then(function(l){return l.peWasm}).then(({default:l})=>l({locateFile:B=>h.getAssetUrl(`esri/geometry/support/${B}`)})).then(l=>{J(l)})}function J(l){function B(c,m,E){c[m]=E(c[m])}a._pe=l;a.PeDefs.init();a.PeGTlistExtended.init();
a.PeNotationMgrs.init();a.PeNotationUtm.init();a.PePCSInfo.init();a.PeGCSExtent=function(c){function m(){return c.apply(this,arguments)||this}d._inheritsLoose(m,c);m.prototype.destroy=function(){a._pe.destroy(this)};return m}(a._pe.PeGCSExtent);l=[a._pe.PeDatum,a._pe.PeGeogcs,a._pe.PeGeogtran,a._pe.PeObject,a._pe.PeParameter,a._pe.PePrimem,a._pe.PeProjcs,a._pe.PeSpheroid,a._pe.PeUnit];for(var e of l)B(e.prototype,"getName",c=>function(){return c.call(this,Array(a.PeDefs.PE_NAME_MAX))});for(const c of[a._pe.PeGeogtran,
a._pe.PeProjcs])B(c.prototype,"getParameters",m=>function(){const E=Array(a.PeDefs.PE_PARM_MAX);let r=m.call(this);for(let F=0;F<E.length;F++){const R=a._pe.getValue(r,"*");E[F]=R?a._pe.wrapPointer(R,a._pe.PeParameter):null;r+=Int32Array.BYTES_PER_ELEMENT}return E});B(a._pe.PeHorizon.prototype,"getCoord",c=>function(){const m=this.getSize();if(!m)return null;const E=[],r=c.call(this);K(E,m,r);return E});B(a._pe.PeGTlistExtendedEntry.prototype,"getEntries",c=>{const m=a._pe._pe_getPeGTlistExtendedGTsSize();
return function(){let E=null;var r=c.call(this);if(!a._pe.compare(r,a._pe.NULL)){E=[r];const F=this.getSteps();if(1<F){r=a._pe.getPointer(r);for(let R=1;R<F;R++)E.push(a._pe.wrapPointer(r+m*R,a._pe.PeGTlistExtendedGTs))}}return E}});const g=a._pe._pe_getPeHorizonSize();e=c=>function(){let m=this._cache;m||(this._cache=m=new Map);if(m.has(c))return m.get(c);let E=null;var r=c.call(this);if(!a._pe.compare(r,a._pe.NULL)){E=[r];const F=r.getNump();if(1<F){r=a._pe.getPointer(r);for(let R=1;R<F;R++)E.push(a._pe.wrapPointer(r+
g*R,a._pe.PeHorizon))}}m.set(c,E);return E};B(a._pe.PeProjcs.prototype,"horizonGcsGenerate",e);B(a._pe.PeProjcs.prototype,"horizonPcsGenerate",e);a._pe.PeObject.prototype.toString=function(c=a.PeDefs.PE_STR_OPTS_NONE){a._pe.ensureCache.prepare();const m=a._pe.getPointer(this),E=a._pe.ensureInt8(Array(a.PeDefs.PE_BUFFER_MAX));return a._pe.UTF8ToString(a._pe._pe_object_to_string_ext(m,c,E))}}function x(l){if(l){var B=a._pe.getClass(l);B&&(B=a._pe.getCache(B))&&(l=a._pe.getPointer(l))&&delete B[l]}}
function v(l,B){const e=[];B=Array(B);for(let g=0;g<l;g++)e.push(a._pe.ensureInt8(B));return e}function L(l){let B;Array.isArray(l[0])?(B=[],l.forEach(e=>{B.push(e[0],e[1])})):B=l;return B}function K(l,B,e,g=!1){if(g)for(g=0;g<2*B;g++)l[g]=a._pe.getValue(e+g*Float64Array.BYTES_PER_ELEMENT,"double");else{g=0===l.length;for(let c=0;c<B;c++)g&&(l[c]=Array(2)),l[c][0]=a._pe.getValue(e,"double"),l[c][1]=a._pe.getValue(e+Float64Array.BYTES_PER_ELEMENT,"double"),e+=2*Float64Array.BYTES_PER_ELEMENT}}let P;
a._pe=null;a.PeCSTransformations=void 0;(function(l){function B(c,m,E){a._pe.ensureCache.prepare();var r=L(E);const F=E===r;r=a._pe.ensureFloat64(r);(c=a._pe._pe_geog_to_proj(a._pe.getPointer(c),m,r))&&K(E,m,r,F);return c}function e(c,m,E){return g(c,m,E,0)}function g(c,m,E,r){a._pe.ensureCache.prepare();var F=L(E);const R=E===F;F=a._pe.ensureFloat64(F);(c=a._pe._pe_proj_to_geog_center(a._pe.getPointer(c),m,F,r))&&K(E,m,F,R);return c}l.geogToProj=B;l.projGeog=function(c,m,E,r){switch(r){case a.PeDefs.PE_TRANSFORM_P_TO_G:return e(c,
m,E);case a.PeDefs.PE_TRANSFORM_G_TO_P:return B(c,m,E)}return 0};l.projToGeog=e;l.projToGeogCenter=g})(a.PeCSTransformations||(a.PeCSTransformations={}));a.PeDefs=void 0;(function(l){l.init=function(){l.PE_BUFFER_MAX=a._pe.PeDefs.prototype.PE_BUFFER_MAX;l.PE_NAME_MAX=a._pe.PeDefs.prototype.PE_NAME_MAX;l.PE_MGRS_MAX=a._pe.PeDefs.prototype.PE_MGRS_MAX;l.PE_USNG_MAX=a._pe.PeDefs.prototype.PE_USNG_MAX;l.PE_DD_MAX=a._pe.PeDefs.prototype.PE_DD_MAX;l.PE_DDM_MAX=a._pe.PeDefs.prototype.PE_DDM_MAX;l.PE_DMS_MAX=
a._pe.PeDefs.prototype.PE_DMS_MAX;l.PE_UTM_MAX=a._pe.PeDefs.prototype.PE_UTM_MAX;l.PE_PARM_MAX=a._pe.PeDefs.prototype.PE_PARM_MAX;l.PE_TYPE_NONE=a._pe.PeDefs.prototype.PE_TYPE_NONE;l.PE_TYPE_GEOGCS=a._pe.PeDefs.prototype.PE_TYPE_GEOGCS;l.PE_TYPE_PROJCS=a._pe.PeDefs.prototype.PE_TYPE_PROJCS;l.PE_TYPE_GEOGTRAN=a._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;l.PE_TYPE_COORDSYS=a._pe.PeDefs.prototype.PE_TYPE_COORDSYS;l.PE_TYPE_UNIT=a._pe.PeDefs.prototype.PE_TYPE_UNIT;l.PE_TYPE_LINUNIT=a._pe.PeDefs.prototype.PE_TYPE_LINUNIT;
l.PE_STR_OPTS_NONE=a._pe.PeDefs.prototype.PE_STR_OPTS_NONE;l.PE_STR_AUTH_NONE=a._pe.PeDefs.prototype.PE_STR_AUTH_NONE;l.PE_STR_AUTH_TOP=a._pe.PeDefs.prototype.PE_STR_AUTH_TOP;l.PE_STR_NAME_CANON=a._pe.PeDefs.prototype.PE_STR_NAME_CANON;l.PE_PARM_X0=a._pe.PeDefs.prototype.PE_PARM_X0;l.PE_PARM_ND=a._pe.PeDefs.prototype.PE_PARM_ND;l.PE_TRANSFORM_1_TO_2=a._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;l.PE_TRANSFORM_2_TO_1=a._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;l.PE_TRANSFORM_P_TO_G=a._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;
l.PE_TRANSFORM_G_TO_P=a._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;l.PE_HORIZON_RECT=a._pe.PeDefs.prototype.PE_HORIZON_RECT;l.PE_HORIZON_POLY=a._pe.PeDefs.prototype.PE_HORIZON_POLY;l.PE_HORIZON_LINE=a._pe.PeDefs.prototype.PE_HORIZON_LINE;l.PE_HORIZON_DELTA=a._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(a.PeDefs||(a.PeDefs={}));a.PeFactory=void 0;(function(l){function B(m,E){let r=null,F=e[m];F||(F={},e[m]=F);F.hasOwnProperty(String(E))?r=F[E]:(m=a._pe.PeFactory.prototype.factoryByType(m,E),a._pe.compare(m,
a._pe.NULL)||(r=m,F[E]=r));return r=c(r)}const e={},g={},c=m=>{if(m){const E=m.getType();switch(E){case a.PeDefs.PE_TYPE_GEOGCS:m=a._pe.castObject(m,a._pe.PeGeogcs);break;case a.PeDefs.PE_TYPE_PROJCS:m=a._pe.castObject(m,a._pe.PeProjcs);break;case a.PeDefs.PE_TYPE_GEOGTRAN:m=a._pe.castObject(m,a._pe.PeGeogtran);break;default:E&a.PeDefs.PE_TYPE_UNIT&&(m=a._pe.castObject(m,a._pe.PeUnit))}}return m};l.initialize=function(){a._pe.PeFactory.prototype.initialize(null)};l.coordsys=function(m){return B(a.PeDefs.PE_TYPE_COORDSYS,
m)};l.factoryByType=B;l.fromString=function(m,E){let r=null,F=g[m];F||(F={},g[m]=F);F.hasOwnProperty(E)?r=F[E]:(m=a._pe.PeFactory.prototype.fromString(m,E),a._pe.compare(m,a._pe.NULL)||(r=m,F[E]=r));return r=c(r)};l.geogcs=function(m){return B(a.PeDefs.PE_TYPE_GEOGCS,m)};l.geogtran=function(m){return B(a.PeDefs.PE_TYPE_GEOGTRAN,m)};l.getCode=function(m){return a._pe.PeFactory.prototype.getCode(m)};l.projcs=function(m){return B(a.PeDefs.PE_TYPE_PROJCS,m)};l.unit=function(m){return B(a.PeDefs.PE_TYPE_UNIT,
m)}})(a.PeFactory||(a.PeFactory={}));a.PeGCSExtent=null;a.PeGTlistExtended=void 0;(function(l){let B;l.init=function(){l.PE_GTLIST_OPTS_COMMON=a._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;B=a._pe._pe_getPeGTlistExtendedEntrySize()};l.getGTlist=function(e,g,c,m,E,r){let F=null;const R=new a._pe.PeInteger(r);try{const w=a._pe.PeGTlistExtended.prototype.getGTlist(e,g,c,m,E,R);if(r=R.val)if(F=[w],1<r){const ca=a._pe.getPointer(w);for(e=1;e<r;e++)F.push(a._pe.wrapPointer(ca+B*e,a._pe.PeGTlistExtendedEntry))}}finally{a._pe.destroy(R)}return F}})(a.PeGTlistExtended||
(a.PeGTlistExtended={}));a.PeGTlistExtendedEntry=void 0;(function(l){l.destroy=function(B){if(B&&B.length){for(const e of B)x(e),e.getEntries().forEach(g=>{x(g);g=g.getGeogtran();x(g);g.getParameters().forEach(x);[g.getGeogcs1(),g.getGeogcs2()].forEach(c=>{x(c);const m=c.getDatum();x(m);x(m.getSpheroid());x(c.getPrimem());x(c.getUnit())})});a._pe.PeGTlistExtendedEntry.prototype.Delete(B[0])}}})(a.PeGTlistExtendedEntry||(a.PeGTlistExtendedEntry={}));a.PeGTTransformations=void 0;(function(l){l.geogToGeog=
function(B,e,g,c,m){a._pe.ensureCache.prepare();var E=L(g);const r=g===E;E=a._pe.ensureFloat64(E);let F=0;c&&(F=a._pe.ensureFloat64(c));(B=a._pe._pe_geog_to_geog(a._pe.getPointer(B),e,E,F,m))&&K(g,e,E,r);return B}})(a.PeGTTransformations||(a.PeGTTransformations={}));a.PeNotationDms=void 0;(function(l){const B=(g,c,m,E,r,F)=>{a._pe.ensureCache.prepare();switch(g){case "dd":var R=a._pe._pe_geog_to_dd;var w=a.PeDefs.PE_DD_MAX;break;case "ddm":R=a._pe._pe_geog_to_ddm;w=a.PeDefs.PE_DDM_MAX;break;case "dms":R=
a._pe._pe_geog_to_dms,w=a.PeDefs.PE_DMS_MAX}g=0;c&&(g=a._pe.getPointer(c));c=L(E);c=a._pe.ensureFloat64(c);w=v(m,w);E=a._pe.ensureInt32(w);if(r=R(g,m,c,r,E))for(R=0;R<m;R++)F[R]=a._pe.UTF8ToString(w[R]);return r},e=(g,c,m,E,r)=>{a._pe.ensureCache.prepare();switch(g){case "dd":var F=a._pe._pe_dd_to_geog;break;case "ddm":F=a._pe._pe_ddm_to_geog;break;case "dms":F=a._pe._pe_dms_to_geog}g=0;c&&(g=a._pe.getPointer(c));c=E.map(R=>a._pe.ensureString(R));E=a._pe.ensureInt32(c);c=a._pe.ensureFloat64(Array(2*
m));(F=F(g,m,E,c))&&K(r,m,c);return F};l.geog_to_dms=function(g,c,m,E,r){return B("dms",g,c,m,E,r)};l.dms_to_geog=function(g,c,m,E){return e("dms",g,c,m,E)};l.geog_to_ddm=function(g,c,m,E,r){return B("ddm",g,c,m,E,r)};l.ddm_to_geog=function(g,c,m,E){return e("ddm",g,c,m,E)};l.geog_to_dd=function(g,c,m,E,r){return B("dd",g,c,m,E,r)};l.dd_to_geog=function(g,c,m,E){return e("dd",g,c,m,E)}})(a.PeNotationDms||(a.PeNotationDms={}));a.PeNotationMgrs=void 0;(function(l){l.init=function(){l.PE_MGRS_STYLE_NEW=
a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;l.PE_MGRS_STYLE_OLD=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;l.PE_MGRS_STYLE_AUTO=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;l.PE_MGRS_180_ZONE_1_PLUS=a._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;l.PE_MGRS_ADD_SPACES=a._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};l.geog_to_mgrs_extended=function(B,e,g,c,m,E,r){a._pe.ensureCache.prepare();let F=0;B&&(F=a._pe.getPointer(B));B=L(g);g=a._pe.ensureFloat64(B);B=v(e,a.PeDefs.PE_MGRS_MAX);
const R=a._pe.ensureInt32(B);if(c=a._pe._pe_geog_to_mgrs_extended(F,e,g,c,m,E,R))for(m=0;m<e;m++)r[m]=a._pe.UTF8ToString(B[m]);return c};l.mgrs_to_geog_extended=function(B,e,g,c,m){a._pe.ensureCache.prepare();let E=0;B&&(E=a._pe.getPointer(B));B=g.map(r=>a._pe.ensureString(r));g=a._pe.ensureInt32(B);B=a._pe.ensureFloat64(Array(2*e));(c=a._pe._pe_mgrs_to_geog_extended(E,e,g,c,B))&&K(m,e,B);return c}})(a.PeNotationMgrs||(a.PeNotationMgrs={}));a.PeNotationUsng=void 0;(function(l){l.geog_to_usng=function(B,
e,g,c,m,E,r){a._pe.ensureCache.prepare();let F=0;B&&(F=a._pe.getPointer(B));B=L(g);g=a._pe.ensureFloat64(B);B=v(e,a.PeDefs.PE_MGRS_MAX);const R=a._pe.ensureInt32(B);if(c=a._pe._pe_geog_to_usng(F,e,g,c,m,E,R))for(m=0;m<e;m++)r[m]=a._pe.UTF8ToString(B[m]);return c};l.usng_to_geog=function(B,e,g,c){a._pe.ensureCache.prepare();var m=0;B&&(m=a._pe.getPointer(B));B=g.map(E=>a._pe.ensureString(E));g=a._pe.ensureInt32(B);B=a._pe.ensureFloat64(Array(2*e));(m=a._pe._pe_usng_to_geog(m,e,g,B))&&K(c,e,B);return m}})(a.PeNotationUsng||
(a.PeNotationUsng={}));a.PeNotationUtm=void 0;(function(l){l.init=function(){l.PE_UTM_OPTS_NONE=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;l.PE_UTM_OPTS_ADD_SPACES=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;l.PE_UTM_OPTS_NS=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};l.geog_to_utm=function(B,e,g,c,m){a._pe.ensureCache.prepare();var E=0;B&&(E=a._pe.getPointer(B));B=L(g);g=a._pe.ensureFloat64(B);B=v(e,a.PeDefs.PE_UTM_MAX);const r=a._pe.ensureInt32(B);if(c=a._pe._pe_geog_to_utm(E,e,g,
c,r))for(E=0;E<e;E++)m[E]=a._pe.UTF8ToString(B[E]);return c};l.utm_to_geog=function(B,e,g,c,m){a._pe.ensureCache.prepare();let E=0;B&&(E=a._pe.getPointer(B));B=g.map(r=>a._pe.ensureString(r));g=a._pe.ensureInt32(B);B=a._pe.ensureFloat64(Array(2*e));(c=a._pe._pe_utm_to_geog(E,e,g,c,B))&&K(m,e,B);return c}})(a.PeNotationUtm||(a.PeNotationUtm={}));a.PePCSInfo=void 0;(function(l){const B=new Map;l.init=function(){l.PE_PCSINFO_OPTION_NONE=a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;l.PE_PCSINFO_OPTION_DOMAIN=
a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;l.PE_POLE_OUTSIDE_BOUNDARY=a._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;l.PE_POLE_POINT=a._pe.PePCSInfo.prototype.PE_POLE_POINT};l.generate=function(e,g=l.PE_PCSINFO_OPTION_DOMAIN){let c,m;B.has(e)&&(m=B.get(e),m[g]&&(c=m[g]));c||(c=a._pe.PePCSInfo.prototype.generate(e,g),m||(m=[],B.set(e,m)),m[g]=c);return c}})(a.PePCSInfo||(a.PePCSInfo={}));a.PeVersion=void 0;(function(l){l.version_string=function(){return a._pe.PeVersion.prototype.version_string()}})(a.PeVersion||
(a.PeVersion={}));var t=Object.freeze({__proto__:null,get _pe(){return a._pe},isLoaded:p,isSupported:H,load:k,get PeCSTransformations(){return a.PeCSTransformations},get PeDefs(){return a.PeDefs},get PeFactory(){return a.PeFactory},get PeGCSExtent(){return a.PeGCSExtent},get PeGTlistExtended(){return a.PeGTlistExtended},get PeGTlistExtendedEntry(){return a.PeGTlistExtendedEntry},get PeGTTransformations(){return a.PeGTTransformations},get PeNotationDms(){return a.PeNotationDms},get PeNotationMgrs(){return a.PeNotationMgrs},
get PeNotationUsng(){return a.PeNotationUsng},get PeNotationUtm(){return a.PeNotationUtm},get PePCSInfo(){return a.PePCSInfo},get PeVersion(){return a.PeVersion},_init:J});a._init=J;a.isLoaded=p;a.isSupported=H;a.load=k;a.pe=t})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(b,a){const d=Math.PI/180;var h=a.earth.radius;const n=a.earth.eccentricitySquared;h={a1:h*n,a2:h*n*h*n,a3:h*n*n/2,a4:h*n*h*n*2.5,a5:h*n+h*n*n/2,a6:1-n};a={4267:{a:6378206.4,f:1/
294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:a.earth.radius,f:a.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:a.moon.radius,f:a.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:a.mars.radius,f:a.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,
f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,
f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},
104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:a.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};b.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;b.earthEllipsoidConstants=h;b.spheroids=a;b.toRadians=d;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],
function(b){return function(){function a(h){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(h&&h.steps)for(const n of h.steps)n instanceof b?this.steps.push(n):this.steps.push(new b({wkid:n.wkid,wkt:n.wkt,isInverse:n.isInverse}))}a.cacheKey=function(h,n){return[void 0!==h.wkid&&null!==h.wkid?h.wkid.toString():"-1",void 0!==h.wkt&&null!==h.wkt?h.wkt.toString():"",void 0!==n.wkid&&null!==n.wkid?n.wkid.toString():"-1",void 0!==n.wkt&&null!==n.wkt?n.wkt.toString():""].join()};
a.fromGE=function(h){const n=new a;let p="";for(const H of h.steps)h=b.fromGE(H),n.steps.push(h),p+=h.uid.toString()+",";n._cached_projection={};n._gtlistentry=null;n._chain=p;return n};var d=a.prototype;d.getInverse=function(){const h=new a;h.steps=[];for(let n=this.steps.length-1;0<=n;n--)h.steps.push(this.steps[n].getInverse());return h};d.getGTListEntry=function(){let h="";for(const n of this.steps)h+=n.uid.toString()+",";h!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=
h);return this._gtlistentry};d.assignCachedGe=function(h,n,p){this._cached_projection[a.cacheKey(h,n)]=p};d.getCachedGeTransformation=function(h,n){let p="";for(const H of this.steps)p+=H.uid.toString()+",";p!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=p);h=this._cached_projection[a.cacheKey(h,n)];return void 0===h?null:h};return a}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(b){let a=
0;return function(){function d(h=null){this.uid=a++;h?(this._wkt=void 0!==h.wkt?h.wkt:null,this._wkid=void 0!==h.wkid?h.wkid:-1,this._isInverse=void 0!==h.isInverse?!0===h.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}d.fromGE=function(h){const n=new d;n._wkt=h.wkt;n._wkid=h.wkid;n._isInverse=h.isInverse;return n};d.prototype.getInverse=function(){const h=new d;h._wkt=this.wkt;h._wkid=this._wkid;h._isInverse=!this.isInverse;return h};b._createClass(d,[{key:"wkt",get:function(){return this._wkt},
set:function(h){this._wkt=h;this.uid=a++}},{key:"wkid",get:function(){return this._wkid},set:function(h){this._wkid=h;this.uid=a++}},{key:"isInverse",get:function(){return this._isInverse},set:function(h){this._isInverse=h;this.uid=a++}}]);return d}()})},"esri/support/MapFloorInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/subclass ../layers/support/FacilityLayerInfo ../layers/support/LevelLayerInfo ../layers/support/SiteLayerInfo".split(" "),
function(b,a,d,h,n,p,H,k,J,x,v){d=function(L){function K(P){P=L.call(this,P)||this;P.levelLayer=null;P.facilityLayer=null;P.siteLayer=null;return P}b._inheritsLoose(K,L);return K}(d.JSONSupport);a.__decorate([h.property({type:x,json:{write:!0}})],d.prototype,"levelLayer",void 0);a.__decorate([h.property({type:J,json:{write:!0}})],d.prototype,"facilityLayer",void 0);a.__decorate([h.property({type:v,json:{write:!0}})],d.prototype,"siteLayer",void 0);return d=a.__decorate([k.subclass("esri.support.MapFloorInfo")],
d)})},"esri/layers/support/FacilityLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,d,h,n,p,H,k){d=function(J){function x(v){v=J.call(this,v)||this;v.facilityIdField=null;v.layerId=null;v.nameField=null;v.siteIdField=null;v.sublayerId=null;return v}
b._inheritsLoose(x,J);return x}(d.JSONSupport);a.__decorate([h.property({type:String,json:{write:!0}})],d.prototype,"facilityIdField",void 0);a.__decorate([h.property({type:String,json:{write:!0}})],d.prototype,"layerId",void 0);a.__decorate([h.property({type:String,json:{write:!0}})],d.prototype,"nameField",void 0);a.__decorate([h.property({type:String,json:{write:!0}})],d.prototype,"siteIdField",void 0);a.__decorate([h.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},
origins:{"web-scene":{read:!1,write:!1}}}})],d.prototype,"sublayerId",void 0);return d=a.__decorate([k.subclass("esri.layers.support.FacilityLayerInfo")],d)})},"esri/layers/support/LevelLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,d,h,n,p,H,
k){d=function(J){function x(v){v=J.call(this,v)||this;v.facilityIdField=null;v.layerId=null;v.levelIdField=null;v.levelNumberField=null;v.longNameField=null;v.shortNameField=null;v.sublayerId=null;v.verticalOrderField=null;return v}b._inheritsLoose(x,J);return x}(d.JSONSupport);a.__decorate([h.property({type:String,json:{write:!0}})],d.prototype,"facilityIdField",void 0);a.__decorate([h.property({type:String,json:{write:!0}})],d.prototype,"layerId",void 0);a.__decorate([h.property({type:String,json:{write:!0}})],
d.prototype,"levelIdField",void 0);a.__decorate([h.property({type:String,json:{write:!0}})],d.prototype,"levelNumberField",void 0);a.__decorate([h.property({type:String,json:{write:!0}})],d.prototype,"longNameField",void 0);a.__decorate([h.property({type:String,json:{write:!0}})],d.prototype,"shortNameField",void 0);a.__decorate([h.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],d.prototype,"sublayerId",void 0);a.__decorate([h.property({type:String,
json:{write:!0}})],d.prototype,"verticalOrderField",void 0);return d=a.__decorate([k.subclass("esri.layers.support.LevelLayerInfo")],d)})},"esri/layers/support/SiteLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,d,h,n,p,H,k){d=function(J){function x(v){v=
J.call(this,v)||this;v.layerId=null;v.nameField=null;v.siteIdField=null;v.sublayerId=null;return v}b._inheritsLoose(x,J);return x}(d.JSONSupport);a.__decorate([h.property({type:String,json:{write:!0}})],d.prototype,"layerId",void 0);a.__decorate([h.property({type:String,json:{write:!0}})],d.prototype,"nameField",void 0);a.__decorate([h.property({type:String,json:{write:!0}})],d.prototype,"siteIdField",void 0);a.__decorate([h.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},
origins:{"web-scene":{read:!1,write:!1}}}})],d.prototype,"sublayerId",void 0);return d=a.__decorate([k.subclass("esri.layers.support.SiteLayerInfo")],d)})},"esri/support/webSceneUtils":function(){define(["exports","../core/Error"],function(b,a){b.createCopyError=function(){return new a("webscene:failed-to-copy-embedded-resources","Copying of embedded resources is currently not supported")};b.createSchemaValidationError=function(d){return new a("webscene:schema-validation","Failed to save webscene due to schema validation errors. See 'details.errors' for more detailed information",
{errors:d})};b.isCopyError=function(d){return d&&"webscene:failed-to-copy-embedded-resources"===d.name};b.isSchemaValidationError=function(d){return d&&"webscene:schema-validation"===d.name};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/support/spatialReferenceSupport":function(){define(["exports"],function(b){b.isSpatialReferenceSupported=function(a,d){return null==a?!1:"2d"===d?!0:"local"===d?a.isGeographic?a.isWGS84||4490===a.wkid:!0:a.isWebMercator||a.isWGS84||4490===a.wkid||
104971===a.wkid||104905===a.wkid||104903===a.wkid};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/webdoc/support/saveUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/asyncUtils ../../core/Error ../../core/promiseUtils ../../core/uuid ../../portal/support/resourceUtils".split(" "),function(b,a,d,h,n,p,H){function k(){k=a._asyncToGenerator(function*(K,P,t){if(P&&P.resources){var l=P.portalItem===K.portalItem?new Set(K.paths):new Set;K.paths.length=0;K.portalItem=
P.portalItem;var B=new Set(P.resources.toKeep.map(c=>c.resource.path)),e=new Set,g=[];B.forEach(c=>{l.delete(c);K.paths.push(c)});for(const c of P.resources.toUpdate)if(l.delete(c.resource.path),B.has(c.resource.path)||e.has(c.resource.path)){const {resource:m,content:E,finish:r,error:F}=c,R=H.getSiblingOfSameTypeI(m,p.generateUUID());K.paths.push(R.path);g.push(J({resource:R,content:E,finish:r,error:F},t))}else K.paths.push(c.resource.path),g.push(v(c,t)),e.add(c.resource.path);for(const c of P.resources.toAdd)g.push(J(c,
t)),K.paths.push(c.resource.path);l.forEach(c=>{c=P.portalItem.resourceFromPath(c);g.push(c.portalItem.removeResource(c).catch(()=>{}))});if(0!==g.length&&(B=yield n.eachAlways(g),n.throwIfAborted(t),t=B.filter(c=>"error"in c).map(c=>c.error),0<t.length))throw new h("save:resources","Failed to save one or more resources",{errors:t});}});return k.apply(this,arguments)}function J(K,P){return x.apply(this,arguments)}function x(){x=a._asyncToGenerator(function*(K,P){P=yield d.result(K.resource.portalItem.addResource(K.resource,
K.content,P));if(!0===P.ok)K.finish&&K.finish(K.resource);else throw K.error&&K.error(P.error),P.error;});return x.apply(this,arguments)}function v(K,P){return L.apply(this,arguments)}function L(){L=a._asyncToGenerator(function*(K,P){P=yield d.result(K.resource.update(K.content,P));if(!0===P.ok)K.finish(K.resource);else throw K.error(P.error),P.error;});return L.apply(this,arguments)}b.saveResources=function(K,P,t){return k.apply(this,arguments)};Object.defineProperty(b,"__esModule",{value:!0})})},
"esri/portal/support/resourceUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/Error ../../core/maybe ../../core/urlUtils".split(" "),function(b,a,d,h,n,p){function H(){H=a._asyncToGenerator(function*(t,l={},B){yield t.load(B);var e=p.join(t.itemUrl,"resources");const {start:g=1,num:c=10,sortOrder:m="asc",sortField:E="created"}=l;l={query:{start:g,num:c,sortOrder:m,sortField:E,token:t.apiKey},signal:n.get(B,"signal")};e=yield t.portal._request(e,l);
return{total:e.total,nextStart:e.nextStart,resources:e.resources.map(({created:r,size:F,resource:R})=>({created:new Date(r),size:F,resource:t.resourceFromPath(R)}))}});return H.apply(this,arguments)}function k(){k=a._asyncToGenerator(function*(t,l,B,e){if(!t.hasPath())throw new h(`portal-item-resource-${l}:invalid-path`,"Resource does not have a valid path");const g=t.portalItem;yield g.load(e);l=p.join(g.userItemUrl,"add"===l?"addResources":"updateResources");const [c,m]=v(t.path);B=yield K(B);const E=
new FormData;c&&"."!==c&&E.append("resourcesPrefix",c);E.append("fileName",m);E.append("file",B,m);E.append("f","json");n.isSome(e)&&e.access&&E.append("access",e.access);yield g.portal._request(l,{method:"post",body:E,signal:n.get(e,"signal")});return t});return k.apply(this,arguments)}function J(){J=a._asyncToGenerator(function*(t,l,B){if(!l.hasPath())throw new h("portal-item-resources-remove:invalid-path","Resource does not have a valid path");yield t.load(B);const e=p.join(t.userItemUrl,"removeResources");
yield t.portal._request(e,{method:"post",query:{resource:l.path},signal:n.get(B,"signal")});l.portalItem=null});return J.apply(this,arguments)}function x(){x=a._asyncToGenerator(function*(t,l){yield t.load(l);const B=p.join(t.userItemUrl,"removeResources");return t.portal._request(B,{method:"post",query:{deleteAll:!0},signal:n.get(l,"signal")})});return x.apply(this,arguments)}function v(t){const l=t.lastIndexOf("/");return-1===l?[".",t]:[t.slice(0,l),t.slice(l+1)]}function L(t){{const c=p.getPathExtension(t);
t=n.isNone(c)?[t,""]:[t.slice(0,t.length-c.length-1),`.${c}`]}const [l,B]=t,[e,g]=v(l);return[e,g,B]}function K(t){return P.apply(this,arguments)}function P(){P=a._asyncToGenerator(function*(t){return t instanceof Blob?t:(yield d(t.url,{responseType:"blob"})).data});return P.apply(this,arguments)}b.addOrUpdateResource=function(t,l,B,e){return k.apply(this,arguments)};b.contentToBlob=K;b.fetchResources=function(t){return H.apply(this,arguments)};b.getSiblingOfSameType=function(t,l){if(!t.hasPath())return null;
const [B,,e]=L(t.path);return t.portalItem.resourceFromPath(p.join(B,l+e))};b.getSiblingOfSameTypeI=function(t,l){if(!t.hasPath())return null;const [B,,e]=L(t.path);return t.portalItem.resourceFromPath(p.join(B,l+e))};b.removeAllResources=function(t,l){return x.apply(this,arguments)};b.removeResource=function(t,l,B){return J.apply(this,arguments)};b.splitPrefixFileNameAndExtension=L;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/webdoc/support/thumbnailUtils":function(){define(["exports"],
function(b){const a={width:600,height:400};b.getOptimalThumbnailSize=function(d,h){h=h||a;let {width:n,height:p}=h;h=n/p;1.5>h?p=n/1.5:1.5<h&&(n=1.5*p);n>d.width&&(p*=d.width/n,n=d.width);p>d.height&&(n*=d.height/p,p=d.height);return{width:Math.round(n),height:Math.round(p)}};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/webscene/ApplicationProperties":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/subclass ../webdoc/applicationProperties/Viewing".split(" "),
function(b,a,d,h,n,p,H,k,J){var x;d=x=function(v){function L(K){K=v.call(this,K)||this;K.viewing=null;return K}b._inheritsLoose(L,v);L.prototype.clone=function(){return new x({viewing:this.viewing?this.viewing.clone():null})};return L}(d.JSONSupport);a.__decorate([h.property({type:J,json:{write:!0}})],d.prototype,"viewing",void 0);return d=x=a.__decorate([k.subclass("esri.webscene.ApplicationProperties")],d)})},"esri/webdoc/applicationProperties/Viewing":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ./Search".split(" "),
function(b,a,d,h,n,p,H,k,J,x){var v;d=v=function(L){function K(P){P=L.call(this,P)||this;P.search=null;return P}b._inheritsLoose(K,L);K.prototype.clone=function(){return new v(h.clone({search:this.search}))};return K}(d.JSONSupport);a.__decorate([n.property({type:x,json:{write:!0}})],d.prototype,"search",void 0);return d=v=a.__decorate([J.subclass("esri.webdoc.applicationProperties.Viewing")],d)})},"esri/webdoc/applicationProperties/Search":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/extensions/serializableProperty/writePolicyUtils ./SearchLayer ./SearchTable".split(" "),
function(b,a,d,h,n,p,H,k,J,x,v,L,K,P,t){var l;const B=d.ofType(P),e=d.ofType(t);d=l=function(g){function c(E){E=g.call(this,E)||this;E.addressSearchEnabled=!0;E.enabled=!0;E.hintText=null;E.layers=new B;E.tables=new e;return E}b._inheritsLoose(c,g);var m=c.prototype;m.readAddressSearchEnabled=function(E){return!E};m.writeAddressSearchEnabled=function(E,r,F){r[F]=!E};m.clone=function(){return new l(n.clone({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,
layers:this.layers,tables:this.tables}))};return c}(h.JSONSupport);a.__decorate([p.property({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],d.prototype,"addressSearchEnabled",void 0);a.__decorate([x.reader("addressSearchEnabled")],d.prototype,"readAddressSearchEnabled",null);a.__decorate([L.writer("addressSearchEnabled")],d.prototype,"writeAddressSearchEnabled",null);a.__decorate([p.property({type:Boolean,
nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],d.prototype,"enabled",void 0);a.__decorate([p.property({type:String,json:{write:!0}})],d.prototype,"hintText",void 0);a.__decorate([p.property({type:B,json:{write:{overridePolicy:K.writeNonEmptyCollectionPolicy},origins:{"web-scene":{write:{isRequired:!0}}}}})],d.prototype,"layers",void 0);a.__decorate([p.property({type:e,json:{read:!0,write:{overridePolicy:K.writeNonEmptyCollectionPolicy}}})],
d.prototype,"tables",void 0);return d=l=a.__decorate([v.subclass("esri.webdoc.applicationProperties.Search")],d)})},"esri/core/accessorSupport/extensions/serializableProperty/writePolicyUtils":function(){define(["exports"],function(b){b.writeNonEmptyCollectionPolicy=function(a){return{enabled:!(null==a||!a.length)}};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/webdoc/applicationProperties/SearchLayer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ./SearchLayerField".split(" "),
function(b,a,d,h,n,p,H,k,J,x){var v;d=v=function(L){function K(P){P=L.call(this,P)||this;P.field=null;P.id=null;P.subLayer=null;return P}b._inheritsLoose(K,L);K.prototype.clone=function(){return new v(h.clone({field:this.field,id:this.id,subLayer:this.subLayer}))};return K}(d.JSONSupport);a.__decorate([n.property({type:x,json:{write:{isRequired:!0}}})],d.prototype,"field",void 0);a.__decorate([n.property({type:String,json:{write:{isRequired:!0}}})],d.prototype,"id",void 0);a.__decorate([n.property({type:p.Integer,
json:{write:!0}})],d.prototype,"subLayer",void 0);return d=v=a.__decorate([J.subclass("esri.webdoc.applicationProperties.SearchLayer")],d)})},"esri/webdoc/applicationProperties/SearchLayerField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),
function(b,a,d,h,n,p,H,k,J,x){var v;d=v=function(L){function K(P){P=L.call(this,P)||this;P.exactMatch=!1;P.name=null;P.type=null;return P}b._inheritsLoose(K,L);K.prototype.clone=function(){return new v({exactMatch:this.exactMatch,type:this.type,name:this.name})};return K}(d.JSONSupport);a.__decorate([h.property({type:Boolean,json:{write:!0}})],d.prototype,"exactMatch",void 0);a.__decorate([h.property({type:String,json:{write:!0}})],d.prototype,"name",void 0);a.__decorate([k.enumeration(x.kebabDict)],
d.prototype,"type",void 0);return d=v=a.__decorate([J.subclass("esri.webdoc.applicationProperties.SearchLayerField")],d)})},"esri/webdoc/applicationProperties/SearchTable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ./SearchTableField".split(" "),function(b,a,
d,h,n,p,H,k,J,x){var v;d=v=function(L){function K(P){P=L.call(this,P)||this;P.field=null;P.id=null;return P}b._inheritsLoose(K,L);K.prototype.clone=function(){return new v(h.clone({field:this.field,id:this.id}))};return K}(d.JSONSupport);a.__decorate([n.property({type:x,json:{write:{isRequired:!0}}})],d.prototype,"field",void 0);a.__decorate([n.property({type:String,json:{write:{isRequired:!0}}})],d.prototype,"id",void 0);return d=v=a.__decorate([J.subclass("esri.webdoc.applicationProperties.SearchTable")],
d)})},"esri/webdoc/applicationProperties/SearchTableField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),function(b,a,d,h,n,p,H,k,J,x){var v;d=v=function(L){function K(P){P=L.call(this,
P)||this;P.exactMatch=!1;P.name=null;P.type=null;return P}b._inheritsLoose(K,L);K.prototype.clone=function(){return new v({exactMatch:this.exactMatch,type:this.type,name:this.name})};return K}(d.JSONSupport);a.__decorate([h.property({type:Boolean,json:{write:!0}})],d.prototype,"exactMatch",void 0);a.__decorate([h.property({type:String,json:{write:!0}})],d.prototype,"name",void 0);a.__decorate([k.enumeration(x.kebabDict)],d.prototype,"type",void 0);return d=v=a.__decorate([J.subclass("esri.webdoc.applicationProperties.SearchTableField")],
d)})},"esri/webscene/Environment":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/subclass ./Lighting ./background/utils".split(" "),function(b,a,d,h,n,p,H,k,J,x,v){var L;p=(K,P,t)=>({enabled:!t||!t.isPresentation});d=L=function(K){function P(l){l=K.call(this,l)||this;l.lighting=new x;l.background=null;
l.atmosphereEnabled=!0;l.starsEnabled=!0;return l}b._inheritsLoose(P,K);var t=P.prototype;t.clone=function(){return new L(this.cloneConstructProperties())};t.cloneConstructProperties=function(){return{lighting:x.prototype.clone.call(this.lighting),background:h.clone(this.background),atmosphereEnabled:this.atmosphereEnabled,starsEnabled:this.starsEnabled}};return P}(d.JSONSupport);a.__decorate([n.property({type:x,json:{write:!0}})],d.prototype,"lighting",void 0);a.__decorate([n.property(v.backgroundProperty)],
d.prototype,"background",void 0);a.__decorate([n.property({type:Boolean,nonNullable:!0,json:{write:{overridePolicy:p}}})],d.prototype,"atmosphereEnabled",void 0);a.__decorate([n.property({type:Boolean,nonNullable:!0,json:{write:{overridePolicy:p}}})],d.prototype,"starsEnabled",void 0);return d=L=a.__decorate([J.subclass("esri.webscene.Environment")],d)})},"esri/webscene/Lighting":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer".split(" "),
function(b,a,d,h,n,p,H,k,J,x){var v;d=v=function(L){function K(t){t=L.call(this,t)||this;t.date=null;t.directShadowsEnabled=!1;t.displayUTCOffset=null;return t}b._inheritsLoose(K,L);var P=K.prototype;P.readDate=function(t,l){return null!=l.datetime&&new Date(l.datetime)||null};P.writeDate=function(t,l,B){l[B]=t.getTime()};P.readDirectShadowsEnabled=function(t,l){return!!l.directShadows};P.writedirectShadowsEnabled=function(t,l,B){t&&(l[B]=t)};P.writeDisplayUTCOffset=function(t,l){null!=t&&(l.displayUTCOffset=
t)};P.clone=function(){return new v(this.cloneConstructProperties())};P.cloneConstructProperties=function(){const t={directShadowsEnabled:this.directShadowsEnabled,displayUTCOffset:null!=this.displayUTCOffset?this.displayUTCOffset:null};null!=this.date&&(t.date=new Date(this.date.getTime()));return t};return K}(d.JSONSupport);a.__decorate([h.property({type:Date,json:{type:Number,write:{target:"datetime"}}})],d.prototype,"date",void 0);a.__decorate([k.reader("date",["datetime"])],d.prototype,"readDate",
null);a.__decorate([x.writer("date")],d.prototype,"writeDate",null);a.__decorate([h.property({type:Boolean,json:{default:!1,write:{target:"directShadows"}}})],d.prototype,"directShadowsEnabled",void 0);a.__decorate([k.reader("directShadowsEnabled",["directShadows"])],d.prototype,"readDirectShadowsEnabled",null);a.__decorate([x.writer("directShadowsEnabled")],d.prototype,"writedirectShadowsEnabled",null);a.__decorate([h.property({type:Number,json:{write:!0}})],d.prototype,"displayUTCOffset",void 0);
a.__decorate([x.writer("displayUTCOffset")],d.prototype,"writeDisplayUTCOffset",null);return d=v=a.__decorate([J.subclass("esri.webscene.Lighting")],d)})},"esri/webscene/background/utils":function(){define(["exports","./Background","./ColorBackground"],function(b,a,d){a={base:a,key:"type",typeMap:{color:d}};a={types:a,json:{read:function(h){return(n,p,H)=>{if(!n)return n;for(const k in h.typeMap)if(n.type===k)return p=new h.typeMap[k],p.read(n,H),p}}(a),write:{overridePolicy:(h,n,p)=>({enabled:!p||
!p.isPresentation})}}};b.backgroundProperty=a;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/webscene/background/Background":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,d,h,n,p,H,k){d=function(J){function x(v){return J.call(this,v)||this}b._inheritsLoose(x,
J);x.prototype.clone=function(){};return x}(d.JSONSupport);a.__decorate([h.property({readOnly:!0,json:{read:!1}})],d.prototype,"type",void 0);return d=a.__decorate([k.subclass("esri.webscene.background.Background")],d)})},"esri/webscene/background/ColorBackground":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../symbols/support/materialUtils ./Background".split(" "),
function(b,a,d,h,n,p,H,k,J,x,v){var L;n={...x.colorAndTransparencyProperty,nonNullable:!0};v=L=function(K){function P(l){l=K.call(this,l)||this;l.type="color";l.color=new d([0,0,0,1]);return l}b._inheritsLoose(P,K);var t=P.prototype;t.clone=function(){return new L(this.cloneProperties())};t.cloneProperties=function(){return{color:this.color.clone()}};return P}(v);a.__decorate([k.enumeration({color:"color"},{readOnly:!0})],v.prototype,"type",void 0);a.__decorate([h.property(n)],v.prototype,"color",
void 0);return v=L=a.__decorate([J.subclass("esri.webscene.background.ColorBackground")],v)})},"esri/webscene/InitialViewProperties":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Viewpoint ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/subclass ../geometry/SpatialReference ./Environment".split(" "),function(b,a,d,h,n,p,H,k,J,x,v){var L;h=L=function(K){function P(t){t=
K.call(this,t)||this;t.environment=new v;t.spatialReference=null;t.viewpoint=null;return t}b._inheritsLoose(P,K);P.prototype.clone=function(){return new L({environment:this.environment.clone(),spatialReference:this.spatialReference?this.spatialReference.clone():null,viewingMode:this.viewingMode,viewpoint:this.viewpoint?this.viewpoint.clone():null})};b._createClass(P,[{key:"viewingMode",set:function(t){this._set("viewingMode",t)}}]);return P}(h.JSONSupport);a.__decorate([n.property({type:v,json:{write:{isRequired:!0}}})],
h.prototype,"environment",void 0);a.__decorate([n.property({type:x})],h.prototype,"spatialReference",void 0);a.__decorate([n.property({type:["local","global"]})],h.prototype,"viewingMode",null);a.__decorate([n.property({type:d,json:{write:{isRequired:!0}}})],h.prototype,"viewpoint",void 0);return h=L=a.__decorate([J.subclass("esri.webscene.InitialViewProperties")],h)})},"esri/webscene/Presentation":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/collectionUtils ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/decorators/cast ../core/Logger ../core/accessorSupport/decorators/subclass ./Slide".split(" "),
function(b,a,d,h,n,p,H,k,J,x,v){const L=d.ofType(v);d=function(K){function P(l){l=K.call(this,l)||this;l.slides=new L;return l}b._inheritsLoose(P,K);var t=P.prototype;t.destroy=function(){this.slides.forEach(l=>l.destroy());this.slides.removeAll()};t.clone=function(){return new this.constructor({slides:this.slides.clone()})};b._createClass(P,[{key:"slides",set:function(l){l&&(l=l.filter(B=>!!B.viewpoint));this._set("slides",h.referenceSetter(l,this._get("slides"),L))}}]);return P}(n.JSONSupport);
a.__decorate([p.property({type:L,nonNullable:!0,json:{write:!0}}),k.cast(h.castForReferenceSetter)],d.prototype,"slides",null);return d=a.__decorate([x.subclass("esri.webscene.Presentation")],d)})},"esri/webscene/Slide":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Basemap ../Viewpoint ../core/asyncUtils ../core/Collection ../core/collectionUtils ../core/JSONSupport ../core/lang ../core/Logger ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/has ../core/accessorSupport/decorators/subclass ../core/accessorSupport/ensureType ../chunks/vec3 ../chunks/vec3f64 ../layers/Layer ../layers/mixins/OperationalLayer ../support/basemapUtils ../views/3d/support/mathUtils ../views/3d/support/viewpointUtils ../views/support/Scheduler ../webdoc/support/Thumbnail ./Lighting ./support/Description ./support/SlideEnvironment ./support/SlideGround ./support/SlideVisibleLayer ./support/Title".split(" "),
function(b,a,d,h,n,p,H,k,J,x,v,L,K,P,t,l,B,e,g,c,m,E,r,F,R,w,ca,fa,ja,ea,sa,oa){function va(C){if("building-scene"===C.type||"map-image"===C.type)return C.allSublayers.toArray()}function f(C){if(C=va(C))return C.filter(D=>D.visible).map(D=>D.id)}function u(C,D){C=D-C;43200<C&&(C-=86400);-43200>C&&(C+=86400);return C}let V=0;const Z=p.ofType(sa["default"]),y=x.getLogger("esri.webscene.Slide");k=function(C){function D(q){q=C.call(this,q)||this;q.id=Date.now().toString(16)+"-slide-"+V++;q.title=new oa;
q.description=new fa;q.thumbnail=new w;q.viewpoint=null;q.basemap=null;q.ground=null;q.environment=new ja.SlideEnvironment;q.visibleLayers=new Z;return q}b._inheritsLoose(D,C);var T=D.prototype;T.destroy=function(){this.visibleLayers.removeAll();this.basemap=null;this.thumbnail&&this.thumbnail.destroy();this.thumbnail=this.title=this.description=null};T.castTitle=function(q){return"string"===typeof q?new oa({text:q}):B.ensureType(oa,q)};T.castDescription=function(q){return"string"===typeof q?new fa({text:q}):
B.ensureType(fa,q)};T.castThumbnail=function(q){return"string"===typeof q?new w({url:q}):B.ensureType(w,q)};T.castBasemap=function(q){return E.ensureType(q)};T.castVisibleLayers=function(q){return q&&"function"===typeof q.map?q.map(G=>{if("string"===typeof G)return{id:G};if(G instanceof c){const U=f(G);return{id:G.id,sublayerIds:U}}if(G.id)return{id:G.id,sublayerIds:G.sublayerIds};y.warn('Invalid visible layer, expected { id }, Layer or "id"');return G}):null};T.clone=function(){return new this.constructor({id:this.id,
title:this.title.clone(),thumbnail:this.thumbnail.clone(),description:this.description&&this.description.clone()||null,viewpoint:this.viewpoint&&this.viewpoint.clone()||null,basemap:this.basemap&&this.basemap.clone()||null,ground:this.ground&&this.ground.clone()||null,visibleLayers:this.visibleLayers.clone(),environment:this.environment&&this.environment.clone()||null})};T._updateVisibleLayersFrom=function(q){const G=[];return L.eachAlways(this._getLayers(q.map).map(U=>q.whenLayerView(U).then(ba=>
{if(ba.visible){const na=f(U);G.push(new sa["default"]({id:ba.layer.id,sublayerIds:na}))}})).toArray()).then(()=>{this.visibleLayers.removeAll();this.visibleLayers.addMany(G)})};T.updateFrom=function(q,G){G={screenshot:{format:"png",quality:80,width:120,height:75,disableDecorations:!0,...G&&G.screenshot}};return q.when(()=>{this.viewpoint=q.viewpoint.clone();this.environment.lighting=ca.prototype.clone.apply(q.environment.lighting);this.environment.clouds=q.environment.clouds?q.environment.clouds.clone():
null;this.basemap=q.map.basemap&&q.map.basemap.clone()||null;this.ground=q.map.ground?ea.fromGround(q.map.ground):null;return this._updateVisibleLayersFrom(q)}).then(()=>q.takeScreenshot(G.screenshot)).then(U=>{this.thumbnail=new w({url:U.dataUrl});return this})};T.applyTo=function(){var q=b._asyncToGenerator(function*(G,U){var ba=this;v.isSome(this._applyToController)&&this._applyToController.abort();let na=L.createAbortController();this._applyToController=na;const O=L.onAbortOrThrow(U,()=>na.abort()),
W=G.resourceController.scheduler.registerTask(R.TaskPriority.SLIDE);let ka=!1;U={animate:!0,...U,signal:this._applyToController.signal};var ma=function(){var ia=b._asyncToGenerator(function*(){yield L.all([W.schedule(()=>ka=ba._setViewpointOfInterest(G,U)),W.schedule(()=>ba._applyBasemap(G,U),U.signal)]);yield L.all([W.schedule(()=>ba._applyLayerVisibility(G),U.signal),W.schedule(()=>ba._applyGround(G),U.signal),W.schedule(()=>ba._applyClouds(G),U.signal),W.schedule(()=>ba._applyViewpoint(G,U),U.signal)])});
return function(){return ia.apply(this,arguments)}}();ma=yield n.result(G.addUpdatingPromise(ma()));ka&&(G.contentCamera=null);W.remove();this._applyToController===na&&(this._applyToController=null);na=null;null==O?void 0:O.remove();if(!1===ma.ok)throw ma.error;return this});return function(G,U){return q.apply(this,arguments)}}();T._applyBasemap=function(){var q=b._asyncToGenerator(function*(G,U){if(this.basemap){try{yield this.basemap.load(U)}catch(ba){if(L.isAbortError(ba))throw ba;}G.map.basemap=
E.clonePreservingTiledLayers(this.basemap,G.map.basemap)}});return function(G,U){return q.apply(this,arguments)}}();T._applyGround=function(q){this.ground&&(q.map.ground=this.ground.cloneAndApplyTo(q.map.ground))};T._getLayers=function(q){const G=new p;this._collectLayers(q,G);this._collectLayers(q.ground,G);return G};T._collectLayers=function(q,G){q.layers.forEach(U=>{m.isOperationalLayer(U)&&(G.add(U),"layers"in U&&this._collectLayers(U,G))})};T._applyLayerVisibility=function(q){this.visibleLayers&&
this._getLayers(q.map).forEach(G=>{var U=this.visibleLayers.find(na=>na.id===G.id);G.visible=null!=U;const ba=U&&U.sublayerIds;U=va(G);ba&&U&&U.forEach(na=>na.visible=0<=ba.indexOf(na.id))})};T._setViewpointOfInterest=function(q,G){if(q.state.fixedContentCamera||!this.viewpoint||G.ignoreViewpoint||!G.useDestinationCamera)return!1;G=F.toCamera(q,this.viewpoint);q.contentCamera=G;return v.isSome(G)};T._applyClouds=function(q){q.environment.clouds!==this.environment.clouds&&(q.environment.clouds=J.clone(this.environment.clouds))};
T._applyViewpoint=function(){var q=b._asyncToGenerator(function*(G,U){if(this.viewpoint&&!U.ignoreViewpoint){v.isSome(this.viewpoint.camera)&&(this.viewpoint.camera.fov=G.camera.fov);if(U.animate&&this.get("environment.lighting.date")){yield this._animateToLighting(G,U);return}U.animate&&(G.environment.applyLighting(this.environment.lighting.clone()),yield G.goTo(this.viewpoint,U));G.viewpoint=this.viewpoint}G.environment.applyLighting(this.environment.lighting.clone())});return function(G,U){return q.apply(this,
arguments)}}();T._animateToLighting=function(){var q=b._asyncToGenerator(function*(G,U){let ba=null;"global"===G.viewingMode&&(ba=this._animateLightingWithCamera(G));G.environment.lighting.cameraTrackingEnabled=!1;G.environment.lighting.directShadowsEnabled=this.environment.lighting.directShadowsEnabled;null!=this.environment.lighting.displayUTCOffset&&(G.environment.lighting.displayUTCOffset=this.environment.lighting.displayUTCOffset);return G.goTo(this.viewpoint,U).then(()=>{G.environment.applyLighting(this.environment.lighting.clone());
ba&&ba.remove();G.environment.lighting.cameraTrackingEnabled=!0},na=>{ba&&ba.remove();G.environment.lighting.cameraTrackingEnabled=!0;throw na;})});return function(G,U){return q.apply(this,arguments)}}();T._getTime=function(q){const G=q.getTime();q=3600*q.getUTCHours()+60*q.getUTCMinutes()+q.getUTCSeconds();return[G,q]};T._setTime=function(q,G,U){q.setTime(G);q.setUTCHours(U/3600);q.setUTCMinutes(U%3600/60);q.setUTCSeconds(U%3600%60);return q};T._animateLightingWithCamera=function(q){const [G,U]=
this._getTime(new Date(q.environment.lighting.date.toString())),[ba,na]=this._getTime(this.environment.lighting.date),O=u(U,na),W=q.renderCoordsHelper,ka=g.create();W.toRenderCoords(q.camera.position,ka);const ma=g.create(),ia=g.create();v.isSome(this.viewpoint.camera)&&W.toRenderCoords(this.viewpoint.camera.position,ma);const Q=new Date;return q.watch("camera",N=>{W.toRenderCoords(N.position,ia);var I=e.squaredDistance(ka,ia);const S=e.squaredDistance(ma,ia);N=0;0!==I+S&&(N=I/(I+S));I=G+(ba-G)*N;
N=r.moduloPositive(U+O*N,86400);q.environment.lighting.date=this._setTime(Q,I,N)})};D.createFrom=function(q,G){return(new this).updateFrom(q,G)};b._createClass(D,[{key:"visibleLayers",set:function(q){this._set("visibleLayers",H.referenceSetter(q,this._get("visibleLayers"),Z))}}]);return D}(k.JSONSupport);a.__decorate([K.property({type:String,json:{write:{isRequired:!0}}})],k.prototype,"id",void 0);a.__decorate([K.property({type:oa,json:{default:()=>new oa({text:""}),write:{isRequired:!0}}})],k.prototype,
"title",void 0);a.__decorate([P.cast("title")],k.prototype,"castTitle",null);a.__decorate([K.property({type:fa,json:{write:{overridePolicy(C){return{enabled:!(!C||!C.text)}}}}})],k.prototype,"description",void 0);a.__decorate([P.cast("description")],k.prototype,"castDescription",null);a.__decorate([K.property({type:w,json:{default:()=>new w({url:""}),write:{isRequired:!0}}})],k.prototype,"thumbnail",void 0);a.__decorate([P.cast("thumbnail")],k.prototype,"castThumbnail",null);a.__decorate([K.property({type:h,
nonNullable:!0,json:{write:{isRequired:!0}}})],k.prototype,"viewpoint",void 0);a.__decorate([K.property({type:d,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],k.prototype,"basemap",void 0);a.__decorate([P.cast("basemap")],k.prototype,"castBasemap",null);a.__decorate([K.property({type:ea,json:{write:!0}})],k.prototype,"ground",void 0);a.__decorate([K.property({type:Z,json:{write:{isRequired:!0}}})],k.prototype,"visibleLayers",null);a.__decorate([P.cast("visibleLayers")],k.prototype,"castVisibleLayers",
null);a.__decorate([K.property({type:ja.SlideEnvironment,json:{write:!0}})],k.prototype,"environment",void 0);return k=a.__decorate([l.subclass("esri.webscene.Slide")],k)})},"esri/views/3d/support/viewpointUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../Camera ../../../geometry ../../../Graphic ../../../Viewpoint ../../../core/asyncUtils ../../../core/has ../../../core/Error ../../../core/maybe ../../../core/promiseUtils ../../../chunks/mat3 ../../../chunks/mat3f64 ../../../chunks/mat4f64 ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/projection ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/frustum ../../../geometry/support/webMercatorUtils ../camera/intersectionUtils ./cameraUtils ./ElevationProvider ./mathUtils ../../../geometry/Point ../../../geometry/SpatialReference ../../../geometry/Extent ../../../geometry/Geometry".split(" "),
function(b,a,d,h,n,p,H,k,J,x,v,L,K,P,t,l,B,e,g,c,m,E,r,F,R,w,ca,fa,ja){function ea(Y){return 360-R.cyclicalDeg.normalize(Y)}function sa(Y){return R.cyclicalDeg.normalize(360-Y)}function oa(Y){x.isSome(Y)&&Y.resolver&&Y.resolver.reject();return null}function va(Y,aa,la,qa=null){if(!aa)return oa(qa);var pa=Y.spatialReference||ca.WGS84;if(x.isSome(aa.camera)){Y=m.project(aa.camera.position,pa);if(x.isNone(Y))return oa(qa);aa=aa.camera.clone();aa.position=Y;Y=aa;x.isSome(qa)&&qa.resolver&&qa.resolver.resolve(Y);
return Y}if(x.isNone(aa.targetGeometry))return oa(qa);var wa=aa.get("targetGeometry.spatialReference");if(wa&&!m.canProject(wa,pa))return oa(qa);pa=r.internalToExternal(Y,Y.state.camera);wa=1;null!=aa.rotation&&(pa.heading=ea(aa.rotation),wa=0);null!=la&&(pa.tilt=la);if("point"===aa.targetGeometry.type){const ya=aa.targetGeometry;la=aa.targetGeometry.clone();aa=null!=aa.scale?r.scaleToDistance(Y,aa.scale,ya.latitude):Y.state.camera.distance;return r.fromCenterDistance(Y,la,aa,pa,wa,qa)}return r.fromExtent(Y,
aa.targetGeometry.extent,pa.heading,pa.tilt,wa,qa)}function f(){f=a._asyncToGenerator(function*(Y,aa,la){if(aa&&Y.spatialReference){var qa={target:null};if("declaredClass"in aa||Array.isArray(aa))qa.target=aa;else{for(var pa in aa)qa[pa]=aa[pa];aa.center&&!qa.target&&(qa.target=aa.center)}aa=qa}else aa=null;if(!aa)throw new J("viewpointutils-create:no-target","Missing target for creating viewpoint");qa=new d({fov:Y.camera.fov});pa=new p({camera:qa});if(aa.target instanceof p)return Y=yield G(Y,aa.target,
aa,la,pa),I(Y);if(aa.target instanceof d)return I(ba(Y,aa.target,pa));var wa=null!=aa.scale||null!=aa.zoom;if(aa.target instanceof fa){var ya=aa.target.xmin===aa.target.xmax||aa.target.ymin===aa.target.ymax;return wa||ya?I(yield na(Y,aa,aa.target.center,qa,la,pa)):I(yield ma(Y,aa,aa.target,qa,la,pa))}ya={boundingBox:e.empty(),hasZ:!1,screenSpaceObjects:[]};var Da=wa?r.scaleToResolution(Y,u(Y,aa)):void 0;yield T(Y,aa.target,Da,ya);if(isFinite(ya.boundingBox[0])){e.center(ya.boundingBox,S);Ia.x=S[0];
Ia.y=S[1];Ia.z=S[2];Ia.spatialReference=Y.spatialReference;isFinite(Ia.z)&&ya.hasZ?Da=e.isPoint(ya.boundingBox):(Ia.z=void 0,Da=g.isPoint(e.toRect(ya.boundingBox,xa)));if(wa||Da)return I(yield na(Y,aa,Ia,qa,la,pa));wa=ya.screenSpaceObjects;if(wa.length){Da=Number.NEGATIVE_INFINITY;for(let Na=0;Na<wa.length;Na++){const La=wa[Na].screenSpaceBoundingRect;Da=Math.max(Da,Math.abs(La[0]),Math.abs(La[1]),Math.abs(La[2]),Math.abs(La[3]))}wa=.66-Da/Math.min(Y.width,Y.height)*2}else wa=.66;return I(yield Q(Y,
aa,Ia,ya.boundingBox,wa,qa,la,pa))}return aa.position?(la=E.cameraOnContentAlongViewDirection(Y),t.copy(Aa,la.viewForward),r.directionToHeadingTilt(Y,la.eye,Aa,la.up,Oa),qa.position=new w(aa.position),qa.heading=null!=aa.heading?aa.heading:Oa.heading,qa.tilt=null!=aa.tilt?aa.tilt:Oa.tilt,Y=Z(Y,null,qa,pa),I(Y)):I(yield W(Y,aa,qa,la,pa))});return f.apply(this,arguments)}function u(Y,aa){return null==aa.scale&&null!=aa.zoom?r.zoomToScale(Y,aa.zoom):aa.scale}function V(Y,aa){let la=!1;null!=aa.heading?
(Y.heading=aa.heading,la=!0):null!=aa.rotation&&(Y.heading=ea(aa.rotation),la=!0);null!=aa.tilt&&(Y.tilt=aa.tilt,la=!0);null!=aa.fov&&(Y.fov=aa.fov);return la}function Z(Y,aa,la,qa){const pa=Y.spatialReference||ca.WGS84;aa=x.isSome(aa)?aa:r.externalToInternal(Y,la);if(x.isNone(aa))return qa;qa.targetGeometry=B.projectVectorToPoint(aa.center,Y.renderSpatialReference,pa);qa.scale=r.computeScale(Y,aa);qa.rotation=sa(la.heading);qa.camera=la;return qa}function y(Y,aa,la){if(aa){if(!m.canProject(aa.spatialReference,
Y.spatialReference))throw new J("viewpointutils:incompatible-spatialreference",`Spatial reference (${aa.spatialReference?aa.spatialReference.wkid:"unknown"}) is incompatible with the view (${Y.spatialReference.wkid})`,{geometry:aa});var qa=[];if(!aa.hasZ&&Y.basemapTerrain){switch(aa.type){case "point":var pa=aa;break;case "multipoint":case "polyline":pa=aa.extent.center;break;case "mesh":pa=aa.origin;break;case "extent":pa=aa.center;break;case "polygon":pa=aa.centroid}pa&&m.canProject(pa,Y.basemapTerrain.spatialReference)?
S[2]=x.unwrapOr(F.getElevationAtPoint(Y.elevationProvider,pa),0):S[2]=0}(0,Xa[aa.type])(aa,ya=>{qa.push(ya[0],ya[1],ya[2])},S);var wa=qa.length/3;if(0!==wa&&(pa=Array(qa.length),B.projectBuffer(qa,aa.spatialReference,0,pa,Y.spatialReference,0,wa)))for(aa.hasZ&&(la.hasZ=!0),Y=0;Y<pa.length;Y+=3)aa.hasZ?(S[0]=pa[Y+0],S[1]=pa[Y+1],S[2]=pa[Y+2]):(S[0]=pa[Y+0],S[1]=pa[Y+1]),e.expandWithVec3(la.boundingBox,S)}}function C(Y,aa,la,qa){return D.apply(this,arguments)}function D(){D=a._asyncToGenerator(function*(Y,
aa,la,qa){const pa=yield H.result(Y.whenViewForGraphic(aa));if(!1!==pa.ok&&!x.isNone(pa.value)&&"whenGraphicBounds"in pa.value)if(la=yield H.result(pa.value.whenGraphicBounds(aa,{minDemResolution:la})),!1===la.ok)y(Y,aa.geometry,qa);else{var {screenSpaceObjects:wa,boundingBox:ya}=la.value;e.expandWithAABB(qa.boundingBox,ya);wa&&wa.forEach(Da=>{qa.screenSpaceObjects.push(Da)});isFinite(ya[2])&&(qa.hasZ=!0)}else y(Y,aa.geometry,qa)});return D.apply(this,arguments)}function T(Y,aa,la,qa){return q.apply(this,
arguments)}function q(){q=a._asyncToGenerator(function*(Y,aa,la,qa){if(Array.isArray(aa)&&2===aa.length){const pa=aa[0],wa=aa[1];if("number"===typeof pa&&"number"===typeof wa){Ia.x=pa;Ia.y=wa;Ia.z=void 0;Ia.spatialReference=Y.spatialReference.isGeographic?Y.spatialReference:ca.WGS84;y(Y,Ia,qa);return}}aa&&"function"===typeof aa.map?yield v.eachAlways(aa.map(pa=>T(Y,pa,la,qa))):aa instanceof ja?y(Y,aa,qa):aa instanceof n&&(yield C(Y,aa,la,qa))});return q.apply(this,arguments)}function G(Y,aa,la,qa,
pa){return U.apply(this,arguments)}function U(){U=a._asyncToGenerator(function*(Y,aa,la,qa,pa){if(x.isSome(aa.camera))return ba(Y,aa.camera,pa);pa.scale=aa.scale;pa.rotation=aa.rotation;pa.targetGeometry=x.isSome(aa.targetGeometry)?aa.targetGeometry.clone():null;pa.camera=null;null!=la.heading?pa.rotation=sa(la.heading):null!=la.rotation&&(pa.rotation=la.rotation);aa=u(Y,la);null!=aa&&(pa.scale=aa);qa=new r.AsyncContext(qa);va(Y,pa,la.tilt,qa);pa.camera=yield qa.resolver.promise;return pa});return U.apply(this,
arguments)}function ba(Y,aa,la){const qa=m.project(aa.position,Y.spatialReference);if(x.isNone(qa))return null;aa=aa.clone();aa.fov=Y.camera.fov;aa.position=qa;return Z(Y,null,aa,la)}function na(Y,aa,la,qa,pa,wa){return O.apply(this,arguments)}function O(){O=a._asyncToGenerator(function*(Y,aa,la,qa,pa,wa){if(x.isNone(la))throw new J("createfromcenter","invalid point");wa.targetGeometry=la.clone();const ya=E.cameraOnContentAlongViewDirection(Y);if(aa.position)return la=wa.targetGeometry,pa=Y.renderSpatialReference,
B.projectPointToVector(aa.position,Ja,pa),B.projectPointToVector(la,Ra,pa),wa.targetGeometry=new w(la),qa.position=new w(aa.position),t.subtract(Aa,Ra,Ja),r.directionToHeadingTilt(Y,Ja,Aa,ya.up,qa),wa.scale=r.distanceToScale(Y,t.distance(Ja,Ra),wa.targetGeometry.latitude),wa.rotation=sa(qa.heading),wa.camera=qa,wa;if(aa.zoomFactor){var Da=ya.distance/aa.zoomFactor;const Na=t.scale(S,ya.viewForward,-Da);ya.eye=t.add(S,ya.center,Na);wa.scale=r.distanceToScale(Y,Da,la.latitude)}r.internalToExternal(Y,
ya,qa);Da=V(qa,aa)?0:1;aa.zoomFactor||(wa.scale=u(Y,aa),null==wa.scale&&(B.projectPointToVector(la,S,Y.renderSpatialReference),c.intersectsPoint(ya.frustum,S)?wa.scale=r.distanceToScale(Y,t.distance(ya.eye,S),la.latitude):wa.scale=r.computeScale(Y,ya)),aa=new r.AsyncContext(pa),r.fromCenterScale(Y,wa.targetGeometry,wa.scale,qa,Da,aa),wa.camera=yield aa.resolver.promise);return wa});return O.apply(this,arguments)}function W(Y,aa,la,qa,pa){return ka.apply(this,arguments)}function ka(){ka=a._asyncToGenerator(function*(Y,
aa,la,qa,pa){var wa=E.cameraOnContentAlongViewDirection(Y);wa=B.projectVectorToPoint(wa.center,Y.renderSpatialReference,Y.spatialReference);return na(Y,aa,wa,la,qa,pa)});return ka.apply(this,arguments)}function ma(Y,aa,la,qa,pa,wa){return ia.apply(this,arguments)}function ia(){ia=a._asyncToGenerator(function*(Y,aa,la,qa,pa,wa){wa.targetGeometry=la.clone();const ya=E.cameraOnContentAlongViewDirection(Y);r.internalToExternal(Y,ya,qa);aa=V(qa,aa)?0:1;pa=new r.AsyncContext(pa);r.fromExtent(Y,la,qa.heading,
qa.tilt,aa,pa);wa.camera=yield pa.resolver.promise;return wa});return ia.apply(this,arguments)}function Q(Y,aa,la,qa,pa,wa,ya,Da){return N.apply(this,arguments)}function N(){N=a._asyncToGenerator(function*(Y,aa,la,qa,pa,wa,ya,Da){Da.targetGeometry=la.clone();const Na=E.cameraOnContentAlongViewDirection(Y);var La=0;la.hasZ?La=la.z:Y.basemapTerrain&&(La=x.unwrap(F.getElevationAtPoint(Y.elevationProvider,la)));t.set(S,la.x,la.y,La);B.computeTranslationToOriginAndRotation(Y.spatialReference,S,da,Y.renderSpatialReference);
L.fromMat4(ha,da);L.transpose(ha,ha);e.empty(ta);la=[[0,1,2],[3,1,2],[0,4,2],[3,4,2],[0,1,5],[3,1,5],[0,4,5],[3,4,5]];for(var Qa=0;Qa<la.length;Qa++){const Ma=la[Qa];let Ua=qa[Ma[2]];isFinite(Ua)||(Ua=La);t.set(S,qa[Ma[0]],qa[Ma[1]],Ua);B.projectVectorToVector(S,Y.spatialReference,S,Y.renderSpatialReference);e.expandWithVec3(ta,t.transformMat3(S,S,ha))}qa=e.width(ta);La=e.height(ta);la=e.depth(ta);Qa=1/Math.tan(Na.fovY/2);pa=Math.max(.5*Math.sqrt(qa*qa+la*la)*Math.max(Qa,1/Math.tan(Na.fovX/2))+.5*
La,.5*La*Qa+.5*Math.max(qa,la))/pa;r.internalToExternal(Y,Na,wa);aa=V(wa,aa)?0:1;Da.scale=r.distanceToScale(Y,pa,Da.targetGeometry.latitude);ya=new r.AsyncContext(ya);r.fromCenterScale(Y,Da.targetGeometry,Da.scale,wa,aa,ya);Da.camera=yield ya.resolver.promise;return Da});return N.apply(this,arguments)}function I(Y){Y&&x.isSome(Y.camera)&&(Y.rotation=sa(Y.camera.heading));return Y}const S=l.create(),da=P.create(),ha=K.create(),ta=e.create(),xa=g.create(),Aa=l.create(),Ja=l.create(),Ra=l.create(),Oa=
{heading:0,tilt:0},Ia=new w,Xa={point(Y,aa,la){la[0]=Y.x;la[1]=Y.y;Y.hasZ&&(la[2]=Y.z);aa(la)},polygon(Y,aa,la){const qa=Y.hasZ;for(let pa=0;pa<Y.rings.length;pa++){const wa=Y.rings[pa];for(let ya=0;ya<wa.length;ya++)la[0]=wa[ya][0],la[1]=wa[ya][1],qa&&(la[2]=wa[ya][2]),aa(la)}},polyline(Y,aa,la){const qa=Y.hasZ;for(let pa=0;pa<Y.paths.length;pa++){const wa=Y.paths[pa];for(let ya=0;ya<wa.length;ya++)la[0]=wa[ya][0],la[1]=wa[ya][1],qa&&(la[2]=wa[ya][2]),aa(la)}},multipoint(Y,aa,la){const qa=Y.points;
Y=Y.hasZ;for(let pa=0;pa<qa.length;pa++)la[0]=qa[pa][0],la[1]=qa[pa][1],Y&&(la[2]=qa[pa][2]),aa(la)},extent(Y,aa,la){Y.hasZ?(aa(t.set(la,Y.xmin,Y.ymin,Y.zmin)),aa(t.set(la,Y.xmax,Y.ymin,Y.zmin)),aa(t.set(la,Y.xmin,Y.ymax,Y.zmin)),aa(t.set(la,Y.xmax,Y.ymax,Y.zmin)),aa(t.set(la,Y.xmin,Y.ymin,Y.zmax)),aa(t.set(la,Y.xmax,Y.ymin,Y.zmax)),aa(t.set(la,Y.xmin,Y.ymax,Y.zmax)),aa(t.set(la,Y.xmax,Y.ymax,Y.zmax))):(aa(t.set(la,Y.xmin,Y.ymin,la[2])),aa(t.set(la,Y.xmax,Y.ymin,la[2])),aa(t.set(la,Y.xmin,Y.ymax,
la[2])),aa(t.set(la,Y.xmax,Y.ymax,la[2])))},mesh(Y,aa,la){if(Y=Y.vertexAttributes&&Y.vertexAttributes.position)for(let qa=0;qa<Y.length;qa+=3)aa(t.set(la,Y[qa+0],Y[qa+1],Y[qa+2]))}};b.create=function(Y,aa,la){return f.apply(this,arguments)};b.fromCamera=function(Y,aa,la=null){x.isNone(la)&&(la=new p);return Z(Y,null,aa.clone(),la)};b.headingToRotation=sa;b.rotationToHeading=ea;b.toCamera=va;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/chunks/mat3":function(){define(["exports","./common"],
function(b,a){function d(f,u){f[0]=u[0];f[1]=u[1];f[2]=u[2];f[3]=u[4];f[4]=u[5];f[5]=u[6];f[6]=u[8];f[7]=u[9];f[8]=u[10];return f}function h(f,u){f[0]=u[0];f[1]=u[1];f[2]=u[2];f[3]=u[3];f[4]=u[4];f[5]=u[5];f[6]=u[6];f[7]=u[7];f[8]=u[8];return f}function n(f,u,V,Z,y,C,D,T,q,G){f[0]=u;f[1]=V;f[2]=Z;f[3]=y;f[4]=C;f[5]=D;f[6]=T;f[7]=q;f[8]=G;return f}function p(f){f[0]=1;f[1]=0;f[2]=0;f[3]=0;f[4]=1;f[5]=0;f[6]=0;f[7]=0;f[8]=1;return f}function H(f,u){if(f===u){const V=u[1],Z=u[2],y=u[5];f[1]=u[3];f[2]=
u[6];f[3]=V;f[5]=u[7];f[6]=Z;f[7]=y}else f[0]=u[0],f[1]=u[3],f[2]=u[6],f[3]=u[1],f[4]=u[4],f[5]=u[7],f[6]=u[2],f[7]=u[5],f[8]=u[8];return f}function k(f,u){const V=u[0],Z=u[1],y=u[2],C=u[3],D=u[4],T=u[5],q=u[6],G=u[7];u=u[8];const U=u*D-T*G,ba=-u*C+T*q,na=G*C-D*q;let O=V*U+Z*ba+y*na;if(!O)return null;O=1/O;f[0]=U*O;f[1]=(-u*Z+y*G)*O;f[2]=(T*Z-y*D)*O;f[3]=ba*O;f[4]=(u*V-y*q)*O;f[5]=(-T*V+y*C)*O;f[6]=na*O;f[7]=(-G*V+Z*q)*O;f[8]=(D*V-Z*C)*O;return f}function J(f,u){const V=u[0],Z=u[1],y=u[2],C=u[3],
D=u[4],T=u[5],q=u[6],G=u[7];u=u[8];f[0]=D*u-T*G;f[1]=y*G-Z*u;f[2]=Z*T-y*D;f[3]=T*q-C*u;f[4]=V*u-y*q;f[5]=y*C-V*T;f[6]=C*G-D*q;f[7]=Z*q-V*G;f[8]=V*D-Z*C;return f}function x(f){const u=f[3],V=f[4],Z=f[5],y=f[6],C=f[7],D=f[8];return f[0]*(D*V-Z*C)+f[1]*(-D*u+Z*y)+f[2]*(C*u-V*y)}function v(f,u,V){const Z=u[0],y=u[1],C=u[2],D=u[3],T=u[4],q=u[5],G=u[6],U=u[7];u=u[8];const ba=V[0],na=V[1],O=V[2],W=V[3],ka=V[4],ma=V[5],ia=V[6],Q=V[7];V=V[8];f[0]=ba*Z+na*D+O*G;f[1]=ba*y+na*T+O*U;f[2]=ba*C+na*q+O*u;f[3]=W*
Z+ka*D+ma*G;f[4]=W*y+ka*T+ma*U;f[5]=W*C+ka*q+ma*u;f[6]=ia*Z+Q*D+V*G;f[7]=ia*y+Q*T+V*U;f[8]=ia*C+Q*q+V*u;return f}function L(f,u,V){const Z=u[0],y=u[1],C=u[2],D=u[3],T=u[4],q=u[5],G=u[6],U=u[7];u=u[8];const ba=V[0];V=V[1];f[0]=Z;f[1]=y;f[2]=C;f[3]=D;f[4]=T;f[5]=q;f[6]=ba*Z+V*D+G;f[7]=ba*y+V*T+U;f[8]=ba*C+V*q+u;return f}function K(f,u,V){const Z=u[0],y=u[1],C=u[2],D=u[3],T=u[4],q=u[5],G=u[6],U=u[7];u=u[8];const ba=Math.sin(V);V=Math.cos(V);f[0]=V*Z+ba*D;f[1]=V*y+ba*T;f[2]=V*C+ba*q;f[3]=V*D-ba*Z;f[4]=
V*T-ba*y;f[5]=V*q-ba*C;f[6]=G;f[7]=U;f[8]=u;return f}function P(f,u,V){const Z=V[0],y=V[1];V=V[2];f[0]=Z*u[0];f[1]=Z*u[1];f[2]=Z*u[2];f[3]=y*u[3];f[4]=y*u[4];f[5]=y*u[5];f[6]=V*u[6];f[7]=V*u[7];f[8]=V*u[8];return f}function t(f,u,V){const Z=V[0];V=V[1];f[0]=Z*u[0];f[1]=Z*u[1];f[2]=Z*u[2];f[3]=V*u[3];f[4]=V*u[4];f[5]=V*u[5];return f}function l(f,u){f[0]=1;f[1]=0;f[2]=0;f[3]=0;f[4]=1;f[5]=0;f[6]=u[0];f[7]=u[1];f[8]=1;return f}function B(f,u){const V=Math.sin(u);u=Math.cos(u);f[0]=u;f[1]=V;f[2]=0;f[3]=
-V;f[4]=u;f[5]=0;f[6]=0;f[7]=0;f[8]=1;return f}function e(f,u){f[0]=u[0];f[1]=0;f[2]=0;f[3]=0;f[4]=u[1];f[5]=0;f[6]=0;f[7]=0;f[8]=1;return f}function g(f,u){f[0]=u[0];f[1]=u[1];f[2]=0;f[3]=u[2];f[4]=u[3];f[5]=0;f[6]=u[4];f[7]=u[5];f[8]=1;return f}function c(f,u){var V=u[0],Z=u[1],y=u[2];u=u[3];var C=V+V,D=Z+Z;const T=y+y;V*=C;const q=Z*C;Z*=D;const G=y*C,U=y*D;y*=T;C*=u;D*=u;u*=T;f[0]=1-Z-y;f[3]=q-u;f[6]=G+D;f[1]=q+u;f[4]=1-V-y;f[7]=U-C;f[2]=G-D;f[5]=U+C;f[8]=1-V-Z;return f}function m(f,u){const V=
u[0],Z=u[1],y=u[2],C=u[4],D=u[5],T=u[6],q=u[8],G=u[9];u=u[10];const U=u*D-T*G,ba=-u*C+T*q,na=G*C-D*q;var O=V*U+Z*ba+y*na;if(!O)return null;O=1/O;f[0]=U*O;f[1]=(-u*Z+y*G)*O;f[2]=(T*Z-y*D)*O;f[3]=ba*O;f[4]=(u*V-y*q)*O;f[5]=(-T*V+y*C)*O;f[6]=na*O;f[7]=(-G*V+Z*q)*O;f[8]=(D*V-Z*C)*O;return f}function E(f,u){const V=u[0],Z=u[1],y=u[2],C=u[3],D=u[4],T=u[5],q=u[6],G=u[7];var U=u[8],ba=u[9],na=u[10],O=u[11];const W=u[12],ka=u[13],ma=u[14];u=u[15];const ia=V*T-Z*D,Q=V*q-y*D,N=V*G-C*D,I=Z*q-y*T,S=Z*G-C*T,da=
y*G-C*q,ha=U*ka-ba*W,ta=U*ma-na*W;U=U*u-O*W;const xa=ba*ma-na*ka;ba=ba*u-O*ka;na=na*u-O*ma;O=ia*na-Q*ba+N*xa+I*U-S*ta+da*ha;if(!O)return null;O=1/O;f[0]=(T*na-q*ba+G*xa)*O;f[1]=(q*U-D*na-G*ta)*O;f[2]=(D*ba-T*U+G*ha)*O;f[3]=(y*ba-Z*na-C*xa)*O;f[4]=(V*na-y*U+C*ta)*O;f[5]=(Z*U-V*ba-C*ha)*O;f[6]=(ka*da-ma*S+u*I)*O;f[7]=(ma*N-W*da-u*Q)*O;f[8]=(W*S-ka*N+u*ia)*O;return f}function r(f,u,V){f[0]=2/u;f[1]=0;f[2]=0;f[3]=0;f[4]=-2/V;f[5]=0;f[6]=-1;f[7]=1;f[8]=1;return f}function F(f){return"mat3("+f[0]+", "+
f[1]+", "+f[2]+", "+f[3]+", "+f[4]+", "+f[5]+", "+f[6]+", "+f[7]+", "+f[8]+")"}function R(f){return Math.sqrt(f[0]**2+f[1]**2+f[2]**2+f[3]**2+f[4]**2+f[5]**2+f[6]**2+f[7]**2+f[8]**2)}function w(f,u,V){f[0]=u[0]+V[0];f[1]=u[1]+V[1];f[2]=u[2]+V[2];f[3]=u[3]+V[3];f[4]=u[4]+V[4];f[5]=u[5]+V[5];f[6]=u[6]+V[6];f[7]=u[7]+V[7];f[8]=u[8]+V[8];return f}function ca(f,u,V){f[0]=u[0]-V[0];f[1]=u[1]-V[1];f[2]=u[2]-V[2];f[3]=u[3]-V[3];f[4]=u[4]-V[4];f[5]=u[5]-V[5];f[6]=u[6]-V[6];f[7]=u[7]-V[7];f[8]=u[8]-V[8];return f}
function fa(f,u,V){f[0]=u[0]*V;f[1]=u[1]*V;f[2]=u[2]*V;f[3]=u[3]*V;f[4]=u[4]*V;f[5]=u[5]*V;f[6]=u[6]*V;f[7]=u[7]*V;f[8]=u[8]*V;return f}function ja(f,u,V,Z){f[0]=u[0]+V[0]*Z;f[1]=u[1]+V[1]*Z;f[2]=u[2]+V[2]*Z;f[3]=u[3]+V[3]*Z;f[4]=u[4]+V[4]*Z;f[5]=u[5]+V[5]*Z;f[6]=u[6]+V[6]*Z;f[7]=u[7]+V[7]*Z;f[8]=u[8]+V[8]*Z;return f}function ea(f,u){return f[0]===u[0]&&f[1]===u[1]&&f[2]===u[2]&&f[3]===u[3]&&f[4]===u[4]&&f[5]===u[5]&&f[6]===u[6]&&f[7]===u[7]&&f[8]===u[8]}function sa(f,u){const V=f[0],Z=f[1],y=f[2],
C=f[3],D=f[4],T=f[5],q=f[6],G=f[7];f=f[8];const U=u[0],ba=u[1],na=u[2],O=u[3],W=u[4],ka=u[5],ma=u[6],ia=u[7];u=u[8];return Math.abs(V-U)<=a.EPSILON*Math.max(1,Math.abs(V),Math.abs(U))&&Math.abs(Z-ba)<=a.EPSILON*Math.max(1,Math.abs(Z),Math.abs(ba))&&Math.abs(y-na)<=a.EPSILON*Math.max(1,Math.abs(y),Math.abs(na))&&Math.abs(C-O)<=a.EPSILON*Math.max(1,Math.abs(C),Math.abs(O))&&Math.abs(D-W)<=a.EPSILON*Math.max(1,Math.abs(D),Math.abs(W))&&Math.abs(T-ka)<=a.EPSILON*Math.max(1,Math.abs(T),Math.abs(ka))&&
Math.abs(q-ma)<=a.EPSILON*Math.max(1,Math.abs(q),Math.abs(ma))&&Math.abs(G-ia)<=a.EPSILON*Math.max(1,Math.abs(G),Math.abs(ia))&&Math.abs(f-u)<=a.EPSILON*Math.max(1,Math.abs(f),Math.abs(u))}function oa(f){const u=a.EPSILON,V=f[0],Z=f[1],y=f[2],C=f[3],D=f[4],T=f[5],q=f[6],G=f[7];f=f[8];return Math.abs(1-(V*V+C*C+q*q))<=u&&Math.abs(1-(Z*Z+D*D+G*G))<=u&&Math.abs(1-(y*y+T*T+f*f))<=u}var va=Object.freeze({__proto__:null,fromMat4:d,copy:h,set:n,identity:p,transpose:H,invert:k,adjoint:J,determinant:x,multiply:v,
translate:L,rotate:K,scale:P,scaleByVec2:t,fromTranslation:l,fromRotation:B,fromScaling:e,fromMat2d:g,fromQuat:c,normalFromMat4Legacy:m,normalFromMat4:E,projection:r,str:F,frob:R,add:w,subtract:ca,multiplyScalar:fa,multiplyScalarAndAdd:ja,exactEquals:ea,equals:sa,isOrthoNormal:oa,mul:v,sub:ca});b.add=w;b.adjoint=J;b.copy=h;b.determinant=x;b.equals=sa;b.exactEquals=ea;b.frob=R;b.fromMat2d=g;b.fromMat4=d;b.fromQuat=c;b.fromRotation=B;b.fromScaling=e;b.fromTranslation=l;b.identity=p;b.invert=k;b.isOrthoNormal=
oa;b.mat3=va;b.mul=v;b.multiply=v;b.multiplyScalar=fa;b.multiplyScalarAndAdd=ja;b.normalFromMat4=E;b.normalFromMat4Legacy=m;b.projection=r;b.rotate=K;b.scale=P;b.scaleByVec2=t;b.set=n;b.str=F;b.sub=ca;b.subtract=ca;b.translate=L;b.transpose=H})},"esri/chunks/mat3f64":function(){define(["exports"],function(b){function a(){return[1,0,0,0,1,0,0,0,1]}function d(H){return[H[0],H[1],H[2],H[3],H[4],H[5],H[6],H[7],H[8]]}function h(H,k,J,x,v,L,K,P,t){return[H,k,J,x,v,L,K,P,t]}function n(H,k){return new Float64Array(H,
k,9)}var p=Object.freeze({__proto__:null,create:a,clone:d,fromValues:h,createView:n});b.clone=d;b.create=a;b.createView=n;b.fromValues=h;b.mat3f64=p})},"esri/chunks/mat4f64":function(){define(["exports"],function(b){function a(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function d(k){return[k[0],k[1],k[2],k[3],k[4],k[5],k[6],k[7],k[8],k[9],k[10],k[11],k[12],k[13],k[14],k[15]]}function h(k,J,x,v,L,K,P,t,l,B,e,g,c,m,E,r){return[k,J,x,v,L,K,P,t,l,B,e,g,c,m,E,r]}function n(k,J){return new Float64Array(k,
J,16)}const p=a();var H=Object.freeze({__proto__:null,create:a,clone:d,fromValues:h,createView:n,IDENTITY:p});b.IDENTITY=p;b.clone=d;b.create=a;b.createView=n;b.fromValues=h;b.mat4f64=H})},"esri/geometry/support/frustum":function(){define("exports ../../core/ObjectStack ../../chunks/mat4 ../../chunks/vec3 ../../chunks/vec3f64 ../../chunks/vec4 ../../chunks/vec4f64 ./clipRay ./plane ./vectorStacks".split(" "),function(b,a,d,h,n,p,H,k,J,x){function v(e){return e?[J.create(e[0]),J.create(e[1]),J.create(e[2]),
J.create(e[3]),J.create(e[4]),J.create(e[5])]:[J.create(),J.create(),J.create(),J.create(),J.create(),J.create()]}function L(){return[n.create(),n.create(),n.create(),n.create(),n.create(),n.create(),n.create(),n.create()]}function K(e,g){J.fromPoints(g[4],g[0],g[3],e[0]);J.fromPoints(g[1],g[5],g[6],e[1]);J.fromPoints(g[4],g[5],g[1],e[2]);J.fromPoints(g[3],g[2],g[6],e[3]);J.fromPoints(g[0],g[1],g[2],e[4]);J.fromPoints(g[5],g[4],g[7],e[5])}function P(e,g){for(let c=0;6>c;c++)if(!J.clip(e[c],g))return!1;
return!0}const t=[H.fromValues(-1,-1,-1,1),H.fromValues(1,-1,-1,1),H.fromValues(1,1,-1,1),H.fromValues(-1,1,-1,1),H.fromValues(-1,-1,1,1),H.fromValues(1,-1,1,1),H.fromValues(1,1,1,1),H.fromValues(-1,1,1,1)],l=new a.ObjectStack(k.create),B=L();b.computePlanes=K;b.copy=function(e,g=v()){for(let c=0;6>c;c++)J.copy(e[c],g[c])};b.create=v;b.createPoints=L;b.fromMatrix=function(e,g,c,m=B){e=d.multiply(x.sm4d.get(),g,e);d.invert(e,e);for(g=0;8>g;++g){const E=p.transformMat4(x.sv4d.get(),t[g],e);h.set(m[g],
E[0]/E[3],E[1]/E[3],E[2]/E[3])}K(c,m)};b.intersectClipRay=function(e,g){for(let c=0;6>c;c++)if(!J.clipInfinite(e[c],g))return!1;return!0};b.intersectsAABB=function(e,g){for(let c=0;6>c;c++)if(J.isAABBFullyInside(e[c],g))return!1;return!0};b.intersectsLineSegment=function(e,g,c){return P(e,k.fromLineSegmentAndDirection(g,c,l.get()))};b.intersectsPoint=function(e,g){for(let c=0;6>c;c++)if(0<J.signedDistance(e[c],g))return!1;return!0};b.intersectsRay=function(e,g){return P(e,k.fromRay(g,l.get()))};b.intersectsSphere=
function(e,g){for(let c=0;6>c;c++){const m=e[c];if(m[0]*g[0]+m[1]*g[1]+m[2]*g[2]+m[3]>=g[3])return!1}return!0};b.planePointIndices={bottom:[5,1,0,4],near:[0,1,2,3],far:[5,4,7,6],right:[1,5,6,2],left:[4,0,3,7],top:[7,3,2,6]};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/core/ObjectStack":function(){define(["exports","./maybe","./nextTick"],function(b,a,d){let h=function(){function n(H){this.allocator=H;this.items=[];this.itemsPtr=0;this.tickHandle=d.before(()=>this.reset());this.grow()}
var p=n.prototype;p.destroy=function(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=a.nullifyNonnullableForDispose(this.tickHandle));this.items=a.nullifyNonnullableForDispose(this.items)};p.get=function(){0===this.itemsPtr&&d(()=>{});this.itemsPtr===this.items.length&&this.grow();return this.items[this.itemsPtr++]};p.reset=function(){this.items.length=Math.min(Math.min(3*Math.max(8,this.itemsPtr),this.itemsPtr+3072),this.items.length);this.itemsPtr=0};p.grow=function(){for(let H=0;H<
Math.max(8,Math.min(this.items.length,1024));H++)this.items.push(this.allocator())};return n}();b.ObjectStack=h;b["default"]=h;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/chunks/vec4f64":function(){define(["exports"],function(b){function a(){return[0,0,0,0]}function d(c){return[c[0],c[1],c[2],c[3]]}function h(c,m,E,r){return[c,m,E,r]}function n(c){const m=a(),E=Math.min(4,c.length);for(let r=0;r<E;++r)m[r]=c[r];return m}function p(c,m){return new Float64Array(c,m,4)}function H(){return a()}
function k(){return[1,1,1,1]}function J(){return[1,0,0,0]}function x(){return[0,1,0,0]}function v(){return[0,0,1,0]}function L(){return[0,0,0,1]}const K=a(),P=k(),t=J(),l=x(),B=v(),e=L();var g=Object.freeze({__proto__:null,create:a,clone:d,fromValues:h,fromArray:n,createView:p,zeros:H,ones:k,unitX:J,unitY:x,unitZ:v,unitW:L,ZEROS:K,ONES:P,UNIT_X:t,UNIT_Y:l,UNIT_Z:B,UNIT_W:e});b.ONES=P;b.UNIT_W=e;b.UNIT_X=t;b.UNIT_Y=l;b.UNIT_Z=B;b.ZEROS=K;b.clone=d;b.create=a;b.createView=p;b.fromArray=n;b.fromValues=
h;b.ones=k;b.unitW=L;b.unitX=J;b.unitY=x;b.unitZ=v;b.vec4f64=g;b.zeros=H})},"esri/geometry/support/clipRay":function(){define(["exports","../../core/ObjectStack","../../chunks/vec3","./ray","./vectorStacks"],function(b,a,d,h,n){function p(v){return v?{ray:h.create(v.ray),c0:v.c0,c1:v.c1}:{ray:h.create(),c0:0,c1:Number.MAX_VALUE}}function H(v,L,K,P=p()){h.copy(v,P.ray);P.c0=L;P.c1=K;return P}function k(v,L,K=p()){const P=d.length(v.vector);h.fromValues(v.origin,L,K.ray);K.c0=0;K.c1=P;return K}function J(v,
L,K){return d.add(K,v.ray.origin,d.scale(K,v.ray.direction,L))}const x=new a.ObjectStack(()=>({c0:0,c1:0,ray:null}));b.copy=function(v,L=p()){return H(v.ray,v.c0,v.c1,L)};b.create=p;b.fromLineSegment=function(v,L=p()){const K=d.normalize(n.sv3d.get(),v.vector);return k(v,K,L)};b.fromLineSegmentAndDirection=k;b.fromRay=function(v,L=p()){h.copy(v,L.ray);L.c0=0;L.c1=Number.MAX_VALUE;return L};b.fromValues=H;b.getAt=J;b.getEnd=function(v,L){return J(v,v.c1,L)};b.getStart=function(v,L){return J(v,v.c0,
L)};b.wrap=function(v,L,K){const P=x.get();P.ray=v;P.c0=L;P.c1=K;return P};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/geometry/support/ray":function(){define(["exports","../../core/ObjectStack","../../chunks/vec3","../../chunks/vec3f64","./vectorStacks"],function(b,a,d,h,n){function p(x){return x?{origin:h.clone(x.origin),direction:h.clone(x.direction)}:{origin:h.create(),direction:h.create()}}function H(x,v,L=p()){d.copy(L.origin,x);d.copy(L.direction,v);return L}function k(x,v){x=
d.cross(n.sv3d.get(),d.normalize(n.sv3d.get(),x.direction),d.subtract(n.sv3d.get(),v,x.origin));return d.dot(x,x)}const J=new a.ObjectStack(function(){return{origin:null,direction:null}});b.closestPoint=function(x,v,L){v=d.dot(x.direction,d.subtract(L,v,x.origin));d.add(L,x.origin,d.scale(L,x.direction,v));return L};b.copy=function(x,v=p()){return H(x.origin,x.direction,v)};b.create=p;b.distance=function(x,v){return Math.sqrt(k(x,v))};b.distance2=k;b.fromPoints=function(x,v,L=p()){d.copy(L.origin,
x);d.subtract(L.direction,v,x);return L};b.fromValues=H;b.wrap=function(x,v){const L=J.get();L.origin=x;L.direction=v;return L};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/geometry/support/vectorStacks":function(){define(["exports","../../core/VectorStack"],function(b,a){const d=a.VectorStack.createVec2f64(),h=a.VectorStack.createVec3f64(),n=a.VectorStack.createVec4f64(),p=a.VectorStack.createMat3f64(),H=a.VectorStack.createMat4f64();a=a.VectorStack.createQuatf64();b.sm3d=p;b.sm4d=H;
b.sq4d=a;b.sv2d=d;b.sv3d=h;b.sv4d=n;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/core/VectorStack":function(){define("exports ../chunks/_rollupPluginBabelHelpers ./maybe ./nextTick ../chunks/mat3f64 ../chunks/mat4f64 ../chunks/quatf64 ../chunks/vec2f64 ../chunks/vec3f64 ../chunks/vec4f64".split(" "),function(b,a,d,h,n,p,H,k,J,x){let v=function(){function L(P,t,l){this.itemByteSize=P;this.itemCreate=t;this.buffers=[];this.items=[];this.itemsPtr=this.itemsPerBuffer=0;this.itemsPerBuffer=
Math.ceil(l/this.itemByteSize);this.tickHandle=h.before(()=>this.reset())}var K=L.prototype;K.destroy=function(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=d.nullifyNonnullableForDispose(this.tickHandle));this.itemsPtr=0;this.items=d.nullifyNonnullableForDispose(this.items);this.buffers=d.nullifyNonnullableForDispose(this.buffers)};K.get=function(){0===this.itemsPtr&&h(()=>{});const P=Math.floor(this.itemsPtr/this.itemsPerBuffer);for(;this.buffers.length<=P;){const t=new ArrayBuffer(this.itemsPerBuffer*
this.itemByteSize);for(let l=0;l<this.itemsPerBuffer;++l)this.items.push(this.itemCreate(t,l*this.itemByteSize));this.buffers.push(t)}return this.items[this.itemsPtr++]};K.reset=function(){const P=2*(Math.floor(this.itemsPtr/this.itemsPerBuffer)+1);for(;this.buffers.length>P;)this.buffers.pop(),this.items.length=this.buffers.length*this.itemsPerBuffer;this.itemsPtr=0};L.createVec2f64=function(P=4096){return new L(16,k.createView,P)};L.createVec3f64=function(P=4096){return new L(24,J.createView,P)};
L.createVec4f64=function(P=4096){return new L(32,x.createView,P)};L.createMat3f64=function(P=4096){return new L(72,n.createView,P)};L.createMat4f64=function(P=4096){return new L(128,p.createView,P)};L.createQuatf64=function(P=4096){return new L(32,H.createView,P)};a._createClass(L,[{key:"test",get:function(){return{size:this.buffers.length*this.itemsPerBuffer*this.itemByteSize}}}]);return L}();b.VectorStack=v;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/chunks/quatf64":function(){define(["exports"],
function(b){function a(){return[0,0,0,1]}function d(k){return[k[0],k[1],k[2],k[3]]}function h(k,J,x,v){return[k,J,x,v]}function n(k,J){return new Float64Array(k,J,4)}const p=a();var H=Object.freeze({__proto__:null,create:a,clone:d,fromValues:h,createView:n,IDENTITY:p});b.IDENTITY=p;b.clone=d;b.create=a;b.createView=n;b.fromValues=h;b.quatf64=H})},"esri/chunks/vec2f64":function(){define(["exports"],function(b){function a(){return[0,0]}function d(l){return[l[0],l[1]]}function h(l,B){return[l,B]}function n(l){const B=
[0,0],e=Math.min(2,l.length);for(let g=0;g<e;++g)B[g]=l[g];return B}function p(l,B){return new Float64Array(l,B,2)}function H(){return[0,0]}function k(){return[1,1]}function J(){return[1,0]}function x(){return[0,1]}const v=[0,0],L=[1,1],K=[1,0],P=[0,1];var t=Object.freeze({__proto__:null,create:a,clone:d,fromValues:h,fromArray:n,createView:p,zeros:H,ones:k,unitX:J,unitY:x,ZEROS:v,ONES:L,UNIT_X:K,UNIT_Y:P});b.ONES=L;b.UNIT_X=K;b.UNIT_Y=P;b.ZEROS=v;b.clone=d;b.create=a;b.createView=p;b.fromArray=n;
b.fromValues=h;b.ones=k;b.unitX=J;b.unitY=x;b.vec2f64=t;b.zeros=H})},"esri/geometry/support/plane":function(){define("exports ../../core/mathUtils ../../core/maybe ../../chunks/vec3 ../../chunks/vec3f64 ../../chunks/sphere ./vectorStacks".split(" "),function(b,a,d,h,n,p,H){function k(r=E){return[r[0],r[1],r[2],r[3]]}function J(r,F=k()){return x(r[0],r[1],r[2],r[3],F)}function x(r,F,R,w,ca=k()){ca[0]=r;ca[1]=F;ca[2]=R;ca[3]=w;return ca}function v(r,F,R){var w=F[0]*F[0]+F[1]*F[1]+F[2]*F[2];w=1E-5<Math.abs(w-
1)&&1E-12<w?1/Math.sqrt(w):1;R[0]=F[0]*w;R[1]=F[1]*w;R[2]=F[2]*w;R[3]=-(R[0]*r[0]+R[1]*r[1]+R[2]*r[2]);return R}function L(r,F,R,w=k()){var ca=R[0]-F[0],fa=R[1]-F[1],ja=R[2]-F[2];R=r[0]-F[0];const ea=r[1]-F[1],sa=r[2]-F[2];F=fa*sa-ja*ea;ja=ja*R-ca*sa;ca=ca*ea-fa*R;fa=F*F+ja*ja+ca*ca;fa=1E-5<Math.abs(fa-1)&&1E-12<fa?1/Math.sqrt(fa):1;w[0]=F*fa;w[1]=ja*fa;w[2]=ca*fa;w[3]=-(w[0]*r[0]+w[1]*r[1]+w[2]*r[2])}function K(r,F,R,w,ca){if(3>r.count)return!1;r.getVec(R,B);let fa=w,ja=!1;for(;fa<r.count-1&&!ja;)r.getVec(fa,
e),fa++,ja=!h.exactEquals(B,e);if(!ja)return!1;fa=Math.max(fa,ca);for(ja=!1;fa<r.count&&!ja;)r.getVec(fa,g),fa++,h.subtract(c,B,e),h.normalize(c,c),h.subtract(m,e,g),h.normalize(m,m),ja=!h.exactEquals(B,g)&&!h.exactEquals(e,g)&&.99619469809>Math.abs(h.dot(c,m));if(!ja)return 0===R&&1===w&&2===ca?!1:K(r,F,0,1,2);L(B,e,g,F);return!0}function P(r,F,R){r=h.scale(H.sv3d.get(),r,h.dot(r,F));h.subtract(R,F,r);return R}function t(r,F){return h.dot(r,F)+r[3]}function l(r,F,R,w,ca){const fa=h.dot(r,R);if(0===
fa)return!1;r=-(h.dot(r,F)+r[3])/fa;w&1&&(r=a.clamp(r,0,1));if(!(w&4)&&0>r||!(w&8)&&1<r)return!1;h.add(ca,F,h.scale(ca,R,r));return!0}const B=n.create(),e=n.create(),g=n.create(),c=n.create(),m=n.create(),E=[0,0,1,0];b.UP=E;b.clip=function(r,F){const R=h.dot(r,F.ray.direction);r=-t(r,F.ray.origin);if(0>r&&0<=R)return!1;if(-1E-6<R&&1E-6>R)return 0<r;if((0>r||0>R)&&!(0>r&&0>R))return!0;r/=R;0<R?r<F.c1&&(F.c1=r):r>F.c0&&(F.c0=r);return F.c0<=F.c1};b.clipInfinite=function(r,F){const R=h.dot(r,F.ray.direction);
r=-t(r,F.ray.origin);if(-1E-6<R&&1E-6>R)return 0<r;r/=R;0<R?r<F.c1&&(F.c1=r):r>F.c0&&(F.c0=r);return F.c0<=F.c1};b.copy=J;b.create=k;b.distance=function(r,F){return Math.abs(t(r,F))};b.fromManyPoints=function(r,F){return K(r,F,0,1,2)};b.fromManyPointsSampleAt=K;b.fromNormalAndOffset=function(r,F,R){h.copy(R,r);R[3]=F;return R};b.fromPoints=L;b.fromPositionAndNormal=v;b.fromValues=x;b.fromVectorsAndPoint=function(r,F,R,w){h.cross(g,F,r);return v(R,g,w)};b.intersectLine=function(r,F,R,w){R=h.subtract(H.sv3d.get(),
R,F);return l(r,F,R,12,w)};b.intersectLineSegment=function(r,F,R){return l(r,F.origin,F.vector,0,R)};b.intersectLineSegmentClamp=function(r,F,R){return l(r,F.origin,F.vector,1,R)};b.intersectRay=function(r,F,R){return d.isSome(F)?l(r,F.origin,F.direction,8,R):!1};b.isAABBFullyInside=function(r,F){const R=F[0],w=F[1],ca=F[2],fa=F[3],ja=F[4];F=F[5];return 0<=r[0]*(0<r[0]?R:fa)+r[1]*(0<r[1]?w:ja)+r[2]*(0<r[2]?ca:F)+r[3]};b.isPointInside=function(r,F){return 0<=t(r,F)};b.isPointOutside=function(r,F){return 0>
t(r,F)};b.isSphereFullyInside=function(r,F){return 0<=t(r,p.getCenter(F))-F[3]};b.isSphereFullyOutside=function(r,F){return 0>t(r,p.getCenter(F))+F[3]};b.negate=function(r,F){F[0]=-r[0];F[1]=-r[1];F[2]=-r[2];F[3]=-r[3];return F};b.normal=function(r){return r};b.projectPoint=function(r,F,R){const w=h.scale(H.sv3d.get(),r,-r[3]);F=h.subtract(H.sv3d.get(),F,w);r=P(r,F,H.sv3d.get());h.add(R,r,w);return R};b.projectVector=P;b.setOffsetFromPoint=function(r,F,R){r!==R&&J(r,R);R[3]=-h.dot(R,F);return R};
b.signedDistance=t;b.wrap=function(r,F,R,w){return x(r,F,R,w,H.sv4d.get())};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/chunks/sphere":function(){define("exports ../core/has ../core/Logger ../core/mathUtils ../core/maybe ./mat4 ./vec3 ./vec3f64 ./vec4 ./vec4f64 ../geometry/support/ray ../geometry/support/vector ../geometry/support/vectorStacks".split(" "),function(b,a,d,h,n,p,H,k,J,x,v,L,K){function P(){return x.create()}function t(D,T=P()){return J.copy(T,D)}function l(D,T){return x.fromValues(D[0],
D[1],D[2],T)}function B(D){return D}function e(D){D[0]=D[1]=D[2]=D[3]=0}function g(D){return D}function c(D){return Array.isArray(D)?D[3]:D}function m(D){return Array.isArray(D)?D:y}function E(D,T,q,G){return x.fromValues(D,T,q,G)}function r(D,T,q){D!==q&&H.copy(q,D);q[3]=D[3]+T;return q}function F(D,T,q){V.error("sphere.setExtent is not yet supported");return D===q?q:t(D,q)}function R(D,T,q){if(n.isNone(T))return!1;var G=H.subtract(K.sv3d.get(),T.origin,m(D)),U=H.dot(T.direction,T.direction);const ba=
2*H.dot(T.direction,G);D=H.dot(G,G)-D[3]*D[3];D=ba*ba-4*U*D;if(0>D)return!1;G=Math.sqrt(D);D=(-ba-G)/(2*U);U=(-ba+G)/(2*U);if(0>D||U<D&&0<U)D=U;if(0>D)return!1;q&&H.add(q,T.origin,H.scale(K.sv3d.get(),T.direction,D));return!0}function w(D,T){return R(D,T,null)}function ca(D,T,q){if(R(D,T,q))return q;D=fa(D,T,K.sv3d.get());H.add(q,T.origin,H.scale(K.sv3d.get(),T.direction,H.distance(T.origin,D)/H.length(T.direction)));return q}function fa(D,T,q){const G=K.sv3d.get(),U=K.sm4d.get();H.cross(G,T.origin,
T.direction);const ba=c(D);H.cross(q,G,T.origin);H.scale(q,q,1/H.length(q)*ba);D=oa(D,T.origin);T=L.angle(T.origin,q);p.identity(U);p.rotate(U,U,T+D,G);H.transformMat4(q,q,U);return q}function ja(D,T,q){if(R(D,T,q))return q;v.closestPoint(T,m(D),q);return ea(D,q,q)}function ea(D,T,q){T=H.subtract(K.sv3d.get(),T,m(D));T=H.scale(K.sv3d.get(),T,D[3]/H.length(T));return H.add(q,T,m(D))}function sa(D,T){T=H.subtract(K.sv3d.get(),T,m(D));T=H.squaredLength(T);return Math.sqrt(Math.abs(T-D[3]*D[3]))}function oa(D,
T){T=H.subtract(K.sv3d.get(),T,m(D));T=H.length(T);D=c(D);return h.acosClamped(D/(D+Math.abs(D-T)))}function va(D,T,q,G){D=H.subtract(Z,T,m(D));switch(q){case 0:return q=h.cartesianToSpherical(D,Z)[2],H.set(G,-Math.sin(q),Math.cos(q),0);case 1:return D=h.cartesianToSpherical(D,Z),q=D[1],D=D[2],T=Math.sin(q),H.set(G,-T*Math.cos(D),-T*Math.sin(D),Math.cos(q));case 2:return H.normalize(G,D)}}function f(D,T){T=H.subtract(C,T,m(D));return H.length(T)-D[3]}function u(D,T,q,G){const U=f(D,T);D=va(D,T,2,
C);q=H.scale(C,D,q-U);return H.add(G,T,q)}const V=d.getLogger("esri.geometry.support.sphere"),Z=k.create(),y=k.create(),C=k.create();a=Object.freeze({__proto__:null,create:P,copy:t,fromCenterAndRadius:l,wrap:B,clear:e,fromRadius:g,getRadius:c,getCenter:m,fromValues:E,elevate:r,setExtent:F,intersectRay:R,intersectsRay:w,intersectRayClosestSilhouette:ca,closestPointOnSilhouette:fa,closestPoint:ja,projectPoint:ea,distanceToSilhouette:sa,angleToSilhouette:oa,axisAt:va,altitudeAt:f,setAltitudeAt:u});b.altitudeAt=
f;b.angleToSilhouette=oa;b.axisAt=va;b.clear=e;b.closestPoint=ja;b.closestPointOnSilhouette=fa;b.copy=t;b.create=P;b.distanceToSilhouette=sa;b.elevate=r;b.fromCenterAndRadius=l;b.fromRadius=g;b.fromValues=E;b.getCenter=m;b.getRadius=c;b.intersectRay=R;b.intersectRayClosestSilhouette=ca;b.intersectsRay=w;b.projectPoint=ea;b.setAltitudeAt=u;b.setExtent=F;b.sphere=a;b.wrap=B})},"esri/geometry/support/vector":function(){define(["exports","../../core/mathUtils","../../chunks/vec3","../../chunks/vec3f64"],
function(b,a,d,h){const n=h.create(),p=h.create();b.angle=function(H,k){H=d.dot(H,k)/(d.length(H)*d.length(k));return-a.acosClamped(H)};b.angleAroundAxis=function(H,k,J){d.normalize(n,H);d.normalize(p,k);H=d.dot(n,p);H=a.acosClamped(H);k=d.cross(n,n,p);return 0>d.dot(k,J)?2*Math.PI-H:H};b.projectPoint=function(H,k,J){k=d.dot(H,k)/d.dot(H,H);return d.scale(J,H,k)};b.projectPointSignedLength=function(H,k){return d.dot(H,k)/d.length(H)};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/camera/intersectionUtils":function(){define("exports ../../../core/maybe ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/projectionEllipsoid ../../../geometry/support/aaBoundingRect ../webgl-engine/lib/Intersector".split(" "),
function(b,a,d,h,n,p,H){function k(t,l){return t.elevationProvider?a.unwrapOr(t.elevationProvider.getElevation(l[0],l[1],l[2],t.renderCoordsHelper.spatialReference,"ground"),0):0}function J(t,l,B){if(!t.state.isGlobal)return!1;const e=k(t,l);({far:t}=t.stateManager.constraintsManager.nearFarHeuristic.compute(l,B,t.renderDataExtent,e,P));t*=t;return d.squaredDistance(l,B)>t}const x={},v=h.create(),L=h.create(),K=h.create(),P={near:0,far:0};b.cameraOnContentAlongViewDirection=function(t,l,B,e){const g=
t.state.camera.clone();l&&(g.eye=l,g.center=B,g.up=e);l=g.ray;B=x[t.viewingMode];B||(B=new H.Intersector(t.state.viewingMode),B.options.backfacesTerrain=!t.state.isGlobal,B.options.invisibleTerrain=!0,x[t.viewingMode]=B);({isGlobal:e}=t.state);t.sceneIntersectionHelper.intersectRay(l,B,L)&&!J(t,l.origin,L)?l=!0:!t.renderCoordsHelper.intersectManifold(l,0,L)||J(t,l.origin,L)?e?(B=n.getReferenceEllipsoid(t.spatialReference).radius,B=d.dot(l.origin,l.origin)-B*B,d.scale(L,l.direction,(0<B?Math.sqrt(B)/
3:1)/d.length(l.direction)),d.add(L,L,l.origin),l=!0):l=!1:l=!0;l||d.copy(L,g.center);B=t.state.constraints;e=B.minimumPoiDistance;d.squaredDistance(g.eye,L)<e&&(l=B.collision.enabled,d.copy(K,g.viewForward),d.scale(K,K,e),l?g.eye=d.subtract(v,L,K):d.add(L,g.eye,K),t=t.renderCoordsHelper,e=t.getAltitude(g.eye),B=B.collision.elevationMargin,l&&e<B&&(d.subtract(K,L,g.eye),g.eye=t.setAltitude(v,B,g.eye),d.add(L,g.eye,K)));g.center=L;return g};b.eyeWithinExtent=function(t,l,B,e){return a.isSome(t.renderCoordsHelper.fromRenderCoords(l.eye,
v,e))&&p.containsPoint(B,v)};b.surfaceElevationBelowRenderLocation=k;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Intersector":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/maybe ../../../../chunks/mat4f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../geometry/support/ray ./IntersectorInterfaces ./intersectorUtils ./verticalOffsetUtils ../materials/renderers/utils".split(" "),function(b,
a,d,h,n,p,H,k,J,x,v,L){d=function(){function K(t){this.options=new J.IntersectorOptions;this.results=new x.IntersectorResults;this.transform=new v.IntersectorTransform;this.performanceInfo={queryDuration:0,numObjectsTested:0};this.tolerance=1E-5;this.verticalOffset=null;this._ray={origin:H.create(),direction:H.create()};this._rayEndPoint=H.create();this._rayStartPointTransformed=H.create();this._rayEndPointTransformed=H.create();this.viewingMode=null==t?1:t}var P=K.prototype;P.reset=function(t,l){this.resetWithRay(k.fromPoints(t,
l,this._ray))};P.resetWithRay=function(t){t!==this._ray&&k.copy(t,this._ray);0!==this.options.verticalOffset?2===this.viewingMode?this._ray.origin[2]-=this.options.verticalOffset:this.verticalOffset=this.options.verticalOffset:this.verticalOffset=null;p.add(this._rayEndPoint,this._ray.origin,this._ray.direction);this._numObjectsTested=0;this.results.init(this._ray)};P.intersect=function(t=null,l,B,e,g,c){this.point=l;this.camera=B;this.filterPredicate=g;this.tolerance=null==e?1E-5:e;l=v.getVerticalOffsetObject3D(this.verticalOffset);
if(h.isSome(t)&&0<t.length){const m=c?E=>{c(E)&&this.intersectObject(E)}:E=>{this.intersectObject(E)};for(const E of t)t=E.getSpatialQueryAccelerator&&E.getSpatialQueryAccelerator(),h.isSome(t)?(h.isSome(l)?t.forEachAlongRayWithVerticalOffset(this._ray.origin,this._ray.direction,m,l):t.forEachAlongRay(this._ray.origin,this._ray.direction,m),this.options.selectionMode&&this.options.hud&&t.forEachDegenerateObject(m)):E.objects.forAll(r=>m(r))}this.sortResults()};P.intersectObject=function(t){this._numObjectsTested++;
const l=t.geometryRecords;if(l){var B=t.id,e=t.transformation,g=v.getVerticalOffsetObject3D(this.verticalOffset);for(const m of l){const {geometry:E,material:r,instanceParameters:F}=m;if(L.isInstanceHidden(F))continue;var c=E.id;this.transform.setAndInvalidateLazyTransforms(e,m.getShaderTransformation());p.transformMat4(this._rayStartPointTransformed,this._ray.origin,this.transform.inverse);p.transformMat4(this._rayEndPointTransformed,this._rayEndPoint,this.transform.inverse);const R=this.transform.transform;
h.isSome(g)&&(g.objectTransform=this.transform);r.intersect(E,F,this.transform.transform,this,this._rayStartPointTransformed,this._rayEndPointTransformed,(w,ca,fa,ja,ea,sa)=>{if(0<=w&&(!h.isSome(this.filterPredicate)||this.filterPredicate(this._ray.origin,this._rayEndPoint,w))){var oa=`Object3D ${B}`;ea?(null==this.results.hud.dist||w<this.results.hud.dist)&&this.results.hud.set(t,oa,w,ca,n.IDENTITY,ja,sa,c,fa):((null==this.results.min.drapedLayerOrder||ja>=this.results.min.drapedLayerOrder)&&(null==
this.results.min.dist||w<this.results.min.dist)&&this.results.min.set(t,oa,w,ca,R,ja,null,c,fa),0!==this.options.store&&(null==this.results.max.drapedLayerOrder||ja<this.results.max.drapedLayerOrder)&&(null==this.results.max.dist||w>this.results.max.dist)&&this.results.max.set(t,oa,w,ca,R,ja,null,c,fa),2===this.options.store&&(ea=new x.IntersectorResult(this._ray),ea.set(t,oa,w,ca,R,ja,null,c,fa),this.results.all.push(ea)))}},m.shaderTransformation)}}};P.sortResults=function(){this.results.all.sort((t,
l)=>t.dist!==l.dist?t.dist-l.dist:t.drapedLayerOrder!==l.drapedLayerOrder?(void 0!==t.drapedLayerOrder?t.drapedLayerOrder:Number.MAX_VALUE)-(void 0!==l.drapedLayerOrder?l.drapedLayerOrder:Number.MAX_VALUE):(void 0!==l.drapedLayerGraphicOrder?l.drapedLayerGraphicOrder:Number.MIN_VALUE)-(void 0!==t.drapedLayerGraphicOrder?t.drapedLayerGraphicOrder:Number.MIN_VALUE))};a._createClass(K,[{key:"ray",get:function(){return this._ray}},{key:"rayBeginPoint",get:function(){return this._ray.origin}},{key:"rayEndPoint",
get:function(){return this._rayEndPoint}}]);return K}();d.DEFAULT_TOLERANCE=1E-5;b.Intersector=d;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/IntersectorInterfaces":function(){define(["exports"],function(b){b.IntersectorOptions=function(){this.verticalOffset=0;this.selectionMode=!1;this.selectOpaqueTerrainOnly=this.hud=!0;this.invisibleTerrain=!1;this.backfacesTerrain=!0;this.isFiltered=!1;this.store=2};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/intersectorUtils":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4 ../../../../chunks/vec4f64 ../../../../chunks/boundedPlane ../../../../geometry/support/ray ./Object3D".split(" "),
function(b,a,d,h,n,p,H,k,J,x,v){let L=function(){function B(){this.min=new K;this.max=new K;this.hud=new K;this.ground=new K}B.prototype.init=function(e){this.min.init(e);this.max.init(e);this.hud.init(e);this.ground.init(e);this.all=[]};return B}(),K=function(){function B(g){this.normal=p.create();this.transformation=h.create();this._ray=x.create();this.init(g)}var e=B.prototype;e.getIntersectionPoint=function(g){if(!this.hasIntersectionPoint)return!1;n.scale(t,this.ray.direction,this.dist);n.add(g,
this.ray.origin,t);return!0};e.getTransformedNormal=function(g){n.copy(l,this.normal);l[3]=0;H.transformMat4(l,l,this.transformation);n.copy(g,l);n.normalize(g,g);return g};e.init=function(g){this.drapedLayerGraphicOrder=this.drapedLayerOrder=this.name=this.target=this.dist=void 0;this.triangleNr=this.geometryId=this.center=null;this.intersector="Stage";g?x.copy(g,this._ray):this._ray=x.create()};e.set=function(g,c,m,E,r,F,R,w,ca,fa){g instanceof v.Object3D&&(g={type:"stage",obj:g});this.dist=m;n.copy(this.normal,
E);d.copy(this.transformation,r);this.target=g;this.name=c;this.drapedLayerOrder=F;this.center=R?p.clone(R):null;this.geometryId=w;this.triangleNr=ca;this.drapedLayerGraphicOrder=fa};e.copyFrom=function(g){x.copy(g.ray,this._ray);this.dist=g.dist;this.target=g.target;this.name=g.name;this.drapedLayerOrder=g.drapedLayerOrder;this.center=g.center?p.clone(g.center):null;this.geometryId=g.geometryId;this.triangleNr=g.triangleNr;this.intersector=g.intersector;this.drapedLayerGraphicOrder=g.drapedLayerGraphicOrder;
n.copy(this.normal,g.normal);d.copy(this.transformation,g.transformation)};a._createClass(B,[{key:"ray",get:function(){return this._ray}},{key:"hasIntersectionPoint",get:function(){return null!=this.dist}},{key:"distanceInRenderSpace",get:function(){if(null!=this.dist)return n.scale(t,this.ray.direction,this.dist),n.length(t)}}]);return B}();const P=p.create(),t=p.create(),l=k.create();b.IntersectorResult=K;b.IntersectorResults=L;b.sliceFilterPredicate=function(B){return(e,g,c)=>{n.lerp(P,e,g,c);
return!J.extrusionContainsPoint(B,P)}};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/chunks/boundedPlane":function(){define("exports ../core/has ../core/Logger ../core/mathUtils ../core/ObjectStack ./mat4 ./mat4f64 ./vec3 ./vec3f64 ../geometry/support/lineSegment ../geometry/support/plane ../geometry/support/ray ../geometry/support/vector ../geometry/support/vectorStacks".split(" "),function(b,a,d,h,n,p,H,k,J,x,v,L,K,P){function t(I=na){return{plane:v.create(I.plane),origin:J.clone(I.origin),
basis1:J.clone(I.basis1),basis2:J.clone(I.basis2)}}function l(I,S,da){const ha=ma.get();ha.origin=I;ha.basis1=S;ha.basis2=da;ha.plane=v.wrap(0,0,0,0);c(ha);return ha}function B(I,S=t()){return g(I.origin,I.basis1,I.basis2,S)}function e(I,S){k.copy(S.origin,I.origin);k.copy(S.basis1,I.basis1);k.copy(S.basis2,I.basis2);v.copy(I.plane,S.plane)}function g(I,S,da,ha=t()){k.copy(ha.origin,I);k.copy(ha.basis1,S);k.copy(ha.basis2,da);c(ha);1E-6<Math.abs(k.dot(ha.basis1,ha.basis2)/(k.length(ha.basis1)*k.length(ha.basis2)))&&
ba.warn("fromValues()","Provided basis vectors are not perpendicular");1E-6<Math.abs(k.dot(ha.basis1,D(ha)))&&ba.warn("fromValues()","Basis vectors and plane normal are not perpendicular");1E-6<Math.abs(-k.dot(D(ha),ha.origin)-ha.plane[3])&&ba.warn("fromValues()","Plane offset is not consistent with plane origin");return ha}function c(I){v.fromVectorsAndPoint(I.basis2,I.basis1,I.origin,I.plane)}function m(I,S,da){I!==da&&B(I,da);I=k.scale(P.sv3d.get(),D(I),S);k.add(da.origin,da.origin,I);da.plane[3]-=
S;return da}function E(I,S,da){r(S,da);m(da,u(I,I.origin),da);return da}function r(I,S=t()){const da=(I[2]-I[0])/2,ha=(I[3]-I[1])/2;k.set(S.origin,I[0]+da,I[1]+ha,0);k.set(S.basis1,da,0,0);k.set(S.basis2,0,ha,0);v.fromValues(0,0,1,0,S.plane);return S}function F(I,S,da){return v.intersectRay(I.plane,S,da)?T(I,da):!1}function R(I,S,da){if(F(I,S,da))return da;I=w(I,S,P.sv3d.get());k.add(da,S.origin,k.scale(P.sv3d.get(),S.direction,k.distance(S.origin,I)/k.length(S.direction)));return da}function w(I,
S,da){const ha=O.get();var ta=O.get();U(I,S,ha,ta);ta=Number.POSITIVE_INFINITY;for(const Aa of ia){var xa=G(I,Aa,W.get());const Ja=P.sv3d.get();v.intersectLineSegment(ha,xa,Ja)&&(xa=k.direction(P.sv3d.get(),S.origin,Ja),xa=Math.abs(h.acosClamped(k.dot(S.direction,xa))),xa<ta&&(ta=xa,k.copy(da,Ja)))}return ta===Number.POSITIVE_INFINITY?ca(I,S,da):da}function ca(I,S,da){if(F(I,S,da))return da;const ha=O.get(),ta=O.get();U(I,S,ha,ta);let xa=Number.POSITIVE_INFINITY;for(const Ja of ia){var Aa=G(I,Ja,
W.get());const Ra=P.sv3d.get();v.intersectLineSegmentClamp(ha,Aa,Ra)&&(Aa=L.distance2(S,Ra),v.isPointInside(ta,Ra)&&Aa<xa&&(xa=Aa,k.copy(da,Ra)))}ea(I,S.origin)<xa&&fa(I,S.origin,da);return da}function fa(I,S,da){var ha=v.projectPoint(I.plane,S,P.sv3d.get());S=x.projectPointClamp(q(I,I.basis1),ha,-1,1,P.sv3d.get());ha=x.projectPointClamp(q(I,I.basis2),ha,-1,1,P.sv3d.get());k.subtract(da,k.add(P.sv3d.get(),S,ha),I.origin);return da}function ja(I,S,da){const {origin:ha,basis1:ta,basis2:xa}=I,Aa=k.subtract(P.sv3d.get(),
S,ha);S=K.projectPointSignedLength(ta,Aa);const Ja=K.projectPointSignedLength(xa,Aa);I=K.projectPointSignedLength(D(I),Aa);return k.set(da,S,Ja,I)}function ea(I,S){S=ja(I,S,P.sv3d.get());const {basis1:da,basis2:ha}=I;I=k.length(da);var ta=k.length(ha);I=Math.max(Math.abs(S[0])-I,0);ta=Math.max(Math.abs(S[1])-ta,0);S=S[2];return I*I+ta*ta+S*S}function sa(I,S){return Math.sqrt(ea(I,S))}function oa(I,S){let da=Number.NEGATIVE_INFINITY;for(const ta of ia){var ha=G(I,ta,W.get());ha=x.distance2(ha,S);ha>
da&&(da=ha)}return Math.sqrt(da)}function va(I,S){return v.isPointInside(I.plane,S)&&T(I,S)}function f(I,S,da,ha){switch(da){case 0:k.copy(ha,I.basis1);k.normalize(ha,ha);break;case 1:k.copy(ha,I.basis2);k.normalize(ha,ha);break;case 2:k.copy(ha,D(I))}return ha}function u(I,S){const da=-I.plane[3];return K.projectPointSignedLength(D(I),S)-da}function V(I,S,da,ha){const ta=u(I,S);I=k.scale(ka,D(I),da-ta);k.add(ha,S,I);return ha}function Z(I,S){return k.exactEquals(I.basis1,S.basis1)&&k.exactEquals(I.basis2,
S.basis2)&&k.exactEquals(I.origin,S.origin)}function y(I,S,da){I!==da&&B(I,da);p.invert(Q,S);p.transpose(Q,Q);k.transformMat4(da.basis1,I.basis1,Q);k.transformMat4(da.basis2,I.basis2,Q);k.transformMat4(v.normal(da.plane),v.normal(I.plane),Q);k.transformMat4(da.origin,I.origin,S);v.setOffsetFromPoint(da.plane,da.origin,da.plane);return da}function C(I,S,da,ha){I!==ha&&B(I,ha);p.rotate(N,p.identity(N),S,da);k.transformMat4(ha.basis1,I.basis1,N);k.transformMat4(ha.basis2,I.basis2,N);c(ha);return ha}
function D(I){return v.normal(I.plane)}function T(I,S){const da=k.subtract(P.sv3d.get(),S,I.origin);S=k.squaredLength(I.basis1);const ha=k.squaredLength(I.basis2),ta=k.dot(I.basis1,da);I=k.dot(I.basis2,da);return 0>-ta-S&&0>ta-S&&0>-I-ha&&0>I-ha}function q(I,S){const da=W.get();k.copy(da.origin,I.origin);k.copy(da.vector,S);return da}function G(I,S,da){const {basis1:ha,basis2:ta,origin:xa}=I;I=k.scale(P.sv3d.get(),ha,S.origin[0]);const Aa=k.scale(P.sv3d.get(),ta,S.origin[1]);k.add(da.origin,I,Aa);
k.add(da.origin,da.origin,xa);I=k.scale(P.sv3d.get(),ha,S.direction[0]);S=k.scale(P.sv3d.get(),ta,S.direction[1]);k.scale(da.vector,k.add(I,I,S),2);return da}function U(I,S,da,ha){I=D(I);v.fromVectorsAndPoint(I,S.direction,S.origin,da);v.fromVectorsAndPoint(v.normal(da),I,S.origin,ha)}const ba=d.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");a=function(){this.plane=v.create();this.origin=J.create();this.basis1=J.create();this.basis2=J.create()};const na={plane:v.create(),origin:J.fromValues(0,
0,0),basis1:J.fromValues(1,0,0),basis2:J.fromValues(0,1,0)},O=new n.ObjectStack(v.create),W=new n.ObjectStack(x.create),ka=J.create(),ma=new n.ObjectStack(()=>({origin:null,basis1:null,basis2:null,plane:null})),ia=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],Q=H.create(),N=H.create();n=Object.freeze({__proto__:null,BoundedPlaneClass:a,create:t,wrap:l,copy:B,copyWithoutVerify:e,fromValues:g,updateUnboundedPlane:c,
elevate:m,setExtent:E,fromAABoundingRect:r,intersectRay:F,intersectRayClosestSilhouette:R,closestPointOnSilhouette:w,closestPoint:ca,projectPoint:fa,projectPointLocal:ja,distance2:ea,distance:sa,distanceToSilhouette:oa,extrusionContainsPoint:va,axisAt:f,altitudeAt:u,setAltitudeAt:V,equals:Z,transform:y,rotate:C,normal:D,UP:na});b.BoundedPlaneClass=a;b.UP=na;b.altitudeAt=u;b.axisAt=f;b.boundedPlane=n;b.closestPoint=ca;b.closestPointOnSilhouette=w;b.copy=B;b.copyWithoutVerify=e;b.create=t;b.distance=
sa;b.distance2=ea;b.distanceToSilhouette=oa;b.elevate=m;b.equals=Z;b.extrusionContainsPoint=va;b.fromAABoundingRect=r;b.fromValues=g;b.intersectRay=F;b.intersectRayClosestSilhouette=R;b.normal=D;b.projectPoint=fa;b.projectPointLocal=ja;b.rotate=C;b.setAltitudeAt=V;b.setExtent=E;b.transform=y;b.updateUnboundedPlane=c;b.wrap=l})},"esri/geometry/support/lineSegment":function(){define("exports ../../core/mathUtils ../../core/ObjectStack ../../chunks/vec3 ../../chunks/vec3f64 ./vectorStacks".split(" "),
function(b,a,d,h,n,p){function H(t){return t?{origin:n.clone(t.origin),vector:n.clone(t.vector)}:{origin:n.create(),vector:n.create()}}function k(t,l){const B=P.get();B.origin=t;B.vector=l;return B}function J(t,l,B=H()){h.copy(B.origin,t);h.copy(B.vector,l);return B}function x(t,l){l=h.subtract(p.sv3d.get(),l,t.origin);var B=h.dot(t.vector,l);const e=h.dot(t.vector,t.vector);B=a.clamp(B/e,0,1);t=h.subtract(p.sv3d.get(),h.scale(p.sv3d.get(),t.vector,B),l);return h.dot(t,t)}function v(t,l,B,e,g){const {vector:c,
origin:m}=t;l=h.subtract(p.sv3d.get(),l,m);l=h.dot(c,l)/h.squaredLength(c);h.scale(g,c,a.clamp(l,B,e));return h.add(g,g,t.origin)}function L(t,l,B,e){const g=t.origin;var c=h.add(p.sv3d.get(),g,t.vector);t=l.origin;var m=h.add(p.sv3d.get(),t,l.vector),E=p.sv3d.get();l=p.sv3d.get();E[0]=g[0]-t[0];E[1]=g[1]-t[1];E[2]=g[2]-t[2];l[0]=m[0]-t[0];l[1]=m[1]-t[1];l[2]=m[2]-t[2];if(1E-6>Math.abs(l[0])&&1E-6>Math.abs(l[1])&&1E-6>Math.abs(l[2]))return!1;m=p.sv3d.get();m[0]=c[0]-g[0];m[1]=c[1]-g[1];m[2]=c[2]-
g[2];if(1E-6>Math.abs(m[0])&&1E-6>Math.abs(m[1])&&1E-6>Math.abs(m[2]))return!1;c=E[0]*l[0]+E[1]*l[1]+E[2]*l[2];var r=l[0]*m[0]+l[1]*m[1]+l[2]*m[2];const F=l[0]*l[0]+l[1]*l[1]+l[2]*l[2],R=(m[0]*m[0]+m[1]*m[1]+m[2]*m[2])*F-r*r;if(1E-6>Math.abs(R))return!1;E=(c*r-(E[0]*m[0]+E[1]*m[1]+E[2]*m[2])*F)/R;c=(c+r*E)/F;B&&(E=a.clamp(E,0,1),c=a.clamp(c,0,1));B=p.sv3d.get();r=p.sv3d.get();B[0]=g[0]+E*m[0];B[1]=g[1]+E*m[1];B[2]=g[2]+E*m[2];r[0]=t[0]+c*l[0];r[1]=t[1]+c*l[1];r[2]=t[2]+c*l[2];e.tA=E;e.tB=c;e.pA=B;
e.pB=r;e.distance2=h.squaredDistance(B,r);return!0}const K={tA:0,tB:0,pA:n.create(),pB:n.create(),distance2:0},P=new d.ObjectStack(()=>({origin:null,vector:null}));b.closestLineSegmentDistance2=function(t,l){return L(t,l,!0,K)?K.distance2:null};b.closestLineSegmentPoint=function(t,l,B){return L(t,l,!0,K)?(h.copy(B,K.pA),!0):!1};b.closestRayDistance2=function(t,l){if(L(t,k(l.origin,l.direction),!1,K)){const {tA:B,pB:e,distance2:g}=K;if(0<=B&&1>=B)return g;if(0>B)return h.squaredDistance(t.origin,e);
if(1<B)return h.squaredDistance(h.add(p.sv3d.get(),t.origin,t.vector),e)}return null};b.copy=function(t,l=H()){return J(t.origin,t.vector,l)};b.create=H;b.distance=function(t,l){return Math.sqrt(x(t,l))};b.distance2=x;b.fromPoints=function(t,l,B=H()){h.copy(B.origin,t);h.subtract(B.vector,l,t);return B};b.fromValues=J;b.pointAt=function(t,l,B){return h.add(B,t.origin,h.scale(B,t.vector,l))};b.projectPoint=function(t,l,B){return v(t,l,0,1,B)};b.projectPointClamp=v;b.wrap=k;Object.defineProperty(b,
"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Object3D":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/sphere ../../support/mathUtils ./ContentObject ./GeometryRecord ./Object3DStateID ./Util ../materials/renderers/utils".split(" "),function(b,a,d,h,n,p,H,k,J,x,v,L,K,P){x=function(B){function e(c={}){var m=B.call(this)||
this;m.type=1;m._geometryRecords=[];m._geometries=[];m._objectTransformation=n.create();m._bvObjectSpace=new l;m._bvWorldSpace=new l;m._bvDirty=!0;m._hasVolatileTransformation=!1;m._visible=!0;m.castShadow=null!=c.castShadow?c.castShadow:!0;m.metadata=c.metadata;m.metadata&&m.metadata.isElevationSource&&(m.metadata.lastValidElevationBB=new t);m.transformation=n.create();const {geometries:E,materials:r,transformations:F,origins:R}=c;if(!Array.isArray(E))return a._assertThisInitialized(m);K.assert(r.length===
E.length,"Object3D: materials don't match geometries");K.assert(F.length===E.length,"Object3D: transformations don't match geometries");m._geometryRecords.length=E.length;m._geometries.length=E.length;for(c=0;c<E.length;c++)m._geometries[c]=E[c],m._geometryRecords[c]=v.GeometryRecord.pool.acquire(E[c],r[c],n.clone(F[c]),{highlights:null,occludees:null,visible:!0},R&&R[c]);return m}a._inheritsLoose(e,B);var g=e.prototype;g.dispose=function(){this._geometryRecords.length=0;this._geometries.length=0};
g.getNumGeometryRecords=function(){return this._geometryRecords.length};g.getGeometryRecord=function(c){K.assert(0<=c&&c<this._geometryRecords.length,"Object3d.getGeometryDataByIndex: index out of range");return this._geometryRecords[c]};g.addGeometry=function(c,m,E,r,F,R){E=E?E:n.IDENTITY;this._geometries.push(c);c=v.GeometryRecord.pool.acquire(c,m,E,r||{highlights:null,occludees:null,visible:!0},F,R);this._geometryRecords.push(c);this._hasVolatileTransformation=this._hasVolatileTransformation||
d.isSome(c.shaderTransformation);this._emit("objectGeometryAdded",{object:this,record:c});this._invalidateBoundingVolume();return c};g.removeGeometry=function(c){const m=this._geometryRecords.splice(c,1)[0];this._hasVolatileTransformation=d.isSome(m.shaderTransformation)?this._geometryRecords.some(E=>d.isSome(E.shaderTransformation)):this._hasVolatileTransformation;m.dispose();this._geometries.splice(c,1);this._emit("objectGeometryRemoved",{object:this,record:m});this._invalidateBoundingVolume();
return m};g.removeAllGeometries=function(){for(;0<this.getNumGeometryRecords();)this.removeGeometry(0)};g.geometryVertexAttrsUpdated=function(c){this._emit("vertexAttrsUpdated",{object:this,record:this._geometryRecords[c]});this._invalidateBoundingVolume()};g.setVisible=function(c){this._visible=c;for(const m of this._geometryRecords)m.instanceParameters.visible=this._visible;this._emit("visibilityChanged",this)};g.maskOccludee=function(){const c=new L.Object3DStateID(1);for(const m of this._geometryRecords)m.instanceParameters.occludees=
P.addObject3DStateID(m.instanceParameters.occludees,c);this._emit("occlusionChanged",this);return c};g.removeOcclude=function(c){for(const m of this._geometryRecords)m.instanceParameters.occludees=P.removeObject3DStateID(m.instanceParameters.occludees,c);this._emit("occlusionChanged",this)};g.highlight=function(){const c=new L.Object3DStateID(0);for(const m of this._geometryRecords)m.instanceParameters.highlights=P.addObject3DStateID(m.instanceParameters.highlights,c);this._emit("highlightChanged",
this);return c};g.removeHighlight=function(c){for(const m of this._geometryRecords)m.instanceParameters.highlights=P.removeObject3DStateID(m.instanceParameters.highlights,c);this._emit("highlightChanged",this)};g.getCombinedStaticTransformation=function(c,m){return h.multiply(d.unwrapOr(m,n.create()),this.transformation,c.getStaticTransformation())};g.getCombinedShaderTransformation=function(c,m){m=m||n.create();h.multiply(m,this.transformation,c.getShaderTransformation());return m};g.hasVolativeTransformation=
function(){return this._hasVolatileTransformation};g._validateBoundingVolume=function(){if(this._bvDirty||this._hasVolatileTransformation){this._bvObjectSpace.init();this._bvWorldSpace.init();for(var c=0;c<this._geometryRecords.length;++c){var m=this._geometryRecords[c],E=this._geometries[c].boundingInfo;d.isSome(E)&&(this._calculateTransformedBoundingVolume(E,this._bvObjectSpace,m.getShaderTransformation()),this._calculateTransformedBoundingVolume(E,this._bvWorldSpace,this.getCombinedShaderTransformation(m)))}p.lerp(this._bvObjectSpace.bounds,
this._bvObjectSpace.min,this._bvObjectSpace.max,.5);p.lerp(this._bvWorldSpace.bounds,this._bvWorldSpace.min,this._bvWorldSpace.max,.5);c=H.create();m=H.create();E=J.maxScale(this.transformation);for(let w=0;w<this._geometryRecords.length;++w){var r=this._geometries[w].boundingInfo;if(!d.isNone(r)){var F=this._geometryRecords[w].getShaderTransformation(),R=J.maxScale(F);p.transformMat4(c,r.getCenter(),F);F=p.distance(c,this._bvObjectSpace.bounds);r=r.getBSRadius()*R;this._bvObjectSpace.bounds[3]=Math.max(this._bvObjectSpace.bounds[3],
F+r);p.transformMat4(m,c,this.transformation);R=p.distance(m,this._bvWorldSpace.bounds);this._bvWorldSpace.bounds[3]=Math.max(this._bvWorldSpace.bounds[3],R+r*E)}}this._bvDirty=!1}};g._calculateTransformedBoundingVolume=function(c,m,E){const r=c.getBBMin();c=c.getBBMax();const F=H.clone(r),R=H.clone(c);p.transformMat4(F,F,E);p.transformMat4(R,R,E);for(var w=0;3>w;++w)m.min[w]=Math.min(m.min[w],F[w],R[w]),m.max[w]=Math.max(m.max[w],F[w],R[w]);for(w=0;3>w;++w){p.copy(F,r);p.copy(R,c);F[w]=c[w];R[w]=
r[w];p.transformMat4(F,F,E);p.transformMat4(R,R,E);for(let ca=0;3>ca;++ca)m.min[ca]=Math.min(m.min[ca],F[ca],R[ca]),m.max[ca]=Math.max(m.max[ca],F[ca],R[ca])}};g._invalidateBoundingVolume=function(){this._bvDirty=!0;d.isSome(this._parentLayer)&&this._parentLayer.notifyObjectBBChanged(this,this._bvWorldSpace.bounds)};g._emit=function(c,m){d.isSome(this._parentLayer)&&this._parentLayer.events.emit(c,m)};a._createClass(e,[{key:"geometryRecords",get:function(){return this._geometryRecords}},{key:"geometries",
get:function(){return this._geometries}},{key:"transformation",get:function(){return this._objectTransformation},set:function(c){h.copy(this._objectTransformation,c);this._invalidateBoundingVolume();this._emit("objectTransformation",this)}},{key:"parentLayer",get:function(){return this._parentLayer},set:function(c){K.assert(null==this._parentLayer||null==c,"Object3D can only be added to a single Layer");this._parentLayer=c}},{key:"isVisible",get:function(){return this._visible}},{key:"boundingVolumeWorldSpace",
get:function(){this._validateBoundingVolume();return this._bvWorldSpace}},{key:"boundingVolumeObjectSpace",get:function(){this._validateBoundingVolume();return this._bvObjectSpace}},{key:"test",get:function(){const c=this;return{hasGeometry:m=>-1<c._geometries.indexOf(m),getGeometryIndex:m=>c._geometries.indexOf(m)}}}]);return e}(x.ContentObject);let t=function(){function B(){this.min=H.fromValues(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);this.max=H.fromValues(-Number.MAX_VALUE,-Number.MAX_VALUE,
-Number.MAX_VALUE)}B.prototype.isEmpty=function(){return this.max[0]<this.min[0]&&this.max[1]<this.min[1]&&this.max[2]<this.min[2]};return B}(),l=function(B){function e(){var g=B.apply(this,arguments)||this;g.bounds=k.create();return g}a._inheritsLoose(e,B);e.prototype.init=function(){p.set(this.min,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);p.set(this.max,-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);k.clear(this.bounds)};return e}(t);b.Object3D=x;Object.defineProperty(b,"__esModule",
{value:!0})})},"esri/views/3d/webgl-engine/lib/ContentObject":function(){define(["exports","../../../../core/uid"],function(b,a){let d=function(){function h(){this.id=a.generateUID()}h.prototype.unload=function(){};return h}();b.ContentObject=d;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/GeometryRecord":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/ObjectPool ../../../../core/uid ../../../../chunks/vec3".split(" "),
function(b,a,d,h,n,p){let H=function(){function k(){this._disposed=!1}var J=k.prototype;J.acquire=function(x,v,L,K,P,t){this.id=n.generateUID();this.geometry=x;this.material=v;this.transformation=L;this.instanceParameters=K;this.origin=P;this._shaderTransformation=t;this._disposed=!1};J.release=function(){this._disposed=!1};J.dispose=function(){this._disposed=!0};J.getStaticTransformation=function(){return this.transformation};J.getShaderTransformation=function(){return d.isSome(this._shaderTransformation)?
this._shaderTransformation(this.transformation):this.transformation};J.computeAttachmentOrigin=function(x){return(this.material.computeAttachmentOrigin?this.material.computeAttachmentOrigin(this.geometry,x):this.geometry.computeAttachmentOrigin(x))?(p.transformMat4(x,x,this.getStaticTransformation()),!0):!1};a._createClass(k,[{key:"disposed",get:function(){return this._disposed}},{key:"shaderTransformation",get:function(){return this._shaderTransformation}}]);return k}();H.pool=new h(H);b.GeometryRecord=
H;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Object3DStateID":function(){define(["exports","../../../../core/uid"],function(b,a){b.Object3DStateID=function(d){this.channel=d;this.id=a.generateUID()};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Util":function(){define("exports ../../../../core/mathUtils ../../../../chunks/mat4 ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../../../../chunks/vec3f64 ../../../../chunks/vec4 ../../../../chunks/vec4f64".split(" "),
function(b,a,d,h,n,p,H,k){function J(e,g){if(!e)throw g=g||"assert",e=Error(g),e.stack&&console.log(e.stack),new P(g);}function x(e,g){e[12]=g[0];e[13]=g[1];e[14]=g[2]}function v(e,g=0){let c=0;for(let m=0;4>m;m++)c+=e[g+m]*l[m];return c}function L(e){return e-Math.floor(e)}const K=k.create();let P=function(){function e(g){this.message=g}e.prototype.toString=function(){return`AssertException: ${this.message}`};return e}();const t=[1,256,65536,16777216],l=[1/256,1/65536,1/16777216,1/4294967296],B=
v(new Uint8ClampedArray([255,255,255,255]));b.AssertException=P;b.assert=J;b.createTranslationMatrix=function(e,g){e=d.identity(e);x(e,g);return e};b.dec2hex=function(e){e=e.toString(16);return"00000000".substr(0,8-e.length)+e};b.encodeInt16=function(e){return a.clamp(Math.round(32767*e),-32767,32767)};b.encodeNormal=function(e,g){const c=Math.abs(e[0]),m=Math.abs(e[1]),E=1/(c+m+Math.abs(e[2])),r=Math.min(e[2]*E,0);g[0]=(0>e[0]?-1:1)*(c*E-r);g[1]=(0>e[1]?-1:1)*(m*E-r)};b.fallbackIfUndefined=function(e,
g){return void 0===e?g:e};b.fovd2fovx=function(e,g,c){return 2*Math.atan(g*Math.tan(.5*e)/Math.sqrt(g*g+c*c))};b.fovd2fovy=function(e,g,c){return 2*Math.atan(c*Math.tan(.5*e)/Math.sqrt(g*g+c*c))};b.fovx2fovd=function(e,g,c){return 2*Math.atan(Math.sqrt(g*g+c*c)*Math.tan(.5*e)/g)};b.fovx2fovy=function(e,g,c){return 2*Math.atan(c*Math.tan(.5*e)/g)};b.fovy2fovd=function(e,g,c){return 2*Math.atan(Math.sqrt(g*g+c*c)*Math.tan(.5*e)/c)};b.fovy2fovx=function(e,g,c){return 2*Math.atan(g*Math.tan(.5*e)/c)};
b.getFirstObjectKey=function(e){for(const g in e)return g};b.getMatrixTranslation=function(e,g=p.create()){g[0]=e[12];g[1]=e[13];g[2]=e[14];return g};b.hex2rgb=function(e){e=Math.floor(e);return[(e>>16&255)/255,(e>>8&255)/255,(e&255)/255]};b.inverseProjectionInfo=function(e,g,c,m,E){0===e[11]?(m[0]=2/(g*e[0]),m[1]=2/(c*e[5]),m[2]=(1+e[12])/e[0],m[3]=(1+e[13])/e[5],h.set(E,0,1)):(m[0]=-2/(g*e[0]),m[1]=-2/(c*e[5]),m[2]=(1-e[8])/e[0],m[3]=(1-e[9])/e[5],h.set(E,1,0))};b.isTranslationMatrix=function(e){return 1===
e[0]&&0===e[1]&&0===e[2]&&0===e[3]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]&&0===e[8]&&0===e[9]&&1===e[10]&&0===e[11]&&1===e[15]};b.logWithBase=function(e,g){return Math.log(e)/Math.log(g)};b.objectEmpty=function(e){for(const g in e)return!1;return!0};b.packFloatRGBA=function(e,g,c=0){e=a.clamp(e,0,B);for(let m=0;4>m;m++)g[c+m]=Math.floor(256*L(e*t[m]))};b.project=function(e,g,c,m,E){E||(E=e);K[0]=e[0];K[1]=e[1];K[2]=e[2];K[3]=1;H.transformMat4(K,K,g);2<E.length&&(E[2]=-K[2]);H.transformMat4(K,K,c);
J(0!==K[3]);E[0]=K[0]/K[3];E[1]=K[1]/K[3];E[2]=K[2]/K[3];E[0]=(.5*E[0]+.5)*m[2]+m[0];E[1]=(.5*E[1]+.5)*m[3]+m[1]};b.rayBoxTest=function(e,g,c,m){let E,r=(c[0]-e[0])/g[0],F=(m[0]-e[0])/g[0];r>F&&(E=r,r=F,F=E);let R=(c[1]-e[1])/g[1],w=(m[1]-e[1])/g[1];R>w&&(E=R,R=w,w=E);if(r>w||R>F)return!1;R>r&&(r=R);w<F&&(F=w);c=(c[2]-e[2])/g[2];e=(m[2]-e[2])/g[2];c>e&&(E=c,c=e,e=E);if(r>e||c>F)return!1;e<F&&(F=e);return 0>F?!1:!0};b.rayRay2D=function(e,g,c,m,E,r=n.create()){const F=(m[E]-c[E])*(g[0]-e[0])-(m[0]-
c[0])*(g[E]-e[E]);if(0===F)return!1;c=((m[0]-c[0])*(e[E]-c[E])-(m[E]-c[E])*(e[0]-c[0]))/F;r[0]=e[0]+c*(g[0]-e[0]);r[1]=e[E]+c*(g[E]-e[E]);return!0};b.rayTriangle3D=function(e,g,c,m,E,r,F,R,w=p.create()){var ca=m[F]-c[r];const fa=m[F+1]-c[r+1],ja=m[F+2]-c[r+2];m=E[R]-c[r];F=E[R+1]-c[r+1];E=E[R+2]-c[r+2];const ea=g[1]*E-F*g[2],sa=g[2]*m-E*g[0],oa=g[0]*F-m*g[1];R=ca*ea+fa*sa+ja*oa;if(-1E-5<R&&1E-5>R)return!1;R=1/R;const va=e[0]-c[r],f=e[1]-c[r+1];e=e[2]-c[r+2];w[1]=R*(va*ea+f*sa+e*oa);if(0>w[1]||1<w[1])return!1;
c=f*ja-fa*e;e=e*ca-ja*va;ca=va*fa-ca*f;w[2]=R*(g[0]*c+g[1]*e+g[2]*ca);if(0>w[2]||1<w[1]+w[2])return!1;w[0]=R*(m*c+F*e+E*ca);return!0};b.rgb2hex=function(e){const g=a.clamp(Math.round(255*e[0]),0,255),c=a.clamp(Math.round(255*e[1]),0,255);e=a.clamp(Math.round(255*e[2]),0,255);return"0x"+((g<<16)+(c<<8)+e).toString(16)};b.setMatrixTranslation=x;b.setMatrixTranslation3=function(e,g,c,m){e[12]=g;e[13]=c;e[14]=m};b.unpackFloatRGBA=v;b.verify=function(e,g){e||console.warn("Verify failed: "+(g||"")+"\n"+
Error("verify").stack)};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/chunks/vec2":function(){define(["exports","./common"],function(b,a){function d(y,C){y[0]=C[0];y[1]=C[1];return y}function h(y,C,D){y[0]=C;y[1]=D;return y}function n(y,C,D){y[0]=C[0]+D[0];y[1]=C[1]+D[1];return y}function p(y,C,D){y[0]=C[0]-D[0];y[1]=C[1]-D[1];return y}function H(y,C,D){y[0]=C[0]*D[0];y[1]=C[1]*D[1];return y}function k(y,C,D){y[0]=C[0]/D[0];y[1]=C[1]/D[1];return y}function J(y,C){y[0]=Math.ceil(C[0]);
y[1]=Math.ceil(C[1]);return y}function x(y,C){y[0]=Math.floor(C[0]);y[1]=Math.floor(C[1]);return y}function v(y,C,D){y[0]=Math.min(C[0],D[0]);y[1]=Math.min(C[1],D[1]);return y}function L(y,C,D){y[0]=Math.max(C[0],D[0]);y[1]=Math.max(C[1],D[1]);return y}function K(y,C){y[0]=Math.round(C[0]);y[1]=Math.round(C[1]);return y}function P(y,C,D){y[0]=C[0]*D;y[1]=C[1]*D;return y}function t(y,C,D,T){y[0]=C[0]+D[0]*T;y[1]=C[1]+D[1]*T;return y}function l(y,C){const D=C[0]-y[0];y=C[1]-y[1];return Math.sqrt(D*
D+y*y)}function B(y,C){const D=C[0]-y[0];y=C[1]-y[1];return D*D+y*y}function e(y){const C=y[0];y=y[1];return Math.sqrt(C*C+y*y)}function g(y){const C=y[0];y=y[1];return C*C+y*y}function c(y,C){y[0]=-C[0];y[1]=-C[1];return y}function m(y,C){y[0]=1/C[0];y[1]=1/C[1];return y}function E(y,C){var D=C[0];const T=C[1];D=D*D+T*T;0<D&&(D=1/Math.sqrt(D),y[0]=C[0]*D,y[1]=C[1]*D);return y}function r(y,C){return y[0]*C[0]+y[1]*C[1]}function F(y,C,D){C=C[0]*D[1]-C[1]*D[0];y[0]=y[1]=0;y[2]=C;return y}function R(y,
C,D,T){const q=C[0];C=C[1];y[0]=q+T*(D[0]-q);y[1]=C+T*(D[1]-C);return y}function w(y,C){C=C||1;const D=2*a.RANDOM()*Math.PI;y[0]=Math.cos(D)*C;y[1]=Math.sin(D)*C;return y}function ca(y,C,D){const T=C[0];C=C[1];y[0]=D[0]*T+D[2]*C;y[1]=D[1]*T+D[3]*C;return y}function fa(y,C,D){const T=C[0];C=C[1];y[0]=D[0]*T+D[2]*C+D[4];y[1]=D[1]*T+D[3]*C+D[5];return y}function ja(y,C,D){const T=C[0];C=C[1];y[0]=D[0]*T+D[3]*C+D[6];y[1]=D[1]*T+D[4]*C+D[7];return y}function ea(y,C,D){const T=C[0];C=C[1];y[0]=D[0]*T+D[4]*
C+D[12];y[1]=D[1]*T+D[5]*C+D[13];return y}function sa(y,C,D,T){const q=C[0]-D[0];C=C[1]-D[1];const G=Math.sin(T);T=Math.cos(T);y[0]=q*T-C*G+D[0];y[1]=q*G+C*T+D[1];return y}function oa(y,C){var D=y[0];y=y[1];const T=C[0];C=C[1];let q=D*D+y*y;0<q&&(q=1/Math.sqrt(q));let G=T*T+C*C;0<G&&(G=1/Math.sqrt(G));D=(D*T+y*C)*q*G;return 1<D?0:-1>D?Math.PI:Math.acos(D)}function va(y){return"vec2("+y[0]+", "+y[1]+")"}function f(y,C){return y[0]===C[0]&&y[1]===C[1]}function u(y,C){const D=y[0];y=y[1];const T=C[0];
C=C[1];return Math.abs(D-T)<=a.EPSILON*Math.max(1,Math.abs(D),Math.abs(T))&&Math.abs(y-C)<=a.EPSILON*Math.max(1,Math.abs(y),Math.abs(C))}function V(y,C,D,T,q){let G=C[0]-D[0];D=C[1]-D[1];q=(T[0]*G+T[1]*D)*(q-1);G=T[0]*q;D=T[1]*q;y[0]=C[0]+G;y[1]=C[1]+D;return y}var Z=Object.freeze({__proto__:null,copy:d,set:h,add:n,subtract:p,multiply:H,divide:k,ceil:J,floor:x,min:v,max:L,round:K,scale:P,scaleAndAdd:t,distance:l,squaredDistance:B,length:e,squaredLength:g,negate:c,inverse:m,normalize:E,dot:r,cross:F,
lerp:R,random:w,transformMat2:ca,transformMat2d:fa,transformMat3:ja,transformMat4:ea,rotate:sa,angle:oa,str:va,exactEquals:f,equals:u,projectAndScale:V,len:e,sub:p,mul:H,div:k,dist:l,sqrDist:B,sqrLen:g});b.add=n;b.angle=oa;b.ceil=J;b.copy=d;b.cross=F;b.dist=l;b.distance=l;b.div=k;b.divide=k;b.dot=r;b.equals=u;b.exactEquals=f;b.floor=x;b.inverse=m;b.len=e;b.length=e;b.lerp=R;b.max=L;b.min=v;b.mul=H;b.multiply=H;b.negate=c;b.normalize=E;b.projectAndScale=V;b.random=w;b.rotate=sa;b.round=K;b.scale=P;
b.scaleAndAdd=t;b.set=h;b.sqrDist=B;b.sqrLen=g;b.squaredDistance=B;b.squaredLength=g;b.str=va;b.sub=p;b.subtract=p;b.transformMat2=ca;b.transformMat2d=fa;b.transformMat3=ja;b.transformMat4=ea;b.vec2=Z})},"esri/views/3d/webgl-engine/materials/renderers/utils":function(){define("exports ../../../../../core/maybe ../../../../../chunks/mat4 ../../../../../chunks/mat4f64 ../../lib/doublePrecisionUtils ../../lib/Util".split(" "),function(b,a,d,h,n,p){const H=new Float64Array(3),k=new Float32Array(6),J=
h.create();b.acquireMaterials=function(x,v){const L=new Map;L.set(0,v.acquire(x,0));L.set(1,v.acquire(x,7));L.set(4,v.acquire(x,3));L.set(3,v.acquire(x,2));L.set(2,v.acquire(x,1));L.set(5,v.acquire(x,4));L.set(7,v.acquire(x,3));L.set(6,v.acquire(x,3));return L};b.addObject3DStateID=function(x,v){a.isNone(x)&&(x=[]);x.push(v);return x};b.calculateTransformRelativeToOrigin=function(x,v,L){const K=x.origin.vec3;p.setMatrixTranslation3(J,-K[0],-K[1],-K[2]);a.isSome(x.transformation)?d.multiply(v,J,x.transformation):
d.copy(v,J);L&&(d.invert(L,v),d.transpose(L,L))};b.encodeDoubleVec3=function(x,v,L,K,P){H[0]=x.get(v,0);H[1]=x.get(v,1);H[2]=x.get(v,2);n.encodeDoubleArray(H,k,3);L.set(P,0,k[0]);K.set(P,0,k[1]);L.set(P,1,k[2]);K.set(P,1,k[3]);L.set(P,2,k[4]);K.set(P,2,k[5])};b.isInstanceHidden=function(x){return a.isSome(x)?!x.visible:!1};b.releaseMaterials=function(x,v){v.release(x,0);v.release(x,7);v.release(x,3);v.release(x,2);v.release(x,1);v.release(x,4)};b.removeObject3DStateID=function(x,v){if(a.isNone(x))return x;
x=x.filter(L=>L!==v);return 0===x.length?null:x};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/doublePrecisionUtils":function(){define(["exports"],function(b){function a(n,p,H){for(let k=0;k<H;++k)p[2*k]=n[k],p[2*k+1]=n[k]-p[2*k]}const d=new Float64Array(1),h=new Float32Array(2);b.decodeDoubleArray=function(n,p,H){for(let k=0;k<H;++k)p[k]=n[2*k]+n[2*k+1]};b.encodeDouble=function(n,p){h[0]=n;h[1]=n-h[0];p[0]=h[0];p[1]=h[1]};b.encodeDoubleArray=a;b.encodeDoubleArraySplit=
function(n,p,H,k){for(let J=0;J<k;++J)d[0]=n[J],a(d,h,1),p[J]=h[0],H[J]=h[1]};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/verticalOffsetUtils":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/mat3 ../../../../chunks/mat3f64 ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/quat ../../../../chunks/quatf64 ../../../../chunks/vec3 ../../../../chunks/vec3f32 ../../../../chunks/vec3f64 ../../../../chunks/vec4f64 ../../../../chunks/sphere".split(" "),
function(b,a,d,h,n,p,H,k,J,x,v,L,K,P){let t=function(){function F(){this._transform=H.create();this._transformInverse=new l({value:this._transform},p.invert,H.create);this._transformInverseTranspose=new l(this._transformInverse,p.transpose,H.create);this._transformTranspose=new l({value:this._transform},p.transpose,H.create);this._transformInverseRotation=new l({value:this._transform},h.normalFromMat4Legacy,n.create)}var R=F.prototype;R.invalidateLazyTransforms=function(){this._transformInverse.invalidate();
this._transformInverseTranspose.invalidate();this._transformTranspose.invalidate();this._transformInverseRotation.invalidate()};R.setTransformMatrix=function(w){p.copy(this._transform,w)};R.multiplyTransform=function(w){p.multiply(this._transform,this._transform,w)};R.set=function(w){p.copy(this._transform,w);this.invalidateLazyTransforms()};R.setAndInvalidateLazyTransforms=function(w,ca){this.setTransformMatrix(w);this.multiplyTransform(ca);this.invalidateLazyTransforms()};a._createClass(F,[{key:"transform",
get:function(){return this._transform}},{key:"inverse",get:function(){return this._transformInverse.value}},{key:"inverseTranspose",get:function(){return this._transformInverseTranspose.value}},{key:"inverseRotation",get:function(){return this._transformInverseRotation.value}},{key:"transpose",get:function(){return this._transformTranspose.value}}]);return F}(),l=function(){function F(R,w,ca){this.original=R;this.update=w;this.dirty=!0;this.transform=ca()}F.prototype.invalidate=function(){this.dirty=
!0};a._createClass(F,[{key:"value",get:function(){this.dirty&&(this.update(this.transform,this.original.value),this.dirty=!1);return this.transform}}]);return F}(),B=function(){function F(w=0){this.offset=w;this.tmpVertex=L.create()}var R=F.prototype;R.applyToVertex=function(w,ca,fa){const ja=w+this.localOrigin[0],ea=ca+this.localOrigin[1],sa=fa+this.localOrigin[2],oa=this.offset/Math.sqrt(ja*ja+ea*ea+sa*sa);this.tmpVertex[0]=w+ja*oa;this.tmpVertex[1]=ca+ea*oa;this.tmpVertex[2]=fa+sa*oa;return this.tmpVertex};
R.applyToAabb=function(w){var ca=w[0]+this.localOrigin[0];const fa=w[1]+this.localOrigin[1],ja=w[2]+this.localOrigin[2],ea=w[3]+this.localOrigin[0],sa=w[4]+this.localOrigin[1],oa=w[5]+this.localOrigin[2],va=this.offset/Math.sqrt(ca*ca+fa*fa+ja*ja);w[0]+=ca*va;w[1]+=fa*va;w[2]+=ja*va;ca=this.offset/Math.sqrt(ea*ea+sa*sa+oa*oa);w[3]+=ea*ca;w[4]+=sa*ca;w[5]+=oa*ca;return w};return F}(),e=function(){function F(w=0){this.offset=w;this.componentLocalOriginLength=0;this.tmpVertex=L.create();this.mbs=K.create();
this.obb={center:L.create(),halfSize:v.create(),quaternion:null}}var R=F.prototype;R.applyToVertex=function(w,ca,fa){const ja=fa+this.componentLocalOriginLength,ea=this.offset/Math.sqrt(w*w+ca*ca+ja*ja);this.tmpVertex[0]=w+w*ea;this.tmpVertex[1]=ca+ca*ea;this.tmpVertex[2]=fa+ja*ea;return this.tmpVertex};R.applyToAabb=function(w){var ca=w[0];const fa=w[1],ja=w[2]+this.componentLocalOriginLength,ea=w[3],sa=w[4],oa=w[5]+this.componentLocalOriginLength,va=this.offset/Math.sqrt(ca*ca+fa*fa+ja*ja);w[0]+=
ca*va;w[1]+=fa*va;w[2]+=ja*va;ca=this.offset/Math.sqrt(ea*ea+sa*sa+oa*oa);w[3]+=ea*ca;w[4]+=sa*ca;w[5]+=oa*ca;return w};R.applyToMbs=function(w){const ca=Math.sqrt(w[0]*w[0]+w[1]*w[1]+w[2]*w[2]),fa=this.offset/ca;this.mbs[0]=w[0]+w[0]*fa;this.mbs[1]=w[1]+w[1]*fa;this.mbs[2]=w[2]+w[2]*fa;this.mbs[3]=w[3]+w[3]*this.offset/ca;return this.mbs};R.applyToObb=function(w){var ca=w.center;const fa=this.offset/Math.sqrt(ca[0]*ca[0]+ca[1]*ca[1]+ca[2]*ca[2]);this.obb.center[0]=ca[0]+ca[0]*fa;this.obb.center[1]=
ca[1]+ca[1]*fa;this.obb.center[2]=ca[2]+ca[2]*fa;x.transformQuat(this.obb.halfSize,w.halfSize,w.quaternion);x.add(this.obb.halfSize,this.obb.halfSize,w.center);ca=this.offset/Math.sqrt(this.obb.halfSize[0]*this.obb.halfSize[0]+this.obb.halfSize[1]*this.obb.halfSize[1]+this.obb.halfSize[2]*this.obb.halfSize[2]);this.obb.halfSize[0]+=this.obb.halfSize[0]*ca;this.obb.halfSize[1]+=this.obb.halfSize[1]*ca;this.obb.halfSize[2]+=this.obb.halfSize[2]*ca;x.subtract(this.obb.halfSize,this.obb.halfSize,w.center);
k.conjugate(r,w.quaternion);x.transformQuat(this.obb.halfSize,this.obb.halfSize,r);this.obb.halfSize[0]*=0>this.obb.halfSize[0]?-1:1;this.obb.halfSize[1]*=0>this.obb.halfSize[1]?-1:1;this.obb.halfSize[2]*=0>this.obb.halfSize[2]?-1:1;this.obb.quaternion=w.quaternion;return this.obb};a._createClass(F,[{key:"localOrigin",set:function(w){this.componentLocalOriginLength=Math.sqrt(w[0]*w[0]+w[1]*w[1]+w[2]*w[2])}}]);return F}(),g=function(){function F(w=0){this.offset=w;this.sphere=P.create();this.tmpVertex=
L.create()}var R=F.prototype;R.applyToVertex=function(w,ca,fa){const ja=this.objectTransform.transform;let ea=ja[0]*w+ja[4]*ca+ja[8]*fa+ja[12],sa=ja[1]*w+ja[5]*ca+ja[9]*fa+ja[13];w=ja[2]*w+ja[6]*ca+ja[10]*fa+ja[14];ca=this.offset/Math.sqrt(ea*ea+sa*sa+w*w);ea+=ea*ca;sa+=sa*ca;w+=w*ca;ca=this.objectTransform.inverse;this.tmpVertex[0]=ca[0]*ea+ca[4]*sa+ca[8]*w+ca[12];this.tmpVertex[1]=ca[1]*ea+ca[5]*sa+ca[9]*w+ca[13];this.tmpVertex[2]=ca[2]*ea+ca[6]*sa+ca[10]*w+ca[14];return this.tmpVertex};R.applyToMinMax=
function(w,ca){const fa=this.offset/Math.sqrt(w[0]*w[0]+w[1]*w[1]+w[2]*w[2]);w[0]+=w[0]*fa;w[1]+=w[1]*fa;w[2]+=w[2]*fa;w=this.offset/Math.sqrt(ca[0]*ca[0]+ca[1]*ca[1]+ca[2]*ca[2]);ca[0]+=ca[0]*w;ca[1]+=ca[1]*w;ca[2]+=ca[2]*w};R.applyToAabb=function(w){var ca=this.offset/Math.sqrt(w[0]*w[0]+w[1]*w[1]+w[2]*w[2]);w[0]+=w[0]*ca;w[1]+=w[1]*ca;w[2]+=w[2]*ca;ca=this.offset/Math.sqrt(w[3]*w[3]+w[4]*w[4]+w[5]*w[5]);w[3]+=w[3]*ca;w[4]+=w[4]*ca;w[5]+=w[5]*ca;return w};R.applyToBoundingSphere=function(w){const ca=
Math.sqrt(w[0]*w[0]+w[1]*w[1]+w[2]*w[2]),fa=this.offset/ca;this.sphere[0]=w[0]+w[0]*fa;this.sphere[1]=w[1]+w[1]*fa;this.sphere[2]=w[2]+w[2]*fa;this.sphere[3]=w[3]+w[3]*this.offset/ca;return this.sphere};return F}();const c=new g,m=new e,E=new B,r=J.create();b.I3SVerticalOffsetGlobalViewingMode=e;b.IntersectorTransform=t;b.Object3DVerticalOffsetGlobalViewingMode=g;b.TERRAIN_ID="terrain";b.TerrainVerticalOffsetGlobalViewingMode=B;b.getVerticalOffsetI3S=function(F){return d.isSome(F)?(m.offset=F,m):
null};b.getVerticalOffsetObject3D=function(F){return d.isSome(F)?(c.offset=F,c):null};b.getVerticalOffsetTerrain=function(F){return d.isSome(F)?(E.offset=F,E):null};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/chunks/quat":function(){define("exports ./mat3f64 ./quatf64 ./vec3f64 ./common ./vec3 ./vec4".split(" "),function(b,a,d,h,n,p,H){function k(q){q[0]=0;q[1]=0;q[2]=0;q[3]=1;return q}function J(q,G,U){U*=.5;const ba=Math.sin(U);q[0]=ba*G[0];q[1]=ba*G[1];q[2]=ba*G[2];q[3]=Math.cos(U);
return q}function x(q,G){const U=2*Math.acos(G[3]),ba=Math.sin(U/2);ba>n.EPSILON?(q[0]=G[0]/ba,q[1]=G[1]/ba,q[2]=G[2]/ba):(q[0]=1,q[1]=0,q[2]=0);return U}function v(q,G,U){const ba=G[0],na=G[1],O=G[2];G=G[3];const W=U[0],ka=U[1],ma=U[2];U=U[3];q[0]=ba*U+G*W+na*ma-O*ka;q[1]=na*U+G*ka+O*W-ba*ma;q[2]=O*U+G*ma+ba*ka-na*W;q[3]=G*U-ba*W-na*ka-O*ma;return q}function L(q,G,U){U*=.5;const ba=G[0],na=G[1],O=G[2];G=G[3];const W=Math.sin(U);U=Math.cos(U);q[0]=ba*U+G*W;q[1]=na*U+O*W;q[2]=O*U-na*W;q[3]=G*U-ba*
W;return q}function K(q,G,U){U*=.5;const ba=G[0],na=G[1],O=G[2];G=G[3];const W=Math.sin(U);U=Math.cos(U);q[0]=ba*U-O*W;q[1]=na*U+G*W;q[2]=O*U+ba*W;q[3]=G*U-na*W;return q}function P(q,G,U){U*=.5;const ba=G[0],na=G[1],O=G[2];G=G[3];const W=Math.sin(U);U=Math.cos(U);q[0]=ba*U+na*W;q[1]=na*U-ba*W;q[2]=O*U+G*W;q[3]=G*U-O*W;return q}function t(q,G){const U=G[0],ba=G[1];G=G[2];q[0]=U;q[1]=ba;q[2]=G;q[3]=Math.sqrt(Math.abs(1-U*U-ba*ba-G*G));return q}function l(q,G,U,ba){const na=G[0],O=G[1],W=G[2];G=G[3];
let ka=U[0],ma=U[1],ia=U[2];U=U[3];let Q;let N;var I=na*ka+O*ma+W*ia+G*U;0>I&&(I=-I,ka=-ka,ma=-ma,ia=-ia,U=-U);1-I>n.EPSILON?(Q=Math.acos(I),N=Math.sin(Q),I=Math.sin((1-ba)*Q)/N,ba=Math.sin(ba*Q)/N):I=1-ba;q[0]=I*na+ba*ka;q[1]=I*O+ba*ma;q[2]=I*W+ba*ia;q[3]=I*G+ba*U;return q}function B(q){var G=n.RANDOM();const U=n.RANDOM(),ba=n.RANDOM(),na=Math.sqrt(1-G);G=Math.sqrt(G);q[0]=na*Math.sin(2*Math.PI*U);q[1]=na*Math.cos(2*Math.PI*U);q[2]=G*Math.sin(2*Math.PI*ba);q[3]=G*Math.cos(2*Math.PI*ba);return q}
function e(q,G){const U=G[0],ba=G[1],na=G[2];G=G[3];var O=U*U+ba*ba+na*na+G*G;O=O?1/O:0;q[0]=-U*O;q[1]=-ba*O;q[2]=-na*O;q[3]=G*O;return q}function g(q,G){q[0]=-G[0];q[1]=-G[1];q[2]=-G[2];q[3]=G[3];return q}function c(q,G){var U=G[0]+G[4]+G[8];if(0<U)U=Math.sqrt(U+1),q[3]=.5*U,U=.5/U,q[0]=(G[5]-G[7])*U,q[1]=(G[6]-G[2])*U,q[2]=(G[1]-G[3])*U;else{let ba=0;G[4]>G[0]&&(ba=1);G[8]>G[3*ba+ba]&&(ba=2);const na=(ba+1)%3,O=(ba+2)%3;U=Math.sqrt(G[3*ba+ba]-G[3*na+na]-G[3*O+O]+1);q[ba]=.5*U;U=.5/U;q[3]=(G[3*na+
O]-G[3*O+na])*U;q[na]=(G[3*na+ba]+G[3*ba+na])*U;q[O]=(G[3*O+ba]+G[3*ba+O])*U}return q}function m(q,G,U,ba){var na=.5*Math.PI/180;G*=na;U*=na;ba*=na;na=Math.sin(G);G=Math.cos(G);const O=Math.sin(U);U=Math.cos(U);const W=Math.sin(ba);ba=Math.cos(ba);q[0]=na*U*ba-G*O*W;q[1]=G*O*ba+na*U*W;q[2]=G*U*W-na*O*ba;q[3]=G*U*ba+na*O*W;return q}function E(q){return"quat("+q[0]+", "+q[1]+", "+q[2]+", "+q[3]+")"}function r(q,G,U){const ba=p.dot(G,U);if(-.999999>ba)return p.cross(V,Z,G),1E-6>p.len(V)&&p.cross(V,y,
G),p.normalize(V,V),J(q,V,Math.PI),q;if(.999999<ba)return q[0]=0,q[1]=0,q[2]=0,q[3]=1,q;p.cross(V,G,U);q[0]=V[0];q[1]=V[1];q[2]=V[2];q[3]=1+ba;return f(q,q)}function F(q,G,U,ba,na,O){l(C,G,na,O);l(D,U,ba,O);l(q,C,D,2*O*(1-O));return q}function R(q,G,U,ba){const na=T;na[0]=U[0];na[3]=U[1];na[6]=U[2];na[1]=ba[0];na[4]=ba[1];na[7]=ba[2];na[2]=-G[0];na[5]=-G[1];na[8]=-G[2];return f(q,c(q,na))}const w=H.copy,ca=H.set,fa=H.add,ja=H.scale,ea=H.dot,sa=H.lerp,oa=H.length,va=H.squaredLength,f=H.normalize,u=
H.exactEquals;H=H.equals;const V=h.create(),Z=h.fromValues(1,0,0),y=h.fromValues(0,1,0),C=d.create(),D=d.create(),T=a.create();a=Object.freeze({__proto__:null,identity:k,setAxisAngle:J,getAxisAngle:x,multiply:v,rotateX:L,rotateY:K,rotateZ:P,calculateW:t,slerp:l,random:B,invert:e,conjugate:g,fromMat3:c,fromEuler:m,str:E,copy:w,set:ca,add:fa,mul:v,scale:ja,dot:ea,lerp:sa,length:oa,len:oa,squaredLength:va,sqrLen:va,normalize:f,exactEquals:u,equals:H,rotationTo:r,sqlerp:F,setAxes:R});b.add=fa;b.calculateW=
t;b.conjugate=g;b.copy=w;b.dot=ea;b.equals=H;b.exactEquals=u;b.fromEuler=m;b.fromMat3=c;b.getAxisAngle=x;b.identity=k;b.invert=e;b.len=oa;b.length=oa;b.lerp=sa;b.mul=v;b.multiply=v;b.normalize=f;b.quat=a;b.random=B;b.rotateX=L;b.rotateY=K;b.rotateZ=P;b.rotationTo=r;b.scale=ja;b.set=ca;b.setAxes=R;b.setAxisAngle=J;b.slerp=l;b.sqlerp=F;b.sqrLen=va;b.squaredLength=va;b.str=E})},"esri/chunks/vec3f32":function(){define(["exports"],function(b){function a(){return new Float32Array(3)}function d(B){const e=
new Float32Array(3);e[0]=B[0];e[1]=B[1];e[2]=B[2];return e}function h(B,e,g){const c=new Float32Array(3);c[0]=B;c[1]=e;c[2]=g;return c}function n(B,e){return new Float32Array(B,e,3)}function p(){return a()}function H(){return h(1,1,1)}function k(){return h(1,0,0)}function J(){return h(0,1,0)}function x(){return h(0,0,1)}const v=a(),L=H(),K=k(),P=J(),t=x();var l=Object.freeze({__proto__:null,create:a,clone:d,fromValues:h,createView:n,zeros:p,ones:H,unitX:k,unitY:J,unitZ:x,ZEROS:v,ONES:L,UNIT_X:K,UNIT_Y:P,
UNIT_Z:t});b.ONES=L;b.UNIT_X=K;b.UNIT_Y=P;b.UNIT_Z=t;b.ZEROS=v;b.clone=d;b.create=a;b.createView=n;b.fromValues=h;b.ones=H;b.unitX=k;b.unitY=J;b.unitZ=x;b.vec3f32=l;b.zeros=p})},"esri/views/3d/support/cameraUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../Camera ../../../core/Logger ../../../core/mathUtils ../../../core/maybe ../../../core/promiseUtils ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/Point ../../../geometry/projection ../../../geometry/projectionEllipsoid ../../../geometry/SpatialReference ../../../geometry/support/scaleUtils ../camera/intersectionUtils ../../../chunks/cameraUtilsPlanar ../../../chunks/cameraUtilsSpherical ./earthUtils ./ElevationProvider ./mathUtils ../../support/spatialReferenceSupport".split(" "),
function(b,a,d,h,n,p,H,k,J,x,v,L,K,P,t,l,B,e,g,c,m){function E(O){return"global"===O.viewingMode?B.cameraUtilsSpherical:l.cameraUtilsPlanar}function r(O,W,ka){const ma=O.state.camera,ia=ma.width/2/ma.pixelRatio;1===O.renderCoordsHelper.viewingMode&&null!=ka&&(W*=Math.cos(n.deg2rad(ka)));W/=O.renderCoordsHelper.unitInMeters;return ia/(96*39.37/W)/Math.tan(ma.fovX/2)}function F(O,W,ka){const ma=O.state.camera;W=96*39.37/(ma.width/2/ma.pixelRatio/(W*Math.tan(ma.fovX/2)));1===O.renderCoordsHelper.viewingMode&&
(W/=Math.cos(n.deg2rad(ka)));return W*=O.renderCoordsHelper.unitInMeters}function R(O,W,ka,ma,ia,Q){if(Z(Q)){const N=new na(Q.signal);va(O,ma.heading,ma.tilt,W,ka,ia,N);N.resolver.promise.then(I=>{I=V(O,I,ma.fov);if(p.isNone(I))Q.resolver.reject();else return Q.resolver.resolve(I)},I=>Q.resolver.reject(I))}else return W=va(O,ma.heading,ma.tilt,W,ka,ia),V(O,W,ma.fov,Q)}function w(O,W,ka,ma,ia){return E(O).directionToHeadingTilt(W,ka,ma,ia)}function ca(O,W){return!!(O.basemapTerrain&&O.renderCoordsHelper.fromRenderCoords(W,
q,O.spatialReference)&&p.unwrapOr(g.getElevationAtPoint(O.elevationProvider,q),0)>q.z-1)}function fa(O,W,ka){return ja.apply(this,arguments)}function ja(){ja=a._asyncToGenerator(function*(O,W,ka){if(!O.renderCoordsHelper.fromRenderCoords(W,q,O.spatialReference))return!1;O=yield O.elevationProvider.queryElevation(q.x,q.y,q.z,q.spatialReference,"ground",ka);return p.unwrapOr(O,0)>q.z-1});return ja.apply(this,arguments)}function ea(O,W,ka){return sa.apply(this,arguments)}function sa(){sa=a._asyncToGenerator(function*(O,
W,ka){const ma=J.create();W?W instanceof x?(v.projectPointToVector(W,ma,O.renderSpatialReference),null==W.z&&null!=O.basemapTerrain&&(W=yield O.elevationProvider.queryElevation(W.x,W.y,W.z,W.spatialReference,"ground",ka),p.isSome(W)&&O.renderCoordsHelper.setAltitude(ma,W))):k.copy(ma,W):k.copy(ma,O.state.camera.center);return ma});return sa.apply(this,arguments)}function oa(O,W){const ka=J.create();W&&W instanceof x?(v.projectPointToVector(W,ka,O.renderSpatialReference),null==W.z&&null!=O.basemapTerrain&&
(W=g.getElevationAtPoint(O.elevationProvider,W),p.isSome(W)&&O.renderCoordsHelper.setAltitude(ka,W))):W?k.copy(ka,W):k.copy(ka,O.state.camera.center);return ka}function va(O,W,ka,ma,ia,Q,N){const I=ma&&ma instanceof x?ma:null;if(Z(N))return ea(O,ma,N.signal).then(S=>{f(O,W,ka,I,S,ia,Q,N)},S=>N.resolver.reject(S)),null;ma=oa(O,ma);return f(O,W,ka,I,ma,ia,Q,N)}function f(O,W,ka,ma,ia,Q,N,I){if(p.isNone(ma)&&(ma=v.projectVectorToPoint(ia,O.renderSpatialReference,O.spatialReference||K.WGS84),p.isNone(ma)))return null;
Q=Math.max(Q,O.state.constraints.minimumPoiDistance);var S=u(O,W,ka,ia,Q,N);const da=E(O).eyeForCenterWithHeadingTilt,ha=da(ia,Q,S.heading,S.tilt);if(1===N&&"global"===O.viewingMode&&0<ka){const ta=()=>{var xa=Q,Aa=Q;var Ja=O.state.constraints.tilt(Aa);Aa=E(O).eyeTiltToLookAtTilt(ka,ia,Aa);Aa=Math.min(Aa,.5*Math.PI);Ja=Ja.min*(1-.7)+.7*Aa;xa=E(O).lookAtTiltToEyeTilt(Ja,ia,xa);N=1>ka-xa?0:1;return f(O,W,xa,ma,ia,Q,N,I)};S=O.map.ground.navigationConstraint;if(!S||"stay-above"===S.type){if(ca(O,ha.eye))return ta();
if(Z(I))return fa(O,ha.eye,I.signal).then(xa=>{if(xa)return ta();I.resolver.resolve({eye:ha.eye,up:ha.up,center:J.clone(ia),heading:ha.heading,tilt:ha.tilt});return null}),null}}S=!I||Z(I)?{center:J.create(),eye:J.create(),up:J.create(),tilt:0,heading:0}:I;S.eye=ha.eye;S.up=ha.up;S.center=J.clone(ia);S.heading=ha.heading;S.tilt=ha.tilt;Z(I)&&I.resolver.resolve(S);return S}function u(O,W,ka,ma,ia,Q){var N=0;if(Q=1===Q)if(N=O.pointsOfInterest.centerOnSurfaceFrequent.distance,8<Math.log(ia/N)/Math.LN2)Q=
!0;else{var I=O.renderSpatialReference,S=O.spatialReference||K.WGS84;Q=v.projectVectorToPoint(ma,I,S);I=v.projectVectorToPoint(O.pointsOfInterest.centerOnSurfaceFrequent.renderLocation,I,S);p.isNone(Q)||p.isNone(I)?Q=!1:(N*=Math.tan(.5*O.state.camera.fov),Q=5<I.distance(Q)/N)}Q?(W=0,Q=O.state.constraints.tilt(ia),Q.max=Math.min(Q.max,.5*Math.PI),Q=Q.min*(1-.7)+.7*Q.max,ka=E(O).eyeTiltToLookAtTilt(ka,ma,ia),N=Math.min(ka,Q)):N=E(O).eyeTiltToLookAtTilt(ka,ma,ia);ka=N=O.state.constraints.clampTilt(ia,
N);ka=E(O).lookAtTiltToEyeTilt(ka,ma,ia);return{heading:W,tilt:ka}}function V(O,W,ka,ma){if(p.isNone(W))return null;O=v.projectVectorToPoint(W.eye,O.renderSpatialReference,O.spatialReference||K.WGS84);return p.isNone(O)?null:p.isSome(ma)?(ma.position=O,ma.heading=W.heading,ma.tilt=W.tilt,ma.fov=ka,ma):new d(O,W.heading,W.tilt,ka)}function Z(O){return O&&"resolver"in O}const y=h.getLogger("esri.views.3d.support.cameraUtils"),C=J.create(),D=J.create(),T={heading:0,tilt:0},q=new x,G=new c.Cyclical(-2.0037508342788905E7,
2.0037508342788905E7),U=new c.Cyclical(-180,180),ba=J.create();let na=function(O){this.signal=O;this.resolver=H.createResolver()};b.AsyncContext=na;b.computeScale=function(O,W,ka){const ma=O.renderSpatialReference;W||(W=O.state.camera);var ia=K.WGS84;W instanceof d?(ia=W.position.latitude,v.projectPointToVector(W.position,C,ma),v.projectPointToVector(ka,D,ma),W=k.distance(C,D)):(v.projectVectorToVector(W.center,ma,D,ia),ia=D[1],W=W.distance);return F(O,W,ia)};b.directionToHeadingTilt=w;b.distanceToScale=
F;b.externalToInternal=function(O,W){if(p.isNone(W))return null;var ka=O.renderSpatialReference;const ma=E(O).headingTiltToDirectionUp,ia=J.create();if(!v.projectPointToVector(W.position,ia,ka))return null;ka=ma(ia,W.heading,W.tilt);k.scale(ka.direction,ka.direction,O.state.camera.distance);k.add(ka.direction,ka.direction,ia);O=t.cameraOnContentAlongViewDirection(O,ia,ka.direction,ka.up);O.fov=n.deg2rad(W.fov);return O};b.fromCenterDistance=R;b.fromCenterScale=function(O,W,ka,ma,ia,Q){ka=r(O,ka,W.latitude);
return R(O,W,ka,ma,ia,Q)};b.fromExtent=function(O,W,ka,ma,ia,Q=null){var N=null!=W.zmax&&null!=W.zmin;let I;if("global"===O.viewingMode){if(!m.isSpatialReferenceSupported(W.spatialReference,"global"))return Z(Q)&&Q.resolver.reject(),null;var S=new x(W.xmin,W.ymin,W.spatialReference);const ta=new x(W.xmax,W.ymax,W.spatialReference),xa=W.spatialReference.isGeographic?U:G;var da=new x({x:xa.center(S.x,ta.x),y:(ta.y+S.y)/2,z:N?(W.zmax+W.zmin)/2:null,spatialReference:W.spatialReference});const Aa=L.getReferenceEllipsoid(W.spatialReference);
var ha=e.getGreatCircleSpanAt(da,S,ta);I=ha.lon;ha=ha.lat;xa.diff(S.x,ta.x)>xa.range/2&&(I+=Aa.halfCircumference);I=Math.min(I,Aa.halfCircumference);ha=Math.min(ha,Aa.halfCircumference)}else da=p.unwrapOr(O.renderSpatialReference,W.spatialReference),da.equals(W.spatialReference)||(W=v.project(W,da)),I=W.xmax-W.xmin,ha=W.ymax-W.ymin,da=new x({x:W.xmin+.5*I,y:W.ymin+.5*ha,z:N?(W.zmax+W.zmin)/2:null,spatialReference:da});S=O.state.camera;W=Math.max(1/Math.tan(S.fovX/2)*I*.5,1/Math.tan(S.fovY/2)*ha*.5,
1/Math.tan(S.fov/2)*(N?W.zmax-W.zmin:0)*.5)/1;if(Z(Q))N=new na(Q.signal),va(O,ka,ma,da,W,ia,N),N.resolver.promise.then(ta=>{ta=V(O,ta,O.camera.fov);if(p.isNone(ta))Q.resolver.reject();else return Q.resolver.resolve(ta)},ta=>Q.resolver.reject(ta));else return ka=va(O,ka,ma,da,W,ia),V(O,ka,O.camera.fov,Q)};b.getObserverForPointAtDistance=va;b.headingTiltToDirectionUp=function(O,W,ka,ma,ia){return E(O).headingTiltToDirectionUp(W,ka,ma,ia)};b.internalToExternal=function(O,W,ka){const ma=O.renderSpatialReference,
ia=w(O,W.eye,W.viewForward,W.up,T);O=O.spatialReference||K.WGS84;v.projectVectorToVector(W.eye,ma,ba,O)||(O=K.WGS84,v.projectVectorToVector(W.eye,ma,ba,O));if(p.isNone(ka))return new d(new x(ba,O),ia.heading,ia.tilt,n.rad2deg(W.fov));ka.position.x=ba[0];ka.position.y=ba[1];ka.position.z=ba[2];ka.position.spatialReference=O;ka.heading=ia.heading;ka.tilt=ia.tilt;ka.fov=n.rad2deg(W.fov);return ka};b.observerToCamera=V;b.scaleToDistance=r;b.scaleToResolution=function(O,W){return O.spatialReference?P.getResolutionForScale(W,
O.spatialReference):void 0};b.scaleToZoom=function(O,W){var ka;if(O=null==(ka=O.basemapTerrain)?void 0:ka.tilingScheme)return O.levelAtScale(W);y.error("#scaleToZoom()","Cannot compute zoom from scale without a tiling scheme")};b.toExtent=function(O,W,ka){const ma=v.projectVectorToPoint(ka,O.renderSpatialReference,O.spatialReference||K.WGS84);if(p.isNone(ma))return null;var ia=Math.tan(W.fovX/2),Q=Math.tan(W.fovY/2);W=k.dist(W.eye,ka);ia*=2*W;Q*=2*W;return"global"===O.viewingMode?B.toExtent(O,ma,
ia,Q):l.toExtent(O,ma,ia,Q)};b.zoomToScale=function(O,W){var ka;if(O=null==(ka=O.basemapTerrain)?void 0:ka.tilingScheme)return O.scaleAtLevel(W);y.error("#zoomToScale()","Cannot compute scale from zoom without a tiling scheme")};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/geometry/support/scaleUtils":function(){define(["exports","../../core/unitUtils"],function(b,a){function d(h,n){n=a.getMetersPerUnitForSR(n);return h/(n*a.inchesPerMeter*96)}b.getExtentForScale=function(h,n){const p=
h.extent;h=h.width;n=d(n,p.spatialReference);return p.clone().expand(n*h/p.width)};b.getResolutionForScale=d;b.getScale=function(h,n){n=n||h.extent;h=h.width;const p=a.getMetersPerUnitForSR(n&&n.spatialReference);return n&&h?n.width/h*p*a.inchesPerMeter*96:0};b.getScaleForResolution=function(h,n){n=a.getMetersPerUnitForSR(n);return h*n*a.inchesPerMeter*96};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/chunks/cameraUtilsPlanar":function(){define("exports ../core/mathUtils ./mat4 ./mat4f64 ./vec3 ./vec3f64 ../geometry/Extent ../geometry/projection ../views/3d/support/cameraUtilsInternal".split(" "),
function(b,a,d,h,n,p,H,k,J){function x(m,E,r,F=J.createDirectionUp()){d.identity(e);const {direction:R,up:w}=F;d.rotateZ(e,e,-a.deg2rad(E));d.rotateX(e,e,a.deg2rad(r));n.transformMat4(R,B,e);n.scale(R,R,-1);n.transformMat4(w,l,e);return F}function v(m,E,r,F){return J.directionToHeadingTilt(E,r,F,B,l)}function L(m,E,r,F){const R=x(m,r,F),w=p.create();n.scale(w,R.direction,-E);n.add(w,w,m);return{up:R.up,eye:w,heading:r,tilt:F}}function K(m){return a.rad2deg(m)}function P(m){return a.deg2rad(m)}function t(m,
E,r,F,R){const w=m.renderSpatialReference;m=m.map&&m.spatialReference||E.spatialReference;k.projectPointToVector(E,g,w);k.projectPointToVector(E,c,w);g[0]-=r/2;c[0]+=r/2;g[1]-=F/2;c[1]+=F/2;k.projectVectorToVector(g,w,g,m);k.projectVectorToVector(c,w,c,m);R?(R.xmin=g[0],R.ymin=g[1],R.xmax=c[0],R.ymax=c[1],R.spatialReference=m):R=new H(g[0],g[1],c[0],c[1],m);return R}const l=p.fromValues(0,1,0),B=p.fromValues(0,0,1),e=h.create(),g=p.create(),c=p.create();h=Object.freeze({__proto__:null,headingTiltToDirectionUp:x,
directionToHeadingTilt:v,eyeForCenterWithHeadingTilt:L,lookAtTiltToEyeTilt:K,eyeTiltToLookAtTilt:P,toExtent:t});b.cameraUtilsPlanar=h;b.directionToHeadingTilt=v;b.eyeForCenterWithHeadingTilt=L;b.eyeTiltToLookAtTilt=P;b.headingTiltToDirectionUp=x;b.lookAtTiltToEyeTilt=K;b.toExtent=t})},"esri/views/3d/support/cameraUtilsInternal":function(){define(["exports","../../../core/mathUtils","../../../chunks/vec3","../../../chunks/vec3f64"],function(b,a,d,h){const n=h.create(),p=h.create();b.createDirectionUp=
function(){return{direction:h.create(),up:h.create()}};b.directionToHeadingTilt=function(H,k,J,x,v){let L=d.normalize(n,H),K=d.dot(L,x);const P=0<K;K=Math.abs(K);.99<K&&(K=Math.abs(d.dot(k,x)),.99>K?(d.copy(L,k),P&&d.scale(L,L,-1)):L=null);k=0;L&&(d.scale(p,x,d.dot(x,L)),d.subtract(L,L,p),k=d.dot(L,v)/(d.length(L)*d.length(v)),d.cross(p,L,v),k=(0<d.dot(p,x)?1:-1)*a.rad2deg(a.acosClamped(k)));H=a.rad2deg(a.acosClamped(-d.dot(x,H)/d.length(H)));if(!J)return{heading:k,tilt:H};J.heading=k;J.tilt=H;return J};
Object.defineProperty(b,"__esModule",{value:!0})})},"esri/chunks/cameraUtilsSpherical":function(){define("exports ../core/mathUtils ./mat4 ./mat4f64 ./vec3 ./vec3f64 ../geometry/Extent ../geometry/projectionEllipsoid ../geometry/SpatialReference ../geometry/support/webMercatorUtils ../views/3d/support/cameraUtilsInternal ../views/3d/support/earthUtils ../views/3d/support/mathUtils".split(" "),function(b,a,d,h,n,p,H,k,J,x,v,L,K){function P(fa,ja,ea,sa=v.createDirectionUp()){n.cross(w,fa,E);0===n.dot(w,
w)&&n.cross(w,fa,r);d.identity(R);d.rotate(R,R,-a.deg2rad(ja),fa);d.rotate(R,R,-a.deg2rad(ea),w);const {up:oa,direction:va}=sa;n.cross(oa,w,fa);n.normalize(oa,oa);n.transformMat4(oa,oa,R);n.normalize(va,fa);n.negate(va,va);n.transformMat4(va,va,R);return sa}function t(fa,ja,ea,sa){const oa=w,va=ca;n.normalize(oa,fa);n.cross(ca,oa,E);0===n.dot(ca,ca)&&n.cross(ca,oa,r);n.cross(va,ca,oa);return v.directionToHeadingTilt(ja,ea,sa,oa,va)}function l(fa,ja,ea,sa){const oa={eye:p.create(),up:null,tilt:sa,
heading:ea},va=w;va[0]=fa[0];va[1]=fa[2];va[2]=-fa[1];ea=a.deg2rad(ea);var f=a.deg2rad(sa);sa=Math.sin(ea);ea=Math.cos(ea);var u=Math.sin(f),V=Math.cos(f);const Z=n.length(va);if(1E-8>Math.abs(f))f=ja+Z;else{var y=Z/u,C=a.asinClamped(ja/y);f=y*Math.sin(Math.PI-f-C)}V*=ja;y=ja*ja*u*u;C=ea*ea*y;const D=f-V,T=D*D;var q=C*(C+T-va[1]*va[1]);if(0>q)return n.scale(oa.eye,va,f/Z),oa.tilt=0,oa;var G=Math.sqrt(q);const U=va[1]*D;q=C+T;G=0<ea?-G+U:G+U;if(1E-8>Math.abs(q))return 1E-8>Z?(oa.eye[0]=0,oa.eye[1]=
0,oa.eye[2]=ja):n.scale(oa.eye,va,f/Z),oa.tilt=0,B(oa.eye),e(oa,fa);oa.eye[1]=G/q;ja*=u;G=oa.eye[1]*oa.eye[1];u=1-G;q=Math.sqrt(u);y=C*G+sa*sa*y-2*ea*ja*oa.eye[1]*q*D+u*T;if(1E-8>Math.abs(y))return n.scale(oa.eye,va,f/Z),oa.tilt=0,B(oa.eye),e(oa,fa);oa.eye[0]=(u*(f*va[0]-V*va[0])-ja*q*(va[0]*oa.eye[1]*ea+va[2]*sa))/y;oa.eye[2]=(u*(f*va[2]-V*va[2])-ja*q*(va[2]*oa.eye[1]*ea-va[0]*sa))/y;n.scale(oa.eye,oa.eye,f);B(oa.eye);return e(oa,fa)}function B(fa){const ja=fa[1];fa[1]=-fa[2];fa[2]=ja}function e(fa,
ja){ja=P(ja,fa.heading,fa.tilt);fa.up=ja.up;return fa}function g(fa,ja,ea){ja=n.length(ja);ea=a.asinClamped(ea/(Math.sqrt(ea*ea+ja*ja-2*ea*ja*Math.cos(Math.PI-fa))/Math.sin(fa)));return a.rad2deg(fa-ea)}function c(fa,ja,ea){fa=a.deg2rad(fa);ja=n.length(ja);return a.asinClamped(ea/(ja/Math.sin(fa)))+fa}function m(fa,ja,ea,sa,oa){function va(Z){const y=Math.PI/2;Z=K.cyclical2PI.normalize(Z,-y);Z>y&&(Z=Math.PI-Z);return Z}var f=ja.latitude;ja=ja.longitude;var u=L.getLonDeltaForDistance(f,ea,k.getReferenceEllipsoid(fa.spatialReference).radius)/
2;ea=ja-u;ja+=u;f=a.deg2rad(f);u=k.getReferenceEllipsoid(fa.spatialReference).radius;f=(1+Math.sin(f))/(1-Math.sin(f));const V=(f+1)*Math.tan(sa/u/2);f=1.5*Math.PI-2*Math.atan(.5*(V+Math.sqrt(4*f+V*V)));sa=f+sa/u;f=va(f);sa=va(sa);sa<f&&(u=sa,sa=f,f=u);f=Math.max(a.rad2deg(f),-90);sa=Math.min(a.rad2deg(sa),90);ja=F.monotonic(ea,ja);180<ja-ea&&(u=(ja-ea-180)/2,ea+=u,ja-=u);u=fa.spatialReference&&fa.spatialReference.isGeographic?fa.spatialReference:J.WGS84;oa?(oa.xmin=ea,oa.ymin=f,oa.xmax=ja,oa.ymax=
sa,oa.spatialReference=u):oa=new H(ea,f,ja,sa,u);fa.spatialReference&&fa.spatialReference.isWebMercator&&x.geographicToWebMercator(oa,!1,oa);return oa}const E=p.fromValues(0,0,1),r=n.normalize(p.create(),p.fromValues(1,1,1)),F=new K.Cyclical(-180,180),R=h.create(),w=p.create(),ca=p.create();h=Object.freeze({__proto__:null,headingTiltToDirectionUp:P,directionToHeadingTilt:t,eyeForCenterWithHeadingTilt:l,lookAtTiltToEyeTilt:g,eyeTiltToLookAtTilt:c,toExtent:m});b.cameraUtilsSpherical=h;b.directionToHeadingTilt=
t;b.eyeForCenterWithHeadingTilt=l;b.eyeTiltToLookAtTilt=c;b.headingTiltToDirectionUp=P;b.lookAtTiltToEyeTilt=g;b.toExtent=m})},"esri/views/3d/support/earthUtils":function(){define(["exports","../../../core/mathUtils","../../../geometry/Point","../../../geometry/projectionEllipsoid"],function(b,a,d,h){function n(k,J,x){return p(k,J.longitude,J.latitude,x.longitude,x.latitude)}function p(k,J,x,v,L){x=a.deg2rad(x);L=a.deg2rad(L);J=a.deg2rad(J);const K=a.deg2rad(v);v=Math.sin((x-L)/2);J=Math.sin((J-K)/
2);x=2*a.asinClamped(Math.sqrt(v*v+Math.cos(x)*Math.cos(L)*J*J));return Math.round(x*k*1E4)/1E4}function H(k,J){k/=15;J||(k=Math.round(k));return k}b.getGreatCircleDistance=p;b.getGreatCircleDistanceFromPoints=n;b.getGreatCircleSpanAt=function(k,J,x){const v=J.spatialReference,L=h.getReferenceEllipsoid(v),K=new d(J.x,k.y,v),P=new d(x.x,k.y,v);J=new d(k.x,J.y,v);k=new d(k.x,x.y,v);return{lon:n(L.radius,K,P),lat:n(L.radius,J,k)}};b.getLatDeltaForDistance=function(k,J){return a.rad2deg(k/J)};b.getLonDeltaForDistance=
function(k,J,x){J/=x;k=a.deg2rad(k);J=Math.sin(J/2);k=Math.cos(k);k=2*a.asinClamped(Math.sqrt(J*J/(k*k)));return a.rad2deg(k)};b.getMaxCameraAltitude=function(k,J){k=a.deg2rad(k/2);return(1-Math.sin(k))*J/Math.sin(k)};b.longitudeToTimezone=H;b.pointToTimezone=function(k,J){return H(k.longitude,J)};b.positionToTimezoneInfo=function(k,J){J||(J={hours:0,minutes:0,seconds:0});J.hours=H(k[0],!0);k=J.hours%1;J.hours-=k;J.minutes=60*k;k=J.minutes%1;J.minutes-=k;J.seconds=Math.round(60*k);return J};Object.defineProperty(b,
"__esModule",{value:!0})})},"esri/views/3d/support/ElevationProvider":function(){define(["exports","../../../core/maybe","../../../layers/graphics/dehydratedFeatureUtils"],function(b,a,d){function h(n){return"array"in n}b.SamplePosition=function(n,p=null,H=0){this.array=n;this.spatialReference=p;this.offset=H};b.getElevationAtPoint=function(n,p,H="ground"){if(d.isDehydratedPoint(p))return n.getElevation(p.x,p.y,p.z||0,p.spatialReference,H);if(h(p)){let k=p.offset;return n.getElevation(p.array[k++],
p.array[k++],p.array[k]||0,a.unwrapOr(p.spatialReference,n.spatialReference),H)}return n.getElevation(p[0],p[1],p[2]||0,n.spatialReference,H)};b.isSamplePosition=h;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/layers/graphics/dehydratedFeatureUtils":function(){define(["exports"],function(b){b.isDehydratedPoint=function(a){return"point"===a.type};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/time ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/PromiseQueue ./debugFlags".split(" "),
function(b,a,d,h,n,p,H,k,J,x,v,L,K,P,t,l,B){function e(ea){return c.has(ea)?c.get(ea):"number"===typeof ea?ea:1}const g=n.getLogger("esri.views.support.Scheduler");b.TaskPriority=void 0;(function(ea){ea.RESOURCE_CONTROLLER="schedule";ea.SLIDE="slide";ea.STREAM_DATA_LOADER="stream loader";ea.ELEVATION_QUERY="elevation query";ea.TERRAIN_SURFACE="terrain";ea.SURFACE_GEOMETRY_UPDATES="surface geometry updates";ea.GRAPHICS_CORE="Graphics3D";ea.I3S_CONTROLLER="I3S";ea.POINT_CLOUD_LAYER="point cloud";ea.FEATURE_TILE_FETCHER=
"feature fetcher";ea.OVERLAY="overlay";ea.STAGE="stage";ea.GRAPHICS_DECONFLICTOR="graphics deconflictor";ea.FILTER_VISIBILITY="Graphics3D filter visibility";ea.SCALE_VISIBILITY="Graphics3D scale visibility";ea.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";ea.POINT_OF_INTEREST_FREQUENT="POI frequent";ea.POINT_OF_INTEREST_INFREQUENT="POI infrequent";ea.LABELER="labeler";ea.FEATURE_QUERY_ENGINE="feature query";ea.FEATURE_TILE_TREE="feature tile tree";ea.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";
ea.ELEVATION_ALIGNMENT="elevation alignment";ea.TEXT_TEXTURE_ATLAS="text texture atlas";ea.TEXTURE_UNLOAD="texture unload";ea.LINE_OF_SIGHT_TOOL="line of sight tool";ea.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";ea.ELEVATION_PROFILE="elevation profile";ea.SNAPPING="snapping";ea.SHADOW_ACCUMULATOR="shadow accumulator";ea[ea.TEST_PRIO=1]="TEST_PRIO"})(b.TaskPriority||(b.TaskPriority={}));const c=new Map([[b.TaskPriority.RESOURCE_CONTROLLER,0],[b.TaskPriority.SLIDE,0],[b.TaskPriority.STREAM_DATA_LOADER,
0],[b.TaskPriority.ELEVATION_QUERY,0],[b.TaskPriority.TERRAIN_SURFACE,1],[b.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[b.TaskPriority.GRAPHICS_CORE,2],[b.TaskPriority.I3S_CONTROLLER,2],[b.TaskPriority.POINT_CLOUD_LAYER,2],[b.TaskPriority.FEATURE_TILE_FETCHER,2],[b.TaskPriority.OVERLAY,4],[b.TaskPriority.STAGE,4],[b.TaskPriority.GRAPHICS_DECONFLICTOR,4],[b.TaskPriority.FILTER_VISIBILITY,4],[b.TaskPriority.SCALE_VISIBILITY,4],[b.TaskPriority.FRUSTUM_VISIBILITY,4],[b.TaskPriority.POINT_OF_INTEREST_FREQUENT,
6],[b.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[b.TaskPriority.LABELER,8],[b.TaskPriority.FEATURE_QUERY_ENGINE,8],[b.TaskPriority.FEATURE_TILE_TREE,16],[b.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[b.TaskPriority.ELEVATION_ALIGNMENT,12],[b.TaskPriority.TEXT_TEXTURE_ATLAS,12],[b.TaskPriority.TEXTURE_UNLOAD,12],[b.TaskPriority.LINE_OF_SIGHT_TOOL,16],[b.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[b.TaskPriority.SNAPPING,0],[b.TaskPriority.SHADOW_ACCUMULATOR,30]]),m=x.Milliseconds(6.5),E=x.Milliseconds(1),
r=x.Milliseconds(30),F=x.Milliseconds(1E3/30),R=x.Milliseconds(100);var w;(function(ea){let sa=function(f){function u(Z){var y=f.call(this,Z)||this;y.updating=!0;y.performanceInfo={total:new H("total"),tasks:new Map};y._frameTaskTimes=new Map;y._budget=null;y._state=1;y._tasks=new k;y._runQueue=new k;y._load=0;y._idleStateCallbacks=new k;y._idleUpdatesStartFired=!1;y._maxReschedule=ja;y._forceTask=!1;y._debug=!1;y._debugHandle=v.init(B,"SCHEDULER_LOG_SLOW_TASKS",T=>y._debug=T);y._budget=new va(Z.nowFunc);
for(const T of Object.keys(b.TaskPriority))y.performanceInfo.tasks.set(b.TaskPriority[T],new H(b.TaskPriority[T]));let C;const D=a._assertThisInitialized(y);y._test={get state(){return p.isNone(C)?D._state:C},set state(T){C=T},FRAME_SAFETY_BUDGET:m,INTERACTING_BUDGET:F,IDLE_BUDGET:R,get budget(){return D._budget.budget},usedBudget:0,updateTask:T=>y._updateTask(T),getState:T=>y._getState(T),getRuntime:T=>y._getRuntime(T),resetRuntimes:()=>y._resetRuntimes(),getRunning:()=>y._getRunning()};return y}
a._inheritsLoose(u,f);var V=u.prototype;V.destroy=function(){this._debugHandle&&this._debugHandle.remove()};V.registerTask=function(Z,y){const C=e(Z);y=new oa(this,Z,y,C);this._tasks.push(y);this.performanceInfo.tasks.has(Z)||this.performanceInfo.tasks.set(Z,new H(Z));return y};V.registerIdleStateCallbacks=function(Z,y){const C={idleBegin:Z,idleEnd:y};this._idleStateCallbacks.push(C);2===this.state&&this._idleUpdatesStartFired&&C.idleBegin();const D=this;return{remove:()=>this._removeIdleStateCallbacks(C),
set idleBegin(T){D._idleUpdatesStartFired&&(C.idleEnd(),2===D._state&&T());C.idleBegin=T},set idleEnd(T){C.idleEnd=T}}};V.updateBudget=function(Z){this._test.usedBudget=0;let y=m,C=Z.frameDuration,D=E;switch(this.state){case 2:y=x.Milliseconds(0);C=x.Milliseconds(Math.max(R,Z.frameDuration));D=r;break;case 1:C=x.Milliseconds(Math.max(F,Z.frameDuration))}C=x.Milliseconds(C-Z.elapsedFrameTime-y);if(2!==this.state&&C<E&&!this._forceTask)return this._forceTask=!0,!1;C=x.Milliseconds(Math.max(C,D));this._budget.reset(C,
this.state);this._maxReschedule=ja;this._updateLoad();return this._schedule()};V.frame=function(){this._forceTask=!1;switch(this.state){case 2:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(Z=>Z.idleBegin()));this._runIdle();break;case 1:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};V.stopFrame=function(){this._budget.reset(x.Milliseconds(0),this._state);this._budget.madeProgress()};V._removeIdleStateCallbacks=
function(Z){this._idleUpdatesStartFired&&Z.idleEnd();this._idleStateCallbacks.removeUnordered(Z)};V.removeTask=function(Z){this._tasks.removeUnordered(Z);this._runQueue.removeUnordered(Z)};V._updateTask=function(Z){this._tasks.forAll(y=>{y.name===Z&&y.setPriority(Z)})};V._getState=function(Z){if(this._runQueue.some(C=>C.name===Z))return b.TaskState.SCHEDULED;let y=b.TaskState.IDLE;this._tasks.forAll(C=>{C.name===Z&&C.needsUpdate&&(1>=C.schedulePriority?y=b.TaskState.READY:y!==b.TaskState.READY&&(y=
b.TaskState.WAITING))});return y};V._getRuntime=function(Z){let y=0;this._tasks.forAll(C=>{C.name===Z&&(y+=C.runtime)});return y};V._resetRuntimes=function(){this._tasks.forAll(Z=>Z.runtime=0)};V._getRunning=function(){const Z=new Map;this._tasks.forAll(C=>{C.needsUpdate&&Z.set(C.name,(Z.get(C.name)||0)+1)});if(0===Z.size)return null;let y="";Z.forEach((C,D)=>{y=1<C?y+` ${C}x ${D}`:y+` ${D}`});return y};V._runIdle=function(){this._run()};V._runInteracting=function(){this._run()};V._runAnimating=function(){this._run()};
V._updateLoad=function(){const Z=this._tasks.reduce((y,C)=>C.needsUpdate?++y:y,0);this._load=.9*this._load+Z*(1-.9)};V._schedule=function(){if(0>=this._maxReschedule)return!1;this._runQueue.filterInPlace(Z=>{if(Z.needsUpdate)return!0;Z.schedulePriority=Z.basePriority;return!1});for(this._tasks.forAll(Z=>{0===Z.basePriority&&Z.needsUpdate&&!this._runQueue.some(y=>y===Z)&&this._runQueue.unshift(Z)});0===this._runQueue.length;){let Z=!1,y=0;this._tasks.forAll(C=>{if(C.needsUpdate&&0!==C.schedulePriority&&
0!==C.basePriority)switch(Z=!0,y=Math.max(y,C.basePriority),C.schedulePriority){case 1:C.schedulePriority=0;this._runQueue.push(C);break;default:--C.schedulePriority}});if(!Z)return this.updating=!1;this._maxReschedule===ja&&(this._maxReschedule=y);--this._maxReschedule}return this.updating=!0};V._run=function(){const Z=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var y=this._budget.now();const C=this._runQueue.pop();this._budget.resetProgress();try{C.task.runTask(this._budget)}catch(D){g.error(`Exception in task "${C.name}"`,
D)}C.schedulePriority=C.basePriority;y=this._budget.now()-y;C.runtime+=y;this._frameTaskTimes.set(C.priority,this._frameTaskTimes.get(C.priority)+y);this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",C.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this._recordFrameTaskTimes(this._budget.now()-Z);return}}while(this._schedule());this._recordFrameTaskTimes(this._budget.now()-Z)};V._startFrameTaskTimes=function(){for(const Z of Object.keys(b.TaskPriority))this._frameTaskTimes.set(b.TaskPriority[Z],
0)};V._recordFrameTaskTimes=function(Z){this._frameTaskTimes.forEach((y,C)=>this.performanceInfo.tasks.get(C).record(y));this.performanceInfo.total.record(Z)};a._createClass(u,[{key:"now",get:function(){return this.nowFunc()}},{key:"load",get:function(){return this._load}},{key:"state",get:function(){return p.isNone(this._test.state)?this._state:this._test.state},set:function(Z){this._state!==Z&&(this._state=Z,2!==this.state&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(y=>
y.idleEnd())))}},{key:"test",get:function(){return this._test}}]);return u}(h);d.__decorate([L.property()],sa.prototype,"updating",void 0);d.__decorate([L.property()],sa.prototype,"nowFunc",void 0);sa=d.__decorate([t.subclass("esri.views.support.Scheduler")],sa);ea.Scheduler=sa;let oa=function(f){function u(Z,y,C,D){var T=f.call(this,{})||this;T._scheduler=Z;T.name=y;T._basePriority=D;T.runtime=0;T._queue=new l;T.updating=!1;T.schedulePriority=T._basePriority;T.task=p.isSome(C)?C:{running:!1,runTask:q=>
T.processQueue(q)};return T}a._inheritsLoose(u,f);var V=u.prototype;V.normalizeCtorArgs=function(){return{}};V.remove=function(){this.processQueue(ca);this._scheduler.removeTask(this);this.schedule=fa.schedule;this.reschedule=fa.reschedule};V.setPriority=function(Z){this.name=Z;Z=e(Z);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=Z;this._basePriority=Z};V.schedule=function(Z,y,C){this.updating=!0;return this._queue.push(Z,y,C)};V.reschedule=function(Z,y,C){this.updating=
!0;return this._queue.unshift(Z,y,C)};V.processQueue=function(Z){for(;!Z.done&&this._queue.process();)Z.madeProgress();this.updating=0<this._queue.length};a._createClass(u,[{key:"basePriority",get:function(){return this._basePriority}},{key:"priority",get:function(){return this.name},set:function(Z){this.setPriority(Z)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return u}(h);d.__decorate([L.property()],oa.prototype,"updating",void 0);oa=d.__decorate([t.subclass("esri.views.support.SchedulerTask")],
oa);let va=function(){function f(V){this.now=V;this._budget=this._begin=0;this._state=2;this._didWork=!1;this._enabled=!0}var u=f.prototype;u.run=function(V){if(this.done)return!1;!0===V()&&(this._didWork=!0);return!0};u.madeProgress=function(){this._didWork=!0};u.reset=function(V,Z){this._begin=this.now();this._budget=V;this._state=Z;this._didWork=!1};u.resetProgress=function(){this._didWork=!1};a._createClass(f,[{key:"done",get:function(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}},
{key:"budget",get:function(){return this._budget}},{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(V){this._enabled=V}},{key:"remaining",get:function(){return Math.max(this._budget-this.elapsed,0)}},{key:"elapsed",get:function(){return this.now()-this._begin}},{key:"hasProgressed",get:function(){return this._didWork}}]);return f}();ea.Budget=va})(w||(w={}));b.TaskState=void 0;(function(ea){ea.SCHEDULED="s";ea.READY="r";ea.WAITING="w";
ea.IDLE="i"})(b.TaskState||(b.TaskState={}));const ca=(()=>{const ea=new w.Budget(()=>performance.now());ea.enabled=!1;return ea})(),fa=new (function(){function ea(){}var sa=ea.prototype;sa.remove=function(){};sa.processQueue=function(){};sa.schedule=function(oa,va,f){try{if(J.isAborted(va)){const u=J.createAbortError();return f?Promise.resolve(f(u)):Promise.reject(u)}return J.when(oa())}catch(u){return Promise.reject(u)}};sa.reschedule=function(oa,va,f){return this.schedule(oa,va,f)};return ea}()),
ja=Number.MAX_SAFE_INTEGER;b.ImmediateTask=fa;b.getTaskPriority=e;b.newScheduler=function(ea){return new w.Scheduler({nowFunc:ea})};b.noBudget=ca;b.taskPriorities=c;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/layers/support/PromiseQueue":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/promiseUtils"],function(b,a){let d=function(h,n,p,H,k){this.resolve=h;this.reject=n;this.callback=p;this.signal=H;this.abortCallback=k};return function(){function h(){this._tasks=
[]}var n=h.prototype;n.push=function(p,H,k){return new Promise((J,x)=>this._tasks.push(new d(J,x,p,H,k)))};n.unshift=function(p,H,k){return new Promise((J,x)=>this._tasks.unshift(new d(J,x,p,H,k)))};n.process=function(){if(0===this._tasks.length)return!1;const p=this._tasks.shift();try{const H=a.isAborted(p.signal);if(H&&!p.abortCallback)p.reject(a.createAbortError());else{const k=H?p.abortCallback(a.createAbortError()):p.callback();a.isPromise(k)?k.then(p.resolve,p.reject):p.resolve(k)}}catch(H){p.reject(H)}return!0};
n.cancelAll=function(){const p=a.createAbortError();for(const H of this._tasks)if(H.abortCallback){const k=H.abortCallback(p);H.resolve(k)}else H.reject(p);this._tasks.length=0};b._createClass(h,[{key:"length",get:function(){return this._tasks.length}}]);return h}()})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,d,h,n,p,H,k){d=function(J){function x(){var v=J.apply(this,arguments)||this;v.SCHEDULER_LOG_SLOW_TASKS=!1;v.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return v}b._inheritsLoose(x,J);return x}(d);a.__decorate([h.property()],d.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);a.__decorate([h.property()],d.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);d=a.__decorate([k.subclass("esri.views.support.DebugFlags")],d);return new d})},"esri/webdoc/support/Thumbnail":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,d,h,n,p,H,k){var J;d=J=function(x){function v(){var K=x.apply(this,arguments)||this;K.url="";return K}b._inheritsLoose(v,x);var L=v.prototype;L.destroy=function(){this.url=""};L.clone=function(){return new J({url:this.url})};return v}(d.JSONSupport);a.__decorate([h.property({type:String,json:{write:{isRequired:!0}}})],d.prototype,"url",void 0);return d=J=a.__decorate([k.subclass("esri.webdoc.support.Thumbnail")],d)})},"esri/webscene/support/Description":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,d,h,n,p,H,k){var J;d=J=function(x){function v(){var L=x.apply(this,arguments)||this;L.text="";return L}b._inheritsLoose(v,x);v.prototype.clone=function(){return new J({text:this.text})};return v}(d.JSONSupport);a.__decorate([h.property({type:String,json:{write:!0}})],d.prototype,"text",void 0);return d=J=a.__decorate([k.subclass("esri.webscene.support.Description")],d)})},"esri/webscene/support/SlideEnvironment":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../views/3d/environment/Clouds ../Lighting".split(" "),
function(b,a,d,h,n,p,H,k,J,x,v){var L;b.SlideEnvironment=L=function(K){function P(){var t=K.apply(this,arguments)||this;t.lighting=new v;t.clouds=null;return t}a._inheritsLoose(P,K);P.prototype.clone=function(){return new L({lighting:v.prototype.clone.call(this.lighting),clouds:x.prototype.clone.call(this.clouds)})};return P}(h.JSONSupport);d.__decorate([n.property({type:v,json:{write:!0}})],b.SlideEnvironment.prototype,"lighting",void 0);d.__decorate([n.property({type:x,json:{write:!1}})],b.SlideEnvironment.prototype,
"clouds",void 0);b.SlideEnvironment=L=d.__decorate([J.subclass("esri.webscene.Environment")],b.SlideEnvironment);Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/3d/environment/Clouds":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,d,h,n,p,H,k){var J;d=J=function(x){function v(K){K=x.call(this,K)||this;K.absorption=0;K.cloudHeight=1;K.cloudSize=.5;K.coverage=.4;K.density=.5;K.detailSize=.5;K.smoothness=.7;return K}b._inheritsLoose(v,x);var L=v.prototype;L.clone=function(){return new J(this.cloneConstructProperties())};L.cloneConstructProperties=function(){return{absorption:this.absorption,cloudHeight:this.cloudHeight,cloudSize:this.cloudSize,coverage:this.coverage,density:this.density,detailSize:this.detailSize,
smoothness:this.smoothness}};return v}(d);a.__decorate([h.property({type:Number,nonNullable:!0,json:{write:!1}})],d.prototype,"absorption",void 0);a.__decorate([h.property({type:Number,nonNullable:!0})],d.prototype,"cloudHeight",void 0);a.__decorate([h.property({type:Number,nonNullable:!0})],d.prototype,"cloudSize",void 0);a.__decorate([h.property({type:Number,nonNullable:!0})],d.prototype,"coverage",void 0);a.__decorate([h.property({type:Number,nonNullable:!0})],d.prototype,"density",void 0);a.__decorate([h.property({type:Number,
nonNullable:!0})],d.prototype,"detailSize",void 0);a.__decorate([h.property({type:Number,nonNullable:!0})],d.prototype,"smoothness",void 0);return d=J=a.__decorate([k.subclass("esri.view.3d.environment.Clouds")],d)})},"esri/webscene/support/SlideGround":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Ground ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../webdoc/support/opacityUtils".split(" "),
function(b,a,d,h,n,p,H,k,J,x){var v;h=v=function(L){function K(){var t=L.apply(this,arguments)||this;t.opacity=null;return t}b._inheritsLoose(K,L);var P=K.prototype;P.clone=function(){return new v({opacity:this.opacity})};P.cloneAndApplyTo=function(t){if(null==this.opacity)return t;t=null!=t?t.clone():new d;t.opacity=this.opacity;return t};K.fromGround=function(t){return new v({opacity:t.opacity})};return K}(h.JSONSupport);a.__decorate([n.property({type:Number,json:{type:H.Integer,read:{reader:x.transparencyToOpacity,
source:"transparency"},write:{writer:(L,K)=>{K.transparency=x.opacityToTransparency(L)},target:"transparency"}}})],h.prototype,"opacity",void 0);return h=v=a.__decorate([J.subclass("esri.webscene.support.SlideGround")],h)})},"esri/webscene/support/SlideVisibleLayer":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,d,h,n,p,H,k,J,x){var v;b.SlideVisibleLayer=v=function(L){function K(P){P=L.call(this,P)||this;P.id="";P.sublayerIds=null;return P}a._inheritsLoose(K,L);K.prototype.clone=function(){return new v({id:this.id,sublayerIds:n.clone(this.sublayerIds)})};return K}(h.JSONSupport);d.__decorate([p.property({type:String,json:{write:!0}})],b.SlideVisibleLayer.prototype,"id",void 0);d.__decorate([p.property({type:[H.Integer],json:{read:{source:"subLayerIds"},write:{target:"subLayerIds"}}})],b.SlideVisibleLayer.prototype,
"sublayerIds",void 0);b.SlideVisibleLayer=v=d.__decorate([x.subclass("esri.webscene.support.SlideVisibleLayer")],b.SlideVisibleLayer);b["default"]=b.SlideVisibleLayer;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/webscene/support/Title":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,d,h,n,p,H,k){var J;d=J=function(x){function v(){var L=x.apply(this,arguments)||this;L.text="";return L}b._inheritsLoose(v,x);v.prototype.clone=function(){return new J({text:this.text})};return v}(d.JSONSupport);a.__decorate([h.property({type:String,json:{write:{isRequired:!0}}})],d.prototype,"text",void 0);return d=J=a.__decorate([k.subclass("esri.webscene.support.Title")],d)})},"esri/webscene/TransportationNetwork":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,d,h,n,p,H,k){var J;d=J=function(x){function v(L){return x.call(this,L)||this}b._inheritsLoose(v,x);v.prototype.clone=function(){return new J({name:this.name,path:this.path,title:this.title})};return v}(d.JSONSupport);a.__decorate([h.property({type:String,json:{write:!0}})],d.prototype,"name",void 0);a.__decorate([h.property({type:String,json:{write:!0}})],d.prototype,"path",void 0);a.__decorate([h.property({type:String,json:{write:!0}})],d.prototype,"title",void 0);return d=J=a.__decorate([k.subclass("esri.webscene.TransportationNetwork")],
d)})},"esri/webscene/Version":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","../core/Version"],function(b,a,d){d=function(h){function n(p,H){return h.call(this,p,H,"webscene")||this}a._inheritsLoose(n,h);a._createClass(n,[{key:"supportsGround",get:function(){return this.since(1,8)}},{key:"supportsVisibleElevationLayersInSlides",get:function(){return this.lessThan(1,8)}}]);return n}(d.Version);b.Version=d;b["default"]=d;Object.defineProperty(b,"__esModule",{value:!0})})},"esri/core/Version":function(){define(["exports",
"./Error"],function(b,a){let d=function(){function h(p,H,k=""){this.major=p;this.minor=H;this._context=k}var n=h.prototype;n.lessThan=function(p,H){return this.major<p||p===this.major&&this.minor<H};n.since=function(p,H){return!this.lessThan(p,H)};n.validate=function(p){if(this.major!==p.major)throw new a((this._context&&this._context+":")+"unsupported-version",`Required major ${this._context&&this._context+" "}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:p});
};n.clone=function(){return new h(this.major,this.minor,this._context)};h.parse=function(p,H=""){const [k,J]=p.split(".");var x=/^\s*\d+\s*$/;if(!k||!k.match||!k.match(x))throw new a((H&&H+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:p});if(!J||!J.match||!J.match(x))throw new a((H&&H+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:p});p=parseInt(k,10);x=parseInt(J,10);return new h(p,x,H)};return h}();b.Version=
d;Object.defineProperty(b,"__esModule",{value:!0})})},"*noref":1}});
define("require ./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./kernel ./Map ./Viewpoint ./core/Collection ./core/Error ./core/Handles ./core/has ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/MultiOriginJSONSupport ./core/Promise ./core/promiseUtils ./core/urlUtils ./core/accessorSupport/decorators/property ./core/accessorSupport/ensureType ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./core/accessorSupport/originUtils ./core/accessorSupport/read ./geometry/Extent ./geometry/HeightModelInfo ./geometry/projection ./geometry/SpatialReference ./geometry/support/heightModelInfoUtils ./geometry/support/jsonUtils ./geometry/support/spatialReferenceUtils ./portal/Portal ./portal/PortalItem ./support/MapFloorInfo ./support/webSceneUtils ./views/support/spatialReferenceSupport ./webdoc/support/saveUtils ./webdoc/support/thumbnailUtils ./webscene/ApplicationProperties ./webscene/Environment ./webscene/InitialViewProperties ./webscene/Presentation ./webscene/TransportationNetwork ./webscene/Version".split(" "),function(b,
a,d,h,n,p,H,k,J,x,v,L,K,P,t,l,B,e,g,c,m,E,r,F,R,w,ca,fa,ja,ea,sa,oa,va,f,u,V,Z,y,C,D,T,q,G,U,ba,na){const O=P.getLogger("esri.WebScene"),W=new na.Version(1,25);n=function(ka){function ma(Q){var N=ka.call(this,Q)||this;N._handles=new J;N.applicationProperties=null;N.clippingArea=null;N.clippingEnabled=!1;N.floorInfo=null;N.heightModelInfo=null;N.sourceVersion=null;N.supportsHeightModelInfo=!0;N.transportationNetworks=null;N.presentation=new U;N.initialViewProperties=new G;N.portalItem=null;N.resourceInfo=
null;N.debouncedSaveOperations=e.debounce(function(){var I=a._asyncToGenerator(function*(S,da,ha){switch(S){case 0:return N._saveImpl(da);case 1:return N._saveAsImpl(ha,da)}});return function(S,da,ha){return I.apply(this,arguments)}}());N.resourceReferences={portalItem:null,paths:[]};N.authoringApp=null;N.authoringAppVersion=null;N._isAuthoringAppSetByUser=!1;N._isAuthoringAppVersionSetByUser=!1;return N}a._inheritsLoose(ma,ka);var ia=ma.prototype;ia.initialize=function(){this.when().catch(Q=>{O.error("#load()",
"Failed to load web scene",Q)});if(this.resourceInfo){let Q;try{Q=this._validateJSON(this.resourceInfo)}catch(N){this.addResolvingPromise(Promise.reject(N));return}this.read(Q);this.addResolvingPromise(this._validateSpatialReference());this.addResolvingPromise(this._validateHeightModelInfo())}this._handles.add(this.allLayers.on("change",()=>this._scheduleLayersIdGC()))};ia.destroy=function(){this._unscheduleLayersIdGC();this._handles.destroy();this.presentation&&this.presentation.destroy();const Q=
this.portalItem;this.portalItem=null;null==Q?void 0:Q.destroy()};ia.writeClippingArea=function(Q,N){N.clippingArea||(N.clippingArea={});N.clippingArea.geometry=Q.toJSON()};ia.readClippingEnabled=function(Q,N){return N.clippingArea?!!N.clippingArea.clip:!1};ia.writeClippingEnabled=function(Q,N){this.clippingArea&&(N.clippingArea||(N.clippingArea={}),N.clippingArea.clip=Q)};ia.writeLayers=function(Q,N,I,S){const da={...S,layerContainerType:"operational-layers"};Q=Q.map(ha=>this.verifyWriteLayer(ha,
S)?ha.write(null,da):null).filter(ha=>!!ha);N[I]=Q.toArray()};ia.verifyWriteLayer=function(Q,N){return"write"in Q?!0:(N&&N.messages&&N.messages.push(new k("layer:unsupported",`Layers (${Q.title}, ${Q.id}) of type '${Q.declaredClass}' cannot be persisted in web scenes`,{layer:Q})),!1)};ia.readSourceVersion=function(Q,N){const [I,S]=N.version.split(".");return new na.Version(parseInt(I,10),parseInt(S,10))};ia.writeSourceVersion=function(Q,N,I){N[I]=`${W.major}.${W.minor}`};ia.writeAuthoringApp=function(Q,
N){N.authoringApp=Q&&this._isAuthoringAppSetByUser?Q:"ArcGIS API for JavaScript"};ia.writeAuthoringAppVersion=function(Q,N){N.authoringAppVersion=Q&&this._isAuthoringAppVersionSetByUser?Q:h.version};ia.writeGround=function(Q,N,I,S){N[I]=Q?Q.write(null,S):{transparency:0,layers:[]}};ia.readInitialViewProperties=function(Q,N){Q={};N.initialState&&N.initialState.environment&&(Q.environment=q.fromJSON(N.initialState.environment));Q.spatialReference=N.spatialReference?ea.fromJSON(N.spatialReference):ea.WebMercator;
Q.viewingMode=N.viewingMode||"global";N.initialState&&N.initialState.viewpoint&&(Q.viewpoint=p.fromJSON(N.initialState.viewpoint));return new G(Q)};ia.load=function(Q){this.addResolvingPromise(this._loadFromSource());return Promise.resolve(this)};ia.loadAll=function(){return K.loadAll(this,Q=>{const N=this.presentation&&this.presentation.slides;Q(this.ground,this.basemap,this.layers,N&&N.map(I=>I.basemap))})};ia.read=function(Q,N){N={...N,origin:"web-scene"};const I=this._isAuthoringAppVersionSetByUser,
S=this._isAuthoringAppSetByUser;w.readLoadable(this,Q,da=>ka.prototype.read.call(this,Q,da),N);S||(this._isAuthoringAppSetByUser=!1);I||(this._isAuthoringAppVersionSetByUser=!1);if(Q.baseMap&&Array.isArray(Q.baseMap.elevationLayers)&&this.sourceVersion.supportsVisibleElevationLayersInSlides){N=Q.baseMap.elevationLayers.map(xa=>({id:xa.id}));const da=this.presentation.slides,ha=(xa,Aa)=>xa.visibleLayers.some(Ja=>Ja.id===Aa),ta=N.filter(xa=>!da.some(Aa=>ha(Aa,xa.id)));da.forEach(xa=>{xa.visibleLayers.addMany(ta)})}};
ia._writeBasemapElevationLayers=function(Q){const N=Q.ground&&Q.ground.layers;!Q.baseMap&&N&&N.length&&(Q.baseMap={title:"Basemap",baseMapLayers:[]});Q.baseMap&&(Q.baseMap.elevationLayers=v.clone(N))};ia.write=function(Q,N){var I;if("loaded"!==this.loadStatus)throw N=new k("webscene:not-loaded","Web scene must be loaded before it can be serialized"),O.error("#toJSON()","Web scene must be loaded before it can be serialized",this.loadError||this.loadStatus),N;this._runLayersIdGC();var S=!(null!=(I=
N)&&I.messages);N={messages:[],...N,origin:"web-scene"};Q=ka.prototype.write.call(this,Q,N);if(S&&(N=N.messages.filter(da=>"web-document-write:property-required"===da.name),N.length))throw S=new k("web-document:property-required","One or more properties that are required in the webscene JSON are missing, see details for the specific errors",{errors:N}),O.error("#toJSON()","One or more properties that are required in the webscene JSON are missing",N),S;this._writeBasemapElevationLayers(Q);return Q};
ia.save=function(){var Q=a._asyncToGenerator(function*(N){return this.debouncedSaveOperations(0,N)});return function(N){return Q.apply(this,arguments)}}();ia._saveImpl=function(){var Q=a._asyncToGenerator(function*(N){this.portalItem||(O.error("save(): requires the .portalItem property to be set"),yield Promise.reject(new k("webscene:portal-item-not-set","Portal item to save to has not been set on the WebScene")));"Web Scene"!==this.portalItem.type&&(yield Promise.reject(new k("webscene:portal-item-wrong-type",
'Portal item needs to have type "Web Scene"')));const I=this._updateFromPromise;yield this._ensureLoadBeforeSave();const S=this._enableVerifyItemRelativeUrls({origin:"web-scene",url:this.portalItem.itemUrl&&g.urlToObject(this.portalItem.itemUrl),messages:[],portal:this.portalItem.portal||f.getDefault(),portalItem:this.portalItem,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}}),da=this.write(null,S);yield Promise.all(S.resources.pendingOperations);
yield this._verifySave(da,S,N);this._updateTypeKeywords(this.portalItem);yield this.portalItem.update({data:da});yield C.saveResources(this.resourceReferences,S,null);R.updateOrigins(S);I&&(yield I);yield this._saveThumbnail();return this.portalItem});return function(N){return Q.apply(this,arguments)}}();ia.saveAs=function(){var Q=a._asyncToGenerator(function*(N,I){return this.debouncedSaveOperations(1,I,N)});return function(N,I){return Q.apply(this,arguments)}}();ia._saveAsImpl=function(){var Q=
a._asyncToGenerator(function*(N,I){N=u.from(N);N||(O.error("saveAs(portalItem): requires a portal item parameter"),yield Promise.reject(new k("webscene:portal-item-required","saveAs requires a portal item to save to")));N.id&&(N=N.clone(),N.id=null);const S=N.portal||f.getDefault();yield this._ensureLoadBeforeSave();N.type="Web Scene";N.portal=S;const da=this._enableVerifyItemRelativeUrls({origin:"web-scene",url:null,messages:[],portal:S,portalItem:N,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],
toUpdate:[],toKeep:[],pendingOperations:[]}}),ha=this.write(null,da);yield Promise.all(da.resources.pendingOperations);yield this._verifySaveAs(ha,da,I);const ta=this.thumbnailUrl,xa=!this._isOverridden("thumbnailUrl");this._updateTypeKeywords(N);yield S._signIn();yield S.user.addItem({item:N,folder:I&&I.folder,data:ha});yield C.saveResources(this.resourceReferences,da,null);this.portalItem=N;l.MultiOriginJSONSupport.prototype.read.call(this,{version:ha.version,authoringApp:ha.authoringApp,authoringAppVersion:ha.authoringAppVersion},
{name:"web-scene",ignoreDefaults:!0,url:N.itemUrl&&g.urlToObject(N.itemUrl)});R.updateOrigins(da);ta&&(this.thumbnailUrl=xa?g.addQueryParameter(ta,"w","8192"):ta);da.portalItem=N;yield this._saveThumbnail();return N});return function(N,I){return Q.apply(this,arguments)}}();ia._saveThumbnail=function(){var Q=a._asyncToGenerator(function*(){this._isOverridden("thumbnailUrl")&&(yield this.portalItem.updateThumbnail({thumbnail:this.thumbnailUrl}),this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl",
"user"))});return function(){return Q.apply(this,arguments)}}();ia._verifySave=function(Q,N,I,S=!1){if(!va.isEarth(this.spatialReference))return Promise.reject(new k("webscene:unsupported-spatial-reference","Webscenes using spatial reference systems from Mars or Moon can not be saved currently."));let da=N.messages.filter(ta=>"error"===ta.type).map(ta=>new k(ta.name,ta.message,ta.details));N.blockedRelativeUrls&&(da=da.concat(N.blockedRelativeUrls.map(ta=>new k("url:unsupported",`Relative url '${ta}' is not supported in Web Scene`))));
I&&I.ignoreUnsupported&&(da=da.filter(ta=>"layer:unsupported"!==ta.name&&"symbol:unsupported"!==ta.name&&"symbol-layer:unsupported"!==ta.name&&"property:unsupported"!==ta.name&&"url:unsupported"!==ta.name&&"scenemodification:unsupported"!==ta.name));null!=I&&I.requiredPropertyChecksDisabled&&(da=da.filter(ta=>"web-document-write:property-required"!==ta.name));const ha=I&&I.strictSchemaValidationEnabled;return(ha?(new Promise(function(ta,xa){b(["./webscene/support/schemaValidator"],ta,xa)})).then(ta=>
{ta=ta.validate(Q);if(0<ta.length){const xa=`webscene did not validate:\n${ta.join("\n")}`;O.error(`${S?"saveAs":"save"}(): ${xa}`)}return ta.map(xa=>new k("webscene:schema-validation",xa))}).then(ta=>{if(ha&&0<ta.length)throw Z.createSchemaValidationError(ta.concat(da));return da}):Promise.resolve(da)).then(ta=>{if(0<ta.length)return Promise.reject(new k("webscene:save","Failed to save webscene due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:ta}))})};
ia._verifySaveAs=function(Q,N,I){return this.canSaveAs(N)?Promise.reject(Z.createCopyError()):this._verifySave(Q,N,I,!0)};ia.verifySaveAs=function(Q){const N=this._enableVerifyItemRelativeUrls({origin:"web-scene",messages:[]}),I=this.write(null,N);return this._verifySaveAs(I,N,Q)};ia.canSaveAs=function(Q){Q||(Q=this._enableVerifyItemRelativeUrls({origin:"web-scene",messages:[]}),this.write(null,Q));return Q.verifyItemRelativeUrls&&0<Q.verifyItemRelativeUrls.writtenUrls.length};ia.updateFrom=function(){var Q=
a._asyncToGenerator(function*(N,I={}){this._updateFromPromise=N=this._updateFromInternal(N,I);yield N;this._updateFromPromise===N&&(this._updateFromPromise=null)});return function(N){return Q.apply(this,arguments)}}();ia._updateFromInternal=function(){var Q=a._asyncToGenerator(function*(N,I={}){yield N.whenReady();!I.environmentExcluded&&N.environment&&(this.initialViewProperties.environment=q.prototype.clone.apply(N.environment));!I.viewpointExcluded&&N.viewpoint&&(this.initialViewProperties.viewpoint=
N.viewpoint.clone());this.initialViewProperties.spatialReference=N.spatialReference.clone();this.initialViewProperties.viewingMode=N.viewingMode;t.isSome(N.clippingArea)?N.clippingArea!==this.clippingArea&&(this.clippingArea=N.clippingArea.clone(),this.clippingEnabled=!0):this.clippingEnabled=!1;N.heightModelInfo&&(this.heightModelInfo=N.heightModelInfo.clone());N.map===this&&N.allLayerViews.forEach(S=>{S.layer.visible=S.visible});if(!1===I.thumbnailExcluded||null==I.thumbnailExcluded&&!I.viewpointExcluded)yield this._updateFromThumbnail(N,
I.thumbnailSize||void 0)});return function(N){return Q.apply(this,arguments)}}();ia._updateFromThumbnail=function(){var Q=a._asyncToGenerator(function*(N,I){I=D.getOptimalThumbnailSize(N,I);this.thumbnailUrl=(yield N.takeScreenshot({format:"jpg",width:I.width,height:I.height,disableDecorations:!0})).dataUrl});return function(N,I){return Q.apply(this,arguments)}}();ia._loadFromSource=function(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-scene"}):this.portalItem&&this.portalItem.id?
this._loadFromItem(this.portalItem):this._loadObjectsWithLayers()};ia._readAndLoadFromJSON=function(Q,N){Q=this._validateJSON(Q);this.read(Q,N);return this._loadFromJSON(Q,N)};ia._extractOperationalLayers=function(Q){const N=[];if(!this.sourceVersion.supportsGround&&Q.baseMap&&Array.isArray(Q.baseMap.elevationLayers))for(const da of Q.baseMap.elevationLayers)N.push(da);const I=[],S=da=>{da.layers&&(da.layers=da.layers.filter(S));return"ArcGISTiledElevationServiceLayer"===da.layerType?(this.sourceVersion.supportsGround||
I.push(da),!1):!0};return{operationalLayers:Q.operationalLayers?Q.operationalLayers.filter(S):[],operationalElevationLayers:I,basemapElevationLayers:N}};ia._loadFromJSON=function(Q,N){const I=new H;return this._validateSpatialReference().then(()=>this._validateHeightModelInfo()).then(()=>new Promise(function(S,da){b(["./layers/support/layersCreator"],S,da)})).then(({populateOperationalLayers:S})=>{const {operationalLayers:da,operationalElevationLayers:ha,basemapElevationLayers:ta}=this._extractOperationalLayers(Q),
xa=[],Aa={context:{...N,layerContainerType:"operational-layers"}};this.portalItem&&(Aa.context.portal=this.portalItem.portal||f.getDefault());0<ta.length&&xa.push(S(this.ground.layers,ta,{...Aa,context:{...Aa.context,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"}));0<ha.length&&xa.push(S(I,ha,{...Aa,context:{...Aa.context,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"}));da&&0<da.length&&xa.push(S(this.layers,da,Aa));return e.eachAlways(xa).then(()=>
{})}).then(()=>this._loadObjectsWithLayers()).then(()=>{this.ground.layers.addMany(I)})};ia._ensureLoadBeforeSave=function(){var Q=a._asyncToGenerator(function*(){yield this.load();yield this._loadObjectsWithLayers();const N=[];for(const I of this.allLayers.items)if("beforeSave"in I&&"function"===typeof I.beforeSave){const S=I.beforeSave();S&&N.push(S)}yield e.eachAlways(N)});return function(){return Q.apply(this,arguments)}}();ia._loadObjectsWithLayers=function(){var Q=a._asyncToGenerator(function*(){const N=
[];this.ground&&N.push(this.ground.load());this.basemap&&N.push(this.basemap.load());this.presentation.slides.forEach(I=>{I.basemap&&N.push(I.basemap.load())});yield e.eachAlways(N)});return function(){return Q.apply(this,arguments)}}();ia._loadFromItem=function(){var Q=a._asyncToGenerator(function*(N){yield N.load().catch(da=>{throw new k("webscene:load-portal-item","Failed to load portal item",{error:da});});if("Web Scene"!==N.type)throw new k("webscene:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Scene'",
{type:N.type});const I=yield N.fetchData();this.resourceInfo=I;const S={origin:"web-scene",url:g.urlToObject(N.itemUrl),portal:N.portal||f.getDefault(),portalItem:N,readResourcePaths:[]};yield this._readAndLoadFromJSON(I,S);this.resourceReferences={portalItem:N,paths:S.readResourcePaths}});return function(N){return Q.apply(this,arguments)}}();ia._validateSpatialReference=function(){const Q=this.initialViewProperties,N=this._sceneSpatialReference;let I;if("local"!==Q.viewingMode){if(!y.isSpatialReferenceSupported(N,
"global"))return Promise.reject(new k("webscene:unsupported-spatial-reference","Unsupported spatial reference (${spatialReference.wkid}) in global mode, only Web Mercator, WGS84 GCS or CGCS2000 are supported",{spatialReference:N,viewingMode:Q.viewingMode}));I=ha=>!ha||ja.canProjectWithoutEngine(ha,N)}else{if(!y.isSpatialReferenceSupported(N,"local"))return Promise.reject(new k("webscene:unsupported-spatial-reference","Unsupported spatial reference (${spatialReference.wkid}) in local mode, only projected coordinate systems are supported",
{spatialReference:N,viewingMode:Q.viewingMode}));I=ha=>!ha||ha.equals(N)}const S=ha=>ha&&(t.isSome(ha.camera)&&ha.camera.position&&ha.camera.position.spatialReference||t.isSome(ha.targetGeometry)&&ha.targetGeometry.spatialReference);var da=S(Q.viewpoint);return da&&!I(da)?Promise.reject(new k("webscene:incompatible-camera-spatial-reference","Camera spatial reference (${cameraSpatialReference.wkid}) is incompatible with the scene spatial reference (${sceneSpatialReference.wkid})",{cameraSpatialReference:da,
sceneSpatialReference:N,viewingMode:Q.viewingMode})):(da=this.presentation.slides.find(ha=>!I(S(ha.viewpoint))))?(da=S(da.viewpoint),Promise.reject(new k("webscene:incompatible-slide-spatial-reference","Slide spatial reference (${slideSpatialReference.wkid}) is incompatible with the scene spatial reference (${sceneSpatialReference.wkid})",{slideSpatialReference:da,sceneSpatialReference:N,viewingMode:Q.viewingMode}))):Promise.resolve()};ia._validateHeightModelInfo=function(){const Q=sa.validateWebSceneError(this.heightModelInfo,
this._sceneSpatialReference);return Q?Promise.reject(Q):Promise.resolve()};ia._validateJSON=function(Q){const N=na.Version.parse(Q.version||"","webscene");W.validate(N);Q.version=`${N.major}.${N.minor}`;1===N.major&&2>=N.minor&&(Q.spatialReference=ea.WebMercator.toJSON());return Q};ia._updateTypeKeywords=function(Q){"local"===this.initialViewProperties.viewingMode?Q.typeKeywords?-1===Q.typeKeywords.indexOf("ViewingMode-Local")&&Q.typeKeywords.push("ViewingMode-Local"):Q.typeKeywords=["ViewingMode-Local"]:
"global"===this.initialViewProperties.viewingMode&&Q.typeKeywords&&(Q.typeKeywords=Q.typeKeywords.filter(N=>"ViewingMode-Local"!==N));Q.typeKeywords&&(Q.typeKeywords=Q.typeKeywords.filter((N,I,S)=>S.indexOf(N)===I))};ia._enableVerifyItemRelativeUrls=function(Q){const N=this._verifyItemRelativeRootPath;N&&(Q.verifyItemRelativeUrls={rootPath:N,writtenUrls:[]});return Q};ia._unscheduleLayersIdGC=function(){this._layersIdGCTimeoutId&&(clearTimeout(this._layersIdGCTimeoutId),this._layersIdGCTimeoutId=
0)};ia._scheduleLayersIdGC=function(){this._unscheduleLayersIdGC();this._layersIdGCTimeoutId=setTimeout(()=>{this._layersIdGCTimeoutId=0;this._runLayersIdGC()},3E3)};ia._runLayersIdGC=function(){this._unscheduleLayersIdGC();var Q=this.applicationProperties&&this.applicationProperties.viewing&&this.applicationProperties.viewing.search;const N=I=>!!this.allLayers.find(S=>S.id===I);Q&&Q.layers&&(Q.layers=Q.layers.filter(I=>N(I.id)));(Q=this.presentation&&this.presentation.slides)&&Q.forEach(I=>{I.visibleLayers&&
(I.visibleLayers=I.visibleLayers.filter(S=>N(S.id)))})};ma.fromJSON=function(Q){if(!Q)throw new k("webscene:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:Q})};a._createClass(ma,[{key:"thumbnailUrl",get:function(){return this.portalItem&&this.portalItem.thumbnailUrl||null},set:function(Q){Q?this._override("thumbnailUrl",Q):(this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"))}},{key:"authoringApp",set:function(Q){this._isAuthoringAppSetByUser=
!0;this._set("authoringApp",Q)}},{key:"authoringAppVersion",set:function(Q){this._isAuthoringAppVersionSetByUser=!0;this._set("authoringAppVersion",Q)}},{key:"spatialReference",get:function(){var Q,N;return null!=(Q=null==(N=this.initialViewProperties)?void 0:N.spatialReference)?Q:ea.WebMercator}},{key:"viewingMode",get:function(){var Q,N;return null!=(Q=null==(N=this.initialViewProperties)?void 0:N.viewingMode)?Q:"global"}},{key:"_sceneSpatialReference",get:function(){return this.initialViewProperties.spatialReference||
ea.WebMercator}},{key:"_verifyItemRelativeRootPath",get:function(){return this.portalItem&&this.portalItem.itemUrl?g.urlToObject(this.portalItem.itemUrl).path:null}}]);return ma}(L.LoadableMixin(B.EsriPromiseMixin(l.MultiOriginJSONMixin(n))));n.VERSION=W;d.__decorate([c.property({type:T,json:{write:!0}})],n.prototype,"applicationProperties",void 0);d.__decorate([c.property({json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],n.prototype,"basemap",void 0);d.__decorate([c.property({type:ca,json:{read:{source:"clippingArea.geometry",
reader:oa.fromJSON},write:{target:"clippingArea.geometry"}}})],n.prototype,"clippingArea",void 0);d.__decorate([F.writer("clippingArea")],n.prototype,"writeClippingArea",null);d.__decorate([c.property({type:Boolean,json:{write:{target:"clippingArea.clip"}}})],n.prototype,"clippingEnabled",void 0);d.__decorate([E.reader("clippingEnabled",["clippingArea"])],n.prototype,"readClippingEnabled",null);d.__decorate([F.writer("clippingEnabled")],n.prototype,"writeClippingEnabled",null);d.__decorate([c.property({type:V,
json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],n.prototype,"floorInfo",void 0);d.__decorate([c.property({type:fa,json:{write:!0}})],n.prototype,"heightModelInfo",void 0);d.__decorate([c.property({json:{write:{target:"operationalLayers",ignoreOrigin:!0}}})],n.prototype,"layers",void 0);d.__decorate([F.writer("layers")],n.prototype,"writeLayers",null);d.__decorate([c.property({readOnly:!0,type:na.Version,json:{type:(()=>{const ka=[],ma=W.major;for(let ia=8;ia<=W.minor;ia++)ka.push(`${ma}.${ia}`);
return ka})(),write:{ignoreOrigin:!0,target:"version",isRequired:!0,overridePolicy:()=>({enabled:!0,allowNull:!0,ignoreOrigin:!0})}}})],n.prototype,"sourceVersion",void 0);d.__decorate([E.reader("sourceVersion",["version"])],n.prototype,"readSourceVersion",null);d.__decorate([F.writer("sourceVersion")],n.prototype,"writeSourceVersion",null);d.__decorate([c.property({json:{read:!1,write:!1}})],n.prototype,"tables",void 0);d.__decorate([c.property()],n.prototype,"thumbnailUrl",null);d.__decorate([c.property({type:String,
json:{write:{allowNull:!0,ignoreOrigin:!0}}})],n.prototype,"authoringApp",null);d.__decorate([F.writer("authoringApp")],n.prototype,"writeAuthoringApp",null);d.__decorate([c.property({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],n.prototype,"authoringAppVersion",null);d.__decorate([F.writer("authoringAppVersion")],n.prototype,"writeAuthoringAppVersion",null);d.__decorate([c.property({json:{write:{isRequired:!0,allowNull:!0,ignoreOrigin:!0,enabled:!0}}})],n.prototype,"ground",void 0);
d.__decorate([F.writer("ground")],n.prototype,"writeGround",null);d.__decorate([c.property({type:H.ofType(ba),json:{write:!0}})],n.prototype,"transportationNetworks",void 0);d.__decorate([c.property({type:U,nonNullable:!0,json:{write:{ignoreOrigin:!0,writer:(ka,ma,ia,Q)=>{ka.slides&&0<ka.slides.length&&(ma.presentation=ka.write(null,{...Q,isPresentation:!0}))}}}})],n.prototype,"presentation",void 0);d.__decorate([c.property({type:G,nonNullable:!0,json:{write:{target:"initialState",isRequired:!0,ignoreOrigin:!0},
default:()=>new G({viewingMode:"global",spatialReference:ea.WebMercator})}})],n.prototype,"initialViewProperties",void 0);d.__decorate([E.reader("initialViewProperties",["initialState.environment","spatialReference","viewingMode","initialState.viewpoint"])],n.prototype,"readInitialViewProperties",null);d.__decorate([c.property({type:ea,json:{read:!1,write:{isRequired:!0,ignoreOrigin:!0}}})],n.prototype,"spatialReference",null);d.__decorate([c.property({type:["local","global"],json:{read:!1,write:{isRequired:!0,
ignoreOrigin:!0}}})],n.prototype,"viewingMode",null);d.__decorate([c.property({type:u})],n.prototype,"portalItem",void 0);d.__decorate([c.property()],n.prototype,"resourceInfo",void 0);return n=d.__decorate([r.subclass("esri.WebScene")],n)});