// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.21/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/accessorSupport/originUtils":function(){define(["exports","../multiOriginJSONSupportUtils"],function(m,c){m.updateOrigins=function(a){a&&a.writtenProperties&&a.writtenProperties.forEach(e=>{const g=e.target;e.newOrigin&&e.oldOrigin!==e.newOrigin&&c.isMultiOriginJSONMixin(g)&&g.updateOrigin(e.propName,e.newOrigin)})};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/core/multiOriginJSONSupportUtils":function(){define(["exports"],function(m){m.isMultiOriginJSONMixin=
function(c){return c&&"getAtOrigin"in c&&"originOf"in c};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/networks/UtilityNetwork":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../request ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/subclass ./Network ./support/NamedTraceConfiguration ./support/TerminalConfiguration".split(" "),function(m,c,a,e,g,p,B,y,r,l,f){g=function(w){function k(t){t=
w.call(this,t)||this;t.sharedNamedTraceConfigurations=[];t.type="utility";return t}m._inheritsLoose(k,w);var n=k.prototype;n.load=function(){var t=m._asyncToGenerator(function*(A){this.addResolvingPromise(w.prototype.load.call(this,A));this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(A));return this});return function(A){return t.apply(this,arguments)}}();n.getTerminalConfiguration=function(t){let A=null,D=null;var E=t.layer;let C=null;if("feature"===(null==E?void 0:E.type)){if(C=
E.layerId,null===C)return null}else return null;E=t.attributes;if(null==E)return null;for(const F of Object.keys(E))"ASSETGROUP"===F.toUpperCase()&&(A=t.getAttribute(F)),"ASSETTYPE"===F.toUpperCase()&&(D=t.getAttribute(F));if(!this.dataElement)return null;let u=null;t=this.dataElement.domainNetworks;for(const F of t){var v;if(t=null==(v=F.junctionSources)?void 0:v.find(G=>G.layerId===C)){var z;if(t=null==(z=t.assetGroups)?void 0:z.find(G=>G.assetGroupCode===A)){var I;if(t=null==(I=t.assetTypes)?void 0:
I.find(G=>G.assetTypeCode===D)){u=t.terminalConfigurationId;break}}}}return null!=u?(v=this.dataElement.terminalConfigurations,(v=null==v?void 0:v.find(F=>F.terminalConfigurationId===u))?f.fromJSON(v):null):null};n.getTierNames=function(t){var A;const D=null==(A=this.dataElement)?void 0:A.domainNetworks.find(E=>E.domainNetworkName===t);return(null==D?void 0:D.tiers.map(E=>E.name))||[]};n._loadNamedTraceConfigurationsFromNetwork=function(){var t=m._asyncToGenerator(function*(A){var D;if(0!==(null==
(D=this.sharedNamedTraceConfigurations)?void 0:D.length)){D=this.sharedNamedTraceConfigurations.map(E=>E.globalId);A=yield this._fetchTraceConfigData(this.networkServiceUrl,D,A);for(const E of this.sharedNamedTraceConfigurations)(D=null==A?void 0:A.find(C=>C.globalId===E.globalId))&&E.read(D,{origin:"service"})}});return function(A){return t.apply(this,arguments)}}();n._fetchTraceConfigData=function(t,A,D){return a(`${t}/traceConfigurations/query`,{responseType:"json",query:{globalIds:JSON.stringify(A),
f:"json"},...D}).then(E=>E.data.traceConfigurations)};m._createClass(k,[{key:"serviceTerritoryFeatureLayerId",get:function(){var t;return null==(t=this.dataElement)?void 0:t.serviceTerritoryFeatureLayerId}},{key:"terminalConfigurations",get:function(){var t;return(null==(t=this.dataElement)?void 0:t.terminalConfigurations.map(A=>f.fromJSON(A)))||[]}},{key:"domainNetworkNames",get:function(){var t;return(null==(t=this.dataElement)?void 0:t.domainNetworks.map(A=>A.domainNetworkName))||[]}}]);return k}(r);
c.__decorate([e.property({type:[l],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],g.prototype,"sharedNamedTraceConfigurations",void 0);c.__decorate([e.property({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],g.prototype,"type",void 0);c.__decorate([e.property({readOnly:!0})],g.prototype,"serviceTerritoryFeatureLayerId",null);c.__decorate([e.property({readOnly:!0})],g.prototype,
"terminalConfigurations",null);c.__decorate([e.property({readOnly:!0})],g.prototype,"domainNetworkNames",null);return g=c.__decorate([y.subclass("esri.networks.UtilityNetwork")],g)})},"esri/networks/Network":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../request ../core/Loadable ../core/Logger ../core/maybe ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../geometry/Extent ../geometry/SpatialReference ../layers/support/arcgisLayerUrl".split(" "),
function(m,c,a,e,g,p,B,y,r,l,f,w,k,n,t,A){const D=g.getLogger("esri.networks.Network");e=function(E){function C(v){v=E.call(this,v)||this;v.id=null;v.title=null;v.layerUrl=null;v.dataElement=null;v.fullExtent=null;v.spatialReference=null;v.type=null;return v}m._inheritsLoose(C,E);var u=C.prototype;u.initialize=function(){this.when().catch(v=>{if(!y.isAbortError(v)){var z,I;D.error("#load()",`Failed to load layer (title: '${null!=(z=this.title)?z:"no title"}', id: '${null!=(I=this.id)?I:"no id"}')`,
{error:v})}})};u.load=function(){var v=m._asyncToGenerator(function*(z){this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),z));this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,z));return this});return function(z){return v.apply(this,arguments)}}();u.getLayerIdBySourceId=function(v){if(this.dataElement){const z=this.dataElement.domainNetworks;for(const I of z){for(const F of I.edgeSources?I.edgeSources:[])if(F.sourceId===v)return F.layerId;
for(const F of I.junctionSources?I.junctionSources:[])if(F.sourceId===v)return F.layerId}}return null};u._fetchLayerMetaData=function(){var v=m._asyncToGenerator(function*(z,I){z=yield a(z,{responseType:"json",query:{f:"json"},...I});this.read(z.data,{origin:"service"})});return function(z,I){return v.apply(this,arguments)}}();u._fetchDataElement=function(){var v=m._asyncToGenerator(function*(z,I,F){this.dataElement||(z=yield a(`${z}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([I]),
f:"json"},...F}).then(G=>{var L;return null==(L=G.data.layerDataElements)?void 0:L[0]}))&&this.read(z,{origin:"service"})});return function(z,I,F){return v.apply(this,arguments)}}();m._createClass(C,[{key:"datasetName",get:function(){var v;return null==(v=this.dataElement)?void 0:v.name}},{key:"owner",get:function(){var v;return null==(v=this.dataElement)?void 0:v.userIdentity}},{key:"schemaGeneration",get:function(){var v;return null==(v=this.dataElement)?void 0:v.schemaGeneration}},{key:"parsedUrl",
get:function(){const v=this.layerUrl;return v?r.urlToObject(v):null}},{key:"featureServiceUrl",get:function(){const v=this.parsedUrl&&A.parse(this.parsedUrl.path);return p.isSome(v)?v.url.path:null}},{key:"networkServiceUrl",get:function(){return this.featureServiceUrl?this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer"):null}},{key:"layerId",get:function(){const v=this.parsedUrl&&A.parse(this.parsedUrl.path);return p.isSome(v)?v.sublayer:null}}]);return C}(B.MultiOriginJSONMixin(e));
c.__decorate([l.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}}},read:!1}})],e.prototype,"id",void 0);c.__decorate([l.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}}},read:!1}})],e.prototype,"title",void 0);c.__decorate([l.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],e.prototype,"layerUrl",void 0);c.__decorate([l.property({type:Object,
json:{origins:{service:{read:!0}},read:!1}})],e.prototype,"dataElement",void 0);c.__decorate([l.property({type:n,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],e.prototype,"fullExtent",void 0);c.__decorate([l.property({type:t,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],e.prototype,"spatialReference",void 0);c.__decorate([l.property({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],e.prototype,"type",void 0);c.__decorate([l.property({readOnly:!0})],
e.prototype,"datasetName",null);c.__decorate([l.property({readOnly:!0})],e.prototype,"owner",null);c.__decorate([l.property({readOnly:!0})],e.prototype,"schemaGeneration",null);c.__decorate([l.property({readOnly:!0})],e.prototype,"parsedUrl",null);c.__decorate([l.property({readOnly:!0})],e.prototype,"featureServiceUrl",null);c.__decorate([l.property({readOnly:!0})],e.prototype,"networkServiceUrl",null);c.__decorate([l.property({readOnly:!0})],e.prototype,"layerId",null);return e=c.__decorate([k.subclass("esri.networks.Network")],
e)})},"esri/networks/support/NamedTraceConfiguration":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/MultiOriginJSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./TraceConfiguration ./typeUtils ./UNTraceConfiguration".split(" "),function(m,c,a,e,g,p,B,y,r,l,f,w){a=function(k){function n(t){t=
k.call(this,t)||this;t.globalId=null;t.title=null;t.traceConfiguration=null;t.creationDate=null;t.creator=null;t.description=null;t.minStartingPoints=null;t.resultTypes=[];t.tags=[];t.traceType=null;return t}m._inheritsLoose(n,k);n.prototype.readTraceConfiguration=function(t,A){return void 0!==t.tierName?w.fromJSON(t):l.fromJSON(t)};return n}(a.MultiOriginJSONSupport);c.__decorate([e.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},
service:{read:{source:"globalId"}}},read:!1}})],a.prototype,"globalId",void 0);c.__decorate([e.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],a.prototype,"title",void 0);c.__decorate([e.property({type:l,json:{origins:{service:{read:!0}},read:!1}})],a.prototype,"traceConfiguration",void 0);c.__decorate([y.reader("service","traceConfiguration")],a.prototype,"readTraceConfiguration",
null);c.__decorate([e.property({type:Date,json:{origins:{service:{read:!0}},read:!1}})],a.prototype,"creationDate",void 0);c.__decorate([e.property({type:String,json:{origins:{service:{read:!0}},read:!1}})],a.prototype,"creator",void 0);c.__decorate([e.property({type:String,json:{origins:{service:{read:!0}},read:!1}})],a.prototype,"description",void 0);c.__decorate([e.property({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"}}},read:!1}})],a.prototype,"minStartingPoints",
void 0);c.__decorate([e.property({type:[Object],json:{origins:{service:{read:!0}},read:!1}})],a.prototype,"resultTypes",void 0);c.__decorate([e.property({type:[String],json:{origins:{service:{read:!0}},read:!1}})],a.prototype,"tags",void 0);c.__decorate([e.property({type:f.traceTypeKebabDict.apiValues,json:{type:f.traceTypeKebabDict.jsonValues,origins:{service:{read:f.traceTypeKebabDict.read}},read:!1}})],a.prototype,"traceType",void 0);return a=c.__decorate([r.subclass("esri.networks.support.NamedTraceConfiguration")],
a)})},"esri/networks/support/TraceConfiguration":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),function(m,c,a,e,g,p,B,y){a=function(r){function l(f){f=r.call(this,f)||this;f.conditionBarriers=[];f.outputConditions=[];f.functions=[];f.functionBarriers=[];f.traversabilityScope=
null;f.shortestPathNetworkAttributeName=null;f.includeBarriers=null;f.validateConsistency=null;f.ignoreBarriersAtStartingPoints=null;return f}m._inheritsLoose(l,r);return l}(a.JSONSupport);c.__decorate([e.property({type:[Object],json:{write:!0}})],a.prototype,"conditionBarriers",void 0);c.__decorate([e.property({type:[Object],json:{write:!0}})],a.prototype,"outputConditions",void 0);c.__decorate([e.property({type:[Object],json:{write:!0}})],a.prototype,"functions",void 0);c.__decorate([e.property({type:[Object],
json:{write:!0}})],a.prototype,"functionBarriers",void 0);c.__decorate([e.property({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],a.prototype,"traversabilityScope",void 0);c.__decorate([e.property({type:String,json:{write:!0}})],a.prototype,"shortestPathNetworkAttributeName",void 0);c.__decorate([e.property({type:Boolean,json:{write:!0}})],a.prototype,"includeBarriers",void 0);c.__decorate([e.property({type:Boolean,json:{write:!0}})],a.prototype,"validateConsistency",void 0);c.__decorate([e.property({type:Boolean,
json:{write:!0}})],a.prototype,"ignoreBarriersAtStartingPoints",void 0);return a=c.__decorate([y.subclass("esri.networks.support.TraceConfiguration")],a)})},"esri/networks/support/typeUtils":function(){define(["exports","../../core/jsonMap"],function(m,c){c=new c.JSONMap({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork","subnetwork controllers":"subnetwork-controllers",loops:"loops",isolation:"isolation"});m.traceTypeKebabDict=
c;Object.defineProperty(m,"__esModule",{value:!0})})},"esri/networks/support/UNTraceConfiguration":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./TraceConfiguration".split(" "),function(m,c,a,e,g,p,B,y){e=function(r){function l(f){f=r.call(this,f)||this;f.filterBarriers=[];f.domainNetworkName=null;f.filterBitsetNetworkAttributeName=
null;f.filterFunctionBarriers=[];f.filterScope=null;f.includeContainers=null;f.includeContent=null;f.includeIsolated=null;f.includeStructures=null;f.includeUpToFirstSpatialContainer=null;f.nearestNeighbor=null;f.outputFilterCategories=[];f.outputFilters=[];f.propagators=[];f.subnetworkName=null;f.targetTierName=null;f.tierName=null;f.validateLocatability=null;return f}m._inheritsLoose(l,r);return l}(y);c.__decorate([a.property({type:[Object],json:{write:!0}})],e.prototype,"filterBarriers",void 0);
c.__decorate([a.property({type:String,json:{write:!0}})],e.prototype,"domainNetworkName",void 0);c.__decorate([a.property({type:String,json:{write:!0}})],e.prototype,"filterBitsetNetworkAttributeName",void 0);c.__decorate([a.property({type:[Object],json:{write:!0}})],e.prototype,"filterFunctionBarriers",void 0);c.__decorate([a.property({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],e.prototype,"filterScope",void 0);c.__decorate([a.property({type:Boolean,json:{write:!0}})],e.prototype,
"includeContainers",void 0);c.__decorate([a.property({type:Boolean,json:{write:!0}})],e.prototype,"includeContent",void 0);c.__decorate([a.property({type:Boolean,json:{write:!0}})],e.prototype,"includeIsolated",void 0);c.__decorate([a.property({type:Boolean,json:{write:!0}})],e.prototype,"includeStructures",void 0);c.__decorate([a.property({type:Boolean,json:{write:!0}})],e.prototype,"includeUpToFirstSpatialContainer",void 0);c.__decorate([a.property({type:Object,json:{write:!0}})],e.prototype,"nearestNeighbor",
void 0);c.__decorate([a.property({type:[Object],json:{write:!0}})],e.prototype,"outputFilterCategories",void 0);c.__decorate([a.property({type:[Object],json:{write:!0}})],e.prototype,"outputFilters",void 0);c.__decorate([a.property({type:[Object],json:{write:!0}})],e.prototype,"propagators",void 0);c.__decorate([a.property({type:String,json:{write:!0}})],e.prototype,"subnetworkName",void 0);c.__decorate([a.property({type:String,json:{write:!0}})],e.prototype,"targetTierName",void 0);c.__decorate([a.property({type:String,
json:{write:!0}})],e.prototype,"tierName",void 0);c.__decorate([a.property({type:Boolean,json:{write:!0}})],e.prototype,"validateLocatability",void 0);return e=c.__decorate([B.subclass("esri.networks.support.UNTraceConfiguration")],e)})},"esri/networks/support/TerminalConfiguration":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./Terminal".split(" "),
function(m,c,a,e,g,p,B,y,r,l){a=new a.JSONMap({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});e=function(f){function w(k){k=f.call(this,k)||this;k.defaultConfiguration=null;k.id=null;k.name=null;k.terminals=[];k.traversabilityModel=null;return k}m._inheritsLoose(w,f);return w}(e.JSONSupport);c.__decorate([g.property({type:String,json:{write:!0}})],e.prototype,"defaultConfiguration",void 0);c.__decorate([g.property({type:Number,json:{read:{source:"terminalConfigurationId"},
write:{target:"terminalConfigurationId"}}})],e.prototype,"id",void 0);c.__decorate([g.property({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],e.prototype,"name",void 0);c.__decorate([g.property({type:[l],json:{write:!0}})],e.prototype,"terminals",void 0);c.__decorate([g.property({type:a.apiValues,json:{type:a.jsonValues,read:a.read,write:a.write}})],e.prototype,"traversabilityModel",void 0);return e=c.__decorate([r.subclass("esri.networks.support.TerminalConfiguration")],
e)})},"esri/networks/support/Terminal":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),function(m,c,a,e,g,p,B,y){a=function(r){function l(f){f=r.call(this,f)||this;f.id=null;f.name=null;return f}m._inheritsLoose(l,r);return l}(a.JSONSupport);c.__decorate([e.property({type:Number,
json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],a.prototype,"id",void 0);c.__decorate([e.property({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],a.prototype,"name",void 0);c.__decorate([e.property({type:Boolean,json:{write:!0}})],a.prototype,"isUpstreamTerminal",void 0);return a=c.__decorate([y.subclass("esri.networks.support.Terminal")],a)})},"esri/rest/support/ProjectParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),
function(m,c,a,e,g,p,B,y,r){a=function(l){function f(w){w=l.call(this,w)||this;w.geometries=null;w.outSpatialReference=null;w.transformation=null;w.transformForward=null;return w}m._inheritsLoose(f,l);f.prototype.toJSON=function(){const w=this.geometries.map(function(t){return t.toJSON()}),k=this.geometries[0],n={};n.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON());n.inSR=k.spatialReference.wkid||JSON.stringify(k.spatialReference.toJSON());n.geometries=JSON.stringify({geometryType:r.getJsonType(k),
geometries:w});this.transformation&&(n.transformation=this.transformation.wkid||JSON.stringify(this.transformation));null!=this.transformForward&&(n.transformForward=this.transformForward);return n};return f}(a.JSONSupport);c.__decorate([e.property()],a.prototype,"geometries",void 0);c.__decorate([e.property({json:{read:{source:"outSR"}}})],a.prototype,"outSpatialReference",void 0);c.__decorate([e.property()],a.prototype,"transformation",void 0);c.__decorate([e.property()],a.prototype,"transformForward",
void 0);return a=c.__decorate([y.subclass("esri.rest.support.ProjectParameters")],a)})},"esri/support/MapFloorInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/subclass ../layers/support/FacilityLayerInfo ../layers/support/LevelLayerInfo ../layers/support/SiteLayerInfo".split(" "),function(m,c,a,e,g,p,B,y,r,
l,f){a=function(w){function k(n){n=w.call(this,n)||this;n.levelLayer=null;n.facilityLayer=null;n.siteLayer=null;return n}m._inheritsLoose(k,w);return k}(a.JSONSupport);c.__decorate([e.property({type:l,json:{write:!0}})],a.prototype,"levelLayer",void 0);c.__decorate([e.property({type:r,json:{write:!0}})],a.prototype,"facilityLayer",void 0);c.__decorate([e.property({type:f,json:{write:!0}})],a.prototype,"siteLayer",void 0);return a=c.__decorate([y.subclass("esri.support.MapFloorInfo")],a)})},"esri/layers/support/FacilityLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(m,c,a,e,g,p,B,y){a=function(r){function l(f){f=r.call(this,f)||this;f.facilityIdField=null;f.layerId=null;f.nameField=null;f.siteIdField=null;f.sublayerId=null;return f}m._inheritsLoose(l,r);return l}(a.JSONSupport);c.__decorate([e.property({type:String,json:{write:!0}})],a.prototype,"facilityIdField",void 0);c.__decorate([e.property({type:String,json:{write:!0}})],a.prototype,"layerId",void 0);c.__decorate([e.property({type:String,json:{write:!0}})],a.prototype,"nameField",void 0);c.__decorate([e.property({type:String,
json:{write:!0}})],a.prototype,"siteIdField",void 0);c.__decorate([e.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"sublayerId",void 0);return a=c.__decorate([y.subclass("esri.layers.support.FacilityLayerInfo")],a)})},"esri/layers/support/LevelLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(m,c,a,e,g,p,B,y){a=function(r){function l(f){f=r.call(this,f)||this;f.facilityIdField=null;f.layerId=null;f.levelIdField=null;f.levelNumberField=null;f.longNameField=null;f.shortNameField=null;f.sublayerId=null;f.verticalOrderField=null;return f}m._inheritsLoose(l,r);return l}(a.JSONSupport);c.__decorate([e.property({type:String,json:{write:!0}})],a.prototype,"facilityIdField",void 0);c.__decorate([e.property({type:String,json:{write:!0}})],a.prototype,"layerId",void 0);c.__decorate([e.property({type:String,
json:{write:!0}})],a.prototype,"levelIdField",void 0);c.__decorate([e.property({type:String,json:{write:!0}})],a.prototype,"levelNumberField",void 0);c.__decorate([e.property({type:String,json:{write:!0}})],a.prototype,"longNameField",void 0);c.__decorate([e.property({type:String,json:{write:!0}})],a.prototype,"shortNameField",void 0);c.__decorate([e.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"sublayerId",
void 0);c.__decorate([e.property({type:String,json:{write:!0}})],a.prototype,"verticalOrderField",void 0);return a=c.__decorate([y.subclass("esri.layers.support.LevelLayerInfo")],a)})},"esri/layers/support/SiteLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(m,c,a,e,g,p,B,y){a=function(r){function l(f){f=r.call(this,f)||this;f.layerId=null;f.nameField=null;f.siteIdField=null;f.sublayerId=null;return f}m._inheritsLoose(l,r);return l}(a.JSONSupport);c.__decorate([e.property({type:String,json:{write:!0}})],a.prototype,"layerId",void 0);c.__decorate([e.property({type:String,json:{write:!0}})],a.prototype,"nameField",void 0);c.__decorate([e.property({type:String,json:{write:!0}})],a.prototype,"siteIdField",void 0);c.__decorate([e.property({type:Number,
json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"sublayerId",void 0);return a=c.__decorate([y.subclass("esri.layers.support.SiteLayerInfo")],a)})},"esri/webdoc/RangeInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/subclass".split(" "),
function(m,c,a,e,g,p,B,y,r){var l;a=l=function(f){function w(k){k=f.call(this,k)||this;k.activeRange=null;k.currentRangeExtent=null;k.fullRangeExtent=null;return k}m._inheritsLoose(w,f);w.prototype.clone=function(){return new l(e.clone({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))};return w}(a.JSONSupport);c.__decorate([g.property({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],
a.prototype,"activeRange",void 0);c.__decorate([g.property({type:[Number],json:{write:!0}})],a.prototype,"currentRangeExtent",void 0);c.__decorate([g.property({type:[Number],json:{write:!0}})],a.prototype,"fullRangeExtent",void 0);return a=l=c.__decorate([r.subclass("esri.webdoc.RangeInfo")],a)})},"esri/webdoc/Widgets":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/subclass ./widgets/FloorFilter ./widgets/Range ./widgets/TimeSlider".split(" "),
function(m,c,a,e,g,p,B,y,r,l,f,w){var k;a=k=function(n){function t(A){A=n.call(this,A)||this;A.range=null;A.timeSlider=null;A.floorFilter=null;return A}m._inheritsLoose(t,n);t.prototype.clone=function(){return new k(e.clone({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))};return t}(a.JSONSupport);c.__decorate([g.property({type:f,json:{write:!0}})],a.prototype,"range",void 0);c.__decorate([g.property({type:w,json:{write:!0}})],a.prototype,"timeSlider",void 0);c.__decorate([g.property({type:l,
json:{write:!0}})],a.prototype,"floorFilter",void 0);return a=k=c.__decorate([r.subclass("esri.webdoc.Widgets")],a)})},"esri/webdoc/widgets/FloorFilter":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),function(m,c,a,e,g,p,B,y,r){var l;a=l=function(f){function w(k){k=
f.call(this,k)||this;k.enabled=!1;k.longNames=!1;k.minimized=!1;k.pinnedLevels=!1;k.site=null;k.facility=null;k.level=null;return k}m._inheritsLoose(w,f);w.prototype.clone=function(){return new l(e.clone({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))};return w}(a.JSONSupport);c.__decorate([g.property({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],a.prototype,
"enabled",void 0);c.__decorate([g.property({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],a.prototype,"longNames",void 0);c.__decorate([g.property({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],a.prototype,"minimized",void 0);c.__decorate([g.property({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],a.prototype,"pinnedLevels",void 0);c.__decorate([g.property({type:String,json:{read:{source:"site"},write:{target:"site"}}})],
a.prototype,"site",void 0);c.__decorate([g.property({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],a.prototype,"facility",void 0);c.__decorate([g.property({type:String,json:{read:{source:"level"},write:{target:"level"}}})],a.prototype,"level",void 0);return a=l=c.__decorate([r.subclass("esri.webdoc.widgets.FloorFilter")],a)})},"esri/webdoc/widgets/Range":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(m,c,a,e,g,p,B,y,r){var l;a=new a.JSONMap({slider:"slider",picker:"picker"});e=l=function(f){function w(k){k=f.call(this,k)||this;k.interactionMode=null;k.numStops=null;k.stopInterval=null;return k}m._inheritsLoose(w,f);w.prototype.clone=function(){return new l({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})};return w}(e.JSONSupport);c.__decorate([g.property({type:a.apiValues,nonNullable:!0,json:{type:a.jsonValues,default:null,read:{reader:a.read},
write:{isRequired:!0,writer:a.write}}})],e.prototype,"interactionMode",void 0);c.__decorate([g.property({type:Number,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const f=null!=this.stopInterval;return{enabled:!f,isRequired:!f}}}}})],e.prototype,"numStops",void 0);c.__decorate([g.property({type:Number,json:{write:{overridePolicy(){return{isRequired:null==this.numStops}}}}})],e.prototype,"stopInterval",void 0);return e=l=c.__decorate([r.subclass("esri.webdoc.widgets.Range")],
e)})},"esri/webdoc/widgets/TimeSlider":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../TimeExtent ../../TimeInterval ../../core/JSONSupport ../../core/lang ../../core/maybe ../../core/object ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer".split(" "),function(m,
c,a,e,g,p,B,y,r,l,f,w,k,n,t){var A;g=A=function(D){function E(u){u=D.call(this,u)||this;u.currentTimeExtent=null;u.fullTimeExtent=null;u.loop=!1;u.numStops=null;u.numThumbs=null;u.stopDelay=null;u.stopInterval=null;u.stops=null;return u}m._inheritsLoose(E,D);var C=E.prototype;C.readCurrentTimeExtent=function(u){if(u)return new a({start:null!=u[0]?new Date(u[0]):null,end:null!=u[1]?new Date(u[1]):null})};C.writeCurrentTimeExtent=function(u,v,z){u&&y.setDeepValue(z,[B.isSome(u.start)?u.start.getTime():
null,B.isSome(u.end)?u.end.getTime():null],v)};C.readFullTimeExtent=function(u,v){if(u=v.properties)return new a({start:null!=u.startTime?new Date(u.startTime):null,end:null!=u.endTime?new Date(u.endTime):null})};C.writeFullTimeExtent=function(u,v){if(u){v=v.properties=v.properties||{};var z=u.end;u=u.start;z&&(v.endTime=B.isSome(z)?z.getTime():null);u&&(v.startTime=B.isSome(u)?u.getTime():null)}};C.readStopInterval=function(u,v,z){return u?e.fromJSON({value:u.interval,unit:u.units},z):null};C.writeStopInterval=
function(u,v,z,I){u&&(u=u.toJSON(I),y.setDeepValue(z,{interval:u.value,units:u.unit},v))};C.readStops=function(u){return u&&u.length?u.map(v=>new Date(v)):null};C.writeStops=function(u,v,z){u&&u.length&&y.setDeepValue(z,u.map(I=>I.getTime()),v)};C.clone=function(){return new A(p.clone({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))};
return E}(g.JSONSupport);c.__decorate([r.property({type:a,json:{read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],g.prototype,"currentTimeExtent",void 0);c.__decorate([k.reader("currentTimeExtent")],g.prototype,"readCurrentTimeExtent",null);c.__decorate([t.writer("currentTimeExtent")],g.prototype,"writeCurrentTimeExtent",null);c.__decorate([r.property({type:a,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},
"properties.startTime":{type:Number}}}}})],g.prototype,"fullTimeExtent",void 0);c.__decorate([k.reader("fullTimeExtent")],g.prototype,"readFullTimeExtent",null);c.__decorate([t.writer("fullTimeExtent")],g.prototype,"writeFullTimeExtent",null);c.__decorate([r.property({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],g.prototype,"loop",void 0);c.__decorate([r.property({type:Number,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",
overridePolicy(){var D;const E=!!this.stopInterval,C=!(null==(D=this.stops)||!D.length);D=!(E||C);return{enabled:D,isRequired:D}}}}})],g.prototype,"numStops",void 0);c.__decorate([r.property({type:[1,2],nonNullable:!0,json:{read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],g.prototype,"numThumbs",void 0);c.__decorate([r.property({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],
g.prototype,"stopDelay",void 0);c.__decorate([r.property({type:e,json:{read:{source:"properties.timeStopInterval"},write:{target:"properties.timeStopInterval",overridePolicy(){var D;const E=null!=this.numStops,C=!(null==(D=this.stops)||!D.length);return{enabled:!C,isRequired:!(E||C)}}}}})],g.prototype,"stopInterval",void 0);c.__decorate([k.reader("stopInterval")],g.prototype,"readStopInterval",null);c.__decorate([t.writer("stopInterval")],g.prototype,"writeStopInterval",null);c.__decorate([r.property({type:[Date],
json:{read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:null==this.numStops&&!this.stopInterval}}}}})],g.prototype,"stops",void 0);c.__decorate([k.reader("stops")],g.prototype,"readStops",null);c.__decorate([t.writer("stops")],g.prototype,"writeStops",null);return g=A=c.__decorate([n.subclass("esri.webdoc.widgets.TimeSlider")],g)})},"esri/webdoc/support/thumbnailUtils":function(){define(["exports"],function(m){const c={width:600,height:400};m.getOptimalThumbnailSize=
function(a,e){e=e||c;let {width:g,height:p}=e;e=g/p;1.5>e?p=g/1.5:1.5<e&&(g=1.5*p);g>a.width&&(p*=a.width/g,g=a.width);p>a.height&&(g*=a.height/p,p=a.height);return{width:Math.round(g),height:Math.round(p)}};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/webmap/ApplicationProperties":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/subclass ../webdoc/applicationProperties/Viewing".split(" "),
function(m,c,a,e,g,p,B,y,r,l){var f;a=f=function(w){function k(n){n=w.call(this,n)||this;n.editing=null;n.offline=null;n.viewing=null;return n}m._inheritsLoose(k,w);k.prototype.clone=function(){return new f(e.clone({editing:this.editing,offline:this.offline,viewing:this.viewing}))};return k}(a.JSONSupport);c.__decorate([g.property({json:{write:!0}})],a.prototype,"editing",void 0);c.__decorate([g.property({json:{write:!0}})],a.prototype,"offline",void 0);c.__decorate([g.property({type:l,json:{write:!0}})],
a.prototype,"viewing",void 0);return a=f=c.__decorate([r.subclass("esri.webmap.ApplicationProperties")],a)})},"esri/webdoc/applicationProperties/Viewing":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ./Search".split(" "),function(m,c,a,e,g,p,B,y,r,l){var f;a=f=function(w){function k(n){n=
w.call(this,n)||this;n.search=null;return n}m._inheritsLoose(k,w);k.prototype.clone=function(){return new f(e.clone({search:this.search}))};return k}(a.JSONSupport);c.__decorate([g.property({type:l,json:{write:!0}})],a.prototype,"search",void 0);return a=f=c.__decorate([r.subclass("esri.webdoc.applicationProperties.Viewing")],a)})},"esri/webdoc/applicationProperties/Search":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/extensions/serializableProperty/writePolicyUtils ./SearchLayer ./SearchTable".split(" "),
function(m,c,a,e,g,p,B,y,r,l,f,w,k,n,t){var A;const D=a.ofType(n),E=a.ofType(t);a=A=function(C){function u(z){z=C.call(this,z)||this;z.addressSearchEnabled=!0;z.enabled=!0;z.hintText=null;z.layers=new D;z.tables=new E;return z}m._inheritsLoose(u,C);var v=u.prototype;v.readAddressSearchEnabled=function(z){return!z};v.writeAddressSearchEnabled=function(z,I,F){I[F]=!z};v.clone=function(){return new A(g.clone({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,
layers:this.layers,tables:this.tables}))};return u}(e.JSONSupport);c.__decorate([p.property({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"addressSearchEnabled",void 0);c.__decorate([l.reader("addressSearchEnabled")],a.prototype,"readAddressSearchEnabled",null);c.__decorate([w.writer("addressSearchEnabled")],a.prototype,"writeAddressSearchEnabled",null);c.__decorate([p.property({type:Boolean,
nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],a.prototype,"enabled",void 0);c.__decorate([p.property({type:String,json:{write:!0}})],a.prototype,"hintText",void 0);c.__decorate([p.property({type:D,json:{write:{overridePolicy:k.writeNonEmptyCollectionPolicy},origins:{"web-scene":{write:{isRequired:!0}}}}})],a.prototype,"layers",void 0);c.__decorate([p.property({type:E,json:{read:!0,write:{overridePolicy:k.writeNonEmptyCollectionPolicy}}})],
a.prototype,"tables",void 0);return a=A=c.__decorate([f.subclass("esri.webdoc.applicationProperties.Search")],a)})},"esri/core/accessorSupport/extensions/serializableProperty/writePolicyUtils":function(){define(["exports"],function(m){m.writeNonEmptyCollectionPolicy=function(c){return{enabled:!(null==c||!c.length)}};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/webdoc/applicationProperties/SearchLayer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ./SearchLayerField".split(" "),
function(m,c,a,e,g,p,B,y,r,l){var f;a=f=function(w){function k(n){n=w.call(this,n)||this;n.field=null;n.id=null;n.subLayer=null;return n}m._inheritsLoose(k,w);k.prototype.clone=function(){return new f(e.clone({field:this.field,id:this.id,subLayer:this.subLayer}))};return k}(a.JSONSupport);c.__decorate([g.property({type:l,json:{write:{isRequired:!0}}})],a.prototype,"field",void 0);c.__decorate([g.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"id",void 0);c.__decorate([g.property({type:p.Integer,
json:{write:!0}})],a.prototype,"subLayer",void 0);return a=f=c.__decorate([r.subclass("esri.webdoc.applicationProperties.SearchLayer")],a)})},"esri/webdoc/applicationProperties/SearchLayerField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),
function(m,c,a,e,g,p,B,y,r,l){var f;a=f=function(w){function k(n){n=w.call(this,n)||this;n.exactMatch=!1;n.name=null;n.type=null;return n}m._inheritsLoose(k,w);k.prototype.clone=function(){return new f({exactMatch:this.exactMatch,type:this.type,name:this.name})};return k}(a.JSONSupport);c.__decorate([e.property({type:Boolean,json:{write:!0}})],a.prototype,"exactMatch",void 0);c.__decorate([e.property({type:String,json:{write:!0}})],a.prototype,"name",void 0);c.__decorate([y.enumeration(l.kebabDict)],
a.prototype,"type",void 0);return a=f=c.__decorate([r.subclass("esri.webdoc.applicationProperties.SearchLayerField")],a)})},"esri/webdoc/applicationProperties/SearchTable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ./SearchTableField".split(" "),function(m,c,
a,e,g,p,B,y,r,l){var f;a=f=function(w){function k(n){n=w.call(this,n)||this;n.field=null;n.id=null;return n}m._inheritsLoose(k,w);k.prototype.clone=function(){return new f(e.clone({field:this.field,id:this.id}))};return k}(a.JSONSupport);c.__decorate([g.property({type:l,json:{write:{isRequired:!0}}})],a.prototype,"field",void 0);c.__decorate([g.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"id",void 0);return a=f=c.__decorate([r.subclass("esri.webdoc.applicationProperties.SearchTable")],
a)})},"esri/webdoc/applicationProperties/SearchTableField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),function(m,c,a,e,g,p,B,y,r,l){var f;a=f=function(w){function k(n){n=w.call(this,
n)||this;n.exactMatch=!1;n.name=null;n.type=null;return n}m._inheritsLoose(k,w);k.prototype.clone=function(){return new f({exactMatch:this.exactMatch,type:this.type,name:this.name})};return k}(a.JSONSupport);c.__decorate([e.property({type:Boolean,json:{write:!0}})],a.prototype,"exactMatch",void 0);c.__decorate([e.property({type:String,json:{write:!0}})],a.prototype,"name",void 0);c.__decorate([y.enumeration(l.kebabDict)],a.prototype,"type",void 0);return a=f=c.__decorate([r.subclass("esri.webdoc.applicationProperties.SearchTableField")],
a)})},"esri/webmap/Bookmark":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Viewpoint ../core/deprecate ../core/Error ../core/Identifiable ../core/JSONSupport ../core/lang ../core/Logger ../core/maybe ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/has ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/accessorSupport/ensureType ../geometry/Extent ../webdoc/support/Thumbnail".split(" "),
function(m,c,a,e,g,p,B,y,r,l,f,w,k,n,t,A,D,E,C){var u;const v=r.getLogger("esri.webmap.Bookmark");p=u=function(z){function I(G){G=z.call(this,G)||this;G.name=null;G.thumbnail=new C;return G}m._inheritsLoose(I,z);var F=I.prototype;F.castThumbnail=function(G){return"string"===typeof G?new C({url:G}):D.ensureType(C,G)};F.readViewpoint=function(G,L){const {extent:N,viewpoint:P}=L;return a.fromJSON(P||{targetGeometry:N})};F.writeViewpoint=function(G,L,N,P){if(G){var {targetGeometry:T}=G;l.isSome(T)&&"extent"!==
T.type?null!=P&&P.messages?P.messages.push(new g("property:unsupported","Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.")):v.error("Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent."):L[N]=G.toJSON()}};F.clone=function(){return new u(y.clone({name:this.name,thumbnail:this.thumbnail,viewpoint:this.viewpoint}))};m._createClass(I,[{key:"extent",set:function(G){e.deprecatedProperty(v,"extent",{replacement:"viewpoint",
version:"4.17"});this._set("viewpoint",new a({targetGeometry:G.clone()}));this._set("extent",G)}},{key:"viewpoint",set:function(G){const {targetGeometry:L,scale:N}=G;l.isSome(L)&&("extent"===L.type?this._set("extent",L.clone()):"point"===L.type&&l.isNone(N)&&v.warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",G));this._set("viewpoint",G)}}]);return I}(p.IdentifiableMixin(B.JSONSupport));c.__decorate([f.property({type:E,nonNullable:!0,json:{read:!1,write:{isRequired:!0}}})],
p.prototype,"extent",null);c.__decorate([f.property({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],p.prototype,"name",void 0);c.__decorate([f.property({type:C,json:{write:{overridePolicy(z){return{enabled:!(!z||!z.url)}}}}})],p.prototype,"thumbnail",void 0);c.__decorate([w.cast("thumbnail")],p.prototype,"castThumbnail",null);c.__decorate([f.property({type:a,nonNullable:!0,json:{write:!0}})],p.prototype,"viewpoint",null);c.__decorate([n.reader("viewpoint",["extent","viewpoint"])],p.prototype,
"readViewpoint",null);c.__decorate([A.writer("viewpoint")],p.prototype,"writeViewpoint",null);return p=u=c.__decorate([t.subclass("esri.webmap.Bookmark")],p)})},"esri/webdoc/support/Thumbnail":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),function(m,c,a,e,g,p,B,y){var r;
a=r=function(l){function f(){var k=l.apply(this,arguments)||this;k.url="";return k}m._inheritsLoose(f,l);var w=f.prototype;w.destroy=function(){this.url=""};w.clone=function(){return new r({url:this.url})};return f}(a.JSONSupport);c.__decorate([e.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"url",void 0);return a=r=c.__decorate([y.subclass("esri.webdoc.support.Thumbnail")],a)})},"esri/webmap/InitialViewProperties":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Viewpoint ../core/Accessor ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/subclass ../geometry/SpatialReference ../webdoc/RangeInfo ./background/ColorBackground".split(" "),
function(m,c,a,e,g,p,B,y,r,l,f,w,k){var n;e=n=function(t){function A(D){D=t.call(this,D)||this;D.background=null;D.rangeInfo=null;D.spatialReference=null;D.viewpoint=null;return D}m._inheritsLoose(A,t);A.prototype.clone=function(){return new n(g.clone({background:this.background,rangeInfo:this.rangeInfo,spatialReference:this.spatialReference,viewpoint:this.viewpoint}))};return A}(e);c.__decorate([p.property({type:k})],e.prototype,"background",void 0);c.__decorate([p.property({type:w})],e.prototype,
"rangeInfo",void 0);c.__decorate([p.property({type:f})],e.prototype,"spatialReference",void 0);c.__decorate([p.property({type:a})],e.prototype,"viewpoint",void 0);return e=n=c.__decorate([l.subclass("esri.webmap.InitialViewProperties")],e)})},"esri/webmap/background/ColorBackground":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(m,c,a,e,g,p,B,y,r,l){var f;e=f=function(w){function k(n){n=w.call(this,n)||this;n.color=new a([0,0,0,1]);return n}m._inheritsLoose(k,w);k.prototype.clone=function(){return new f(g.clone({color:this.color}))};return k}(e.JSONSupport);c.__decorate([p.property({type:a,json:{write:!0}})],e.prototype,"color",void 0);return e=f=c.__decorate([l.subclass("esri.webmap.background.ColorBackground")],e)})},"esri/webmap/Version":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","../core/Version"],
function(m,c,a){a=function(e){function g(p,B){return e.call(this,p,B,"webmap")||this}c._inheritsLoose(g,e);return g}(a.Version);m.Version=a;m["default"]=a;Object.defineProperty(m,"__esModule",{value:!0})})},"esri/core/Version":function(){define(["exports","./Error"],function(m,c){let a=function(){function e(p,B,y=""){this.major=p;this.minor=B;this._context=y}var g=e.prototype;g.lessThan=function(p,B){return this.major<p||p===this.major&&this.minor<B};g.since=function(p,B){return!this.lessThan(p,B)};
g.validate=function(p){if(this.major!==p.major)throw new c((this._context&&this._context+":")+"unsupported-version",`Required major ${this._context&&this._context+" "}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:p});};g.clone=function(){return new e(this.major,this.minor,this._context)};e.parse=function(p,B=""){const [y,r]=p.split(".");var l=/^\s*\d+\s*$/;if(!y||!y.match||!y.match(l))throw new c((B&&B+":")+"invalid-version","Expected major version to be a number, but got '${version}'",
{version:p});if(!r||!r.match||!r.match(l))throw new c((B&&B+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:p});p=parseInt(y,10);l=parseInt(r,10);return new e(p,l,B)};return e}();m.Version=a;Object.defineProperty(m,"__esModule",{value:!0})})},"*noref":1}});
define("require ./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./kernel ./Map ./Viewpoint ./core/arrayUtils ./core/Collection ./core/Error ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/MultiOriginJSONSupport ./core/Promise ./core/promiseUtils ./core/urlUtils ./core/watchUtils ./core/accessorSupport/decorators/property ./core/has ./core/accessorSupport/ensureType ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./core/accessorSupport/originUtils ./core/accessorSupport/read ./geometry/SpatialReference ./geometry/support/webMercatorUtils ./layers/support/arcgisLayerUrl ./networks/UtilityNetwork ./portal/Portal ./portal/PortalItem ./portal/support/portalItemUtils ./rest/support/ProjectParameters ./support/basemapUtils ./support/MapFloorInfo ./webdoc/RangeInfo ./webdoc/Widgets ./webdoc/support/thumbnailUtils ./webdoc/support/writeUtils ./webmap/ApplicationProperties ./webmap/Bookmark ./webmap/InitialViewProperties ./webmap/Version ./webmap/background/ColorBackground".split(" "),function(m,
c,a,e,g,p,B,y,r,l,f,w,k,n,t,A,D,E,C,u,v,z,I,F,G,L,N,P,T,fa,U,Z,K,aa,ba,ha,ca,ia,ja,ka,la,ma,V,Q,da){const W=new Q.Version(2,22),ea=y.ofType(ma);y=y.ofType(fa);const X=w.getLogger("esri.WebMap"),R=new Map;R.set("image/jpeg","jpeg");R.set("image/jpg","jpg");R.set("image/png","png");R.set("image/gif","gif");const na="NatGeo_World_Map Ocean_Basemap USA_Topo_Maps World_Imagery World_Street_Map World_Terrain_Base World_Topo_Map World_Hillshade Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Reference/World_Boundaries_and_Places Reference/World_Reference_Overlay Reference/World_Transportation".split(" ").map(O=>
O.toLowerCase());g=function(O){function S(b){b=O.call(this,b)||this;b.applicationProperties=null;b.bookmarks=new ea;b.floorInfo=null;b.initialViewProperties=new V;b.portalItem=null;b.presentation=null;b.sourceVersion=null;b.widgets=null;b.utilityNetworks=null;b.authoringApp=b.authoringAppVersion=null;b._isAuthoringAppSetByUser=b._isAuthoringAppVersionSetByUser=!1;return b}c._inheritsLoose(S,O);var x=S.prototype;x.destroy=function(){const b=this.portalItem;this.portalItem=null;null==b?void 0:b.destroy()};
x.initialize=function(){this.when().catch(b=>{X.error("#load()","Failed to load web map",b)});if(this.resourceInfo){let b;try{b=this._validateJSON(this.resourceInfo)}catch(d){this.addResolvingPromise(Promise.reject(d));return}this.read(b)}};x.writeAuthoringApp=function(b,d){d.authoringApp=b&&this._isAuthoringAppSetByUser?b:"ArcGIS API for JavaScript"};x.writeAuthoringAppVersion=function(b,d){d.authoringAppVersion=b&&this._isAuthoringAppVersionSetByUser?b:e.version};x.readInitialViewProperties=function(b,
d){var h;b=new V;d.background&&(b.background=da.fromJSON(d.background));const q=null==(h=d.initialState)?void 0:h.viewpoint;q&&(q.rotation&&Q.Version.parse(d.version||"","webmap").lessThan(2,20)&&"ArcGIS Pro"===d.authoringApp&&(q.rotation*=-1),b.viewpoint=p.fromJSON(q));d.mapRangeInfo&&(b.rangeInfo=ca.fromJSON(d.mapRangeInfo));d.spatialReference&&(b.spatialReference=N.fromJSON(d.spatialReference));return b};x.writeInitialViewProperties=function(b,d,h,q){b&&((h=b.background)&&h.color&&(d.background=
h.write(null,q)),b.viewpoint&&(d.initialState={viewpoint:b.viewpoint.write(null,q)}),b.rangeInfo&&(d.mapRangeInfo=b.rangeInfo.toJSON(q)),b.spatialReference&&(d.spatialReference=b.spatialReference.write(null,q)))};x.writeLayers=function(b,d,h,q){d[h]=this._writeLayers(b,q,"operational-layers")};x.readSourceVersion=function(b,d){const [h,q]=d.version.split(".");return new Q.Version(parseInt(h,10),parseInt(q,10))};x.writeSourceVersion=function(b,d,h){d[h]=`${W.major}.${W.minor}`};x.writeTables=function(b,
d,h,q){b=this._writeLayers(b,q,"tables");b.length&&(d[h]=b)};x.load=function(b){this.addResolvingPromise(this._loadFromSource());return Promise.resolve(this)};x.loadAll=function(){return f.loadAll(this,b=>{b(this.ground,this.basemap,this.layers,this.tables)})};x.read=function(b,d){d={...d,origin:"web-map"};const h=this._getAuthoringPropsState();L.readLoadable(this,b,q=>O.prototype.read.call(this,b,q),d);this._restoreAuthoringPropsFromState(h)};x.write=function(b,d){if("loaded"!==this.loadStatus)throw b=
new r("webmap:not-loaded","Web map must be loaded before it can be serialized"),X.error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),b;this._removeDanglingLayerRefs();d={...d,origin:"web-map",restrictedWebMapWriting:!0,webmap:this};return O.prototype.write.call(this,b,d)};x.save=function(){var b=c._asyncToGenerator(function*(d){d=d||{};this._validateItem();yield this._updateFromPromise;yield this.load();yield this._loadLayerContainers();yield this._beforeSave();
this._validateMap();const h=this.portalItem,q={origin:"web-map",messages:[],writtenProperties:[],url:h.itemUrl&&D.urlToObject(h.itemUrl),portal:h.portal||U.getDefault()},H=this.write(null,q);this._validateJSONForWriting(q,d);yield this._updateItemProperties(h);yield this._updateItem(h,H,q);yield this._updateItemThumbnail();return h});return function(d){return b.apply(this,arguments)}}();x.saveAs=function(){var b=c._asyncToGenerator(function*(d,h){h=h||{};d=this._getPortalItem(d);yield this._updateFromPromise;
yield this.load();yield this._loadLayerContainers();yield this._beforeSave();this._validateMap();const q={origin:"web-map",messages:[],writtenProperties:[],url:null,portal:d.portal},H=this.write(null,q);this._validateJSONForWriting(q,h);yield this._updateItemPropertiesForSaveAs(d);const J=this._getThumbnailState();yield this._createItem(d,H,q,h);this._restoreThumbnailFromState(J);yield this._updateItemThumbnail();return d});return function(d,h){return b.apply(this,arguments)}}();x.updateFrom=function(){var b=
c._asyncToGenerator(function*(d,h){this._updateFromPromise=d=this._updateFromInternal(d,h);yield d;d===this._updateFromPromise&&(this._updateFromPromise=null)});return function(d,h){return b.apply(this,arguments)}}();x.getLayerJSONFromResourceInfo=function(b){var d,h,q,H;const J=this.resourceInfo;return this._collectAllLayersJSON(B.flatten([null==J?void 0:null==(d=J.baseMap)?void 0:d.baseMapLayers,null==J?void 0:J.operationalLayers,null==(h=this.basemap)?void 0:null==(q=h.resourceInfo)?void 0:null==
(H=q.data)?void 0:H.baseMapLayers])).find(M=>M.id===b.id)};x._collectAllLayersJSON=function(b){return b.reduce((d,h)=>{d.push(h);"GroupLayer"===h.layerType&&(d=d.concat(this._collectAllLayersJSON(h.layers||[])));return d},[])};x._writeLayers=function(b,d,h){d={...d,layerContainerType:h};return b.map(q=>k.unwrap(ka.getLayerJSON(q,"tables"===h?null:this.getLayerJSONFromResourceInfo(q),d))).filter(Boolean).toArray()};x._loadFromSource=function(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo,
{origin:"web-map"}):this.portalItem&&this.portalItem.id?this._loadFromItem(this.portalItem):Promise.resolve(null)};x._loadFromItem=function(b){return b.load().catch(d=>{throw new r("webmap:load-portal-item","Failed to load portal item",{error:d});}).then(()=>{if("Web Map"!==b.type)throw new r("webmap:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Map'",{type:b.type});}).then(()=>b.fetchData()).then(d=>{this.resourceInfo=d;return this._readAndLoadFromJSON(d,{origin:"web-map",
portal:b.portal||U.getDefault()})}).then(()=>this._computeInitialViewpoint())};x._readAndLoadFromJSON=function(b,d){b=this._validateJSON(b);this.read(b,d);return this._loadFromJSON(b,d)};x._validateJSON=function(b){const d=Q.Version.parse(b.version||"","webmap");W.validate(d);b.version=`${d.major}.${d.minor}`;return b};x._loadFromJSON=function(b,d){const h={context:{...d,layerContainerType:"operational-layers"}};this.portalItem&&(h.context.portal=this.portalItem.portal||U.getDefault());return(new Promise(function(q,
H){m(["./layers/support/layersCreator"],q,H)})).then(({populateOperationalLayers:q})=>{const H=[];var J=b.operationalLayers;J&&J.length&&H.push(q(this.layers,J,h));J={...h,context:{...h.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"};const M=b.tables;M&&M.length&&H.push(q(this.tables,M,J));return A.eachAlways(H).then(()=>{})})};x._computeInitialViewpoint=function(){var b=c._asyncToGenerator(function*(){var d,h;let q=this.initialViewProperties;!(null==(d=q)?0:null==(h=d.viewpoint)?
0:h.targetGeometry)&&(d=yield this._getExtentFromItem())&&(q=q?q.clone():new V,q.viewpoint=new p,q.viewpoint.targetGeometry=d,this.initialViewProperties=q)});return function(){return b.apply(this,arguments)}}();x._getExtentFromItem=function(){var b=c._asyncToGenerator(function*(){var d,h;const q=null==(d=this.initialViewProperties)?void 0:d.spatialReference,H=null==(h=this.portalItem)?void 0:h.extent;return q&&H?q.isWGS84?H.clone():q.isWebMercator?P.geographicToWebMercator(H):(yield new Promise(function(J,
M){m(["./portal/support/geometryServiceUtils"],J,M)})).create(this.portalItem).then(J=>{const M=new aa;M.geometries=[H];M.outSpatialReference=q;return J.project(M)}).then(J=>J[0]).catch(J=>{X.error("Error projecting item's extent:",J);return null}):null});return function(){return b.apply(this,arguments)}}();x._removeDanglingLayerRefs=function(){var b=this.applicationProperties,d=b&&b.viewing&&b.viewing.search;const h=q=>!!this.allLayers.find(H=>H.id===q);d&&d.layers&&(d.layers=d.layers.filter(q=>
h(q.id)));d&&d.tables&&(d.tables=d.tables.filter(q=>!!this.tables.find(H=>H.id===q.id)));(d=b&&b.editing&&b.editing.locationTracking)&&d.info&&!h(d.info.layerId)&&(b.editing=null);(b=this.presentation&&this.presentation.slides)&&b.forEach(q=>{q.visibleLayers&&(q.visibleLayers=q.visibleLayers.filter(H=>h(H.id)))})};x._validateMap=function(){if(!this.basemap||!this.basemap.baseLayers.length)throw new r("webmap:save","Map does not have a valid basemap with a base layer.");};x._validateItem=function(){if(!this.portalItem)throw X.error("save: requires the portalItem property to be set"),
new r("webmap:portal-item-not-set","Portal item to save to has not been set on the WebMap");this._validateItemType(this.portalItem)};x._validateItemType=function(b){if("Web Map"!==b.type)throw new r("webmap:portal-item-wrong-type",'Portal item needs to have type "Web Map"');};x._loadLayerContainers=function(){const b=[];this.basemap&&b.push(this.basemap.load());this.ground&&b.push(this.ground.load());return A.eachAlways(b).then(()=>{})};x._beforeSave=function(){var b=c._asyncToGenerator(function*(){const d=
[];for(const h of this.allLayers)if("beforeSave"in h&&"function"===typeof h.beforeSave){const q=h.beforeSave();q&&d.push(q)}yield A.eachAlways(d)});return function(){return b.apply(this,arguments)}}();x._loadAllLayers=function(){const b=this._getAllLayersAndTables().map(d=>d.load());return A.eachAlways(b).then(()=>{})};x._getAllLayersAndTables=function(){return this.allLayers.concat(this.allTables)};x._validateJSONForWriting=function(b,d){b=b.messages.filter(h=>"error"===h.type).map(h=>new r(h.name,
h.message,h.details));d.ignoreUnsupported&&(b=b.filter(h=>"layer:unsupported"!==h.name&&"symbol:unsupported"!==h.name&&"symbol-layer:unsupported"!==h.name&&"property:unsupported"!==h.name&&"url:unsupported"!==h.name));if(0<b.length)throw new r("webmap:save","Failed to save webmap due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:b});};x._updateItemProperties=function(){var b=c._asyncToGenerator(function*(d){d.extent=yield this._getWGS84Extent(this.initialViewProperties.viewpoint.targetGeometry);
yield this._updateTypeKeywords(d)});return function(d){return b.apply(this,arguments)}}();x._updateItemPropertiesForSaveAs=function(){var b=c._asyncToGenerator(function*(d){K.removeTypeKeyword(d,"CollectorDisabled");K.removeTypeKeyword(d,"OfflineDisabled");K.removeTypeKeyword(d,"Workforce Project");K.removeTypeKeyword(d,"Workforce Worker");K.removeTypeKeyword(d,"Workforce Dispatcher");K.removeTypeKeyword(d,"Offline Map Areas");K.removeTypeKeyword(d,"FieldMapsDisabled");yield this._updateItemProperties(d)});
return function(d){return b.apply(this,arguments)}}();x._getWGS84Extent=function(){var b=c._asyncToGenerator(function*(d){d=d.clone().normalize();let h;if(1<d.length)for(const q of d)h?q.width>h.width&&(h=q):h=q;else h=d[0];return this._projectToWGS84(h)});return function(d){return b.apply(this,arguments)}}();x._projectToWGS84=function(){var b=c._asyncToGenerator(function*(d){var h=d.spatialReference;if(h.isWGS84)return d.clone();if(h.isWebMercator)return P.webMercatorToGeographic(d);h=yield(yield new Promise(function(H,
J){m(["./portal/support/geometryServiceUtils"],H,J)})).create(this.portalItem);const q=new aa;q.geometries=[d];q.outSpatialReference=N.WGS84;return(yield h.project(q))[0]});return function(d){return b.apply(this,arguments)}}();x._updateTypeKeywords=function(){var b=c._asyncToGenerator(function*(d){K.addTypeKeyword(d,"ArcGIS API for JavaScript");yield this._loadAllLayers();this._evalCollectorKeyword(d);this._evalDataEditingKeyword(d);this._evalOfflineKeyword(d);this._evalDeveloperBasemapKeyword(d);
d.typeKeywords&&(d.typeKeywords=d.typeKeywords.filter((h,q,H)=>H.indexOf(h)===q))});return function(d){return b.apply(this,arguments)}}();x._evalCollectorKeyword=function(b){K.hasTypeKeyword(b,"CollectorDisabled")||K.hasTypeKeyword(b,"Workforce Project")||K.hasTypeKeyword(b,"Workforce Worker")||K.hasTypeKeyword(b,"Workforce Dispatcher")||!this._hasEditableFeatureLayer()?K.removeTypeKeyword(b,"Collector"):K.addTypeKeyword(b,"Collector")};x._evalDataEditingKeyword=function(b){this._hasEditableFeatureLayer()?
K.addTypeKeyword(b,"Data Editing"):K.removeTypeKeyword(b,"Data Editing")};x._evalOfflineKeyword=function(b){!K.hasTypeKeyword(b,"OfflineDisabled")&&this._isOfflineCapableMap()?K.addTypeKeyword(b,"Offline"):K.removeTypeKeyword(b,"Offline")};x._evalDeveloperBasemapKeyword=function(b){ba.hasDeveloperBasemapLayer(this.basemap)?K.addTypeKeyword(b,"DeveloperBasemap"):K.removeTypeKeyword(b,"DeveloperBasemap")};x._hasEditableFeatureLayer=function(){return this._getAllLayersAndTables().some(b=>b.loaded&&this._isFeatureServiceLayer(b)&&
b.capabilities.operations.supportsEditing&&b.editingEnabled)};x._isFeatureServiceLayer=function(b){return!("feature"!==b.type||!b.source||"feature-layer"!==b.source.type)};x._isOfflineCapableMap=function(){return this._getAllLayersAndTables().filter(b=>"group"!==b.type).every(b=>b.loaded&&this._isOfflineCapableLayer(b))};x._isOfflineCapableLayer=function(b){return this._isFeatureServiceLayer(b)&&b.capabilities.operations.supportsSync||("tile"===b.type||"vector-tile"===b.type)&&(b.capabilities.operations.supportsExportTiles||
this._isExportableAGOLTileLayer(b)||ba.isDeveloperBasemapLayer(b))&&b.spatialReference.equals(this.initialViewProperties.spatialReference)};x._isExportableAGOLTileLayer=function(b){return"tile"===b.type?T.isServerOrServicesAGOLUrl(b.url)&&na.some(d=>-1<b.url.toLowerCase().indexOf("/"+d+"/")):!1};x._updateItem=function(){var b=c._asyncToGenerator(function*(d,h,q){yield d.update({data:h});this._syncUpInstanceWithItem(d,h,q)});return function(d,h,q){return b.apply(this,arguments)}}();x._createItem=function(){var b=
c._asyncToGenerator(function*(d,h,q,H){const J=this.portalItem,M=!!(J&&J.id&&J.portal.user),Y=d.portal;yield Y._signIn();if(!(yield this._canCopyItem(J,M,Y)))throw new r("webmap:save-as-copy-not-allowed","Owner of this map does not allow others to save a copy");yield Y.user.addItem({item:d,folder:H.folder,data:h});this.portalItem=d;this._syncUpInstanceWithItem(d,h,q)});return function(d,h,q,H){return b.apply(this,arguments)}}();x._canCopyItem=function(){var b=c._asyncToGenerator(function*(d,h,q){if(k.isSome(d)&&
d.id&&d.typeKeywords&&-1<d.typeKeywords.indexOf("useOnly")){if(d.portal.portalHostname!==q.portalHostname)return!1;h||(yield d.reload());return"admin"===d.itemControl||"update"===d.itemControl}return!0});return function(d,h,q){return b.apply(this,arguments)}}();x._syncUpInstanceWithItem=function(b,d,h){n.MultiOriginJSONSupport.prototype.read.call(this,{version:d.version,authoringApp:d.authoringApp,authoringAppVersion:d.authoringAppVersion},{origin:"web-map",ignoreDefaults:!0,url:b.itemUrl&&D.urlToObject(b.itemUrl)});
G.updateOrigins(h);this.resourceInfo=d};x._updateItemThumbnail=function(){var b=c._asyncToGenerator(function*(){this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(yield this.portalItem.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename}),this._clearThumbnailOverride())});return function(){return b.apply(this,arguments)}}();x._getPortalItem=function(b){b=Z.from(b);b.id&&(b=b.clone(),b.id=null);b.type||(b.type="Web Map");b.portal||(b.portal=U.getDefault());this._validateItemType(b);
return b};x._updateFromInternal=function(){var b=c._asyncToGenerator(function*(d,h){h=h||{};yield E.whenTrueOnce(d,"ready");this._updateInitialViewProperties(d,h);yield this._updateThumbnailUrl(d,h)});return function(d,h){return b.apply(this,arguments)}}();x._updateInitialViewProperties=function(b,d){if(!d.backgroundExcluded){var h;this.initialViewProperties.background=null==(h=b.background)?void 0:h.clone()}this.initialViewProperties.spatialReference=b.spatialReference.clone();d.viewpointExcluded||
(this.initialViewProperties.viewpoint=new p({rotation:b.rotation,scale:d.scalePreserved?b.scale:null,targetGeometry:this._getViewExtent(b)}));if(!d.widgetsExcluded)for(const q of b.persistableViewModels)q.updateWebDocument(this)};x._getViewExtent=function(b){const d=b.center.clone().normalize();b=b.extent.clone();const h=b.width/2;b.xmin=d.x-h;b.xmax=d.x+h;return b};x._updateThumbnailUrl=function(){var b=c._asyncToGenerator(function*(d,h){h.thumbnailExcluded||(h=ja.getOptimalThumbnailSize(d,h.thumbnailSize),
d=yield d.takeScreenshot({format:"png",width:h.width,height:h.height}),this._setAutoGeneratedThumbnail(d.dataUrl))});return function(d,h){return b.apply(this,arguments)}}();x._setAutoGeneratedThumbnail=function(b){this.thumbnailUrl=b;this._thumbnailFilename=null};x._clearThumbnailOverride=function(){this._clearOverride("thumbnailUrl");this.clear("thumbnailUrl","user");this._thumbnailFilename=null};x._generateCustomThumbnailFilename=function(b){if(D.isDataProtocol(b)){b=(b=(b=D.dataComponents(b))&&
b.mediaType)&&R.get(b.toLowerCase())||null;const d=`thumbnail${Date.now()}`;return b?`${d}.${b}`:d}return null};x._getThumbnailState=function(){let b=this.thumbnailUrl;b&&(b=this._isOverridden("thumbnailUrl")?b:D.addQueryParameter(b,"w","8192"));return{thumbnailUrl:b,filename:this._thumbnailFilename}};x._restoreThumbnailFromState=function(b){this.thumbnailUrl=b.thumbnailUrl;this._thumbnailFilename=b.filename};x._getAuthoringPropsState=function(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,
isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}};x._restoreAuthoringPropsFromState=function(b){b.isAuthoringAppSetByUser?this.authoringApp=b.authoringApp:this._isAuthoringAppSetByUser=!1;b.isAuthoringAppVersionSetByUser?this.authoringAppVersion=b.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1};S.fromJSON=function(b){if(!b)throw new r("webmap:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:b})};
c._createClass(S,[{key:"authoringApp",set:function(b){this._isAuthoringAppSetByUser=!0;this._set("authoringApp",b)}},{key:"authoringAppVersion",set:function(b){this._isAuthoringAppVersionSetByUser=!0;this._set("authoringAppVersion",b)}},{key:"thumbnailUrl",get:function(){return this.portalItem&&this.portalItem.thumbnailUrl||null},set:function(b){b?(this._override("thumbnailUrl",b),this._thumbnailFilename=this._generateCustomThumbnailFilename(b)):this._clearThumbnailOverride()}}]);return S}(n.MultiOriginJSONMixin(l.LoadableMixin(t.EsriPromiseMixin(g))));
g.VERSION=W;a.__decorate([C.property({type:la,json:{write:!0}})],g.prototype,"applicationProperties",void 0);a.__decorate([C.property({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],g.prototype,"authoringApp",null);a.__decorate([F.writer("authoringApp")],g.prototype,"writeAuthoringApp",null);a.__decorate([C.property({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],g.prototype,"authoringAppVersion",null);a.__decorate([F.writer("authoringAppVersion")],g.prototype,"writeAuthoringAppVersion",
null);a.__decorate([C.property({json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],g.prototype,"basemap",void 0);a.__decorate([C.property({type:ea,json:{write:{overridePolicy(O){return{enabled:!!(O&&0<O.length),ignoreOrigin:!0}}}}})],g.prototype,"bookmarks",void 0);a.__decorate([C.property({type:ha,json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],g.prototype,"floorInfo",void 0);a.__decorate([C.property({type:V,nonNullable:!0,json:{read:{source:["background","initialState.viewpoint",
"mapRangeInfo","spatialReference"]},write:{ignoreOrigin:!0,target:{background:{type:da},"initialState.viewpoint":{type:p},mapRangeInfo:{type:ca},spatialReference:{type:N}}}}})],g.prototype,"initialViewProperties",void 0);a.__decorate([z.reader("initialViewProperties")],g.prototype,"readInitialViewProperties",null);a.__decorate([F.writer("initialViewProperties")],g.prototype,"writeInitialViewProperties",null);a.__decorate([C.property({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],
g.prototype,"layers",void 0);a.__decorate([F.writer("layers")],g.prototype,"writeLayers",null);a.__decorate([C.property({type:Z})],g.prototype,"portalItem",void 0);a.__decorate([C.property({json:{write:!0}})],g.prototype,"presentation",void 0);a.__decorate([C.property()],g.prototype,"resourceInfo",void 0);a.__decorate([C.property({readOnly:!0,type:Q.Version,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],g.prototype,"sourceVersion",void 0);a.__decorate([z.reader("sourceVersion")],
g.prototype,"readSourceVersion",null);a.__decorate([F.writer("sourceVersion")],g.prototype,"writeSourceVersion",null);a.__decorate([C.property({json:{read:!1,write:{ignoreOrigin:!0}}})],g.prototype,"tables",void 0);a.__decorate([F.writer("tables")],g.prototype,"writeTables",null);a.__decorate([C.property()],g.prototype,"thumbnailUrl",null);a.__decorate([C.property({type:ia,json:{write:!0}})],g.prototype,"widgets",void 0);a.__decorate([C.property({type:y,json:{read:!0,write:!0}})],g.prototype,"utilityNetworks",
void 0);return g=a.__decorate([I.subclass("esri.WebMap")],g)});