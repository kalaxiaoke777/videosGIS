// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.21/esri/copyright.txt for details.
//>>built
require({cache:{"esri/geometry/support/scaleUtils":function(){define(["exports","../../core/unitUtils"],function(p,n){function c(d,g){g=n.getMetersPerUnitForSR(g);return d/(g*n.inchesPerMeter*96)}p.getExtentForScale=function(d,g){const e=d.extent;d=d.width;g=c(g,e.spatialReference);return e.clone().expand(g*d/e.width)};p.getResolutionForScale=c;p.getScale=function(d,g){g=g||d.extent;d=d.width;const e=n.getMetersPerUnitForSR(g&&g.spatialReference);return g&&d?g.width/d*e*n.inchesPerMeter*96:0};p.getScaleForResolution=
function(d,g){g=n.getMetersPerUnitForSR(g);return d*g*n.inchesPerMeter*96};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/mixins/ArcGISMapService":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../request ../../core/promiseUtils ../../core/urlUtils ../../core/Version ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/SpatialReference ../support/commonProperties".split(" "),
function(p,n,c,d,g,e,u,F,ba,S,J,ha,W,R,ea,X){p.ArcGISMapService=D=>{D=function(P){function h(){var t=P.apply(this,arguments)||this;t.capabilities=void 0;t.copyright=null;t.fullExtent=null;t.legendEnabled=!0;t.spatialReference=null;t.version=null;return t}n._inheritsLoose(h,P);var w=h.prototype;w.readCapabilities=function(t,l){var y=l.capabilities&&l.capabilities.split(",").map(M=>M.toLowerCase().trim());if(!y)return{operations:{supportsQuery:!1,supportsExportMap:!1,supportsExportTiles:!1,supportsTileMap:!1},
exportMap:null,exportTiles:null};var m=this.type;t=-1!==y.indexOf("query");const x=-1!==y.indexOf("map"),z=!!l.exportTilesAllowed;y=-1!==y.indexOf("tilemap");const q="tile"!==m&&!!l.supportsDynamicLayers,N="tile"!==m&&(!l.tileInfo||q),O="tile"!==m&&(!l.tileInfo||q);m="tile"!==m;const fa=l.cimVersion?u.Version.parse(l.cimVersion).since(1,4):!1;return{operations:{supportsQuery:t,supportsExportMap:x,supportsExportTiles:z,supportsTileMap:y},exportMap:x?{supportsArcadeExpressionForLabeling:fa,supportsSublayersChanges:m,
supportsDynamicLayers:q,supportsSublayerVisibility:N,supportsSublayerDefinitionExpression:O}:null,exportTiles:z?{maxExportTilesCount:+l.maxExportTilesCount}:null}};w.readVersion=function(t,l){(t=l.currentVersion)||(t=l.hasOwnProperty("capabilities")||l.hasOwnProperty("tables")?10:l.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3);return t};w.fetchSublayerInfo=function(){var t=n._asyncToGenerator(function*(l,y){yield this.fetchAllLayersAndTables(y);return this._allLayersAndTablesMap.get(l)});
return function(l,y){return t.apply(this,arguments)}}();w.fetchAllLayersAndTables=function(){var t=n._asyncToGenerator(function*(l){yield this.load(l);this._allLayersAndTablesPromise||(this._allLayersAndTablesPromise=d(e.urlToObject(this.url).path+"/layers",{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey}}).then(m=>{this._allLayersAndTablesMap=new Map;for(const x of m.data.layers)this._allLayersAndTablesMap.set(x.id,x);return{result:m.data}},m=>({error:m})));const y=
yield this._allLayersAndTablesPromise;g.throwIfAborted(l);if("result"in y)return y.result;throw y.error;});return function(l){return t.apply(this,arguments)}}();return h}(D);c.__decorate([F.property({readOnly:!0})],D.prototype,"capabilities",void 0);c.__decorate([ha.reader("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],D.prototype,"readCapabilities",null);c.__decorate([F.property({json:{read:{source:"copyrightText"}}})],D.prototype,
"copyright",void 0);c.__decorate([F.property({type:R})],D.prototype,"fullExtent",void 0);c.__decorate([F.property(X.id)],D.prototype,"id",void 0);c.__decorate([F.property({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],D.prototype,"legendEnabled",void 0);c.__decorate([F.property(X.popupEnabled)],D.prototype,"popupEnabled",void 0);c.__decorate([F.property({type:ea})],D.prototype,"spatialReference",void 0);c.__decorate([F.property()],
D.prototype,"version",void 0);c.__decorate([ha.reader("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],D.prototype,"readVersion",null);return D=c.__decorate([W.subclass("esri.layers.mixins.ArcGISMapService")],D)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/Version":function(){define(["exports","./Error"],function(p,n){let c=function(){function d(e,u,F=""){this.major=e;this.minor=u;this._context=F}var g=d.prototype;g.lessThan=function(e,u){return this.major<
e||e===this.major&&this.minor<u};g.since=function(e,u){return!this.lessThan(e,u)};g.validate=function(e){if(this.major!==e.major)throw new n((this._context&&this._context+":")+"unsupported-version",`Required major ${this._context&&this._context+" "}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e});};g.clone=function(){return new d(this.major,this.minor,this._context)};d.parse=function(e,u=""){const [F,ba]=e.split(".");var S=/^\s*\d+\s*$/;if(!F||!F.match||!F.match(S))throw new n((u&&
u+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!ba||!ba.match||!ba.match(S))throw new n((u&&u+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});e=parseInt(F,10);S=parseInt(ba,10);return new d(e,S,u)};return d}();p.Version=c;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/mixins/SublayersOwner":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/CollectionFlattener ../../core/Error ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/utils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/PropertyOrigin ../support/Sublayer ../support/sublayerUtils".split(" "),
function(p,n,c,d,g,e,u,F,ba,S,J,ha,W,R,ea){function X(w,t){const l=[],y={};if(!w)return l;w.forEach(m=>{const x=new R;x.read(m,t);y[x.id]=x;null!=m.parentLayerId&&-1!==m.parentLayerId?(m=y[m.parentLayerId],m.sublayers||(m.sublayers=[]),m.sublayers.unshift(x)):l.unshift(x)});return l}function D(w,t){w&&w.forEach(l=>{t(l);l.sublayers&&l.sublayers.length&&D(l.sublayers,t)})}const P=u.getLogger("esri.layers.TileLayer"),h=d.ofType(R);p.SublayersOwner=w=>{w=function(t){function l(...m){var x=t.call(this,
...m)||this;x.allSublayers=new g({getCollections:()=>[x.sublayers],getChildrenFunction(z){return z.sublayers}});x.sublayersSourceJSON={[2]:{},[3]:{},[4]:{},[5]:{}};x.handles.add(x.watch("sublayers",(z,q)=>x._handleSublayersChange(z,q),!0));return x}n._inheritsLoose(l,t);var y=l.prototype;y.readSublayers=function(m,x){if(x&&m){var {sublayersSourceJSON:z}=this,q=W.nameToId(x.origin);if(!(2>q||(z[q]={context:x,visibleLayers:m.visibleLayers||z[q].visibleLayers,layers:m.layers||z[q].layers},2<q))){this._set("serviceSublayers",
this.createSublayersForOrigin("service").sublayers);var {sublayers:N,origin:O}=this.createSublayersForOrigin("web-document");m=S.getProperties(this);m.setDefaultOrigin(O);this._set("sublayers",new h(N));m.setDefaultOrigin("user")}}};y.findSublayerById=function(m){return this.allSublayers.find(x=>x.id===m)};y.createServiceSublayers=function(){return this.createSublayersForOrigin("service").sublayers};y.createSublayersForOrigin=function(m){const x="web-document"===m?W.nameToId("web-map"):W.nameToId(m);
let z=2;m=this.sublayersSourceJSON[2].layers;let q=this.sublayersSourceJSON[2].context,N=null;var O=[3,4,5].filter(I=>I<=x);for(var fa of O)O=this.sublayersSourceJSON[fa],ea.isSublayerOverhaul(O.layers)&&(z=fa,m=O.layers,q=O.context,O.visibleLayers&&(N={visibleLayers:O.visibleLayers,context:O.context}));fa=[3,4,5].filter(I=>I>z&&I<=x);let M=null;for(var ia of fa){const {layers:I,visibleLayers:ja,context:ka}=this.sublayersSourceJSON[ia];I&&(M={layers:I,context:ka});ja&&(N={visibleLayers:ja,context:ka})}ia=
X(m,q);const ca=new Map,T=new Set;if(M)for(const I of M.layers)ca.set(I.id,I);if(N)for(const I of N.visibleLayers)T.add(I);D(ia,I=>{M&&I.read(ca.get(I.id),M.context);N&&I.read({defaultVisibility:T.has(I.id)},N.context)});return{origin:W.idToName(z),sublayers:new h({items:ia})}};y.read=function(m,x){t.prototype.read.call(this,m,x);this.readSublayers(m,x)};y._handleSublayersChange=function(m,x){x&&(x.forEach(z=>{z.parent=null;z.layer=null}),this.handles.remove("sublayers-owner"));m&&(m.forEach(z=>{z.parent=
this;z.layer=this}),this.handles.add([m.on("after-add",({item:z})=>{z.parent=this;z.layer=this}),m.on("after-remove",({item:z})=>{z.parent=null;z.layer=null})],"sublayers-owner"),"tile"===this.type&&this.handles.add(m.on("before-changes",z=>{P.error(new e("tilelayer:sublayers-non-modifiable","ISublayer can't be added, moved, or removed from the layer's sublayers",{layer:this}));z.preventDefault()}),"sublayers-owner"))};return l}(w);c.__decorate([F.property({readOnly:!0})],w.prototype,"allSublayers",
void 0);c.__decorate([F.property({readOnly:!0,type:d.ofType(R)})],w.prototype,"serviceSublayers",void 0);c.__decorate([F.property({value:null,type:h,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],w.prototype,"sublayers",void 0);c.__decorate([F.property({readOnly:!0})],w.prototype,"sublayersSourceJSON",void 0);return w=c.__decorate([ha.subclass("esri.layers.mixins.SublayersOwner")],w)};p.forEachSublayer=D;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/Sublayer":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../PopupTemplate ../../renderers/ClassBreaksRenderer ../../renderers/DictionaryRenderer ../../renderers/DotDensityRenderer ../../renderers/HeatmapRenderer ../../renderers/Renderer ../../renderers/SimpleRenderer ../../renderers/UniqueValueRenderer ../../renderers/support/jsonUtils ../../renderers/support/types ../../request ../../symbols ../../core/Collection ../../core/Error ../../core/HandleOwner ../../core/Identifiable ../../core/lang ../../core/Loadable ../../core/Logger ../../core/maybe ../../core/MultiOriginJSONSupport ../../core/urlUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/utils ../../core/accessorSupport/decorators/cast ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/ensureType ../../core/accessorSupport/PropertyOrigin ./FeatureType ./Field ./FieldsIndex ./LabelClass ./LayerFloorInfo ./source/DataLayerSource ./source/MapLayerSource ../../rest/support/Query ../../support/popupUtils ../../views/support/floorFilterUtils ../../geometry/Extent".split(" "),
function(p,n,c,d,g,e,u,F,ba,S,J,ha,W,R,ea,X,D,P,h,w,t,l,y,m,x,z,q,N,O,fa,M,ia,ca,T,I,ja,ka,na,Y,k,A,G,H,K,Z,U){function B(E){return E&&"esriSMS"===E.type}function aa(E,Q,r){var a;E=this.originIdOf(Q)>=I.nameToId(r.origin);return{ignoreOrigin:!0,allowNull:E,enabled:r?"map-image"===(null==(a=r.layer)?void 0:a.type)&&(r.writeSublayerStructure||E):!1}}function la(E,Q,r){var a;return{enabled:r?"tile"===(null==(a=r.layer)?void 0:a.type)&&this._isOverridden(Q):!1}}function V(E,Q,r){return{ignoreOrigin:!0,
enabled:r&&r.writeSublayerStructure||!1}}function pa(E,Q,r){return{ignoreOrigin:!0,enabled:r?r.writeSublayerStructure||this.originIdOf(Q)>=I.nameToId(r.origin):!1}}var qa;const ra=y.getLogger("esri.layers.support.Sublayer");let ta=0;const ma=new Set;ma.add("layer");ma.add("parent");ma.add("loaded");ma.add("loadStatus");ma.add("loadError");ma.add("loadWarnings");d=qa=function(E){function Q(a){a=E.call(this,a)||this;a.capabilities=void 0;a.fields=null;a.fullExtent=null;a.globalIdField=null;a.legendEnabled=
!0;a.objectIdField=null;a.popupEnabled=!0;a.popupTemplate=null;a.sourceJSON=null;a.title=null;a.typeIdField=null;a.types=null;return a}n._inheritsLoose(Q,E);var r=Q.prototype;r.load=function(){var a=n._asyncToGenerator(function*(b){var f=this;this.addResolvingPromise(n._asyncToGenerator(function*(){var v;if(!f.layer&&!f.url)throw new P("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:f});let C=null;if(!f.layer||2<f.originIdOf("url")||"data-layer"===(null==
(v=f.source)?void 0:v.type))C=(yield ea(f.url,{responseType:"json",query:{f:"json"},...b})).data;else{var L;v=f.id;"map-layer"===(null==(L=f.source)?void 0:L.type)&&(v=f.source.mapLayerId);C=yield f.layer.fetchSublayerInfo(v,b)}C&&(f.sourceJSON=C,f.read({layerDefinition:C},{origin:"service"}))})());return this});return function(b){return a.apply(this,arguments)}}();r.readCapabilities=function(a,b){b=b.layerDefinition||b;a=(a=b.capabilities||a)?a.toLowerCase().split(",").map(f=>f.trim()):[];return{exportMap:{supportsModification:!!b.canModifyLayer},
operations:{supportsQuery:-1!==a.indexOf("query")}}};r.readGlobalIdFieldFromService=function(a,b){b=b.layerDefinition||b;if(b.globalIdField)return b.globalIdField;if(b.fields)for(const f of b.fields)if("esriFieldTypeGlobalID"===f.type)return f.name};r.writeLabelingInfo=function(a,b,f,v){a&&a.length&&(b.layerDefinition={drawingInfo:{labelingInfo:a.map(C=>C.write({},v))}})};r.readMinScale=function(a,b){return b.minScale||b.layerDefinition&&b.layerDefinition.minScale||0};r.readMaxScale=function(a,b){return b.maxScale||
b.layerDefinition&&b.layerDefinition.maxScale||0};r.readObjectIdFieldFromService=function(a,b){b=b.layerDefinition||b;if(b.objectIdField)return b.objectIdField;if(b.fields)for(const f of b.fields)if("esriFieldTypeOID"===f.type)return f.name};r.readOpacity=function(a,b){a=b.layerDefinition;return 1-.01*(null!=a.transparency?a.transparency:a.drawingInfo.transparency)};r.writeOpacity=function(a,b,f,v){b.layerDefinition={drawingInfo:{transparency:100-100*a}}};r.writeParent=function(a,b){b.parentLayerId=
this.parent&&this.parent!==this.layer?T.ensureInteger(this.parent.id):-1};r.castSublayers=function(a){return T.ensureType(D.ofType(qa),a)};r.writeSublayers=function(a,b,f){this.get("sublayers.length")&&(b[f]=this.sublayers.map(v=>v.id).toArray().reverse())};r.readTypeIdField=function(a,b){b=b.layerDefinition||b;let f=b.typeIdField;f&&b.fields&&(f=f.toLowerCase(),a=b.fields.find(v=>v.name.toLowerCase()===f))&&(f=a.name);return null};r.writeVisible=function(a,b,f,v){b[f]=this.getAtOrigin("defaultVisibility",
"service")||a};r.clone=function(){const {store:a}=N.getProperties(this),b=new qa;N.getProperties(b).store=a.clone(ma);this.commitProperty("url");b._lastParsedUrl=this._lastParsedUrl;return b};r.createPopupTemplate=function(a){return K.createPopupTemplate(this,a)};r.createQuery=function(){return new H({returnGeometry:!0,where:this.definitionExpression||"1\x3d1"})};r.createFeatureLayer=function(){var a=n._asyncToGenerator(function*(){var b,f;if(this.hasOwnProperty("sublayers"))return null;const v=null==
(b=this.layer)?void 0:b.parsedUrl;b=new (yield new Promise(function(C,L){p(["../FeatureLayer"],function(da){C(Object.freeze({__proto__:null,default:da}))},L)})).default({url:v.path});v&&this.source&&("map-layer"===this.source.type?b.layerId=this.source.mapLayerId:b.dynamicDataSource=this.source);null!=this.layer.refreshInterval&&(b.refreshInterval=this.layer.refreshInterval);this.definitionExpression&&(b.definitionExpression=this.definitionExpression);this.floorInfo&&(b.floorInfo=t.clone(this.floorInfo));
2<this.originIdOf("labelingInfo")&&(b.labelingInfo=t.clone(this.labelingInfo));0<this.originIdOf("labelsVisible")&&(b.labelsVisible=this.labelsVisible);0<this.originIdOf("legendEnabled")&&(b.legendEnabled=this.legendEnabled);0<this.originIdOf("visible")&&(b.visible=this.visible);0<this.originIdOf("minScale")&&(b.minScale=this.minScale);0<this.originIdOf("maxScale")&&(b.maxScale=this.maxScale);0<this.originIdOf("opacity")&&(b.opacity=this.opacity);0<this.originIdOf("popupTemplate")&&(b.popupTemplate=
t.clone(this.popupTemplate));2<this.originIdOf("renderer")&&(b.renderer=t.clone(this.renderer));"data-layer"===(null==(f=this.source)?void 0:f.type)&&(b.dynamicDataSource=this.source.clone());0<this.originIdOf("title")&&(b.title=this.title);"map-image"===this.layer.type&&0<this.layer.originIdOf("customParameters")&&(b.customParameters=this.layer.customParameters);"tile"===this.layer.type&&0<this.layer.originIdOf("customParameters")&&(b.customParameters=this.layer.customParameters);return b});return function(){return a.apply(this,
arguments)}}();r.getField=function(a){return this.fieldsIndex.get(a)};r.getFeatureType=function(a){const {typeIdField:b,types:f}=this;if(!b||!a)return null;const v=a.attributes?a.attributes[b]:void 0;if(null==v)return null;let C=null;f.some(L=>{const {id:da}=L;if(null==da)return!1;da.toString()===v.toString()&&(C=L);return!!C});return C};r.getFieldDomain=function(a,b){return(b=this.getFeatureType(b&&b.feature))&&(b=b.domains&&b.domains[a])&&"inherited"!==b.type?b:this._getLayerDomain(a)};r.queryFeatures=
function(){var a=n._asyncToGenerator(function*(b=this.createQuery(),f){var v,C,L,da;yield this.load();if(!this.get("capabilities.operations.supportsQuery"))throw new P("Sublayer.queryFeatures","this layer doesn't support queries.");const [{executeQuery:ua},{default:va}]=yield Promise.all([new Promise(function(oa,sa){p(["../../rest/query/operations/query"],oa,sa)}),new Promise(function(oa,sa){p(["../../rest/support/FeatureSet"],function(wa){oa(Object.freeze({__proto__:null,default:wa}))},sa)})]);b=
yield ua(this.url,H.from(b),null!=(v=null==(C=this.layer)?void 0:C.spatialReference)?v:null,{...f,query:{...null==(L=this.layer)?void 0:L.customParameters,token:null==(da=this.layer)?void 0:da.apiKey}});v=va.fromJSON(b.data);if(null!=v&&v.features)for(const oa of v.features)oa.sourceLayer=this;return v});return function(){return a.apply(this,arguments)}}();r.toExportImageJSON=function(a){var b;const f={id:this.id,source:(null==(b=this.source)?void 0:b.toJSON())||{mapLayerId:this.id,type:"mapLayer"}};
this.definitionExpression?(a=m.isSome(a)?Z.combineFloorsDefinitionExpression(a,this):this.definitionExpression,f.definitionExpression=a):m.isSome(a)&&(f.definitionExpression=a);const v=["renderer","labelingInfo","opacity","labelsVisible"].reduce((C,L)=>{C[L]=this.originIdOf(L);return C},{});Object.keys(v).some(C=>2<v[C])&&(a=f.drawingInfo={},2<v.renderer&&(a.renderer=this.renderer?this.renderer.toJSON():null),2<v.labelsVisible&&(a.showLabels=this.labelsVisible),this.labelsVisible&&2<v.labelingInfo&&
(a.labelingInfo=this.labelingInfo?this.labelingInfo.map(C=>C.write({},{origin:"service",layer:this.layer})):null,a.showLabels=!0),2<v.opacity&&(a.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(a.renderer));return f};r._assignDefaultSymbolColors=function(a){this._forEachSimpleMarkerSymbols(a,b=>{b.color||"esriSMSX"!==b.style&&"esriSMSCross"!==b.style||(b.color=b.outline&&b.outline.color?b.outline.color:[0,0,0,0])})};r._forEachSimpleMarkerSymbols=function(a,b){if(a){const f="uniqueValueInfos"in
a?a.uniqueValueInfos:"classBreakInfos"in a?a.classBreakInfos:[];for(const v of f)B(v.symbol)&&b(v.symbol);"symbol"in a&&B(a.symbol)&&b(a.symbol);"defaultSymbol"in a&&B(a.defaultSymbol)&&b(a.defaultSymbol)}};r._setAndNotifyLayer=function(a,b){const f=this.layer,v=this._get(a);let C,L;switch(a){case "definitionExpression":case "floorInfo":C="supportsSublayerDefinitionExpression";case "minScale":case "maxScale":case "visible":C="supportsSublayerVisibility";break;case "labelingInfo":case "labelsVisible":case "opacity":case "renderer":case "source":C=
"supportsDynamicLayers",L="supportsModification"}const da=N.getProperties(this).getDefaultOrigin();if("service"!==da){if(C&&!1===this.get(`layer.capabilities.exportMap.${C}`)){this._logLockedError(a,`capability not available 'layer.capabilities.exportMap.${C}'`);return}if(L&&!1===this.get(`capabilities.exportMap.${L}`)){this._logLockedError(a,`capability not available 'capabilities.exportMap.${L}'`);return}}"source"===a&&"not-loaded"!==this.loadStatus?this._logLockedError(a,"'source' can't be changed after calling sublayer.load()"):
(this._set(a,b),"service"!==da&&v!==b&&f&&f.emit&&f.emit("sublayer-update",{propertyName:a,target:this}))};r._handleSublayersChange=function(a,b){b&&(b.forEach(f=>{f.parent=null;f.layer=null}),this.handles.removeAll());a&&(a.forEach(f=>{f.parent=this;f.layer=this.layer}),this.handles.add([a.on("after-add",({item:f})=>{f.parent=this;f.layer=this.layer}),a.on("after-remove",({item:f})=>{f.parent=null;f.layer=null}),a.on("before-changes",f=>{const v=this.get("layer.capabilities.exportMap.supportsSublayersChanges");
null==v||v||(ra.error(new P("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:this,layer:this.layer})),f.preventDefault())})]))};r._logLockedError=function(a,b){ra.error(new P("sublayer:locked",`Property '${a}' can't be changed on Sublayer from the layer '${this.layer.id}'`,{reason:b,sublayer:this,layer:this.layer}))};r._getLayerDomain=function(a){return(a=this.fieldsIndex.get(a))?a.domain:null};n._createClass(Q,[{key:"definitionExpression",
set:function(a){this._setAndNotifyLayer("definitionExpression",a)}},{key:"fieldsIndex",get:function(){return new na(this.fields||[])}},{key:"floorInfo",set:function(a){this._setAndNotifyLayer("floorInfo",a)}},{key:"id",get:function(){const a=this._get("id");return null==a?ta++:a},set:function(a){this._get("id")!==a&&(!1===this.get("layer.capabilities.exportMap.supportsDynamicLayers")?this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"):this._set("id",
a))}},{key:"labelingInfo",set:function(a){this._setAndNotifyLayer("labelingInfo",a)}},{key:"labelsVisible",set:function(a){this._setAndNotifyLayer("labelsVisible",a)}},{key:"layer",set:function(a){this._set("layer",a);this.sublayers&&this.sublayers.forEach(b=>b.layer=a)}},{key:"listMode",set:function(a){this._set("listMode",a)}},{key:"minScale",set:function(a){this._setAndNotifyLayer("minScale",a)}},{key:"maxScale",set:function(a){this._setAndNotifyLayer("maxScale",a)}},{key:"opacity",set:function(a){this._setAndNotifyLayer("opacity",
a)}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"renderer",set:function(a){if(a)for(const b of a.getSymbols())if(X.isSymbol3D(b)){ra.warn("Sublayer renderer should use 2D symbols");break}this._setAndNotifyLayer("renderer",a)}},{key:"source",get:function(){return this._get("source")||new G.MapLayerSource({mapLayerId:this.id})},set:function(a){this._setAndNotifyLayer("source",a)}},{key:"sublayers",set:function(a){this._handleSublayersChange(a,this._get("sublayers"));
this._set("sublayers",a)}},{key:"url",get:function(){var a,b;const f=null!=(a=null==(b=this.layer)?void 0:b.parsedUrl)?a:this._lastParsedUrl;a=this.source;if(!f)return null;this._lastParsedUrl=f;if("map-layer"===(null==a?void 0:a.type))return`${f.path}/${a.mapLayerId}`;a={layer:JSON.stringify({source:this.source})};return`${f.path}/dynamicLayer?${z.objectToQuery(a)}`},set:function(a){a?this._override("url",a):this._clearOverride("url")}},{key:"visible",set:function(a){this._setAndNotifyLayer("visible",
a)}}]);return Q}(h.HandleOwnerMixin(x.MultiOriginJSONMixin(w.IdentifiableMixin(l))));d.test={isMapImageLayerOverridePolicy:E=>E===V||E===aa,isTileImageLayerOverridePolicy:E=>E===la};c.__decorate([q.property({readOnly:!0})],d.prototype,"capabilities",void 0);c.__decorate([M.reader("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],d.prototype,"readCapabilities",null);c.__decorate([q.property({type:String,value:null,json:{name:"layerDefinition.definitionExpression",
write:{overridePolicy:aa}}})],d.prototype,"definitionExpression",null);c.__decorate([q.property({type:[ka],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],d.prototype,"fields",void 0);c.__decorate([q.property({readOnly:!0})],d.prototype,"fieldsIndex",null);c.__decorate([q.property({type:k,value:null,json:{name:"layerDefinition.floorInfo",read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo",overridePolicy:aa},origins:{"web-scene":{read:!1,write:!1}}}})],
d.prototype,"floorInfo",null);c.__decorate([q.property({type:U,json:{read:{source:"layerDefinition.extent"}}})],d.prototype,"fullExtent",void 0);c.__decorate([q.property({type:String})],d.prototype,"globalIdField",void 0);c.__decorate([M.reader("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],d.prototype,"readGlobalIdFieldFromService",null);c.__decorate([q.property({type:T.Integer,json:{write:{ignoreOrigin:!0}}})],d.prototype,"id",null);c.__decorate([q.property({value:null,
type:[Y],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:V}}})],d.prototype,"labelingInfo",null);c.__decorate([ca.writer("labelingInfo")],d.prototype,"writeLabelingInfo",null);c.__decorate([q.property({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:V}}})],d.prototype,"labelsVisible",null);c.__decorate([q.property({value:null})],
d.prototype,"layer",null);c.__decorate([q.property({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:pa}}})],d.prototype,"legendEnabled",void 0);c.__decorate([q.property({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],d.prototype,"listMode",null);c.__decorate([q.property({type:Number,value:0,json:{write:{overridePolicy:V}}})],d.prototype,"minScale",
null);c.__decorate([M.reader("minScale",["minScale","layerDefinition.minScale"])],d.prototype,"readMinScale",null);c.__decorate([q.property({type:Number,value:0,json:{write:{overridePolicy:V}}})],d.prototype,"maxScale",null);c.__decorate([M.reader("maxScale",["maxScale","layerDefinition.maxScale"])],d.prototype,"readMaxScale",null);c.__decorate([q.property({type:String})],d.prototype,"objectIdField",void 0);c.__decorate([M.reader("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],
d.prototype,"readObjectIdFieldFromService",null);c.__decorate([q.property({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:V}}})],d.prototype,"opacity",null);c.__decorate([M.reader("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],d.prototype,"readOpacity",null);c.__decorate([ca.writer("opacity")],d.prototype,"writeOpacity",null);c.__decorate([q.property({json:{type:T.Integer,write:{target:"parentLayerId",allowNull:!0,
overridePolicy:V}}})],d.prototype,"parent",void 0);c.__decorate([ca.writer("parent")],d.prototype,"writeParent",null);c.__decorate([q.property({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader(E,Q){return!Q.disablePopup}},write:{target:"disablePopup",overridePolicy:pa,writer(E,Q,r){Q[r]=!E}}}})],d.prototype,"popupEnabled",void 0);c.__decorate([q.property({type:g,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:pa}}})],d.prototype,"popupTemplate",void 0);c.__decorate([q.property({readOnly:!0})],
d.prototype,"defaultPopupTemplate",null);c.__decorate([q.property({types:R.rendererTypes,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:V},origins:{"web-scene":{types:R.webSceneRendererTypes,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:V}}}}})],d.prototype,"renderer",null);c.__decorate([q.property({types:{key:"type",base:null,typeMap:{"data-layer":A.DataLayerSource,"map-layer":G.MapLayerSource}},cast(E){if(E){if("mapLayerId"in E)return T.ensureClass(G.MapLayerSource,
E);if("dataSource"in E)return T.ensureClass(A.DataLayerSource,E)}return E},json:{name:"layerDefinition.source",write:{overridePolicy:V}}})],d.prototype,"source",null);c.__decorate([q.property()],d.prototype,"sourceJSON",void 0);c.__decorate([q.property({value:null,json:{type:[T.Integer],write:{target:"subLayerIds",allowNull:!0,overridePolicy:V}}})],d.prototype,"sublayers",null);c.__decorate([O.cast("sublayers")],d.prototype,"castSublayers",null);c.__decorate([ca.writer("sublayers")],d.prototype,"writeSublayers",
null);c.__decorate([q.property({type:String,json:{read:{source:"name"},write:{target:"name",allowNull:!0,overridePolicy:pa}}})],d.prototype,"title",void 0);c.__decorate([q.property({type:String})],d.prototype,"typeIdField",void 0);c.__decorate([M.reader("typeIdField",["layerDefinition.typeIdField"])],d.prototype,"readTypeIdField",null);c.__decorate([q.property({type:[ja],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],d.prototype,"types",void 0);c.__decorate([q.property({type:String,
json:{read:{source:"layerUrl"},write:{target:"layerUrl",overridePolicy:la}}})],d.prototype,"url",null);c.__decorate([q.property({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:V}}})],d.prototype,"visible",null);c.__decorate([ca.writer("visible")],d.prototype,"writeVisible",null);return d=qa=c.__decorate([ia.subclass("esri.layers.support.Sublayer")],d)})},"esri/views/support/floorFilterUtils":function(){define(["exports"],function(p){function n(c,
d){if(null==c||!c.length)return null;c=c.filter(g=>""!==g).map(g=>`'${g}'`);c.push("''");return`${d} IN (${c.join(",")}) OR ${d} IS NULL`}p.combineFloorsDefinitionExpression=function(c,d){({definitionExpression:d}=d);return c?d?`(${d}) AND (${c})`:c:d};p.getFloorFilterClause=function(c){var d;const g=c.layer;return"floorInfo"in g&&null!=(d=g.floorInfo)&&d.floorField&&"floors"in c.view?n(c.view.floors,g.floorInfo.floorField):null};p.getLayerFloorFilterClause=function(c,d){var g;return"floorInfo"in
d&&null!=(g=d.floorInfo)&&g.floorField?n(c,d.floorInfo.floorField):null};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/sublayerUtils":function(){define(["exports"],function(p){function n(c,d){if(!c||!c.length)return!0;d=d.slice().reverse().flatten(({sublayers:u})=>u&&u.toArray().reverse()).map(u=>u.id).toArray();if(c.length>d.length)return!1;let g=0;const e=d.length;for(const {id:u}of c){for(;g<e&&d[g]!==u;)g++;if(g>=e)return!1}return!0}p.isExportDynamic=function(c,d,g){return c.some(e=>
{const u=e.source;return!(!u||"map-layer"===u.type&&u.mapLayerId===e.id&&(!u.gdbVersion||u.gdbVersion===g.gdbVersion))||2<e.originIdOf("renderer")||2<e.originIdOf("labelingInfo")||2<e.originIdOf("opacity")||2<e.originIdOf("labelsVisible")})?!0:!n(c,d)};p.isSublayerOverhaul=function(c){return!!c&&c.some(d=>null!=d.minScale||d.layerDefinition&&null!=d.layerDefinition.minScale)};p.shouldWriteSublayerStructure=function(c,d,g){return d.flatten(({sublayers:e})=>e).length!==c.length||c.some(e=>e.originIdOf("minScale")>
g||e.originIdOf("maxScale")>g||e.originIdOf("renderer")>g||e.originIdOf("labelingInfo")>g||e.originIdOf("opacity")>g||e.originIdOf("labelsVisible")>g||e.originIdOf("source")>g)?!0:!n(c,d)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/ExportImageParameters":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/HandleOwner ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./commonProperties ./sublayerUtils ../../views/support/floorFilterUtils".split(" "),
function(p,n,c,d,g,e,u,F,ba,S,J,ha,W,R){const ea={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};p.ExportImageParameters=function(X){function D(h){h=X.call(this,h)||this;h.floors=null;h.scale=0;return h}n._inheritsLoose(D,X);var P=D.prototype;P.destroy=function(){this.layer=null};P.toJSON=
function(){var h=this.layer;h={dpi:h.dpi,format:h.imageFormat,transparent:h.imageTransparency,gdbVersion:h.gdbVersion||null};this.hasDynamicLayers&&this.dynamicLayers?h.dynamicLayers=this.dynamicLayers:h={...h,layers:this.layers,layerDefs:this.layerDefs};return h};n._createClass(D,[{key:"dynamicLayers",get:function(){if(!this.hasDynamicLayers)return null;const h=this.visibleSublayers.map(w=>{const t=R.getLayerFloorFilterClause(this.floors,w);return w.toExportImageJSON(t)});return h.length?JSON.stringify(h):
null}},{key:"hasDynamicLayers",get:function(){return this.layer&&W.isExportDynamic(this.visibleSublayers,this.layer.serviceSublayers,this.layer)}},{key:"layer",set:function(h){this._get("layer")!==h&&(this._set("layer",h),this.handles.remove("layer"),h&&this.handles.add([h.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),h.on("sublayer-update",w=>this.notifyChange(ea[w.propertyName]))],"layer"))}},{key:"layers",get:function(){const h=this.visibleSublayers;return h?h.length?"show:"+
h.map(w=>w.id).join(","):"show:-1":null}},{key:"layerDefs",get:function(){var h;const w=!(null==(h=this.floors)||!h.length);h=this.visibleSublayers.filter(t=>null!=t.definitionExpression||w&&null!=t.floorInfo);return h.length?JSON.stringify(h.reduce((t,l)=>{var y=R.getLayerFloorFilterClause(this.floors,l);y=e.isSome(y)?R.combineFloorsDefinitionExpression(y,l):l.definitionExpression;t[l.id]=y;return t},{})):null}},{key:"version",get:function(){this.commitProperty("layers");this.commitProperty("layerDefs");
this.commitProperty("dynamicLayers");this.commitProperty("timeExtent");const h=this.layer;h&&(h.commitProperty("dpi"),h.commitProperty("imageFormat"),h.commitProperty("imageTransparency"),h.commitProperty("gdbVersion"));return(this._get("version")||0)+1}},{key:"visibleSublayers",get:function(){const h=[];if(!this.layer)return h;var w=this.layer.sublayers;const t=l=>{const y=this.scale,m=0===l.minScale||y<=l.minScale,x=0===l.maxScale||y>=l.maxScale;l.visible&&(0===y||m&&x)&&(l.sublayers?l.sublayers.forEach(t):
h.unshift(l))};w&&w.forEach(t);w=this._get("visibleSublayers");return!w||w.length!==h.length||w.some((l,y)=>h[y]!==l)?h:w}}]);return D}(g.HandleOwnerMixin(d));c.__decorate([u.property({readOnly:!0})],p.ExportImageParameters.prototype,"dynamicLayers",null);c.__decorate([u.property()],p.ExportImageParameters.prototype,"floors",void 0);c.__decorate([u.property({readOnly:!0})],p.ExportImageParameters.prototype,"hasDynamicLayers",null);c.__decorate([u.property()],p.ExportImageParameters.prototype,"layer",
null);c.__decorate([u.property({readOnly:!0})],p.ExportImageParameters.prototype,"layers",null);c.__decorate([u.property({readOnly:!0})],p.ExportImageParameters.prototype,"layerDefs",null);c.__decorate([u.property({type:Number})],p.ExportImageParameters.prototype,"scale",void 0);c.__decorate([u.property(ha.combinedViewLayerTimeExtentProperty)],p.ExportImageParameters.prototype,"timeExtent",void 0);c.__decorate([u.property({readOnly:!0})],p.ExportImageParameters.prototype,"version",null);c.__decorate([u.property({readOnly:!0})],
p.ExportImageParameters.prototype,"visibleSublayers",null);p.ExportImageParameters=c.__decorate([J.subclass("esri.layers.mixins.ExportImageParameters")],p.ExportImageParameters);Object.defineProperty(p,"__esModule",{value:!0})})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../request ../TimeExtent ../core/Error ../core/HandleOwner ../core/loadAll ../core/maybe ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/accessorSupport/PropertyOrigin ../geometry/Extent ../geometry/support/scaleUtils ./Layer ./mixins/APIKeyMixin ./mixins/ArcGISMapService ./mixins/ArcGISService ./mixins/BlendLayer ./mixins/CustomParametersMixin ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./mixins/SublayersOwner ./mixins/TemporalLayer ./support/commonProperties ./support/ExportImageParameters ./support/Sublayer ./support/sublayerUtils".split(" "),function(p,
n,c,d,g,e,u,F,ba,S,J,ha,W,R,ea,X,D,P,h,w,t,l,y,m,x,z,q,N,O,fa,M,ia,ca,T,I,ja){e=function(ka){function na(...k){k=ka.call(this,...k)||this;k.datesInUnknownTimezone=!1;k.dpi=96;k.gdbVersion=null;k.imageFormat="png24";k.imageMaxHeight=2048;k.imageMaxWidth=2048;k.imageTransparency=!0;k.isReference=null;k.labelsVisible=!1;k.operationalLayerType="ArcGISMapServiceLayer";k.sourceJSON=null;k.sublayers=null;k.type="map-image";k.url=null;return k}p._inheritsLoose(na,ka);var Y=na.prototype;Y.normalizeCtorArgs=
function(k,A){return"string"===typeof k?{url:k,...A}:k};Y.load=function(k){const A=F.isSome(k)?k.signal:null;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},k).catch(S.throwIfAbortError).then(()=>this._fetchService(A)));return Promise.resolve(this)};Y.readImageFormat=function(k,A){return(k=A.supportedImageFormatTypes)&&-1<k.indexOf("PNG32")?"png32":"png24"};Y.writeSublayers=function(k,A,G,H){if(this.loaded&&k){k=k.slice().reverse().flatten(({sublayers:B})=>B&&B.toArray().reverse()).toArray();
G=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap.supportsDynamicLayers){const B=P.nameToId(H.origin);3===B?(G=this.createSublayersForOrigin("service").sublayers,G=ja.shouldWriteSublayerStructure(k,G,2)):3<B&&(G=this.createSublayersForOrigin("portal-item"),G=ja.shouldWriteSublayerStructure(k,G.sublayers,P.nameToId(G.origin)))}var K=[],Z={writeSublayerStructure:G,...H},U=G;k.forEach(B=>{const aa=B.write({},Z);K.push(aa);U=U||"user"===B.originOf("visible")});
K.some(B=>1<Object.keys(B).length)&&(A.layers=K);U&&(A.visibleLayers=k.filter(B=>B.visible).map(B=>B.id))}};Y.createExportImageParameters=function(k,A,G,H){var K=H&&H.pixelRatio||1;k&&10<=this.version&&(k=k.clone().shiftCentralMeridian());var Z=new T.ExportImageParameters({layer:this,floors:null==H?void 0:H.floors,scale:w.getScale({extent:k,width:A})*K});const U=Z.toJSON();Z.destroy();Z=!H||!H.rotation||10.3>this.version?{}:{rotation:-H.rotation};var B=k&&k.spatialReference;B=B.wkid||JSON.stringify(B.toJSON());
U.dpi*=K;K={};if(null!=H&&H.timeExtent){const {start:aa,end:la}=H.timeExtent.toJSON();K.time=aa&&la&&aa===la?""+aa:`${null==aa?"null":aa},${null==la?"null":la}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(K.time="null,null");return{bbox:k&&k.xmin+","+k.ymin+","+k.xmax+","+k.ymax,bboxSR:B,imageSR:B,size:A+","+G,...U,...Z,...K}};Y.fetchImage=function(){var k=p._asyncToGenerator(function*(A,G,H,K){var Z;A={responseType:"image",signal:null!=(Z=null==K?void 0:K.signal)?Z:null,query:{...this.parsedUrl.query,
...this.createExportImageParameters(A,G,H,K),f:"image",...this.refreshParameters,...this.customParameters,token:this.apiKey}};const U=this.parsedUrl.path+"/export";return null==A.query.dynamicLayers||this.capabilities.exportMap.supportsDynamicLayers?c(U,A).then(B=>B.data).catch(B=>{if(S.isAbortError(B))throw B;throw new g("mapimagelayer:image-fetch-error",`Unable to load image: ${U}`,{error:B});}):Promise.reject(new g("mapimagelayer:dynamiclayer-not-supported",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,
{query:A.query}))});return function(A,G,H,K){return k.apply(this,arguments)}}();Y.fetchRecomputedExtents=function(){var k=p._asyncToGenerator(function*(A={}){({data:A}=yield c(this.url,{...A,query:{returnUpdates:!0,f:"json",...this.customParameters,token:this.apiKey}}));const {extent:G,fullExtent:H,timeExtent:K}=A;A=G||H;return{fullExtent:A&&h.fromJSON(A),timeExtent:K&&d.fromJSON({start:K[0],end:K[1]})}});return function(){return k.apply(this,arguments)}}();Y.loadAll=function(){return u.loadAll(this,
k=>{k(this.allSublayers)})};Y._fetchService=function(){var k=p._asyncToGenerator(function*(A){if(this.sourceJSON)this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl});else{var {data:G,ssl:H}=yield c(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},signal:A});H&&(this.url=this.url.replace(/^http:/i,"https:"));this.sourceJSON=G;this.read(G,{origin:"service",url:this.parsedUrl})}});return function(A){return k.apply(this,arguments)}}();
return na}(x.BlendLayer(ia.TemporalLayer(fa.ScaleRangeLayer(M.SublayersOwner(y.ArcGISMapService(m.ArcGISService(q.OperationalLayer(N.PortalLayer(ba.MultiOriginJSONMixin(O.RefreshableLayer(l.APIKeyMixin(z.CustomParametersMixin(e.HandleOwnerMixin(t))))))))))))));n.__decorate([J.property({type:Boolean})],e.prototype,"datesInUnknownTimezone",void 0);n.__decorate([J.property()],e.prototype,"dpi",void 0);n.__decorate([J.property()],e.prototype,"gdbVersion",void 0);n.__decorate([J.property()],e.prototype,
"imageFormat",void 0);n.__decorate([ea.reader("imageFormat",["supportedImageFormatTypes"])],e.prototype,"readImageFormat",null);n.__decorate([J.property({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],e.prototype,"imageMaxHeight",void 0);n.__decorate([J.property({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],e.prototype,"imageMaxWidth",void 0);n.__decorate([J.property()],e.prototype,"imageTransparency",void 0);n.__decorate([J.property({type:Boolean,json:{read:!1,write:{enabled:!0,
overridePolicy:()=>({enabled:!1})}}})],e.prototype,"isReference",void 0);n.__decorate([J.property({json:{read:!1,write:!1}})],e.prototype,"labelsVisible",void 0);n.__decorate([J.property({type:["ArcGISMapServiceLayer"]})],e.prototype,"operationalLayerType",void 0);n.__decorate([J.property({json:{read:!1,write:!1}})],e.prototype,"popupEnabled",void 0);n.__decorate([J.property()],e.prototype,"sourceJSON",void 0);n.__decorate([J.property({json:{write:{ignoreOrigin:!0}}})],e.prototype,"sublayers",void 0);
n.__decorate([D.writer("sublayers",{layers:{type:[I]},visibleLayers:{type:[W.Integer]}})],e.prototype,"writeSublayers",null);n.__decorate([J.property({type:["show","hide","hide-children"]})],e.prototype,"listMode",void 0);n.__decorate([J.property({json:{read:!1},readOnly:!0,value:"map-image"})],e.prototype,"type",void 0);n.__decorate([J.property(ca.url)],e.prototype,"url",void 0);return e=n.__decorate([X.subclass("esri.layers.MapImageLayer")],e)});