// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.21/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/support/PixelBlock":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Error ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass".split(" "),function(ba,aa,W,V,q,O,U,X,P,Z,Q){var C;const M=U.getLogger("esri.layers.support.PixelBlock");W=C=function(J){function b(g){g=
J.call(this,g)||this;g.width=null;g.height=null;g.pixelType="f32";g.validPixelCount=null;g.mask=null;g.maskIsAlpha=!1;g.pixels=null;g.statistics=null;return g}ba._inheritsLoose(b,J);b.createEmptyBand=function(g,m){return new (C.getPixelArrayConstructor(g))(m)};b.getPixelArrayConstructor=function(g){let m;switch(g){case "u1":case "u2":case "u4":case "u8":m=Uint8Array;break;case "u16":m=Uint16Array;break;case "u32":m=Uint32Array;break;case "s8":m=Int8Array;break;case "s16":m=Int16Array;break;case "s32":m=
Int32Array;break;case "u32":m=Uint32Array;break;case "f32":m=Float32Array;break;case "f64":m=Float64Array;break;case "c64":case "c128":case "unknown":m=Float32Array}return m};var w=b.prototype;w.castPixelType=function(g){if(!g)return"f32";g=g.toLowerCase();-1<["u1","u2","u4"].indexOf(g)?g="u8":-1==="unknown u8 s8 u16 s16 u32 s32 f32 f64".split(" ").indexOf(g)&&(g="f32");return g};w.getPlaneCount=function(){return this.pixels&&this.pixels.length};w.addData=function(g){if(!g.pixels||g.pixels.length!==
this.width*this.height)throw new V("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]);this.statistics||(this.statistics=[]);this.pixels.push(g.pixels);this.statistics.push(g.statistics||{minValue:null,maxValue:null})};w.getAsRGBA=function(){const g=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case "s8":case "s16":case "u16":case "s32":case "u32":case "f32":case "f64":this._fillFromNon8Bit(g);
break;default:this._fillFrom8Bit(g)}return new Uint8ClampedArray(g)};w.getAsRGBAFloat=function(){const g=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(g);return g};w.updateStatistics=function(){this.statistics=this.pixels.map(D=>this._calculateBandStatistics(D,this.mask));const g=this.mask;let m=0;if(g)for(let D=0;D<g.length;D++)g[D]&&m++;else m=this.width*this.height;this.validPixelCount=m};w.clamp=function(g){if(g&&"f64"!==g&&"f32"!==g){switch(g){case "u8":var m=[0,255];break;case "u16":m=
[0,65535];break;case "u32":m=[0,4294967295];break;case "s8":m=[-128,127];break;case "s16":m=[-32768,32767];break;case "s32":m=[-2147483648,2147483647];break;default:m=[-3.4*1E39,3.4*1E39]}var [D,x]=m;m=this.pixels;var y=this.width*this.height,t=m.length,a=[];for(let l=0;l<t;l++){var e=C.createEmptyBand(g,y);var p=m[l];for(let v=0;v<y;v++){var h=p[v];e[v]=h>x?x:h<D?D:h}a.push(e)}this.pixels=a;this.pixelType=g}};w.extractBands=function(g){if(X.isNone(g)||0===g.length||null==this.pixels||0===this.pixels.length)return this;
var m=this.pixels.length;const D=g.some(x=>x>=this.pixels.length);m=m===g.length&&!g.some((x,y)=>x!==y);return D||m?this:new C({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:g.map(x=>this.pixels[x]),statistics:this.statistics&&g.map(x=>this.statistics[x])})};w.clone=function(){const g=new C({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});
this.mask&&(g.mask=this.mask instanceof Uint8Array?new Uint8Array(this.mask):this.mask.slice(0));let m;const D=C.getPixelArrayConstructor(this.pixelType);if(this.pixels&&0<this.pixels.length){g.pixels=[];const x=this.pixels[0].slice;for(m=0;m<this.pixels.length;m++)g.pixels[m]=x?this.pixels[m].slice(0,this.pixels[m].length):new D(this.pixels[m])}if(this.statistics)for(g.statistics=[],m=0;m<this.statistics.length;m++)g.statistics[m]=O.clone(this.statistics[m]);return g};w._fillFrom8Bit=function(g){const {mask:m,
maskIsAlpha:D,pixels:x}=this;if(g&&x&&x.length){var y,t;var a=y=t=x[0];3<=x.length?(y=x[1],t=x[2]):2===x.length&&(y=x[1]);var e=new Uint32Array(g),p=this.width*this.height;if(a.length!==p)M.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");else if(m&&m.length===p)if(D)for(g=0;g<p;g++)m[g]&&(e[g]=m[g]<<24|t[g]<<16|y[g]<<8|a[g]);else for(g=0;g<p;g++)m[g]&&(e[g]=-16777216|t[g]<<16|y[g]<<8|a[g]);else for(g=0;g<p;g++)e[g]=-16777216|t[g]<<16|y[g]<<8|a[g]}else M.error("getAsRGBA()",
"Unable to convert to RGBA. The input pixel block is empty.")};w._fillFromNon8Bit=function(g){const {pixels:m,mask:D,statistics:x}=this;if(g&&m&&m.length){var y=this.pixelType,t=1,a=0;t=1;x&&0<x.length?(a=x.map(v=>v.minValue).reduce((v,B)=>Math.min(v,B)),t=x.map(v=>v.maxValue-v.minValue).reduce((v,B)=>Math.max(v,B)),t=255/t):(t=255,"s8"===y?(a=-128,t=127):"u16"===y?t=65535:"s16"===y?(a=-32768,t=32767):"u32"===y?t=4294967295:"s32"===y?(a=-2147483648,t=2147483647):"f32"===y?(a=-3.4*1E39,t=3.4*1E39):
"f64"===y&&(a=-Number.MAX_VALUE,t=Number.MAX_VALUE),t=255/(t-a));g=new Uint32Array(g);y=this.width*this.height;var e,p,h;var l=e=p=m[0];if(l.length!==y)return M.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(2<=m.length)if(e=m[1],3<=m.length&&(p=m[2]),D&&D.length===y)for(h=0;h<y;h++)D[h]&&(g[h]=-16777216|(p[h]-a)*t<<16|(e[h]-a)*t<<8|(l[h]-a)*t);else for(h=0;h<y;h++)g[h]=-16777216|(p[h]-a)*t<<16|(e[h]-a)*t<<8|(l[h]-a)*t;else if(D&&D.length===y)for(h=0;h<y;h++)e=(l[h]-
a)*t,D[h]&&(g[h]=-16777216|e<<16|e<<8|e);else for(h=0;h<y;h++)e=(l[h]-a)*t,g[h]=-16777216|e<<16|e<<8|e}else M.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};w._fillFrom32Bit=function(g){const {pixels:m,mask:D}=this;if(!g||!m||!m.length)return M.error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");let x,y,t,a;x=y=t=m[0];3<=m.length?(y=m[1],t=m[2]):2===m.length&&(y=m[1]);const e=this.width*this.height;if(x.length!==e)return M.error("getAsRGBAFloat()",
"Unable to convert to RGBA. The pixelblock is invalid.");let p=0;if(D&&D.length===e)for(a=0;a<e;a++)g[p++]=x[a],g[p++]=y[a],g[p++]=t[a],g[p++]=D[a]&1;else for(a=0;a<e;a++)g[p++]=x[a],g[p++]=y[a],g[p++]=t[a],g[p++]=1};w._calculateBandStatistics=function(g,m){let D=Infinity,x=-Infinity;const y=g.length;let t,a=0;if(m)for(t=0;t<y;t++)m[t]&&(a=g[t],D=a<D?a:D,x=a>x?a:x);else for(t=0;t<y;t++)a=g[t],D=a<D?a:D,x=a>x?a:x;return{minValue:D,maxValue:x}};return b}(q.JSONSupport);aa.__decorate([P.property({json:{write:!0}})],
W.prototype,"width",void 0);aa.__decorate([P.property({json:{write:!0}})],W.prototype,"height",void 0);aa.__decorate([P.property({json:{write:!0}})],W.prototype,"pixelType",void 0);aa.__decorate([Z.cast("pixelType")],W.prototype,"castPixelType",null);aa.__decorate([P.property({json:{write:!0}})],W.prototype,"validPixelCount",void 0);aa.__decorate([P.property({json:{write:!0}})],W.prototype,"mask",void 0);aa.__decorate([P.property({json:{write:!0}})],W.prototype,"maskIsAlpha",void 0);aa.__decorate([P.property({json:{write:!0}})],
W.prototype,"pixels",void 0);aa.__decorate([P.property({json:{write:!0}})],W.prototype,"statistics",void 0);return W=C=aa.__decorate([Q.subclass("esri.layers.support.PixelBlock")],W)})},"esri/layers/support/rasterFormats/RasterCodec":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../PixelBlock ./ImageCanvasDecoder ./JpgPlus ../../../chunks/TiffDecoder ../../../chunks/LercCodec ../../../chunks/Zlib ./Raw ./utils".split(" "),function(ba,aa,W,V,q,O,U,X,P,Z,Q){function C(h,
l){if(!Q.isPlatformLittleEndian)throw new W("rasterCoded:decode","lerc decoder is not supported on big endian platform");const {width:v,height:B,pixelType:G}=l;var n=y(G);const f=n.pixelTypeCtor;l=null==l.noDataValue?n.noDataValue:l.noDataValue;n=0;let k,r=0,E;const c=h.byteLength-10;for(;r<c;){var d=X.decode(h,{inputOffset:r,encodedMaskData:k,returnMask:0===n?!0:!1,returnEncodedMask:0===n?!0:!1,returnFileInfo:!0,pixelType:f,noDataValue:l});if(v&&B&&(d.width!==v||d.height!==B))throw new W("rasterCoded:decode",
"lerc decoded result has width or height different from specified in options");r=d.fileInfo.eofOffset;0===n&&(k=d.encodedMaskData,E=new V({width:d.width,height:d.height,pixels:[],pixelType:G,mask:d.maskData,statistics:[]}));n++;E.addData({pixels:d.pixelData,statistics:{minValue:d.minValue,maxValue:d.maxValue,noDataValue:d.noDataValue}});10<c-r&&(d=String.fromCharCode.apply(null,new Uint8Array(h,r,10)),r+=-1<d.indexOf("CntZ")?d.indexOf("CntZ"):0)}return E}function M(h,l){if(!Q.isPlatformLittleEndian)throw new W("rasterCoded:decode",
"lerc decoder is not supported on big endian platform");var v=0,B=l.offset||0,G=0;let n;let f;const k=l.eof||h.byteLength-10,r=[],{width:E,height:c}=l;for(l=0;B<k;){var d;var u=U.Lerc2Codec.decode(h,{inputOffset:B,maskData:n,returnFileInfo:!0});if(E&&c&&(u.width!==E||u.height!==c))throw new W("rasterCoded:decode","lerc2 decoded result has width or height different from what's specified in options");B=u.fileInfo.eofOffset;n=u.maskData;0===v&&(G=u.fileInfo.numValidPixel,f=new V({width:u.width,height:u.height,
pixels:[],pixelType:u.fileInfo.pixelType,mask:n,statistics:[]}));u.fileInfo.mask&&0<u.fileInfo.mask.numBytes&&l++;n&&r.push(n);if(1<u.dimCount&&(null==(d=u.pixelData)?void 0:d.length)===u.width*u.height*u.dimCount){var A,z,F,K;u.pixelData=u.pixelData.slice(-u.width*u.height);const L=null==(A=u.dimStats)?void 0:null==(z=A.minValues)?void 0:z[u.dimCount-1],H=null==(F=u.dimStats)?void 0:null==(K=F.maxValues)?void 0:K[u.dimCount-1];null!=L&&null!=H&&(u.minValue=L,u.maxValue=H)}v++;f.addData({pixels:u.pixelData,
statistics:{minValue:u.minValue,maxValue:u.maxValue}});10<k-B&&(u=String.fromCharCode.apply(null,new Uint8Array(h,B,10)),B+=-1<u.indexOf("Lerc")?u.indexOf("Lerc"):0)}B=v=h=0;if(1<l){B=f.width*f.height;n=new Uint8Array(B);n.set(r[0]);for(h=1;h<r.length;h++)for(G=r[h],v=0;v<B;v++)n[v]&=G[v];for(v=G=0;v<B;v++)G+=n[v];f.mask=n}f.validPixelCount=G;return f}function J(h,l){h=U.decode(h,l.pyramidLevel||0);h=new V({width:h.width,height:h.height,pixels:h.pixels,pixelType:h.pixelType.toLowerCase(),mask:h.mask,
statistics:null});h.updateStatistics();return h}function b(h){h=O.decode(h);h=new V({width:h.width,height:h.height,pixels:h.pixels,pixelType:"U8",mask:h.mask,statistics:null});h.updateStatistics();return h}function w(h,l){h=new Uint8Array(h);h=new e(h);const {width:v,height:B}=l;l=v*B;h=h.decode();let G=0;var n=0;let f;n=new Uint8Array(l);for(G=0;G<l;G++)n[G]=h[4*G+3];const k=new V({width:v,height:B,pixels:[],pixelType:"U8",mask:n,statistics:[]});for(G=0;3>G;G++){f=new Uint8Array(l);for(n=0;n<l;n++)f[n]=
h[4*n+G];k.addData({pixels:f})}k.updateStatistics();return k}function g(h,l,v,B){return m.apply(this,arguments)}function m(){m=aa._asyncToGenerator(function*(h,l,v,B){h=yield(new q).decode(h,{applyJpegMask:!1,format:l,...v},B);h=new V(h);h.updateStatistics();return h});return m.apply(this,arguments)}function D(h){if(null==h)throw new W("rasterCodec:decode","parameter encodeddata is required.");h=new Uint8Array(h,0,10);let l="";255===h[0]&&216===h[1]?l="jpg":137===h[0]&&80===h[1]&&78===h[2]&&71===
h[3]?l="png":67===h[0]&&110===h[1]&&116===h[2]&&90===h[3]&&73===h[4]&&109===h[5]&&97===h[6]&&103===h[7]&&101===h[8]&&32===h[9]?l="lerc":76===h[0]&&101===h[1]&&114===h[2]&&99===h[3]&&50===h[4]&&32===h[5]?l="lerc2":73===h[0]&&73===h[1]&&42===h[2]&&0===h[3]||77===h[0]&&77===h[1]&&0===h[2]&&42===h[3]||73===h[0]&&73===h[1]&&43===h[2]&&0===h[3]||77===h[0]&&77===h[1]&&0===h[2]&&43===h[3]?l="tiff":71===h[0]&&73===h[1]&&70===h[2]?l="gif":66===h[0]&&77===h[1]?l="bmp":-1<String.fromCharCode.apply(null,h).toLowerCase().indexOf("error")&&
(l="error");return l}function x(h){let l=null;switch(h){case "lerc":l=C;break;case "lerc2":l=M;break;case "jpg":l=b;break;case "png":l=w;break;case "bsq":case "bip":l=(v,B)=>{{const {pixelTypeCtor:G}=y(B.pixelType),n=Z.decode;v=n(v,{width:B.width,height:B.height,pixelType:G,format:h});B=new V({width:B.width,height:B.height,pixels:v.pixels,pixelType:B.pixelType,mask:v.mask,statistics:null});B.updateStatistics()}return B};break;case "tiff":l=J;break;case "error":l=()=>{throw new W("rasterCodec:decode",
"input data contains error");};break;default:l=()=>{throw new W("rasterCodec:decode","unsupported raster format");}}return l}function y(h){let l=null,v=null;switch(h?h.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":v=255;l=Uint8Array;break;case "u16":v=v||65535;l=Uint16Array;break;case "u32":v=v||2**32-1;l=Uint32Array;break;case "s8":v=v||-128;l=Int8Array;break;case "s16":v=v||-32768;l=Int16Array;break;case "s32":v=v||-(2**31);l=Int32Array;break;default:l=Float32Array}return{pixelTypeCtor:l,
noDataValue:v}}function t(h,l=1){if(h){var {pixels:v,width:B,height:G,mask:n}=h;if(v&&0!==v.length){var f=v.length,k=B-1,r=G-1,E=[],c,d,u=V.getPixelArrayConstructor(h.pixelType);if(0===l){for(l=0;l<f;l++){var A=v[l];var z=new u(k*r);for(c=0;c<r;c++){var F=c*B;for(d=0;d<k;d++)z[c*k+d]=A[F+d]}E.push(z)}if(n){var K=new Uint8Array(k*r);for(c=0;c<r;c++)for(F=c*B,d=0;d<k;d++)K[c*k+d]=n[F+d]}}else{for(l=0;l<f;l++){A=v[l];z=new u(k*r);for(c=0;c<r;c++)for(F=c*B,d=0;d<k;d++)z[c*k+d]=(A[F+d]+A[F+d+1]+A[F+B+
d]+A[F+B+d+1])/4;E.push(z)}if(n)for(K=new Uint8Array(k*r),c=0;c<r;c++)for(F=c*B,d=0;d<k;d++)K[c*k+d]=Math.min.apply(null,[n[F+d],n[F+d+1],n[F+B+d],n[F+B+d+1]])}h.width=k;h.height=r;h.mask=K;h.pixels=E}}}function a(){a=aa._asyncToGenerator(function*(h,l={},v){if(null==h)throw new W("rasterCodec:decode","missing encodeddata parameter.");let B=l.format&&l.format.toLowerCase();if(!("bsq"!==B&&"bip"!==B||null!=l.width&&null!=l.height))throw new W("rasterCodec:decode","requires width and height in options parameter.");
if("tiff"===B&&l.customOptions)return l=U.decodeTileOrStrip(h,l.customOptions),l=new V({width:l.width,height:l.height,pixels:l.pixels,pixelType:l.pixelType.toLowerCase(),mask:l.mask,statistics:null}),l.updateStatistics(),l;if(!B||"bsq"!==B&&"bip"!==B)B=D(h);l.useCanvas&&p.has(B)?h=yield g(h,B,l,v):(v=x(B),l.isPoint&&(l={...l},l.width++,l.height++),h=v(h,l),l.isPoint&&t(h));return h});return a.apply(this,arguments)}var e=function(h){function l(n){var f,k;this.data=n;this.pos=8;this.palette=[];this.imgData=
[];this.transparency={};this.animation=null;this.text={};for(k=null;;){var r=this.readUInt32();var E=n=void 0;n=[];for(E=0;4>E;++E)n.push(String.fromCharCode(this.data[this.pos++]));n=n.join("");switch(n){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];this.colorType=this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation=
{numFrames:this.readUInt32(),numPlays:this.readUInt32()||Infinity,frames:[]};break;case "PLTE":this.palette=this.read(r);break;case "fcTL":k&&this.animation.frames.push(k);this.pos+=4;k={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};n=this.readUInt16();r=this.readUInt16()||100;k.delay=1E3*n/r;k.disposeOp=this.data[this.pos++];k.blendOp=this.data[this.pos++];k.data=[];break;case "IDAT":case "fdAT":"fdAT"===n&&(this.pos+=4,r-=4);n=(null!=k?k.data:
void 0)||this.imgData;for(E=0;0<=r?E<r:E>r;0<=r?++E:--E)n.push(this.data[this.pos++]);break;case "tRNS":this.transparency={};switch(this.colorType){case 3:this.transparency.indexed=this.read(r);r=255-this.transparency.indexed.length;if(0<r)for(n=0;0<=r?n<r:n>r;0<=r?++n:--n)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(r)[0];break;case 2:this.transparency.rgb=this.read(r)}break;case "tEXt":E=this.read(r);r=E.indexOf(0);n=String.fromCharCode.apply(String,E.slice(0,
r));this.text[n]=String.fromCharCode.apply(String,E.slice(r+1));break;case "IEND":k&&this.animation.frames.push(k);a:{switch(this.colorType){case 0:case 3:case 4:k=1;break a;case 2:case 6:k=3;break a}k=void 0}this.colors=k;this.hasAlphaChannel=4===(f=this.colorType)||6===f;f=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*f;a:{switch(this.colors){case 1:f="DeviceGray";break a;case 3:f="DeviceRGB";break a}f=void 0}this.colorSpace=f;this.imgData=new Uint8Array(this.imgData);return;
default:this.pos+=r}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");}}var v;l.load=function(n,f,k){"function"===typeof f&&(k=f);var r=new XMLHttpRequest;r.open("GET",n,!0);r.responseType="arraybuffer";r.onload=function(){var E=new Uint8Array(r.response||r.mozResponseArrayBuffer);E=new l(E);"function"===typeof(null!=f?f.getContext:void 0)&&E.render(f);return"function"===typeof k?k(E):void 0};return r.send(null)};l.prototype.read=function(n){var f;var k=[];for(f=
0;0<=n?f<n:f>n;0<=n?++f:--f)k.push(this.data[this.pos++]);return k};l.prototype.readUInt32=function(){var n=this.data[this.pos++]<<24;var f=this.data[this.pos++]<<16;var k=this.data[this.pos++]<<8;var r=this.data[this.pos++];return n|f|k|r};l.prototype.readUInt16=function(){var n=this.data[this.pos++]<<8;var f=this.data[this.pos++];return n|f};l.prototype.decodePixels=function(n){var f,k,r,E,c,d,u,A;null==n&&(n=this.imgData);if(0===n.length)return new Uint8Array(0);n=new P.Zlib(n);n=n.getBytes();
var z=this.pixelBitlength/8;var F=z*this.width;var K=new Uint8Array(F*this.height);var L=n.length;for(k=E=c=0;E<L;){switch(n[E++]){case 0:for(r=f=0;f<F;r=f+=1)K[k++]=n[E++];break;case 1:for(r=d=0;d<F;r=d+=1){f=n[E++];var H=r<z?0:K[k-z];K[k++]=(f+H)%256}break;case 2:for(r=H=0;H<F;r=H+=1){f=n[E++];var N=(r-r%z)/z;d=c&&K[(c-1)*F+N*z+r%z];K[k++]=(d+f)%256}break;case 3:for(r=A=0;A<F;r=A+=1)f=n[E++],N=(r-r%z)/z,H=r<z?0:K[k-z],d=c&&K[(c-1)*F+N*z+r%z],K[k++]=(f+Math.floor((H+d)/2))%256;break;case 4:for(r=
A=0;A<F;r=A+=1){f=n[E++];N=(r-r%z)/z;H=r<z?0:K[k-z];0===c?d=u=0:(d=K[(c-1)*F+N*z+r%z],u=N&&K[(c-1)*F+(N-1)*z+r%z]);var I=H+d-u;r=Math.abs(I-H);N=Math.abs(I-d);I=Math.abs(I-u);H=r<=N&&r<=I?H:N<=I?d:u;K[k++]=(f+H)%256}break;default:throw Error("Invalid filter algorithm: "+n[E-1]);}c++}return K};l.prototype.decodePalette=function(){var n,f,k,r,E;var c=this.palette;var d=this.transparency.indexed||[];var u=new Uint8Array((d.length||0)+c.length);var A=k=n=f=0;for(r=c.length;k<r;A=k+=3)u[f++]=c[A],u[f++]=
c[A+1],u[f++]=c[A+2],u[f++]=null!=(E=d[n++])?E:255;return u};l.prototype.copyToImageData=function(n,f){var k,r;var E=this.colors;var c=null;var d=this.hasAlphaChannel;this.palette.length&&(c=null!=(k=this._decodedPalette)?k:this._decodedPalette=this.decodePalette(),E=4,d=!0);n=n.data||n;var u=n.length;var A=c||f;k=r=0;if(1===E)for(;k<u;)E=c?4*f[k/4]:r,r=A[E++],n[k++]=r,n[k++]=r,n[k++]=r,n[k++]=d?A[E++]:this.transparency.grayscale&&this.transparency.grayscale===r?0:255,r=E;else for(;k<u;)E=c?4*f[k/
4]:r,n[k++]=A[E++],n[k++]=A[E++],n[k++]=A[E++],n[k++]=d?A[E++]:this.transparency.rgb&&this.transparency.rgb[1]===A[E-3]&&this.transparency.rgb[3]===A[E-2]&&this.transparency.rgb[5]===A[E-1]?0:255,r=E};l.prototype.decode=function(){var n=new Uint8Array(this.width*this.height*4);this.copyToImageData(n,this.decodePixels());return n};var B=(v=h.document&&h.document.createElement("canvas"))&&v.getContext("2d");var G=function(n){B.width=n.width;B.height=n.height;B.clearRect(0,0,n.width,n.height);B.putImageData(n,
0,0);n=new Image;n.src=v.toDataURL();return n};l.prototype.decodeFrames=function(n){var f,k;if(this.animation){var r=this.animation.frames;var E=[];var c=f=0;for(k=r.length;f<k;c=++f){c=r[c];var d=n.createImageData(c.width,c.height);var u=this.decodePixels(new Uint8Array(c.data));this.copyToImageData(d,u);c.imageData=d;E.push(c.image=G(d))}return E}};l.prototype.renderFrame=function(n,f){var k=this.animation.frames;var r=k[f];k=k[f-1];0===f&&n.clearRect(0,0,this.width,this.height);1===(null!=k?k.disposeOp:
void 0)?n.clearRect(k.xOffset,k.yOffset,k.width,k.height):2===(null!=k?k.disposeOp:void 0)&&n.putImageData(k.imageData,k.xOffset,k.yOffset);0===r.blendOp&&n.clearRect(r.xOffset,r.yOffset,r.width,r.height);return n.drawImage(r.image,r.xOffset,r.yOffset)};l.prototype.animate=function(n){var f,k=this;var r=0;var E=this.animation;var c=E.numFrames;var d=E.frames;var u=E.numPlays;return(f=function(){var A=r++%c;var z=d[A];k.renderFrame(n,A);if(1<c&&r/c<u)return k.animation._timeout=setTimeout(f,z.delay)})()};
l.prototype.stopAnimation=function(){var n;return clearTimeout(null!=(n=this.animation)?n._timeout:void 0)};l.prototype.render=function(n){n._png&&n._png.stopAnimation();n._png=this;n.width=this.width;n.height=this.height;n=n.getContext("2d");if(this.animation)return this.decodeFrames(n),this.animate(n);var f=n.createImageData(this.width,this.height);this.copyToImageData(f,this.decodePixels());return n.putImageData(f,0,0)};return l}(self);const p=new Set(["jpg","png","bmp","gif"]);ba.decode=function(h){return a.apply(this,
arguments)};ba.decodeLerc2=M;ba.getFormat=function(h){h=D(h);"lerc2"===h?h="lerc":"error"===h&&(h="");return h};Object.defineProperty(ba,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/ImageCanvasDecoder":function(){define(["../../../core/Error","../../../core/promiseUtils","../../../chunks/Zlib"],function(ba,aa,W){return function(){function V(q){q&&(this.canvas=q.canvas,this.ctx=q.ctx||q.canvas&&q.canvas.getContext("2d"))}V.prototype.decode=function(q,O,U){if(!q||10>q.byteLength)throw new ba("imagecanvasdecoder: decode",
"required a valid encoded data as input.");let {width:X,height:P,format:Z}=O;const {applyJpegMask:Q}=O;if(Q&&(!X||!P))throw new ba("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return new Promise((C,M)=>{let J=null;"jpg"===Z&&Q&&(J=V.getMask(q,{width:X,height:P}));const b=new Blob([new Uint8Array(q)],{type:"jpg"==="image/"+Z?"jpeg":Z}),w=URL.createObjectURL(b),g=new Image;let m;g.src=w;g.onload=()=>{URL.revokeObjectURL(w);if(aa.isAborted(U))M(aa.createAbortError());
else{X=g.width;P=g.height;if(this.canvas){if(this.canvas.width!==X||this.canvas.height!==P)this.canvas.width=X,this.canvas.height=P;this.ctx.clearRect(0,0,X,P)}else this.canvas=document.createElement("canvas"),this.canvas.width=X,this.canvas.height=P,this.ctx=this.canvas.getContext("2d");this.ctx.drawImage(g,0,0);var D=this.ctx.getImageData(0,0,X,P);m=D.data;var x;if(O.renderOnCanvas){if(J)for(x=0;x<J.length;x++)m[4*x+3]=J[x]?255:0;this.ctx.putImageData(D,0,0);C(null)}else{D=X*P;var y=new Uint8Array(D),
t=new Uint8Array(D),a=new Uint8Array(D);if(J)for(x=0;x<D;x++)y[x]=m[4*x],t[x]=m[4*x+1],a[x]=m[4*x+2];else for(J=new Uint8Array(D),x=0;x<D;x++)y[x]=m[4*x],t[x]=m[4*x+1],a[x]=m[4*x+2],J[x]=m[4*x+3];C({width:X,height:P,pixels:[y,t,a],mask:J,pixelType:"u8"})}}};g.onerror=()=>{URL.revokeObjectURL(w);M("cannot load image")}})};V.getMask=function(q,O){let U=null;try{var X=new Uint8Array(q);q=0;var P=X.length-2;for(q=Math.ceil(X.length/2);q<P&&(255!==X[q]||217!==X[q+1]);q++);q+=2;if(q<X.length-1){const Z=
(new W.Zlib(X.subarray(q))).getBytes();U=new Uint8Array(O.width*O.height);O=0;for(X=0;X<Z.length;X++)for(P=7;0<=P;P--)U[O++]=Z[X]>>P&1}}catch(Z){}return U};return V}()})},"esri/chunks/Zlib":function(){define(["exports"],function(ba){var aa={exports:{}};(function(W){(function(V){V=V();void 0!==V&&(W.exports=V)})(function(){var V=function(){function q(){this.bufferLength=this.pos=0;this.eof=!1;this.buffer=null}q.prototype={ensureBuffer:function(O){var U=this.buffer,X=U?U.byteLength:0;if(O<X)return U;
for(var P=512;P<O;)P<<=1;O=new Uint8Array(P);for(P=0;P<X;++P)O[P]=U[P];return this.buffer=O},getByte:function(){for(var O=this.pos;this.bufferLength<=O;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(O){var U=this.pos;if(O){this.ensureBuffer(U+O);for(O=U+O;!this.eof&&this.bufferLength<O;)this.readBlock();var X=this.bufferLength;O>X&&(O=X)}else{for(;!this.eof;)this.readBlock();O=this.bufferLength}this.pos=O;return this.buffer.subarray(U,O)},lookChar:function(){for(var O=
this.pos;this.bufferLength<=O;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var O=this.pos;this.bufferLength<=O;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(O,U,X){for(var P=O+U;this.bufferLength<=P&&!this.eof;)this.readBlock();return new Stream(this.buffer,O,U,X)},skip:function(O){O||(O=1);this.pos+=O},reset:function(){this.pos=0}};return q}();return function(){function q(C){throw Error(C);
}function O(C){var M=0,J=C[M++],b=C[M++];-1!=J&&-1!=b||q("Invalid header in flate stream");8!=(J&15)&&q("Unknown compression method in flate stream");0!=((J<<8)+b)%31&&q("Bad FCHECK in flate stream");b&32&&q("FDICT bit set in flate stream");this.bytes=C;this.bytesPos=M;this.codeBuf=this.codeSize=0;V.call(this)}if(!self||!self.Uint32Array)return null;var U=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),X=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,
131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),P=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),Z=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,
459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,
459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,
459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,
459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,
459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,
459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,
459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],Q=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,
327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];O.prototype=Object.create(V.prototype);O.prototype.getBits=function(C){for(var M=this.codeSize,J=this.codeBuf,b=this.bytes,w=this.bytesPos,g;M<C;)"undefined"==typeof(g=b[w++])&&q("Bad encoding in flate stream"),J|=g<<M,M+=8;this.codeBuf=J>>C;this.codeSize=M-=C;this.bytesPos=w;return J&(1<<C)-1};O.prototype.getCode=function(C){var M=C[0],J=C[1];C=this.codeSize;for(var b=
this.codeBuf,w=this.bytes,g=this.bytesPos;C<J;){var m;"undefined"==typeof(m=w[g++])&&q("Bad encoding in flate stream");b|=m<<C;C+=8}J=M[b&(1<<J)-1];M=J>>16;J&=65535;(0==C||C<M||0==M)&&q("Bad encoding in flate stream");this.codeBuf=b>>M;this.codeSize=C-M;this.bytesPos=g;return J};O.prototype.generateHuffmanTable=function(C){for(var M=C.length,J=0,b=0;b<M;++b)C[b]>J&&(J=C[b]);for(var w=1<<J,g=new Uint32Array(w),m=1,D=0,x=2;m<=J;++m,D<<=1,x<<=1)for(var y=0;y<M;++y)if(C[y]==m){var t=0,a=D;for(b=0;b<m;++b)t=
t<<1|a&1,a>>=1;for(b=t;b<w;b+=x)g[b]=m<<16|y;++D}return[g,J]};O.prototype.readBlock=function(){function C(t,a,e,p,h){for(t=t.getBits(e)+p;0<t--;)a[D++]=h}var M=this.getBits(3);M&1&&(this.eof=!0);M>>=1;if(0==M){var J=this.bytes,b=this.bytesPos,w;"undefined"==typeof(w=J[b++])&&q("Bad block header in flate stream");var g=w;"undefined"==typeof(w=J[b++])&&q("Bad block header in flate stream");g|=w<<8;"undefined"==typeof(w=J[b++])&&q("Bad block header in flate stream");M=w;"undefined"==typeof(w=J[b++])&&
q("Bad block header in flate stream");(M|w<<8)!=(~g&65535)&&q("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;w=this.bufferLength;M=this.ensureBuffer(w+g);this.bufferLength=g=w+g;for(var m=w;m<g;++m){if("undefined"==typeof(w=J[b++])){this.eof=!0;break}M[m]=w}this.bytesPos=b}else{if(1==M)b=Z,w=Q;else if(2==M){M=this.getBits(5)+257;w=this.getBits(5)+1;J=this.getBits(4)+4;b=Array(U.length);for(var D=0;D<J;)b[U[D++]]=this.getBits(3);b=this.generateHuffmanTable(b);D=J=0;w=
M+w;for(g=Array(w);D<w;)m=this.getCode(b),16==m?C(this,g,2,3,J):17==m?C(this,g,3,3,J=0):18==m?C(this,g,7,11,J=0):g[D++]=J=m;b=this.generateHuffmanTable(g.slice(0,M));w=this.generateHuffmanTable(g.slice(M,w))}else q("Unknown block type in flate stream");g=(M=this.buffer)?M.length:0;for(m=this.bufferLength;;){var x=this.getCode(b);if(256>x)m+1>=g&&(M=this.ensureBuffer(m+1),g=M.length),M[m++]=x;else{if(256==x){this.bufferLength=m;break}x-=257;x=X[x];var y=x>>16;0<y&&(y=this.getBits(y));J=(x&65535)+y;
x=this.getCode(w);x=P[x];y=x>>16;0<y&&(y=this.getBits(y));x=(x&65535)+y;m+J>=g&&(M=this.ensureBuffer(m+J),g=M.length);for(y=0;y<J;++y,++m)M[m]=M[m-x]}}}};return O}()})})(aa);ba.Zlib=aa.exports})},"esri/layers/support/rasterFormats/JpgPlus":function(){define(["../../../chunks/Jpg","../../../chunks/Zlib"],function(ba,aa){return function(){function W(){}W.decode=function(V){var q=new Uint8Array(V);V=new ba.JpegImage;V.parse(q);const {width:O,height:U,numComponents:X,eof:P}=V;V=V.getData(O,U,!0);let Z;
const Q=O*U;let C=0;var M=0,J=0;if(P<q.length-1)for(q=(new aa.Zlib(q.subarray(P))).getBytes(),Z=new Uint8Array(Q),C=M=0;C<q.length;C++)for(J=7;0<=J;J--)Z[M++]=q[C]>>J&1;q=null;if(1===X)q=[V,V,V];else{q=[];for(C=0;3>C;C++)J=new Uint8Array(Q),q.push(J);for(M=J=0;M<Q;M++)for(C=0;3>C;C++)q[C][M]=V[J++]}return{width:O,height:U,pixels:q,mask:Z}};return W}()})},"esri/chunks/Jpg":function(){define(["exports"],function(ba){var aa={exports:{}};(function(W){(function(V){V=V();void 0!==V&&(W.exports=V)})(function(){var V=
function(){function q(O){this.message="JPEG error: "+O}q.prototype=Error();q.prototype.name="JpegError";return q.constructor=q}();return function(){function q(){this.decodeTransform=null;this.colorTransform=-1}function O(Q,C){for(var M=0,J=[],b,w,g=16;0<g&&!Q[g-1];)g--;J.push({children:[],index:0});var m=J[0],D;for(b=0;b<g;b++){for(w=0;w<Q[b];w++){m=J.pop();for(m.children[m.index]=C[M];0<m.index;)m=J.pop();m.index++;for(J.push(m);J.length<=b;)J.push(D={children:[],index:0}),m.children[m.index]=D.children,
m=D;M++}b+1<g&&(J.push(D={children:[],index:0}),m.children[m.index]=D.children,m=D)}return J[0].children}function U(Q,C,M,J,b,w,g,m,D){function x(){if(0<f)return f--,n>>f&1;n=Q[C++];if(255===n){var I=Q[C++];if(I)throw new V("unexpected marker "+(n<<8|I).toString(16));}f=7;return n>>>7}function y(I){for(;;){I=I[x()];if("number"===typeof I)return I;if("object"!==typeof I)throw new V("invalid huffman sequence");}}function t(I){for(var R=0;0<I;)R=R<<1|x(),I--;return R}function a(I){if(1===I)return 1===
x()?1:-1;var R=t(I);return R>=1<<I-1?R:R+(-1<<I)+1}function e(I,R){var T=y(I.huffmanTableDC);T=0===T?0:a(T);I.blockData[R]=I.pred+=T;for(T=1;64>T;){var S=y(I.huffmanTableAC),Y=S&15;S>>=4;if(0===Y){if(15>S)break;T+=16}else T+=S,I.blockData[R+Z[T]]=a(Y),T++}}function p(I,R){var T=y(I.huffmanTableDC);T=0===T?0:a(T)<<D;I.blockData[R]=I.pred+=T}function h(I,R){I.blockData[R]|=x()<<D}function l(I,R){if(0<k)k--;else for(var T=w;T<=g;){var S=y(I.huffmanTableAC),Y=S&15;S>>=4;if(0===Y){if(15>S){k=t(S)+(1<<
S)-1;break}T+=16}else T+=S,I.blockData[R+Z[T]]=a(Y)*(1<<D),T++}}function v(I,R){for(var T=w,S=0,Y;T<=g;){Y=Z[T];switch(r){case 0:S=y(I.huffmanTableAC);Y=S&15;S>>=4;if(0===Y)15>S?(k=t(S)+(1<<S),r=4):(S=16,r=1);else{if(1!==Y)throw new V("invalid ACn encoding");E=a(Y);r=S?2:3}continue;case 1:case 2:I.blockData[R+Y]?I.blockData[R+Y]+=x()<<D:(S--,0===S&&(r=2===r?3:0));break;case 3:I.blockData[R+Y]?I.blockData[R+Y]+=x()<<D:(I.blockData[R+Y]=E<<D,r=0);break;case 4:I.blockData[R+Y]&&(I.blockData[R+Y]+=x()<<
D)}T++}4===r&&(k--,0===k&&(r=0))}var B=M.mcusPerLine,G=C,n=0,f=0,k=0,r=0,E,c=J.length,d,u,A,z;m=M.progressive?0===w?0===m?p:h:0===m?l:v:e;var F=0;M=1===c?J[0].blocksPerLine*J[0].blocksPerColumn:B*M.mcusPerColumn;for(var K,L;F<M;){var H=b?Math.min(M-F,b):M;for(d=0;d<c;d++)J[d].pred=0;k=0;if(1===c){var N=J[0];for(z=0;z<H;z++)m(N,64*((N.blocksPerLine+1)*(F/N.blocksPerLine|0)+F%N.blocksPerLine)),F++}else for(z=0;z<H;z++){for(d=0;d<c;d++)for(N=J[d],K=N.h,L=N.v,u=0;u<L;u++)for(A=0;A<K;A++)m(N,64*((N.blocksPerLine+
1)*((F/B|0)*N.v+u)+(F%B*N.h+A)));F++}f=0;(N=P(Q,C))&&N.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+N.invalid),C=N.offset);N=N&&N.marker;if(!N||65280>=N)throw new V("marker was not found");if(65488<=N&&65495>=N)C+=2;else break}(N=P(Q,C))&&N.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+N.invalid),C=N.offset);return C-G}function X(Q,C){Q=C.blocksPerLine;for(var M=C.blocksPerColumn,J=new Int16Array(64),b=0;b<M;b++)for(var w=0;w<Q;w++){var g=
void 0,m=void 0,D=void 0,x=void 0,y=void 0,t=void 0,a=void 0,e=void 0,p=y=t=x=m=g=void 0,h=void 0,l=void 0,v=void 0,B=64*((C.blocksPerLine+1)*b+w),G=J,n=C.quantizationTable,f=C.blockData;if(!n)throw new V("missing required Quantization Table.");for(var k=0;64>k;k+=8)g=f[B+k],e=f[B+k+1],a=f[B+k+2],t=f[B+k+3],y=f[B+k+4],x=f[B+k+5],D=f[B+k+6],m=f[B+k+7],g*=n[k],0===(e|a|t|y|x|D|m)?(g=5793*g+512>>10,G[k]=g,G[k+1]=g,G[k+2]=g,G[k+3]=g,G[k+4]=g,G[k+5]=g,G[k+6]=g,G[k+7]=g):(e*=n[k+1],a*=n[k+2],t*=n[k+3],
y*=n[k+4],x*=n[k+5],D*=n[k+6],m*=n[k+7],v=5793*g+128>>8,l=5793*y+128>>8,h=a,p=D,y=2896*(e-m)+128>>8,m=2896*(e+m)+128>>8,t<<=4,x<<=4,v=v+l+1>>1,l=v-l,g=3784*h+1567*p+128>>8,h=1567*h-3784*p+128>>8,p=g,y=y+x+1>>1,x=y-x,m=m+t+1>>1,t=m-t,v=v+p+1>>1,p=v-p,l=l+h+1>>1,h=l-h,g=2276*y+3406*m+2048>>12,y=3406*y-2276*m+2048>>12,m=g,g=799*t+4017*x+2048>>12,t=4017*t-799*x+2048>>12,x=g,G[k]=v+m,G[k+7]=v-m,G[k+1]=l+x,G[k+6]=l-x,G[k+2]=h+t,G[k+5]=h-t,G[k+3]=p+y,G[k+4]=p-y);for(n=0;8>n;++n)g=G[n],e=G[n+8],a=G[n+16],
t=G[n+24],y=G[n+32],x=G[n+40],D=G[n+48],m=G[n+56],0===(e|a|t|y|x|D|m)?(g=5793*g+8192>>14,g=-2040>g?0:2024<=g?255:g+2056>>4,f[B+n]=g,f[B+n+8]=g,f[B+n+16]=g,f[B+n+24]=g,f[B+n+32]=g,f[B+n+40]=g,f[B+n+48]=g,f[B+n+56]=g):(v=5793*g+2048>>12,l=5793*y+2048>>12,h=a,p=D,y=2896*(e-m)+2048>>12,m=2896*(e+m)+2048>>12,v=(v+l+1>>1)+4112,l=v-l,g=3784*h+1567*p+2048>>12,h=1567*h-3784*p+2048>>12,p=g,y=y+x+1>>1,x=y-x,m=m+t+1>>1,t=m-t,v=v+p+1>>1,p=v-p,l=l+h+1>>1,h=l-h,g=2276*y+3406*m+2048>>12,y=3406*y-2276*m+2048>>12,
m=g,g=799*t+4017*x+2048>>12,t=4017*t-799*x+2048>>12,x=g,g=v+m,m=v-m,e=l+x,D=l-x,a=h+t,x=h-t,t=p+y,y=p-y,g=16>g?0:4080<=g?255:g>>4,e=16>e?0:4080<=e?255:e>>4,a=16>a?0:4080<=a?255:a>>4,t=16>t?0:4080<=t?255:t>>4,y=16>y?0:4080<=y?255:y>>4,x=16>x?0:4080<=x?255:x>>4,D=16>D?0:4080<=D?255:D>>4,m=16>m?0:4080<=m?255:m>>4,f[B+n]=g,f[B+n+8]=e,f[B+n+16]=a,f[B+n+24]=t,f[B+n+32]=y,f[B+n+40]=x,f[B+n+48]=D,f[B+n+56]=m)}return C.blockData}function P(Q,C,M){var J=Q.length-1;M=M<C?M:C;if(C>=J)return null;var b=Q[C]<<
8|Q[C+1];if(65472<=b&&65534>=b)return{invalid:null,marker:b,offset:C};for(C=Q[M]<<8|Q[M+1];!(65472<=C&&65534>=C);){if(++M>=J)return null;C=Q[M]<<8|Q[M+1]}return{invalid:b.toString(16),marker:C,offset:M}}if(!self||!self.Uint8ClampedArray)return null;var Z=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);q.prototype={parse:function(Q){function C(){var n=
Q[b]<<8|Q[b+1];b+=2;return n}function M(){var n=C();n=b+n-2;var f=P(Q,n,b);f&&f.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+f.invalid),n=f.offset);n=Q.subarray(b,n);b+=n.length;return n}function J(n){for(var f=Math.ceil(n.samplesPerLine/8/n.maxH),k=Math.ceil(n.scanLines/8/n.maxV),r=0;r<n.components.length;r++){G=n.components[r];var E=Math.ceil(Math.ceil(n.samplesPerLine/8)*G.h/n.maxH),c=Math.ceil(Math.ceil(n.scanLines/8)*G.v/n.maxV);G.blockData=new Int16Array(64*k*G.v*
(f*G.h+1));G.blocksPerLine=E;G.blocksPerColumn=c}n.mcusPerLine=f;n.mcusPerColumn=k}var b=0,w=null,g=null,m=[],D=[],x=[],y=C();if(65496!==y)throw new V("SOI not found");for(y=C();65497!==y;){switch(y){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var t=M();65504===y&&74===t[0]&&70===t[1]&&73===t[2]&&70===t[3]&&0===t[4]&&(w={version:{major:t[5],minor:t[6]},densityUnits:t[7],
xDensity:t[8]<<8|t[9],yDensity:t[10]<<8|t[11],thumbWidth:t[12],thumbHeight:t[13],thumbData:t.subarray(14,14+3*t[12]*t[13])});65518===y&&65===t[0]&&100===t[1]&&111===t[2]&&98===t[3]&&101===t[4]&&(g={version:t[5]<<8|t[6],flags0:t[7]<<8|t[8],flags1:t[9]<<8|t[10],transformCode:t[11]});break;case 65499:y=C()+b-2;for(var a;b<y;){var e=Q[b++],p=new Uint16Array(64);if(0===e>>4)for(t=0;64>t;t++)a=Z[t],p[a]=Q[b++];else if(1===e>>4)for(t=0;64>t;t++)a=Z[t],p[a]=C();else throw new V("DQT - invalid table spec");
m[e&15]=p}break;case 65472:case 65473:case 65474:if(h)throw new V("Only single frame JPEGs supported");C();var h={};h.extended=65473===y;h.progressive=65474===y;h.precision=Q[b++];h.scanLines=C();h.samplesPerLine=C();h.components=[];h.componentIds={};t=Q[b++];for(y=p=e=0;y<t;y++){a=Q[b];var l=Q[b+1]>>4;var v=Q[b+1]&15;e<l&&(e=l);p<v&&(p=v);l=h.components.push({h:l,v,quantizationId:Q[b+2],quantizationTable:null});h.componentIds[a]=l-1;b+=3}h.maxH=e;h.maxV=p;J(h);break;case 65476:a=C();for(y=2;y<a;){e=
Q[b++];p=new Uint8Array(16);for(t=l=0;16>t;t++,b++)l+=p[t]=Q[b];v=new Uint8Array(l);for(t=0;t<l;t++,b++)v[t]=Q[b];y+=17+l;(0===e>>4?x:D)[e&15]=O(p,v)}break;case 65501:C();var B=C();break;case 65498:C();a=Q[b++];t=[];for(y=0;y<a;y++){e=h.componentIds[Q[b++]];var G=h.components[e];e=Q[b++];G.huffmanTableDC=x[e>>4];G.huffmanTableAC=D[e&15];t.push(G)}y=Q[b++];a=Q[b++];e=Q[b++];y=U(Q,b,h,t,B,y,a,e>>4,e&15);b+=y;break;case 65535:255!==Q[b]&&b--;break;default:if(255===Q[b-3]&&192<=Q[b-2]&&254>=Q[b-2])b-=
3;else throw new V("unknown marker "+y.toString(16));}y=C()}this.width=h.samplesPerLine;this.height=h.scanLines;this.jfif=w;this.eof=b;this.adobe=g;this.components=[];for(y=0;y<h.components.length;y++){G=h.components[y];if(w=m[G.quantizationId])G.quantizationTable=w;this.components.push({output:X(h,G),scaleX:G.h/h.maxH,scaleY:G.v/h.maxV,blocksPerLine:G.blocksPerLine,blocksPerColumn:G.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(Q,C){var M=this.width/
Q,J=this.height/C,b,w,g=0,m=this.components.length,D=Q*C*m,x=new Uint8ClampedArray(D),y=new Uint32Array(Q);for(w=0;w<m;w++){var t=this.components[w];var a=t.scaleX*M;var e=t.scaleY*J;g=w;var p=t.output;var h=t.blocksPerLine+1<<3;for(b=0;b<Q;b++)t=0|b*a,y[b]=(t&4294967288)<<3|t&7;for(a=0;a<C;a++)for(t=0|a*e,t=h*(t&4294967288)|(t&7)<<3,b=0;b<Q;b++)x[g]=p[t+y[b]],g+=m}if(C=this.decodeTransform)for(w=0;w<D;)for(Q=t=0;t<m;t++,w++,Q+=2)x[w]=(x[w]*C[Q]>>8)+C[Q+1];return x},_isColorConversionNeeded:function(){return this.adobe?
!!this.adobe.transformCode:3===this.numComponents?0===this.colorTransform?!1:!0:1===this.colorTransform?!0:!1},_convertYccToRgb:function(Q){for(var C,M,J,b=0,w=Q.length;b<w;b+=3)C=Q[b],M=Q[b+1],J=Q[b+2],Q[b]=C-179.456+1.402*J,Q[b+1]=C+135.459-.344*M-.714*J,Q[b+2]=C-226.816+1.772*M;return Q},_convertYcckToRgb:function(Q){for(var C,M,J,b,w=0,g=0,m=Q.length;g<m;g+=4)C=Q[g],M=Q[g+1],J=Q[g+2],b=Q[g+3],Q[w++]=-122.67195406894+M*(-6.60635669420364E-5*M+4.37130475926232E-4*J-5.4080610064599E-5*C+4.8449797120281E-4*
b-.154362151871126)+J*(-9.57964378445773E-4*J+8.17076911346625E-4*C-.00477271405408747*b+1.53380253221734)+C*(9.61250184130688E-4*C-.00266257332283933*b+.48357088451265)+b*(-3.36197177618394E-4*b+.484791561490776),Q[w++]=107.268039397724+M*(2.19927104525741E-5*M-6.40992018297945E-4*J+6.59397001245577E-4*C+4.26105652938837E-4*b-.176491792462875)+J*(-7.78269941513683E-4*J+.00130872261408275*C+7.70482631801132E-4*b-.151051492775562)+C*(.00126935368114843*C-.00265090189010898*b+.25802910206845)+b*(-3.18913117588328E-4*
b-.213742400323665),Q[w++]=-20.810012546947+M*(-5.70115196973677E-4*M-2.63409051004589E-5*J+.0020741088115012*C-.00288260236853442*b+.814272968359295)+J*(-1.53496057440975E-5*J-1.32689043961446E-4*C+5.60833691242812E-4*b-.195152027534049)+C*(.00174418132927582*C-.00255243321439347*b+.116935020465145)+b*(-3.43531996510555E-4*b+.24165260232407);return Q},_convertYcckToCmyk:function(Q){for(var C,M,J,b=0,w=Q.length;b<w;b+=4)C=Q[b],M=Q[b+1],J=Q[b+2],Q[b]=434.456-C-1.402*J,Q[b+1]=119.541-C+.344*M+.714*
J,Q[b+2]=481.816-C-1.772*M;return Q},_convertCmykToRgb:function(Q){for(var C,M,J,b,w=0,g=1/255,m=0,D=Q.length;m<D;m+=4)C=Q[m]*g,M=Q[m+1]*g,J=Q[m+2]*g,b=Q[m+3]*g,Q[w++]=255+C*(-4.387332384609988*C+54.48615194189176*M+18.82290502165302*J+212.25662451639585*b-285.2331026137004)+M*(1.7149763477362134*M-5.6096736904047315*J-17.873870861415444*b-5.497006427196366)+J*(-2.5217340131683033*J-21.248923337353073*b+17.5119270841813)-b*(21.86122147463605*b+189.48180835922747),Q[w++]=255+C*(8.841041422036149*C+
60.118027045597366*M+6.871425592049007*J+31.159100130055922*b-79.2970844816548)+M*(-15.310361306967817*M+17.575251261109482*J+131.35250912493976*b-190.9453302588951)+J*(4.444339102852739*J+9.8632861493405*b-24.86741582555878)-b*(20.737325471181034*b+187.80453709719578),Q[w++]=255+C*(.8842522430003296*C+8.078677503112928*M+30.89978309703729*J-.23883238689178934*b-14.183576799673286)+M*(10.49593273432072*M+63.02378494754052*J+50.606957656360734*b-112.23884253719248)+J*(.03296041114873217*J+115.60384449646641*
b-193.58209356861505)-b*(22.33816807309886*b+180.12613974708367);return Q},getData:function(Q,C,M){if(4<this.numComponents)throw new V("Unsupported color mode");Q=this._getLinearizedBlockData(Q,C);if(1===this.numComponents&&M){M=Q.length;C=new Uint8ClampedArray(3*M);for(var J=0,b=0;b<M;b++){var w=Q[b];C[J++]=w;C[J++]=w;C[J++]=w}return C}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(Q);if(4===this.numComponents){if(this._isColorConversionNeeded())return M?
this._convertYcckToRgb(Q):this._convertYcckToCmyk(Q);if(M)return this._convertCmykToRgb(Q)}return Q}};return q}()})})(aa);ba.JpegImage=aa.exports})},"esri/chunks/TiffDecoder":function(){define("exports ../layers/support/rasterDatasets/byteStreamUtils ./Jpg ../layers/support/rasterFormats/Lzw ../layers/support/rasterFormats/TiffTags ../layers/support/rasterFormats/utils ./Zlib".split(" "),function(ba,aa,W,V,q,O,U){function X(f,k){let r="unknown";3===f?r="f32":1===f?1===k?r="u1":2===k?r="u2":4===k?
r="u4":8>=k?r="u8":16>=k?r="u16":32>=k&&(r="u32"):2===f&&(8>=k?r="s8":16>=k?r="s16":32>=k&&(r="s32"));return r}function P(f){let k=null;switch(f?f.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":k=Uint8Array;break;case "u16":k=Uint16Array;break;case "u32":k=Uint32Array;break;case "s8":k=Int8Array;break;case "s16":k=Int16Array;break;case "s32":k=Int32Array;break;default:k=Float32Array}return k}function Z(f,k){return{x:k[0]*f.x+k[1]*f.y+k[2],y:k[3]*f.x+k[4]*f.y+k[5]}}function Q(f,k){var r;
return null==(r=f.get(k))?void 0:r.values}function C(f,k){var r;return null==(r=f.get(k))?void 0:r.values}function M(f,k){var r;return null==(r=f.get(k))?void 0:r.values[0]}function J(f,k){var r;return null==(r=f.get(k))?void 0:r.values[0]}function b(f,k,r,E=0,c=q.TIFF_TAGS,d=4){var u=8===d;const A=u?x(new DataView(f,r,8),0,k):(new DataView(f,r,2)).getUint16(0,k),z=4+2*d;var F=u?8:2;u=F+A*z;if(r+u>f.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:u};const K=r+u+4<=f.byteLength?
y(new DataView(f,r+u,8===d?8:4),0,k,8===d):null;r+=F;F=new Map;let L,H,N,I,R;for(let S=0;S<A;S++){var T=new DataView(f,r+z*S,z);L=T.getUint16(0,k);N=T.getUint16(2,k);H=q.getTagName(L,c);const Y=[];2===d?(I=T.getUint16(4,k),R=T.getUint16(6,k)):4===d?(I=T.getUint32(4,k),R=T.getUint32(8,k)):8===d&&(I=y(T,4,k,!0),R=y(T,12,k,!0),Y.push(T.getUint32(12,k)),Y.push(T.getUint32(16,k)));T={id:L,type:N,valueCount:I,valueOffset:R,valueOffsets:Y,values:null};w(f,k,T,E,!1,d);F.set(H,T)}return{success:!0,ifd:F,nextIFD:K,
requiredBufferSize:u}}function w(f,k,r,E=0,c=!1,d=4){if(r.values)return!0;var u=r.type,A=r.valueCount,z=r.valueOffset;let F=[];var K=l[u],L=8*K,H=A*K,N=A*l[u]*8,I=8===d?64:32;d=r.valueOffsets;if(N>I&&H>(c?f.byteLength:f?f.byteLength-z+E:0))return r.offlineOffsetSize=[z,H],r.values=null,!1;if(N<=I)if(k||(32>=I?z>>>=32-N:(f=null!=d&&d.length?d[0]:z>>>0,k=null!=d&&d.length?d[1]:Math.round((z-f)/4294967296),32>=N?(z=f>>>32-N,d[0]=z):(z=f*2**(32-N)+(k>>>32-N),d[0]=f,d[1]=k>>>32-N))),1===A&&L===I)F=[z];
else if(64===I)for(f=null!=d&&d.length?d[0]:z>>>0,z=null!=d&&d.length?d[1]:Math.round((z-f)/4294967296),k=f,K=32,f=1;f<=A;f++)H=32-L*f%32,K<L?(H=k<<H>>>32-K,N=z<<32-K>>>32-K,k=z,F.push(H+N*2**(L-K)),K-=32-(L-K)):(F.push(k<<H>>>32-L),K-=L),0===K&&(K=32,k=z);else for(f=1;f<=A;f++)F.push(z<<32-L*f>>>32-L);else for(z-=E,c&&(z=0),A=z;A<z+H;A+=K){switch(u){case 1:L=(new DataView(f,A,1)).getUint8(0);break;case 2:L=(new DataView(f,A,1)).getUint8(0);break;case 3:L=(new DataView(f,A,2)).getUint16(0,k);break;
case 4:case 13:L=(new DataView(f,A,4)).getUint32(0,k);break;case 5:L=(new DataView(f,A,4)).getUint32(0,k)/(new DataView(f,A+4,4)).getUint32(0,k);break;case 6:L=(new DataView(f,A,1)).getInt8(0);break;case 7:L=(new DataView(f,A,1)).getUint8(0);break;case 8:L=(new DataView(f,A,2)).getInt16(0,k);break;case 9:L=(new DataView(f,A,4)).getInt32(0,k);break;case 10:L=(new DataView(f,A,4)).getInt32(0,k)/(new DataView(f,A+4,4)).getInt32(0,k);break;case 11:L=(new DataView(f,A,4)).getFloat32(0,k);break;case 12:L=
(new DataView(f,A,8)).getFloat64(0,k);break;case 16:case 18:L=x(new DataView(f,A,8),0,k);break;case 17:d=new DataView(f,A,8);N=(L=k)?d.getInt32(0,L):d.getUint32(0,L);d=L?d.getUint32(4,L):d.getInt32(4,L);I=0<=(L?N:d)?1:-1;L?N*=I:d*=I;L=I*(L?4294967296*d+N:4294967296*N+d);break;default:L=null}F.push(L)}if(2===u){u="";z=F;F=[];for(f=0;f<z.length;f++)0===z[f]&&""!==u?(F.push(u),u=""):u+=String.fromCharCode(z[f]);""===u&&0!==F.length||F.push(u)}r.values=F;return!0}function g(f){var k,r,E=f[0];const c=
J(E,"TILEWIDTH"),d=J(E,"TILELENGTH"),u=J(E,"IMAGEWIDTH"),A=J(E,"IMAGELENGTH");var z=J(E,"BITSPERSAMPLE");const F=J(E,"SAMPLESPERPIXEL");var K=null!=(k=J(E,"SAMPLEFORMAT"))?k:1;k=X(K,z);const L=m(E);var H=Q(E,"GDAL_NODATA");let N;null!=H&&H.length&&(N=H.map(ia=>parseFloat(ia)),N.some(ia=>isNaN(ia))&&(N=null));var I=null!=(r=J(E,"COMPRESSION"))?r:1;switch(I){case 1:r="NONE";break;case 2:case 3:case 4:case 32771:r="CCITT";break;case 5:r="LZW";break;case 6:case 7:r="JPEG";break;case 32773:r="PACKBITS";
break;case 8:case 32946:r="DEFLATE";break;case 34712:r="JPEG2000";break;case 34887:r="LERC";break;default:r=String(I)}H=!0;let R="";v.has(I)||(H=!1,R+="unsupported tag compression "+I);3<K&&(H=!1,R+="unsupported tag sampleFormat "+K);0!==z%8&&(H=!1,R+="unsupported tag bitsPerSample "+z);z=M(E,"GEOASCIIPARAMS");if(z){var T=(T=z.split("|").filter(ia=>-1<ia.indexOf("ESRI PE String \x3d "))[0])?T.replace("ESRI PE String \x3d ",""):"";T=T.startsWith("COMPD_CS")||T.startsWith("PROJCS")||T.startsWith("GEOGCS")?
{wkid:null,wkt:T}:null}K=C(E,"GEOTIEPOINTS");z=C(E,"GEOPIXELSCALE");I=C(E,"GEOTRANSMATRIX");var S=E.has("GEOKEYDIRECTORY")?E.get("GEOKEYDIRECTORY").data:null;E=!1;if(S){E=2===J(S,"GTRasterTypeGeoKey");var Y=J(S,"GTModelTypeGeoKey");2===Y?(S=J(S,"GeographicTypeGeoKey"),1024<=S&&32766>=S&&(T={wkid:S})):1===Y&&(S=J(S,"ProjectedCSTypeGeoKey"),1024<=S&&32766>=S&&(T={wkid:S}))}let da;z&&K&&6<=K.length?(da=[z[0],0,K[3]-K[0]*z[0],0,-Math.abs(z[1]),K[4]-K[1]*z[1]],E&&(da[2]-=.5*da[0]+.5*da[1],da[5]-=.5*da[3]+
.5*da[4])):I&&16===I.length&&(da=E?[I[0],I[1],I[3]-.5*I[0],I[4],I[5],I[7]-.5*I[5]]:[I[0],I[1],I[3],I[4],I[5],I[7]]);if(da){E=[{x:0,y:A},{x:0,y:0},{x:u,y:A},{x:u,y:0}];S=I=Number.POSITIVE_INFINITY;let ia=Y=Number.NEGATIVE_INFINITY;for(let ca=0;ca<E.length;ca++)K=Z(E[ca],da),I=K.x>I?I:K.x,Y=K.x<Y?Y:K.x,S=K.y>S?S:K.y,ia=K.y<ia?ia:K.y;T={xmin:I,xmax:Y,ymin:S,ymax:ia,spatialReference:T}}else T={xmin:-.5,ymin:.5-A,xmax:u-.5,ymax:.5,spatialReference:T};E=f.filter(ia=>1===M(ia,"NEWSUBFILETYPE"));let fa,la,
ha;if(0<E.length){fa=Math.round(Math.log(u/J(E[0],"IMAGEWIDTH"))/Math.LN2);var ea=E[E.length-1];la=Math.round(Math.log(u/J(ea,"IMAGEWIDTH"))/Math.LN2);ha=J(ea,"TILEWIDTH");ea=J(ea,"TILELENGTH")}ha=0<la?ha||c:null;ea=0<la?ea||d:null;let ka;c&&(ka=[{maxCol:Math.ceil(u/c)-1,maxRow:Math.ceil(A/d)-1,minRow:0,minCol:0}],E.forEach(ia=>{ka.push({maxCol:Math.ceil(J(ia,"IMAGEWIDTH")/J(ia,"TILEWIDTH"))-1,maxRow:Math.ceil(J(ia,"IMAGELENGTH")/J(ia,"TILELENGTH"))-1,minRow:0,minCol:0})}));E=M(f[0],"GDAL_METADATA");
E=n(E);R+=" "+e({width:u,height:A,tileWidth:c,tileHeight:d,planes:F,ifds:f});return{width:u,height:A,tileWidth:c,tileHeight:d,planes:F,isBSQ:L,pixelType:k,compression:r,noData:N,isSupported:H,message:R,extent:T,affine:z?null:da,firstPyramidLevel:fa,maximumPyramidLevel:la,pyramidBlockWidth:ha,pyramidBlockHeight:ea,tileBoundary:ka,metadata:E}}function m(f,k){return(f=Q(f,"PLANARCONFIGURATION"))?2===f[0]:k?k.isBSQ:!1}function D(f){const {littleEndian:k,isBigTiff:r,firstIFD:E}=t(f);var c=E;const d=[];
do if(c=a(f,k,c,0,q.TIFF_TAGS,r?8:4),c.success)d.push(c.ifd),c=c.nextIFD;else break;while(0<c);return{...g(d),littleEndian:k,isBigTiff:r,ifds:d}}function x(f,k,r){const E=f.getUint32(k,r);f=f.getUint32(k+4,r);return r?4294967296*f+E:4294967296*E+f}function y(f,k,r,E){return E?x(f,k,r):f.getUint32(k,r)}function t(f){var k=new DataView(f,0,16),r=k.getUint16(0,!1);f=null;if(18761===r)f=!0;else if(19789===r)f=!1;else throw"unexpected endianess byte";var E=k.getUint16(2,f);if(42!==E&&43!==E)throw"unexpected tiff identifier";
r=4;if(E=43===E){const c=k.getUint16(r,f);r+=2;if(8!==c)throw"unsupported bigtiff version";if(0!==k.getUint16(r,f))throw"unsupported bigtiff version";r+=2}k=y(k,r,f,E);return{littleEndian:f,isBigTiff:E,firstIFD:k}}function a(f,k,r,E=0,c=q.TIFF_TAGS,d=4){r=b(f,k,r,E,c,d);let u;const A=r.ifd;A&&(q.ifdTags.forEach((z,F)=>{A.has(F)&&(u=A.get(F),u.data=b(f,k,u.valueOffset-E,E,z).ifd)}),A.has("GEOKEYDIRECTORY")&&(u=A.get("GEOKEYDIRECTORY"),(c=u.values)&&4<c.length&&(c=c[0]+"."+c[1]+"."+c[2],u.data=b(f,
k,u.valueOffset+6-E,E,q.GEO_KEYS,2).ifd,u.data&&u.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[c]}))),A.has("XMP")&&(u=A.get("XMP"),c=u.values,"number"===typeof c[0]&&7===u.type&&(u.values=[aa.bytesToUTF8(new Uint8Array(c))])));return r}function e(f){const {width:k,height:r,tileHeight:E,tileWidth:c}=f,d=f.planes,u=c?c*E:k*r;f=J(f.ifds[0],"BITSPERSAMPLE");let A="";u*d>2**30/(8<f?f/8:1)&&(A=c?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported");
return A}var p={exports:{}};(function(f){(function(k){k=k();void 0!==k&&(f.exports=k)})(function(){var k={unstuff:function(c,d,u,A,z,F,K,L){var H=(1<<u)-1,N=0,I,R=0;c[c.length-1]<<=8*(4*c.length-Math.ceil(u*A/8));if(z)for(I=0;I<A;I++){if(0===R){var T=c[N++];R=32}if(R>=u){var S=T>>>R-u&H;R-=u}else R=u-R,S=(T&H)<<R&H,T=c[N++],R=32-R,S+=T>>>R;d[I]=z[S]}else for(z=Math.ceil((L-F)/K),I=0;I<A;I++)0===R&&(T=c[N++],R=32),R>=u?(S=T>>>R-u&H,R-=u):(R=u-R,S=(T&H)<<R&H,T=c[N++],R=32-R,S+=T>>>R),d[I]=S<z?F+S*K:
L},unstuffLUT:function(c,d,u,A,z,F){var K=(1<<d)-1,L=0,H=0,N=0,I=N=0,R=[];c[c.length-1]<<=8*(4*c.length-Math.ceil(d*u/8));var T=Math.ceil((F-A)/z);for(H=0;H<u;H++){if(0===N){var S=c[L++];N=32}N>=d?(I=S>>>N-d&K,N-=d):(N=d-N,I=(S&K)<<N&K,S=c[L++],N=32-N,I+=S>>>N);R[H]=I<T?A+I*z:F}R.unshift(A);return R},unstuff2:function(c,d,u,A,z,F,K,L){var H=(1<<u)-1,N=0,I,R=0,T=0;if(z)for(I=0;I<A;I++){if(0===R){var S=c[N++];R=32;T=0}if(R>=u){var Y=S>>>T&H;R-=u;T+=u}else{var da=u-R;Y=S>>>T&H;S=c[N++];R=32-da;Y|=(S&
(1<<da)-1)<<u-da;T=da}d[I]=z[Y]}else for(z=Math.ceil((L-F)/K),I=0;I<A;I++)0===R&&(S=c[N++],R=32,T=0),R>=u?(Y=S>>>T&H,R-=u,T+=u):(da=u-R,Y=S>>>T&H,S=c[N++],R=32-da,Y|=(S&(1<<da)-1)<<u-da,T=da),d[I]=Y<z?F+Y*K:L;return d},unstuffLUT2:function(c,d,u,A,z,F){var K=(1<<d)-1,L=0,H=0,N=0,I=0,R=0,T=0,S=[],Y=Math.ceil((F-A)/z);for(H=0;H<u;H++){if(0===I){var da=c[L++];I=32;T=0}I>=d?(R=da>>>T&K,I-=d,T+=d):(N=d-I,R=da>>>T&K,da=c[L++],I=32-N,R|=(da&(1<<N)-1)<<d-N,T=N);S[H]=R<Y?A+R*z:F}S.unshift(A);return S},originalUnstuff:function(c,
d,u,A){var z=(1<<u)-1,F=0,K,L=0;c[c.length-1]<<=8*(4*c.length-Math.ceil(u*A/8));for(K=0;K<A;K++){if(0===L){var H=c[F++];L=32}if(L>=u){var N=H>>>L-u&z;L-=u}else L=u-L,N=(H&z)<<L&z,H=c[F++],L=32-L,N+=H>>>L;d[K]=N}return d},originalUnstuff2:function(c,d,u,A){var z=(1<<u)-1,F=0,K,L=0,H=0;for(K=0;K<A;K++){if(0===L){var N=c[F++];L=32;H=0}if(L>=u){var I=N>>>H&z;L-=u;H+=u}else{var R=u-L;I=N>>>H&z;N=c[F++];L=32-R;I|=(N&(1<<R)-1)<<u-R;H=R}d[K]=I}return d}},r={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(c){for(var d=
65535,u=65535,A=c.length,z=Math.floor(A/2),F=0;z;){var K=359<=z?359:z;z-=K;do d+=c[F++]<<8,u+=d+=c[F++];while(--K);d=(d&65535)+(d>>>16);u=(u&65535)+(u>>>16)}A&1&&(u+=d+=c[F]<<8);return((u&65535)+(u>>>16)<<16|(d&65535)+(d>>>16))>>>0},readHeaderInfo:function(c,d){var u=d.ptr,A=new Uint8Array(c,u,6),z={};z.fileIdentifierString=String.fromCharCode.apply(null,A);if(0!==z.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+z.fileIdentifierString;u+=6;A=
new DataView(c,u,8);var F=A.getInt32(0,!0);z.fileVersion=F;u+=4;3<=F&&(z.checksum=A.getUint32(4,!0),u+=4);A=new DataView(c,u,12);z.height=A.getUint32(0,!0);z.width=A.getUint32(4,!0);u+=8;4<=F?(z.numDims=A.getUint32(8,!0),u+=4):z.numDims=1;A=new DataView(c,u,40);z.numValidPixel=A.getUint32(0,!0);z.microBlockSize=A.getInt32(4,!0);z.blobSize=A.getInt32(8,!0);z.imageType=A.getInt32(12,!0);z.maxZError=A.getFloat64(16,!0);z.zMin=A.getFloat64(24,!0);z.zMax=A.getFloat64(32,!0);u+=40;d.headerInfo=z;d.ptr=
u;if(3<=F&&(c=this.computeChecksumFletcher32(new Uint8Array(c,u-(4<=F?52:48),z.blobSize-14)),c!==z.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(c,d){var u=d.headerInfo,A=this.getDataTypeArray(u.imageType),z=u.numDims*this.getDataTypeSize(u.imageType),F=this.readSubArray(c,d.ptr,A,z);c=this.readSubArray(c,d.ptr+z,A,z);d.ptr+=2*z;z=!0;for(d=0;d<u.numDims;d++)if(F[d]!==c[d]){z=!1;break}u.minValues=F;u.maxValues=c;return z},readSubArray:function(c,d,u,A){if(u===Uint8Array)c=
new Uint8Array(c,d,A);else{var z=new ArrayBuffer(A);(new Uint8Array(z)).set(new Uint8Array(c,d,A));c=new u(z)}return c},readMask:function(c,d){var u=d.ptr,A=d.headerInfo,z=A.width*A.height,F=A.numValidPixel,K=new DataView(c,u,4);A={};A.numBytes=K.getUint32(0,!0);u+=4;if((0===F||z===F)&&0!==A.numBytes)throw"invalid mask";if(0===F)F=new Uint8Array(Math.ceil(z/8)),A.bitset=F,K=new Uint8Array(z),d.pixels.resultMask=K,u+=A.numBytes;else if(0<A.numBytes){F=new Uint8Array(Math.ceil(z/8));K=new DataView(c,
u,A.numBytes);c=K.getInt16(0,!0);var L=2,H=0,N=0;do{if(0<c)for(;c--;)F[H++]=K.getUint8(L++);else for(N=K.getUint8(L++),c=-c;c--;)F[H++]=N;c=K.getInt16(L,!0);L+=2}while(L<A.numBytes);if(-32768!==c||H<F.length)throw"Unexpected end of mask RLE encoding";K=new Uint8Array(z);for(L=L=c=0;L<z;L++)L&7?(c=F[L>>3],c<<=L&7):c=F[L>>3],c&128&&(K[L]=1);d.pixels.resultMask=K;A.bitset=F;u+=A.numBytes}d.ptr=u;d.mask=A;return!0},readDataOneSweep:function(c,d,u,A){var z=d.ptr,F=d.headerInfo,K=F.numDims,L=F.width*F.height;
F=F.numValidPixel*r.getDataTypeSize(F.imageType)*K;var H=d.pixels.resultMask;if(u===Uint8Array)c=new Uint8Array(c,z,F);else{var N=new ArrayBuffer(F);(new Uint8Array(N)).set(new Uint8Array(c,z,F));c=new u(N)}if(c.length===L*K)d.pixels.resultPixels=A?r.swapDimensionOrder(c,L,K,u,!0):c;else{d.pixels.resultPixels=new u(L*K);var I=N=u=0,R=0;if(1<K)if(A)for(N=0;N<L;N++){if(H[N])for(R=N,I=0;I<K;I++,R+=L)d.pixels.resultPixels[R]=c[u++]}else for(N=0;N<L;N++){if(H[N])for(R=N*K,I=0;I<K;I++)d.pixels.resultPixels[R+
I]=c[u++]}else for(N=0;N<L;N++)H[N]&&(d.pixels.resultPixels[N]=c[u++])}d.ptr=z+F;return!0},readHuffmanTree:function(c,d){var u=this.HUFFMAN_LUT_BITS_MAX,A=new DataView(c,d.ptr,16);d.ptr+=16;if(2>A.getInt32(0,!0))throw"unsupported Huffman version";var z=A.getInt32(4,!0),F=A.getInt32(8,!0);A=A.getInt32(12,!0);if(F>=A)return!1;var K=new Uint32Array(A-F);r.decodeBits(c,d,K);var L=[],H;for(H=F;H<A;H++){var N=H-(H<z?0:z);L[N]={first:K[H-F],second:null}}H=c.byteLength-d.ptr;K=new ArrayBuffer(4*Math.ceil(H/
4));(new Uint8Array(K)).set(new Uint8Array(c,d.ptr,H));c=new Uint32Array(K);d=0;K=0;var I=c[0];for(H=F;H<A;H++){N=H-(H<z?0:z);var R=L[N].first;0<R&&(L[N].second=I<<d>>>32-R,32-d>=R?(d+=R,32===d&&(d=0,K++,I=c[K])):(d+=R-32,K++,I=c[K],L[N].second|=I>>>32-d))}var T=I=0,S=new E;for(H=0;H<L.length;H++)void 0!==L[H]&&(I=Math.max(I,L[H].first));T=I>=u?u:I;u=[];var Y;for(H=F;H<A;H++)if(N=H-(H<z?0:z),R=L[N].first,0<R)if(F=[R,N],R<=T){N=L[N].second<<T-R;var da=1<<T-R;for(R=0;R<da;R++)u[N|R]=F}else for(N=L[N].second,
da=S,--R;0<=R;R--)(Y=N>>>R&1)?(da.right||(da.right=new E),da=da.right):(da.left||(da.left=new E),da=da.left),0!==R||da.val||(da.val=F[1]);return{decodeLut:u,numBitsLUTQick:T,numBitsLUT:I,tree:S,stuffedData:c,srcPtr:K,bitPos:d}},readHuffman:function(c,d,u,A){var z=d.headerInfo.numDims,F=d.headerInfo.height,K=d.headerInfo.width,L=K*F,H=this.readHuffmanTree(c,d);c=H.decodeLut;var N=H.tree,I=H.stuffedData,R=H.srcPtr,T=H.bitPos,S=H.numBitsLUTQick;H=H.numBitsLUT;var Y=0===d.headerInfo.imageType?128:0,da=
d.pixels.resultMask,fa,la,ha,ea,ka,ia,ca=0;0<T&&(R++,T=0);var oa=I[R],na=1===d.encodeMode,ra=new u(L*z),pa=ra,qa;if(2>z||na)for(qa=0;qa<z;qa++)if(1<z&&(pa=new u(ra.buffer,L*qa,L),ca=0),d.headerInfo.numValidPixel===K*F)for(ha=ka=0;ha<F;ha++)for(ea=0;ea<K;ea++,ka++){var ma=0;var ja=fa=oa<<T>>>32-S;32-T<S&&(ja=fa|=I[R+1]>>>64-T-S);if(c[ja])ma=c[ja][1],T+=c[ja][0];else for(ja=fa=oa<<T>>>32-H,32-T<H&&(ja=fa|=I[R+1]>>>64-T-H),ja=N,ia=0;ia<H;ia++)if(ja=(la=fa>>>H-ia-1&1)?ja.right:ja.left,!ja.left&&!ja.right){ma=
ja.val;T=T+ia+1;break}32<=T&&(T-=32,R++,oa=I[R]);ma-=Y;na?(ma=0<ea?ma+ca:0<ha?ma+pa[ka-K]:ma+ca,ma&=255,ca=pa[ka]=ma):pa[ka]=ma}else for(ha=ka=0;ha<F;ha++)for(ea=0;ea<K;ea++,ka++){if(da[ka]){ma=0;ja=fa=oa<<T>>>32-S;32-T<S&&(ja=fa|=I[R+1]>>>64-T-S);if(c[ja])ma=c[ja][1],T+=c[ja][0];else for(ja=fa=oa<<T>>>32-H,32-T<H&&(ja=fa|=I[R+1]>>>64-T-H),ja=N,ia=0;ia<H;ia++)if(ja=(la=fa>>>H-ia-1&1)?ja.right:ja.left,!ja.left&&!ja.right){ma=ja.val;T=T+ia+1;break}32<=T&&(T-=32,R++,oa=I[R]);ma-=Y;na?(ma=0<ea&&da[ka-
1]?ma+ca:0<ha&&da[ka-K]?ma+pa[ka-K]:ma+ca,ma&=255,ca=pa[ka]=ma):pa[ka]=ma}}else for(ha=ka=0;ha<F;ha++)for(ea=0;ea<K;ea++)if(ka=ha*K+ea,!da||da[ka])for(qa=0;qa<z;qa++,ka+=L){ma=0;ja=fa=oa<<T>>>32-S;32-T<S&&(ja=fa|=I[R+1]>>>64-T-S);if(c[ja])ma=c[ja][1],T+=c[ja][0];else for(ja=fa=oa<<T>>>32-H,32-T<H&&(ja=fa|=I[R+1]>>>64-T-H),ja=N,ia=0;ia<H;ia++)if(ja=(la=fa>>>H-ia-1&1)?ja.right:ja.left,!ja.left&&!ja.right){ma=ja.val;T=T+ia+1;break}32<=T&&(T-=32,R++,oa=I[R]);ma-=Y;pa[ka]=ma}d.ptr=d.ptr+4*(R+1)+(0<T?4:
0);d.pixels.resultPixels=ra;1<z&&!A&&(d.pixels.resultPixels=r.swapDimensionOrder(ra,L,z,u))},decodeBits:function(c,d,u,A,z){var F=d.headerInfo,K=F.fileVersion,L=0,H=new DataView(c,d.ptr,5<=c.byteLength-d.ptr?5:c.byteLength-d.ptr),N=H.getUint8(0);L++;var I=N>>6,R=0===I?4:3-I,T=0<(N&32)?!0:!1;I=N&31;N=0;if(1===R)N=H.getUint8(L),L++;else if(2===R)N=H.getUint16(L,!0),L+=2;else if(4===R)N=H.getUint32(L,!0),L+=4;else throw"Invalid valid pixel count type";R=2*F.maxZError;z=1<F.numDims?F.maxValues[z]:F.zMax;
if(T){d.counter.lut++;T=H.getUint8(L);L++;F=Math.ceil((T-1)*I/8);var S=Math.ceil(F/4);S=new ArrayBuffer(4*S);var Y=new Uint8Array(S);d.ptr+=L;Y.set(new Uint8Array(c,d.ptr,F));L=new Uint32Array(S);d.ptr+=F;for(H=0;T-1>>>H;)H++;F=Math.ceil(N*H/8);S=Math.ceil(F/4);S=new ArrayBuffer(4*S);Y=new Uint8Array(S);Y.set(new Uint8Array(c,d.ptr,F));c=new Uint32Array(S);d.ptr+=F;d=3<=K?k.unstuffLUT2(L,I,T-1,A,R,z):k.unstuffLUT(L,I,T-1,A,R,z);3<=K?k.unstuff2(c,u,H,N,d):k.unstuff(c,u,H,N,d)}else d.counter.bitstuffer++,
H=I,d.ptr+=L,0<H&&(F=Math.ceil(N*H/8),S=Math.ceil(F/4),S=new ArrayBuffer(4*S),Y=new Uint8Array(S),Y.set(new Uint8Array(c,d.ptr,F)),c=new Uint32Array(S),d.ptr+=F,3<=K?null==A?k.originalUnstuff2(c,u,H,N):k.unstuff2(c,u,H,N,!1,A,R,z):null==A?k.originalUnstuff(c,u,H,N):k.unstuff(c,u,H,N,!1,A,R,z))},readTiles:function(c,d,u,A){var z=d.headerInfo,F=z.width,K=z.height,L=F*K,H=z.microBlockSize,N=z.imageType,I=r.getDataTypeSize(N),R=Math.ceil(F/H),T=Math.ceil(K/H);d.pixels.numBlocksY=T;d.pixels.numBlocksX=
R;var S=d.pixels.ptr=0,Y=0,da=0,fa=0,la=0,ha=0,ea=0,ka=0,ia=S=0,ca=0,oa=0,na=ea=0;ea=ea=0;var ra=new u(H*H);K=K%H||H;var pa=F%H||H,qa=z.numDims,ma,ja=d.pixels.resultMask,sa=d.pixels.resultPixels,wa=5<=z.fileVersion?14:15,va=z.zMax;for(da=0;da<T;da++)for(la=da!==T-1?H:K,fa=0;fa<R;fa++)for(ha=fa!==R-1?H:pa,ca=da*F*H+fa*H,oa=F-ha,ma=0;ma<qa;ma++){1<qa?(na=sa,ca=da*F*H+fa*H,sa=new u(d.pixels.resultPixels.buffer,L*ma*I,L),va=z.maxValues[ma]):na=null;ea=c.byteLength-d.ptr;Y=new DataView(c,d.ptr,Math.min(10,
ea));var ua={};ea=0;ka=Y.getUint8(0);ea++;var ta=5<=z.fileVersion?ka&4:0;S=ka>>6&255;ia=ka>>2&wa;if(ia!==(fa*H>>3&wa))throw"integrity issue";if(ta&&0===ma)throw"integrity issue";ka&=3;if(3<ka)throw d.ptr+=ea,"Invalid block encoding ("+ka+")";if(2===ka){if(ta)if(ja)for(S=0;S<la;S++)for(Y=0;Y<ha;Y++)ja[ca]&&(sa[ca]=na[ca]),ca++;else for(S=0;S<la;S++)for(Y=0;Y<ha;Y++)sa[ca]=na[ca],ca++;d.counter.constant++;d.ptr+=ea}else if(0===ka){if(ta)throw"integrity issue";d.counter.uncompressed++;d.ptr+=ea;ea=la*
ha*I;na=c.byteLength-d.ptr;ea=ea<na?ea:na;na=new ArrayBuffer(0===ea%I?ea:ea+I-ea%I);ta=new Uint8Array(na);ta.set(new Uint8Array(c,d.ptr,ea));na=new u(na);ea=0;if(ja)for(S=0;S<la;S++){for(Y=0;Y<ha;Y++)ja[ca]&&(sa[ca]=na[ea++]),ca++;ca+=oa}else for(S=0;S<la;S++){for(Y=0;Y<ha;Y++)sa[ca++]=na[ea++];ca+=oa}d.ptr+=ea*I}else if(S=r.getDataTypeUsed(ta&&6>N?4:N,S),ua=r.getOnePixel(ua,ea,S,Y),ea+=r.getDataTypeSize(S),3===ka)if(d.ptr+=ea,d.counter.constantoffset++,ja)for(S=0;S<la;S++){for(Y=0;Y<ha;Y++)ja[ca]&&
(sa[ca]=ta?Math.min(va,na[ca]+ua):ua),ca++;ca+=oa}else for(S=0;S<la;S++){for(Y=0;Y<ha;Y++)sa[ca]=ta?Math.min(va,na[ca]+ua):ua,ca++;ca+=oa}else if(d.ptr+=ea,r.decodeBits(c,d,ra,ua,ma),ea=0,ta)if(ja)for(S=0;S<la;S++){for(Y=0;Y<ha;Y++)ja[ca]&&(sa[ca]=ra[ea++]+na[ca]),ca++;ca+=oa}else for(S=0;S<la;S++){for(Y=0;Y<ha;Y++)sa[ca]=ra[ea++]+na[ca],ca++;ca+=oa}else if(ja)for(S=0;S<la;S++){for(Y=0;Y<ha;Y++)ja[ca]&&(sa[ca]=ra[ea++]),ca++;ca+=oa}else for(S=0;S<la;S++){for(Y=0;Y<ha;Y++)sa[ca++]=ra[ea++];ca+=oa}}1<
qa&&!A&&(d.pixels.resultPixels=r.swapDimensionOrder(d.pixels.resultPixels,L,qa,u))},formatFileInfo:function(c){return{fileIdentifierString:c.headerInfo.fileIdentifierString,fileVersion:c.headerInfo.fileVersion,imageType:c.headerInfo.imageType,height:c.headerInfo.height,width:c.headerInfo.width,numValidPixel:c.headerInfo.numValidPixel,microBlockSize:c.headerInfo.microBlockSize,blobSize:c.headerInfo.blobSize,maxZError:c.headerInfo.maxZError,pixelType:r.getPixelType(c.headerInfo.imageType),eofOffset:c.eofOffset,
mask:c.mask?{numBytes:c.mask.numBytes}:null,pixels:{numBlocksX:c.pixels.numBlocksX,numBlocksY:c.pixels.numBlocksY,maxValue:c.headerInfo.zMax,minValue:c.headerInfo.zMin,noDataValue:c.noDataValue}}},constructConstantSurface:function(c,d){var u=c.headerInfo.zMax,A=c.headerInfo.zMin,z=c.headerInfo.maxValues,F=c.headerInfo.numDims,K=c.headerInfo.height*c.headerInfo.width,L=0,H=0,N=0,I=c.pixels.resultMask;c=c.pixels.resultPixels;if(I)if(1<F)if(d)for(L=0;L<F;L++)for(N=L*K,u=z[L],H=0;H<K;H++)I[H]&&(c[N+H]=
u);else for(H=0;H<K;H++){if(I[H])for(N=H*F,L=0;L<F;L++)c[N+F]=z[L]}else for(H=0;H<K;H++)I[H]&&(c[H]=u);else if(1<F&&A!==u)if(d)for(L=0;L<F;L++)for(N=L*K,u=z[L],H=0;H<K;H++)c[N+H]=u;else for(H=0;H<K;H++)for(N=H*F,L=0;L<F;L++)c[N+L]=z[L];else for(H=0;H<K*F;H++)c[H]=u},getDataTypeArray:function(c){switch(c){case 0:c=Int8Array;break;case 1:c=Uint8Array;break;case 2:c=Int16Array;break;case 3:c=Uint16Array;break;case 4:c=Int32Array;break;case 5:c=Uint32Array;break;case 6:c=Float32Array;break;case 7:c=Float64Array;
break;default:c=Float32Array}return c},getPixelType:function(c){switch(c){case 0:c="S8";break;case 1:c="U8";break;case 2:c="S16";break;case 3:c="U16";break;case 4:c="S32";break;case 5:c="U32";break;case 6:c="F32";break;case 7:c="F64";break;default:c="F32"}return c},isValidPixelValue:function(c,d){if(null==d)return!1;switch(c){case 0:c=-128<=d&&127>=d;break;case 1:c=0<=d&&255>=d;break;case 2:c=-32768<=d&&32767>=d;break;case 3:c=0<=d&&65536>=d;break;case 4:c=-2147483648<=d&&2147483647>=d;break;case 5:c=
0<=d&&4294967296>=d;break;case 6:c=-3.4027999387901484E38<=d&&3.4027999387901484E38>=d;break;case 7:c=4.9E-324<=d&&1.7976931348623157E308>=d;break;default:c=!1}return c},getDataTypeSize:function(c){var d=0;switch(c){case 0:case 1:d=1;break;case 2:case 3:d=2;break;case 4:case 5:case 6:d=4;break;case 7:d=8;break;default:d=c}return d},getDataTypeUsed:function(c,d){var u=c;switch(c){case 2:case 4:u=c-d;break;case 3:case 5:u=c-2*d;break;case 6:u=0===d?c:1===d?2:1;break;case 7:u=0===d?c:c-2*d+1;break;default:u=
c}return u},getOnePixel:function(c,d,u,A){c=0;switch(u){case 0:c=A.getInt8(d);break;case 1:c=A.getUint8(d);break;case 2:c=A.getInt16(d,!0);break;case 3:c=A.getUint16(d,!0);break;case 4:c=A.getInt32(d,!0);break;case 5:c=A.getUInt32(d,!0);break;case 6:c=A.getFloat32(d,!0);break;case 7:c=A.getFloat64(d,!0);break;default:throw"the decoder does not understand this pixel type";}return c},swapDimensionOrder:function(c,d,u,A,z){var F=0,K=0,L=0,H=0,N=c;if(1<u)if(N=new A(d*u),z)for(F=0;F<d;F++)for(H=F,L=0;L<
u;L++,H+=d)N[H]=c[K++];else for(F=0;F<d;F++)for(H=F,L=0;L<u;L++,H+=d)N[K++]=c[H];return N}},E=function(c,d,u){this.val=c;this.left=d;this.right=u};return{decode:function(c,d){d=d||{};var u=d.noDataValue,A=0,z={};z.ptr=d.inputOffset||0;z.pixels={};r.readHeaderInfo(c,z);A=z.headerInfo;var F=A.fileVersion,K=r.getDataTypeArray(A.imageType);if(5<F)throw"unsupported lerc version 2."+F;r.readMask(c,z);A.numValidPixel===A.width*A.height||z.pixels.resultMask||(z.pixels.resultMask=d.maskData);var L=A.width*
A.height;z.pixels.resultPixels=new K(L*A.numDims);z.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};var H=!d.returnPixelInterleavedDims;if(0!==A.numValidPixel)if(A.zMax===A.zMin)r.constructConstantSurface(z,H);else if(4<=F&&r.checkMinMaxRanges(c,z))r.constructConstantSurface(z,H);else{var N=new DataView(c,z.ptr,2),I=N.getUint8(0);z.ptr++;if(I)r.readDataOneSweep(c,z,K,H);else if(1<F&&1>=A.imageType&&1E-5>Math.abs(A.maxZError-.5)){N=N.getUint8(1);z.ptr++;z.encodeMode=
N;if(2<N||4>F&&1<N)throw"Invalid Huffman flag "+N;N?r.readHuffman(c,z,K,H):r.readTiles(c,z,K,H)}else r.readTiles(c,z,K,H)}z.eofOffset=z.ptr;d.inputOffset?(c=z.headerInfo.blobSize+d.inputOffset-z.ptr,1<=Math.abs(c)&&(z.eofOffset=d.inputOffset+z.headerInfo.blobSize)):(c=z.headerInfo.blobSize-z.ptr,1<=Math.abs(c)&&(z.eofOffset=z.headerInfo.blobSize));c={width:A.width,height:A.height,pixelData:z.pixels.resultPixels,minValue:A.zMin,maxValue:A.zMax,validPixelCount:A.numValidPixel,dimCount:A.numDims,dimStats:{minValues:A.minValues,
maxValues:A.maxValues},maskData:z.pixels.resultMask};if(z.pixels.resultMask&&r.isValidPixelValue(A.imageType,u)){F=z.pixels.resultMask;for(A=0;A<L;A++)F[A]||(c.pixelData[A]=u);c.noDataValue=u}z.noDataValue=u;d.returnFileInfo&&(c.fileInfo=r.formatFileInfo(z));return c},getBandCount:function(c){for(var d=0,u=0,A={ptr:0,pixels:{}};u<c.byteLength-58;)r.readHeaderInfo(c,A),u+=A.headerInfo.blobSize,d++,A.ptr=u;return d}}})})(p);var h=p.exports;const l=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],v=new Set([1,
5,6,7,8,34712,34887]),B=function(f,k,r,E,c){var d,u,A=O.isPlatformLittleEndian===k,z=J(r,"BITSPERSAMPLE");const F=null!=(d=J(r,"SAMPLEFORMAT"))?d:1;d=X(F,z);z=null!=(u=J(r,"COMPRESSION"))?u:1;u=P(d);if(34887===z)return h.decode(f,{inputOffset:E,returnFileInfo:!0}).pixelData;if(1===z){var K=f.slice(E,E+c);var L=new Uint8Array(K)}else if(8===z||32946===z)L=new Uint8Array(f,E,c),L=new U.Zlib(L),f=L.getBytes(),K=new ArrayBuffer(f.length),L=new Uint8Array(K),L.set(f);else if(6===z)L=new Uint8Array(f,E,
c),K=new W.JpegImage,K.parse(L),f=K.getData(K.width,K.height,!0),K=new ArrayBuffer(f.length),L=new Uint8Array(K),L.set(f);else if(7===z){k=r.get("JPEGTABLES").values;K=k.length-2;L=new Uint8Array(K+c-2);for(r=0;r<K;r++)L[r]=k[r];f=new Uint8Array(f,E+2,c-2);for(E=0;E<f.length;E++)L[K+E]=f[E];K=new W.JpegImage;K.parse(L);f=K.getData(K.width,K.height,!0);K=new ArrayBuffer(f.length);L=new Uint8Array(K);L.set(f)}else 5===z&&(L=V.decode(f,E,c,k),K=L.buffer);if("u8"!==d&&"s8"!==d&&!A)switch(K=new ArrayBuffer(L.length),
A=new Uint8Array(K),d){case "u16":case "s16":for(d=0;d<L.length;d+=2)A[d]=L[d+1],A[d+1]=L[d];break;case "u32":case "s32":case "f32":for(d=0;d<L.length;d+=4)A[d]=L[d+3],A[d+1]=L[d+2],A[d+2]=L[d+1],A[d+3]=L[d]}return new u(K)},G=function(f,k,r){if(!(f&&0<f.length&&k&&r))return null;let E,c,d;const u=f[0].length,A=f.length,z=new Uint8Array(u);for(let K=0;K<A;K++)if(E=f[K],c=k[K],d=r[K],0===K)for(var F=0;F<u;F++)z[F]=E[F]<c||E[F]>d?0:1;else for(F=0;F<u;F++)z[F]&&(z[F]=E[F]<c||E[F]>d?0:1);return z},n=
function(f){if(!f)return null;var k=f.match(/<Item(.*?)Item>/gi);if(!k||0===k.length)return null;f=new Map;var r;for(var E=0;E<k.length;E++){var c=k[E];var d=c.slice(6,c.indexOf("\x3e"));var u=c.indexOf("sample\x3d");-1<u&&(r=c.slice(u+8,c.indexOf('"',u+8)));u=c.indexOf("name\x3d");-1<u&&(d=c.slice(u+6,c.indexOf('"',u+6)));d&&(c=c.slice(c.indexOf("\x3e")+1,c.indexOf("\x3c/Item\x3e")).trim(),null!=r?f.has(d)?f.get(d)[r]=c:f.set(d,[c]):f.set(d,c));r=null}k=f.get("STATISTICS_MINIMUM");d=f.get("STATISTICS_MAXIMUM");
E=f.get("STATISTICS_MEAN");c=f.get("STATISTICS_STDDEV");r=null;if(k&&d)for(r=[],u=0;u<k.length;u++)r.push({min:parseFloat(k[u]),max:parseFloat(d[u]),avg:E&&parseFloat(E[u]),stddev:c&&parseFloat(c[u])});d=f.get("BandName");E=f.get("WavelengthMin");c=f.get("WavelengthMax");k=null;if(d)for(k=[],u=0;u<d.length;u++)k.push({BandName:d[u],WavelengthMin:E&&parseFloat(E[u]),WavelengthMax:c&&parseFloat(c[u])});d=f.get("DataType");return{statistics:r,bandProperties:k,dataType:d,rawMetadata:f}};ba.Lerc2Codec=
h;ba.decode=function(f,k=0,r){r=r||D(f);const {ifds:E,noData:c}=r;if(0===E.length)throw"no valid image file directory";var d=e(r);if(d)throw d;d=-1===k?E[E.length-1]:E[k];k=c?c[0]:null;if(r.tileWidth){var u=r,A,z=C(d,"TILEOFFSETS");if(void 0===z)d=null;else{r=C(d,"TILEBYTECOUNTS");var {width:F,height:K,pixelType:L,tileWidth:H,tileHeight:N}=g([d]),I=m(d,u),R=u.planes,T=F*K,S=J(d,"BITSPERSAMPLE"),Y=34887===(null!=(A=J(d,"COMPRESSION"))?A:1),da=P(L);A=[];for(var fa=0;fa<R;fa++)A.push(new da(T));var la,
ha;T=Math.ceil(F/H);if(0===S%8)if(Y&&I&&1<R)for(I=Math.round(z.length/R),S=0;S<I;S++){var ea=Math.floor(S/T)*N;var ka=S%T*H;da=ea*F+ka;for(Y=0;Y<R;Y++){fa=S*R+Y;fa=B(f,u.littleEndian,d,z[fa],r[fa]);var ia=0;var ca=da;var oa=Math.min(H,F-ka);var na=Math.min(N,K-ea);var ra=A[Y];for(la=0;la<na;la++)for(ca=da+la*F,ia=la*H,ha=0;ha<oa;ha++,ca++,ia++)ra[ca]=fa[ia]}}else for(S=0;S<z.length;S++)for(ea=Math.floor(S/T)*N,ka=S%T*H,da=ea*F+ka,fa=B(f,u.littleEndian,d,z[S],r[S]),ia=0,ca=da,oa=Math.min(H,F-ka),na=
Math.min(N,K-ea),ea=0;ea<R;ea++)if(ra=A[ea],I||Y)for(la=0;la<na;la++)for(ca=da+la*F,ia=H*N*ea+la*H,ha=0;ha<oa;ha++,ca++,ia++)ra[ca]=fa[ia];else for(la=0;la<na;la++)for(ca=da+la*F,ia=la*H*R+ea,ha=0;ha<oa;ha++,ca++,ia+=R)ra[ca]=fa[ia];d={width:F,height:K,pixelType:L,pixels:A}}}else if(T=r,la=O.isPlatformLittleEndian===T.littleEndian,ha=C(d,"STRIPOFFSETS"),void 0===ha)d=null;else{var {width:pa,height:qa,pixelType:ma}=g([d]);r=T.planes;R=pa*qa;S=J(d,"BITSPERSAMPLE");z=P(ma);A=new z(R*r);da=C(d,"STRIPBYTECOUNTS");
fa=J(d,"ROWSPERSTRIP");ea=null!=(ka=J(d,"COMPRESSION"))?ka:1;ca=fa;if(0===S%8)for(d=0;d<ha.length;d++){ka=d*fa*pa*r;ca=(d+1)*fa>qa?qa-d*fa:fa;if("u8"===ma||"s8"===ma||la)8===ea||32946===ea?(I=new Uint8Array(f,ha[d],da[d]),I=new U.Zlib(I),ia=I.getBytes(),Y=new ArrayBuffer(ia.length),I=new Uint8Array(Y),I.set(ia),I.length!==ca*pa*r*S/8&&console.log("strip byte counts is different than expected")):6===ea?(I=new Uint8Array(f,ha[d],da[d]),Y=new W.JpegImage,Y.parse(I),ca=Y.getData(Y.width,Y.height,!0),
Y=new ArrayBuffer(ca.length),I=new Uint8Array(Y),I.set(ca)):5===ea?(I=V.decode(f,ha[d],da[d],T.littleEndian),Y=I.buffer):1===ea&&(da[d]!==ca*pa*r*S/8&&console.log("strip byte counts is different than expected"),Y=f.slice(ha[d],ha[d]+da[d]));else switch(6===ea||8===ea||32946===ea?(I=new Uint8Array(f,ha[d],da[d]),I=new U.Zlib(I),I=I.getBytes(),Y=new ArrayBuffer(I.length),u=new Uint8Array(Y),I.length!==ca*pa*r*S/8&&console.log("strip byte counts is different than expected")):1===ea&&(da[d]!==ca*pa*r*
S/8&&console.log("strip byte counts is different than expected"),Y=new ArrayBuffer(da[d]),I=new Uint8Array(f,ha[d],da[d]),u=new Uint8Array(Y)),ma){case "u16":case "s16":for(ca=0;ca<I.length;ca+=2)u[ca]=I[ca+1],u[ca+1]=I[ca];break;case "u32":case "s32":case "f32":for(ca=0;ca<I.length;ca+=4)u[ca]=I[ca+3],u[ca+1]=I[ca+2],u[ca+2]=I[ca+1],u[ca+3]=I[ca]}ca=new z(Y);A.set(ca,ka)}I=[];if(1===r)I.push(A);else for(d=0;d<r;d++){u=new z(R);for(f=0;f<R;f++)u[f]=A[f*r+d];I.push(u)}d={width:pa,height:qa,pixelType:ma,
pixels:I}}if(null!==k){d.mask=new Uint8Array(d.width*d.height);if(1E24<Math.abs(k))for(f=0;f<d.width*d.height;f++)d.mask[f]=1E-6>Math.abs((d.pixels[0][f]-k)/k)?0:1;else for(f=0;f<d.width*d.height;f++)d.mask[f]=d.pixels[0][f]===k?0:1;d.noDataValue=k}return d};ba.decodeTileOrStrip=function(f,k){var r;const {headerInfo:E,ifd:c,offsets:d,sizes:u}=k;var A=d.map((fa,la)=>B(f,E.littleEndian,c,fa,u[la]||f.byteLength)),z=m(c,E);const {pixelType:F,planes:K}=E;var L=P(F);const H=J(c,"TILEWIDTH"),N=J(c,"TILELENGTH");
var I=null!=(r=J(c,"COMPRESSION"))?r:1;r=H*N;const R=[];let T=A[0];const S=34887===I;for(let fa=0;fa<K;fa++){I=new L(r);if(z&&S){T=A[fa];for(var Y=0;Y<r;Y++)I[Y]=T[fa][Y+fa]}else if(z||S&&!z)I=T.slice(r*fa,r*(fa+1));else for(Y=0;Y<r;Y++)I[Y]=T[Y*K+fa];R.push(I)}A=E.noData?E.noData[0]:null;z=(L=E.metadata?E.metadata.statistics:null)?L.map(fa=>fa.min):null;L=L?L.map(fa=>fa.max):null;let da;if(null!=A)if(da=new Uint8Array(r),1E24<Math.abs(A))for(k=0;k<r;k++)da[k]=1E-6>Math.abs((R[0][k]-A)/A)?0:1;else for(k=
0;k<r;k++)da[k]=R[0][k]===A?0:1;else z&&L&&k.applyMinMaxConstraint&&(da=G(R,z,L));return{pixelType:F,width:H,height:N,pixels:R,mask:da,noDataValue:A}};ba.getImageInfo=g;ba.isBSQConfig=m;ba.parseFieldValues=w;ba.parseHeader=D;ba.parseIFD=a;ba.parseSignature=t})},"esri/layers/support/rasterDatasets/byteStreamUtils":function(){define(["exports"],function(ba){ba.bytesToUTF8=function(aa,W){let V=0,q="",O=0,U=0;const X=aa.length;for(;V<X;)if(U=aa[V++],O=U>>4,8>O?O=1:15===O?(O=4,U=(U&7)<<18|(aa[V++]&63)<<
12|(aa[V++]&63)<<6|aa[V++]&63):14===O?(O=3,U=(U&15)<<12|(aa[V++]&63)<<6|aa[V++]&63):(O=2,U=(U&31)<<6|aa[V++]&63),0!==U||W)q+=String.fromCharCode(U);return q};Object.defineProperty(ba,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/Lzw":function(){define(["exports"],function(ba){function aa(O,U,X,P=!0){if(0!==U%4||0!==X%4){var Z=new ArrayBuffer(4*Math.ceil(X/4));Z=new Uint8Array(Z);O=new Uint8Array(O,U,X);if(P)for(P=0;P<Z.length;P+=4)Z[P]=O[P+3],Z[P+1]=O[P+2],Z[P+2]=O[P+1],Z[P+3]=O[P];
else Z.set(O);return new Uint32Array(Z.buffer)}if(P){P=new Uint8Array(O,U,X);Z=new Uint8Array(P.length);for(O=0;O<Z.length;O+=4)Z[O]=P[O+3],Z[O+1]=P[O+2],Z[O+2]=P[O+1],Z[O+3]=P[O];return new Uint32Array(Z.buffer)}return new Uint32Array(O,U,X/4)}function W(){const O=[];for(let U=0;257>=U;U++)O[U]=[U];return O}function V(O,U){for(let X=0;X<U.length;X++)O.push(U[X])}const q=new Set;q.add(511);q.add(1023);q.add(2047);q.add(4095);q.add(8191);ba.decode=function(O,U,X,P=!0){O=aa(O,U,X,P);U=9;P=W();let Z=
32,Q=P.length,C=[],M=1,J=O[0],b=0;const w=O.length;X=8*(4*w-X);const g=[];for(;null!=J;){if(Z>=U)Z-=U,b=J>>>32-U,J<<=U;else{b=J>>>32-Z;J=O[M++];var m=U-Z;Z=32-m;b=(b<<m)+(J>>>Z);J<<=m}if(257===b)break;if(256===b)U=9,P=W(),Q=P.length,C=[];else{m=P[b];if(null==m){if(b>P.length)throw"data integrity issue: code does not exist on code page";C.push(C[0]);P[Q++]=C.slice();V(g,C)}else V(g,m),C.push(m[0]),1<C.length&&(P[Q++]=C.slice()),C=m.slice();q.has(Q)&&U++;0===Z&&(J=O[M++],Z=32);if(M>w||M===w&&Z<=X)break}}return new Uint8Array(g)};
Object.defineProperty(ba,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/TiffTags":function(){define(function(){const ba=(()=>{const q=[];q[254]="NEWSUBFILETYPE";q[255]="SUBFILETYPE";q[256]="IMAGEWIDTH";q[257]="IMAGELENGTH";q[258]="BITSPERSAMPLE";q[259]="COMPRESSION";q[262]="PHOTOMETRICINTERPRETATION";q[263]="THRESHHOLDING";q[264]="CELLWIDTH";q[265]="CELLLENGTH";q[266]="FILLORDER";q[269]="DOCUMENTNAME";q[270]="IMAGEDESCRIPTION";q[271]="MAKE";q[272]="MODEL";q[273]="STRIPOFFSETS";q[274]=
"ORIENTATION";q[277]="SAMPLESPERPIXEL";q[278]="ROWSPERSTRIP";q[279]="STRIPBYTECOUNTS";q[280]="MINSAMPLEVALUE";q[281]="MAXSAMPLEVALUE";q[282]="XRESOLUTION";q[283]="YRESOLUTION";q[284]="PLANARCONFIGURATION";q[285]="PAGENAME";q[286]="XPOSITION";q[287]="YPOSITION";q[288]="FREEOFFSETS";q[289]="FREEBYTECOUNTS";q[290]="GRAYRESPONSEUNIT";q[291]="GRAYRESPONSECURVE";q[292]="T4OPTIONS";q[293]="T6OPTIONS";q[296]="RESOLUTIONUNIT";q[297]="PAGENUMBER";q[300]="COLORRESPONSEUNIT";q[301]="TRANSFERFUNCTION";q[305]=
"SOFTWARE";q[306]="DATETIME";q[315]="ARTIST";q[316]="HOSTCOMPUTER";q[317]="PREDICTOR";q[318]="WHITEPOINT";q[319]="PRIMARYCHROMATICITIES";q[320]="COLORMAP";q[321]="HALFTONEHINTS";q[322]="TILEWIDTH";q[323]="TILELENGTH";q[324]="TILEOFFSETS";q[325]="TILEBYTECOUNTS";q[326]="BADFAXLINES";q[327]="CLEANFAXDATA";q[328]="CONSECUTIVEBADFAXLINES";q[330]="SUBIFD";q[332]="INKSET";q[333]="INKNAMES";q[334]="NUMBEROFINKS";q[336]="DOTRANGE";q[337]="TARGETPRINTER";q[338]="EXTRASAMPLES";q[339]="SAMPLEFORMAT";q[340]=
"SMINSAMPLEVALUE";q[341]="SMAXSAMPLEVALUE";q[342]="TRANSFERRANGE";q[347]="JPEGTABLES";q[512]="JPEGPROC";q[513]="JPEGIFOFFSET";q[514]="JPEGIFBYTECOUNT";q[515]="JPEGRESTARTINTERVAL";q[517]="JPEGLOSSLESSPREDICTORS";q[518]="JPEGPOINTTRANSFORM";q[519]="JPEGQTABLES";q[520]="JPEGDCTABLES";q[521]="JPEGACTABLES";q[529]="YCBCRCOEFFICIENTS";q[530]="YCBCRSUBSAMPLING";q[531]="YCBCRPOSITIONING";q[532]="REFERENCEBLACKWHITE";q[700]="XMP";q[33550]="GEOPIXELSCALE";q[33922]="GEOTIEPOINTS";q[33432]="COPYRIGHT";q[42112]=
"GDAL_METADATA";q[42113]="GDAL_NODATA";q[50844]="RPCCOEFFICIENT";q[34264]="GEOTRANSMATRIX";q[34735]="GEOKEYDIRECTORY";q[34736]="GEODOUBLEPARAMS";q[34737]="GEOASCIIPARAMS";q[34665]="EXIFIFD";q[34853]="GPSIFD";q[40965]="INTEROPERABILITYIFD";return q})(),aa=(()=>{const q=[].concat(ba);q[36864]="ExifVersion";q[40960]="FlashpixVersion";q[40961]="ColorSpace";q[42240]="Gamma";q[37121]="ComponentsConfiguration";q[37122]="CompressedBitsPerPixel";q[40962]="PixelXDimension";q[40963]="PixelYDimension";q[37500]=
"MakerNote";q[37510]="UserComment";q[40964]="RelatedSoundFile";q[36867]="DateTimeOriginal";q[36868]="DateTimeDigitized";q[36880]="OffsetTime";q[36881]="OffsetTimeOriginal";q[36882]="OffsetTimeDigitized";q[37520]="SubSecTime";q[37521]="SubSecTimeOriginal";q[37522]="SubSecTimeDigitized";q[37888]="Temperature";q[37889]="Humidity";q[37890]="Pressure";q[37891]="WaterDepth";q[37892]="Acceleration";q[37893]="CameraElevationAngle";q[42016]="ImageUniqueID";q[42032]="CameraOwnerName";q[42033]="BodySerialNumber";
q[42034]="LensSpecification";q[42035]="LensMake";q[42036]="LensModel";q[42037]="LensSerialNumber";q[33434]="ExposureTime";q[33437]="FNumber";q[34850]="ExposureProgram";q[34852]="SpectralSensitivity";q[34855]="PhotographicSensitivity";q[34856]="OECF";q[34864]="SensitivityType";q[34865]="StandardOutputSensitivity";q[34866]="RecommendedExposureIndex";q[34867]="ISOSpeed";q[34868]="ISOSpeedLatitudeyyy";q[34869]="ISOSpeedLatitudezzz";q[37377]="ShutterSpeedValue";q[37378]="ApertureValue";q[37379]="BrightnessValue";
q[37380]="ExposureBiasValue";q[37381]="MaxApertureValue";q[37382]="SubjectDistance";q[37383]="MeteringMode";q[37384]="LightSource";q[37385]="Flash";q[37386]="FocalLength";q[37396]="SubjectArea";q[41483]="FlashEnergy";q[41484]="SpatialFrequencyResponse";q[41486]="FocalPlaneXResolution";q[41487]="FocalPlaneYResolution";q[41488]="FocalPlaneResolutionUnit";q[41492]="SubjectLocation";q[41493]="ExposureIndex";q[41495]="SensingMethod";q[41728]="FileSource";q[41729]="SceneType";q[41730]="CFAPattern";q[41985]=
"CustomRendered";q[41986]="ExposureMode";q[41987]="WhiteBalance";q[41988]="DigitalZoomRatio";q[41989]="FocalLengthIn35mmFilm";q[41990]="SceneCaptureType";q[41991]="GainControl";q[41992]="Contrast";q[41993]="Saturation";q[41994]="Sharpness";q[41995]="DeviceSettingDescription";q[41996]="SubjectDistanceRange";return q})(),W=(()=>{const q=[];q[1024]="GTModelTypeGeoKey";q[1025]="GTRasterTypeGeoKey";q[1026]="GTCitationGeoKey";q[2048]="GeographicTypeGeoKey";q[2049]="GeogCitationGeoKey";q[2050]="GeogGeodeticDatumGeoKey";
q[2051]="GeogPrimeMeridianGeoKey";q[2052]="GeogLinearUnitsGeoKey";q[2053]="GeogLinearUnitSizeGeoKey";q[2054]="GeogAngularUnitsGeoKey";q[2055]="GeogAngularUnitSizeGeoKey";q[2056]="GeogEllipsoidGeoKey";q[2057]="GeogSemiMajorAxisGeoKey";q[2058]="GeogSemiMinorAxisGeoKey";q[2059]="GeogInvFlatteningGeoKey";q[2061]="GeogPrimeMeridianLongGeoKey";q[2060]="GeogAzimuthUnitsGeoKey";q[3072]="ProjectedCSTypeGeoKey";q[3073]="PCSCitationGeoKey";q[3074]="ProjectionGeoKey";q[3075]="ProjCoordTransGeoKey";q[3076]="ProjLinearUnitsGeoKey";
q[3077]="ProjLinearUnitSizeGeoKey";q[3078]="ProjStdParallel1GeoKey";q[3079]="ProjStdParallel2GeoKey";q[3080]="ProjNatOriginLongGeoKey";q[3081]="ProjNatOriginLatGeoKey";q[3082]="ProjFalseEastingGeoKey";q[3083]="ProjFalseNorthingGeoKey";q[3084]="ProjFalseOriginLongGeoKey";q[3085]="ProjFalseOriginLatGeoKey";q[3086]="ProjFalseOriginEastingGeoKey";q[3087]="ProjFalseOriginNorthingGeoKey";q[3088]="ProjCenterLongGeoKey";q[3090]="ProjCenterEastingGeoKey";q[3091]="ProjCenterNorthingGeoKey";q[3092]="ProjScaleAtNatOriginGeoKey";
q[3093]="ProjScaleAtCenterGeoKey";q[3094]="ProjAzimuthAngleGeoKey";q[3095]="ProjStraightVertPoleLongGeoKey";q[4096]="VerticalCSTypeGeoKey";q[4097]="VerticalCitationGeoKey";q[4098]="VerticalDatumGeoKey";q[4099]="VerticalUnitsGeoKey";return q})(),V=new Map;V.set("EXIFIFD",aa);V.set("GPSIFD","GPSVersionID GPSLatitudeRef GPSLatitude GPSLongitudeRef GPSLongitude GPSAltitudeRef GPSAltitude GPSTimeStamp GPSSatellites GPSStatus GPSMeasureMode GPSDOP GPSSpeedRef GPSSpeed GPSTrackRef GPSTrack GPSImgDirectionRef GPSImgDirection GPSMapDatum GPSDestLatitudeRef GPSDestLatitude GPSDestLongitudeRef GPSDestLongitude GPSDestBearingRef GPSDestBearing GPSDestDistanceRef GPSDestDistance GPSProcessingMethod GPSAreaInformation GPSDateStamp GPSDifferential GPSHPositioningError".split(" "));
return{TIFF_TAGS:ba,ifdTags:V,GEO_KEYS:W,getTagName:function(q,O){O=(O||ba)[q];void 0===O&&(O="unknown"+String(q));return O}}})},"esri/layers/support/rasterFormats/utils":function(){define(["exports"],function(ba){{var aa=new ArrayBuffer(4);const W=new Uint8Array(aa);(new Uint32Array(aa))[0]=1;aa=1===W[0]}ba.isPlatformLittleEndian=aa;Object.defineProperty(ba,"__esModule",{value:!0})})},"esri/chunks/LercCodec":function(){define(["exports","../core/mathUtils"],function(ba,aa){var W=aa.clampFloat32(-Infinity);
ba.decode=function(V,q){q=q||{};var O=q.inputOffset||0;var U=q.encodedMaskData||null===q.encodedMaskData;var X=new Uint8Array(V,O,10);X=String.fromCharCode.apply(null,X);if("CntZImage"!=X.trim())throw"Unexpected file identifier string: "+X;O+=10;var P=new DataView(V,O,24);var Z=P.getInt32(0,!0);var Q=P.getInt32(4,!0);var C=P.getUint32(8,!0);var M=P.getUint32(12,!0);var J=P.getFloat64(16,!0);O+=24;if(!U){P=new DataView(V,O,16);var b={};b.numBlocksY=P.getUint32(0,!0);b.numBlocksX=P.getUint32(4,!0);
b.numBytes=P.getUint32(8,!0);b.maxValue=P.getFloat32(12,!0);O+=16;if(0<b.numBytes){U=new Uint8Array(Math.ceil(M*C/8));P=new DataView(V,O,b.numBytes);var w=P.getInt16(0,!0);var g=2;var m=0;do{if(0<w)for(;w--;)U[m++]=P.getUint8(g++);else{var D=P.getUint8(g++);for(w=-w;w--;)U[m++]=D}w=P.getInt16(g,!0);g+=2}while(g<b.numBytes);if(-32768!==w||m<U.length)throw"Unexpected end of mask RLE encoding";b.bitset=U;O+=b.numBytes}else 0===(b.numBytes|b.numBlocksY|b.maxValue)&&(U=new Uint8Array(Math.ceil(M*C/8)),
b.bitset=U)}P=new DataView(V,O,16);var x=U=D=m=g=w=void 0;w=P.getUint32(0,!0);g=P.getUint32(4,!0);m=P.getUint32(8,!0);D=P.getFloat32(12,!0);O+=16;x=g;U=w;x+=0<M%x?1:0;var y=U+(0<C%U?1:0);U=Array(x*y);for(var t=1E9,a=0,e=0;e<y;e++)for(var p=0;p<x;p++){var h=0;P=new DataView(V,O,Math.min(10,V.byteLength-O));var l={};U[a++]=l;var v=P.getUint8(0);h++;l.encoding=v&63;if(3<l.encoding)throw"Invalid block encoding ("+l.encoding+")";if(2===l.encoding)O++,t=Math.min(t,0);else{if(0!==v&&2!==v){v>>=6;l.offsetType=
v;if(2===v)l.offset=P.getInt8(1),h++;else if(1===v)l.offset=P.getInt16(1,!0),h+=2;else if(0===v)l.offset=P.getFloat32(1,!0),h+=4;else throw"Invalid block offset type";t=Math.min(l.offset,t);if(1===l.encoding)if(v=P.getUint8(h),h++,l.bitsPerPixel=v&63,v>>=6,l.numValidPixelsType=v,2===v)l.numValidPixels=P.getUint8(h),h++;else if(1===v)l.numValidPixels=P.getUint16(h,!0),h+=2;else if(0===v)l.numValidPixels=P.getUint32(h,!0),h+=4;else throw"Invalid valid pixel count type";}O+=h;if(3!=l.encoding)if(0===
l.encoding){P=(m-1)/4;if(P!==Math.floor(P))throw"uncompressed block has invalid length";h=new ArrayBuffer(4*P);v=new Uint8Array(h);v.set(new Uint8Array(V,O,4*P));h=new Float32Array(h);for(v=0;v<h.length;v++)t=Math.min(t,h[v]);l.rawData=h;O+=4*P}else 1===l.encoding&&(P=Math.ceil(l.numValidPixels*l.bitsPerPixel/8),h=new ArrayBuffer(4*Math.ceil(P/4)),v=new Uint8Array(h),v.set(new Uint8Array(V,O,P)),l.stuffedData=new Uint32Array(h),O+=P)}}x=t;V=O;O=null!=q.noDataValue?aa.clampFloat32(q.noDataValue):W;
y=q.encodedMaskData;v=q.returnMask;t=0;a=g;e=w;p=Math.floor(M/a);l=Math.floor(C/e);h=2*J;y=y||(b?b.bitset:null);var B;P=new (q.pixelType||Float32Array)(M*C);v&&y&&(B=new Uint8Array(M*C));v=new Float32Array(p*l);for(var G,n,f=0;f<=e;f++){var k=f!==e?l:C%e;if(0!==k)for(var r=0;r<=a;r++){var E=r!==a?p:M%a;if(0!==E){var c=f*M*l+r*p,d=M-E,u=U[t],A;if(2>u.encoding){if(0===u.encoding)var z=u.rawData;else{G=A=z=void 0;n=u.stuffedData;var F=u.bitsPerPixel,K=u.numValidPixels,L=u.offset,H=h,N=v,I=D,R=(1<<F)-
1,T=0,S=0,Y=Math.ceil((I-L)/H);n[n.length-1]<<=8*(4*n.length-Math.ceil(F*K/8));for(G=0;G<K;G++)0===S&&(z=n[T++],S=32),S>=F?(A=z>>>S-F&R,S-=F):(S=F-S,A=(z&R)<<S&R,z=n[T++],S=32-S,A+=z>>>S),N[G]=A<Y?L+A*H:I;z=v}A=0}else var da=2===u.encoding?0:u.offset;if(y)for(n=0;n<k;n++){if(c&7){var fa=y[c>>3];fa<<=c&7}for(G=0;G<E;G++)c&7||(fa=y[c>>3]),fa&128?(B&&(B[c]=1),P[c++]=2>u.encoding?z[A++]:da):(B&&(B[c]=0),P[c++]=O),fa<<=1;c+=d}else if(2>u.encoding)for(n=0;n<k;n++){for(G=0;G<E;G++)P[c++]=z[A++];c+=d}else for(n=
0;n<k;n++)if(P.fill)P.fill(da,c,c+E),c+=E+d;else{for(G=0;G<E;G++)P[c++]=da;c+=d}if(1===u.encoding&&A!==u.numValidPixels)throw"Block and Mask do not match";t++}}}da=B;B={width:M,height:C,pixelData:P,minValue:x,maxValue:D,noDataValue:O};da&&(B.maskData=da);q.returnEncodedMask&&b&&(B.encodedMaskData=b.bitset?b.bitset:null);if(q.returnFileInfo&&(B.fileInfo={fileIdentifierString:X,fileVersion:Z,imageType:Q,height:C,width:M,maxZError:J,eofOffset:V,mask:b?{numBlocksX:b.numBlocksX,numBlocksY:b.numBlocksY,
numBytes:b.numBytes,maxValue:b.maxValue}:null,pixels:{numBlocksX:g,numBlocksY:w,numBytes:m,maxValue:D,minValue:x,noDataValue:O}},q.computeUsedBitDepths)){q=B.fileInfo;b=g*w;X={};for(Z=0;Z<b;Z++)Q=U[Z],0===Q.encoding?X.float32=!0:1===Q.encoding?X[Q.bitsPerPixel]=!0:X[0]=!0;b=Object.keys(X);q.bitDepths=b}return B}})},"esri/layers/support/rasterFormats/Raw":function(){define(function(){const ba=function(aa){let W=1;switch(aa){case Uint8Array:case Int8Array:W=1;break;case Uint16Array:case Int16Array:W=
2;break;case Uint32Array:case Int32Array:case Float32Array:W=4;break;case Float64Array:W=8}return W};return function(){function aa(){}aa.decode=function(W,V){var q=V.pixelType;const O=[],U=V.width*V.height;var X=Math.floor(W.byteLength/(V.width*V.height*ba(V.pixelType)));const {bandIds:P,format:Z}=V;V=P&&P.length||Math.floor(W.byteLength/(V.width*V.height*ba(V.pixelType)));var Q=W.byteLength-W.byteLength%(U*ba(q));const C=new q(W,0,U*X);let M,J;let b,w;if("bip"===Z)for(M=0;M<V;M++){b=new q(U);w=P?
P[M]:M;for(J=0;J<U;J++)b[J]=C[J*X+w];O.push(b)}else if("bsq"===Z)for(M=0;M<V;M++)w=P?P[M]:M,O.push(C.subarray(w*U,(w+1)*U));if(Q<W.byteLength-1)if(W=W.slice(Q),8*W.byteLength<U)var g=null;else{W=new Uint8Array(W,0,Math.ceil(U/8));q=new Uint8Array(U);for(V=Q=V=g=X=0;V<W.length-1;V++)for(g=W[V],Q=7;0<=Q;Q--)q[X++]=g>>Q&1;for(Q=7;X<U-1;)g=W[W.length-1],q[X++]=g>>Q&1,Q--;g=q}return{pixels:O,mask:g}};return aa}()})},"esri/layers/support/rasterFunctions/pixelUtils":function(){define(["exports","../../../core/maybe",
"../PixelBlock"],function(ba,aa,W){function V(b){return aa.isSome(b)&&"esri.layers.support.PixelBlock"===b.declaredClass&&b.pixels&&0<b.pixels.length}function q(b,w){b=Math.min(Math.max(b,-100),100);w=Math.min(Math.max(w,-100),100);let g,m;const D=new Uint8Array(256);for(g=0;256>g;g++)0<b&&100>b?m=(200*g-25500+510*w)/(2*(100-b))+128:0>=b&&-100<b?m=(200*g-25500+510*w)*(100+b)/2E4+128:100===b?(m=200*g-25500+256*(100-b)+510*w,m=0<m?255:0):-100===b&&(m=128),D[g]=255<m?255:0>m?0:m;return D}function O(b,
w,g,m,D,x,y,t){return{xmin:D<=g*b?0:D<g*b+b?D-g*b:b,ymin:x<=m*w?0:x<m*w+w?x-m*w:w,xmax:D+y<=g*b?0:D+y<g*b+b?D+y-g*b:b,ymax:x+t<=m*w?0:x+t<m*w+w?x+t-m*w:w}}function U(b,w,g,m,D,x){const {width:y,height:t}=g.block,{x:a,y:e}=g.offset,{width:p,height:h}=g.mosaic;g=O(y,t,m,D,a,e,p,h);let l=0;var v=0;if(x){var B=x.hasGCSSShiftTransform?360:x.halfWorldWidth,G=y*x.resolutionX,n=x.startX+m*G;G=n+G;n<B&&G>B?v=x.rightPadding:n>=B&&(l=x.leftMargin-x.rightPadding,v=0)}g.xmax-=v;if("number"===typeof w)for(x=g.ymin;x<
g.ymax;x++)for(v=(D*t+x-e)*p+(m*y-a)+l,B=g.xmin;B<g.xmax;B++)b[v+B]=w;else for(x=g.ymin;x<g.ymax;x++)for(v=(D*t+x-e)*p+(m*y-a)+l,B=x*y,n=g.xmin;n<g.xmax;n++)b[v+n]=w[B+n]}function X(b,w,g,m,D){var x=b.filter(G=>V(G))[0];if(aa.isNone(x))return null;const y=m?m.width:w.width,t=m?m.height:w.height;var a=x.width,e=x.height;const p=w.width/a,h=w.height/e;w={offset:g||{x:0,y:0},mosaic:m||w,block:{width:a,height:e}};g=x.pixelType;m=W.getPixelArrayConstructor(g);a=x.pixels.length;x=[];for(var l=0;l<a;l++){e=
new m(y*t);for(let G=0;G<h;G++)for(let n=0;n<p;n++){var v=b[G*p+n];V(v)&&(v=v.pixels[l],U(e,v,w,n,G,D))}x.push(e)}let B;if(b.some(G=>aa.isNone(G)||G.mask&&0<G.mask.length))for(B=new Uint8Array(y*t),m=0;m<h;m++)for(a=0;a<p;a++)e=b[m*p+a],(l=aa.isSome(e)?e.mask:null)?U(B,l,w,a,m,D):e?U(B,1,w,a,m,D):U(B,0,w,a,m,D);b=new W({width:y,height:t,pixels:x,pixelType:g,mask:B});b.updateStatistics();return b}function P(b){if(!V(b))return null;const w=b.clone(),{width:g,height:m,pixels:D,mask:x}=b;var y=D[0];b=
w.pixels[0];for(let e=2;e<m-1;e++){const p=new Map;for(var t=e-2;t<e+2;t++)for(var a=0;4>a;a++){const h=t*g+a;C(p,y[h],x?x[h]:1)}b[e*g]=Z(p);b[e*g+1]=b[e*g+2]=b[e*g];for(t=3;t<g-1;t++)a=(e-2)*g+t+1,C(p,y[a],x?x[a]:1),a=(e-1)*g+t+1,C(p,y[a],x?x[a]:1),a=e*g+t+1,C(p,y[a],x?x[a]:1),a=(e+1)*g+t+1,C(p,y[a],x?x[a]:1),a=(e-2)*g+t-3,Q(p,y[a],x?x[a]:1),a=(e-1)*g+t-3,Q(p,y[a],x?x[a]:1),a=e*g+t-3,Q(p,y[a],x?x[a]:1),a=(e+1)*g+t-3,Q(p,y[a],x?x[a]:1),b[e*g+t]=Z(p);b[e*g+t+1]=b[e*g+t]}for(y=0;y<g;y++)b[y]=b[g+y]=
b[2*g+y],b[(m-1)*g+y]=b[(m-2)*g+y];w.updateStatistics();return w}function Z(b){if(0===b.size)return 0;let w=0,g=-1,m=0;const D=b.keys();let x=D.next();for(;!x.done;)m=b.get(x.value),m>w&&(g=x.value,w=m),x=D.next();return g}function Q(b,w,g){0!==g&&(g=b.get(w),1===g?b.delete(w):b.set(w,g-1))}function C(b,w,g){0!==g&&b.set(w,b.has(w)?b.get(w)+1:1)}function M(b,w,g){let {x:m,y:D}=w;const {width:x,height:y}=g;if(0===m&&0===D&&y===b.height&&x===b.width)return b;const {width:t,height:a}=b;w=Math.max(0,
D);const e=Math.max(0,m),p=Math.min(m+x,t),h=Math.min(D+y,a);if(0>p||0>h||!V(b))return null;m=Math.max(0,-m);D=Math.max(0,-D);const {pixels:l,mask:v}=b;var B=x*y,G=l.length;const n=[];for(var f=0;f<G;f++){var k=l[f],r=W.createEmptyBand(b.pixelType,B);for(let E=w;E<h;E++){const c=E*t;let d=(E+D-w)*x+m;for(let u=e;u<p;u++)r[d++]=k[c+u]}n.push(r)}B=new Uint8Array(B);for(G=w;G<h;G++)for(f=G*t,k=(G+D-w)*x+m,r=e;r<p;r++)B[k++]=v?v[f+r]:1;b=new W({width:g.width,height:g.height,pixelType:b.pixelType,pixels:n,
mask:B});b.updateStatistics();return b}function J(b,w=!0){if(!V(b))return null;const {pixels:g,width:m,height:D,mask:x,pixelType:y}=b;b=[];const t=Math.round(m/2),a=Math.round(D/2),e=D-1,p=m-1;for(var h=0;h<g.length;h++){var l=g[h],v=W.createEmptyBand(y,t*a),B=0;for(var G=0;G<D;G+=2)for(var n=0;n<m;n+=2){var f=l[G*m+n];if(w){var k=n===p?f:l[G*m+n+1];const r=G===e?f:l[G*m+n+m],E=n===p?r:G===e?k:l[G*m+n+m+1];v[B++]=(f+k+r+E)/4}else v[B++]=f}b.push(v)}h=null;if(x)for(h=new Uint8Array(t*a),l=0,v=0;v<
D;v+=2)for(B=0;B<m;B+=2)G=x[v*m+B],w?(n=B===p?G:x[v*m+B+1],f=v===e?G:x[v*m+B+m],k=B===p?f:v===e?n:x[v*m+B+m+1],h[l++]=G*n*f*k?1:0):h[l++]=G;return new W({width:t,height:a,pixelType:y,pixels:b,mask:h})}ba.approximateTransform=function(b,w,g,m,D="nearest"){if(!V(b))return null;"majority"===D&&(b=P(b));const {pixels:x,mask:y,pixelType:t}=b,a=b.width;var e=b.height;b=W.getPixelArrayConstructor(t);var p=x.length;const {width:h,height:l}=w;w=m.cols;var v=m.rows;const B=Math.ceil(h/w-.1/w),G=Math.ceil(l/
v-.1/v);m=!1;for(var n=0;n<g.length;n+=3)-1===g[n]&&-1===g[n+1]&&-1===g[n+2]&&(m=!0);let f,k,r,E,c,d;const u=B*w;n=u*G*v;const A=new Float32Array(n),z=new Float32Array(n);n=0;let F,K;const L="majority"===D?0:.5;for(let I=0;I<G;I++)for(let R=0;R<B;R++){f=12*(I*B+R);D=g[f];k=g[f+1];r=g[f+2];E=g[f+3];c=g[f+4];d=g[f+5];for(var H=0;H<v;H++){n=(I*v+H)*u+R*w;K=(H+.5)/v;for(var N=0;N<H;N++)F=(N+.5)/w,A[n+N]=Math.round((D*F+k*K+r)*a-L),z[n+N]=Math.round((E*F+c*K+d)*e-L)}f+=6;D=g[f];k=g[f+1];r=g[f+2];E=g[f+
3];c=g[f+4];d=g[f+5];for(H=0;H<v;H++)for(n=(I*v+H)*u+R*w,K=(H+.5)/v,N=H;N<w;N++)F=(N+.5)/w,A[n+N]=Math.round((D*F+k*K+r)*a-L),z[n+N]=Math.round((E*F+c*K+d)*e-L)}g=(I,R)=>{for(let T=0;T<l;T++){f=T*u;for(let S=0;S<h;S++)I[T*h+S]=0>A[f]||0>z[f]?0:R[A[f]+z[f]*a],f++}};e=[];for(v=0;v<p;v++)w=new b(h*l),g(w,x[v]),e.push(w);b=new W({width:h,height:l,pixelType:t,pixels:e});if(y)b.mask=new Uint8Array(h*l),g(b.mask,y);else if(m)for(b.mask=new Uint8Array(h*l),p=0;p<h*l;p++)b.mask[p]=0>A[p]||0>z[p]?0:1;b.updateStatistics();
return b};ba.clip=M;ba.colorize=function(b,w){if(!V(b)||!w&&(w.indexedColormap||w.indexed2DColormap))return b;const g=b.clone();var m=g.pixels;let D=g.mask;const x=g.width*g.height;if(1!==m.length)return b;const {indexedColormap:y,indexed2DColormap:t,offset:a,alphaSpecified:e}=w;w=y.length-1;b=0;m=m[0];const p=new Uint8Array(m.length),h=new Uint8Array(m.length),l=new Uint8Array(m.length);let v=0;if(y)if(D)for(b=0;b<x;b++)D[b]&&(v=4*(m[b]-a),v<a||v>w?D[b]=0:(p[b]=y[v],h[b]=y[v+1],l[b]=y[v+2],D[b]=
y[v+3]));else{D=new Uint8Array(x);for(b=0;b<x;b++)v=4*(m[b]-a),v<a||v>w?D[b]=0:(p[b]=y[v],h[b]=y[v+1],l[b]=y[v+2],D[b]=y[v+3]);g.mask=D}else if(D)for(b=0;b<x;b++)D[b]&&(w=t[m[b]],p[b]=w[0],h[b]=w[1],l[b]=w[2],D[b]=w[3]);else{D=new Uint8Array(x);for(b=0;b<x;b++)w=t[m[b]],p[b]=w[0],h[b]=w[1],l[b]=w[2],D[b]=w[3];g.mask=D}g.pixels=[p,h,l];g.statistics=null;g.pixelType="u8";g.maskIsAlpha=e;return g};ba.createColormapLUT=function(b){if(b){var w=b.colormap;if(w&&0!==w.length){w=w.sort((e,p)=>e[0]-p[0]);
var g=0;0>w[0][0]&&(g=w[0][0]);var m=Math.max(256,w[w.length-1][0]-g+1),D=new Uint8Array(4*m),x=[],y=0,t=0,a=5===w[0].length;if(65536<m)return w.forEach(e=>{x[e[0]-g]=a?e.slice(1):e.slice(1).concat([255])}),{indexed2DColormap:x,offset:g,alphaSpecified:a};if(b.fillUnspecified)for(b=w[t],y=b[0]-g;y<m;y++)D[4*y]=b[1],D[4*y+1]=b[2],D[4*y+2]=b[3],D[4*y+3]=a?b[4]:255,y===b[0]-g&&(b=t===w.length-1?b:w[++t]);else for(y=0;y<w.length;y++)b=w[y],t=4*(b[0]-g),D[t]=b[1],D[t+1]=b[2],D[t+2]=b[3],D[t+3]=a?b[4]:255;
return{indexedColormap:D,offset:g,alphaSpecified:a}}}};ba.createContrastBrightnessLUT=q;ba.createHistogramEqualizationLUT=function(b,w=256){w=Math.min(w,256);const {size:g,counts:m}=b;b=new Uint8Array(g);var D=m.reduce((e,p)=>e+p/w,0);let x=0;var y=0;let t=0,a=D;for(let e=0;e<g;e++)if(t+=m[e],!(e<g-1&&t+m[e+1]<a)){for(;x<w-1&&a<t;)x++,a+=D;for(;y<=e;y++)b[y]=x;y=e+1}for(D=y;D<g;D++)b[D]=w-1;return b};ba.createStretchLUT=function(b){const {minCutOff:w,maxCutOff:g,gamma:m,pixelType:D}=b,x=b.outMin||
0,y=b.outMax||255;if(-1===["u8","u16","s8","s16"].indexOf(D))return null;const t=w.length;let a;let e=0;"s8"===D?e=-127:"s16"===D&&(e=-32767);let p=256;-1<["u16","s16"].indexOf(D)&&(p=65536);const h=[],l=y-x;for(a=0;a<t;a++)h[a]=g[a]-w[a];var v=m&&m.length>=t;const B=[];if(v)for(a=0;a<t;a++)B[a]=1<m[a]?2<m[a]?6.5+(m[a]-2)**2.5:6.5+100*(2-m[a])**4:1;let G;const n=[];let f,k,r;if(v)for(a=0;a<t;a++){r=[];for(v=0;v<p;v++)f=v+e,G=(f-w[a])/h[a],k=1,1<m[a]&&(k-=(1/l)**(G*B[a])),r[v]=f<g[a]&&f>w[a]?Math.floor(k*
l*G**(1/m[a]))+x:f>=g[a]?y:x;n[a]=r}else for(a=0;a<t;a++){r=[];for(v=0;v<p;v++)f=v+e,r[v]=f<=w[a]?x:f>=g[a]?y:Math.floor((f-w[a])/h[a]*l)+x;n[a]=r}if(null!=b.contrastOffset)for(b=q(b.contrastOffset,b.brightnessOffset),a=0;a<t;a++)for(r=n[a],v=0;v<p;v++)r[v]=b[r[v]];return{lut:n,offset:e}};ba.estimateStatisticsFromHistograms=function(b){const w=[];for(let x=0;x<b.length;x++){const {min:y,max:t,size:a,counts:e}=b[x];let p=0;var g=0;for(var m=0;m<a;m++)p+=e[m],g+=m*e[m];g/=p;m=0;for(var D=0;D<a;D++)m+=
e[D]*(D-g)**2;D=(t-y)/a;w.push({min:y,max:t,avg:(g+.5)*D+y,stddev:Math.sqrt(m/(p-1))*D})}return w};ba.estimateStatisticsHistograms=function(b){if(!V(b))return null;b.statistics||b.updateStatistics();const {pixels:w,mask:g,pixelType:m,statistics:D}=b;b=b.width*b.height;const x=w.length;let y,t;let a;var e;const p=[],h=[];for(a=0;a<x;a++){var l=new Uint32Array(256);var v=w[a];if("u8"===m)if(y=-.5,t=255.5,g)for(e=0;e<b;e++)g[e]&&l[v[e]]++;else for(e=0;e<b;e++)l[v[e]]++;else{y=D[a].minValue;t=D[a].maxValue;
var B=(t-y)/256;var G=new Uint32Array(257);if(g)for(e=0;e<b;e++)g[e]&&G[Math.floor((v[e]-y)/B)]++;else for(e=0;e<b;e++)G[Math.floor((v[e]-y)/B)]++;for(e=0;255>e;e++)l[e]=G[e];l[255]=G[255]+G[256]}p.push({min:y,max:t,size:256,counts:l});for(e=v=G=B=0;256>e;e++)B+=l[e],G+=e*l[e];G/=B;for(e=0;256>e;e++)v+=l[e]*(e-G)**2;l=Math.sqrt(v/(B-1));B=(t-y)/256;e=(G+.5)*B+y;l*=B;h.push({min:y,max:t,avg:e,stddev:l})}return{statistics:h,histograms:p}};ba.extractBands=function(b,w){if(null==w||!w.length||!V(b))return b;
const g=b.pixels.length;return w&&w.some(m=>m>=g)||1===g&&1===w.length&&0===w[0]||g===w.length&&!w.some((m,D)=>m!==D)?b:new W({pixelType:b.pixelType,width:b.width,height:b.height,mask:b.mask,validPixelCount:b.validPixelCount,maskIsAlpha:b.maskIsAlpha,pixels:w.map(m=>b.pixels[m]),statistics:b.statistics&&w.map(m=>b.statistics[m])})};ba.getClipBounds=O;ba.isValidPixelBlock=V;ba.lookupPixels=function(b,w){if(!V(b))return null;const {pixels:g,mask:m}=b,D=b.width*b.height,x=g.length;let y=w.lut;({offset:w}=
w);let t,a;y&&1===y[0].length&&(y=g.map(()=>y));const e=[];let p,h,l;if(w)if(null==m)for(t=0;t<x;t++){p=g[t];h=y[t];l=new Uint8Array(D);for(a=0;a<D;a++)l[a]=h[p[a]-w];e.push(l)}else for(t=0;t<x;t++){p=g[t];h=y[t];l=new Uint8Array(D);for(a=0;a<D;a++)m[a]&&(l[a]=h[p[a]-w]);e.push(l)}else if(null==m)for(t=0;t<x;t++){p=g[t];h=y[t];l=new Uint8Array(D);for(a=0;a<D;a++)l[a]=h[p[a]];e.push(l)}else for(t=0;t<x;t++){p=g[t];h=y[t];l=new Uint8Array(D);for(a=0;a<D;a++)m[a]&&(l[a]=h[p[a]]);e.push(l)}b=new W({width:b.width,
height:b.height,pixels:e,mask:m,pixelType:"u8"});b.updateStatistics();return b};ba.mosaic=X;ba.mosaicPixelData=function(b,w){if(!b||0===b.length)return null;var g=b.filter(h=>h.pixelBlock)[0];if(!g||aa.isNone(g.pixelBlock))return null;var m=(g.extent.xmax-g.extent.xmin)/g.pixelBlock.width;const D=(g.extent.ymax-g.extent.ymin)/g.pixelBlock.height,x=.01*Math.min(m,D),y=b.sort((h,l)=>Math.abs(h.extent.ymax-l.extent.ymax)>x?l.extent.ymax-h.extent.ymax:Math.abs(h.extent.xmin-l.extent.xmin)>x?h.extent.xmin-
l.extent.xmin:0);var t=Math.min.apply(null,y.map(h=>h.extent.xmin));const a=Math.min.apply(null,y.map(h=>h.extent.ymin)),e=Math.max.apply(null,y.map(h=>h.extent.xmax)),p=Math.max.apply(null,y.map(h=>h.extent.ymax));b={x:Math.round((w.xmin-t)/m),y:Math.round((p-w.ymax)/D)};t={width:Math.round((e-t)/m),height:Math.round((p-a)/D)};m={width:Math.round((w.xmax-w.xmin)/m),height:Math.round((w.ymax-w.ymin)/D)};if(Math.round(t.width/g.pixelBlock.width)*Math.round(t.height/g.pixelBlock.height)!==y.length||
0>b.x||0>b.y||t.width<m.width||t.height<m.height)return null;g=y.map(h=>h.pixelBlock);g=X(g,t,b,m);return{extent:w,pixelBlock:g}};ba.remapColor=function(b,w){if(!V(b))return null;b=b.clone();var {pixels:g}=b;const m=b.width*b.height,D=w.length,x=Math.floor(D/2),y=w[Math.floor(x)];g=g[0];let t,a,e,p,h,l,v=!1;const B=new Uint8Array(m),G=new Uint8Array(m),n=new Uint8Array(m);let f=b.mask;const k=4===w[0].mappedColor.length;f||(f=new Uint8Array(m),f.fill(k?255:1),b.mask=f);for(h=0;h<m;h++)if(f[h]){t=
g[h];v=!1;l=x;a=y;e=0;for(p=D-1;1<p-e;){if(t===a.value){v=!0;break}t>a.value?e=l:p=l;l=Math.floor((e+p)/2);a=w[Math.floor(l)]}v||(t===w[e].value?(a=w[e],v=!0):t===w[p].value?(a=w[p],v=!0):t<w[e].value?(v=!1,a=null):t>w[e].value&&(t<w[p].value?(a=w[e],v=!0):p===D-1?(v=!1,a=null):(a=w[p],v=!0)));v?(B[h]=a.mappedColor[0],G[h]=a.mappedColor[1],n[h]=a.mappedColor[2],f[h]=a.mappedColor[3]):B[h]=G[h]=n[h]=f[h]=0}b.pixels=[B,G,n];b.mask=f;b.pixelType="u8";b.maskIsAlpha=k;return b};ba.resampleByMajority=P;
ba.setValidBoundary=function(b,w,g){if(!V(b))return null;const {width:m,height:D}=b,x=w.x;w=w.y;const y=g.width+x;g=g.height+w;if(0>x||0>w||y>m||g>D||0===x&&0===w&&y===m&&g===D)return b;b.mask||(b.mask=new Uint8Array(m*D));const t=b.mask;for(let a=0;a<D;a++){const e=a*m;for(let p=0;p<m;p++)t[e+p]=a<w||a>=g||p<x||p>=y?0:1}b.updateStatistics();return b};ba.split=function(b,w,g){if(!V(b))return null;const {width:m,height:D}=w;let {width:x,height:y}=b;const t=new Map,a={x:0,y:0};g=null==g?1:1+g;for(let e=
0;e<g;e++){const p=Math.ceil(x/m),h=Math.ceil(y/D);for(let l=0;l<h;l++){a.y=l*D;for(let v=0;v<p;v++){a.x=v*m;const B=M(b,a,w);t.set(`${e}/${l}/${v}`,B)}}e<g-1&&(b=J(b));x=Math.round(x/2);y=Math.round(y/2)}return t};ba.stretch=function(b,w){if(!V(b))return null;b=b.clone();const {pixels:g,mask:m}=b,{minCutOff:D,maxCutOff:x,gamma:y}=w,t=w.outMin||0;w=w.outMax||255;const a=b.width*b.height,e=g.length;let p;let h,l,v;const B=w-t,G=[];for(p=0;p<e;p++)G[p]=x[p]-D[p];var n=y&&y.length>=e;const f=[];if(n)for(p=
0;p<e;p++)f[p]=1<y[p]?2<y[p]?6.5+(y[p]-2)**2.5:6.5+100*(2-y[p])**4:1;if(n)if(null!=m)for(n=0;n<a;n++){if(m[n])for(p=0;p<e;p++)h=g[p][n],v=(h-D[p])/G[p],l=1,1<y[p]&&(l-=(1/B)**(v*f[p])),g[p][n]=h<x[p]&&h>D[p]?Math.floor(l*B*v**(1/y[p]))+t:h>=x[p]?w:t}else for(n=0;n<a;n++)for(p=0;p<e;p++)h=g[p][n],v=(h-D[p])/G[p],l=1,1<y[p]&&(l-=(1/B)**(v*f[p])),g[p][n]=h<x[p]&&h>D[p]?Math.floor(l*B*v**(1/y[p]))+t:h>=x[p]?w:t;else if(null!=m)for(n=0;n<a;n++){if(m[n])for(p=0;p<e;p++)h=g[p][n],g[p][n]=h<x[p]&&h>D[p]?
Math.floor((h-D[p])/G[p]*B)+t:h>=x[p]?w:t}else for(n=0;n<a;n++)for(p=0;p<e;p++)h=g[p][n],g[p][n]=h<x[p]&&h>D[p]?Math.floor((h-D[p])/G[p]*B)+t:h>=x[p]?w:t;b.pixelType="u8";b.updateStatistics();return b};Object.defineProperty(ba,"__esModule",{value:!0})})},"esri/layers/support/rasterFunctions/vectorFieldUtils":function(){define(["exports","../../../core/jsonMap","../../../core/maybe","../PixelBlock","./pixelUtils"],function(ba,aa,W,V,q){function O(a,e){return b.get(a)/b.get(e)||1}function U(a,e="geographic"){const [p,
h]=a;a=Math.sqrt(p*p+h*h);let l=Math.atan2(h,p)*w;l=(360+l)%360;"geographic"===e&&(l=(450-l)%360);return[a,l]}function X(a,e="geographic"){let p=a[1];"geographic"===e&&(p=(450-p)%360);p%=360;a=a[0];return[a*Math.cos(p/w),a*Math.sin(p/w)]}function P(a=0,e=Math.PI,p=!0){p&&(e=(2*Math.PI-e)%(2*Math.PI));var h=p?-1:1;p=5*h;const l=20*h,v=25*h;h*=2;let [B,G]=[5,0-l],[n,f]=[B+2,G],[k,r]=[n-0,f+h],[E,c]=[-5,0-v],[d,u]=[E+0,c-h];a=Math.ceil(a/5);let A=Math.floor(a/10);a-=8*A;const z=[],F=[];for(let Y=0;Y<
a/2;Y++,A--){0>=A&&1===a%2&&Y===(a-1)/2&&(E=0,d=E+0,c=(c+G)/2,u=c-h);const [da,fa]=Z(E,c,e,45);if(0<A){const [la,ha]=Z(n,c,e,45),[ea,ka]=Z(B,G,e,45);z.push(la);z.push(ha);z.push(da);z.push(fa);z.push(ea);z.push(ka)}else{const [la,ha]=Z(n,f,e,45),[ea,ka]=Z(k,r,e,45),[ia,ca]=Z(d,u,e,45);F.push(da);F.push(fa);F.push(ia);F.push(ca);F.push(ea);F.push(ka);F.push(la);F.push(ha)}c+=p;G+=p;f+=p;r+=p;u+=p}const [K,L]=Z(5,0+l,e,45),[H,N]=Z(7,0+l,e,45),[I,R]=Z(5,0-v,e,45),[T,S]=Z(7,0-v,e,45);return{pennants:z,
barbs:F,shaft:[K,L,H,N,I,R,T,S]}}function Z(a,e,p,h=1){return[Math.sqrt(a*a+e*e)/h,(2*Math.PI+(2*Math.PI+Math.atan2(e,a))%(2*Math.PI)-p)%(2*Math.PI)]}function Q(a,e,p,h){p=O(h||"knots",p);for(h=1;h<e.length;h++)if(h===e.length-1){if(a<e[h]*p)break}else if(a<=e[h]*p)break;return Math.min(h-1,e.length-2)}function C(a,e,p,h,l){let v=0;switch(e){case "beaufort_kn":v=Q(a,D,"knots",p);break;case "beaufort_km":v=Q(a,D,"kilometer-per-hour",p);break;case "beaufort_ft":v=Q(a,D,"feet-per-second",p);break;case "beaufort_m":v=
Q(a,D,"meter-per-second",p);break;case "classified_arrow":v=Q(a,l,h,p);break;case "ocean_current_m":v=Q(a,x,"meter-per-second",p);break;case "ocean_current_kn":v=Q(a,y,"knots",p)}return v}function M(a,e){const {style:p,inputUnit:h,outputUnit:l,breakValues:v}=e;e=g.fromJSON(h);const B=g.fromJSON(l);let G=0,n=0;const {width:f,height:k,mask:r}=a,E=a.pixels[0];a=a.pixels[1];var c=r?r.filter(z=>0<z).length:f*k;const d=new Float32Array(42*c);c=new Uint32Array(15*c);for(let z=0;z<k;z++)for(let F=0;F<f;F++){var u=
z*f+F;if(!r||r[z*f+F]){var A;const K=null!=(A=(a[u]+360)%360/180*Math.PI)?A:2*Math.PI*Math.random(),L=C(E[u],p,e,B,v);for(let H=0;H<m.length;H+=2)d[G++]=(F+.5)/f,d[G++]=(z+.5)/k,d[G++]=m[H],d[G++]=m[H+1]+K,d[G++]=L,d[G++]=E[u];u=7*(G/42-1);c[n++]=u;c[n++]=u+1;c[n++]=u+2;c[n++]=u+0;c[n++]=u+4;c[n++]=u+3;c[n++]=u+0;c[n++]=u+2;c[n++]=u+3;c[n++]=u+2;c[n++]=u+5;c[n++]=u+3;c[n++]=u+5;c[n++]=u+6;c[n++]=u+3}}return{vertexData:d,indexData:c}}function J(a,e){let p=0,h=0;const {width:l,height:v,mask:B}=a;a=
a.pixels[0];const G=[],n=[];e="wind_speed"===e.style?5:Number.MAX_VALUE;for(let k=0;k<v;k++)for(let r=0;r<l;r++){var f=k*l+r;if((!B||B[k*l+r])&&a[f]<e){for(let E=0;4>E;E++)G[p++]=(r+.5)/l,G[p++]=(k+.5)/v,G[p++]=2>E?-.5:.5,G[p++]=0===E%2?-.5:.5,G[p++]=0,G[p++]=a[f];f=4*(p/24-1);n[h++]=f;n[h++]=f+1;n[h++]=f+2;n[h++]=f+1;n[h++]=f+2;n[h++]=f+3}}return{vertexData:new Float32Array(G),indexData:new Uint32Array(n)}}const b=new Map;b.set("meter-per-second",1);b.set("kilometer-per-hour",.277778);b.set("knots",
.514444);b.set("feet-per-second",.3048);b.set("mile-per-hour",.44704);const w=180/Math.PI,g=new aa.JSONMap({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"}),m=function(a=0,e=0,p=Math.PI,h=!0){h&&(p=(2*Math.PI-p)%(2*Math.PI));h=h?-1:1;const l=-7*h,v=-2*h,B=-16*h,[G,n]=Z(0,e+13*h,p,29),[f,k]=Z(a-5.5,e+l,p,29),[r,E]=Z(a+5.5,e+l,p,29),[c,d]=Z(a-1.5,e+v,p,29),[u,A]=Z(a+1.5,e+v,p,29),
[z,F]=Z(a-1.5,e+B,p,29),[K,L]=Z(a+1.5,e+B,p,29);return[G,n,f,k,c,d,u,A,r,E,z,F,K,L]}(0,0,0),D=[0,1,3,6,10,16,21,27,33,40,47,55,63],x=[0,.5,1,1.5,2],y=[0,.25,.5,1,1.5,2,2.5,3,3.5,4],t=[];ba.convertVectorFieldData=function(a,e,p="geographic",h=1){if(!q.isValidPixelBlock(a))return a;const {pixels:l,width:v,height:B}=a;var G=v*B;const n=l[0],f=l[1],k=V.createEmptyBand(a.pixelType,G);G=V.createEmptyBand(a.pixelType,G);let r=0;for(let E=0;E<B;E++)for(let c=0;c<v;c++)"vector-uv"===e?([k[r],G[r]]=U([n[r],
f[r]],p),k[r]*=h):([k[r],G[r]]=X([n[r],f[r]],p),k[r]*=h,G[r]*=h),r++;a=new V({pixelType:a.pixelType,width:a.width,height:a.height,mask:a.mask,validPixelCount:a.validPixelCount,maskIsAlpha:a.maskIsAlpha,pixels:[k,G]});a.updateStatistics();return a};ba.convertVectorFieldUnit=function(a,e,p=1){if(1===p||!q.isValidPixelBlock(a))return a;a=a.clone();const {pixels:h,width:l,height:v}=a,B=h[0],G=h[1];let n=0;for(let f=0;f<v;f++)for(let k=0;k<l;k++)"vector-uv"===e?(B[n]*=p,G[n]*=p):B[n]*=p,n++;a.updateStatistics();
return a};ba.createVFMesh=function(a,e){if("simple_scalar"===e.style)var p=J(a,e);else if("wind_speed"===e.style){{if(0===t.length)for(var h=0;30>h;h++)t.push(P(5*h,0));e=g.fromJSON(e.inputUnit);e=O(e,"knots");const {width:G,height:n,mask:f}=a;h=a.pixels[0];a=a.pixels[1];const k=[],r=[];let E=0,c=0;for(let d=0;d<n;d++)for(let u=0;u<G;u++){var l=d*G+u,v=h[l]*e;if((!f||f[d*G+u])&&5<=v){const A=null!=(p=(a[l]+360)%360/180*Math.PI)?p:2*Math.PI*Math.random(),{pennants:z,barbs:F,shaft:K}=t[Math.min(Math.floor(v/
5),29)];if(0===z.length+F.length)continue;l=k.length/6;const L=(u+.5)/G,H=(d+.5)/n;for(var B=0;B<z.length;B+=2)k[E++]=L,k[E++]=H,k[E++]=z[B],k[E++]=z[B+1]+A,k[E++]=0,k[E++]=v;for(B=0;B<F.length;B+=2)k[E++]=L,k[E++]=H,k[E++]=F[B],k[E++]=F[B+1]+A,k[E++]=0,k[E++]=v;for(B=0;B<K.length;B+=2)k[E++]=L,k[E++]=H,k[E++]=K[B],k[E++]=K[B+1]+A,k[E++]=0,k[E++]=v;for(v=0;v<z.length/6;v++)r[c++]=l,r[c++]=l+1,r[c++]=l+2,l+=3;for(v=0;v<F.length/8;v++)r[c++]=l,r[c++]=l+1,r[c++]=l+2,r[c++]=l+1,r[c++]=l+2,r[c++]=l+3,
l+=4;r[c++]=l+0;r[c++]=l+1;r[c++]=l+2;r[c++]=l+1;r[c++]=l+3;r[c++]=l+2;l+=4}}p={vertexData:new Float32Array(k),indexData:new Uint32Array(r)}}}else p=M(a,e);return p};ba.createVFMeshScalar=J;ba.getUnitConversionFactor=O;ba.sampleVectorField=function(a,e,p,h=[0,0],l=.5){const {width:v,height:B,mask:G}=a,[n,f]=a.pixels,[k,r]=h;a=Math.round((v-k)/p);h=Math.round((B-r)/p);var E=a*h;const c=new Float32Array(E),d=new Float32Array(E);E=new Uint8Array(E);e="vector-uv"===e;for(let A=0;A<h;A++)for(let z=0;z<
a;z++){let F=0;const K=A*a+z,L=Math.max(0,A*p+r),H=Math.max(0,z*p+k),N=Math.min(B,L+p),I=Math.min(v,H+p);for(let R=L;R<N;R++)for(let T=H;T<I;T++){var u=R*v+T;if(!G||G[u]){F++;u=e?[n[u],f[u]]:[n[u],(360+f[u])%360];const [S,Y]=e?u:X(u);c[K]+=S;d[K]+=Y}}if(F>=(N-L)*(I-H)*(1-l)){E[K]=1;const [R,T]=U([c[K]/F,d[K]/F]);c[K]=R;d[K]=T}else E[K]=0,c[K]=0,d[K]=0}p=new V({width:a,height:h,pixels:[c,d],mask:E});p.updateStatistics();return p};ba.snapImageToSymbolTile=function(a,e,p,h,l){if(!W.isSome(l)||!l.spatialReference.equals(a.spatialReference))return{extent:a,
width:e,height:p,resolution:a.width/e};const v=l.xmin;l=l.ymax;h=Math.max(h||0,30);e=((a.xmax-a.xmin)/Math.ceil(1/h*e)+(a.ymax-a.ymin)/Math.ceil(1/h*p))/2;a.xmin=v+Math.floor((a.xmin-v)/e)*e;a.xmax=v+Math.ceil((a.xmax-v)/e)*e;a.ymin=l+Math.floor((a.ymin-l)/e)*e;a.ymax=l+Math.ceil((a.ymax-l)/e)*e;return{extent:a,width:Math.round(a.width/e),height:Math.round(a.height/e),resolution:e}};ba.unitKebabDict=g;ba.uvComponentToVector=U;Object.defineProperty(ba,"__esModule",{value:!0})})},"esri/renderers/support/RasterSymbolizer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/colorUtils ../../core/JSONSupport ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/RasterInfo ../../layers/support/rasterFunctions/pixelUtils ../../layers/support/rasterFunctions/surfaceUtils ./colorRampUtils".split(" "),
function(ba,aa,W,V,q,O,U,X,P,Z,Q,C,M,J){function b(x,y){const {attributeTable:t,bandCount:a}=x;return!O.isSome(t)||1<a||y&&null==t.fields.find(e=>e.name.toLowerCase()===y.toLowerCase())?!1:!0}function w(x){const {bandCount:y,colormap:t}=x;return O.isSome(t)&&t.length&&1===y}function g(x){return C.isValidPixelBlock(x)&&0!==x.validPixelCount}const m=q.getLogger("esri.renderers.support.RasterSymbolizer"),D={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,
4294967295],s32:[-2147483648,2147483647],f32:[-3.4*1E39,3.4*1E39],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]};V=function(x){function y(a){return x.call(this,a)||this}ba._inheritsLoose(y,x);var t=y.prototype;t.bind=function(){const {rendererJSON:a}=this;if(!a)return!1;this.lookup={rendererJSON:{}};let e;switch(a.type){case "uniqueValue":e=this._updateUVRenderer(a);break;case "rasterColormap":e=this._updateColormapRenderer(a);break;case "rasterStretch":e=this._updateStretchRenderer(a);break;case "classBreaks":e=
this._updateClassBreaksRenderer(a);break;case "rasterShadedRelief":e=this._updateShadedReliefRenderer(a);break;case "vectorField":e=this._updateVectorFieldRenderer()}return e};t.symbolize=function(a){let e=a&&a.pixelBlock;if(!g(e))return e;if(a.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(e,a.simpleStretchParams);try{3<e.pixels.length&&(e=C.extractBands(e,[0,1,2]));let p;switch(this.rendererJSON.type){case "uniqueValue":case "rasterColormap":p=this._symbolize_colormap(e);
break;case "classBreaks":p=this._symbolize_classBreaks(e);break;case "rasterStretch":p=this._symbolize_stretch(e,a.bandIds);break;case "rasterShadedRelief":({extent:a}=a),p=this._symbolize_shadedRelief(e,{isGCS:a.spatialReference.isGeographic,resolution:{x:(a.xmax-a.xmin)/e.width,y:(a.ymax-a.ymin)/e.height}})}return p}catch(p){return m.error("symbolize",p.message),e}};t.simpleStretch=function(a,e){if(!g(a))return a;try{return 3<a.pixels.length&&(a=C.extractBands(a,[0,1,2])),C.stretch(a,e)}catch(p){return m.error("symbolize",
p.message),a}};t.generateWebGLParameters=function(a){if(-1<["uniqueValue","rasterColormap","classBreaks"].indexOf(this.rendererJSON.type)){var e;const {indexedColormap:B,offset:G}=(null==(e=this.lookup)?void 0:e.colormapLut)||{};return{colormap:B,colormapOffset:G,type:"lut"}}const {pixelBlock:p,isGCS:h,resolution:l,bandIds:v}=a;({rendererJSON:a}=this);return"rasterStretch"===a.type?this.generateStretchWebGLParams(p,a,v):"rasterShadedRelief"===a.type?this.generateShadedReliefWebGLParams(a,h,l):"vectorField"===
a.type?this._generateVectorFieldWebGLParams(a):null};t._isLUTChanged=function(a){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){const e=this.rendererJSON.colorRamp;if(a)return JSON.stringify(e)!==JSON.stringify(this.lookup.rendererJSON.colorRamp);({...this.rendererJSON});({...this.lookup.rendererJSON})}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)};t._symbolize_colormap=function(a){return this._isLUTChanged()&&!this.bind()?
a:C.colorize(a,this.lookup.colormapLut)};t._symbolize_classBreaks=function(a){const e=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType);return this._isLUTChanged()&&!this.bind()?a:e?C.colorize(a,this.lookup.colormapLut):C.remapColor(a,this.lookup.remapLut)};t._symbolize_stretch=function(a,e){const {pixelType:p,bandCount:h}=this.rasterInfo,l=this.rendererJSON,v=-1<["u8","u16","s8","s16"].indexOf(p);let B;var {dra:G}=l;var n=l.useGamma?l.gamma:null;if("histogramEqualization"===l.stretchType){var f=
G?null:this.lookup.histogramLut;e=this.getStretchCutoff(l,a,e,!f);n=C.stretch(a,{...e,gamma:n});n=C.lookupPixels(n,{lut:G?e.histogramLut:f,offset:0})}else if(v){var k;if(G)G=this.getStretchCutoff(l,a,e),B=C.createStretchLUT({pixelType:p,...G,gamma:n});else{if(this._isLUTChanged()&&!this.bind())return a;B=this.lookup?this.lookup.stretchLut:null}if(!B)return a;1<h&&(null==e?void 0:e.length)===(null==(f=O.unwrap(a))?void 0:f.pixels.length)&&(null==(k=B)?void 0:k.lut.length)===h&&(B={lut:e.map(r=>B.lut[r]),
offset:B.offset});n=C.lookupPixels(a,B)}else G=this.getStretchCutoff(l,a,e),n=C.stretch(a,{...G,gamma:n});if(l.colorRamp){if(this._isLUTChanged(!0)&&!this.bind())return a;n=C.colorize(n,this.lookup.colormapLut)}return n};t._symbolize_shadedRelief=function(a,e){var p,h,l=this.rendererJSON;e=M.hillshade(a,{...l,...e});if(!l.colorRamp||this._isLUTChanged(!0)&&!this.bind())return e;l=this.lookup?this.lookup.hsvMap:null;if(!l)return e;const v=null!=(p=null==(h=O.unwrap(this.rasterInfo.statistics))?void 0:
h[0])?p:{min:0,max:8E3};M.tintHillshade(e,a,l,v);return e};t._updateVectorFieldRenderer=function(){const {bandCount:a,dataType:e}=this.rasterInfo;return 2===a&&("vector-magdir"===e||"vector-uv"===e)};t._updateUVRenderer=function(a){const {bandCount:e,attributeTable:p,pixelType:h}=this.rasterInfo,l=a.field1;if(!l)return!1;const v=a.defaultSymbol;var B=1===e&&["u8","s8"].includes(h);if(!b(this.rasterInfo,l)&&!B)return!1;const G=[];if(p){const n=p.fields.filter(f=>"value"===f.name.toLowerCase())[0];
if(!n)return!1;p.features.forEach(f=>{var k,r=a.uniqueValueInfos.filter(E=>String(E.value)===String(f.attributes[l]))[0];(r=null==r?void 0:null==(k=r.symbol)?void 0:k.color)?G.push([f.attributes[n.name]].concat(r)):v&&G.push([f.attributes[n.name]].concat(v.color))})}else{if("value"!==l.toLowerCase())return!1;a.uniqueValueInfos.forEach(n=>{var f;const k=null==n?void 0:null==(f=n.symbol)?void 0:f.color;k?G.push([parseInt(""+n.value,10)].concat(k)):v&&G.push([parseInt(""+n.value,10)].concat(v.color))})}if(0===
G.length)return!1;B=C.createColormapLUT({colormap:G});this.lookup={rendererJSON:a,colormapLut:B};return this.canRenderInWebGL=!0};t._updateColormapRenderer=function(a){if(!w(this.rasterInfo))return!1;var e=a.colormapInfos.map(p=>[p.value].concat(p.color)).sort((p,h)=>p[0]-h[0]);if(!e||0===e.length)return!1;e=C.createColormapLUT({colormap:e});this.lookup={rendererJSON:a,colormapLut:e};return this.canRenderInWebGL=!0};t._updateShadedReliefRenderer=function(a){if("elevation"!==this.rasterInfo.dataType)return!1;
if(a.colorRamp){var e=J.convertColorRampToColormap(a.colorRamp,256,!0);e=C.createColormapLUT({colormap:e});const p=[],h=e.indexedColormap;for(let l=0;l<h.length;l+=4){const v=W.toHSV({r:h[l],g:h[l+1],b:h[l+2]});p.push([v.h/60,v.s/100,255*v.v/100])}this.lookup={rendererJSON:a,colormapLut:e,hsvMap:p}}else this.lookup=null;return this.canRenderInWebGL=!0};t._updateClassBreaksRenderer=function(a){var e=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType),p=a.classBreakInfos;if(null==p||!p.length)return!1;
p=p.sort((G,n)=>G.classMaxValue-n.classMaxValue);const h=p[p.length-1];var l=a.minValue;if(!e){e=[];for(var v=0;v<p.length;v++){var B;e.push({value:null!=(B=p[v].classMinValue)?B:l,mappedColor:p[v].symbol.color});l=p[v].classMaxValue}e.push({value:h.classMaxValue,mappedColor:h.symbol.color});this.lookup={rendererJSON:a,remapLut:e};this.canRenderInWebGL=!1;return!0}B=[];l=Math.floor(a.minValue);for(e=0;e<p.length;e++){for(v=p[e];l<v.classMaxValue;l++)B.push([l].concat(v.symbol.color));l=Math.ceil(v.classMaxValue)}h.classMaxValue===
l&&B.push([h.classMaxValue].concat(h.symbol.color));p=C.createColormapLUT({colormap:B,fillUnspecified:!1});this.lookup={rendererJSON:a,colormapLut:p};return this.canRenderInWebGL=!0};t._isHistogramRequired=function(a){return"percentClip"===a||"histogramEqualization"===a};t._isValidRasterStatistics=function(a){return O.isSome(a)&&0<a.length&&null!=a[0].min&&null!=a[0].max};t._updateStretchRenderer=function(a){var e;let {stretchType:p,dra:h}=a;if(!("none"===p||null!=(e=a.statistics)&&e.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||
h))return!1;var l=O.unwrap(a.histograms||this.rasterInfo.histograms);!this._isHistogramRequired(a.stretchType)||null!=l&&l.length||h||(p="minMax");const {gamma:v,useGamma:B,colorRamp:G}=a;e=this.rasterInfo.pixelType;const n=!h&&-1<["u8","u16","s8","s16"].indexOf(e);"histogramEqualization"===p?(e=l.map(f=>C.createHistogramEqualizationLUT(f)),this.lookup={rendererJSON:a,histogramLut:e}):n&&(l=this.getStretchCutoff(a),e=C.createStretchLUT({pixelType:e,...l,gamma:B?v:null}),this.lookup={rendererJSON:a,
stretchLut:e});G&&(e=J.convertColorRampToColormap(G,256,!0),this.lookup||(this.lookup={rendererJSON:a}),this.lookup.colormapLut=C.createColormapLUT({colormap:e}),this.lookup.rendererJSON=a);return this.canRenderInWebGL=!0};t.getStretchCutoff=function(a,e=null,p,h){var l,v,B,G=a.stretchType;if(a.dra)if("minMax"===G&&O.isSome(e)&&e.statistics)e=e.statistics.map(A=>[A.minValue,A.maxValue,0,0]);else{var n=C.estimateStatisticsHistograms(e);e=O.isSome(n)?n.statistics:null;n=O.isSome(n)?n.histograms:null}else{var f;
e=0<(null==(f=a.statistics)?void 0:f.length)?a.statistics:O.unwrap(this.rasterInfo.statistics);n=a.histograms||O.unwrap(this.rasterInfo.histograms)}!this._isHistogramRequired(G)||null!=(l=n)&&l.length||(G="minMax");f=(null==(v=e)?void 0:v.length)||(null==(B=n)?void 0:B.length)||this.rasterInfo.bandCount;v=[];B=[];let k;let r,E,c;e&&!Array.isArray(e[0])&&(e=e.map(A=>[A.min,A.max,A.avg,A.stddev]));switch(G){case "none":e=D[this.rasterInfo.pixelType]||D.f32;for(l=0;l<f;l++)v[l]=e[0],B[l]=e[1];break;
case "minMax":for(l=0;l<f;l++)v[l]=e[l][0],B[l]=e[l][1];break;case "standardDeviation":for(l=0;l<f;l++)v[l]=e[l][2]-a.numberOfStandardDeviations*e[l][3],B[l]=e[l][2]+a.numberOfStandardDeviations*e[l][3],v[l]<e[l][0]&&(v[l]=e[l][0]),B[l]>e[l][1]&&(B[l]=e[l][1]);break;case "histogramEqualization":for(l=0;l<f;l++)v[l]=n[l].min,B[l]=n[l].max;break;case "percentClip":for(l=0;l<n.length;l++){e=n[l];r=new Uint32Array(e.size);var d=e.counts;k=0;f=(e.max-e.min)/e.size;E=-.5===e.min&&1===f?.5:0;for(c=0;c<e.size;c++)k+=
d[c],r[c]=k;d=a.minPercent*k/100;for(c=0;c<e.size;c++)if(r[c]>d){v[l]=e.min+f*(c+E);break}d=(1-a.maxPercent/100)*k;for(c=e.size-2;0<=c;c--)if(r[c]<d){B[l]=e.min+f*(c+2-E);break}}break;default:for(l=0;l<f;l++)v[l]=e[l][0],B[l]=e[l][1]}let u;"histogramEqualization"===G?(G=n[0].size||256,a=0,h&&(u=n.map(A=>C.createHistogramEqualizationLUT(A)))):(G=a.max||255,a=a.min||0);return this.getSelectedBandCutoffs({minCutOff:v,maxCutOff:B,outMax:G,outMin:a,histogramLut:u},p)};t.getSelectedBandCutoffs=function(a,
e){if(null==e||0===e.length)return a;const p=Math.max.apply(null,e),{minCutOff:h,maxCutOff:l,outMin:v,outMax:B,histogramLut:G}=a;return h.length===e.length||h.length<=p?a:{minCutOff:e.map(n=>h[n]),maxCutOff:e.map(n=>l[n]),histogramLut:G?e.map(n=>G[n]):null,outMin:v,outMax:B}};t.generateStretchWebGLParams=function(a,e,p){let h=null,l=null;var v=this.lookup&&this.lookup.colormapLut;e.colorRamp&&v&&(h=v.indexedColormap,l=v.offset);"histogramEqualization"===e.stretchType&&(e={...e,stretchType:"minMax"});
({gamma:v}=e);const B=!!(e.useGamma&&v&&v.some(d=>1!==d)),{minCutOff:G,maxCutOff:n,outMin:f,outMax:k}=this.getStretchCutoff(e,a,p);var r=0;O.isSome(a)&&(r=a.getPlaneCount(),2===r&&(a=a.clone(),a.statistics=[a.statistics[0]],a.pixels=[a.pixels[0]]));a=Math.min(3,(null==p?void 0:p.length)||r||this.rasterInfo.bandCount);p=new Float32Array(a);r=h||B?1:255;let E;for(E=0;E<a;E++)p[E]=(k-f)/(n[E]-G[E])/r;const c=new Float32Array(a);if(B)for(E=0;E<a;E++)c[E]=1<v[E]?2<v[E]?6.5+(v[E]-2)**2.5:6.5+100*(2-v[E])**
4:1;return{bandCount:a,outMin:f/r,outMax:k/r,minCutOff:G,maxCutOff:n,factor:p,useGamma:B,gamma:B?v:[1,1,1],gammaCorrection:B?c:[1,1,1],colormap:h,colormapOffset:l,stretchType:e.stretchType,type:"stretch"}};t.generateShadedReliefWebGLParams=function(a,e,p){var h,l,v;let B=null,G=null;const n=this.lookup&&this.lookup.colormapLut;a.colorRamp&&n&&(B=n.indexedColormap,G=n.offset);e=M.calculateHillshadeParams({...a,isGCS:e,resolution:p});p=null==(h=O.unwrap(this.rasterInfo.statistics))?void 0:h[0];return{...e,
minValue:null!=(l=null==p?void 0:p.min)?l:0,maxValue:null!=(v=null==p?void 0:p.max)?v:8E3,hillshadeType:"traditional"===a.hillshadeType?0:1,type:"hillshade",colormap:B,colormapOffset:G}};t._generateVectorFieldWebGLParams=function(a){var e,p,h,l,v;const {style:B,inputUnit:G,outputUnit:n,visualVariables:f,symbolTileSize:k,flowRepresentation:r}=a;let E;var c=null!=(e=null==f?void 0:f.find(d=>"sizeInfo"===d.type))?e:{type:"sizeInfo",field:"Magnitude",maxDataValue:null==(p=this.rasterInfo.statistics)?
void 0:p[0].max,maxSize:.8*k,minDataValue:null==(h=this.rasterInfo.statistics)?void 0:h[0].min,minSize:.2*k};e=c?c.minDataValue:null==(l=this.rasterInfo.statistics)?void 0:l[0].min;p=c?c.maxDataValue:null==(v=this.rasterInfo.statistics)?void 0:v[0].max;v=O.isSome(c.maxSize)&&O.isSome(c.minSize)?[c.minSize/k,c.maxSize/k]:[.2,.8];if("wind_speed"===B||"simple_scalar"===B)v[0]=v[1]=(v[0]+v[1])/2;l=O.isSome(e)&&O.isSome(p)?[e,p]:null;if("classified_arrow"===B)if(O.isSome(e)&&O.isSome(p)&&O.isSome(c))for(E=
[],e=(c.maxDataValue-c.minDataValue)/5,p=0;6>p;p++)E.push(c.minDataValue+e*p);else E=[0,1E-6,3.5,7,10.5,14];c="flow_to"===r===("ocean_current_kn"===B||"ocean_current_m"===B)?0:Math.PI;e=null==f?void 0:f.find(d=>"rotationInfo"===d.type);return{breakValues:E,dataRange:l,inputUnit:G,outputUnit:n,symbolTileSize:k,symbolPercentRange:v,style:B||"single_arrow",rotation:c,rotationType:(null==e?void 0:e.rotationType)||a.rotationType,type:"vectorField"}};return y}(V.JSONSupport);aa.__decorate([U.property({json:{write:!0}})],
V.prototype,"rendererJSON",void 0);aa.__decorate([U.property({type:Q,json:{write:!0}})],V.prototype,"rasterInfo",void 0);aa.__decorate([U.property({json:{write:!0}})],V.prototype,"lookup",void 0);aa.__decorate([U.property()],V.prototype,"canRenderInWebGL",void 0);return V=aa.__decorate([Z.subclass("esri.renderers.support.RasterSymbolizer")],V)})},"esri/layers/support/RasterInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/SpatialReference ./RasterStorageInfo".split(" "),
function(ba,aa,W,V,q,O,U,X,P,Z,Q,C){W=function(M){function J(b){b=M.call(this,b)||this;b.attributeTable=null;b.bandCount=null;b.colormap=null;b.extent=null;b.format=void 0;b.height=null;b.width=null;b.histograms=null;b.keyProperties={};b.multidimensionalInfo=null;b.noDataValue=null;b.pixelSize=null;b.pixelType=null;b.isPseudoSpatialReference=!1;b.spatialReference=null;b.statistics=null;b.storageInfo=null;b.transform=null;return b}ba._inheritsLoose(J,M);ba._createClass(J,[{key:"dataType",get:function(){var b,
w,g;const m=null!=(b=null==(w=this.keyProperties)?void 0:null==(g=w.DataType)?void 0:g.toLowerCase())?b:"generic";return"stdtime"===m?"standard-time":m}},{key:"nativeExtent",get:function(){return this._get("nativeExtent")||this.extent},set:function(b){b&&this._set("nativeExtent",b)}},{key:"nativePixelSize",get:function(){if(!V.isSome(this.transform)||!this.transform.affectsPixelSize)return this.pixelSize;const b=this.nativeExtent;return{x:b.width/this.width,y:b.height/this.height}}}]);return J}(W.JSONSupport);
aa.__decorate([q.property({json:{write:!0}})],W.prototype,"attributeTable",void 0);aa.__decorate([q.property({json:{write:!0}})],W.prototype,"bandCount",void 0);aa.__decorate([q.property({json:{write:!0}})],W.prototype,"colormap",void 0);aa.__decorate([q.property({type:String,readOnly:!0})],W.prototype,"dataType",null);aa.__decorate([q.property({type:Z,json:{write:!0}})],W.prototype,"extent",void 0);aa.__decorate([q.property({type:Z,json:{write:!0}})],W.prototype,"nativeExtent",null);aa.__decorate([q.property({json:{write:!0}})],
W.prototype,"nativePixelSize",null);aa.__decorate([q.property({json:{write:!0}})],W.prototype,"format",void 0);aa.__decorate([q.property({json:{write:!0}})],W.prototype,"height",void 0);aa.__decorate([q.property({json:{write:!0}})],W.prototype,"width",void 0);aa.__decorate([q.property({json:{write:!0}})],W.prototype,"histograms",void 0);aa.__decorate([q.property({json:{write:!0}})],W.prototype,"keyProperties",void 0);aa.__decorate([q.property({json:{write:!0}})],W.prototype,"multidimensionalInfo",
void 0);aa.__decorate([q.property()],W.prototype,"noDataValue",void 0);aa.__decorate([q.property({json:{write:!0}})],W.prototype,"pixelSize",void 0);aa.__decorate([q.property({json:{write:!0}})],W.prototype,"pixelType",void 0);aa.__decorate([q.property()],W.prototype,"isPseudoSpatialReference",void 0);aa.__decorate([q.property({type:Q,json:{write:!0}})],W.prototype,"spatialReference",void 0);aa.__decorate([q.property({json:{write:!0}})],W.prototype,"statistics",void 0);aa.__decorate([q.property({type:C,
json:{write:!0}})],W.prototype,"storageInfo",void 0);aa.__decorate([q.property({json:{write:!0}})],W.prototype,"transform",void 0);return W=aa.__decorate([P.subclass("esri.layers.support.RasterInfo")],W)})},"esri/layers/support/RasterStorageInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),
function(ba,aa,W,V,q,O,U,X,P){W=function(Z){function Q(){var C=Z.apply(this,arguments)||this;C.blockWidth=void 0;C.blockHeight=void 0;C.compression=null;C.origin=null;C.firstPyramidLevel=null;C.maximumPyramidLevel=null;C.pyramidScalingFactor=2;C.pyramidBlockWidth=null;C.pyramidBlockHeight=null;C.isVirtualTileInfo=!1;C.tileInfo=null;C.blockBoundary=null;return C}ba._inheritsLoose(Q,Z);return Q}(W.JSONSupport);aa.__decorate([V.property({type:Number,json:{write:!0}})],W.prototype,"blockWidth",void 0);
aa.__decorate([V.property({type:Number,json:{write:!0}})],W.prototype,"blockHeight",void 0);aa.__decorate([V.property({type:String,json:{write:!0}})],W.prototype,"compression",void 0);aa.__decorate([V.property({type:P,json:{write:!0}})],W.prototype,"origin",void 0);aa.__decorate([V.property({type:Number,json:{write:!0}})],W.prototype,"firstPyramidLevel",void 0);aa.__decorate([V.property({type:Number,json:{write:!0}})],W.prototype,"maximumPyramidLevel",void 0);aa.__decorate([V.property({json:{write:!0}})],
W.prototype,"pyramidResolutions",void 0);aa.__decorate([V.property({type:Number,json:{write:!0}})],W.prototype,"pyramidScalingFactor",void 0);aa.__decorate([V.property({type:Number,json:{write:!0}})],W.prototype,"pyramidBlockWidth",void 0);aa.__decorate([V.property({type:Number,json:{write:!0}})],W.prototype,"pyramidBlockHeight",void 0);aa.__decorate([V.property({type:Boolean,json:{write:!0}})],W.prototype,"isVirtualTileInfo",void 0);aa.__decorate([V.property({json:{write:!0}})],W.prototype,"tileInfo",
void 0);aa.__decorate([V.property()],W.prototype,"blockBoundary",void 0);return W=aa.__decorate([X.subclass("esri.layers.support.RasterStorageInfo")],W)})},"esri/layers/support/rasterFunctions/surfaceUtils":function(){define(["exports","../PixelBlock","./pixelUtils"],function(ba,aa,W){function V(q){let {altitude:O,azimuth:U}=q;const {hillshadeType:X,pixelSizePower:P,pixelSizeFactor:Z,scalingType:Q,isGCS:C,resolution:M}=q;var J="multi-directional"===X?2*q.zFactor:q.zFactor;const {x:b,y:w}=M;q=J/(8*
b);var g=J/(8*w);C&&.001<J&&(q/=111E3,g/=111E3);"adjusted"===Q&&(C?(q=111E3*b,g=111E3*w,q=(J+q**P*Z)/(8*q),g=(J+g**P*Z)/(8*g)):(q=(J+b**P*Z)/(8*b),g=(J+w**P*Z)/(8*w)));var m=(90-O)*Math.PI/180;J=Math.cos(m);let D=(360-U+90)*Math.PI/180,x=Math.sin(m)*Math.cos(D);m=Math.sin(m)*Math.sin(D);const y=[315,270,225,360,180,0],t=[60,60,60,60,60,90];var a=new Float32Array([3,5,3,2,1,4]);const e=a.reduce((B,G)=>B+G);a=a.map(B=>B/e);const p="multi-directional"===X?y.length:1,h=new Float32Array(6),l=new Float32Array(6),
v=new Float32Array(6);if("multi-directional"===X)for(let B=0;B<p;B++)O=t[B],U=y[B],m=(90-O)*Math.PI/180,J=Math.cos(m),D=(360-U+90)*Math.PI/180,x=Math.sin(m)*Math.cos(D),m=Math.sin(m)*Math.sin(D),h[B]=J,l[B]=x,v[B]=m;else h.fill(J),l.fill(x),v.fill(m);return{resolution:M,factor:[q,g],sinZcosA:x,sinZsinA:m,cosZ:J,sinZcosAs:l,sinZsinAs:v,cosZs:h,weights:a,hillshadeType:["traditional","multi-directional"].indexOf(X)}}ba.calculateHillshadeParams=V;ba.hillshade=function(q,O){if(!W.isValidPixelBlock(q))return q;
const {width:U,height:X,mask:P}=q,Z=new Uint8Array(U*X);P&&Z.set(P);const {factor:Q,sinZcosA:C,sinZsinA:M,cosZ:J,sinZcosAs:b,sinZsinAs:w,cosZs:g,weights:m}=V(O),[D,x]=Q;var {hillshadeType:y}=O;const t=q.pixels[0];O=new Uint8Array(U*X);let a;for(let n=1;n<X-1;n++){const f=n*U;for(let k=1;k<U-1;k++)if(P&&!P[f+k])O[f+k]=0;else{var e=8;if(P&&(e=P[f-U+k-1]+P[f-U+k]+P[f-U+k+1]+P[f+k-1]+P[f+k+1]+P[f+U+k-1]+P[f+U+k]+P[f+U+k+1],7>e)){O[f+k]=0;Z[f+k]=0;continue}if(7===e){var p=P[f-U+k-1]?t[f-U+k-1]:t[f+k];
var h=P[f-U+k]?t[f-U+k]:t[f+k];var l=P[f-U+k+1]?t[f-U+k+1]:t[f+k];e=P[f+k-1]?t[f+k-1]:t[f+k];a=P[f+k+1]?t[f+k+1]:t[f+k];var v=P[f+U+k-1]?t[f+U+k-1]:t[f+k];var B=P[f+U+k]?t[f+U+k]:t[f+k];var G=P[f+U+k+1]?t[f+U+k+1]:t[f+k]}else p=t[f-U+k-1],h=t[f-U+k],l=t[f-U+k+1],e=t[f+k-1],a=t[f+k+1],v=t[f+U+k-1],B=t[f+U+k],G=t[f+U+k+1];e=(l+a+a+G-(p+e+e+v))*D;p=(v+B+B+G-(p+h+h+l))*x;h=Math.sqrt(1+e*e+p*p);l=0;if("traditional"===y)e=255*(J+M*p-C*e)/h,0>e&&(e=0),l=e;else for(v=w.length,B=0;B<v;B++)G=255*(g[B]+w[B]*
p-b[B]*e)/h,0>G&&(G=0),l+=G*m[B];O[f+k]=l&255}}for(y=0;y<X;y++)O[y*U]=O[y*U+1],O[(y+1)*U-1]=O[(y+1)*U-2];for(y=1;y<U-1;y++)O[y]=O[y+U],O[y+(X-1)*U]=O[y+(X-2)*U];return new aa({width:U,height:X,pixels:[O],mask:P?Z:null,pixelType:"u8",validPixelCount:q.validPixelCount,statistics:[{minValue:0,maxValue:255}]})};ba.tintHillshade=function(q,O,U,X){if(W.isValidPixelBlock(q)&&W.isValidPixelBlock(O)){var {min:P,max:Z}=X;X=q.pixels[0];var {pixels:Q,mask:C}=O;O=Q[0];var M=255.00001/(Z-P),J=new Uint8ClampedArray(O.length),
b=new Uint8ClampedArray(O.length),w=new Uint8ClampedArray(O.length),g=U.length-1;for(let x=0;x<O.length;x++){if(C&&0===C[x])continue;var m=Math.floor((O[x]-P)*M);const [y,t]=U[0>m?0:m>g?g:m];var D=X[x];m=D*t;const a=m*(1-Math.abs(y%2-1));D-=m;switch(Math.floor(y)){case 0:J[x]=m+D;b[x]=a+D;w[x]=D;break;case 1:J[x]=a+D;b[x]=m+D;w[x]=D;break;case 2:J[x]=D;b[x]=m+D;w[x]=a+D;break;case 3:J[x]=D;b[x]=a+D;w[x]=m+D;break;case 4:J[x]=a+D;b[x]=D;w[x]=m+D;break;case 5:case 6:J[x]=m+D,b[x]=D,w[x]=a+D}}q.pixels=
[J,b,w];q.updateStatistics()}};Object.defineProperty(ba,"__esModule",{value:!0})})},"esri/renderers/support/colorRampUtils":function(){define(["exports","../../Color","../../core/colorUtils"],function(ba,aa,W){function V(X,P){if(!X||!P||X.length!==P.length)return!1;for(let Z=0;Z<X.length;Z++)if(X[Z]>P[Z]+2||X[Z]<P[Z]-2)return!1;return!0}function q(X,P){if(X){P=P?P:O;var Z=null,Q;"algorithmic"===X.type?P.some(C=>{if(V(X.fromColor.toRgb(),C.fromColor)&&V(X.toColor.toRgb(),C.toColor))return Z=C.id,!0}):
"multipart"===X.type&&P.some(C=>{if(X.colorRamps&&C.colorRamps&&X.colorRamps.length===C.colorRamps.length&&(Q=X.colorRamps,!C.colorRamps.some((M,J)=>{if(!V(Q[J].fromColor.toRgb(),(new aa(M.fromColor)).toRgb())||!V(Q[J].toColor.toRgb(),(new aa(M.toColor)).toRgb()))return!0}))){if(Z)return!0;Z=C.id}});return Z}}const O=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,
52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",
fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},
{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,
245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,
186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},
{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",
fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],
toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,
255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",
type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,
204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},
{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",
type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,
0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,
153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,
255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,
147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],U={aspect_predefined:"Aspect",blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",blueLightToDark_predefined:"Blue Light to Dark",blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",
brownLightToDark_predefined:"Brown Light to Dark",brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",conditionNumber_predefined:"Condition Number",cyanToPurple_predefined:"Cyan to Purple",cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",
elevation2_predefined:"Elevation #2",errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",partialSpectrum_predefined:"Partial Spectrum",partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",
pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",precipitation_predefined:"Precipitation",prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",
purpleRedBright_predefined:"Purple-Red Bright",purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",redLightToDark_predefined:"Red Light to Dark",redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",
spectrumFullBright_predefined:"Spectrum-Full Bright",spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",surface_predefined:"Surface",temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",yellowToRed_predefined:"Yellow to Red",yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"};
ba.PREDEFINED_COLOR_RAMP_NAME_MAP=U;ba.PREDEFINED_JSON_COLOR_RAMPS=O;ba.convertColorRampToColormap=function(X,P,Z=!1){if(X&&P&&!(1>P)){var Q="toJSON"in X?X.toJSON():X,C="multipart"===Q.type?Q.colorRamps.length:1;X=[];var M=[],J,b,w,g=0;if(1===P){var m="multipart"===Q.type?Q.colorRamps[0].fromColor:Q.fromColor;M.push([0].concat(m));return M}for(let x=0;x<C;x++)X[x]={start:null,end:null},X[x].start=g,X[x].end=g+1/C,g=X[x].end;for(let x=0;x<P;x++){var D=x/(P-1);X.forEach((y,t)=>{if(D>=y.start&&(D<y.end||
x===P-1&&t===C-1)){w=(D-y.start)/(y.end-y.start);"multipart"===Q.type?(m=Q.colorRamps[t].fromColor,J=Q.colorRamps[t].toColor):(m=Q.fromColor,J=Q.toColor);if(0===x)M.push([x].concat(m.slice(0,3)));else if(x===P-1)M.push([x].concat(J.slice(0,3)));else{var a={r:J[0],g:J[1],b:J[2]};y=w;t=W.toLAB({r:m[0],g:m[1],b:m[2]});a=W.toLAB(a);b=W.toRGB({l:t.l*(1-y)+y*a.l,a:t.a*(1-y)+y*a.a,b:t.b*(1-y)+y*a.b});M.push([x,b.r,b.g,b.b])}y=null!=m[3]?1<m[3]?m[3]/255:m[3]:1;t=null!=J[3]?1<J[3]?J[3]/255:J[3]:1;Z&&M[x].push(Math.min(255,
Math.round(255*(y*(1-w)+t*w))))}})}return M}};ba.getColorRampId=q;ba.getColorRampName=function(X){return(X=q(X))?U[X]:null};Object.defineProperty(ba,"__esModule",{value:!0})})},"*noref":1}});
define("../../chunks/_rollupPluginBabelHelpers ../../geometry ../../core/maybe ./PixelBlock ./rasterFormats/RasterCodec ./rasterFunctions/pixelUtils ./rasterFunctions/vectorFieldUtils ../../renderers/support/RasterSymbolizer ../../geometry/Extent".split(" "),function(ba,aa,W,V,q,O,U,X,P){return function(){function Z(){}var Q=Z.prototype;Q.convertVectorFieldData=function(C){const M=V.fromJSON(C.pixelBlock);C=U.convertVectorFieldData(M,C.type);return Promise.resolve(W.isSome(C)&&C.toJSON())};Q.decode=
function(){var C=ba._asyncToGenerator(function*(M){return(M=yield q.decode(M.data,M.options))&&M.toJSON()});return function(M){return C.apply(this,arguments)}}();Q.symbolize=function(C){C.pixelBlock=V.fromJSON(C.pixelBlock);C.extent=C.extent?P.fromJSON(C.extent):null;C=this.symbolizer.symbolize(C);return Promise.resolve(W.isSome(C)&&C.toJSON())};Q.updateSymbolizer=function(){var C=ba._asyncToGenerator(function*(M){var J;this.symbolizer=X.fromJSON(M.symbolizerJSON);M.histograms&&"rasterStretch"===
(null==(J=this.symbolizer)?void 0:J.rendererJSON.type)&&(this.symbolizer.rendererJSON.histograms=M.histograms)});return function(M){return C.apply(this,arguments)}}();Q.stretch=function(C){C=this.symbolizer.simpleStretch(V.fromJSON(C.srcPixelBlock),C.stretchParams);return Promise.resolve(W.isSome(C)&&C.toJSON())};Q.estimateStatisticsHistograms=function(C){C=O.estimateStatisticsHistograms(V.fromJSON(C.srcPixelBlock));return Promise.resolve(C)};Q.split=function(C){const M=O.split(V.fromJSON(C.srcPixelBlock),
C.tileSize,C.maximumPyramidLevel);M&&M.forEach((J,b)=>{M.set(b,null==J?void 0:J.toJSON())});return Promise.resolve(M)};Q.mosaicAndTransform=function(){var C=ba._asyncToGenerator(function*(M){var J=M.srcPixelBlocks.map(b=>b?new V(b):null);J=O.mosaic(J,M.srcMosaicSize,null,null,M.alignmentInfo);return M.coefs?(M=O.approximateTransform(J,M.destDimension,M.coefs,M.sampleSpacing,M.interpolation))&&M.toJSON():J&&J.toJSON()});return function(M){return C.apply(this,arguments)}}();return Z}()});