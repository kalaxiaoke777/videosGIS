// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.21/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/number":function(){define(["exports","./string","../intl/locale"],function(r,e,ha){function ea(G){G||(G=ha.getLocale());let v=G in l;if(!v){const p=G.split("-");1<p.length&&p[0]in l&&(G=p[0],v=!0);v||(G="en")}const [x,M,d="#,##0.###"]=l[G];return{decimal:x,group:M,pattern:d}}function q(G,v,x){x=x||{};!0===x.places&&(x.places=0);Infinity===x.places&&(x.places=6);v=v.split(".");var M="string"===typeof x.places&&x.places.indexOf(","),d=x.places;M?d=x.places.substring(M+1):
0<=d||(d=(v[1]||[]).length);0>x.round||(G=Number(G.toFixed(Number(d))));G=String(Math.abs(G)).split(".");const p=G[1]||"";v[1]||x.places?(M&&(x.places=x.places.substring(0,M)),M=void 0!==x.places?x.places:v[1]&&v[1].lastIndexOf("0")+1,M>p.length&&(G[1]=p.padEnd(Number(M),"0")),d<p.length&&(G[1]=p.substr(0,Number(d)))):G[1]&&G.pop();d=v[0].replace(",","");M=d.indexOf("0");-1!==M&&(M=d.length-M,M>G[0].length&&(G[0]=G[0].padStart(M,"0")),-1===d.indexOf("#")&&(G[0]=G[0].substr(G[0].length-M)));d=v[0].lastIndexOf(",");
let J,W;-1!==d&&(J=v[0].length-d-1,v=v[0].substr(0,d),d=v.lastIndexOf(","),-1!==d&&(W=v.length-d-1));v=[];for(d=G[0];d;)M=d.length-J,v.push(0<M?d.substr(M):d),d=0<M?d.slice(0,M):"",W&&(J=W,W=void 0);G[0]=v.reverse().join(x.group||",");return G.join(x.decimal||".")}function w(G){G=G||{};var v=ea(G.locale);const x=G.pattern||v.pattern,M=v.group,d=v.decimal;let p=1;if(-1!==x.indexOf("%"))p/=100;else if(-1!==x.indexOf("\u2030"))p/=1E3;else if(-1!==x.indexOf("\u00a4"))throw Error("currency notation not supported");
v=x.split(";");1===v.length&&v.push("-"+v[0]);return{regexp:aa(v,function(J){J="(?:"+e.escapeRegExpString(J,".")+")";return J.replace(t,function(W){const B={signed:!1,separator:G.strict?M:[M,""],fractional:G.fractional,decimal:d,exponent:!1};W=W.split(".");let I=G.places;1===W.length&&1!==p&&(W[1]="###");1===W.length||0===I?B.fractional=!1:(void 0===I&&(I=G.pattern?W[1].lastIndexOf("0")+1:Infinity),I&&null==G.fractional&&(B.fractional=!0),!G.places&&I<W[1].length&&(I+=","+W[1].length),B.places=I);
W=W[0].split(",");1<W.length&&(B.groupSize=W.pop().length,1<W.length&&(B.groupSize2=W.pop().length));return"("+g(B)+")"})},!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:M,decimal:d,factor:p}}function g(G){G=G||{};"places"in G||(G.places=Infinity);"string"!==typeof G.decimal&&(G.decimal=".");"fractional"in G&&!/^0/.test(String(G.places))||(G.fractional=[!0,!1]);"exponent"in G||(G.exponent=[!0,!1]);"eSigned"in G||(G.eSigned=[!0,!1]);var v=E(G);const x=aa(G.fractional,function(d){let p="";d&&0!==G.places&&
(p="\\"+G.decimal,p=Infinity===G.places?"(?:"+p+"\\d+)?":p+("\\d{"+G.places+"}"));return p},!0),M=aa(G.exponent,function(d){return d?"([eE]"+E({signed:G.eSigned})+")":""});v+=x;x&&(v="(?:(?:"+v+")|(?:"+x+"))");return v+M}function E(G){G=G||{};"signed"in G||(G.signed=[!0,!1]);"separator"in G?"groupSize"in G||(G.groupSize=3):G.separator="";const v=aa(G.signed,function(M){return M?"[-+]":""},!0),x=aa(G.separator,function(M){if(!M)return"(?:\\d+)";M=e.escapeRegExpString(M);" "===M?M="\\s":"\u00a0"===
M&&(M="\\s\\xa0");const d=G.groupSize,p=G.groupSize2;return p?(M="(?:0|[1-9]\\d{0,"+(p-1)+"}(?:["+M+"]\\d{"+p+"})*["+M+"]\\d{"+d+"})",0<d-p?"(?:"+M+"|(?:0|[1-9]\\d{0,"+(d-1)+"}))":M):"(?:0|[1-9]\\d{0,"+(d-1)+"}(?:["+M+"]\\d{"+d+"})*)"},!0);return v+x}const l={ar:[".",","],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],fr:[",","\u202f"],"fr-ch":[",",
"\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\u00a0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",","\u00a0"],th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]},t=/[#0,]*[#0](?:\.0*#*)?/,aa=function(G,v,x){if(!(G instanceof
Array))return v(G);const M=[];for(let d=0;d<G.length;d++)M.push(v(G[d]));G=M.join("|");return"("+(x?"?:":"")+G+")"};r._parseInfo=w;r.format=function(G,v){v={...v};var x=ea(v.locale);v.customs=x;var M=v.pattern||x.pattern;if(isNaN(G)||Infinity===Math.abs(G))return null;{v=v||{};x=v.customs.group;const p=v.customs.decimal;M=M.split(";");var d=M[0];M=M[0>G?1:0]||"-"+d;if(-1!==M.indexOf("%"))G*=100;else if(-1!==M.indexOf("\u2030"))G*=1E3;else{if(-1!==M.indexOf("\u00a4"))throw Error("currency notation not supported");
if(-1!==M.indexOf("E"))throw Error("exponential notation not supported");}const J=t;d=d.match(J);if(!d)throw Error("unable to find a number expression in pattern: "+M);!1===v.fractional&&(v.places=0);G=M.replace(J,q(G,d[0],{decimal:p,group:x,places:v.places,round:v.round}))}return G};r.getCustoms=ea;r.parse=function(G,v){v=w(v);G=(new RegExp("^"+v.regexp+"$")).exec(G);if(!G)return NaN;let x=G[1];if(!G[1]){if(!G[2])return NaN;x=G[2];v.factor*=-1}x=x.replace(new RegExp("["+v.group+"\\s\\xa0]","g"),
"").replace(v.decimal,".");return Number(x)*v.factor};r.regexp=function(G){return w(G).regexp};Object.defineProperty(r,"__esModule",{value:!0})})},"esri/intl/locale":function(){define(["exports","../core/global"],function(r,e){function ha(){var d,p;return null!=(d=null!=G?G:null==(p=e.navigator)?void 0:p.language)?d:"en"}function ea(){void 0===aa&&(aa=ha());return aa}function q(d=ea()){d=/^([a-zA-Z]{2,3})(?:[_\-]\w+)*$/.exec(d);return null==d?void 0:d[1].toLowerCase()}function w(){var d;const p=null!=
(d=t)?d:ha();aa!==p&&(aa=p,[...M].forEach(J=>{J.call(null,p)}),[...x].forEach(J=>{J.call(null,p)}))}var g,E,l;let t=void 0,aa=void 0;const G=null!=(g=null==(E=e.esriConfig)?void 0:E.locale)?g:null==(l=e.dojoConfig)?void 0:l.locale,v={he:!0,ar:!0},x=[],M=[];null==e.addEventListener?void 0:e.addEventListener("languagechange",w);r.beforeLocaleChange=function(d){M.push(d);return{remove(){x.splice(M.indexOf(d),1)}}};r.getDefaultLocale=ha;r.getLanguage=q;r.getLocale=ea;r.onLocaleChange=function(d){x.push(d);
return{remove(){x.splice(x.indexOf(d),1)}}};r.prefersRTL=function(d=ea()){d=q(d);return void 0!==d&&(v[d]||!1)};r.setLocale=function(d){t=d?d:void 0;w()};Object.defineProperty(r,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils".split(" "),
function(r,e,ha,ea,q,w,g,E,l,t,aa,G,v,x,M,d,p,J,W,B,I,L,Y){function ia(){return!!oa&&x.isLoaded()}function fa(V){w.isNone(fb)&&(fb=Promise.all([x.load(),(new Promise(function(da,U){r(["../chunks/geometryEngineBase"],da,U)})).then(function(da){return da.geometryEngineBase}),new Promise(function(da,U){r(["./geometryAdapters/hydrated"],da,U)})]));return fb.then(([,da,{hydratedAdapter:U}])=>{g.throwIfAborted(V);cb=U;oa=da.default;oa._enableProjection(x.pe)})}function ka(V,da,U,la,va=null){if(w.isNone(U)||
w.isNone(la))return da;if(K(U,la,va))return da.map(xa=>w.unwrap(T(xa,U,la)));if(w.isNone(va)){const xa=L.cacheKey(U,la);void 0!==bb[xa]?va=bb[xa]:(va=H(U,la,null),w.isNone(va)&&(va=new L),bb[xa]=va)}if(w.isNone(oa))throw new a;return oa._project(V,da,U,la,va)}function H(V,da,U=null){if(w.isNone(oa))throw new a;if(w.isNone(V)||w.isNone(da))return null;V=oa._getTransformation(cb,V,da,U,null==U?void 0:U.spatialReference);return null!==V?L.fromGE(V):null}function K(V,da,U){return U?!1:Y.equals(V,da)?
!0:Y.isValid(V)&&Y.isValid(da)&&!!Fa(V,da,Fb)}function Q(){Q=ha._asyncToGenerator(function*(V,da,U,la){if(!ia())if(Array.isArray(V))for(const {source:va,dest:xa,geographicTransformation:Ia}of V){if(!K(va,xa,Ia))return fa(la)}else if(!K(V,da,U))return fa(la)});return Q.apply(this,arguments)}function T(V,da,U){return V?"x"in V?n(V,da,new M,U,0):"xmin"in V?O(V,da,new G,U,0):"rings"in V?A(V,da,new d,U,0):"paths"in V?D(V,da,new p,U,0):"points"in V?m(V,da,new v,U,0):null:null}function n(V,da,U,la,va){Oa[0]=
V.x;Oa[1]=V.y;const xa=V.z;Oa[2]=void 0!==xa?xa:va;if(!ua(Oa,da,0,Oa,la,0,1))return null;U.x=Oa[0];U.y=Oa[1];U.spatialReference=la;void 0===xa?(U.z=void 0,U.hasZ=!1):(U.z=Oa[2],U.hasZ=!0);void 0===V.m?(U.m=void 0,U.hasM=!1):(U.m=V.m,U.hasM=!0);return U}function m(V,da,U,la,va){const {points:xa,hasZ:Ia,hasM:Ma}=V;V=[];const $a=xa.length,Za=[];for(var Ya of xa)Za.push(Ya[0],Ya[1],Ia?Ya[2]:va);if(!ua(Za,da,0,Za,la,0,$a))return null;for(da=0;da<$a;++da){va=3*da;Ya=Za[va];const ib=Za[va+1];Ia&&Ma?V.push([Ya,
ib,Za[va+2],xa[da][3]]):Ia?V.push([Ya,ib,Za[va+2]]):Ma?V.push([Ya,ib,xa[da][2]]):V.push([Ya,ib])}U.points=V;U.spatialReference=la;U.hasZ=Ia;U.hasM=Ma;return U}function D(V,da,U,la,va){const {paths:xa,hasZ:Ia,hasM:Ma}=V;V=[];if(!ta(xa,Ia,Ma,da,V,la,va))return null;U.paths=V;U.spatialReference=la;U.hasZ=Ia;U.hasM=Ma;return U}function A(V,da,U,la,va){const {rings:xa,hasZ:Ia,hasM:Ma}=V;V=[];if(!ta(xa,Ia,Ma,da,V,la,va))return null;U.rings=V;U.spatialReference=la;U.hasZ=Ia;U.hasM=Ma;return U}function O(V,
da,U,la,va){const {xmin:xa,ymin:Ia,xmax:Ma,ymax:$a,hasZ:Za,hasM:Ya}=V;if(!S(xa,Ia,Za?V.zmin:va,da,Oa,la))return null;U.xmin=Oa[0];U.ymin=Oa[1];Za&&(U.zmin=Oa[2]);if(!S(Ma,$a,Za?V.zmax:va,da,Oa,la))return null;U.xmax=Oa[0];U.ymax=Oa[1];Za&&(U.zmax=Oa[2]);Ya&&(U.mmin=V.mmin,U.mmax=V.mmax);U.spatialReference=la;return U}function S(V,da,U,la,va,xa){Va[0]=V;Va[1]=da;Va[2]=U;return ua(Va,la,0,va,xa,0,1)}function ja(V,da,U,la){if(w.isNone(da)||w.isNone(la)||2>V.length)return!1;2===V.length&&(Va[0]=V[0],
Va[1]=V[1],Va[2]=0,V=Va);return ua(V,da,0,U,la,0,1)}function pa(V,da,U){if(w.isNone(da))return!1;da=Ka(da,vb);da=Qa[da][6];if(w.isNone(da))return!1;da(V,0,Va,0);U!==Va&&(U[0]=Va[0],U[1]=Va[1],2<U.length&&(U[2]=Va[2]));return!0}function ua(V,da,U,la,va,xa,Ia=1){da=Fa(da,va,Fb);if(w.isNone(da))return!1;if(da===Ca){if(V===la&&U===xa)return!0;Ia=U+3*Ia;for(let Ma=U,$a=xa;Ma<Ia;Ma++,$a++)la[$a]=V[Ma];return!0}Ia=U+3*Ia;for(let Ma=U,$a=xa;Ma<Ia;Ma+=3,$a+=3)da(V,Ma,la,$a);return!0}function ta(V,da,U,la,
va,xa,Ia=0){const Ma=[];for(const $a of V)for(const Za of $a)Ma.push(Za[0],Za[1],da?Za[2]:Ia);if(!ua(Ma,la,0,Ma,xa,0,Ma.length/3))return!1;la=0;va.length=0;for(const $a of V){V=[];for(const Za of $a)da&&U?V.push([Ma[la++],Ma[la++],Ma[la++],Za[3]]):da?V.push([Ma[la++],Ma[la++],Ma[la++]]):(U?V.push([Ma[la++],Ma[la++],Za[2]]):V.push([Ma[la++],Ma[la++]]),la++);va.push(V)}return!0}function za(V,da,U,la){V=Math.abs(mb*V)+Math.asin(U/(la+da));return V>=Math.PI/2?Number.MAX_VALUE:U/Math.cos(V)}function Da(V,
da,U){const la=Math.sin(V);V=Math.cos(V);const va=Math.sin(da);da=Math.cos(da);U[0]=-la;U[4]=-va*V;U[8]=da*V;U[12]=0;U[1]=V;U[5]=-va*la;U[9]=da*la;U[13]=0;U[2]=0;U[6]=da;U[10]=va;U[14]=0;U[3]=0;U[7]=0;U[11]=0;U[15]=1;return U}function Ra(V,da,U){Da(V,da,U);l.transpose(U,U);return U}function Ka(V,da){if(da.spatialReference===V)return da.spatialReferenceId;da.spatialReference=V;"metersPerUnit"in da&&(da.metersPerUnit=E.getMetersPerUnitForSR(V,1));return V.wkt===J.SphericalECEFSpatialReference.wkt?da.spatialReferenceId=
1:Y.isWGS84(V)?da.spatialReferenceId=2:Y.isWebMercator(V)?da.spatialReferenceId=3:Y.isPlateCarree(V)?da.spatialReferenceId=12:V.wkt===J.WGS84ECEFSpatialReference.wkt?da.spatialReferenceId=4:4490===V.wkid?da.spatialReferenceId=5:V.wkt===J.SphericalPCPFMars.wkt?da.spatialReferenceId=7:V.wkt===J.SphericalPCPFMoon.wkt?da.spatialReferenceId=9:Y.isMars(V)?da.spatialReferenceId=8:Y.isMoon(V)?da.spatialReferenceId=10:da.spatialReferenceId=0}function Ca(V,da,U,la){V!==U&&(U[la++]=V[da++],U[la++]=V[da++],U[la]=
V[da])}function Sa(V,da,U,la){U[la++]=yb*(V[da++]/B.earth.radius);U[la++]=yb*(Math.PI/2-2*Math.atan(Math.exp(-V[da++]/B.earth.radius)));U[la]=V[da]}function Ta(V,da,U,la){Sa(V,da,U,la);Z(U,la,U,la)}function c(V,da,U,la){Sa(V,da,U,la);wa(U,la,U,la)}function k(V,da,U,la,va){var xa=.4999999*Math.PI;xa=q.clamp(mb*V[da+1],-xa,xa);xa=Math.sin(xa);U[la++]=mb*V[da]*va.radius;U[la++]=va.halfSemiMajorAxis*Math.log((1+xa)/(1-xa));U[la]=V[da+2]}function R(V,da,U,la){k(V,da,U,la,B.earth)}function f(V,da,U,la){U[la]=
V[da]*hb;U[la+1]=V[da+1]*hb;U[la+2]=V[da+2]}function u(V,da,U,la){U[la]=V[da]*gb;U[la+1]=V[da+1]*gb;U[la+2]=V[da+2]}function N(V,da,U,la,va){va+=V[da+2];const xa=mb*V[da+1];V=mb*V[da];da=Math.cos(xa);U[la++]=Math.cos(V)*da*va;U[la++]=Math.sin(V)*da*va;U[la]=Math.sin(xa)*va}function P(V,da,U,la){N(V,da,U,la,B.moon.radius)}function ca(V,da,U,la){N(V,da,U,la,B.mars.radius)}function Z(V,da,U,la){N(V,da,U,la,B.earth.radius)}function y(V,da,U,la,va){var xa=V[da];const Ia=V[da+1];da=V[da+2];V=Math.sqrt(xa*
xa+Ia*Ia+da*da);da=q.asinClamped(da/(0===V?1:V));xa=Math.atan2(Ia,xa);U[la++]=yb*xa;U[la++]=yb*da;U[la]=V-va}function F(V,da,U,la){y(V,da,U,la,B.moon.radius)}function X(V,da,U,la){y(V,da,U,la,B.mars.radius)}function ma(V,da,U,la){y(V,da,U,la,B.earth.radius)}function na(V,da,U,la){ma(V,da,U,la);R(U,la,U,la)}function sa(V,da,U,la){ma(V,da,U,la);wa(U,la,U,la)}function wa(V,da,U,la){{var va=B.earth;const Ia=mb*V[da];var xa=mb*V[da+1];V=V[da+2];da=Math.sin(xa);xa=Math.cos(xa);const Ma=va.radius/Math.sqrt(1-
va.eccentricitySquared*da*da);U[la++]=(Ma+V)*xa*Math.cos(Ia);U[la++]=(Ma+V)*xa*Math.sin(Ia);U[la++]=(Ma*(1-va.eccentricitySquared)+V)*da}}function ya(V,da,U,la){var va=I.earthEllipsoidConstants,xa=V[da],Ia=V[da+1];V=V[da+2];let Ma;da=Math.abs(V);var $a=xa*xa+Ia*Ia;var Za=Math.sqrt($a);var Ya=$a+V*V;var ib=Math.sqrt(Ya);xa=Math.atan2(Ia,xa);var nb=V*V/Ya;Ya=$a/Ya;Ia=va.a2/ib;$a=va.a3-va.a4/ib;.3<Ya?(nb=da/ib*(1+Ya*(va.a1+Ia+nb*$a)/ib),ib=Math.asin(nb),Ia=nb*nb,Ya=Math.sqrt(1-Ia)):(Ya=Za/ib*(1-nb*(va.a5-
Ia-Ya*$a)/ib),ib=Math.acos(Ya),Ia=1-Ya*Ya,nb=Math.sqrt(Ia));Ma=1-B.earth.eccentricitySquared*Ia;Ia=B.earth.radius/Math.sqrt(Ma);va=va.a6*Ia;Ia=Za-Ia*Ya;$a=da-va*nb;da=Ya*Ia+nb*$a;Za=Ya*$a-nb*Ia;va=Za/(va/Ma+da);ib+=va;0>V&&(ib=-ib);U[la++]=yb*xa;U[la++]=yb*ib;U[la]=da+Za*va/2}function Ja(V,da,U,la){ya(V,da,U,la);Z(U,la,U,la)}function Ga(V,da,U,la){ya(V,da,U,la);R(U,la,U,la)}function Fa(V,da,U=Ea()){return w.isNone(V)||w.isNone(da)?null:Aa(V,da,U).projector}function Aa(V,da,U){if(w.isNone(V)||w.isNone(da)||
U.source.spatialReference===V&&U.dest.spatialReference===da)return U;const la=Ka(V,U.source),va=Ka(da,U.dest);0===la&&0===va?Y.equals(V,da)?U.projector=Ca:U.projector=null:U.projector=Qa[la][va];return U}function Ea(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:Ca}}let oa=null,cb=null,fb=null,bb={},a=function(V){function da(){return V.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||
this}ha._inheritsLoose(da,V);return da}(ea);const hb=B.earth.radius*Math.PI/180,gb=180/(B.earth.radius*Math.PI),Qa={[2]:{[5]:null,[8]:null,[10]:null,[11]:Ca,[6]:Ca,[1]:Z,[7]:null,[9]:null,[0]:null,[3]:R,[12]:f,[2]:Ca,[4]:wa},[5]:{[5]:Ca,[8]:null,[10]:null,[11]:Ca,[6]:Ca,[1]:Z,[7]:null,[9]:null,[0]:null,[3]:null,[12]:f,[2]:null,[4]:wa},[8]:{[5]:null,[8]:Ca,[10]:null,[11]:Ca,[6]:null,[1]:null,[7]:ca,[9]:null,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:Ca,[11]:Ca,[6]:null,
[1]:null,[7]:null,[9]:P,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[11]:Sa,[6]:Sa,[1]:Ta,[7]:null,[9]:null,[0]:null,[3]:Ca,[12]:function(V,da,U,la){Sa(V,da,U,la);f(U,la,U,la)},[2]:Sa,[4]:c},[4]:{[5]:ya,[8]:null,[10]:null,[11]:ya,[6]:ya,[1]:Ja,[7]:null,[9]:null,[0]:null,[3]:Ga,[12]:function(V,da,U,la){ya(V,da,U,la);f(U,la,U,la)},[2]:ya,[4]:Ca},[1]:{[5]:ma,[8]:null,[10]:null,[11]:ma,[6]:ma,[1]:Ca,[7]:null,[9]:null,[0]:null,[3]:na,[12]:function(V,da,U,la){ma(V,da,
U,la);f(U,la,U,la)},[2]:ma,[4]:sa},[7]:{[5]:null,[8]:X,[10]:null,[11]:X,[6]:null,[1]:null,[7]:Ca,[9]:null,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[9]:{[5]:null,[8]:null,[10]:F,[11]:F,[6]:null,[1]:null,[7]:null,[9]:Ca,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,[11]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:Ca,[3]:null,[12]:null,[2]:null,[4]:null},[11]:{[5]:Ca,[8]:Ca,[10]:Ca,[11]:Ca,[6]:Ca,[1]:Z,[7]:ca,[9]:P,[0]:null,[3]:R,[12]:f,[2]:Ca,[4]:wa},[6]:{[5]:null,
[8]:null,[10]:null,[11]:Ca,[6]:Ca,[1]:Z,[7]:null,[9]:null,[0]:null,[3]:null,[12]:f,[2]:Ca,[4]:wa},[12]:{[5]:u,[8]:null,[10]:null,[11]:u,[6]:u,[1]:function(V,da,U,la){u(V,da,U,la);Z(U,la,U,la)},[7]:null,[9]:null,[0]:null,[3]:function(V,da,U,la){u(V,da,U,la);R(U,la,U,la)},[12]:Ca,[2]:u,[4]:function(V,da,U,la){u(V,da,U,la);wa(U,la,U,la)}}},vb={spatialReference:null,spatialReferenceId:0},zb={spatialReference:null,spatialReferenceId:0},Fb=Ea(),ec=Ea(),mb=q.deg2rad(1),yb=q.rad2deg(1),Va=aa.create(),kb=
aa.create(),tb=aa.create(),Oa=aa.create(),Gb=aa.create();e.canProjectToWGS84ComparableLonLat=function(V){if(w.isNone(V))return!1;V=Ka(V,vb);return!!Qa[V][6]};e.canProjectWithoutEngine=K;e.computeENUToSphericalPCPFLocalRotation=Da;e.computeSphericalPCPFToENULocalRotation=Ra;e.computeTranslationToOriginAndRotation=function(V,da,U,la){if(w.isNone(V)||w.isNone(la))return!1;var va=Ka(V,vb),xa=Ka(la,zb);if(va===xa&&1!==xa&&7!==xa&&9!==xa&&(0!==va||Y.equals(V,la)))return l.identity(U),l.translate(U,U,da),
!0;if(1===xa||7===xa||9===xa){va=Qa[va][11];xa=Qa[11][xa];if(w.isNone(va)||w.isNone(xa))return!1;va(da,0,kb,0);xa(kb,0,tb,0);Da(mb*kb[0],mb*kb[1],U);U[12]=tb[0];U[13]=tb[1];U[14]=tb[2];return!0}if(!(3!==xa&&12!==xa||2!==va&&1!==va)){V=Qa[va][11];xa=Qa[11][xa];if(w.isNone(V)||w.isNone(xa))return!1;V(da,0,kb,0);xa(kb,0,tb,0);2===va?l.identity(U):Ra(mb*kb[0],mb*kb[1],U);U[12]=tb[0];U[13]=tb[1];U[14]=tb[2];return!0}return!1};e.getProjectorName=function(V,da){switch(Fa(V,da,Fb)){case Ca:return"copy3";
case Z:return"wgs84ToSphericalECEF";case R:return"wgs84ToWebMercator";case f:return"wgs84ToPlateCarree";case wa:return"wgs84ToWGS84ECEF";case Sa:return"webMercatorToWGS84";case Ta:return"webMercatorToSphericalECEF";case c:return"webMercatorToWGS84ECEF";case ya:return"wgs84ECEFToWGS84";case Ja:return"wgs84ECEFToSphericalECEF";case Ga:return"wgs84ECEFToWebMercator";case ma:return"sphericalECEFToWGS84";case na:return"sphericalECEFToWebMercator";case X:return"sphericalMarsPCPFToMars2000";case F:return"sphericalMoonPCPFToMoon2000";
case sa:return"sphericalECEFToWGS84ECEF";case ca:return"mars2000ToSphericalPCPF";case P:return"moon2000ToSphericalPCPF";default:return null}};e.getTransformation=H;e.getTransformations=function(V,da,U=null){if(w.isNone(oa))throw new a;V=oa._getTransformationBySuitability(cb,V,da,U,null==U?void 0:U.spatialReference);if(null!==V){da=[];for(const la of V)da.push(L.fromGE(la));return da}return[]};e.initializeProjection=function(V,da,U,la){return Q.apply(this,arguments)};e.isLoaded=ia;e.isSupported=function(){return!0};
e.load=fa;e.localLinearScaleFactors=function(V,da,U,la){if(w.isNone(da)||w.isNone(la))return!1;const va=Ka(da,vb);var xa=Ka(la,zb);if(va===xa&&0!==va||Y.equals(da,la))return U[0]=1,U[1]=1,U[2]=1,!0;if(1===va){da=t.length(V);V=da/Math.sqrt(V[0]*V[0]+V[1]*V[1]);da/=B.earth.radius;if(3===xa)return U[0]=V*da,U[1]=V*da,U[2]=1,!0;if(2===xa||5===xa)return xa=180/(B.earth.radius*Math.PI),U[0]=xa*V*da,U[1]=xa*da,U[2]=1,!0}else if(12===va&&(2===xa||5===xa))return U[0]=gb,U[1]=gb,U[2]=1,!0;return!1};e.lonLatToSphericalPCPF=
function(V,da,U,la,va=0){la+=va;va=Math.cos(U);V[0]=Math.cos(da)*va*la;V[1]=Math.sin(da)*va*la;V[2]=Math.sin(U)*la};e.lonLatToWebMercatorComparable=k;e.project=function(V,da,U=null){return Array.isArray(V)?0===V.length?[]:ka(cb,V,V[0].spatialReference,da,U):ka(cb,[V],V.spatialReference,da,U)[0]};e.projectBoundingRect=function(V,da,U,la){if(null==V)return!1;if(Y.equals(da,la))return W.copy(U,V),!0;Va[0]=V[0];Va[1]=V[1];Va[2]=0;if(!ua(Va,da,0,Va,la,0,1))return!1;U[0]=Va[0];U[1]=Va[1];Va[0]=V[2];Va[1]=
V[3];Va[2]=0;if(!ua(Va,da,0,Va,la,0,1))return!1;U[2]=Va[0];U[3]=Va[1];return!0};e.projectBoundingSphere=function(V,da,U,la){if(w.isNone(da)||w.isNone(la))return!1;da=Aa(da,la,ec);if(da.projector===Ca)return U[0]=V[0],U[1]=V[1],U[2]=V[2],U[3]=V[3],!0;if(w.isNone(da.projector))return!1;const {source:va,dest:xa}=da;if(3===xa.spatialReferenceId){da=Qa[va.spatialReferenceId][2];if(w.isNone(da))return!1;da(V,0,kb,0);R(kb,0,U,0);U[3]=za(kb[1],V[2],V[3],B.earth.radius);return!0}if(2!==va.spatialReferenceId&&
5!==va.spatialReferenceId||12!==xa.spatialReferenceId)da.projector(V,0,U,0),U[3]=V[3]*va.metersPerUnit/xa.metersPerUnit;else{la=Qa[1][12];let Ia=V[3];w.isSome(Qa[va.spatialReferenceId][1])&&w.isSome(la)&&(Ia=za(V[1],V[2],V[3],B.earth.radius));da.projector(V,0,U,0);U[3]=Ia}return!0};e.projectBuffer=ua;e.projectDirection=function(V,da,U,la,va){t.copy(Oa,V);t.add(Gb,V,da);ja(Oa,U,Oa,va);ja(Gb,U,Gb,va);t.subtract(la,Gb,Oa);t.normalize(la,la)};e.projectExtent=function(V,da,U=da.spatialReference,la=0){return w.isSome(U)&&
w.isSome(O(V,V.spatialReference,da,U,la))};e.projectMany=ka;e.projectMultipoint=function(V,da,U=da.spatialReference,la=0){return w.isNone(U)?!1:w.isSome(m(V,V.spatialReference,da,U,la))};e.projectPoint=function(V,da,U=da.spatialReference,la=0){return w.isNone(U)?!1:w.isSome(n(V,V.spatialReference,da,U,la))};e.projectPointToVector=function(V,da,U,la=0){Oa[0]=V.x;Oa[1]=V.y;const va=V.z;Oa[2]=void 0!==va?va:la;return ua(Oa,V.spatialReference,0,da,U,0,1)};e.projectPointToWGS84ComparableLonLat=function(V,
da){Oa[0]=V.x;Oa[1]=V.y;const U=V.z;Oa[2]=void 0!==U?U:0;return pa(Oa,V.spatialReference,da)};e.projectPolygon=function(V,da,U=da.spatialReference,la=0){return w.isSome(U)&&w.isSome(A(V,V.spatialReference,da,U,la))};e.projectPolyline=function(V,da,U=da.spatialReference,la=0){return w.isSome(U)&&w.isSome(D(V,V.spatialReference,da,U,la))};e.projectVectorToDehydratedPoint=function(V,da,U){return ua(V,da,0,Oa,U.spatialReference,0,1)?(U.x=Oa[0],U.y=Oa[1],U.z=Oa[2],U):null};e.projectVectorToPoint=function(V,
da,U){if(w.isNone(da)||w.isNone(U))return null;const la=new M({spatialReference:U});return ua(V,da,0,Oa,U,0,1)?(la.x=Oa[0],la.y=Oa[1],la.z=Oa[2],la):null};e.projectVectorToVector=ja;e.projectVectorToWGS84ComparableLonLat=function(V,da,U){return pa(V,da,U)};e.projectWithoutEngine=T;e.projectXYZToVector=S;e.sphericalPCPFtoLonLatElevation=y;e.unload=function(){fb=cb=oa=null;bb={}};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ../geometry/projectionEllipsoid ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/support/spatialReferenceUtils ../geometry/support/WKIDUnitConversion".split(" "),
function(r,e,ha,ea,q,w,g,E){function l(n){if(n=K[n])return n;throw Error("unknown measure");}function t(n){return H[n].baseUnit}function aa(n,m=null){m=m||l(n);return H[m].baseUnit===n}function G(n,m,D){if(m===D)return n;const A=l(m);if(A!==l(D))throw Error("incompatible units");n=aa(m,A)?n:n*H[A].units[m].inBaseUnits;return aa(D,A)?n:n/H[A].units[D].inBaseUnits}function v(n,m){return 3E3>G(n,m,"meters")?"meters":"kilometers"}function x(n,m){return 1E5>G(n,m,"meters")?"meters":"kilometers"}function M(n,
m){return 1E3>G(n,m,"feet")?"feet":"miles"}function d(n,m){return 1E5>G(n,m,"feet")?"feet":"miles"}function p(n){return ka.fromJSON(n.toLowerCase())||null}function J(n,m=w.earth.metersPerDegree){return W(n,!0)||m}function W(n,m=!1){let D,A,O=null;null!=n&&("object"===typeof n?(D=n.wkid,A=n.wkt):"number"===typeof n?D=n:"string"===typeof n&&(A=n));if(D){if(g.isWKIDFromMars(D))return w.mars.metersPerDegree;if(g.isWKIDFromMoon(D))return w.moon.metersPerDegree;O=Y.values[Y[D]];!O&&m&&fa.has(D)&&(O=I)}else A&&
(-1!==A.search(/^PROJCS/i)?(n=L.exec(A))&&n[1]&&(O=parseFloat(n[1].split(",")[1])):-1!==A.search(/^GEOCCS/i)&&(n=ia.exec(A))&&n[1]&&(O=parseFloat(n[1].split(",")[1])));return O}function B(n){let m,D,A=null;null!=n&&("object"===typeof n?(m=n.wkid,D=n.wkt):"number"===typeof n?m=n:"string"===typeof n&&(D=n));m?A=Y.units[Y[m]]:D&&-1!==D.search(/^PROJCS/i)&&(n=L.exec(D))&&n[1]&&(A=(n=/[\\"\\']{1}([^\\"\\']+)/.exec(n[1]))&&n[1]);return A?p(A):null}const I=w.earth.radius*Math.PI/200,L=/UNIT\[([^\]]+)\]\]$/i,
Y=E,ia=/UNIT\[([^\]]+)\]/i,fa=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),ka=ha.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",
"50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});e={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};E={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*
.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(n=>n*n)(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};const H={length:{baseUnit:"meters",units:e},area:{baseUnit:"square-meters",units:E},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},
"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},K=function(){const n={};for(const m in H)for(const D in H[m].units)n[D]=
m;return n}(),Q={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},T={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",
esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"};e=ha.strict()(Q);E=ha.strict()(T);ha=ha.strict()({...Q,...T});r.areaUnitsJSONMap=e;r.baseUnitForMeasure=t;r.baseUnitForUnit=function(n){return t(l(n))};r.convertUnit=G;r.getDefaultUnitSystem=function(n){if(!n)return null;switch(B(n)){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";
case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null};r.getMetersPerUnit=W;r.getMetersPerUnitForSR=J;r.getMetersPerVerticalUnitForSR=function(n){if(n&&"object"===typeof n&&!g.isEarth(n))return 1;n=J(n);return 1E5<n?1:n};r.getUnitString=B;r.getVerticalUnitStringForSR=function(n){const m=J(n),D=n instanceof q?ea.getReferenceEllipsoid(n).metersPerDegree:1E5;return m>=D?"meters":B(n)};r.inchesPerMeter=39.37;r.isBaseUnit=aa;r.isMeasurementSystem=function(n){return"imperial"===
n||"metric"===n};r.lengthToDegrees=function(n,m,D){return G(n,m,"meters")/(D*Math.PI/180)};r.lengthUnitsJSONMap=E;r.measureForUnit=l;r.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");r.measurementLengthUnits="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" ");r.preferredImperialAreaUnit=function(n,m){return 1E6>G(n,m,"square-feet")?"square-feet":
"square-miles"};r.preferredImperialLengthUnit=M;r.preferredImperialVerticalLengthUnit=d;r.preferredLengthUnit=function(n,m,D){switch(D){case "metric":return v(n,m);case "imperial":return M(n,m);default:return D}};r.preferredMetricAreaUnit=function(n,m){return 3E6>G(n,m,"square-meters")?"square-meters":"square-kilometers"};r.preferredMetricLengthUnit=v;r.preferredMetricVerticalLengthUnit=x;r.preferredVerticalLengthUnit=function(n,m,D){switch(D){case "metric":return x(n,m);case "imperial":return d(n,
m);default:return D}};r.unitFromRESTJSON=p;r.unitToRESTJSON=function(n){return ka.toJSON(n)||null};r.unitsJSONMap=ha;Object.defineProperty(r,"__esModule",{value:!0})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","./SpatialReference","./support/Ellipsoid","./support/spatialReferenceUtils"],function(r,e,ha,ea){function q(t){return new e({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${t.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}
const w=q(ha.earth),g=q(ha.mars),E=q(ha.moon),l=new e({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${ha.earth.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});r.SphericalECEFSpatialReference=w;r.SphericalPCPFMars=
g;r.SphericalPCPFMoon=E;r.WGS84ECEFSpatialReference=l;r.createSphericalPCPF=q;r.getReferenceEllipsoid=function(t){return t&&(ea.isMars(t)||t===g)?ha.mars:t&&(ea.isMoon(t)||t===E)?ha.moon:ha.earth};r.getReferenceEllipsoidFromWKID=function(t){return ea.isWKIDFromMars(t)?ha.mars:ea.isWKIDFromMoon(t)?ha.moon:ha.earth};r.getSphericalPCPF=function(t){return t&&(ea.isMars(t)||t===g)?g:t&&(ea.isMoon(t)||t===E)?E:w};r.getSphericalPCPFForEllipsoid=function(t){return t&&t===ha.mars?g:t&&t===ha.moon?E:w};Object.defineProperty(r,
"__esModule",{value:!0})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(r,e,ha){function ea(c,k){c[0]=k[0];c[1]=k[1];c[2]=k[2];c[3]=k[3];c[4]=k[4];c[5]=k[5];c[6]=k[6];c[7]=k[7];c[8]=k[8];c[9]=k[9];c[10]=k[10];c[11]=k[11];c[12]=k[12];c[13]=k[13];c[14]=k[14];c[15]=k[15];return c}function q(c,k,R,f,u,N,P,ca,Z,y,F,X,ma,na,sa,wa,ya){c[0]=k;c[1]=R;c[2]=f;c[3]=u;c[4]=N;c[5]=P;c[6]=ca;c[7]=Z;c[8]=y;c[9]=F;c[10]=X;c[11]=ma;c[12]=na;c[13]=sa;c[14]=wa;c[15]=ya;return c}function w(c){c[0]=
1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function g(c,k){if(c===k){const R=k[1],f=k[2],u=k[3],N=k[6],P=k[7],ca=k[11];c[1]=k[4];c[2]=k[8];c[3]=k[12];c[4]=R;c[6]=k[9];c[7]=k[13];c[8]=f;c[9]=N;c[11]=k[14];c[12]=u;c[13]=P;c[14]=ca}else c[0]=k[0],c[1]=k[4],c[2]=k[8],c[3]=k[12],c[4]=k[1],c[5]=k[5],c[6]=k[9],c[7]=k[13],c[8]=k[2],c[9]=k[6],c[10]=k[10],c[11]=k[14],c[12]=k[3],c[13]=k[7],c[14]=k[11],c[15]=k[15];return c}function E(c,
k){const R=k[0],f=k[1],u=k[2],N=k[3],P=k[4],ca=k[5],Z=k[6],y=k[7],F=k[8],X=k[9],ma=k[10],na=k[11],sa=k[12],wa=k[13],ya=k[14];k=k[15];const Ja=R*ca-f*P,Ga=R*Z-u*P,Fa=R*y-N*P,Aa=f*Z-u*ca,Ea=f*y-N*ca,oa=u*y-N*Z,cb=F*wa-X*sa,fb=F*ya-ma*sa,bb=F*k-na*sa,a=X*ya-ma*wa,hb=X*k-na*wa,gb=ma*k-na*ya;let Qa=Ja*gb-Ga*hb+Fa*a+Aa*bb-Ea*fb+oa*cb;if(!Qa)return null;Qa=1/Qa;c[0]=(ca*gb-Z*hb+y*a)*Qa;c[1]=(u*hb-f*gb-N*a)*Qa;c[2]=(wa*oa-ya*Ea+k*Aa)*Qa;c[3]=(ma*Ea-X*oa-na*Aa)*Qa;c[4]=(Z*bb-P*gb-y*fb)*Qa;c[5]=(R*gb-u*bb+
N*fb)*Qa;c[6]=(ya*Fa-sa*oa-k*Ga)*Qa;c[7]=(F*oa-ma*Fa+na*Ga)*Qa;c[8]=(P*hb-ca*bb+y*cb)*Qa;c[9]=(f*bb-R*hb-N*cb)*Qa;c[10]=(sa*Ea-wa*Fa+k*Ja)*Qa;c[11]=(X*Fa-F*Ea-na*Ja)*Qa;c[12]=(ca*fb-P*a-Z*cb)*Qa;c[13]=(R*a-f*fb+u*cb)*Qa;c[14]=(wa*Ga-sa*Aa-ya*Ja)*Qa;c[15]=(F*Aa-X*Ga+ma*Ja)*Qa;return c}function l(c,k){const R=k[0],f=k[1],u=k[2],N=k[3],P=k[4],ca=k[5],Z=k[6],y=k[7],F=k[8],X=k[9],ma=k[10],na=k[11],sa=k[12],wa=k[13],ya=k[14];k=k[15];c[0]=ca*(ma*k-na*ya)-X*(Z*k-y*ya)+wa*(Z*na-y*ma);c[1]=-(f*(ma*k-na*ya)-
X*(u*k-N*ya)+wa*(u*na-N*ma));c[2]=f*(Z*k-y*ya)-ca*(u*k-N*ya)+wa*(u*y-N*Z);c[3]=-(f*(Z*na-y*ma)-ca*(u*na-N*ma)+X*(u*y-N*Z));c[4]=-(P*(ma*k-na*ya)-F*(Z*k-y*ya)+sa*(Z*na-y*ma));c[5]=R*(ma*k-na*ya)-F*(u*k-N*ya)+sa*(u*na-N*ma);c[6]=-(R*(Z*k-y*ya)-P*(u*k-N*ya)+sa*(u*y-N*Z));c[7]=R*(Z*na-y*ma)-P*(u*na-N*ma)+F*(u*y-N*Z);c[8]=P*(X*k-na*wa)-F*(ca*k-y*wa)+sa*(ca*na-y*X);c[9]=-(R*(X*k-na*wa)-F*(f*k-N*wa)+sa*(f*na-N*X));c[10]=R*(ca*k-y*wa)-P*(f*k-N*wa)+sa*(f*y-N*ca);c[11]=-(R*(ca*na-y*X)-P*(f*na-N*X)+F*(f*y-N*
ca));c[12]=-(P*(X*ya-ma*wa)-F*(ca*ya-Z*wa)+sa*(ca*ma-Z*X));c[13]=R*(X*ya-ma*wa)-F*(f*ya-u*wa)+sa*(f*ma-u*X);c[14]=-(R*(ca*ya-Z*wa)-P*(f*ya-u*wa)+sa*(f*Z-u*ca));c[15]=R*(ca*ma-Z*X)-P*(f*ma-u*X)+F*(f*Z-u*ca);return c}function t(c){const k=c[0],R=c[1],f=c[2],u=c[3],N=c[4],P=c[5],ca=c[6],Z=c[7],y=c[8],F=c[9],X=c[10],ma=c[11],na=c[12],sa=c[13],wa=c[14];c=c[15];return(k*P-R*N)*(X*c-ma*wa)-(k*ca-f*N)*(F*c-ma*sa)+(k*Z-u*N)*(F*wa-X*sa)+(R*ca-f*P)*(y*c-ma*na)-(R*Z-u*P)*(y*wa-X*na)+(f*Z-u*ca)*(y*sa-F*na)}function aa(c,
k,R){const f=k[0],u=k[1],N=k[2],P=k[3],ca=k[4],Z=k[5],y=k[6],F=k[7],X=k[8],ma=k[9],na=k[10],sa=k[11],wa=k[12],ya=k[13],Ja=k[14];k=k[15];let Ga=R[0],Fa=R[1],Aa=R[2],Ea=R[3];c[0]=Ga*f+Fa*ca+Aa*X+Ea*wa;c[1]=Ga*u+Fa*Z+Aa*ma+Ea*ya;c[2]=Ga*N+Fa*y+Aa*na+Ea*Ja;c[3]=Ga*P+Fa*F+Aa*sa+Ea*k;Ga=R[4];Fa=R[5];Aa=R[6];Ea=R[7];c[4]=Ga*f+Fa*ca+Aa*X+Ea*wa;c[5]=Ga*u+Fa*Z+Aa*ma+Ea*ya;c[6]=Ga*N+Fa*y+Aa*na+Ea*Ja;c[7]=Ga*P+Fa*F+Aa*sa+Ea*k;Ga=R[8];Fa=R[9];Aa=R[10];Ea=R[11];c[8]=Ga*f+Fa*ca+Aa*X+Ea*wa;c[9]=Ga*u+Fa*Z+Aa*ma+Ea*
ya;c[10]=Ga*N+Fa*y+Aa*na+Ea*Ja;c[11]=Ga*P+Fa*F+Aa*sa+Ea*k;Ga=R[12];Fa=R[13];Aa=R[14];Ea=R[15];c[12]=Ga*f+Fa*ca+Aa*X+Ea*wa;c[13]=Ga*u+Fa*Z+Aa*ma+Ea*ya;c[14]=Ga*N+Fa*y+Aa*na+Ea*Ja;c[15]=Ga*P+Fa*F+Aa*sa+Ea*k;return c}function G(c,k,R){const f=R[0],u=R[1];R=R[2];let N=void 0,P=void 0,ca=void 0,Z=void 0,y=void 0,F=void 0,X=void 0,ma=void 0,na=void 0,sa=void 0,wa=void 0,ya=void 0;k===c?(c[12]=k[0]*f+k[4]*u+k[8]*R+k[12],c[13]=k[1]*f+k[5]*u+k[9]*R+k[13],c[14]=k[2]*f+k[6]*u+k[10]*R+k[14],c[15]=k[3]*f+k[7]*
u+k[11]*R+k[15]):(N=k[0],P=k[1],ca=k[2],Z=k[3],y=k[4],F=k[5],X=k[6],ma=k[7],na=k[8],sa=k[9],wa=k[10],ya=k[11],c[0]=N,c[1]=P,c[2]=ca,c[3]=Z,c[4]=y,c[5]=F,c[6]=X,c[7]=ma,c[8]=na,c[9]=sa,c[10]=wa,c[11]=ya,c[12]=N*f+y*u+na*R+k[12],c[13]=P*f+F*u+sa*R+k[13],c[14]=ca*f+X*u+wa*R+k[14],c[15]=Z*f+ma*u+ya*R+k[15]);return c}function v(c,k,R){const f=R[0],u=R[1];R=R[2];c[0]=k[0]*f;c[1]=k[1]*f;c[2]=k[2]*f;c[3]=k[3]*f;c[4]=k[4]*u;c[5]=k[5]*u;c[6]=k[6]*u;c[7]=k[7]*u;c[8]=k[8]*R;c[9]=k[9]*R;c[10]=k[10]*R;c[11]=k[11]*
R;c[12]=k[12];c[13]=k[13];c[14]=k[14];c[15]=k[15];return c}function x(c,k,R,f){let u=f[0],N=f[1];f=f[2];let P=Math.sqrt(u*u+N*N+f*f);var ca=void 0,Z=void 0;let y=void 0,F=void 0,X=void 0,ma=void 0,na=void 0,sa=void 0,wa=void 0,ya=void 0,Ja=void 0,Ga=void 0,Fa=void 0,Aa=void 0,Ea=void 0,oa=void 0,cb=void 0,fb=void 0,bb=void 0,a=void 0,hb=void 0,gb=void 0;Z=ca=void 0;if(P<ha.EPSILON)return null;P=1/P;u*=P;N*=P;f*=P;ca=Math.sin(R);Z=Math.cos(R);y=1-Z;F=k[0];X=k[1];ma=k[2];na=k[3];sa=k[4];wa=k[5];ya=
k[6];Ja=k[7];Ga=k[8];Fa=k[9];Aa=k[10];Ea=k[11];oa=u*u*y+Z;cb=N*u*y+f*ca;fb=f*u*y-N*ca;bb=u*N*y-f*ca;a=N*N*y+Z;hb=f*N*y+u*ca;gb=u*f*y+N*ca;ca=N*f*y-u*ca;Z=f*f*y+Z;c[0]=F*oa+sa*cb+Ga*fb;c[1]=X*oa+wa*cb+Fa*fb;c[2]=ma*oa+ya*cb+Aa*fb;c[3]=na*oa+Ja*cb+Ea*fb;c[4]=F*bb+sa*a+Ga*hb;c[5]=X*bb+wa*a+Fa*hb;c[6]=ma*bb+ya*a+Aa*hb;c[7]=na*bb+Ja*a+Ea*hb;c[8]=F*gb+sa*ca+Ga*Z;c[9]=X*gb+wa*ca+Fa*Z;c[10]=ma*gb+ya*ca+Aa*Z;c[11]=na*gb+Ja*ca+Ea*Z;k!==c&&(c[12]=k[12],c[13]=k[13],c[14]=k[14],c[15]=k[15]);return c}function M(c,
k,R){const f=Math.sin(R);R=Math.cos(R);const u=k[4],N=k[5],P=k[6],ca=k[7],Z=k[8],y=k[9],F=k[10],X=k[11];k!==c&&(c[0]=k[0],c[1]=k[1],c[2]=k[2],c[3]=k[3],c[12]=k[12],c[13]=k[13],c[14]=k[14],c[15]=k[15]);c[4]=u*R+Z*f;c[5]=N*R+y*f;c[6]=P*R+F*f;c[7]=ca*R+X*f;c[8]=Z*R-u*f;c[9]=y*R-N*f;c[10]=F*R-P*f;c[11]=X*R-ca*f;return c}function d(c,k,R){const f=Math.sin(R);R=Math.cos(R);const u=k[0],N=k[1],P=k[2],ca=k[3],Z=k[8],y=k[9],F=k[10],X=k[11];k!==c&&(c[4]=k[4],c[5]=k[5],c[6]=k[6],c[7]=k[7],c[12]=k[12],c[13]=
k[13],c[14]=k[14],c[15]=k[15]);c[0]=u*R-Z*f;c[1]=N*R-y*f;c[2]=P*R-F*f;c[3]=ca*R-X*f;c[8]=u*f+Z*R;c[9]=N*f+y*R;c[10]=P*f+F*R;c[11]=ca*f+X*R;return c}function p(c,k,R){const f=Math.sin(R);R=Math.cos(R);const u=k[0],N=k[1],P=k[2],ca=k[3],Z=k[4],y=k[5],F=k[6],X=k[7];k!==c&&(c[8]=k[8],c[9]=k[9],c[10]=k[10],c[11]=k[11],c[12]=k[12],c[13]=k[13],c[14]=k[14],c[15]=k[15]);c[0]=u*R+Z*f;c[1]=N*R+y*f;c[2]=P*R+F*f;c[3]=ca*R+X*f;c[4]=Z*R-u*f;c[5]=y*R-N*f;c[6]=F*R-P*f;c[7]=X*R-ca*f;return c}function J(c,k){c[0]=1;
c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=k[0];c[13]=k[1];c[14]=k[2];c[15]=1;return c}function W(c,k){c[0]=k[0];c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=k[1];c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=k[2];c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function B(c,k,R){let f=R[0],u=R[1];R=R[2];let N=Math.sqrt(f*f+u*u+R*R),P=void 0,ca=void 0,Z=void 0;if(N<ha.EPSILON)return null;N=1/N;f*=N;u*=N;R*=N;P=Math.sin(k);ca=Math.cos(k);Z=1-ca;c[0]=f*f*Z+ca;c[1]=u*f*Z+R*P;c[2]=R*
f*Z-u*P;c[3]=0;c[4]=f*u*Z-R*P;c[5]=u*u*Z+ca;c[6]=R*u*Z+f*P;c[7]=0;c[8]=f*R*Z+u*P;c[9]=u*R*Z-f*P;c[10]=R*R*Z+ca;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function I(c,k){const R=Math.sin(k);k=Math.cos(k);c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=k;c[6]=R;c[7]=0;c[8]=0;c[9]=-R;c[10]=k;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function L(c,k){const R=Math.sin(k);k=Math.cos(k);c[0]=k;c[1]=0;c[2]=-R;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=R;c[9]=0;c[10]=k;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=
1;return c}function Y(c,k){const R=Math.sin(k);k=Math.cos(k);c[0]=k;c[1]=R;c[2]=0;c[3]=0;c[4]=-R;c[5]=k;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function ia(c,k,R){var f=k[0],u=k[1],N=k[2],P=k[3],ca=f+f,Z=u+u;const y=N+N;k=f*ca;const F=f*Z;f*=y;const X=u*Z;u*=y;N*=y;ca*=P;Z*=P;P*=y;c[0]=1-(X+N);c[1]=F+P;c[2]=f-Z;c[3]=0;c[4]=F-P;c[5]=1-(k+N);c[6]=u+ca;c[7]=0;c[8]=f+Z;c[9]=u-ca;c[10]=1-(k+X);c[11]=0;c[12]=R[0];c[13]=R[1];c[14]=R[2];c[15]=1;return c}function fa(c,
k){const R=Ta,f=-k[0],u=-k[1],N=-k[2],P=k[3],ca=k[4],Z=k[5],y=k[6],F=k[7],X=f*f+u*u+N*N+P*P;0<X?(R[0]=2*(ca*P+F*f+Z*N-y*u)/X,R[1]=2*(Z*P+F*u+y*f-ca*N)/X,R[2]=2*(y*P+F*N+ca*u-Z*f)/X):(R[0]=2*(ca*P+F*f+Z*N-y*u),R[1]=2*(Z*P+F*u+y*f-ca*N),R[2]=2*(y*P+F*N+ca*u-Z*f));ia(c,k,R);return c}function ka(c,k){c[0]=k[12];c[1]=k[13];c[2]=k[14];return c}function H(c,k){const R=k[0],f=k[1],u=k[2],N=k[4],P=k[5],ca=k[6],Z=k[8],y=k[9];k=k[10];c[0]=Math.sqrt(R*R+f*f+u*u);c[1]=Math.sqrt(N*N+P*P+ca*ca);c[2]=Math.sqrt(Z*
Z+y*y+k*k);return c}function K(c,k){const R=k[0]+k[5]+k[10];let f=0;0<R?(f=2*Math.sqrt(R+1),c[3]=.25*f,c[0]=(k[6]-k[9])/f,c[1]=(k[8]-k[2])/f,c[2]=(k[1]-k[4])/f):k[0]>k[5]&&k[0]>k[10]?(f=2*Math.sqrt(1+k[0]-k[5]-k[10]),c[3]=(k[6]-k[9])/f,c[0]=.25*f,c[1]=(k[1]+k[4])/f,c[2]=(k[8]+k[2])/f):k[5]>k[10]?(f=2*Math.sqrt(1+k[5]-k[0]-k[10]),c[3]=(k[8]-k[2])/f,c[0]=(k[1]+k[4])/f,c[1]=.25*f,c[2]=(k[6]+k[9])/f):(f=2*Math.sqrt(1+k[10]-k[0]-k[5]),c[3]=(k[1]-k[4])/f,c[0]=(k[8]+k[2])/f,c[1]=(k[6]+k[9])/f,c[2]=.25*f);
return c}function Q(c,k,R,f){var u=k[0],N=k[1],P=k[2],ca=k[3],Z=u+u,y=N+N,F=P+P;k=u*Z;const X=u*y;u*=F;const ma=N*y;N*=F;P*=F;Z*=ca;y*=ca;ca*=F;F=f[0];const na=f[1];f=f[2];c[0]=(1-(ma+P))*F;c[1]=(X+ca)*F;c[2]=(u-y)*F;c[3]=0;c[4]=(X-ca)*na;c[5]=(1-(k+P))*na;c[6]=(N+Z)*na;c[7]=0;c[8]=(u+y)*f;c[9]=(N-Z)*f;c[10]=(1-(k+ma))*f;c[11]=0;c[12]=R[0];c[13]=R[1];c[14]=R[2];c[15]=1;return c}function T(c,k,R,f,u){var N=k[0],P=k[1],ca=k[2],Z=k[3],y=N+N,F=P+P,X=ca+ca;k=N*y;var ma=N*F,na=N*X;N=P*F;P*=X;var sa=ca*
X;ca=Z*y;F*=Z;const wa=Z*X;var ya=f[0],Ja=f[1];X=f[2];f=u[0];Z=u[1];u=u[2];y=(1-(N+sa))*ya;const Ga=(ma+wa)*ya;ya*=na-F;ma=(ma-wa)*Ja;sa=(1-(k+sa))*Ja;Ja*=P+ca;na=(na+F)*X;P=(P-ca)*X;k=(1-(k+N))*X;c[0]=y;c[1]=Ga;c[2]=ya;c[3]=0;c[4]=ma;c[5]=sa;c[6]=Ja;c[7]=0;c[8]=na;c[9]=P;c[10]=k;c[11]=0;c[12]=R[0]+f-(y*f+ma*Z+na*u);c[13]=R[1]+Z-(Ga*f+sa*Z+P*u);c[14]=R[2]+u-(ya*f+Ja*Z+k*u);c[15]=1;return c}function n(c,k){var R=k[0],f=k[1],u=k[2];k=k[3];var N=R+R,P=f+f;const ca=u+u;R*=N;const Z=f*N;f*=P;const y=u*
N,F=u*P;u*=ca;N*=k;P*=k;k*=ca;c[0]=1-f-u;c[1]=Z+k;c[2]=y-P;c[3]=0;c[4]=Z-k;c[5]=1-R-u;c[6]=F+N;c[7]=0;c[8]=y+P;c[9]=F-N;c[10]=1-R-f;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function m(c,k,R,f,u,N,P){const ca=1/(R-k),Z=1/(u-f),y=1/(N-P);c[0]=2*N*ca;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=2*N*Z;c[6]=0;c[7]=0;c[8]=(R+k)*ca;c[9]=(u+f)*Z;c[10]=(P+N)*y;c[11]=-1;c[12]=0;c[13]=0;c[14]=P*N*2*y;c[15]=0;return c}function D(c,k,R,f,u){k=1/Math.tan(k/2);let N=void 0;c[0]=k/R;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=
k;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[11]=-1;c[12]=0;c[13]=0;c[15]=0;null!=u&&Infinity!==u?(N=1/(f-u),c[10]=(u+f)*N,c[14]=2*u*f*N):(c[10]=-1,c[14]=-2*f);return c}function A(c,k,R,f){const u=Math.tan(k.upDegrees*Math.PI/180),N=Math.tan(k.downDegrees*Math.PI/180),P=Math.tan(k.leftDegrees*Math.PI/180);k=Math.tan(k.rightDegrees*Math.PI/180);const ca=2/(P+k),Z=2/(u+N);c[0]=ca;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=Z;c[6]=0;c[7]=0;c[8]=-((P-k)*ca*.5);c[9]=(u-N)*Z*.5;c[10]=f/(R-f);c[11]=-1;c[12]=0;c[13]=0;c[14]=f*R/
(R-f);c[15]=0;return c}function O(c,k,R,f,u,N,P){const ca=1/(k-R),Z=1/(f-u),y=1/(N-P);c[0]=-2*ca;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=-2*Z;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=2*y;c[11]=0;c[12]=(k+R)*ca;c[13]=(u+f)*Z;c[14]=(P+N)*y;c[15]=1;return c}function S(c,k,R,f){let u=void 0,N=void 0;var P=void 0,ca=void 0;let Z=void 0,y=void 0;var F=void 0,X=void 0;let ma=void 0,na=void 0;const sa=k[0],wa=k[1];k=k[2];P=f[0];ca=f[1];f=f[2];F=R[0];X=R[1];R=R[2];if(Math.abs(sa-F)<ha.EPSILON&&Math.abs(wa-X)<ha.EPSILON&&
Math.abs(k-R)<ha.EPSILON)return w(c);F=sa-F;X=wa-X;ma=k-R;na=1/Math.sqrt(F*F+X*X+ma*ma);F*=na;X*=na;ma*=na;u=ca*ma-f*X;N=f*F-P*ma;P=P*X-ca*F;(na=Math.sqrt(u*u+N*N+P*P))?(na=1/na,u*=na,N*=na,P*=na):P=N=u=0;ca=X*P-ma*N;Z=ma*u-F*P;y=F*N-X*u;(na=Math.sqrt(ca*ca+Z*Z+y*y))?(na=1/na,ca*=na,Z*=na,y*=na):y=Z=ca=0;c[0]=u;c[1]=ca;c[2]=F;c[3]=0;c[4]=N;c[5]=Z;c[6]=X;c[7]=0;c[8]=P;c[9]=y;c[10]=ma;c[11]=0;c[12]=-(u*sa+N*wa+P*k);c[13]=-(ca*sa+Z*wa+y*k);c[14]=-(F*sa+X*wa+ma*k);c[15]=1;return c}function ja(c,k,R,f){const u=
k[0],N=k[1];k=k[2];var P=f[0];const ca=f[1];var Z=f[2];f=u-R[0];let y=N-R[1];R=k-R[2];let F=f*f+y*y+R*R;0<F&&(F=1/Math.sqrt(F),f*=F,y*=F,R*=F);let X=ca*R-Z*y;Z=Z*f-P*R;P=P*y-ca*f;F=X*X+Z*Z+P*P;0<F&&(F=1/Math.sqrt(F),X*=F,Z*=F,P*=F);c[0]=X;c[1]=Z;c[2]=P;c[3]=0;c[4]=y*P-R*Z;c[5]=R*X-f*P;c[6]=f*Z-y*X;c[7]=0;c[8]=f;c[9]=y;c[10]=R;c[11]=0;c[12]=u;c[13]=N;c[14]=k;c[15]=1;return c}function pa(c){return"mat4("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+", "+c[9]+
", "+c[10]+", "+c[11]+", "+c[12]+", "+c[13]+", "+c[14]+", "+c[15]+")"}function ua(c){return Math.sqrt(c[0]**2+c[1]**2+c[2]**2+c[3]**2+c[4]**2+c[5]**2+c[6]**2+c[7]**2+c[8]**2+c[9]**2+c[10]**2+c[11]**2+c[12]**2+c[13]**2+c[14]**2+c[15]**2)}function ta(c,k,R){c[0]=k[0]+R[0];c[1]=k[1]+R[1];c[2]=k[2]+R[2];c[3]=k[3]+R[3];c[4]=k[4]+R[4];c[5]=k[5]+R[5];c[6]=k[6]+R[6];c[7]=k[7]+R[7];c[8]=k[8]+R[8];c[9]=k[9]+R[9];c[10]=k[10]+R[10];c[11]=k[11]+R[11];c[12]=k[12]+R[12];c[13]=k[13]+R[13];c[14]=k[14]+R[14];c[15]=
k[15]+R[15];return c}function za(c,k,R){c[0]=k[0]-R[0];c[1]=k[1]-R[1];c[2]=k[2]-R[2];c[3]=k[3]-R[3];c[4]=k[4]-R[4];c[5]=k[5]-R[5];c[6]=k[6]-R[6];c[7]=k[7]-R[7];c[8]=k[8]-R[8];c[9]=k[9]-R[9];c[10]=k[10]-R[10];c[11]=k[11]-R[11];c[12]=k[12]-R[12];c[13]=k[13]-R[13];c[14]=k[14]-R[14];c[15]=k[15]-R[15];return c}function Da(c,k,R){c[0]=k[0]*R;c[1]=k[1]*R;c[2]=k[2]*R;c[3]=k[3]*R;c[4]=k[4]*R;c[5]=k[5]*R;c[6]=k[6]*R;c[7]=k[7]*R;c[8]=k[8]*R;c[9]=k[9]*R;c[10]=k[10]*R;c[11]=k[11]*R;c[12]=k[12]*R;c[13]=k[13]*R;
c[14]=k[14]*R;c[15]=k[15]*R;return c}function Ra(c,k,R,f){c[0]=k[0]+R[0]*f;c[1]=k[1]+R[1]*f;c[2]=k[2]+R[2]*f;c[3]=k[3]+R[3]*f;c[4]=k[4]+R[4]*f;c[5]=k[5]+R[5]*f;c[6]=k[6]+R[6]*f;c[7]=k[7]+R[7]*f;c[8]=k[8]+R[8]*f;c[9]=k[9]+R[9]*f;c[10]=k[10]+R[10]*f;c[11]=k[11]+R[11]*f;c[12]=k[12]+R[12]*f;c[13]=k[13]+R[13]*f;c[14]=k[14]+R[14]*f;c[15]=k[15]+R[15]*f;return c}function Ka(c,k){return c[0]===k[0]&&c[1]===k[1]&&c[2]===k[2]&&c[3]===k[3]&&c[4]===k[4]&&c[5]===k[5]&&c[6]===k[6]&&c[7]===k[7]&&c[8]===k[8]&&c[9]===
k[9]&&c[10]===k[10]&&c[11]===k[11]&&c[12]===k[12]&&c[13]===k[13]&&c[14]===k[14]&&c[15]===k[15]}function Ca(c,k){const R=c[0],f=c[1],u=c[2],N=c[3],P=c[4],ca=c[5],Z=c[6],y=c[7],F=c[8],X=c[9],ma=c[10],na=c[11],sa=c[12],wa=c[13],ya=c[14];c=c[15];const Ja=k[0],Ga=k[1],Fa=k[2],Aa=k[3],Ea=k[4],oa=k[5],cb=k[6],fb=k[7],bb=k[8],a=k[9],hb=k[10],gb=k[11],Qa=k[12],vb=k[13],zb=k[14];k=k[15];return Math.abs(R-Ja)<=ha.EPSILON*Math.max(1,Math.abs(R),Math.abs(Ja))&&Math.abs(f-Ga)<=ha.EPSILON*Math.max(1,Math.abs(f),
Math.abs(Ga))&&Math.abs(u-Fa)<=ha.EPSILON*Math.max(1,Math.abs(u),Math.abs(Fa))&&Math.abs(N-Aa)<=ha.EPSILON*Math.max(1,Math.abs(N),Math.abs(Aa))&&Math.abs(P-Ea)<=ha.EPSILON*Math.max(1,Math.abs(P),Math.abs(Ea))&&Math.abs(ca-oa)<=ha.EPSILON*Math.max(1,Math.abs(ca),Math.abs(oa))&&Math.abs(Z-cb)<=ha.EPSILON*Math.max(1,Math.abs(Z),Math.abs(cb))&&Math.abs(y-fb)<=ha.EPSILON*Math.max(1,Math.abs(y),Math.abs(fb))&&Math.abs(F-bb)<=ha.EPSILON*Math.max(1,Math.abs(F),Math.abs(bb))&&Math.abs(X-a)<=ha.EPSILON*Math.max(1,
Math.abs(X),Math.abs(a))&&Math.abs(ma-hb)<=ha.EPSILON*Math.max(1,Math.abs(ma),Math.abs(hb))&&Math.abs(na-gb)<=ha.EPSILON*Math.max(1,Math.abs(na),Math.abs(gb))&&Math.abs(sa-Qa)<=ha.EPSILON*Math.max(1,Math.abs(sa),Math.abs(Qa))&&Math.abs(wa-vb)<=ha.EPSILON*Math.max(1,Math.abs(wa),Math.abs(vb))&&Math.abs(ya-zb)<=ha.EPSILON*Math.max(1,Math.abs(ya),Math.abs(zb))&&Math.abs(c-k)<=ha.EPSILON*Math.max(1,Math.abs(c),Math.abs(k))}function Sa(c){const k=ha.EPSILON,R=c[0],f=c[1],u=c[2],N=c[4],P=c[5],ca=c[6],Z=
c[8],y=c[9];c=c[10];return Math.abs(1-(R*R+N*N+Z*Z))<=k&&Math.abs(1-(f*f+P*P+y*y))<=k&&Math.abs(1-(u*u+ca*ca+c*c))<=k}const Ta=e.create();e=Object.freeze({__proto__:null,copy:ea,set:q,identity:w,transpose:g,invert:E,adjoint:l,determinant:t,multiply:aa,translate:G,scale:v,rotate:x,rotateX:M,rotateY:d,rotateZ:p,fromTranslation:J,fromScaling:W,fromRotation:B,fromXRotation:I,fromYRotation:L,fromZRotation:Y,fromRotationTranslation:ia,fromQuat2:fa,getTranslation:ka,getScaling:H,getRotation:K,fromRotationTranslationScale:Q,
fromRotationTranslationScaleOrigin:T,fromQuat:n,frustum:m,perspective:D,perspectiveFromFieldOfView:A,ortho:O,lookAt:S,targetTo:ja,str:pa,frob:ua,add:ta,subtract:za,multiplyScalar:Da,multiplyScalarAndAdd:Ra,exactEquals:Ka,equals:Ca,isOrthoNormal:Sa,mul:aa,sub:za});r.add=ta;r.adjoint=l;r.copy=ea;r.determinant=t;r.equals=Ca;r.exactEquals=Ka;r.frob=ua;r.fromQuat=n;r.fromQuat2=fa;r.fromRotation=B;r.fromRotationTranslation=ia;r.fromRotationTranslationScale=Q;r.fromRotationTranslationScaleOrigin=T;r.fromScaling=
W;r.fromTranslation=J;r.fromXRotation=I;r.fromYRotation=L;r.fromZRotation=Y;r.frustum=m;r.getRotation=K;r.getScaling=H;r.getTranslation=ka;r.identity=w;r.invert=E;r.isOrthoNormal=Sa;r.lookAt=S;r.mat4=e;r.mul=aa;r.multiply=aa;r.multiplyScalar=Da;r.multiplyScalarAndAdd=Ra;r.ortho=O;r.perspective=D;r.perspectiveFromFieldOfView=A;r.rotate=x;r.rotateX=M;r.rotateY=d;r.rotateZ=p;r.scale=v;r.set=q;r.str=pa;r.sub=za;r.subtract=za;r.targetTo=ja;r.translate=G;r.transpose=g})},"esri/chunks/pe":function(){define(["require",
"exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(r,e,ha,ea,q){function w(){return!!e._pe}function g(){return!!q("esri-wasm")}function E(){return x?x:x=(new Promise(function(d,p){r(["./pe-wasm"],d,p)})).then(function(d){return d.peWasm}).then(({default:d})=>d({locateFile:p=>ea.getAssetUrl(`esri/geometry/support/${p}`)})).then(d=>{l(d)})}function l(d){function p(B,I,L){B[I]=L(B[I])}e._pe=d;e.PeDefs.init();e.PeGTlistExtended.init();e.PeNotationMgrs.init();e.PeNotationUtm.init();
e.PePCSInfo.init();e.PeGCSExtent=function(B){function I(){return B.apply(this,arguments)||this}ha._inheritsLoose(I,B);I.prototype.destroy=function(){e._pe.destroy(this)};return I}(e._pe.PeGCSExtent);d=[e._pe.PeDatum,e._pe.PeGeogcs,e._pe.PeGeogtran,e._pe.PeObject,e._pe.PeParameter,e._pe.PePrimem,e._pe.PeProjcs,e._pe.PeSpheroid,e._pe.PeUnit];for(var J of d)p(J.prototype,"getName",B=>function(){return B.call(this,Array(e.PeDefs.PE_NAME_MAX))});for(const B of[e._pe.PeGeogtran,e._pe.PeProjcs])p(B.prototype,
"getParameters",I=>function(){const L=Array(e.PeDefs.PE_PARM_MAX);let Y=I.call(this);for(let ia=0;ia<L.length;ia++){const fa=e._pe.getValue(Y,"*");L[ia]=fa?e._pe.wrapPointer(fa,e._pe.PeParameter):null;Y+=Int32Array.BYTES_PER_ELEMENT}return L});p(e._pe.PeHorizon.prototype,"getCoord",B=>function(){const I=this.getSize();if(!I)return null;const L=[],Y=B.call(this);v(L,I,Y);return L});p(e._pe.PeGTlistExtendedEntry.prototype,"getEntries",B=>{const I=e._pe._pe_getPeGTlistExtendedGTsSize();return function(){let L=
null;var Y=B.call(this);if(!e._pe.compare(Y,e._pe.NULL)){L=[Y];const ia=this.getSteps();if(1<ia){Y=e._pe.getPointer(Y);for(let fa=1;fa<ia;fa++)L.push(e._pe.wrapPointer(Y+I*fa,e._pe.PeGTlistExtendedGTs))}}return L}});const W=e._pe._pe_getPeHorizonSize();J=B=>function(){let I=this._cache;I||(this._cache=I=new Map);if(I.has(B))return I.get(B);let L=null;var Y=B.call(this);if(!e._pe.compare(Y,e._pe.NULL)){L=[Y];const ia=Y.getNump();if(1<ia){Y=e._pe.getPointer(Y);for(let fa=1;fa<ia;fa++)L.push(e._pe.wrapPointer(Y+
W*fa,e._pe.PeHorizon))}}I.set(B,L);return L};p(e._pe.PeProjcs.prototype,"horizonGcsGenerate",J);p(e._pe.PeProjcs.prototype,"horizonPcsGenerate",J);e._pe.PeObject.prototype.toString=function(B=e.PeDefs.PE_STR_OPTS_NONE){e._pe.ensureCache.prepare();const I=e._pe.getPointer(this),L=e._pe.ensureInt8(Array(e.PeDefs.PE_BUFFER_MAX));return e._pe.UTF8ToString(e._pe._pe_object_to_string_ext(I,B,L))}}function t(d){if(d){var p=e._pe.getClass(d);p&&(p=e._pe.getCache(p))&&(d=e._pe.getPointer(d))&&delete p[d]}}
function aa(d,p){const J=[];p=Array(p);for(let W=0;W<d;W++)J.push(e._pe.ensureInt8(p));return J}function G(d){let p;Array.isArray(d[0])?(p=[],d.forEach(J=>{p.push(J[0],J[1])})):p=d;return p}function v(d,p,J,W=!1){if(W)for(W=0;W<2*p;W++)d[W]=e._pe.getValue(J+W*Float64Array.BYTES_PER_ELEMENT,"double");else{W=0===d.length;for(let B=0;B<p;B++)W&&(d[B]=Array(2)),d[B][0]=e._pe.getValue(J,"double"),d[B][1]=e._pe.getValue(J+Float64Array.BYTES_PER_ELEMENT,"double"),J+=2*Float64Array.BYTES_PER_ELEMENT}}let x;
e._pe=null;e.PeCSTransformations=void 0;(function(d){function p(B,I,L){e._pe.ensureCache.prepare();var Y=G(L);const ia=L===Y;Y=e._pe.ensureFloat64(Y);(B=e._pe._pe_geog_to_proj(e._pe.getPointer(B),I,Y))&&v(L,I,Y,ia);return B}function J(B,I,L){return W(B,I,L,0)}function W(B,I,L,Y){e._pe.ensureCache.prepare();var ia=G(L);const fa=L===ia;ia=e._pe.ensureFloat64(ia);(B=e._pe._pe_proj_to_geog_center(e._pe.getPointer(B),I,ia,Y))&&v(L,I,ia,fa);return B}d.geogToProj=p;d.projGeog=function(B,I,L,Y){switch(Y){case e.PeDefs.PE_TRANSFORM_P_TO_G:return J(B,
I,L);case e.PeDefs.PE_TRANSFORM_G_TO_P:return p(B,I,L)}return 0};d.projToGeog=J;d.projToGeogCenter=W})(e.PeCSTransformations||(e.PeCSTransformations={}));e.PeDefs=void 0;(function(d){d.init=function(){d.PE_BUFFER_MAX=e._pe.PeDefs.prototype.PE_BUFFER_MAX;d.PE_NAME_MAX=e._pe.PeDefs.prototype.PE_NAME_MAX;d.PE_MGRS_MAX=e._pe.PeDefs.prototype.PE_MGRS_MAX;d.PE_USNG_MAX=e._pe.PeDefs.prototype.PE_USNG_MAX;d.PE_DD_MAX=e._pe.PeDefs.prototype.PE_DD_MAX;d.PE_DDM_MAX=e._pe.PeDefs.prototype.PE_DDM_MAX;d.PE_DMS_MAX=
e._pe.PeDefs.prototype.PE_DMS_MAX;d.PE_UTM_MAX=e._pe.PeDefs.prototype.PE_UTM_MAX;d.PE_PARM_MAX=e._pe.PeDefs.prototype.PE_PARM_MAX;d.PE_TYPE_NONE=e._pe.PeDefs.prototype.PE_TYPE_NONE;d.PE_TYPE_GEOGCS=e._pe.PeDefs.prototype.PE_TYPE_GEOGCS;d.PE_TYPE_PROJCS=e._pe.PeDefs.prototype.PE_TYPE_PROJCS;d.PE_TYPE_GEOGTRAN=e._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;d.PE_TYPE_COORDSYS=e._pe.PeDefs.prototype.PE_TYPE_COORDSYS;d.PE_TYPE_UNIT=e._pe.PeDefs.prototype.PE_TYPE_UNIT;d.PE_TYPE_LINUNIT=e._pe.PeDefs.prototype.PE_TYPE_LINUNIT;
d.PE_STR_OPTS_NONE=e._pe.PeDefs.prototype.PE_STR_OPTS_NONE;d.PE_STR_AUTH_NONE=e._pe.PeDefs.prototype.PE_STR_AUTH_NONE;d.PE_STR_AUTH_TOP=e._pe.PeDefs.prototype.PE_STR_AUTH_TOP;d.PE_STR_NAME_CANON=e._pe.PeDefs.prototype.PE_STR_NAME_CANON;d.PE_PARM_X0=e._pe.PeDefs.prototype.PE_PARM_X0;d.PE_PARM_ND=e._pe.PeDefs.prototype.PE_PARM_ND;d.PE_TRANSFORM_1_TO_2=e._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;d.PE_TRANSFORM_2_TO_1=e._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;d.PE_TRANSFORM_P_TO_G=e._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;
d.PE_TRANSFORM_G_TO_P=e._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;d.PE_HORIZON_RECT=e._pe.PeDefs.prototype.PE_HORIZON_RECT;d.PE_HORIZON_POLY=e._pe.PeDefs.prototype.PE_HORIZON_POLY;d.PE_HORIZON_LINE=e._pe.PeDefs.prototype.PE_HORIZON_LINE;d.PE_HORIZON_DELTA=e._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(e.PeDefs||(e.PeDefs={}));e.PeFactory=void 0;(function(d){function p(I,L){let Y=null,ia=J[I];ia||(ia={},J[I]=ia);ia.hasOwnProperty(String(L))?Y=ia[L]:(I=e._pe.PeFactory.prototype.factoryByType(I,L),e._pe.compare(I,
e._pe.NULL)||(Y=I,ia[L]=Y));return Y=B(Y)}const J={},W={},B=I=>{if(I){const L=I.getType();switch(L){case e.PeDefs.PE_TYPE_GEOGCS:I=e._pe.castObject(I,e._pe.PeGeogcs);break;case e.PeDefs.PE_TYPE_PROJCS:I=e._pe.castObject(I,e._pe.PeProjcs);break;case e.PeDefs.PE_TYPE_GEOGTRAN:I=e._pe.castObject(I,e._pe.PeGeogtran);break;default:L&e.PeDefs.PE_TYPE_UNIT&&(I=e._pe.castObject(I,e._pe.PeUnit))}}return I};d.initialize=function(){e._pe.PeFactory.prototype.initialize(null)};d.coordsys=function(I){return p(e.PeDefs.PE_TYPE_COORDSYS,
I)};d.factoryByType=p;d.fromString=function(I,L){let Y=null,ia=W[I];ia||(ia={},W[I]=ia);ia.hasOwnProperty(L)?Y=ia[L]:(I=e._pe.PeFactory.prototype.fromString(I,L),e._pe.compare(I,e._pe.NULL)||(Y=I,ia[L]=Y));return Y=B(Y)};d.geogcs=function(I){return p(e.PeDefs.PE_TYPE_GEOGCS,I)};d.geogtran=function(I){return p(e.PeDefs.PE_TYPE_GEOGTRAN,I)};d.getCode=function(I){return e._pe.PeFactory.prototype.getCode(I)};d.projcs=function(I){return p(e.PeDefs.PE_TYPE_PROJCS,I)};d.unit=function(I){return p(e.PeDefs.PE_TYPE_UNIT,
I)}})(e.PeFactory||(e.PeFactory={}));e.PeGCSExtent=null;e.PeGTlistExtended=void 0;(function(d){let p;d.init=function(){d.PE_GTLIST_OPTS_COMMON=e._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;p=e._pe._pe_getPeGTlistExtendedEntrySize()};d.getGTlist=function(J,W,B,I,L,Y){let ia=null;const fa=new e._pe.PeInteger(Y);try{const ka=e._pe.PeGTlistExtended.prototype.getGTlist(J,W,B,I,L,fa);if(Y=fa.val)if(ia=[ka],1<Y){const H=e._pe.getPointer(ka);for(J=1;J<Y;J++)ia.push(e._pe.wrapPointer(H+p*J,e._pe.PeGTlistExtendedEntry))}}finally{e._pe.destroy(fa)}return ia}})(e.PeGTlistExtended||
(e.PeGTlistExtended={}));e.PeGTlistExtendedEntry=void 0;(function(d){d.destroy=function(p){if(p&&p.length){for(const J of p)t(J),J.getEntries().forEach(W=>{t(W);W=W.getGeogtran();t(W);W.getParameters().forEach(t);[W.getGeogcs1(),W.getGeogcs2()].forEach(B=>{t(B);const I=B.getDatum();t(I);t(I.getSpheroid());t(B.getPrimem());t(B.getUnit())})});e._pe.PeGTlistExtendedEntry.prototype.Delete(p[0])}}})(e.PeGTlistExtendedEntry||(e.PeGTlistExtendedEntry={}));e.PeGTTransformations=void 0;(function(d){d.geogToGeog=
function(p,J,W,B,I){e._pe.ensureCache.prepare();var L=G(W);const Y=W===L;L=e._pe.ensureFloat64(L);let ia=0;B&&(ia=e._pe.ensureFloat64(B));(p=e._pe._pe_geog_to_geog(e._pe.getPointer(p),J,L,ia,I))&&v(W,J,L,Y);return p}})(e.PeGTTransformations||(e.PeGTTransformations={}));e.PeNotationDms=void 0;(function(d){const p=(W,B,I,L,Y,ia)=>{e._pe.ensureCache.prepare();switch(W){case "dd":var fa=e._pe._pe_geog_to_dd;var ka=e.PeDefs.PE_DD_MAX;break;case "ddm":fa=e._pe._pe_geog_to_ddm;ka=e.PeDefs.PE_DDM_MAX;break;
case "dms":fa=e._pe._pe_geog_to_dms,ka=e.PeDefs.PE_DMS_MAX}W=0;B&&(W=e._pe.getPointer(B));B=G(L);B=e._pe.ensureFloat64(B);ka=aa(I,ka);L=e._pe.ensureInt32(ka);if(Y=fa(W,I,B,Y,L))for(fa=0;fa<I;fa++)ia[fa]=e._pe.UTF8ToString(ka[fa]);return Y},J=(W,B,I,L,Y)=>{e._pe.ensureCache.prepare();switch(W){case "dd":var ia=e._pe._pe_dd_to_geog;break;case "ddm":ia=e._pe._pe_ddm_to_geog;break;case "dms":ia=e._pe._pe_dms_to_geog}W=0;B&&(W=e._pe.getPointer(B));B=L.map(fa=>e._pe.ensureString(fa));L=e._pe.ensureInt32(B);
B=e._pe.ensureFloat64(Array(2*I));(ia=ia(W,I,L,B))&&v(Y,I,B);return ia};d.geog_to_dms=function(W,B,I,L,Y){return p("dms",W,B,I,L,Y)};d.dms_to_geog=function(W,B,I,L){return J("dms",W,B,I,L)};d.geog_to_ddm=function(W,B,I,L,Y){return p("ddm",W,B,I,L,Y)};d.ddm_to_geog=function(W,B,I,L){return J("ddm",W,B,I,L)};d.geog_to_dd=function(W,B,I,L,Y){return p("dd",W,B,I,L,Y)};d.dd_to_geog=function(W,B,I,L){return J("dd",W,B,I,L)}})(e.PeNotationDms||(e.PeNotationDms={}));e.PeNotationMgrs=void 0;(function(d){d.init=
function(){d.PE_MGRS_STYLE_NEW=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;d.PE_MGRS_STYLE_OLD=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;d.PE_MGRS_STYLE_AUTO=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;d.PE_MGRS_180_ZONE_1_PLUS=e._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;d.PE_MGRS_ADD_SPACES=e._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};d.geog_to_mgrs_extended=function(p,J,W,B,I,L,Y){e._pe.ensureCache.prepare();let ia=0;p&&(ia=e._pe.getPointer(p));p=G(W);W=e._pe.ensureFloat64(p);
p=aa(J,e.PeDefs.PE_MGRS_MAX);const fa=e._pe.ensureInt32(p);if(B=e._pe._pe_geog_to_mgrs_extended(ia,J,W,B,I,L,fa))for(I=0;I<J;I++)Y[I]=e._pe.UTF8ToString(p[I]);return B};d.mgrs_to_geog_extended=function(p,J,W,B,I){e._pe.ensureCache.prepare();let L=0;p&&(L=e._pe.getPointer(p));p=W.map(Y=>e._pe.ensureString(Y));W=e._pe.ensureInt32(p);p=e._pe.ensureFloat64(Array(2*J));(B=e._pe._pe_mgrs_to_geog_extended(L,J,W,B,p))&&v(I,J,p);return B}})(e.PeNotationMgrs||(e.PeNotationMgrs={}));e.PeNotationUsng=void 0;
(function(d){d.geog_to_usng=function(p,J,W,B,I,L,Y){e._pe.ensureCache.prepare();let ia=0;p&&(ia=e._pe.getPointer(p));p=G(W);W=e._pe.ensureFloat64(p);p=aa(J,e.PeDefs.PE_MGRS_MAX);const fa=e._pe.ensureInt32(p);if(B=e._pe._pe_geog_to_usng(ia,J,W,B,I,L,fa))for(I=0;I<J;I++)Y[I]=e._pe.UTF8ToString(p[I]);return B};d.usng_to_geog=function(p,J,W,B){e._pe.ensureCache.prepare();var I=0;p&&(I=e._pe.getPointer(p));p=W.map(L=>e._pe.ensureString(L));W=e._pe.ensureInt32(p);p=e._pe.ensureFloat64(Array(2*J));(I=e._pe._pe_usng_to_geog(I,
J,W,p))&&v(B,J,p);return I}})(e.PeNotationUsng||(e.PeNotationUsng={}));e.PeNotationUtm=void 0;(function(d){d.init=function(){d.PE_UTM_OPTS_NONE=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;d.PE_UTM_OPTS_ADD_SPACES=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;d.PE_UTM_OPTS_NS=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};d.geog_to_utm=function(p,J,W,B,I){e._pe.ensureCache.prepare();var L=0;p&&(L=e._pe.getPointer(p));p=G(W);W=e._pe.ensureFloat64(p);p=aa(J,e.PeDefs.PE_UTM_MAX);const Y=e._pe.ensureInt32(p);
if(B=e._pe._pe_geog_to_utm(L,J,W,B,Y))for(L=0;L<J;L++)I[L]=e._pe.UTF8ToString(p[L]);return B};d.utm_to_geog=function(p,J,W,B,I){e._pe.ensureCache.prepare();let L=0;p&&(L=e._pe.getPointer(p));p=W.map(Y=>e._pe.ensureString(Y));W=e._pe.ensureInt32(p);p=e._pe.ensureFloat64(Array(2*J));(B=e._pe._pe_utm_to_geog(L,J,W,B,p))&&v(I,J,p);return B}})(e.PeNotationUtm||(e.PeNotationUtm={}));e.PePCSInfo=void 0;(function(d){const p=new Map;d.init=function(){d.PE_PCSINFO_OPTION_NONE=e._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;
d.PE_PCSINFO_OPTION_DOMAIN=e._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;d.PE_POLE_OUTSIDE_BOUNDARY=e._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;d.PE_POLE_POINT=e._pe.PePCSInfo.prototype.PE_POLE_POINT};d.generate=function(J,W=d.PE_PCSINFO_OPTION_DOMAIN){let B,I;p.has(J)&&(I=p.get(J),I[W]&&(B=I[W]));B||(B=e._pe.PePCSInfo.prototype.generate(J,W),I||(I=[],p.set(J,I)),I[W]=B);return B}})(e.PePCSInfo||(e.PePCSInfo={}));e.PeVersion=void 0;(function(d){d.version_string=function(){return e._pe.PeVersion.prototype.version_string()}})(e.PeVersion||
(e.PeVersion={}));var M=Object.freeze({__proto__:null,get _pe(){return e._pe},isLoaded:w,isSupported:g,load:E,get PeCSTransformations(){return e.PeCSTransformations},get PeDefs(){return e.PeDefs},get PeFactory(){return e.PeFactory},get PeGCSExtent(){return e.PeGCSExtent},get PeGTlistExtended(){return e.PeGTlistExtended},get PeGTlistExtendedEntry(){return e.PeGTlistExtendedEntry},get PeGTTransformations(){return e.PeGTTransformations},get PeNotationDms(){return e.PeNotationDms},get PeNotationMgrs(){return e.PeNotationMgrs},
get PeNotationUsng(){return e.PeNotationUsng},get PeNotationUtm(){return e.PeNotationUtm},get PePCSInfo(){return e.PePCSInfo},get PeVersion(){return e.PeVersion},_init:l});e._init=l;e.isLoaded=w;e.isSupported=g;e.load=E;e.pe=M})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../Extent"],function(r,e,ha,ea,q){function w(x=v){return[x[0],x[1],x[2],x[3]]}function g(x,M){x!==M&&(x[0]=M[0],x[1]=M[1],x[2]=M[2],x[3]=M[3]);
return x}function E(x){return ea.isNone(x)||x[0]>=x[2]?0:x[2]-x[0]}function l(x){return x[1]>=x[3]?0:x[3]-x[1]}function t(x,M,d){return M>=x[0]&&d>=x[1]&&M<=x[2]&&d<=x[3]}function aa(x){return null!=x&&4===x.length}const G=[Infinity,Infinity,-Infinity,-Infinity],v=[0,0,0,0];r.NEGATIVE_INFINITY=G;r.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];r.UNIT=[0,0,1,1];r.ZERO=v;r.allFinite=function(x){for(let M=0;4>M;M++)if(!isFinite(x[M]))return!1;return!0};r.area=function(x){return E(x)*l(x)};
r.center=function(x,M=[0,0]){M[0]=(x[0]+x[2])/2;M[1]=(x[1]+x[3])/2;return M};r.clone=function(x){return[x[0],x[1],x[2],x[3]]};r.contains=function(x,M){return M[0]>=x[0]&&M[2]<=x[2]&&M[1]>=x[1]&&M[3]<=x[3]};r.containsPoint=function(x,M){return t(x,M[0],M[1])};r.containsPointObject=function(x,M){return t(x,M.x,M.y)};r.containsPointWithMargin=function(x,M,d){return M[0]>=x[0]-d&&M[1]>=x[1]-d&&M[0]<=x[2]+d&&M[1]<=x[3]+d};r.containsXY=t;r.copy=g;r.create=w;r.distance=function(x,M){const d=(x[1]+x[3])/
2,p=Math.max(Math.abs(M[0]-(x[0]+x[2])/2)-E(x)/2,0);x=Math.max(Math.abs(M[1]-d)-l(x)/2,0);return Math.sqrt(p*p+x*x)};r.empty=function(x){return x?g(x,G):w(G)};r.equals=function(x,M){return aa(x)&&aa(M)?x[0]===M[0]&&x[1]===M[1]&&x[2]===M[2]&&x[3]===M[3]:x===M};r.expand=function(x,M,d){if(ea.isNone(M))g(d,x);else if("length"in M)if(aa(M))d[0]=Math.min(x[0],M[0]),d[1]=Math.min(x[1],M[1]),d[2]=Math.max(x[2],M[2]),d[3]=Math.max(x[3],M[3]);else{if(2===M.length||3===M.length)d[0]=Math.min(x[0],M[0]),d[1]=
Math.min(x[1],M[1]),d[2]=Math.max(x[2],M[0]),d[3]=Math.max(x[3],M[1])}else switch(M.type){case "extent":d[0]=Math.min(x[0],M.xmin);d[1]=Math.min(x[1],M.ymin);d[2]=Math.max(x[2],M.xmax);d[3]=Math.max(x[3],M.ymax);break;case "point":d[0]=Math.min(x[0],M.x),d[1]=Math.min(x[1],M.y),d[2]=Math.max(x[2],M.x),d[3]=Math.max(x[3],M.y)}};r.expandPointInPlace=function(x,M){M[0]<x[0]&&(x[0]=M[0]);M[0]>x[2]&&(x[2]=M[0]);M[1]<x[1]&&(x[1]=M[1]);M[1]>x[3]&&(x[3]=M[1])};r.expandWithNestedArray=function(x,M,d=x){const p=
M.length;let J=x[0],W=x[1],B=x[2];x=x[3];for(let I=0;I<p;I++){const L=M[I];J=Math.min(J,L[0]);W=Math.min(W,L[1]);B=Math.max(B,L[0]);x=Math.max(x,L[1])}d[0]=J;d[1]=W;d[2]=B;d[3]=x;return d};r.fromExtent=function(x,M=w()){M[0]=x.xmin;M[1]=x.ymin;M[2]=x.xmax;M[3]=x.ymax;return M};r.fromValues=function(x,M,d,p,J=w()){J[0]=x;J[1]=M;J[2]=d;J[3]=p;return J};r.height=l;r.intersection=function(x,M,d){if(ea.isNone(M))return g(d,x);const p=M[0],J=M[1],W=M[2];M=M[3];d[0]=ha.clamp(x[0],p,W);d[1]=ha.clamp(x[1],
J,M);d[2]=ha.clamp(x[2],p,W);d[3]=ha.clamp(x[3],J,M);return d};r.intersects=function(x,M){return Math.max(M[0],x[0])<=Math.min(M[2],x[2])&&Math.max(M[1],x[1])<=Math.min(M[3],x[3])};r.is=aa;r.isPoint=function(x){return(0===E(x)||!isFinite(x[0]))&&(0===l(x)||!isFinite(x[1]))};r.offset=function(x,M,d,p=x){p[0]=x[0]+M;p[1]=x[1]+d;p[2]=x[2]+M;p[3]=x[3]+d;return p};r.pad=function(x,M,d=x){d[0]=x[0]-M;d[1]=x[1]-M;d[2]=x[2]+M;d[3]=x[3]+M;return d};r.setMax=function(x,M,d=x){d[2]=M[0];d[3]=M[1];d!==x&&(d[0]=
x[0],d[1]=x[1]);return x};r.setMin=function(x,M,d=x){d[0]=M[0];d[1]=M[1];d!==x&&(d[2]=x[2],d[3]=x[3]);return d};r.size=function(x,M){M[0]=x[2]-x[0];M[1]=x[3]-x[1]};r.toExtent=function(x,M){return new q({xmin:x[0],ymin:x[1],xmax:x[2],ymax:x[3],spatialReference:M})};r.width=E;Object.defineProperty(r,"__esModule",{value:!0})})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(r,e){const ha=Math.PI/180;var ea=e.earth.radius;const q=e.earth.eccentricitySquared;
ea={a1:ea*q,a2:ea*q*ea*q,a3:ea*q*q/2,a4:ea*q*ea*q*2.5,a5:ea*q+ea*q*q/2,a6:1-q};e={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:e.earth.radius,f:e.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:e.moon.radius,f:e.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:e.mars.radius,f:e.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,
f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,
f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},
104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:e.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};r.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;r.earthEllipsoidConstants=ea;r.spheroids=e;r.toRadians=
ha;Object.defineProperty(r,"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(r){return function(){function e(ea){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(ea&&ea.steps)for(const q of ea.steps)q instanceof r?this.steps.push(q):this.steps.push(new r({wkid:q.wkid,wkt:q.wkt,isInverse:q.isInverse}))}e.cacheKey=function(ea,q){return[void 0!==ea.wkid&&null!==ea.wkid?ea.wkid.toString():
"-1",void 0!==ea.wkt&&null!==ea.wkt?ea.wkt.toString():"",void 0!==q.wkid&&null!==q.wkid?q.wkid.toString():"-1",void 0!==q.wkt&&null!==q.wkt?q.wkt.toString():""].join()};e.fromGE=function(ea){const q=new e;let w="";for(const g of ea.steps)ea=r.fromGE(g),q.steps.push(ea),w+=ea.uid.toString()+",";q._cached_projection={};q._gtlistentry=null;q._chain=w;return q};var ha=e.prototype;ha.getInverse=function(){const ea=new e;ea.steps=[];for(let q=this.steps.length-1;0<=q;q--)ea.steps.push(this.steps[q].getInverse());
return ea};ha.getGTListEntry=function(){let ea="";for(const q of this.steps)ea+=q.uid.toString()+",";ea!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=ea);return this._gtlistentry};ha.assignCachedGe=function(ea,q,w){this._cached_projection[e.cacheKey(ea,q)]=w};ha.getCachedGeTransformation=function(ea,q){let w="";for(const g of this.steps)w+=g.uid.toString()+",";w!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=w);ea=this._cached_projection[e.cacheKey(ea,
q)];return void 0===ea?null:ea};return e}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(r){let e=0;return function(){function ha(ea=null){this.uid=e++;ea?(this._wkt=void 0!==ea.wkt?ea.wkt:null,this._wkid=void 0!==ea.wkid?ea.wkid:-1,this._isInverse=void 0!==ea.isInverse?!0===ea.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}ha.fromGE=function(ea){const q=new ha;q._wkt=ea.wkt;q._wkid=ea.wkid;q._isInverse=
ea.isInverse;return q};ha.prototype.getInverse=function(){const ea=new ha;ea._wkt=this.wkt;ea._wkid=this._wkid;ea._isInverse=!this.isInverse;return ea};r._createClass(ha,[{key:"wkt",get:function(){return this._wkt},set:function(ea){this._wkt=ea;this.uid=e++}},{key:"wkid",get:function(){return this._wkid},set:function(ea){this._wkid=ea;this.uid=e++}},{key:"isInverse",get:function(){return this._isInverse},set:function(ea){this._isInverse=ea;this.uid=e++}}]);return ha}()})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],
function(r){let e=function(g,E,l){this.x=g;this.y=E;this.spatialReference=l;this.m=this.z=void 0},ha=function(g,E,l,t){this.rings=g;this.spatialReference=E;this.hasM=this.hasZ=void 0;l&&(this.hasZ=l);t&&(this.hasM=t)},ea=function(g,E,l,t){this.paths=g;this.spatialReference=E;this.hasM=this.hasZ=void 0;l&&(this.hasZ=l);t&&(this.hasM=t)},q=function(g,E,l,t){this.points=g;this.spatialReference=E;this.hasM=this.hasZ=void 0;l&&(this.hasZ=l);t&&(this.hasM=t)},w=function(g,E,l,t,aa){this.xmin=g;this.ymin=
E;this.xmax=l;this.ymax=t;this.spatialReference=aa;this.mmax=this.mmin=this.zmax=this.zmin=void 0};r.jsonAdapter={convertToGEGeometry:function(g,E){return null==E?null:g.convertJSONToGeometry(E)},exportPoint:function(g,E,l){l=new e(g.getPointX(E),g.getPointY(E),l);const t=g.hasZ(E),aa=g.hasM(E);t&&(l.z=g.getPointZ(E));aa&&(l.m=g.getPointM(E));return l},exportPolygon:function(g,E,l){return new ha(g.exportPaths(E),l,g.hasZ(E),g.hasM(E))},exportPolyline:function(g,E,l){return new ea(g.exportPaths(E),
l,g.hasZ(E),g.hasM(E))},exportMultipoint:function(g,E,l){return new q(g.exportPoints(E),l,g.hasZ(E),g.hasM(E))},exportExtent:function(g,E,l){var t=g.hasZ(E);const aa=g.hasM(E);l=new w(g.getXMin(E),g.getYMin(E),g.getXMax(E),g.getYMax(E),l);t&&(t=g.getZExtent(E),l.zmin=t.vmin,l.zmax=t.vmax);aa&&(g=g.getMExtent(E),l.mmin=g.vmin,l.mmax=g.vmax);return l}};Object.defineProperty(r,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers",
"../../core/maybe"],function(r,e,ha){let ea=function(){function w(g=null,E={},l,t){this.geometry=g;this.attributes=E;this.centroid=l;this.objectId=t;this.geohashY=this.geohashX=this.displayId=0}w.prototype.weakClone=function(){const g=new w(this.geometry,this.attributes,this.centroid,this.objectId);g.displayId=this.displayId;g.geohashX=this.geohashX;g.geohashY=this.geohashY;return g};return w}(),q=function(w){function g(){return w.apply(this,arguments)||this}e._inheritsLoose(g,w);return g}(ea);r.OptimizedFeatureWithGeometry=
q;r["default"]=ea;r.hasGeometry=function(w){return!(ha.isNone(w.geometry)||!w.geometry.coords||!w.geometry.coords.length)};Object.defineProperty(r,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(r){return function(){function e(ea=[],q=[],w=!1){this.lengths=null!=ea?ea:[];this.coords=null!=q?q:[];this.hasIndeterminateRingOrder=w}var ha=e.prototype;ha.forEachVertex=function(ea){let q=0;this.lengths.length||ea(this.coords[0],
this.coords[1]);for(let w=0;w<this.lengths.length;w++){const g=this.lengths[w];for(let E=0;E<g;E++)ea(this.coords[2*(E+q)],this.coords[2*(E+q)+1]);q+=g}};ha.clone=function(ea){return ea?(ea.set(this.coords),new e(this.lengths.slice(),ea,this.hasIndeterminateRingOrder)):new e(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};r._createClass(e,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},{key:"size",
get:function(){return this.lengths.reduce((ea,q)=>ea+q)}}]);return e}()})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter".split(" "),function(r,e,ha,ea,q,w,g,E,l,t){return function(){function aa(v){this.geometryInfo=
v;this._boundsStore=new l.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new ha;this.featureAdapter=t.optimizedFeatureQueryEngineAdapter}var G=aa.prototype;G.add=function(v){this._add(v);this._emitChanged()};G.addMany=function(v){for(const x of v)this._add(x);this._emitChanged()};G.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};G.removeById=function(v){v=this._featuresById.get(v);if(!v)return null;this._remove(v);this._emitChanged();
return v};G.removeManyById=function(v){this._boundsStore.invalidateIndex();for(const x of v)(v=this._featuresById.get(x))&&this._remove(v);this._emitChanged()};G.forEachBounds=function(v,x,M){for(const d of v)(v=this._boundsStore.get(d.objectId))&&x(w.fromRect(M,v))};G.getFeature=function(v){return this._featuresById.get(v)};G.has=function(v){return this._featuresById.has(v)};G.forEach=function(v){this._featuresById.forEach(x=>v(x))};G.forEachInBounds=function(v,x){this._boundsStore.forEachInBounds(v,
M=>{x(this._featuresById.get(M))})};G.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};G.sweep=function(){let v=!1;this._featuresById.forEach((x,M)=>{this._markedIds.has(M)||(v=!0,this._remove(x))});this._markedIds.clear();v&&this._emitChanged()};G._emitChanged=function(){this.events.emit("changed",void 0)};G._add=function(v){if(v){var x=v.objectId;if(null==x)ea.getLogger("esri.layers.graphics.data.FeatureStore").error(new e("featurestore:invalid-feature",
"feature id is missing",{feature:v}));else{var M=this._featuresById.get(x);this._markedIds.add(x);if(M){v.displayId=M.displayId;var d=this._boundsStore.get(x);this._boundsStore.delete(x)}else if(q.isSome(this.onFeatureAdd))this.onFeatureAdd(v);!q.isNone(v.geometry)&&v.geometry.coords&&v.geometry.coords.length?(d=E.getBoundsOptimizedGeometry(q.isSome(d)?d:g.create(),v.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),q.isSome(d)&&this._boundsStore.set(x,d)):this._boundsStore.set(x,null);this._featuresById.set(x,
v)}}};G._remove=function(v){if(q.isSome(this.onFeatureRemove))this.onFeatureRemove(v);this._markedIds.delete(v.objectId);this._boundsStore.delete(v.objectId);this._featuresById.delete(v.objectId);return v};r._createClass(aa,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",
get:function(){if(!this.numFeatures)return null;const v=g.create(g.NEGATIVE_INFINITY);this._featuresById.forEach(x=>{if(x=this._boundsStore.get(x.objectId))v[0]=Math.min(x[0],v[0]),v[1]=Math.min(x[1],v[1]),v[2]=Math.max(x[2],v[2]),v[3]=Math.max(x[3],v[3])});return v}},{key:"storeStatistics",get:function(){let v=0;this._featuresById.forEach(x=>{q.isSome(x.geometry)&&x.geometry.coords&&(v+=x.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:v/(this.hasZ?this.hasM?4:3:
this.hasM?3:2)}}}]);return aa}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(r,e,ha,ea,q){let w=function(){function g(){this._emitter=new g.EventEmitter(this)}var E=g.prototype;E.emit=function(l,t){return this._emitter.emit(l,t)};E.on=function(l,t){return this._emitter.on(l,t)};E.once=function(l,t){return this._emitter.once(l,t)};E.hasEventListener=function(l){return this._emitter.hasEventListener(l)};
return g}();(function(g){let E=function(){function t(G=null){this.target=G;this._listenersMap=null}var aa=t.prototype;aa.clear=function(){this._listenersMap&&this._listenersMap.clear();this._listenersMap=null};aa.emit=function(G,v){G=this._listenersMap&&this._listenersMap.get(G);if(!G)return!1;const x=this.target||this;[...G].forEach(M=>{M.call(x,v)});return 0<G.length};aa.on=function(G,v){if(Array.isArray(G)){var x=G.map(M=>this.on(M,v));return ea.handlesGroup(x)}if(-1<G.indexOf(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");
this._listenersMap||(this._listenersMap=new Map);x=this._listenersMap.get(G)||[];x.push(v);this._listenersMap.set(G,x);return{remove:()=>{const M=this._listenersMap&&this._listenersMap.get(G)||[],d=M.indexOf(v);0<=d&&M.splice(d,1)}}};aa.once=function(G,v){const x=this.on(G,M=>{x.remove();v.call(null,M)});return x};aa.hasEventListener=function(G){G=this._listenersMap&&this._listenersMap.get(G);return null!=G&&0<G.length};return t}();g.EventEmitter=E;g.EventedMixin=t=>{t=function(aa){function G(){var x=
aa.apply(this,arguments)||this;x._emitter=new E;return x}r._inheritsLoose(G,aa);var v=G.prototype;v.destroy=function(){this._emitter.clear()};v.emit=function(x,M){return this._emitter.emit(x,M)};v.on=function(x,M){return this._emitter.on(x,M)};v.once=function(x,M){return this._emitter.once(x,M)};v.hasEventListener=function(x){return this._emitter.hasEventListener(x)};return G}(t);return t=e.__decorate([q.subclass("esri.core.Evented")],t)};let l=function(t){function aa(){var v=t.apply(this,arguments)||
this;v._emitter=new w.EventEmitter(r._assertThisInitialized(v));return v}r._inheritsLoose(aa,t);var G=aa.prototype;G.destroy=function(){this._emitter.clear()};G.emit=function(v,x){return this._emitter.emit(v,x)};G.on=function(v,x){return this._emitter.on(v,x)};G.once=function(v,x){return this._emitter.once(v,x)};G.hasEventListener=function(v){return this._emitter.hasEventListener(v)};return aa}(ha);l=e.__decorate([q.subclass("esri.core.Evented")],l);g.EventedAccessor=l})(w||(w={}));return w})},"esri/geometry/support/aaBoundingBox":function(){define(["exports",
"../../core/maybe","../Extent","./aaBoundingRect"],function(r,e,ha,ea){function q(d=x){return[d[0],d[1],d[2],d[3],d[4],d[5]]}function w(d,p,J,W,B,I,L=q()){L[0]=d;L[1]=p;L[2]=J;L[3]=W;L[4]=B;L[5]=I;return L}function g(d){return d[0]>=d[3]?0:d[3]-d[0]}function E(d){return d[1]>=d[4]?0:d[4]-d[1]}function l(d){return d[2]>=d[5]?0:d[5]-d[2]}function t(d,p){return Math.max(p[0],d[0])<=Math.min(p[3],d[3])&&Math.max(p[1],d[1])<=Math.min(p[4],d[4])&&Math.max(p[2],d[2])<=Math.min(p[5],d[5])}function aa(d,p){d[0]=
p[0];d[1]=p[1];d[2]=p[2];d[3]=p[3];d[4]=p[4];d[5]=p[5];return d}function G(d){return 6===d.length}const v=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],x=[0,0,0,0,0,0],M=q();r.NEGATIVE_INFINITY=v;r.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];r.ZERO=x;r.allFinite=function(d){for(let p=0;6>p;p++)if(!isFinite(d[p]))return!1;return!0};r.center=function(d,p=[0,0,0]){p[0]=d[0]+g(d)/2;p[1]=d[1]+E(d)/2;p[2]=d[2]+l(d)/2;return p};r.contains=function(d,p){return p[0]>=
d[0]&&p[1]>=d[1]&&p[2]>=d[2]&&p[3]<=d[3]&&p[4]<=d[4]&&p[5]<=d[5]};r.containsPoint=function(d,p){return p[0]>=d[0]&&p[1]>=d[1]&&p[2]>=d[2]&&p[0]<=d[3]&&p[1]<=d[4]&&p[2]<=d[5]};r.containsPointWithMargin=function(d,p,J){return p[0]>=d[0]-J&&p[1]>=d[1]-J&&p[2]>=d[2]-J&&p[0]<=d[3]+J&&p[1]<=d[4]+J&&p[2]<=d[5]+J};r.create=q;r.depth=E;r.diameter=function(d){const p=g(d),J=l(d);d=E(d);return Math.sqrt(p*p+J*J+d*d)};r.empty=function(d){return d?aa(d,v):q(v)};r.equals=function(d,p,J){if(e.isNone(d)||e.isNone(p))return d===
p;if(!G(d)||!G(p))return!1;if(J)for(let W=0;W<d.length;W++){if(!J(d[W],p[W]))return!1}else for(J=0;J<d.length;J++)if(d[J]!==p[J])return!1;return!0};r.expandWithAABB=function(d,p){d[0]=Math.min(d[0],p[0]);d[1]=Math.min(d[1],p[1]);d[2]=Math.min(d[2],p[2]);d[3]=Math.max(d[3],p[3]);d[4]=Math.max(d[4],p[4]);d[5]=Math.max(d[5],p[5])};r.expandWithBuffer=function(d,p,J=0,W=p.length/3){let B=d[0],I=d[1],L=d[2],Y=d[3],ia=d[4],fa=d[5];for(let ka=0;ka<W;ka++)B=Math.min(B,p[J+3*ka]),I=Math.min(I,p[J+3*ka+1]),
L=Math.min(L,p[J+3*ka+2]),Y=Math.max(Y,p[J+3*ka]),ia=Math.max(ia,p[J+3*ka+1]),fa=Math.max(fa,p[J+3*ka+2]);d[0]=B;d[1]=I;d[2]=L;d[3]=Y;d[4]=ia;d[5]=fa};r.expandWithNestedArray=function(d,p,J){const W=p.length;let B=d[0],I=d[1],L=d[2],Y=d[3],ia=d[4],fa=d[5];if(J)for(J=0;J<W;J++){var ka=p[J];B=Math.min(B,ka[0]);I=Math.min(I,ka[1]);L=Math.min(L,ka[2]);Y=Math.max(Y,ka[0]);ia=Math.max(ia,ka[1]);fa=Math.max(fa,ka[2])}else for(J=0;J<W;J++)ka=p[J],B=Math.min(B,ka[0]),I=Math.min(I,ka[1]),Y=Math.max(Y,ka[0]),
ia=Math.max(ia,ka[1]);d[0]=B;d[1]=I;d[2]=L;d[3]=Y;d[4]=ia;d[5]=fa};r.expandWithOffset=function(d,p,J,W){d[0]=Math.min(d[0],d[0]+p);d[3]=Math.max(d[3],d[3]+p);d[1]=Math.min(d[1],d[1]+J);d[4]=Math.max(d[4],d[4]+J);d[2]=Math.min(d[2],d[2]+W);d[5]=Math.max(d[5],d[5]+W)};r.expandWithRect=function(d,p){d[0]=Math.min(d[0],p[0]);d[1]=Math.min(d[1],p[1]);d[3]=Math.max(d[3],p[2]);d[4]=Math.max(d[4],p[3])};r.expandWithVec3=function(d,p){d[0]=Math.min(d[0],p[0]);d[1]=Math.min(d[1],p[1]);d[2]=Math.min(d[2],p[2]);
d[3]=Math.max(d[3],p[0]);d[4]=Math.max(d[4],p[1]);d[5]=Math.max(d[5],p[2])};r.fromExtent=function(d,p=q()){p[0]=d.xmin;p[1]=d.ymin;p[2]=d.zmin;p[3]=d.xmax;p[4]=d.ymax;p[5]=d.zmax;return p};r.fromMinMax=function(d,p,J=q()){J[0]=d[0];J[1]=d[1];J[2]=d[2];J[3]=p[0];J[4]=p[1];J[5]=p[2];return J};r.fromRect=function(d,p){d[0]=p[0];d[1]=p[1];d[2]=Number.NEGATIVE_INFINITY;d[3]=p[2];d[4]=p[3];d[5]=Number.POSITIVE_INFINITY;return d};r.fromValues=w;r.getMax=function(d,p){p[0]=d[3];p[1]=d[4];p[2]=d[5];return p};
r.getMin=function(d,p){p[0]=d[0];p[1]=d[1];p[2]=d[2];return p};r.height=l;r.intersects=t;r.intersectsClippingArea=function(d,p){return e.isNone(p)?!0:t(d,p)};r.is=G;r.isPoint=function(d){return 0===g(d)&&0===E(d)&&0===l(d)};r.maximumDimension=function(d){return Math.max(g(d),l(d),E(d))};r.offset=function(d,p,J,W,B=d){B[0]=d[0]+p;B[1]=d[1]+J;B[2]=d[2]+W;B[3]=d[3]+p;B[4]=d[4]+J;B[5]=d[5]+W;return B};r.scale=function(d,p,J=d){const W=d[0]+g(d)/2,B=d[1]+E(d)/2,I=d[2]+l(d)/2;J[0]=W+(d[0]-W)*p;J[1]=B+(d[1]-
B)*p;J[2]=I+(d[2]-I)*p;J[3]=W+(d[3]-W)*p;J[4]=B+(d[4]-B)*p;J[5]=I+(d[5]-I)*p;return J};r.set=aa;r.setMax=function(d,p,J=d){J[3]=p[0];J[4]=p[1];J[5]=p[2];J!==d&&(J[0]=d[0],J[1]=d[1],J[2]=d[2]);return d};r.setMin=function(d,p,J=d){J[0]=p[0];J[1]=p[1];J[2]=p[2];J!==d&&(J[3]=d[3],J[4]=d[4],J[5]=d[5]);return J};r.size=function(d,p=[0,0,0]){p[0]=g(d);p[1]=E(d);p[2]=l(d);return p};r.toExtent=function(d,p){return isFinite(d[2])||isFinite(d[5])?new ha({xmin:d[0],xmax:d[3],ymin:d[1],ymax:d[4],zmin:d[2],zmax:d[5],
spatialReference:p}):new ha({xmin:d[0],xmax:d[3],ymin:d[1],ymax:d[4],spatialReference:p})};r.toRect=function(d,p){p||(p=ea.create());p[0]=d[0];p[1]=d[1];p[2]=d[3];p[3]=d[4];return p};r.width=g;r.wrap=function(d,p,J,W,B,I){return w(d,p,J,W,B,I,M)};Object.defineProperty(r,"__esModule",{value:!0})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),
function(r,e,ha,ea,q,w,g,E){function l(f,u){return f?u?4:3:u?3:2}function t(f,u,N,P){if(f){if(N)return u&&P?c:Sa;if(u&&P)return Ta}else if(u&&P)return Sa;return Ca}function aa({scale:f,translate:u},N){return Math.round((N-u[0])/f[0])}function G({scale:f,translate:u},N){return Math.round((u[1]-N)/f[1])}function v({scale:f,translate:u},N){return N*f[0]+u[0]}function x({scale:f,translate:u},N){return u[1]-N*f[1]}function M(f){f=f.coords;return{x:f[0],y:f[1]}}function d(f,u){f.coords[0]=u.x;f.coords[1]=
u.y;return f}function p(f){f=f.coords;return{x:f[0],y:f[1],z:f[2]}}function J(f,u){f.coords[0]=u.x;f.coords[1]=u.y;f.coords[2]=u.z;return f}function W(f){f=f.coords;return{x:f[0],y:f[1],m:f[2]}}function B(f,u){f.coords[0]=u.x;f.coords[1]=u.y;f.coords[2]=u.m;return f}function I(f){f=f.coords;return{x:f[0],y:f[1],z:f[2],m:f[3]}}function L(f,u){f.coords[0]=u.x;f.coords[1]=u.y;f.coords[2]=u.z;f.coords[3]=u.m;return f}function Y(f,u){return f&&u?L:f?J:u?B:d}function ia(f,u,N,P,ca){N=Y(N,P);for(const Z of u){const {geometry:y,
attributes:F}=Z;let X;y&&(X=N(new E,y));f.push(new w["default"](X,F,null,F[ca]))}return f}function fa(f,u,N,P){for(const ca of u){const {geometry:Z,attributes:y}=ca;let F;Z&&(F=ka(Z,N,P));f.push({attributes:y,geometry:F})}return f}function ka(f,u,N){if(ea.isNone(f))return null;const P=l(u,N),ca=[];for(let Z=0;Z<f.coords.length;Z+=P){const y=[];for(let F=0;F<P;F++)y.push(f.coords[Z+F]);ca.push(y)}return u?N?{points:ca,hasZ:u,hasM:N}:{points:ca,hasZ:u}:N?{points:ca,hasM:N}:{points:ca}}function H(f,
u,N,P,ca){N=l(N,P);for(const Z of u){u=Z.geometry;P=Z.attributes;let y;u&&(y=K(new E,u,N));f.push(new w["default"](y,P,null,P[ca]))}return f}function K(f,u,N=l(u.hasZ,u.hasM)){f.lengths[0]=u.points.length;const P=f.coords;let ca=0;for(const Z of u.points)for(u=0;u<N;u++)P[ca++]=Z[u];return f}function Q(f,u,N){if(!f)return null;const P=l(u,N),{coords:ca,lengths:Z}=f;f=[];let y=0;for(const F of Z){const X=[];for(let ma=0;ma<F;ma++){const na=[];for(let sa=0;sa<P;sa++)na.push(ca[y++]);X.push(na)}f.push(X)}return u?
N?{paths:f,hasZ:u,hasM:N}:{paths:f,hasZ:u}:N?{paths:f,hasM:N}:{paths:f}}function T(f,u,N,P,ca){N=l(N,P);for(const Z of u){u=Z.geometry;P=Z.attributes;let y;u&&(y=n(new E,u,N));f.push(new w["default"](y,P,null,P[ca]))}return f}function n(f,u,N=l(u.hasZ,u.hasM)){const {lengths:P,coords:ca}=f;let Z=0;for(const y of u.paths){for(const F of y)for(u=0;u<N;u++)ca[Z++]=F[u];P.push(y.length)}return f}function m(f,u,N){if(!f)return null;const P=l(u,N),{coords:ca,lengths:Z}=f;f=[];let y=0;for(const F of Z){const X=
[];for(let ma=0;ma<F;ma++){const na=[];for(let sa=0;sa<P;sa++)na.push(ca[y++]);X.push(na)}f.push(X)}return u?N?{rings:f,hasZ:u,hasM:N}:{rings:f,hasZ:u}:N?{rings:f,hasM:N}:{rings:f}}function D(f,u,N,P,ca){for(const Z of u){u=Z.geometry;const y=Z.centroid,F=Z.attributes;let X;u&&(X=A(new E,u,N,P));ea.isSome(y)?f.push(new w["default"](X,F,d(new E,y),F[ca])):f.push(new w["default"](X,F,null,F[ca]))}return f}function A(f,u,N=u.hasZ,P=u.hasM){O(f,u.rings,N,P);return f}function O(f,u,N,P){N=l(N,P);const {lengths:ca,
coords:Z}=f;P=0;ca.length=Z.length=0;for(const y of u){for(const F of y)for(u=0;u<N;u++)Z[P++]=F[u];ca.push(y.length)}return f}function S(f,u,N,P,ca,Z){f.length=0;if(!N){for(const y of u)f.push(new w["default"](null,y.attributes,null,y.attributes[Z]));return f}switch(N){case "esriGeometryPoint":return ia(f,u,P,ca,Z);case "esriGeometryMultipoint":return H(f,u,P,ca,Z);case "esriGeometryPolyline":return T(f,u,P,ca,Z);case "esriGeometryPolygon":return D(f,u,P,ca,Z);default:Ra.error("convertToFeatureSet:unknown-geometry",
new e(`Unable to parse unknown geometry type '${N}'`)),f.length=0}return f}function ja(f,u,N,P){f=f&&("coords"in f?f:f.geometry);if(ea.isNone(f))return null;switch(u){case "esriGeometryPoint":return u=M,N&&P?u=I:N?u=p:P&&(u=W),u(f);case "esriGeometryMultipoint":return ka(f,N,P);case "esriGeometryPolyline":return Q(f,N,P);case "esriGeometryPolygon":return m(f,N,P);default:Ra.error("convertToGeometry:unknown-geometry",new e(`Unable to parse unknown geometry type '${u}'`))}}function pa(f,u,N,P,ca){f.length=
0;if(ea.isNone(N)){for(const F of u)f.push({attributes:F.attributes});return f}switch(N){case "esriGeometryPoint":var Z=M;P&&ca?Z=I:P?Z=p:ca&&(Z=W);for(var y of u){const {geometry:F,attributes:X}=y;P=ea.isSome(F)?Z(F):null;f.push({attributes:X,geometry:P})}break;case "esriGeometryMultipoint":return fa(f,u,P,ca);case "esriGeometryPolyline":for(const F of u){const {geometry:X,attributes:ma}=F;let na;ea.isSome(X)&&(na=Q(X,P,ca));f.push({attributes:ma,geometry:na})}break;case "esriGeometryPolygon":for(Z of u){const {geometry:F,
attributes:X,centroid:ma}=Z;let na;ea.isSome(F)&&(na=m(F,P,ca));ma?(y=M(ma),f.push({attributes:X,centroid:y,geometry:na})):f.push({attributes:X,geometry:na})}break;default:Ra.error("convertToFeatureSet:unknown-geometry",new e(`Unable to parse unknown geometry type '${N}'`))}return f}function ua(f,u,N,P,ca,Z,y=N,F=P){f.lengths.length&&(f.lengths.length=0);f.coords.length&&(f.coords.length=0);if(ea.isNone(u)||!u.coords.length)return null;ca=Ka[ca];const {coords:X,lengths:ma}=u;u=l(N,P);const na=l(N&&
y,P&&F);N=t(N,P,y,F);if(!ma.length)return N(f.coords,X,0,0,aa(Z,X[0]),G(Z,X[1])),f.lengths.length&&(f.lengths.length=0),f.coords.length=u,f;let sa,wa=0,ya,Ja=0;for(const Ga of ma){if(Ga<ca)continue;let Fa=0;ya=Ja;F=P=aa(Z,X[wa]);sa=y=G(Z,X[wa+1]);N(f.coords,X,ya,wa,F,sa);Fa++;wa+=u;ya+=na;for(let Aa=1;Aa<Ga;Aa++,wa+=u)if(F=aa(Z,X[wa]),sa=G(Z,X[wa+1]),F!==P||sa!==y)N(f.coords,X,ya,wa,F-P,sa-y),ya+=na,Fa++,P=F,y=sa;Fa>=ca&&(f.lengths.push(Fa),Ja=ya)}f.coords.length=Ja;return f.coords.length?f:null}
function ta(f,u,N,P,ca,Z,y){let F=P,X=0;for(let na=Z+N;na<y;na+=N){{var ma=u[na];const sa=u[na+1],wa=u[y],ya=u[y+1];let Ja=u[Z],Ga=u[Z+1],Fa=wa-Ja,Aa=ya-Ga;if(0!==Fa||0!==Aa){const Ea=((ma-Ja)*Fa+(sa-Ga)*Aa)/(Fa*Fa+Aa*Aa);1<Ea?(Ja=wa,Ga=ya):0<Ea&&(Ja+=Fa*Ea,Ga+=Aa*Ea)}Fa=ma-Ja;Aa=sa-Ga;ma=Fa*Fa+Aa*Aa}ma>F&&(X=na,F=ma)}F>P&&(X-Z>N&&ta(f,u,N,P,ca,Z,X),ca(f,u,f.length,X,u[X],u[X+1]),y-X>N&&ta(f,u,N,P,ca,X,y))}function za(f,u,N,P,ca){const {coords:Z,lengths:y}=u,F=N?P?c:Sa:P?Sa:Ca;N=l(N,P);if(!Z.length)return f!==
u&&(f.lengths.length=0,f.coords.length=0),f;if(!y.length)return F(f.coords,Z,0,0,v(ca,Z[0]),x(ca,Z[1])),f!==u&&(f.lengths.length=0,f.coords.length=N),f;const [X,ma]=ca.scale;P=0;for(let na=0;na<y.length;na++){const sa=y[na];f.lengths[na]=sa;let wa=v(ca,Z[P]),ya=x(ca,Z[P+1]);F(f.coords,Z,P,P,wa,ya);P+=N;for(let Ja=1;Ja<sa;Ja++,P+=N)wa+=Z[P]*X,ya-=Z[P+1]*ma,F(f.coords,Z,P,P,wa,ya)}f!==u&&(f.lengths.length=y.length,f.coords.length=Z.length);return f}function Da(f,u,N,P){let ca=0,Z=f[P*u],y=f[P*(u+1)];
for(let F=1;F<N;F++){const X=Z+f[P*(u+F)],ma=y+f[P*(u+F)+1],na=(X-Z)*(ma+y);Z=X;y=ma;ca+=na}return.5*ca}const Ra=ha.getLogger("esri.tasks.support.optimizedFeatureSet"),Ka={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},Ca=(f,u,N,P,ca,Z)=>{f[N]=ca;f[N+1]=Z},Sa=(f,u,N,P,ca,Z)=>{f[N]=ca;f[N+1]=Z;f[N+2]=u[P+2]},Ta=(f,u,N,P,ca,Z)=>{f[N]=ca;f[N+1]=Z;f[N+2]=u[P+3]},c=(f,u,N,P,ca,Z)=>{f[N]=ca;f[N+1]=Z;f[N+2]=u[P+2];f[N+3]=u[P+3]},k=[],R=[];r.convertFromFeature=
function(f,u,N,P,ca){k[0]=f;[f]=S(R,k,u,N,P,ca);k.length=R.length=0;return f};r.convertFromFeatureSet=function(f,u){const N=new g,{hasM:P,hasZ:ca,features:Z,objectIdFieldName:y,spatialReference:F,geometryType:X,exceededTransferLimit:ma,transform:na,fields:sa}=f;sa&&(N.fields=sa);N.geometryType=X;N.objectIdFieldName=y||u;N.spatialReference=F;if(!N.objectIdFieldName)return Ra.error(new e("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),N;Z&&S(N.features,Z,X,ca,P,N.objectIdFieldName);
ma&&(N.exceededTransferLimit=ma);P&&(N.hasM=P);ca&&(N.hasZ=ca);na&&(N.transform=na);return N};r.convertFromFeatures=S;r.convertFromGeometry=function(f,u,N){if(ea.isNone(f))return null;const P=new E;"hasZ"in f&&null==u&&(u=f.hasZ);"hasM"in f&&null==N&&(N=f.hasM);if(q.isPoint(f))return Y(null!=u?u:null!=f.z,null!=N?N:null!=f.m)(P,f);if(q.isPolygon(f))return A(P,f,u,N);if(q.isPolyline(f))return n(P,f,l(u,N));if(q.isMultipoint(f))return K(P,f,l(u,N));Ra.error("convertFromGeometry:unknown-geometry",new e(`Unable to parse unknown geometry type '${f}'`))};
r.convertFromGraphics=function(f,u,N,P,ca,Z){const y=f.length;switch(N){case "esriGeometryPoint":ia(f,u,P,ca,Z);break;case "esriGeometryMultipoint":H(f,u,P,ca,Z);break;case "esriGeometryPolyline":T(f,u,P,ca,Z);break;case "esriGeometryPolygon":D(f,u,P,ca,Z);break;default:Ra.error("convertToFeatureSet:unknown-geometry",new e(`Unable to parse unknown geometry type '${N}'`))}for(P=0;P<u.length;P++)f[P+y].geometryType=N,f[P+y].insertAfter=u[P].insertAfter,f[P+y].groupId=u[P].groupId;return f};r.convertFromMultipoint=
K;r.convertFromMultipointFeatures=H;r.convertFromNestedArray=O;r.convertFromPoint=function(f,u,N=Y(null!=u.z,null!=u.m)){return N(f,u)};r.convertFromPointFeatures=ia;r.convertFromPolygon=A;r.convertFromPolyline=n;r.convertFromPolylineFeatures=T;r.convertToFeature=function(f,u,N,P){R[0]=f;pa(k,R,u,N,P);f=k[0];k.length=R.length=0;return f};r.convertToFeatureSet=function(f){const {objectIdFieldName:u,spatialReference:N,transform:P,fields:ca,hasM:Z,hasZ:y,features:F,geometryType:X,exceededTransferLimit:ma,
uniqueIdField:na,queryGeometry:sa,queryGeometryType:wa}=f;f=pa([],F,X,y,Z);const ya=ja(sa,wa,!1,!1);f={features:f,fields:ca,geometryType:X,objectIdFieldName:u,spatialReference:N,uniqueIdField:na,queryGeometry:ya};P&&(f.transform=P);ma&&(f.exceededTransferLimit=ma);Z&&(f.hasM=Z);y&&(f.hasZ=y);return f};r.convertToFeatures=pa;r.convertToGeometry=ja;r.convertToMultipoint=ka;r.convertToMultipointFeatures=fa;r.convertToPoint=function(f,u,N){return f?u?N?I(f):p(f):N?W(f):M(f):null};r.convertToPolygon=m;
r.convertToPolyline=Q;r.deltaDecodeGeometry=function(f,u){if(ea.isNone(f))return null;const N=f.clone(),P=f.coords;f=f.lengths;let ca=0;for(let F=0;F<f.length;F++){const X=f[F];var Z=P[u*ca],y=P[u*ca+1];for(let ma=1;ma<X;ma++)Z+=P[u*(ca+ma)],y+=P[u*(ca+ma)+1],N.coords[u*(ca+ma)]=Z,N.coords[u*(ca+ma)+1]=y;ca+=X}return N};r.deltaEncodeGeometry=function(f,u){const N=f.clone(),P=f.coords;f=f.lengths;let ca=0;for(let y=0;y<f.length;y++){const F=f[y];let X=P[u*ca];var Z=P[u*ca+1];for(let ma=1;ma<F;ma++){const na=
P[u*(ca+ma)],sa=P[u*(ca+ma)+1];Z=sa-Z;N.coords[u*(ca+ma)]=na-X;N.coords[u*(ca+ma)+1]=Z;X=na;Z=sa}ca+=F}return N};r.generalizeOptimizedGeometry=function(f,u,N,P,ca,Z,y=N,F=P){f.lengths.length&&(f.lengths.length=0);f.coords.length&&(f.coords.length=0);if(!u||!u.coords.length)return null;ca=Ka[ca];const {coords:X,lengths:ma}=u;u=l(N,P);const na=l(N&&y,P&&F);N=t(N,P,y,F);if(!ma.length)return N(f.coords,X,0,0,X[0],X[1]),f.lengths.length&&(f.lengths.length=0),f.coords.length=u,f;P=0;Z*=Z;for(const sa of ma){if(sa<
ca){P+=sa*u;continue}y=f.coords.length/na;F=P;const wa=P+(sa-1)*u;N(f.coords,X,f.coords.length,F,X[F],X[F+1]);ta(f.coords,X,u,Z,N,F,wa);N(f.coords,X,f.coords.length,wa,X[wa],X[wa+1]);F=f.coords.length/na-y;F>=ca?f.lengths.push(F):f.coords.length=y*na;P+=sa*u}return f.coords.length?f:null};r.getBoundsOptimizedGeometry=function(f,u,N,P){if(ea.isNone(u)||!u.coords||!u.coords.length)return null;N=l(N,P);let ca=P=Number.POSITIVE_INFINITY,Z=Number.NEGATIVE_INFINITY,y=Number.NEGATIVE_INFINITY;if(u&&u.coords){u=
u.coords;for(let F=0;F<u.length;F+=N){const X=u[F],ma=u[F+1];P=Math.min(P,X);Z=Math.max(Z,X);ca=Math.min(ca,ma);y=Math.max(y,ma)}}f[0]=P;f[1]=ca;f[2]=Z;f[3]=y;return f};r.getQuantizedArea=function(f,u){const {coords:N,lengths:P}=f;let ca=f=0;for(let Z=0;Z<P.length;Z++)ca+=Da(N,f,P[Z],u),f+=Z;return Math.abs(ca)};r.getQuantizedBoundsOptimizedGeometry=function(f,u,N,P){N=l(N,P);const {lengths:ca,coords:Z}=u;P=u=Number.POSITIVE_INFINITY;let y=Number.NEGATIVE_INFINITY,F=Number.NEGATIVE_INFINITY,X=0;for(const ma of ca){let na=
Z[X],sa=Z[X+1];u=Math.min(na,u);P=Math.min(sa,P);y=Math.max(na,y);F=Math.max(sa,F);X+=N;for(let wa=1;wa<ma;wa++,X+=N){const ya=Z[X],Ja=Z[X+1];na+=ya;sa+=Ja;0>ya&&(u=Math.min(u,na));0<ya&&(y=Math.max(y,na));0>Ja?P=Math.min(P,sa):0<Ja&&(F=Math.max(F,sa))}}f[0]=u;f[1]=P;f[2]=y;f[3]=F;return f};r.getSignedQuantizedRingArea=Da;r.quantizeOptimizedFeatureSet=function(f,u){const {geometryType:N,features:P,hasM:ca,hasZ:Z}=u;if(!f)return u;for(let y=0;y<P.length;y++){const F=P[y],X=F.weakClone();X.geometry=
new E;ua(X.geometry,F.geometry,ca,Z,N,f);F.centroid&&(X.centroid=new E,ua(X.centroid,F.centroid,ca,Z,"esriGeometryPoint",f));P[y]=X}u.transform=f;return u};r.quantizeOptimizedGeometry=ua;r.quantizeX=aa;r.quantizeY=G;r.removeCollinearVectices=function(f,u,N,P,ca){if(!u||!u.coords||!u.coords.length)return null;N=Ka[N];const {coords:Z,lengths:y}=u;u=t(P,ca,P,ca);P=l(P,ca);let F=ca=0,X=0,ma=0;for(const wa of y){F=ma;u(f.coords,Z,F,ca,Z[ca],Z[ca+1]);ca+=P;var na=Z[ca];let ya=Z[ca+1],Ja=na,Ga=ya;var sa=
ya/na;F+=P;u(f.coords,Z,F,ca,Ja,Ga);ca+=P;for(let Fa=2;Fa<wa;Fa++){na=Z[ca];ya=Z[ca+1];const Aa=ya/na,Ea=sa===Aa||!isFinite(sa)&&!isFinite(Aa);sa=Ea&&isFinite(Aa)?0<=sa&&0<=Aa||0>=sa&&0>=Aa:0<=Ga&&0<=ya||0>=Ga&&0>=ya;Ea&&sa?(Ja+=na,Ga+=ya):(Ja=na,Ga=ya,F+=P);u(f.coords,Z,F,ca,Ja,Ga);ca+=P;sa=Aa}F+=P;na=(F-ma)/P;na>=N&&(f.lengths[X]=na,ma=F,X++)}f.coords.length>ma&&(f.coords.length=ma);f.lengths.length>X&&(f.lengths.length=X);return f.coords.length&&f.lengths.length?f:null};r.removeZMValues=function(f,
u,N,P,ca,Z){const y=l(N,P);N=t(N,P,ca,Z);P=u.coords;f.coords.length=0;f.lengths.length=0;f.lengths.push(...u.lengths);for(u=0;u<P.length;u+=y)N(f.coords,P,f.coords.length,u,P[u],P[u+1]);return f};r.unquantizeOptimizedFeatureSet=function(f){const {transform:u,features:N,hasM:P,hasZ:ca}=f;if(!u)return f;for(const Z of N)ea.isSome(Z.geometry)&&za(Z.geometry,Z.geometry,P,ca,u),Z.centroid&&za(Z.centroid,Z.centroid,P,ca,u);f.transform=null;return f};r.unquantizeOptimizedGeometry=za;r.unquantizeX=v;r.unquantizeY=
x;Object.defineProperty(r,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function r(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}r.prototype.weakClone=function(){const e=
new r;e.objectIdFieldName=this.objectIdFieldName;e.globalIdFieldName=this.globalIdFieldName;e.geohashFieldName=this.geohashFieldName;e.geometryProperties=this.geometryProperties;e.geometryType=this.geometryType;e.spatialReference=this.spatialReference;e.hasZ=this.hasZ;e.hasM=this.hasM;e.features=this.features;e.fields=this.fields;e.transform=this.transform;e.exceededTransferLimit=this.exceededTransferLimit;e.uniqueIdField=this.uniqueIdField;e.queryGeometry=this.queryGeometry;e.queryGeometryType=this.queryGeometryType;
return e};return r}()})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../core/has","../../../core/libs/rbush/PooledRBush"],function(r,e,ha){function ea(g,E,l){q.minX=E[0];q.minY=E[1];q.maxX=E[2];q.maxY=E[3];g.search(q,l)}const q={minX:0,minY:0,maxX:0,maxY:0};let w=function(){function g(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new ha.PooledRBush(9,e("csp-restrictions")?l=>({minX:l[0],minY:l[1],maxX:l[2],
maxY:l[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const l=Array(this._idByBounds.size);let t=0;this._idByBounds.forEach((aa,G)=>{l[t++]=G});this._indexInvalid=!1;this._index.clear();this._index.load(l)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(l=>this._idByBounds.has(l))),this._boundsToLoad.length=0)}}var E=g.prototype;E.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();
this._index.clear()};E.delete=function(l){const t=this._boundsById.get(l);this._boundsById.delete(l);t&&(this._idByBounds.delete(t),this._indexInvalid||this._index.remove(t))};E.forEachInBounds=function(l,t){this._loadIndex();ea(this._index,l,aa=>t(this._idByBounds.get(aa)))};E.get=function(l){return this._boundsById.get(l)};E.has=function(l){return this._boundsById.has(l)};E.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};E.set=function(l,t){if(!this._indexInvalid){const aa=
this._boundsById.get(l);aa&&(this._index.remove(aa),this._idByBounds.delete(aa))}this._boundsById.set(l,t);t&&(this._idByBounds.set(t,l),this._indexInvalid||(this._boundsToLoad.push(t),5E4<this._boundsToLoad.length&&this._loadIndex()))};return g}();r.BoundsStore=w;Object.defineProperty(r,"__esModule",{value:!0})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),
function(r,e,ha,ea,q,w){function g(fa,ka){E(fa,0,fa.children.length,ka,fa)}function E(fa,ka,H,K,Q){Q||(Q=new Y([]));Q.minX=Infinity;Q.minY=Infinity;Q.maxX=-Infinity;Q.maxY=-Infinity;for(let T=ka,n;T<H;T++)n=fa.children[T],l(Q,fa.leaf?K(n):n);return Q}function l(fa,ka){fa.minX=Math.min(fa.minX,ka.minX);fa.minY=Math.min(fa.minY,ka.minY);fa.maxX=Math.max(fa.maxX,ka.maxX);fa.maxY=Math.max(fa.maxY,ka.maxY)}function t(fa,ka){return fa.minX-ka.minX}function aa(fa,ka){return fa.minY-ka.minY}function G(fa){return(fa.maxX-
fa.minX)*(fa.maxY-fa.minY)}function v(fa){return fa.maxX-fa.minX+(fa.maxY-fa.minY)}function x(fa,ka){return fa.minX<=ka.minX&&fa.minY<=ka.minY&&ka.maxX<=fa.maxX&&ka.maxY<=fa.maxY}function M(fa,ka){return ka.minX<=fa.maxX&&ka.minY<=fa.maxY&&ka.maxX>=fa.minX&&ka.maxY>=fa.minY}function d(fa,ka,H,K,Q){for(ka=[ka,H];ka.length;){H=ea.assumeNonNull(ka.pop());const T=ea.assumeNonNull(ka.pop());if(H-T<=K)continue;const n=T+Math.ceil((H-T)/K/2)*K;w.quickselect(fa,n,T,H,Q);ka.push(T,n,n,H)}}let p=function(){function fa(H=
9,K){this.compareMinX=t;this.compareMinY=aa;this.toBBox=function(Q){return Q};this._maxEntries=Math.max(4,H||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));K&&("function"===typeof K?this.toBBox=K:this._initFormat(K));this.clear()}var ka=fa.prototype;ka.destroy=function(){this.clear();J.prune();W.prune();B.prune();I.prune()};ka.all=function(H){this._all(this.data,H)};ka.search=function(H,K){let Q=this.data;const T=this.toBBox;if(M(H,Q))for(J.clear();Q;){for(let n=0,m=Q.children.length;n<
m;n++){const D=Q.children[n],A=Q.leaf?T(D):D;M(H,A)&&(Q.leaf?K(D):x(H,A)?this._all(D,K):J.push(D))}Q=J.pop()}};ka.collides=function(H){let K=this.data;const Q=this.toBBox;if(!M(H,K))return!1;for(J.clear();K;){for(let T=0,n=K.children.length;T<n;T++){const m=K.children[T],D=K.leaf?Q(m):m;if(M(H,D)){if(K.leaf||x(H,D))return!0;J.push(m)}}K=J.pop()}return!1};ka.load=function(H){if(!H.length)return this;if(H.length<this._minEntries){for(let K=0,Q=H.length;K<Q;K++)this.insert(H[K]);return this}H=this._build(H.slice(0,
H.length),0,H.length-1,0);if(this.data.children.length)if(this.data.height===H.height)this._splitRoot(this.data,H);else{if(this.data.height<H.height){const K=this.data;this.data=H;H=K}this._insert(H,this.data.height-H.height-1,!0)}else this.data=H;return this};ka.insert=function(H){H&&this._insert(H,this.data.height-1);return this};ka.clear=function(){this.data=new Y([]);return this};ka.remove=function(H){if(!H)return this;let K=this.data,Q=null,T=0,n=!1,m;const D=this.toBBox(H);B.clear();for(I.clear();K||
0<B.length;){if(!K){var A;K=ea.assumeNonNull(B.pop());Q=B.data[B.length-1];T=null!=(A=I.pop())?A:0;n=!0}if(K.leaf&&(m=ha.indexOf(K.children,H,K.children.length,K.indexHint),-1!==m)){K.children.splice(m,1);B.push(K);this._condense(B);break}n||K.leaf||!x(K,D)?Q?(T++,K=Q.children[T],n=!1):K=null:(B.push(K),I.push(T),T=0,Q=K,K=K.children[0])}return this};ka.toJSON=function(){return this.data};ka.fromJSON=function(H){this.data=H;return this};ka._all=function(H,K){for(W.clear();H;){var Q;if(!0===H.leaf)for(const T of H.children)K(T);
else W.pushArray(H.children);H=null!=(Q=W.pop())?Q:null}};ka._build=function(H,K,Q,T){var n=Q-K+1,m=this._maxEntries;if(n<=m)return H=new Y(H.slice(K,Q+1)),g(H,this.toBBox),H;T||(T=Math.ceil(Math.log(n)/Math.log(m)),m=Math.ceil(n/m**(T-1)));const D=new ia([]);D.height=T;n=Math.ceil(n/m);m=n*Math.ceil(Math.sqrt(m));for(d(H,K,Q,m,this.compareMinX);K<=Q;K+=m){const A=Math.min(K+m-1,Q);d(H,K,A,n,this.compareMinY);for(let O=K;O<=A;O+=n)D.children.push(this._build(H,O,Math.min(O+n-1,A),T-1))}g(D,this.toBBox);
return D};ka._chooseSubtree=function(H,K,Q,T){for(;;){T.push(K);if(!0===K.leaf||T.length-1===Q)break;let n=Infinity,m=Infinity,D=void 0;for(let A=0,O=K.children.length;A<O;A++){const S=K.children[A],ja=G(S),pa=(Math.max(S.maxX,H.maxX)-Math.min(S.minX,H.minX))*(Math.max(S.maxY,H.maxY)-Math.min(S.minY,H.minY))-ja;pa<m?(m=pa,n=ja<n?ja:n,D=S):pa===m&&ja<n&&(n=ja,D=S)}K=D||K.children[0]}return K};ka._insert=function(H,K,Q){var T=this.toBBox;Q=Q?H:T(H);B.clear();T=this._chooseSubtree(Q,this.data,K,B);T.children.push(H);
for(l(T,Q);0<=K;)if(B.data[K].children.length>this._maxEntries)this._split(B,K),K--;else break;this._adjustParentBBoxes(Q,B,K)};ka._split=function(H,K){const Q=H.data[K];var T=Q.children.length;const n=this._minEntries;this._chooseSplitAxis(Q,n,T);(T=this._chooseSplitIndex(Q,n,T))?(T=Q.children.splice(T,Q.children.length-T),T=Q.leaf?new Y(T):new ia(T),T.height=Q.height,g(Q,this.toBBox),g(T,this.toBBox),K?H.data[K-1].children.push(T):this._splitRoot(Q,T)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};
ka._splitRoot=function(H,K){this.data=new ia([H,K]);this.data.height=H.height+1;g(this.data,this.toBBox)};ka._chooseSplitIndex=function(H,K,Q){let T,n,m=void 0;T=n=Infinity;for(let A=K;A<=Q-K;A++){var D=E(H,0,A,this.toBBox);const O=E(H,A,Q,this.toBBox),S=Math.max(0,Math.min(D.maxX,O.maxX)-Math.max(D.minX,O.minX))*Math.max(0,Math.min(D.maxY,O.maxY)-Math.max(D.minY,O.minY));D=G(D)+G(O);S<T?(T=S,m=A,n=D<n?D:n):S===T&&D<n&&(n=D,m=A)}return m};ka._chooseSplitAxis=function(H,K,Q){const T=H.leaf?this.compareMinX:
t,n=H.leaf?this.compareMinY:aa,m=this._allDistMargin(H,K,Q,T);K=this._allDistMargin(H,K,Q,n);m<K&&H.children.sort(T)};ka._allDistMargin=function(H,K,Q,T){H.children.sort(T);T=this.toBBox;var n=E(H,0,K,T);const m=E(H,Q-K,Q,T);let D=v(n)+v(m);for(let A=K;A<Q-K;A++){const O=H.children[A];l(n,H.leaf?T(O):O);D+=v(n)}for(Q=Q-K-1;Q>=K;Q--)n=H.children[Q],l(m,H.leaf?T(n):n),D+=v(m);return D};ka._adjustParentBBoxes=function(H,K,Q){for(;0<=Q;Q--)l(K.data[Q],H)};ka._condense=function(H){for(let K=H.length-1;0<=
K;K--){const Q=H.data[K];if(0===Q.children.length)if(0<K){const T=H.data[K-1],n=T.children;n.splice(ha.indexOf(n,Q,n.length,T.indexHint),1)}else this.clear();else g(Q,this.toBBox)}};ka._initFormat=function(H){const K=["return a"," - b",";"];this.compareMinX=new Function("a","b",K.join(H[0]));this.compareMinY=new Function("a","b",K.join(H[1]));this.toBBox=new Function("a","return {minX: a"+H[0]+", minY: a"+H[1]+", maxX: a"+H[2]+", maxY: a"+H[3]+"};")};return fa}();const J=new q,W=new q,B=new q,I=new q({deallocator:void 0});
q=function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity};let L=function(fa){function ka(){var H=fa.apply(this,arguments)||this;H.height=1;H.indexHint=new ha.PositionHint;return H}e._inheritsLoose(ka,fa);return ka}(q),Y=function(fa){function ka(H){var K=fa.call(this)||this;K.children=H;K.leaf=!0;return K}e._inheritsLoose(ka,fa);return ka}(L),ia=function(fa){function ka(H){var K=fa.call(this)||this;K.children=H;K.leaf=!1;return K}e._inheritsLoose(ka,fa);return ka}(L);r.BBox=q;r.PooledRBush=
p;r["default"]=p;Object.defineProperty(r,"__esModule",{value:!0})})},"esri/chunks/quickselect":function(){define(["exports"],function(r){var e={exports:{}};(function(ha){(function(ea){ea=ea();void 0!==ea&&(ha.exports=ea)})(function(){function ea(g,E,l,t,aa){for(;t>l;){if(600<t-l){var G=t-l+1,v=E-l+1,x=Math.log(G),M=.5*Math.exp(2*x/3);x=.5*Math.sqrt(x*M*(G-M)/G)*(0>v-G/2?-1:1);ea(g,E,Math.max(l,Math.floor(E-v*M/G+x)),Math.min(t,Math.floor(E+(G-v)*M/G+x)),aa)}G=g[E];v=l;M=t;q(g,l,E);for(0<aa(g[t],G)&&
q(g,l,t);v<M;){q(g,v,M);v++;for(M--;0>aa(g[v],G);)v++;for(;0<aa(g[M],G);)M--}0===aa(g[l],G)?q(g,l,M):(M++,q(g,M,t));M<=E&&(l=M+1);E<=M&&(t=M-1)}}function q(g,E,l){var t=g[E];g[E]=g[l];g[l]=t}function w(g,E){return g<E?-1:g>E?1:0}return function(g,E,l,t,aa){ea(g,E,l||0,t||g.length-1,aa||w)}})})(e);r.quickselect=e.exports})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(r,e,ha,ea){const q=
{getObjectId(w){return w.objectId},getAttributes(w){return w.attributes},getAttribute(w,g){return w.attributes[g]},cloneWithGeometry(w,g){return new ha["default"](g,w.attributes,null,w.objectId)},getGeometry(w){return w.geometry},getCentroid(w,g){w.centroid||(w.centroid=e.getCentroidOptimizedGeometry(new ea,w.geometry,g.hasZ,g.hasM));return w.centroid}};r["default"]=q;r.optimizedFeatureQueryEngineAdapter=q;Object.defineProperty(r,"__esModule",{value:!0})})},"esri/layers/graphics/centroid":function(){define(["exports",
"../../core/maybe"],function(r,e){function ha(q,w,g,E,l,t,aa=1){t=l?t?4:3:t?3:2;let G=g,v=g+t,x=0,M=0,d=g=0,p=0;for(let J=0,W=E-1;J<W;J++,G+=t,v+=t){E=w[G];const B=w[G+1],I=w[G+2],L=w[v],Y=w[v+1],ia=w[v+2];let fa=E*Y-L*B;d+=fa;x+=(E+L)*fa;M+=(B+Y)*fa;l&&(fa=E*ia-L*I,g+=(I+ia)*fa,p+=fa);E<q[0]&&(q[0]=E);E>q[1]&&(q[1]=E);B<q[2]&&(q[2]=B);B>q[3]&&(q[3]=B);l&&(I<q[4]&&(q[4]=I),I>q[5]&&(q[5]=I))}0<d*aa&&(d*=-1);0<p*aa&&(p*=-1);if(!d)return null;q=[x,M,.5*d];l&&(q[3]=g,q[4]=.5*p);return q}function ea(q,
w,g,E,l){l=E?l?4:3:l?3:2;let t=w,aa=w+l,G=0,v=0,x=0,M=0;for(let W=0,B=g-1;W<B;W++,t+=l,aa+=l){var d=q[t];const I=q[t+1],L=q[t+2],Y=q[aa],ia=q[aa+1],fa=q[aa+2];if(E){{var p=Y-d;var J=ia-I;const ka=fa-L;p=Math.sqrt(p*p+J*J+ka*ka)}}else p=Y-d,J=ia-I,p=Math.sqrt(p*p+J*J);p&&(G+=p,E?(d=[d+.5*(Y-d),I+.5*(ia-I),L+.5*(fa-L)],v+=p*d[0],x+=p*d[1],M+=p*d[2]):(d=[d+.5*(Y-d),I+.5*(ia-I)],v+=p*d[0],x+=p*d[1]))}return 0<G?E?[v/G,x/G,M/G]:[v/G,x/G]:0<g?E?[q[w],q[w+1],q[w+2]]:[q[w],q[w+1]]:null}r.getCentroidOptimizedGeometry=
function(q,w,g,E,l){if(e.isNone(w)||!w.lengths.length)return null;const t="upperLeft"===(null==l?void 0:l.originPosition)?-1:1;q.lengths.length&&(q.lengths.length=0);q.coords.length&&(q.coords.length=0);l=q.coords;const aa=[],G=g?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:v,coords:x}=
w,M=g?E?4:3:E?3:2;let d=0;for(var p of v){const J=ha(G,x,d,p,g,E,t);J&&aa.push(J);d+=p*M}aa.sort((J,W)=>{let B=t*J[2]-t*W[2];0===B&&g&&(B=J[4]-W[4]);return B});aa.length&&(p=6*aa[0][2],l[0]=aa[0][0]/p,l[1]=aa[0][1]/p,g&&(p=6*aa[0][4],l[2]=0!==p?aa[0][3]/p:0),l[0]<G[0]||l[0]>G[1]||l[1]<G[2]||l[1]>G[3]||g&&(l[2]<G[4]||l[2]>G[5]))&&(l.length=0);if(!l.length)if(w=w.lengths[0]?ea(x,0,v[0],g,E):null)l[0]=w[0],l[1]=w[1],g&&2<w.length&&(l[2]=w[2]);else return null;return q};r.lineCentroid=ea;Object.defineProperty(r,
"__esModule",{value:!0})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),function(r,e,ha,ea,q,w,g){function E(d,p){if(!p)return null;if("x"in p){var J={x:0,y:0};[J.x,J.y]=d(p.x,p.y,G);null!=p.z&&(J.z=p.z);null!=p.m&&(J.m=p.m);return J}if("xmin"in
p)return J={xmin:0,ymin:0,xmax:0,ymax:0},[J.xmin,J.ymin]=d(p.xmin,p.ymin,G),[J.xmax,J.ymax]=d(p.xmax,p.ymax,G),p.hasZ&&(J.zmin=p.zmin,J.zmax=p.zmax,J.hasZ=!0),p.hasM&&(J.mmin=p.mmin,J.mmax=p.mmax,J.hasM=!0),J;if("rings"in p)return{rings:l(p.rings,d),hasM:p.hasM,hasZ:p.hasZ};if("paths"in p)return{paths:l(p.paths,d),hasM:p.hasM,hasZ:p.hasZ};if("points"in p)return{points:t(p.points,d),hasM:p.hasM,hasZ:p.hasZ}}function l(d,p){const J=[];for(const W of d)J.push(t(W,p));return J}function t(d,p){const J=
[];for(const W of d)d=p(W[0],W[1],[0,0]),J.push(d),2<W.length&&d.push(W[2]),3<W.length&&d.push(W[3]);return J}function aa(){aa=e._asyncToGenerator(function*(d,p){p&&(d=Array.isArray(d)?d.map(J=>ha.isSome(J.geometry)&&J.geometry.spatialReference):[d],yield ea.initializeProjection(d.map(J=>({source:J,dest:p}))))});return aa.apply(this,arguments)}const G=[0,0],v=E.bind(null,g.lngLatToXY),x=E.bind(null,g.xyToLngLat),M=new (function(){function d(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}
var p=d.prototype;p.push=function(){var J=e._asyncToGenerator(function*(W,B,I){if(!(W&&W.length&&B&&I)||w.equals(B,I))return W;const L={geometries:W,inSpatialReference:B,outSpatialReference:I,resolve:null};this._jobs.push(L);return new Promise(Y=>{L.resolve=Y;null===this._timer&&(this._timer=setTimeout(this._process,10))})});return function(W,B,I){return J.apply(this,arguments)}}();p._process=function(){this._timer=null;const J=this._jobs.shift();if(J){var {geometries:W,inSpatialReference:B,outSpatialReference:I,
resolve:L}=J;g.canProject(B,I)?w.isWebMercator(I)?L(W.map(v)):L(W.map(x)):L(ea.projectMany(q.jsonAdapter,W,B,I,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return d}());r.checkProjectionSupport=function(d,p){return aa.apply(this,arguments)};r.project=function(d,p,J){if(!d)return d;J||(J=p,p=d.spatialReference);return w.isValid(p)&&w.isValid(J)&&!w.equals(p,J)?g.canProject(p,J)?w.isWebMercator(J)?v(d):x(d):ea.projectMany(q.jsonAdapter,[d],p,J,null)[0]:d};r.projectMany=function(d,
p,J){return M.push(d,p,J)};Object.defineProperty(r,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../support/PromiseQueue ../../../support/arcadeOnDemand".split(" "),
function(r,e,ha,ea,q,w,g,E,l,t,aa,G,v,x,M,d,p,J,W,B,I,L,Y){function ia(n){return n.every(m=>"exceedslimit"!==m.statisticType)}const fa=new Set,ka=new w.MemCacheStorage(2E6);let H=0,K=function(){function n(D){this.capabilities={query:d.queryCapabilities};this.geometryType=D.geometryType;this.hasM=D.hasM;this.hasZ=D.hasZ;this.objectIdField=D.objectIdField;this.spatialReference=D.spatialReference;this.definitionExpression=D.definitionExpression;this.featureStore=D.featureStore;this.aggregateAdapter=
D.aggregateAdapter;this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=D.timeInfo;D.cacheSpatialQueries&&(this._geometryQueryCache=new w.MemCache(H++ +"$$",ka));this.fieldsIndex=new I(D.fields);D.scheduler&&D.priority&&(this._frameQueue=new L,this._frameTask=D.scheduler.registerTask(D.priority,this))}var m=n.prototype;m.destroy=function(){this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._frameQueue.cancelAll(),this._frameQueue=null);this.clearCache();
this._geometryQueryCache&&this._geometryQueryCache.destroy();this._changeHandle&&(this._changeHandle.remove(),this._changeHandle=null);this.fieldsIndex.destroy()};m.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear();this._timeExtent=this._allItems=null};m.executeQuery=function(){var D=e._asyncToGenerator(function*(A={},O){let S=ea.clone(A),ja;try{S=yield this._schedule(()=>B.normalizeQuery(S,this.definitionExpression,this.spatialReference),O),S=yield this._reschedule(()=>
this._checkQuerySupport(S),O),ja=yield this._reschedule(()=>this._executeGeometryQuery(S,O),O),ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(S),O),ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(S),O),ja=yield this._reschedule(()=>ja.executeTimeQuery(S),O),ja=yield this._reschedule(()=>ja.executeAttributesQuery(S),O)}catch(pa){if(pa!==B.QUERY_ENGINE_EMPTY_RESULT)throw pa;ja=new p([],null,this)}return ja.createQueryResponse(S)});return function(){return D.apply(this,arguments)}}();
m.executeQueryForCount=function(){var D=e._asyncToGenerator(function*(A={},O){let S=ea.clone(A),ja;S.returnGeometry=!1;S.returnCentroid=!1;S.outSR=null;try{S=yield this._schedule(()=>B.normalizeQuery(S,this.definitionExpression,this.spatialReference),O),S=yield this._reschedule(()=>this._checkQuerySupport(S),O),ja=yield this._reschedule(()=>this._executeGeometryQuery(S,O),O),ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(S),O),ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(S),O),
ja=yield this._reschedule(()=>ja.executeTimeQuery(S),O),ja=yield this._reschedule(()=>ja.executeAttributesQuery(S),O)}catch(pa){if(pa!==B.QUERY_ENGINE_EMPTY_RESULT)throw pa;return 0}return ja.createQueryResponseForCount(S)});return function(){return D.apply(this,arguments)}}();m.executeQueryForExtent=function(){var D=e._asyncToGenerator(function*(A={},O){let S=ea.clone(A),ja;A=S.outSR;try{S=yield this._schedule(()=>B.normalizeQuery(S,this.definitionExpression,this.spatialReference),O);S=yield this._reschedule(()=>
this._checkQuerySupport(S),O);S.returnGeometry=!0;S.returnCentroid=!1;S.outSR=null;ja=yield this._reschedule(()=>this._executeGeometryQuery(S,O),O);ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(S),O);ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(S),O);ja=yield this._reschedule(()=>ja.executeTimeQuery(S),O);ja=yield this._reschedule(()=>ja.executeAttributesQuery(S),O);const pa=ja.size;if(!pa)return{count:pa,extent:null};E.set(T,E.NEGATIVE_INFINITY);this.featureStore.forEachBounds(ja.items,
za=>E.expandWithAABB(T,za),Q);const ua={xmin:T[0],ymin:T[1],xmax:T[3],ymax:T[4],spatialReference:B.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(T[2])&&isFinite(T[5])&&(ua.zmin=T[2],ua.zmax=T[5]);const ta=M.project(ua,ja.spatialReference,A);ta.spatialReference=B.cleanFromGeometryEngine(A||this.spatialReference);if(0===ta.xmax-ta.xmin){const za=g.getMetersPerUnitForSR(ta.spatialReference);ta.xmin-=za;ta.xmax+=za}if(0===ta.ymax-ta.ymin){const za=g.getMetersPerUnitForSR(ta.spatialReference);
ta.ymin-=za;ta.ymax+=za}if(this.hasZ&&null!=ta.zmin&&null!=ta.zmax&&0===ta.zmax-ta.zmin){const za=g.getMetersPerUnitForSR(ta.spatialReference);ta.zmin-=za;ta.zmax+=za}return{count:pa,extent:ta}}catch(pa){if(pa===B.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw pa;}});return function(){return D.apply(this,arguments)}}();m.executeQueryForIds=function(){var D=e._asyncToGenerator(function*(A={},O){return this.executeQueryForIdSet(A,O).then(S=>Array.from(S))});return function(){return D.apply(this,
arguments)}}();m.executeQueryForIdSet=function(){var D=e._asyncToGenerator(function*(A={},O){let S=ea.clone(A),ja;S.returnGeometry=!1;S.returnCentroid=!1;S.outSR=null;try{S=yield this._schedule(()=>B.normalizeQuery(S,this.definitionExpression,this.spatialReference),O);S=yield this._reschedule(()=>this._checkQuerySupport(S),O);ja=yield this._reschedule(()=>this._executeGeometryQuery(S,O),O);ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(S),O);ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(S),
O);ja=yield this._reschedule(()=>ja.executeTimeQuery(S),O);ja=yield this._reschedule(()=>ja.executeAttributesQuery(S),O);const pa=ja.items,ua=new Set;yield this._reschedule(()=>{for(const ta of pa)ua.add(ja.featureAdapter.getObjectId(ta))},O);return ua}catch(pa){if(pa===B.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw pa;}});return function(){return D.apply(this,arguments)}}();m.executeQueryForSnapping=function(){var D=e._asyncToGenerator(function*(A,O){const {point:S,distance:ja,types:pa}=A;if(0===
pa)return{candidates:[]};const ua=yield this._reschedule(()=>this._checkQuerySupport(A.query),O),ta=!v.equals(S.spatialReference,this.spatialReference);ta&&(yield M.checkProjectionSupport(S.spatialReference,this.spatialReference));var za="number"===typeof ja?ja:ja.x,Da="number"===typeof ja?ja:ja.y;za={xmin:S.x-za,xmax:S.x+za,ymin:S.y-Da,ymax:S.y+Da,spatialReference:S.spatialReference};za=ta?M.project(za,this.spatialReference):za;if(!za)return{candidates:[]};Da=(yield G.normalizeCentralMeridian(aa.fromJSON(S),
null,{signal:O}))[0];const Ra=(yield G.normalizeCentralMeridian(aa.fromJSON(za),null,{signal:O}))[0];if(q.isNone(Da)||q.isNone(Ra))return{candidates:[]};let Ka=new p(this._searchFeatures(this._getQueryBBoxes(Ra.toJSON())),null,this);Ka=yield this._reschedule(()=>Ka.executeObjectIdsQuery(ua),O);Ka=yield this._reschedule(()=>Ka.executeTimeQuery(ua),O);Ka=yield this._reschedule(()=>Ka.executeAttributesQuery(ua),O);O=Da.toJSON();O=ta?M.project(O,this.spatialReference):O;return Ka.createSnappingResponse({...A,
point:O,distance:ta?Math.max(za.xmax-za.xmin,za.ymax-za.ymin)/2:ja},S.spatialReference)});return function(A,O){return D.apply(this,arguments)}}();m.executeQueryForLatestObservations=function(){var D=e._asyncToGenerator(function*(A={},O){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new ha("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:A,timeInfo:this.timeInfo});let S=ea.clone(A),ja;try{S=yield this._schedule(()=>B.normalizeQuery(S,this.definitionExpression,
this.spatialReference),O),S=yield this._reschedule(()=>this._checkQuerySupport(S),O),ja=yield this._reschedule(()=>this._executeGeometryQuery(S,O),O),ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(S),O),ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(S),O),ja=yield this._reschedule(()=>ja.executeTimeQuery(S),O),ja=yield this._reschedule(()=>ja.executeAttributesQuery(S),O),ja=yield this._reschedule(()=>ja.filterLatest(),O)}catch(pa){if(pa!==B.QUERY_ENGINE_EMPTY_RESULT)throw pa;ja=
new p([],null,this)}return ja.createQueryResponse(S)});return function(){return D.apply(this,arguments)}}();m.executeQueryForSummaryStatistics=function(){var D=e._asyncToGenerator(function*(A={},O,S){A=ea.clone(A);let ja;try{A=yield this._schedule(()=>B.normalizeQuery(A,this.definitionExpression,this.spatialReference),S),A=yield this._reschedule(()=>this._checkSummaryStatisticsSupport(A,O),S),ja=yield this._reschedule(()=>this._executeGeometryQuery(A,S),S),ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(A),
S),ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(A),S),ja=yield this._reschedule(()=>ja.executeTimeQuery(A),S),ja=yield this._reschedule(()=>ja.executeAttributesQuery(A),S)}catch(pa){if(pa!==B.QUERY_ENGINE_EMPTY_RESULT)throw pa;ja=new p([],null,this)}return ja.createSummaryStatisticsResponse(A,O)});return function(){return D.apply(this,arguments)}}();m._schedule=function(){var D=e._asyncToGenerator(function*(A,O){return this._frameQueue?this._frameQueue.push(A,O):A()});return function(A,
O){return D.apply(this,arguments)}}();m._reschedule=function(){var D=e._asyncToGenerator(function*(A,O){return this._frameQueue?this._frameQueue.unshift(A,O):A()});return function(A,O){return D.apply(this,arguments)}}();m.runTask=function(D){for(this._budget=D;!D.done&&this._frameQueue&&this._frameQueue.process();)D.madeProgress();this._budget=null};m._getAll=function(){if(!this._allItems){const D=[];this.featureStore.forEach(A=>D.push(A));this._allItems=new p(D,null,this)}return this._allItems};
m._executeGeometryQuery=function(){var D=e._asyncToGenerator(function*(A,O){var S=this;const {geometry:ja,outSR:pa,spatialRel:ua,returnGeometry:ta,returnCentroid:za}=A,Da=ta||za,Ra=v.isValid(pa)&&!v.equals(this.spatialReference,pa),Ka=this._geometryQueryCache?Ra&&Da?JSON.stringify({geometry:ja,spatialRelationship:ua,outSpatialReference:pa}):JSON.stringify({geometry:ja,spatialRelationship:ua}):null;if(Ka){var Ca=this._geometryQueryCache.get(Ka);if(!q.isUndefined(Ca))return Ca}Ca=function(){var k=e._asyncToGenerator(function*(R){if(Ra&&
Da)return R=yield R.project(pa),Ka&&S._geometryQueryCache.put(Ka,R,R.size||1),R;Ka&&S._geometryQueryCache.put(Ka,R,R.size||1);return R});return function(R){return k.apply(this,arguments)}}();if(!ja)return Ca(this._getAll());const Sa=this.featureAdapter;if("esriSpatialRelDisjoint"===ua){A=this._searchFeatures(this._getQueryBBoxes(ja));if(!A.length)return Ca(this._getAll());let k,R;const f=new Set;for(var Ta of A)f.add(Sa.getObjectId(Ta));yield this._reschedule(()=>{let u=0;k=Array(f.size);this.featureStore.forEach(N=>
k[u++]=N);R=f},O);A=yield this._reschedule(e._asyncToGenerator(function*(){const u=yield J.getSpatialQueryOperator(ua,ja,S.geometryType,S.hasZ,S.hasM);return new p(yield S._runSpatialFilter(k,N=>!R.has(Sa.getObjectId(N))||u(Sa.getGeometry(N)),O),ja,S)}),O);return Ca(A)}Ta=this._searchFeatures(this._getQueryBBoxes(ja));if(!Ta.length)return Ca=new p([],ja,this),Ka&&this._geometryQueryCache.put(Ka,Ca,Ca.size||1),Ca;if(this._canExecuteSoloPass(ja,A))return Ca(new p(Ta,ja,this));const c=yield J.getSpatialQueryOperator(ua,
ja,this.geometryType,this.hasZ,this.hasM);A=yield this._runSpatialFilter(Ta,k=>c(Sa.getGeometry(k)),O);return Ca(new p(A,ja,this))});return function(A,O){return D.apply(this,arguments)}}();m._runSpatialFilter=function(){var D=e._asyncToGenerator(function*(A,O,S){var ja=this;if(!O)return A;if(!this._budget)return A.filter(za=>O(za));let pa=0;const ua=[],ta=function(){var za=e._asyncToGenerator(function*(){for(;pa<A.length;){const Da=A[pa];O(Da)&&ua.push(Da);ja._budget.done&&(yield ja._reschedule(()=>
ta(),S));++pa}});return function(){return za.apply(this,arguments)}}();return this._reschedule(()=>ta(),S).then(()=>ua)});return function(A,O,S){return D.apply(this,arguments)}}();m._canExecuteSoloPass=function(D,A){const {geometryType:O}=this;({spatialRel:A}=A);return J.canQueryWithRBush(D)&&("esriSpatialRelEnvelopeIntersects"===A||"esriGeometryPoint"===O&&("esriSpatialRelIntersects"===A||"esriSpatialRelContains"===A||"esriSpatialRelWithin"===A))};m._getQueryBBoxes=function(D){if(J.canQueryWithRBush(D)){if(aa.isExtent(D))return[l.fromValues(D.xmin,
D.ymin,D.xmax,D.ymax)];if(aa.isPolygon(D))return D.rings.map(A=>l.fromValues(Math.min(A[0][0],A[2][0]),Math.min(A[0][1],A[2][1]),Math.max(A[0][0],A[2][0]),Math.max(A[0][1],A[2][1])))}return[t.getBoundsXY(l.create(),D)]};m._searchFeatures=function(D){for(const S of D)this.featureStore.forEachInBounds(S,ja=>{fa.add(ja)});const A=Array(fa.size);let O=0;fa.forEach(S=>A[O++]=S);fa.clear();return A};m._checkSummaryStatisticsSupport=function(){var D=e._asyncToGenerator(function*(A,O){if(0>A.distance||null!=
A.geometryPrecision||A.multipatchOption||A.pixelSize||A.relationParam||A.text||A.outStatistics||A.groupByFieldsForStatistics||A.having||A.orderByFields)throw new ha("feature-store:unsupported-query","Unsupported query options",{query:A});return Promise.all([this._checkAttributesQuerySupport(A),this._checkSummaryStatisticsParamsSupport(O),J.checkSpatialQuerySupport(A,this.geometryType,this.spatialReference),M.checkProjectionSupport(this.spatialReference,A.outSR)]).then(()=>A)});return function(A,O){return D.apply(this,
arguments)}}();m._checkSummaryStatisticsParamsSupport=function(){var D=e._asyncToGenerator(function*(A){var O=[];A.valueExpression&&({arcadeUtils:O}=yield Y.loadArcade(),O=O.extractFieldNames(A.valueExpression));A.field&&O.push(A.field);A.normalizationField&&O.push(A.normalizationField);if(!O.length)throw new ha("feature-store:unsupported-query","params should have at least a field or valueExpression",{params:A});x.validateFields(this.fieldsIndex,O,"params contains missing fields")});return function(A){return D.apply(this,
arguments)}}();m._checkQuerySupport=function(){var D=e._asyncToGenerator(function*(A){if(0>A.distance||null!=A.geometryPrecision||A.multipatchOption||A.pixelSize||A.relationParam||A.text)throw new ha("feature-store:unsupported-query","Unsupported query options",{query:A});return Promise.all([this._checkAttributesQuerySupport(A),this._checkStatisticsQuerySupport(A),J.checkSpatialQuerySupport(A,this.geometryType,this.spatialReference),M.checkProjectionSupport(this.spatialReference,A.outSR)]).then(()=>
A)});return function(A){return D.apply(this,arguments)}}();m._checkAttributesQuerySupport=function(D){const {outFields:A,orderByFields:O,returnDistinctValues:S,outStatistics:ja}=D,pa=ja?ja.map(ua=>ua.outStatisticFieldName&&ua.outStatisticFieldName.toLowerCase()):[];if(O&&0<O.length){const ua=O.map(ta=>{const za=ta.toLowerCase();return-1<za.indexOf(" asc")?za.split(" asc")[0]:-1<za.indexOf(" desc")?za.split(" desc")[0]:ta}).filter(ta=>-1===pa.indexOf(ta));x.validateFields(this.fieldsIndex,ua,"orderByFields contains missing fields")}if(A&&
0<A.length)x.validateFields(this.fieldsIndex,A,"outFields contains missing fields");else if(S)throw new ha("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:D});x.validateWhere(this.fieldsIndex,D.where)};m._checkStatisticsQuerySupport=function(){var D=e._asyncToGenerator(function*(A){const {outStatistics:O,groupByFieldsForStatistics:S,having:ja}=A;var pa=S&&S.length,ua=O&&O.length;if(ja){if(!pa||!ua)throw new ha("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",
{query:A});x.validateHaving(this.fieldsIndex,ja,O)}if(ua&&ia(O)){ua=O.map(ta=>ta.onStatisticField);x.validateFields(this.fieldsIndex,ua,"onStatisticFields contains missing fields");pa&&x.validateFields(this.fieldsIndex,S,"groupByFieldsForStatistics contains missing fields");for(const ta of O){const {onStatisticField:za,statisticType:Da}=ta;if(("percentile_disc"===Da||"percentile_cont"===Da)&&"statisticParameters"in ta){if({statisticParameters:pa}=ta,!pa)throw new ha("feature-store:unsupported-query",
"statisticParamters should be set for percentile type",{definition:ta,query:A});}else if("count"!==Da&&za&&x.hasInvalidFieldType(za,this.fieldsIndex))throw new ha("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:ta,query:A});}}});return function(A){return D.apply(this,arguments)}}();e._createClass(n,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const D=this.featureStore.fullBounds;return D?
{xmin:D[0],ymin:D[1],xmax:D[2],ymax:D[3],spatialReference:B.cleanFromGeometryEngine(this.spatialReference)}:null}},{key:"timeExtent",get:function(){return this.timeInfo?this._timeExtent?this._timeExtent:this._timeExtent=W.getTimeExtent(this.timeInfo,this.featureStore):null}},{key:"running",get:function(){return 0<this._frameQueue.length}}]);return n}();const Q=E.create(),T=E.create();r.Feature=function(n,m=null,D,A,O){this.attributes=n;this.geometry=D;this.centroid=A;this.filterFlags=O;this.groupId=
-1;this.displayId=m};r["default"]=K;Object.defineProperty(r,"__esModule",{value:!0})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./PooledArray"],function(r,e,ha){let ea=function(){function w(E,l,t){this._namespace=E;this._storage=l;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";t&&(this._storage.registerRemoveFunc(this._namespace,t),this._removeFunc=!0)}var g=w.prototype;g.destroy=function(){this._storage.clear(this._namespace);
this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this);this._storage=null};g.resetHitRate=function(){this._hit=this._miss=0};g.put=function(E,l,t,aa=0){this._storage.put(this._namespace+E,l,t,aa)};g.get=function(E){E=this._storage.get(this._namespace+E);void 0===E?++this._miss:++this._hit;return E};g.pop=function(E){E=this._storage.pop(this._namespace+E);void 0===E?++this._miss:++this._hit;return E};g.updateSize=function(E,l,t){this._storage.updateSize(this._namespace+
E,l,t)};g.clear=function(){this._storage.clear(this._namespace)};g.clearAll=function(){this._storage.clearAll()};g.getStats=function(){return this._storage.getStats()};g.resetStats=function(){this._storage.resetStats()};e._createClass(w,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return w}(),
q=function(){function w(E=10485760){this._maxSize=E;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new ha;this._users=new ha}var g=w.prototype;g.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};g.register=function(E){this._users.push(E)};g.deregister=function(E){this._users.removeUnordered(E)};g.registerRemoveFunc=function(E,l){this._removeFuncs.push([E,l])};g.deregisterRemoveFunc=function(E){this._removeFuncs.filterInPlace(l=>l[0]!==
E)};g.put=function(E,l,t,aa){const G=this._db.get(E);G&&(this._size-=G.size,this._db.delete(E),G.entry!==l&&this._notifyRemoved(E,G.entry));t>this._maxSize?this._notifyRemoved(E,l):void 0===l?console.warn("Refusing to cache undefined entry "):!t||0>t?console.warn("Refusing to cache entry with invalid size "+t):(aa=1+Math.max(aa,-3)- -3,this._db.set(E,{entry:l,size:t,lifetime:aa,lives:aa}),this._size+=t,this._checkSizeLimit())};g.updateSize=function(E,l,t){const aa=this._db.get(E);aa&&aa.entry===l&&
(this._size-=aa.size,t>this._maxSize?(this._db.delete(E),this._notifyRemoved(E,l)):(aa.size=t,this._size+=t,this._checkSizeLimit()))};g.pop=function(E){const l=this._db.get(E);if(l)return this._size-=l.size,this._db.delete(E),++this._hit,l.entry;++this._miss};g.get=function(E){const l=this._db.get(E);if(void 0===l)++this._miss;else return this._db.delete(E),l.lives=l.lifetime,this._db.set(E,l),++this._hit,l.entry};g.getStats=function(){const E={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/
1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},l={},t=[];this._db.forEach((v,x)=>{const M=v.lifetime;t[M]=(t[M]||0)+v.size;this._users.forAll(d=>{d=d.namespace;x.startsWith(d)&&(l[d]=(l[d]||0)+v.size)})});const aa={};this._users.forAll(v=>{const x=v.namespace;!isNaN(v.hitRate)&&0<v.hitRate?(l[x]=l[x]||0,aa[x]=Math.round(100*v.hitRate)+"%"):aa[x]="0%"});var G=Object.keys(l);G.forEach(v=>l[v]=l[v]/this._size*100);G.sort((v,x)=>l[x]-l[v]);G.forEach(v=>
E[v]=Math.round(l[v])+"% / "+aa[v]);for(G=t.length-1;0<=G;--G){const v=t[G];v&&(E["Priority "+(G+-3-1)]=Math.round(v/this.size*100)+"%")}return E};g.resetStats=function(){this._hit=this._miss=0;this._users.forAll(E=>E.resetHitRate())};g.clear=function(E){this._db.forEach((l,t)=>{t.startsWith(E)&&(this._size-=l.size,this._db.delete(t),this._notifyRemoved(t,l.entry))})};g.clearAll=function(){this._db.forEach((E,l)=>this._notifyRemoved(l,E.entry));this._size=0;this._db.clear()};g._getHitRate=function(){return this._hit/
(this._hit+this._miss)};g._notifyRemoved=function(E,l){this._removeFuncs.forAll(t=>{if(E.startsWith(t[0]))t[1](l)})};g._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [E,l]of this._db)if(this._db.delete(E),1>=l.lives?(this._size-=l.size,this._notifyRemoved(E,l.entry)):(--l.lives,this._db.set(E,l)),this._size<=.9*this.maxSize)break};e._createClass(w,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(E){this._maxSize=
Math.max(E,0);this._checkSizeLimit()}}]);return w}();r.MIN_PRIORITY=-3;r.MemCache=ea;r.MemCacheStorage=q;Object.defineProperty(r,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../tasks/geometry/cut ../../tasks/geometry/simplify".split(" "),function(r,e,ha,ea,
q,w,g,E,l,t,aa,G,v){function x(L){const Y=[];let ia=0,fa=0;for(let ka=0;ka<L.length;ka++){const H=L[ka];let K=null;for(let Q=0;Q<H.length;Q++)K=H[Q],Y.push(K),0===Q?fa=ia=K[0]:(ia=Math.min(ia,K[0]),fa=Math.max(fa,K[0]));K&&Y.push([(ia+fa)/2,0])}return Y}function M(L,Y){if(!(L instanceof E||L instanceof g))throw I.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new ea("straightLineDensify: the input geometry is neither polyline nor polygon");var ia=l.getGeometryParts(L);
const fa=[];for(const H of ia){ia=[];fa.push(ia);ia.push([H[0][0],H[0][1]]);for(let K=0;K<H.length-1;K++){const Q=H[K][0],T=H[K][1],n=H[K+1][0],m=H[K+1][1];var ka=Math.sqrt((n-Q)*(n-Q)+(m-T)*(m-T));const D=(m-T)/ka,A=(n-Q)/ka,O=ka/Y;if(1<O){for(let S=1;S<=O-1;S++){const ja=S*Y;ia.push([A*ja+Q,D*ja+T])}ka=(ka+Math.floor(O-1)*Y)/2;ia.push([A*ka+Q,D*ka+T])}ia.push([n,m])}}return"polygon"===L.type?new g({rings:fa,spatialReference:L.spatialReference}):new E({paths:fa,spatialReference:L.spatialReference})}
function d(L,Y,ia){Y&&(L=M(L,1E6),L=aa.webMercatorToGeographic(L,!0));ia&&(L=l.updatePolyGeometry(L,ia));return L}function p(L,Y,ia){if(Array.isArray(L)){var fa=L[0];fa>Y?(ia=l.offsetMagnitude(fa,Y),L[0]=fa+-2*ia*Y):fa<ia&&(Y=l.offsetMagnitude(fa,ia),L[0]=fa+-2*Y*ia)}else fa=L.x,fa>Y?(ia=l.offsetMagnitude(fa,Y),L=L.clone().offset(-2*ia*Y,0)):fa<ia&&(Y=l.offsetMagnitude(fa,ia),L=L.clone().offset(-2*Y*ia,0));return L}function J(L,Y){let ia=-1;for(let fa=0;fa<Y.cutIndexes.length;fa++){const ka=Y.cutIndexes[fa],
H=Y.geometries[fa],K=l.getGeometryParts(H);for(let Q=0;Q<K.length;Q++){const T=K[Q];T.some(n=>{if(180>n[0])return!0;n=0;for(var m=0;m<T.length;m++){var D=T[m][0];n=D>n?D:n}n=Number(n.toFixed(9));n=-360*l.offsetMagnitude(n,180);for(m=0;m<T.length;m++)D=H.getPoint(Q,m),H.setPoint(Q,m,D.clone().offset(n,0));return!0})}if(ka===ia)if("polygon"===L[0].type)for(const Q of l.getGeometryParts(H))L[ka]=L[ka].addRing(Q);else{if("polyline"===L[0].type)for(const Q of l.getGeometryParts(H))L[ka]=L[ka].addPath(Q)}else ia=
ka,L[ka]=H}return L}function W(L,Y,ia){return B.apply(this,arguments)}function B(){B=e._asyncToGenerator(function*(L,Y,ia){if(!Array.isArray(L))return W([L],Y);var fa=Y?Y.url:ha.geometryServiceUrl;let ka,H,K;let Q=0;var T=[];Y=[];for(var n of L)if(w.isNone(n))Y.push(n);else{if(!m){var m=n.spatialReference;var D=t.getInfo(m);var A=(ka=m.isWebMercator)?102100:4326;H=l.cutParams[A].maxX;K=l.cutParams[A].minX;var O=l.cutParams[A].plus180Line;A=l.cutParams[A].minus180Line}if(D)if("mesh"===n.type)Y.push(n);
else if("point"===n.type)Y.push(p(n.clone(),H,K));else if("multipoint"===n.type){var S=n.clone();S.points=S.points.map(ja=>p(ja,H,K));Y.push(S)}else if("extent"===n.type)S=n.clone()._normalize(!1,!1,D),Y.push(S.rings?new g(S):S);else if(n.extent){S=n.extent;const ja=2*l.offsetMagnitude(S.xmin,K)*H;let pa=0===ja?n.clone():l.updatePolyGeometry(n.clone(),ja);S.offset(ja,0);S.intersects(O)&&S.xmax!==H?(Q=S.xmax>Q?S.xmax:Q,pa=d(pa,ka),T.push(pa),Y.push("cut")):S.intersects(A)&&S.xmin!==K?(Q=2*S.xmax*H>
Q?2*S.xmax*H:Q,pa=d(pa,ka,360),T.push(pa),Y.push("cut")):Y.push(pa)}else Y.push(n.clone());else Y.push(n)}m=l.offsetMagnitude(Q,H);D=-90;O=m;for(n=new E;0<m;)A=-180+360*m,n.addPath([[A,D],[A,-1*D]]),D*=-1,m--;if(0<T.length&&0<O){m=yield G.cut(fa,T,n,ia);m=J(T,m);D=[];T=[];for(O=0;O<Y.length;O++)n=Y[O],"cut"!==n?T.push(n):(n=m.shift(),A=L[O],w.isSome(A)&&"polygon"===A.type&&A.rings&&1<A.rings.length&&n.rings.length>=A.rings.length?(D.push(n),T.push("simplify")):T.push(ka?aa.geographicToWebMercator(n):
n));if(!D.length)return T;Y=yield v.simplify(fa,D,ia);L=[];for(ia=0;ia<T.length;ia++)fa=T[ia],"simplify"!==fa?L.push(fa):L.push(ka?aa.geographicToWebMercator(Y.shift()):Y.shift());return L}L=[];for(ia=0;ia<Y.length;ia++)fa=Y[ia],"cut"!==fa?L.push(fa):(fa=T.shift(),L.push(!0===ka?aa.geographicToWebMercator(fa):fa));return Promise.resolve(L)});return B.apply(this,arguments)}const I=q.getLogger("esri.geometry.support.normalizeUtils");r.getDenormalizedExtent=function(L){if(!L)return null;const Y=L.extent;
if(!Y)return null;var ia=L.spatialReference&&t.getInfo(L.spatialReference);if(!ia)return Y;const [fa,ka]=ia.valid;({width:ia}=Y);let {xmin:H,xmax:K}=Y;[H,K]=[K,H];if("extent"===L.type||0===ia||ia<=ka||ia>2*ka||H<fa||K>ka)return Y;let Q;switch(L.type){case "polygon":if(1<L.rings.length)Q=x(L.rings);else return Y;break;case "polyline":if(1<L.paths.length)Q=x(L.paths);else return Y;break;case "multipoint":Q=L.points}L=Y.clone();for(let T=0;T<Q.length;T++){let n=Q[T][0];0>n?(n+=ka,K=Math.max(n,K)):(n-=
ka,H=Math.min(n,H))}L.xmin=H;L.xmax=K;return L.width<ia?(L.xmin-=ka,L.xmax-=ka,L):Y};r.normalizeCentralMeridian=W;r.normalizeMapX=function(L,Y){if(Y=t.getInfo(Y)){const [ia,fa]=Y.valid;Y=fa-ia;if(L<ia)for(;L<ia;)L+=Y;if(L>fa)for(;L>fa;)L-=Y}return L};r.straightLineDensify=M;Object.defineProperty(r,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(r,e,ha,ea){function q(g){return ea.isPolygon(g)?
g.rings:g.paths}const w={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new e({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:ha.WebMercator}),minus180Line:new e({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:ha.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new e({paths:[[[180,-180],[180,180]]],spatialReference:ha.WGS84}),minus180Line:new e({paths:[[[-180,
-180],[-180,180]]],spatialReference:ha.WGS84})}};r.cutParams=w;r.getGeometryParts=q;r.getSpatialReferenceMinMaxX=function(g){g=(null==g?0:g.isWebMercator)?102100:4326;return[w[g].minX,w[g].maxX]};r.offsetMagnitude=function(g,E){return Math.ceil((g-E)/(2*E))};r.updatePolyGeometry=function(g,E){const l=q(g);for(const t of l)for(const aa of t)aa[0]+=E;return g};Object.defineProperty(r,"__esModule",{value:!0})})},"esri/tasks/geometry/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../core/urlUtils ../../geometry/support/jsonUtils".split(" "),
function(r,e,ha,ea,q,w){function g(){g=e._asyncToGenerator(function*(E,l,t,aa){E="string"===typeof E?q.urlToObject(E):E;const G=l[0].spatialReference;l={...aa,query:{...E.query,f:"json",sr:JSON.stringify(G),target:JSON.stringify({geometryType:w.getJsonType(l[0]),geometries:l}),cutter:JSON.stringify(t)}};l=yield ea(E.path+"/cut",l);const {cutIndexes:v,geometries:x=[]}=l.data;return{cutIndexes:v,geometries:x.map(M=>{M=w.fromJSON(M);M.spatialReference=G;return M})}});return g.apply(this,arguments)}r.cut=
function(E,l,t,aa){return g.apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0})})},"esri/tasks/geometry/simplify":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../request","../../core/urlUtils","../../geometry/support/jsonUtils"],function(r,e,ha,ea,q){function w(){w=e._asyncToGenerator(function*(l,t,aa){const G="string"===typeof l?ea.urlToObject(l):l;l=t[0].spatialReference;const v=q.getJsonType(t[0]);t={...aa,query:{...G.query,f:"json",sr:l.wkid?l.wkid:
JSON.stringify(l),geometries:JSON.stringify(g(t))}};t=yield ha(G.path+"/simplify",t);return E(t.data,v,l)});return w.apply(this,arguments)}function g(l){return{geometryType:q.getJsonType(l[0]),geometries:l.map(t=>t.toJSON())}}function E(l,t,aa){const G=q.getGeometryType(t);return l.map(v=>{v=G.fromJSON(v);v.spatialReference=aa;return v})}r.simplify=function(l,t,aa){return w.apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports",
"../../../core/Error","../../../core/sql/WhereClauseCache"],function(r,e,ha){function ea(l,t){return l?g.get(l,t):null}function q(l,t,aa,G=!0){const v=[];for(const x of t)if("*"!==x&&!l.has(x))if(G){t=w(x);try{const M=ea(t,l);if(!M)throw new e("feature-store:unsupported-query","invalid SQL expression",{where:t});if(!M.isStandardized)throw new e("feature-store:unsupported-query","expression is not standard",{clause:M});q(l,M.fieldNames,"expression contains missing fields")}catch(M){if((t=M&&M.details)&&
(t.clause||t.where))throw M;t&&t.missingFields?v.push(...t.missingFields):v.push(x)}}else v.push(x);if(v.length)throw new e("feature-store:unsupported-query",aa,{missingFields:v});}function w(l){return l.split(" as ")[0]}const g=new ha.WhereClauseCache(50,500),E=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));r.getAliasFromFieldName=function(l){return l.split(" as ")[1]};r.getExpressionFromFieldName=
w;r.getWhereClause=ea;r.hasInvalidFieldType=function(l,t){return(l=t.get(l))?!E.has(l.type):!1};r.validateFields=q;r.validateHaving=function(l,t,aa){if(!t)return!0;const G=g.get(t,l);if(!G)throw new e("feature-store:unsupported-query","invalid SQL expression",{having:t});if(!G.isAggregate)throw new e("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:t});q(l,G.fieldNames,"having contains missing fields");if(!G.getExpressions().every(v=>{const {aggregateType:x,
field:M}=v,d=l.has(M)&&l.get(M).name;return aa.some(p=>{const {onStatisticField:J,statisticType:W}=p;return(l.has(J)&&l.get(J).name)===d&&W.toLowerCase().trim()===x})}))throw new e("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:t});return!0};r.validateWhere=function(l,t){if(!t)return!0;const aa=g.get(t,l);if(!aa)throw new e("feature-store:unsupported-query","invalid SQL expression",{where:t});if(!aa.isStandardized)throw new e("feature-store:unsupported-query",
"where clause is not standard",{where:t});q(l,aa.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(r,"__esModule",{value:!0})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(r,e,ha){let ea=function(){function q(w,g){this._cache=new e(w);this._invalidCache=new e(g)}q.prototype.get=function(w,g){const E=`${g.uid}:${w}`,l=this._cache.get(E);if(l)return l;if(void 0!==this._invalidCache.get(E))return null;try{const t=
ha.WhereClause.create(w,g);this._cache.put(E,t);return t}catch{return this._invalidCache.put(E,null),null}};return q}();r.WhereClauseCache=ea;Object.defineProperty(r,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(r){return function(){function e(ea,q){this._storage=new r.MemCacheStorage;this._storage.maxSize=ea;q&&this._storage.registerRemoveFunc("",q)}var ha=e.prototype;ha.put=function(ea,q){this._storage.put(ea,q,1,1)};ha.pop=function(ea){return this._storage.pop(ea)};
ha.get=function(ea){return this._storage.get(ea)};ha.clear=function(){this._storage.clearAll()};ha.destroy=function(){this._storage.destroy()};return e}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(r,e,ha,ea,q,w){function g(T,n){T+="";return T.length>=n?T:Array(n-T.length+1).join("0")+T}function E(T,n,m="0",D="0",A="0",O="0",S="",ja="0",pa="0"){return"+"===
S||"-"===S?(T=`${g(parseInt(T,10),4)}-${g(parseInt(n,10),2)}-${g(parseInt(m,10),2)}`,n="",10>parseFloat(O)&&(n="0"),D=`${g(parseInt(D,10),2)}:${g(parseInt(A,10),2)}:${n+parseFloat(O).toString()}`,S=`${S}${g(parseInt(ja,10),2)}:${g(parseInt(pa,10),2)}`,new Date(T+"T"+D+S)):new Date(parseInt(T,10),parseInt(n,10)-1,parseInt(m,10),parseInt(D,10),parseInt(A,10),parseFloat(O))}function l(T){let n=L.exec(T);if(null!==n){const [,m,D,A,O,S,ja]=n;return E(m,D,A,O,S,ja)}n=Y.exec(T);if(null!==n){const [,m,D,
A,O,S,ja,pa,ua,ta]=n;return E(m,D,A,O,S,ja,pa,ua,ta)}n=ia.exec(T);if(null!==n){const [,m,D,A,O,S,ja,pa,ua]=n;return E(m,D,A,O,S,"0",ja,pa,ua)}n=fa.exec(T);if(null!==n){const [,m,D,A,O,S]=n;return E(m,D,A,O,S)}n=I.exec(T);if(null!==n){const [,m,D,A]=n;return E(m,D,A)}throw Error("SQL Invalid Timestamp");}function t(T){T=I.exec(T);if(null===T)throw Error("SQL Invalid Date");const [,n,m,D]=T;return new Date(parseInt(n,10),parseInt(m,10)-1,parseInt(D,10))}function aa(T){return Array.isArray(T)?T:[T]}
function G(T){return null!==T?!0!==T:null}function v(T,n){return null!=T&&null!=n?!0===T&&!0===n:!1===T||!1===n?!1:null}function x(T,n){return null!=T&&null!=n?!0===T||!0===n:!0===T||!0===n?!0:null}function M(T,n){if(null==T)return null;let m=!1;for(const D of n)if(null==D)m=null;else if(T===D){m=!0;break}return m}function d(T,n,m){if(null==T)return null;let D="",A=0;for(let O=0;O<n.length;O++){const S=n.charAt(O);switch(A){case 0:S===m?A=1:D=0<="-[]/{}()*+?.\\^$|".indexOf(S)?D+("\\"+S):"%"===S?D+
".*":"_"===S?D+".":D+S;break;case 1:D=0<="-[]/{}()*+?.\\^$|".indexOf(S)?D+("\\"+S):D+S,A=0}}return(new RegExp("^"+D+"$")).test(T)}function p(T){return T instanceof Date?T.valueOf():T}function J(T,n,m){if(null==n||null==m)return null;n=p(n);m=p(m);switch(T){case "\x3c\x3e":return n!==m;case "\x3d":return n===m;case "\x3e":return n>m;case "\x3c":return n<m;case "\x3e\x3d":return n>=m;case "\x3c\x3d":return n<=m}}function W(T,n,m){if(n instanceof q.SqlInterval)if(m instanceof Date)switch(T){case "+":return new Date(n.valueInMilliseconds()+
m.getTime());case "-":return n.valueInMilliseconds()-m.getTime();case "*":return n.valueInMilliseconds()*m.getTime();case "/":return n.valueInMilliseconds()/m.getTime()}else if(m instanceof q.SqlInterval)switch(T){case "+":return q.SqlInterval.createFromMilliseconds(n.valueInMilliseconds()+m.valueInMilliseconds());case "-":return q.SqlInterval.createFromMilliseconds(n.valueInMilliseconds()-m.valueInMilliseconds());case "*":return n.valueInMilliseconds()*m.valueInMilliseconds();case "/":return n.valueInMilliseconds()/
m.valueInMilliseconds()}else n=n.valueInMilliseconds();else if(m instanceof q.SqlInterval)if(n instanceof Date)switch(T){case "+":return new Date(m.valueInMilliseconds()+n.getTime());case "-":return new Date(n.getTime()-m.valueInMilliseconds());case "*":return n.getTime()*m.valueInMilliseconds();case "/":return n.getTime()/m.valueInMilliseconds()}else m=m.valueInMilliseconds();else if(n instanceof Date&&"number"===typeof m)switch(m*=864E5,n=n.getTime(),T){case "+":return new Date(n+m);case "-":return new Date(n-
m);case "*":return new Date(n*m);case "/":return new Date(n/m)}else if(m instanceof Date&&"number"===typeof n)switch(n*=864E5,m=m.getTime(),T){case "+":return new Date(n+m);case "-":return new Date(n-m);case "*":return new Date(n*m);case "/":return new Date(n/m)}switch(T){case "+":return n+m;case "-":return n-m;case "*":return n*m;case "/":return n/m}}function B(T,n,m,D){T=D.getAttribute(T,n);return null!=T&&1===m[n]?new Date(T):T}const I=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,L=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,
Y=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,ia=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,fa=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,ka=new Set(["current_timestamp","current_date","current_time"]);let H=function(){function T(){}T.makeBool=function(n){return!0===n};T.featureValue=function(n,m,D,A){return B(n,m,D,A)};T.equalsNull=function(n){return null===n};T.applyLike=function(n,m,D){return d(n,
m,D)};T.ensureArray=function(n){return aa(n)};T.applyIn=function(n,m){return M(n,m)};T.currentDate=function(){const n=new Date;n.setHours(0,0,0,0);return n};T.makeSqlInterval=function(n,m,D){return q.SqlInterval.createFromValueAndQualifer(n,m,D)};T.convertInterval=function(n){return n instanceof q.SqlInterval?n.valueInMilliseconds():n};T.currentTimestamp=function(){return new Date};T.compare=function(n,m,D){return J(n,m,D)};T.calculate=function(n,m,D){return W(n,m,D)};T.makeComparable=function(n){return p(n)};
T.evaluateFunction=function(n,m){return q.evaluateFunction(n,m)};T.lookup=function(n,m){n=m[n];return void 0===n?null:n};T.between=function(n,m){return null==n||null==m[0]||null==m[1]?null:n>=m[0]&&n<=m[1]};T.notbetween=function(n,m){return null==n||null==m[0]||null==m[1]?null:n<m[0]||n>m[1]};T.ternaryNot=function(n){return G(n)};T.ternaryAnd=function(n,m){return v(n,m)};T.ternaryOr=function(n,m){return x(n,m)};return T}(),K=function(){function T(m,D){this.fieldsIndex=D;this.datefields={};this.parameters=
{};this._hasDateFunctions=void 0;this.parseTree=w.WhereGrammar.parse(m);const {isStandardized:A,isAggregate:O,referencedFieldNames:S}=this.extractExpressionInfo(D);this.referencedFieldNames=S;this.isStandardized=A;this.isAggregate=O}T.create=function(m,D){return new T(m,D)};var n=T.prototype;n.testSet=function(m,D=Q){const A={};for(const O of this.fieldNames)A[O]=m.map(S=>D.getAttribute(S,O));return!!this.evaluateNode(this.parseTree,{attributes:A},Q)};n.calculateValue=function(m,D=Q){m=this.evaluateNode(this.parseTree,
m,D);return m instanceof q.SqlInterval?m.valueInMilliseconds()/864E5:m};n.calculateValueCompiled=function(m,D=Q){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(m,this.parameters,D,this.datefields);if(ha("csp-restrictions"))return this.calculateValue(m,D);this.compileMe();return this.parseTree._compiledVersion(m,this.parameters,D,this.datefields)};n.testFeature=function(m,D=Q){return!!this.evaluateNode(this.parseTree,m,D)};n.testFeatureCompiled=function(m,D=Q){if(null!=
this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(m,this.parameters,D,this.datefields);if(ha("csp-restrictions"))return this.testFeature(m,D);this.compileMe();return!!this.parseTree._compiledVersion(m,this.parameters,D,this.datefields)};n.getFunctions=function(){const m=new Set;this.visitAll(this.parseTree,D=>{"function"===D.type&&m.add(D.name.toLowerCase())});return Array.from(m)};n.getExpressions=function(){const m=new Map;this.visitAll(this.parseTree,D=>{if("function"===D.type){const A=
D.name.toLowerCase();D=D.args.value[0];if("column_ref"===D.type){D=D.column;const O=`${A}-${D}`;m.has(O)||m.set(O,{aggregateType:A,field:D})}}});return[...m.values()]};n.getVariables=function(){const m=new Set;this.visitAll(this.parseTree,D=>{"param"===D.type&&m.add(D.value.toLowerCase())});return Array.from(m)};n.compileMe=function(){const m="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter",
"datefields",m)).bind(H)};n.extractExpressionInfo=function(m){const D=[],A=new Set;let O=!0,S=!0;this.visitAll(this.parseTree,ja=>{switch(ja.type){case "column_ref":{const pa=m.get(ja.column);let ua,ta;pa?ua=ta=pa.name:(ta=ja.column,ua=ta.toLowerCase());!pa||"date"!==pa.type&&"esriFieldTypeDate"!==pa.type||(this.datefields[pa.name]=1);A.has(ua)||(A.add(ua),D.push(ta));ja.column=ta;break}case "function":{const {name:pa,args:ua}=ja;ja=ua.value.length;O&&(O=q.isStandardized(pa,ja));S&&(S=ea.isAggregate(pa,
ja))}}});return{referencedFieldNames:Array.from(D),isStandardized:O,isAggregate:S}};n.visitAll=function(m,D){if(null!=m)switch(D(m),m.type){case "when_clause":this.visitAll(m.operand,D);this.visitAll(m.value,D);break;case "case_expression":for(const A of m.clauses)this.visitAll(A,D);"simple"===m.format&&this.visitAll(m.operand,D);null!==m.else&&this.visitAll(m.else,D);break;case "expr_list":for(const A of m.value)this.visitAll(A,D);break;case "unary_expr":this.visitAll(m.expr,D);break;case "binary_expr":this.visitAll(m.left,
D);this.visitAll(m.right,D);break;case "function":this.visitAll(m.args,D)}};n.evaluateNodeToJavaScript=function(m){switch(m.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(m.value)+", "+JSON.stringify(m.qualifier)+","+JSON.stringify(m.op)+")";case "case_expression":var D="";if("simple"===m.format){var A="this.makeComparable("+this.evaluateNodeToJavaScript(m.operand)+")";D="( ";for(let O=0;O<m.clauses.length;O++)D+=" ("+A+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(m.clauses[O].operand)+
")) ? ("+this.evaluateNodeToJavaScript(m.clauses[O].value)+") : "}else for(D="( ",A=0;A<m.clauses.length;A++)D+=" this.makeBool("+this.evaluateNodeToJavaScript(m.clauses[A].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(m.clauses[A].value)+") : ";D=null!==m.else?D+this.evaluateNodeToJavaScript(m.else):D+"null";return D+=" )";case "param":return"this.lookup("+JSON.stringify(m.value.toLowerCase())+",lookups)";case "expr_list":D="[";for(A of m.value)"["!==D&&(D+=","),D+=this.evaluateNodeToJavaScript(A);
return D+="]";case "unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(m.expr)+")";case "binary_expr":switch(m.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+" )";case "IS":if("null"!==m.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(m.left)+
")";case "ISNOT":if("null"!==m.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(m.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(m.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(m.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(m.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(m.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(m.left)+
","+this.evaluateNodeToJavaScript(m.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+","+JSON.stringify(m.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+","+JSON.stringify(m.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+
JSON.stringify(m.operator)+","+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(m.operator)+","+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+")"}throw Error("Not Supported Operator "+m.operator);case "null":case "bool":case "string":case "number":return JSON.stringify(m.value);case "date":return"(new Date("+t(m.value).getTime().toString()+"))";case "timestamp":return"(new Date("+
l(m.value).getTime().toString()+"))";case "current_time":return"date"===m.mode?"this.currentDate()":"this.currentTimestamp()";case "column_ref":return"this.featureValue(feature,"+JSON.stringify(m.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(m.name)+","+this.evaluateNodeToJavaScript(m.args)+")"}throw Error("Unsupported sql syntax "+m.type);};n.evaluateNode=function(m,D,A){switch(m.type){case "interval":return D=this.evaluateNode(m.value,D,A),
q.SqlInterval.createFromValueAndQualifer(D,m.qualifier,m.op);case "case_expression":if("simple"===m.format){var O=p(this.evaluateNode(m.operand,D,A));for(var S=0;S<m.clauses.length;S++)if(O===p(this.evaluateNode(m.clauses[S].operand,D,A)))return this.evaluateNode(m.clauses[S].value,D,A)}else for(O=0;O<m.clauses.length;O++)if(!0===this.evaluateNode(m.clauses[O].operand,D,A))return this.evaluateNode(m.clauses[O].value,D,A);return null!==m.else?this.evaluateNode(m.else,D,A):null;case "param":return this.parameters[m.value.toLowerCase()];
case "expr_list":O=[];for(S of m.value)O.push(this.evaluateNode(S,D,A));return O;case "unary_expr":return G(this.evaluateNode(m.expr,D,A));case "binary_expr":switch(m.operator){case "AND":return v(this.evaluateNode(m.left,D,A),this.evaluateNode(m.right,D,A));case "OR":return x(this.evaluateNode(m.left,D,A),this.evaluateNode(m.right,D,A));case "IS":if("null"!==m.right.type)throw Error("Unsupported RHS for IS");return null===this.evaluateNode(m.left,D,A);case "ISNOT":if("null"!==m.right.type)throw Error("Unsupported RHS for IS");
return null!==this.evaluateNode(m.left,D,A);case "IN":return O=aa(this.evaluateNode(m.right,D,A)),M(this.evaluateNode(m.left,D,A),O);case "NOT IN":return O=aa(this.evaluateNode(m.right,D,A)),G(M(this.evaluateNode(m.left,D,A),O));case "BETWEEN":return O=this.evaluateNode(m.left,D,A),m=this.evaluateNode(m.right,D,A),null==O||null==m[0]||null==m[1]?null:O>=p(m[0])&&O<=p(m[1]);case "NOTBETWEEN":return O=this.evaluateNode(m.left,D,A),m=this.evaluateNode(m.right,D,A),null==O||null==m[0]||null==m[1]?null:
O<p(m[0])||O>p(m[1]);case "LIKE":return d(this.evaluateNode(m.left,D,A),this.evaluateNode(m.right,D,A),m.escape);case "NOT LIKE":return G(d(this.evaluateNode(m.left,D,A),this.evaluateNode(m.right,D,A),m.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return J(m.operator,this.evaluateNode(m.left,D,A),this.evaluateNode(m.right,D,A));case "-":case "+":case "*":case "/":return W(m.operator,this.evaluateNode(m.left,D,A),this.evaluateNode(m.right,D,A))}case "null":case "bool":case "string":case "number":return m.value;
case "date":return t(m.value);case "timestamp":return l(m.value);case "current_time":return D=new Date,"date"===m.mode&&D.setHours(0,0,0,0),D;case "column_ref":return B(D,m.column,this.datefields,A);case "function":return D=this.evaluateNode(m.args,D,A),this.isAggregate?ea.aggregateFunction(m.name,D):q.evaluateFunction(m.name,D)}throw Error("Unsupported sql syntax "+m.type);};e._createClass(T,[{key:"fieldNames",get:function(){return this.referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=
this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this.visitAll(this.parseTree,m=>{"current_time"===m.type?this._hasDateFunctions=!0:"function"===m.type&&(this._hasDateFunctions=this._hasDateFunctions||ka.has(m.name.toLowerCase()))});return this._hasDateFunctions}}]);return T}();const Q={getAttribute(T,n){return(T&&"object"===typeof T.attributes?T.attributes:T)[n]}};r.WhereClause=K;r.defaultAttributeAdapter=Q;Object.defineProperty(r,"__esModule",{value:!0})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],
function(r){function e(q){let w=0;for(let g=0;g<q.length;g++)w+=q[g];return w/q.length}function ha(q){const w=e(q),g=q.length;let E=0;for(const l of q)E+=(l-w)**2;return 1<g?E/(g-1):0}const ea={min:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.min.apply(Math,q[0])},max:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.max.apply(Math,q[0])},avg:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:e(q[0])},sum:{minParams:1,maxParams:1,evaluate:q=>{if(null==q[0])q=null;else{{q=q[0];
let w=0;for(let g=0;g<q.length;g++)w+=q[g];q=w}}return q}},stddev:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.sqrt(ha(q[0]))},count:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:q[0].length},var:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:ha(q[0])}};r.aggregateFunction=function(q,w){const g=ea[q.toLowerCase()];if(null==g)throw Error("Function Not Recognised");if(w.length<g.minParams||w.length>g.maxParams)throw Error(`Invalid Parameter count for call to ${q.toUpperCase()}`);
return g.evaluate(w)};r.isAggregate=function(q,w){q=ea[q.toLowerCase()];return null!=q&&w>=q.minParams&&w<=q.maxParams};Object.defineProperty(r,"__esModule",{value:!0})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(r,e){let ha=function(){function q(){this.op="+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}q.fixDefaults=function(w){if(null!==w.precision||null!==w.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");
};q.createFromMilliseconds=function(w){const g=new q;g.second=w/1E3;return g};q.createFromValueAndQualifer=function(w,g,E){let l=null;const t=new q;t.op="-"===E?"-":"+";if("interval-period"===g.type){q.fixDefaults(g);if("year"===g.period||"month"===g.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(w))t[g.period]=parseFloat(w);else throw Error("Illegal Interval");}else{q.fixDefaults(g.start);q.fixDefaults(g.end);if("year"===g.start.period||"month"===g.start.period)throw Error("Year-Month Intervals not supported");
if("year"===g.end.period||"month"===g.end.period)throw Error("Year-Month Intervals not supported");switch(g.start.period){case "day":switch(g.end.period){case "hour":l=/^[0-9]{1,} [0-9]{1,}$/;if(l.test(w))t[g.start.period]=parseFloat(w.split(" ")[0]),t[g.end.period]=parseFloat(w.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":l=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(l.test(w))t[g.start.period]=parseFloat(w.split(" ")[0]),w=w.split(" ")[1].split(":"),t.hour=parseFloat(w[0]),
t.minute=parseFloat(w[1]);else throw Error("Illegal Interval");break;case "second":l=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(l.test(w))t[g.start.period]=parseFloat(w.split(" ")[0]),w=w.split(" ")[1].split(":"),t.hour=parseFloat(w[0]),t.minute=parseFloat(w[1]),t.second=parseFloat(w[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "hour":switch(g.end.period){case "minute":l=/^[0-9]{1,}:[0-9]{1,}$/;if(l.test(w))t.hour=parseFloat(w.split(":")[0]),
t.minute=parseFloat(w.split(":")[1]);else throw Error("Illegal Interval");break;case "second":l=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(l.test(w))w=w.split(":"),t.hour=parseFloat(w[0]),t.minute=parseFloat(w[1]),t.second=parseFloat(w[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "minute":switch(g.end.period){case "second":l=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(l.test(w))w=w.split(":"),t.minute=parseFloat(w[0]),t.second=parseFloat(w[1]);
else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;default:throw"Invalid Interval.";}}return t};q.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return q}();const ea={extract:{minParams:2,maxParams:2,evaluate:([q,w])=>{if(null==w)return null;if(w instanceof Date)switch(q.toUpperCase()){case "SECOND":return w.getSeconds();case "MINUTE":return w.getMinutes();
case "HOUR":return w.getHours();case "DAY":return w.getDate();case "MONTH":return w.getMonth()+1;case "YEAR":return w.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:q=>{if(2===q.length){const [w,g]=q;return null==w||null==g?null:w.toString().substring(g-1)}if(3===q.length){const [w,g,E]=q;return null==w||null==g||null==E?null:0>=E?"":w.toString().substring(g-1,g+E-1)}}},position:{minParams:2,maxParams:2,evaluate:([q,w])=>null==q||
null==w?null:w.indexOf(q)+1},trim:{minParams:2,maxParams:3,evaluate:q=>{var w=3===q.length,g=w?q[1]:" ";w=w?q[2]:q[1];if(null==g||null==w)return null;g=`(${e.escapeRegExpString(g)})`;switch(q[0]){case "BOTH":return w.replace(new RegExp(`^${g}*|${g}*$`,"g"),"");case "LEADING":return w.replace(new RegExp(`^${g}*`,"g"),"");case "TRAILING":return w.replace(new RegExp(`${g}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.abs(q[0])},
ceiling:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.ceil(q[0])},floor:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.floor(q[0])},log:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.log(q[0])},log10:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.log(q[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.sin(q[0])},cos:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.cos(q[0])},tan:{minParams:1,maxParams:1,evaluate:q=>
null==q[0]?null:Math.tan(q[0])},asin:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.asin(q[0])},acos:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.acos(q[0])},atan:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.atan(q[0])},sign:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:0<q[0]?1:0>q[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:q=>null==q[0]||null==q[1]?null:q[0]**q[1]},mod:{minParams:2,maxParams:2,evaluate:q=>null==q[0]||null==q[1]?null:q[0]%q[1]},round:{minParams:1,
maxParams:2,evaluate:q=>{const w=q[0];q=2===q.length?10**q[1]:1;return null==w?null:Math.round(w*q)/q}},truncate:{minParams:1,maxParams:2,evaluate:q=>null==q[0]?null:1===q.length?parseInt(q[0].toFixed(0),10):parseFloat(q[0].toFixed(q[1]))},char_length:{minParams:1,maxParams:1,evaluate:q=>"string"===typeof q[0]||q[0]instanceof String?q[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:q=>{let w="";for(let g=0;g<q.length;g++){if(null==q[g])return null;w+=q[g].toString()}return w}},lower:{minParams:1,
maxParams:1,evaluate:q=>null==q[0]?null:q[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:q[0].toString().toUpperCase()}};r.SqlInterval=ha;r.evaluateFunction=function(q,w){const g=ea[q.toLowerCase()];if(null==g)throw Error("Function Not Recognised");if(w.length<g.minParams||w.length>g.maxParams)throw Error(`Invalid Parameter count for call to ${q.toUpperCase()}`);return g.evaluate(w)};r.isStandardized=function(q,w){q=ea[q.toLowerCase()];return null!=q&&w>=q.minParams&&
w<=q.maxParams};Object.defineProperty(r,"__esModule",{value:!0})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(r,e){var ha={exports:{}};(function(q){(function(w,g){q.exports&&(q.exports=g())})(e.commonjsGlobal,function(){function w(g,E,l,t){this.message=g;this.expected=E;this.found=l;this.location=t;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,w)}(function(g,E){function l(){this.constructor=
g}l.prototype=E.prototype;g.prototype=new l})(w,Error);w.buildMessage=function(g,E){function l(v){return v.charCodeAt(0).toString(16).toUpperCase()}function t(v){return v.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(x){return"\\x0"+l(x)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(x){return"\\x"+l(x)})}function aa(v){return v.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,
"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(x){return"\\x0"+l(x)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(x){return"\\x"+l(x)})}var G={literal:function(v){return'"'+t(v.text)+'"'},class:function(v){var x="",M;for(M=0;M<v.parts.length;M++)x+=v.parts[M]instanceof Array?aa(v.parts[M][0])+"-"+aa(v.parts[M][1]):aa(v.parts[M]);return"["+(v.inverted?"^":"")+x+"]"},any:function(v){return"any character"},end:function(v){return"end of input"},
other:function(v){return v.description}};return"Expected "+function(v){var x=Array(v.length),M;for(M=0;M<v.length;M++){var d=M;var p=v[M];p=G[p.type](p);x[d]=p}x.sort();if(0<x.length){for(v=M=1;M<x.length;M++)x[M-1]!==x[M]&&(x[v]=x[M],v++);x.length=v}switch(x.length){case 1:return x[0];case 2:return x[0]+" or "+x[1];default:return x.slice(0,-1).join(", ")+", or "+x[x.length-1]}}(g)+" but "+(E?'"'+t(E)+'"':"end of input")+" found."};return{SyntaxError:w,parse:function(g,E){function l(h,C){return{type:"literal",
text:h,ignoreCase:C}}function t(h,C,z){return{type:"class",parts:h,inverted:C,ignoreCase:z}}function aa(h){var C=fc[h],z;if(!C){for(z=h-1;!fc[z];)z--;C=fc[z];for(C={line:C.line,column:C.column};z<h;)10===g.charCodeAt(z)?(C.line++,C.column=1):C.column++,z++;fc[h]=C}return C}function G(h,C){var z=aa(h),ba=aa(C);return{start:{offset:h,line:z.line,column:z.column},end:{offset:C,line:ba.line,column:ba.column}}}function v(h){b<ub||(b>ub&&(ub=b,vc=[]),vc.push(h))}function x(){var h=b;var C=oa();if(C!==a)if(C=
d(),C!==a){var z=oa();z!==a?h=C:(b=h,h=a)}else b=h,h=a;else b=h,h=a;return h}function M(){var h=b;var C=d();if(C!==a){var z=[];var ba=b;var ra=oa();if(ra!==a){var Ba=Fa();if(Ba!==a){var Ha=oa();if(Ha!==a){var Na=d();Na!==a?ba=ra=[ra,Ba,Ha,Na]:(b=ba,ba=a)}else b=ba,ba=a}else b=ba,ba=a}else b=ba,ba=a;for(;ba!==a;)z.push(ba),ba=b,ra=oa(),ra!==a?(Ba=Fa(),Ba!==a?(Ha=oa(),Ha!==a?(Na=d(),Na!==a?ba=ra=[ra,Ba,Ha,Na]:(b=ba,ba=a)):(b=ba,ba=a)):(b=ba,ba=a)):(b=ba,ba=a);if(z!==a){h={type:"expr_list"};C=[C];for(ba=
0;ba<z.length;ba++)C.push(z[ba][3]);h.value=C}else b=h,h=a}else b=h,h=a;return h}function d(){var h=b;var C=p();if(C!==a){var z=[];var ba=b;var ra=oa();if(ra!==a){var Ba=u();if(Ba!==a){var Ha=oa();if(Ha!==a){var Na=p();Na!==a?ba=ra=[ra,Ba,Ha,Na]:(b=ba,ba=a)}else b=ba,ba=a}else b=ba,ba=a}else b=ba,ba=a;for(;ba!==a;)z.push(ba),ba=b,ra=oa(),ra!==a?(Ba=u(),Ba!==a?(Ha=oa(),Ha!==a?(Na=p(),Na!==a?ba=ra=[ra,Ba,Ha,Na]:(b=ba,ba=a)):(b=ba,ba=a)):(b=ba,ba=a)):(b=ba,ba=a);z!==a?h=C=bb(C,z):(b=h,h=a)}else b=h,
h=a;return h}function p(){var h=b;var C=J();if(C!==a){var z=[];var ba=b;var ra=oa();if(ra!==a){var Ba=f();if(Ba!==a){var Ha=oa();if(Ha!==a){var Na=J();Na!==a?ba=ra=[ra,Ba,Ha,Na]:(b=ba,ba=a)}else b=ba,ba=a}else b=ba,ba=a}else b=ba,ba=a;for(;ba!==a;)z.push(ba),ba=b,ra=oa(),ra!==a?(Ba=f(),Ba!==a?(Ha=oa(),Ha!==a?(Na=J(),Na!==a?ba=ra=[ra,Ba,Ha,Na]:(b=ba,ba=a)):(b=ba,ba=a)):(b=ba,ba=a)):(b=ba,ba=a);z!==a?h=C=bb(C,z):(b=h,h=a)}else b=h,h=a;return h}function J(){var h=b;var C=R();if(C===a){C=b;if(33===g.charCodeAt(b)){var z=
Qa;b++}else z=a,0===qa&&v(vb);if(z!==a){var ba=b;qa++;if(61===g.charCodeAt(b)){var ra=zb;b++}else ra=a,0===qa&&v(Fb);qa--;ra===a?ba=void 0:(b=ba,ba=a);ba!==a?C=z=[z,ba]:(b=C,C=a)}else b=C,C=a}C!==a?(z=oa(),z!==a?(ba=J(),ba!==a?h=C={type:"unary_expr",operator:"NOT",expr:ba}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a);if(h===a)if(h=b,C=L(),C!==a)if(z=oa(),z!==a){z=[];ba=b;ra=oa();if(ra!==a){var Ba=W();if(Ba!==a){var Ha=oa();if(Ha!==a){var Na=L();Na!==a?ba=ra=[ra,Ba,Ha,Na]:(b=ba,ba=a)}else b=ba,ba=a}else b=ba,ba=
a}else b=ba,ba=a;if(ba!==a)for(;ba!==a;)z.push(ba),ba=b,ra=oa(),ra!==a?(Ba=W(),Ba!==a?(Ha=oa(),Ha!==a?(Na=L(),Na!==a?ba=ra=[ra,Ba,Ha,Na]:(b=ba,ba=a)):(b=ba,ba=a)):(b=ba,ba=a)):(b=ba,ba=a);else z=a;z!==a&&(z={type:"arithmetic",tail:z});z===a&&(z=b,ba=I(),ba!==a?(ra=oa(),ra!==a?(ra=Aa(),ra!==a?(ra=oa(),ra!==a?(ra=M(),ra!==a?(Ba=oa(),Ba!==a?(Ba=Ea(),Ba!==a?z=ba={op:ba,right:ra}:(b=z,z=a)):(b=z,z=a)):(b=z,z=a)):(b=z,z=a)):(b=z,z=a)):(b=z,z=a)):(b=z,z=a),z===a&&(z=b,ba=I(),ba!==a?(ra=oa(),ra!==a?(ra=Aa(),
ra!==a?(ra=oa(),ra!==a?(ra=Ea(),ra!==a?z=ba={op:ba,right:{type:"expr_list",value:[]}}:(b=z,z=a)):(b=z,z=a)):(b=z,z=a)):(b=z,z=a)):(b=z,z=a),z===a&&(z=b,ba=I(),ba!==a?(ra=oa(),ra!==a?(ra=n(),ra!==a?z=ba={op:ba,right:ra}:(b=z,z=a)):(b=z,z=a)):(b=z,z=a))),z===a&&(z=b,ra=R(),ra!==a?(ba=oa(),ba!==a?(ba=N(),ba!==a?(Ba=oa(),Ba!==a?(Ba=L(),Ba!==a?(Ha=oa(),Ha!==a?(Ha=f(),Ha!==a?(ra=oa(),ra!==a?(ra=L(),ra!==a?z=ra={op:"NOT"+ba,right:{type:"expr_list",value:[Ba,ra]}}:(b=z,z=a)):(b=z,z=a)):(b=z,z=a)):(b=z,z=
a)):(b=z,z=a)):(b=z,z=a)):(b=z,z=a)):(b=z,z=a)):(b=z,z=a),z===a&&(z=b,ra=N(),ra!==a?(ba=oa(),ba!==a?(ba=L(),ba!==a?(Ba=oa(),Ba!==a?(Ba=f(),Ba!==a?(Ha=oa(),Ha!==a?(Ha=L(),Ha!==a?z=ra={op:ra,right:{type:"expr_list",value:[ba,Ha]}}:(b=z,z=a)):(b=z,z=a)):(b=z,z=a)):(b=z,z=a)):(b=z,z=a)):(b=z,z=a)):(b=z,z=a)),z===a&&(z=b,ba=c(),ba!==a?(ra=oa(),ra!==a?(ra=R(),ra!==a?(ra=oa(),ra!==a?(ra=L(),ra!==a?z=ba={op:ba+"NOT",right:ra}:(b=z,z=a)):(b=z,z=a)):(b=z,z=a)):(b=z,z=a)):(b=z,z=a),z===a&&(z=b,ba=c(),ba!==a?
(ra=oa(),ra!==a?(ra=L(),ra!==a?z=ba={op:ba,right:ra}:(b=z,z=a)):(b=z,z=a)):(b=z,z=a)),z===a&&(z=b,ba=B(),ba!==a?(ra=oa(),ra!==a?(ra=ja(),ra!==a?(Ba=oa(),Ba!==a?(Ba=b,g.substr(b,6).toLowerCase()===zd?(Ha=g.substr(b,6),b+=6):(Ha=a,0===qa&&v(Ad)),Ha!==a?(Ha=b,qa++,Na=Q(),qa--,Na===a?Ha=void 0:(b=Ha,Ha=a),Ha!==a?Ba="ESCAPE":(b=Ba,Ba=a)):(b=Ba,Ba=a),Ba!==a?(Ba=oa(),Ba!==a?(Ba=pa(),Ba!==a?z=ba={op:ba,right:ra,escape:Ba.value}:(b=z,z=a)):(b=z,z=a)):(b=z,z=a)):(b=z,z=a)):(b=z,z=a)):(b=z,z=a)):(b=z,z=a),z===
a&&(z=b,ba=B(),ba!==a?(ra=oa(),ra!==a?(ra=ja(),ra!==a?z=ba={op:ba,right:ra,escape:""}:(b=z,z=a)):(b=z,z=a)):(b=z,z=a))))));z===a&&(z=null);z!==a?(h=C,C=z,""==C||void 0==C||null==C?C=h:(z=null,C=z="arithmetic"==C.type?bb(h,C.tail):fb(C.op,h,C.right,C.escape)),h=C):(b=h,h=a)}else b=h,h=a;else b=h,h=a;return h}function W(){if(g.substr(b,2)===ec){var h=ec;b+=2}else h=a,0===qa&&v(mb);h===a&&(62===g.charCodeAt(b)?(h=yb,b++):(h=a,0===qa&&v(Va)),h===a&&(g.substr(b,2)===kb?(h=kb,b+=2):(h=a,0===qa&&v(tb)),
h===a&&(g.substr(b,2)===Oa?(h=Oa,b+=2):(h=a,0===qa&&v(Gb)),h===a&&(60===g.charCodeAt(b)?(h=V,b++):(h=a,0===qa&&v(da)),h===a&&(61===g.charCodeAt(b)?(h=zb,b++):(h=a,0===qa&&v(Fb)),h===a&&(g.substr(b,2)===U?(h=U,b+=2):(h=a,0===qa&&v(la))))))));return h}function B(){var h=h=b;var C=R();if(C!==a){var z=oa();if(z!==a){var ba=k();ba!==a?h=C=[C,z,ba]:(b=h,h=a)}else b=h,h=a}else b=h,h=a;h!==a&&(h=h[0]+" "+h[2]);h===a&&(h=k());return h}function I(){var h=h=b;var C=R();if(C!==a){var z=oa();if(z!==a){var ba=
Ta();ba!==a?h=C=[C,z,ba]:(b=h,h=a)}else b=h,h=a}else b=h,h=a;h!==a&&(h=h[0]+" "+h[2]);h===a&&(h=Ta());return h}function L(){var h=b;var C=ia();if(C!==a){var z=[];var ba=b;var ra=oa();if(ra!==a){var Ba=Y();if(Ba!==a){var Ha=oa();if(Ha!==a){var Na=ia();Na!==a?ba=ra=[ra,Ba,Ha,Na]:(b=ba,ba=a)}else b=ba,ba=a}else b=ba,ba=a}else b=ba,ba=a;for(;ba!==a;)z.push(ba),ba=b,ra=oa(),ra!==a?(Ba=Y(),Ba!==a?(Ha=oa(),Ha!==a?(Na=ia(),Na!==a?ba=ra=[ra,Ba,Ha,Na]:(b=ba,ba=a)):(b=ba,ba=a)):(b=ba,ba=a)):(b=ba,ba=a);z!==
a?h=C=bb(C,z):(b=h,h=a)}else b=h,h=a;return h}function Y(){if(43===g.charCodeAt(b)){var h=va;b++}else h=a,0===qa&&v(xa);h===a&&(45===g.charCodeAt(b)?(h=Ia,b++):(h=a,0===qa&&v(Ma)));return h}function ia(){var h=b;var C=ka();if(C!==a){var z=[];var ba=b;var ra=oa();if(ra!==a){var Ba=fa();if(Ba!==a){var Ha=oa();if(Ha!==a){var Na=ka();Na!==a?ba=ra=[ra,Ba,Ha,Na]:(b=ba,ba=a)}else b=ba,ba=a}else b=ba,ba=a}else b=ba,ba=a;for(;ba!==a;)z.push(ba),ba=b,ra=oa(),ra!==a?(Ba=fa(),Ba!==a?(Ha=oa(),Ha!==a?(Na=ka(),
Na!==a?ba=ra=[ra,Ba,Ha,Na]:(b=ba,ba=a)):(b=ba,ba=a)):(b=ba,ba=a)):(b=ba,ba=a);z!==a?h=C=bb(C,z):(b=h,h=a)}else b=h,h=a;return h}function fa(){if(42===g.charCodeAt(b)){var h=$a;b++}else h=a,0===qa&&v(Za);h===a&&(47===g.charCodeAt(b)?(h=Ya,b++):(h=a,0===qa&&v(ib)));return h}function ka(){var h=pa();if(h===a){var C=b;var z=b;var ba=Da();if(ba!==a){var ra=Ra();if(ra!==a){var Ba=Ka();Ba!==a?z=ba=parseFloat(ba+ra+Ba):(b=z,z=a)}else b=z,z=a}else b=z,z=a;z===a&&(z=b,ba=Da(),ba!==a?(ra=Ra(),ra!==a?z=ba=parseFloat(ba+
ra):(b=z,z=a)):(b=z,z=a),z===a&&(z=b,ba=Da(),ba!==a?(ra=Ka(),ra!==a?z=ba=parseFloat(ba+ra):(b=z,z=a)):(b=z,z=a),z===a&&(z=b,ba=Da(),ba!==a&&(ba=parseFloat(ba)),z=ba)));var Ha=z;if(Ha!==a){var Na=b;qa++;var Bd=K();qa--;Bd===a?Na=void 0:(b=Na,Na=a);Na!==a?C=Ha={type:"number",value:Ha}:(b=C,C=a)}else b=C,C=a;h=C;if(h===a){var Rb=b;var Hb=b;if(g.substr(b,4).toLowerCase()===Cd){var gc=g.substr(b,4);b+=4}else gc=a,0===qa&&v(Dd);if(gc!==a){var Sb=b;qa++;var Ed=Q();qa--;Ed===a?Sb=void 0:(b=Sb,Sb=a);Sb!==
a?Hb=gc=[gc,Sb]:(b=Hb,Hb=a)}else b=Hb,Hb=a;var Cb=Hb;Cb!==a&&(Cb={type:"bool",value:!0});Rb=Cb;if(Rb===a){Rb=b;var Ib=b;if(g.substr(b,5).toLowerCase()===Fd){var hc=g.substr(b,5);b+=5}else hc=a,0===qa&&v(Gd);if(hc!==a){var Tb=b;qa++;var Hd=Q();qa--;Hd===a?Tb=void 0:(b=Tb,Tb=a);Tb!==a?Ib=hc=[hc,Tb]:(b=Ib,Ib=a)}else b=Ib,Ib=a;Cb=Ib;Cb!==a&&(Cb={type:"bool",value:!1});Rb=Cb}h=Rb;if(h===a){var Jb=b;if(g.substr(b,4).toLowerCase()===Id){var ic=g.substr(b,4);b+=4}else ic=a,0===qa&&v(Jd);if(ic!==a){var Ub=
b;qa++;var Kd=Q();qa--;Kd===a?Ub=void 0:(b=Ub,Ub=a);Ub!==a?Jb=ic=[ic,Ub]:(b=Jb,Jb=a)}else b=Jb,Jb=a;var wc=Jb;wc!==a&&(wc={type:"null",value:null});h=wc;if(h===a){var Ab=b;var Kb=b;if(g.substr(b,4).toLowerCase()===Ld){var xc=g.substr(b,4);b+=4}else xc=a,0===qa&&v(Md);if(xc!==a){var jc=b;qa++;var Nd=Q();qa--;Nd===a?jc=void 0:(b=jc,jc=a);jc!==a?Kb=xc="DATE":(b=Kb,Kb=a)}else b=Kb,Kb=a;var Wc=Kb;if(Wc!==a){var Od=oa();if(Od!==a){var Xc=ja();Xc!==a?Ab=Wc={type:"date",value:Xc.value}:(b=Ab,Ab=a)}else b=
Ab,Ab=a}else b=Ab,Ab=a;h=Ab;if(h===a){var Bb=b;var Lb=b;if(g.substr(b,9).toLowerCase()===Pd){var yc=g.substr(b,9);b+=9}else yc=a,0===qa&&v(Qd);if(yc!==a){var kc=b;qa++;var Rd=Q();qa--;Rd===a?kc=void 0:(b=kc,kc=a);kc!==a?Lb=yc="TIMESTAMP":(b=Lb,Lb=a)}else b=Lb,Lb=a;var Yc=Lb;if(Yc!==a){var Sd=oa();if(Sd!==a){var Zc=ja();Zc!==a?Bb=Yc={type:"timestamp",value:Zc.value}:(b=Bb,Bb=a)}else b=Bb,Bb=a}else b=Bb,Bb=a;h=Bb;if(h===a){var Wa=b;var Vb=Z();if(Vb!==a){var zc=oa();if(zc!==a){if(45===g.charCodeAt(b)){var wb=
Ia;b++}else wb=a,0===qa&&v(Ma);wb===a&&(43===g.charCodeAt(b)?(wb=va,b++):(wb=a,0===qa&&v(xa)));if(wb!==a){var Ac=oa();if(Ac!==a){var Wb=ja();if(Wb!==a){var Td=oa();if(Td!==a){var $c=D();$c!==a?Wa=Vb={type:"interval",value:Wb,qualifier:$c,op:wb}:(b=Wa,Wa=a)}else b=Wa,Wa=a}else b=Wa,Wa=a}else b=Wa,Wa=a}else b=Wa,Wa=a}else b=Wa,Wa=a}else b=Wa,Wa=a;Wa===a&&(Wa=b,Vb=Z(),Vb!==a?(zc=oa(),zc!==a?(wb=ja(),wb!==a?(Ac=oa(),Ac!==a?(Wb=D(),Wb!==a?Wa=Vb={type:"interval",value:wb,qualifier:Wb,op:""}:(b=Wa,Wa=a)):
(b=Wa,Wa=a)):(b=Wa,Wa=a)):(b=Wa,Wa=a)):(b=Wa,Wa=a));h=Wa}}}}}}var Ua=h;if(Ua===a){var db=b;var Mb=b;if(g.substr(b,7).toLowerCase()===Ud){var Bc=g.substr(b,7);b+=7}else Bc=a,0===qa&&v(Vd);if(Bc!==a){var lc=b;qa++;var Wd=Q();qa--;Wd===a?lc=void 0:(b=lc,lc=a);lc!==a?Mb=Bc="EXTRACT":(b=Mb,Mb=a)}else b=Mb,Mb=a;var ad=Mb;if(ad!==a){var Xd=oa();if(Xd!==a){var Yd=Aa();if(Yd!==a){var Zd=oa();if(Zd!==a){var qb=y();qb===a&&(qb=F(),qb===a&&(qb=X(),qb===a&&(qb=ma(),qb===a&&(qb=na(),qb===a&&(qb=sa())))));var bd=
qb;if(bd!==a){var $d=oa();if($d!==a){var ae=P();if(ae!==a){var be=oa();if(be!==a){var cd=d();if(cd!==a){var ce=oa();if(ce!==a){var de=Ea();de!==a?db=ad={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:bd},cd]}}:(b=db,db=a)}else b=db,db=a}else b=db,db=a}else b=db,db=a}else b=db,db=a}else b=db,db=a}else b=db,db=a}else b=db,db=a}else b=db,db=a}else b=db,db=a}else b=db,db=a;Ua=db;if(Ua===a){var ab=b;var Nb=b;if(g.substr(b,9).toLowerCase()===ee){var Cc=g.substr(b,9);b+=
9}else Cc=a,0===qa&&v(fe);if(Cc!==a){var mc=b;qa++;var ge=Q();qa--;ge===a?mc=void 0:(b=mc,mc=a);mc!==a?Nb=Cc="SUBSTRING":(b=Nb,Nb=a)}else b=Nb,Nb=a;var dd=Nb;if(dd!==a){var he=oa();if(he!==a){var ie=Aa();if(ie!==a){var je=oa();if(je!==a){var Dc=d();if(Dc!==a){var ke=oa();if(ke!==a){var le=P();if(le!==a){var me=oa();if(me!==a){var Ec=d();if(Ec!==a){var ne=oa();if(ne!==a){var lb=b;var Ob=b;if(g.substr(b,3).toLowerCase()===oe){var Fc=g.substr(b,3);b+=3}else Fc=a,0===qa&&v(pe);if(Fc!==a){var nc=b;qa++;
var qe=Q();qa--;qe===a?nc=void 0:(b=nc,nc=a);nc!==a?Ob=Fc="FOR":(b=Ob,Ob=a)}else b=Ob,Ob=a;var Xb=Ob;if(Xb!==a){var ed=oa();if(ed!==a){var fd=d();if(fd!==a){var gd=oa();gd!==a?lb=Xb=[Xb,ed,fd,gd]:(b=lb,lb=a)}else b=lb,lb=a}else b=lb,lb=a}else b=lb,lb=a;lb===a&&(lb=null);lb!==a?(Xb=Ea(),Xb!==a?ab=dd={type:"function",name:"substring",args:{type:"expr_list",value:lb?[Dc,Ec,lb[2]]:[Dc,Ec]}}:(b=ab,ab=a)):(b=ab,ab=a)}else b=ab,ab=a}else b=ab,ab=a}else b=ab,ab=a}else b=ab,ab=a}else b=ab,ab=a}else b=ab,ab=
a}else b=ab,ab=a}else b=ab,ab=a}else b=ab,ab=a}else b=ab,ab=a;Ua=ab;if(Ua===a){var La=b;var Yb=ca();if(Yb!==a){var Gc=oa();if(Gc!==a){var Hc=Aa();if(Hc!==a){var Ic=oa();if(Ic!==a){var rb=m();rb===a&&(rb=null);if(rb!==a){var Jc=oa();if(Jc!==a){var Zb=d();if(Zb!==a){var Kc=oa();if(Kc!==a){var Lc=P();if(Lc!==a){var re=oa();if(re!==a){var hd=d();if(hd!==a){var se=oa();if(se!==a){var te=Ea();te!==a?La=Yb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==rb?"BOTH":rb},
Zb,hd]}}:(b=La,La=a)}else b=La,La=a}else b=La,La=a}else b=La,La=a}else b=La,La=a}else b=La,La=a}else b=La,La=a}else b=La,La=a}else b=La,La=a}else b=La,La=a}else b=La,La=a}else b=La,La=a}else b=La,La=a;La===a&&(La=b,Yb=ca(),Yb!==a?(Gc=oa(),Gc!==a?(Hc=Aa(),Hc!==a?(Ic=oa(),Ic!==a?(rb=m(),rb===a&&(rb=null),rb!==a?(Jc=oa(),Jc!==a?(Zb=d(),Zb!==a?(Kc=oa(),Kc!==a?(Lc=Ea(),Lc!==a?La=Yb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==rb?"BOTH":rb},Zb]}}:(b=La,La=a)):(b=
La,La=a)):(b=La,La=a)):(b=La,La=a)):(b=La,La=a)):(b=La,La=a)):(b=La,La=a)):(b=La,La=a)):(b=La,La=a));Ua=La;if(Ua===a){var eb=b;var Pb=b;if(g.substr(b,8).toLowerCase()===ue){var Mc=g.substr(b,8);b+=8}else Mc=a,0===qa&&v(ve);if(Mc!==a){var oc=b;qa++;var we=Q();qa--;we===a?oc=void 0:(b=oc,oc=a);oc!==a?Pb=Mc="POSITION":(b=Pb,Pb=a)}else b=Pb,Pb=a;var id=Pb;if(id!==a){var xe=oa();if(xe!==a){var ye=Aa();if(ye!==a){var ze=oa();if(ze!==a){var jd=d();if(jd!==a){var Ae=oa();if(Ae!==a){var Be=Ta();if(Be!==a){var Ce=
oa();if(Ce!==a){var kd=d();if(kd!==a){var De=oa();if(De!==a){var Ee=Ea();Ee!==a?eb=id={type:"function",name:"position",args:{type:"expr_list",value:[jd,kd]}}:(b=eb,eb=a)}else b=eb,eb=a}else b=eb,eb=a}else b=eb,eb=a}else b=eb,eb=a}else b=eb,eb=a}else b=eb,eb=a}else b=eb,eb=a}else b=eb,eb=a}else b=eb,eb=a}else b=eb,eb=a;Ua=eb;if(Ua===a){var jb=b;var $b;var sb=b;sb=$b=H();if(sb===a)if(sb=b,96===g.charCodeAt(b)?($b=ld,b++):($b=a,0===qa&&v(md)),$b!==a){var pc=[];if(nd.test(g.charAt(b))){var xb=g.charAt(b);
b++}else xb=a,0===qa&&v(od);if(xb!==a)for(;xb!==a;)pc.push(xb),nd.test(g.charAt(b))?(xb=g.charAt(b),b++):(xb=a,0===qa&&v(od));else pc=a;pc!==a?(96===g.charCodeAt(b)?(xb=ld,b++):(xb=a,0===qa&&v(md)),xb!==a?sb=$b=pc.join(""):(b=sb,sb=a)):(b=sb,sb=a)}else b=sb,sb=a;var Nc=sb;if(Nc!==a){var Fe=oa();if(Fe!==a){var Ge=Aa();if(Ge!==a){var He=oa();if(He!==a){var ac=M();ac===a&&(ac=null);if(ac!==a){var Ie=oa();if(Ie!==a){var Je=Ea();Je!==a?jb=Nc={type:"function",name:Nc,args:ac?ac:{type:"expr_list",value:[]}}:
(b=jb,jb=a)}else b=jb,jb=a}else b=jb,jb=a}else b=jb,jb=a}else b=jb,jb=a}else b=jb,jb=a}else b=jb,jb=a;Ua=jb;if(Ua===a){var ob;var Pa=b;var bc=wa();if(bc!==a){var Oc=oa();if(Oc!==a){var cc=d();if(cc!==a){var Pc=oa();if(Pc!==a){var Db=[];for(ob=ta();ob!==a;)Db.push(ob),ob=ta();if(Db!==a)if(ob=oa(),ob!==a){var qc=ya();qc!==a?Pa=bc={type:"case_expression",format:"simple",operand:cc,clauses:Db,else:null}:(b=Pa,Pa=a)}else b=Pa,Pa=a;else b=Pa,Pa=a}else b=Pa,Pa=a}else b=Pa,Pa=a}else b=Pa,Pa=a}else b=Pa,Pa=
a;if(Pa===a)if(Pa=b,bc=wa(),bc!==a)if(Oc=oa(),Oc!==a)if(cc=d(),cc!==a)if(Pc=oa(),Pc!==a){Db=[];for(ob=ta();ob!==a;)Db.push(ob),ob=ta();if(Db!==a)if(ob=oa(),ob!==a)if(qc=za(),qc!==a){var Ke=oa();if(Ke!==a){var Le=ya();Le!==a?Pa=bc={type:"case_expression",format:"simple",operand:cc,clauses:Db,else:qc.value}:(b=Pa,Pa=a)}else b=Pa,Pa=a}else b=Pa,Pa=a;else b=Pa,Pa=a;else b=Pa,Pa=a}else b=Pa,Pa=a;else b=Pa,Pa=a;else b=Pa,Pa=a;else b=Pa,Pa=a;var Qc=Pa;if(Qc===a){var pb;var Xa=b;var dc=wa();if(dc!==a){var Rc=
oa();if(Rc!==a){var Eb=[];for(pb=ua();pb!==a;)Eb.push(pb),pb=ua();if(Eb!==a)if(pb=oa(),pb!==a){var rc=ya();rc!==a?Xa=dc={type:"case_expression",format:"searched",clauses:Eb,else:null}:(b=Xa,Xa=a)}else b=Xa,Xa=a;else b=Xa,Xa=a}else b=Xa,Xa=a}else b=Xa,Xa=a;if(Xa===a)if(Xa=b,dc=wa(),dc!==a)if(Rc=oa(),Rc!==a){Eb=[];for(pb=ua();pb!==a;)Eb.push(pb),pb=ua();if(Eb!==a)if(pb=oa(),pb!==a)if(rc=za(),rc!==a){var Me=oa();if(Me!==a){var Ne=ya();Ne!==a?Xa=dc={type:"case_expression",format:"searched",clauses:Eb,
else:rc.value}:(b=Xa,Xa=a)}else b=Xa,Xa=a}else b=Xa,Xa=a;else b=Xa,Xa=a;else b=Xa,Xa=a}else b=Xa,Xa=a;else b=Xa,Xa=a;Qc=Xa}Ua=Qc;if(Ua===a){var sc;var Qb=b;var pd=K();if(pd!==a){var Sc=[];for(sc=T();sc!==a;)Sc.push(sc),sc=T();Sc!==a?Qb=pd+=Sc.join(""):(b=Qb,Qb=a)}else b=Qb,Qb=a;var tc=Qb;if(tc!==a){var Tc=tc;tc=/^CURRENT_DATE$/i.test(Tc)?{type:"current_time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Tc)?{type:"current_time",mode:"timestamp"}:{type:"column_ref",table:"",column:Tc}}Ua=tc;if(Ua===a&&
(Ua=n(),Ua===a)){Ua=b;var qd=Aa();if(qd!==a){var Oe=oa();if(Oe!==a){var Uc=d();if(Uc!==a){var Pe=oa();if(Pe!==a){var Qe=Ea();Qe!==a?(Uc.paren=!0,Ua=qd=Uc):(b=Ua,Ua=a)}else b=Ua,Ua=a}else b=Ua,Ua=a}else b=Ua,Ua=a}else b=Ua,Ua=a}}}}}}}}return Ua}function H(){var h;var C=b;var z=K();if(z!==a){var ba=[];for(h=Q();h!==a;)ba.push(h),h=Q();ba!==a?C=z+=ba.join(""):(b=C,C=a)}else b=C,C=a;return C}function K(){if(nb.test(g.charAt(b))){var h=g.charAt(b);b++}else h=a,0===qa&&v(Re);return h}function Q(){if(Se.test(g.charAt(b))){var h=
g.charAt(b);b++}else h=a,0===qa&&v(Te);return h}function T(){if(Ue.test(g.charAt(b))){var h=g.charAt(b);b++}else h=a,0===qa&&v(Ve);return h}function n(){var h=b;if(64===g.charCodeAt(b)){var C=We;b++}else C=a,0===qa&&v(Xe);if(C!==a){var z=H();z!==a?h=C=[C,z]:(b=h,h=a)}else b=h,h=a;h!==a&&(h={type:"param",value:h[1]});return h}function m(){var h=b;if(g.substr(b,7).toLowerCase()===Ye){var C=g.substr(b,7);b+=7}else C=a,0===qa&&v(Ze);if(C!==a){C=b;qa++;var z=Q();qa--;z===a?C=void 0:(b=C,C=a);C!==a?h="LEADING":
(b=h,h=a)}else b=h,h=a;h===a&&(h=b,g.substr(b,8).toLowerCase()===$e?(C=g.substr(b,8),b+=8):(C=a,0===qa&&v(af)),C!==a?(C=b,qa++,z=Q(),qa--,z===a?C=void 0:(b=C,C=a),C!==a?h="TRAILING":(b=h,h=a)):(b=h,h=a),h===a&&(h=b,g.substr(b,4).toLowerCase()===bf?(C=g.substr(b,4),b+=4):(C=a,0===qa&&v(cf)),C!==a?(C=b,qa++,z=Q(),qa--,z===a?C=void 0:(b=C,C=a),C!==a?h="BOTH":(b=h,h=a)):(b=h,h=a)));return h}function D(){var h=b;var C=b;var z=A();if(z!==a){var ba=oa();if(ba!==a)if(ba=Aa(),ba!==a)if(ba=oa(),ba!==a)if(ba=
S(),ba!==a){var ra=oa();ra!==a?(ra=Ea(),ra!==a?C=z={type:"interval-period",period:z.value,precision:ba,secondary:null}:(b=C,C=a)):(b=C,C=a)}else b=C,C=a;else b=C,C=a;else b=C,C=a;else b=C,C=a}else b=C,C=a;C===a&&(C=b,z=A(),z!==a&&(z=rd(z)),C=z);if(C!==a)if(z=oa(),z!==a)if(z=b,g.substr(b,2).toLowerCase()===df?(ba=g.substr(b,2),b+=2):(ba=a,0===qa&&v(ef)),ba!==a?(ba=b,qa++,ra=Q(),qa--,ra===a?ba=void 0:(b=ba,ba=a),ba!==a?z="TO":(b=z,z=a)):(b=z,z=a),z!==a)if(z=oa(),z!==a){z=b;ba=A();ba!==a&&(ba={type:"interval-period",
period:ba.value,precision:null,secondary:null});z=ba;if(z===a){z=b;ba=sa();if(ba!==a)if(ba=oa(),ba!==a)if(ba=Aa(),ba!==a)if(ba=oa(),ba!==a)if(ba=S(),ba!==a)if(ra=oa(),ra!==a)if(ra=Fa(),ra!==a)if(ra=oa(),ra!==a)if(ra=O(),ra!==a){var Ba=oa();Ba!==a?(Ba=Ea(),Ba!==a?z=ba=sd(ba,ra):(b=z,z=a)):(b=z,z=a)}else b=z,z=a;else b=z,z=a;else b=z,z=a;else b=z,z=a;else b=z,z=a;else b=z,z=a;else b=z,z=a;else b=z,z=a;else b=z,z=a;z===a&&(z=b,ba=sa(),ba!==a?(ba=oa(),ba!==a?(ba=Aa(),ba!==a?(ba=oa(),ba!==a?(ba=S(),ba!==
a?(ra=oa(),ra!==a?(ra=Ea(),ra!==a?z=ba={type:"interval-period",period:"second",precision:ba,secondary:null}:(b=z,z=a)):(b=z,z=a)):(b=z,z=a)):(b=z,z=a)):(b=z,z=a)):(b=z,z=a)):(b=z,z=a),z===a&&(z=b,ba=sa(),ba!==a&&(ba={type:"interval-period",period:"second",precision:null,secondary:null}),z=ba))}z!==a?h=C={type:"interval-qualifier",start:C,end:z}:(b=h,h=a)}else b=h,h=a;else b=h,h=a;else b=h,h=a;else b=h,h=a;h===a&&(h=b,z=A(),z!==a?(C=oa(),C!==a?(C=Aa(),C!==a?(C=oa(),C!==a?(C=O(),C!==a?(ba=oa(),ba!==
a?(ba=Ea(),ba!==a?h=z={type:"interval-period",period:z.value,precision:C,secondary:null}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a),h===a&&(h=b,z=A(),z!==a&&(z=rd(z)),h=z,h===a&&(h=b,z=sa(),z!==a?(C=oa(),C!==a?(C=Aa(),C!==a?(C=oa(),C!==a?(C=S(),C!==a?(ba=oa(),ba!==a?(ba=Fa(),ba!==a?(z=oa(),z!==a?(z=O(),z!==a?(ba=oa(),ba!==a?(ba=Ea(),ba!==a?h=z=sd(C,z):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,
h=a),h===a&&(h=b,z=sa(),z!==a?(C=oa(),C!==a?(C=Aa(),C!==a?(C=oa(),C!==a?(C=O(),C!==a?(ba=oa(),ba!==a?(ba=Ea(),ba!==a?h=z={type:"interval-period",period:"second",precision:C,secondary:null}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a),h===a&&(h=b,z=sa(),z!==a&&(z={type:"interval-period",period:"second",precision:null,secondary:null}),h=z)))));return h}function A(){var h=b;h=X();h!==a&&(h={type:"string",value:"day"});h===a&&(h=b,h=ma(),h!==a&&(h={type:"string",value:"hour"}),
h===a&&(h=b,h=na(),h!==a&&(h={type:"string",value:"minute"}),h===a&&(h=b,h=F(),h!==a&&(h={type:"string",value:"month"}),h===a&&(h=b,h=y(),h!==a&&(h={type:"string",value:"year"})))));return h}function O(){var h=Ca();h!==a&&(h=parseFloat(h));return h}function S(){var h=Ca();h!==a&&(h=parseFloat(h));return h}function ja(){var h=pa();h===a&&(h=n());return h}function pa(){var h=b;if(39===g.charCodeAt(b)){var C=td;b++}else C=a,0===qa&&v(ud);C===a&&(g.substr(b,2)===vd?(C=vd,b+=2):(C=a,0===qa&&v(ff)));if(C!==
a){C=[];var z=b;g.substr(b,2)===uc?(z=uc,b+=2):(z=a,0===qa&&v(wd));z!==a&&(z="'");z===a&&(xd.test(g.charAt(b))?(z=g.charAt(b),b++):(z=a,0===qa&&v(yd)));for(;z!==a;)C.push(z),z=b,g.substr(b,2)===uc?(z=uc,b+=2):(z=a,0===qa&&v(wd)),z!==a&&(z="'"),z===a&&(xd.test(g.charAt(b))?(z=g.charAt(b),b++):(z=a,0===qa&&v(yd)));C!==a?(39===g.charCodeAt(b)?(z=td,b++):(z=a,0===qa&&v(ud)),z!==a?h=C={type:"string",value:C.join("")}:(b=h,h=a)):(b=h,h=a)}else b=h,h=a;return h}function ua(){var h=b;var C=Ja();if(C!==a)if(C=
oa(),C!==a)if(C=d(),C!==a){var z=oa();z!==a?(z=Ga(),z!==a?(z=oa(),z!==a?(z=d(),z!==a?h=C={type:"when_clause",operand:C,value:z}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)}else b=h,h=a;else b=h,h=a;else b=h,h=a;return h}function ta(){var h=b;var C=Ja();if(C!==a)if(C=oa(),C!==a)if(C=d(),C!==a){var z=oa();z!==a?(z=Ga(),z!==a?(z=oa(),z!==a?(z=d(),z!==a?h=C={type:"when_clause",operand:C,value:z}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)}else b=h,h=a;else b=h,h=a;else b=h,h=a;return h}function za(){var h=
b;var C=b;if(g.substr(b,4).toLowerCase()===gf){var z=g.substr(b,4);b+=4}else z=a,0===qa&&v(hf);if(z!==a){z=b;qa++;var ba=Q();qa--;ba===a?z=void 0:(b=z,z=a);z!==a?C="ELSE":(b=C,C=a)}else b=C,C=a;C!==a?(C=oa(),C!==a?(C=d(),C!==a?h={type:"else_clause",value:C}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a);return h}function Da(){var h=Ca();if(h===a){h=b;if(45===g.charCodeAt(b)){var C=Ia;b++}else C=a,0===qa&&v(Ma);C===a&&(43===g.charCodeAt(b)?(C=va,b++):(C=a,0===qa&&v(xa)));if(C!==a){var z=Ca();z!==a?h=C=C[0]+z:(b=
h,h=a)}else b=h,h=a}return h}function Ra(){var h=b;if(46===g.charCodeAt(b)){var C=jf;b++}else C=a,0===qa&&v(kf);C!==a?(C=Ca(),C===a&&(C=null),C!==a?h="."+(null!=C?C:""):(b=h,h=a)):(b=h,h=a);return h}function Ka(){var h;var C=h=b;if(lf.test(g.charAt(b))){var z=g.charAt(b);b++}else z=a,0===qa&&v(mf);z!==a?(nf.test(g.charAt(b))?(z=g.charAt(b),b++):(z=a,0===qa&&v(of)),z===a&&(z=null),z!==a?C="e"+(null===z?"":z):(b=C,C=a)):(b=C,C=a);C!==a?(z=Ca(),z!==a?h=C+z:(b=h,h=a)):(b=h,h=a);return h}function Ca(){var h=
[];var C=Sa();if(C!==a)for(;C!==a;)h.push(C),C=Sa();else h=a;h!==a&&(h=h.join(""));return h}function Sa(){if(pf.test(g.charAt(b))){var h=g.charAt(b);b++}else h=a,0===qa&&v(qf);return h}function Ta(){var h=b;if(g.substr(b,2).toLowerCase()===rf){var C=g.substr(b,2);b+=2}else C=a,0===qa&&v(sf);if(C!==a){C=b;qa++;var z=Q();qa--;z===a?C=void 0:(b=C,C=a);C!==a?h="IN":(b=h,h=a)}else b=h,h=a;return h}function c(){var h=b;if(g.substr(b,2).toLowerCase()===tf){var C=g.substr(b,2);b+=2}else C=a,0===qa&&v(uf);
if(C!==a){C=b;qa++;var z=Q();qa--;z===a?C=void 0:(b=C,C=a);C!==a?h="IS":(b=h,h=a)}else b=h,h=a;return h}function k(){var h=b;if(g.substr(b,4).toLowerCase()===vf){var C=g.substr(b,4);b+=4}else C=a,0===qa&&v(wf);if(C!==a){C=b;qa++;var z=Q();qa--;z===a?C=void 0:(b=C,C=a);C!==a?h="LIKE":(b=h,h=a)}else b=h,h=a;return h}function R(){var h=b;if(g.substr(b,3).toLowerCase()===xf){var C=g.substr(b,3);b+=3}else C=a,0===qa&&v(yf);if(C!==a){C=b;qa++;var z=Q();qa--;z===a?C=void 0:(b=C,C=a);C!==a?h="NOT":(b=h,h=
a)}else b=h,h=a;return h}function f(){var h=b;if(g.substr(b,3).toLowerCase()===zf){var C=g.substr(b,3);b+=3}else C=a,0===qa&&v(Af);if(C!==a){C=b;qa++;var z=Q();qa--;z===a?C=void 0:(b=C,C=a);C!==a?h="AND":(b=h,h=a)}else b=h,h=a;return h}function u(){var h=b;if(g.substr(b,2).toLowerCase()===Bf){var C=g.substr(b,2);b+=2}else C=a,0===qa&&v(Cf);if(C!==a){C=b;qa++;var z=Q();qa--;z===a?C=void 0:(b=C,C=a);C!==a?h="OR":(b=h,h=a)}else b=h,h=a;return h}function N(){var h=b;if(g.substr(b,7).toLowerCase()===Df){var C=
g.substr(b,7);b+=7}else C=a,0===qa&&v(Ef);if(C!==a){C=b;qa++;var z=Q();qa--;z===a?C=void 0:(b=C,C=a);C!==a?h="BETWEEN":(b=h,h=a)}else b=h,h=a;return h}function P(){var h=b;if(g.substr(b,4).toLowerCase()===Ff){var C=g.substr(b,4);b+=4}else C=a,0===qa&&v(Gf);if(C!==a){C=b;qa++;var z=Q();qa--;z===a?C=void 0:(b=C,C=a);C!==a?h="FROM":(b=h,h=a)}else b=h,h=a;return h}function ca(){var h=b;if(g.substr(b,4).toLowerCase()===Hf){var C=g.substr(b,4);b+=4}else C=a,0===qa&&v(If);if(C!==a){C=b;qa++;var z=Q();qa--;
z===a?C=void 0:(b=C,C=a);C!==a?h="TRIM":(b=h,h=a)}else b=h,h=a;return h}function Z(){var h=b;if(g.substr(b,8).toLowerCase()===Jf){var C=g.substr(b,8);b+=8}else C=a,0===qa&&v(Kf);if(C!==a){C=b;qa++;var z=Q();qa--;z===a?C=void 0:(b=C,C=a);C!==a?h="INTERVAL":(b=h,h=a)}else b=h,h=a;return h}function y(){var h=b;if(g.substr(b,4).toLowerCase()===Lf){var C=g.substr(b,4);b+=4}else C=a,0===qa&&v(Mf);if(C!==a){C=b;qa++;var z=Q();qa--;z===a?C=void 0:(b=C,C=a);C!==a?h="YEAR":(b=h,h=a)}else b=h,h=a;return h}function F(){var h=
b;if(g.substr(b,5).toLowerCase()===Nf){var C=g.substr(b,5);b+=5}else C=a,0===qa&&v(Of);if(C!==a){C=b;qa++;var z=Q();qa--;z===a?C=void 0:(b=C,C=a);C!==a?h="MONTH":(b=h,h=a)}else b=h,h=a;return h}function X(){var h=b;if(g.substr(b,3).toLowerCase()===Pf){var C=g.substr(b,3);b+=3}else C=a,0===qa&&v(Qf);if(C!==a){C=b;qa++;var z=Q();qa--;z===a?C=void 0:(b=C,C=a);C!==a?h="DAY":(b=h,h=a)}else b=h,h=a;return h}function ma(){var h=b;if(g.substr(b,4).toLowerCase()===Rf){var C=g.substr(b,4);b+=4}else C=a,0===
qa&&v(Sf);if(C!==a){C=b;qa++;var z=Q();qa--;z===a?C=void 0:(b=C,C=a);C!==a?h="HOUR":(b=h,h=a)}else b=h,h=a;return h}function na(){var h=b;if(g.substr(b,6).toLowerCase()===Tf){var C=g.substr(b,6);b+=6}else C=a,0===qa&&v(Uf);if(C!==a){C=b;qa++;var z=Q();qa--;z===a?C=void 0:(b=C,C=a);C!==a?h="MINUTE":(b=h,h=a)}else b=h,h=a;return h}function sa(){var h=b;if(g.substr(b,6).toLowerCase()===Vf){var C=g.substr(b,6);b+=6}else C=a,0===qa&&v(Wf);if(C!==a){C=b;qa++;var z=Q();qa--;z===a?C=void 0:(b=C,C=a);C!==
a?h="SECOND":(b=h,h=a)}else b=h,h=a;return h}function wa(){var h=b;if(g.substr(b,4).toLowerCase()===Xf){var C=g.substr(b,4);b+=4}else C=a,0===qa&&v(Yf);if(C!==a){C=b;qa++;var z=Q();qa--;z===a?C=void 0:(b=C,C=a);C!==a?h="CASE":(b=h,h=a)}else b=h,h=a;return h}function ya(){var h=b;if(g.substr(b,3).toLowerCase()===Zf){var C=g.substr(b,3);b+=3}else C=a,0===qa&&v($f);if(C!==a){C=b;qa++;var z=Q();qa--;z===a?C=void 0:(b=C,C=a);C!==a?h="END":(b=h,h=a)}else b=h,h=a;return h}function Ja(){var h=b;if(g.substr(b,
4).toLowerCase()===ag){var C=g.substr(b,4);b+=4}else C=a,0===qa&&v(bg);if(C!==a){C=b;qa++;var z=Q();qa--;z===a?C=void 0:(b=C,C=a);C!==a?h="WHEN":(b=h,h=a)}else b=h,h=a;return h}function Ga(){var h=b;if(g.substr(b,4).toLowerCase()===cg){var C=g.substr(b,4);b+=4}else C=a,0===qa&&v(dg);if(C!==a){C=b;qa++;var z=Q();qa--;z===a?C=void 0:(b=C,C=a);C!==a?h="THEN":(b=h,h=a)}else b=h,h=a;return h}function Fa(){if(44===g.charCodeAt(b)){var h=eg;b++}else h=a,0===qa&&v(fg);return h}function Aa(){if(40===g.charCodeAt(b)){var h=
gg;b++}else h=a,0===qa&&v(hg);return h}function Ea(){if(41===g.charCodeAt(b)){var h=ig;b++}else h=a,0===qa&&v(jg);return h}function oa(){var h;var C=[];for(h=cb();h!==a;)C.push(h),h=cb();return C}function cb(){if(kg.test(g.charAt(b))){var h=g.charAt(b);b++}else h=a,0===qa&&v(lg);return h}function fb(h,C,z,ba){h={type:"binary_expr",operator:h,left:C,right:z};void 0!==ba&&(h.escape=ba);return h}function bb(h,C){for(var z=0;z<C.length;z++)h=fb(C[z][1],h,C[z][3]);return h}E=void 0!==E?E:{};var a={},hb=
{start:x},gb=x,Qa="!",vb=l("!",!1),zb="\x3d",Fb=l("\x3d",!1),ec="\x3e\x3d",mb=l("\x3e\x3d",!1),yb="\x3e",Va=l("\x3e",!1),kb="\x3c\x3d",tb=l("\x3c\x3d",!1),Oa="\x3c\x3e",Gb=l("\x3c\x3e",!1),V="\x3c",da=l("\x3c",!1),U="!\x3d",la=l("!\x3d",!1),va="+",xa=l("+",!1),Ia="-",Ma=l("-",!1),$a="*",Za=l("*",!1),Ya="/",ib=l("/",!1),nb=/^[A-Za-z_\x80-\uFFFF]/,Re=t([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Se=/^[A-Za-z0-9_]/,Te=t([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Ue=/^[A-Za-z0-9_.\x80-\uFFFF]/,
Ve=t([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),We="@",Xe=l("@",!1),rd=function(h){return{type:"interval-period",period:h.value,precision:null,secondary:null}},sd=function(h,C){return{type:"interval-period",period:"second",precision:h,secondary:C}},td="'",ud=l("'",!1),vd="N'",ff=l("N'",!1),uc="''",wd=l("''",!1),xd=/^[^']/,yd=t(["'"],!0,!1),jf=".",kf=l(".",!1),pf=/^[0-9]/,qf=t([["0","9"]],!1,!1),lf=/^[eE]/,mf=t(["e","E"],!1,!1),nf=/^[+\-]/,of=t(["+","-"],!1,!1),Id="null",Jd=
l("NULL",!0),Cd="true",Dd=l("TRUE",!0),Fd="false",Gd=l("FALSE",!0),rf="in",sf=l("IN",!0),tf="is",uf=l("IS",!0),vf="like",wf=l("LIKE",!0),zd="escape",Ad=l("ESCAPE",!0),xf="not",yf=l("NOT",!0),zf="and",Af=l("AND",!0),Bf="or",Cf=l("OR",!0),Df="between",Ef=l("BETWEEN",!0),Ff="from",Gf=l("FROM",!0),oe="for",pe=l("FOR",!0),ee="substring",fe=l("SUBSTRING",!0),Ud="extract",Vd=l("EXTRACT",!0),Hf="trim",If=l("TRIM",!0),ue="position",ve=l("POSITION",!0),Pd="timestamp",Qd=l("TIMESTAMP",!0),Ld="date",Md=l("DATE",
!0),Ye="leading",Ze=l("LEADING",!0),$e="trailing",af=l("TRAILING",!0),bf="both",cf=l("BOTH",!0),df="to",ef=l("TO",!0),Jf="interval",Kf=l("INTERVAL",!0),Lf="year",Mf=l("YEAR",!0),Nf="month",Of=l("MONTH",!0),Pf="day",Qf=l("DAY",!0),Rf="hour",Sf=l("HOUR",!0),Tf="minute",Uf=l("MINUTE",!0),Vf="second",Wf=l("SECOND",!0),Xf="case",Yf=l("CASE",!0),Zf="end",$f=l("END",!0),ag="when",bg=l("WHEN",!0),cg="then",dg=l("THEN",!0),gf="else",hf=l("ELSE",!0),eg=",",fg=l(",",!1),gg="(",hg=l("(",!1),ig=")",jg=l(")",!1),
kg=/^[ \t\n\r]/,lg=t([" ","\t","\n","\r"],!1,!1),ld="`",md=l("`",!1),nd=/^[^`]/,od=t(["`"],!0,!1),b=0,fc=[{line:1,column:1}],ub=0,vc=[],qa=0;if("startRule"in E){if(!(E.startRule in hb))throw Error("Can't start parsing from rule \""+E.startRule+'".');gb=hb[E.startRule]}var Vc=gb();if(Vc!==a&&b===g.length)return Vc;Vc!==a&&b<g.length&&v({type:"end"});throw function(h,C,z){return new w(w.buildMessage(h,C),h,C,z)}(vc,ub<g.length?g.charAt(ub):null,ub<g.length?G(ub,ub+1):G(ub,ub));}}})})(ha);let ea=function(){function q(){}
q.parse=function(w){return ha.exports.parse(w)};return q}();r.WhereGrammar=ea;Object.defineProperty(r,"__esModule",{value:!0})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(r){r.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};r.commonjsRequire=function(e){throw Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');
};r.getDefaultExportFromCjs=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(r){r.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,
supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(r,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./AttributesBuilder ./attributeSupport ./projectionSupport ./timeSupport ./utils ../../support/fieldUtils ../../../smartMapping/statistics/support/utils ../../../support/arcadeOnDemand".split(" "),
function(r,e,ha,ea,q,w,g,E,l,t,aa,G,v){function x(J){return J.substr(24,12)+J.substr(19,4)+J.substr(16,2)+J.substr(14,2)+J.substr(11,2)+J.substr(9,2)+J.substr(6,2)+J.substr(4,2)+J.substr(2,2)+J.substr(0,2)}function M(J,W,B,I){if(B&&"esriFieldTypeDate"===B.type){const L=(new Date(J)).getTime(),Y=(new Date(W)).getTime();if(!isNaN(L)&&!isNaN(Y))return I?Y-L:L-Y}return"number"===typeof J&&"number"===typeof W?I?W-J:J-W:"string"===typeof J&&"string"===typeof W?(J=J.toUpperCase(),W=W.toUpperCase(),!B||"esriFieldTypeGUID"!==
B.type&&"esriFieldTypeGlobalID"!==B.type?I=(I?J>W:J<W)?-1:(I?J<W:J>W)?1:0:(B=x(J),W=x(W),I=(I?B>W:B<W)?-1:(I?B<W:B>W)?1:0),I):I?1:-1}function d(J,W,B,I,L,Y){L-=B;Y-=I;J=Math.min(1,Math.max(0,((J-B)*L+(W-I)*Y)/(L*L+Y*Y)));return{x:B+L*J,y:I+Y*J}}function p(J,W){return J?W?4:3:W?3:2}return function(){function J(B,I,L){this.items=B;this.queryGeometry=I;this.definitionExpression=L.definitionExpression;this.geometryType=L.geometryType;this.hasM=L.hasM;this.hasZ=L.hasZ;this.objectIdField=L.objectIdField;
this.spatialReference=L.spatialReference;this.fieldsIndex=L.fieldsIndex;this.timeInfo=L.timeInfo;this.featureAdapter=L.featureAdapter;this.aggregateAdapter=L.aggregateAdapter}var W=J.prototype;W.createQueryResponseForCount=function(B){const I=new w(B,this.featureAdapter,this.fieldsIndex);if(!B.outStatistics)return I.countDistinctValues(this.items);const {groupByFieldsForStatistics:L,having:Y}=B;if(null==L||!L.length)return 1;const ia=new Map,fa=new Map,ka=new Set;B=B.outStatistics;for(const K of B){({statisticType:B}=
K);B="exceedslimit"!==B?K.onStatisticField:void 0;if(!fa.has(B)){var H=[];for(const Q of L){const T=this._getAttributeValues(I,Q,ia);H.push(T)}fa.set(B,this._calculateUniqueValues(H,I.returnDistinctValues))}B=fa.get(B);for(const Q in B){const {data:T,items:n}=B[Q];H=T.join(",");Y&&!I.validateItems(n,Y)||ka.add(H)}}return ka.size};W.createQueryResponse=function(B){let I;I=B.outStatistics?B.outStatistics.some(L=>"exceedslimit"===L.statisticType)?this._createExceedsLimitQueryResponse(B):this._createStatisticsQueryResponse(B):
this._createFeatureQueryResponse(B);B.returnQueryGeometry&&(ea.isValid(B.outSR)&&!ea.equals(this.queryGeometry.spatialReference,B.outSR)?I.queryGeometry=t.cleanFromGeometryEngine({spatialReference:B.outSR,...E.project(this.queryGeometry,this.queryGeometry.spatialReference,B.outSR)}):I.queryGeometry=t.cleanFromGeometryEngine({spatialReference:B.outSR,...this.queryGeometry}));return I};W.createSnappingResponse=function(B,I){const L=this.featureAdapter,Y=p(this.hasZ,this.hasM),{x:ia,y:fa}=B.point,ka=
"number"===typeof B.distance?B.distance:B.distance.x,H="number"===typeof B.distance?B.distance:B.distance.y,K={candidates:[]},Q="esriGeometryPolygon"===this.geometryType;I=this.getPointCreator(B.point,this.spatialReference,I);for(const ja of this.items){var T=L.getGeometry(ja);if(e.isNone(T))continue;const {coords:pa,lengths:ua}=T;if(B.types&1){T=0;for(var n=0;n<ua.length;n++){var m=ua[n];for(var D=0;D<m;D++,T+=Y){var A=pa[T],O=pa[T+1];if(D!==m-1){const ta=pa[T+Y],za=pa[T+Y+1],{x:Da,y:Ra}=d(ia,fa,
A,O,ta,za);var S=(ia-Da)/ka;const Ka=(fa-Ra)/H;S=S*S+Ka*Ka;1>=S&&K.candidates.push({type:"edge",objectId:L.getObjectId(ja),distance:Math.sqrt(S),target:I(Da,Ra),start:I(A,O),end:I(ta,za)})}}}}if(B.types&2)for(T=Q?pa.length-Y:pa.length,n=0;n<T;n+=Y)m=pa[n],D=pa[n+1],A=(ia-m)/ka,O=(fa-D)/H,A=A*A+O*O,1>=A&&K.candidates.push({type:"vertex",objectId:L.getObjectId(ja),distance:Math.sqrt(A),target:I(m,D)})}K.candidates.sort((ja,pa)=>ja.distance-pa.distance);return K};W.getPointCreator=function(B,I,L){const Y=
e.isSome(L)&&!ea.equals(I,L)?ia=>E.project(ia,I,L):ia=>ia;return null!=B.z&&null!=B.m?(ia,fa)=>Y({x:ia,y:fa,z:B.z,m:B.m}):null!=B.z?(ia,fa)=>Y({x:ia,y:fa,z:B.z}):null!=B.m?(ia,fa)=>Y({x:ia,y:fa,m:B.m}):(ia,fa)=>Y({x:ia,y:fa})};W.executeAttributesQuery=function(B){var I=g.getWhereClause(B.where,this.fieldsIndex);if(!I)return Promise.resolve(this);if(I.isStandardized){let L=0;const Y=[];for(const ia of this.items)I.testFeature(ia,this.featureAdapter)&&(Y[L++]=ia);I=new J(Y,this.queryGeometry,this);
I.definitionExpression=B.where;return Promise.resolve(I)}return Promise.reject(new TypeError("Where clause is not standardized"))};W.executeAggregateIdsQuery=function(B){if(!B.aggregateIds||!B.aggregateIds.length||e.isNone(this.aggregateAdapter))return Promise.resolve(this);const I=new Set;for(const Y of B.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(Y).forEach(ia=>I.add(ia));const L=this.featureAdapter.getObjectId;return Promise.resolve(new J(this.items.filter(Y=>I.has(L(Y))),this.queryGeometry,
this))};W.executeObjectIdsQuery=function(B){if(!B.objectIds||!B.objectIds.length)return Promise.resolve(this);const I=new Set(B.objectIds),L=this.featureAdapter.getObjectId;return Promise.resolve(new J(this.items.filter(Y=>I.has(L(Y))),this.queryGeometry,this))};W.executeTimeQuery=function(B){B=l.getTimeOperator(this.timeInfo,B.timeExtent,this.featureAdapter);if(!e.isSome(B))return Promise.resolve(this);B=this.items.filter(B);return Promise.resolve(new J(B,this.queryGeometry,this))};W.filterLatest=
function(){const {trackIdField:B,startTimeField:I,endTimeField:L}=this.timeInfo;var Y=L||I;const ia=new Map,fa=this.featureAdapter.getAttribute;for(const ka of this.items){const H=fa(ka,B),K=fa(ka,Y),Q=ia.get(H);(!Q||K>fa(Q,Y))&&ia.set(H,ka)}Y=Array.from(ia.values());return Promise.resolve(new J(Y,this.queryGeometry,this))};W.project=function(){var B=r._asyncToGenerator(function*(I){if(!I||ea.equals(this.spatialReference,I))return this;const L=this.featureAdapter,Y=(yield E.projectMany(this.items.map(ia=>
t.getGeometry(this.geometryType,this.hasZ,this.hasM,L.getGeometry(ia))),this.spatialReference,I)).map((ia,fa)=>L.cloneWithGeometry(this.items[fa],q.convertFromGeometry(ia,this.hasZ,this.hasM)));return new J(Y,this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:I,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})});return function(I){return B.apply(this,
arguments)}}();W.createSummaryStatisticsResponse=function(){var B=r._asyncToGenerator(function*(I,L){const {field:Y,normalizationField:ia,normalizationType:fa,normalizationTotal:ka,minValue:H,maxValue:K}=L;var Q=new w(I,this.featureAdapter,this.fieldsIndex);I=this.fieldsIndex.isDateField(Y);L=L.valueExpression?yield this._getAttributeExpressionValues(Q,L.valueExpression,L.viewInfoParams):this._getAttributeNormalizedValues(Q,{field:Y,normalizationField:ia,normalizationType:fa,normalizationTotal:ka});
Q=G.isNullCountSupported({normalizationType:fa,normalizationField:ia,minValue:H,maxValue:K});L=aa.isStringField(this.fieldsIndex.get(Y))?G.calculateStringStatistics({values:L,supportsNullCount:Q}):G.calculateStatistics({values:L,minValue:H,maxValue:K,useSampleStdDev:!fa,supportsNullCount:Q});return G.processStatsResult(L,I)});return function(I,L){return B.apply(this,arguments)}}();W._sortFeatures=function(B,I,L){if(1<B.length&&I&&I.length)for(const Y of I.reverse()){I=Y.split(" ");const ia=I[0],fa=
this.fieldsIndex.get(ia),ka=I[1]&&"desc"===I[1].toLowerCase();B.sort((H,K)=>{H=L(H,ia,fa);K=L(K,ia,fa);return M(H,K,fa,ka)})}};W._createFeatureQueryResponse=function(B){const I=this.items,{geometryType:L,hasM:Y,hasZ:ia,objectIdField:fa,spatialReference:ka}=this,{outFields:H,outSR:K,quantizationParameters:Q,resultRecordCount:T,resultOffset:n,returnZ:m,returnM:D}=B,A=null!=T?I.length>(n||0)+T:!1,O=H&&(-1<H.indexOf("*")?[...this.fieldsIndex.fields]:H.map(S=>this.fieldsIndex.get(S)));return{exceededTransferLimit:A,
features:this._createFeatures(B,I),fields:O,geometryType:L,hasM:Y&&D,hasZ:ia&&m,objectIdFieldName:fa,spatialReference:t.cleanFromGeometryEngine(K?K:ka),transform:Q&&ha.toQuantizationTransform(Q)||null}};W._createFeatures=function(B,I){const L=new w(B,this.featureAdapter,this.fieldsIndex),{hasM:Y,hasZ:ia}=this,{orderByFields:fa,quantizationParameters:ka,returnGeometry:H,returnCentroid:K,maxAllowableOffset:Q,resultOffset:T,resultRecordCount:n,returnZ:m=!1,returnM:D=!1}=B,A=ia&&m,O=Y&&D;B=[];var S=0;
I=[...I];this._sortFeatures(I,fa,(ua,ta,za)=>L.getFieldValue(ua,ta,za));if(H||K){var ja=ha.toQuantizationTransform(ka);if(H&&!K)for(var pa of I)B[S++]={attributes:L.getAttributes(pa),geometry:t.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(pa),Q,ja,A,O)};else if(!H&&K)for(const ua of I)B[S++]={attributes:L.getAttributes(ua),centroid:t.transformCentroid(this,this.featureAdapter.getCentroid(ua,this),ja)};else for(const ua of I)B[S++]={attributes:L.getAttributes(ua),
centroid:t.transformCentroid(this,this.featureAdapter.getCentroid(ua,this),ja),geometry:t.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(ua),Q,ja,A,O)}}else for(ja of I)(pa=L.getAttributes(ja))&&(B[S++]={attributes:pa});S=T||0;null!=n&&(B=B.slice(S,Math.min(B.length,S+n)));return B};W._createExceedsLimitQueryResponse=function(B){var I=!1;let L=Number.POSITIVE_INFINITY,Y=Number.POSITIVE_INFINITY;I=Number.POSITIVE_INFINITY;for(const ia of B.outStatistics)if("exceedslimit"===
ia.statisticType){L=null!=ia.maxPointCount?ia.maxPointCount:Number.POSITIVE_INFINITY;Y=null!=ia.maxRecordCount?ia.maxRecordCount:Number.POSITIVE_INFINITY;I=null!=ia.maxVertexCount?ia.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)I=this.items.length>L;else if(this.items.length>Y)I=!0;else{B=this.hasZ?this.hasM?4:3:this.hasM?3:2;const ia=this.featureAdapter;I=this.items.reduce((fa,ka)=>{ka=ia.getGeometry(ka);return fa+(e.isSome(ka)&&ka.coords.length||0)},0)/
B>I}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(I)}}]}};W._createStatisticsQueryResponse=function(B){var I={attributes:{}};const L=[],Y=new Map,ia=new Map,fa=new Map,ka=new Map,H=new w(B,this.featureAdapter,this.fieldsIndex);var K=B.outStatistics;const {groupByFieldsForStatistics:Q,having:T,orderByFields:n}=B;B=Q&&Q.length;const m=!!B,D=m&&Q[0],A=m&&!this.fieldsIndex.get(D);
for(const ua of K){const {outStatisticFieldName:ta,statisticType:za}=ua;K=ua;var O="exceedslimit"!==za?ua.onStatisticField:void 0;const Da="percentile_disc"===za||"percentile_cont"===za,Ra=m&&1===B&&(O===D||A)&&"count"===za;if(m){if(!fa.has(O)){var S=[];for(const Ka of Q){var ja=this._getAttributeValues(H,Ka,Y);S.push(ja)}fa.set(O,this._calculateUniqueValues(S,H.returnDistinctValues))}S=fa.get(O);for(const Ka in S){const {count:Ca,data:Sa,items:Ta,itemPositions:c}=S[Ka];ja=Sa.join(",");if(!T||H.validateItems(Ta,
T)){const k=ka.get(ja)||{attributes:{}};var pa=null;if(Ra)pa=Ca;else{const R=this._getAttributeValues(H,O,Y);pa=c.map(f=>R[f]);pa=Da&&"statisticParameters"in K?this._getPercentileValue(K,pa):this._getStatisticValue(K,pa,null,H.returnDistinctValues)}k.attributes[ta]=pa;Q.forEach((R,f)=>k.attributes[this.fieldsIndex.get(R)?R:`EXPR_${f+1}`]=Sa[f]);ka.set(ja,k)}}}else O=this._getAttributeValues(H,O,Y),I.attributes[ta]=Da&&"statisticParameters"in K?this._getPercentileValue(K,O):this._getStatisticValue(K,
O,ia,H.returnDistinctValues);L.push({name:ta,alias:ta,type:"esriFieldTypeDouble"})}I=m?Array.from(ka.values()):[I];this._sortFeatures(I,n,(ua,ta)=>ua.attributes[ta]);return{fields:L,features:I}};W._getStatisticValue=function(B,I,L,Y){const {onStatisticField:ia,statisticType:fa}=B;B=null;B=null!=L&&L.has(ia)?L.get(ia):aa.isStringField(this.fieldsIndex.get(ia))?G.calculateStringStatistics({values:I,returnDistinct:Y}):G.calculateStatistics({values:I,minValue:null,maxValue:null,useSampleStdDev:!0});L&&
L.set(ia,B);return B["var"===fa?"variance":fa]};W._getPercentileValue=function(B,I){const {onStatisticField:L,statisticParameters:Y,statisticType:ia}=B,{value:fa,orderBy:ka}=Y,H="desc"===ka,K=this.fieldsIndex.get(L);B=[...I].filter(Q=>null!=Q).sort((Q,T)=>M(Q,T,K,H));return this._calculatePercentile(B,fa,"percentile_disc"===ia)};W._getAttributeValues=function(B,I,L){if(L.has(I))return L.get(I);const Y=this.fieldsIndex.get(I),ia=this.items.map(fa=>B.getFieldValue(fa,I,Y));L.set(I,ia);return ia};W._getAttributeNormalizedValues=
function(B,I){return this.items.map(L=>B.getNormalizedValue(L,{field:I.field,fieldInfo:this.fieldsIndex.get(I.field),normalizationField:I.normalizationField,normalizationFieldInfo:this.fieldsIndex.get(I.normalizationField),normalizationType:I.normalizationType,normalizationTotal:I.normalizationTotal}))};W._getAttributeExpressionValues=function(){var B=r._asyncToGenerator(function*(I,L,Y){const {arcadeUtils:ia}=yield v.loadArcade(),fa=ia.createFunction(L),ka=Y&&ia.getViewInfo(Y);return this.items.map(H=>
I.getExpressionValue(H,{compiledFunc:fa,viewInfo:ka},ia))});return function(I,L,Y){return B.apply(this,arguments)}}();W._calculateUniqueValues=function(B,I){const L={},Y=this.items,ia=Y.length;for(let fa=0;fa<ia;fa++){const ka=Y[fa],H=[];for(const Q of B)H.push(Q[fa]);const K=H.join(",");I?null==L[K]&&(L[K]={count:1,data:H,items:[ka],itemPositions:[fa]}):null==L[K]?L[K]={count:1,data:H,items:[ka],itemPositions:[fa]}:(L[K].count++,L[K].items.push(ka),L[K].itemPositions.push(fa))}return L};W._calculatePercentile=
function(B,I,L){if(0===B.length)return null;if(0>=I)return B[0];if(1<=I)return B[B.length-1];var Y=(B.length-1)*I,ia=Math.floor(Y);I=ia+1;Y%=1;ia=B[ia];const fa=B[I];return I>=B.length||L||"string"===typeof ia||"string"===typeof fa?ia:ia*(1-Y)+fa*Y};r._createClass(J,[{key:"size",get:function(){return this.items.length}}]);return J}()})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe","./jsonUtils"],function(r,e,ha){function ea({scale:H,translate:K},Q){return Math.round((Q-
K[0])/H[0])}function q({scale:H,translate:K},Q){return Math.round((K[1]-Q)/H[1])}function w(H,K,Q){const T=[];let n,m,D,A;for(let O=0;O<Q.length;O++){const S=Q[O];if(0<O){if(D=ea(H,S[0]),A=q(H,S[1]),D!==n||A!==m)T.push(K(S,D-n,A-m)),n=D,m=A}else n=ea(H,S[0]),m=q(H,S[1]),T.push(K(S,n,m))}return 0<T.length?T:null}function g(H,K,Q,T){return w(H,Q?T?ka:fa:T?fa:ia,K)}function E(H,K,Q,T){const n=[];Q=Q?T?ka:fa:T?fa:ia;for(T=0;T<K.length;T++){const m=w(H,Q,K[T]);m&&3<=m.length&&n.push(m)}return n.length?
n:null}function l(H,K,Q,T){const n=[];Q=Q?T?ka:fa:T?fa:ia;for(T=0;T<K.length;T++){const m=w(H,Q,K[T]);m&&2<=m.length&&n.push(m)}return n.length?n:null}function t({scale:H,translate:K},Q){return Q*H[0]+K[0]}function aa({scale:H,translate:K},Q){return K[1]-Q*H[1]}function G(H,K,Q){const T=Array(Q.length);if(!Q.length)return T;const [n,m]=H.scale;let D=t(H,Q[0][0]);H=aa(H,Q[0][1]);T[0]=K(Q[0],D,H);for(let A=1;A<Q.length;A++){const O=Q[A];D+=O[0]*n;H-=O[1]*m;T[A]=K(O,D,H)}return T}function v(H,K,Q){const T=
Array(Q.length);for(let n=0;n<Q.length;n++)T[n]=G(H,K,Q[n]);return T}function x(H,K,Q,T){return G(H,Q?T?ka:fa:T?fa:ia,K)}function M(H,K,Q,T){return v(H,Q?T?ka:fa:T?fa:ia,K)}function d(H,K,Q,T){return v(H,Q?T?ka:fa:T?fa:ia,K)}function p(H,K,Q){let [T,n]=Q[0],m=Math.min(T,K[0]),D=Math.min(n,K[1]),A=Math.max(T,K[2]);K=Math.max(n,K[3]);for(let O=1;O<Q.length;O++){const [S,ja]=Q[O];T+=S;n+=ja;0>S&&(m=Math.min(m,T));0<S&&(A=Math.max(A,T));0>ja?D=Math.min(D,n):0<ja&&(K=Math.max(K,n))}H[0]=m;H[1]=D;H[2]=
A;H[3]=K;return H}function J(H,K){if(!K.length)return null;H[0]=H[1]=Number.POSITIVE_INFINITY;H[2]=H[3]=Number.NEGATIVE_INFINITY;for(let Q=0;Q<K.length;Q++)p(H,H,K[Q]);return H}function W(H,K,Q,T,n){K.xmin=ea(H,Q.xmin);K.ymin=q(H,Q.ymin);K.xmax=ea(H,Q.xmax);K.ymax=q(H,Q.ymax);K!==Q&&(T&&(K.zmin=Q.zmin,K.zmax=Q.zmax),n&&(K.mmin=Q.mmin,K.mmax=Q.mmax));return K}function B(H,K,Q,T,n){K.points=g(H,Q.points,T,n);return K}function I(H,K,Q,T,n){K.x=ea(H,Q.x);K.y=q(H,Q.y);K!==Q&&(T&&(K.z=Q.z),n&&(K.m=Q.m));
return K}function L(H,K,Q,T,n){H=E(H,Q.rings,T,n);if(!H)return null;K.rings=H;return K}function Y(H,K,Q,T,n){H=l(H,Q.paths,T,n);if(!H)return null;K.paths=H;return K}const ia=(H,K,Q)=>[K,Q],fa=(H,K,Q)=>[K,Q,H[2]],ka=(H,K,Q)=>[K,Q,H[2],H[3]];r.equals=function(H,K){if(H===K||null==H&&null==K)return!0;if(null==H||null==K)return!1;let Q,T,n,m;H&&"upperLeft"===H.originPosition?(Q=H.translate[0],T=H.translate[1],H=H.scale[0]):(Q=H.extent.xmin,T=H.extent.ymax,H=H.tolerance);K&&"upperLeft"===K.originPosition?
(n=K.translate[0],m=K.translate[1],K=K.scale[0]):(n=K.extent.xmin,m=K.extent.ymax,K=K.tolerance);return Q===n&&T===m&&H===K};r.getQuantizedBoundsCoordsArray=p;r.getQuantizedBoundsCoordsArrayArray=J;r.getQuantizedBoundsPaths=function(H){return J([0,0,0,0],H)};r.getQuantizedBoundsPoints=function(H){const K=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return p(K,K,H)};r.getQuantizedBoundsRings=function(H){return J([0,0,0,0],H)};r.quantizeBounds=
function(H,K,Q){K[0]=ea(H,Q[0]);K[3]=q(H,Q[1]);K[2]=ea(H,Q[2]);K[1]=q(H,Q[3]);return K};r.quantizeExtent=W;r.quantizeGeometry=function(H,K){return H&&K?ha.isPoint(K)?I(H,{},K,!1,!1):ha.isPolyline(K)?Y(H,{},K,!1,!1):ha.isPolygon(K)?L(H,{},K,!1,!1):ha.isMultipoint(K)?B(H,{},K,!1,!1):ha.isExtent(K)?W(H,{},K,!1,!1):null:null};r.quantizeMultipoint=B;r.quantizePaths=l;r.quantizePoint=I;r.quantizePoints=g;r.quantizePolygon=L;r.quantizePolyline=Y;r.quantizeRings=E;r.quantizeX=ea;r.quantizeY=q;r.toQuantizationTransform=
function(H){return H?{originPosition:"upper-left"===H.originPosition?"upperLeft":"lower-left"===H.originPosition?"lowerLeft":H.originPosition,scale:H.tolerance?[H.tolerance,H.tolerance]:[1,1],translate:H.extent?[H.extent.xmin,H.extent.ymax]:[0,0]}:null};r.unquantizeBounds=function(H,K,Q){return Q?(K[0]=t(H,Q[0]),K[1]=aa(H,Q[3]),K[2]=t(H,Q[2]),K[3]=aa(H,Q[1]),K):[t(H,K[0]),aa(H,K[3]),t(H,K[2]),aa(H,K[1])]};r.unquantizeCoordsArray=G;r.unquantizeCoordsArrayArray=v;r.unquantizeExtent=function(H,K,Q,T,
n){K.xmin=t(H,Q.xmin);K.ymin=aa(H,Q.ymin);K.xmax=t(H,Q.xmax);K.ymax=aa(H,Q.ymax);K!==Q&&(T&&(K.zmin=Q.zmin,K.zmax=Q.zmax),n&&(K.mmin=Q.mmin,K.mmax=Q.mmax));return K};r.unquantizeMultipoint=function(H,K,Q,T,n){e.isSome(Q)&&(K.points=x(H,Q.points,T,n));return K};r.unquantizePaths=M;r.unquantizePoint=function(H,K,Q,T,n){if(e.isNone(Q))return K;K.x=t(H,Q.x);K.y=aa(H,Q.y);K!==Q&&(T&&(K.z=Q.z),n&&(K.m=Q.m));return K};r.unquantizePoints=x;r.unquantizePolygon=function(H,K,Q,T,n){e.isSome(Q)&&(K.rings=d(H,
Q.rings,T,n));return K};r.unquantizePolyline=function(H,K,Q,T,n){e.isSome(Q)&&(K.paths=M(H,Q.paths,T,n));return K};r.unquantizeRings=d;r.unquantizeX=t;r.unquantizeY=aa;Object.defineProperty(r,"__esModule",{value:!0})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe","./attributeSupport","../../../smartMapping/statistics/support/utils"],function(r,e,ha){return function(){function ea(w,g,E){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=
w.returnDistinctValues;this.fieldsIndex=E;this.featureAdapter=g;if((g=w.outFields)&&-1===g.indexOf("*")){this.outFields=g;w=0;for(const t of g){var l=e.getExpressionFromFieldName(t);l=(g=this.fieldsIndex.get(l))?null:e.getWhereClause(l,E);g=g?g.name:e.getAliasFromFieldName(t)||`FIELD_EXP_${w++}`;this._fieldDataCache.set(t,{alias:g,clause:l})}}}var q=ea.prototype;q.countDistinctValues=function(w){if(!this.returnDistinctValues)return w.length;w.forEach(g=>this.getAttributes(g));return this._returnDistinctMap.size};
q.getAttributes=function(w){w=this._processAttributesForOutFields(w);return this._processAttributesForDistinctValues(w)};q.getFieldValue=function(w,g,E){const l=E?E.name:g;let t=null;this._fieldDataCache.has(l)?t=this._fieldDataCache.get(l).clause:E||(t=e.getWhereClause(g,this.fieldsIndex),this._fieldDataCache.set(l,{alias:l,clause:t}));return E?this.featureAdapter.getAttribute(w,l):t.calculateValue(w,this.featureAdapter)};q.getNormalizedValue=function(w,g){const E=g.normalizationType,l=g.normalizationTotal;
let t=this.getFieldValue(w,g.field,g.fieldInfo);E&&Number.isFinite(t)&&(w=this.getFieldValue(w,g.normalizationField,g.normalizationFieldInfo),t=ha.getNormalizedValue(t,E,w,l));return t};q.getExpressionValue=function(w,g,E){w={attributes:this.featureAdapter.getAttributes(w)};w=E.createExecContext(w,g.viewInfo);return E.executeFunction(g.compiledFunc,w)};q.validateItem=function(w,g){this._fieldDataCache.has(g)||this._fieldDataCache.set(g,{alias:g,clause:e.getWhereClause(g,this.fieldsIndex)});return this._fieldDataCache.get(g).clause.testFeature(w,
this.featureAdapter)};q.validateItems=function(w,g){this._fieldDataCache.has(g)||this._fieldDataCache.set(g,{alias:g,clause:e.getWhereClause(g,this.fieldsIndex)});return this._fieldDataCache.get(g).clause.testSet(w,this.featureAdapter)};q._processAttributesForOutFields=function(w){const g=this.outFields;if(!g||!g.length)return this.featureAdapter.getAttributes(w);const E={};for(const l of g){const {alias:t,clause:aa}=this._fieldDataCache.get(l);E[t]=aa?aa.calculateValue(w,this.featureAdapter):this.featureAdapter.getAttribute(w,
t)}return E};q._processAttributesForDistinctValues=function(w){if(r.isNone(w)||!this.returnDistinctValues)return w;var g=this.outFields,E=[];if(g)for(const t of g){var {alias:l}=this._fieldDataCache.get(t);E.push(w[l])}else for(l in w)E.push(w[l]);g=`${(g||["*"]).join(",")}=${E.join(",")}`;E=this._returnDistinctMap.get(g)||0;this._returnDistinctMap.set(g,++E);return 1<E?null:w};return ea}()})},"esri/smartMapping/statistics/support/utils":function(){define(["exports","../../../core/Error","../../../core/maybe",
"../../../layers/support/fieldUtils"],function(r,e,ha,ea){function q(l,t){return new e(l,t)}function w(l,t){l=ha.isSome(l)?l:"";ha.isSome(t)&&t&&(l=l?"("+l+") AND ("+t+")":t);return l}function g(l){const t=l.layer;return l.fields.filter(aa=>!t.getField(aa))}function E(l){const t=l.layer;return l.fields.filter(aa=>{aa=t.getFieldUsageInfo(aa);return!aa||!aa.supportsStatistics})}r.calculateStatistics=function(l){const {values:t,useSampleStdDev:aa,supportsNullCount:G}=l;var v=Number.POSITIVE_INFINITY;
let x=Number.NEGATIVE_INFINITY,M=null,d=null;var p=null;let J=null,W=0;const B=null==l.minValue?-Infinity:l.minValue;l=null==l.maxValue?Infinity:l.maxValue;for(const I of t)Number.isFinite(I)?I>=B&&I<=l&&(M+=I,v=Math.min(v,I),x=Math.max(x,I),W++):"string"===typeof I&&W++;if(W&&null!=M){d=M/W;p=0;for(const I of t)Number.isFinite(I)&&I>=B&&I<=l&&(p+=(I-d)**2);J=aa?1<W?p/(W-1):0:0<W?p/W:0;p=Math.sqrt(J)}else x=v=null;v={avg:d,count:W,max:x,min:v,stddev:p,sum:M,variance:J};G&&(v.nullcount=t.length-W);
return v};r.calculateStringStatistics=function(l){const t=l.returnDistinct?[...new Set(l.values)]:l.values,aa=t.filter(v=>null!=v).length,G={count:aa};l.supportsNullCount&&(G.nullcount=t.length-aa);return G};r.createError=q;r.getNormalizedValue=function(l,t,aa,G){let v=null;switch(t){case "log":0!==l&&(v=Math.log(l)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(G)&&0!==G&&(v=l/G*100);break;case "field":Number.isFinite(aa)&&0!==aa&&(v=l/aa);break;case "natural-log":0<l&&(v=Math.log(l));
break;case "square-root":0<l&&(v=l**.5)}return v};r.getRangeExpr=function(l,t,aa){t=null!=t?l+" \x3e\x3d "+t:"";l=null!=aa?l+" \x3c\x3d "+aa:"";aa="";return(aa=t&&l?w(t,l):t||l)?"("+aa+")":""};r.getSQLFilterForNormalization=function(l){const t=l.field,aa=l.normalizationType;l=l.normalizationField;let G;if("log"===aa)G="(NOT "+t+" \x3d 0)";else if("field"===aa)G="(NOT "+l+" \x3d 0)";else if("natural-log"===aa||"square-root"===aa)G=`(${t} > 0)`;return G};r.isNullCountSupported=function(l){const t=null!=
l.minValue||null!=l.maxValue,aa=!!l.sqlExpression&&l.supportsSQLExpression;return!(null!=l.normalizationField||null!=l.normalizationType)&&!t&&!aa};r.mergeWhereClauses=w;r.processStatsResult=function(l,t){if(!t)return l;["avg","stddev","variance"].forEach(aa=>{null!=l[aa]&&(l[aa]=Math.ceil(l[aa]))});return l};r.verifyBasicFieldValidity=function(l,t,aa){const G=g({layer:l,fields:t});if(G.length)return q(aa,"Unknown fields: "+G.join(", ")+". You can only use fields defined in the layer schema");l=E({layer:l,
fields:t});if(l.length)return q(aa,"Unsupported fields: "+l.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true")};r.verifyFieldType=function(l,t,aa,G){let v=null;if(!t)v=q(aa,"'field' is not defined in the layer schema");else if(t.name===l.objectIdField||-1===G.indexOf(t.type))v=q(aa,"'field' should be one of these types: "+G.join(","));return v};r.verifyNumericField=function(l,t,aa){let G;t?t.name!==l.objectIdField&&ea.isNumericField(t)||
(G=q(aa,"'field' should be one of these numeric types: "+ea.numericTypes.join(","))):G=q(aa,"'field' is not defined in the layer schema");return G};Object.defineProperty(r,"__esModule",{value:!0})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),function(r,e,ha,ea,q,w,g,E){function l(y,F,X){if(y)for(const ma of y)(y=(y=w.getDeepValue(ma,
F))&&"function"!==typeof y&&X.get(y))&&w.setDeepValue(ma,y.name,F)}function t(y,F){if(!y||!F)return[];k.clear();aa(k,y,F);return Array.from(k).sort()}function aa(y,F,X){var ma;if(X)if(null!=F&&null!=(ma=F.fields)&&ma.length)if(X.includes("*"))for(const {name:na}of F.fields)y.add(na);else for(const na of X)G(y,F,na);else if(X.includes("*"))y.clear(),y.add("*");else for(const na of X)y.add(na)}function G(y,F,X){"string"===typeof X&&(F?(F=F.get(X))&&y.add(F.name):y.add(X))}function v(y,F,X){return x.apply(this,
arguments)}function x(){x=ha._asyncToGenerator(function*(y,F,X){var ma;if(X){var {arcadeUtils:na}=yield E.loadArcade();X=na.extractFieldNames(X,null==F?void 0:null==(ma=F.fields)?void 0:ma.map(sa=>sa.name));for(const sa of X)G(y,F,sa)}});return x.apply(this,arguments)}function M(y,F,X){return d.apply(this,arguments)}function d(){d=ha._asyncToGenerator(function*(y,F,X){if(X&&"1\x3d1"!==X){X=(yield new Promise(function(ma,na){r(["../../core/sql/WhereClause"],ma,na)})).WhereClause.create(X,F);if(!X.isStandardized)throw new ea("fieldUtils:collectFilterFields",
"Where clause is not standardized");aa(y,F,X.fieldNames)}});return d.apply(this,arguments)}function p(y,F){for(const X of y)if(X&&X.valueType&&X.valueType===F)return X.name;return null}function J(){J=ha._asyncToGenerator(function*(y){if(!y)return[];const F=new Set;yield W(F,y);return Array.from(F).sort()});return J.apply(this,arguments)}function W(y,F){return B.apply(this,arguments)}function B(){B=ha._asyncToGenerator(function*(y,F){if(F){var X=w.getDeepValue("elevationInfo.featureExpressionInfo",
F);if(X)return X.collectRequiredFields(y,F.fieldsIndex)}});return B.apply(this,arguments)}function I(y,F,X){return L.apply(this,arguments)}function L(){L=ha._asyncToGenerator(function*(y,F,X){X.outStatistic.onStatisticValueExpression?v(y,F,X.outStatistic.onStatisticValueExpression):y.add(X.outStatistic.onStatisticField)});return L.apply(this,arguments)}function Y(){Y=ha._asyncToGenerator(function*(y,F,X){var ma;if(F&&X&&"cluster"===X.type){var na=[];null!=(ma=X.popupTemplate)&&ma.expressionInfos&&
na.push(...X.popupTemplate.expressionInfos.map(sa=>v(y,F.fieldsIndex,sa.expression)));X.fields&&na.push(...X.fields.map(sa=>I(y,F.fieldsIndex,sa)));yield Promise.all(na)}});return Y.apply(this,arguments)}function ia(){ia=ha._asyncToGenerator(function*(y,F,X){F&&(F.timeInfo&&q.isSome(X)&&X.timeExtent&&aa(y,F.fieldsIndex,[F.timeInfo.startField,F.timeInfo.endField]),F.floorInfo&&aa(y,F.fieldsIndex,[F.floorInfo.floorField]),q.isSome(X)&&q.isSome(X.where)&&(yield M(y,F.fieldsIndex,X.where)))});return ia.apply(this,
arguments)}function fa(){fa=ha._asyncToGenerator(function*(y,F,X){F&&X&&(yield Promise.all(X.map(ma=>ka(y,F,ma))))});return fa.apply(this,arguments)}function ka(y,F,X){return H.apply(this,arguments)}function H(){H=ha._asyncToGenerator(function*(y,F,X){F&&X&&(X.valueExpression?yield v(y,F.fieldsIndex,X.valueExpression):X.field&&G(y,F.fieldsIndex,X.field))});return H.apply(this,arguments)}function K(){K=ha._asyncToGenerator(function*(y){if(!y)return[];const F="timeInfo"in y&&y.timeInfo;return F?t(y.fieldsIndex,
[y.trackIdField,F.startField,F.endField]):[]});return K.apply(this,arguments)}function Q(){Q=ha._asyncToGenerator(function*(y){if(!y)return[];const F=new Set;yield T(F,y);return Array.from(F).sort()});return Q.apply(this,arguments)}function T(y,F){return n.apply(this,arguments)}function n(){n=ha._asyncToGenerator(function*(y,F){const {labelingInfo:X,fieldsIndex:ma}=F;X&&X.length&&(yield Promise.all(X.map(na=>m(y,ma,na))))});return n.apply(this,arguments)}function m(y,F,X){return D.apply(this,arguments)}
function D(){D=ha._asyncToGenerator(function*(y,F,X){if(X){var ma=X.getLabelExpression();X=X.where;"arcade"===ma.type?yield v(y,F,ma.expression):(ma=ma.expression.match(/{[^}]*}/g))&&ma.forEach(na=>{G(y,F,na.slice(1,-1))});yield M(y,F,X)}});return D.apply(this,arguments)}function A(y){return"number"===typeof y&&!isNaN(y)&&isFinite(y)}function O(y){return null===y||A(y)}function S(y){return null===y||R(y)}function ja(y){return null!=y&&"string"===typeof y}function pa(y){return null===y||ja(y)}function ua(){return!0}
function ta(y,F){let X;switch(y.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":X=y.nullable?S:R;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":X=y.nullable?O:A;break;case "string":case "esriFieldTypeString":X=y.nullable?pa:ja;break;default:X=ua}return 1===arguments.length?X:X(F)}function za(y){return null!=y&&u.has(y.type)}function Da(y,
F){return y.nullable&&null===F?null:za(y)&&!Ra(y.type,Number(F))?e.NumericRangeValidationError.OUT_OF_RANGE:ta(y,F)?y.domain?g.validateDomainValue(y.domain,F):null:e.TypeValidationError.INVALID_TYPE}function Ra(y,F){return(y="string"===typeof y?Ka(y):y)?y.isInteger?R(F)&&F>=y.min&&F<=y.max:F>=y.min&&F<=y.max:!1}function Ka(y){switch(y){case "esriFieldTypeSmallInteger":case "small-integer":return N;case "esriFieldTypeInteger":case "integer":return P;case "esriFieldTypeSingle":case "single":return ca;
case "esriFieldTypeDouble":case "double":return Z}}function Ca(y,F,X){if(!F||!F.attributes||!y){if(q.isSome(X))for(var ma of y)X.add(ma);return!0}F=F.attributes;ma=!1;for(const na of y)if(!(na in F))if(ma=!0,q.isSome(X))X.add(na);else break;return ma}function Sa(){Sa=ha._asyncToGenerator(function*(y,F){const X=new Set;for(const ma of F)yield v(X,y.fieldsIndex,ma);return Array.from(X).sort()});return Sa.apply(this,arguments)}const Ta="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),
c=["field","normalizationField"],k=new Set,R=(()=>"isInteger"in Number?Number.isInteger:y=>"number"===typeof y&&isFinite(y)&&Math.floor(y)===y)(),f=["integer","small-integer","single","double"],u=new Set([...f,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);e.NumericRangeValidationError=void 0;(e.NumericRangeValidationError||(e.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";e.TypeValidationError=void 0;
(e.TypeValidationError||(e.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const N={min:-32768,max:32767,isInteger:!0},P={min:-2147483648,max:2147483647,isInteger:!0},ca={min:-3.4E38,max:1.2E38,isInteger:!1},Z={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};e.collectArcadeFieldNames=v;e.collectElevationFields=W;e.collectFeatureReductionFields=function(y,F,X){return Y.apply(this,arguments)};e.collectField=G;e.collectFields=aa;e.collectFilterFields=function(y,F,
X){return ia.apply(this,arguments)};e.collectLabelingFields=T;e.collectOrderByInfos=function(y,F,X){return fa.apply(this,arguments)};e.doubleRange=Z;e.featureHasFields=function(y,F){return!Ca(y,F,null)};e.fixFields=t;e.fixRendererFields=function(y,F){if(null!=y&&null!=F)for(const X of Array.isArray(y)?y:[y])if(l(Ta,X,F),"visualVariables"in X&&X.visualVariables)for(const ma of X.visualVariables)l(c,ma,F)};e.fixTimeInfoFields=function(y,F){if(null!=y&&null!=F&&F.fields.length)if("startField"in y){var X=
F.get(y.startField);F=F.get(y.endField);y.startField=X&&X.name||null;y.endField=F&&F.name||null}else X=F.get(y.startTimeField),F=F.get(y.endTimeField),y.startTimeField=X&&X.name||null,y.endTimeField=F&&F.name||null};e.getDisplayFieldName=function({displayField:y,fields:F}){if(y)return y;if(!F||!F.length)return null;if(!(y=p(F,"name-or-title")||p(F,"unique-identifier")||p(F,"type-or-category")))a:{for(const X of F)if(X&&X.name&&(F=X.name.toLowerCase(),-1<F.indexOf("name")||-1<F.indexOf("title"))){y=
X.name;break a}y=null}return y};e.getElevationFields=function(y){return J.apply(this,arguments)};e.getExpressionFields=function(y,F){return Sa.apply(this,arguments)};e.getFeatureEditFields=function(y){if(!y)return[];const F="editFieldsInfo"in y&&y.editFieldsInfo;return F?t(y.fieldsIndex,[F&&F.creatorField,F&&F.creationDateField,F&&F.editorField,F&&F.editDateField]):[]};e.getFeatureGeometryFields=function(y){if(!y)return[];const F=y.geometryFieldsInfo;return F?t(y.fieldsIndex,[F.shapeAreaField,F.shapeLengthField]):
[]};e.getFieldDefaultValue=function(y){const F=y.defaultValue;if(void 0!==F&&ta(y,F))return F;if(y.nullable)return null};e.getFieldRange=function(y){const F=g.getDomainRange(y.domain);if(F)return F;if(za(y))return Ka(y.type)};e.getLabelingFields=function(y){return Q.apply(this,arguments)};e.getNumericTypeForValue=function(y){if(!A(y))return null;if(R(y)){if(y>=N.min&&y<=N.max)return"esriFieldTypeSmallInteger";if(y>=P.min&&y<=P.max)return"esriFieldTypeInteger"}return y>=ca.min&&y<=ca.max?"esriFieldTypeSingle":
"esriFieldTypeDouble"};e.getTimeFields=function(y){return K.apply(this,arguments)};e.integerRange=P;e.isDateField=function(y){return null!=y&&("date"===y.type||"esriFieldTypeDate"===y.type)};e.isNumberInRange=Ra;e.isNumericField=za;e.isStringField=function(y){return null!=y&&("string"===y.type||"esriFieldTypeString"===y.type)};e.isValidFieldValue=function(y,F){return null===Da(y,F)};e.isValueMatchingFieldType=ta;e.numericTypes=f;e.packFields=function(y,F,X=1){if(!F||!y)return[];if(F.includes("*"))return["*"];
F=t(y,F);return F.length/y.fields.length>=X?["*"]:F};e.populateMissingFields=Ca;e.rendererFields=Ta;e.sanitizeNullFieldValue=function(y){return null==y||"number"===typeof y&&isNaN(y)?null:y};e.singleRange=ca;e.smallIntegerRange=N;e.unpackFieldNames=function(y,F){return q.isNone(F)||q.isNone(y)?[]:F.includes("*")?y.fields.map(X=>X.name):F};e.validateFieldValue=Da;e.validationErrorToString=function(y,F,X){switch(y){case g.DomainValidationError.INVALID_CODED_VALUE:return`Value ${X} is not in the coded domain - field: ${F.name}, domain: ${JSON.stringify(F.domain)}`;
case g.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${X} is out of the range of valid values - field: ${F.name}, domain: ${JSON.stringify(F.domain)}`;case e.TypeValidationError.INVALID_TYPE:return`Value ${X} is not a valid value for the field type - field: ${F.name}, type: ${F.type}, nullable: ${F.nullable}`;case e.NumericRangeValidationError.OUT_OF_RANGE:{const {min:ma,max:na}=Ka(F.type);return`Value ${X} is out of range for the number type - field: ${F.name}, type: ${F.type}, value range is ${ma} to ${na}`}}};
e.visualVariableFields=c;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/layers/support/domainUtils":function(){define(["exports"],function(r){function e(ha,ea){switch(ha.type){case "range":{const q="range"in ha?ha.range[1]:ha.maxValue;if(+ea<("range"in ha?ha.range[0]:ha.minValue)||+ea>q)return r.DomainValidationError.VALUE_OUT_OF_RANGE;break}case "coded-value":case "codedValue":if(null==ha.codedValues||ha.codedValues.every(q=>null==q||q.code!==ea))return r.DomainValidationError.INVALID_CODED_VALUE}return null}
r.DomainValidationError=void 0;(function(ha){ha.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";ha.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(r.DomainValidationError||(r.DomainValidationError={}));r.getDomainRange=function(ha){if(ha&&"range"===ha.type)return{min:"range"in ha?ha.range[0]:ha.minValue,max:"range"in ha?ha.range[1]:ha.maxValue}};r.isValidDomainValue=function(ha,ea){return null===e(ha,ea)};r.validateDomainValue=e;Object.defineProperty(r,"__esModule",
{value:!0})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/maybe ../geometry/SpatialReference".split(" "),function(r,e,ha,ea,q,w){function g(){E||(E=ha._asyncToGenerator(function*(){const t=yield new Promise(function(aa,G){r(["./arcadeUtils"],aa,G)});return{arcade:t.arcade,arcadeUtils:t,Dictionary:t.Dictionary,Feature:t.arcadeFeature}})());return E}let E;ea=(t,aa,G)=>l.create(t,aa,G,null,["$feature","$view"]);let l=function(){function t(G,
v,x,M,d,p,J,W){this.script=G;this.evaluate=d;this.fields=Array.isArray(J)?J:J.fields;this._syntaxTree=M;this._arcade=v;this._arcadeDictionary=x;this._arcadeFeature=p;this._spatialReference=W;this._referencesGeometry=v.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}t.create=function(){var G=ha._asyncToGenerator(function*(v,x,M,d,p,J){const {arcade:W,Feature:B,Dictionary:I}=yield g(),L=w.fromJSON(x);x=W.parseScript(v,J);p=p.reduce((H,
K)=>({...H,[K]:null}),{});let Y=null;q.isSome(d)&&(Y=new I(d),Y.immutable=!0,p.$config=null);d=W.scriptUsesGeometryEngine(x)&&W.enableGeometrySupport();J=W.scriptUsesFeatureSet(x)&&W.enableFeatureSetSupport();const ia=W.scriptIsAsync(x)&&W.enableAsyncSupport();p={vars:p,spatialReference:L,useAsync:!!ia};const fa=new I;fa.immutable=!1;fa.setField("scale",0);const ka=W.compileScript(x,p);yield Promise.all([d,J,ia]);return new t(v,W,I,x,H=>{"$view"in H&&H.$view&&(fa.setField("scale",H.$view.scale),H.$view=
fa);Y&&(H.$config=Y);return ka({vars:H,spatialReference:L})},new B,M,L)});return function(v,x,M,d,p,J){return G.apply(this,arguments)}}();var aa=t.prototype;aa.repurposeFeature=function(G){G.geometry&&!G.geometry.spatialReference&&(G.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(G.geometry,G.attributes,{fields:this.fields});return this._arcadeFeature};aa.repurposeAdapter=function(G){this._arcadeFeature.repurposeFromAdapter(G,{fields:this.fields});
return this._arcadeFeature};aa.createDictionary=function(){return new this._arcadeDictionary};aa.referencesMember=function(G){return this._arcade.referencesMember(this._syntaxTree,G)};aa.referencesFunction=function(G){return this._arcade.referencesFunction(this._syntaxTree,G)};aa.referencesGeometry=function(){return this._referencesGeometry};aa.referencesScale=function(){return this._referencesScale};aa.extractFieldLiterals=function(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)};
return t}();e.ArcadeExpression=l;e.createDictionaryExpression=(t,aa,G,v)=>l.create(t,aa,G,v,["$feature","$view"]);e.createLabelExpression=(t,aa,G)=>l.create(t,aa,G,null,["$feature"]);e.createRendererExpression=ea;e.createVVExpression=ea;e["default"]=l;e.loadArcade=g;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(r){function e(q,w,g,E,l){if(null!=E&&null!=l)return t=>{const aa=q.getAttribute(t,w);t=q.getAttribute(t,
g);return(null==aa||aa<=l)&&(null==t||t>=E)};if(null!=E)return t=>{t=q.getAttribute(t,g);return null==t||t>=E};if(null!=l)return t=>{t=q.getAttribute(t,w);return null==t||t<=l}}function ha(q,w,g,E){if(null!=g&&null!=E&&g===E)return l=>q.getAttribute(l,w)===g;if(null!=g&&null!=E)return l=>{l=q.getAttribute(l,w);return l>=g&&l<=E};if(null!=g)return l=>q.getAttribute(l,w)>=g;if(null!=E)return l=>q.getAttribute(l,w)<=E}function ea(){return()=>!1}r.getTimeExtent=function(q,w){if(!q)return null;const g=
w.featureAdapter,{startTimeField:E,endTimeField:l}=q;let t=Number.POSITIVE_INFINITY,aa=Number.NEGATIVE_INFINITY;if(E&&l)w.forEach(G=>{const v=g.getAttribute(G,E);G=g.getAttribute(G,l);null==v||isNaN(v)||(t=Math.min(t,v));null==G||isNaN(G)||(aa=Math.max(aa,G))});else{const G=E||l;w.forEach(v=>{v=g.getAttribute(v,G);null==v||isNaN(v)||(t=Math.min(t,v),aa=Math.max(aa,v))})}return{start:t,end:aa}};r.getTimeOperator=function(q,w,g){if(!w||!q)return null;const {startTimeField:E,endTimeField:l}=q;if(!E&&
!l)return null;const {start:t,end:aa}=w;return null===t&&null===aa?null:void 0===t&&void 0===aa?ea():E&&l?e(g,E,l,t,aa):ha(g,E||l,t,aa)};Object.defineProperty(r,"__esModule",{value:!0})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../centroid ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(r,e,ha,ea,q,w,g,E,l,t,aa,G,v,x){function M(n,m,D,A=n.hasZ,O=n.hasM){if(q.isNone(m))return null;const S=n.hasZ&&A,ja=n.hasM&&O;return D?(n=G.quantizeOptimizedGeometry(K,m,n.hasZ,n.hasM,"esriGeometryPoint",D,A,O),G.convertToPoint(n,S,ja)):G.convertToPoint(m,S,ja)}function d(){d=ha._asyncToGenerator(function*(n,m,D){const {outFields:A,orderByFields:O,groupByFieldsForStatistics:S,outStatistics:ja}=n;if(A)for(var pa=0;pa<A.length;pa++)A[pa]=A[pa].trim();if(O)for(pa=0;pa<O.length;pa++)O[pa]=O[pa].trim();
if(S)for(pa=0;pa<S.length;pa++)S[pa]=S[pa].trim();if(ja)for(pa=0;pa<ja.length;pa++)ja[pa].onStatisticField&&(ja[pa].onStatisticField=ja[pa].onStatisticField.trim());n.geometry&&!n.outSR&&(n.outSR=n.geometry.spatialReference);return J(n,m,D)});return d.apply(this,arguments)}function p(){p=ha._asyncToGenerator(function*(n,m,D){return J(n,m,D)});return p.apply(this,arguments)}function J(n,m,D){return W.apply(this,arguments)}function W(){W=ha._asyncToGenerator(function*(n,m,D){if(!n)return null;var {where:A}=
n;n.where=A=A&&A.trim();if(!A||/^1 *= *1$/.test(A)||m&&m===A)n.where=null;if(!n.geometry)return n;m=yield B(n);n.distance=0;n.units=null;"esriSpatialRelEnvelopeIntersects"===n.spatialRel&&({spatialReference:A}=n.geometry,m=g.getGeometryExtent(m),m.spatialReference=A);n.geometry=m;yield x.checkProjectionSupport(m.spatialReference,D);m=(yield l.normalizeCentralMeridian(E.fromJSON(m)))[0];if(q.isNone(m))throw fa;m=m.toJSON();m=yield x.project(m,m.spatialReference,D);if(!m)throw fa;m.spatialReference=
D;n.geometry=m;return n});return W.apply(this,arguments)}function B(n){return I.apply(this,arguments)}function I(){I=ha._asyncToGenerator(function*(n){const {geometry:m,distance:D,units:A}=n;if(null==D||"vertexAttributes"in m)return m;var O=m.spatialReference;n=A?ia.fromJSON(A):w.getUnitString(O);O=O&&(t.isGeographic(O)||t.isWebMercator(O))?m:yield x.checkProjectionSupport(O,t.WGS84).then(()=>x.project(m,t.WGS84));return(yield L())(O.spatialReference,O,D,n)});return I.apply(this,arguments)}function L(){return Y.apply(this,
arguments)}function Y(){Y=ha._asyncToGenerator(function*(){return(yield new Promise(function(n,m){r(["../../../geometry/geometryEngineJSON"],n,m)})).geodesicBuffer});return Y.apply(this,arguments)}const ia=new ea.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),fa=Object.freeze({}),ka=new v,H=new v,K=new v,Q={esriGeometryPoint:G.convertToPoint,
esriGeometryPolyline:G.convertToPolyline,esriGeometryPolygon:G.convertToPolygon,esriGeometryMultipoint:G.convertToMultipoint},T=(n,m)=>"_geVersion"!==n?m:void 0;e.QUERY_ENGINE_EMPTY_RESULT=fa;e.cleanFromGeometryEngine=function(n){return n&&"_geVersion"in n?JSON.parse(JSON.stringify(n,T)):n};e.getCentroid=function(n,m,D){if("esriGeometryPolygon"!==n.geometryType||!m||!m.centroid&&!m.geometry)return null;m.centroid||(m.centroid=aa.getCentroidOptimizedGeometry(new v,m.geometry,n.hasZ,n.hasM));return M(n,
m.centroid,D)};e.getGeometry=function(n,m,D,A,O,S,ja=m,pa=D){const ua=m&&ja,ta=D&&pa;A=q.isSome(A)?"coords"in A?A:A.geometry:null;if(q.isNone(A))return null;if(O)return m=G.generalizeOptimizedGeometry(H,A,m,D,n,O,ja,pa),S&&(m=G.quantizeOptimizedGeometry(K,m,ua,ta,n,S)),Q[n](m,ua,ta);if(S)return S=G.quantizeOptimizedGeometry(K,A,m,D,n,S,ja,pa),Q[n](S,ua,ta);G.removeZMValues(ka,A,m,D,ja,pa);return Q[n](ka,ua,ta)};e.normalizeFilter=function(n,m,D){return p.apply(this,arguments)};e.normalizeQuery=function(n,
m,D){return d.apply(this,arguments)};e.normalizeQueryLike=J;e.transformCentroid=M;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(r,e,ha,ea,q,w,g,E,l,t,aa,G,v){function x(){return new Promise(function(J,W){r(["../../../geometry/geometryEngineJSON"],J,W)})}function M(){M=ha._asyncToGenerator(function*(J,W,B){const {spatialRel:I,geometry:L}=J;if(L){if(!0!==p.spatialRelationship[I])throw new ea("feature-store:unsupported-query","Unsupported query spatial relationship",{query:J});if(E.isValid(L.spatialReference)&&E.isValid(B)){if(!0!==p.queryGeometry[g.getJsonType(L)])throw new ea("feature-store:unsupported-query","Unsupported query geometry type",
{query:J});if(!0!==p.layerGeometry[W])throw new ea("feature-store:unsupported-query","Unsupported layer geometry type",{query:J});if(J.outSR)return G.checkProjectionSupport(J.geometry&&J.geometry.spatialReference,J.outSR)}}});return M.apply(this,arguments)}const d={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",
esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},p={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},
layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};e.canQueryWithRBush=function(J){if(g.isExtent(J))return!0;if(g.isPolygon(J)){for(const W of J.rings)if(5!==W.length||W[0][0]!==W[1][0]||W[0][0]!==W[4][0]||W[2][0]!==W[3][0]||W[0][1]!==W[3][1]||W[0][1]!==W[4][1]||W[1][1]!==W[2][1])return!1;return!0}return!1};e.checkSpatialQuerySupport=function(J,W,B){return M.apply(this,arguments)};e.getSpatialQueryOperator=function(J,
W,B,I,L){if(g.isPolygon(W)&&"esriGeometryPoint"===B&&("esriSpatialRelIntersects"===J||"esriSpatialRelContains"===J)){const Y=t.convertFromPolygon(new aa,W,!1,!1);return Promise.resolve(ia=>l.polygonContainsPoint(Y,!1,!1,ia))}if(g.isPolygon(W)&&"esriGeometryMultipoint"===B){const Y=t.convertFromPolygon(new aa,W,!1,!1);if("esriSpatialRelContains"===J)return Promise.resolve(ia=>l.polygonContainsMultipoint(Y,!1,!1,ia,I,L))}if(g.isExtent(W)&&"esriGeometryPoint"===B&&("esriSpatialRelIntersects"===J||"esriSpatialRelContains"===
J))return Promise.resolve(Y=>q.extentContainsPoint(W,v.getGeometry(B,I,L,Y)));if(g.isExtent(W)&&"esriGeometryMultipoint"===B&&"esriSpatialRelContains"===J)return Promise.resolve(Y=>q.extentContainsMultipoint(W,v.getGeometry(B,I,L,Y)));if(g.isExtent(W)&&"esriSpatialRelIntersects"===J){const Y=w.getExtentIntersector(B);return Promise.resolve(ia=>Y(W,v.getGeometry(B,I,L,ia)))}return x().then(Y=>{const ia=Y[d[J]].bind(null,W.spatialReference,W);return fa=>ia(v.getGeometry(B,I,L,fa))})};Object.defineProperty(e,
"__esModule",{value:!0})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(r,e){r.extentIntersectsExtent=e.extentIntersectsExtent;r.extentIntersectsMultipoint=e.extentIntersectsMultipoint;r.extentIntersectsPoint=e.extentIntersectsPoint;r.extentIntersectsPolygon=e.extentIntersectsPolygon;r.extentIntersectsPolyline=e.extentIntersectsPolyline;r.getFeatureExtentIntersector=e.getFeatureExtentIntersector;r.isSelfIntersecting=e.isSelfIntersecting;r.segmentIntersects=
e.segmentIntersects;r.getExtentIntersector=function(ha){return"mesh"===ha?e.extentIntersectsExtent:e.getFeatureExtentIntersector(ha)};Object.defineProperty(r,"__esModule",{value:!0})})},"esri/layers/graphics/contains":function(){define(["exports"],function(r){function e(ha,ea,q,w,g){if(!ha)return!1;ea=ea?q?4:3:q?3:2;const {coords:E,lengths:l}=ha;q=!1;ha=0;for(const aa of l){var t=ha;for(let G=ha,v=ha+aa*ea;G<v;G+=ea){t=G+ea;t===v&&(t=ha);const x=E[G],M=E[G+1],d=E[t];t=E[t+1];(M<g&&t>=g||t<g&&M>=g)&&
x+(g-M)/(t-M)*(d-x)<w&&(q=!q)}ha+=aa*ea}return q}r.polygonContainsCoords=e;r.polygonContainsMultipoint=function(ha,ea,q,w,g,E){g=g?E?4:3:E?3:2;const {coords:l,lengths:t}=w;if(!t)return!1;for(let aa=0,G=0;aa<t.length;aa++,G+=g)if(!e(ha,ea,q,l[G],l[G+1]))return!1;return!0};r.polygonContainsPoint=function(ha,ea,q,w){return e(ha,ea,q,w.coords[0],w.coords[1])};Object.defineProperty(r,"__esModule",{value:!0})})},"esri/layers/support/FieldsIndex":function(){define(function(){return function(){function r(ha){this.fields=
ha;this._fieldsMap=new Map;this._dateFieldsSet=new Set;this.dateFields=[];if(ha){var ea=[];for(const q of ha)if(ha=q&&q.name){const w=ha.toLowerCase().trim();this._fieldsMap.set(ha,q);this._fieldsMap.set(w,q);ea.push(w);if("date"===q.type||"esriFieldTypeDate"===q.type)this.dateFields.push(q),this._dateFieldsSet.add(q)}ea.sort();this.uid=ea.join(",")}}var e=r.prototype;e.destroy=function(){this._fieldsMap.clear()};e.has=function(ha){return null!=this.get(ha)};e.get=function(ha){return null!=ha?this._fieldsMap.get(ha)||
this._fieldsMap.get(ha.toLowerCase().trim()):void 0};e.isDateField=function(ha){return this._dateFieldsSet.has(this.get(ha))};e.normalizeFieldName=function(ha){if(ha=this.get(ha))return ha.name};return r}()})},"esri/layers/support/PromiseQueue":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/promiseUtils"],function(r,e){let ha=function(ea,q,w,g,E){this.resolve=ea;this.reject=q;this.callback=w;this.signal=g;this.abortCallback=E};return function(){function ea(){this._tasks=[]}
var q=ea.prototype;q.push=function(w,g,E){return new Promise((l,t)=>this._tasks.push(new ha(l,t,w,g,E)))};q.unshift=function(w,g,E){return new Promise((l,t)=>this._tasks.unshift(new ha(l,t,w,g,E)))};q.process=function(){if(0===this._tasks.length)return!1;const w=this._tasks.shift();try{const g=e.isAborted(w.signal);if(g&&!w.abortCallback)w.reject(e.createAbortError());else{const E=g?w.abortCallback(e.createAbortError()):w.callback();e.isPromise(E)?E.then(w.resolve,w.reject):w.resolve(E)}}catch(g){w.reject(g)}return!0};
q.cancelAll=function(){const w=e.createAbortError();for(const g of this._tasks)if(g.abortCallback){const E=g.abortCallback(w);g.resolve(E)}else g.reject(w);this._tasks.length=0};r._createClass(ea,[{key:"length",get:function(){return this._tasks.length}}]);return ea}()})},"esri/layers/graphics/sources/csv/csv":function(){define(["exports"],function(r){function*e(g,E,l){let t=0;for(;t<=g.length;){var aa=g.indexOf(E,t);aa=g.substring(t,-1<aa?aa:void 0);t+=aa.length+E.length;if(!l||aa.trim())yield aa}}
function ha(g,E){return e(g,E,!1)}const ea=/^\s*"([\S\s]*)"\s*$/,q=/""/g,w=[","," ",";","|","\t"];r.inferDelimiter=function(g){g=g.trim();let E=0,l="";for(const t of w){const aa=g.split(t).length;aa>E&&(E=aa,l=t)}return""===l?null:l};r.parseRows=function*(g,E,l){var t="";let aa="";var G=0,v=[];a:for(;;){const {value:J,done:W}=g.next();if(W)break;var x=ha(J,l);b:for(;;){const {value:B,done:I}=x.next();if(I)break b;t+=aa+B;aa="";var M=void 0;var d=B;var p=0;for(M=d.indexOf('"',0);0<=M;)p++,M=d.indexOf('"',
M+1);d=p;G+=d;if(0===G%2){if(0<G)if(t=ea.exec(t))v.push(t[1].replace(q,'"'));else{v=[];t="";G=0;continue a}else v.push(t);t="";G=0}else aa=l}if(0===G){x=E;d={};M=x.length;for(p=0;p<M;p++)d[x[p]]=v[p];v=d;yield v;v=[]}else aa="\n"}};r.readRowParts=ha;r.readRows=function(g){const E=g.includes("\r\n")?"\r\n":"\n";return e(g,E,!0)};Object.defineProperty(r,"__esModule",{value:!0})})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports","../../../../core/has","../../../../core/lang",
"../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],function(r,e,ha,ea,q){r.createCapabilities=function(w,g){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:w},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:g,supportsDelete:g,supportsEditing:g,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAttachments:!1,supportsResizeAttachments:!1,
supportsSync:!1,supportsUpdate:g,supportsExceedsLimitStatistics:!0},query:ea.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0},editing:{supportsGeometryUpdate:g,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}};r.createDefaultAttributesFunction=
function(w,g){if(e("csp-restrictions"))return()=>({[g]:null,...w});try{let E=`this.${g} = null;`;for(const t in w){const aa=t.indexOf(".")?`["${t}"]`:`.${t}`;E+=`this${aa} = ${JSON.stringify(w[t])};`}const l=new Function(E);return()=>new l}catch(E){return()=>({[g]:null,...w})}};r.createDefaultTemplate=function(w={}){return[{name:"New Feature",description:"",prototype:{attributes:ha.clone(w)}}]};r.createDrawingInfo=function(w){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===w||"esriGeometryMultipoint"===
w?q.defaultPointSymbolJSON:"esriGeometryPolyline"===w?q.defaultPolylineSymbolJSON:q.defaultPolygonSymbolJSON}}};Object.defineProperty(r,"__esModule",{value:!0})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],function(r){const e=[252,146,31,255],ha={type:"esriSMS",style:"esriSMSCircle",size:6,color:e,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},ea={type:"esriSLS",style:"esriSLSSolid",width:.75,color:e};r.defaultColor=e;r.defaultOutlineColor=
[153,153,153,255];r.defaultPointSymbolJSON=ha;r.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};r.defaultPolylineSymbolJSON=ea;r.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};r.errorPointSymbolJSON=
{type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};r.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};r.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};Object.defineProperty(r,"__esModule",{value:!0})})},"*noref":1}});
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../geometry ../../../../request ../../../../core/Error ../../../../core/has ../../../../core/number ../../../../core/urlUtils ../../../../geometry/projection ../../../../geometry/geometryAdapters/json ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/support/webMercatorUtils ../../OptimizedFeature ../../OptimizedGeometry ../../data/FeatureStore ../../data/projectionSupport ../../data/QueryEngine ../csv/csv ./clientSideDefaults ../../../support/FieldsIndex ../../../../geometry/SpatialReference".split(" "),function(r,
e,ha,ea,q,w,g,E,l,t,aa,G,v,x,M,d,p,J,W,B,I){const L=W.createDrawingInfo("esriGeometryPoint"),Y=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong"],ia="lat latitude latitude83 latdecdeg lat_dd y ycenter point-y".split(" "),fa="lon lng long longitude longitude83 longdecdeg long_dd x xcenter point-x".split(" "),ka=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,
H=["csv"],K=[0,0];let Q=function(m,D){this.x=m;this.y=D};const T=function(){const m=g._parseInfo(),D=new RegExp("^"+m.regexp+"$"),A=new RegExp("["+m.group+"\\s\\xa0]","g"),O=m.factor;return function(S){S=D.exec(S);m.factor=O;if(!S)return NaN;let ja=S[1];if(!S[1]){if(!S[2])return NaN;ja=S[2];m.factor*=-1}ja=ja.replace(A,"").replace(m.decimal,".");return+ja*m.factor}}(),n=(()=>"isInteger"in Number?Number.isInteger:m=>"number"===typeof m&&isFinite(m)&&Math.floor(m)===m)();ha=function(){function m(){this._queryEngine=
this._fieldsIndex=null}var D=m.prototype;D.destroy=function(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy();this._fieldsIndex=this._queryEngine=null};D.load=function(){var A=e._asyncToGenerator(function*(O,S={}){[S]=yield Promise.all([this._fetch(O.url,S),this._checkProjection(S&&O.parsing&&O.parsing.spatialReference)]);O=this._parse(S,O);this._queryEngine=this._createQueryEngine(S,O);O.layerDefinition.extent=this._queryEngine.fullExtent;if(O.layerDefinition.timeInfo){const {start:ja,
end:pa}=this._queryEngine.timeExtent;O.layerDefinition.timeInfo.timeExtent=[ja,pa]}return O});return function(O){return A.apply(this,arguments)}}();D.applyEdits=function(){var A=e._asyncToGenerator(function*(){throw new q("csv-source:editing-not-supported","applyEdits() is not supported on CSVLayer");});return function(){return A.apply(this,arguments)}}();D.queryFeatures=function(A={},O={}){return this._queryEngine.executeQuery(A,O.signal)};D.queryFeatureCount=function(A={},O={}){return this._queryEngine.executeQueryForCount(A,
O.signal)};D.queryObjectIds=function(A={},O={}){return this._queryEngine.executeQueryForIds(A,O.signal)};D.queryExtent=function(A={},O={}){return this._queryEngine.executeQueryForExtent(A,O.signal)};D.querySnapping=function(A,O={}){return this._queryEngine.executeQueryForSnapping(A,O.signal)};D._fetch=function(){var A=e._asyncToGenerator(function*(O,S){if(!O)throw new q("csv-source:invalid-source","url not defined");O=E.urlToObject(O);return(yield ea(O.path,{query:O.query,responseType:"text",signal:S.signal})).data});
return function(O,S){return A.apply(this,arguments)}}();D._parse=function(A,O){var S=O.parsing||{};const ja={columnDelimiter:S.columnDelimiter,layerDefinition:null,locationInfo:{latitudeFieldName:S.latitudeField,longitudeFieldName:S.longitudeField}};var pa=J.readRows(A),{value:ua}=pa.next();if(!ua)throw new q("csv","CSV is empty",{csv:A});ua=ua.trim();if(!S.columnDelimiter){A=J.inferDelimiter(ua);if(!A)throw new q("csv-source:invalid-delimiter","Unable to detect the delimiter from CSV");ja.columnDelimiter=
A}ua=ua.split(ja.columnDelimiter);const ta=ja.layerDefinition={name:E.getFilename(O.url,H)||"csv",drawingInfo:L,geometryType:"esriGeometryPoint",objectIdField:null,fields:[],timeInfo:S.timeInfo,extent:{xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,ymax:Number.NEGATIVE_INFINITY,spatialReference:S.spatialReference||{wkid:102100}}};if(!S.latitudeField||!S.longitudeField){O=this._inferLocationInfo(ua);if(!S.longitudeField&&!O.longitudeFieldName||!S.latitudeField&&
!O.latitudeFieldName)throw new q("csv","Unable to identify latitudeField and/or longitudeField from CSV");ja.locationInfo={longitudeFieldName:S.longitudeField||O.longitudeFieldName,latitudeFieldName:S.latitudeField||O.latitudeFieldName}}pa=this._inferFields(pa,ja.columnDelimiter,ua,ja.locationInfo);if(S.fields&&S.fields.length){O=new Map;for(var za of S.fields)O.set(za.name.toLowerCase(),za);for(var Da of pa)if(S=O.get(Da.name.toLowerCase()))za=Da.name,Object.assign(Da,S),Da.name=za}ta.fields=pa;
ta.fields.some(Ra=>"esriFieldTypeOID"===Ra.type?(ta.objectIdField=Ra.name,!0):!1)||(Da={name:"__OBJECTID",alias:"__OBJECTID",type:"esriFieldTypeOID",editable:!1,nullable:!1},ta.objectIdField=Da.name,ta.fields.unshift(Da));this._fieldsIndex=new B(ta.fields);ta.timeInfo&&(Da=ta.timeInfo,Da.startTimeField&&((S=this._fieldsIndex.get(Da.startTimeField))?(Da.startTimeField=S.name,S.type="esriFieldTypeDate"):Da.startTimeField=null),Da.endTimeField&&((S=this._fieldsIndex.get(Da.endTimeField))?(Da.endTimeField=
S.name,S.type="esriFieldTypeDate"):Da.endTimeField=null),Da.trackIdField&&(S=this._fieldsIndex.get(Da.trackIdField),Da.trackIdField=S?S.name:null),Da.startTimeField||Da.endTimeField||(ta.timeInfo=null));return ja};D._inferLocationInfo=function(A){let O=null,S=null;const ja=pa=>A.find(ua=>ua.toLowerCase()===pa);fa.some(pa=>{O=ja(pa);return!!O});ia.some(pa=>{S=ja(pa);return!!S});return{longitudeFieldName:O,latitudeFieldName:S}};D._inferFields=function(A,O,S,ja){const pa=[];O=J.parseRows(A,S,O);A=[];
a:for(;10>A.length;){const {value:ua,done:ta}=O.next();if(ta)break a;A.push(ua)}for(const ua of S)if(ua===ja.longitudeFieldName||ua===ja.latitudeFieldName)pa.push({name:ua,type:"esriFieldTypeDouble",alias:ua});else{S=A.map(ta=>ta[ua]);S=this._inferFieldType(S);O={name:ua,type:null,alias:ua};switch(S){case "integer":O.type="esriFieldTypeInteger";break;case "double":O.type="esriFieldTypeDouble";break;case "date":O.type="esriFieldTypeDate";O.length=36;break;default:O.type="esriFieldTypeString",O.length=
255}pa.push(O)}return pa};D._inferFieldType=function(A){if(!A.length)return"string";const O=/[^+-.,0-9]/;return A.map(S=>{var ja=!1;if(""!==S){if(O.test(S))ja=!0;else{ja=T(S);if(!isNaN(ja))return/[.,]/.test(S)||!n(ja)||214783647<ja||-214783648>ja?"double":"integer";if(-1===S.indexOf("E"))ja=!0;else if(ja=Number(S),isNaN(ja))if(-1===S.indexOf(","))ja=!0;else if(S=S.replace(",","."),ja=Number(S),isNaN(ja))ja=!0;else return"double";else return"double"}return ja&&!/^[-]?\d*[.,]?\d*$/.test(S)&&this._isValidDate(new Date(S),
S)?"date":"string"}}).reduce((S,ja)=>{if(void 0===S||S===ja)return ja;if("string"===S||"string"===ja)return"string";if("double"===S||"double"===ja)return"double"})};D._isValidDate=function(A,O){if(!A||"[object Date]"!==Object.prototype.toString.call(A)||isNaN(A.getTime()))return!1;A=!0;if(w("chrome")&&/\d+\W*$/.test(O)&&(O=O.match(/[a-zA-Z]{2,}/))){A=!1;let S=0;for(;!A&&S<=O.length;)A=!ka.test(O[S]),S++;A=!A}return A};D._createQueryEngine=function(A,O){const {latitudeFieldName:S,longitudeFieldName:ja}=
O.locationInfo,{objectIdField:pa,fields:ua,extent:ta,timeInfo:za}=O.layerDefinition;let Da=[];const Ra=[];var Ka=new Set,Ca=new Set,Sa=[];for(const {name:R,type:f}of ua)"esriFieldTypeDate"===f?Ka.add(R):-1<Y.indexOf(f)&&Ca.add(R),R!==pa&&Sa.push(R);var Ta=0;A=J.readRows(A);A.next();Sa=J.parseRows(A,Sa,O.columnDelimiter);a:for(;;){const {value:R,done:f}=Sa.next();if(f)break a;A=this._parseCoordinateValue(R[S]);const u=this._parseCoordinateValue(R[ja]);if(null!=u&&null!=A&&!isNaN(A)&&!isNaN(u)){R[S]=
A;R[ja]=u;for(var c in R)if(c!==S&&c!==ja)if(Ka.has(c)){var k=new Date(R[c]);R[c]=this._isValidDate(k,R[c])?k.getTime():null}else Ca.has(c)&&(k=T(R[c]),isNaN(k)?R[c]=null:R[c]=k);R[pa]=Ta;Ta++;Da.push(new Q(u,A));Ra.push(R)}}if(!aa.equals({wkid:4326},ta.spatialReference))if(aa.isWebMercator(ta.spatialReference))for(const R of Da)[R.x,R.y]=G.lngLatToXY(R.x,R.y,K);else Da=l.projectMany(t.jsonAdapter,Da,I.WGS84,ta.spatialReference,null);Ka=new M({geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1});O=
new p["default"]({fields:O.layerDefinition.fields,geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1,timeInfo:za,objectIdField:pa,spatialReference:ta.spatialReference||{wkid:4326},cacheSpatialQueries:!0,featureStore:Ka});Ca=[];for(Ta=0;Ta<Da.length;Ta++){const {x:R,y:f}=Da[Ta];c=Ra[Ta];c[pa]=Ta+1;Ca.push(new v["default"](new x([],[R,f]),c,null,c[pa]))}Ka.addMany(Ca);return O};D._parseCoordinateValue=function(A){if(null==A||""===A)return null;let O=T(A);if(isNaN(O)||181<Math.abs(O))O=parseFloat(A);return O};
D._checkProjection=function(){var A=e._asyncToGenerator(function*(O){try{yield d.checkProjectionSupport(aa.WGS84,O)}catch{throw new q("csv-layer","Projection not supported");}});return function(O){return A.apply(this,arguments)}}();return m}();r.csvLatitudeFieldNames=ia;r.csvLongitudeFieldNames=fa;r["default"]=ha;Object.defineProperty(r,"__esModule",{value:!0})});