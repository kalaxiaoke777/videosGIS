// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.21/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(q,d,ia,ha,p,t,h,H){function l(f,u){return f?u?4:3:u?3:2}function v(f,u,L,O){if(f){if(L)return u&&O?c:Ra;if(u&&O)return gb}else if(u&&O)return Ra;return Ca}function fa({scale:f,translate:u},L){return Math.round((L-u[0])/f[0])}function aa({scale:f,
translate:u},L){return Math.round((u[1]-L)/f[1])}function I({scale:f,translate:u},L){return L*f[0]+u[0]}function F({scale:f,translate:u},L){return u[1]-L*f[1]}function V(f){f=f.coords;return{x:f[0],y:f[1]}}function e(f,u){f.coords[0]=u.x;f.coords[1]=u.y;return f}function r(f){f=f.coords;return{x:f[0],y:f[1],z:f[2]}}function K(f,u){f.coords[0]=u.x;f.coords[1]=u.y;f.coords[2]=u.z;return f}function Y(f){f=f.coords;return{x:f[0],y:f[1],m:f[2]}}function A(f,u){f.coords[0]=u.x;f.coords[1]=u.y;f.coords[2]=
u.m;return f}function G(f){f=f.coords;return{x:f[0],y:f[1],z:f[2],m:f[3]}}function C(f,u){f.coords[0]=u.x;f.coords[1]=u.y;f.coords[2]=u.z;f.coords[3]=u.m;return f}function M(f,u){return f&&u?C:f?K:u?A:e}function P(f,u,L,O,ca){L=M(L,O);for(const X of u){const {geometry:w,attributes:D}=X;let U;w&&(U=L(new H,w));f.push(new t["default"](U,D,null,D[ca]))}return f}function W(f,u,L,O){for(const ca of u){const {geometry:X,attributes:w}=ca;let D;X&&(D=ja(X,L,O));f.push({attributes:w,geometry:D})}return f}
function ja(f,u,L){if(ha.isNone(f))return null;const O=l(u,L),ca=[];for(let X=0;X<f.coords.length;X+=O){const w=[];for(let D=0;D<O;D++)w.push(f.coords[X+D]);ca.push(w)}return u?L?{points:ca,hasZ:u,hasM:L}:{points:ca,hasZ:u}:L?{points:ca,hasM:L}:{points:ca}}function B(f,u,L,O,ca){L=l(L,O);for(const X of u){u=X.geometry;O=X.attributes;let w;u&&(w=E(new H,u,L));f.push(new t["default"](w,O,null,O[ca]))}return f}function E(f,u,L=l(u.hasZ,u.hasM)){f.lengths[0]=u.points.length;const O=f.coords;let ca=0;
for(const X of u.points)for(u=0;u<L;u++)O[ca++]=X[u];return f}function N(f,u,L){if(!f)return null;const O=l(u,L),{coords:ca,lengths:X}=f;f=[];let w=0;for(const D of X){const U=[];for(let ma=0;ma<D;ma++){const na=[];for(let sa=0;sa<O;sa++)na.push(ca[w++]);U.push(na)}f.push(U)}return u?L?{paths:f,hasZ:u,hasM:L}:{paths:f,hasZ:u}:L?{paths:f,hasM:L}:{paths:f}}function Q(f,u,L,O,ca){L=l(L,O);for(const X of u){u=X.geometry;O=X.attributes;let w;u&&(w=n(new H,u,L));f.push(new t["default"](w,O,null,O[ca]))}return f}
function n(f,u,L=l(u.hasZ,u.hasM)){const {lengths:O,coords:ca}=f;let X=0;for(const w of u.paths){for(const D of w)for(u=0;u<L;u++)ca[X++]=D[u];O.push(w.length)}return f}function m(f,u,L){if(!f)return null;const O=l(u,L),{coords:ca,lengths:X}=f;f=[];let w=0;for(const D of X){const U=[];for(let ma=0;ma<D;ma++){const na=[];for(let sa=0;sa<O;sa++)na.push(ca[w++]);U.push(na)}f.push(U)}return u?L?{rings:f,hasZ:u,hasM:L}:{rings:f,hasZ:u}:L?{rings:f,hasM:L}:{rings:f}}function z(f,u,L,O,ca){for(const X of u){u=
X.geometry;const w=X.centroid,D=X.attributes;let U;u&&(U=J(new H,u,L,O));ha.isSome(w)?f.push(new t["default"](U,D,e(new H,w),D[ca])):f.push(new t["default"](U,D,null,D[ca]))}return f}function J(f,u,L=u.hasZ,O=u.hasM){Z(f,u.rings,L,O);return f}function Z(f,u,L,O){L=l(L,O);const {lengths:ca,coords:X}=f;O=0;ca.length=X.length=0;for(const w of u){for(const D of w)for(u=0;u<L;u++)X[O++]=D[u];ca.push(w.length)}return f}function ea(f,u,L,O,ca,X){f.length=0;if(!L){for(const w of u)f.push(new t["default"](null,
w.attributes,null,w.attributes[X]));return f}switch(L){case "esriGeometryPoint":return P(f,u,O,ca,X);case "esriGeometryMultipoint":return B(f,u,O,ca,X);case "esriGeometryPolyline":return Q(f,u,O,ca,X);case "esriGeometryPolygon":return z(f,u,O,ca,X);default:Ta.error("convertToFeatureSet:unknown-geometry",new d(`Unable to parse unknown geometry type '${L}'`)),f.length=0}return f}function ka(f,u,L,O){f=f&&("coords"in f?f:f.geometry);if(ha.isNone(f))return null;switch(u){case "esriGeometryPoint":return u=
V,L&&O?u=G:L?u=r:O&&(u=Y),u(f);case "esriGeometryMultipoint":return ja(f,L,O);case "esriGeometryPolyline":return N(f,L,O);case "esriGeometryPolygon":return m(f,L,O);default:Ta.error("convertToGeometry:unknown-geometry",new d(`Unable to parse unknown geometry type '${u}'`))}}function qa(f,u,L,O,ca){f.length=0;if(ha.isNone(L)){for(const D of u)f.push({attributes:D.attributes});return f}switch(L){case "esriGeometryPoint":var X=V;O&&ca?X=G:O?X=r:ca&&(X=Y);for(var w of u){const {geometry:D,attributes:U}=
w;O=ha.isSome(D)?X(D):null;f.push({attributes:U,geometry:O})}break;case "esriGeometryMultipoint":return W(f,u,O,ca);case "esriGeometryPolyline":for(const D of u){const {geometry:U,attributes:ma}=D;let na;ha.isSome(U)&&(na=N(U,O,ca));f.push({attributes:ma,geometry:na})}break;case "esriGeometryPolygon":for(X of u){const {geometry:D,attributes:U,centroid:ma}=X;let na;ha.isSome(D)&&(na=m(D,O,ca));ma?(w=V(ma),f.push({attributes:U,centroid:w,geometry:na})):f.push({attributes:U,geometry:na})}break;default:Ta.error("convertToFeatureSet:unknown-geometry",
new d(`Unable to parse unknown geometry type '${L}'`))}return f}function ya(f,u,L,O,ca,X,w=L,D=O){f.lengths.length&&(f.lengths.length=0);f.coords.length&&(f.coords.length=0);if(ha.isNone(u)||!u.coords.length)return null;ca=Ka[ca];const {coords:U,lengths:ma}=u;u=l(L,O);const na=l(L&&w,O&&D);L=v(L,O,w,D);if(!ma.length)return L(f.coords,U,0,0,fa(X,U[0]),aa(X,U[1])),f.lengths.length&&(f.lengths.length=0),f.coords.length=u,f;let sa,ua=0,wa,Ia=0;for(const Fa of ma){if(Fa<ca)continue;let Ea=0;wa=Ia;D=O=
fa(X,U[ua]);sa=w=aa(X,U[ua+1]);L(f.coords,U,wa,ua,D,sa);Ea++;ua+=u;wa+=na;for(let za=1;za<Fa;za++,ua+=u)if(D=fa(X,U[ua]),sa=aa(X,U[ua+1]),D!==O||sa!==w)L(f.coords,U,wa,ua,D-O,sa-w),wa+=na,Ea++,O=D,w=sa;Ea>=ca&&(f.lengths.push(Ea),Ia=wa)}f.coords.length=Ia;return f.coords.length?f:null}function xa(f,u,L,O,ca,X,w){let D=O,U=0;for(let na=X+L;na<w;na+=L){{var ma=u[na];const sa=u[na+1],ua=u[w],wa=u[w+1];let Ia=u[X],Fa=u[X+1],Ea=ua-Ia,za=wa-Fa;if(0!==Ea||0!==za){const Da=((ma-Ia)*Ea+(sa-Fa)*za)/(Ea*Ea+
za*za);1<Da?(Ia=ua,Fa=wa):0<Da&&(Ia+=Ea*Da,Fa+=za*Da)}Ea=ma-Ia;za=sa-Fa;ma=Ea*Ea+za*za}ma>D&&(U=na,D=ma)}D>O&&(U-X>L&&xa(f,u,L,O,ca,X,U),ca(f,u,f.length,U,u[U],u[U+1]),w-U>L&&xa(f,u,L,O,ca,U,w))}function Ba(f,u,L,O,ca){const {coords:X,lengths:w}=u,D=L?O?c:Ra:O?Ra:Ca;L=l(L,O);if(!X.length)return f!==u&&(f.lengths.length=0,f.coords.length=0),f;if(!w.length)return D(f.coords,X,0,0,I(ca,X[0]),F(ca,X[1])),f!==u&&(f.lengths.length=0,f.coords.length=L),f;const [U,ma]=ca.scale;O=0;for(let na=0;na<w.length;na++){const sa=
w[na];f.lengths[na]=sa;let ua=I(ca,X[O]),wa=F(ca,X[O+1]);D(f.coords,X,O,O,ua,wa);O+=L;for(let Ia=1;Ia<sa;Ia++,O+=L)ua+=X[O]*U,wa-=X[O+1]*ma,D(f.coords,X,O,O,ua,wa)}f!==u&&(f.lengths.length=w.length,f.coords.length=X.length);return f}function Na(f,u,L,O){let ca=0,X=f[O*u],w=f[O*(u+1)];for(let D=1;D<L;D++){const U=X+f[O*(u+D)],ma=w+f[O*(u+D)+1],na=(U-X)*(ma+w);X=U;w=ma;ca+=na}return.5*ca}const Ta=ia.getLogger("esri.tasks.support.optimizedFeatureSet"),Ka={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,
esriGeometryMultipoint:0},Ca=(f,u,L,O,ca,X)=>{f[L]=ca;f[L+1]=X},Ra=(f,u,L,O,ca,X)=>{f[L]=ca;f[L+1]=X;f[L+2]=u[O+2]},gb=(f,u,L,O,ca,X)=>{f[L]=ca;f[L+1]=X;f[L+2]=u[O+3]},c=(f,u,L,O,ca,X)=>{f[L]=ca;f[L+1]=X;f[L+2]=u[O+2];f[L+3]=u[O+3]},k=[],T=[];q.convertFromFeature=function(f,u,L,O,ca){k[0]=f;[f]=ea(T,k,u,L,O,ca);k.length=T.length=0;return f};q.convertFromFeatureSet=function(f,u){const L=new h,{hasM:O,hasZ:ca,features:X,objectIdFieldName:w,spatialReference:D,geometryType:U,exceededTransferLimit:ma,
transform:na,fields:sa}=f;sa&&(L.fields=sa);L.geometryType=U;L.objectIdFieldName=w||u;L.spatialReference=D;if(!L.objectIdFieldName)return Ta.error(new d("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),L;X&&ea(L.features,X,U,ca,O,L.objectIdFieldName);ma&&(L.exceededTransferLimit=ma);O&&(L.hasM=O);ca&&(L.hasZ=ca);na&&(L.transform=na);return L};q.convertFromFeatures=ea;q.convertFromGeometry=function(f,u,L){if(ha.isNone(f))return null;const O=new H;"hasZ"in f&&null==u&&
(u=f.hasZ);"hasM"in f&&null==L&&(L=f.hasM);if(p.isPoint(f))return M(null!=u?u:null!=f.z,null!=L?L:null!=f.m)(O,f);if(p.isPolygon(f))return J(O,f,u,L);if(p.isPolyline(f))return n(O,f,l(u,L));if(p.isMultipoint(f))return E(O,f,l(u,L));Ta.error("convertFromGeometry:unknown-geometry",new d(`Unable to parse unknown geometry type '${f}'`))};q.convertFromGraphics=function(f,u,L,O,ca,X){const w=f.length;switch(L){case "esriGeometryPoint":P(f,u,O,ca,X);break;case "esriGeometryMultipoint":B(f,u,O,ca,X);break;
case "esriGeometryPolyline":Q(f,u,O,ca,X);break;case "esriGeometryPolygon":z(f,u,O,ca,X);break;default:Ta.error("convertToFeatureSet:unknown-geometry",new d(`Unable to parse unknown geometry type '${L}'`))}for(O=0;O<u.length;O++)f[O+w].geometryType=L,f[O+w].insertAfter=u[O].insertAfter,f[O+w].groupId=u[O].groupId;return f};q.convertFromMultipoint=E;q.convertFromMultipointFeatures=B;q.convertFromNestedArray=Z;q.convertFromPoint=function(f,u,L=M(null!=u.z,null!=u.m)){return L(f,u)};q.convertFromPointFeatures=
P;q.convertFromPolygon=J;q.convertFromPolyline=n;q.convertFromPolylineFeatures=Q;q.convertToFeature=function(f,u,L,O){T[0]=f;qa(k,T,u,L,O);f=k[0];k.length=T.length=0;return f};q.convertToFeatureSet=function(f){const {objectIdFieldName:u,spatialReference:L,transform:O,fields:ca,hasM:X,hasZ:w,features:D,geometryType:U,exceededTransferLimit:ma,uniqueIdField:na,queryGeometry:sa,queryGeometryType:ua}=f;f=qa([],D,U,w,X);const wa=ka(sa,ua,!1,!1);f={features:f,fields:ca,geometryType:U,objectIdFieldName:u,
spatialReference:L,uniqueIdField:na,queryGeometry:wa};O&&(f.transform=O);ma&&(f.exceededTransferLimit=ma);X&&(f.hasM=X);w&&(f.hasZ=w);return f};q.convertToFeatures=qa;q.convertToGeometry=ka;q.convertToMultipoint=ja;q.convertToMultipointFeatures=W;q.convertToPoint=function(f,u,L){return f?u?L?G(f):r(f):L?Y(f):V(f):null};q.convertToPolygon=m;q.convertToPolyline=N;q.deltaDecodeGeometry=function(f,u){if(ha.isNone(f))return null;const L=f.clone(),O=f.coords;f=f.lengths;let ca=0;for(let D=0;D<f.length;D++){const U=
f[D];var X=O[u*ca],w=O[u*ca+1];for(let ma=1;ma<U;ma++)X+=O[u*(ca+ma)],w+=O[u*(ca+ma)+1],L.coords[u*(ca+ma)]=X,L.coords[u*(ca+ma)+1]=w;ca+=U}return L};q.deltaEncodeGeometry=function(f,u){const L=f.clone(),O=f.coords;f=f.lengths;let ca=0;for(let w=0;w<f.length;w++){const D=f[w];let U=O[u*ca];var X=O[u*ca+1];for(let ma=1;ma<D;ma++){const na=O[u*(ca+ma)],sa=O[u*(ca+ma)+1];X=sa-X;L.coords[u*(ca+ma)]=na-U;L.coords[u*(ca+ma)+1]=X;U=na;X=sa}ca+=D}return L};q.generalizeOptimizedGeometry=function(f,u,L,O,ca,
X,w=L,D=O){f.lengths.length&&(f.lengths.length=0);f.coords.length&&(f.coords.length=0);if(!u||!u.coords.length)return null;ca=Ka[ca];const {coords:U,lengths:ma}=u;u=l(L,O);const na=l(L&&w,O&&D);L=v(L,O,w,D);if(!ma.length)return L(f.coords,U,0,0,U[0],U[1]),f.lengths.length&&(f.lengths.length=0),f.coords.length=u,f;O=0;X*=X;for(const sa of ma){if(sa<ca){O+=sa*u;continue}w=f.coords.length/na;D=O;const ua=O+(sa-1)*u;L(f.coords,U,f.coords.length,D,U[D],U[D+1]);xa(f.coords,U,u,X,L,D,ua);L(f.coords,U,f.coords.length,
ua,U[ua],U[ua+1]);D=f.coords.length/na-w;D>=ca?f.lengths.push(D):f.coords.length=w*na;O+=sa*u}return f.coords.length?f:null};q.getBoundsOptimizedGeometry=function(f,u,L,O){if(ha.isNone(u)||!u.coords||!u.coords.length)return null;L=l(L,O);let ca=O=Number.POSITIVE_INFINITY,X=Number.NEGATIVE_INFINITY,w=Number.NEGATIVE_INFINITY;if(u&&u.coords){u=u.coords;for(let D=0;D<u.length;D+=L){const U=u[D],ma=u[D+1];O=Math.min(O,U);X=Math.max(X,U);ca=Math.min(ca,ma);w=Math.max(w,ma)}}f[0]=O;f[1]=ca;f[2]=X;f[3]=
w;return f};q.getQuantizedArea=function(f,u){const {coords:L,lengths:O}=f;let ca=f=0;for(let X=0;X<O.length;X++)ca+=Na(L,f,O[X],u),f+=X;return Math.abs(ca)};q.getQuantizedBoundsOptimizedGeometry=function(f,u,L,O){L=l(L,O);const {lengths:ca,coords:X}=u;O=u=Number.POSITIVE_INFINITY;let w=Number.NEGATIVE_INFINITY,D=Number.NEGATIVE_INFINITY,U=0;for(const ma of ca){let na=X[U],sa=X[U+1];u=Math.min(na,u);O=Math.min(sa,O);w=Math.max(na,w);D=Math.max(sa,D);U+=L;for(let ua=1;ua<ma;ua++,U+=L){const wa=X[U],
Ia=X[U+1];na+=wa;sa+=Ia;0>wa&&(u=Math.min(u,na));0<wa&&(w=Math.max(w,na));0>Ia?O=Math.min(O,sa):0<Ia&&(D=Math.max(D,sa))}}f[0]=u;f[1]=O;f[2]=w;f[3]=D;return f};q.getSignedQuantizedRingArea=Na;q.quantizeOptimizedFeatureSet=function(f,u){const {geometryType:L,features:O,hasM:ca,hasZ:X}=u;if(!f)return u;for(let w=0;w<O.length;w++){const D=O[w],U=D.weakClone();U.geometry=new H;ya(U.geometry,D.geometry,ca,X,L,f);D.centroid&&(U.centroid=new H,ya(U.centroid,D.centroid,ca,X,"esriGeometryPoint",f));O[w]=U}u.transform=
f;return u};q.quantizeOptimizedGeometry=ya;q.quantizeX=fa;q.quantizeY=aa;q.removeCollinearVectices=function(f,u,L,O,ca){if(!u||!u.coords||!u.coords.length)return null;L=Ka[L];const {coords:X,lengths:w}=u;u=v(O,ca,O,ca);O=l(O,ca);let D=ca=0,U=0,ma=0;for(const ua of w){D=ma;u(f.coords,X,D,ca,X[ca],X[ca+1]);ca+=O;var na=X[ca];let wa=X[ca+1],Ia=na,Fa=wa;var sa=wa/na;D+=O;u(f.coords,X,D,ca,Ia,Fa);ca+=O;for(let Ea=2;Ea<ua;Ea++){na=X[ca];wa=X[ca+1];const za=wa/na,Da=sa===za||!isFinite(sa)&&!isFinite(za);
sa=Da&&isFinite(za)?0<=sa&&0<=za||0>=sa&&0>=za:0<=Fa&&0<=wa||0>=Fa&&0>=wa;Da&&sa?(Ia+=na,Fa+=wa):(Ia=na,Fa=wa,D+=O);u(f.coords,X,D,ca,Ia,Fa);ca+=O;sa=za}D+=O;na=(D-ma)/O;na>=L&&(f.lengths[U]=na,ma=D,U++)}f.coords.length>ma&&(f.coords.length=ma);f.lengths.length>U&&(f.lengths.length=U);return f.coords.length&&f.lengths.length?f:null};q.removeZMValues=function(f,u,L,O,ca,X){const w=l(L,O);L=v(L,O,ca,X);O=u.coords;f.coords.length=0;f.lengths.length=0;f.lengths.push(...u.lengths);for(u=0;u<O.length;u+=
w)L(f.coords,O,f.coords.length,u,O[u],O[u+1]);return f};q.unquantizeOptimizedFeatureSet=function(f){const {transform:u,features:L,hasM:O,hasZ:ca}=f;if(!u)return f;for(const X of L)ha.isSome(X.geometry)&&Ba(X.geometry,X.geometry,O,ca,u),X.centroid&&Ba(X.centroid,X.centroid,O,ca,u);f.transform=null;return f};q.unquantizeOptimizedGeometry=Ba;q.unquantizeX=I;q.unquantizeY=F;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers",
"../../core/maybe"],function(q,d,ia){let ha=function(){function t(h=null,H={},l,v){this.geometry=h;this.attributes=H;this.centroid=l;this.objectId=v;this.geohashY=this.geohashX=this.displayId=0}t.prototype.weakClone=function(){const h=new t(this.geometry,this.attributes,this.centroid,this.objectId);h.displayId=this.displayId;h.geohashX=this.geohashX;h.geohashY=this.geohashY;return h};return t}(),p=function(t){function h(){return t.apply(this,arguments)||this}d._inheritsLoose(h,t);return h}(ha);q.OptimizedFeatureWithGeometry=
p;q["default"]=ha;q.hasGeometry=function(t){return!(ia.isNone(t.geometry)||!t.geometry.coords||!t.geometry.coords.length)};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function q(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=
!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}q.prototype.weakClone=function(){const d=new q;d.objectIdFieldName=this.objectIdFieldName;d.globalIdFieldName=this.globalIdFieldName;d.geohashFieldName=this.geohashFieldName;d.geometryProperties=this.geometryProperties;d.geometryType=this.geometryType;d.spatialReference=this.spatialReference;d.hasZ=this.hasZ;d.hasM=this.hasM;d.features=this.features;d.fields=this.fields;d.transform=this.transform;d.exceededTransferLimit=this.exceededTransferLimit;
d.uniqueIdField=this.uniqueIdField;d.queryGeometry=this.queryGeometry;d.queryGeometryType=this.queryGeometryType;return d};return q}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(q){return function(){function d(ha=[],p=[],t=!1){this.lengths=null!=ha?ha:[];this.coords=null!=p?p:[];this.hasIndeterminateRingOrder=t}var ia=d.prototype;ia.forEachVertex=function(ha){let p=0;this.lengths.length||ha(this.coords[0],this.coords[1]);for(let t=
0;t<this.lengths.length;t++){const h=this.lengths[t];for(let H=0;H<h;H++)ha(this.coords[2*(H+p)],this.coords[2*(H+p)+1]);p+=h}};ia.clone=function(ha){return ha?(ha.set(this.coords),new d(this.lengths.slice(),ha,this.hasIndeterminateRingOrder)):new d(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};q._createClass(d,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},{key:"size",get:function(){return this.lengths.reduce((ha,
p)=>ha+p)}}]);return d}()})},"esri/layers/graphics/objectIdUtils":function(){define(["exports"],function(q){q.findLastObjectIdFromFeatures=function(d,ia){let ha=0;for(const t of ia){var p;ia=null==(p=t.attributes)?void 0:p[d];"number"===typeof ia&&isFinite(ia)&&(ha=Math.max(ha,ia))}return ha};q.initialObjectId=1;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter".split(" "),
function(q,d,ia,ha,p,t,h,H,l,v){return function(){function fa(I){this.geometryInfo=I;this._boundsStore=new l.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new ia;this.featureAdapter=v.optimizedFeatureQueryEngineAdapter}var aa=fa.prototype;aa.add=function(I){this._add(I);this._emitChanged()};aa.addMany=function(I){for(const F of I)this._add(F);this._emitChanged()};aa.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};aa.removeById=
function(I){I=this._featuresById.get(I);if(!I)return null;this._remove(I);this._emitChanged();return I};aa.removeManyById=function(I){this._boundsStore.invalidateIndex();for(const F of I)(I=this._featuresById.get(F))&&this._remove(I);this._emitChanged()};aa.forEachBounds=function(I,F,V){for(const e of I)(I=this._boundsStore.get(e.objectId))&&F(t.fromRect(V,I))};aa.getFeature=function(I){return this._featuresById.get(I)};aa.has=function(I){return this._featuresById.has(I)};aa.forEach=function(I){this._featuresById.forEach(F=>
I(F))};aa.forEachInBounds=function(I,F){this._boundsStore.forEachInBounds(I,V=>{F(this._featuresById.get(V))})};aa.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};aa.sweep=function(){let I=!1;this._featuresById.forEach((F,V)=>{this._markedIds.has(V)||(I=!0,this._remove(F))});this._markedIds.clear();I&&this._emitChanged()};aa._emitChanged=function(){this.events.emit("changed",void 0)};aa._add=function(I){if(I){var F=I.objectId;if(null==F)ha.getLogger("esri.layers.graphics.data.FeatureStore").error(new d("featurestore:invalid-feature",
"feature id is missing",{feature:I}));else{var V=this._featuresById.get(F);this._markedIds.add(F);if(V){I.displayId=V.displayId;var e=this._boundsStore.get(F);this._boundsStore.delete(F)}else if(p.isSome(this.onFeatureAdd))this.onFeatureAdd(I);!p.isNone(I.geometry)&&I.geometry.coords&&I.geometry.coords.length?(e=H.getBoundsOptimizedGeometry(p.isSome(e)?e:h.create(),I.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),p.isSome(e)&&this._boundsStore.set(F,e)):this._boundsStore.set(F,null);this._featuresById.set(F,
I)}}};aa._remove=function(I){if(p.isSome(this.onFeatureRemove))this.onFeatureRemove(I);this._markedIds.delete(I.objectId);this._boundsStore.delete(I.objectId);this._featuresById.delete(I.objectId);return I};q._createClass(fa,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",
get:function(){if(!this.numFeatures)return null;const I=h.create(h.NEGATIVE_INFINITY);this._featuresById.forEach(F=>{if(F=this._boundsStore.get(F.objectId))I[0]=Math.min(F[0],I[0]),I[1]=Math.min(F[1],I[1]),I[2]=Math.max(F[2],I[2]),I[3]=Math.max(F[3],I[3])});return I}},{key:"storeStatistics",get:function(){let I=0;this._featuresById.forEach(F=>{p.isSome(F.geometry)&&F.geometry.coords&&(I+=F.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:I/(this.hasZ?this.hasM?4:3:
this.hasM?3:2)}}}]);return fa}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(q,d,ia,ha,p){let t=function(){function h(){this._emitter=new h.EventEmitter(this)}var H=h.prototype;H.emit=function(l,v){return this._emitter.emit(l,v)};H.on=function(l,v){return this._emitter.on(l,v)};H.once=function(l,v){return this._emitter.once(l,v)};H.hasEventListener=function(l){return this._emitter.hasEventListener(l)};
return h}();(function(h){let H=function(){function v(aa=null){this.target=aa;this._listenersMap=null}var fa=v.prototype;fa.clear=function(){this._listenersMap&&this._listenersMap.clear();this._listenersMap=null};fa.emit=function(aa,I){aa=this._listenersMap&&this._listenersMap.get(aa);if(!aa)return!1;const F=this.target||this;[...aa].forEach(V=>{V.call(F,I)});return 0<aa.length};fa.on=function(aa,I){if(Array.isArray(aa)){var F=aa.map(V=>this.on(V,I));return ha.handlesGroup(F)}if(-1<aa.indexOf(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");
this._listenersMap||(this._listenersMap=new Map);F=this._listenersMap.get(aa)||[];F.push(I);this._listenersMap.set(aa,F);return{remove:()=>{const V=this._listenersMap&&this._listenersMap.get(aa)||[],e=V.indexOf(I);0<=e&&V.splice(e,1)}}};fa.once=function(aa,I){const F=this.on(aa,V=>{F.remove();I.call(null,V)});return F};fa.hasEventListener=function(aa){aa=this._listenersMap&&this._listenersMap.get(aa);return null!=aa&&0<aa.length};return v}();h.EventEmitter=H;h.EventedMixin=v=>{v=function(fa){function aa(){var F=
fa.apply(this,arguments)||this;F._emitter=new H;return F}q._inheritsLoose(aa,fa);var I=aa.prototype;I.destroy=function(){this._emitter.clear()};I.emit=function(F,V){return this._emitter.emit(F,V)};I.on=function(F,V){return this._emitter.on(F,V)};I.once=function(F,V){return this._emitter.once(F,V)};I.hasEventListener=function(F){return this._emitter.hasEventListener(F)};return aa}(v);return v=d.__decorate([p.subclass("esri.core.Evented")],v)};let l=function(v){function fa(){var I=v.apply(this,arguments)||
this;I._emitter=new t.EventEmitter(q._assertThisInitialized(I));return I}q._inheritsLoose(fa,v);var aa=fa.prototype;aa.destroy=function(){this._emitter.clear()};aa.emit=function(I,F){return this._emitter.emit(I,F)};aa.on=function(I,F){return this._emitter.on(I,F)};aa.once=function(I,F){return this._emitter.once(I,F)};aa.hasEventListener=function(I){return this._emitter.hasEventListener(I)};return fa}(ia);l=d.__decorate([p.subclass("esri.core.Evented")],l);h.EventedAccessor=l})(t||(t={}));return t})},
"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe","../Extent","./aaBoundingRect"],function(q,d,ia,ha){function p(e=F){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function t(e,r,K,Y,A,G,C=p()){C[0]=e;C[1]=r;C[2]=K;C[3]=Y;C[4]=A;C[5]=G;return C}function h(e){return e[0]>=e[3]?0:e[3]-e[0]}function H(e){return e[1]>=e[4]?0:e[4]-e[1]}function l(e){return e[2]>=e[5]?0:e[5]-e[2]}function v(e,r){return Math.max(r[0],e[0])<=Math.min(r[3],e[3])&&Math.max(r[1],e[1])<=Math.min(r[4],
e[4])&&Math.max(r[2],e[2])<=Math.min(r[5],e[5])}function fa(e,r){e[0]=r[0];e[1]=r[1];e[2]=r[2];e[3]=r[3];e[4]=r[4];e[5]=r[5];return e}function aa(e){return 6===e.length}const I=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],F=[0,0,0,0,0,0],V=p();q.NEGATIVE_INFINITY=I;q.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];q.ZERO=F;q.allFinite=function(e){for(let r=0;6>r;r++)if(!isFinite(e[r]))return!1;return!0};q.center=function(e,r=[0,0,0]){r[0]=e[0]+h(e)/2;r[1]=
e[1]+H(e)/2;r[2]=e[2]+l(e)/2;return r};q.contains=function(e,r){return r[0]>=e[0]&&r[1]>=e[1]&&r[2]>=e[2]&&r[3]<=e[3]&&r[4]<=e[4]&&r[5]<=e[5]};q.containsPoint=function(e,r){return r[0]>=e[0]&&r[1]>=e[1]&&r[2]>=e[2]&&r[0]<=e[3]&&r[1]<=e[4]&&r[2]<=e[5]};q.containsPointWithMargin=function(e,r,K){return r[0]>=e[0]-K&&r[1]>=e[1]-K&&r[2]>=e[2]-K&&r[0]<=e[3]+K&&r[1]<=e[4]+K&&r[2]<=e[5]+K};q.create=p;q.depth=H;q.diameter=function(e){const r=h(e),K=l(e);e=H(e);return Math.sqrt(r*r+K*K+e*e)};q.empty=function(e){return e?
fa(e,I):p(I)};q.equals=function(e,r,K){if(d.isNone(e)||d.isNone(r))return e===r;if(!aa(e)||!aa(r))return!1;if(K)for(let Y=0;Y<e.length;Y++){if(!K(e[Y],r[Y]))return!1}else for(K=0;K<e.length;K++)if(e[K]!==r[K])return!1;return!0};q.expandWithAABB=function(e,r){e[0]=Math.min(e[0],r[0]);e[1]=Math.min(e[1],r[1]);e[2]=Math.min(e[2],r[2]);e[3]=Math.max(e[3],r[3]);e[4]=Math.max(e[4],r[4]);e[5]=Math.max(e[5],r[5])};q.expandWithBuffer=function(e,r,K=0,Y=r.length/3){let A=e[0],G=e[1],C=e[2],M=e[3],P=e[4],W=
e[5];for(let ja=0;ja<Y;ja++)A=Math.min(A,r[K+3*ja]),G=Math.min(G,r[K+3*ja+1]),C=Math.min(C,r[K+3*ja+2]),M=Math.max(M,r[K+3*ja]),P=Math.max(P,r[K+3*ja+1]),W=Math.max(W,r[K+3*ja+2]);e[0]=A;e[1]=G;e[2]=C;e[3]=M;e[4]=P;e[5]=W};q.expandWithNestedArray=function(e,r,K){const Y=r.length;let A=e[0],G=e[1],C=e[2],M=e[3],P=e[4],W=e[5];if(K)for(K=0;K<Y;K++){var ja=r[K];A=Math.min(A,ja[0]);G=Math.min(G,ja[1]);C=Math.min(C,ja[2]);M=Math.max(M,ja[0]);P=Math.max(P,ja[1]);W=Math.max(W,ja[2])}else for(K=0;K<Y;K++)ja=
r[K],A=Math.min(A,ja[0]),G=Math.min(G,ja[1]),M=Math.max(M,ja[0]),P=Math.max(P,ja[1]);e[0]=A;e[1]=G;e[2]=C;e[3]=M;e[4]=P;e[5]=W};q.expandWithOffset=function(e,r,K,Y){e[0]=Math.min(e[0],e[0]+r);e[3]=Math.max(e[3],e[3]+r);e[1]=Math.min(e[1],e[1]+K);e[4]=Math.max(e[4],e[4]+K);e[2]=Math.min(e[2],e[2]+Y);e[5]=Math.max(e[5],e[5]+Y)};q.expandWithRect=function(e,r){e[0]=Math.min(e[0],r[0]);e[1]=Math.min(e[1],r[1]);e[3]=Math.max(e[3],r[2]);e[4]=Math.max(e[4],r[3])};q.expandWithVec3=function(e,r){e[0]=Math.min(e[0],
r[0]);e[1]=Math.min(e[1],r[1]);e[2]=Math.min(e[2],r[2]);e[3]=Math.max(e[3],r[0]);e[4]=Math.max(e[4],r[1]);e[5]=Math.max(e[5],r[2])};q.fromExtent=function(e,r=p()){r[0]=e.xmin;r[1]=e.ymin;r[2]=e.zmin;r[3]=e.xmax;r[4]=e.ymax;r[5]=e.zmax;return r};q.fromMinMax=function(e,r,K=p()){K[0]=e[0];K[1]=e[1];K[2]=e[2];K[3]=r[0];K[4]=r[1];K[5]=r[2];return K};q.fromRect=function(e,r){e[0]=r[0];e[1]=r[1];e[2]=Number.NEGATIVE_INFINITY;e[3]=r[2];e[4]=r[3];e[5]=Number.POSITIVE_INFINITY;return e};q.fromValues=t;q.getMax=
function(e,r){r[0]=e[3];r[1]=e[4];r[2]=e[5];return r};q.getMin=function(e,r){r[0]=e[0];r[1]=e[1];r[2]=e[2];return r};q.height=l;q.intersects=v;q.intersectsClippingArea=function(e,r){return d.isNone(r)?!0:v(e,r)};q.is=aa;q.isPoint=function(e){return 0===h(e)&&0===H(e)&&0===l(e)};q.maximumDimension=function(e){return Math.max(h(e),l(e),H(e))};q.offset=function(e,r,K,Y,A=e){A[0]=e[0]+r;A[1]=e[1]+K;A[2]=e[2]+Y;A[3]=e[3]+r;A[4]=e[4]+K;A[5]=e[5]+Y;return A};q.scale=function(e,r,K=e){const Y=e[0]+h(e)/2,
A=e[1]+H(e)/2,G=e[2]+l(e)/2;K[0]=Y+(e[0]-Y)*r;K[1]=A+(e[1]-A)*r;K[2]=G+(e[2]-G)*r;K[3]=Y+(e[3]-Y)*r;K[4]=A+(e[4]-A)*r;K[5]=G+(e[5]-G)*r;return K};q.set=fa;q.setMax=function(e,r,K=e){K[3]=r[0];K[4]=r[1];K[5]=r[2];K!==e&&(K[0]=e[0],K[1]=e[1],K[2]=e[2]);return e};q.setMin=function(e,r,K=e){K[0]=r[0];K[1]=r[1];K[2]=r[2];K!==e&&(K[3]=e[3],K[4]=e[4],K[5]=e[5]);return K};q.size=function(e,r=[0,0,0]){r[0]=h(e);r[1]=H(e);r[2]=l(e);return r};q.toExtent=function(e,r){return isFinite(e[2])||isFinite(e[5])?new ia({xmin:e[0],
xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:r}):new ia({xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:r})};q.toRect=function(e,r){r||(r=ha.create());r[0]=e[0];r[1]=e[1];r[2]=e[3];r[3]=e[4];return r};q.width=h;q.wrap=function(e,r,K,Y,A,G){return t(e,r,K,Y,A,G,V)};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../Extent"],function(q,d,
ia,ha,p){function t(F=I){return[F[0],F[1],F[2],F[3]]}function h(F,V){F!==V&&(F[0]=V[0],F[1]=V[1],F[2]=V[2],F[3]=V[3]);return F}function H(F){return ha.isNone(F)||F[0]>=F[2]?0:F[2]-F[0]}function l(F){return F[1]>=F[3]?0:F[3]-F[1]}function v(F,V,e){return V>=F[0]&&e>=F[1]&&V<=F[2]&&e<=F[3]}function fa(F){return null!=F&&4===F.length}const aa=[Infinity,Infinity,-Infinity,-Infinity],I=[0,0,0,0];q.NEGATIVE_INFINITY=aa;q.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];q.UNIT=[0,0,1,1];q.ZERO=
I;q.allFinite=function(F){for(let V=0;4>V;V++)if(!isFinite(F[V]))return!1;return!0};q.area=function(F){return H(F)*l(F)};q.center=function(F,V=[0,0]){V[0]=(F[0]+F[2])/2;V[1]=(F[1]+F[3])/2;return V};q.clone=function(F){return[F[0],F[1],F[2],F[3]]};q.contains=function(F,V){return V[0]>=F[0]&&V[2]<=F[2]&&V[1]>=F[1]&&V[3]<=F[3]};q.containsPoint=function(F,V){return v(F,V[0],V[1])};q.containsPointObject=function(F,V){return v(F,V.x,V.y)};q.containsPointWithMargin=function(F,V,e){return V[0]>=F[0]-e&&V[1]>=
F[1]-e&&V[0]<=F[2]+e&&V[1]<=F[3]+e};q.containsXY=v;q.copy=h;q.create=t;q.distance=function(F,V){const e=(F[1]+F[3])/2,r=Math.max(Math.abs(V[0]-(F[0]+F[2])/2)-H(F)/2,0);F=Math.max(Math.abs(V[1]-e)-l(F)/2,0);return Math.sqrt(r*r+F*F)};q.empty=function(F){return F?h(F,aa):t(aa)};q.equals=function(F,V){return fa(F)&&fa(V)?F[0]===V[0]&&F[1]===V[1]&&F[2]===V[2]&&F[3]===V[3]:F===V};q.expand=function(F,V,e){if(ha.isNone(V))h(e,F);else if("length"in V)if(fa(V))e[0]=Math.min(F[0],V[0]),e[1]=Math.min(F[1],V[1]),
e[2]=Math.max(F[2],V[2]),e[3]=Math.max(F[3],V[3]);else{if(2===V.length||3===V.length)e[0]=Math.min(F[0],V[0]),e[1]=Math.min(F[1],V[1]),e[2]=Math.max(F[2],V[0]),e[3]=Math.max(F[3],V[1])}else switch(V.type){case "extent":e[0]=Math.min(F[0],V.xmin);e[1]=Math.min(F[1],V.ymin);e[2]=Math.max(F[2],V.xmax);e[3]=Math.max(F[3],V.ymax);break;case "point":e[0]=Math.min(F[0],V.x),e[1]=Math.min(F[1],V.y),e[2]=Math.max(F[2],V.x),e[3]=Math.max(F[3],V.y)}};q.expandPointInPlace=function(F,V){V[0]<F[0]&&(F[0]=V[0]);
V[0]>F[2]&&(F[2]=V[0]);V[1]<F[1]&&(F[1]=V[1]);V[1]>F[3]&&(F[3]=V[1])};q.expandWithNestedArray=function(F,V,e=F){const r=V.length;let K=F[0],Y=F[1],A=F[2];F=F[3];for(let G=0;G<r;G++){const C=V[G];K=Math.min(K,C[0]);Y=Math.min(Y,C[1]);A=Math.max(A,C[0]);F=Math.max(F,C[1])}e[0]=K;e[1]=Y;e[2]=A;e[3]=F;return e};q.fromExtent=function(F,V=t()){V[0]=F.xmin;V[1]=F.ymin;V[2]=F.xmax;V[3]=F.ymax;return V};q.fromValues=function(F,V,e,r,K=t()){K[0]=F;K[1]=V;K[2]=e;K[3]=r;return K};q.height=l;q.intersection=function(F,
V,e){if(ha.isNone(V))return h(e,F);const r=V[0],K=V[1],Y=V[2];V=V[3];e[0]=ia.clamp(F[0],r,Y);e[1]=ia.clamp(F[1],K,V);e[2]=ia.clamp(F[2],r,Y);e[3]=ia.clamp(F[3],K,V);return e};q.intersects=function(F,V){return Math.max(V[0],F[0])<=Math.min(V[2],F[2])&&Math.max(V[1],F[1])<=Math.min(V[3],F[3])};q.is=fa;q.isPoint=function(F){return(0===H(F)||!isFinite(F[0]))&&(0===l(F)||!isFinite(F[1]))};q.offset=function(F,V,e,r=F){r[0]=F[0]+V;r[1]=F[1]+e;r[2]=F[2]+V;r[3]=F[3]+e;return r};q.pad=function(F,V,e=F){e[0]=
F[0]-V;e[1]=F[1]-V;e[2]=F[2]+V;e[3]=F[3]+V;return e};q.setMax=function(F,V,e=F){e[2]=V[0];e[3]=V[1];e!==F&&(e[0]=F[0],e[1]=F[1]);return F};q.setMin=function(F,V,e=F){e[0]=V[0];e[1]=V[1];e!==F&&(e[2]=F[2],e[3]=F[3]);return e};q.size=function(F,V){V[0]=F[2]-F[0];V[1]=F[3]-F[1]};q.toExtent=function(F,V){return new p({xmin:F[0],ymin:F[1],xmax:F[2],ymax:F[3],spatialReference:V})};q.width=H;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports",
"../../../core/has","../../../core/libs/rbush/PooledRBush"],function(q,d,ia){function ha(h,H,l){p.minX=H[0];p.minY=H[1];p.maxX=H[2];p.maxY=H[3];h.search(p,l)}const p={minX:0,minY:0,maxX:0,maxY:0};let t=function(){function h(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new ia.PooledRBush(9,d("csp-restrictions")?l=>({minX:l[0],minY:l[1],maxX:l[2],maxY:l[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const l=
Array(this._idByBounds.size);let v=0;this._idByBounds.forEach((fa,aa)=>{l[v++]=aa});this._indexInvalid=!1;this._index.clear();this._index.load(l)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(l=>this._idByBounds.has(l))),this._boundsToLoad.length=0)}}var H=h.prototype;H.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};H.delete=function(l){const v=this._boundsById.get(l);this._boundsById.delete(l);
v&&(this._idByBounds.delete(v),this._indexInvalid||this._index.remove(v))};H.forEachInBounds=function(l,v){this._loadIndex();ha(this._index,l,fa=>v(this._idByBounds.get(fa)))};H.get=function(l){return this._boundsById.get(l)};H.has=function(l){return this._boundsById.has(l)};H.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};H.set=function(l,v){if(!this._indexInvalid){const fa=this._boundsById.get(l);fa&&(this._index.remove(fa),this._idByBounds.delete(fa))}this._boundsById.set(l,
v);v&&(this._idByBounds.set(v,l),this._indexInvalid||(this._boundsToLoad.push(v),5E4<this._boundsToLoad.length&&this._loadIndex()))};return h}();q.BoundsStore=t;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),function(q,d,ia,ha,p,t){function h(W,ja){H(W,0,W.children.length,ja,W)}function H(W,ja,B,E,N){N||
(N=new M([]));N.minX=Infinity;N.minY=Infinity;N.maxX=-Infinity;N.maxY=-Infinity;for(let Q=ja,n;Q<B;Q++)n=W.children[Q],l(N,W.leaf?E(n):n);return N}function l(W,ja){W.minX=Math.min(W.minX,ja.minX);W.minY=Math.min(W.minY,ja.minY);W.maxX=Math.max(W.maxX,ja.maxX);W.maxY=Math.max(W.maxY,ja.maxY)}function v(W,ja){return W.minX-ja.minX}function fa(W,ja){return W.minY-ja.minY}function aa(W){return(W.maxX-W.minX)*(W.maxY-W.minY)}function I(W){return W.maxX-W.minX+(W.maxY-W.minY)}function F(W,ja){return W.minX<=
ja.minX&&W.minY<=ja.minY&&ja.maxX<=W.maxX&&ja.maxY<=W.maxY}function V(W,ja){return ja.minX<=W.maxX&&ja.minY<=W.maxY&&ja.maxX>=W.minX&&ja.maxY>=W.minY}function e(W,ja,B,E,N){for(ja=[ja,B];ja.length;){B=ha.assumeNonNull(ja.pop());const Q=ha.assumeNonNull(ja.pop());if(B-Q<=E)continue;const n=Q+Math.ceil((B-Q)/E/2)*E;t.quickselect(W,n,Q,B,N);ja.push(Q,n,n,B)}}let r=function(){function W(B=9,E){this.compareMinX=v;this.compareMinY=fa;this.toBBox=function(N){return N};this._maxEntries=Math.max(4,B||9);this._minEntries=
Math.max(2,Math.ceil(.4*this._maxEntries));E&&("function"===typeof E?this.toBBox=E:this._initFormat(E));this.clear()}var ja=W.prototype;ja.destroy=function(){this.clear();K.prune();Y.prune();A.prune();G.prune()};ja.all=function(B){this._all(this.data,B)};ja.search=function(B,E){let N=this.data;const Q=this.toBBox;if(V(B,N))for(K.clear();N;){for(let n=0,m=N.children.length;n<m;n++){const z=N.children[n],J=N.leaf?Q(z):z;V(B,J)&&(N.leaf?E(z):F(B,J)?this._all(z,E):K.push(z))}N=K.pop()}};ja.collides=function(B){let E=
this.data;const N=this.toBBox;if(!V(B,E))return!1;for(K.clear();E;){for(let Q=0,n=E.children.length;Q<n;Q++){const m=E.children[Q],z=E.leaf?N(m):m;if(V(B,z)){if(E.leaf||F(B,z))return!0;K.push(m)}}E=K.pop()}return!1};ja.load=function(B){if(!B.length)return this;if(B.length<this._minEntries){for(let E=0,N=B.length;E<N;E++)this.insert(B[E]);return this}B=this._build(B.slice(0,B.length),0,B.length-1,0);if(this.data.children.length)if(this.data.height===B.height)this._splitRoot(this.data,B);else{if(this.data.height<
B.height){const E=this.data;this.data=B;B=E}this._insert(B,this.data.height-B.height-1,!0)}else this.data=B;return this};ja.insert=function(B){B&&this._insert(B,this.data.height-1);return this};ja.clear=function(){this.data=new M([]);return this};ja.remove=function(B){if(!B)return this;let E=this.data,N=null,Q=0,n=!1,m;const z=this.toBBox(B);A.clear();for(G.clear();E||0<A.length;){if(!E){var J;E=ha.assumeNonNull(A.pop());N=A.data[A.length-1];Q=null!=(J=G.pop())?J:0;n=!0}if(E.leaf&&(m=ia.indexOf(E.children,
B,E.children.length,E.indexHint),-1!==m)){E.children.splice(m,1);A.push(E);this._condense(A);break}n||E.leaf||!F(E,z)?N?(Q++,E=N.children[Q],n=!1):E=null:(A.push(E),G.push(Q),Q=0,N=E,E=E.children[0])}return this};ja.toJSON=function(){return this.data};ja.fromJSON=function(B){this.data=B;return this};ja._all=function(B,E){for(Y.clear();B;){var N;if(!0===B.leaf)for(const Q of B.children)E(Q);else Y.pushArray(B.children);B=null!=(N=Y.pop())?N:null}};ja._build=function(B,E,N,Q){var n=N-E+1,m=this._maxEntries;
if(n<=m)return B=new M(B.slice(E,N+1)),h(B,this.toBBox),B;Q||(Q=Math.ceil(Math.log(n)/Math.log(m)),m=Math.ceil(n/m**(Q-1)));const z=new P([]);z.height=Q;n=Math.ceil(n/m);m=n*Math.ceil(Math.sqrt(m));for(e(B,E,N,m,this.compareMinX);E<=N;E+=m){const J=Math.min(E+m-1,N);e(B,E,J,n,this.compareMinY);for(let Z=E;Z<=J;Z+=n)z.children.push(this._build(B,Z,Math.min(Z+n-1,J),Q-1))}h(z,this.toBBox);return z};ja._chooseSubtree=function(B,E,N,Q){for(;;){Q.push(E);if(!0===E.leaf||Q.length-1===N)break;let n=Infinity,
m=Infinity,z=void 0;for(let J=0,Z=E.children.length;J<Z;J++){const ea=E.children[J],ka=aa(ea),qa=(Math.max(ea.maxX,B.maxX)-Math.min(ea.minX,B.minX))*(Math.max(ea.maxY,B.maxY)-Math.min(ea.minY,B.minY))-ka;qa<m?(m=qa,n=ka<n?ka:n,z=ea):qa===m&&ka<n&&(n=ka,z=ea)}E=z||E.children[0]}return E};ja._insert=function(B,E,N){var Q=this.toBBox;N=N?B:Q(B);A.clear();Q=this._chooseSubtree(N,this.data,E,A);Q.children.push(B);for(l(Q,N);0<=E;)if(A.data[E].children.length>this._maxEntries)this._split(A,E),E--;else break;
this._adjustParentBBoxes(N,A,E)};ja._split=function(B,E){const N=B.data[E];var Q=N.children.length;const n=this._minEntries;this._chooseSplitAxis(N,n,Q);(Q=this._chooseSplitIndex(N,n,Q))?(Q=N.children.splice(Q,N.children.length-Q),Q=N.leaf?new M(Q):new P(Q),Q.height=N.height,h(N,this.toBBox),h(Q,this.toBBox),E?B.data[E-1].children.push(Q):this._splitRoot(N,Q)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};ja._splitRoot=function(B,E){this.data=new P([B,E]);this.data.height=
B.height+1;h(this.data,this.toBBox)};ja._chooseSplitIndex=function(B,E,N){let Q,n,m=void 0;Q=n=Infinity;for(let J=E;J<=N-E;J++){var z=H(B,0,J,this.toBBox);const Z=H(B,J,N,this.toBBox),ea=Math.max(0,Math.min(z.maxX,Z.maxX)-Math.max(z.minX,Z.minX))*Math.max(0,Math.min(z.maxY,Z.maxY)-Math.max(z.minY,Z.minY));z=aa(z)+aa(Z);ea<Q?(Q=ea,m=J,n=z<n?z:n):ea===Q&&z<n&&(n=z,m=J)}return m};ja._chooseSplitAxis=function(B,E,N){const Q=B.leaf?this.compareMinX:v,n=B.leaf?this.compareMinY:fa,m=this._allDistMargin(B,
E,N,Q);E=this._allDistMargin(B,E,N,n);m<E&&B.children.sort(Q)};ja._allDistMargin=function(B,E,N,Q){B.children.sort(Q);Q=this.toBBox;var n=H(B,0,E,Q);const m=H(B,N-E,N,Q);let z=I(n)+I(m);for(let J=E;J<N-E;J++){const Z=B.children[J];l(n,B.leaf?Q(Z):Z);z+=I(n)}for(N=N-E-1;N>=E;N--)n=B.children[N],l(m,B.leaf?Q(n):n),z+=I(m);return z};ja._adjustParentBBoxes=function(B,E,N){for(;0<=N;N--)l(E.data[N],B)};ja._condense=function(B){for(let E=B.length-1;0<=E;E--){const N=B.data[E];if(0===N.children.length)if(0<
E){const Q=B.data[E-1],n=Q.children;n.splice(ia.indexOf(n,N,n.length,Q.indexHint),1)}else this.clear();else h(N,this.toBBox)}};ja._initFormat=function(B){const E=["return a"," - b",";"];this.compareMinX=new Function("a","b",E.join(B[0]));this.compareMinY=new Function("a","b",E.join(B[1]));this.toBBox=new Function("a","return {minX: a"+B[0]+", minY: a"+B[1]+", maxX: a"+B[2]+", maxY: a"+B[3]+"};")};return W}();const K=new p,Y=new p,A=new p,G=new p({deallocator:void 0});p=function(){this.minY=this.minX=
Infinity;this.maxY=this.maxX=-Infinity};let C=function(W){function ja(){var B=W.apply(this,arguments)||this;B.height=1;B.indexHint=new ia.PositionHint;return B}d._inheritsLoose(ja,W);return ja}(p),M=function(W){function ja(B){var E=W.call(this)||this;E.children=B;E.leaf=!0;return E}d._inheritsLoose(ja,W);return ja}(C),P=function(W){function ja(B){var E=W.call(this)||this;E.children=B;E.leaf=!1;return E}d._inheritsLoose(ja,W);return ja}(C);q.BBox=p;q.PooledRBush=r;q["default"]=r;Object.defineProperty(q,
"__esModule",{value:!0})})},"esri/chunks/quickselect":function(){define(["exports"],function(q){var d={exports:{}};(function(ia){(function(ha){ha=ha();void 0!==ha&&(ia.exports=ha)})(function(){function ha(h,H,l,v,fa){for(;v>l;){if(600<v-l){var aa=v-l+1,I=H-l+1,F=Math.log(aa),V=.5*Math.exp(2*F/3);F=.5*Math.sqrt(F*V*(aa-V)/aa)*(0>I-aa/2?-1:1);ha(h,H,Math.max(l,Math.floor(H-I*V/aa+F)),Math.min(v,Math.floor(H+(aa-I)*V/aa+F)),fa)}aa=h[H];I=l;V=v;p(h,l,H);for(0<fa(h[v],aa)&&p(h,l,v);I<V;){p(h,I,V);I++;
for(V--;0>fa(h[I],aa);)I++;for(;0<fa(h[V],aa);)V--}0===fa(h[l],aa)?p(h,l,V):(V++,p(h,V,v));V<=H&&(l=V+1);H<=V&&(v=V-1)}}function p(h,H,l){var v=h[H];h[H]=h[l];h[l]=v}function t(h,H){return h<H?-1:h>H?1:0}return function(h,H,l,v,fa){ha(h,H,l||0,v||h.length-1,fa||t)}})})(d);q.quickselect=d.exports})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(q,d,ia,ha){const p={getObjectId(t){return t.objectId},
getAttributes(t){return t.attributes},getAttribute(t,h){return t.attributes[h]},cloneWithGeometry(t,h){return new ia["default"](h,t.attributes,null,t.objectId)},getGeometry(t){return t.geometry},getCentroid(t,h){t.centroid||(t.centroid=d.getCentroidOptimizedGeometry(new ha,t.geometry,h.hasZ,h.hasM));return t.centroid}};q["default"]=p;q.optimizedFeatureQueryEngineAdapter=p;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/layers/graphics/centroid":function(){define(["exports","../../core/maybe"],
function(q,d){function ia(p,t,h,H,l,v,fa=1){v=l?v?4:3:v?3:2;let aa=h,I=h+v,F=0,V=0,e=h=0,r=0;for(let K=0,Y=H-1;K<Y;K++,aa+=v,I+=v){H=t[aa];const A=t[aa+1],G=t[aa+2],C=t[I],M=t[I+1],P=t[I+2];let W=H*M-C*A;e+=W;F+=(H+C)*W;V+=(A+M)*W;l&&(W=H*P-C*G,h+=(G+P)*W,r+=W);H<p[0]&&(p[0]=H);H>p[1]&&(p[1]=H);A<p[2]&&(p[2]=A);A>p[3]&&(p[3]=A);l&&(G<p[4]&&(p[4]=G),G>p[5]&&(p[5]=G))}0<e*fa&&(e*=-1);0<r*fa&&(r*=-1);if(!e)return null;p=[F,V,.5*e];l&&(p[3]=h,p[4]=.5*r);return p}function ha(p,t,h,H,l){l=H?l?4:3:l?3:2;
let v=t,fa=t+l,aa=0,I=0,F=0,V=0;for(let Y=0,A=h-1;Y<A;Y++,v+=l,fa+=l){var e=p[v];const G=p[v+1],C=p[v+2],M=p[fa],P=p[fa+1],W=p[fa+2];if(H){{var r=M-e;var K=P-G;const ja=W-C;r=Math.sqrt(r*r+K*K+ja*ja)}}else r=M-e,K=P-G,r=Math.sqrt(r*r+K*K);r&&(aa+=r,H?(e=[e+.5*(M-e),G+.5*(P-G),C+.5*(W-C)],I+=r*e[0],F+=r*e[1],V+=r*e[2]):(e=[e+.5*(M-e),G+.5*(P-G)],I+=r*e[0],F+=r*e[1]))}return 0<aa?H?[I/aa,F/aa,V/aa]:[I/aa,F/aa]:0<h?H?[p[t],p[t+1],p[t+2]]:[p[t],p[t+1]]:null}q.getCentroidOptimizedGeometry=function(p,t,
h,H,l){if(d.isNone(t)||!t.lengths.length)return null;const v="upperLeft"===(null==l?void 0:l.originPosition)?-1:1;p.lengths.length&&(p.lengths.length=0);p.coords.length&&(p.coords.length=0);l=p.coords;const fa=[],aa=h?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:I,coords:F}=t,V=h?H?
4:3:H?3:2;let e=0;for(var r of I){const K=ia(aa,F,e,r,h,H,v);K&&fa.push(K);e+=r*V}fa.sort((K,Y)=>{let A=v*K[2]-v*Y[2];0===A&&h&&(A=K[4]-Y[4]);return A});fa.length&&(r=6*fa[0][2],l[0]=fa[0][0]/r,l[1]=fa[0][1]/r,h&&(r=6*fa[0][4],l[2]=0!==r?fa[0][3]/r:0),l[0]<aa[0]||l[0]>aa[1]||l[1]<aa[2]||l[1]>aa[3]||h&&(l[2]<aa[4]||l[2]>aa[5]))&&(l.length=0);if(!l.length)if(t=t.lengths[0]?ha(F,0,I[0],h,H):null)l[0]=t[0],l[1]=t[1],h&&2<t.length&&(l[2]=t[2]);else return null;return p};q.lineCentroid=ha;Object.defineProperty(q,
"__esModule",{value:!0})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),function(q,d,ia,ha,p,t,h){function H(e,r){if(!r)return null;if("x"in r){var K={x:0,y:0};[K.x,K.y]=e(r.x,r.y,aa);null!=r.z&&(K.z=r.z);null!=r.m&&(K.m=r.m);return K}if("xmin"in
r)return K={xmin:0,ymin:0,xmax:0,ymax:0},[K.xmin,K.ymin]=e(r.xmin,r.ymin,aa),[K.xmax,K.ymax]=e(r.xmax,r.ymax,aa),r.hasZ&&(K.zmin=r.zmin,K.zmax=r.zmax,K.hasZ=!0),r.hasM&&(K.mmin=r.mmin,K.mmax=r.mmax,K.hasM=!0),K;if("rings"in r)return{rings:l(r.rings,e),hasM:r.hasM,hasZ:r.hasZ};if("paths"in r)return{paths:l(r.paths,e),hasM:r.hasM,hasZ:r.hasZ};if("points"in r)return{points:v(r.points,e),hasM:r.hasM,hasZ:r.hasZ}}function l(e,r){const K=[];for(const Y of e)K.push(v(Y,r));return K}function v(e,r){const K=
[];for(const Y of e)e=r(Y[0],Y[1],[0,0]),K.push(e),2<Y.length&&e.push(Y[2]),3<Y.length&&e.push(Y[3]);return K}function fa(){fa=d._asyncToGenerator(function*(e,r){r&&(e=Array.isArray(e)?e.map(K=>ia.isSome(K.geometry)&&K.geometry.spatialReference):[e],yield ha.initializeProjection(e.map(K=>({source:K,dest:r}))))});return fa.apply(this,arguments)}const aa=[0,0],I=H.bind(null,h.lngLatToXY),F=H.bind(null,h.xyToLngLat),V=new (function(){function e(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}
var r=e.prototype;r.push=function(){var K=d._asyncToGenerator(function*(Y,A,G){if(!(Y&&Y.length&&A&&G)||t.equals(A,G))return Y;const C={geometries:Y,inSpatialReference:A,outSpatialReference:G,resolve:null};this._jobs.push(C);return new Promise(M=>{C.resolve=M;null===this._timer&&(this._timer=setTimeout(this._process,10))})});return function(Y,A,G){return K.apply(this,arguments)}}();r._process=function(){this._timer=null;const K=this._jobs.shift();if(K){var {geometries:Y,inSpatialReference:A,outSpatialReference:G,
resolve:C}=K;h.canProject(A,G)?t.isWebMercator(G)?C(Y.map(I)):C(Y.map(F)):C(ha.projectMany(p.jsonAdapter,Y,A,G,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return e}());q.checkProjectionSupport=function(e,r){return fa.apply(this,arguments)};q.project=function(e,r,K){if(!e)return e;K||(K=r,r=e.spatialReference);return t.isValid(r)&&t.isValid(K)&&!t.equals(r,K)?h.canProject(r,K)?t.isWebMercator(K)?I(e):F(e):ha.projectMany(p.jsonAdapter,[e],r,K,null)[0]:e};q.projectMany=function(e,
r,K){return V.push(e,r,K)};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils".split(" "),
function(q,d,ia,ha,p,t,h,H,l,v,fa,aa,I,F,V,e,r,K,Y,A,G,C,M){function P(){return!!oa&&F.isLoaded()}function W(S){t.isNone(eb)&&(eb=Promise.all([F.load(),(new Promise(function(da,R){q(["../chunks/geometryEngineBase"],da,R)})).then(function(da){return da.geometryEngineBase}),new Promise(function(da,R){q(["./geometryAdapters/hydrated"],da,R)})]));return eb.then(([,da,{hydratedAdapter:R}])=>{h.throwIfAborted(S);bb=R;oa=da.default;oa._enableProjection(F.pe)})}function ja(S,da,R,la,ta=null){if(t.isNone(R)||
t.isNone(la))return da;if(E(R,la,ta))return da.map(va=>t.unwrap(Q(va,R,la)));if(t.isNone(ta)){const va=C.cacheKey(R,la);void 0!==ab[va]?ta=ab[va]:(ta=B(R,la,null),t.isNone(ta)&&(ta=new C),ab[va]=ta)}if(t.isNone(oa))throw new a;return oa._project(S,da,R,la,ta)}function B(S,da,R=null){if(t.isNone(oa))throw new a;if(t.isNone(S)||t.isNone(da))return null;S=oa._getTransformation(bb,S,da,R,null==R?void 0:R.spatialReference);return null!==S?C.fromGE(S):null}function E(S,da,R){return R?!1:M.equals(S,da)?
!0:M.isValid(S)&&M.isValid(da)&&!!Ea(S,da,Fb)}function N(){N=ia._asyncToGenerator(function*(S,da,R,la){if(!P())if(Array.isArray(S))for(const {source:ta,dest:va,geographicTransformation:Ha}of S){if(!E(ta,va,Ha))return W(la)}else if(!E(S,da,R))return W(la)});return N.apply(this,arguments)}function Q(S,da,R){return S?"x"in S?n(S,da,new V,R,0):"xmin"in S?Z(S,da,new aa,R,0):"rings"in S?J(S,da,new e,R,0):"paths"in S?z(S,da,new r,R,0):"points"in S?m(S,da,new I,R,0):null:null}function n(S,da,R,la,ta){Oa[0]=
S.x;Oa[1]=S.y;const va=S.z;Oa[2]=void 0!==va?va:ta;if(!ya(Oa,da,0,Oa,la,0,1))return null;R.x=Oa[0];R.y=Oa[1];R.spatialReference=la;void 0===va?(R.z=void 0,R.hasZ=!1):(R.z=Oa[2],R.hasZ=!0);void 0===S.m?(R.m=void 0,R.hasM=!1):(R.m=S.m,R.hasM=!0);return R}function m(S,da,R,la,ta){const {points:va,hasZ:Ha,hasM:La}=S;S=[];const Za=va.length,Ya=[];for(var Xa of va)Ya.push(Xa[0],Xa[1],Ha?Xa[2]:ta);if(!ya(Ya,da,0,Ya,la,0,Za))return null;for(da=0;da<Za;++da){ta=3*da;Xa=Ya[ta];const ib=Ya[ta+1];Ha&&La?S.push([Xa,
ib,Ya[ta+2],va[da][3]]):Ha?S.push([Xa,ib,Ya[ta+2]]):La?S.push([Xa,ib,va[da][2]]):S.push([Xa,ib])}R.points=S;R.spatialReference=la;R.hasZ=Ha;R.hasM=La;return R}function z(S,da,R,la,ta){const {paths:va,hasZ:Ha,hasM:La}=S;S=[];if(!xa(va,Ha,La,da,S,la,ta))return null;R.paths=S;R.spatialReference=la;R.hasZ=Ha;R.hasM=La;return R}function J(S,da,R,la,ta){const {rings:va,hasZ:Ha,hasM:La}=S;S=[];if(!xa(va,Ha,La,da,S,la,ta))return null;R.rings=S;R.spatialReference=la;R.hasZ=Ha;R.hasM=La;return R}function Z(S,
da,R,la,ta){const {xmin:va,ymin:Ha,xmax:La,ymax:Za,hasZ:Ya,hasM:Xa}=S;if(!ea(va,Ha,Ya?S.zmin:ta,da,Oa,la))return null;R.xmin=Oa[0];R.ymin=Oa[1];Ya&&(R.zmin=Oa[2]);if(!ea(La,Za,Ya?S.zmax:ta,da,Oa,la))return null;R.xmax=Oa[0];R.ymax=Oa[1];Ya&&(R.zmax=Oa[2]);Xa&&(R.mmin=S.mmin,R.mmax=S.mmax);R.spatialReference=la;return R}function ea(S,da,R,la,ta,va){Ua[0]=S;Ua[1]=da;Ua[2]=R;return ya(Ua,la,0,ta,va,0,1)}function ka(S,da,R,la){if(t.isNone(da)||t.isNone(la)||2>S.length)return!1;2===S.length&&(Ua[0]=S[0],
Ua[1]=S[1],Ua[2]=0,S=Ua);return ya(S,da,0,R,la,0,1)}function qa(S,da,R){if(t.isNone(da))return!1;da=Ka(da,vb);da=Qa[da][6];if(t.isNone(da))return!1;da(S,0,Ua,0);R!==Ua&&(R[0]=Ua[0],R[1]=Ua[1],2<R.length&&(R[2]=Ua[2]));return!0}function ya(S,da,R,la,ta,va,Ha=1){da=Ea(da,ta,Fb);if(t.isNone(da))return!1;if(da===Ca){if(S===la&&R===va)return!0;Ha=R+3*Ha;for(let La=R,Za=va;La<Ha;La++,Za++)la[Za]=S[La];return!0}Ha=R+3*Ha;for(let La=R,Za=va;La<Ha;La+=3,Za+=3)da(S,La,la,Za);return!0}function xa(S,da,R,la,
ta,va,Ha=0){const La=[];for(const Za of S)for(const Ya of Za)La.push(Ya[0],Ya[1],da?Ya[2]:Ha);if(!ya(La,la,0,La,va,0,La.length/3))return!1;la=0;ta.length=0;for(const Za of S){S=[];for(const Ya of Za)da&&R?S.push([La[la++],La[la++],La[la++],Ya[3]]):da?S.push([La[la++],La[la++],La[la++]]):(R?S.push([La[la++],La[la++],Ya[2]]):S.push([La[la++],La[la++]]),la++);ta.push(S)}return!0}function Ba(S,da,R,la){S=Math.abs(mb*S)+Math.asin(R/(la+da));return S>=Math.PI/2?Number.MAX_VALUE:R/Math.cos(S)}function Na(S,
da,R){const la=Math.sin(S);S=Math.cos(S);const ta=Math.sin(da);da=Math.cos(da);R[0]=-la;R[4]=-ta*S;R[8]=da*S;R[12]=0;R[1]=S;R[5]=-ta*la;R[9]=da*la;R[13]=0;R[2]=0;R[6]=da;R[10]=ta;R[14]=0;R[3]=0;R[7]=0;R[11]=0;R[15]=1;return R}function Ta(S,da,R){Na(S,da,R);l.transpose(R,R);return R}function Ka(S,da){if(da.spatialReference===S)return da.spatialReferenceId;da.spatialReference=S;"metersPerUnit"in da&&(da.metersPerUnit=H.getMetersPerUnitForSR(S,1));return S.wkt===K.SphericalECEFSpatialReference.wkt?da.spatialReferenceId=
1:M.isWGS84(S)?da.spatialReferenceId=2:M.isWebMercator(S)?da.spatialReferenceId=3:M.isPlateCarree(S)?da.spatialReferenceId=12:S.wkt===K.WGS84ECEFSpatialReference.wkt?da.spatialReferenceId=4:4490===S.wkid?da.spatialReferenceId=5:S.wkt===K.SphericalPCPFMars.wkt?da.spatialReferenceId=7:S.wkt===K.SphericalPCPFMoon.wkt?da.spatialReferenceId=9:M.isMars(S)?da.spatialReferenceId=8:M.isMoon(S)?da.spatialReferenceId=10:da.spatialReferenceId=0}function Ca(S,da,R,la){S!==R&&(R[la++]=S[da++],R[la++]=S[da++],R[la]=
S[da])}function Ra(S,da,R,la){R[la++]=yb*(S[da++]/A.earth.radius);R[la++]=yb*(Math.PI/2-2*Math.atan(Math.exp(-S[da++]/A.earth.radius)));R[la]=S[da]}function gb(S,da,R,la){Ra(S,da,R,la);X(R,la,R,la)}function c(S,da,R,la){Ra(S,da,R,la);ua(R,la,R,la)}function k(S,da,R,la,ta){var va=.4999999*Math.PI;va=p.clamp(mb*S[da+1],-va,va);va=Math.sin(va);R[la++]=mb*S[da]*ta.radius;R[la++]=ta.halfSemiMajorAxis*Math.log((1+va)/(1-va));R[la]=S[da+2]}function T(S,da,R,la){k(S,da,R,la,A.earth)}function f(S,da,R,la){R[la]=
S[da]*hb;R[la+1]=S[da+1]*hb;R[la+2]=S[da+2]}function u(S,da,R,la){R[la]=S[da]*fb;R[la+1]=S[da+1]*fb;R[la+2]=S[da+2]}function L(S,da,R,la,ta){ta+=S[da+2];const va=mb*S[da+1];S=mb*S[da];da=Math.cos(va);R[la++]=Math.cos(S)*da*ta;R[la++]=Math.sin(S)*da*ta;R[la]=Math.sin(va)*ta}function O(S,da,R,la){L(S,da,R,la,A.moon.radius)}function ca(S,da,R,la){L(S,da,R,la,A.mars.radius)}function X(S,da,R,la){L(S,da,R,la,A.earth.radius)}function w(S,da,R,la,ta){var va=S[da];const Ha=S[da+1];da=S[da+2];S=Math.sqrt(va*
va+Ha*Ha+da*da);da=p.asinClamped(da/(0===S?1:S));va=Math.atan2(Ha,va);R[la++]=yb*va;R[la++]=yb*da;R[la]=S-ta}function D(S,da,R,la){w(S,da,R,la,A.moon.radius)}function U(S,da,R,la){w(S,da,R,la,A.mars.radius)}function ma(S,da,R,la){w(S,da,R,la,A.earth.radius)}function na(S,da,R,la){ma(S,da,R,la);T(R,la,R,la)}function sa(S,da,R,la){ma(S,da,R,la);ua(R,la,R,la)}function ua(S,da,R,la){{var ta=A.earth;const Ha=mb*S[da];var va=mb*S[da+1];S=S[da+2];da=Math.sin(va);va=Math.cos(va);const La=ta.radius/Math.sqrt(1-
ta.eccentricitySquared*da*da);R[la++]=(La+S)*va*Math.cos(Ha);R[la++]=(La+S)*va*Math.sin(Ha);R[la++]=(La*(1-ta.eccentricitySquared)+S)*da}}function wa(S,da,R,la){var ta=G.earthEllipsoidConstants,va=S[da],Ha=S[da+1];S=S[da+2];let La;da=Math.abs(S);var Za=va*va+Ha*Ha;var Ya=Math.sqrt(Za);var Xa=Za+S*S;var ib=Math.sqrt(Xa);va=Math.atan2(Ha,va);var nb=S*S/Xa;Xa=Za/Xa;Ha=ta.a2/ib;Za=ta.a3-ta.a4/ib;.3<Xa?(nb=da/ib*(1+Xa*(ta.a1+Ha+nb*Za)/ib),ib=Math.asin(nb),Ha=nb*nb,Xa=Math.sqrt(1-Ha)):(Xa=Ya/ib*(1-nb*(ta.a5-
Ha-Xa*Za)/ib),ib=Math.acos(Xa),Ha=1-Xa*Xa,nb=Math.sqrt(Ha));La=1-A.earth.eccentricitySquared*Ha;Ha=A.earth.radius/Math.sqrt(La);ta=ta.a6*Ha;Ha=Ya-Ha*Xa;Za=da-ta*nb;da=Xa*Ha+nb*Za;Ya=Xa*Za-nb*Ha;ta=Ya/(ta/La+da);ib+=ta;0>S&&(ib=-ib);R[la++]=yb*va;R[la++]=yb*ib;R[la]=da+Ya*ta/2}function Ia(S,da,R,la){wa(S,da,R,la);X(R,la,R,la)}function Fa(S,da,R,la){wa(S,da,R,la);T(R,la,R,la)}function Ea(S,da,R=Da()){return t.isNone(S)||t.isNone(da)?null:za(S,da,R).projector}function za(S,da,R){if(t.isNone(S)||t.isNone(da)||
R.source.spatialReference===S&&R.dest.spatialReference===da)return R;const la=Ka(S,R.source),ta=Ka(da,R.dest);0===la&&0===ta?M.equals(S,da)?R.projector=Ca:R.projector=null:R.projector=Qa[la][ta];return R}function Da(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:Ca}}let oa=null,bb=null,eb=null,ab={},a=function(S){function da(){return S.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||
this}ia._inheritsLoose(da,S);return da}(ha);const hb=A.earth.radius*Math.PI/180,fb=180/(A.earth.radius*Math.PI),Qa={[2]:{[5]:null,[8]:null,[10]:null,[11]:Ca,[6]:Ca,[1]:X,[7]:null,[9]:null,[0]:null,[3]:T,[12]:f,[2]:Ca,[4]:ua},[5]:{[5]:Ca,[8]:null,[10]:null,[11]:Ca,[6]:Ca,[1]:X,[7]:null,[9]:null,[0]:null,[3]:null,[12]:f,[2]:null,[4]:ua},[8]:{[5]:null,[8]:Ca,[10]:null,[11]:Ca,[6]:null,[1]:null,[7]:ca,[9]:null,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:Ca,[11]:Ca,[6]:null,
[1]:null,[7]:null,[9]:O,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[11]:Ra,[6]:Ra,[1]:gb,[7]:null,[9]:null,[0]:null,[3]:Ca,[12]:function(S,da,R,la){Ra(S,da,R,la);f(R,la,R,la)},[2]:Ra,[4]:c},[4]:{[5]:wa,[8]:null,[10]:null,[11]:wa,[6]:wa,[1]:Ia,[7]:null,[9]:null,[0]:null,[3]:Fa,[12]:function(S,da,R,la){wa(S,da,R,la);f(R,la,R,la)},[2]:wa,[4]:Ca},[1]:{[5]:ma,[8]:null,[10]:null,[11]:ma,[6]:ma,[1]:Ca,[7]:null,[9]:null,[0]:null,[3]:na,[12]:function(S,da,R,la){ma(S,da,
R,la);f(R,la,R,la)},[2]:ma,[4]:sa},[7]:{[5]:null,[8]:U,[10]:null,[11]:U,[6]:null,[1]:null,[7]:Ca,[9]:null,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[9]:{[5]:null,[8]:null,[10]:D,[11]:D,[6]:null,[1]:null,[7]:null,[9]:Ca,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,[11]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:Ca,[3]:null,[12]:null,[2]:null,[4]:null},[11]:{[5]:Ca,[8]:Ca,[10]:Ca,[11]:Ca,[6]:Ca,[1]:X,[7]:ca,[9]:O,[0]:null,[3]:T,[12]:f,[2]:Ca,[4]:ua},[6]:{[5]:null,
[8]:null,[10]:null,[11]:Ca,[6]:Ca,[1]:X,[7]:null,[9]:null,[0]:null,[3]:null,[12]:f,[2]:Ca,[4]:ua},[12]:{[5]:u,[8]:null,[10]:null,[11]:u,[6]:u,[1]:function(S,da,R,la){u(S,da,R,la);X(R,la,R,la)},[7]:null,[9]:null,[0]:null,[3]:function(S,da,R,la){u(S,da,R,la);T(R,la,R,la)},[12]:Ca,[2]:u,[4]:function(S,da,R,la){u(S,da,R,la);ua(R,la,R,la)}}},vb={spatialReference:null,spatialReferenceId:0},zb={spatialReference:null,spatialReferenceId:0},Fb=Da(),ec=Da(),mb=p.deg2rad(1),yb=p.rad2deg(1),Ua=fa.create(),kb=
fa.create(),tb=fa.create(),Oa=fa.create(),Gb=fa.create();d.canProjectToWGS84ComparableLonLat=function(S){if(t.isNone(S))return!1;S=Ka(S,vb);return!!Qa[S][6]};d.canProjectWithoutEngine=E;d.computeENUToSphericalPCPFLocalRotation=Na;d.computeSphericalPCPFToENULocalRotation=Ta;d.computeTranslationToOriginAndRotation=function(S,da,R,la){if(t.isNone(S)||t.isNone(la))return!1;var ta=Ka(S,vb),va=Ka(la,zb);if(ta===va&&1!==va&&7!==va&&9!==va&&(0!==ta||M.equals(S,la)))return l.identity(R),l.translate(R,R,da),
!0;if(1===va||7===va||9===va){ta=Qa[ta][11];va=Qa[11][va];if(t.isNone(ta)||t.isNone(va))return!1;ta(da,0,kb,0);va(kb,0,tb,0);Na(mb*kb[0],mb*kb[1],R);R[12]=tb[0];R[13]=tb[1];R[14]=tb[2];return!0}if(!(3!==va&&12!==va||2!==ta&&1!==ta)){S=Qa[ta][11];va=Qa[11][va];if(t.isNone(S)||t.isNone(va))return!1;S(da,0,kb,0);va(kb,0,tb,0);2===ta?l.identity(R):Ta(mb*kb[0],mb*kb[1],R);R[12]=tb[0];R[13]=tb[1];R[14]=tb[2];return!0}return!1};d.getProjectorName=function(S,da){switch(Ea(S,da,Fb)){case Ca:return"copy3";
case X:return"wgs84ToSphericalECEF";case T:return"wgs84ToWebMercator";case f:return"wgs84ToPlateCarree";case ua:return"wgs84ToWGS84ECEF";case Ra:return"webMercatorToWGS84";case gb:return"webMercatorToSphericalECEF";case c:return"webMercatorToWGS84ECEF";case wa:return"wgs84ECEFToWGS84";case Ia:return"wgs84ECEFToSphericalECEF";case Fa:return"wgs84ECEFToWebMercator";case ma:return"sphericalECEFToWGS84";case na:return"sphericalECEFToWebMercator";case U:return"sphericalMarsPCPFToMars2000";case D:return"sphericalMoonPCPFToMoon2000";
case sa:return"sphericalECEFToWGS84ECEF";case ca:return"mars2000ToSphericalPCPF";case O:return"moon2000ToSphericalPCPF";default:return null}};d.getTransformation=B;d.getTransformations=function(S,da,R=null){if(t.isNone(oa))throw new a;S=oa._getTransformationBySuitability(bb,S,da,R,null==R?void 0:R.spatialReference);if(null!==S){da=[];for(const la of S)da.push(C.fromGE(la));return da}return[]};d.initializeProjection=function(S,da,R,la){return N.apply(this,arguments)};d.isLoaded=P;d.isSupported=function(){return!0};
d.load=W;d.localLinearScaleFactors=function(S,da,R,la){if(t.isNone(da)||t.isNone(la))return!1;const ta=Ka(da,vb);var va=Ka(la,zb);if(ta===va&&0!==ta||M.equals(da,la))return R[0]=1,R[1]=1,R[2]=1,!0;if(1===ta){da=v.length(S);S=da/Math.sqrt(S[0]*S[0]+S[1]*S[1]);da/=A.earth.radius;if(3===va)return R[0]=S*da,R[1]=S*da,R[2]=1,!0;if(2===va||5===va)return va=180/(A.earth.radius*Math.PI),R[0]=va*S*da,R[1]=va*da,R[2]=1,!0}else if(12===ta&&(2===va||5===va))return R[0]=fb,R[1]=fb,R[2]=1,!0;return!1};d.lonLatToSphericalPCPF=
function(S,da,R,la,ta=0){la+=ta;ta=Math.cos(R);S[0]=Math.cos(da)*ta*la;S[1]=Math.sin(da)*ta*la;S[2]=Math.sin(R)*la};d.lonLatToWebMercatorComparable=k;d.project=function(S,da,R=null){return Array.isArray(S)?0===S.length?[]:ja(bb,S,S[0].spatialReference,da,R):ja(bb,[S],S.spatialReference,da,R)[0]};d.projectBoundingRect=function(S,da,R,la){if(null==S)return!1;if(M.equals(da,la))return Y.copy(R,S),!0;Ua[0]=S[0];Ua[1]=S[1];Ua[2]=0;if(!ya(Ua,da,0,Ua,la,0,1))return!1;R[0]=Ua[0];R[1]=Ua[1];Ua[0]=S[2];Ua[1]=
S[3];Ua[2]=0;if(!ya(Ua,da,0,Ua,la,0,1))return!1;R[2]=Ua[0];R[3]=Ua[1];return!0};d.projectBoundingSphere=function(S,da,R,la){if(t.isNone(da)||t.isNone(la))return!1;da=za(da,la,ec);if(da.projector===Ca)return R[0]=S[0],R[1]=S[1],R[2]=S[2],R[3]=S[3],!0;if(t.isNone(da.projector))return!1;const {source:ta,dest:va}=da;if(3===va.spatialReferenceId){da=Qa[ta.spatialReferenceId][2];if(t.isNone(da))return!1;da(S,0,kb,0);T(kb,0,R,0);R[3]=Ba(kb[1],S[2],S[3],A.earth.radius);return!0}if(2!==ta.spatialReferenceId&&
5!==ta.spatialReferenceId||12!==va.spatialReferenceId)da.projector(S,0,R,0),R[3]=S[3]*ta.metersPerUnit/va.metersPerUnit;else{la=Qa[1][12];let Ha=S[3];t.isSome(Qa[ta.spatialReferenceId][1])&&t.isSome(la)&&(Ha=Ba(S[1],S[2],S[3],A.earth.radius));da.projector(S,0,R,0);R[3]=Ha}return!0};d.projectBuffer=ya;d.projectDirection=function(S,da,R,la,ta){v.copy(Oa,S);v.add(Gb,S,da);ka(Oa,R,Oa,ta);ka(Gb,R,Gb,ta);v.subtract(la,Gb,Oa);v.normalize(la,la)};d.projectExtent=function(S,da,R=da.spatialReference,la=0){return t.isSome(R)&&
t.isSome(Z(S,S.spatialReference,da,R,la))};d.projectMany=ja;d.projectMultipoint=function(S,da,R=da.spatialReference,la=0){return t.isNone(R)?!1:t.isSome(m(S,S.spatialReference,da,R,la))};d.projectPoint=function(S,da,R=da.spatialReference,la=0){return t.isNone(R)?!1:t.isSome(n(S,S.spatialReference,da,R,la))};d.projectPointToVector=function(S,da,R,la=0){Oa[0]=S.x;Oa[1]=S.y;const ta=S.z;Oa[2]=void 0!==ta?ta:la;return ya(Oa,S.spatialReference,0,da,R,0,1)};d.projectPointToWGS84ComparableLonLat=function(S,
da){Oa[0]=S.x;Oa[1]=S.y;const R=S.z;Oa[2]=void 0!==R?R:0;return qa(Oa,S.spatialReference,da)};d.projectPolygon=function(S,da,R=da.spatialReference,la=0){return t.isSome(R)&&t.isSome(J(S,S.spatialReference,da,R,la))};d.projectPolyline=function(S,da,R=da.spatialReference,la=0){return t.isSome(R)&&t.isSome(z(S,S.spatialReference,da,R,la))};d.projectVectorToDehydratedPoint=function(S,da,R){return ya(S,da,0,Oa,R.spatialReference,0,1)?(R.x=Oa[0],R.y=Oa[1],R.z=Oa[2],R):null};d.projectVectorToPoint=function(S,
da,R){if(t.isNone(da)||t.isNone(R))return null;const la=new V({spatialReference:R});return ya(S,da,0,Oa,R,0,1)?(la.x=Oa[0],la.y=Oa[1],la.z=Oa[2],la):null};d.projectVectorToVector=ka;d.projectVectorToWGS84ComparableLonLat=function(S,da,R){return qa(S,da,R)};d.projectWithoutEngine=Q;d.projectXYZToVector=ea;d.sphericalPCPFtoLonLatElevation=w;d.unload=function(){eb=bb=oa=null;ab={}};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ../geometry/projectionEllipsoid ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/support/spatialReferenceUtils ../geometry/support/WKIDUnitConversion".split(" "),
function(q,d,ia,ha,p,t,h,H){function l(n){if(n=E[n])return n;throw Error("unknown measure");}function v(n){return B[n].baseUnit}function fa(n,m=null){m=m||l(n);return B[m].baseUnit===n}function aa(n,m,z){if(m===z)return n;const J=l(m);if(J!==l(z))throw Error("incompatible units");n=fa(m,J)?n:n*B[J].units[m].inBaseUnits;return fa(z,J)?n:n/B[J].units[z].inBaseUnits}function I(n,m){return 3E3>aa(n,m,"meters")?"meters":"kilometers"}function F(n,m){return 1E5>aa(n,m,"meters")?"meters":"kilometers"}function V(n,
m){return 1E3>aa(n,m,"feet")?"feet":"miles"}function e(n,m){return 1E5>aa(n,m,"feet")?"feet":"miles"}function r(n){return ja.fromJSON(n.toLowerCase())||null}function K(n,m=t.earth.metersPerDegree){return Y(n,!0)||m}function Y(n,m=!1){let z,J,Z=null;null!=n&&("object"===typeof n?(z=n.wkid,J=n.wkt):"number"===typeof n?z=n:"string"===typeof n&&(J=n));if(z){if(h.isWKIDFromMars(z))return t.mars.metersPerDegree;if(h.isWKIDFromMoon(z))return t.moon.metersPerDegree;Z=M.values[M[z]];!Z&&m&&W.has(z)&&(Z=G)}else J&&
(-1!==J.search(/^PROJCS/i)?(n=C.exec(J))&&n[1]&&(Z=parseFloat(n[1].split(",")[1])):-1!==J.search(/^GEOCCS/i)&&(n=P.exec(J))&&n[1]&&(Z=parseFloat(n[1].split(",")[1])));return Z}function A(n){let m,z,J=null;null!=n&&("object"===typeof n?(m=n.wkid,z=n.wkt):"number"===typeof n?m=n:"string"===typeof n&&(z=n));m?J=M.units[M[m]]:z&&-1!==z.search(/^PROJCS/i)&&(n=C.exec(z))&&n[1]&&(J=(n=/[\\"\\']{1}([^\\"\\']+)/.exec(n[1]))&&n[1]);return J?r(J):null}const G=t.earth.radius*Math.PI/200,C=/UNIT\[([^\]]+)\]\]$/i,
M=H,P=/UNIT\[([^\]]+)\]/i,W=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),ja=ia.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",
"50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});d={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};H={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*
.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(n=>n*n)(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};const B={length:{baseUnit:"meters",units:d},area:{baseUnit:"square-meters",units:H},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},
"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},E=function(){const n={};for(const m in B)for(const z in B[m].units)n[z]=
m;return n}(),N={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},Q={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",
esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"};d=ia.strict()(N);H=ia.strict()(Q);ia=ia.strict()({...N,...Q});q.areaUnitsJSONMap=d;q.baseUnitForMeasure=v;q.baseUnitForUnit=function(n){return v(l(n))};q.convertUnit=aa;q.getDefaultUnitSystem=function(n){if(!n)return null;switch(A(n)){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";
case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null};q.getMetersPerUnit=Y;q.getMetersPerUnitForSR=K;q.getMetersPerVerticalUnitForSR=function(n){if(n&&"object"===typeof n&&!h.isEarth(n))return 1;n=K(n);return 1E5<n?1:n};q.getUnitString=A;q.getVerticalUnitStringForSR=function(n){const m=K(n),z=n instanceof p?ha.getReferenceEllipsoid(n).metersPerDegree:1E5;return m>=z?"meters":A(n)};q.inchesPerMeter=39.37;q.isBaseUnit=fa;q.isMeasurementSystem=function(n){return"imperial"===
n||"metric"===n};q.lengthToDegrees=function(n,m,z){return aa(n,m,"meters")/(z*Math.PI/180)};q.lengthUnitsJSONMap=H;q.measureForUnit=l;q.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");q.measurementLengthUnits="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" ");q.preferredImperialAreaUnit=function(n,m){return 1E6>aa(n,m,"square-feet")?"square-feet":
"square-miles"};q.preferredImperialLengthUnit=V;q.preferredImperialVerticalLengthUnit=e;q.preferredLengthUnit=function(n,m,z){switch(z){case "metric":return I(n,m);case "imperial":return V(n,m);default:return z}};q.preferredMetricAreaUnit=function(n,m){return 3E6>aa(n,m,"square-meters")?"square-meters":"square-kilometers"};q.preferredMetricLengthUnit=I;q.preferredMetricVerticalLengthUnit=F;q.preferredVerticalLengthUnit=function(n,m,z){switch(z){case "metric":return F(n,m);case "imperial":return e(n,
m);default:return z}};q.unitFromRESTJSON=r;q.unitToRESTJSON=function(n){return ja.toJSON(n)||null};q.unitsJSONMap=ia;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","./SpatialReference","./support/Ellipsoid","./support/spatialReferenceUtils"],function(q,d,ia,ha){function p(v){return new d({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${v.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}
const t=p(ia.earth),h=p(ia.mars),H=p(ia.moon),l=new d({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${ia.earth.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});q.SphericalECEFSpatialReference=t;q.SphericalPCPFMars=
h;q.SphericalPCPFMoon=H;q.WGS84ECEFSpatialReference=l;q.createSphericalPCPF=p;q.getReferenceEllipsoid=function(v){return v&&(ha.isMars(v)||v===h)?ia.mars:v&&(ha.isMoon(v)||v===H)?ia.moon:ia.earth};q.getReferenceEllipsoidFromWKID=function(v){return ha.isWKIDFromMars(v)?ia.mars:ha.isWKIDFromMoon(v)?ia.moon:ia.earth};q.getSphericalPCPF=function(v){return v&&(ha.isMars(v)||v===h)?h:v&&(ha.isMoon(v)||v===H)?H:t};q.getSphericalPCPFForEllipsoid=function(v){return v&&v===ia.mars?h:v&&v===ia.moon?H:t};Object.defineProperty(q,
"__esModule",{value:!0})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(q,d,ia){function ha(c,k){c[0]=k[0];c[1]=k[1];c[2]=k[2];c[3]=k[3];c[4]=k[4];c[5]=k[5];c[6]=k[6];c[7]=k[7];c[8]=k[8];c[9]=k[9];c[10]=k[10];c[11]=k[11];c[12]=k[12];c[13]=k[13];c[14]=k[14];c[15]=k[15];return c}function p(c,k,T,f,u,L,O,ca,X,w,D,U,ma,na,sa,ua,wa){c[0]=k;c[1]=T;c[2]=f;c[3]=u;c[4]=L;c[5]=O;c[6]=ca;c[7]=X;c[8]=w;c[9]=D;c[10]=U;c[11]=ma;c[12]=na;c[13]=sa;c[14]=ua;c[15]=wa;return c}function t(c){c[0]=
1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function h(c,k){if(c===k){const T=k[1],f=k[2],u=k[3],L=k[6],O=k[7],ca=k[11];c[1]=k[4];c[2]=k[8];c[3]=k[12];c[4]=T;c[6]=k[9];c[7]=k[13];c[8]=f;c[9]=L;c[11]=k[14];c[12]=u;c[13]=O;c[14]=ca}else c[0]=k[0],c[1]=k[4],c[2]=k[8],c[3]=k[12],c[4]=k[1],c[5]=k[5],c[6]=k[9],c[7]=k[13],c[8]=k[2],c[9]=k[6],c[10]=k[10],c[11]=k[14],c[12]=k[3],c[13]=k[7],c[14]=k[11],c[15]=k[15];return c}function H(c,
k){const T=k[0],f=k[1],u=k[2],L=k[3],O=k[4],ca=k[5],X=k[6],w=k[7],D=k[8],U=k[9],ma=k[10],na=k[11],sa=k[12],ua=k[13],wa=k[14];k=k[15];const Ia=T*ca-f*O,Fa=T*X-u*O,Ea=T*w-L*O,za=f*X-u*ca,Da=f*w-L*ca,oa=u*w-L*X,bb=D*ua-U*sa,eb=D*wa-ma*sa,ab=D*k-na*sa,a=U*wa-ma*ua,hb=U*k-na*ua,fb=ma*k-na*wa;let Qa=Ia*fb-Fa*hb+Ea*a+za*ab-Da*eb+oa*bb;if(!Qa)return null;Qa=1/Qa;c[0]=(ca*fb-X*hb+w*a)*Qa;c[1]=(u*hb-f*fb-L*a)*Qa;c[2]=(ua*oa-wa*Da+k*za)*Qa;c[3]=(ma*Da-U*oa-na*za)*Qa;c[4]=(X*ab-O*fb-w*eb)*Qa;c[5]=(T*fb-u*ab+
L*eb)*Qa;c[6]=(wa*Ea-sa*oa-k*Fa)*Qa;c[7]=(D*oa-ma*Ea+na*Fa)*Qa;c[8]=(O*hb-ca*ab+w*bb)*Qa;c[9]=(f*ab-T*hb-L*bb)*Qa;c[10]=(sa*Da-ua*Ea+k*Ia)*Qa;c[11]=(U*Ea-D*Da-na*Ia)*Qa;c[12]=(ca*eb-O*a-X*bb)*Qa;c[13]=(T*a-f*eb+u*bb)*Qa;c[14]=(ua*Fa-sa*za-wa*Ia)*Qa;c[15]=(D*za-U*Fa+ma*Ia)*Qa;return c}function l(c,k){const T=k[0],f=k[1],u=k[2],L=k[3],O=k[4],ca=k[5],X=k[6],w=k[7],D=k[8],U=k[9],ma=k[10],na=k[11],sa=k[12],ua=k[13],wa=k[14];k=k[15];c[0]=ca*(ma*k-na*wa)-U*(X*k-w*wa)+ua*(X*na-w*ma);c[1]=-(f*(ma*k-na*wa)-
U*(u*k-L*wa)+ua*(u*na-L*ma));c[2]=f*(X*k-w*wa)-ca*(u*k-L*wa)+ua*(u*w-L*X);c[3]=-(f*(X*na-w*ma)-ca*(u*na-L*ma)+U*(u*w-L*X));c[4]=-(O*(ma*k-na*wa)-D*(X*k-w*wa)+sa*(X*na-w*ma));c[5]=T*(ma*k-na*wa)-D*(u*k-L*wa)+sa*(u*na-L*ma);c[6]=-(T*(X*k-w*wa)-O*(u*k-L*wa)+sa*(u*w-L*X));c[7]=T*(X*na-w*ma)-O*(u*na-L*ma)+D*(u*w-L*X);c[8]=O*(U*k-na*ua)-D*(ca*k-w*ua)+sa*(ca*na-w*U);c[9]=-(T*(U*k-na*ua)-D*(f*k-L*ua)+sa*(f*na-L*U));c[10]=T*(ca*k-w*ua)-O*(f*k-L*ua)+sa*(f*w-L*ca);c[11]=-(T*(ca*na-w*U)-O*(f*na-L*U)+D*(f*w-L*
ca));c[12]=-(O*(U*wa-ma*ua)-D*(ca*wa-X*ua)+sa*(ca*ma-X*U));c[13]=T*(U*wa-ma*ua)-D*(f*wa-u*ua)+sa*(f*ma-u*U);c[14]=-(T*(ca*wa-X*ua)-O*(f*wa-u*ua)+sa*(f*X-u*ca));c[15]=T*(ca*ma-X*U)-O*(f*ma-u*U)+D*(f*X-u*ca);return c}function v(c){const k=c[0],T=c[1],f=c[2],u=c[3],L=c[4],O=c[5],ca=c[6],X=c[7],w=c[8],D=c[9],U=c[10],ma=c[11],na=c[12],sa=c[13],ua=c[14];c=c[15];return(k*O-T*L)*(U*c-ma*ua)-(k*ca-f*L)*(D*c-ma*sa)+(k*X-u*L)*(D*ua-U*sa)+(T*ca-f*O)*(w*c-ma*na)-(T*X-u*O)*(w*ua-U*na)+(f*X-u*ca)*(w*sa-D*na)}function fa(c,
k,T){const f=k[0],u=k[1],L=k[2],O=k[3],ca=k[4],X=k[5],w=k[6],D=k[7],U=k[8],ma=k[9],na=k[10],sa=k[11],ua=k[12],wa=k[13],Ia=k[14];k=k[15];let Fa=T[0],Ea=T[1],za=T[2],Da=T[3];c[0]=Fa*f+Ea*ca+za*U+Da*ua;c[1]=Fa*u+Ea*X+za*ma+Da*wa;c[2]=Fa*L+Ea*w+za*na+Da*Ia;c[3]=Fa*O+Ea*D+za*sa+Da*k;Fa=T[4];Ea=T[5];za=T[6];Da=T[7];c[4]=Fa*f+Ea*ca+za*U+Da*ua;c[5]=Fa*u+Ea*X+za*ma+Da*wa;c[6]=Fa*L+Ea*w+za*na+Da*Ia;c[7]=Fa*O+Ea*D+za*sa+Da*k;Fa=T[8];Ea=T[9];za=T[10];Da=T[11];c[8]=Fa*f+Ea*ca+za*U+Da*ua;c[9]=Fa*u+Ea*X+za*ma+Da*
wa;c[10]=Fa*L+Ea*w+za*na+Da*Ia;c[11]=Fa*O+Ea*D+za*sa+Da*k;Fa=T[12];Ea=T[13];za=T[14];Da=T[15];c[12]=Fa*f+Ea*ca+za*U+Da*ua;c[13]=Fa*u+Ea*X+za*ma+Da*wa;c[14]=Fa*L+Ea*w+za*na+Da*Ia;c[15]=Fa*O+Ea*D+za*sa+Da*k;return c}function aa(c,k,T){const f=T[0],u=T[1];T=T[2];let L=void 0,O=void 0,ca=void 0,X=void 0,w=void 0,D=void 0,U=void 0,ma=void 0,na=void 0,sa=void 0,ua=void 0,wa=void 0;k===c?(c[12]=k[0]*f+k[4]*u+k[8]*T+k[12],c[13]=k[1]*f+k[5]*u+k[9]*T+k[13],c[14]=k[2]*f+k[6]*u+k[10]*T+k[14],c[15]=k[3]*f+k[7]*
u+k[11]*T+k[15]):(L=k[0],O=k[1],ca=k[2],X=k[3],w=k[4],D=k[5],U=k[6],ma=k[7],na=k[8],sa=k[9],ua=k[10],wa=k[11],c[0]=L,c[1]=O,c[2]=ca,c[3]=X,c[4]=w,c[5]=D,c[6]=U,c[7]=ma,c[8]=na,c[9]=sa,c[10]=ua,c[11]=wa,c[12]=L*f+w*u+na*T+k[12],c[13]=O*f+D*u+sa*T+k[13],c[14]=ca*f+U*u+ua*T+k[14],c[15]=X*f+ma*u+wa*T+k[15]);return c}function I(c,k,T){const f=T[0],u=T[1];T=T[2];c[0]=k[0]*f;c[1]=k[1]*f;c[2]=k[2]*f;c[3]=k[3]*f;c[4]=k[4]*u;c[5]=k[5]*u;c[6]=k[6]*u;c[7]=k[7]*u;c[8]=k[8]*T;c[9]=k[9]*T;c[10]=k[10]*T;c[11]=k[11]*
T;c[12]=k[12];c[13]=k[13];c[14]=k[14];c[15]=k[15];return c}function F(c,k,T,f){let u=f[0],L=f[1];f=f[2];let O=Math.sqrt(u*u+L*L+f*f);var ca=void 0,X=void 0;let w=void 0,D=void 0,U=void 0,ma=void 0,na=void 0,sa=void 0,ua=void 0,wa=void 0,Ia=void 0,Fa=void 0,Ea=void 0,za=void 0,Da=void 0,oa=void 0,bb=void 0,eb=void 0,ab=void 0,a=void 0,hb=void 0,fb=void 0;X=ca=void 0;if(O<ia.EPSILON)return null;O=1/O;u*=O;L*=O;f*=O;ca=Math.sin(T);X=Math.cos(T);w=1-X;D=k[0];U=k[1];ma=k[2];na=k[3];sa=k[4];ua=k[5];wa=
k[6];Ia=k[7];Fa=k[8];Ea=k[9];za=k[10];Da=k[11];oa=u*u*w+X;bb=L*u*w+f*ca;eb=f*u*w-L*ca;ab=u*L*w-f*ca;a=L*L*w+X;hb=f*L*w+u*ca;fb=u*f*w+L*ca;ca=L*f*w-u*ca;X=f*f*w+X;c[0]=D*oa+sa*bb+Fa*eb;c[1]=U*oa+ua*bb+Ea*eb;c[2]=ma*oa+wa*bb+za*eb;c[3]=na*oa+Ia*bb+Da*eb;c[4]=D*ab+sa*a+Fa*hb;c[5]=U*ab+ua*a+Ea*hb;c[6]=ma*ab+wa*a+za*hb;c[7]=na*ab+Ia*a+Da*hb;c[8]=D*fb+sa*ca+Fa*X;c[9]=U*fb+ua*ca+Ea*X;c[10]=ma*fb+wa*ca+za*X;c[11]=na*fb+Ia*ca+Da*X;k!==c&&(c[12]=k[12],c[13]=k[13],c[14]=k[14],c[15]=k[15]);return c}function V(c,
k,T){const f=Math.sin(T);T=Math.cos(T);const u=k[4],L=k[5],O=k[6],ca=k[7],X=k[8],w=k[9],D=k[10],U=k[11];k!==c&&(c[0]=k[0],c[1]=k[1],c[2]=k[2],c[3]=k[3],c[12]=k[12],c[13]=k[13],c[14]=k[14],c[15]=k[15]);c[4]=u*T+X*f;c[5]=L*T+w*f;c[6]=O*T+D*f;c[7]=ca*T+U*f;c[8]=X*T-u*f;c[9]=w*T-L*f;c[10]=D*T-O*f;c[11]=U*T-ca*f;return c}function e(c,k,T){const f=Math.sin(T);T=Math.cos(T);const u=k[0],L=k[1],O=k[2],ca=k[3],X=k[8],w=k[9],D=k[10],U=k[11];k!==c&&(c[4]=k[4],c[5]=k[5],c[6]=k[6],c[7]=k[7],c[12]=k[12],c[13]=
k[13],c[14]=k[14],c[15]=k[15]);c[0]=u*T-X*f;c[1]=L*T-w*f;c[2]=O*T-D*f;c[3]=ca*T-U*f;c[8]=u*f+X*T;c[9]=L*f+w*T;c[10]=O*f+D*T;c[11]=ca*f+U*T;return c}function r(c,k,T){const f=Math.sin(T);T=Math.cos(T);const u=k[0],L=k[1],O=k[2],ca=k[3],X=k[4],w=k[5],D=k[6],U=k[7];k!==c&&(c[8]=k[8],c[9]=k[9],c[10]=k[10],c[11]=k[11],c[12]=k[12],c[13]=k[13],c[14]=k[14],c[15]=k[15]);c[0]=u*T+X*f;c[1]=L*T+w*f;c[2]=O*T+D*f;c[3]=ca*T+U*f;c[4]=X*T-u*f;c[5]=w*T-L*f;c[6]=D*T-O*f;c[7]=U*T-ca*f;return c}function K(c,k){c[0]=1;
c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=k[0];c[13]=k[1];c[14]=k[2];c[15]=1;return c}function Y(c,k){c[0]=k[0];c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=k[1];c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=k[2];c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function A(c,k,T){let f=T[0],u=T[1];T=T[2];let L=Math.sqrt(f*f+u*u+T*T),O=void 0,ca=void 0,X=void 0;if(L<ia.EPSILON)return null;L=1/L;f*=L;u*=L;T*=L;O=Math.sin(k);ca=Math.cos(k);X=1-ca;c[0]=f*f*X+ca;c[1]=u*f*X+T*O;c[2]=T*
f*X-u*O;c[3]=0;c[4]=f*u*X-T*O;c[5]=u*u*X+ca;c[6]=T*u*X+f*O;c[7]=0;c[8]=f*T*X+u*O;c[9]=u*T*X-f*O;c[10]=T*T*X+ca;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function G(c,k){const T=Math.sin(k);k=Math.cos(k);c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=k;c[6]=T;c[7]=0;c[8]=0;c[9]=-T;c[10]=k;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function C(c,k){const T=Math.sin(k);k=Math.cos(k);c[0]=k;c[1]=0;c[2]=-T;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=T;c[9]=0;c[10]=k;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=
1;return c}function M(c,k){const T=Math.sin(k);k=Math.cos(k);c[0]=k;c[1]=T;c[2]=0;c[3]=0;c[4]=-T;c[5]=k;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function P(c,k,T){var f=k[0],u=k[1],L=k[2],O=k[3],ca=f+f,X=u+u;const w=L+L;k=f*ca;const D=f*X;f*=w;const U=u*X;u*=w;L*=w;ca*=O;X*=O;O*=w;c[0]=1-(U+L);c[1]=D+O;c[2]=f-X;c[3]=0;c[4]=D-O;c[5]=1-(k+L);c[6]=u+ca;c[7]=0;c[8]=f+X;c[9]=u-ca;c[10]=1-(k+U);c[11]=0;c[12]=T[0];c[13]=T[1];c[14]=T[2];c[15]=1;return c}function W(c,
k){const T=gb,f=-k[0],u=-k[1],L=-k[2],O=k[3],ca=k[4],X=k[5],w=k[6],D=k[7],U=f*f+u*u+L*L+O*O;0<U?(T[0]=2*(ca*O+D*f+X*L-w*u)/U,T[1]=2*(X*O+D*u+w*f-ca*L)/U,T[2]=2*(w*O+D*L+ca*u-X*f)/U):(T[0]=2*(ca*O+D*f+X*L-w*u),T[1]=2*(X*O+D*u+w*f-ca*L),T[2]=2*(w*O+D*L+ca*u-X*f));P(c,k,T);return c}function ja(c,k){c[0]=k[12];c[1]=k[13];c[2]=k[14];return c}function B(c,k){const T=k[0],f=k[1],u=k[2],L=k[4],O=k[5],ca=k[6],X=k[8],w=k[9];k=k[10];c[0]=Math.sqrt(T*T+f*f+u*u);c[1]=Math.sqrt(L*L+O*O+ca*ca);c[2]=Math.sqrt(X*
X+w*w+k*k);return c}function E(c,k){const T=k[0]+k[5]+k[10];let f=0;0<T?(f=2*Math.sqrt(T+1),c[3]=.25*f,c[0]=(k[6]-k[9])/f,c[1]=(k[8]-k[2])/f,c[2]=(k[1]-k[4])/f):k[0]>k[5]&&k[0]>k[10]?(f=2*Math.sqrt(1+k[0]-k[5]-k[10]),c[3]=(k[6]-k[9])/f,c[0]=.25*f,c[1]=(k[1]+k[4])/f,c[2]=(k[8]+k[2])/f):k[5]>k[10]?(f=2*Math.sqrt(1+k[5]-k[0]-k[10]),c[3]=(k[8]-k[2])/f,c[0]=(k[1]+k[4])/f,c[1]=.25*f,c[2]=(k[6]+k[9])/f):(f=2*Math.sqrt(1+k[10]-k[0]-k[5]),c[3]=(k[1]-k[4])/f,c[0]=(k[8]+k[2])/f,c[1]=(k[6]+k[9])/f,c[2]=.25*f);
return c}function N(c,k,T,f){var u=k[0],L=k[1],O=k[2],ca=k[3],X=u+u,w=L+L,D=O+O;k=u*X;const U=u*w;u*=D;const ma=L*w;L*=D;O*=D;X*=ca;w*=ca;ca*=D;D=f[0];const na=f[1];f=f[2];c[0]=(1-(ma+O))*D;c[1]=(U+ca)*D;c[2]=(u-w)*D;c[3]=0;c[4]=(U-ca)*na;c[5]=(1-(k+O))*na;c[6]=(L+X)*na;c[7]=0;c[8]=(u+w)*f;c[9]=(L-X)*f;c[10]=(1-(k+ma))*f;c[11]=0;c[12]=T[0];c[13]=T[1];c[14]=T[2];c[15]=1;return c}function Q(c,k,T,f,u){var L=k[0],O=k[1],ca=k[2],X=k[3],w=L+L,D=O+O,U=ca+ca;k=L*w;var ma=L*D,na=L*U;L=O*D;O*=U;var sa=ca*
U;ca=X*w;D*=X;const ua=X*U;var wa=f[0],Ia=f[1];U=f[2];f=u[0];X=u[1];u=u[2];w=(1-(L+sa))*wa;const Fa=(ma+ua)*wa;wa*=na-D;ma=(ma-ua)*Ia;sa=(1-(k+sa))*Ia;Ia*=O+ca;na=(na+D)*U;O=(O-ca)*U;k=(1-(k+L))*U;c[0]=w;c[1]=Fa;c[2]=wa;c[3]=0;c[4]=ma;c[5]=sa;c[6]=Ia;c[7]=0;c[8]=na;c[9]=O;c[10]=k;c[11]=0;c[12]=T[0]+f-(w*f+ma*X+na*u);c[13]=T[1]+X-(Fa*f+sa*X+O*u);c[14]=T[2]+u-(wa*f+Ia*X+k*u);c[15]=1;return c}function n(c,k){var T=k[0],f=k[1],u=k[2];k=k[3];var L=T+T,O=f+f;const ca=u+u;T*=L;const X=f*L;f*=O;const w=u*
L,D=u*O;u*=ca;L*=k;O*=k;k*=ca;c[0]=1-f-u;c[1]=X+k;c[2]=w-O;c[3]=0;c[4]=X-k;c[5]=1-T-u;c[6]=D+L;c[7]=0;c[8]=w+O;c[9]=D-L;c[10]=1-T-f;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function m(c,k,T,f,u,L,O){const ca=1/(T-k),X=1/(u-f),w=1/(L-O);c[0]=2*L*ca;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=2*L*X;c[6]=0;c[7]=0;c[8]=(T+k)*ca;c[9]=(u+f)*X;c[10]=(O+L)*w;c[11]=-1;c[12]=0;c[13]=0;c[14]=O*L*2*w;c[15]=0;return c}function z(c,k,T,f,u){k=1/Math.tan(k/2);let L=void 0;c[0]=k/T;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=
k;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[11]=-1;c[12]=0;c[13]=0;c[15]=0;null!=u&&Infinity!==u?(L=1/(f-u),c[10]=(u+f)*L,c[14]=2*u*f*L):(c[10]=-1,c[14]=-2*f);return c}function J(c,k,T,f){const u=Math.tan(k.upDegrees*Math.PI/180),L=Math.tan(k.downDegrees*Math.PI/180),O=Math.tan(k.leftDegrees*Math.PI/180);k=Math.tan(k.rightDegrees*Math.PI/180);const ca=2/(O+k),X=2/(u+L);c[0]=ca;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=X;c[6]=0;c[7]=0;c[8]=-((O-k)*ca*.5);c[9]=(u-L)*X*.5;c[10]=f/(T-f);c[11]=-1;c[12]=0;c[13]=0;c[14]=f*T/
(T-f);c[15]=0;return c}function Z(c,k,T,f,u,L,O){const ca=1/(k-T),X=1/(f-u),w=1/(L-O);c[0]=-2*ca;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=-2*X;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=2*w;c[11]=0;c[12]=(k+T)*ca;c[13]=(u+f)*X;c[14]=(O+L)*w;c[15]=1;return c}function ea(c,k,T,f){let u=void 0,L=void 0;var O=void 0,ca=void 0;let X=void 0,w=void 0;var D=void 0,U=void 0;let ma=void 0,na=void 0;const sa=k[0],ua=k[1];k=k[2];O=f[0];ca=f[1];f=f[2];D=T[0];U=T[1];T=T[2];if(Math.abs(sa-D)<ia.EPSILON&&Math.abs(ua-U)<ia.EPSILON&&
Math.abs(k-T)<ia.EPSILON)return t(c);D=sa-D;U=ua-U;ma=k-T;na=1/Math.sqrt(D*D+U*U+ma*ma);D*=na;U*=na;ma*=na;u=ca*ma-f*U;L=f*D-O*ma;O=O*U-ca*D;(na=Math.sqrt(u*u+L*L+O*O))?(na=1/na,u*=na,L*=na,O*=na):O=L=u=0;ca=U*O-ma*L;X=ma*u-D*O;w=D*L-U*u;(na=Math.sqrt(ca*ca+X*X+w*w))?(na=1/na,ca*=na,X*=na,w*=na):w=X=ca=0;c[0]=u;c[1]=ca;c[2]=D;c[3]=0;c[4]=L;c[5]=X;c[6]=U;c[7]=0;c[8]=O;c[9]=w;c[10]=ma;c[11]=0;c[12]=-(u*sa+L*ua+O*k);c[13]=-(ca*sa+X*ua+w*k);c[14]=-(D*sa+U*ua+ma*k);c[15]=1;return c}function ka(c,k,T,f){const u=
k[0],L=k[1];k=k[2];var O=f[0];const ca=f[1];var X=f[2];f=u-T[0];let w=L-T[1];T=k-T[2];let D=f*f+w*w+T*T;0<D&&(D=1/Math.sqrt(D),f*=D,w*=D,T*=D);let U=ca*T-X*w;X=X*f-O*T;O=O*w-ca*f;D=U*U+X*X+O*O;0<D&&(D=1/Math.sqrt(D),U*=D,X*=D,O*=D);c[0]=U;c[1]=X;c[2]=O;c[3]=0;c[4]=w*O-T*X;c[5]=T*U-f*O;c[6]=f*X-w*U;c[7]=0;c[8]=f;c[9]=w;c[10]=T;c[11]=0;c[12]=u;c[13]=L;c[14]=k;c[15]=1;return c}function qa(c){return"mat4("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+", "+c[9]+
", "+c[10]+", "+c[11]+", "+c[12]+", "+c[13]+", "+c[14]+", "+c[15]+")"}function ya(c){return Math.sqrt(c[0]**2+c[1]**2+c[2]**2+c[3]**2+c[4]**2+c[5]**2+c[6]**2+c[7]**2+c[8]**2+c[9]**2+c[10]**2+c[11]**2+c[12]**2+c[13]**2+c[14]**2+c[15]**2)}function xa(c,k,T){c[0]=k[0]+T[0];c[1]=k[1]+T[1];c[2]=k[2]+T[2];c[3]=k[3]+T[3];c[4]=k[4]+T[4];c[5]=k[5]+T[5];c[6]=k[6]+T[6];c[7]=k[7]+T[7];c[8]=k[8]+T[8];c[9]=k[9]+T[9];c[10]=k[10]+T[10];c[11]=k[11]+T[11];c[12]=k[12]+T[12];c[13]=k[13]+T[13];c[14]=k[14]+T[14];c[15]=
k[15]+T[15];return c}function Ba(c,k,T){c[0]=k[0]-T[0];c[1]=k[1]-T[1];c[2]=k[2]-T[2];c[3]=k[3]-T[3];c[4]=k[4]-T[4];c[5]=k[5]-T[5];c[6]=k[6]-T[6];c[7]=k[7]-T[7];c[8]=k[8]-T[8];c[9]=k[9]-T[9];c[10]=k[10]-T[10];c[11]=k[11]-T[11];c[12]=k[12]-T[12];c[13]=k[13]-T[13];c[14]=k[14]-T[14];c[15]=k[15]-T[15];return c}function Na(c,k,T){c[0]=k[0]*T;c[1]=k[1]*T;c[2]=k[2]*T;c[3]=k[3]*T;c[4]=k[4]*T;c[5]=k[5]*T;c[6]=k[6]*T;c[7]=k[7]*T;c[8]=k[8]*T;c[9]=k[9]*T;c[10]=k[10]*T;c[11]=k[11]*T;c[12]=k[12]*T;c[13]=k[13]*T;
c[14]=k[14]*T;c[15]=k[15]*T;return c}function Ta(c,k,T,f){c[0]=k[0]+T[0]*f;c[1]=k[1]+T[1]*f;c[2]=k[2]+T[2]*f;c[3]=k[3]+T[3]*f;c[4]=k[4]+T[4]*f;c[5]=k[5]+T[5]*f;c[6]=k[6]+T[6]*f;c[7]=k[7]+T[7]*f;c[8]=k[8]+T[8]*f;c[9]=k[9]+T[9]*f;c[10]=k[10]+T[10]*f;c[11]=k[11]+T[11]*f;c[12]=k[12]+T[12]*f;c[13]=k[13]+T[13]*f;c[14]=k[14]+T[14]*f;c[15]=k[15]+T[15]*f;return c}function Ka(c,k){return c[0]===k[0]&&c[1]===k[1]&&c[2]===k[2]&&c[3]===k[3]&&c[4]===k[4]&&c[5]===k[5]&&c[6]===k[6]&&c[7]===k[7]&&c[8]===k[8]&&c[9]===
k[9]&&c[10]===k[10]&&c[11]===k[11]&&c[12]===k[12]&&c[13]===k[13]&&c[14]===k[14]&&c[15]===k[15]}function Ca(c,k){const T=c[0],f=c[1],u=c[2],L=c[3],O=c[4],ca=c[5],X=c[6],w=c[7],D=c[8],U=c[9],ma=c[10],na=c[11],sa=c[12],ua=c[13],wa=c[14];c=c[15];const Ia=k[0],Fa=k[1],Ea=k[2],za=k[3],Da=k[4],oa=k[5],bb=k[6],eb=k[7],ab=k[8],a=k[9],hb=k[10],fb=k[11],Qa=k[12],vb=k[13],zb=k[14];k=k[15];return Math.abs(T-Ia)<=ia.EPSILON*Math.max(1,Math.abs(T),Math.abs(Ia))&&Math.abs(f-Fa)<=ia.EPSILON*Math.max(1,Math.abs(f),
Math.abs(Fa))&&Math.abs(u-Ea)<=ia.EPSILON*Math.max(1,Math.abs(u),Math.abs(Ea))&&Math.abs(L-za)<=ia.EPSILON*Math.max(1,Math.abs(L),Math.abs(za))&&Math.abs(O-Da)<=ia.EPSILON*Math.max(1,Math.abs(O),Math.abs(Da))&&Math.abs(ca-oa)<=ia.EPSILON*Math.max(1,Math.abs(ca),Math.abs(oa))&&Math.abs(X-bb)<=ia.EPSILON*Math.max(1,Math.abs(X),Math.abs(bb))&&Math.abs(w-eb)<=ia.EPSILON*Math.max(1,Math.abs(w),Math.abs(eb))&&Math.abs(D-ab)<=ia.EPSILON*Math.max(1,Math.abs(D),Math.abs(ab))&&Math.abs(U-a)<=ia.EPSILON*Math.max(1,
Math.abs(U),Math.abs(a))&&Math.abs(ma-hb)<=ia.EPSILON*Math.max(1,Math.abs(ma),Math.abs(hb))&&Math.abs(na-fb)<=ia.EPSILON*Math.max(1,Math.abs(na),Math.abs(fb))&&Math.abs(sa-Qa)<=ia.EPSILON*Math.max(1,Math.abs(sa),Math.abs(Qa))&&Math.abs(ua-vb)<=ia.EPSILON*Math.max(1,Math.abs(ua),Math.abs(vb))&&Math.abs(wa-zb)<=ia.EPSILON*Math.max(1,Math.abs(wa),Math.abs(zb))&&Math.abs(c-k)<=ia.EPSILON*Math.max(1,Math.abs(c),Math.abs(k))}function Ra(c){const k=ia.EPSILON,T=c[0],f=c[1],u=c[2],L=c[4],O=c[5],ca=c[6],X=
c[8],w=c[9];c=c[10];return Math.abs(1-(T*T+L*L+X*X))<=k&&Math.abs(1-(f*f+O*O+w*w))<=k&&Math.abs(1-(u*u+ca*ca+c*c))<=k}const gb=d.create();d=Object.freeze({__proto__:null,copy:ha,set:p,identity:t,transpose:h,invert:H,adjoint:l,determinant:v,multiply:fa,translate:aa,scale:I,rotate:F,rotateX:V,rotateY:e,rotateZ:r,fromTranslation:K,fromScaling:Y,fromRotation:A,fromXRotation:G,fromYRotation:C,fromZRotation:M,fromRotationTranslation:P,fromQuat2:W,getTranslation:ja,getScaling:B,getRotation:E,fromRotationTranslationScale:N,
fromRotationTranslationScaleOrigin:Q,fromQuat:n,frustum:m,perspective:z,perspectiveFromFieldOfView:J,ortho:Z,lookAt:ea,targetTo:ka,str:qa,frob:ya,add:xa,subtract:Ba,multiplyScalar:Na,multiplyScalarAndAdd:Ta,exactEquals:Ka,equals:Ca,isOrthoNormal:Ra,mul:fa,sub:Ba});q.add=xa;q.adjoint=l;q.copy=ha;q.determinant=v;q.equals=Ca;q.exactEquals=Ka;q.frob=ya;q.fromQuat=n;q.fromQuat2=W;q.fromRotation=A;q.fromRotationTranslation=P;q.fromRotationTranslationScale=N;q.fromRotationTranslationScaleOrigin=Q;q.fromScaling=
Y;q.fromTranslation=K;q.fromXRotation=G;q.fromYRotation=C;q.fromZRotation=M;q.frustum=m;q.getRotation=E;q.getScaling=B;q.getTranslation=ja;q.identity=t;q.invert=H;q.isOrthoNormal=Ra;q.lookAt=ea;q.mat4=d;q.mul=fa;q.multiply=fa;q.multiplyScalar=Na;q.multiplyScalarAndAdd=Ta;q.ortho=Z;q.perspective=z;q.perspectiveFromFieldOfView=J;q.rotate=F;q.rotateX=V;q.rotateY=e;q.rotateZ=r;q.scale=I;q.set=p;q.str=qa;q.sub=Ba;q.subtract=Ba;q.targetTo=ka;q.translate=aa;q.transpose=h})},"esri/chunks/pe":function(){define(["require",
"exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(q,d,ia,ha,p){function t(){return!!d._pe}function h(){return!!p("esri-wasm")}function H(){return F?F:F=(new Promise(function(e,r){q(["./pe-wasm"],e,r)})).then(function(e){return e.peWasm}).then(({default:e})=>e({locateFile:r=>ha.getAssetUrl(`esri/geometry/support/${r}`)})).then(e=>{l(e)})}function l(e){function r(A,G,C){A[G]=C(A[G])}d._pe=e;d.PeDefs.init();d.PeGTlistExtended.init();d.PeNotationMgrs.init();d.PeNotationUtm.init();
d.PePCSInfo.init();d.PeGCSExtent=function(A){function G(){return A.apply(this,arguments)||this}ia._inheritsLoose(G,A);G.prototype.destroy=function(){d._pe.destroy(this)};return G}(d._pe.PeGCSExtent);e=[d._pe.PeDatum,d._pe.PeGeogcs,d._pe.PeGeogtran,d._pe.PeObject,d._pe.PeParameter,d._pe.PePrimem,d._pe.PeProjcs,d._pe.PeSpheroid,d._pe.PeUnit];for(var K of e)r(K.prototype,"getName",A=>function(){return A.call(this,Array(d.PeDefs.PE_NAME_MAX))});for(const A of[d._pe.PeGeogtran,d._pe.PeProjcs])r(A.prototype,
"getParameters",G=>function(){const C=Array(d.PeDefs.PE_PARM_MAX);let M=G.call(this);for(let P=0;P<C.length;P++){const W=d._pe.getValue(M,"*");C[P]=W?d._pe.wrapPointer(W,d._pe.PeParameter):null;M+=Int32Array.BYTES_PER_ELEMENT}return C});r(d._pe.PeHorizon.prototype,"getCoord",A=>function(){const G=this.getSize();if(!G)return null;const C=[],M=A.call(this);I(C,G,M);return C});r(d._pe.PeGTlistExtendedEntry.prototype,"getEntries",A=>{const G=d._pe._pe_getPeGTlistExtendedGTsSize();return function(){let C=
null;var M=A.call(this);if(!d._pe.compare(M,d._pe.NULL)){C=[M];const P=this.getSteps();if(1<P){M=d._pe.getPointer(M);for(let W=1;W<P;W++)C.push(d._pe.wrapPointer(M+G*W,d._pe.PeGTlistExtendedGTs))}}return C}});const Y=d._pe._pe_getPeHorizonSize();K=A=>function(){let G=this._cache;G||(this._cache=G=new Map);if(G.has(A))return G.get(A);let C=null;var M=A.call(this);if(!d._pe.compare(M,d._pe.NULL)){C=[M];const P=M.getNump();if(1<P){M=d._pe.getPointer(M);for(let W=1;W<P;W++)C.push(d._pe.wrapPointer(M+
Y*W,d._pe.PeHorizon))}}G.set(A,C);return C};r(d._pe.PeProjcs.prototype,"horizonGcsGenerate",K);r(d._pe.PeProjcs.prototype,"horizonPcsGenerate",K);d._pe.PeObject.prototype.toString=function(A=d.PeDefs.PE_STR_OPTS_NONE){d._pe.ensureCache.prepare();const G=d._pe.getPointer(this),C=d._pe.ensureInt8(Array(d.PeDefs.PE_BUFFER_MAX));return d._pe.UTF8ToString(d._pe._pe_object_to_string_ext(G,A,C))}}function v(e){if(e){var r=d._pe.getClass(e);r&&(r=d._pe.getCache(r))&&(e=d._pe.getPointer(e))&&delete r[e]}}
function fa(e,r){const K=[];r=Array(r);for(let Y=0;Y<e;Y++)K.push(d._pe.ensureInt8(r));return K}function aa(e){let r;Array.isArray(e[0])?(r=[],e.forEach(K=>{r.push(K[0],K[1])})):r=e;return r}function I(e,r,K,Y=!1){if(Y)for(Y=0;Y<2*r;Y++)e[Y]=d._pe.getValue(K+Y*Float64Array.BYTES_PER_ELEMENT,"double");else{Y=0===e.length;for(let A=0;A<r;A++)Y&&(e[A]=Array(2)),e[A][0]=d._pe.getValue(K,"double"),e[A][1]=d._pe.getValue(K+Float64Array.BYTES_PER_ELEMENT,"double"),K+=2*Float64Array.BYTES_PER_ELEMENT}}let F;
d._pe=null;d.PeCSTransformations=void 0;(function(e){function r(A,G,C){d._pe.ensureCache.prepare();var M=aa(C);const P=C===M;M=d._pe.ensureFloat64(M);(A=d._pe._pe_geog_to_proj(d._pe.getPointer(A),G,M))&&I(C,G,M,P);return A}function K(A,G,C){return Y(A,G,C,0)}function Y(A,G,C,M){d._pe.ensureCache.prepare();var P=aa(C);const W=C===P;P=d._pe.ensureFloat64(P);(A=d._pe._pe_proj_to_geog_center(d._pe.getPointer(A),G,P,M))&&I(C,G,P,W);return A}e.geogToProj=r;e.projGeog=function(A,G,C,M){switch(M){case d.PeDefs.PE_TRANSFORM_P_TO_G:return K(A,
G,C);case d.PeDefs.PE_TRANSFORM_G_TO_P:return r(A,G,C)}return 0};e.projToGeog=K;e.projToGeogCenter=Y})(d.PeCSTransformations||(d.PeCSTransformations={}));d.PeDefs=void 0;(function(e){e.init=function(){e.PE_BUFFER_MAX=d._pe.PeDefs.prototype.PE_BUFFER_MAX;e.PE_NAME_MAX=d._pe.PeDefs.prototype.PE_NAME_MAX;e.PE_MGRS_MAX=d._pe.PeDefs.prototype.PE_MGRS_MAX;e.PE_USNG_MAX=d._pe.PeDefs.prototype.PE_USNG_MAX;e.PE_DD_MAX=d._pe.PeDefs.prototype.PE_DD_MAX;e.PE_DDM_MAX=d._pe.PeDefs.prototype.PE_DDM_MAX;e.PE_DMS_MAX=
d._pe.PeDefs.prototype.PE_DMS_MAX;e.PE_UTM_MAX=d._pe.PeDefs.prototype.PE_UTM_MAX;e.PE_PARM_MAX=d._pe.PeDefs.prototype.PE_PARM_MAX;e.PE_TYPE_NONE=d._pe.PeDefs.prototype.PE_TYPE_NONE;e.PE_TYPE_GEOGCS=d._pe.PeDefs.prototype.PE_TYPE_GEOGCS;e.PE_TYPE_PROJCS=d._pe.PeDefs.prototype.PE_TYPE_PROJCS;e.PE_TYPE_GEOGTRAN=d._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;e.PE_TYPE_COORDSYS=d._pe.PeDefs.prototype.PE_TYPE_COORDSYS;e.PE_TYPE_UNIT=d._pe.PeDefs.prototype.PE_TYPE_UNIT;e.PE_TYPE_LINUNIT=d._pe.PeDefs.prototype.PE_TYPE_LINUNIT;
e.PE_STR_OPTS_NONE=d._pe.PeDefs.prototype.PE_STR_OPTS_NONE;e.PE_STR_AUTH_NONE=d._pe.PeDefs.prototype.PE_STR_AUTH_NONE;e.PE_STR_AUTH_TOP=d._pe.PeDefs.prototype.PE_STR_AUTH_TOP;e.PE_STR_NAME_CANON=d._pe.PeDefs.prototype.PE_STR_NAME_CANON;e.PE_PARM_X0=d._pe.PeDefs.prototype.PE_PARM_X0;e.PE_PARM_ND=d._pe.PeDefs.prototype.PE_PARM_ND;e.PE_TRANSFORM_1_TO_2=d._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;e.PE_TRANSFORM_2_TO_1=d._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;e.PE_TRANSFORM_P_TO_G=d._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;
e.PE_TRANSFORM_G_TO_P=d._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;e.PE_HORIZON_RECT=d._pe.PeDefs.prototype.PE_HORIZON_RECT;e.PE_HORIZON_POLY=d._pe.PeDefs.prototype.PE_HORIZON_POLY;e.PE_HORIZON_LINE=d._pe.PeDefs.prototype.PE_HORIZON_LINE;e.PE_HORIZON_DELTA=d._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(d.PeDefs||(d.PeDefs={}));d.PeFactory=void 0;(function(e){function r(G,C){let M=null,P=K[G];P||(P={},K[G]=P);P.hasOwnProperty(String(C))?M=P[C]:(G=d._pe.PeFactory.prototype.factoryByType(G,C),d._pe.compare(G,
d._pe.NULL)||(M=G,P[C]=M));return M=A(M)}const K={},Y={},A=G=>{if(G){const C=G.getType();switch(C){case d.PeDefs.PE_TYPE_GEOGCS:G=d._pe.castObject(G,d._pe.PeGeogcs);break;case d.PeDefs.PE_TYPE_PROJCS:G=d._pe.castObject(G,d._pe.PeProjcs);break;case d.PeDefs.PE_TYPE_GEOGTRAN:G=d._pe.castObject(G,d._pe.PeGeogtran);break;default:C&d.PeDefs.PE_TYPE_UNIT&&(G=d._pe.castObject(G,d._pe.PeUnit))}}return G};e.initialize=function(){d._pe.PeFactory.prototype.initialize(null)};e.coordsys=function(G){return r(d.PeDefs.PE_TYPE_COORDSYS,
G)};e.factoryByType=r;e.fromString=function(G,C){let M=null,P=Y[G];P||(P={},Y[G]=P);P.hasOwnProperty(C)?M=P[C]:(G=d._pe.PeFactory.prototype.fromString(G,C),d._pe.compare(G,d._pe.NULL)||(M=G,P[C]=M));return M=A(M)};e.geogcs=function(G){return r(d.PeDefs.PE_TYPE_GEOGCS,G)};e.geogtran=function(G){return r(d.PeDefs.PE_TYPE_GEOGTRAN,G)};e.getCode=function(G){return d._pe.PeFactory.prototype.getCode(G)};e.projcs=function(G){return r(d.PeDefs.PE_TYPE_PROJCS,G)};e.unit=function(G){return r(d.PeDefs.PE_TYPE_UNIT,
G)}})(d.PeFactory||(d.PeFactory={}));d.PeGCSExtent=null;d.PeGTlistExtended=void 0;(function(e){let r;e.init=function(){e.PE_GTLIST_OPTS_COMMON=d._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;r=d._pe._pe_getPeGTlistExtendedEntrySize()};e.getGTlist=function(K,Y,A,G,C,M){let P=null;const W=new d._pe.PeInteger(M);try{const ja=d._pe.PeGTlistExtended.prototype.getGTlist(K,Y,A,G,C,W);if(M=W.val)if(P=[ja],1<M){const B=d._pe.getPointer(ja);for(K=1;K<M;K++)P.push(d._pe.wrapPointer(B+r*K,d._pe.PeGTlistExtendedEntry))}}finally{d._pe.destroy(W)}return P}})(d.PeGTlistExtended||
(d.PeGTlistExtended={}));d.PeGTlistExtendedEntry=void 0;(function(e){e.destroy=function(r){if(r&&r.length){for(const K of r)v(K),K.getEntries().forEach(Y=>{v(Y);Y=Y.getGeogtran();v(Y);Y.getParameters().forEach(v);[Y.getGeogcs1(),Y.getGeogcs2()].forEach(A=>{v(A);const G=A.getDatum();v(G);v(G.getSpheroid());v(A.getPrimem());v(A.getUnit())})});d._pe.PeGTlistExtendedEntry.prototype.Delete(r[0])}}})(d.PeGTlistExtendedEntry||(d.PeGTlistExtendedEntry={}));d.PeGTTransformations=void 0;(function(e){e.geogToGeog=
function(r,K,Y,A,G){d._pe.ensureCache.prepare();var C=aa(Y);const M=Y===C;C=d._pe.ensureFloat64(C);let P=0;A&&(P=d._pe.ensureFloat64(A));(r=d._pe._pe_geog_to_geog(d._pe.getPointer(r),K,C,P,G))&&I(Y,K,C,M);return r}})(d.PeGTTransformations||(d.PeGTTransformations={}));d.PeNotationDms=void 0;(function(e){const r=(Y,A,G,C,M,P)=>{d._pe.ensureCache.prepare();switch(Y){case "dd":var W=d._pe._pe_geog_to_dd;var ja=d.PeDefs.PE_DD_MAX;break;case "ddm":W=d._pe._pe_geog_to_ddm;ja=d.PeDefs.PE_DDM_MAX;break;case "dms":W=
d._pe._pe_geog_to_dms,ja=d.PeDefs.PE_DMS_MAX}Y=0;A&&(Y=d._pe.getPointer(A));A=aa(C);A=d._pe.ensureFloat64(A);ja=fa(G,ja);C=d._pe.ensureInt32(ja);if(M=W(Y,G,A,M,C))for(W=0;W<G;W++)P[W]=d._pe.UTF8ToString(ja[W]);return M},K=(Y,A,G,C,M)=>{d._pe.ensureCache.prepare();switch(Y){case "dd":var P=d._pe._pe_dd_to_geog;break;case "ddm":P=d._pe._pe_ddm_to_geog;break;case "dms":P=d._pe._pe_dms_to_geog}Y=0;A&&(Y=d._pe.getPointer(A));A=C.map(W=>d._pe.ensureString(W));C=d._pe.ensureInt32(A);A=d._pe.ensureFloat64(Array(2*
G));(P=P(Y,G,C,A))&&I(M,G,A);return P};e.geog_to_dms=function(Y,A,G,C,M){return r("dms",Y,A,G,C,M)};e.dms_to_geog=function(Y,A,G,C){return K("dms",Y,A,G,C)};e.geog_to_ddm=function(Y,A,G,C,M){return r("ddm",Y,A,G,C,M)};e.ddm_to_geog=function(Y,A,G,C){return K("ddm",Y,A,G,C)};e.geog_to_dd=function(Y,A,G,C,M){return r("dd",Y,A,G,C,M)};e.dd_to_geog=function(Y,A,G,C){return K("dd",Y,A,G,C)}})(d.PeNotationDms||(d.PeNotationDms={}));d.PeNotationMgrs=void 0;(function(e){e.init=function(){e.PE_MGRS_STYLE_NEW=
d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;e.PE_MGRS_STYLE_OLD=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;e.PE_MGRS_STYLE_AUTO=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;e.PE_MGRS_180_ZONE_1_PLUS=d._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;e.PE_MGRS_ADD_SPACES=d._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};e.geog_to_mgrs_extended=function(r,K,Y,A,G,C,M){d._pe.ensureCache.prepare();let P=0;r&&(P=d._pe.getPointer(r));r=aa(Y);Y=d._pe.ensureFloat64(r);r=fa(K,d.PeDefs.PE_MGRS_MAX);
const W=d._pe.ensureInt32(r);if(A=d._pe._pe_geog_to_mgrs_extended(P,K,Y,A,G,C,W))for(G=0;G<K;G++)M[G]=d._pe.UTF8ToString(r[G]);return A};e.mgrs_to_geog_extended=function(r,K,Y,A,G){d._pe.ensureCache.prepare();let C=0;r&&(C=d._pe.getPointer(r));r=Y.map(M=>d._pe.ensureString(M));Y=d._pe.ensureInt32(r);r=d._pe.ensureFloat64(Array(2*K));(A=d._pe._pe_mgrs_to_geog_extended(C,K,Y,A,r))&&I(G,K,r);return A}})(d.PeNotationMgrs||(d.PeNotationMgrs={}));d.PeNotationUsng=void 0;(function(e){e.geog_to_usng=function(r,
K,Y,A,G,C,M){d._pe.ensureCache.prepare();let P=0;r&&(P=d._pe.getPointer(r));r=aa(Y);Y=d._pe.ensureFloat64(r);r=fa(K,d.PeDefs.PE_MGRS_MAX);const W=d._pe.ensureInt32(r);if(A=d._pe._pe_geog_to_usng(P,K,Y,A,G,C,W))for(G=0;G<K;G++)M[G]=d._pe.UTF8ToString(r[G]);return A};e.usng_to_geog=function(r,K,Y,A){d._pe.ensureCache.prepare();var G=0;r&&(G=d._pe.getPointer(r));r=Y.map(C=>d._pe.ensureString(C));Y=d._pe.ensureInt32(r);r=d._pe.ensureFloat64(Array(2*K));(G=d._pe._pe_usng_to_geog(G,K,Y,r))&&I(A,K,r);return G}})(d.PeNotationUsng||
(d.PeNotationUsng={}));d.PeNotationUtm=void 0;(function(e){e.init=function(){e.PE_UTM_OPTS_NONE=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;e.PE_UTM_OPTS_ADD_SPACES=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;e.PE_UTM_OPTS_NS=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};e.geog_to_utm=function(r,K,Y,A,G){d._pe.ensureCache.prepare();var C=0;r&&(C=d._pe.getPointer(r));r=aa(Y);Y=d._pe.ensureFloat64(r);r=fa(K,d.PeDefs.PE_UTM_MAX);const M=d._pe.ensureInt32(r);if(A=d._pe._pe_geog_to_utm(C,K,
Y,A,M))for(C=0;C<K;C++)G[C]=d._pe.UTF8ToString(r[C]);return A};e.utm_to_geog=function(r,K,Y,A,G){d._pe.ensureCache.prepare();let C=0;r&&(C=d._pe.getPointer(r));r=Y.map(M=>d._pe.ensureString(M));Y=d._pe.ensureInt32(r);r=d._pe.ensureFloat64(Array(2*K));(A=d._pe._pe_utm_to_geog(C,K,Y,A,r))&&I(G,K,r);return A}})(d.PeNotationUtm||(d.PeNotationUtm={}));d.PePCSInfo=void 0;(function(e){const r=new Map;e.init=function(){e.PE_PCSINFO_OPTION_NONE=d._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;e.PE_PCSINFO_OPTION_DOMAIN=
d._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;e.PE_POLE_OUTSIDE_BOUNDARY=d._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;e.PE_POLE_POINT=d._pe.PePCSInfo.prototype.PE_POLE_POINT};e.generate=function(K,Y=e.PE_PCSINFO_OPTION_DOMAIN){let A,G;r.has(K)&&(G=r.get(K),G[Y]&&(A=G[Y]));A||(A=d._pe.PePCSInfo.prototype.generate(K,Y),G||(G=[],r.set(K,G)),G[Y]=A);return A}})(d.PePCSInfo||(d.PePCSInfo={}));d.PeVersion=void 0;(function(e){e.version_string=function(){return d._pe.PeVersion.prototype.version_string()}})(d.PeVersion||
(d.PeVersion={}));var V=Object.freeze({__proto__:null,get _pe(){return d._pe},isLoaded:t,isSupported:h,load:H,get PeCSTransformations(){return d.PeCSTransformations},get PeDefs(){return d.PeDefs},get PeFactory(){return d.PeFactory},get PeGCSExtent(){return d.PeGCSExtent},get PeGTlistExtended(){return d.PeGTlistExtended},get PeGTlistExtendedEntry(){return d.PeGTlistExtendedEntry},get PeGTTransformations(){return d.PeGTTransformations},get PeNotationDms(){return d.PeNotationDms},get PeNotationMgrs(){return d.PeNotationMgrs},
get PeNotationUsng(){return d.PeNotationUsng},get PeNotationUtm(){return d.PeNotationUtm},get PePCSInfo(){return d.PePCSInfo},get PeVersion(){return d.PeVersion},_init:l});d._init=l;d.isLoaded=t;d.isSupported=h;d.load=H;d.pe=V})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(q,d){const ia=Math.PI/180;var ha=d.earth.radius;const p=d.earth.eccentricitySquared;ha={a1:ha*p,a2:ha*p*ha*p,a3:ha*p*p/2,a4:ha*p*ha*p*2.5,a5:ha*p+ha*p*p/2,a6:1-p};d={4267:{a:6378206.4,
f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:d.earth.radius,f:d.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:d.moon.radius,f:d.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:d.mars.radius,f:d.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,
f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,
f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},
104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:d.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};q.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;q.earthEllipsoidConstants=ha;q.spheroids=d;q.toRadians=ia;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],
function(q){return function(){function d(ha){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(ha&&ha.steps)for(const p of ha.steps)p instanceof q?this.steps.push(p):this.steps.push(new q({wkid:p.wkid,wkt:p.wkt,isInverse:p.isInverse}))}d.cacheKey=function(ha,p){return[void 0!==ha.wkid&&null!==ha.wkid?ha.wkid.toString():"-1",void 0!==ha.wkt&&null!==ha.wkt?ha.wkt.toString():"",void 0!==p.wkid&&null!==p.wkid?p.wkid.toString():"-1",void 0!==p.wkt&&null!==p.wkt?p.wkt.toString():
""].join()};d.fromGE=function(ha){const p=new d;let t="";for(const h of ha.steps)ha=q.fromGE(h),p.steps.push(ha),t+=ha.uid.toString()+",";p._cached_projection={};p._gtlistentry=null;p._chain=t;return p};var ia=d.prototype;ia.getInverse=function(){const ha=new d;ha.steps=[];for(let p=this.steps.length-1;0<=p;p--)ha.steps.push(this.steps[p].getInverse());return ha};ia.getGTListEntry=function(){let ha="";for(const p of this.steps)ha+=p.uid.toString()+",";ha!==this._chain&&(this._gtlistentry=null,this._cached_projection=
{},this._chain=ha);return this._gtlistentry};ia.assignCachedGe=function(ha,p,t){this._cached_projection[d.cacheKey(ha,p)]=t};ia.getCachedGeTransformation=function(ha,p){let t="";for(const h of this.steps)t+=h.uid.toString()+",";t!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=t);ha=this._cached_projection[d.cacheKey(ha,p)];return void 0===ha?null:ha};return d}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],
function(q){let d=0;return function(){function ia(ha=null){this.uid=d++;ha?(this._wkt=void 0!==ha.wkt?ha.wkt:null,this._wkid=void 0!==ha.wkid?ha.wkid:-1,this._isInverse=void 0!==ha.isInverse?!0===ha.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}ia.fromGE=function(ha){const p=new ia;p._wkt=ha.wkt;p._wkid=ha.wkid;p._isInverse=ha.isInverse;return p};ia.prototype.getInverse=function(){const ha=new ia;ha._wkt=this.wkt;ha._wkid=this._wkid;ha._isInverse=!this.isInverse;return ha};q._createClass(ia,
[{key:"wkt",get:function(){return this._wkt},set:function(ha){this._wkt=ha;this.uid=d++}},{key:"wkid",get:function(){return this._wkid},set:function(ha){this._wkid=ha;this.uid=d++}},{key:"isInverse",get:function(){return this._isInverse},set:function(ha){this._isInverse=ha;this.uid=d++}}]);return ia}()})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(q){let d=function(h,H,l){this.x=h;this.y=H;this.spatialReference=l;this.m=this.z=void 0},ia=function(h,H,l,v){this.rings=
h;this.spatialReference=H;this.hasM=this.hasZ=void 0;l&&(this.hasZ=l);v&&(this.hasM=v)},ha=function(h,H,l,v){this.paths=h;this.spatialReference=H;this.hasM=this.hasZ=void 0;l&&(this.hasZ=l);v&&(this.hasM=v)},p=function(h,H,l,v){this.points=h;this.spatialReference=H;this.hasM=this.hasZ=void 0;l&&(this.hasZ=l);v&&(this.hasM=v)},t=function(h,H,l,v,fa){this.xmin=h;this.ymin=H;this.xmax=l;this.ymax=v;this.spatialReference=fa;this.mmax=this.mmin=this.zmax=this.zmin=void 0};q.jsonAdapter={convertToGEGeometry:function(h,
H){return null==H?null:h.convertJSONToGeometry(H)},exportPoint:function(h,H,l){l=new d(h.getPointX(H),h.getPointY(H),l);const v=h.hasZ(H),fa=h.hasM(H);v&&(l.z=h.getPointZ(H));fa&&(l.m=h.getPointM(H));return l},exportPolygon:function(h,H,l){return new ia(h.exportPaths(H),l,h.hasZ(H),h.hasM(H))},exportPolyline:function(h,H,l){return new ha(h.exportPaths(H),l,h.hasZ(H),h.hasM(H))},exportMultipoint:function(h,H,l){return new p(h.exportPoints(H),l,h.hasZ(H),h.hasM(H))},exportExtent:function(h,H,l){var v=
h.hasZ(H);const fa=h.hasM(H);l=new t(h.getXMin(H),h.getYMin(H),h.getXMax(H),h.getYMax(H),l);v&&(v=h.getZExtent(H),l.zmin=v.vmin,l.zmax=v.vmax);fa&&(h=h.getMExtent(H),l.mmin=h.vmin,l.mmax=h.vmax);return l}};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../support/PromiseQueue ../../../support/arcadeOnDemand".split(" "),
function(q,d,ia,ha,p,t,h,H,l,v,fa,aa,I,F,V,e,r,K,Y,A,G,C,M){function P(n){return n.every(m=>"exceedslimit"!==m.statisticType)}const W=new Set,ja=new t.MemCacheStorage(2E6);let B=0,E=function(){function n(z){this.capabilities={query:e.queryCapabilities};this.geometryType=z.geometryType;this.hasM=z.hasM;this.hasZ=z.hasZ;this.objectIdField=z.objectIdField;this.spatialReference=z.spatialReference;this.definitionExpression=z.definitionExpression;this.featureStore=z.featureStore;this.aggregateAdapter=z.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=z.timeInfo;z.cacheSpatialQueries&&(this._geometryQueryCache=new t.MemCache(B++ +"$$",ja));this.fieldsIndex=new G(z.fields);z.scheduler&&z.priority&&(this._frameQueue=new C,this._frameTask=z.scheduler.registerTask(z.priority,this))}var m=n.prototype;m.destroy=function(){this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._frameQueue.cancelAll(),this._frameQueue=null);this.clearCache();this._geometryQueryCache&&
this._geometryQueryCache.destroy();this._changeHandle&&(this._changeHandle.remove(),this._changeHandle=null);this.fieldsIndex.destroy()};m.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear();this._timeExtent=this._allItems=null};m.executeQuery=function(){var z=d._asyncToGenerator(function*(J={},Z){let ea=ha.clone(J),ka;try{ea=yield this._schedule(()=>A.normalizeQuery(ea,this.definitionExpression,this.spatialReference),Z),ea=yield this._reschedule(()=>this._checkQuerySupport(ea),
Z),ka=yield this._reschedule(()=>this._executeGeometryQuery(ea,Z),Z),ka=yield this._reschedule(()=>ka.executeAggregateIdsQuery(ea),Z),ka=yield this._reschedule(()=>ka.executeObjectIdsQuery(ea),Z),ka=yield this._reschedule(()=>ka.executeTimeQuery(ea),Z),ka=yield this._reschedule(()=>ka.executeAttributesQuery(ea),Z)}catch(qa){if(qa!==A.QUERY_ENGINE_EMPTY_RESULT)throw qa;ka=new r([],null,this)}return ka.createQueryResponse(ea)});return function(){return z.apply(this,arguments)}}();m.executeQueryForCount=
function(){var z=d._asyncToGenerator(function*(J={},Z){let ea=ha.clone(J),ka;ea.returnGeometry=!1;ea.returnCentroid=!1;ea.outSR=null;try{ea=yield this._schedule(()=>A.normalizeQuery(ea,this.definitionExpression,this.spatialReference),Z),ea=yield this._reschedule(()=>this._checkQuerySupport(ea),Z),ka=yield this._reschedule(()=>this._executeGeometryQuery(ea,Z),Z),ka=yield this._reschedule(()=>ka.executeAggregateIdsQuery(ea),Z),ka=yield this._reschedule(()=>ka.executeObjectIdsQuery(ea),Z),ka=yield this._reschedule(()=>
ka.executeTimeQuery(ea),Z),ka=yield this._reschedule(()=>ka.executeAttributesQuery(ea),Z)}catch(qa){if(qa!==A.QUERY_ENGINE_EMPTY_RESULT)throw qa;return 0}return ka.createQueryResponseForCount(ea)});return function(){return z.apply(this,arguments)}}();m.executeQueryForExtent=function(){var z=d._asyncToGenerator(function*(J={},Z){let ea=ha.clone(J),ka;J=ea.outSR;try{ea=yield this._schedule(()=>A.normalizeQuery(ea,this.definitionExpression,this.spatialReference),Z);ea=yield this._reschedule(()=>this._checkQuerySupport(ea),
Z);ea.returnGeometry=!0;ea.returnCentroid=!1;ea.outSR=null;ka=yield this._reschedule(()=>this._executeGeometryQuery(ea,Z),Z);ka=yield this._reschedule(()=>ka.executeAggregateIdsQuery(ea),Z);ka=yield this._reschedule(()=>ka.executeObjectIdsQuery(ea),Z);ka=yield this._reschedule(()=>ka.executeTimeQuery(ea),Z);ka=yield this._reschedule(()=>ka.executeAttributesQuery(ea),Z);const qa=ka.size;if(!qa)return{count:qa,extent:null};H.set(Q,H.NEGATIVE_INFINITY);this.featureStore.forEachBounds(ka.items,Ba=>H.expandWithAABB(Q,
Ba),N);const ya={xmin:Q[0],ymin:Q[1],xmax:Q[3],ymax:Q[4],spatialReference:A.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(Q[2])&&isFinite(Q[5])&&(ya.zmin=Q[2],ya.zmax=Q[5]);const xa=V.project(ya,ka.spatialReference,J);xa.spatialReference=A.cleanFromGeometryEngine(J||this.spatialReference);if(0===xa.xmax-xa.xmin){const Ba=h.getMetersPerUnitForSR(xa.spatialReference);xa.xmin-=Ba;xa.xmax+=Ba}if(0===xa.ymax-xa.ymin){const Ba=h.getMetersPerUnitForSR(xa.spatialReference);xa.ymin-=
Ba;xa.ymax+=Ba}if(this.hasZ&&null!=xa.zmin&&null!=xa.zmax&&0===xa.zmax-xa.zmin){const Ba=h.getMetersPerUnitForSR(xa.spatialReference);xa.zmin-=Ba;xa.zmax+=Ba}return{count:qa,extent:xa}}catch(qa){if(qa===A.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw qa;}});return function(){return z.apply(this,arguments)}}();m.executeQueryForIds=function(){var z=d._asyncToGenerator(function*(J={},Z){return this.executeQueryForIdSet(J,Z).then(ea=>Array.from(ea))});return function(){return z.apply(this,
arguments)}}();m.executeQueryForIdSet=function(){var z=d._asyncToGenerator(function*(J={},Z){let ea=ha.clone(J),ka;ea.returnGeometry=!1;ea.returnCentroid=!1;ea.outSR=null;try{ea=yield this._schedule(()=>A.normalizeQuery(ea,this.definitionExpression,this.spatialReference),Z);ea=yield this._reschedule(()=>this._checkQuerySupport(ea),Z);ka=yield this._reschedule(()=>this._executeGeometryQuery(ea,Z),Z);ka=yield this._reschedule(()=>ka.executeAggregateIdsQuery(ea),Z);ka=yield this._reschedule(()=>ka.executeObjectIdsQuery(ea),
Z);ka=yield this._reschedule(()=>ka.executeTimeQuery(ea),Z);ka=yield this._reschedule(()=>ka.executeAttributesQuery(ea),Z);const qa=ka.items,ya=new Set;yield this._reschedule(()=>{for(const xa of qa)ya.add(ka.featureAdapter.getObjectId(xa))},Z);return ya}catch(qa){if(qa===A.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw qa;}});return function(){return z.apply(this,arguments)}}();m.executeQueryForSnapping=function(){var z=d._asyncToGenerator(function*(J,Z){const {point:ea,distance:ka,types:qa}=J;if(0===
qa)return{candidates:[]};const ya=yield this._reschedule(()=>this._checkQuerySupport(J.query),Z),xa=!I.equals(ea.spatialReference,this.spatialReference);xa&&(yield V.checkProjectionSupport(ea.spatialReference,this.spatialReference));var Ba="number"===typeof ka?ka:ka.x,Na="number"===typeof ka?ka:ka.y;Ba={xmin:ea.x-Ba,xmax:ea.x+Ba,ymin:ea.y-Na,ymax:ea.y+Na,spatialReference:ea.spatialReference};Ba=xa?V.project(Ba,this.spatialReference):Ba;if(!Ba)return{candidates:[]};Na=(yield aa.normalizeCentralMeridian(fa.fromJSON(ea),
null,{signal:Z}))[0];const Ta=(yield aa.normalizeCentralMeridian(fa.fromJSON(Ba),null,{signal:Z}))[0];if(p.isNone(Na)||p.isNone(Ta))return{candidates:[]};let Ka=new r(this._searchFeatures(this._getQueryBBoxes(Ta.toJSON())),null,this);Ka=yield this._reschedule(()=>Ka.executeObjectIdsQuery(ya),Z);Ka=yield this._reschedule(()=>Ka.executeTimeQuery(ya),Z);Ka=yield this._reschedule(()=>Ka.executeAttributesQuery(ya),Z);Z=Na.toJSON();Z=xa?V.project(Z,this.spatialReference):Z;return Ka.createSnappingResponse({...J,
point:Z,distance:xa?Math.max(Ba.xmax-Ba.xmin,Ba.ymax-Ba.ymin)/2:ka},ea.spatialReference)});return function(J,Z){return z.apply(this,arguments)}}();m.executeQueryForLatestObservations=function(){var z=d._asyncToGenerator(function*(J={},Z){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new ia("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:J,timeInfo:this.timeInfo});let ea=ha.clone(J),ka;try{ea=yield this._schedule(()=>A.normalizeQuery(ea,this.definitionExpression,
this.spatialReference),Z),ea=yield this._reschedule(()=>this._checkQuerySupport(ea),Z),ka=yield this._reschedule(()=>this._executeGeometryQuery(ea,Z),Z),ka=yield this._reschedule(()=>ka.executeAggregateIdsQuery(ea),Z),ka=yield this._reschedule(()=>ka.executeObjectIdsQuery(ea),Z),ka=yield this._reschedule(()=>ka.executeTimeQuery(ea),Z),ka=yield this._reschedule(()=>ka.executeAttributesQuery(ea),Z),ka=yield this._reschedule(()=>ka.filterLatest(),Z)}catch(qa){if(qa!==A.QUERY_ENGINE_EMPTY_RESULT)throw qa;
ka=new r([],null,this)}return ka.createQueryResponse(ea)});return function(){return z.apply(this,arguments)}}();m.executeQueryForSummaryStatistics=function(){var z=d._asyncToGenerator(function*(J={},Z,ea){J=ha.clone(J);let ka;try{J=yield this._schedule(()=>A.normalizeQuery(J,this.definitionExpression,this.spatialReference),ea),J=yield this._reschedule(()=>this._checkSummaryStatisticsSupport(J,Z),ea),ka=yield this._reschedule(()=>this._executeGeometryQuery(J,ea),ea),ka=yield this._reschedule(()=>ka.executeAggregateIdsQuery(J),
ea),ka=yield this._reschedule(()=>ka.executeObjectIdsQuery(J),ea),ka=yield this._reschedule(()=>ka.executeTimeQuery(J),ea),ka=yield this._reschedule(()=>ka.executeAttributesQuery(J),ea)}catch(qa){if(qa!==A.QUERY_ENGINE_EMPTY_RESULT)throw qa;ka=new r([],null,this)}return ka.createSummaryStatisticsResponse(J,Z)});return function(){return z.apply(this,arguments)}}();m._schedule=function(){var z=d._asyncToGenerator(function*(J,Z){return this._frameQueue?this._frameQueue.push(J,Z):J()});return function(J,
Z){return z.apply(this,arguments)}}();m._reschedule=function(){var z=d._asyncToGenerator(function*(J,Z){return this._frameQueue?this._frameQueue.unshift(J,Z):J()});return function(J,Z){return z.apply(this,arguments)}}();m.runTask=function(z){for(this._budget=z;!z.done&&this._frameQueue&&this._frameQueue.process();)z.madeProgress();this._budget=null};m._getAll=function(){if(!this._allItems){const z=[];this.featureStore.forEach(J=>z.push(J));this._allItems=new r(z,null,this)}return this._allItems};
m._executeGeometryQuery=function(){var z=d._asyncToGenerator(function*(J,Z){var ea=this;const {geometry:ka,outSR:qa,spatialRel:ya,returnGeometry:xa,returnCentroid:Ba}=J,Na=xa||Ba,Ta=I.isValid(qa)&&!I.equals(this.spatialReference,qa),Ka=this._geometryQueryCache?Ta&&Na?JSON.stringify({geometry:ka,spatialRelationship:ya,outSpatialReference:qa}):JSON.stringify({geometry:ka,spatialRelationship:ya}):null;if(Ka){var Ca=this._geometryQueryCache.get(Ka);if(!p.isUndefined(Ca))return Ca}Ca=function(){var k=
d._asyncToGenerator(function*(T){if(Ta&&Na)return T=yield T.project(qa),Ka&&ea._geometryQueryCache.put(Ka,T,T.size||1),T;Ka&&ea._geometryQueryCache.put(Ka,T,T.size||1);return T});return function(T){return k.apply(this,arguments)}}();if(!ka)return Ca(this._getAll());const Ra=this.featureAdapter;if("esriSpatialRelDisjoint"===ya){J=this._searchFeatures(this._getQueryBBoxes(ka));if(!J.length)return Ca(this._getAll());let k,T;const f=new Set;for(var gb of J)f.add(Ra.getObjectId(gb));yield this._reschedule(()=>
{let u=0;k=Array(f.size);this.featureStore.forEach(L=>k[u++]=L);T=f},Z);J=yield this._reschedule(d._asyncToGenerator(function*(){const u=yield K.getSpatialQueryOperator(ya,ka,ea.geometryType,ea.hasZ,ea.hasM);return new r(yield ea._runSpatialFilter(k,L=>!T.has(Ra.getObjectId(L))||u(Ra.getGeometry(L)),Z),ka,ea)}),Z);return Ca(J)}gb=this._searchFeatures(this._getQueryBBoxes(ka));if(!gb.length)return Ca=new r([],ka,this),Ka&&this._geometryQueryCache.put(Ka,Ca,Ca.size||1),Ca;if(this._canExecuteSoloPass(ka,
J))return Ca(new r(gb,ka,this));const c=yield K.getSpatialQueryOperator(ya,ka,this.geometryType,this.hasZ,this.hasM);J=yield this._runSpatialFilter(gb,k=>c(Ra.getGeometry(k)),Z);return Ca(new r(J,ka,this))});return function(J,Z){return z.apply(this,arguments)}}();m._runSpatialFilter=function(){var z=d._asyncToGenerator(function*(J,Z,ea){var ka=this;if(!Z)return J;if(!this._budget)return J.filter(Ba=>Z(Ba));let qa=0;const ya=[],xa=function(){var Ba=d._asyncToGenerator(function*(){for(;qa<J.length;){const Na=
J[qa];Z(Na)&&ya.push(Na);ka._budget.done&&(yield ka._reschedule(()=>xa(),ea));++qa}});return function(){return Ba.apply(this,arguments)}}();return this._reschedule(()=>xa(),ea).then(()=>ya)});return function(J,Z,ea){return z.apply(this,arguments)}}();m._canExecuteSoloPass=function(z,J){const {geometryType:Z}=this;({spatialRel:J}=J);return K.canQueryWithRBush(z)&&("esriSpatialRelEnvelopeIntersects"===J||"esriGeometryPoint"===Z&&("esriSpatialRelIntersects"===J||"esriSpatialRelContains"===J||"esriSpatialRelWithin"===
J))};m._getQueryBBoxes=function(z){if(K.canQueryWithRBush(z)){if(fa.isExtent(z))return[l.fromValues(z.xmin,z.ymin,z.xmax,z.ymax)];if(fa.isPolygon(z))return z.rings.map(J=>l.fromValues(Math.min(J[0][0],J[2][0]),Math.min(J[0][1],J[2][1]),Math.max(J[0][0],J[2][0]),Math.max(J[0][1],J[2][1])))}return[v.getBoundsXY(l.create(),z)]};m._searchFeatures=function(z){for(const ea of z)this.featureStore.forEachInBounds(ea,ka=>{W.add(ka)});const J=Array(W.size);let Z=0;W.forEach(ea=>J[Z++]=ea);W.clear();return J};
m._checkSummaryStatisticsSupport=function(){var z=d._asyncToGenerator(function*(J,Z){if(0>J.distance||null!=J.geometryPrecision||J.multipatchOption||J.pixelSize||J.relationParam||J.text||J.outStatistics||J.groupByFieldsForStatistics||J.having||J.orderByFields)throw new ia("feature-store:unsupported-query","Unsupported query options",{query:J});return Promise.all([this._checkAttributesQuerySupport(J),this._checkSummaryStatisticsParamsSupport(Z),K.checkSpatialQuerySupport(J,this.geometryType,this.spatialReference),
V.checkProjectionSupport(this.spatialReference,J.outSR)]).then(()=>J)});return function(J,Z){return z.apply(this,arguments)}}();m._checkSummaryStatisticsParamsSupport=function(){var z=d._asyncToGenerator(function*(J){var Z=[];J.valueExpression&&({arcadeUtils:Z}=yield M.loadArcade(),Z=Z.extractFieldNames(J.valueExpression));J.field&&Z.push(J.field);J.normalizationField&&Z.push(J.normalizationField);if(!Z.length)throw new ia("feature-store:unsupported-query","params should have at least a field or valueExpression",
{params:J});F.validateFields(this.fieldsIndex,Z,"params contains missing fields")});return function(J){return z.apply(this,arguments)}}();m._checkQuerySupport=function(){var z=d._asyncToGenerator(function*(J){if(0>J.distance||null!=J.geometryPrecision||J.multipatchOption||J.pixelSize||J.relationParam||J.text)throw new ia("feature-store:unsupported-query","Unsupported query options",{query:J});return Promise.all([this._checkAttributesQuerySupport(J),this._checkStatisticsQuerySupport(J),K.checkSpatialQuerySupport(J,
this.geometryType,this.spatialReference),V.checkProjectionSupport(this.spatialReference,J.outSR)]).then(()=>J)});return function(J){return z.apply(this,arguments)}}();m._checkAttributesQuerySupport=function(z){const {outFields:J,orderByFields:Z,returnDistinctValues:ea,outStatistics:ka}=z,qa=ka?ka.map(ya=>ya.outStatisticFieldName&&ya.outStatisticFieldName.toLowerCase()):[];if(Z&&0<Z.length){const ya=Z.map(xa=>{const Ba=xa.toLowerCase();return-1<Ba.indexOf(" asc")?Ba.split(" asc")[0]:-1<Ba.indexOf(" desc")?
Ba.split(" desc")[0]:xa}).filter(xa=>-1===qa.indexOf(xa));F.validateFields(this.fieldsIndex,ya,"orderByFields contains missing fields")}if(J&&0<J.length)F.validateFields(this.fieldsIndex,J,"outFields contains missing fields");else if(ea)throw new ia("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:z});F.validateWhere(this.fieldsIndex,z.where)};m._checkStatisticsQuerySupport=function(){var z=d._asyncToGenerator(function*(J){const {outStatistics:Z,groupByFieldsForStatistics:ea,
having:ka}=J;var qa=ea&&ea.length,ya=Z&&Z.length;if(ka){if(!qa||!ya)throw new ia("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:J});F.validateHaving(this.fieldsIndex,ka,Z)}if(ya&&P(Z)){ya=Z.map(xa=>xa.onStatisticField);F.validateFields(this.fieldsIndex,ya,"onStatisticFields contains missing fields");qa&&F.validateFields(this.fieldsIndex,ea,"groupByFieldsForStatistics contains missing fields");for(const xa of Z){const {onStatisticField:Ba,
statisticType:Na}=xa;if(("percentile_disc"===Na||"percentile_cont"===Na)&&"statisticParameters"in xa){if({statisticParameters:qa}=xa,!qa)throw new ia("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:xa,query:J});}else if("count"!==Na&&Ba&&F.hasInvalidFieldType(Ba,this.fieldsIndex))throw new ia("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:xa,query:J});}}});return function(J){return z.apply(this,arguments)}}();
d._createClass(n,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const z=this.featureStore.fullBounds;return z?{xmin:z[0],ymin:z[1],xmax:z[2],ymax:z[3],spatialReference:A.cleanFromGeometryEngine(this.spatialReference)}:null}},{key:"timeExtent",get:function(){return this.timeInfo?this._timeExtent?this._timeExtent:this._timeExtent=Y.getTimeExtent(this.timeInfo,this.featureStore):null}},{key:"running",get:function(){return 0<this._frameQueue.length}}]);
return n}();const N=H.create(),Q=H.create();q.Feature=function(n,m=null,z,J,Z){this.attributes=n;this.geometry=z;this.centroid=J;this.filterFlags=Z;this.groupId=-1;this.displayId=m};q["default"]=E;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./PooledArray"],function(q,d,ia){let ha=function(){function t(H,l,v){this._namespace=H;this._storage=l;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);
this._namespace+=":";v&&(this._storage.registerRemoveFunc(this._namespace,v),this._removeFunc=!0)}var h=t.prototype;h.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this);this._storage=null};h.resetHitRate=function(){this._hit=this._miss=0};h.put=function(H,l,v,fa=0){this._storage.put(this._namespace+H,l,v,fa)};h.get=function(H){H=this._storage.get(this._namespace+H);void 0===H?++this._miss:++this._hit;
return H};h.pop=function(H){H=this._storage.pop(this._namespace+H);void 0===H?++this._miss:++this._hit;return H};h.updateSize=function(H,l,v){this._storage.updateSize(this._namespace+H,l,v)};h.clear=function(){this._storage.clear(this._namespace)};h.clearAll=function(){this._storage.clearAll()};h.getStats=function(){return this._storage.getStats()};h.resetStats=function(){this._storage.resetStats()};d._createClass(t,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",
get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return t}(),p=function(){function t(H=10485760){this._maxSize=H;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new ia;this._users=new ia}var h=t.prototype;h.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};h.register=function(H){this._users.push(H)};h.deregister=
function(H){this._users.removeUnordered(H)};h.registerRemoveFunc=function(H,l){this._removeFuncs.push([H,l])};h.deregisterRemoveFunc=function(H){this._removeFuncs.filterInPlace(l=>l[0]!==H)};h.put=function(H,l,v,fa){const aa=this._db.get(H);aa&&(this._size-=aa.size,this._db.delete(H),aa.entry!==l&&this._notifyRemoved(H,aa.entry));v>this._maxSize?this._notifyRemoved(H,l):void 0===l?console.warn("Refusing to cache undefined entry "):!v||0>v?console.warn("Refusing to cache entry with invalid size "+
v):(fa=1+Math.max(fa,-3)- -3,this._db.set(H,{entry:l,size:v,lifetime:fa,lives:fa}),this._size+=v,this._checkSizeLimit())};h.updateSize=function(H,l,v){const fa=this._db.get(H);fa&&fa.entry===l&&(this._size-=fa.size,v>this._maxSize?(this._db.delete(H),this._notifyRemoved(H,l)):(fa.size=v,this._size+=v,this._checkSizeLimit()))};h.pop=function(H){const l=this._db.get(H);if(l)return this._size-=l.size,this._db.delete(H),++this._hit,l.entry;++this._miss};h.get=function(H){const l=this._db.get(H);if(void 0===
l)++this._miss;else return this._db.delete(H),l.lives=l.lifetime,this._db.set(H,l),++this._hit,l.entry};h.getStats=function(){const H={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},l={},v=[];this._db.forEach((I,F)=>{const V=I.lifetime;v[V]=(v[V]||0)+I.size;this._users.forAll(e=>{e=e.namespace;F.startsWith(e)&&(l[e]=(l[e]||0)+I.size)})});const fa={};this._users.forAll(I=>{const F=I.namespace;
!isNaN(I.hitRate)&&0<I.hitRate?(l[F]=l[F]||0,fa[F]=Math.round(100*I.hitRate)+"%"):fa[F]="0%"});var aa=Object.keys(l);aa.forEach(I=>l[I]=l[I]/this._size*100);aa.sort((I,F)=>l[F]-l[I]);aa.forEach(I=>H[I]=Math.round(l[I])+"% / "+fa[I]);for(aa=v.length-1;0<=aa;--aa){const I=v[aa];I&&(H["Priority "+(aa+-3-1)]=Math.round(I/this.size*100)+"%")}return H};h.resetStats=function(){this._hit=this._miss=0;this._users.forAll(H=>H.resetHitRate())};h.clear=function(H){this._db.forEach((l,v)=>{v.startsWith(H)&&(this._size-=
l.size,this._db.delete(v),this._notifyRemoved(v,l.entry))})};h.clearAll=function(){this._db.forEach((H,l)=>this._notifyRemoved(l,H.entry));this._size=0;this._db.clear()};h._getHitRate=function(){return this._hit/(this._hit+this._miss)};h._notifyRemoved=function(H,l){this._removeFuncs.forAll(v=>{if(H.startsWith(v[0]))v[1](l)})};h._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [H,l]of this._db)if(this._db.delete(H),1>=l.lives?(this._size-=l.size,this._notifyRemoved(H,l.entry)):
(--l.lives,this._db.set(H,l)),this._size<=.9*this.maxSize)break};d._createClass(t,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(H){this._maxSize=Math.max(H,0);this._checkSizeLimit()}}]);return t}();q.MIN_PRIORITY=-3;q.MemCache=ha;q.MemCacheStorage=p;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../tasks/geometry/cut ../../tasks/geometry/simplify".split(" "),
function(q,d,ia,ha,p,t,h,H,l,v,fa,aa,I){function F(C){const M=[];let P=0,W=0;for(let ja=0;ja<C.length;ja++){const B=C[ja];let E=null;for(let N=0;N<B.length;N++)E=B[N],M.push(E),0===N?W=P=E[0]:(P=Math.min(P,E[0]),W=Math.max(W,E[0]));E&&M.push([(P+W)/2,0])}return M}function V(C,M){if(!(C instanceof H||C instanceof h))throw G.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new ha("straightLineDensify: the input geometry is neither polyline nor polygon");var P=l.getGeometryParts(C);
const W=[];for(const B of P){P=[];W.push(P);P.push([B[0][0],B[0][1]]);for(let E=0;E<B.length-1;E++){const N=B[E][0],Q=B[E][1],n=B[E+1][0],m=B[E+1][1];var ja=Math.sqrt((n-N)*(n-N)+(m-Q)*(m-Q));const z=(m-Q)/ja,J=(n-N)/ja,Z=ja/M;if(1<Z){for(let ea=1;ea<=Z-1;ea++){const ka=ea*M;P.push([J*ka+N,z*ka+Q])}ja=(ja+Math.floor(Z-1)*M)/2;P.push([J*ja+N,z*ja+Q])}P.push([n,m])}}return"polygon"===C.type?new h({rings:W,spatialReference:C.spatialReference}):new H({paths:W,spatialReference:C.spatialReference})}function e(C,
M,P){M&&(C=V(C,1E6),C=fa.webMercatorToGeographic(C,!0));P&&(C=l.updatePolyGeometry(C,P));return C}function r(C,M,P){if(Array.isArray(C)){var W=C[0];W>M?(P=l.offsetMagnitude(W,M),C[0]=W+-2*P*M):W<P&&(M=l.offsetMagnitude(W,P),C[0]=W+-2*M*P)}else W=C.x,W>M?(P=l.offsetMagnitude(W,M),C=C.clone().offset(-2*P*M,0)):W<P&&(M=l.offsetMagnitude(W,P),C=C.clone().offset(-2*M*P,0));return C}function K(C,M){let P=-1;for(let W=0;W<M.cutIndexes.length;W++){const ja=M.cutIndexes[W],B=M.geometries[W],E=l.getGeometryParts(B);
for(let N=0;N<E.length;N++){const Q=E[N];Q.some(n=>{if(180>n[0])return!0;n=0;for(var m=0;m<Q.length;m++){var z=Q[m][0];n=z>n?z:n}n=Number(n.toFixed(9));n=-360*l.offsetMagnitude(n,180);for(m=0;m<Q.length;m++)z=B.getPoint(N,m),B.setPoint(N,m,z.clone().offset(n,0));return!0})}if(ja===P)if("polygon"===C[0].type)for(const N of l.getGeometryParts(B))C[ja]=C[ja].addRing(N);else{if("polyline"===C[0].type)for(const N of l.getGeometryParts(B))C[ja]=C[ja].addPath(N)}else P=ja,C[ja]=B}return C}function Y(C,M,
P){return A.apply(this,arguments)}function A(){A=d._asyncToGenerator(function*(C,M,P){if(!Array.isArray(C))return Y([C],M);var W=M?M.url:ia.geometryServiceUrl;let ja,B,E;let N=0;var Q=[];M=[];for(var n of C)if(t.isNone(n))M.push(n);else{if(!m){var m=n.spatialReference;var z=v.getInfo(m);var J=(ja=m.isWebMercator)?102100:4326;B=l.cutParams[J].maxX;E=l.cutParams[J].minX;var Z=l.cutParams[J].plus180Line;J=l.cutParams[J].minus180Line}if(z)if("mesh"===n.type)M.push(n);else if("point"===n.type)M.push(r(n.clone(),
B,E));else if("multipoint"===n.type){var ea=n.clone();ea.points=ea.points.map(ka=>r(ka,B,E));M.push(ea)}else if("extent"===n.type)ea=n.clone()._normalize(!1,!1,z),M.push(ea.rings?new h(ea):ea);else if(n.extent){ea=n.extent;const ka=2*l.offsetMagnitude(ea.xmin,E)*B;let qa=0===ka?n.clone():l.updatePolyGeometry(n.clone(),ka);ea.offset(ka,0);ea.intersects(Z)&&ea.xmax!==B?(N=ea.xmax>N?ea.xmax:N,qa=e(qa,ja),Q.push(qa),M.push("cut")):ea.intersects(J)&&ea.xmin!==E?(N=2*ea.xmax*B>N?2*ea.xmax*B:N,qa=e(qa,ja,
360),Q.push(qa),M.push("cut")):M.push(qa)}else M.push(n.clone());else M.push(n)}m=l.offsetMagnitude(N,B);z=-90;Z=m;for(n=new H;0<m;)J=-180+360*m,n.addPath([[J,z],[J,-1*z]]),z*=-1,m--;if(0<Q.length&&0<Z){m=yield aa.cut(W,Q,n,P);m=K(Q,m);z=[];Q=[];for(Z=0;Z<M.length;Z++)n=M[Z],"cut"!==n?Q.push(n):(n=m.shift(),J=C[Z],t.isSome(J)&&"polygon"===J.type&&J.rings&&1<J.rings.length&&n.rings.length>=J.rings.length?(z.push(n),Q.push("simplify")):Q.push(ja?fa.geographicToWebMercator(n):n));if(!z.length)return Q;
M=yield I.simplify(W,z,P);C=[];for(P=0;P<Q.length;P++)W=Q[P],"simplify"!==W?C.push(W):C.push(ja?fa.geographicToWebMercator(M.shift()):M.shift());return C}C=[];for(P=0;P<M.length;P++)W=M[P],"cut"!==W?C.push(W):(W=Q.shift(),C.push(!0===ja?fa.geographicToWebMercator(W):W));return Promise.resolve(C)});return A.apply(this,arguments)}const G=p.getLogger("esri.geometry.support.normalizeUtils");q.getDenormalizedExtent=function(C){if(!C)return null;const M=C.extent;if(!M)return null;var P=C.spatialReference&&
v.getInfo(C.spatialReference);if(!P)return M;const [W,ja]=P.valid;({width:P}=M);let {xmin:B,xmax:E}=M;[B,E]=[E,B];if("extent"===C.type||0===P||P<=ja||P>2*ja||B<W||E>ja)return M;let N;switch(C.type){case "polygon":if(1<C.rings.length)N=F(C.rings);else return M;break;case "polyline":if(1<C.paths.length)N=F(C.paths);else return M;break;case "multipoint":N=C.points}C=M.clone();for(let Q=0;Q<N.length;Q++){let n=N[Q][0];0>n?(n+=ja,E=Math.max(n,E)):(n-=ja,B=Math.min(n,B))}C.xmin=B;C.xmax=E;return C.width<
P?(C.xmin-=ja,C.xmax-=ja,C):M};q.normalizeCentralMeridian=Y;q.normalizeMapX=function(C,M){if(M=v.getInfo(M)){const [P,W]=M.valid;M=W-P;if(C<P)for(;C<P;)C+=M;if(C>W)for(;C>W;)C-=M}return C};q.straightLineDensify=V;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(q,d,ia,ha){function p(h){return ha.isPolygon(h)?h.rings:h.paths}const t={102100:{maxX:2.0037508342788905E7,
minX:-2.0037508342788905E7,plus180Line:new d({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:ia.WebMercator}),minus180Line:new d({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:ia.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new d({paths:[[[180,-180],[180,180]]],spatialReference:ia.WGS84}),minus180Line:new d({paths:[[[-180,-180],[-180,180]]],spatialReference:ia.WGS84})}};
q.cutParams=t;q.getGeometryParts=p;q.getSpatialReferenceMinMaxX=function(h){h=(null==h?0:h.isWebMercator)?102100:4326;return[t[h].minX,t[h].maxX]};q.offsetMagnitude=function(h,H){return Math.ceil((h-H)/(2*H))};q.updatePolyGeometry=function(h,H){const l=p(h);for(const v of l)for(const fa of v)fa[0]+=H;return h};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/tasks/geometry/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../core/urlUtils ../../geometry/support/jsonUtils".split(" "),
function(q,d,ia,ha,p,t){function h(){h=d._asyncToGenerator(function*(H,l,v,fa){H="string"===typeof H?p.urlToObject(H):H;const aa=l[0].spatialReference;l={...fa,query:{...H.query,f:"json",sr:JSON.stringify(aa),target:JSON.stringify({geometryType:t.getJsonType(l[0]),geometries:l}),cutter:JSON.stringify(v)}};l=yield ha(H.path+"/cut",l);const {cutIndexes:I,geometries:F=[]}=l.data;return{cutIndexes:I,geometries:F.map(V=>{V=t.fromJSON(V);V.spatialReference=aa;return V})}});return h.apply(this,arguments)}
q.cut=function(H,l,v,fa){return h.apply(this,arguments)};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/tasks/geometry/simplify":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../request","../../core/urlUtils","../../geometry/support/jsonUtils"],function(q,d,ia,ha,p){function t(){t=d._asyncToGenerator(function*(l,v,fa){const aa="string"===typeof l?ha.urlToObject(l):l;l=v[0].spatialReference;const I=p.getJsonType(v[0]);v={...fa,query:{...aa.query,f:"json",sr:l.wkid?
l.wkid:JSON.stringify(l),geometries:JSON.stringify(h(v))}};v=yield ia(aa.path+"/simplify",v);return H(v.data,I,l)});return t.apply(this,arguments)}function h(l){return{geometryType:p.getJsonType(l[0]),geometries:l.map(v=>v.toJSON())}}function H(l,v,fa){const aa=p.getGeometryType(v);return l.map(I=>{I=aa.fromJSON(I);I.spatialReference=fa;return I})}q.simplify=function(l,v,fa){return t.apply(this,arguments)};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports",
"../../../core/Error","../../../core/sql/WhereClauseCache"],function(q,d,ia){function ha(l,v){return l?h.get(l,v):null}function p(l,v,fa,aa=!0){const I=[];for(const F of v)if("*"!==F&&!l.has(F))if(aa){v=t(F);try{const V=ha(v,l);if(!V)throw new d("feature-store:unsupported-query","invalid SQL expression",{where:v});if(!V.isStandardized)throw new d("feature-store:unsupported-query","expression is not standard",{clause:V});p(l,V.fieldNames,"expression contains missing fields")}catch(V){if((v=V&&V.details)&&
(v.clause||v.where))throw V;v&&v.missingFields?I.push(...v.missingFields):I.push(F)}}else I.push(F);if(I.length)throw new d("feature-store:unsupported-query",fa,{missingFields:I});}function t(l){return l.split(" as ")[0]}const h=new ia.WhereClauseCache(50,500),H=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));q.getAliasFromFieldName=function(l){return l.split(" as ")[1]};q.getExpressionFromFieldName=
t;q.getWhereClause=ha;q.hasInvalidFieldType=function(l,v){return(l=v.get(l))?!H.has(l.type):!1};q.validateFields=p;q.validateHaving=function(l,v,fa){if(!v)return!0;const aa=h.get(v,l);if(!aa)throw new d("feature-store:unsupported-query","invalid SQL expression",{having:v});if(!aa.isAggregate)throw new d("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:v});p(l,aa.fieldNames,"having contains missing fields");if(!aa.getExpressions().every(I=>{const {aggregateType:F,
field:V}=I,e=l.has(V)&&l.get(V).name;return fa.some(r=>{const {onStatisticField:K,statisticType:Y}=r;return(l.has(K)&&l.get(K).name)===e&&Y.toLowerCase().trim()===F})}))throw new d("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:v});return!0};q.validateWhere=function(l,v){if(!v)return!0;const fa=h.get(v,l);if(!fa)throw new d("feature-store:unsupported-query","invalid SQL expression",{where:v});if(!fa.isStandardized)throw new d("feature-store:unsupported-query",
"where clause is not standard",{where:v});p(l,fa.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(q,d,ia){let ha=function(){function p(t,h){this._cache=new d(t);this._invalidCache=new d(h)}p.prototype.get=function(t,h){const H=`${h.uid}:${t}`,l=this._cache.get(H);if(l)return l;if(void 0!==this._invalidCache.get(H))return null;try{const v=
ia.WhereClause.create(t,h);this._cache.put(H,v);return v}catch{return this._invalidCache.put(H,null),null}};return p}();q.WhereClauseCache=ha;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(q){return function(){function d(ha,p){this._storage=new q.MemCacheStorage;this._storage.maxSize=ha;p&&this._storage.registerRemoveFunc("",p)}var ia=d.prototype;ia.put=function(ha,p){this._storage.put(ha,p,1,1)};ia.pop=function(ha){return this._storage.pop(ha)};
ia.get=function(ha){return this._storage.get(ha)};ia.clear=function(){this._storage.clearAll()};ia.destroy=function(){this._storage.destroy()};return d}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(q,d,ia,ha,p,t){function h(Q,n){Q+="";return Q.length>=n?Q:Array(n-Q.length+1).join("0")+Q}function H(Q,n,m="0",z="0",J="0",Z="0",ea="",ka="0",qa="0"){return"+"===
ea||"-"===ea?(Q=`${h(parseInt(Q,10),4)}-${h(parseInt(n,10),2)}-${h(parseInt(m,10),2)}`,n="",10>parseFloat(Z)&&(n="0"),z=`${h(parseInt(z,10),2)}:${h(parseInt(J,10),2)}:${n+parseFloat(Z).toString()}`,ea=`${ea}${h(parseInt(ka,10),2)}:${h(parseInt(qa,10),2)}`,new Date(Q+"T"+z+ea)):new Date(parseInt(Q,10),parseInt(n,10)-1,parseInt(m,10),parseInt(z,10),parseInt(J,10),parseFloat(Z))}function l(Q){let n=C.exec(Q);if(null!==n){const [,m,z,J,Z,ea,ka]=n;return H(m,z,J,Z,ea,ka)}n=M.exec(Q);if(null!==n){const [,
m,z,J,Z,ea,ka,qa,ya,xa]=n;return H(m,z,J,Z,ea,ka,qa,ya,xa)}n=P.exec(Q);if(null!==n){const [,m,z,J,Z,ea,ka,qa,ya]=n;return H(m,z,J,Z,ea,"0",ka,qa,ya)}n=W.exec(Q);if(null!==n){const [,m,z,J,Z,ea]=n;return H(m,z,J,Z,ea)}n=G.exec(Q);if(null!==n){const [,m,z,J]=n;return H(m,z,J)}throw Error("SQL Invalid Timestamp");}function v(Q){Q=G.exec(Q);if(null===Q)throw Error("SQL Invalid Date");const [,n,m,z]=Q;return new Date(parseInt(n,10),parseInt(m,10)-1,parseInt(z,10))}function fa(Q){return Array.isArray(Q)?
Q:[Q]}function aa(Q){return null!==Q?!0!==Q:null}function I(Q,n){return null!=Q&&null!=n?!0===Q&&!0===n:!1===Q||!1===n?!1:null}function F(Q,n){return null!=Q&&null!=n?!0===Q||!0===n:!0===Q||!0===n?!0:null}function V(Q,n){if(null==Q)return null;let m=!1;for(const z of n)if(null==z)m=null;else if(Q===z){m=!0;break}return m}function e(Q,n,m){if(null==Q)return null;let z="",J=0;for(let Z=0;Z<n.length;Z++){const ea=n.charAt(Z);switch(J){case 0:ea===m?J=1:z=0<="-[]/{}()*+?.\\^$|".indexOf(ea)?z+("\\"+ea):
"%"===ea?z+".*":"_"===ea?z+".":z+ea;break;case 1:z=0<="-[]/{}()*+?.\\^$|".indexOf(ea)?z+("\\"+ea):z+ea,J=0}}return(new RegExp("^"+z+"$")).test(Q)}function r(Q){return Q instanceof Date?Q.valueOf():Q}function K(Q,n,m){if(null==n||null==m)return null;n=r(n);m=r(m);switch(Q){case "\x3c\x3e":return n!==m;case "\x3d":return n===m;case "\x3e":return n>m;case "\x3c":return n<m;case "\x3e\x3d":return n>=m;case "\x3c\x3d":return n<=m}}function Y(Q,n,m){if(n instanceof p.SqlInterval)if(m instanceof Date)switch(Q){case "+":return new Date(n.valueInMilliseconds()+
m.getTime());case "-":return n.valueInMilliseconds()-m.getTime();case "*":return n.valueInMilliseconds()*m.getTime();case "/":return n.valueInMilliseconds()/m.getTime()}else if(m instanceof p.SqlInterval)switch(Q){case "+":return p.SqlInterval.createFromMilliseconds(n.valueInMilliseconds()+m.valueInMilliseconds());case "-":return p.SqlInterval.createFromMilliseconds(n.valueInMilliseconds()-m.valueInMilliseconds());case "*":return n.valueInMilliseconds()*m.valueInMilliseconds();case "/":return n.valueInMilliseconds()/
m.valueInMilliseconds()}else n=n.valueInMilliseconds();else if(m instanceof p.SqlInterval)if(n instanceof Date)switch(Q){case "+":return new Date(m.valueInMilliseconds()+n.getTime());case "-":return new Date(n.getTime()-m.valueInMilliseconds());case "*":return n.getTime()*m.valueInMilliseconds();case "/":return n.getTime()/m.valueInMilliseconds()}else m=m.valueInMilliseconds();else if(n instanceof Date&&"number"===typeof m)switch(m*=864E5,n=n.getTime(),Q){case "+":return new Date(n+m);case "-":return new Date(n-
m);case "*":return new Date(n*m);case "/":return new Date(n/m)}else if(m instanceof Date&&"number"===typeof n)switch(n*=864E5,m=m.getTime(),Q){case "+":return new Date(n+m);case "-":return new Date(n-m);case "*":return new Date(n*m);case "/":return new Date(n/m)}switch(Q){case "+":return n+m;case "-":return n-m;case "*":return n*m;case "/":return n/m}}function A(Q,n,m,z){Q=z.getAttribute(Q,n);return null!=Q&&1===m[n]?new Date(Q):Q}const G=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,C=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,
M=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,P=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,W=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,ja=new Set(["current_timestamp","current_date","current_time"]);let B=function(){function Q(){}Q.makeBool=function(n){return!0===n};Q.featureValue=function(n,m,z,J){return A(n,m,z,J)};Q.equalsNull=function(n){return null===n};Q.applyLike=function(n,m,z){return e(n,m,
z)};Q.ensureArray=function(n){return fa(n)};Q.applyIn=function(n,m){return V(n,m)};Q.currentDate=function(){const n=new Date;n.setHours(0,0,0,0);return n};Q.makeSqlInterval=function(n,m,z){return p.SqlInterval.createFromValueAndQualifer(n,m,z)};Q.convertInterval=function(n){return n instanceof p.SqlInterval?n.valueInMilliseconds():n};Q.currentTimestamp=function(){return new Date};Q.compare=function(n,m,z){return K(n,m,z)};Q.calculate=function(n,m,z){return Y(n,m,z)};Q.makeComparable=function(n){return r(n)};
Q.evaluateFunction=function(n,m){return p.evaluateFunction(n,m)};Q.lookup=function(n,m){n=m[n];return void 0===n?null:n};Q.between=function(n,m){return null==n||null==m[0]||null==m[1]?null:n>=m[0]&&n<=m[1]};Q.notbetween=function(n,m){return null==n||null==m[0]||null==m[1]?null:n<m[0]||n>m[1]};Q.ternaryNot=function(n){return aa(n)};Q.ternaryAnd=function(n,m){return I(n,m)};Q.ternaryOr=function(n,m){return F(n,m)};return Q}(),E=function(){function Q(m,z){this.fieldsIndex=z;this.datefields={};this.parameters=
{};this._hasDateFunctions=void 0;this.parseTree=t.WhereGrammar.parse(m);const {isStandardized:J,isAggregate:Z,referencedFieldNames:ea}=this.extractExpressionInfo(z);this.referencedFieldNames=ea;this.isStandardized=J;this.isAggregate=Z}Q.create=function(m,z){return new Q(m,z)};var n=Q.prototype;n.testSet=function(m,z=N){const J={};for(const Z of this.fieldNames)J[Z]=m.map(ea=>z.getAttribute(ea,Z));return!!this.evaluateNode(this.parseTree,{attributes:J},N)};n.calculateValue=function(m,z=N){m=this.evaluateNode(this.parseTree,
m,z);return m instanceof p.SqlInterval?m.valueInMilliseconds()/864E5:m};n.calculateValueCompiled=function(m,z=N){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(m,this.parameters,z,this.datefields);if(ia("csp-restrictions"))return this.calculateValue(m,z);this.compileMe();return this.parseTree._compiledVersion(m,this.parameters,z,this.datefields)};n.testFeature=function(m,z=N){return!!this.evaluateNode(this.parseTree,m,z)};n.testFeatureCompiled=function(m,z=N){if(null!=
this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(m,this.parameters,z,this.datefields);if(ia("csp-restrictions"))return this.testFeature(m,z);this.compileMe();return!!this.parseTree._compiledVersion(m,this.parameters,z,this.datefields)};n.getFunctions=function(){const m=new Set;this.visitAll(this.parseTree,z=>{"function"===z.type&&m.add(z.name.toLowerCase())});return Array.from(m)};n.getExpressions=function(){const m=new Map;this.visitAll(this.parseTree,z=>{if("function"===z.type){const J=
z.name.toLowerCase();z=z.args.value[0];if("column_ref"===z.type){z=z.column;const Z=`${J}-${z}`;m.has(Z)||m.set(Z,{aggregateType:J,field:z})}}});return[...m.values()]};n.getVariables=function(){const m=new Set;this.visitAll(this.parseTree,z=>{"param"===z.type&&m.add(z.value.toLowerCase())});return Array.from(m)};n.compileMe=function(){const m="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter",
"datefields",m)).bind(B)};n.extractExpressionInfo=function(m){const z=[],J=new Set;let Z=!0,ea=!0;this.visitAll(this.parseTree,ka=>{switch(ka.type){case "column_ref":{const qa=m.get(ka.column);let ya,xa;qa?ya=xa=qa.name:(xa=ka.column,ya=xa.toLowerCase());!qa||"date"!==qa.type&&"esriFieldTypeDate"!==qa.type||(this.datefields[qa.name]=1);J.has(ya)||(J.add(ya),z.push(xa));ka.column=xa;break}case "function":{const {name:qa,args:ya}=ka;ka=ya.value.length;Z&&(Z=p.isStandardized(qa,ka));ea&&(ea=ha.isAggregate(qa,
ka))}}});return{referencedFieldNames:Array.from(z),isStandardized:Z,isAggregate:ea}};n.visitAll=function(m,z){if(null!=m)switch(z(m),m.type){case "when_clause":this.visitAll(m.operand,z);this.visitAll(m.value,z);break;case "case_expression":for(const J of m.clauses)this.visitAll(J,z);"simple"===m.format&&this.visitAll(m.operand,z);null!==m.else&&this.visitAll(m.else,z);break;case "expr_list":for(const J of m.value)this.visitAll(J,z);break;case "unary_expr":this.visitAll(m.expr,z);break;case "binary_expr":this.visitAll(m.left,
z);this.visitAll(m.right,z);break;case "function":this.visitAll(m.args,z)}};n.evaluateNodeToJavaScript=function(m){switch(m.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(m.value)+", "+JSON.stringify(m.qualifier)+","+JSON.stringify(m.op)+")";case "case_expression":var z="";if("simple"===m.format){var J="this.makeComparable("+this.evaluateNodeToJavaScript(m.operand)+")";z="( ";for(let Z=0;Z<m.clauses.length;Z++)z+=" ("+J+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(m.clauses[Z].operand)+
")) ? ("+this.evaluateNodeToJavaScript(m.clauses[Z].value)+") : "}else for(z="( ",J=0;J<m.clauses.length;J++)z+=" this.makeBool("+this.evaluateNodeToJavaScript(m.clauses[J].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(m.clauses[J].value)+") : ";z=null!==m.else?z+this.evaluateNodeToJavaScript(m.else):z+"null";return z+=" )";case "param":return"this.lookup("+JSON.stringify(m.value.toLowerCase())+",lookups)";case "expr_list":z="[";for(J of m.value)"["!==z&&(z+=","),z+=this.evaluateNodeToJavaScript(J);
return z+="]";case "unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(m.expr)+")";case "binary_expr":switch(m.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+" )";case "IS":if("null"!==m.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(m.left)+
")";case "ISNOT":if("null"!==m.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(m.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(m.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(m.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(m.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(m.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(m.left)+
","+this.evaluateNodeToJavaScript(m.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+","+JSON.stringify(m.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+","+JSON.stringify(m.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+
JSON.stringify(m.operator)+","+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(m.operator)+","+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+")"}throw Error("Not Supported Operator "+m.operator);case "null":case "bool":case "string":case "number":return JSON.stringify(m.value);case "date":return"(new Date("+v(m.value).getTime().toString()+"))";case "timestamp":return"(new Date("+
l(m.value).getTime().toString()+"))";case "current_time":return"date"===m.mode?"this.currentDate()":"this.currentTimestamp()";case "column_ref":return"this.featureValue(feature,"+JSON.stringify(m.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(m.name)+","+this.evaluateNodeToJavaScript(m.args)+")"}throw Error("Unsupported sql syntax "+m.type);};n.evaluateNode=function(m,z,J){switch(m.type){case "interval":return z=this.evaluateNode(m.value,z,J),
p.SqlInterval.createFromValueAndQualifer(z,m.qualifier,m.op);case "case_expression":if("simple"===m.format){var Z=r(this.evaluateNode(m.operand,z,J));for(var ea=0;ea<m.clauses.length;ea++)if(Z===r(this.evaluateNode(m.clauses[ea].operand,z,J)))return this.evaluateNode(m.clauses[ea].value,z,J)}else for(Z=0;Z<m.clauses.length;Z++)if(!0===this.evaluateNode(m.clauses[Z].operand,z,J))return this.evaluateNode(m.clauses[Z].value,z,J);return null!==m.else?this.evaluateNode(m.else,z,J):null;case "param":return this.parameters[m.value.toLowerCase()];
case "expr_list":Z=[];for(ea of m.value)Z.push(this.evaluateNode(ea,z,J));return Z;case "unary_expr":return aa(this.evaluateNode(m.expr,z,J));case "binary_expr":switch(m.operator){case "AND":return I(this.evaluateNode(m.left,z,J),this.evaluateNode(m.right,z,J));case "OR":return F(this.evaluateNode(m.left,z,J),this.evaluateNode(m.right,z,J));case "IS":if("null"!==m.right.type)throw Error("Unsupported RHS for IS");return null===this.evaluateNode(m.left,z,J);case "ISNOT":if("null"!==m.right.type)throw Error("Unsupported RHS for IS");
return null!==this.evaluateNode(m.left,z,J);case "IN":return Z=fa(this.evaluateNode(m.right,z,J)),V(this.evaluateNode(m.left,z,J),Z);case "NOT IN":return Z=fa(this.evaluateNode(m.right,z,J)),aa(V(this.evaluateNode(m.left,z,J),Z));case "BETWEEN":return Z=this.evaluateNode(m.left,z,J),m=this.evaluateNode(m.right,z,J),null==Z||null==m[0]||null==m[1]?null:Z>=r(m[0])&&Z<=r(m[1]);case "NOTBETWEEN":return Z=this.evaluateNode(m.left,z,J),m=this.evaluateNode(m.right,z,J),null==Z||null==m[0]||null==m[1]?null:
Z<r(m[0])||Z>r(m[1]);case "LIKE":return e(this.evaluateNode(m.left,z,J),this.evaluateNode(m.right,z,J),m.escape);case "NOT LIKE":return aa(e(this.evaluateNode(m.left,z,J),this.evaluateNode(m.right,z,J),m.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return K(m.operator,this.evaluateNode(m.left,z,J),this.evaluateNode(m.right,z,J));case "-":case "+":case "*":case "/":return Y(m.operator,this.evaluateNode(m.left,z,J),this.evaluateNode(m.right,z,J))}case "null":case "bool":case "string":case "number":return m.value;
case "date":return v(m.value);case "timestamp":return l(m.value);case "current_time":return z=new Date,"date"===m.mode&&z.setHours(0,0,0,0),z;case "column_ref":return A(z,m.column,this.datefields,J);case "function":return z=this.evaluateNode(m.args,z,J),this.isAggregate?ha.aggregateFunction(m.name,z):p.evaluateFunction(m.name,z)}throw Error("Unsupported sql syntax "+m.type);};d._createClass(Q,[{key:"fieldNames",get:function(){return this.referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=
this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this.visitAll(this.parseTree,m=>{"current_time"===m.type?this._hasDateFunctions=!0:"function"===m.type&&(this._hasDateFunctions=this._hasDateFunctions||ja.has(m.name.toLowerCase()))});return this._hasDateFunctions}}]);return Q}();const N={getAttribute(Q,n){return(Q&&"object"===typeof Q.attributes?Q.attributes:Q)[n]}};q.WhereClause=E;q.defaultAttributeAdapter=N;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],
function(q){function d(p){let t=0;for(let h=0;h<p.length;h++)t+=p[h];return t/p.length}function ia(p){const t=d(p),h=p.length;let H=0;for(const l of p)H+=(l-t)**2;return 1<h?H/(h-1):0}const ha={min:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.min.apply(Math,p[0])},max:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.max.apply(Math,p[0])},avg:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:d(p[0])},sum:{minParams:1,maxParams:1,evaluate:p=>{if(null==p[0])p=null;else{{p=p[0];
let t=0;for(let h=0;h<p.length;h++)t+=p[h];p=t}}return p}},stddev:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.sqrt(ia(p[0]))},count:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:p[0].length},var:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:ia(p[0])}};q.aggregateFunction=function(p,t){const h=ha[p.toLowerCase()];if(null==h)throw Error("Function Not Recognised");if(t.length<h.minParams||t.length>h.maxParams)throw Error(`Invalid Parameter count for call to ${p.toUpperCase()}`);
return h.evaluate(t)};q.isAggregate=function(p,t){p=ha[p.toLowerCase()];return null!=p&&t>=p.minParams&&t<=p.maxParams};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(q,d){let ia=function(){function p(){this.op="+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}p.fixDefaults=function(t){if(null!==t.precision||null!==t.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");
};p.createFromMilliseconds=function(t){const h=new p;h.second=t/1E3;return h};p.createFromValueAndQualifer=function(t,h,H){let l=null;const v=new p;v.op="-"===H?"-":"+";if("interval-period"===h.type){p.fixDefaults(h);if("year"===h.period||"month"===h.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(t))v[h.period]=parseFloat(t);else throw Error("Illegal Interval");}else{p.fixDefaults(h.start);p.fixDefaults(h.end);if("year"===h.start.period||"month"===h.start.period)throw Error("Year-Month Intervals not supported");
if("year"===h.end.period||"month"===h.end.period)throw Error("Year-Month Intervals not supported");switch(h.start.period){case "day":switch(h.end.period){case "hour":l=/^[0-9]{1,} [0-9]{1,}$/;if(l.test(t))v[h.start.period]=parseFloat(t.split(" ")[0]),v[h.end.period]=parseFloat(t.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":l=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(l.test(t))v[h.start.period]=parseFloat(t.split(" ")[0]),t=t.split(" ")[1].split(":"),v.hour=parseFloat(t[0]),
v.minute=parseFloat(t[1]);else throw Error("Illegal Interval");break;case "second":l=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(l.test(t))v[h.start.period]=parseFloat(t.split(" ")[0]),t=t.split(" ")[1].split(":"),v.hour=parseFloat(t[0]),v.minute=parseFloat(t[1]),v.second=parseFloat(t[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "hour":switch(h.end.period){case "minute":l=/^[0-9]{1,}:[0-9]{1,}$/;if(l.test(t))v.hour=parseFloat(t.split(":")[0]),
v.minute=parseFloat(t.split(":")[1]);else throw Error("Illegal Interval");break;case "second":l=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(l.test(t))t=t.split(":"),v.hour=parseFloat(t[0]),v.minute=parseFloat(t[1]),v.second=parseFloat(t[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "minute":switch(h.end.period){case "second":l=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(l.test(t))t=t.split(":"),v.minute=parseFloat(t[0]),v.second=parseFloat(t[1]);
else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;default:throw"Invalid Interval.";}}return v};p.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return p}();const ha={extract:{minParams:2,maxParams:2,evaluate:([p,t])=>{if(null==t)return null;if(t instanceof Date)switch(p.toUpperCase()){case "SECOND":return t.getSeconds();case "MINUTE":return t.getMinutes();
case "HOUR":return t.getHours();case "DAY":return t.getDate();case "MONTH":return t.getMonth()+1;case "YEAR":return t.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:p=>{if(2===p.length){const [t,h]=p;return null==t||null==h?null:t.toString().substring(h-1)}if(3===p.length){const [t,h,H]=p;return null==t||null==h||null==H?null:0>=H?"":t.toString().substring(h-1,h+H-1)}}},position:{minParams:2,maxParams:2,evaluate:([p,t])=>null==p||
null==t?null:t.indexOf(p)+1},trim:{minParams:2,maxParams:3,evaluate:p=>{var t=3===p.length,h=t?p[1]:" ";t=t?p[2]:p[1];if(null==h||null==t)return null;h=`(${d.escapeRegExpString(h)})`;switch(p[0]){case "BOTH":return t.replace(new RegExp(`^${h}*|${h}*$`,"g"),"");case "LEADING":return t.replace(new RegExp(`^${h}*`,"g"),"");case "TRAILING":return t.replace(new RegExp(`${h}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.abs(p[0])},
ceiling:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.ceil(p[0])},floor:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.floor(p[0])},log:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.log(p[0])},log10:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.log(p[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.sin(p[0])},cos:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.cos(p[0])},tan:{minParams:1,maxParams:1,evaluate:p=>
null==p[0]?null:Math.tan(p[0])},asin:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.asin(p[0])},acos:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.acos(p[0])},atan:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.atan(p[0])},sign:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:0<p[0]?1:0>p[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:p=>null==p[0]||null==p[1]?null:p[0]**p[1]},mod:{minParams:2,maxParams:2,evaluate:p=>null==p[0]||null==p[1]?null:p[0]%p[1]},round:{minParams:1,
maxParams:2,evaluate:p=>{const t=p[0];p=2===p.length?10**p[1]:1;return null==t?null:Math.round(t*p)/p}},truncate:{minParams:1,maxParams:2,evaluate:p=>null==p[0]?null:1===p.length?parseInt(p[0].toFixed(0),10):parseFloat(p[0].toFixed(p[1]))},char_length:{minParams:1,maxParams:1,evaluate:p=>"string"===typeof p[0]||p[0]instanceof String?p[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:p=>{let t="";for(let h=0;h<p.length;h++){if(null==p[h])return null;t+=p[h].toString()}return t}},lower:{minParams:1,
maxParams:1,evaluate:p=>null==p[0]?null:p[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:p[0].toString().toUpperCase()}};q.SqlInterval=ia;q.evaluateFunction=function(p,t){const h=ha[p.toLowerCase()];if(null==h)throw Error("Function Not Recognised");if(t.length<h.minParams||t.length>h.maxParams)throw Error(`Invalid Parameter count for call to ${p.toUpperCase()}`);return h.evaluate(t)};q.isStandardized=function(p,t){p=ha[p.toLowerCase()];return null!=p&&t>=p.minParams&&
t<=p.maxParams};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(q,d){var ia={exports:{}};(function(p){(function(t,h){p.exports&&(p.exports=h())})(d.commonjsGlobal,function(){function t(h,H,l,v){this.message=h;this.expected=H;this.found=l;this.location=v;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}(function(h,H){function l(){this.constructor=
h}l.prototype=H.prototype;h.prototype=new l})(t,Error);t.buildMessage=function(h,H){function l(I){return I.charCodeAt(0).toString(16).toUpperCase()}function v(I){return I.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+l(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+l(F)})}function fa(I){return I.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,
"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+l(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+l(F)})}var aa={literal:function(I){return'"'+v(I.text)+'"'},class:function(I){var F="",V;for(V=0;V<I.parts.length;V++)F+=I.parts[V]instanceof Array?fa(I.parts[V][0])+"-"+fa(I.parts[V][1]):fa(I.parts[V]);return"["+(I.inverted?"^":"")+F+"]"},any:function(I){return"any character"},end:function(I){return"end of input"},
other:function(I){return I.description}};return"Expected "+function(I){var F=Array(I.length),V;for(V=0;V<I.length;V++){var e=V;var r=I[V];r=aa[r.type](r);F[e]=r}F.sort();if(0<F.length){for(I=V=1;V<F.length;V++)F[V-1]!==F[V]&&(F[I]=F[V],I++);F.length=I}switch(F.length){case 1:return F[0];case 2:return F[0]+" or "+F[1];default:return F.slice(0,-1).join(", ")+", or "+F[F.length-1]}}(h)+" but "+(H?'"'+v(H)+'"':"end of input")+" found."};return{SyntaxError:t,parse:function(h,H){function l(g,y){return{type:"literal",
text:g,ignoreCase:y}}function v(g,y,x){return{type:"class",parts:g,inverted:y,ignoreCase:x}}function fa(g){var y=fc[g],x;if(!y){for(x=g-1;!fc[x];)x--;y=fc[x];for(y={line:y.line,column:y.column};x<g;)10===h.charCodeAt(x)?(y.line++,y.column=1):y.column++,x++;fc[g]=y}return y}function aa(g,y){var x=fa(g),ba=fa(y);return{start:{offset:g,line:x.line,column:x.column},end:{offset:y,line:ba.line,column:ba.column}}}function I(g){b<ub||(b>ub&&(ub=b,vc=[]),vc.push(g))}function F(){var g=b;var y=oa();if(y!==
a)if(y=e(),y!==a){var x=oa();x!==a?g=y:(b=g,g=a)}else b=g,g=a;else b=g,g=a;return g}function V(){var g=b;var y=e();if(y!==a){var x=[];var ba=b;var ra=oa();if(ra!==a){var Aa=Ea();if(Aa!==a){var Ga=oa();if(Ga!==a){var Ma=e();Ma!==a?ba=ra=[ra,Aa,Ga,Ma]:(b=ba,ba=a)}else b=ba,ba=a}else b=ba,ba=a}else b=ba,ba=a;for(;ba!==a;)x.push(ba),ba=b,ra=oa(),ra!==a?(Aa=Ea(),Aa!==a?(Ga=oa(),Ga!==a?(Ma=e(),Ma!==a?ba=ra=[ra,Aa,Ga,Ma]:(b=ba,ba=a)):(b=ba,ba=a)):(b=ba,ba=a)):(b=ba,ba=a);if(x!==a){g={type:"expr_list"};y=
[y];for(ba=0;ba<x.length;ba++)y.push(x[ba][3]);g.value=y}else b=g,g=a}else b=g,g=a;return g}function e(){var g=b;var y=r();if(y!==a){var x=[];var ba=b;var ra=oa();if(ra!==a){var Aa=u();if(Aa!==a){var Ga=oa();if(Ga!==a){var Ma=r();Ma!==a?ba=ra=[ra,Aa,Ga,Ma]:(b=ba,ba=a)}else b=ba,ba=a}else b=ba,ba=a}else b=ba,ba=a;for(;ba!==a;)x.push(ba),ba=b,ra=oa(),ra!==a?(Aa=u(),Aa!==a?(Ga=oa(),Ga!==a?(Ma=r(),Ma!==a?ba=ra=[ra,Aa,Ga,Ma]:(b=ba,ba=a)):(b=ba,ba=a)):(b=ba,ba=a)):(b=ba,ba=a);x!==a?g=y=ab(y,x):(b=g,g=a)}else b=
g,g=a;return g}function r(){var g=b;var y=K();if(y!==a){var x=[];var ba=b;var ra=oa();if(ra!==a){var Aa=f();if(Aa!==a){var Ga=oa();if(Ga!==a){var Ma=K();Ma!==a?ba=ra=[ra,Aa,Ga,Ma]:(b=ba,ba=a)}else b=ba,ba=a}else b=ba,ba=a}else b=ba,ba=a;for(;ba!==a;)x.push(ba),ba=b,ra=oa(),ra!==a?(Aa=f(),Aa!==a?(Ga=oa(),Ga!==a?(Ma=K(),Ma!==a?ba=ra=[ra,Aa,Ga,Ma]:(b=ba,ba=a)):(b=ba,ba=a)):(b=ba,ba=a)):(b=ba,ba=a);x!==a?g=y=ab(y,x):(b=g,g=a)}else b=g,g=a;return g}function K(){var g=b;var y=T();if(y===a){y=b;if(33===
h.charCodeAt(b)){var x=Qa;b++}else x=a,0===pa&&I(vb);if(x!==a){var ba=b;pa++;if(61===h.charCodeAt(b)){var ra=zb;b++}else ra=a,0===pa&&I(Fb);pa--;ra===a?ba=void 0:(b=ba,ba=a);ba!==a?y=x=[x,ba]:(b=y,y=a)}else b=y,y=a}y!==a?(x=oa(),x!==a?(ba=K(),ba!==a?g=y={type:"unary_expr",operator:"NOT",expr:ba}:(b=g,g=a)):(b=g,g=a)):(b=g,g=a);if(g===a)if(g=b,y=C(),y!==a)if(x=oa(),x!==a){x=[];ba=b;ra=oa();if(ra!==a){var Aa=Y();if(Aa!==a){var Ga=oa();if(Ga!==a){var Ma=C();Ma!==a?ba=ra=[ra,Aa,Ga,Ma]:(b=ba,ba=a)}else b=
ba,ba=a}else b=ba,ba=a}else b=ba,ba=a;if(ba!==a)for(;ba!==a;)x.push(ba),ba=b,ra=oa(),ra!==a?(Aa=Y(),Aa!==a?(Ga=oa(),Ga!==a?(Ma=C(),Ma!==a?ba=ra=[ra,Aa,Ga,Ma]:(b=ba,ba=a)):(b=ba,ba=a)):(b=ba,ba=a)):(b=ba,ba=a);else x=a;x!==a&&(x={type:"arithmetic",tail:x});x===a&&(x=b,ba=G(),ba!==a?(ra=oa(),ra!==a?(ra=za(),ra!==a?(ra=oa(),ra!==a?(ra=V(),ra!==a?(Aa=oa(),Aa!==a?(Aa=Da(),Aa!==a?x=ba={op:ba,right:ra}:(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a),x===a&&(x=b,ba=G(),ba!==a?
(ra=oa(),ra!==a?(ra=za(),ra!==a?(ra=oa(),ra!==a?(ra=Da(),ra!==a?x=ba={op:ba,right:{type:"expr_list",value:[]}}:(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a),x===a&&(x=b,ba=G(),ba!==a?(ra=oa(),ra!==a?(ra=n(),ra!==a?x=ba={op:ba,right:ra}:(b=x,x=a)):(b=x,x=a)):(b=x,x=a))),x===a&&(x=b,ra=T(),ra!==a?(ba=oa(),ba!==a?(ba=L(),ba!==a?(Aa=oa(),Aa!==a?(Aa=C(),Aa!==a?(Ga=oa(),Ga!==a?(Ga=f(),Ga!==a?(ra=oa(),ra!==a?(ra=C(),ra!==a?x=ra={op:"NOT"+ba,right:{type:"expr_list",value:[Aa,ra]}}:(b=x,x=a)):(b=x,
x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a),x===a&&(x=b,ra=L(),ra!==a?(ba=oa(),ba!==a?(ba=C(),ba!==a?(Aa=oa(),Aa!==a?(Aa=f(),Aa!==a?(Ga=oa(),Ga!==a?(Ga=C(),Ga!==a?x=ra={op:ra,right:{type:"expr_list",value:[ba,Ga]}}:(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a)),x===a&&(x=b,ba=c(),ba!==a?(ra=oa(),ra!==a?(ra=T(),ra!==a?(ra=oa(),ra!==a?(ra=C(),ra!==a?x=ba={op:ba+"NOT",right:ra}:(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a),x===
a&&(x=b,ba=c(),ba!==a?(ra=oa(),ra!==a?(ra=C(),ra!==a?x=ba={op:ba,right:ra}:(b=x,x=a)):(b=x,x=a)):(b=x,x=a)),x===a&&(x=b,ba=A(),ba!==a?(ra=oa(),ra!==a?(ra=ka(),ra!==a?(Aa=oa(),Aa!==a?(Aa=b,h.substr(b,6).toLowerCase()===zd?(Ga=h.substr(b,6),b+=6):(Ga=a,0===pa&&I(Ad)),Ga!==a?(Ga=b,pa++,Ma=N(),pa--,Ma===a?Ga=void 0:(b=Ga,Ga=a),Ga!==a?Aa="ESCAPE":(b=Aa,Aa=a)):(b=Aa,Aa=a),Aa!==a?(Aa=oa(),Aa!==a?(Aa=qa(),Aa!==a?x=ba={op:ba,right:ra,escape:Aa.value}:(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):
(b=x,x=a)):(b=x,x=a),x===a&&(x=b,ba=A(),ba!==a?(ra=oa(),ra!==a?(ra=ka(),ra!==a?x=ba={op:ba,right:ra,escape:""}:(b=x,x=a)):(b=x,x=a)):(b=x,x=a))))));x===a&&(x=null);x!==a?(g=y,y=x,""==y||void 0==y||null==y?y=g:(x=null,y=x="arithmetic"==y.type?ab(g,y.tail):eb(y.op,g,y.right,y.escape)),g=y):(b=g,g=a)}else b=g,g=a;else b=g,g=a;return g}function Y(){if(h.substr(b,2)===ec){var g=ec;b+=2}else g=a,0===pa&&I(mb);g===a&&(62===h.charCodeAt(b)?(g=yb,b++):(g=a,0===pa&&I(Ua)),g===a&&(h.substr(b,2)===kb?(g=kb,b+=
2):(g=a,0===pa&&I(tb)),g===a&&(h.substr(b,2)===Oa?(g=Oa,b+=2):(g=a,0===pa&&I(Gb)),g===a&&(60===h.charCodeAt(b)?(g=S,b++):(g=a,0===pa&&I(da)),g===a&&(61===h.charCodeAt(b)?(g=zb,b++):(g=a,0===pa&&I(Fb)),g===a&&(h.substr(b,2)===R?(g=R,b+=2):(g=a,0===pa&&I(la))))))));return g}function A(){var g=g=b;var y=T();if(y!==a){var x=oa();if(x!==a){var ba=k();ba!==a?g=y=[y,x,ba]:(b=g,g=a)}else b=g,g=a}else b=g,g=a;g!==a&&(g=g[0]+" "+g[2]);g===a&&(g=k());return g}function G(){var g=g=b;var y=T();if(y!==a){var x=
oa();if(x!==a){var ba=gb();ba!==a?g=y=[y,x,ba]:(b=g,g=a)}else b=g,g=a}else b=g,g=a;g!==a&&(g=g[0]+" "+g[2]);g===a&&(g=gb());return g}function C(){var g=b;var y=P();if(y!==a){var x=[];var ba=b;var ra=oa();if(ra!==a){var Aa=M();if(Aa!==a){var Ga=oa();if(Ga!==a){var Ma=P();Ma!==a?ba=ra=[ra,Aa,Ga,Ma]:(b=ba,ba=a)}else b=ba,ba=a}else b=ba,ba=a}else b=ba,ba=a;for(;ba!==a;)x.push(ba),ba=b,ra=oa(),ra!==a?(Aa=M(),Aa!==a?(Ga=oa(),Ga!==a?(Ma=P(),Ma!==a?ba=ra=[ra,Aa,Ga,Ma]:(b=ba,ba=a)):(b=ba,ba=a)):(b=ba,ba=a)):
(b=ba,ba=a);x!==a?g=y=ab(y,x):(b=g,g=a)}else b=g,g=a;return g}function M(){if(43===h.charCodeAt(b)){var g=ta;b++}else g=a,0===pa&&I(va);g===a&&(45===h.charCodeAt(b)?(g=Ha,b++):(g=a,0===pa&&I(La)));return g}function P(){var g=b;var y=ja();if(y!==a){var x=[];var ba=b;var ra=oa();if(ra!==a){var Aa=W();if(Aa!==a){var Ga=oa();if(Ga!==a){var Ma=ja();Ma!==a?ba=ra=[ra,Aa,Ga,Ma]:(b=ba,ba=a)}else b=ba,ba=a}else b=ba,ba=a}else b=ba,ba=a;for(;ba!==a;)x.push(ba),ba=b,ra=oa(),ra!==a?(Aa=W(),Aa!==a?(Ga=oa(),Ga!==
a?(Ma=ja(),Ma!==a?ba=ra=[ra,Aa,Ga,Ma]:(b=ba,ba=a)):(b=ba,ba=a)):(b=ba,ba=a)):(b=ba,ba=a);x!==a?g=y=ab(y,x):(b=g,g=a)}else b=g,g=a;return g}function W(){if(42===h.charCodeAt(b)){var g=Za;b++}else g=a,0===pa&&I(Ya);g===a&&(47===h.charCodeAt(b)?(g=Xa,b++):(g=a,0===pa&&I(ib)));return g}function ja(){var g=qa();if(g===a){var y=b;var x=b;var ba=Na();if(ba!==a){var ra=Ta();if(ra!==a){var Aa=Ka();Aa!==a?x=ba=parseFloat(ba+ra+Aa):(b=x,x=a)}else b=x,x=a}else b=x,x=a;x===a&&(x=b,ba=Na(),ba!==a?(ra=Ta(),ra!==
a?x=ba=parseFloat(ba+ra):(b=x,x=a)):(b=x,x=a),x===a&&(x=b,ba=Na(),ba!==a?(ra=Ka(),ra!==a?x=ba=parseFloat(ba+ra):(b=x,x=a)):(b=x,x=a),x===a&&(x=b,ba=Na(),ba!==a&&(ba=parseFloat(ba)),x=ba)));var Ga=x;if(Ga!==a){var Ma=b;pa++;var Bd=E();pa--;Bd===a?Ma=void 0:(b=Ma,Ma=a);Ma!==a?y=Ga={type:"number",value:Ga}:(b=y,y=a)}else b=y,y=a;g=y;if(g===a){var Rb=b;var Hb=b;if(h.substr(b,4).toLowerCase()===Cd){var gc=h.substr(b,4);b+=4}else gc=a,0===pa&&I(Dd);if(gc!==a){var Sb=b;pa++;var Ed=N();pa--;Ed===a?Sb=void 0:
(b=Sb,Sb=a);Sb!==a?Hb=gc=[gc,Sb]:(b=Hb,Hb=a)}else b=Hb,Hb=a;var Cb=Hb;Cb!==a&&(Cb={type:"bool",value:!0});Rb=Cb;if(Rb===a){Rb=b;var Ib=b;if(h.substr(b,5).toLowerCase()===Fd){var hc=h.substr(b,5);b+=5}else hc=a,0===pa&&I(Gd);if(hc!==a){var Tb=b;pa++;var Hd=N();pa--;Hd===a?Tb=void 0:(b=Tb,Tb=a);Tb!==a?Ib=hc=[hc,Tb]:(b=Ib,Ib=a)}else b=Ib,Ib=a;Cb=Ib;Cb!==a&&(Cb={type:"bool",value:!1});Rb=Cb}g=Rb;if(g===a){var Jb=b;if(h.substr(b,4).toLowerCase()===Id){var ic=h.substr(b,4);b+=4}else ic=a,0===pa&&I(Jd);
if(ic!==a){var Ub=b;pa++;var Kd=N();pa--;Kd===a?Ub=void 0:(b=Ub,Ub=a);Ub!==a?Jb=ic=[ic,Ub]:(b=Jb,Jb=a)}else b=Jb,Jb=a;var wc=Jb;wc!==a&&(wc={type:"null",value:null});g=wc;if(g===a){var Ab=b;var Kb=b;if(h.substr(b,4).toLowerCase()===Ld){var xc=h.substr(b,4);b+=4}else xc=a,0===pa&&I(Md);if(xc!==a){var jc=b;pa++;var Nd=N();pa--;Nd===a?jc=void 0:(b=jc,jc=a);jc!==a?Kb=xc="DATE":(b=Kb,Kb=a)}else b=Kb,Kb=a;var Wc=Kb;if(Wc!==a){var Od=oa();if(Od!==a){var Xc=ka();Xc!==a?Ab=Wc={type:"date",value:Xc.value}:
(b=Ab,Ab=a)}else b=Ab,Ab=a}else b=Ab,Ab=a;g=Ab;if(g===a){var Bb=b;var Lb=b;if(h.substr(b,9).toLowerCase()===Pd){var yc=h.substr(b,9);b+=9}else yc=a,0===pa&&I(Qd);if(yc!==a){var kc=b;pa++;var Rd=N();pa--;Rd===a?kc=void 0:(b=kc,kc=a);kc!==a?Lb=yc="TIMESTAMP":(b=Lb,Lb=a)}else b=Lb,Lb=a;var Yc=Lb;if(Yc!==a){var Sd=oa();if(Sd!==a){var Zc=ka();Zc!==a?Bb=Yc={type:"timestamp",value:Zc.value}:(b=Bb,Bb=a)}else b=Bb,Bb=a}else b=Bb,Bb=a;g=Bb;if(g===a){var Va=b;var Vb=X();if(Vb!==a){var zc=oa();if(zc!==a){if(45===
h.charCodeAt(b)){var wb=Ha;b++}else wb=a,0===pa&&I(La);wb===a&&(43===h.charCodeAt(b)?(wb=ta,b++):(wb=a,0===pa&&I(va)));if(wb!==a){var Ac=oa();if(Ac!==a){var Wb=ka();if(Wb!==a){var Td=oa();if(Td!==a){var $c=z();$c!==a?Va=Vb={type:"interval",value:Wb,qualifier:$c,op:wb}:(b=Va,Va=a)}else b=Va,Va=a}else b=Va,Va=a}else b=Va,Va=a}else b=Va,Va=a}else b=Va,Va=a}else b=Va,Va=a;Va===a&&(Va=b,Vb=X(),Vb!==a?(zc=oa(),zc!==a?(wb=ka(),wb!==a?(Ac=oa(),Ac!==a?(Wb=z(),Wb!==a?Va=Vb={type:"interval",value:wb,qualifier:Wb,
op:""}:(b=Va,Va=a)):(b=Va,Va=a)):(b=Va,Va=a)):(b=Va,Va=a)):(b=Va,Va=a));g=Va}}}}}}var Sa=g;if(Sa===a){var cb=b;var Mb=b;if(h.substr(b,7).toLowerCase()===Ud){var Bc=h.substr(b,7);b+=7}else Bc=a,0===pa&&I(Vd);if(Bc!==a){var lc=b;pa++;var Wd=N();pa--;Wd===a?lc=void 0:(b=lc,lc=a);lc!==a?Mb=Bc="EXTRACT":(b=Mb,Mb=a)}else b=Mb,Mb=a;var ad=Mb;if(ad!==a){var Xd=oa();if(Xd!==a){var Yd=za();if(Yd!==a){var Zd=oa();if(Zd!==a){var qb=w();qb===a&&(qb=D(),qb===a&&(qb=U(),qb===a&&(qb=ma(),qb===a&&(qb=na(),qb===a&&
(qb=sa())))));var bd=qb;if(bd!==a){var $d=oa();if($d!==a){var ae=O();if(ae!==a){var be=oa();if(be!==a){var cd=e();if(cd!==a){var ce=oa();if(ce!==a){var de=Da();de!==a?cb=ad={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:bd},cd]}}:(b=cb,cb=a)}else b=cb,cb=a}else b=cb,cb=a}else b=cb,cb=a}else b=cb,cb=a}else b=cb,cb=a}else b=cb,cb=a}else b=cb,cb=a}else b=cb,cb=a}else b=cb,cb=a}else b=cb,cb=a;Sa=cb;if(Sa===a){var $a=b;var Nb=b;if(h.substr(b,9).toLowerCase()===ee){var Cc=
h.substr(b,9);b+=9}else Cc=a,0===pa&&I(fe);if(Cc!==a){var mc=b;pa++;var ge=N();pa--;ge===a?mc=void 0:(b=mc,mc=a);mc!==a?Nb=Cc="SUBSTRING":(b=Nb,Nb=a)}else b=Nb,Nb=a;var dd=Nb;if(dd!==a){var he=oa();if(he!==a){var ie=za();if(ie!==a){var je=oa();if(je!==a){var Dc=e();if(Dc!==a){var ke=oa();if(ke!==a){var le=O();if(le!==a){var me=oa();if(me!==a){var Ec=e();if(Ec!==a){var ne=oa();if(ne!==a){var lb=b;var Ob=b;if(h.substr(b,3).toLowerCase()===oe){var Fc=h.substr(b,3);b+=3}else Fc=a,0===pa&&I(pe);if(Fc!==
a){var nc=b;pa++;var qe=N();pa--;qe===a?nc=void 0:(b=nc,nc=a);nc!==a?Ob=Fc="FOR":(b=Ob,Ob=a)}else b=Ob,Ob=a;var Xb=Ob;if(Xb!==a){var ed=oa();if(ed!==a){var fd=e();if(fd!==a){var gd=oa();gd!==a?lb=Xb=[Xb,ed,fd,gd]:(b=lb,lb=a)}else b=lb,lb=a}else b=lb,lb=a}else b=lb,lb=a;lb===a&&(lb=null);lb!==a?(Xb=Da(),Xb!==a?$a=dd={type:"function",name:"substring",args:{type:"expr_list",value:lb?[Dc,Ec,lb[2]]:[Dc,Ec]}}:(b=$a,$a=a)):(b=$a,$a=a)}else b=$a,$a=a}else b=$a,$a=a}else b=$a,$a=a}else b=$a,$a=a}else b=$a,
$a=a}else b=$a,$a=a}else b=$a,$a=a}else b=$a,$a=a}else b=$a,$a=a}else b=$a,$a=a;Sa=$a;if(Sa===a){var Ja=b;var Yb=ca();if(Yb!==a){var Gc=oa();if(Gc!==a){var Hc=za();if(Hc!==a){var Ic=oa();if(Ic!==a){var rb=m();rb===a&&(rb=null);if(rb!==a){var Jc=oa();if(Jc!==a){var Zb=e();if(Zb!==a){var Kc=oa();if(Kc!==a){var Lc=O();if(Lc!==a){var re=oa();if(re!==a){var hd=e();if(hd!==a){var se=oa();if(se!==a){var te=Da();te!==a?Ja=Yb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==
rb?"BOTH":rb},Zb,hd]}}:(b=Ja,Ja=a)}else b=Ja,Ja=a}else b=Ja,Ja=a}else b=Ja,Ja=a}else b=Ja,Ja=a}else b=Ja,Ja=a}else b=Ja,Ja=a}else b=Ja,Ja=a}else b=Ja,Ja=a}else b=Ja,Ja=a}else b=Ja,Ja=a}else b=Ja,Ja=a}else b=Ja,Ja=a;Ja===a&&(Ja=b,Yb=ca(),Yb!==a?(Gc=oa(),Gc!==a?(Hc=za(),Hc!==a?(Ic=oa(),Ic!==a?(rb=m(),rb===a&&(rb=null),rb!==a?(Jc=oa(),Jc!==a?(Zb=e(),Zb!==a?(Kc=oa(),Kc!==a?(Lc=Da(),Lc!==a?Ja=Yb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==rb?"BOTH":rb},Zb]}}:(b=
Ja,Ja=a)):(b=Ja,Ja=a)):(b=Ja,Ja=a)):(b=Ja,Ja=a)):(b=Ja,Ja=a)):(b=Ja,Ja=a)):(b=Ja,Ja=a)):(b=Ja,Ja=a)):(b=Ja,Ja=a));Sa=Ja;if(Sa===a){var db=b;var Pb=b;if(h.substr(b,8).toLowerCase()===ue){var Mc=h.substr(b,8);b+=8}else Mc=a,0===pa&&I(ve);if(Mc!==a){var oc=b;pa++;var we=N();pa--;we===a?oc=void 0:(b=oc,oc=a);oc!==a?Pb=Mc="POSITION":(b=Pb,Pb=a)}else b=Pb,Pb=a;var id=Pb;if(id!==a){var xe=oa();if(xe!==a){var ye=za();if(ye!==a){var ze=oa();if(ze!==a){var jd=e();if(jd!==a){var Ae=oa();if(Ae!==a){var Be=gb();
if(Be!==a){var Ce=oa();if(Ce!==a){var kd=e();if(kd!==a){var De=oa();if(De!==a){var Ee=Da();Ee!==a?db=id={type:"function",name:"position",args:{type:"expr_list",value:[jd,kd]}}:(b=db,db=a)}else b=db,db=a}else b=db,db=a}else b=db,db=a}else b=db,db=a}else b=db,db=a}else b=db,db=a}else b=db,db=a}else b=db,db=a}else b=db,db=a}else b=db,db=a;Sa=db;if(Sa===a){var jb=b;var $b;var sb=b;sb=$b=B();if(sb===a)if(sb=b,96===h.charCodeAt(b)?($b=ld,b++):($b=a,0===pa&&I(md)),$b!==a){var pc=[];if(nd.test(h.charAt(b))){var xb=
h.charAt(b);b++}else xb=a,0===pa&&I(od);if(xb!==a)for(;xb!==a;)pc.push(xb),nd.test(h.charAt(b))?(xb=h.charAt(b),b++):(xb=a,0===pa&&I(od));else pc=a;pc!==a?(96===h.charCodeAt(b)?(xb=ld,b++):(xb=a,0===pa&&I(md)),xb!==a?sb=$b=pc.join(""):(b=sb,sb=a)):(b=sb,sb=a)}else b=sb,sb=a;var Nc=sb;if(Nc!==a){var Fe=oa();if(Fe!==a){var Ge=za();if(Ge!==a){var He=oa();if(He!==a){var ac=V();ac===a&&(ac=null);if(ac!==a){var Ie=oa();if(Ie!==a){var Je=Da();Je!==a?jb=Nc={type:"function",name:Nc,args:ac?ac:{type:"expr_list",
value:[]}}:(b=jb,jb=a)}else b=jb,jb=a}else b=jb,jb=a}else b=jb,jb=a}else b=jb,jb=a}else b=jb,jb=a}else b=jb,jb=a;Sa=jb;if(Sa===a){var ob;var Pa=b;var bc=ua();if(bc!==a){var Oc=oa();if(Oc!==a){var cc=e();if(cc!==a){var Pc=oa();if(Pc!==a){var Db=[];for(ob=xa();ob!==a;)Db.push(ob),ob=xa();if(Db!==a)if(ob=oa(),ob!==a){var qc=wa();qc!==a?Pa=bc={type:"case_expression",format:"simple",operand:cc,clauses:Db,else:null}:(b=Pa,Pa=a)}else b=Pa,Pa=a;else b=Pa,Pa=a}else b=Pa,Pa=a}else b=Pa,Pa=a}else b=Pa,Pa=a}else b=
Pa,Pa=a;if(Pa===a)if(Pa=b,bc=ua(),bc!==a)if(Oc=oa(),Oc!==a)if(cc=e(),cc!==a)if(Pc=oa(),Pc!==a){Db=[];for(ob=xa();ob!==a;)Db.push(ob),ob=xa();if(Db!==a)if(ob=oa(),ob!==a)if(qc=Ba(),qc!==a){var Ke=oa();if(Ke!==a){var Le=wa();Le!==a?Pa=bc={type:"case_expression",format:"simple",operand:cc,clauses:Db,else:qc.value}:(b=Pa,Pa=a)}else b=Pa,Pa=a}else b=Pa,Pa=a;else b=Pa,Pa=a;else b=Pa,Pa=a}else b=Pa,Pa=a;else b=Pa,Pa=a;else b=Pa,Pa=a;else b=Pa,Pa=a;var Qc=Pa;if(Qc===a){var pb;var Wa=b;var dc=ua();if(dc!==
a){var Rc=oa();if(Rc!==a){var Eb=[];for(pb=ya();pb!==a;)Eb.push(pb),pb=ya();if(Eb!==a)if(pb=oa(),pb!==a){var rc=wa();rc!==a?Wa=dc={type:"case_expression",format:"searched",clauses:Eb,else:null}:(b=Wa,Wa=a)}else b=Wa,Wa=a;else b=Wa,Wa=a}else b=Wa,Wa=a}else b=Wa,Wa=a;if(Wa===a)if(Wa=b,dc=ua(),dc!==a)if(Rc=oa(),Rc!==a){Eb=[];for(pb=ya();pb!==a;)Eb.push(pb),pb=ya();if(Eb!==a)if(pb=oa(),pb!==a)if(rc=Ba(),rc!==a){var Me=oa();if(Me!==a){var Ne=wa();Ne!==a?Wa=dc={type:"case_expression",format:"searched",
clauses:Eb,else:rc.value}:(b=Wa,Wa=a)}else b=Wa,Wa=a}else b=Wa,Wa=a;else b=Wa,Wa=a;else b=Wa,Wa=a}else b=Wa,Wa=a;else b=Wa,Wa=a;Qc=Wa}Sa=Qc;if(Sa===a){var sc;var Qb=b;var pd=E();if(pd!==a){var Sc=[];for(sc=Q();sc!==a;)Sc.push(sc),sc=Q();Sc!==a?Qb=pd+=Sc.join(""):(b=Qb,Qb=a)}else b=Qb,Qb=a;var tc=Qb;if(tc!==a){var Tc=tc;tc=/^CURRENT_DATE$/i.test(Tc)?{type:"current_time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Tc)?{type:"current_time",mode:"timestamp"}:{type:"column_ref",table:"",column:Tc}}Sa=tc;
if(Sa===a&&(Sa=n(),Sa===a)){Sa=b;var qd=za();if(qd!==a){var Oe=oa();if(Oe!==a){var Uc=e();if(Uc!==a){var Pe=oa();if(Pe!==a){var Qe=Da();Qe!==a?(Uc.paren=!0,Sa=qd=Uc):(b=Sa,Sa=a)}else b=Sa,Sa=a}else b=Sa,Sa=a}else b=Sa,Sa=a}else b=Sa,Sa=a}}}}}}}}return Sa}function B(){var g;var y=b;var x=E();if(x!==a){var ba=[];for(g=N();g!==a;)ba.push(g),g=N();ba!==a?y=x+=ba.join(""):(b=y,y=a)}else b=y,y=a;return y}function E(){if(nb.test(h.charAt(b))){var g=h.charAt(b);b++}else g=a,0===pa&&I(Re);return g}function N(){if(Se.test(h.charAt(b))){var g=
h.charAt(b);b++}else g=a,0===pa&&I(Te);return g}function Q(){if(Ue.test(h.charAt(b))){var g=h.charAt(b);b++}else g=a,0===pa&&I(Ve);return g}function n(){var g=b;if(64===h.charCodeAt(b)){var y=We;b++}else y=a,0===pa&&I(Xe);if(y!==a){var x=B();x!==a?g=y=[y,x]:(b=g,g=a)}else b=g,g=a;g!==a&&(g={type:"param",value:g[1]});return g}function m(){var g=b;if(h.substr(b,7).toLowerCase()===Ye){var y=h.substr(b,7);b+=7}else y=a,0===pa&&I(Ze);if(y!==a){y=b;pa++;var x=N();pa--;x===a?y=void 0:(b=y,y=a);y!==a?g="LEADING":
(b=g,g=a)}else b=g,g=a;g===a&&(g=b,h.substr(b,8).toLowerCase()===$e?(y=h.substr(b,8),b+=8):(y=a,0===pa&&I(af)),y!==a?(y=b,pa++,x=N(),pa--,x===a?y=void 0:(b=y,y=a),y!==a?g="TRAILING":(b=g,g=a)):(b=g,g=a),g===a&&(g=b,h.substr(b,4).toLowerCase()===bf?(y=h.substr(b,4),b+=4):(y=a,0===pa&&I(cf)),y!==a?(y=b,pa++,x=N(),pa--,x===a?y=void 0:(b=y,y=a),y!==a?g="BOTH":(b=g,g=a)):(b=g,g=a)));return g}function z(){var g=b;var y=b;var x=J();if(x!==a){var ba=oa();if(ba!==a)if(ba=za(),ba!==a)if(ba=oa(),ba!==a)if(ba=
ea(),ba!==a){var ra=oa();ra!==a?(ra=Da(),ra!==a?y=x={type:"interval-period",period:x.value,precision:ba,secondary:null}:(b=y,y=a)):(b=y,y=a)}else b=y,y=a;else b=y,y=a;else b=y,y=a;else b=y,y=a}else b=y,y=a;y===a&&(y=b,x=J(),x!==a&&(x=rd(x)),y=x);if(y!==a)if(x=oa(),x!==a)if(x=b,h.substr(b,2).toLowerCase()===df?(ba=h.substr(b,2),b+=2):(ba=a,0===pa&&I(ef)),ba!==a?(ba=b,pa++,ra=N(),pa--,ra===a?ba=void 0:(b=ba,ba=a),ba!==a?x="TO":(b=x,x=a)):(b=x,x=a),x!==a)if(x=oa(),x!==a){x=b;ba=J();ba!==a&&(ba={type:"interval-period",
period:ba.value,precision:null,secondary:null});x=ba;if(x===a){x=b;ba=sa();if(ba!==a)if(ba=oa(),ba!==a)if(ba=za(),ba!==a)if(ba=oa(),ba!==a)if(ba=ea(),ba!==a)if(ra=oa(),ra!==a)if(ra=Ea(),ra!==a)if(ra=oa(),ra!==a)if(ra=Z(),ra!==a){var Aa=oa();Aa!==a?(Aa=Da(),Aa!==a?x=ba=sd(ba,ra):(b=x,x=a)):(b=x,x=a)}else b=x,x=a;else b=x,x=a;else b=x,x=a;else b=x,x=a;else b=x,x=a;else b=x,x=a;else b=x,x=a;else b=x,x=a;else b=x,x=a;x===a&&(x=b,ba=sa(),ba!==a?(ba=oa(),ba!==a?(ba=za(),ba!==a?(ba=oa(),ba!==a?(ba=ea(),
ba!==a?(ra=oa(),ra!==a?(ra=Da(),ra!==a?x=ba={type:"interval-period",period:"second",precision:ba,secondary:null}:(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a),x===a&&(x=b,ba=sa(),ba!==a&&(ba={type:"interval-period",period:"second",precision:null,secondary:null}),x=ba))}x!==a?g=y={type:"interval-qualifier",start:y,end:x}:(b=g,g=a)}else b=g,g=a;else b=g,g=a;else b=g,g=a;else b=g,g=a;g===a&&(g=b,x=J(),x!==a?(y=oa(),y!==a?(y=za(),y!==a?(y=oa(),y!==a?(y=Z(),y!==a?(ba=oa(),
ba!==a?(ba=Da(),ba!==a?g=x={type:"interval-period",period:x.value,precision:y,secondary:null}:(b=g,g=a)):(b=g,g=a)):(b=g,g=a)):(b=g,g=a)):(b=g,g=a)):(b=g,g=a)):(b=g,g=a),g===a&&(g=b,x=J(),x!==a&&(x=rd(x)),g=x,g===a&&(g=b,x=sa(),x!==a?(y=oa(),y!==a?(y=za(),y!==a?(y=oa(),y!==a?(y=ea(),y!==a?(ba=oa(),ba!==a?(ba=Ea(),ba!==a?(x=oa(),x!==a?(x=Z(),x!==a?(ba=oa(),ba!==a?(ba=Da(),ba!==a?g=x=sd(y,x):(b=g,g=a)):(b=g,g=a)):(b=g,g=a)):(b=g,g=a)):(b=g,g=a)):(b=g,g=a)):(b=g,g=a)):(b=g,g=a)):(b=g,g=a)):(b=g,g=a)):
(b=g,g=a),g===a&&(g=b,x=sa(),x!==a?(y=oa(),y!==a?(y=za(),y!==a?(y=oa(),y!==a?(y=Z(),y!==a?(ba=oa(),ba!==a?(ba=Da(),ba!==a?g=x={type:"interval-period",period:"second",precision:y,secondary:null}:(b=g,g=a)):(b=g,g=a)):(b=g,g=a)):(b=g,g=a)):(b=g,g=a)):(b=g,g=a)):(b=g,g=a),g===a&&(g=b,x=sa(),x!==a&&(x={type:"interval-period",period:"second",precision:null,secondary:null}),g=x)))));return g}function J(){var g=b;g=U();g!==a&&(g={type:"string",value:"day"});g===a&&(g=b,g=ma(),g!==a&&(g={type:"string",value:"hour"}),
g===a&&(g=b,g=na(),g!==a&&(g={type:"string",value:"minute"}),g===a&&(g=b,g=D(),g!==a&&(g={type:"string",value:"month"}),g===a&&(g=b,g=w(),g!==a&&(g={type:"string",value:"year"})))));return g}function Z(){var g=Ca();g!==a&&(g=parseFloat(g));return g}function ea(){var g=Ca();g!==a&&(g=parseFloat(g));return g}function ka(){var g=qa();g===a&&(g=n());return g}function qa(){var g=b;if(39===h.charCodeAt(b)){var y=td;b++}else y=a,0===pa&&I(ud);y===a&&(h.substr(b,2)===vd?(y=vd,b+=2):(y=a,0===pa&&I(ff)));if(y!==
a){y=[];var x=b;h.substr(b,2)===uc?(x=uc,b+=2):(x=a,0===pa&&I(wd));x!==a&&(x="'");x===a&&(xd.test(h.charAt(b))?(x=h.charAt(b),b++):(x=a,0===pa&&I(yd)));for(;x!==a;)y.push(x),x=b,h.substr(b,2)===uc?(x=uc,b+=2):(x=a,0===pa&&I(wd)),x!==a&&(x="'"),x===a&&(xd.test(h.charAt(b))?(x=h.charAt(b),b++):(x=a,0===pa&&I(yd)));y!==a?(39===h.charCodeAt(b)?(x=td,b++):(x=a,0===pa&&I(ud)),x!==a?g=y={type:"string",value:y.join("")}:(b=g,g=a)):(b=g,g=a)}else b=g,g=a;return g}function ya(){var g=b;var y=Ia();if(y!==a)if(y=
oa(),y!==a)if(y=e(),y!==a){var x=oa();x!==a?(x=Fa(),x!==a?(x=oa(),x!==a?(x=e(),x!==a?g=y={type:"when_clause",operand:y,value:x}:(b=g,g=a)):(b=g,g=a)):(b=g,g=a)):(b=g,g=a)}else b=g,g=a;else b=g,g=a;else b=g,g=a;return g}function xa(){var g=b;var y=Ia();if(y!==a)if(y=oa(),y!==a)if(y=e(),y!==a){var x=oa();x!==a?(x=Fa(),x!==a?(x=oa(),x!==a?(x=e(),x!==a?g=y={type:"when_clause",operand:y,value:x}:(b=g,g=a)):(b=g,g=a)):(b=g,g=a)):(b=g,g=a)}else b=g,g=a;else b=g,g=a;else b=g,g=a;return g}function Ba(){var g=
b;var y=b;if(h.substr(b,4).toLowerCase()===gf){var x=h.substr(b,4);b+=4}else x=a,0===pa&&I(hf);if(x!==a){x=b;pa++;var ba=N();pa--;ba===a?x=void 0:(b=x,x=a);x!==a?y="ELSE":(b=y,y=a)}else b=y,y=a;y!==a?(y=oa(),y!==a?(y=e(),y!==a?g={type:"else_clause",value:y}:(b=g,g=a)):(b=g,g=a)):(b=g,g=a);return g}function Na(){var g=Ca();if(g===a){g=b;if(45===h.charCodeAt(b)){var y=Ha;b++}else y=a,0===pa&&I(La);y===a&&(43===h.charCodeAt(b)?(y=ta,b++):(y=a,0===pa&&I(va)));if(y!==a){var x=Ca();x!==a?g=y=y[0]+x:(b=
g,g=a)}else b=g,g=a}return g}function Ta(){var g=b;if(46===h.charCodeAt(b)){var y=jf;b++}else y=a,0===pa&&I(kf);y!==a?(y=Ca(),y===a&&(y=null),y!==a?g="."+(null!=y?y:""):(b=g,g=a)):(b=g,g=a);return g}function Ka(){var g;var y=g=b;if(lf.test(h.charAt(b))){var x=h.charAt(b);b++}else x=a,0===pa&&I(mf);x!==a?(nf.test(h.charAt(b))?(x=h.charAt(b),b++):(x=a,0===pa&&I(of)),x===a&&(x=null),x!==a?y="e"+(null===x?"":x):(b=y,y=a)):(b=y,y=a);y!==a?(x=Ca(),x!==a?g=y+x:(b=g,g=a)):(b=g,g=a);return g}function Ca(){var g=
[];var y=Ra();if(y!==a)for(;y!==a;)g.push(y),y=Ra();else g=a;g!==a&&(g=g.join(""));return g}function Ra(){if(pf.test(h.charAt(b))){var g=h.charAt(b);b++}else g=a,0===pa&&I(qf);return g}function gb(){var g=b;if(h.substr(b,2).toLowerCase()===rf){var y=h.substr(b,2);b+=2}else y=a,0===pa&&I(sf);if(y!==a){y=b;pa++;var x=N();pa--;x===a?y=void 0:(b=y,y=a);y!==a?g="IN":(b=g,g=a)}else b=g,g=a;return g}function c(){var g=b;if(h.substr(b,2).toLowerCase()===tf){var y=h.substr(b,2);b+=2}else y=a,0===pa&&I(uf);
if(y!==a){y=b;pa++;var x=N();pa--;x===a?y=void 0:(b=y,y=a);y!==a?g="IS":(b=g,g=a)}else b=g,g=a;return g}function k(){var g=b;if(h.substr(b,4).toLowerCase()===vf){var y=h.substr(b,4);b+=4}else y=a,0===pa&&I(wf);if(y!==a){y=b;pa++;var x=N();pa--;x===a?y=void 0:(b=y,y=a);y!==a?g="LIKE":(b=g,g=a)}else b=g,g=a;return g}function T(){var g=b;if(h.substr(b,3).toLowerCase()===xf){var y=h.substr(b,3);b+=3}else y=a,0===pa&&I(yf);if(y!==a){y=b;pa++;var x=N();pa--;x===a?y=void 0:(b=y,y=a);y!==a?g="NOT":(b=g,g=
a)}else b=g,g=a;return g}function f(){var g=b;if(h.substr(b,3).toLowerCase()===zf){var y=h.substr(b,3);b+=3}else y=a,0===pa&&I(Af);if(y!==a){y=b;pa++;var x=N();pa--;x===a?y=void 0:(b=y,y=a);y!==a?g="AND":(b=g,g=a)}else b=g,g=a;return g}function u(){var g=b;if(h.substr(b,2).toLowerCase()===Bf){var y=h.substr(b,2);b+=2}else y=a,0===pa&&I(Cf);if(y!==a){y=b;pa++;var x=N();pa--;x===a?y=void 0:(b=y,y=a);y!==a?g="OR":(b=g,g=a)}else b=g,g=a;return g}function L(){var g=b;if(h.substr(b,7).toLowerCase()===Df){var y=
h.substr(b,7);b+=7}else y=a,0===pa&&I(Ef);if(y!==a){y=b;pa++;var x=N();pa--;x===a?y=void 0:(b=y,y=a);y!==a?g="BETWEEN":(b=g,g=a)}else b=g,g=a;return g}function O(){var g=b;if(h.substr(b,4).toLowerCase()===Ff){var y=h.substr(b,4);b+=4}else y=a,0===pa&&I(Gf);if(y!==a){y=b;pa++;var x=N();pa--;x===a?y=void 0:(b=y,y=a);y!==a?g="FROM":(b=g,g=a)}else b=g,g=a;return g}function ca(){var g=b;if(h.substr(b,4).toLowerCase()===Hf){var y=h.substr(b,4);b+=4}else y=a,0===pa&&I(If);if(y!==a){y=b;pa++;var x=N();pa--;
x===a?y=void 0:(b=y,y=a);y!==a?g="TRIM":(b=g,g=a)}else b=g,g=a;return g}function X(){var g=b;if(h.substr(b,8).toLowerCase()===Jf){var y=h.substr(b,8);b+=8}else y=a,0===pa&&I(Kf);if(y!==a){y=b;pa++;var x=N();pa--;x===a?y=void 0:(b=y,y=a);y!==a?g="INTERVAL":(b=g,g=a)}else b=g,g=a;return g}function w(){var g=b;if(h.substr(b,4).toLowerCase()===Lf){var y=h.substr(b,4);b+=4}else y=a,0===pa&&I(Mf);if(y!==a){y=b;pa++;var x=N();pa--;x===a?y=void 0:(b=y,y=a);y!==a?g="YEAR":(b=g,g=a)}else b=g,g=a;return g}function D(){var g=
b;if(h.substr(b,5).toLowerCase()===Nf){var y=h.substr(b,5);b+=5}else y=a,0===pa&&I(Of);if(y!==a){y=b;pa++;var x=N();pa--;x===a?y=void 0:(b=y,y=a);y!==a?g="MONTH":(b=g,g=a)}else b=g,g=a;return g}function U(){var g=b;if(h.substr(b,3).toLowerCase()===Pf){var y=h.substr(b,3);b+=3}else y=a,0===pa&&I(Qf);if(y!==a){y=b;pa++;var x=N();pa--;x===a?y=void 0:(b=y,y=a);y!==a?g="DAY":(b=g,g=a)}else b=g,g=a;return g}function ma(){var g=b;if(h.substr(b,4).toLowerCase()===Rf){var y=h.substr(b,4);b+=4}else y=a,0===
pa&&I(Sf);if(y!==a){y=b;pa++;var x=N();pa--;x===a?y=void 0:(b=y,y=a);y!==a?g="HOUR":(b=g,g=a)}else b=g,g=a;return g}function na(){var g=b;if(h.substr(b,6).toLowerCase()===Tf){var y=h.substr(b,6);b+=6}else y=a,0===pa&&I(Uf);if(y!==a){y=b;pa++;var x=N();pa--;x===a?y=void 0:(b=y,y=a);y!==a?g="MINUTE":(b=g,g=a)}else b=g,g=a;return g}function sa(){var g=b;if(h.substr(b,6).toLowerCase()===Vf){var y=h.substr(b,6);b+=6}else y=a,0===pa&&I(Wf);if(y!==a){y=b;pa++;var x=N();pa--;x===a?y=void 0:(b=y,y=a);y!==
a?g="SECOND":(b=g,g=a)}else b=g,g=a;return g}function ua(){var g=b;if(h.substr(b,4).toLowerCase()===Xf){var y=h.substr(b,4);b+=4}else y=a,0===pa&&I(Yf);if(y!==a){y=b;pa++;var x=N();pa--;x===a?y=void 0:(b=y,y=a);y!==a?g="CASE":(b=g,g=a)}else b=g,g=a;return g}function wa(){var g=b;if(h.substr(b,3).toLowerCase()===Zf){var y=h.substr(b,3);b+=3}else y=a,0===pa&&I($f);if(y!==a){y=b;pa++;var x=N();pa--;x===a?y=void 0:(b=y,y=a);y!==a?g="END":(b=g,g=a)}else b=g,g=a;return g}function Ia(){var g=b;if(h.substr(b,
4).toLowerCase()===ag){var y=h.substr(b,4);b+=4}else y=a,0===pa&&I(bg);if(y!==a){y=b;pa++;var x=N();pa--;x===a?y=void 0:(b=y,y=a);y!==a?g="WHEN":(b=g,g=a)}else b=g,g=a;return g}function Fa(){var g=b;if(h.substr(b,4).toLowerCase()===cg){var y=h.substr(b,4);b+=4}else y=a,0===pa&&I(dg);if(y!==a){y=b;pa++;var x=N();pa--;x===a?y=void 0:(b=y,y=a);y!==a?g="THEN":(b=g,g=a)}else b=g,g=a;return g}function Ea(){if(44===h.charCodeAt(b)){var g=eg;b++}else g=a,0===pa&&I(fg);return g}function za(){if(40===h.charCodeAt(b)){var g=
gg;b++}else g=a,0===pa&&I(hg);return g}function Da(){if(41===h.charCodeAt(b)){var g=ig;b++}else g=a,0===pa&&I(jg);return g}function oa(){var g;var y=[];for(g=bb();g!==a;)y.push(g),g=bb();return y}function bb(){if(kg.test(h.charAt(b))){var g=h.charAt(b);b++}else g=a,0===pa&&I(lg);return g}function eb(g,y,x,ba){g={type:"binary_expr",operator:g,left:y,right:x};void 0!==ba&&(g.escape=ba);return g}function ab(g,y){for(var x=0;x<y.length;x++)g=eb(y[x][1],g,y[x][3]);return g}H=void 0!==H?H:{};var a={},hb=
{start:F},fb=F,Qa="!",vb=l("!",!1),zb="\x3d",Fb=l("\x3d",!1),ec="\x3e\x3d",mb=l("\x3e\x3d",!1),yb="\x3e",Ua=l("\x3e",!1),kb="\x3c\x3d",tb=l("\x3c\x3d",!1),Oa="\x3c\x3e",Gb=l("\x3c\x3e",!1),S="\x3c",da=l("\x3c",!1),R="!\x3d",la=l("!\x3d",!1),ta="+",va=l("+",!1),Ha="-",La=l("-",!1),Za="*",Ya=l("*",!1),Xa="/",ib=l("/",!1),nb=/^[A-Za-z_\x80-\uFFFF]/,Re=v([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Se=/^[A-Za-z0-9_]/,Te=v([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Ue=/^[A-Za-z0-9_.\x80-\uFFFF]/,
Ve=v([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),We="@",Xe=l("@",!1),rd=function(g){return{type:"interval-period",period:g.value,precision:null,secondary:null}},sd=function(g,y){return{type:"interval-period",period:"second",precision:g,secondary:y}},td="'",ud=l("'",!1),vd="N'",ff=l("N'",!1),uc="''",wd=l("''",!1),xd=/^[^']/,yd=v(["'"],!0,!1),jf=".",kf=l(".",!1),pf=/^[0-9]/,qf=v([["0","9"]],!1,!1),lf=/^[eE]/,mf=v(["e","E"],!1,!1),nf=/^[+\-]/,of=v(["+","-"],!1,!1),Id="null",Jd=
l("NULL",!0),Cd="true",Dd=l("TRUE",!0),Fd="false",Gd=l("FALSE",!0),rf="in",sf=l("IN",!0),tf="is",uf=l("IS",!0),vf="like",wf=l("LIKE",!0),zd="escape",Ad=l("ESCAPE",!0),xf="not",yf=l("NOT",!0),zf="and",Af=l("AND",!0),Bf="or",Cf=l("OR",!0),Df="between",Ef=l("BETWEEN",!0),Ff="from",Gf=l("FROM",!0),oe="for",pe=l("FOR",!0),ee="substring",fe=l("SUBSTRING",!0),Ud="extract",Vd=l("EXTRACT",!0),Hf="trim",If=l("TRIM",!0),ue="position",ve=l("POSITION",!0),Pd="timestamp",Qd=l("TIMESTAMP",!0),Ld="date",Md=l("DATE",
!0),Ye="leading",Ze=l("LEADING",!0),$e="trailing",af=l("TRAILING",!0),bf="both",cf=l("BOTH",!0),df="to",ef=l("TO",!0),Jf="interval",Kf=l("INTERVAL",!0),Lf="year",Mf=l("YEAR",!0),Nf="month",Of=l("MONTH",!0),Pf="day",Qf=l("DAY",!0),Rf="hour",Sf=l("HOUR",!0),Tf="minute",Uf=l("MINUTE",!0),Vf="second",Wf=l("SECOND",!0),Xf="case",Yf=l("CASE",!0),Zf="end",$f=l("END",!0),ag="when",bg=l("WHEN",!0),cg="then",dg=l("THEN",!0),gf="else",hf=l("ELSE",!0),eg=",",fg=l(",",!1),gg="(",hg=l("(",!1),ig=")",jg=l(")",!1),
kg=/^[ \t\n\r]/,lg=v([" ","\t","\n","\r"],!1,!1),ld="`",md=l("`",!1),nd=/^[^`]/,od=v(["`"],!0,!1),b=0,fc=[{line:1,column:1}],ub=0,vc=[],pa=0;if("startRule"in H){if(!(H.startRule in hb))throw Error("Can't start parsing from rule \""+H.startRule+'".');fb=hb[H.startRule]}var Vc=fb();if(Vc!==a&&b===h.length)return Vc;Vc!==a&&b<h.length&&I({type:"end"});throw function(g,y,x){return new t(t.buildMessage(g,y),g,y,x)}(vc,ub<h.length?h.charAt(ub):null,ub<h.length?aa(ub,ub+1):aa(ub,ub));}}})})(ia);let ha=function(){function p(){}
p.parse=function(t){return ia.exports.parse(t)};return p}();q.WhereGrammar=ha;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(q){q.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};q.commonjsRequire=function(d){throw Error('Could not dynamically require "'+d+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');
};q.getDefaultExportFromCjs=function(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d["default"]:d}})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(q){q.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,
supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./AttributesBuilder ./attributeSupport ./projectionSupport ./timeSupport ./utils ../../support/fieldUtils ../../../smartMapping/statistics/support/utils ../../../support/arcadeOnDemand".split(" "),
function(q,d,ia,ha,p,t,h,H,l,v,fa,aa,I){function F(K){return K.substr(24,12)+K.substr(19,4)+K.substr(16,2)+K.substr(14,2)+K.substr(11,2)+K.substr(9,2)+K.substr(6,2)+K.substr(4,2)+K.substr(2,2)+K.substr(0,2)}function V(K,Y,A,G){if(A&&"esriFieldTypeDate"===A.type){const C=(new Date(K)).getTime(),M=(new Date(Y)).getTime();if(!isNaN(C)&&!isNaN(M))return G?M-C:C-M}return"number"===typeof K&&"number"===typeof Y?G?Y-K:K-Y:"string"===typeof K&&"string"===typeof Y?(K=K.toUpperCase(),Y=Y.toUpperCase(),!A||
"esriFieldTypeGUID"!==A.type&&"esriFieldTypeGlobalID"!==A.type?G=(G?K>Y:K<Y)?-1:(G?K<Y:K>Y)?1:0:(A=F(K),Y=F(Y),G=(G?A>Y:A<Y)?-1:(G?A<Y:A>Y)?1:0),G):G?1:-1}function e(K,Y,A,G,C,M){C-=A;M-=G;K=Math.min(1,Math.max(0,((K-A)*C+(Y-G)*M)/(C*C+M*M)));return{x:A+C*K,y:G+M*K}}function r(K,Y){return K?Y?4:3:Y?3:2}return function(){function K(A,G,C){this.items=A;this.queryGeometry=G;this.definitionExpression=C.definitionExpression;this.geometryType=C.geometryType;this.hasM=C.hasM;this.hasZ=C.hasZ;this.objectIdField=
C.objectIdField;this.spatialReference=C.spatialReference;this.fieldsIndex=C.fieldsIndex;this.timeInfo=C.timeInfo;this.featureAdapter=C.featureAdapter;this.aggregateAdapter=C.aggregateAdapter}var Y=K.prototype;Y.createQueryResponseForCount=function(A){const G=new t(A,this.featureAdapter,this.fieldsIndex);if(!A.outStatistics)return G.countDistinctValues(this.items);const {groupByFieldsForStatistics:C,having:M}=A;if(null==C||!C.length)return 1;const P=new Map,W=new Map,ja=new Set;A=A.outStatistics;for(const E of A){({statisticType:A}=
E);A="exceedslimit"!==A?E.onStatisticField:void 0;if(!W.has(A)){var B=[];for(const N of C){const Q=this._getAttributeValues(G,N,P);B.push(Q)}W.set(A,this._calculateUniqueValues(B,G.returnDistinctValues))}A=W.get(A);for(const N in A){const {data:Q,items:n}=A[N];B=Q.join(",");M&&!G.validateItems(n,M)||ja.add(B)}}return ja.size};Y.createQueryResponse=function(A){let G;G=A.outStatistics?A.outStatistics.some(C=>"exceedslimit"===C.statisticType)?this._createExceedsLimitQueryResponse(A):this._createStatisticsQueryResponse(A):
this._createFeatureQueryResponse(A);A.returnQueryGeometry&&(ha.isValid(A.outSR)&&!ha.equals(this.queryGeometry.spatialReference,A.outSR)?G.queryGeometry=v.cleanFromGeometryEngine({spatialReference:A.outSR,...H.project(this.queryGeometry,this.queryGeometry.spatialReference,A.outSR)}):G.queryGeometry=v.cleanFromGeometryEngine({spatialReference:A.outSR,...this.queryGeometry}));return G};Y.createSnappingResponse=function(A,G){const C=this.featureAdapter,M=r(this.hasZ,this.hasM),{x:P,y:W}=A.point,ja="number"===
typeof A.distance?A.distance:A.distance.x,B="number"===typeof A.distance?A.distance:A.distance.y,E={candidates:[]},N="esriGeometryPolygon"===this.geometryType;G=this.getPointCreator(A.point,this.spatialReference,G);for(const ka of this.items){var Q=C.getGeometry(ka);if(d.isNone(Q))continue;const {coords:qa,lengths:ya}=Q;if(A.types&1){Q=0;for(var n=0;n<ya.length;n++){var m=ya[n];for(var z=0;z<m;z++,Q+=M){var J=qa[Q],Z=qa[Q+1];if(z!==m-1){const xa=qa[Q+M],Ba=qa[Q+M+1],{x:Na,y:Ta}=e(P,W,J,Z,xa,Ba);var ea=
(P-Na)/ja;const Ka=(W-Ta)/B;ea=ea*ea+Ka*Ka;1>=ea&&E.candidates.push({type:"edge",objectId:C.getObjectId(ka),distance:Math.sqrt(ea),target:G(Na,Ta),start:G(J,Z),end:G(xa,Ba)})}}}}if(A.types&2)for(Q=N?qa.length-M:qa.length,n=0;n<Q;n+=M)m=qa[n],z=qa[n+1],J=(P-m)/ja,Z=(W-z)/B,J=J*J+Z*Z,1>=J&&E.candidates.push({type:"vertex",objectId:C.getObjectId(ka),distance:Math.sqrt(J),target:G(m,z)})}E.candidates.sort((ka,qa)=>ka.distance-qa.distance);return E};Y.getPointCreator=function(A,G,C){const M=d.isSome(C)&&
!ha.equals(G,C)?P=>H.project(P,G,C):P=>P;return null!=A.z&&null!=A.m?(P,W)=>M({x:P,y:W,z:A.z,m:A.m}):null!=A.z?(P,W)=>M({x:P,y:W,z:A.z}):null!=A.m?(P,W)=>M({x:P,y:W,m:A.m}):(P,W)=>M({x:P,y:W})};Y.executeAttributesQuery=function(A){var G=h.getWhereClause(A.where,this.fieldsIndex);if(!G)return Promise.resolve(this);if(G.isStandardized){let C=0;const M=[];for(const P of this.items)G.testFeature(P,this.featureAdapter)&&(M[C++]=P);G=new K(M,this.queryGeometry,this);G.definitionExpression=A.where;return Promise.resolve(G)}return Promise.reject(new TypeError("Where clause is not standardized"))};
Y.executeAggregateIdsQuery=function(A){if(!A.aggregateIds||!A.aggregateIds.length||d.isNone(this.aggregateAdapter))return Promise.resolve(this);const G=new Set;for(const M of A.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(M).forEach(P=>G.add(P));const C=this.featureAdapter.getObjectId;return Promise.resolve(new K(this.items.filter(M=>G.has(C(M))),this.queryGeometry,this))};Y.executeObjectIdsQuery=function(A){if(!A.objectIds||!A.objectIds.length)return Promise.resolve(this);const G=new Set(A.objectIds),
C=this.featureAdapter.getObjectId;return Promise.resolve(new K(this.items.filter(M=>G.has(C(M))),this.queryGeometry,this))};Y.executeTimeQuery=function(A){A=l.getTimeOperator(this.timeInfo,A.timeExtent,this.featureAdapter);if(!d.isSome(A))return Promise.resolve(this);A=this.items.filter(A);return Promise.resolve(new K(A,this.queryGeometry,this))};Y.filterLatest=function(){const {trackIdField:A,startTimeField:G,endTimeField:C}=this.timeInfo;var M=C||G;const P=new Map,W=this.featureAdapter.getAttribute;
for(const ja of this.items){const B=W(ja,A),E=W(ja,M),N=P.get(B);(!N||E>W(N,M))&&P.set(B,ja)}M=Array.from(P.values());return Promise.resolve(new K(M,this.queryGeometry,this))};Y.project=function(){var A=q._asyncToGenerator(function*(G){if(!G||ha.equals(this.spatialReference,G))return this;const C=this.featureAdapter,M=(yield H.projectMany(this.items.map(P=>v.getGeometry(this.geometryType,this.hasZ,this.hasM,C.getGeometry(P))),this.spatialReference,G)).map((P,W)=>C.cloneWithGeometry(this.items[W],
p.convertFromGeometry(P,this.hasZ,this.hasM)));return new K(M,this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:G,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})});return function(G){return A.apply(this,arguments)}}();Y.createSummaryStatisticsResponse=function(){var A=q._asyncToGenerator(function*(G,C){const {field:M,normalizationField:P,
normalizationType:W,normalizationTotal:ja,minValue:B,maxValue:E}=C;var N=new t(G,this.featureAdapter,this.fieldsIndex);G=this.fieldsIndex.isDateField(M);C=C.valueExpression?yield this._getAttributeExpressionValues(N,C.valueExpression,C.viewInfoParams):this._getAttributeNormalizedValues(N,{field:M,normalizationField:P,normalizationType:W,normalizationTotal:ja});N=aa.isNullCountSupported({normalizationType:W,normalizationField:P,minValue:B,maxValue:E});C=fa.isStringField(this.fieldsIndex.get(M))?aa.calculateStringStatistics({values:C,
supportsNullCount:N}):aa.calculateStatistics({values:C,minValue:B,maxValue:E,useSampleStdDev:!W,supportsNullCount:N});return aa.processStatsResult(C,G)});return function(G,C){return A.apply(this,arguments)}}();Y._sortFeatures=function(A,G,C){if(1<A.length&&G&&G.length)for(const M of G.reverse()){G=M.split(" ");const P=G[0],W=this.fieldsIndex.get(P),ja=G[1]&&"desc"===G[1].toLowerCase();A.sort((B,E)=>{B=C(B,P,W);E=C(E,P,W);return V(B,E,W,ja)})}};Y._createFeatureQueryResponse=function(A){const G=this.items,
{geometryType:C,hasM:M,hasZ:P,objectIdField:W,spatialReference:ja}=this,{outFields:B,outSR:E,quantizationParameters:N,resultRecordCount:Q,resultOffset:n,returnZ:m,returnM:z}=A,J=null!=Q?G.length>(n||0)+Q:!1,Z=B&&(-1<B.indexOf("*")?[...this.fieldsIndex.fields]:B.map(ea=>this.fieldsIndex.get(ea)));return{exceededTransferLimit:J,features:this._createFeatures(A,G),fields:Z,geometryType:C,hasM:M&&z,hasZ:P&&m,objectIdFieldName:W,spatialReference:v.cleanFromGeometryEngine(E?E:ja),transform:N&&ia.toQuantizationTransform(N)||
null}};Y._createFeatures=function(A,G){const C=new t(A,this.featureAdapter,this.fieldsIndex),{hasM:M,hasZ:P}=this,{orderByFields:W,quantizationParameters:ja,returnGeometry:B,returnCentroid:E,maxAllowableOffset:N,resultOffset:Q,resultRecordCount:n,returnZ:m=!1,returnM:z=!1}=A,J=P&&m,Z=M&&z;A=[];var ea=0;G=[...G];this._sortFeatures(G,W,(ya,xa,Ba)=>C.getFieldValue(ya,xa,Ba));if(B||E){var ka=ia.toQuantizationTransform(ja);if(B&&!E)for(var qa of G)A[ea++]={attributes:C.getAttributes(qa),geometry:v.getGeometry(this.geometryType,
this.hasZ,this.hasM,this.featureAdapter.getGeometry(qa),N,ka,J,Z)};else if(!B&&E)for(const ya of G)A[ea++]={attributes:C.getAttributes(ya),centroid:v.transformCentroid(this,this.featureAdapter.getCentroid(ya,this),ka)};else for(const ya of G)A[ea++]={attributes:C.getAttributes(ya),centroid:v.transformCentroid(this,this.featureAdapter.getCentroid(ya,this),ka),geometry:v.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(ya),N,ka,J,Z)}}else for(ka of G)(qa=C.getAttributes(ka))&&
(A[ea++]={attributes:qa});ea=Q||0;null!=n&&(A=A.slice(ea,Math.min(A.length,ea+n)));return A};Y._createExceedsLimitQueryResponse=function(A){var G=!1;let C=Number.POSITIVE_INFINITY,M=Number.POSITIVE_INFINITY;G=Number.POSITIVE_INFINITY;for(const P of A.outStatistics)if("exceedslimit"===P.statisticType){C=null!=P.maxPointCount?P.maxPointCount:Number.POSITIVE_INFINITY;M=null!=P.maxRecordCount?P.maxRecordCount:Number.POSITIVE_INFINITY;G=null!=P.maxVertexCount?P.maxVertexCount:Number.POSITIVE_INFINITY;
break}if("esriGeometryPoint"===this.geometryType)G=this.items.length>C;else if(this.items.length>M)G=!0;else{A=this.hasZ?this.hasM?4:3:this.hasM?3:2;const P=this.featureAdapter;G=this.items.reduce((W,ja)=>{ja=P.getGeometry(ja);return W+(d.isSome(ja)&&ja.coords.length||0)},0)/A>G}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(G)}}]}};Y._createStatisticsQueryResponse=
function(A){var G={attributes:{}};const C=[],M=new Map,P=new Map,W=new Map,ja=new Map,B=new t(A,this.featureAdapter,this.fieldsIndex);var E=A.outStatistics;const {groupByFieldsForStatistics:N,having:Q,orderByFields:n}=A;A=N&&N.length;const m=!!A,z=m&&N[0],J=m&&!this.fieldsIndex.get(z);for(const ya of E){const {outStatisticFieldName:xa,statisticType:Ba}=ya;E=ya;var Z="exceedslimit"!==Ba?ya.onStatisticField:void 0;const Na="percentile_disc"===Ba||"percentile_cont"===Ba,Ta=m&&1===A&&(Z===z||J)&&"count"===
Ba;if(m){if(!W.has(Z)){var ea=[];for(const Ka of N){var ka=this._getAttributeValues(B,Ka,M);ea.push(ka)}W.set(Z,this._calculateUniqueValues(ea,B.returnDistinctValues))}ea=W.get(Z);for(const Ka in ea){const {count:Ca,data:Ra,items:gb,itemPositions:c}=ea[Ka];ka=Ra.join(",");if(!Q||B.validateItems(gb,Q)){const k=ja.get(ka)||{attributes:{}};var qa=null;if(Ta)qa=Ca;else{const T=this._getAttributeValues(B,Z,M);qa=c.map(f=>T[f]);qa=Na&&"statisticParameters"in E?this._getPercentileValue(E,qa):this._getStatisticValue(E,
qa,null,B.returnDistinctValues)}k.attributes[xa]=qa;N.forEach((T,f)=>k.attributes[this.fieldsIndex.get(T)?T:`EXPR_${f+1}`]=Ra[f]);ja.set(ka,k)}}}else Z=this._getAttributeValues(B,Z,M),G.attributes[xa]=Na&&"statisticParameters"in E?this._getPercentileValue(E,Z):this._getStatisticValue(E,Z,P,B.returnDistinctValues);C.push({name:xa,alias:xa,type:"esriFieldTypeDouble"})}G=m?Array.from(ja.values()):[G];this._sortFeatures(G,n,(ya,xa)=>ya.attributes[xa]);return{fields:C,features:G}};Y._getStatisticValue=
function(A,G,C,M){const {onStatisticField:P,statisticType:W}=A;A=null;A=null!=C&&C.has(P)?C.get(P):fa.isStringField(this.fieldsIndex.get(P))?aa.calculateStringStatistics({values:G,returnDistinct:M}):aa.calculateStatistics({values:G,minValue:null,maxValue:null,useSampleStdDev:!0});C&&C.set(P,A);return A["var"===W?"variance":W]};Y._getPercentileValue=function(A,G){const {onStatisticField:C,statisticParameters:M,statisticType:P}=A,{value:W,orderBy:ja}=M,B="desc"===ja,E=this.fieldsIndex.get(C);A=[...G].filter(N=>
null!=N).sort((N,Q)=>V(N,Q,E,B));return this._calculatePercentile(A,W,"percentile_disc"===P)};Y._getAttributeValues=function(A,G,C){if(C.has(G))return C.get(G);const M=this.fieldsIndex.get(G),P=this.items.map(W=>A.getFieldValue(W,G,M));C.set(G,P);return P};Y._getAttributeNormalizedValues=function(A,G){return this.items.map(C=>A.getNormalizedValue(C,{field:G.field,fieldInfo:this.fieldsIndex.get(G.field),normalizationField:G.normalizationField,normalizationFieldInfo:this.fieldsIndex.get(G.normalizationField),
normalizationType:G.normalizationType,normalizationTotal:G.normalizationTotal}))};Y._getAttributeExpressionValues=function(){var A=q._asyncToGenerator(function*(G,C,M){const {arcadeUtils:P}=yield I.loadArcade(),W=P.createFunction(C),ja=M&&P.getViewInfo(M);return this.items.map(B=>G.getExpressionValue(B,{compiledFunc:W,viewInfo:ja},P))});return function(G,C,M){return A.apply(this,arguments)}}();Y._calculateUniqueValues=function(A,G){const C={},M=this.items,P=M.length;for(let W=0;W<P;W++){const ja=
M[W],B=[];for(const N of A)B.push(N[W]);const E=B.join(",");G?null==C[E]&&(C[E]={count:1,data:B,items:[ja],itemPositions:[W]}):null==C[E]?C[E]={count:1,data:B,items:[ja],itemPositions:[W]}:(C[E].count++,C[E].items.push(ja),C[E].itemPositions.push(W))}return C};Y._calculatePercentile=function(A,G,C){if(0===A.length)return null;if(0>=G)return A[0];if(1<=G)return A[A.length-1];var M=(A.length-1)*G,P=Math.floor(M);G=P+1;M%=1;P=A[P];const W=A[G];return G>=A.length||C||"string"===typeof P||"string"===typeof W?
P:P*(1-M)+W*M};q._createClass(K,[{key:"size",get:function(){return this.items.length}}]);return K}()})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe","./jsonUtils"],function(q,d,ia){function ha({scale:B,translate:E},N){return Math.round((N-E[0])/B[0])}function p({scale:B,translate:E},N){return Math.round((E[1]-N)/B[1])}function t(B,E,N){const Q=[];let n,m,z,J;for(let Z=0;Z<N.length;Z++){const ea=N[Z];if(0<Z){if(z=ha(B,ea[0]),J=p(B,ea[1]),z!==n||J!==m)Q.push(E(ea,
z-n,J-m)),n=z,m=J}else n=ha(B,ea[0]),m=p(B,ea[1]),Q.push(E(ea,n,m))}return 0<Q.length?Q:null}function h(B,E,N,Q){return t(B,N?Q?ja:W:Q?W:P,E)}function H(B,E,N,Q){const n=[];N=N?Q?ja:W:Q?W:P;for(Q=0;Q<E.length;Q++){const m=t(B,N,E[Q]);m&&3<=m.length&&n.push(m)}return n.length?n:null}function l(B,E,N,Q){const n=[];N=N?Q?ja:W:Q?W:P;for(Q=0;Q<E.length;Q++){const m=t(B,N,E[Q]);m&&2<=m.length&&n.push(m)}return n.length?n:null}function v({scale:B,translate:E},N){return N*B[0]+E[0]}function fa({scale:B,translate:E},
N){return E[1]-N*B[1]}function aa(B,E,N){const Q=Array(N.length);if(!N.length)return Q;const [n,m]=B.scale;let z=v(B,N[0][0]);B=fa(B,N[0][1]);Q[0]=E(N[0],z,B);for(let J=1;J<N.length;J++){const Z=N[J];z+=Z[0]*n;B-=Z[1]*m;Q[J]=E(Z,z,B)}return Q}function I(B,E,N){const Q=Array(N.length);for(let n=0;n<N.length;n++)Q[n]=aa(B,E,N[n]);return Q}function F(B,E,N,Q){return aa(B,N?Q?ja:W:Q?W:P,E)}function V(B,E,N,Q){return I(B,N?Q?ja:W:Q?W:P,E)}function e(B,E,N,Q){return I(B,N?Q?ja:W:Q?W:P,E)}function r(B,E,
N){let [Q,n]=N[0],m=Math.min(Q,E[0]),z=Math.min(n,E[1]),J=Math.max(Q,E[2]);E=Math.max(n,E[3]);for(let Z=1;Z<N.length;Z++){const [ea,ka]=N[Z];Q+=ea;n+=ka;0>ea&&(m=Math.min(m,Q));0<ea&&(J=Math.max(J,Q));0>ka?z=Math.min(z,n):0<ka&&(E=Math.max(E,n))}B[0]=m;B[1]=z;B[2]=J;B[3]=E;return B}function K(B,E){if(!E.length)return null;B[0]=B[1]=Number.POSITIVE_INFINITY;B[2]=B[3]=Number.NEGATIVE_INFINITY;for(let N=0;N<E.length;N++)r(B,B,E[N]);return B}function Y(B,E,N,Q,n){E.xmin=ha(B,N.xmin);E.ymin=p(B,N.ymin);
E.xmax=ha(B,N.xmax);E.ymax=p(B,N.ymax);E!==N&&(Q&&(E.zmin=N.zmin,E.zmax=N.zmax),n&&(E.mmin=N.mmin,E.mmax=N.mmax));return E}function A(B,E,N,Q,n){E.points=h(B,N.points,Q,n);return E}function G(B,E,N,Q,n){E.x=ha(B,N.x);E.y=p(B,N.y);E!==N&&(Q&&(E.z=N.z),n&&(E.m=N.m));return E}function C(B,E,N,Q,n){B=H(B,N.rings,Q,n);if(!B)return null;E.rings=B;return E}function M(B,E,N,Q,n){B=l(B,N.paths,Q,n);if(!B)return null;E.paths=B;return E}const P=(B,E,N)=>[E,N],W=(B,E,N)=>[E,N,B[2]],ja=(B,E,N)=>[E,N,B[2],B[3]];
q.equals=function(B,E){if(B===E||null==B&&null==E)return!0;if(null==B||null==E)return!1;let N,Q,n,m;B&&"upperLeft"===B.originPosition?(N=B.translate[0],Q=B.translate[1],B=B.scale[0]):(N=B.extent.xmin,Q=B.extent.ymax,B=B.tolerance);E&&"upperLeft"===E.originPosition?(n=E.translate[0],m=E.translate[1],E=E.scale[0]):(n=E.extent.xmin,m=E.extent.ymax,E=E.tolerance);return N===n&&Q===m&&B===E};q.getQuantizedBoundsCoordsArray=r;q.getQuantizedBoundsCoordsArrayArray=K;q.getQuantizedBoundsPaths=function(B){return K([0,
0,0,0],B)};q.getQuantizedBoundsPoints=function(B){const E=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return r(E,E,B)};q.getQuantizedBoundsRings=function(B){return K([0,0,0,0],B)};q.quantizeBounds=function(B,E,N){E[0]=ha(B,N[0]);E[3]=p(B,N[1]);E[2]=ha(B,N[2]);E[1]=p(B,N[3]);return E};q.quantizeExtent=Y;q.quantizeGeometry=function(B,E){return B&&E?ia.isPoint(E)?G(B,{},E,!1,!1):ia.isPolyline(E)?M(B,{},E,!1,!1):ia.isPolygon(E)?C(B,{},E,!1,!1):
ia.isMultipoint(E)?A(B,{},E,!1,!1):ia.isExtent(E)?Y(B,{},E,!1,!1):null:null};q.quantizeMultipoint=A;q.quantizePaths=l;q.quantizePoint=G;q.quantizePoints=h;q.quantizePolygon=C;q.quantizePolyline=M;q.quantizeRings=H;q.quantizeX=ha;q.quantizeY=p;q.toQuantizationTransform=function(B){return B?{originPosition:"upper-left"===B.originPosition?"upperLeft":"lower-left"===B.originPosition?"lowerLeft":B.originPosition,scale:B.tolerance?[B.tolerance,B.tolerance]:[1,1],translate:B.extent?[B.extent.xmin,B.extent.ymax]:
[0,0]}:null};q.unquantizeBounds=function(B,E,N){return N?(E[0]=v(B,N[0]),E[1]=fa(B,N[3]),E[2]=v(B,N[2]),E[3]=fa(B,N[1]),E):[v(B,E[0]),fa(B,E[3]),v(B,E[2]),fa(B,E[1])]};q.unquantizeCoordsArray=aa;q.unquantizeCoordsArrayArray=I;q.unquantizeExtent=function(B,E,N,Q,n){E.xmin=v(B,N.xmin);E.ymin=fa(B,N.ymin);E.xmax=v(B,N.xmax);E.ymax=fa(B,N.ymax);E!==N&&(Q&&(E.zmin=N.zmin,E.zmax=N.zmax),n&&(E.mmin=N.mmin,E.mmax=N.mmax));return E};q.unquantizeMultipoint=function(B,E,N,Q,n){d.isSome(N)&&(E.points=F(B,N.points,
Q,n));return E};q.unquantizePaths=V;q.unquantizePoint=function(B,E,N,Q,n){if(d.isNone(N))return E;E.x=v(B,N.x);E.y=fa(B,N.y);E!==N&&(Q&&(E.z=N.z),n&&(E.m=N.m));return E};q.unquantizePoints=F;q.unquantizePolygon=function(B,E,N,Q,n){d.isSome(N)&&(E.rings=e(B,N.rings,Q,n));return E};q.unquantizePolyline=function(B,E,N,Q,n){d.isSome(N)&&(E.paths=V(B,N.paths,Q,n));return E};q.unquantizeRings=e;q.unquantizeX=v;q.unquantizeY=fa;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe",
"./attributeSupport","../../../smartMapping/statistics/support/utils"],function(q,d,ia){return function(){function ha(t,h,H){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=t.returnDistinctValues;this.fieldsIndex=H;this.featureAdapter=h;if((h=t.outFields)&&-1===h.indexOf("*")){this.outFields=h;t=0;for(const v of h){var l=d.getExpressionFromFieldName(v);l=(h=this.fieldsIndex.get(l))?null:d.getWhereClause(l,H);h=h?h.name:d.getAliasFromFieldName(v)||`FIELD_EXP_${t++}`;
this._fieldDataCache.set(v,{alias:h,clause:l})}}}var p=ha.prototype;p.countDistinctValues=function(t){if(!this.returnDistinctValues)return t.length;t.forEach(h=>this.getAttributes(h));return this._returnDistinctMap.size};p.getAttributes=function(t){t=this._processAttributesForOutFields(t);return this._processAttributesForDistinctValues(t)};p.getFieldValue=function(t,h,H){const l=H?H.name:h;let v=null;this._fieldDataCache.has(l)?v=this._fieldDataCache.get(l).clause:H||(v=d.getWhereClause(h,this.fieldsIndex),
this._fieldDataCache.set(l,{alias:l,clause:v}));return H?this.featureAdapter.getAttribute(t,l):v.calculateValue(t,this.featureAdapter)};p.getNormalizedValue=function(t,h){const H=h.normalizationType,l=h.normalizationTotal;let v=this.getFieldValue(t,h.field,h.fieldInfo);H&&Number.isFinite(v)&&(t=this.getFieldValue(t,h.normalizationField,h.normalizationFieldInfo),v=ia.getNormalizedValue(v,H,t,l));return v};p.getExpressionValue=function(t,h,H){t={attributes:this.featureAdapter.getAttributes(t)};t=H.createExecContext(t,
h.viewInfo);return H.executeFunction(h.compiledFunc,t)};p.validateItem=function(t,h){this._fieldDataCache.has(h)||this._fieldDataCache.set(h,{alias:h,clause:d.getWhereClause(h,this.fieldsIndex)});return this._fieldDataCache.get(h).clause.testFeature(t,this.featureAdapter)};p.validateItems=function(t,h){this._fieldDataCache.has(h)||this._fieldDataCache.set(h,{alias:h,clause:d.getWhereClause(h,this.fieldsIndex)});return this._fieldDataCache.get(h).clause.testSet(t,this.featureAdapter)};p._processAttributesForOutFields=
function(t){const h=this.outFields;if(!h||!h.length)return this.featureAdapter.getAttributes(t);const H={};for(const l of h){const {alias:v,clause:fa}=this._fieldDataCache.get(l);H[v]=fa?fa.calculateValue(t,this.featureAdapter):this.featureAdapter.getAttribute(t,v)}return H};p._processAttributesForDistinctValues=function(t){if(q.isNone(t)||!this.returnDistinctValues)return t;var h=this.outFields,H=[];if(h)for(const v of h){var {alias:l}=this._fieldDataCache.get(v);H.push(t[l])}else for(l in t)H.push(t[l]);
h=`${(h||["*"]).join(",")}=${H.join(",")}`;H=this._returnDistinctMap.get(h)||0;this._returnDistinctMap.set(h,++H);return 1<H?null:t};return ha}()})},"esri/smartMapping/statistics/support/utils":function(){define(["exports","../../../core/Error","../../../core/maybe","../../../layers/support/fieldUtils"],function(q,d,ia,ha){function p(l,v){return new d(l,v)}function t(l,v){l=ia.isSome(l)?l:"";ia.isSome(v)&&v&&(l=l?"("+l+") AND ("+v+")":v);return l}function h(l){const v=l.layer;return l.fields.filter(fa=>
!v.getField(fa))}function H(l){const v=l.layer;return l.fields.filter(fa=>{fa=v.getFieldUsageInfo(fa);return!fa||!fa.supportsStatistics})}q.calculateStatistics=function(l){const {values:v,useSampleStdDev:fa,supportsNullCount:aa}=l;var I=Number.POSITIVE_INFINITY;let F=Number.NEGATIVE_INFINITY,V=null,e=null;var r=null;let K=null,Y=0;const A=null==l.minValue?-Infinity:l.minValue;l=null==l.maxValue?Infinity:l.maxValue;for(const G of v)Number.isFinite(G)?G>=A&&G<=l&&(V+=G,I=Math.min(I,G),F=Math.max(F,
G),Y++):"string"===typeof G&&Y++;if(Y&&null!=V){e=V/Y;r=0;for(const G of v)Number.isFinite(G)&&G>=A&&G<=l&&(r+=(G-e)**2);K=fa?1<Y?r/(Y-1):0:0<Y?r/Y:0;r=Math.sqrt(K)}else F=I=null;I={avg:e,count:Y,max:F,min:I,stddev:r,sum:V,variance:K};aa&&(I.nullcount=v.length-Y);return I};q.calculateStringStatistics=function(l){const v=l.returnDistinct?[...new Set(l.values)]:l.values,fa=v.filter(I=>null!=I).length,aa={count:fa};l.supportsNullCount&&(aa.nullcount=v.length-fa);return aa};q.createError=p;q.getNormalizedValue=
function(l,v,fa,aa){let I=null;switch(v){case "log":0!==l&&(I=Math.log(l)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(aa)&&0!==aa&&(I=l/aa*100);break;case "field":Number.isFinite(fa)&&0!==fa&&(I=l/fa);break;case "natural-log":0<l&&(I=Math.log(l));break;case "square-root":0<l&&(I=l**.5)}return I};q.getRangeExpr=function(l,v,fa){v=null!=v?l+" \x3e\x3d "+v:"";l=null!=fa?l+" \x3c\x3d "+fa:"";fa="";return(fa=v&&l?t(v,l):v||l)?"("+fa+")":""};q.getSQLFilterForNormalization=function(l){const v=
l.field,fa=l.normalizationType;l=l.normalizationField;let aa;if("log"===fa)aa="(NOT "+v+" \x3d 0)";else if("field"===fa)aa="(NOT "+l+" \x3d 0)";else if("natural-log"===fa||"square-root"===fa)aa=`(${v} > 0)`;return aa};q.isNullCountSupported=function(l){const v=null!=l.minValue||null!=l.maxValue,fa=!!l.sqlExpression&&l.supportsSQLExpression;return!(null!=l.normalizationField||null!=l.normalizationType)&&!v&&!fa};q.mergeWhereClauses=t;q.processStatsResult=function(l,v){if(!v)return l;["avg","stddev",
"variance"].forEach(fa=>{null!=l[fa]&&(l[fa]=Math.ceil(l[fa]))});return l};q.verifyBasicFieldValidity=function(l,v,fa){const aa=h({layer:l,fields:v});if(aa.length)return p(fa,"Unknown fields: "+aa.join(", ")+". You can only use fields defined in the layer schema");l=H({layer:l,fields:v});if(l.length)return p(fa,"Unsupported fields: "+l.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true")};q.verifyFieldType=function(l,v,fa,aa){let I=
null;if(!v)I=p(fa,"'field' is not defined in the layer schema");else if(v.name===l.objectIdField||-1===aa.indexOf(v.type))I=p(fa,"'field' should be one of these types: "+aa.join(","));return I};q.verifyNumericField=function(l,v,fa){let aa;v?v.name!==l.objectIdField&&ha.isNumericField(v)||(aa=p(fa,"'field' should be one of these numeric types: "+ha.numericTypes.join(","))):aa=p(fa,"'field' is not defined in the layer schema");return aa};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),
function(q,d,ia,ha,p,t,h,H){function l(w,D,U){if(w)for(const ma of w)(w=(w=t.getDeepValue(ma,D))&&"function"!==typeof w&&U.get(w))&&t.setDeepValue(ma,w.name,D)}function v(w,D){if(!w||!D)return[];k.clear();fa(k,w,D);return Array.from(k).sort()}function fa(w,D,U){var ma;if(U)if(null!=D&&null!=(ma=D.fields)&&ma.length)if(U.includes("*"))for(const {name:na}of D.fields)w.add(na);else for(const na of U)aa(w,D,na);else if(U.includes("*"))w.clear(),w.add("*");else for(const na of U)w.add(na)}function aa(w,
D,U){"string"===typeof U&&(D?(D=D.get(U))&&w.add(D.name):w.add(U))}function I(w,D,U){return F.apply(this,arguments)}function F(){F=ia._asyncToGenerator(function*(w,D,U){var ma;if(U){var {arcadeUtils:na}=yield H.loadArcade();U=na.extractFieldNames(U,null==D?void 0:null==(ma=D.fields)?void 0:ma.map(sa=>sa.name));for(const sa of U)aa(w,D,sa)}});return F.apply(this,arguments)}function V(w,D,U){return e.apply(this,arguments)}function e(){e=ia._asyncToGenerator(function*(w,D,U){if(U&&"1\x3d1"!==U){U=(yield new Promise(function(ma,
na){q(["../../core/sql/WhereClause"],ma,na)})).WhereClause.create(U,D);if(!U.isStandardized)throw new ha("fieldUtils:collectFilterFields","Where clause is not standardized");fa(w,D,U.fieldNames)}});return e.apply(this,arguments)}function r(w,D){for(const U of w)if(U&&U.valueType&&U.valueType===D)return U.name;return null}function K(){K=ia._asyncToGenerator(function*(w){if(!w)return[];const D=new Set;yield Y(D,w);return Array.from(D).sort()});return K.apply(this,arguments)}function Y(w,D){return A.apply(this,
arguments)}function A(){A=ia._asyncToGenerator(function*(w,D){if(D){var U=t.getDeepValue("elevationInfo.featureExpressionInfo",D);if(U)return U.collectRequiredFields(w,D.fieldsIndex)}});return A.apply(this,arguments)}function G(w,D,U){return C.apply(this,arguments)}function C(){C=ia._asyncToGenerator(function*(w,D,U){U.outStatistic.onStatisticValueExpression?I(w,D,U.outStatistic.onStatisticValueExpression):w.add(U.outStatistic.onStatisticField)});return C.apply(this,arguments)}function M(){M=ia._asyncToGenerator(function*(w,
D,U){var ma;if(D&&U&&"cluster"===U.type){var na=[];null!=(ma=U.popupTemplate)&&ma.expressionInfos&&na.push(...U.popupTemplate.expressionInfos.map(sa=>I(w,D.fieldsIndex,sa.expression)));U.fields&&na.push(...U.fields.map(sa=>G(w,D.fieldsIndex,sa)));yield Promise.all(na)}});return M.apply(this,arguments)}function P(){P=ia._asyncToGenerator(function*(w,D,U){D&&(D.timeInfo&&p.isSome(U)&&U.timeExtent&&fa(w,D.fieldsIndex,[D.timeInfo.startField,D.timeInfo.endField]),D.floorInfo&&fa(w,D.fieldsIndex,[D.floorInfo.floorField]),
p.isSome(U)&&p.isSome(U.where)&&(yield V(w,D.fieldsIndex,U.where)))});return P.apply(this,arguments)}function W(){W=ia._asyncToGenerator(function*(w,D,U){D&&U&&(yield Promise.all(U.map(ma=>ja(w,D,ma))))});return W.apply(this,arguments)}function ja(w,D,U){return B.apply(this,arguments)}function B(){B=ia._asyncToGenerator(function*(w,D,U){D&&U&&(U.valueExpression?yield I(w,D.fieldsIndex,U.valueExpression):U.field&&aa(w,D.fieldsIndex,U.field))});return B.apply(this,arguments)}function E(){E=ia._asyncToGenerator(function*(w){if(!w)return[];
const D="timeInfo"in w&&w.timeInfo;return D?v(w.fieldsIndex,[w.trackIdField,D.startField,D.endField]):[]});return E.apply(this,arguments)}function N(){N=ia._asyncToGenerator(function*(w){if(!w)return[];const D=new Set;yield Q(D,w);return Array.from(D).sort()});return N.apply(this,arguments)}function Q(w,D){return n.apply(this,arguments)}function n(){n=ia._asyncToGenerator(function*(w,D){const {labelingInfo:U,fieldsIndex:ma}=D;U&&U.length&&(yield Promise.all(U.map(na=>m(w,ma,na))))});return n.apply(this,
arguments)}function m(w,D,U){return z.apply(this,arguments)}function z(){z=ia._asyncToGenerator(function*(w,D,U){if(U){var ma=U.getLabelExpression();U=U.where;"arcade"===ma.type?yield I(w,D,ma.expression):(ma=ma.expression.match(/{[^}]*}/g))&&ma.forEach(na=>{aa(w,D,na.slice(1,-1))});yield V(w,D,U)}});return z.apply(this,arguments)}function J(w){return"number"===typeof w&&!isNaN(w)&&isFinite(w)}function Z(w){return null===w||J(w)}function ea(w){return null===w||T(w)}function ka(w){return null!=w&&
"string"===typeof w}function qa(w){return null===w||ka(w)}function ya(){return!0}function xa(w,D){let U;switch(w.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":U=w.nullable?ea:T;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":U=w.nullable?Z:J;break;case "string":case "esriFieldTypeString":U=w.nullable?qa:ka;break;default:U=ya}return 1===
arguments.length?U:U(D)}function Ba(w){return null!=w&&u.has(w.type)}function Na(w,D){return w.nullable&&null===D?null:Ba(w)&&!Ta(w.type,Number(D))?d.NumericRangeValidationError.OUT_OF_RANGE:xa(w,D)?w.domain?h.validateDomainValue(w.domain,D):null:d.TypeValidationError.INVALID_TYPE}function Ta(w,D){return(w="string"===typeof w?Ka(w):w)?w.isInteger?T(D)&&D>=w.min&&D<=w.max:D>=w.min&&D<=w.max:!1}function Ka(w){switch(w){case "esriFieldTypeSmallInteger":case "small-integer":return L;case "esriFieldTypeInteger":case "integer":return O;
case "esriFieldTypeSingle":case "single":return ca;case "esriFieldTypeDouble":case "double":return X}}function Ca(w,D,U){if(!D||!D.attributes||!w){if(p.isSome(U))for(var ma of w)U.add(ma);return!0}D=D.attributes;ma=!1;for(const na of w)if(!(na in D))if(ma=!0,p.isSome(U))U.add(na);else break;return ma}function Ra(){Ra=ia._asyncToGenerator(function*(w,D){const U=new Set;for(const ma of D)yield I(U,w.fieldsIndex,ma);return Array.from(U).sort()});return Ra.apply(this,arguments)}const gb="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),
c=["field","normalizationField"],k=new Set,T=(()=>"isInteger"in Number?Number.isInteger:w=>"number"===typeof w&&isFinite(w)&&Math.floor(w)===w)(),f=["integer","small-integer","single","double"],u=new Set([...f,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);d.NumericRangeValidationError=void 0;(d.NumericRangeValidationError||(d.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";d.TypeValidationError=void 0;
(d.TypeValidationError||(d.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const L={min:-32768,max:32767,isInteger:!0},O={min:-2147483648,max:2147483647,isInteger:!0},ca={min:-3.4E38,max:1.2E38,isInteger:!1},X={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};d.collectArcadeFieldNames=I;d.collectElevationFields=Y;d.collectFeatureReductionFields=function(w,D,U){return M.apply(this,arguments)};d.collectField=aa;d.collectFields=fa;d.collectFilterFields=function(w,
D,U){return P.apply(this,arguments)};d.collectLabelingFields=Q;d.collectOrderByInfos=function(w,D,U){return W.apply(this,arguments)};d.doubleRange=X;d.featureHasFields=function(w,D){return!Ca(w,D,null)};d.fixFields=v;d.fixRendererFields=function(w,D){if(null!=w&&null!=D)for(const U of Array.isArray(w)?w:[w])if(l(gb,U,D),"visualVariables"in U&&U.visualVariables)for(const ma of U.visualVariables)l(c,ma,D)};d.fixTimeInfoFields=function(w,D){if(null!=w&&null!=D&&D.fields.length)if("startField"in w){var U=
D.get(w.startField);D=D.get(w.endField);w.startField=U&&U.name||null;w.endField=D&&D.name||null}else U=D.get(w.startTimeField),D=D.get(w.endTimeField),w.startTimeField=U&&U.name||null,w.endTimeField=D&&D.name||null};d.getDisplayFieldName=function({displayField:w,fields:D}){if(w)return w;if(!D||!D.length)return null;if(!(w=r(D,"name-or-title")||r(D,"unique-identifier")||r(D,"type-or-category")))a:{for(const U of D)if(U&&U.name&&(D=U.name.toLowerCase(),-1<D.indexOf("name")||-1<D.indexOf("title"))){w=
U.name;break a}w=null}return w};d.getElevationFields=function(w){return K.apply(this,arguments)};d.getExpressionFields=function(w,D){return Ra.apply(this,arguments)};d.getFeatureEditFields=function(w){if(!w)return[];const D="editFieldsInfo"in w&&w.editFieldsInfo;return D?v(w.fieldsIndex,[D&&D.creatorField,D&&D.creationDateField,D&&D.editorField,D&&D.editDateField]):[]};d.getFeatureGeometryFields=function(w){if(!w)return[];const D=w.geometryFieldsInfo;return D?v(w.fieldsIndex,[D.shapeAreaField,D.shapeLengthField]):
[]};d.getFieldDefaultValue=function(w){const D=w.defaultValue;if(void 0!==D&&xa(w,D))return D;if(w.nullable)return null};d.getFieldRange=function(w){const D=h.getDomainRange(w.domain);if(D)return D;if(Ba(w))return Ka(w.type)};d.getLabelingFields=function(w){return N.apply(this,arguments)};d.getNumericTypeForValue=function(w){if(!J(w))return null;if(T(w)){if(w>=L.min&&w<=L.max)return"esriFieldTypeSmallInteger";if(w>=O.min&&w<=O.max)return"esriFieldTypeInteger"}return w>=ca.min&&w<=ca.max?"esriFieldTypeSingle":
"esriFieldTypeDouble"};d.getTimeFields=function(w){return E.apply(this,arguments)};d.integerRange=O;d.isDateField=function(w){return null!=w&&("date"===w.type||"esriFieldTypeDate"===w.type)};d.isNumberInRange=Ta;d.isNumericField=Ba;d.isStringField=function(w){return null!=w&&("string"===w.type||"esriFieldTypeString"===w.type)};d.isValidFieldValue=function(w,D){return null===Na(w,D)};d.isValueMatchingFieldType=xa;d.numericTypes=f;d.packFields=function(w,D,U=1){if(!D||!w)return[];if(D.includes("*"))return["*"];
D=v(w,D);return D.length/w.fields.length>=U?["*"]:D};d.populateMissingFields=Ca;d.rendererFields=gb;d.sanitizeNullFieldValue=function(w){return null==w||"number"===typeof w&&isNaN(w)?null:w};d.singleRange=ca;d.smallIntegerRange=L;d.unpackFieldNames=function(w,D){return p.isNone(D)||p.isNone(w)?[]:D.includes("*")?w.fields.map(U=>U.name):D};d.validateFieldValue=Na;d.validationErrorToString=function(w,D,U){switch(w){case h.DomainValidationError.INVALID_CODED_VALUE:return`Value ${U} is not in the coded domain - field: ${D.name}, domain: ${JSON.stringify(D.domain)}`;
case h.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${U} is out of the range of valid values - field: ${D.name}, domain: ${JSON.stringify(D.domain)}`;case d.TypeValidationError.INVALID_TYPE:return`Value ${U} is not a valid value for the field type - field: ${D.name}, type: ${D.type}, nullable: ${D.nullable}`;case d.NumericRangeValidationError.OUT_OF_RANGE:{const {min:ma,max:na}=Ka(D.type);return`Value ${U} is out of range for the number type - field: ${D.name}, type: ${D.type}, value range is ${ma} to ${na}`}}};
d.visualVariableFields=c;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/layers/support/domainUtils":function(){define(["exports"],function(q){function d(ia,ha){switch(ia.type){case "range":{const p="range"in ia?ia.range[1]:ia.maxValue;if(+ha<("range"in ia?ia.range[0]:ia.minValue)||+ha>p)return q.DomainValidationError.VALUE_OUT_OF_RANGE;break}case "coded-value":case "codedValue":if(null==ia.codedValues||ia.codedValues.every(p=>null==p||p.code!==ha))return q.DomainValidationError.INVALID_CODED_VALUE}return null}
q.DomainValidationError=void 0;(function(ia){ia.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";ia.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(q.DomainValidationError||(q.DomainValidationError={}));q.getDomainRange=function(ia){if(ia&&"range"===ia.type)return{min:"range"in ia?ia.range[0]:ia.minValue,max:"range"in ia?ia.range[1]:ia.maxValue}};q.isValidDomainValue=function(ia,ha){return null===d(ia,ha)};q.validateDomainValue=d;Object.defineProperty(q,"__esModule",
{value:!0})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/maybe ../geometry/SpatialReference".split(" "),function(q,d,ia,ha,p,t){function h(){H||(H=ia._asyncToGenerator(function*(){const v=yield new Promise(function(fa,aa){q(["./arcadeUtils"],fa,aa)});return{arcade:v.arcade,arcadeUtils:v,Dictionary:v.Dictionary,Feature:v.arcadeFeature}})());return H}let H;ha=(v,fa,aa)=>l.create(v,fa,aa,null,["$feature","$view"]);let l=function(){function v(aa,
I,F,V,e,r,K,Y){this.script=aa;this.evaluate=e;this.fields=Array.isArray(K)?K:K.fields;this._syntaxTree=V;this._arcade=I;this._arcadeDictionary=F;this._arcadeFeature=r;this._spatialReference=Y;this._referencesGeometry=I.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}v.create=function(){var aa=ia._asyncToGenerator(function*(I,F,V,e,r,K){const {arcade:Y,Feature:A,Dictionary:G}=yield h(),C=t.fromJSON(F);F=Y.parseScript(I,K);r=r.reduce((B,
E)=>({...B,[E]:null}),{});let M=null;p.isSome(e)&&(M=new G(e),M.immutable=!0,r.$config=null);e=Y.scriptUsesGeometryEngine(F)&&Y.enableGeometrySupport();K=Y.scriptUsesFeatureSet(F)&&Y.enableFeatureSetSupport();const P=Y.scriptIsAsync(F)&&Y.enableAsyncSupport();r={vars:r,spatialReference:C,useAsync:!!P};const W=new G;W.immutable=!1;W.setField("scale",0);const ja=Y.compileScript(F,r);yield Promise.all([e,K,P]);return new v(I,Y,G,F,B=>{"$view"in B&&B.$view&&(W.setField("scale",B.$view.scale),B.$view=
W);M&&(B.$config=M);return ja({vars:B,spatialReference:C})},new A,V,C)});return function(I,F,V,e,r,K){return aa.apply(this,arguments)}}();var fa=v.prototype;fa.repurposeFeature=function(aa){aa.geometry&&!aa.geometry.spatialReference&&(aa.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(aa.geometry,aa.attributes,{fields:this.fields});return this._arcadeFeature};fa.repurposeAdapter=function(aa){this._arcadeFeature.repurposeFromAdapter(aa,{fields:this.fields});
return this._arcadeFeature};fa.createDictionary=function(){return new this._arcadeDictionary};fa.referencesMember=function(aa){return this._arcade.referencesMember(this._syntaxTree,aa)};fa.referencesFunction=function(aa){return this._arcade.referencesFunction(this._syntaxTree,aa)};fa.referencesGeometry=function(){return this._referencesGeometry};fa.referencesScale=function(){return this._referencesScale};fa.extractFieldLiterals=function(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)};
return v}();d.ArcadeExpression=l;d.createDictionaryExpression=(v,fa,aa,I)=>l.create(v,fa,aa,I,["$feature","$view"]);d.createLabelExpression=(v,fa,aa)=>l.create(v,fa,aa,null,["$feature"]);d.createRendererExpression=ha;d.createVVExpression=ha;d["default"]=l;d.loadArcade=h;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(q){function d(p,t,h,H,l){if(null!=H&&null!=l)return v=>{const fa=p.getAttribute(v,t);v=p.getAttribute(v,
h);return(null==fa||fa<=l)&&(null==v||v>=H)};if(null!=H)return v=>{v=p.getAttribute(v,h);return null==v||v>=H};if(null!=l)return v=>{v=p.getAttribute(v,t);return null==v||v<=l}}function ia(p,t,h,H){if(null!=h&&null!=H&&h===H)return l=>p.getAttribute(l,t)===h;if(null!=h&&null!=H)return l=>{l=p.getAttribute(l,t);return l>=h&&l<=H};if(null!=h)return l=>p.getAttribute(l,t)>=h;if(null!=H)return l=>p.getAttribute(l,t)<=H}function ha(){return()=>!1}q.getTimeExtent=function(p,t){if(!p)return null;const h=
t.featureAdapter,{startTimeField:H,endTimeField:l}=p;let v=Number.POSITIVE_INFINITY,fa=Number.NEGATIVE_INFINITY;if(H&&l)t.forEach(aa=>{const I=h.getAttribute(aa,H);aa=h.getAttribute(aa,l);null==I||isNaN(I)||(v=Math.min(v,I));null==aa||isNaN(aa)||(fa=Math.max(fa,aa))});else{const aa=H||l;t.forEach(I=>{I=h.getAttribute(I,aa);null==I||isNaN(I)||(v=Math.min(v,I),fa=Math.max(fa,I))})}return{start:v,end:fa}};q.getTimeOperator=function(p,t,h){if(!t||!p)return null;const {startTimeField:H,endTimeField:l}=
p;if(!H&&!l)return null;const {start:v,end:fa}=t;return null===v&&null===fa?null:void 0===v&&void 0===fa?ha():H&&l?d(h,H,l,v,fa):ia(h,H||l,v,fa)};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../centroid ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(q,d,ia,ha,p,t,h,H,l,v,fa,aa,I,F){function V(n,m,z,J=n.hasZ,Z=n.hasM){if(p.isNone(m))return null;const ea=n.hasZ&&J,ka=n.hasM&&Z;return z?(n=aa.quantizeOptimizedGeometry(E,m,n.hasZ,n.hasM,"esriGeometryPoint",z,J,Z),aa.convertToPoint(n,ea,ka)):aa.convertToPoint(m,ea,ka)}function e(){e=ia._asyncToGenerator(function*(n,m,z){const {outFields:J,orderByFields:Z,groupByFieldsForStatistics:ea,outStatistics:ka}=n;if(J)for(var qa=0;qa<J.length;qa++)J[qa]=J[qa].trim();if(Z)for(qa=0;qa<Z.length;qa++)Z[qa]=
Z[qa].trim();if(ea)for(qa=0;qa<ea.length;qa++)ea[qa]=ea[qa].trim();if(ka)for(qa=0;qa<ka.length;qa++)ka[qa].onStatisticField&&(ka[qa].onStatisticField=ka[qa].onStatisticField.trim());n.geometry&&!n.outSR&&(n.outSR=n.geometry.spatialReference);return K(n,m,z)});return e.apply(this,arguments)}function r(){r=ia._asyncToGenerator(function*(n,m,z){return K(n,m,z)});return r.apply(this,arguments)}function K(n,m,z){return Y.apply(this,arguments)}function Y(){Y=ia._asyncToGenerator(function*(n,m,z){if(!n)return null;
var {where:J}=n;n.where=J=J&&J.trim();if(!J||/^1 *= *1$/.test(J)||m&&m===J)n.where=null;if(!n.geometry)return n;m=yield A(n);n.distance=0;n.units=null;"esriSpatialRelEnvelopeIntersects"===n.spatialRel&&({spatialReference:J}=n.geometry,m=h.getGeometryExtent(m),m.spatialReference=J);n.geometry=m;yield F.checkProjectionSupport(m.spatialReference,z);m=(yield l.normalizeCentralMeridian(H.fromJSON(m)))[0];if(p.isNone(m))throw W;m=m.toJSON();m=yield F.project(m,m.spatialReference,z);if(!m)throw W;m.spatialReference=
z;n.geometry=m;return n});return Y.apply(this,arguments)}function A(n){return G.apply(this,arguments)}function G(){G=ia._asyncToGenerator(function*(n){const {geometry:m,distance:z,units:J}=n;if(null==z||"vertexAttributes"in m)return m;var Z=m.spatialReference;n=J?P.fromJSON(J):t.getUnitString(Z);Z=Z&&(v.isGeographic(Z)||v.isWebMercator(Z))?m:yield F.checkProjectionSupport(Z,v.WGS84).then(()=>F.project(m,v.WGS84));return(yield C())(Z.spatialReference,Z,z,n)});return G.apply(this,arguments)}function C(){return M.apply(this,
arguments)}function M(){M=ia._asyncToGenerator(function*(){return(yield new Promise(function(n,m){q(["../../../geometry/geometryEngineJSON"],n,m)})).geodesicBuffer});return M.apply(this,arguments)}const P=new ha.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),W=Object.freeze({}),ja=new I,B=new I,E=new I,N={esriGeometryPoint:aa.convertToPoint,
esriGeometryPolyline:aa.convertToPolyline,esriGeometryPolygon:aa.convertToPolygon,esriGeometryMultipoint:aa.convertToMultipoint},Q=(n,m)=>"_geVersion"!==n?m:void 0;d.QUERY_ENGINE_EMPTY_RESULT=W;d.cleanFromGeometryEngine=function(n){return n&&"_geVersion"in n?JSON.parse(JSON.stringify(n,Q)):n};d.getCentroid=function(n,m,z){if("esriGeometryPolygon"!==n.geometryType||!m||!m.centroid&&!m.geometry)return null;m.centroid||(m.centroid=fa.getCentroidOptimizedGeometry(new I,m.geometry,n.hasZ,n.hasM));return V(n,
m.centroid,z)};d.getGeometry=function(n,m,z,J,Z,ea,ka=m,qa=z){const ya=m&&ka,xa=z&&qa;J=p.isSome(J)?"coords"in J?J:J.geometry:null;if(p.isNone(J))return null;if(Z)return m=aa.generalizeOptimizedGeometry(B,J,m,z,n,Z,ka,qa),ea&&(m=aa.quantizeOptimizedGeometry(E,m,ya,xa,n,ea)),N[n](m,ya,xa);if(ea)return ea=aa.quantizeOptimizedGeometry(E,J,m,z,n,ea,ka,qa),N[n](ea,ya,xa);aa.removeZMValues(ja,J,m,z,ka,qa);return N[n](ja,ya,xa)};d.normalizeFilter=function(n,m,z){return r.apply(this,arguments)};d.normalizeQuery=
function(n,m,z){return e.apply(this,arguments)};d.normalizeQueryLike=K;d.transformCentroid=V;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(q,d,ia,ha,p,t,h,H,l,v,fa,aa,I){function F(){return new Promise(function(K,Y){q(["../../../geometry/geometryEngineJSON"],K,Y)})}function V(){V=ia._asyncToGenerator(function*(K,Y,A){const {spatialRel:G,geometry:C}=K;if(C){if(!0!==r.spatialRelationship[G])throw new ha("feature-store:unsupported-query","Unsupported query spatial relationship",{query:K});if(H.isValid(C.spatialReference)&&H.isValid(A)){if(!0!==r.queryGeometry[h.getJsonType(C)])throw new ha("feature-store:unsupported-query","Unsupported query geometry type",
{query:K});if(!0!==r.layerGeometry[Y])throw new ha("feature-store:unsupported-query","Unsupported layer geometry type",{query:K});if(K.outSR)return aa.checkProjectionSupport(K.geometry&&K.geometry.spatialReference,K.outSR)}}});return V.apply(this,arguments)}const e={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",
esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},r={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},
layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};d.canQueryWithRBush=function(K){if(h.isExtent(K))return!0;if(h.isPolygon(K)){for(const Y of K.rings)if(5!==Y.length||Y[0][0]!==Y[1][0]||Y[0][0]!==Y[4][0]||Y[2][0]!==Y[3][0]||Y[0][1]!==Y[3][1]||Y[0][1]!==Y[4][1]||Y[1][1]!==Y[2][1])return!1;return!0}return!1};d.checkSpatialQuerySupport=function(K,Y,A){return V.apply(this,arguments)};d.getSpatialQueryOperator=function(K,
Y,A,G,C){if(h.isPolygon(Y)&&"esriGeometryPoint"===A&&("esriSpatialRelIntersects"===K||"esriSpatialRelContains"===K)){const M=v.convertFromPolygon(new fa,Y,!1,!1);return Promise.resolve(P=>l.polygonContainsPoint(M,!1,!1,P))}if(h.isPolygon(Y)&&"esriGeometryMultipoint"===A){const M=v.convertFromPolygon(new fa,Y,!1,!1);if("esriSpatialRelContains"===K)return Promise.resolve(P=>l.polygonContainsMultipoint(M,!1,!1,P,G,C))}if(h.isExtent(Y)&&"esriGeometryPoint"===A&&("esriSpatialRelIntersects"===K||"esriSpatialRelContains"===
K))return Promise.resolve(M=>p.extentContainsPoint(Y,I.getGeometry(A,G,C,M)));if(h.isExtent(Y)&&"esriGeometryMultipoint"===A&&"esriSpatialRelContains"===K)return Promise.resolve(M=>p.extentContainsMultipoint(Y,I.getGeometry(A,G,C,M)));if(h.isExtent(Y)&&"esriSpatialRelIntersects"===K){const M=t.getExtentIntersector(A);return Promise.resolve(P=>M(Y,I.getGeometry(A,G,C,P)))}return F().then(M=>{const P=M[e[K]].bind(null,Y.spatialReference,Y);return W=>P(I.getGeometry(A,G,C,W))})};Object.defineProperty(d,
"__esModule",{value:!0})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(q,d){q.extentIntersectsExtent=d.extentIntersectsExtent;q.extentIntersectsMultipoint=d.extentIntersectsMultipoint;q.extentIntersectsPoint=d.extentIntersectsPoint;q.extentIntersectsPolygon=d.extentIntersectsPolygon;q.extentIntersectsPolyline=d.extentIntersectsPolyline;q.getFeatureExtentIntersector=d.getFeatureExtentIntersector;q.isSelfIntersecting=d.isSelfIntersecting;q.segmentIntersects=
d.segmentIntersects;q.getExtentIntersector=function(ia){return"mesh"===ia?d.extentIntersectsExtent:d.getFeatureExtentIntersector(ia)};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/layers/graphics/contains":function(){define(["exports"],function(q){function d(ia,ha,p,t,h){if(!ia)return!1;ha=ha?p?4:3:p?3:2;const {coords:H,lengths:l}=ia;p=!1;ia=0;for(const fa of l){var v=ia;for(let aa=ia,I=ia+fa*ha;aa<I;aa+=ha){v=aa+ha;v===I&&(v=ia);const F=H[aa],V=H[aa+1],e=H[v];v=H[v+1];(V<h&&v>=h||v<h&&
V>=h)&&F+(h-V)/(v-V)*(e-F)<t&&(p=!p)}ia+=fa*ha}return p}q.polygonContainsCoords=d;q.polygonContainsMultipoint=function(ia,ha,p,t,h,H){h=h?H?4:3:H?3:2;const {coords:l,lengths:v}=t;if(!v)return!1;for(let fa=0,aa=0;fa<v.length;fa++,aa+=h)if(!d(ia,ha,p,l[aa],l[aa+1]))return!1;return!0};q.polygonContainsPoint=function(ia,ha,p,t){return d(ia,ha,p,t.coords[0],t.coords[1])};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/layers/support/FieldsIndex":function(){define(function(){return function(){function q(ia){this.fields=
ia;this._fieldsMap=new Map;this._dateFieldsSet=new Set;this.dateFields=[];if(ia){var ha=[];for(const p of ia)if(ia=p&&p.name){const t=ia.toLowerCase().trim();this._fieldsMap.set(ia,p);this._fieldsMap.set(t,p);ha.push(t);if("date"===p.type||"esriFieldTypeDate"===p.type)this.dateFields.push(p),this._dateFieldsSet.add(p)}ha.sort();this.uid=ha.join(",")}}var d=q.prototype;d.destroy=function(){this._fieldsMap.clear()};d.has=function(ia){return null!=this.get(ia)};d.get=function(ia){return null!=ia?this._fieldsMap.get(ia)||
this._fieldsMap.get(ia.toLowerCase().trim()):void 0};d.isDateField=function(ia){return this._dateFieldsSet.has(this.get(ia))};d.normalizeFieldName=function(ia){if(ia=this.get(ia))return ia.name};return q}()})},"esri/layers/support/PromiseQueue":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/promiseUtils"],function(q,d){let ia=function(ha,p,t,h,H){this.resolve=ha;this.reject=p;this.callback=t;this.signal=h;this.abortCallback=H};return function(){function ha(){this._tasks=[]}
var p=ha.prototype;p.push=function(t,h,H){return new Promise((l,v)=>this._tasks.push(new ia(l,v,t,h,H)))};p.unshift=function(t,h,H){return new Promise((l,v)=>this._tasks.unshift(new ia(l,v,t,h,H)))};p.process=function(){if(0===this._tasks.length)return!1;const t=this._tasks.shift();try{const h=d.isAborted(t.signal);if(h&&!t.abortCallback)t.reject(d.createAbortError());else{const H=h?t.abortCallback(d.createAbortError()):t.callback();d.isPromise(H)?H.then(t.resolve,t.reject):t.resolve(H)}}catch(h){t.reject(h)}return!0};
p.cancelAll=function(){const t=d.createAbortError();for(const h of this._tasks)if(h.abortCallback){const H=h.abortCallback(t);h.resolve(H)}else h.reject(t);this._tasks.length=0};q._createClass(ha,[{key:"length",get:function(){return this._tasks.length}}]);return ha}()})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports","../../../../core/has","../../../../core/lang","../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],function(q,d,ia,
ha,p){q.createCapabilities=function(t,h){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:t},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:h,supportsDelete:h,supportsEditing:h,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:h,supportsExceedsLimitStatistics:!0},query:ha.queryCapabilities,queryRelated:{supportsCount:!0,
supportsOrderBy:!0,supportsPagination:!0},editing:{supportsGeometryUpdate:h,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}};q.createDefaultAttributesFunction=function(t,h){if(d("csp-restrictions"))return()=>({[h]:null,...t});try{let H=`this.${h} = null;`;for(const v in t){const fa=
v.indexOf(".")?`["${v}"]`:`.${v}`;H+=`this${fa} = ${JSON.stringify(t[v])};`}const l=new Function(H);return()=>new l}catch(H){return()=>({[h]:null,...t})}};q.createDefaultTemplate=function(t={}){return[{name:"New Feature",description:"",prototype:{attributes:ia.clone(t)}}]};q.createDrawingInfo=function(t){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===t||"esriGeometryMultipoint"===t?p.defaultPointSymbolJSON:"esriGeometryPolyline"===t?p.defaultPolylineSymbolJSON:p.defaultPolygonSymbolJSON}}};
Object.defineProperty(q,"__esModule",{value:!0})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],function(q){const d=[252,146,31,255],ia={type:"esriSMS",style:"esriSMSCircle",size:6,color:d,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},ha={type:"esriSLS",style:"esriSLSSolid",width:.75,color:d};q.defaultColor=d;q.defaultOutlineColor=[153,153,153,255];q.defaultPointSymbolJSON=ia;q.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,
146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};q.defaultPolylineSymbolJSON=ha;q.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};q.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};q.errorPolygonSymbolJSON={type:"esriSFS",
style:"esriSFSSolid",color:[0,0,0,255],outline:null};q.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/layers/graphics/sources/support/sourceUtils":function(){define(["require","exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../geometry/support/spatialReferenceUtils","../../../support/fieldUtils"],function(q,d,ia,ha,p){function t(V){return new fa(V)}function h(){return H.apply(this,
arguments)}function H(){H=ia._asyncToGenerator(function*(){return F?F:F=yield new Promise(function(V,e){q(["../../../../geometry/geometryEngineJSON"],V,e)})});return H.apply(this,arguments)}function l(){l=ia._asyncToGenerator(function*(V,e){!ha.isValid(V)||"esriGeometryPolygon"!==e&&"esriGeometryPolyline"!==e||(yield h())});return l.apply(this,arguments)}let v=function(){this.description=this.code=null},fa=function(V){this.error=new v;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=
null;this.error.description=V},aa=function(V){this.globalId=null;this.success=!0;this.objectId=this.uniqueId=V};const I=new Set;let F;d.createFeatureEditErrorResult=t;d.createFeatureEditSuccessResult=function(V){return new aa(V)};d.loadGeometryEngine=h;d.loadGeometryEngineForSimplify=function(V,e){return l.apply(this,arguments)};d.mixAttributes=function(V,e,r,K,Y=!1,A){I.clear();for(const P in r){const W=V.get(P);if(W){var G=r[P];{var C=W;var M=G;let ja=M;"string"===typeof M&&p.isNumericField(C)?
ja=parseFloat(M):null!=M&&p.isStringField(C)&&"string"!==typeof M&&(ja=String(M));C=p.sanitizeNullFieldValue(ja)}C!==G&&A&&A.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:W,originalValue:G,sanitizedValue:C}});I.add(W.name);if(W&&(Y||W.editable)){if(G=p.validateFieldValue(W,C))return t(p.validationErrorToString(G,W,C));e[W.name]=C}}}if(K)for(const P of K)if(!I.has(P.name))return t(`missing required field "${P.name}"`);return null};d.simplify=
function(V,e){if(!V||!ha.isValid(e))return V;if("rings"in V||"paths"in V){if(!F)throw new TypeError("geometry engine not loaded");return F.simplify(e,V)}return V};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(q,d){d=new d.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",
esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});q.kebabDict=d;Object.defineProperty(q,"__esModule",{value:!0})})},"*noref":1}});
define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Error ../../../../core/maybe ../../../../geometry/support/jsonUtils ../../../../geometry/support/spatialReferenceUtils ../../featureConversionUtils ../../objectIdUtils ../../data/FeatureStore ../../data/projectionSupport ../../data/QueryEngine ./clientSideDefaults ./sourceUtils ../../../support/FieldsIndex ../../../support/fieldType ../../../support/fieldUtils".split(" "),function(q,d,ia,ha,p,t,h,H,l,v,fa,aa,I,F,V){function e(G){return ha.isPoint(G)?
null!=G.z:!!G.hasZ}function r(G){return ha.isPoint(G)?null!=G.m:!!G.hasM}const K=p.WGS84,Y={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:p.WGS84},A={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,
supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};return function(){function G(){this._nextObjectId=this._queryEngine=null}var C=G.prototype;C.destroy=function(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy();this._queryEngine=this._requiredFields=this._fieldsIndex=this._createDefaultAttributes=null};C.load=
function(){var M=q._asyncToGenerator(function*(P){var W=[];const {features:ja}=P;var B=this._inferLayerProperties(ja,P.fields);const E=P.fields||[],N=null!=P.hasM?P.hasM:B.hasM,Q=null!=P.hasZ?P.hasZ:B.hasZ;var n=!P.spatialReference&&!B.spatialReference;const m=n?K:P.spatialReference||B.spatialReference,z=n?Y:null,J=P.geometryType||B.geometryType;let Z=P.objectIdField||B.objectIdField;P=P.timeInfo;if(J&&(n&&W.push({name:"feature-layer:spatial-reference-not-found",message:"Spatial reference not provided or found in features. Defaults to WGS84"}),
!J))throw new d("feature-layer:missing-property","geometryType not set and couldn't be inferred from the provided features");if(!Z)throw new d("feature-layer:missing-property","objectIdField not set and couldn't be found in the provided fields");B.objectIdField&&Z!==B.objectIdField&&(W.push({name:"feature-layer:duplicated-oid-field",message:`Provided objectIdField "${Z}" doesn't match the field name "${B.objectIdField}", found in the provided fields`}),Z=B.objectIdField);if(Z&&!B.objectIdField){let ka=
null;E.some(qa=>qa.name===Z?(ka=qa,!0):!1)?(ka.type="esriFieldTypeOID",ka.editable=!1,ka.nullable=!1):E.unshift({alias:Z,name:Z,type:"esriFieldTypeOID",editable:!1,nullable:!1})}for(const ka of E){null==ka.name&&(ka.name=ka.alias);null==ka.alias&&(ka.alias=ka.name);if(!ka.name)throw new d("feature-layer:invalid-field-name","field name is missing",{field:ka});ka.name===Z&&(ka.type="esriFieldTypeOID");if(-1===F.kebabDict.jsonValues.indexOf(ka.type))throw new d("feature-layer:invalid-field-type",`invalid type for field "${ka.name}"`,
{field:ka});}B={};this._requiredFields=[];for(var ea of E)"esriFieldTypeOID"!==ea.type&&"esriFieldTypeGlobalID"!==ea.type&&(ea.editable=null==ea.editable?!0:!!ea.editable,ea.nullable=null==ea.nullable?!0:!!ea.nullable,n=V.getFieldDefaultValue(ea),ea.nullable||void 0!==n?B[ea.name]=n:this._requiredFields.push(ea));this._fieldsIndex=new I(E);this._createDefaultAttributes=fa.createDefaultAttributesFunction(B,Z);P&&(P.startTimeField&&((ea=this._fieldsIndex.get(P.startTimeField))?(P.startTimeField=ea.name,
ea.type="esriFieldTypeDate"):P.startTimeField=null),P.endTimeField&&((ea=this._fieldsIndex.get(P.endTimeField))?(P.endTimeField=ea.name,ea.type="esriFieldTypeDate"):P.endTimeField=null),P.trackIdField&&((ea=this._fieldsIndex.get(P.trackIdField))?P.trackIdField=ea.name:(P.trackIdField=null,W.push({name:"feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:P}}))),P.startTimeField||P.endTimeField||(W.push({name:"feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing or invalid",
details:{timeInfo:P}}),P=null));W={warnings:W,featureErrors:[],layerDefinition:{...A,drawingInfo:fa.createDrawingInfo(J),templates:fa.createDefaultTemplate(B),extent:z,geometryType:J,objectIdField:Z,fields:E,hasZ:!!Q,hasM:!!N,timeInfo:P},assignedObjectIds:{}};this._queryEngine=new v["default"]({fields:E,geometryType:J,hasM:N,hasZ:Q,objectIdField:Z,spatialReference:m,featureStore:new H({geometryType:J,hasM:N,hasZ:Q}),timeInfo:P,cacheSpatialQueries:!0});if(!ja||!ja.length)return this._nextObjectId=
h.initialObjectId,W;this._nextObjectId=h.findLastObjectIdFromFeatures(Z,ja)+1;yield l.checkProjectionSupport(ja,m);return this._loadInitialFeatures(W,ja)});return function(P){return M.apply(this,arguments)}}();C.applyEdits=function(){var M=q._asyncToGenerator(function*(P){const {spatialReference:W,geometryType:ja}=this._queryEngine;yield Promise.all([aa.loadGeometryEngineForSimplify(W,ja),l.checkProjectionSupport(P.adds,W),l.checkProjectionSupport(P.updates,W)]);return this._applyEdits(P)});return function(P){return M.apply(this,
arguments)}}();C.queryFeatures=function(M,P={}){return this._queryEngine.executeQuery(M,P.signal)};C.queryFeatureCount=function(M,P={}){return this._queryEngine.executeQueryForCount(M,P.signal)};C.queryObjectIds=function(M,P={}){return this._queryEngine.executeQueryForIds(M,P.signal)};C.queryExtent=function(M,P={}){return this._queryEngine.executeQueryForExtent(M,P.signal)};C.querySnapping=function(M,P={}){return this._queryEngine.executeQueryForSnapping(M,P.signal)};C._inferLayerProperties=function(M,
P){let W=void 0,ja=void 0,B=null,E=null,N=null;for(const Q of M)if(M=Q.geometry,!ia.isNone(M)&&(B||(B=ha.getJsonType(M)),E||(E=M.spatialReference),null==W&&(W=e(M)),null==ja&&(ja=r(M)),B&&E&&null!=W&&null!=ja))break;if(P&&P.length){let Q=null;P.some(n=>{const m="esriFieldTypeOID"===n.type,z=!n.type&&n.name&&"objectid"===n.name.toLowerCase();Q=n;return m||z})&&(N=Q.name)}return{geometryType:B,spatialReference:E,objectIdField:N,hasM:ja,hasZ:W}};C._loadInitialFeatures=function(M,P){const {geometryType:W,
hasM:ja,hasZ:B,objectIdField:E,spatialReference:N,featureStore:Q}=this._queryEngine,n=[];for(const m of P){null!=m.uid&&(M.assignedObjectIds[m.uid]=-1);if(m.geometry&&W!==ha.getJsonType(m.geometry)){M.featureErrors.push(aa.createFeatureEditErrorResult("Incorrect geometry type."));continue}P=this._createDefaultAttributes();const z=aa.mixAttributes(this._fieldsIndex,P,m.attributes,this._requiredFields,!0,M.warnings);z?M.featureErrors.push(z):(this._assignObjectId(P,m.attributes,!0),m.attributes=P,null!=
m.uid&&(M.assignedObjectIds[m.uid]=m.attributes[E]),ia.isSome(m.geometry)&&(m.geometry=l.project(m.geometry,m.geometry.spatialReference,N)),n.push(m))}Q.addMany(t.convertFromFeatures([],n,W,B,ja,E));M.layerDefinition.extent=this._queryEngine.fullExtent;if(M.layerDefinition.timeInfo){const {start:m,end:z}=this._queryEngine.timeExtent;M.layerDefinition.timeInfo.timeExtent=[m,z]}return M};C._applyEdits=function(M){const {adds:P,updates:W,deletes:ja}=M;M={addResults:[],deleteResults:[],updateResults:[],
uidToObjectId:{}};P&&P.length&&this._applyAddEdits(M,P);W&&W.length&&this._applyUpdateEdits(M,W);if(ja&&ja.length){for(const B of ja)M.deleteResults.push(aa.createFeatureEditSuccessResult(B));this._queryEngine.featureStore.removeManyById(ja)}return{fullExtent:this._queryEngine.fullExtent,featureEditResults:M}};C._applyAddEdits=function(M,P){const {addResults:W}=M,{geometryType:ja,hasM:B,hasZ:E,objectIdField:N,spatialReference:Q,featureStore:n}=this._queryEngine,m=[];for(const z of P){if(z.geometry&&
ja!==ha.getJsonType(z.geometry)){W.push(aa.createFeatureEditErrorResult("Incorrect geometry type."));continue}P=this._createDefaultAttributes();const J=aa.mixAttributes(this._fieldsIndex,P,z.attributes,this._requiredFields);J?W.push(J):(this._assignObjectId(P,z.attributes),z.attributes=P,null!=z.uid&&(M.uidToObjectId[z.uid]=z.attributes[N]),ia.isSome(z.geometry)&&(z.geometry=l.project(aa.simplify(z.geometry,Q),z.geometry.spatialReference,Q)),m.push(z),W.push(aa.createFeatureEditSuccessResult(z.attributes[N])))}n.addMany(t.convertFromFeatures([],
m,ja,E,B,N))};C._applyUpdateEdits=function({updateResults:M},P){const {geometryType:W,hasM:ja,hasZ:B,objectIdField:E,spatialReference:N,featureStore:Q}=this._queryEngine;for(const n of P){const {attributes:m,geometry:z}=n;P=m&&m[E];if(null==P){M.push(aa.createFeatureEditErrorResult(`Identifier field ${E} missing`));continue}if(!Q.has(P)){M.push(aa.createFeatureEditErrorResult(`Feature with object id ${P} missing`));continue}const J=t.convertToFeature(Q.getFeature(P),W,B,ja);if(ia.isSome(z)){if(W!==
ha.getJsonType(z)){M.push(aa.createFeatureEditErrorResult("Incorrect geometry type."));continue}J.geometry=l.project(aa.simplify(z,N),z.spatialReference,N)}if(m){const Z=aa.mixAttributes(this._fieldsIndex,J.attributes,m,this._requiredFields);if(Z){M.push(Z);continue}}Q.add(t.convertFromFeature(J,W,B,ja,E));M.push(aa.createFeatureEditSuccessResult(P))}};C._assignObjectId=function(M,P,W=!1){const ja=this._queryEngine.objectIdField;W?P&&isFinite(P[ja])?M[ja]=P[ja]:M[ja]=this._nextObjectId++:M[ja]=this._nextObjectId++};
return G}()});