// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.21/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(t,d,ha,fa,r,w,g,J){function l(f,x){return f?x?4:3:x?3:2}function y(f,x,M,P){if(f){if(M)return x&&P?c:Ra;if(x&&P)return gb}else if(x&&P)return Ra;return Ca}function ea({scale:f,translate:x},M){return Math.round((M-x[0])/f[0])}function aa({scale:f,
translate:x},M){return Math.round((x[1]-M)/f[1])}function I({scale:f,translate:x},M){return M*f[0]+x[0]}function F({scale:f,translate:x},M){return x[1]-M*f[1]}function T(f){f=f.coords;return{x:f[0],y:f[1]}}function e(f,x){f.coords[0]=x.x;f.coords[1]=x.y;return f}function u(f){f=f.coords;return{x:f[0],y:f[1],z:f[2]}}function v(f,x){f.coords[0]=x.x;f.coords[1]=x.y;f.coords[2]=x.z;return f}function K(f){f=f.coords;return{x:f[0],y:f[1],m:f[2]}}function p(f,x){f.coords[0]=x.x;f.coords[1]=x.y;f.coords[2]=
x.m;return f}function q(f){f=f.coords;return{x:f[0],y:f[1],z:f[2],m:f[3]}}function B(f,x){f.coords[0]=x.x;f.coords[1]=x.y;f.coords[2]=x.z;f.coords[3]=x.m;return f}function Q(f,x){return f&&x?B:f?v:x?p:e}function Y(f,x,M,P,ba){M=Q(M,P);for(const X of x){const {geometry:z,attributes:H}=X;let V;z&&(V=M(new J,z));f.push(new w["default"](V,H,null,H[ba]))}return f}function W(f,x,M,P){for(const ba of x){const {geometry:X,attributes:z}=ba;let H;X&&(H=ja(X,M,P));f.push({attributes:z,geometry:H})}return f}
function ja(f,x,M){if(fa.isNone(f))return null;const P=l(x,M),ba=[];for(let X=0;X<f.coords.length;X+=P){const z=[];for(let H=0;H<P;H++)z.push(f.coords[X+H]);ba.push(z)}return x?M?{points:ba,hasZ:x,hasM:M}:{points:ba,hasZ:x}:M?{points:ba,hasM:M}:{points:ba}}function E(f,x,M,P,ba){M=l(M,P);for(const X of x){x=X.geometry;P=X.attributes;let z;x&&(z=G(new J,x,M));f.push(new w["default"](z,P,null,P[ba]))}return f}function G(f,x,M=l(x.hasZ,x.hasM)){f.lengths[0]=x.points.length;const P=f.coords;let ba=0;
for(const X of x.points)for(x=0;x<M;x++)P[ba++]=X[x];return f}function O(f,x,M){if(!f)return null;const P=l(x,M),{coords:ba,lengths:X}=f;f=[];let z=0;for(const H of X){const V=[];for(let ma=0;ma<H;ma++){const na=[];for(let sa=0;sa<P;sa++)na.push(ba[z++]);V.push(na)}f.push(V)}return x?M?{paths:f,hasZ:x,hasM:M}:{paths:f,hasZ:x}:M?{paths:f,hasM:M}:{paths:f}}function L(f,x,M,P,ba){M=l(M,P);for(const X of x){x=X.geometry;P=X.attributes;let z;x&&(z=m(new J,x,M));f.push(new w["default"](z,P,null,P[ba]))}return f}
function m(f,x,M=l(x.hasZ,x.hasM)){const {lengths:P,coords:ba}=f;let X=0;for(const z of x.paths){for(const H of z)for(x=0;x<M;x++)ba[X++]=H[x];P.push(z.length)}return f}function n(f,x,M){if(!f)return null;const P=l(x,M),{coords:ba,lengths:X}=f;f=[];let z=0;for(const H of X){const V=[];for(let ma=0;ma<H;ma++){const na=[];for(let sa=0;sa<P;sa++)na.push(ba[z++]);V.push(na)}f.push(V)}return x?M?{rings:f,hasZ:x,hasM:M}:{rings:f,hasZ:x}:M?{rings:f,hasM:M}:{rings:f}}function D(f,x,M,P,ba){for(const X of x){x=
X.geometry;const z=X.centroid,H=X.attributes;let V;x&&(V=N(new J,x,M,P));fa.isSome(z)?f.push(new w["default"](V,H,e(new J,z),H[ba])):f.push(new w["default"](V,H,null,H[ba]))}return f}function N(f,x,M=x.hasZ,P=x.hasM){da(f,x.rings,M,P);return f}function da(f,x,M,P){M=l(M,P);const {lengths:ba,coords:X}=f;P=0;ba.length=X.length=0;for(const z of x){for(const H of z)for(x=0;x<M;x++)X[P++]=H[x];ba.push(z.length)}return f}function ia(f,x,M,P,ba,X){f.length=0;if(!M){for(const z of x)f.push(new w["default"](null,
z.attributes,null,z.attributes[X]));return f}switch(M){case "esriGeometryPoint":return Y(f,x,P,ba,X);case "esriGeometryMultipoint":return E(f,x,P,ba,X);case "esriGeometryPolyline":return L(f,x,P,ba,X);case "esriGeometryPolygon":return D(f,x,P,ba,X);default:Ta.error("convertToFeatureSet:unknown-geometry",new d(`Unable to parse unknown geometry type '${M}'`)),f.length=0}return f}function la(f,x,M,P){f=f&&("coords"in f?f:f.geometry);if(fa.isNone(f))return null;switch(x){case "esriGeometryPoint":return x=
T,M&&P?x=q:M?x=u:P&&(x=K),x(f);case "esriGeometryMultipoint":return ja(f,M,P);case "esriGeometryPolyline":return O(f,M,P);case "esriGeometryPolygon":return n(f,M,P);default:Ta.error("convertToGeometry:unknown-geometry",new d(`Unable to parse unknown geometry type '${x}'`))}}function ra(f,x,M,P,ba){f.length=0;if(fa.isNone(M)){for(const H of x)f.push({attributes:H.attributes});return f}switch(M){case "esriGeometryPoint":var X=T;P&&ba?X=q:P?X=u:ba&&(X=K);for(var z of x){const {geometry:H,attributes:V}=
z;P=fa.isSome(H)?X(H):null;f.push({attributes:V,geometry:P})}break;case "esriGeometryMultipoint":return W(f,x,P,ba);case "esriGeometryPolyline":for(const H of x){const {geometry:V,attributes:ma}=H;let na;fa.isSome(V)&&(na=O(V,P,ba));f.push({attributes:ma,geometry:na})}break;case "esriGeometryPolygon":for(X of x){const {geometry:H,attributes:V,centroid:ma}=X;let na;fa.isSome(H)&&(na=n(H,P,ba));ma?(z=T(ma),f.push({attributes:V,centroid:z,geometry:na})):f.push({attributes:V,geometry:na})}break;default:Ta.error("convertToFeatureSet:unknown-geometry",
new d(`Unable to parse unknown geometry type '${M}'`))}return f}function ya(f,x,M,P,ba,X,z=M,H=P){f.lengths.length&&(f.lengths.length=0);f.coords.length&&(f.coords.length=0);if(fa.isNone(x)||!x.coords.length)return null;ba=Ka[ba];const {coords:V,lengths:ma}=x;x=l(M,P);const na=l(M&&z,P&&H);M=y(M,P,z,H);if(!ma.length)return M(f.coords,V,0,0,ea(X,V[0]),aa(X,V[1])),f.lengths.length&&(f.lengths.length=0),f.coords.length=x,f;let sa,ua=0,wa,Ia=0;for(const Fa of ma){if(Fa<ba)continue;let Ea=0;wa=Ia;H=P=
ea(X,V[ua]);sa=z=aa(X,V[ua+1]);M(f.coords,V,wa,ua,H,sa);Ea++;ua+=x;wa+=na;for(let za=1;za<Fa;za++,ua+=x)if(H=ea(X,V[ua]),sa=aa(X,V[ua+1]),H!==P||sa!==z)M(f.coords,V,wa,ua,H-P,sa-z),wa+=na,Ea++,P=H,z=sa;Ea>=ba&&(f.lengths.push(Ea),Ia=wa)}f.coords.length=Ia;return f.coords.length?f:null}function xa(f,x,M,P,ba,X,z){let H=P,V=0;for(let na=X+M;na<z;na+=M){{var ma=x[na];const sa=x[na+1],ua=x[z],wa=x[z+1];let Ia=x[X],Fa=x[X+1],Ea=ua-Ia,za=wa-Fa;if(0!==Ea||0!==za){const Da=((ma-Ia)*Ea+(sa-Fa)*za)/(Ea*Ea+
za*za);1<Da?(Ia=ua,Fa=wa):0<Da&&(Ia+=Ea*Da,Fa+=za*Da)}Ea=ma-Ia;za=sa-Fa;ma=Ea*Ea+za*za}ma>H&&(V=na,H=ma)}H>P&&(V-X>M&&xa(f,x,M,P,ba,X,V),ba(f,x,f.length,V,x[V],x[V+1]),z-V>M&&xa(f,x,M,P,ba,V,z))}function Ba(f,x,M,P,ba){const {coords:X,lengths:z}=x,H=M?P?c:Ra:P?Ra:Ca;M=l(M,P);if(!X.length)return f!==x&&(f.lengths.length=0,f.coords.length=0),f;if(!z.length)return H(f.coords,X,0,0,I(ba,X[0]),F(ba,X[1])),f!==x&&(f.lengths.length=0,f.coords.length=M),f;const [V,ma]=ba.scale;P=0;for(let na=0;na<z.length;na++){const sa=
z[na];f.lengths[na]=sa;let ua=I(ba,X[P]),wa=F(ba,X[P+1]);H(f.coords,X,P,P,ua,wa);P+=M;for(let Ia=1;Ia<sa;Ia++,P+=M)ua+=X[P]*V,wa-=X[P+1]*ma,H(f.coords,X,P,P,ua,wa)}f!==x&&(f.lengths.length=z.length,f.coords.length=X.length);return f}function Na(f,x,M,P){let ba=0,X=f[P*x],z=f[P*(x+1)];for(let H=1;H<M;H++){const V=X+f[P*(x+H)],ma=z+f[P*(x+H)+1],na=(V-X)*(ma+z);X=V;z=ma;ba+=na}return.5*ba}const Ta=ha.getLogger("esri.tasks.support.optimizedFeatureSet"),Ka={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,
esriGeometryMultipoint:0},Ca=(f,x,M,P,ba,X)=>{f[M]=ba;f[M+1]=X},Ra=(f,x,M,P,ba,X)=>{f[M]=ba;f[M+1]=X;f[M+2]=x[P+2]},gb=(f,x,M,P,ba,X)=>{f[M]=ba;f[M+1]=X;f[M+2]=x[P+3]},c=(f,x,M,P,ba,X)=>{f[M]=ba;f[M+1]=X;f[M+2]=x[P+2];f[M+3]=x[P+3]},k=[],U=[];t.convertFromFeature=function(f,x,M,P,ba){k[0]=f;[f]=ia(U,k,x,M,P,ba);k.length=U.length=0;return f};t.convertFromFeatureSet=function(f,x){const M=new g,{hasM:P,hasZ:ba,features:X,objectIdFieldName:z,spatialReference:H,geometryType:V,exceededTransferLimit:ma,
transform:na,fields:sa}=f;sa&&(M.fields=sa);M.geometryType=V;M.objectIdFieldName=z||x;M.spatialReference=H;if(!M.objectIdFieldName)return Ta.error(new d("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),M;X&&ia(M.features,X,V,ba,P,M.objectIdFieldName);ma&&(M.exceededTransferLimit=ma);P&&(M.hasM=P);ba&&(M.hasZ=ba);na&&(M.transform=na);return M};t.convertFromFeatures=ia;t.convertFromGeometry=function(f,x,M){if(fa.isNone(f))return null;const P=new J;"hasZ"in f&&null==x&&
(x=f.hasZ);"hasM"in f&&null==M&&(M=f.hasM);if(r.isPoint(f))return Q(null!=x?x:null!=f.z,null!=M?M:null!=f.m)(P,f);if(r.isPolygon(f))return N(P,f,x,M);if(r.isPolyline(f))return m(P,f,l(x,M));if(r.isMultipoint(f))return G(P,f,l(x,M));Ta.error("convertFromGeometry:unknown-geometry",new d(`Unable to parse unknown geometry type '${f}'`))};t.convertFromGraphics=function(f,x,M,P,ba,X){const z=f.length;switch(M){case "esriGeometryPoint":Y(f,x,P,ba,X);break;case "esriGeometryMultipoint":E(f,x,P,ba,X);break;
case "esriGeometryPolyline":L(f,x,P,ba,X);break;case "esriGeometryPolygon":D(f,x,P,ba,X);break;default:Ta.error("convertToFeatureSet:unknown-geometry",new d(`Unable to parse unknown geometry type '${M}'`))}for(P=0;P<x.length;P++)f[P+z].geometryType=M,f[P+z].insertAfter=x[P].insertAfter,f[P+z].groupId=x[P].groupId;return f};t.convertFromMultipoint=G;t.convertFromMultipointFeatures=E;t.convertFromNestedArray=da;t.convertFromPoint=function(f,x,M=Q(null!=x.z,null!=x.m)){return M(f,x)};t.convertFromPointFeatures=
Y;t.convertFromPolygon=N;t.convertFromPolyline=m;t.convertFromPolylineFeatures=L;t.convertToFeature=function(f,x,M,P){U[0]=f;ra(k,U,x,M,P);f=k[0];k.length=U.length=0;return f};t.convertToFeatureSet=function(f){const {objectIdFieldName:x,spatialReference:M,transform:P,fields:ba,hasM:X,hasZ:z,features:H,geometryType:V,exceededTransferLimit:ma,uniqueIdField:na,queryGeometry:sa,queryGeometryType:ua}=f;f=ra([],H,V,z,X);const wa=la(sa,ua,!1,!1);f={features:f,fields:ba,geometryType:V,objectIdFieldName:x,
spatialReference:M,uniqueIdField:na,queryGeometry:wa};P&&(f.transform=P);ma&&(f.exceededTransferLimit=ma);X&&(f.hasM=X);z&&(f.hasZ=z);return f};t.convertToFeatures=ra;t.convertToGeometry=la;t.convertToMultipoint=ja;t.convertToMultipointFeatures=W;t.convertToPoint=function(f,x,M){return f?x?M?q(f):u(f):M?K(f):T(f):null};t.convertToPolygon=n;t.convertToPolyline=O;t.deltaDecodeGeometry=function(f,x){if(fa.isNone(f))return null;const M=f.clone(),P=f.coords;f=f.lengths;let ba=0;for(let H=0;H<f.length;H++){const V=
f[H];var X=P[x*ba],z=P[x*ba+1];for(let ma=1;ma<V;ma++)X+=P[x*(ba+ma)],z+=P[x*(ba+ma)+1],M.coords[x*(ba+ma)]=X,M.coords[x*(ba+ma)+1]=z;ba+=V}return M};t.deltaEncodeGeometry=function(f,x){const M=f.clone(),P=f.coords;f=f.lengths;let ba=0;for(let z=0;z<f.length;z++){const H=f[z];let V=P[x*ba];var X=P[x*ba+1];for(let ma=1;ma<H;ma++){const na=P[x*(ba+ma)],sa=P[x*(ba+ma)+1];X=sa-X;M.coords[x*(ba+ma)]=na-V;M.coords[x*(ba+ma)+1]=X;V=na;X=sa}ba+=H}return M};t.generalizeOptimizedGeometry=function(f,x,M,P,ba,
X,z=M,H=P){f.lengths.length&&(f.lengths.length=0);f.coords.length&&(f.coords.length=0);if(!x||!x.coords.length)return null;ba=Ka[ba];const {coords:V,lengths:ma}=x;x=l(M,P);const na=l(M&&z,P&&H);M=y(M,P,z,H);if(!ma.length)return M(f.coords,V,0,0,V[0],V[1]),f.lengths.length&&(f.lengths.length=0),f.coords.length=x,f;P=0;X*=X;for(const sa of ma){if(sa<ba){P+=sa*x;continue}z=f.coords.length/na;H=P;const ua=P+(sa-1)*x;M(f.coords,V,f.coords.length,H,V[H],V[H+1]);xa(f.coords,V,x,X,M,H,ua);M(f.coords,V,f.coords.length,
ua,V[ua],V[ua+1]);H=f.coords.length/na-z;H>=ba?f.lengths.push(H):f.coords.length=z*na;P+=sa*x}return f.coords.length?f:null};t.getBoundsOptimizedGeometry=function(f,x,M,P){if(fa.isNone(x)||!x.coords||!x.coords.length)return null;M=l(M,P);let ba=P=Number.POSITIVE_INFINITY,X=Number.NEGATIVE_INFINITY,z=Number.NEGATIVE_INFINITY;if(x&&x.coords){x=x.coords;for(let H=0;H<x.length;H+=M){const V=x[H],ma=x[H+1];P=Math.min(P,V);X=Math.max(X,V);ba=Math.min(ba,ma);z=Math.max(z,ma)}}f[0]=P;f[1]=ba;f[2]=X;f[3]=
z;return f};t.getQuantizedArea=function(f,x){const {coords:M,lengths:P}=f;let ba=f=0;for(let X=0;X<P.length;X++)ba+=Na(M,f,P[X],x),f+=X;return Math.abs(ba)};t.getQuantizedBoundsOptimizedGeometry=function(f,x,M,P){M=l(M,P);const {lengths:ba,coords:X}=x;P=x=Number.POSITIVE_INFINITY;let z=Number.NEGATIVE_INFINITY,H=Number.NEGATIVE_INFINITY,V=0;for(const ma of ba){let na=X[V],sa=X[V+1];x=Math.min(na,x);P=Math.min(sa,P);z=Math.max(na,z);H=Math.max(sa,H);V+=M;for(let ua=1;ua<ma;ua++,V+=M){const wa=X[V],
Ia=X[V+1];na+=wa;sa+=Ia;0>wa&&(x=Math.min(x,na));0<wa&&(z=Math.max(z,na));0>Ia?P=Math.min(P,sa):0<Ia&&(H=Math.max(H,sa))}}f[0]=x;f[1]=P;f[2]=z;f[3]=H;return f};t.getSignedQuantizedRingArea=Na;t.quantizeOptimizedFeatureSet=function(f,x){const {geometryType:M,features:P,hasM:ba,hasZ:X}=x;if(!f)return x;for(let z=0;z<P.length;z++){const H=P[z],V=H.weakClone();V.geometry=new J;ya(V.geometry,H.geometry,ba,X,M,f);H.centroid&&(V.centroid=new J,ya(V.centroid,H.centroid,ba,X,"esriGeometryPoint",f));P[z]=V}x.transform=
f;return x};t.quantizeOptimizedGeometry=ya;t.quantizeX=ea;t.quantizeY=aa;t.removeCollinearVectices=function(f,x,M,P,ba){if(!x||!x.coords||!x.coords.length)return null;M=Ka[M];const {coords:X,lengths:z}=x;x=y(P,ba,P,ba);P=l(P,ba);let H=ba=0,V=0,ma=0;for(const ua of z){H=ma;x(f.coords,X,H,ba,X[ba],X[ba+1]);ba+=P;var na=X[ba];let wa=X[ba+1],Ia=na,Fa=wa;var sa=wa/na;H+=P;x(f.coords,X,H,ba,Ia,Fa);ba+=P;for(let Ea=2;Ea<ua;Ea++){na=X[ba];wa=X[ba+1];const za=wa/na,Da=sa===za||!isFinite(sa)&&!isFinite(za);
sa=Da&&isFinite(za)?0<=sa&&0<=za||0>=sa&&0>=za:0<=Fa&&0<=wa||0>=Fa&&0>=wa;Da&&sa?(Ia+=na,Fa+=wa):(Ia=na,Fa=wa,H+=P);x(f.coords,X,H,ba,Ia,Fa);ba+=P;sa=za}H+=P;na=(H-ma)/P;na>=M&&(f.lengths[V]=na,ma=H,V++)}f.coords.length>ma&&(f.coords.length=ma);f.lengths.length>V&&(f.lengths.length=V);return f.coords.length&&f.lengths.length?f:null};t.removeZMValues=function(f,x,M,P,ba,X){const z=l(M,P);M=y(M,P,ba,X);P=x.coords;f.coords.length=0;f.lengths.length=0;f.lengths.push(...x.lengths);for(x=0;x<P.length;x+=
z)M(f.coords,P,f.coords.length,x,P[x],P[x+1]);return f};t.unquantizeOptimizedFeatureSet=function(f){const {transform:x,features:M,hasM:P,hasZ:ba}=f;if(!x)return f;for(const X of M)fa.isSome(X.geometry)&&Ba(X.geometry,X.geometry,P,ba,x),X.centroid&&Ba(X.centroid,X.centroid,P,ba,x);f.transform=null;return f};t.unquantizeOptimizedGeometry=Ba;t.unquantizeX=I;t.unquantizeY=F;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers",
"../../core/maybe"],function(t,d,ha){let fa=function(){function w(g=null,J={},l,y){this.geometry=g;this.attributes=J;this.centroid=l;this.objectId=y;this.geohashY=this.geohashX=this.displayId=0}w.prototype.weakClone=function(){const g=new w(this.geometry,this.attributes,this.centroid,this.objectId);g.displayId=this.displayId;g.geohashX=this.geohashX;g.geohashY=this.geohashY;return g};return w}(),r=function(w){function g(){return w.apply(this,arguments)||this}d._inheritsLoose(g,w);return g}(fa);t.OptimizedFeatureWithGeometry=
r;t["default"]=fa;t.hasGeometry=function(w){return!(ha.isNone(w.geometry)||!w.geometry.coords||!w.geometry.coords.length)};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function t(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=
!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}t.prototype.weakClone=function(){const d=new t;d.objectIdFieldName=this.objectIdFieldName;d.globalIdFieldName=this.globalIdFieldName;d.geohashFieldName=this.geohashFieldName;d.geometryProperties=this.geometryProperties;d.geometryType=this.geometryType;d.spatialReference=this.spatialReference;d.hasZ=this.hasZ;d.hasM=this.hasM;d.features=this.features;d.fields=this.fields;d.transform=this.transform;d.exceededTransferLimit=this.exceededTransferLimit;
d.uniqueIdField=this.uniqueIdField;d.queryGeometry=this.queryGeometry;d.queryGeometryType=this.queryGeometryType;return d};return t}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(t){return function(){function d(fa=[],r=[],w=!1){this.lengths=null!=fa?fa:[];this.coords=null!=r?r:[];this.hasIndeterminateRingOrder=w}var ha=d.prototype;ha.forEachVertex=function(fa){let r=0;this.lengths.length||fa(this.coords[0],this.coords[1]);for(let w=
0;w<this.lengths.length;w++){const g=this.lengths[w];for(let J=0;J<g;J++)fa(this.coords[2*(J+r)],this.coords[2*(J+r)+1]);r+=g}};ha.clone=function(fa){return fa?(fa.set(this.coords),new d(this.lengths.slice(),fa,this.hasIndeterminateRingOrder)):new d(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};t._createClass(d,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},{key:"size",get:function(){return this.lengths.reduce((fa,
r)=>fa+r)}}]);return d}()})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter".split(" "),function(t,d,ha,fa,r,w,g,J,l,y){return function(){function ea(I){this.geometryInfo=I;this._boundsStore=new l.BoundsStore;
this._featuresById=new Map;this._markedIds=new Set;this.events=new ha;this.featureAdapter=y.optimizedFeatureQueryEngineAdapter}var aa=ea.prototype;aa.add=function(I){this._add(I);this._emitChanged()};aa.addMany=function(I){for(const F of I)this._add(F);this._emitChanged()};aa.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};aa.removeById=function(I){I=this._featuresById.get(I);if(!I)return null;this._remove(I);this._emitChanged();return I};aa.removeManyById=
function(I){this._boundsStore.invalidateIndex();for(const F of I)(I=this._featuresById.get(F))&&this._remove(I);this._emitChanged()};aa.forEachBounds=function(I,F,T){for(const e of I)(I=this._boundsStore.get(e.objectId))&&F(w.fromRect(T,I))};aa.getFeature=function(I){return this._featuresById.get(I)};aa.has=function(I){return this._featuresById.has(I)};aa.forEach=function(I){this._featuresById.forEach(F=>I(F))};aa.forEachInBounds=function(I,F){this._boundsStore.forEachInBounds(I,T=>{F(this._featuresById.get(T))})};
aa.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};aa.sweep=function(){let I=!1;this._featuresById.forEach((F,T)=>{this._markedIds.has(T)||(I=!0,this._remove(F))});this._markedIds.clear();I&&this._emitChanged()};aa._emitChanged=function(){this.events.emit("changed",void 0)};aa._add=function(I){if(I){var F=I.objectId;if(null==F)fa.getLogger("esri.layers.graphics.data.FeatureStore").error(new d("featurestore:invalid-feature","feature id is missing",{feature:I}));
else{var T=this._featuresById.get(F);this._markedIds.add(F);if(T){I.displayId=T.displayId;var e=this._boundsStore.get(F);this._boundsStore.delete(F)}else if(r.isSome(this.onFeatureAdd))this.onFeatureAdd(I);!r.isNone(I.geometry)&&I.geometry.coords&&I.geometry.coords.length?(e=J.getBoundsOptimizedGeometry(r.isSome(e)?e:g.create(),I.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),r.isSome(e)&&this._boundsStore.set(F,e)):this._boundsStore.set(F,null);this._featuresById.set(F,I)}}};aa._remove=
function(I){if(r.isSome(this.onFeatureRemove))this.onFeatureRemove(I);this._markedIds.delete(I.objectId);this._boundsStore.delete(I.objectId);this._featuresById.delete(I.objectId);return I};t._createClass(ea,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){if(!this.numFeatures)return null;
const I=g.create(g.NEGATIVE_INFINITY);this._featuresById.forEach(F=>{if(F=this._boundsStore.get(F.objectId))I[0]=Math.min(F[0],I[0]),I[1]=Math.min(F[1],I[1]),I[2]=Math.max(F[2],I[2]),I[3]=Math.max(F[3],I[3])});return I}},{key:"storeStatistics",get:function(){let I=0;this._featuresById.forEach(F=>{r.isSome(F.geometry)&&F.geometry.coords&&(I+=F.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:I/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);return ea}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers",
"../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(t,d,ha,fa,r){let w=function(){function g(){this._emitter=new g.EventEmitter(this)}var J=g.prototype;J.emit=function(l,y){return this._emitter.emit(l,y)};J.on=function(l,y){return this._emitter.on(l,y)};J.once=function(l,y){return this._emitter.once(l,y)};J.hasEventListener=function(l){return this._emitter.hasEventListener(l)};return g}();(function(g){let J=function(){function y(aa=null){this.target=
aa;this._listenersMap=null}var ea=y.prototype;ea.clear=function(){this._listenersMap&&this._listenersMap.clear();this._listenersMap=null};ea.emit=function(aa,I){aa=this._listenersMap&&this._listenersMap.get(aa);if(!aa)return!1;const F=this.target||this;[...aa].forEach(T=>{T.call(F,I)});return 0<aa.length};ea.on=function(aa,I){if(Array.isArray(aa)){var F=aa.map(T=>this.on(T,I));return fa.handlesGroup(F)}if(-1<aa.indexOf(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");
this._listenersMap||(this._listenersMap=new Map);F=this._listenersMap.get(aa)||[];F.push(I);this._listenersMap.set(aa,F);return{remove:()=>{const T=this._listenersMap&&this._listenersMap.get(aa)||[],e=T.indexOf(I);0<=e&&T.splice(e,1)}}};ea.once=function(aa,I){const F=this.on(aa,T=>{F.remove();I.call(null,T)});return F};ea.hasEventListener=function(aa){aa=this._listenersMap&&this._listenersMap.get(aa);return null!=aa&&0<aa.length};return y}();g.EventEmitter=J;g.EventedMixin=y=>{y=function(ea){function aa(){var F=
ea.apply(this,arguments)||this;F._emitter=new J;return F}t._inheritsLoose(aa,ea);var I=aa.prototype;I.destroy=function(){this._emitter.clear()};I.emit=function(F,T){return this._emitter.emit(F,T)};I.on=function(F,T){return this._emitter.on(F,T)};I.once=function(F,T){return this._emitter.once(F,T)};I.hasEventListener=function(F){return this._emitter.hasEventListener(F)};return aa}(y);return y=d.__decorate([r.subclass("esri.core.Evented")],y)};let l=function(y){function ea(){var I=y.apply(this,arguments)||
this;I._emitter=new w.EventEmitter(t._assertThisInitialized(I));return I}t._inheritsLoose(ea,y);var aa=ea.prototype;aa.destroy=function(){this._emitter.clear()};aa.emit=function(I,F){return this._emitter.emit(I,F)};aa.on=function(I,F){return this._emitter.on(I,F)};aa.once=function(I,F){return this._emitter.once(I,F)};aa.hasEventListener=function(I){return this._emitter.hasEventListener(I)};return ea}(ha);l=d.__decorate([r.subclass("esri.core.Evented")],l);g.EventedAccessor=l})(w||(w={}));return w})},
"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe","../Extent","./aaBoundingRect"],function(t,d,ha,fa){function r(e=F){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function w(e,u,v,K,p,q,B=r()){B[0]=e;B[1]=u;B[2]=v;B[3]=K;B[4]=p;B[5]=q;return B}function g(e){return e[0]>=e[3]?0:e[3]-e[0]}function J(e){return e[1]>=e[4]?0:e[4]-e[1]}function l(e){return e[2]>=e[5]?0:e[5]-e[2]}function y(e,u){return Math.max(u[0],e[0])<=Math.min(u[3],e[3])&&Math.max(u[1],e[1])<=Math.min(u[4],
e[4])&&Math.max(u[2],e[2])<=Math.min(u[5],e[5])}function ea(e,u){e[0]=u[0];e[1]=u[1];e[2]=u[2];e[3]=u[3];e[4]=u[4];e[5]=u[5];return e}function aa(e){return 6===e.length}const I=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],F=[0,0,0,0,0,0],T=r();t.NEGATIVE_INFINITY=I;t.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];t.ZERO=F;t.allFinite=function(e){for(let u=0;6>u;u++)if(!isFinite(e[u]))return!1;return!0};t.center=function(e,u=[0,0,0]){u[0]=e[0]+g(e)/2;u[1]=
e[1]+J(e)/2;u[2]=e[2]+l(e)/2;return u};t.contains=function(e,u){return u[0]>=e[0]&&u[1]>=e[1]&&u[2]>=e[2]&&u[3]<=e[3]&&u[4]<=e[4]&&u[5]<=e[5]};t.containsPoint=function(e,u){return u[0]>=e[0]&&u[1]>=e[1]&&u[2]>=e[2]&&u[0]<=e[3]&&u[1]<=e[4]&&u[2]<=e[5]};t.containsPointWithMargin=function(e,u,v){return u[0]>=e[0]-v&&u[1]>=e[1]-v&&u[2]>=e[2]-v&&u[0]<=e[3]+v&&u[1]<=e[4]+v&&u[2]<=e[5]+v};t.create=r;t.depth=J;t.diameter=function(e){const u=g(e),v=l(e);e=J(e);return Math.sqrt(u*u+v*v+e*e)};t.empty=function(e){return e?
ea(e,I):r(I)};t.equals=function(e,u,v){if(d.isNone(e)||d.isNone(u))return e===u;if(!aa(e)||!aa(u))return!1;if(v)for(let K=0;K<e.length;K++){if(!v(e[K],u[K]))return!1}else for(v=0;v<e.length;v++)if(e[v]!==u[v])return!1;return!0};t.expandWithAABB=function(e,u){e[0]=Math.min(e[0],u[0]);e[1]=Math.min(e[1],u[1]);e[2]=Math.min(e[2],u[2]);e[3]=Math.max(e[3],u[3]);e[4]=Math.max(e[4],u[4]);e[5]=Math.max(e[5],u[5])};t.expandWithBuffer=function(e,u,v=0,K=u.length/3){let p=e[0],q=e[1],B=e[2],Q=e[3],Y=e[4],W=
e[5];for(let ja=0;ja<K;ja++)p=Math.min(p,u[v+3*ja]),q=Math.min(q,u[v+3*ja+1]),B=Math.min(B,u[v+3*ja+2]),Q=Math.max(Q,u[v+3*ja]),Y=Math.max(Y,u[v+3*ja+1]),W=Math.max(W,u[v+3*ja+2]);e[0]=p;e[1]=q;e[2]=B;e[3]=Q;e[4]=Y;e[5]=W};t.expandWithNestedArray=function(e,u,v){const K=u.length;let p=e[0],q=e[1],B=e[2],Q=e[3],Y=e[4],W=e[5];if(v)for(v=0;v<K;v++){var ja=u[v];p=Math.min(p,ja[0]);q=Math.min(q,ja[1]);B=Math.min(B,ja[2]);Q=Math.max(Q,ja[0]);Y=Math.max(Y,ja[1]);W=Math.max(W,ja[2])}else for(v=0;v<K;v++)ja=
u[v],p=Math.min(p,ja[0]),q=Math.min(q,ja[1]),Q=Math.max(Q,ja[0]),Y=Math.max(Y,ja[1]);e[0]=p;e[1]=q;e[2]=B;e[3]=Q;e[4]=Y;e[5]=W};t.expandWithOffset=function(e,u,v,K){e[0]=Math.min(e[0],e[0]+u);e[3]=Math.max(e[3],e[3]+u);e[1]=Math.min(e[1],e[1]+v);e[4]=Math.max(e[4],e[4]+v);e[2]=Math.min(e[2],e[2]+K);e[5]=Math.max(e[5],e[5]+K)};t.expandWithRect=function(e,u){e[0]=Math.min(e[0],u[0]);e[1]=Math.min(e[1],u[1]);e[3]=Math.max(e[3],u[2]);e[4]=Math.max(e[4],u[3])};t.expandWithVec3=function(e,u){e[0]=Math.min(e[0],
u[0]);e[1]=Math.min(e[1],u[1]);e[2]=Math.min(e[2],u[2]);e[3]=Math.max(e[3],u[0]);e[4]=Math.max(e[4],u[1]);e[5]=Math.max(e[5],u[2])};t.fromExtent=function(e,u=r()){u[0]=e.xmin;u[1]=e.ymin;u[2]=e.zmin;u[3]=e.xmax;u[4]=e.ymax;u[5]=e.zmax;return u};t.fromMinMax=function(e,u,v=r()){v[0]=e[0];v[1]=e[1];v[2]=e[2];v[3]=u[0];v[4]=u[1];v[5]=u[2];return v};t.fromRect=function(e,u){e[0]=u[0];e[1]=u[1];e[2]=Number.NEGATIVE_INFINITY;e[3]=u[2];e[4]=u[3];e[5]=Number.POSITIVE_INFINITY;return e};t.fromValues=w;t.getMax=
function(e,u){u[0]=e[3];u[1]=e[4];u[2]=e[5];return u};t.getMin=function(e,u){u[0]=e[0];u[1]=e[1];u[2]=e[2];return u};t.height=l;t.intersects=y;t.intersectsClippingArea=function(e,u){return d.isNone(u)?!0:y(e,u)};t.is=aa;t.isPoint=function(e){return 0===g(e)&&0===J(e)&&0===l(e)};t.maximumDimension=function(e){return Math.max(g(e),l(e),J(e))};t.offset=function(e,u,v,K,p=e){p[0]=e[0]+u;p[1]=e[1]+v;p[2]=e[2]+K;p[3]=e[3]+u;p[4]=e[4]+v;p[5]=e[5]+K;return p};t.scale=function(e,u,v=e){const K=e[0]+g(e)/2,
p=e[1]+J(e)/2,q=e[2]+l(e)/2;v[0]=K+(e[0]-K)*u;v[1]=p+(e[1]-p)*u;v[2]=q+(e[2]-q)*u;v[3]=K+(e[3]-K)*u;v[4]=p+(e[4]-p)*u;v[5]=q+(e[5]-q)*u;return v};t.set=ea;t.setMax=function(e,u,v=e){v[3]=u[0];v[4]=u[1];v[5]=u[2];v!==e&&(v[0]=e[0],v[1]=e[1],v[2]=e[2]);return e};t.setMin=function(e,u,v=e){v[0]=u[0];v[1]=u[1];v[2]=u[2];v!==e&&(v[3]=e[3],v[4]=e[4],v[5]=e[5]);return v};t.size=function(e,u=[0,0,0]){u[0]=g(e);u[1]=J(e);u[2]=l(e);return u};t.toExtent=function(e,u){return isFinite(e[2])||isFinite(e[5])?new ha({xmin:e[0],
xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:u}):new ha({xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:u})};t.toRect=function(e,u){u||(u=fa.create());u[0]=e[0];u[1]=e[1];u[2]=e[3];u[3]=e[4];return u};t.width=g;t.wrap=function(e,u,v,K,p,q){return w(e,u,v,K,p,q,T)};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../Extent"],function(t,d,
ha,fa,r){function w(F=I){return[F[0],F[1],F[2],F[3]]}function g(F,T){F!==T&&(F[0]=T[0],F[1]=T[1],F[2]=T[2],F[3]=T[3]);return F}function J(F){return fa.isNone(F)||F[0]>=F[2]?0:F[2]-F[0]}function l(F){return F[1]>=F[3]?0:F[3]-F[1]}function y(F,T,e){return T>=F[0]&&e>=F[1]&&T<=F[2]&&e<=F[3]}function ea(F){return null!=F&&4===F.length}const aa=[Infinity,Infinity,-Infinity,-Infinity],I=[0,0,0,0];t.NEGATIVE_INFINITY=aa;t.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];t.UNIT=[0,0,1,1];t.ZERO=
I;t.allFinite=function(F){for(let T=0;4>T;T++)if(!isFinite(F[T]))return!1;return!0};t.area=function(F){return J(F)*l(F)};t.center=function(F,T=[0,0]){T[0]=(F[0]+F[2])/2;T[1]=(F[1]+F[3])/2;return T};t.clone=function(F){return[F[0],F[1],F[2],F[3]]};t.contains=function(F,T){return T[0]>=F[0]&&T[2]<=F[2]&&T[1]>=F[1]&&T[3]<=F[3]};t.containsPoint=function(F,T){return y(F,T[0],T[1])};t.containsPointObject=function(F,T){return y(F,T.x,T.y)};t.containsPointWithMargin=function(F,T,e){return T[0]>=F[0]-e&&T[1]>=
F[1]-e&&T[0]<=F[2]+e&&T[1]<=F[3]+e};t.containsXY=y;t.copy=g;t.create=w;t.distance=function(F,T){const e=(F[1]+F[3])/2,u=Math.max(Math.abs(T[0]-(F[0]+F[2])/2)-J(F)/2,0);F=Math.max(Math.abs(T[1]-e)-l(F)/2,0);return Math.sqrt(u*u+F*F)};t.empty=function(F){return F?g(F,aa):w(aa)};t.equals=function(F,T){return ea(F)&&ea(T)?F[0]===T[0]&&F[1]===T[1]&&F[2]===T[2]&&F[3]===T[3]:F===T};t.expand=function(F,T,e){if(fa.isNone(T))g(e,F);else if("length"in T)if(ea(T))e[0]=Math.min(F[0],T[0]),e[1]=Math.min(F[1],T[1]),
e[2]=Math.max(F[2],T[2]),e[3]=Math.max(F[3],T[3]);else{if(2===T.length||3===T.length)e[0]=Math.min(F[0],T[0]),e[1]=Math.min(F[1],T[1]),e[2]=Math.max(F[2],T[0]),e[3]=Math.max(F[3],T[1])}else switch(T.type){case "extent":e[0]=Math.min(F[0],T.xmin);e[1]=Math.min(F[1],T.ymin);e[2]=Math.max(F[2],T.xmax);e[3]=Math.max(F[3],T.ymax);break;case "point":e[0]=Math.min(F[0],T.x),e[1]=Math.min(F[1],T.y),e[2]=Math.max(F[2],T.x),e[3]=Math.max(F[3],T.y)}};t.expandPointInPlace=function(F,T){T[0]<F[0]&&(F[0]=T[0]);
T[0]>F[2]&&(F[2]=T[0]);T[1]<F[1]&&(F[1]=T[1]);T[1]>F[3]&&(F[3]=T[1])};t.expandWithNestedArray=function(F,T,e=F){const u=T.length;let v=F[0],K=F[1],p=F[2];F=F[3];for(let q=0;q<u;q++){const B=T[q];v=Math.min(v,B[0]);K=Math.min(K,B[1]);p=Math.max(p,B[0]);F=Math.max(F,B[1])}e[0]=v;e[1]=K;e[2]=p;e[3]=F;return e};t.fromExtent=function(F,T=w()){T[0]=F.xmin;T[1]=F.ymin;T[2]=F.xmax;T[3]=F.ymax;return T};t.fromValues=function(F,T,e,u,v=w()){v[0]=F;v[1]=T;v[2]=e;v[3]=u;return v};t.height=l;t.intersection=function(F,
T,e){if(fa.isNone(T))return g(e,F);const u=T[0],v=T[1],K=T[2];T=T[3];e[0]=ha.clamp(F[0],u,K);e[1]=ha.clamp(F[1],v,T);e[2]=ha.clamp(F[2],u,K);e[3]=ha.clamp(F[3],v,T);return e};t.intersects=function(F,T){return Math.max(T[0],F[0])<=Math.min(T[2],F[2])&&Math.max(T[1],F[1])<=Math.min(T[3],F[3])};t.is=ea;t.isPoint=function(F){return(0===J(F)||!isFinite(F[0]))&&(0===l(F)||!isFinite(F[1]))};t.offset=function(F,T,e,u=F){u[0]=F[0]+T;u[1]=F[1]+e;u[2]=F[2]+T;u[3]=F[3]+e;return u};t.pad=function(F,T,e=F){e[0]=
F[0]-T;e[1]=F[1]-T;e[2]=F[2]+T;e[3]=F[3]+T;return e};t.setMax=function(F,T,e=F){e[2]=T[0];e[3]=T[1];e!==F&&(e[0]=F[0],e[1]=F[1]);return F};t.setMin=function(F,T,e=F){e[0]=T[0];e[1]=T[1];e!==F&&(e[2]=F[2],e[3]=F[3]);return e};t.size=function(F,T){T[0]=F[2]-F[0];T[1]=F[3]-F[1]};t.toExtent=function(F,T){return new r({xmin:F[0],ymin:F[1],xmax:F[2],ymax:F[3],spatialReference:T})};t.width=J;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports",
"../../../core/has","../../../core/libs/rbush/PooledRBush"],function(t,d,ha){function fa(g,J,l){r.minX=J[0];r.minY=J[1];r.maxX=J[2];r.maxY=J[3];g.search(r,l)}const r={minX:0,minY:0,maxX:0,maxY:0};let w=function(){function g(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new ha.PooledRBush(9,d("csp-restrictions")?l=>({minX:l[0],minY:l[1],maxX:l[2],maxY:l[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const l=
Array(this._idByBounds.size);let y=0;this._idByBounds.forEach((ea,aa)=>{l[y++]=aa});this._indexInvalid=!1;this._index.clear();this._index.load(l)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(l=>this._idByBounds.has(l))),this._boundsToLoad.length=0)}}var J=g.prototype;J.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};J.delete=function(l){const y=this._boundsById.get(l);this._boundsById.delete(l);
y&&(this._idByBounds.delete(y),this._indexInvalid||this._index.remove(y))};J.forEachInBounds=function(l,y){this._loadIndex();fa(this._index,l,ea=>y(this._idByBounds.get(ea)))};J.get=function(l){return this._boundsById.get(l)};J.has=function(l){return this._boundsById.has(l)};J.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};J.set=function(l,y){if(!this._indexInvalid){const ea=this._boundsById.get(l);ea&&(this._index.remove(ea),this._idByBounds.delete(ea))}this._boundsById.set(l,
y);y&&(this._idByBounds.set(y,l),this._indexInvalid||(this._boundsToLoad.push(y),5E4<this._boundsToLoad.length&&this._loadIndex()))};return g}();t.BoundsStore=w;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),function(t,d,ha,fa,r,w){function g(W,ja){J(W,0,W.children.length,ja,W)}function J(W,ja,E,G,O){O||
(O=new Q([]));O.minX=Infinity;O.minY=Infinity;O.maxX=-Infinity;O.maxY=-Infinity;for(let L=ja,m;L<E;L++)m=W.children[L],l(O,W.leaf?G(m):m);return O}function l(W,ja){W.minX=Math.min(W.minX,ja.minX);W.minY=Math.min(W.minY,ja.minY);W.maxX=Math.max(W.maxX,ja.maxX);W.maxY=Math.max(W.maxY,ja.maxY)}function y(W,ja){return W.minX-ja.minX}function ea(W,ja){return W.minY-ja.minY}function aa(W){return(W.maxX-W.minX)*(W.maxY-W.minY)}function I(W){return W.maxX-W.minX+(W.maxY-W.minY)}function F(W,ja){return W.minX<=
ja.minX&&W.minY<=ja.minY&&ja.maxX<=W.maxX&&ja.maxY<=W.maxY}function T(W,ja){return ja.minX<=W.maxX&&ja.minY<=W.maxY&&ja.maxX>=W.minX&&ja.maxY>=W.minY}function e(W,ja,E,G,O){for(ja=[ja,E];ja.length;){E=fa.assumeNonNull(ja.pop());const L=fa.assumeNonNull(ja.pop());if(E-L<=G)continue;const m=L+Math.ceil((E-L)/G/2)*G;w.quickselect(W,m,L,E,O);ja.push(L,m,m,E)}}let u=function(){function W(E=9,G){this.compareMinX=y;this.compareMinY=ea;this.toBBox=function(O){return O};this._maxEntries=Math.max(4,E||9);this._minEntries=
Math.max(2,Math.ceil(.4*this._maxEntries));G&&("function"===typeof G?this.toBBox=G:this._initFormat(G));this.clear()}var ja=W.prototype;ja.destroy=function(){this.clear();v.prune();K.prune();p.prune();q.prune()};ja.all=function(E){this._all(this.data,E)};ja.search=function(E,G){let O=this.data;const L=this.toBBox;if(T(E,O))for(v.clear();O;){for(let m=0,n=O.children.length;m<n;m++){const D=O.children[m],N=O.leaf?L(D):D;T(E,N)&&(O.leaf?G(D):F(E,N)?this._all(D,G):v.push(D))}O=v.pop()}};ja.collides=function(E){let G=
this.data;const O=this.toBBox;if(!T(E,G))return!1;for(v.clear();G;){for(let L=0,m=G.children.length;L<m;L++){const n=G.children[L],D=G.leaf?O(n):n;if(T(E,D)){if(G.leaf||F(E,D))return!0;v.push(n)}}G=v.pop()}return!1};ja.load=function(E){if(!E.length)return this;if(E.length<this._minEntries){for(let G=0,O=E.length;G<O;G++)this.insert(E[G]);return this}E=this._build(E.slice(0,E.length),0,E.length-1,0);if(this.data.children.length)if(this.data.height===E.height)this._splitRoot(this.data,E);else{if(this.data.height<
E.height){const G=this.data;this.data=E;E=G}this._insert(E,this.data.height-E.height-1,!0)}else this.data=E;return this};ja.insert=function(E){E&&this._insert(E,this.data.height-1);return this};ja.clear=function(){this.data=new Q([]);return this};ja.remove=function(E){if(!E)return this;let G=this.data,O=null,L=0,m=!1,n;const D=this.toBBox(E);p.clear();for(q.clear();G||0<p.length;){if(!G){var N;G=fa.assumeNonNull(p.pop());O=p.data[p.length-1];L=null!=(N=q.pop())?N:0;m=!0}if(G.leaf&&(n=ha.indexOf(G.children,
E,G.children.length,G.indexHint),-1!==n)){G.children.splice(n,1);p.push(G);this._condense(p);break}m||G.leaf||!F(G,D)?O?(L++,G=O.children[L],m=!1):G=null:(p.push(G),q.push(L),L=0,O=G,G=G.children[0])}return this};ja.toJSON=function(){return this.data};ja.fromJSON=function(E){this.data=E;return this};ja._all=function(E,G){for(K.clear();E;){var O;if(!0===E.leaf)for(const L of E.children)G(L);else K.pushArray(E.children);E=null!=(O=K.pop())?O:null}};ja._build=function(E,G,O,L){var m=O-G+1,n=this._maxEntries;
if(m<=n)return E=new Q(E.slice(G,O+1)),g(E,this.toBBox),E;L||(L=Math.ceil(Math.log(m)/Math.log(n)),n=Math.ceil(m/n**(L-1)));const D=new Y([]);D.height=L;m=Math.ceil(m/n);n=m*Math.ceil(Math.sqrt(n));for(e(E,G,O,n,this.compareMinX);G<=O;G+=n){const N=Math.min(G+n-1,O);e(E,G,N,m,this.compareMinY);for(let da=G;da<=N;da+=m)D.children.push(this._build(E,da,Math.min(da+m-1,N),L-1))}g(D,this.toBBox);return D};ja._chooseSubtree=function(E,G,O,L){for(;;){L.push(G);if(!0===G.leaf||L.length-1===O)break;let m=
Infinity,n=Infinity,D=void 0;for(let N=0,da=G.children.length;N<da;N++){const ia=G.children[N],la=aa(ia),ra=(Math.max(ia.maxX,E.maxX)-Math.min(ia.minX,E.minX))*(Math.max(ia.maxY,E.maxY)-Math.min(ia.minY,E.minY))-la;ra<n?(n=ra,m=la<m?la:m,D=ia):ra===n&&la<m&&(m=la,D=ia)}G=D||G.children[0]}return G};ja._insert=function(E,G,O){var L=this.toBBox;O=O?E:L(E);p.clear();L=this._chooseSubtree(O,this.data,G,p);L.children.push(E);for(l(L,O);0<=G;)if(p.data[G].children.length>this._maxEntries)this._split(p,G),
G--;else break;this._adjustParentBBoxes(O,p,G)};ja._split=function(E,G){const O=E.data[G];var L=O.children.length;const m=this._minEntries;this._chooseSplitAxis(O,m,L);(L=this._chooseSplitIndex(O,m,L))?(L=O.children.splice(L,O.children.length-L),L=O.leaf?new Q(L):new Y(L),L.height=O.height,g(O,this.toBBox),g(L,this.toBBox),G?E.data[G-1].children.push(L):this._splitRoot(O,L)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};ja._splitRoot=function(E,G){this.data=
new Y([E,G]);this.data.height=E.height+1;g(this.data,this.toBBox)};ja._chooseSplitIndex=function(E,G,O){let L,m,n=void 0;L=m=Infinity;for(let N=G;N<=O-G;N++){var D=J(E,0,N,this.toBBox);const da=J(E,N,O,this.toBBox),ia=Math.max(0,Math.min(D.maxX,da.maxX)-Math.max(D.minX,da.minX))*Math.max(0,Math.min(D.maxY,da.maxY)-Math.max(D.minY,da.minY));D=aa(D)+aa(da);ia<L?(L=ia,n=N,m=D<m?D:m):ia===L&&D<m&&(m=D,n=N)}return n};ja._chooseSplitAxis=function(E,G,O){const L=E.leaf?this.compareMinX:y,m=E.leaf?this.compareMinY:
ea,n=this._allDistMargin(E,G,O,L);G=this._allDistMargin(E,G,O,m);n<G&&E.children.sort(L)};ja._allDistMargin=function(E,G,O,L){E.children.sort(L);L=this.toBBox;var m=J(E,0,G,L);const n=J(E,O-G,O,L);let D=I(m)+I(n);for(let N=G;N<O-G;N++){const da=E.children[N];l(m,E.leaf?L(da):da);D+=I(m)}for(O=O-G-1;O>=G;O--)m=E.children[O],l(n,E.leaf?L(m):m),D+=I(n);return D};ja._adjustParentBBoxes=function(E,G,O){for(;0<=O;O--)l(G.data[O],E)};ja._condense=function(E){for(let G=E.length-1;0<=G;G--){const O=E.data[G];
if(0===O.children.length)if(0<G){const L=E.data[G-1],m=L.children;m.splice(ha.indexOf(m,O,m.length,L.indexHint),1)}else this.clear();else g(O,this.toBBox)}};ja._initFormat=function(E){const G=["return a"," - b",";"];this.compareMinX=new Function("a","b",G.join(E[0]));this.compareMinY=new Function("a","b",G.join(E[1]));this.toBBox=new Function("a","return {minX: a"+E[0]+", minY: a"+E[1]+", maxX: a"+E[2]+", maxY: a"+E[3]+"};")};return W}();const v=new r,K=new r,p=new r,q=new r({deallocator:void 0});
r=function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity};let B=function(W){function ja(){var E=W.apply(this,arguments)||this;E.height=1;E.indexHint=new ha.PositionHint;return E}d._inheritsLoose(ja,W);return ja}(r),Q=function(W){function ja(E){var G=W.call(this)||this;G.children=E;G.leaf=!0;return G}d._inheritsLoose(ja,W);return ja}(B),Y=function(W){function ja(E){var G=W.call(this)||this;G.children=E;G.leaf=!1;return G}d._inheritsLoose(ja,W);return ja}(B);t.BBox=r;t.PooledRBush=u;
t["default"]=u;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/chunks/quickselect":function(){define(["exports"],function(t){var d={exports:{}};(function(ha){(function(fa){fa=fa();void 0!==fa&&(ha.exports=fa)})(function(){function fa(g,J,l,y,ea){for(;y>l;){if(600<y-l){var aa=y-l+1,I=J-l+1,F=Math.log(aa),T=.5*Math.exp(2*F/3);F=.5*Math.sqrt(F*T*(aa-T)/aa)*(0>I-aa/2?-1:1);fa(g,J,Math.max(l,Math.floor(J-I*T/aa+F)),Math.min(y,Math.floor(J+(aa-I)*T/aa+F)),ea)}aa=g[J];I=l;T=y;r(g,l,J);for(0<ea(g[y],
aa)&&r(g,l,y);I<T;){r(g,I,T);I++;for(T--;0>ea(g[I],aa);)I++;for(;0<ea(g[T],aa);)T--}0===ea(g[l],aa)?r(g,l,T):(T++,r(g,T,y));T<=J&&(l=T+1);J<=T&&(y=T-1)}}function r(g,J,l){var y=g[J];g[J]=g[l];g[l]=y}function w(g,J){return g<J?-1:g>J?1:0}return function(g,J,l,y,ea){fa(g,J,l||0,y||g.length-1,ea||w)}})})(d);t.quickselect=d.exports})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(t,d,ha,
fa){const r={getObjectId(w){return w.objectId},getAttributes(w){return w.attributes},getAttribute(w,g){return w.attributes[g]},cloneWithGeometry(w,g){return new ha["default"](g,w.attributes,null,w.objectId)},getGeometry(w){return w.geometry},getCentroid(w,g){w.centroid||(w.centroid=d.getCentroidOptimizedGeometry(new fa,w.geometry,g.hasZ,g.hasM));return w.centroid}};t["default"]=r;t.optimizedFeatureQueryEngineAdapter=r;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/graphics/centroid":function(){define(["exports",
"../../core/maybe"],function(t,d){function ha(r,w,g,J,l,y,ea=1){y=l?y?4:3:y?3:2;let aa=g,I=g+y,F=0,T=0,e=g=0,u=0;for(let v=0,K=J-1;v<K;v++,aa+=y,I+=y){J=w[aa];const p=w[aa+1],q=w[aa+2],B=w[I],Q=w[I+1],Y=w[I+2];let W=J*Q-B*p;e+=W;F+=(J+B)*W;T+=(p+Q)*W;l&&(W=J*Y-B*q,g+=(q+Y)*W,u+=W);J<r[0]&&(r[0]=J);J>r[1]&&(r[1]=J);p<r[2]&&(r[2]=p);p>r[3]&&(r[3]=p);l&&(q<r[4]&&(r[4]=q),q>r[5]&&(r[5]=q))}0<e*ea&&(e*=-1);0<u*ea&&(u*=-1);if(!e)return null;r=[F,T,.5*e];l&&(r[3]=g,r[4]=.5*u);return r}function fa(r,w,g,
J,l){l=J?l?4:3:l?3:2;let y=w,ea=w+l,aa=0,I=0,F=0,T=0;for(let K=0,p=g-1;K<p;K++,y+=l,ea+=l){var e=r[y];const q=r[y+1],B=r[y+2],Q=r[ea],Y=r[ea+1],W=r[ea+2];if(J){{var u=Q-e;var v=Y-q;const ja=W-B;u=Math.sqrt(u*u+v*v+ja*ja)}}else u=Q-e,v=Y-q,u=Math.sqrt(u*u+v*v);u&&(aa+=u,J?(e=[e+.5*(Q-e),q+.5*(Y-q),B+.5*(W-B)],I+=u*e[0],F+=u*e[1],T+=u*e[2]):(e=[e+.5*(Q-e),q+.5*(Y-q)],I+=u*e[0],F+=u*e[1]))}return 0<aa?J?[I/aa,F/aa,T/aa]:[I/aa,F/aa]:0<g?J?[r[w],r[w+1],r[w+2]]:[r[w],r[w+1]]:null}t.getCentroidOptimizedGeometry=
function(r,w,g,J,l){if(d.isNone(w)||!w.lengths.length)return null;const y="upperLeft"===(null==l?void 0:l.originPosition)?-1:1;r.lengths.length&&(r.lengths.length=0);r.coords.length&&(r.coords.length=0);l=r.coords;const ea=[],aa=g?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:I,coords:F}=
w,T=g?J?4:3:J?3:2;let e=0;for(var u of I){const v=ha(aa,F,e,u,g,J,y);v&&ea.push(v);e+=u*T}ea.sort((v,K)=>{let p=y*v[2]-y*K[2];0===p&&g&&(p=v[4]-K[4]);return p});ea.length&&(u=6*ea[0][2],l[0]=ea[0][0]/u,l[1]=ea[0][1]/u,g&&(u=6*ea[0][4],l[2]=0!==u?ea[0][3]/u:0),l[0]<aa[0]||l[0]>aa[1]||l[1]<aa[2]||l[1]>aa[3]||g&&(l[2]<aa[4]||l[2]>aa[5]))&&(l.length=0);if(!l.length)if(w=w.lengths[0]?fa(F,0,I[0],g,J):null)l[0]=w[0],l[1]=w[1],g&&2<w.length&&(l[2]=w[2]);else return null;return r};t.lineCentroid=fa;Object.defineProperty(t,
"__esModule",{value:!0})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),function(t,d,ha,fa,r,w,g){function J(e,u){if(!u)return null;if("x"in u){var v={x:0,y:0};[v.x,v.y]=e(u.x,u.y,aa);null!=u.z&&(v.z=u.z);null!=u.m&&(v.m=u.m);return v}if("xmin"in
u)return v={xmin:0,ymin:0,xmax:0,ymax:0},[v.xmin,v.ymin]=e(u.xmin,u.ymin,aa),[v.xmax,v.ymax]=e(u.xmax,u.ymax,aa),u.hasZ&&(v.zmin=u.zmin,v.zmax=u.zmax,v.hasZ=!0),u.hasM&&(v.mmin=u.mmin,v.mmax=u.mmax,v.hasM=!0),v;if("rings"in u)return{rings:l(u.rings,e),hasM:u.hasM,hasZ:u.hasZ};if("paths"in u)return{paths:l(u.paths,e),hasM:u.hasM,hasZ:u.hasZ};if("points"in u)return{points:y(u.points,e),hasM:u.hasM,hasZ:u.hasZ}}function l(e,u){const v=[];for(const K of e)v.push(y(K,u));return v}function y(e,u){const v=
[];for(const K of e)e=u(K[0],K[1],[0,0]),v.push(e),2<K.length&&e.push(K[2]),3<K.length&&e.push(K[3]);return v}function ea(){ea=d._asyncToGenerator(function*(e,u){u&&(e=Array.isArray(e)?e.map(v=>ha.isSome(v.geometry)&&v.geometry.spatialReference):[e],yield fa.initializeProjection(e.map(v=>({source:v,dest:u}))))});return ea.apply(this,arguments)}const aa=[0,0],I=J.bind(null,g.lngLatToXY),F=J.bind(null,g.xyToLngLat),T=new (function(){function e(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}
var u=e.prototype;u.push=function(){var v=d._asyncToGenerator(function*(K,p,q){if(!(K&&K.length&&p&&q)||w.equals(p,q))return K;const B={geometries:K,inSpatialReference:p,outSpatialReference:q,resolve:null};this._jobs.push(B);return new Promise(Q=>{B.resolve=Q;null===this._timer&&(this._timer=setTimeout(this._process,10))})});return function(K,p,q){return v.apply(this,arguments)}}();u._process=function(){this._timer=null;const v=this._jobs.shift();if(v){var {geometries:K,inSpatialReference:p,outSpatialReference:q,
resolve:B}=v;g.canProject(p,q)?w.isWebMercator(q)?B(K.map(I)):B(K.map(F)):B(fa.projectMany(r.jsonAdapter,K,p,q,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return e}());t.checkProjectionSupport=function(e,u){return ea.apply(this,arguments)};t.project=function(e,u,v){if(!e)return e;v||(v=u,u=e.spatialReference);return w.isValid(u)&&w.isValid(v)&&!w.equals(u,v)?g.canProject(u,v)?w.isWebMercator(v)?I(e):F(e):fa.projectMany(r.jsonAdapter,[e],u,v,null)[0]:e};t.projectMany=function(e,
u,v){return T.push(e,u,v)};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils".split(" "),
function(t,d,ha,fa,r,w,g,J,l,y,ea,aa,I,F,T,e,u,v,K,p,q,B,Q){function Y(){return!!oa&&F.isLoaded()}function W(S){w.isNone(eb)&&(eb=Promise.all([F.load(),(new Promise(function(ca,R){t(["../chunks/geometryEngineBase"],ca,R)})).then(function(ca){return ca.geometryEngineBase}),new Promise(function(ca,R){t(["./geometryAdapters/hydrated"],ca,R)})]));return eb.then(([,ca,{hydratedAdapter:R}])=>{g.throwIfAborted(S);bb=R;oa=ca.default;oa._enableProjection(F.pe)})}function ja(S,ca,R,ka,ta=null){if(w.isNone(R)||
w.isNone(ka))return ca;if(G(R,ka,ta))return ca.map(va=>w.unwrap(L(va,R,ka)));if(w.isNone(ta)){const va=B.cacheKey(R,ka);void 0!==ab[va]?ta=ab[va]:(ta=E(R,ka,null),w.isNone(ta)&&(ta=new B),ab[va]=ta)}if(w.isNone(oa))throw new a;return oa._project(S,ca,R,ka,ta)}function E(S,ca,R=null){if(w.isNone(oa))throw new a;if(w.isNone(S)||w.isNone(ca))return null;S=oa._getTransformation(bb,S,ca,R,null==R?void 0:R.spatialReference);return null!==S?B.fromGE(S):null}function G(S,ca,R){return R?!1:Q.equals(S,ca)?
!0:Q.isValid(S)&&Q.isValid(ca)&&!!Ea(S,ca,Fb)}function O(){O=ha._asyncToGenerator(function*(S,ca,R,ka){if(!Y())if(Array.isArray(S))for(const {source:ta,dest:va,geographicTransformation:Ha}of S){if(!G(ta,va,Ha))return W(ka)}else if(!G(S,ca,R))return W(ka)});return O.apply(this,arguments)}function L(S,ca,R){return S?"x"in S?m(S,ca,new T,R,0):"xmin"in S?da(S,ca,new aa,R,0):"rings"in S?N(S,ca,new e,R,0):"paths"in S?D(S,ca,new u,R,0):"points"in S?n(S,ca,new I,R,0):null:null}function m(S,ca,R,ka,ta){Oa[0]=
S.x;Oa[1]=S.y;const va=S.z;Oa[2]=void 0!==va?va:ta;if(!ya(Oa,ca,0,Oa,ka,0,1))return null;R.x=Oa[0];R.y=Oa[1];R.spatialReference=ka;void 0===va?(R.z=void 0,R.hasZ=!1):(R.z=Oa[2],R.hasZ=!0);void 0===S.m?(R.m=void 0,R.hasM=!1):(R.m=S.m,R.hasM=!0);return R}function n(S,ca,R,ka,ta){const {points:va,hasZ:Ha,hasM:La}=S;S=[];const Za=va.length,Ya=[];for(var Xa of va)Ya.push(Xa[0],Xa[1],Ha?Xa[2]:ta);if(!ya(Ya,ca,0,Ya,ka,0,Za))return null;for(ca=0;ca<Za;++ca){ta=3*ca;Xa=Ya[ta];const ib=Ya[ta+1];Ha&&La?S.push([Xa,
ib,Ya[ta+2],va[ca][3]]):Ha?S.push([Xa,ib,Ya[ta+2]]):La?S.push([Xa,ib,va[ca][2]]):S.push([Xa,ib])}R.points=S;R.spatialReference=ka;R.hasZ=Ha;R.hasM=La;return R}function D(S,ca,R,ka,ta){const {paths:va,hasZ:Ha,hasM:La}=S;S=[];if(!xa(va,Ha,La,ca,S,ka,ta))return null;R.paths=S;R.spatialReference=ka;R.hasZ=Ha;R.hasM=La;return R}function N(S,ca,R,ka,ta){const {rings:va,hasZ:Ha,hasM:La}=S;S=[];if(!xa(va,Ha,La,ca,S,ka,ta))return null;R.rings=S;R.spatialReference=ka;R.hasZ=Ha;R.hasM=La;return R}function da(S,
ca,R,ka,ta){const {xmin:va,ymin:Ha,xmax:La,ymax:Za,hasZ:Ya,hasM:Xa}=S;if(!ia(va,Ha,Ya?S.zmin:ta,ca,Oa,ka))return null;R.xmin=Oa[0];R.ymin=Oa[1];Ya&&(R.zmin=Oa[2]);if(!ia(La,Za,Ya?S.zmax:ta,ca,Oa,ka))return null;R.xmax=Oa[0];R.ymax=Oa[1];Ya&&(R.zmax=Oa[2]);Xa&&(R.mmin=S.mmin,R.mmax=S.mmax);R.spatialReference=ka;return R}function ia(S,ca,R,ka,ta,va){Ua[0]=S;Ua[1]=ca;Ua[2]=R;return ya(Ua,ka,0,ta,va,0,1)}function la(S,ca,R,ka){if(w.isNone(ca)||w.isNone(ka)||2>S.length)return!1;2===S.length&&(Ua[0]=S[0],
Ua[1]=S[1],Ua[2]=0,S=Ua);return ya(S,ca,0,R,ka,0,1)}function ra(S,ca,R){if(w.isNone(ca))return!1;ca=Ka(ca,vb);ca=Qa[ca][6];if(w.isNone(ca))return!1;ca(S,0,Ua,0);R!==Ua&&(R[0]=Ua[0],R[1]=Ua[1],2<R.length&&(R[2]=Ua[2]));return!0}function ya(S,ca,R,ka,ta,va,Ha=1){ca=Ea(ca,ta,Fb);if(w.isNone(ca))return!1;if(ca===Ca){if(S===ka&&R===va)return!0;Ha=R+3*Ha;for(let La=R,Za=va;La<Ha;La++,Za++)ka[Za]=S[La];return!0}Ha=R+3*Ha;for(let La=R,Za=va;La<Ha;La+=3,Za+=3)ca(S,La,ka,Za);return!0}function xa(S,ca,R,ka,
ta,va,Ha=0){const La=[];for(const Za of S)for(const Ya of Za)La.push(Ya[0],Ya[1],ca?Ya[2]:Ha);if(!ya(La,ka,0,La,va,0,La.length/3))return!1;ka=0;ta.length=0;for(const Za of S){S=[];for(const Ya of Za)ca&&R?S.push([La[ka++],La[ka++],La[ka++],Ya[3]]):ca?S.push([La[ka++],La[ka++],La[ka++]]):(R?S.push([La[ka++],La[ka++],Ya[2]]):S.push([La[ka++],La[ka++]]),ka++);ta.push(S)}return!0}function Ba(S,ca,R,ka){S=Math.abs(mb*S)+Math.asin(R/(ka+ca));return S>=Math.PI/2?Number.MAX_VALUE:R/Math.cos(S)}function Na(S,
ca,R){const ka=Math.sin(S);S=Math.cos(S);const ta=Math.sin(ca);ca=Math.cos(ca);R[0]=-ka;R[4]=-ta*S;R[8]=ca*S;R[12]=0;R[1]=S;R[5]=-ta*ka;R[9]=ca*ka;R[13]=0;R[2]=0;R[6]=ca;R[10]=ta;R[14]=0;R[3]=0;R[7]=0;R[11]=0;R[15]=1;return R}function Ta(S,ca,R){Na(S,ca,R);l.transpose(R,R);return R}function Ka(S,ca){if(ca.spatialReference===S)return ca.spatialReferenceId;ca.spatialReference=S;"metersPerUnit"in ca&&(ca.metersPerUnit=J.getMetersPerUnitForSR(S,1));return S.wkt===v.SphericalECEFSpatialReference.wkt?ca.spatialReferenceId=
1:Q.isWGS84(S)?ca.spatialReferenceId=2:Q.isWebMercator(S)?ca.spatialReferenceId=3:Q.isPlateCarree(S)?ca.spatialReferenceId=12:S.wkt===v.WGS84ECEFSpatialReference.wkt?ca.spatialReferenceId=4:4490===S.wkid?ca.spatialReferenceId=5:S.wkt===v.SphericalPCPFMars.wkt?ca.spatialReferenceId=7:S.wkt===v.SphericalPCPFMoon.wkt?ca.spatialReferenceId=9:Q.isMars(S)?ca.spatialReferenceId=8:Q.isMoon(S)?ca.spatialReferenceId=10:ca.spatialReferenceId=0}function Ca(S,ca,R,ka){S!==R&&(R[ka++]=S[ca++],R[ka++]=S[ca++],R[ka]=
S[ca])}function Ra(S,ca,R,ka){R[ka++]=yb*(S[ca++]/p.earth.radius);R[ka++]=yb*(Math.PI/2-2*Math.atan(Math.exp(-S[ca++]/p.earth.radius)));R[ka]=S[ca]}function gb(S,ca,R,ka){Ra(S,ca,R,ka);X(R,ka,R,ka)}function c(S,ca,R,ka){Ra(S,ca,R,ka);ua(R,ka,R,ka)}function k(S,ca,R,ka,ta){var va=.4999999*Math.PI;va=r.clamp(mb*S[ca+1],-va,va);va=Math.sin(va);R[ka++]=mb*S[ca]*ta.radius;R[ka++]=ta.halfSemiMajorAxis*Math.log((1+va)/(1-va));R[ka]=S[ca+2]}function U(S,ca,R,ka){k(S,ca,R,ka,p.earth)}function f(S,ca,R,ka){R[ka]=
S[ca]*hb;R[ka+1]=S[ca+1]*hb;R[ka+2]=S[ca+2]}function x(S,ca,R,ka){R[ka]=S[ca]*fb;R[ka+1]=S[ca+1]*fb;R[ka+2]=S[ca+2]}function M(S,ca,R,ka,ta){ta+=S[ca+2];const va=mb*S[ca+1];S=mb*S[ca];ca=Math.cos(va);R[ka++]=Math.cos(S)*ca*ta;R[ka++]=Math.sin(S)*ca*ta;R[ka]=Math.sin(va)*ta}function P(S,ca,R,ka){M(S,ca,R,ka,p.moon.radius)}function ba(S,ca,R,ka){M(S,ca,R,ka,p.mars.radius)}function X(S,ca,R,ka){M(S,ca,R,ka,p.earth.radius)}function z(S,ca,R,ka,ta){var va=S[ca];const Ha=S[ca+1];ca=S[ca+2];S=Math.sqrt(va*
va+Ha*Ha+ca*ca);ca=r.asinClamped(ca/(0===S?1:S));va=Math.atan2(Ha,va);R[ka++]=yb*va;R[ka++]=yb*ca;R[ka]=S-ta}function H(S,ca,R,ka){z(S,ca,R,ka,p.moon.radius)}function V(S,ca,R,ka){z(S,ca,R,ka,p.mars.radius)}function ma(S,ca,R,ka){z(S,ca,R,ka,p.earth.radius)}function na(S,ca,R,ka){ma(S,ca,R,ka);U(R,ka,R,ka)}function sa(S,ca,R,ka){ma(S,ca,R,ka);ua(R,ka,R,ka)}function ua(S,ca,R,ka){{var ta=p.earth;const Ha=mb*S[ca];var va=mb*S[ca+1];S=S[ca+2];ca=Math.sin(va);va=Math.cos(va);const La=ta.radius/Math.sqrt(1-
ta.eccentricitySquared*ca*ca);R[ka++]=(La+S)*va*Math.cos(Ha);R[ka++]=(La+S)*va*Math.sin(Ha);R[ka++]=(La*(1-ta.eccentricitySquared)+S)*ca}}function wa(S,ca,R,ka){var ta=q.earthEllipsoidConstants,va=S[ca],Ha=S[ca+1];S=S[ca+2];let La;ca=Math.abs(S);var Za=va*va+Ha*Ha;var Ya=Math.sqrt(Za);var Xa=Za+S*S;var ib=Math.sqrt(Xa);va=Math.atan2(Ha,va);var nb=S*S/Xa;Xa=Za/Xa;Ha=ta.a2/ib;Za=ta.a3-ta.a4/ib;.3<Xa?(nb=ca/ib*(1+Xa*(ta.a1+Ha+nb*Za)/ib),ib=Math.asin(nb),Ha=nb*nb,Xa=Math.sqrt(1-Ha)):(Xa=Ya/ib*(1-nb*(ta.a5-
Ha-Xa*Za)/ib),ib=Math.acos(Xa),Ha=1-Xa*Xa,nb=Math.sqrt(Ha));La=1-p.earth.eccentricitySquared*Ha;Ha=p.earth.radius/Math.sqrt(La);ta=ta.a6*Ha;Ha=Ya-Ha*Xa;Za=ca-ta*nb;ca=Xa*Ha+nb*Za;Ya=Xa*Za-nb*Ha;ta=Ya/(ta/La+ca);ib+=ta;0>S&&(ib=-ib);R[ka++]=yb*va;R[ka++]=yb*ib;R[ka]=ca+Ya*ta/2}function Ia(S,ca,R,ka){wa(S,ca,R,ka);X(R,ka,R,ka)}function Fa(S,ca,R,ka){wa(S,ca,R,ka);U(R,ka,R,ka)}function Ea(S,ca,R=Da()){return w.isNone(S)||w.isNone(ca)?null:za(S,ca,R).projector}function za(S,ca,R){if(w.isNone(S)||w.isNone(ca)||
R.source.spatialReference===S&&R.dest.spatialReference===ca)return R;const ka=Ka(S,R.source),ta=Ka(ca,R.dest);0===ka&&0===ta?Q.equals(S,ca)?R.projector=Ca:R.projector=null:R.projector=Qa[ka][ta];return R}function Da(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:Ca}}let oa=null,bb=null,eb=null,ab={},a=function(S){function ca(){return S.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||
this}ha._inheritsLoose(ca,S);return ca}(fa);const hb=p.earth.radius*Math.PI/180,fb=180/(p.earth.radius*Math.PI),Qa={[2]:{[5]:null,[8]:null,[10]:null,[11]:Ca,[6]:Ca,[1]:X,[7]:null,[9]:null,[0]:null,[3]:U,[12]:f,[2]:Ca,[4]:ua},[5]:{[5]:Ca,[8]:null,[10]:null,[11]:Ca,[6]:Ca,[1]:X,[7]:null,[9]:null,[0]:null,[3]:null,[12]:f,[2]:null,[4]:ua},[8]:{[5]:null,[8]:Ca,[10]:null,[11]:Ca,[6]:null,[1]:null,[7]:ba,[9]:null,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:Ca,[11]:Ca,[6]:null,
[1]:null,[7]:null,[9]:P,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[11]:Ra,[6]:Ra,[1]:gb,[7]:null,[9]:null,[0]:null,[3]:Ca,[12]:function(S,ca,R,ka){Ra(S,ca,R,ka);f(R,ka,R,ka)},[2]:Ra,[4]:c},[4]:{[5]:wa,[8]:null,[10]:null,[11]:wa,[6]:wa,[1]:Ia,[7]:null,[9]:null,[0]:null,[3]:Fa,[12]:function(S,ca,R,ka){wa(S,ca,R,ka);f(R,ka,R,ka)},[2]:wa,[4]:Ca},[1]:{[5]:ma,[8]:null,[10]:null,[11]:ma,[6]:ma,[1]:Ca,[7]:null,[9]:null,[0]:null,[3]:na,[12]:function(S,ca,R,ka){ma(S,ca,
R,ka);f(R,ka,R,ka)},[2]:ma,[4]:sa},[7]:{[5]:null,[8]:V,[10]:null,[11]:V,[6]:null,[1]:null,[7]:Ca,[9]:null,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[9]:{[5]:null,[8]:null,[10]:H,[11]:H,[6]:null,[1]:null,[7]:null,[9]:Ca,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,[11]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:Ca,[3]:null,[12]:null,[2]:null,[4]:null},[11]:{[5]:Ca,[8]:Ca,[10]:Ca,[11]:Ca,[6]:Ca,[1]:X,[7]:ba,[9]:P,[0]:null,[3]:U,[12]:f,[2]:Ca,[4]:ua},[6]:{[5]:null,
[8]:null,[10]:null,[11]:Ca,[6]:Ca,[1]:X,[7]:null,[9]:null,[0]:null,[3]:null,[12]:f,[2]:Ca,[4]:ua},[12]:{[5]:x,[8]:null,[10]:null,[11]:x,[6]:x,[1]:function(S,ca,R,ka){x(S,ca,R,ka);X(R,ka,R,ka)},[7]:null,[9]:null,[0]:null,[3]:function(S,ca,R,ka){x(S,ca,R,ka);U(R,ka,R,ka)},[12]:Ca,[2]:x,[4]:function(S,ca,R,ka){x(S,ca,R,ka);ua(R,ka,R,ka)}}},vb={spatialReference:null,spatialReferenceId:0},zb={spatialReference:null,spatialReferenceId:0},Fb=Da(),ec=Da(),mb=r.deg2rad(1),yb=r.rad2deg(1),Ua=ea.create(),kb=
ea.create(),tb=ea.create(),Oa=ea.create(),Gb=ea.create();d.canProjectToWGS84ComparableLonLat=function(S){if(w.isNone(S))return!1;S=Ka(S,vb);return!!Qa[S][6]};d.canProjectWithoutEngine=G;d.computeENUToSphericalPCPFLocalRotation=Na;d.computeSphericalPCPFToENULocalRotation=Ta;d.computeTranslationToOriginAndRotation=function(S,ca,R,ka){if(w.isNone(S)||w.isNone(ka))return!1;var ta=Ka(S,vb),va=Ka(ka,zb);if(ta===va&&1!==va&&7!==va&&9!==va&&(0!==ta||Q.equals(S,ka)))return l.identity(R),l.translate(R,R,ca),
!0;if(1===va||7===va||9===va){ta=Qa[ta][11];va=Qa[11][va];if(w.isNone(ta)||w.isNone(va))return!1;ta(ca,0,kb,0);va(kb,0,tb,0);Na(mb*kb[0],mb*kb[1],R);R[12]=tb[0];R[13]=tb[1];R[14]=tb[2];return!0}if(!(3!==va&&12!==va||2!==ta&&1!==ta)){S=Qa[ta][11];va=Qa[11][va];if(w.isNone(S)||w.isNone(va))return!1;S(ca,0,kb,0);va(kb,0,tb,0);2===ta?l.identity(R):Ta(mb*kb[0],mb*kb[1],R);R[12]=tb[0];R[13]=tb[1];R[14]=tb[2];return!0}return!1};d.getProjectorName=function(S,ca){switch(Ea(S,ca,Fb)){case Ca:return"copy3";
case X:return"wgs84ToSphericalECEF";case U:return"wgs84ToWebMercator";case f:return"wgs84ToPlateCarree";case ua:return"wgs84ToWGS84ECEF";case Ra:return"webMercatorToWGS84";case gb:return"webMercatorToSphericalECEF";case c:return"webMercatorToWGS84ECEF";case wa:return"wgs84ECEFToWGS84";case Ia:return"wgs84ECEFToSphericalECEF";case Fa:return"wgs84ECEFToWebMercator";case ma:return"sphericalECEFToWGS84";case na:return"sphericalECEFToWebMercator";case V:return"sphericalMarsPCPFToMars2000";case H:return"sphericalMoonPCPFToMoon2000";
case sa:return"sphericalECEFToWGS84ECEF";case ba:return"mars2000ToSphericalPCPF";case P:return"moon2000ToSphericalPCPF";default:return null}};d.getTransformation=E;d.getTransformations=function(S,ca,R=null){if(w.isNone(oa))throw new a;S=oa._getTransformationBySuitability(bb,S,ca,R,null==R?void 0:R.spatialReference);if(null!==S){ca=[];for(const ka of S)ca.push(B.fromGE(ka));return ca}return[]};d.initializeProjection=function(S,ca,R,ka){return O.apply(this,arguments)};d.isLoaded=Y;d.isSupported=function(){return!0};
d.load=W;d.localLinearScaleFactors=function(S,ca,R,ka){if(w.isNone(ca)||w.isNone(ka))return!1;const ta=Ka(ca,vb);var va=Ka(ka,zb);if(ta===va&&0!==ta||Q.equals(ca,ka))return R[0]=1,R[1]=1,R[2]=1,!0;if(1===ta){ca=y.length(S);S=ca/Math.sqrt(S[0]*S[0]+S[1]*S[1]);ca/=p.earth.radius;if(3===va)return R[0]=S*ca,R[1]=S*ca,R[2]=1,!0;if(2===va||5===va)return va=180/(p.earth.radius*Math.PI),R[0]=va*S*ca,R[1]=va*ca,R[2]=1,!0}else if(12===ta&&(2===va||5===va))return R[0]=fb,R[1]=fb,R[2]=1,!0;return!1};d.lonLatToSphericalPCPF=
function(S,ca,R,ka,ta=0){ka+=ta;ta=Math.cos(R);S[0]=Math.cos(ca)*ta*ka;S[1]=Math.sin(ca)*ta*ka;S[2]=Math.sin(R)*ka};d.lonLatToWebMercatorComparable=k;d.project=function(S,ca,R=null){return Array.isArray(S)?0===S.length?[]:ja(bb,S,S[0].spatialReference,ca,R):ja(bb,[S],S.spatialReference,ca,R)[0]};d.projectBoundingRect=function(S,ca,R,ka){if(null==S)return!1;if(Q.equals(ca,ka))return K.copy(R,S),!0;Ua[0]=S[0];Ua[1]=S[1];Ua[2]=0;if(!ya(Ua,ca,0,Ua,ka,0,1))return!1;R[0]=Ua[0];R[1]=Ua[1];Ua[0]=S[2];Ua[1]=
S[3];Ua[2]=0;if(!ya(Ua,ca,0,Ua,ka,0,1))return!1;R[2]=Ua[0];R[3]=Ua[1];return!0};d.projectBoundingSphere=function(S,ca,R,ka){if(w.isNone(ca)||w.isNone(ka))return!1;ca=za(ca,ka,ec);if(ca.projector===Ca)return R[0]=S[0],R[1]=S[1],R[2]=S[2],R[3]=S[3],!0;if(w.isNone(ca.projector))return!1;const {source:ta,dest:va}=ca;if(3===va.spatialReferenceId){ca=Qa[ta.spatialReferenceId][2];if(w.isNone(ca))return!1;ca(S,0,kb,0);U(kb,0,R,0);R[3]=Ba(kb[1],S[2],S[3],p.earth.radius);return!0}if(2!==ta.spatialReferenceId&&
5!==ta.spatialReferenceId||12!==va.spatialReferenceId)ca.projector(S,0,R,0),R[3]=S[3]*ta.metersPerUnit/va.metersPerUnit;else{ka=Qa[1][12];let Ha=S[3];w.isSome(Qa[ta.spatialReferenceId][1])&&w.isSome(ka)&&(Ha=Ba(S[1],S[2],S[3],p.earth.radius));ca.projector(S,0,R,0);R[3]=Ha}return!0};d.projectBuffer=ya;d.projectDirection=function(S,ca,R,ka,ta){y.copy(Oa,S);y.add(Gb,S,ca);la(Oa,R,Oa,ta);la(Gb,R,Gb,ta);y.subtract(ka,Gb,Oa);y.normalize(ka,ka)};d.projectExtent=function(S,ca,R=ca.spatialReference,ka=0){return w.isSome(R)&&
w.isSome(da(S,S.spatialReference,ca,R,ka))};d.projectMany=ja;d.projectMultipoint=function(S,ca,R=ca.spatialReference,ka=0){return w.isNone(R)?!1:w.isSome(n(S,S.spatialReference,ca,R,ka))};d.projectPoint=function(S,ca,R=ca.spatialReference,ka=0){return w.isNone(R)?!1:w.isSome(m(S,S.spatialReference,ca,R,ka))};d.projectPointToVector=function(S,ca,R,ka=0){Oa[0]=S.x;Oa[1]=S.y;const ta=S.z;Oa[2]=void 0!==ta?ta:ka;return ya(Oa,S.spatialReference,0,ca,R,0,1)};d.projectPointToWGS84ComparableLonLat=function(S,
ca){Oa[0]=S.x;Oa[1]=S.y;const R=S.z;Oa[2]=void 0!==R?R:0;return ra(Oa,S.spatialReference,ca)};d.projectPolygon=function(S,ca,R=ca.spatialReference,ka=0){return w.isSome(R)&&w.isSome(N(S,S.spatialReference,ca,R,ka))};d.projectPolyline=function(S,ca,R=ca.spatialReference,ka=0){return w.isSome(R)&&w.isSome(D(S,S.spatialReference,ca,R,ka))};d.projectVectorToDehydratedPoint=function(S,ca,R){return ya(S,ca,0,Oa,R.spatialReference,0,1)?(R.x=Oa[0],R.y=Oa[1],R.z=Oa[2],R):null};d.projectVectorToPoint=function(S,
ca,R){if(w.isNone(ca)||w.isNone(R))return null;const ka=new T({spatialReference:R});return ya(S,ca,0,Oa,R,0,1)?(ka.x=Oa[0],ka.y=Oa[1],ka.z=Oa[2],ka):null};d.projectVectorToVector=la;d.projectVectorToWGS84ComparableLonLat=function(S,ca,R){return ra(S,ca,R)};d.projectWithoutEngine=L;d.projectXYZToVector=ia;d.sphericalPCPFtoLonLatElevation=z;d.unload=function(){eb=bb=oa=null;ab={}};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ../geometry/projectionEllipsoid ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/support/spatialReferenceUtils ../geometry/support/WKIDUnitConversion".split(" "),
function(t,d,ha,fa,r,w,g,J){function l(m){if(m=G[m])return m;throw Error("unknown measure");}function y(m){return E[m].baseUnit}function ea(m,n=null){n=n||l(m);return E[n].baseUnit===m}function aa(m,n,D){if(n===D)return m;const N=l(n);if(N!==l(D))throw Error("incompatible units");m=ea(n,N)?m:m*E[N].units[n].inBaseUnits;return ea(D,N)?m:m/E[N].units[D].inBaseUnits}function I(m,n){return 3E3>aa(m,n,"meters")?"meters":"kilometers"}function F(m,n){return 1E5>aa(m,n,"meters")?"meters":"kilometers"}function T(m,
n){return 1E3>aa(m,n,"feet")?"feet":"miles"}function e(m,n){return 1E5>aa(m,n,"feet")?"feet":"miles"}function u(m){return ja.fromJSON(m.toLowerCase())||null}function v(m,n=w.earth.metersPerDegree){return K(m,!0)||n}function K(m,n=!1){let D,N,da=null;null!=m&&("object"===typeof m?(D=m.wkid,N=m.wkt):"number"===typeof m?D=m:"string"===typeof m&&(N=m));if(D){if(g.isWKIDFromMars(D))return w.mars.metersPerDegree;if(g.isWKIDFromMoon(D))return w.moon.metersPerDegree;da=Q.values[Q[D]];!da&&n&&W.has(D)&&(da=
q)}else N&&(-1!==N.search(/^PROJCS/i)?(m=B.exec(N))&&m[1]&&(da=parseFloat(m[1].split(",")[1])):-1!==N.search(/^GEOCCS/i)&&(m=Y.exec(N))&&m[1]&&(da=parseFloat(m[1].split(",")[1])));return da}function p(m){let n,D,N=null;null!=m&&("object"===typeof m?(n=m.wkid,D=m.wkt):"number"===typeof m?n=m:"string"===typeof m&&(D=m));n?N=Q.units[Q[n]]:D&&-1!==D.search(/^PROJCS/i)&&(m=B.exec(D))&&m[1]&&(N=(m=/[\\"\\']{1}([^\\"\\']+)/.exec(m[1]))&&m[1]);return N?u(N):null}const q=w.earth.radius*Math.PI/200,B=/UNIT\[([^\]]+)\]\]$/i,
Q=J,Y=/UNIT\[([^\]]+)\]/i,W=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),ja=ha.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",
"50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});d={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};J={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*
.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(m=>m*m)(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};const E={length:{baseUnit:"meters",units:d},area:{baseUnit:"square-meters",units:J},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},
"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},G=function(){const m={};for(const n in E)for(const D in E[n].units)m[D]=
n;return m}(),O={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},L={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",
esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"};d=ha.strict()(O);J=ha.strict()(L);ha=ha.strict()({...O,...L});t.areaUnitsJSONMap=d;t.baseUnitForMeasure=y;t.baseUnitForUnit=function(m){return y(l(m))};t.convertUnit=aa;t.getDefaultUnitSystem=function(m){if(!m)return null;switch(p(m)){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";
case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null};t.getMetersPerUnit=K;t.getMetersPerUnitForSR=v;t.getMetersPerVerticalUnitForSR=function(m){if(m&&"object"===typeof m&&!g.isEarth(m))return 1;m=v(m);return 1E5<m?1:m};t.getUnitString=p;t.getVerticalUnitStringForSR=function(m){const n=v(m),D=m instanceof r?fa.getReferenceEllipsoid(m).metersPerDegree:1E5;return n>=D?"meters":p(m)};t.inchesPerMeter=39.37;t.isBaseUnit=ea;t.isMeasurementSystem=function(m){return"imperial"===
m||"metric"===m};t.lengthToDegrees=function(m,n,D){return aa(m,n,"meters")/(D*Math.PI/180)};t.lengthUnitsJSONMap=J;t.measureForUnit=l;t.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");t.measurementLengthUnits="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" ");t.preferredImperialAreaUnit=function(m,n){return 1E6>aa(m,n,"square-feet")?"square-feet":
"square-miles"};t.preferredImperialLengthUnit=T;t.preferredImperialVerticalLengthUnit=e;t.preferredLengthUnit=function(m,n,D){switch(D){case "metric":return I(m,n);case "imperial":return T(m,n);default:return D}};t.preferredMetricAreaUnit=function(m,n){return 3E6>aa(m,n,"square-meters")?"square-meters":"square-kilometers"};t.preferredMetricLengthUnit=I;t.preferredMetricVerticalLengthUnit=F;t.preferredVerticalLengthUnit=function(m,n,D){switch(D){case "metric":return F(m,n);case "imperial":return e(m,
n);default:return D}};t.unitFromRESTJSON=u;t.unitToRESTJSON=function(m){return ja.toJSON(m)||null};t.unitsJSONMap=ha;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","./SpatialReference","./support/Ellipsoid","./support/spatialReferenceUtils"],function(t,d,ha,fa){function r(y){return new d({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${y.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}
const w=r(ha.earth),g=r(ha.mars),J=r(ha.moon),l=new d({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${ha.earth.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});t.SphericalECEFSpatialReference=w;t.SphericalPCPFMars=
g;t.SphericalPCPFMoon=J;t.WGS84ECEFSpatialReference=l;t.createSphericalPCPF=r;t.getReferenceEllipsoid=function(y){return y&&(fa.isMars(y)||y===g)?ha.mars:y&&(fa.isMoon(y)||y===J)?ha.moon:ha.earth};t.getReferenceEllipsoidFromWKID=function(y){return fa.isWKIDFromMars(y)?ha.mars:fa.isWKIDFromMoon(y)?ha.moon:ha.earth};t.getSphericalPCPF=function(y){return y&&(fa.isMars(y)||y===g)?g:y&&(fa.isMoon(y)||y===J)?J:w};t.getSphericalPCPFForEllipsoid=function(y){return y&&y===ha.mars?g:y&&y===ha.moon?J:w};Object.defineProperty(t,
"__esModule",{value:!0})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(t,d,ha){function fa(c,k){c[0]=k[0];c[1]=k[1];c[2]=k[2];c[3]=k[3];c[4]=k[4];c[5]=k[5];c[6]=k[6];c[7]=k[7];c[8]=k[8];c[9]=k[9];c[10]=k[10];c[11]=k[11];c[12]=k[12];c[13]=k[13];c[14]=k[14];c[15]=k[15];return c}function r(c,k,U,f,x,M,P,ba,X,z,H,V,ma,na,sa,ua,wa){c[0]=k;c[1]=U;c[2]=f;c[3]=x;c[4]=M;c[5]=P;c[6]=ba;c[7]=X;c[8]=z;c[9]=H;c[10]=V;c[11]=ma;c[12]=na;c[13]=sa;c[14]=ua;c[15]=wa;return c}function w(c){c[0]=
1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function g(c,k){if(c===k){const U=k[1],f=k[2],x=k[3],M=k[6],P=k[7],ba=k[11];c[1]=k[4];c[2]=k[8];c[3]=k[12];c[4]=U;c[6]=k[9];c[7]=k[13];c[8]=f;c[9]=M;c[11]=k[14];c[12]=x;c[13]=P;c[14]=ba}else c[0]=k[0],c[1]=k[4],c[2]=k[8],c[3]=k[12],c[4]=k[1],c[5]=k[5],c[6]=k[9],c[7]=k[13],c[8]=k[2],c[9]=k[6],c[10]=k[10],c[11]=k[14],c[12]=k[3],c[13]=k[7],c[14]=k[11],c[15]=k[15];return c}function J(c,
k){const U=k[0],f=k[1],x=k[2],M=k[3],P=k[4],ba=k[5],X=k[6],z=k[7],H=k[8],V=k[9],ma=k[10],na=k[11],sa=k[12],ua=k[13],wa=k[14];k=k[15];const Ia=U*ba-f*P,Fa=U*X-x*P,Ea=U*z-M*P,za=f*X-x*ba,Da=f*z-M*ba,oa=x*z-M*X,bb=H*ua-V*sa,eb=H*wa-ma*sa,ab=H*k-na*sa,a=V*wa-ma*ua,hb=V*k-na*ua,fb=ma*k-na*wa;let Qa=Ia*fb-Fa*hb+Ea*a+za*ab-Da*eb+oa*bb;if(!Qa)return null;Qa=1/Qa;c[0]=(ba*fb-X*hb+z*a)*Qa;c[1]=(x*hb-f*fb-M*a)*Qa;c[2]=(ua*oa-wa*Da+k*za)*Qa;c[3]=(ma*Da-V*oa-na*za)*Qa;c[4]=(X*ab-P*fb-z*eb)*Qa;c[5]=(U*fb-x*ab+
M*eb)*Qa;c[6]=(wa*Ea-sa*oa-k*Fa)*Qa;c[7]=(H*oa-ma*Ea+na*Fa)*Qa;c[8]=(P*hb-ba*ab+z*bb)*Qa;c[9]=(f*ab-U*hb-M*bb)*Qa;c[10]=(sa*Da-ua*Ea+k*Ia)*Qa;c[11]=(V*Ea-H*Da-na*Ia)*Qa;c[12]=(ba*eb-P*a-X*bb)*Qa;c[13]=(U*a-f*eb+x*bb)*Qa;c[14]=(ua*Fa-sa*za-wa*Ia)*Qa;c[15]=(H*za-V*Fa+ma*Ia)*Qa;return c}function l(c,k){const U=k[0],f=k[1],x=k[2],M=k[3],P=k[4],ba=k[5],X=k[6],z=k[7],H=k[8],V=k[9],ma=k[10],na=k[11],sa=k[12],ua=k[13],wa=k[14];k=k[15];c[0]=ba*(ma*k-na*wa)-V*(X*k-z*wa)+ua*(X*na-z*ma);c[1]=-(f*(ma*k-na*wa)-
V*(x*k-M*wa)+ua*(x*na-M*ma));c[2]=f*(X*k-z*wa)-ba*(x*k-M*wa)+ua*(x*z-M*X);c[3]=-(f*(X*na-z*ma)-ba*(x*na-M*ma)+V*(x*z-M*X));c[4]=-(P*(ma*k-na*wa)-H*(X*k-z*wa)+sa*(X*na-z*ma));c[5]=U*(ma*k-na*wa)-H*(x*k-M*wa)+sa*(x*na-M*ma);c[6]=-(U*(X*k-z*wa)-P*(x*k-M*wa)+sa*(x*z-M*X));c[7]=U*(X*na-z*ma)-P*(x*na-M*ma)+H*(x*z-M*X);c[8]=P*(V*k-na*ua)-H*(ba*k-z*ua)+sa*(ba*na-z*V);c[9]=-(U*(V*k-na*ua)-H*(f*k-M*ua)+sa*(f*na-M*V));c[10]=U*(ba*k-z*ua)-P*(f*k-M*ua)+sa*(f*z-M*ba);c[11]=-(U*(ba*na-z*V)-P*(f*na-M*V)+H*(f*z-M*
ba));c[12]=-(P*(V*wa-ma*ua)-H*(ba*wa-X*ua)+sa*(ba*ma-X*V));c[13]=U*(V*wa-ma*ua)-H*(f*wa-x*ua)+sa*(f*ma-x*V);c[14]=-(U*(ba*wa-X*ua)-P*(f*wa-x*ua)+sa*(f*X-x*ba));c[15]=U*(ba*ma-X*V)-P*(f*ma-x*V)+H*(f*X-x*ba);return c}function y(c){const k=c[0],U=c[1],f=c[2],x=c[3],M=c[4],P=c[5],ba=c[6],X=c[7],z=c[8],H=c[9],V=c[10],ma=c[11],na=c[12],sa=c[13],ua=c[14];c=c[15];return(k*P-U*M)*(V*c-ma*ua)-(k*ba-f*M)*(H*c-ma*sa)+(k*X-x*M)*(H*ua-V*sa)+(U*ba-f*P)*(z*c-ma*na)-(U*X-x*P)*(z*ua-V*na)+(f*X-x*ba)*(z*sa-H*na)}function ea(c,
k,U){const f=k[0],x=k[1],M=k[2],P=k[3],ba=k[4],X=k[5],z=k[6],H=k[7],V=k[8],ma=k[9],na=k[10],sa=k[11],ua=k[12],wa=k[13],Ia=k[14];k=k[15];let Fa=U[0],Ea=U[1],za=U[2],Da=U[3];c[0]=Fa*f+Ea*ba+za*V+Da*ua;c[1]=Fa*x+Ea*X+za*ma+Da*wa;c[2]=Fa*M+Ea*z+za*na+Da*Ia;c[3]=Fa*P+Ea*H+za*sa+Da*k;Fa=U[4];Ea=U[5];za=U[6];Da=U[7];c[4]=Fa*f+Ea*ba+za*V+Da*ua;c[5]=Fa*x+Ea*X+za*ma+Da*wa;c[6]=Fa*M+Ea*z+za*na+Da*Ia;c[7]=Fa*P+Ea*H+za*sa+Da*k;Fa=U[8];Ea=U[9];za=U[10];Da=U[11];c[8]=Fa*f+Ea*ba+za*V+Da*ua;c[9]=Fa*x+Ea*X+za*ma+Da*
wa;c[10]=Fa*M+Ea*z+za*na+Da*Ia;c[11]=Fa*P+Ea*H+za*sa+Da*k;Fa=U[12];Ea=U[13];za=U[14];Da=U[15];c[12]=Fa*f+Ea*ba+za*V+Da*ua;c[13]=Fa*x+Ea*X+za*ma+Da*wa;c[14]=Fa*M+Ea*z+za*na+Da*Ia;c[15]=Fa*P+Ea*H+za*sa+Da*k;return c}function aa(c,k,U){const f=U[0],x=U[1];U=U[2];let M=void 0,P=void 0,ba=void 0,X=void 0,z=void 0,H=void 0,V=void 0,ma=void 0,na=void 0,sa=void 0,ua=void 0,wa=void 0;k===c?(c[12]=k[0]*f+k[4]*x+k[8]*U+k[12],c[13]=k[1]*f+k[5]*x+k[9]*U+k[13],c[14]=k[2]*f+k[6]*x+k[10]*U+k[14],c[15]=k[3]*f+k[7]*
x+k[11]*U+k[15]):(M=k[0],P=k[1],ba=k[2],X=k[3],z=k[4],H=k[5],V=k[6],ma=k[7],na=k[8],sa=k[9],ua=k[10],wa=k[11],c[0]=M,c[1]=P,c[2]=ba,c[3]=X,c[4]=z,c[5]=H,c[6]=V,c[7]=ma,c[8]=na,c[9]=sa,c[10]=ua,c[11]=wa,c[12]=M*f+z*x+na*U+k[12],c[13]=P*f+H*x+sa*U+k[13],c[14]=ba*f+V*x+ua*U+k[14],c[15]=X*f+ma*x+wa*U+k[15]);return c}function I(c,k,U){const f=U[0],x=U[1];U=U[2];c[0]=k[0]*f;c[1]=k[1]*f;c[2]=k[2]*f;c[3]=k[3]*f;c[4]=k[4]*x;c[5]=k[5]*x;c[6]=k[6]*x;c[7]=k[7]*x;c[8]=k[8]*U;c[9]=k[9]*U;c[10]=k[10]*U;c[11]=k[11]*
U;c[12]=k[12];c[13]=k[13];c[14]=k[14];c[15]=k[15];return c}function F(c,k,U,f){let x=f[0],M=f[1];f=f[2];let P=Math.sqrt(x*x+M*M+f*f);var ba=void 0,X=void 0;let z=void 0,H=void 0,V=void 0,ma=void 0,na=void 0,sa=void 0,ua=void 0,wa=void 0,Ia=void 0,Fa=void 0,Ea=void 0,za=void 0,Da=void 0,oa=void 0,bb=void 0,eb=void 0,ab=void 0,a=void 0,hb=void 0,fb=void 0;X=ba=void 0;if(P<ha.EPSILON)return null;P=1/P;x*=P;M*=P;f*=P;ba=Math.sin(U);X=Math.cos(U);z=1-X;H=k[0];V=k[1];ma=k[2];na=k[3];sa=k[4];ua=k[5];wa=
k[6];Ia=k[7];Fa=k[8];Ea=k[9];za=k[10];Da=k[11];oa=x*x*z+X;bb=M*x*z+f*ba;eb=f*x*z-M*ba;ab=x*M*z-f*ba;a=M*M*z+X;hb=f*M*z+x*ba;fb=x*f*z+M*ba;ba=M*f*z-x*ba;X=f*f*z+X;c[0]=H*oa+sa*bb+Fa*eb;c[1]=V*oa+ua*bb+Ea*eb;c[2]=ma*oa+wa*bb+za*eb;c[3]=na*oa+Ia*bb+Da*eb;c[4]=H*ab+sa*a+Fa*hb;c[5]=V*ab+ua*a+Ea*hb;c[6]=ma*ab+wa*a+za*hb;c[7]=na*ab+Ia*a+Da*hb;c[8]=H*fb+sa*ba+Fa*X;c[9]=V*fb+ua*ba+Ea*X;c[10]=ma*fb+wa*ba+za*X;c[11]=na*fb+Ia*ba+Da*X;k!==c&&(c[12]=k[12],c[13]=k[13],c[14]=k[14],c[15]=k[15]);return c}function T(c,
k,U){const f=Math.sin(U);U=Math.cos(U);const x=k[4],M=k[5],P=k[6],ba=k[7],X=k[8],z=k[9],H=k[10],V=k[11];k!==c&&(c[0]=k[0],c[1]=k[1],c[2]=k[2],c[3]=k[3],c[12]=k[12],c[13]=k[13],c[14]=k[14],c[15]=k[15]);c[4]=x*U+X*f;c[5]=M*U+z*f;c[6]=P*U+H*f;c[7]=ba*U+V*f;c[8]=X*U-x*f;c[9]=z*U-M*f;c[10]=H*U-P*f;c[11]=V*U-ba*f;return c}function e(c,k,U){const f=Math.sin(U);U=Math.cos(U);const x=k[0],M=k[1],P=k[2],ba=k[3],X=k[8],z=k[9],H=k[10],V=k[11];k!==c&&(c[4]=k[4],c[5]=k[5],c[6]=k[6],c[7]=k[7],c[12]=k[12],c[13]=
k[13],c[14]=k[14],c[15]=k[15]);c[0]=x*U-X*f;c[1]=M*U-z*f;c[2]=P*U-H*f;c[3]=ba*U-V*f;c[8]=x*f+X*U;c[9]=M*f+z*U;c[10]=P*f+H*U;c[11]=ba*f+V*U;return c}function u(c,k,U){const f=Math.sin(U);U=Math.cos(U);const x=k[0],M=k[1],P=k[2],ba=k[3],X=k[4],z=k[5],H=k[6],V=k[7];k!==c&&(c[8]=k[8],c[9]=k[9],c[10]=k[10],c[11]=k[11],c[12]=k[12],c[13]=k[13],c[14]=k[14],c[15]=k[15]);c[0]=x*U+X*f;c[1]=M*U+z*f;c[2]=P*U+H*f;c[3]=ba*U+V*f;c[4]=X*U-x*f;c[5]=z*U-M*f;c[6]=H*U-P*f;c[7]=V*U-ba*f;return c}function v(c,k){c[0]=1;
c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=k[0];c[13]=k[1];c[14]=k[2];c[15]=1;return c}function K(c,k){c[0]=k[0];c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=k[1];c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=k[2];c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function p(c,k,U){let f=U[0],x=U[1];U=U[2];let M=Math.sqrt(f*f+x*x+U*U),P=void 0,ba=void 0,X=void 0;if(M<ha.EPSILON)return null;M=1/M;f*=M;x*=M;U*=M;P=Math.sin(k);ba=Math.cos(k);X=1-ba;c[0]=f*f*X+ba;c[1]=x*f*X+U*P;c[2]=U*
f*X-x*P;c[3]=0;c[4]=f*x*X-U*P;c[5]=x*x*X+ba;c[6]=U*x*X+f*P;c[7]=0;c[8]=f*U*X+x*P;c[9]=x*U*X-f*P;c[10]=U*U*X+ba;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function q(c,k){const U=Math.sin(k);k=Math.cos(k);c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=k;c[6]=U;c[7]=0;c[8]=0;c[9]=-U;c[10]=k;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function B(c,k){const U=Math.sin(k);k=Math.cos(k);c[0]=k;c[1]=0;c[2]=-U;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=U;c[9]=0;c[10]=k;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=
1;return c}function Q(c,k){const U=Math.sin(k);k=Math.cos(k);c[0]=k;c[1]=U;c[2]=0;c[3]=0;c[4]=-U;c[5]=k;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function Y(c,k,U){var f=k[0],x=k[1],M=k[2],P=k[3],ba=f+f,X=x+x;const z=M+M;k=f*ba;const H=f*X;f*=z;const V=x*X;x*=z;M*=z;ba*=P;X*=P;P*=z;c[0]=1-(V+M);c[1]=H+P;c[2]=f-X;c[3]=0;c[4]=H-P;c[5]=1-(k+M);c[6]=x+ba;c[7]=0;c[8]=f+X;c[9]=x-ba;c[10]=1-(k+V);c[11]=0;c[12]=U[0];c[13]=U[1];c[14]=U[2];c[15]=1;return c}function W(c,
k){const U=gb,f=-k[0],x=-k[1],M=-k[2],P=k[3],ba=k[4],X=k[5],z=k[6],H=k[7],V=f*f+x*x+M*M+P*P;0<V?(U[0]=2*(ba*P+H*f+X*M-z*x)/V,U[1]=2*(X*P+H*x+z*f-ba*M)/V,U[2]=2*(z*P+H*M+ba*x-X*f)/V):(U[0]=2*(ba*P+H*f+X*M-z*x),U[1]=2*(X*P+H*x+z*f-ba*M),U[2]=2*(z*P+H*M+ba*x-X*f));Y(c,k,U);return c}function ja(c,k){c[0]=k[12];c[1]=k[13];c[2]=k[14];return c}function E(c,k){const U=k[0],f=k[1],x=k[2],M=k[4],P=k[5],ba=k[6],X=k[8],z=k[9];k=k[10];c[0]=Math.sqrt(U*U+f*f+x*x);c[1]=Math.sqrt(M*M+P*P+ba*ba);c[2]=Math.sqrt(X*
X+z*z+k*k);return c}function G(c,k){const U=k[0]+k[5]+k[10];let f=0;0<U?(f=2*Math.sqrt(U+1),c[3]=.25*f,c[0]=(k[6]-k[9])/f,c[1]=(k[8]-k[2])/f,c[2]=(k[1]-k[4])/f):k[0]>k[5]&&k[0]>k[10]?(f=2*Math.sqrt(1+k[0]-k[5]-k[10]),c[3]=(k[6]-k[9])/f,c[0]=.25*f,c[1]=(k[1]+k[4])/f,c[2]=(k[8]+k[2])/f):k[5]>k[10]?(f=2*Math.sqrt(1+k[5]-k[0]-k[10]),c[3]=(k[8]-k[2])/f,c[0]=(k[1]+k[4])/f,c[1]=.25*f,c[2]=(k[6]+k[9])/f):(f=2*Math.sqrt(1+k[10]-k[0]-k[5]),c[3]=(k[1]-k[4])/f,c[0]=(k[8]+k[2])/f,c[1]=(k[6]+k[9])/f,c[2]=.25*f);
return c}function O(c,k,U,f){var x=k[0],M=k[1],P=k[2],ba=k[3],X=x+x,z=M+M,H=P+P;k=x*X;const V=x*z;x*=H;const ma=M*z;M*=H;P*=H;X*=ba;z*=ba;ba*=H;H=f[0];const na=f[1];f=f[2];c[0]=(1-(ma+P))*H;c[1]=(V+ba)*H;c[2]=(x-z)*H;c[3]=0;c[4]=(V-ba)*na;c[5]=(1-(k+P))*na;c[6]=(M+X)*na;c[7]=0;c[8]=(x+z)*f;c[9]=(M-X)*f;c[10]=(1-(k+ma))*f;c[11]=0;c[12]=U[0];c[13]=U[1];c[14]=U[2];c[15]=1;return c}function L(c,k,U,f,x){var M=k[0],P=k[1],ba=k[2],X=k[3],z=M+M,H=P+P,V=ba+ba;k=M*z;var ma=M*H,na=M*V;M=P*H;P*=V;var sa=ba*
V;ba=X*z;H*=X;const ua=X*V;var wa=f[0],Ia=f[1];V=f[2];f=x[0];X=x[1];x=x[2];z=(1-(M+sa))*wa;const Fa=(ma+ua)*wa;wa*=na-H;ma=(ma-ua)*Ia;sa=(1-(k+sa))*Ia;Ia*=P+ba;na=(na+H)*V;P=(P-ba)*V;k=(1-(k+M))*V;c[0]=z;c[1]=Fa;c[2]=wa;c[3]=0;c[4]=ma;c[5]=sa;c[6]=Ia;c[7]=0;c[8]=na;c[9]=P;c[10]=k;c[11]=0;c[12]=U[0]+f-(z*f+ma*X+na*x);c[13]=U[1]+X-(Fa*f+sa*X+P*x);c[14]=U[2]+x-(wa*f+Ia*X+k*x);c[15]=1;return c}function m(c,k){var U=k[0],f=k[1],x=k[2];k=k[3];var M=U+U,P=f+f;const ba=x+x;U*=M;const X=f*M;f*=P;const z=x*
M,H=x*P;x*=ba;M*=k;P*=k;k*=ba;c[0]=1-f-x;c[1]=X+k;c[2]=z-P;c[3]=0;c[4]=X-k;c[5]=1-U-x;c[6]=H+M;c[7]=0;c[8]=z+P;c[9]=H-M;c[10]=1-U-f;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function n(c,k,U,f,x,M,P){const ba=1/(U-k),X=1/(x-f),z=1/(M-P);c[0]=2*M*ba;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=2*M*X;c[6]=0;c[7]=0;c[8]=(U+k)*ba;c[9]=(x+f)*X;c[10]=(P+M)*z;c[11]=-1;c[12]=0;c[13]=0;c[14]=P*M*2*z;c[15]=0;return c}function D(c,k,U,f,x){k=1/Math.tan(k/2);let M=void 0;c[0]=k/U;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=
k;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[11]=-1;c[12]=0;c[13]=0;c[15]=0;null!=x&&Infinity!==x?(M=1/(f-x),c[10]=(x+f)*M,c[14]=2*x*f*M):(c[10]=-1,c[14]=-2*f);return c}function N(c,k,U,f){const x=Math.tan(k.upDegrees*Math.PI/180),M=Math.tan(k.downDegrees*Math.PI/180),P=Math.tan(k.leftDegrees*Math.PI/180);k=Math.tan(k.rightDegrees*Math.PI/180);const ba=2/(P+k),X=2/(x+M);c[0]=ba;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=X;c[6]=0;c[7]=0;c[8]=-((P-k)*ba*.5);c[9]=(x-M)*X*.5;c[10]=f/(U-f);c[11]=-1;c[12]=0;c[13]=0;c[14]=f*U/
(U-f);c[15]=0;return c}function da(c,k,U,f,x,M,P){const ba=1/(k-U),X=1/(f-x),z=1/(M-P);c[0]=-2*ba;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=-2*X;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=2*z;c[11]=0;c[12]=(k+U)*ba;c[13]=(x+f)*X;c[14]=(P+M)*z;c[15]=1;return c}function ia(c,k,U,f){let x=void 0,M=void 0;var P=void 0,ba=void 0;let X=void 0,z=void 0;var H=void 0,V=void 0;let ma=void 0,na=void 0;const sa=k[0],ua=k[1];k=k[2];P=f[0];ba=f[1];f=f[2];H=U[0];V=U[1];U=U[2];if(Math.abs(sa-H)<ha.EPSILON&&Math.abs(ua-V)<ha.EPSILON&&
Math.abs(k-U)<ha.EPSILON)return w(c);H=sa-H;V=ua-V;ma=k-U;na=1/Math.sqrt(H*H+V*V+ma*ma);H*=na;V*=na;ma*=na;x=ba*ma-f*V;M=f*H-P*ma;P=P*V-ba*H;(na=Math.sqrt(x*x+M*M+P*P))?(na=1/na,x*=na,M*=na,P*=na):P=M=x=0;ba=V*P-ma*M;X=ma*x-H*P;z=H*M-V*x;(na=Math.sqrt(ba*ba+X*X+z*z))?(na=1/na,ba*=na,X*=na,z*=na):z=X=ba=0;c[0]=x;c[1]=ba;c[2]=H;c[3]=0;c[4]=M;c[5]=X;c[6]=V;c[7]=0;c[8]=P;c[9]=z;c[10]=ma;c[11]=0;c[12]=-(x*sa+M*ua+P*k);c[13]=-(ba*sa+X*ua+z*k);c[14]=-(H*sa+V*ua+ma*k);c[15]=1;return c}function la(c,k,U,f){const x=
k[0],M=k[1];k=k[2];var P=f[0];const ba=f[1];var X=f[2];f=x-U[0];let z=M-U[1];U=k-U[2];let H=f*f+z*z+U*U;0<H&&(H=1/Math.sqrt(H),f*=H,z*=H,U*=H);let V=ba*U-X*z;X=X*f-P*U;P=P*z-ba*f;H=V*V+X*X+P*P;0<H&&(H=1/Math.sqrt(H),V*=H,X*=H,P*=H);c[0]=V;c[1]=X;c[2]=P;c[3]=0;c[4]=z*P-U*X;c[5]=U*V-f*P;c[6]=f*X-z*V;c[7]=0;c[8]=f;c[9]=z;c[10]=U;c[11]=0;c[12]=x;c[13]=M;c[14]=k;c[15]=1;return c}function ra(c){return"mat4("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+", "+c[9]+
", "+c[10]+", "+c[11]+", "+c[12]+", "+c[13]+", "+c[14]+", "+c[15]+")"}function ya(c){return Math.sqrt(c[0]**2+c[1]**2+c[2]**2+c[3]**2+c[4]**2+c[5]**2+c[6]**2+c[7]**2+c[8]**2+c[9]**2+c[10]**2+c[11]**2+c[12]**2+c[13]**2+c[14]**2+c[15]**2)}function xa(c,k,U){c[0]=k[0]+U[0];c[1]=k[1]+U[1];c[2]=k[2]+U[2];c[3]=k[3]+U[3];c[4]=k[4]+U[4];c[5]=k[5]+U[5];c[6]=k[6]+U[6];c[7]=k[7]+U[7];c[8]=k[8]+U[8];c[9]=k[9]+U[9];c[10]=k[10]+U[10];c[11]=k[11]+U[11];c[12]=k[12]+U[12];c[13]=k[13]+U[13];c[14]=k[14]+U[14];c[15]=
k[15]+U[15];return c}function Ba(c,k,U){c[0]=k[0]-U[0];c[1]=k[1]-U[1];c[2]=k[2]-U[2];c[3]=k[3]-U[3];c[4]=k[4]-U[4];c[5]=k[5]-U[5];c[6]=k[6]-U[6];c[7]=k[7]-U[7];c[8]=k[8]-U[8];c[9]=k[9]-U[9];c[10]=k[10]-U[10];c[11]=k[11]-U[11];c[12]=k[12]-U[12];c[13]=k[13]-U[13];c[14]=k[14]-U[14];c[15]=k[15]-U[15];return c}function Na(c,k,U){c[0]=k[0]*U;c[1]=k[1]*U;c[2]=k[2]*U;c[3]=k[3]*U;c[4]=k[4]*U;c[5]=k[5]*U;c[6]=k[6]*U;c[7]=k[7]*U;c[8]=k[8]*U;c[9]=k[9]*U;c[10]=k[10]*U;c[11]=k[11]*U;c[12]=k[12]*U;c[13]=k[13]*U;
c[14]=k[14]*U;c[15]=k[15]*U;return c}function Ta(c,k,U,f){c[0]=k[0]+U[0]*f;c[1]=k[1]+U[1]*f;c[2]=k[2]+U[2]*f;c[3]=k[3]+U[3]*f;c[4]=k[4]+U[4]*f;c[5]=k[5]+U[5]*f;c[6]=k[6]+U[6]*f;c[7]=k[7]+U[7]*f;c[8]=k[8]+U[8]*f;c[9]=k[9]+U[9]*f;c[10]=k[10]+U[10]*f;c[11]=k[11]+U[11]*f;c[12]=k[12]+U[12]*f;c[13]=k[13]+U[13]*f;c[14]=k[14]+U[14]*f;c[15]=k[15]+U[15]*f;return c}function Ka(c,k){return c[0]===k[0]&&c[1]===k[1]&&c[2]===k[2]&&c[3]===k[3]&&c[4]===k[4]&&c[5]===k[5]&&c[6]===k[6]&&c[7]===k[7]&&c[8]===k[8]&&c[9]===
k[9]&&c[10]===k[10]&&c[11]===k[11]&&c[12]===k[12]&&c[13]===k[13]&&c[14]===k[14]&&c[15]===k[15]}function Ca(c,k){const U=c[0],f=c[1],x=c[2],M=c[3],P=c[4],ba=c[5],X=c[6],z=c[7],H=c[8],V=c[9],ma=c[10],na=c[11],sa=c[12],ua=c[13],wa=c[14];c=c[15];const Ia=k[0],Fa=k[1],Ea=k[2],za=k[3],Da=k[4],oa=k[5],bb=k[6],eb=k[7],ab=k[8],a=k[9],hb=k[10],fb=k[11],Qa=k[12],vb=k[13],zb=k[14];k=k[15];return Math.abs(U-Ia)<=ha.EPSILON*Math.max(1,Math.abs(U),Math.abs(Ia))&&Math.abs(f-Fa)<=ha.EPSILON*Math.max(1,Math.abs(f),
Math.abs(Fa))&&Math.abs(x-Ea)<=ha.EPSILON*Math.max(1,Math.abs(x),Math.abs(Ea))&&Math.abs(M-za)<=ha.EPSILON*Math.max(1,Math.abs(M),Math.abs(za))&&Math.abs(P-Da)<=ha.EPSILON*Math.max(1,Math.abs(P),Math.abs(Da))&&Math.abs(ba-oa)<=ha.EPSILON*Math.max(1,Math.abs(ba),Math.abs(oa))&&Math.abs(X-bb)<=ha.EPSILON*Math.max(1,Math.abs(X),Math.abs(bb))&&Math.abs(z-eb)<=ha.EPSILON*Math.max(1,Math.abs(z),Math.abs(eb))&&Math.abs(H-ab)<=ha.EPSILON*Math.max(1,Math.abs(H),Math.abs(ab))&&Math.abs(V-a)<=ha.EPSILON*Math.max(1,
Math.abs(V),Math.abs(a))&&Math.abs(ma-hb)<=ha.EPSILON*Math.max(1,Math.abs(ma),Math.abs(hb))&&Math.abs(na-fb)<=ha.EPSILON*Math.max(1,Math.abs(na),Math.abs(fb))&&Math.abs(sa-Qa)<=ha.EPSILON*Math.max(1,Math.abs(sa),Math.abs(Qa))&&Math.abs(ua-vb)<=ha.EPSILON*Math.max(1,Math.abs(ua),Math.abs(vb))&&Math.abs(wa-zb)<=ha.EPSILON*Math.max(1,Math.abs(wa),Math.abs(zb))&&Math.abs(c-k)<=ha.EPSILON*Math.max(1,Math.abs(c),Math.abs(k))}function Ra(c){const k=ha.EPSILON,U=c[0],f=c[1],x=c[2],M=c[4],P=c[5],ba=c[6],X=
c[8],z=c[9];c=c[10];return Math.abs(1-(U*U+M*M+X*X))<=k&&Math.abs(1-(f*f+P*P+z*z))<=k&&Math.abs(1-(x*x+ba*ba+c*c))<=k}const gb=d.create();d=Object.freeze({__proto__:null,copy:fa,set:r,identity:w,transpose:g,invert:J,adjoint:l,determinant:y,multiply:ea,translate:aa,scale:I,rotate:F,rotateX:T,rotateY:e,rotateZ:u,fromTranslation:v,fromScaling:K,fromRotation:p,fromXRotation:q,fromYRotation:B,fromZRotation:Q,fromRotationTranslation:Y,fromQuat2:W,getTranslation:ja,getScaling:E,getRotation:G,fromRotationTranslationScale:O,
fromRotationTranslationScaleOrigin:L,fromQuat:m,frustum:n,perspective:D,perspectiveFromFieldOfView:N,ortho:da,lookAt:ia,targetTo:la,str:ra,frob:ya,add:xa,subtract:Ba,multiplyScalar:Na,multiplyScalarAndAdd:Ta,exactEquals:Ka,equals:Ca,isOrthoNormal:Ra,mul:ea,sub:Ba});t.add=xa;t.adjoint=l;t.copy=fa;t.determinant=y;t.equals=Ca;t.exactEquals=Ka;t.frob=ya;t.fromQuat=m;t.fromQuat2=W;t.fromRotation=p;t.fromRotationTranslation=Y;t.fromRotationTranslationScale=O;t.fromRotationTranslationScaleOrigin=L;t.fromScaling=
K;t.fromTranslation=v;t.fromXRotation=q;t.fromYRotation=B;t.fromZRotation=Q;t.frustum=n;t.getRotation=G;t.getScaling=E;t.getTranslation=ja;t.identity=w;t.invert=J;t.isOrthoNormal=Ra;t.lookAt=ia;t.mat4=d;t.mul=ea;t.multiply=ea;t.multiplyScalar=Na;t.multiplyScalarAndAdd=Ta;t.ortho=da;t.perspective=D;t.perspectiveFromFieldOfView=N;t.rotate=F;t.rotateX=T;t.rotateY=e;t.rotateZ=u;t.scale=I;t.set=r;t.str=ra;t.sub=Ba;t.subtract=Ba;t.targetTo=la;t.translate=aa;t.transpose=g})},"esri/chunks/pe":function(){define(["require",
"exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(t,d,ha,fa,r){function w(){return!!d._pe}function g(){return!!r("esri-wasm")}function J(){return F?F:F=(new Promise(function(e,u){t(["./pe-wasm"],e,u)})).then(function(e){return e.peWasm}).then(({default:e})=>e({locateFile:u=>fa.getAssetUrl(`esri/geometry/support/${u}`)})).then(e=>{l(e)})}function l(e){function u(p,q,B){p[q]=B(p[q])}d._pe=e;d.PeDefs.init();d.PeGTlistExtended.init();d.PeNotationMgrs.init();d.PeNotationUtm.init();
d.PePCSInfo.init();d.PeGCSExtent=function(p){function q(){return p.apply(this,arguments)||this}ha._inheritsLoose(q,p);q.prototype.destroy=function(){d._pe.destroy(this)};return q}(d._pe.PeGCSExtent);e=[d._pe.PeDatum,d._pe.PeGeogcs,d._pe.PeGeogtran,d._pe.PeObject,d._pe.PeParameter,d._pe.PePrimem,d._pe.PeProjcs,d._pe.PeSpheroid,d._pe.PeUnit];for(var v of e)u(v.prototype,"getName",p=>function(){return p.call(this,Array(d.PeDefs.PE_NAME_MAX))});for(const p of[d._pe.PeGeogtran,d._pe.PeProjcs])u(p.prototype,
"getParameters",q=>function(){const B=Array(d.PeDefs.PE_PARM_MAX);let Q=q.call(this);for(let Y=0;Y<B.length;Y++){const W=d._pe.getValue(Q,"*");B[Y]=W?d._pe.wrapPointer(W,d._pe.PeParameter):null;Q+=Int32Array.BYTES_PER_ELEMENT}return B});u(d._pe.PeHorizon.prototype,"getCoord",p=>function(){const q=this.getSize();if(!q)return null;const B=[],Q=p.call(this);I(B,q,Q);return B});u(d._pe.PeGTlistExtendedEntry.prototype,"getEntries",p=>{const q=d._pe._pe_getPeGTlistExtendedGTsSize();return function(){let B=
null;var Q=p.call(this);if(!d._pe.compare(Q,d._pe.NULL)){B=[Q];const Y=this.getSteps();if(1<Y){Q=d._pe.getPointer(Q);for(let W=1;W<Y;W++)B.push(d._pe.wrapPointer(Q+q*W,d._pe.PeGTlistExtendedGTs))}}return B}});const K=d._pe._pe_getPeHorizonSize();v=p=>function(){let q=this._cache;q||(this._cache=q=new Map);if(q.has(p))return q.get(p);let B=null;var Q=p.call(this);if(!d._pe.compare(Q,d._pe.NULL)){B=[Q];const Y=Q.getNump();if(1<Y){Q=d._pe.getPointer(Q);for(let W=1;W<Y;W++)B.push(d._pe.wrapPointer(Q+
K*W,d._pe.PeHorizon))}}q.set(p,B);return B};u(d._pe.PeProjcs.prototype,"horizonGcsGenerate",v);u(d._pe.PeProjcs.prototype,"horizonPcsGenerate",v);d._pe.PeObject.prototype.toString=function(p=d.PeDefs.PE_STR_OPTS_NONE){d._pe.ensureCache.prepare();const q=d._pe.getPointer(this),B=d._pe.ensureInt8(Array(d.PeDefs.PE_BUFFER_MAX));return d._pe.UTF8ToString(d._pe._pe_object_to_string_ext(q,p,B))}}function y(e){if(e){var u=d._pe.getClass(e);u&&(u=d._pe.getCache(u))&&(e=d._pe.getPointer(e))&&delete u[e]}}
function ea(e,u){const v=[];u=Array(u);for(let K=0;K<e;K++)v.push(d._pe.ensureInt8(u));return v}function aa(e){let u;Array.isArray(e[0])?(u=[],e.forEach(v=>{u.push(v[0],v[1])})):u=e;return u}function I(e,u,v,K=!1){if(K)for(K=0;K<2*u;K++)e[K]=d._pe.getValue(v+K*Float64Array.BYTES_PER_ELEMENT,"double");else{K=0===e.length;for(let p=0;p<u;p++)K&&(e[p]=Array(2)),e[p][0]=d._pe.getValue(v,"double"),e[p][1]=d._pe.getValue(v+Float64Array.BYTES_PER_ELEMENT,"double"),v+=2*Float64Array.BYTES_PER_ELEMENT}}let F;
d._pe=null;d.PeCSTransformations=void 0;(function(e){function u(p,q,B){d._pe.ensureCache.prepare();var Q=aa(B);const Y=B===Q;Q=d._pe.ensureFloat64(Q);(p=d._pe._pe_geog_to_proj(d._pe.getPointer(p),q,Q))&&I(B,q,Q,Y);return p}function v(p,q,B){return K(p,q,B,0)}function K(p,q,B,Q){d._pe.ensureCache.prepare();var Y=aa(B);const W=B===Y;Y=d._pe.ensureFloat64(Y);(p=d._pe._pe_proj_to_geog_center(d._pe.getPointer(p),q,Y,Q))&&I(B,q,Y,W);return p}e.geogToProj=u;e.projGeog=function(p,q,B,Q){switch(Q){case d.PeDefs.PE_TRANSFORM_P_TO_G:return v(p,
q,B);case d.PeDefs.PE_TRANSFORM_G_TO_P:return u(p,q,B)}return 0};e.projToGeog=v;e.projToGeogCenter=K})(d.PeCSTransformations||(d.PeCSTransformations={}));d.PeDefs=void 0;(function(e){e.init=function(){e.PE_BUFFER_MAX=d._pe.PeDefs.prototype.PE_BUFFER_MAX;e.PE_NAME_MAX=d._pe.PeDefs.prototype.PE_NAME_MAX;e.PE_MGRS_MAX=d._pe.PeDefs.prototype.PE_MGRS_MAX;e.PE_USNG_MAX=d._pe.PeDefs.prototype.PE_USNG_MAX;e.PE_DD_MAX=d._pe.PeDefs.prototype.PE_DD_MAX;e.PE_DDM_MAX=d._pe.PeDefs.prototype.PE_DDM_MAX;e.PE_DMS_MAX=
d._pe.PeDefs.prototype.PE_DMS_MAX;e.PE_UTM_MAX=d._pe.PeDefs.prototype.PE_UTM_MAX;e.PE_PARM_MAX=d._pe.PeDefs.prototype.PE_PARM_MAX;e.PE_TYPE_NONE=d._pe.PeDefs.prototype.PE_TYPE_NONE;e.PE_TYPE_GEOGCS=d._pe.PeDefs.prototype.PE_TYPE_GEOGCS;e.PE_TYPE_PROJCS=d._pe.PeDefs.prototype.PE_TYPE_PROJCS;e.PE_TYPE_GEOGTRAN=d._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;e.PE_TYPE_COORDSYS=d._pe.PeDefs.prototype.PE_TYPE_COORDSYS;e.PE_TYPE_UNIT=d._pe.PeDefs.prototype.PE_TYPE_UNIT;e.PE_TYPE_LINUNIT=d._pe.PeDefs.prototype.PE_TYPE_LINUNIT;
e.PE_STR_OPTS_NONE=d._pe.PeDefs.prototype.PE_STR_OPTS_NONE;e.PE_STR_AUTH_NONE=d._pe.PeDefs.prototype.PE_STR_AUTH_NONE;e.PE_STR_AUTH_TOP=d._pe.PeDefs.prototype.PE_STR_AUTH_TOP;e.PE_STR_NAME_CANON=d._pe.PeDefs.prototype.PE_STR_NAME_CANON;e.PE_PARM_X0=d._pe.PeDefs.prototype.PE_PARM_X0;e.PE_PARM_ND=d._pe.PeDefs.prototype.PE_PARM_ND;e.PE_TRANSFORM_1_TO_2=d._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;e.PE_TRANSFORM_2_TO_1=d._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;e.PE_TRANSFORM_P_TO_G=d._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;
e.PE_TRANSFORM_G_TO_P=d._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;e.PE_HORIZON_RECT=d._pe.PeDefs.prototype.PE_HORIZON_RECT;e.PE_HORIZON_POLY=d._pe.PeDefs.prototype.PE_HORIZON_POLY;e.PE_HORIZON_LINE=d._pe.PeDefs.prototype.PE_HORIZON_LINE;e.PE_HORIZON_DELTA=d._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(d.PeDefs||(d.PeDefs={}));d.PeFactory=void 0;(function(e){function u(q,B){let Q=null,Y=v[q];Y||(Y={},v[q]=Y);Y.hasOwnProperty(String(B))?Q=Y[B]:(q=d._pe.PeFactory.prototype.factoryByType(q,B),d._pe.compare(q,
d._pe.NULL)||(Q=q,Y[B]=Q));return Q=p(Q)}const v={},K={},p=q=>{if(q){const B=q.getType();switch(B){case d.PeDefs.PE_TYPE_GEOGCS:q=d._pe.castObject(q,d._pe.PeGeogcs);break;case d.PeDefs.PE_TYPE_PROJCS:q=d._pe.castObject(q,d._pe.PeProjcs);break;case d.PeDefs.PE_TYPE_GEOGTRAN:q=d._pe.castObject(q,d._pe.PeGeogtran);break;default:B&d.PeDefs.PE_TYPE_UNIT&&(q=d._pe.castObject(q,d._pe.PeUnit))}}return q};e.initialize=function(){d._pe.PeFactory.prototype.initialize(null)};e.coordsys=function(q){return u(d.PeDefs.PE_TYPE_COORDSYS,
q)};e.factoryByType=u;e.fromString=function(q,B){let Q=null,Y=K[q];Y||(Y={},K[q]=Y);Y.hasOwnProperty(B)?Q=Y[B]:(q=d._pe.PeFactory.prototype.fromString(q,B),d._pe.compare(q,d._pe.NULL)||(Q=q,Y[B]=Q));return Q=p(Q)};e.geogcs=function(q){return u(d.PeDefs.PE_TYPE_GEOGCS,q)};e.geogtran=function(q){return u(d.PeDefs.PE_TYPE_GEOGTRAN,q)};e.getCode=function(q){return d._pe.PeFactory.prototype.getCode(q)};e.projcs=function(q){return u(d.PeDefs.PE_TYPE_PROJCS,q)};e.unit=function(q){return u(d.PeDefs.PE_TYPE_UNIT,
q)}})(d.PeFactory||(d.PeFactory={}));d.PeGCSExtent=null;d.PeGTlistExtended=void 0;(function(e){let u;e.init=function(){e.PE_GTLIST_OPTS_COMMON=d._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;u=d._pe._pe_getPeGTlistExtendedEntrySize()};e.getGTlist=function(v,K,p,q,B,Q){let Y=null;const W=new d._pe.PeInteger(Q);try{const ja=d._pe.PeGTlistExtended.prototype.getGTlist(v,K,p,q,B,W);if(Q=W.val)if(Y=[ja],1<Q){const E=d._pe.getPointer(ja);for(v=1;v<Q;v++)Y.push(d._pe.wrapPointer(E+u*v,d._pe.PeGTlistExtendedEntry))}}finally{d._pe.destroy(W)}return Y}})(d.PeGTlistExtended||
(d.PeGTlistExtended={}));d.PeGTlistExtendedEntry=void 0;(function(e){e.destroy=function(u){if(u&&u.length){for(const v of u)y(v),v.getEntries().forEach(K=>{y(K);K=K.getGeogtran();y(K);K.getParameters().forEach(y);[K.getGeogcs1(),K.getGeogcs2()].forEach(p=>{y(p);const q=p.getDatum();y(q);y(q.getSpheroid());y(p.getPrimem());y(p.getUnit())})});d._pe.PeGTlistExtendedEntry.prototype.Delete(u[0])}}})(d.PeGTlistExtendedEntry||(d.PeGTlistExtendedEntry={}));d.PeGTTransformations=void 0;(function(e){e.geogToGeog=
function(u,v,K,p,q){d._pe.ensureCache.prepare();var B=aa(K);const Q=K===B;B=d._pe.ensureFloat64(B);let Y=0;p&&(Y=d._pe.ensureFloat64(p));(u=d._pe._pe_geog_to_geog(d._pe.getPointer(u),v,B,Y,q))&&I(K,v,B,Q);return u}})(d.PeGTTransformations||(d.PeGTTransformations={}));d.PeNotationDms=void 0;(function(e){const u=(K,p,q,B,Q,Y)=>{d._pe.ensureCache.prepare();switch(K){case "dd":var W=d._pe._pe_geog_to_dd;var ja=d.PeDefs.PE_DD_MAX;break;case "ddm":W=d._pe._pe_geog_to_ddm;ja=d.PeDefs.PE_DDM_MAX;break;case "dms":W=
d._pe._pe_geog_to_dms,ja=d.PeDefs.PE_DMS_MAX}K=0;p&&(K=d._pe.getPointer(p));p=aa(B);p=d._pe.ensureFloat64(p);ja=ea(q,ja);B=d._pe.ensureInt32(ja);if(Q=W(K,q,p,Q,B))for(W=0;W<q;W++)Y[W]=d._pe.UTF8ToString(ja[W]);return Q},v=(K,p,q,B,Q)=>{d._pe.ensureCache.prepare();switch(K){case "dd":var Y=d._pe._pe_dd_to_geog;break;case "ddm":Y=d._pe._pe_ddm_to_geog;break;case "dms":Y=d._pe._pe_dms_to_geog}K=0;p&&(K=d._pe.getPointer(p));p=B.map(W=>d._pe.ensureString(W));B=d._pe.ensureInt32(p);p=d._pe.ensureFloat64(Array(2*
q));(Y=Y(K,q,B,p))&&I(Q,q,p);return Y};e.geog_to_dms=function(K,p,q,B,Q){return u("dms",K,p,q,B,Q)};e.dms_to_geog=function(K,p,q,B){return v("dms",K,p,q,B)};e.geog_to_ddm=function(K,p,q,B,Q){return u("ddm",K,p,q,B,Q)};e.ddm_to_geog=function(K,p,q,B){return v("ddm",K,p,q,B)};e.geog_to_dd=function(K,p,q,B,Q){return u("dd",K,p,q,B,Q)};e.dd_to_geog=function(K,p,q,B){return v("dd",K,p,q,B)}})(d.PeNotationDms||(d.PeNotationDms={}));d.PeNotationMgrs=void 0;(function(e){e.init=function(){e.PE_MGRS_STYLE_NEW=
d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;e.PE_MGRS_STYLE_OLD=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;e.PE_MGRS_STYLE_AUTO=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;e.PE_MGRS_180_ZONE_1_PLUS=d._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;e.PE_MGRS_ADD_SPACES=d._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};e.geog_to_mgrs_extended=function(u,v,K,p,q,B,Q){d._pe.ensureCache.prepare();let Y=0;u&&(Y=d._pe.getPointer(u));u=aa(K);K=d._pe.ensureFloat64(u);u=ea(v,d.PeDefs.PE_MGRS_MAX);
const W=d._pe.ensureInt32(u);if(p=d._pe._pe_geog_to_mgrs_extended(Y,v,K,p,q,B,W))for(q=0;q<v;q++)Q[q]=d._pe.UTF8ToString(u[q]);return p};e.mgrs_to_geog_extended=function(u,v,K,p,q){d._pe.ensureCache.prepare();let B=0;u&&(B=d._pe.getPointer(u));u=K.map(Q=>d._pe.ensureString(Q));K=d._pe.ensureInt32(u);u=d._pe.ensureFloat64(Array(2*v));(p=d._pe._pe_mgrs_to_geog_extended(B,v,K,p,u))&&I(q,v,u);return p}})(d.PeNotationMgrs||(d.PeNotationMgrs={}));d.PeNotationUsng=void 0;(function(e){e.geog_to_usng=function(u,
v,K,p,q,B,Q){d._pe.ensureCache.prepare();let Y=0;u&&(Y=d._pe.getPointer(u));u=aa(K);K=d._pe.ensureFloat64(u);u=ea(v,d.PeDefs.PE_MGRS_MAX);const W=d._pe.ensureInt32(u);if(p=d._pe._pe_geog_to_usng(Y,v,K,p,q,B,W))for(q=0;q<v;q++)Q[q]=d._pe.UTF8ToString(u[q]);return p};e.usng_to_geog=function(u,v,K,p){d._pe.ensureCache.prepare();var q=0;u&&(q=d._pe.getPointer(u));u=K.map(B=>d._pe.ensureString(B));K=d._pe.ensureInt32(u);u=d._pe.ensureFloat64(Array(2*v));(q=d._pe._pe_usng_to_geog(q,v,K,u))&&I(p,v,u);return q}})(d.PeNotationUsng||
(d.PeNotationUsng={}));d.PeNotationUtm=void 0;(function(e){e.init=function(){e.PE_UTM_OPTS_NONE=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;e.PE_UTM_OPTS_ADD_SPACES=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;e.PE_UTM_OPTS_NS=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};e.geog_to_utm=function(u,v,K,p,q){d._pe.ensureCache.prepare();var B=0;u&&(B=d._pe.getPointer(u));u=aa(K);K=d._pe.ensureFloat64(u);u=ea(v,d.PeDefs.PE_UTM_MAX);const Q=d._pe.ensureInt32(u);if(p=d._pe._pe_geog_to_utm(B,v,
K,p,Q))for(B=0;B<v;B++)q[B]=d._pe.UTF8ToString(u[B]);return p};e.utm_to_geog=function(u,v,K,p,q){d._pe.ensureCache.prepare();let B=0;u&&(B=d._pe.getPointer(u));u=K.map(Q=>d._pe.ensureString(Q));K=d._pe.ensureInt32(u);u=d._pe.ensureFloat64(Array(2*v));(p=d._pe._pe_utm_to_geog(B,v,K,p,u))&&I(q,v,u);return p}})(d.PeNotationUtm||(d.PeNotationUtm={}));d.PePCSInfo=void 0;(function(e){const u=new Map;e.init=function(){e.PE_PCSINFO_OPTION_NONE=d._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;e.PE_PCSINFO_OPTION_DOMAIN=
d._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;e.PE_POLE_OUTSIDE_BOUNDARY=d._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;e.PE_POLE_POINT=d._pe.PePCSInfo.prototype.PE_POLE_POINT};e.generate=function(v,K=e.PE_PCSINFO_OPTION_DOMAIN){let p,q;u.has(v)&&(q=u.get(v),q[K]&&(p=q[K]));p||(p=d._pe.PePCSInfo.prototype.generate(v,K),q||(q=[],u.set(v,q)),q[K]=p);return p}})(d.PePCSInfo||(d.PePCSInfo={}));d.PeVersion=void 0;(function(e){e.version_string=function(){return d._pe.PeVersion.prototype.version_string()}})(d.PeVersion||
(d.PeVersion={}));var T=Object.freeze({__proto__:null,get _pe(){return d._pe},isLoaded:w,isSupported:g,load:J,get PeCSTransformations(){return d.PeCSTransformations},get PeDefs(){return d.PeDefs},get PeFactory(){return d.PeFactory},get PeGCSExtent(){return d.PeGCSExtent},get PeGTlistExtended(){return d.PeGTlistExtended},get PeGTlistExtendedEntry(){return d.PeGTlistExtendedEntry},get PeGTTransformations(){return d.PeGTTransformations},get PeNotationDms(){return d.PeNotationDms},get PeNotationMgrs(){return d.PeNotationMgrs},
get PeNotationUsng(){return d.PeNotationUsng},get PeNotationUtm(){return d.PeNotationUtm},get PePCSInfo(){return d.PePCSInfo},get PeVersion(){return d.PeVersion},_init:l});d._init=l;d.isLoaded=w;d.isSupported=g;d.load=J;d.pe=T})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(t,d){const ha=Math.PI/180;var fa=d.earth.radius;const r=d.earth.eccentricitySquared;fa={a1:fa*r,a2:fa*r*fa*r,a3:fa*r*r/2,a4:fa*r*fa*r*2.5,a5:fa*r+fa*r*r/2,a6:1-r};d={4267:{a:6378206.4,
f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:d.earth.radius,f:d.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:d.moon.radius,f:d.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:d.mars.radius,f:d.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,
f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,
f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},
104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:d.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};t.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;t.earthEllipsoidConstants=fa;t.spheroids=d;t.toRadians=ha;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],
function(t){return function(){function d(fa){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(fa&&fa.steps)for(const r of fa.steps)r instanceof t?this.steps.push(r):this.steps.push(new t({wkid:r.wkid,wkt:r.wkt,isInverse:r.isInverse}))}d.cacheKey=function(fa,r){return[void 0!==fa.wkid&&null!==fa.wkid?fa.wkid.toString():"-1",void 0!==fa.wkt&&null!==fa.wkt?fa.wkt.toString():"",void 0!==r.wkid&&null!==r.wkid?r.wkid.toString():"-1",void 0!==r.wkt&&null!==r.wkt?r.wkt.toString():
""].join()};d.fromGE=function(fa){const r=new d;let w="";for(const g of fa.steps)fa=t.fromGE(g),r.steps.push(fa),w+=fa.uid.toString()+",";r._cached_projection={};r._gtlistentry=null;r._chain=w;return r};var ha=d.prototype;ha.getInverse=function(){const fa=new d;fa.steps=[];for(let r=this.steps.length-1;0<=r;r--)fa.steps.push(this.steps[r].getInverse());return fa};ha.getGTListEntry=function(){let fa="";for(const r of this.steps)fa+=r.uid.toString()+",";fa!==this._chain&&(this._gtlistentry=null,this._cached_projection=
{},this._chain=fa);return this._gtlistentry};ha.assignCachedGe=function(fa,r,w){this._cached_projection[d.cacheKey(fa,r)]=w};ha.getCachedGeTransformation=function(fa,r){let w="";for(const g of this.steps)w+=g.uid.toString()+",";w!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=w);fa=this._cached_projection[d.cacheKey(fa,r)];return void 0===fa?null:fa};return d}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],
function(t){let d=0;return function(){function ha(fa=null){this.uid=d++;fa?(this._wkt=void 0!==fa.wkt?fa.wkt:null,this._wkid=void 0!==fa.wkid?fa.wkid:-1,this._isInverse=void 0!==fa.isInverse?!0===fa.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}ha.fromGE=function(fa){const r=new ha;r._wkt=fa.wkt;r._wkid=fa.wkid;r._isInverse=fa.isInverse;return r};ha.prototype.getInverse=function(){const fa=new ha;fa._wkt=this.wkt;fa._wkid=this._wkid;fa._isInverse=!this.isInverse;return fa};t._createClass(ha,
[{key:"wkt",get:function(){return this._wkt},set:function(fa){this._wkt=fa;this.uid=d++}},{key:"wkid",get:function(){return this._wkid},set:function(fa){this._wkid=fa;this.uid=d++}},{key:"isInverse",get:function(){return this._isInverse},set:function(fa){this._isInverse=fa;this.uid=d++}}]);return ha}()})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(t){let d=function(g,J,l){this.x=g;this.y=J;this.spatialReference=l;this.m=this.z=void 0},ha=function(g,J,l,y){this.rings=
g;this.spatialReference=J;this.hasM=this.hasZ=void 0;l&&(this.hasZ=l);y&&(this.hasM=y)},fa=function(g,J,l,y){this.paths=g;this.spatialReference=J;this.hasM=this.hasZ=void 0;l&&(this.hasZ=l);y&&(this.hasM=y)},r=function(g,J,l,y){this.points=g;this.spatialReference=J;this.hasM=this.hasZ=void 0;l&&(this.hasZ=l);y&&(this.hasM=y)},w=function(g,J,l,y,ea){this.xmin=g;this.ymin=J;this.xmax=l;this.ymax=y;this.spatialReference=ea;this.mmax=this.mmin=this.zmax=this.zmin=void 0};t.jsonAdapter={convertToGEGeometry:function(g,
J){return null==J?null:g.convertJSONToGeometry(J)},exportPoint:function(g,J,l){l=new d(g.getPointX(J),g.getPointY(J),l);const y=g.hasZ(J),ea=g.hasM(J);y&&(l.z=g.getPointZ(J));ea&&(l.m=g.getPointM(J));return l},exportPolygon:function(g,J,l){return new ha(g.exportPaths(J),l,g.hasZ(J),g.hasM(J))},exportPolyline:function(g,J,l){return new fa(g.exportPaths(J),l,g.hasZ(J),g.hasM(J))},exportMultipoint:function(g,J,l){return new r(g.exportPoints(J),l,g.hasZ(J),g.hasM(J))},exportExtent:function(g,J,l){var y=
g.hasZ(J);const ea=g.hasM(J);l=new w(g.getXMin(J),g.getYMin(J),g.getXMax(J),g.getYMax(J),l);y&&(y=g.getZExtent(J),l.zmin=y.vmin,l.zmax=y.vmax);ea&&(g=g.getMExtent(J),l.mmin=g.vmin,l.mmax=g.vmax);return l}};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../support/PromiseQueue ../../../support/arcadeOnDemand".split(" "),
function(t,d,ha,fa,r,w,g,J,l,y,ea,aa,I,F,T,e,u,v,K,p,q,B,Q){function Y(m){return m.every(n=>"exceedslimit"!==n.statisticType)}const W=new Set,ja=new w.MemCacheStorage(2E6);let E=0,G=function(){function m(D){this.capabilities={query:e.queryCapabilities};this.geometryType=D.geometryType;this.hasM=D.hasM;this.hasZ=D.hasZ;this.objectIdField=D.objectIdField;this.spatialReference=D.spatialReference;this.definitionExpression=D.definitionExpression;this.featureStore=D.featureStore;this.aggregateAdapter=D.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=D.timeInfo;D.cacheSpatialQueries&&(this._geometryQueryCache=new w.MemCache(E++ +"$$",ja));this.fieldsIndex=new q(D.fields);D.scheduler&&D.priority&&(this._frameQueue=new B,this._frameTask=D.scheduler.registerTask(D.priority,this))}var n=m.prototype;n.destroy=function(){this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._frameQueue.cancelAll(),this._frameQueue=null);this.clearCache();this._geometryQueryCache&&
this._geometryQueryCache.destroy();this._changeHandle&&(this._changeHandle.remove(),this._changeHandle=null);this.fieldsIndex.destroy()};n.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear();this._timeExtent=this._allItems=null};n.executeQuery=function(){var D=d._asyncToGenerator(function*(N={},da){let ia=fa.clone(N),la;try{ia=yield this._schedule(()=>p.normalizeQuery(ia,this.definitionExpression,this.spatialReference),da),ia=yield this._reschedule(()=>this._checkQuerySupport(ia),
da),la=yield this._reschedule(()=>this._executeGeometryQuery(ia,da),da),la=yield this._reschedule(()=>la.executeAggregateIdsQuery(ia),da),la=yield this._reschedule(()=>la.executeObjectIdsQuery(ia),da),la=yield this._reschedule(()=>la.executeTimeQuery(ia),da),la=yield this._reschedule(()=>la.executeAttributesQuery(ia),da)}catch(ra){if(ra!==p.QUERY_ENGINE_EMPTY_RESULT)throw ra;la=new u([],null,this)}return la.createQueryResponse(ia)});return function(){return D.apply(this,arguments)}}();n.executeQueryForCount=
function(){var D=d._asyncToGenerator(function*(N={},da){let ia=fa.clone(N),la;ia.returnGeometry=!1;ia.returnCentroid=!1;ia.outSR=null;try{ia=yield this._schedule(()=>p.normalizeQuery(ia,this.definitionExpression,this.spatialReference),da),ia=yield this._reschedule(()=>this._checkQuerySupport(ia),da),la=yield this._reschedule(()=>this._executeGeometryQuery(ia,da),da),la=yield this._reschedule(()=>la.executeAggregateIdsQuery(ia),da),la=yield this._reschedule(()=>la.executeObjectIdsQuery(ia),da),la=
yield this._reschedule(()=>la.executeTimeQuery(ia),da),la=yield this._reschedule(()=>la.executeAttributesQuery(ia),da)}catch(ra){if(ra!==p.QUERY_ENGINE_EMPTY_RESULT)throw ra;return 0}return la.createQueryResponseForCount(ia)});return function(){return D.apply(this,arguments)}}();n.executeQueryForExtent=function(){var D=d._asyncToGenerator(function*(N={},da){let ia=fa.clone(N),la;N=ia.outSR;try{ia=yield this._schedule(()=>p.normalizeQuery(ia,this.definitionExpression,this.spatialReference),da);ia=
yield this._reschedule(()=>this._checkQuerySupport(ia),da);ia.returnGeometry=!0;ia.returnCentroid=!1;ia.outSR=null;la=yield this._reschedule(()=>this._executeGeometryQuery(ia,da),da);la=yield this._reschedule(()=>la.executeAggregateIdsQuery(ia),da);la=yield this._reschedule(()=>la.executeObjectIdsQuery(ia),da);la=yield this._reschedule(()=>la.executeTimeQuery(ia),da);la=yield this._reschedule(()=>la.executeAttributesQuery(ia),da);const ra=la.size;if(!ra)return{count:ra,extent:null};J.set(L,J.NEGATIVE_INFINITY);
this.featureStore.forEachBounds(la.items,Ba=>J.expandWithAABB(L,Ba),O);const ya={xmin:L[0],ymin:L[1],xmax:L[3],ymax:L[4],spatialReference:p.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(L[2])&&isFinite(L[5])&&(ya.zmin=L[2],ya.zmax=L[5]);const xa=T.project(ya,la.spatialReference,N);xa.spatialReference=p.cleanFromGeometryEngine(N||this.spatialReference);if(0===xa.xmax-xa.xmin){const Ba=g.getMetersPerUnitForSR(xa.spatialReference);xa.xmin-=Ba;xa.xmax+=Ba}if(0===xa.ymax-xa.ymin){const Ba=
g.getMetersPerUnitForSR(xa.spatialReference);xa.ymin-=Ba;xa.ymax+=Ba}if(this.hasZ&&null!=xa.zmin&&null!=xa.zmax&&0===xa.zmax-xa.zmin){const Ba=g.getMetersPerUnitForSR(xa.spatialReference);xa.zmin-=Ba;xa.zmax+=Ba}return{count:ra,extent:xa}}catch(ra){if(ra===p.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw ra;}});return function(){return D.apply(this,arguments)}}();n.executeQueryForIds=function(){var D=d._asyncToGenerator(function*(N={},da){return this.executeQueryForIdSet(N,da).then(ia=>
Array.from(ia))});return function(){return D.apply(this,arguments)}}();n.executeQueryForIdSet=function(){var D=d._asyncToGenerator(function*(N={},da){let ia=fa.clone(N),la;ia.returnGeometry=!1;ia.returnCentroid=!1;ia.outSR=null;try{ia=yield this._schedule(()=>p.normalizeQuery(ia,this.definitionExpression,this.spatialReference),da);ia=yield this._reschedule(()=>this._checkQuerySupport(ia),da);la=yield this._reschedule(()=>this._executeGeometryQuery(ia,da),da);la=yield this._reschedule(()=>la.executeAggregateIdsQuery(ia),
da);la=yield this._reschedule(()=>la.executeObjectIdsQuery(ia),da);la=yield this._reschedule(()=>la.executeTimeQuery(ia),da);la=yield this._reschedule(()=>la.executeAttributesQuery(ia),da);const ra=la.items,ya=new Set;yield this._reschedule(()=>{for(const xa of ra)ya.add(la.featureAdapter.getObjectId(xa))},da);return ya}catch(ra){if(ra===p.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw ra;}});return function(){return D.apply(this,arguments)}}();n.executeQueryForSnapping=function(){var D=d._asyncToGenerator(function*(N,
da){const {point:ia,distance:la,types:ra}=N;if(0===ra)return{candidates:[]};const ya=yield this._reschedule(()=>this._checkQuerySupport(N.query),da),xa=!I.equals(ia.spatialReference,this.spatialReference);xa&&(yield T.checkProjectionSupport(ia.spatialReference,this.spatialReference));var Ba="number"===typeof la?la:la.x,Na="number"===typeof la?la:la.y;Ba={xmin:ia.x-Ba,xmax:ia.x+Ba,ymin:ia.y-Na,ymax:ia.y+Na,spatialReference:ia.spatialReference};Ba=xa?T.project(Ba,this.spatialReference):Ba;if(!Ba)return{candidates:[]};
Na=(yield aa.normalizeCentralMeridian(ea.fromJSON(ia),null,{signal:da}))[0];const Ta=(yield aa.normalizeCentralMeridian(ea.fromJSON(Ba),null,{signal:da}))[0];if(r.isNone(Na)||r.isNone(Ta))return{candidates:[]};let Ka=new u(this._searchFeatures(this._getQueryBBoxes(Ta.toJSON())),null,this);Ka=yield this._reschedule(()=>Ka.executeObjectIdsQuery(ya),da);Ka=yield this._reschedule(()=>Ka.executeTimeQuery(ya),da);Ka=yield this._reschedule(()=>Ka.executeAttributesQuery(ya),da);da=Na.toJSON();da=xa?T.project(da,
this.spatialReference):da;return Ka.createSnappingResponse({...N,point:da,distance:xa?Math.max(Ba.xmax-Ba.xmin,Ba.ymax-Ba.ymin)/2:la},ia.spatialReference)});return function(N,da){return D.apply(this,arguments)}}();n.executeQueryForLatestObservations=function(){var D=d._asyncToGenerator(function*(N={},da){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new ha("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:N,timeInfo:this.timeInfo});let ia=fa.clone(N),la;try{ia=
yield this._schedule(()=>p.normalizeQuery(ia,this.definitionExpression,this.spatialReference),da),ia=yield this._reschedule(()=>this._checkQuerySupport(ia),da),la=yield this._reschedule(()=>this._executeGeometryQuery(ia,da),da),la=yield this._reschedule(()=>la.executeAggregateIdsQuery(ia),da),la=yield this._reschedule(()=>la.executeObjectIdsQuery(ia),da),la=yield this._reschedule(()=>la.executeTimeQuery(ia),da),la=yield this._reschedule(()=>la.executeAttributesQuery(ia),da),la=yield this._reschedule(()=>
la.filterLatest(),da)}catch(ra){if(ra!==p.QUERY_ENGINE_EMPTY_RESULT)throw ra;la=new u([],null,this)}return la.createQueryResponse(ia)});return function(){return D.apply(this,arguments)}}();n.executeQueryForSummaryStatistics=function(){var D=d._asyncToGenerator(function*(N={},da,ia){N=fa.clone(N);let la;try{N=yield this._schedule(()=>p.normalizeQuery(N,this.definitionExpression,this.spatialReference),ia),N=yield this._reschedule(()=>this._checkSummaryStatisticsSupport(N,da),ia),la=yield this._reschedule(()=>
this._executeGeometryQuery(N,ia),ia),la=yield this._reschedule(()=>la.executeAggregateIdsQuery(N),ia),la=yield this._reschedule(()=>la.executeObjectIdsQuery(N),ia),la=yield this._reschedule(()=>la.executeTimeQuery(N),ia),la=yield this._reschedule(()=>la.executeAttributesQuery(N),ia)}catch(ra){if(ra!==p.QUERY_ENGINE_EMPTY_RESULT)throw ra;la=new u([],null,this)}return la.createSummaryStatisticsResponse(N,da)});return function(){return D.apply(this,arguments)}}();n._schedule=function(){var D=d._asyncToGenerator(function*(N,
da){return this._frameQueue?this._frameQueue.push(N,da):N()});return function(N,da){return D.apply(this,arguments)}}();n._reschedule=function(){var D=d._asyncToGenerator(function*(N,da){return this._frameQueue?this._frameQueue.unshift(N,da):N()});return function(N,da){return D.apply(this,arguments)}}();n.runTask=function(D){for(this._budget=D;!D.done&&this._frameQueue&&this._frameQueue.process();)D.madeProgress();this._budget=null};n._getAll=function(){if(!this._allItems){const D=[];this.featureStore.forEach(N=>
D.push(N));this._allItems=new u(D,null,this)}return this._allItems};n._executeGeometryQuery=function(){var D=d._asyncToGenerator(function*(N,da){var ia=this;const {geometry:la,outSR:ra,spatialRel:ya,returnGeometry:xa,returnCentroid:Ba}=N,Na=xa||Ba,Ta=I.isValid(ra)&&!I.equals(this.spatialReference,ra),Ka=this._geometryQueryCache?Ta&&Na?JSON.stringify({geometry:la,spatialRelationship:ya,outSpatialReference:ra}):JSON.stringify({geometry:la,spatialRelationship:ya}):null;if(Ka){var Ca=this._geometryQueryCache.get(Ka);
if(!r.isUndefined(Ca))return Ca}Ca=function(){var k=d._asyncToGenerator(function*(U){if(Ta&&Na)return U=yield U.project(ra),Ka&&ia._geometryQueryCache.put(Ka,U,U.size||1),U;Ka&&ia._geometryQueryCache.put(Ka,U,U.size||1);return U});return function(U){return k.apply(this,arguments)}}();if(!la)return Ca(this._getAll());const Ra=this.featureAdapter;if("esriSpatialRelDisjoint"===ya){N=this._searchFeatures(this._getQueryBBoxes(la));if(!N.length)return Ca(this._getAll());let k,U;const f=new Set;for(var gb of N)f.add(Ra.getObjectId(gb));
yield this._reschedule(()=>{let x=0;k=Array(f.size);this.featureStore.forEach(M=>k[x++]=M);U=f},da);N=yield this._reschedule(d._asyncToGenerator(function*(){const x=yield v.getSpatialQueryOperator(ya,la,ia.geometryType,ia.hasZ,ia.hasM);return new u(yield ia._runSpatialFilter(k,M=>!U.has(Ra.getObjectId(M))||x(Ra.getGeometry(M)),da),la,ia)}),da);return Ca(N)}gb=this._searchFeatures(this._getQueryBBoxes(la));if(!gb.length)return Ca=new u([],la,this),Ka&&this._geometryQueryCache.put(Ka,Ca,Ca.size||1),
Ca;if(this._canExecuteSoloPass(la,N))return Ca(new u(gb,la,this));const c=yield v.getSpatialQueryOperator(ya,la,this.geometryType,this.hasZ,this.hasM);N=yield this._runSpatialFilter(gb,k=>c(Ra.getGeometry(k)),da);return Ca(new u(N,la,this))});return function(N,da){return D.apply(this,arguments)}}();n._runSpatialFilter=function(){var D=d._asyncToGenerator(function*(N,da,ia){var la=this;if(!da)return N;if(!this._budget)return N.filter(Ba=>da(Ba));let ra=0;const ya=[],xa=function(){var Ba=d._asyncToGenerator(function*(){for(;ra<
N.length;){const Na=N[ra];da(Na)&&ya.push(Na);la._budget.done&&(yield la._reschedule(()=>xa(),ia));++ra}});return function(){return Ba.apply(this,arguments)}}();return this._reschedule(()=>xa(),ia).then(()=>ya)});return function(N,da,ia){return D.apply(this,arguments)}}();n._canExecuteSoloPass=function(D,N){const {geometryType:da}=this;({spatialRel:N}=N);return v.canQueryWithRBush(D)&&("esriSpatialRelEnvelopeIntersects"===N||"esriGeometryPoint"===da&&("esriSpatialRelIntersects"===N||"esriSpatialRelContains"===
N||"esriSpatialRelWithin"===N))};n._getQueryBBoxes=function(D){if(v.canQueryWithRBush(D)){if(ea.isExtent(D))return[l.fromValues(D.xmin,D.ymin,D.xmax,D.ymax)];if(ea.isPolygon(D))return D.rings.map(N=>l.fromValues(Math.min(N[0][0],N[2][0]),Math.min(N[0][1],N[2][1]),Math.max(N[0][0],N[2][0]),Math.max(N[0][1],N[2][1])))}return[y.getBoundsXY(l.create(),D)]};n._searchFeatures=function(D){for(const ia of D)this.featureStore.forEachInBounds(ia,la=>{W.add(la)});const N=Array(W.size);let da=0;W.forEach(ia=>
N[da++]=ia);W.clear();return N};n._checkSummaryStatisticsSupport=function(){var D=d._asyncToGenerator(function*(N,da){if(0>N.distance||null!=N.geometryPrecision||N.multipatchOption||N.pixelSize||N.relationParam||N.text||N.outStatistics||N.groupByFieldsForStatistics||N.having||N.orderByFields)throw new ha("feature-store:unsupported-query","Unsupported query options",{query:N});return Promise.all([this._checkAttributesQuerySupport(N),this._checkSummaryStatisticsParamsSupport(da),v.checkSpatialQuerySupport(N,
this.geometryType,this.spatialReference),T.checkProjectionSupport(this.spatialReference,N.outSR)]).then(()=>N)});return function(N,da){return D.apply(this,arguments)}}();n._checkSummaryStatisticsParamsSupport=function(){var D=d._asyncToGenerator(function*(N){var da=[];N.valueExpression&&({arcadeUtils:da}=yield Q.loadArcade(),da=da.extractFieldNames(N.valueExpression));N.field&&da.push(N.field);N.normalizationField&&da.push(N.normalizationField);if(!da.length)throw new ha("feature-store:unsupported-query",
"params should have at least a field or valueExpression",{params:N});F.validateFields(this.fieldsIndex,da,"params contains missing fields")});return function(N){return D.apply(this,arguments)}}();n._checkQuerySupport=function(){var D=d._asyncToGenerator(function*(N){if(0>N.distance||null!=N.geometryPrecision||N.multipatchOption||N.pixelSize||N.relationParam||N.text)throw new ha("feature-store:unsupported-query","Unsupported query options",{query:N});return Promise.all([this._checkAttributesQuerySupport(N),
this._checkStatisticsQuerySupport(N),v.checkSpatialQuerySupport(N,this.geometryType,this.spatialReference),T.checkProjectionSupport(this.spatialReference,N.outSR)]).then(()=>N)});return function(N){return D.apply(this,arguments)}}();n._checkAttributesQuerySupport=function(D){const {outFields:N,orderByFields:da,returnDistinctValues:ia,outStatistics:la}=D,ra=la?la.map(ya=>ya.outStatisticFieldName&&ya.outStatisticFieldName.toLowerCase()):[];if(da&&0<da.length){const ya=da.map(xa=>{const Ba=xa.toLowerCase();
return-1<Ba.indexOf(" asc")?Ba.split(" asc")[0]:-1<Ba.indexOf(" desc")?Ba.split(" desc")[0]:xa}).filter(xa=>-1===ra.indexOf(xa));F.validateFields(this.fieldsIndex,ya,"orderByFields contains missing fields")}if(N&&0<N.length)F.validateFields(this.fieldsIndex,N,"outFields contains missing fields");else if(ia)throw new ha("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:D});F.validateWhere(this.fieldsIndex,D.where)};n._checkStatisticsQuerySupport=function(){var D=
d._asyncToGenerator(function*(N){const {outStatistics:da,groupByFieldsForStatistics:ia,having:la}=N;var ra=ia&&ia.length,ya=da&&da.length;if(la){if(!ra||!ya)throw new ha("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:N});F.validateHaving(this.fieldsIndex,la,da)}if(ya&&Y(da)){ya=da.map(xa=>xa.onStatisticField);F.validateFields(this.fieldsIndex,ya,"onStatisticFields contains missing fields");ra&&F.validateFields(this.fieldsIndex,
ia,"groupByFieldsForStatistics contains missing fields");for(const xa of da){const {onStatisticField:Ba,statisticType:Na}=xa;if(("percentile_disc"===Na||"percentile_cont"===Na)&&"statisticParameters"in xa){if({statisticParameters:ra}=xa,!ra)throw new ha("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:xa,query:N});}else if("count"!==Na&&Ba&&F.hasInvalidFieldType(Ba,this.fieldsIndex))throw new ha("feature-store:unsupported-query","outStatistics contains non-numeric fields",
{definition:xa,query:N});}}});return function(N){return D.apply(this,arguments)}}();d._createClass(m,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const D=this.featureStore.fullBounds;return D?{xmin:D[0],ymin:D[1],xmax:D[2],ymax:D[3],spatialReference:p.cleanFromGeometryEngine(this.spatialReference)}:null}},{key:"timeExtent",get:function(){return this.timeInfo?this._timeExtent?this._timeExtent:this._timeExtent=K.getTimeExtent(this.timeInfo,
this.featureStore):null}},{key:"running",get:function(){return 0<this._frameQueue.length}}]);return m}();const O=J.create(),L=J.create();t.Feature=function(m,n=null,D,N,da){this.attributes=m;this.geometry=D;this.centroid=N;this.filterFlags=da;this.groupId=-1;this.displayId=n};t["default"]=G;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./PooledArray"],function(t,d,ha){let fa=function(){function w(J,l,y){this._namespace=
J;this._storage=l;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";y&&(this._storage.registerRemoveFunc(this._namespace,y),this._removeFunc=!0)}var g=w.prototype;g.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this);this._storage=null};g.resetHitRate=function(){this._hit=this._miss=0};g.put=function(J,l,y,ea=0){this._storage.put(this._namespace+J,l,y,
ea)};g.get=function(J){J=this._storage.get(this._namespace+J);void 0===J?++this._miss:++this._hit;return J};g.pop=function(J){J=this._storage.pop(this._namespace+J);void 0===J?++this._miss:++this._hit;return J};g.updateSize=function(J,l,y){this._storage.updateSize(this._namespace+J,l,y)};g.clear=function(){this._storage.clear(this._namespace)};g.clearAll=function(){this._storage.clearAll()};g.getStats=function(){return this._storage.getStats()};g.resetStats=function(){this._storage.resetStats()};
d._createClass(w,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return w}(),r=function(){function w(J=10485760){this._maxSize=J;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new ha;this._users=new ha}var g=w.prototype;g.destroy=function(){this.clearAll();this._removeFuncs.clear();
this._users.clear();this._db=null};g.register=function(J){this._users.push(J)};g.deregister=function(J){this._users.removeUnordered(J)};g.registerRemoveFunc=function(J,l){this._removeFuncs.push([J,l])};g.deregisterRemoveFunc=function(J){this._removeFuncs.filterInPlace(l=>l[0]!==J)};g.put=function(J,l,y,ea){const aa=this._db.get(J);aa&&(this._size-=aa.size,this._db.delete(J),aa.entry!==l&&this._notifyRemoved(J,aa.entry));y>this._maxSize?this._notifyRemoved(J,l):void 0===l?console.warn("Refusing to cache undefined entry "):
!y||0>y?console.warn("Refusing to cache entry with invalid size "+y):(ea=1+Math.max(ea,-3)- -3,this._db.set(J,{entry:l,size:y,lifetime:ea,lives:ea}),this._size+=y,this._checkSizeLimit())};g.updateSize=function(J,l,y){const ea=this._db.get(J);ea&&ea.entry===l&&(this._size-=ea.size,y>this._maxSize?(this._db.delete(J),this._notifyRemoved(J,l)):(ea.size=y,this._size+=y,this._checkSizeLimit()))};g.pop=function(J){const l=this._db.get(J);if(l)return this._size-=l.size,this._db.delete(J),++this._hit,l.entry;
++this._miss};g.get=function(J){const l=this._db.get(J);if(void 0===l)++this._miss;else return this._db.delete(J),l.lives=l.lifetime,this._db.set(J,l),++this._hit,l.entry};g.getStats=function(){const J={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},l={},y=[];this._db.forEach((I,F)=>{const T=I.lifetime;y[T]=(y[T]||0)+I.size;this._users.forAll(e=>{e=e.namespace;F.startsWith(e)&&(l[e]=
(l[e]||0)+I.size)})});const ea={};this._users.forAll(I=>{const F=I.namespace;!isNaN(I.hitRate)&&0<I.hitRate?(l[F]=l[F]||0,ea[F]=Math.round(100*I.hitRate)+"%"):ea[F]="0%"});var aa=Object.keys(l);aa.forEach(I=>l[I]=l[I]/this._size*100);aa.sort((I,F)=>l[F]-l[I]);aa.forEach(I=>J[I]=Math.round(l[I])+"% / "+ea[I]);for(aa=y.length-1;0<=aa;--aa){const I=y[aa];I&&(J["Priority "+(aa+-3-1)]=Math.round(I/this.size*100)+"%")}return J};g.resetStats=function(){this._hit=this._miss=0;this._users.forAll(J=>J.resetHitRate())};
g.clear=function(J){this._db.forEach((l,y)=>{y.startsWith(J)&&(this._size-=l.size,this._db.delete(y),this._notifyRemoved(y,l.entry))})};g.clearAll=function(){this._db.forEach((J,l)=>this._notifyRemoved(l,J.entry));this._size=0;this._db.clear()};g._getHitRate=function(){return this._hit/(this._hit+this._miss)};g._notifyRemoved=function(J,l){this._removeFuncs.forAll(y=>{if(J.startsWith(y[0]))y[1](l)})};g._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [J,l]of this._db)if(this._db.delete(J),
1>=l.lives?(this._size-=l.size,this._notifyRemoved(J,l.entry)):(--l.lives,this._db.set(J,l)),this._size<=.9*this.maxSize)break};d._createClass(w,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(J){this._maxSize=Math.max(J,0);this._checkSizeLimit()}}]);return w}();t.MIN_PRIORITY=-3;t.MemCache=fa;t.MemCacheStorage=r;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../tasks/geometry/cut ../../tasks/geometry/simplify".split(" "),
function(t,d,ha,fa,r,w,g,J,l,y,ea,aa,I){function F(B){const Q=[];let Y=0,W=0;for(let ja=0;ja<B.length;ja++){const E=B[ja];let G=null;for(let O=0;O<E.length;O++)G=E[O],Q.push(G),0===O?W=Y=G[0]:(Y=Math.min(Y,G[0]),W=Math.max(W,G[0]));G&&Q.push([(Y+W)/2,0])}return Q}function T(B,Q){if(!(B instanceof J||B instanceof g))throw q.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new fa("straightLineDensify: the input geometry is neither polyline nor polygon");var Y=l.getGeometryParts(B);
const W=[];for(const E of Y){Y=[];W.push(Y);Y.push([E[0][0],E[0][1]]);for(let G=0;G<E.length-1;G++){const O=E[G][0],L=E[G][1],m=E[G+1][0],n=E[G+1][1];var ja=Math.sqrt((m-O)*(m-O)+(n-L)*(n-L));const D=(n-L)/ja,N=(m-O)/ja,da=ja/Q;if(1<da){for(let ia=1;ia<=da-1;ia++){const la=ia*Q;Y.push([N*la+O,D*la+L])}ja=(ja+Math.floor(da-1)*Q)/2;Y.push([N*ja+O,D*ja+L])}Y.push([m,n])}}return"polygon"===B.type?new g({rings:W,spatialReference:B.spatialReference}):new J({paths:W,spatialReference:B.spatialReference})}
function e(B,Q,Y){Q&&(B=T(B,1E6),B=ea.webMercatorToGeographic(B,!0));Y&&(B=l.updatePolyGeometry(B,Y));return B}function u(B,Q,Y){if(Array.isArray(B)){var W=B[0];W>Q?(Y=l.offsetMagnitude(W,Q),B[0]=W+-2*Y*Q):W<Y&&(Q=l.offsetMagnitude(W,Y),B[0]=W+-2*Q*Y)}else W=B.x,W>Q?(Y=l.offsetMagnitude(W,Q),B=B.clone().offset(-2*Y*Q,0)):W<Y&&(Q=l.offsetMagnitude(W,Y),B=B.clone().offset(-2*Q*Y,0));return B}function v(B,Q){let Y=-1;for(let W=0;W<Q.cutIndexes.length;W++){const ja=Q.cutIndexes[W],E=Q.geometries[W],G=
l.getGeometryParts(E);for(let O=0;O<G.length;O++){const L=G[O];L.some(m=>{if(180>m[0])return!0;m=0;for(var n=0;n<L.length;n++){var D=L[n][0];m=D>m?D:m}m=Number(m.toFixed(9));m=-360*l.offsetMagnitude(m,180);for(n=0;n<L.length;n++)D=E.getPoint(O,n),E.setPoint(O,n,D.clone().offset(m,0));return!0})}if(ja===Y)if("polygon"===B[0].type)for(const O of l.getGeometryParts(E))B[ja]=B[ja].addRing(O);else{if("polyline"===B[0].type)for(const O of l.getGeometryParts(E))B[ja]=B[ja].addPath(O)}else Y=ja,B[ja]=E}return B}
function K(B,Q,Y){return p.apply(this,arguments)}function p(){p=d._asyncToGenerator(function*(B,Q,Y){if(!Array.isArray(B))return K([B],Q);var W=Q?Q.url:ha.geometryServiceUrl;let ja,E,G;let O=0;var L=[];Q=[];for(var m of B)if(w.isNone(m))Q.push(m);else{if(!n){var n=m.spatialReference;var D=y.getInfo(n);var N=(ja=n.isWebMercator)?102100:4326;E=l.cutParams[N].maxX;G=l.cutParams[N].minX;var da=l.cutParams[N].plus180Line;N=l.cutParams[N].minus180Line}if(D)if("mesh"===m.type)Q.push(m);else if("point"===
m.type)Q.push(u(m.clone(),E,G));else if("multipoint"===m.type){var ia=m.clone();ia.points=ia.points.map(la=>u(la,E,G));Q.push(ia)}else if("extent"===m.type)ia=m.clone()._normalize(!1,!1,D),Q.push(ia.rings?new g(ia):ia);else if(m.extent){ia=m.extent;const la=2*l.offsetMagnitude(ia.xmin,G)*E;let ra=0===la?m.clone():l.updatePolyGeometry(m.clone(),la);ia.offset(la,0);ia.intersects(da)&&ia.xmax!==E?(O=ia.xmax>O?ia.xmax:O,ra=e(ra,ja),L.push(ra),Q.push("cut")):ia.intersects(N)&&ia.xmin!==G?(O=2*ia.xmax*
E>O?2*ia.xmax*E:O,ra=e(ra,ja,360),L.push(ra),Q.push("cut")):Q.push(ra)}else Q.push(m.clone());else Q.push(m)}n=l.offsetMagnitude(O,E);D=-90;da=n;for(m=new J;0<n;)N=-180+360*n,m.addPath([[N,D],[N,-1*D]]),D*=-1,n--;if(0<L.length&&0<da){n=yield aa.cut(W,L,m,Y);n=v(L,n);D=[];L=[];for(da=0;da<Q.length;da++)m=Q[da],"cut"!==m?L.push(m):(m=n.shift(),N=B[da],w.isSome(N)&&"polygon"===N.type&&N.rings&&1<N.rings.length&&m.rings.length>=N.rings.length?(D.push(m),L.push("simplify")):L.push(ja?ea.geographicToWebMercator(m):
m));if(!D.length)return L;Q=yield I.simplify(W,D,Y);B=[];for(Y=0;Y<L.length;Y++)W=L[Y],"simplify"!==W?B.push(W):B.push(ja?ea.geographicToWebMercator(Q.shift()):Q.shift());return B}B=[];for(Y=0;Y<Q.length;Y++)W=Q[Y],"cut"!==W?B.push(W):(W=L.shift(),B.push(!0===ja?ea.geographicToWebMercator(W):W));return Promise.resolve(B)});return p.apply(this,arguments)}const q=r.getLogger("esri.geometry.support.normalizeUtils");t.getDenormalizedExtent=function(B){if(!B)return null;const Q=B.extent;if(!Q)return null;
var Y=B.spatialReference&&y.getInfo(B.spatialReference);if(!Y)return Q;const [W,ja]=Y.valid;({width:Y}=Q);let {xmin:E,xmax:G}=Q;[E,G]=[G,E];if("extent"===B.type||0===Y||Y<=ja||Y>2*ja||E<W||G>ja)return Q;let O;switch(B.type){case "polygon":if(1<B.rings.length)O=F(B.rings);else return Q;break;case "polyline":if(1<B.paths.length)O=F(B.paths);else return Q;break;case "multipoint":O=B.points}B=Q.clone();for(let L=0;L<O.length;L++){let m=O[L][0];0>m?(m+=ja,G=Math.max(m,G)):(m-=ja,E=Math.min(m,E))}B.xmin=
E;B.xmax=G;return B.width<Y?(B.xmin-=ja,B.xmax-=ja,B):Q};t.normalizeCentralMeridian=K;t.normalizeMapX=function(B,Q){if(Q=y.getInfo(Q)){const [Y,W]=Q.valid;Q=W-Y;if(B<Y)for(;B<Y;)B+=Q;if(B>W)for(;B>W;)B-=Q}return B};t.straightLineDensify=T;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(t,d,ha,fa){function r(g){return fa.isPolygon(g)?g.rings:g.paths}const w={102100:{maxX:2.0037508342788905E7,
minX:-2.0037508342788905E7,plus180Line:new d({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:ha.WebMercator}),minus180Line:new d({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:ha.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new d({paths:[[[180,-180],[180,180]]],spatialReference:ha.WGS84}),minus180Line:new d({paths:[[[-180,-180],[-180,180]]],spatialReference:ha.WGS84})}};
t.cutParams=w;t.getGeometryParts=r;t.getSpatialReferenceMinMaxX=function(g){g=(null==g?0:g.isWebMercator)?102100:4326;return[w[g].minX,w[g].maxX]};t.offsetMagnitude=function(g,J){return Math.ceil((g-J)/(2*J))};t.updatePolyGeometry=function(g,J){const l=r(g);for(const y of l)for(const ea of y)ea[0]+=J;return g};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/tasks/geometry/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../core/urlUtils ../../geometry/support/jsonUtils".split(" "),
function(t,d,ha,fa,r,w){function g(){g=d._asyncToGenerator(function*(J,l,y,ea){J="string"===typeof J?r.urlToObject(J):J;const aa=l[0].spatialReference;l={...ea,query:{...J.query,f:"json",sr:JSON.stringify(aa),target:JSON.stringify({geometryType:w.getJsonType(l[0]),geometries:l}),cutter:JSON.stringify(y)}};l=yield fa(J.path+"/cut",l);const {cutIndexes:I,geometries:F=[]}=l.data;return{cutIndexes:I,geometries:F.map(T=>{T=w.fromJSON(T);T.spatialReference=aa;return T})}});return g.apply(this,arguments)}
t.cut=function(J,l,y,ea){return g.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/tasks/geometry/simplify":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../request","../../core/urlUtils","../../geometry/support/jsonUtils"],function(t,d,ha,fa,r){function w(){w=d._asyncToGenerator(function*(l,y,ea){const aa="string"===typeof l?fa.urlToObject(l):l;l=y[0].spatialReference;const I=r.getJsonType(y[0]);y={...ea,query:{...aa.query,f:"json",sr:l.wkid?
l.wkid:JSON.stringify(l),geometries:JSON.stringify(g(y))}};y=yield ha(aa.path+"/simplify",y);return J(y.data,I,l)});return w.apply(this,arguments)}function g(l){return{geometryType:r.getJsonType(l[0]),geometries:l.map(y=>y.toJSON())}}function J(l,y,ea){const aa=r.getGeometryType(y);return l.map(I=>{I=aa.fromJSON(I);I.spatialReference=ea;return I})}t.simplify=function(l,y,ea){return w.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports",
"../../../core/Error","../../../core/sql/WhereClauseCache"],function(t,d,ha){function fa(l,y){return l?g.get(l,y):null}function r(l,y,ea,aa=!0){const I=[];for(const F of y)if("*"!==F&&!l.has(F))if(aa){y=w(F);try{const T=fa(y,l);if(!T)throw new d("feature-store:unsupported-query","invalid SQL expression",{where:y});if(!T.isStandardized)throw new d("feature-store:unsupported-query","expression is not standard",{clause:T});r(l,T.fieldNames,"expression contains missing fields")}catch(T){if((y=T&&T.details)&&
(y.clause||y.where))throw T;y&&y.missingFields?I.push(...y.missingFields):I.push(F)}}else I.push(F);if(I.length)throw new d("feature-store:unsupported-query",ea,{missingFields:I});}function w(l){return l.split(" as ")[0]}const g=new ha.WhereClauseCache(50,500),J=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));t.getAliasFromFieldName=function(l){return l.split(" as ")[1]};t.getExpressionFromFieldName=
w;t.getWhereClause=fa;t.hasInvalidFieldType=function(l,y){return(l=y.get(l))?!J.has(l.type):!1};t.validateFields=r;t.validateHaving=function(l,y,ea){if(!y)return!0;const aa=g.get(y,l);if(!aa)throw new d("feature-store:unsupported-query","invalid SQL expression",{having:y});if(!aa.isAggregate)throw new d("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:y});r(l,aa.fieldNames,"having contains missing fields");if(!aa.getExpressions().every(I=>{const {aggregateType:F,
field:T}=I,e=l.has(T)&&l.get(T).name;return ea.some(u=>{const {onStatisticField:v,statisticType:K}=u;return(l.has(v)&&l.get(v).name)===e&&K.toLowerCase().trim()===F})}))throw new d("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:y});return!0};t.validateWhere=function(l,y){if(!y)return!0;const ea=g.get(y,l);if(!ea)throw new d("feature-store:unsupported-query","invalid SQL expression",{where:y});if(!ea.isStandardized)throw new d("feature-store:unsupported-query",
"where clause is not standard",{where:y});r(l,ea.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(t,d,ha){let fa=function(){function r(w,g){this._cache=new d(w);this._invalidCache=new d(g)}r.prototype.get=function(w,g){const J=`${g.uid}:${w}`,l=this._cache.get(J);if(l)return l;if(void 0!==this._invalidCache.get(J))return null;try{const y=
ha.WhereClause.create(w,g);this._cache.put(J,y);return y}catch{return this._invalidCache.put(J,null),null}};return r}();t.WhereClauseCache=fa;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(t){return function(){function d(fa,r){this._storage=new t.MemCacheStorage;this._storage.maxSize=fa;r&&this._storage.registerRemoveFunc("",r)}var ha=d.prototype;ha.put=function(fa,r){this._storage.put(fa,r,1,1)};ha.pop=function(fa){return this._storage.pop(fa)};
ha.get=function(fa){return this._storage.get(fa)};ha.clear=function(){this._storage.clearAll()};ha.destroy=function(){this._storage.destroy()};return d}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(t,d,ha,fa,r,w){function g(L,m){L+="";return L.length>=m?L:Array(m-L.length+1).join("0")+L}function J(L,m,n="0",D="0",N="0",da="0",ia="",la="0",ra="0"){return"+"===
ia||"-"===ia?(L=`${g(parseInt(L,10),4)}-${g(parseInt(m,10),2)}-${g(parseInt(n,10),2)}`,m="",10>parseFloat(da)&&(m="0"),D=`${g(parseInt(D,10),2)}:${g(parseInt(N,10),2)}:${m+parseFloat(da).toString()}`,ia=`${ia}${g(parseInt(la,10),2)}:${g(parseInt(ra,10),2)}`,new Date(L+"T"+D+ia)):new Date(parseInt(L,10),parseInt(m,10)-1,parseInt(n,10),parseInt(D,10),parseInt(N,10),parseFloat(da))}function l(L){let m=B.exec(L);if(null!==m){const [,n,D,N,da,ia,la]=m;return J(n,D,N,da,ia,la)}m=Q.exec(L);if(null!==m){const [,
n,D,N,da,ia,la,ra,ya,xa]=m;return J(n,D,N,da,ia,la,ra,ya,xa)}m=Y.exec(L);if(null!==m){const [,n,D,N,da,ia,la,ra,ya]=m;return J(n,D,N,da,ia,"0",la,ra,ya)}m=W.exec(L);if(null!==m){const [,n,D,N,da,ia]=m;return J(n,D,N,da,ia)}m=q.exec(L);if(null!==m){const [,n,D,N]=m;return J(n,D,N)}throw Error("SQL Invalid Timestamp");}function y(L){L=q.exec(L);if(null===L)throw Error("SQL Invalid Date");const [,m,n,D]=L;return new Date(parseInt(m,10),parseInt(n,10)-1,parseInt(D,10))}function ea(L){return Array.isArray(L)?
L:[L]}function aa(L){return null!==L?!0!==L:null}function I(L,m){return null!=L&&null!=m?!0===L&&!0===m:!1===L||!1===m?!1:null}function F(L,m){return null!=L&&null!=m?!0===L||!0===m:!0===L||!0===m?!0:null}function T(L,m){if(null==L)return null;let n=!1;for(const D of m)if(null==D)n=null;else if(L===D){n=!0;break}return n}function e(L,m,n){if(null==L)return null;let D="",N=0;for(let da=0;da<m.length;da++){const ia=m.charAt(da);switch(N){case 0:ia===n?N=1:D=0<="-[]/{}()*+?.\\^$|".indexOf(ia)?D+("\\"+
ia):"%"===ia?D+".*":"_"===ia?D+".":D+ia;break;case 1:D=0<="-[]/{}()*+?.\\^$|".indexOf(ia)?D+("\\"+ia):D+ia,N=0}}return(new RegExp("^"+D+"$")).test(L)}function u(L){return L instanceof Date?L.valueOf():L}function v(L,m,n){if(null==m||null==n)return null;m=u(m);n=u(n);switch(L){case "\x3c\x3e":return m!==n;case "\x3d":return m===n;case "\x3e":return m>n;case "\x3c":return m<n;case "\x3e\x3d":return m>=n;case "\x3c\x3d":return m<=n}}function K(L,m,n){if(m instanceof r.SqlInterval)if(n instanceof Date)switch(L){case "+":return new Date(m.valueInMilliseconds()+
n.getTime());case "-":return m.valueInMilliseconds()-n.getTime();case "*":return m.valueInMilliseconds()*n.getTime();case "/":return m.valueInMilliseconds()/n.getTime()}else if(n instanceof r.SqlInterval)switch(L){case "+":return r.SqlInterval.createFromMilliseconds(m.valueInMilliseconds()+n.valueInMilliseconds());case "-":return r.SqlInterval.createFromMilliseconds(m.valueInMilliseconds()-n.valueInMilliseconds());case "*":return m.valueInMilliseconds()*n.valueInMilliseconds();case "/":return m.valueInMilliseconds()/
n.valueInMilliseconds()}else m=m.valueInMilliseconds();else if(n instanceof r.SqlInterval)if(m instanceof Date)switch(L){case "+":return new Date(n.valueInMilliseconds()+m.getTime());case "-":return new Date(m.getTime()-n.valueInMilliseconds());case "*":return m.getTime()*n.valueInMilliseconds();case "/":return m.getTime()/n.valueInMilliseconds()}else n=n.valueInMilliseconds();else if(m instanceof Date&&"number"===typeof n)switch(n*=864E5,m=m.getTime(),L){case "+":return new Date(m+n);case "-":return new Date(m-
n);case "*":return new Date(m*n);case "/":return new Date(m/n)}else if(n instanceof Date&&"number"===typeof m)switch(m*=864E5,n=n.getTime(),L){case "+":return new Date(m+n);case "-":return new Date(m-n);case "*":return new Date(m*n);case "/":return new Date(m/n)}switch(L){case "+":return m+n;case "-":return m-n;case "*":return m*n;case "/":return m/n}}function p(L,m,n,D){L=D.getAttribute(L,m);return null!=L&&1===n[m]?new Date(L):L}const q=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,B=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,
Q=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,Y=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,W=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,ja=new Set(["current_timestamp","current_date","current_time"]);let E=function(){function L(){}L.makeBool=function(m){return!0===m};L.featureValue=function(m,n,D,N){return p(m,n,D,N)};L.equalsNull=function(m){return null===m};L.applyLike=function(m,n,D){return e(m,n,
D)};L.ensureArray=function(m){return ea(m)};L.applyIn=function(m,n){return T(m,n)};L.currentDate=function(){const m=new Date;m.setHours(0,0,0,0);return m};L.makeSqlInterval=function(m,n,D){return r.SqlInterval.createFromValueAndQualifer(m,n,D)};L.convertInterval=function(m){return m instanceof r.SqlInterval?m.valueInMilliseconds():m};L.currentTimestamp=function(){return new Date};L.compare=function(m,n,D){return v(m,n,D)};L.calculate=function(m,n,D){return K(m,n,D)};L.makeComparable=function(m){return u(m)};
L.evaluateFunction=function(m,n){return r.evaluateFunction(m,n)};L.lookup=function(m,n){m=n[m];return void 0===m?null:m};L.between=function(m,n){return null==m||null==n[0]||null==n[1]?null:m>=n[0]&&m<=n[1]};L.notbetween=function(m,n){return null==m||null==n[0]||null==n[1]?null:m<n[0]||m>n[1]};L.ternaryNot=function(m){return aa(m)};L.ternaryAnd=function(m,n){return I(m,n)};L.ternaryOr=function(m,n){return F(m,n)};return L}(),G=function(){function L(n,D){this.fieldsIndex=D;this.datefields={};this.parameters=
{};this._hasDateFunctions=void 0;this.parseTree=w.WhereGrammar.parse(n);const {isStandardized:N,isAggregate:da,referencedFieldNames:ia}=this.extractExpressionInfo(D);this.referencedFieldNames=ia;this.isStandardized=N;this.isAggregate=da}L.create=function(n,D){return new L(n,D)};var m=L.prototype;m.testSet=function(n,D=O){const N={};for(const da of this.fieldNames)N[da]=n.map(ia=>D.getAttribute(ia,da));return!!this.evaluateNode(this.parseTree,{attributes:N},O)};m.calculateValue=function(n,D=O){n=this.evaluateNode(this.parseTree,
n,D);return n instanceof r.SqlInterval?n.valueInMilliseconds()/864E5:n};m.calculateValueCompiled=function(n,D=O){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(n,this.parameters,D,this.datefields);if(ha("csp-restrictions"))return this.calculateValue(n,D);this.compileMe();return this.parseTree._compiledVersion(n,this.parameters,D,this.datefields)};m.testFeature=function(n,D=O){return!!this.evaluateNode(this.parseTree,n,D)};m.testFeatureCompiled=function(n,D=O){if(null!=
this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(n,this.parameters,D,this.datefields);if(ha("csp-restrictions"))return this.testFeature(n,D);this.compileMe();return!!this.parseTree._compiledVersion(n,this.parameters,D,this.datefields)};m.getFunctions=function(){const n=new Set;this.visitAll(this.parseTree,D=>{"function"===D.type&&n.add(D.name.toLowerCase())});return Array.from(n)};m.getExpressions=function(){const n=new Map;this.visitAll(this.parseTree,D=>{if("function"===D.type){const N=
D.name.toLowerCase();D=D.args.value[0];if("column_ref"===D.type){D=D.column;const da=`${N}-${D}`;n.has(da)||n.set(da,{aggregateType:N,field:D})}}});return[...n.values()]};m.getVariables=function(){const n=new Set;this.visitAll(this.parseTree,D=>{"param"===D.type&&n.add(D.value.toLowerCase())});return Array.from(n)};m.compileMe=function(){const n="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter",
"datefields",n)).bind(E)};m.extractExpressionInfo=function(n){const D=[],N=new Set;let da=!0,ia=!0;this.visitAll(this.parseTree,la=>{switch(la.type){case "column_ref":{const ra=n.get(la.column);let ya,xa;ra?ya=xa=ra.name:(xa=la.column,ya=xa.toLowerCase());!ra||"date"!==ra.type&&"esriFieldTypeDate"!==ra.type||(this.datefields[ra.name]=1);N.has(ya)||(N.add(ya),D.push(xa));la.column=xa;break}case "function":{const {name:ra,args:ya}=la;la=ya.value.length;da&&(da=r.isStandardized(ra,la));ia&&(ia=fa.isAggregate(ra,
la))}}});return{referencedFieldNames:Array.from(D),isStandardized:da,isAggregate:ia}};m.visitAll=function(n,D){if(null!=n)switch(D(n),n.type){case "when_clause":this.visitAll(n.operand,D);this.visitAll(n.value,D);break;case "case_expression":for(const N of n.clauses)this.visitAll(N,D);"simple"===n.format&&this.visitAll(n.operand,D);null!==n.else&&this.visitAll(n.else,D);break;case "expr_list":for(const N of n.value)this.visitAll(N,D);break;case "unary_expr":this.visitAll(n.expr,D);break;case "binary_expr":this.visitAll(n.left,
D);this.visitAll(n.right,D);break;case "function":this.visitAll(n.args,D)}};m.evaluateNodeToJavaScript=function(n){switch(n.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(n.value)+", "+JSON.stringify(n.qualifier)+","+JSON.stringify(n.op)+")";case "case_expression":var D="";if("simple"===n.format){var N="this.makeComparable("+this.evaluateNodeToJavaScript(n.operand)+")";D="( ";for(let da=0;da<n.clauses.length;da++)D+=" ("+N+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(n.clauses[da].operand)+
")) ? ("+this.evaluateNodeToJavaScript(n.clauses[da].value)+") : "}else for(D="( ",N=0;N<n.clauses.length;N++)D+=" this.makeBool("+this.evaluateNodeToJavaScript(n.clauses[N].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(n.clauses[N].value)+") : ";D=null!==n.else?D+this.evaluateNodeToJavaScript(n.else):D+"null";return D+=" )";case "param":return"this.lookup("+JSON.stringify(n.value.toLowerCase())+",lookups)";case "expr_list":D="[";for(N of n.value)"["!==D&&(D+=","),D+=this.evaluateNodeToJavaScript(N);
return D+="]";case "unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(n.expr)+")";case "binary_expr":switch(n.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(n.left)+","+this.evaluateNodeToJavaScript(n.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(n.left)+","+this.evaluateNodeToJavaScript(n.right)+" )";case "IS":if("null"!==n.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(n.left)+
")";case "ISNOT":if("null"!==n.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(n.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(n.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(n.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(n.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(n.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(n.left)+
","+this.evaluateNodeToJavaScript(n.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(n.left)+","+this.evaluateNodeToJavaScript(n.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(n.left)+","+this.evaluateNodeToJavaScript(n.right)+","+JSON.stringify(n.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(n.left)+","+this.evaluateNodeToJavaScript(n.right)+","+JSON.stringify(n.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+
JSON.stringify(n.operator)+","+this.evaluateNodeToJavaScript(n.left)+","+this.evaluateNodeToJavaScript(n.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(n.operator)+","+this.evaluateNodeToJavaScript(n.left)+","+this.evaluateNodeToJavaScript(n.right)+")"}throw Error("Not Supported Operator "+n.operator);case "null":case "bool":case "string":case "number":return JSON.stringify(n.value);case "date":return"(new Date("+y(n.value).getTime().toString()+"))";case "timestamp":return"(new Date("+
l(n.value).getTime().toString()+"))";case "current_time":return"date"===n.mode?"this.currentDate()":"this.currentTimestamp()";case "column_ref":return"this.featureValue(feature,"+JSON.stringify(n.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(n.name)+","+this.evaluateNodeToJavaScript(n.args)+")"}throw Error("Unsupported sql syntax "+n.type);};m.evaluateNode=function(n,D,N){switch(n.type){case "interval":return D=this.evaluateNode(n.value,D,N),
r.SqlInterval.createFromValueAndQualifer(D,n.qualifier,n.op);case "case_expression":if("simple"===n.format){var da=u(this.evaluateNode(n.operand,D,N));for(var ia=0;ia<n.clauses.length;ia++)if(da===u(this.evaluateNode(n.clauses[ia].operand,D,N)))return this.evaluateNode(n.clauses[ia].value,D,N)}else for(da=0;da<n.clauses.length;da++)if(!0===this.evaluateNode(n.clauses[da].operand,D,N))return this.evaluateNode(n.clauses[da].value,D,N);return null!==n.else?this.evaluateNode(n.else,D,N):null;case "param":return this.parameters[n.value.toLowerCase()];
case "expr_list":da=[];for(ia of n.value)da.push(this.evaluateNode(ia,D,N));return da;case "unary_expr":return aa(this.evaluateNode(n.expr,D,N));case "binary_expr":switch(n.operator){case "AND":return I(this.evaluateNode(n.left,D,N),this.evaluateNode(n.right,D,N));case "OR":return F(this.evaluateNode(n.left,D,N),this.evaluateNode(n.right,D,N));case "IS":if("null"!==n.right.type)throw Error("Unsupported RHS for IS");return null===this.evaluateNode(n.left,D,N);case "ISNOT":if("null"!==n.right.type)throw Error("Unsupported RHS for IS");
return null!==this.evaluateNode(n.left,D,N);case "IN":return da=ea(this.evaluateNode(n.right,D,N)),T(this.evaluateNode(n.left,D,N),da);case "NOT IN":return da=ea(this.evaluateNode(n.right,D,N)),aa(T(this.evaluateNode(n.left,D,N),da));case "BETWEEN":return da=this.evaluateNode(n.left,D,N),n=this.evaluateNode(n.right,D,N),null==da||null==n[0]||null==n[1]?null:da>=u(n[0])&&da<=u(n[1]);case "NOTBETWEEN":return da=this.evaluateNode(n.left,D,N),n=this.evaluateNode(n.right,D,N),null==da||null==n[0]||null==
n[1]?null:da<u(n[0])||da>u(n[1]);case "LIKE":return e(this.evaluateNode(n.left,D,N),this.evaluateNode(n.right,D,N),n.escape);case "NOT LIKE":return aa(e(this.evaluateNode(n.left,D,N),this.evaluateNode(n.right,D,N),n.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return v(n.operator,this.evaluateNode(n.left,D,N),this.evaluateNode(n.right,D,N));case "-":case "+":case "*":case "/":return K(n.operator,this.evaluateNode(n.left,D,N),this.evaluateNode(n.right,
D,N))}case "null":case "bool":case "string":case "number":return n.value;case "date":return y(n.value);case "timestamp":return l(n.value);case "current_time":return D=new Date,"date"===n.mode&&D.setHours(0,0,0,0),D;case "column_ref":return p(D,n.column,this.datefields,N);case "function":return D=this.evaluateNode(n.args,D,N),this.isAggregate?fa.aggregateFunction(n.name,D):r.evaluateFunction(n.name,D)}throw Error("Unsupported sql syntax "+n.type);};d._createClass(L,[{key:"fieldNames",get:function(){return this.referencedFieldNames}},
{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this.visitAll(this.parseTree,n=>{"current_time"===n.type?this._hasDateFunctions=!0:"function"===n.type&&(this._hasDateFunctions=this._hasDateFunctions||ja.has(n.name.toLowerCase()))});return this._hasDateFunctions}}]);return L}();const O={getAttribute(L,m){return(L&&"object"===typeof L.attributes?L.attributes:L)[m]}};t.WhereClause=G;t.defaultAttributeAdapter=O;Object.defineProperty(t,
"__esModule",{value:!0})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(t){function d(r){let w=0;for(let g=0;g<r.length;g++)w+=r[g];return w/r.length}function ha(r){const w=d(r),g=r.length;let J=0;for(const l of r)J+=(l-w)**2;return 1<g?J/(g-1):0}const fa={min:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.min.apply(Math,r[0])},max:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.max.apply(Math,r[0])},avg:{minParams:1,maxParams:1,evaluate:r=>null==
r[0]?null:d(r[0])},sum:{minParams:1,maxParams:1,evaluate:r=>{if(null==r[0])r=null;else{{r=r[0];let w=0;for(let g=0;g<r.length;g++)w+=r[g];r=w}}return r}},stddev:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.sqrt(ha(r[0]))},count:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:r[0].length},var:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:ha(r[0])}};t.aggregateFunction=function(r,w){const g=fa[r.toLowerCase()];if(null==g)throw Error("Function Not Recognised");if(w.length<g.minParams||
w.length>g.maxParams)throw Error(`Invalid Parameter count for call to ${r.toUpperCase()}`);return g.evaluate(w)};t.isAggregate=function(r,w){r=fa[r.toLowerCase()];return null!=r&&w>=r.minParams&&w<=r.maxParams};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(t,d){let ha=function(){function r(){this.op="+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}r.fixDefaults=function(w){if(null!==
w.precision||null!==w.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};r.createFromMilliseconds=function(w){const g=new r;g.second=w/1E3;return g};r.createFromValueAndQualifer=function(w,g,J){let l=null;const y=new r;y.op="-"===J?"-":"+";if("interval-period"===g.type){r.fixDefaults(g);if("year"===g.period||"month"===g.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(w))y[g.period]=parseFloat(w);else throw Error("Illegal Interval");
}else{r.fixDefaults(g.start);r.fixDefaults(g.end);if("year"===g.start.period||"month"===g.start.period)throw Error("Year-Month Intervals not supported");if("year"===g.end.period||"month"===g.end.period)throw Error("Year-Month Intervals not supported");switch(g.start.period){case "day":switch(g.end.period){case "hour":l=/^[0-9]{1,} [0-9]{1,}$/;if(l.test(w))y[g.start.period]=parseFloat(w.split(" ")[0]),y[g.end.period]=parseFloat(w.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":l=
/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(l.test(w))y[g.start.period]=parseFloat(w.split(" ")[0]),w=w.split(" ")[1].split(":"),y.hour=parseFloat(w[0]),y.minute=parseFloat(w[1]);else throw Error("Illegal Interval");break;case "second":l=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(l.test(w))y[g.start.period]=parseFloat(w.split(" ")[0]),w=w.split(" ")[1].split(":"),y.hour=parseFloat(w[0]),y.minute=parseFloat(w[1]),y.second=parseFloat(w[2]);else throw Error("Illegal Interval");
break;default:throw"Invalid Interval.";}break;case "hour":switch(g.end.period){case "minute":l=/^[0-9]{1,}:[0-9]{1,}$/;if(l.test(w))y.hour=parseFloat(w.split(":")[0]),y.minute=parseFloat(w.split(":")[1]);else throw Error("Illegal Interval");break;case "second":l=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(l.test(w))w=w.split(":"),y.hour=parseFloat(w[0]),y.minute=parseFloat(w[1]),y.second=parseFloat(w[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;
case "minute":switch(g.end.period){case "second":l=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(l.test(w))w=w.split(":"),y.minute=parseFloat(w[0]),y.second=parseFloat(w[1]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;default:throw"Invalid Interval.";}}return y};r.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return r}();const fa=
{extract:{minParams:2,maxParams:2,evaluate:([r,w])=>{if(null==w)return null;if(w instanceof Date)switch(r.toUpperCase()){case "SECOND":return w.getSeconds();case "MINUTE":return w.getMinutes();case "HOUR":return w.getHours();case "DAY":return w.getDate();case "MONTH":return w.getMonth()+1;case "YEAR":return w.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:r=>{if(2===r.length){const [w,g]=r;return null==w||null==g?null:w.toString().substring(g-
1)}if(3===r.length){const [w,g,J]=r;return null==w||null==g||null==J?null:0>=J?"":w.toString().substring(g-1,g+J-1)}}},position:{minParams:2,maxParams:2,evaluate:([r,w])=>null==r||null==w?null:w.indexOf(r)+1},trim:{minParams:2,maxParams:3,evaluate:r=>{var w=3===r.length,g=w?r[1]:" ";w=w?r[2]:r[1];if(null==g||null==w)return null;g=`(${d.escapeRegExpString(g)})`;switch(r[0]){case "BOTH":return w.replace(new RegExp(`^${g}*|${g}*$`,"g"),"");case "LEADING":return w.replace(new RegExp(`^${g}*`,"g"),"");
case "TRAILING":return w.replace(new RegExp(`${g}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.abs(r[0])},ceiling:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.ceil(r[0])},floor:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.floor(r[0])},log:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.log(r[0])},log10:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.log(r[0])*Math.LOG10E},
sin:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.sin(r[0])},cos:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.cos(r[0])},tan:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.tan(r[0])},asin:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.asin(r[0])},acos:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.acos(r[0])},atan:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.atan(r[0])},sign:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:
0<r[0]?1:0>r[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:r=>null==r[0]||null==r[1]?null:r[0]**r[1]},mod:{minParams:2,maxParams:2,evaluate:r=>null==r[0]||null==r[1]?null:r[0]%r[1]},round:{minParams:1,maxParams:2,evaluate:r=>{const w=r[0];r=2===r.length?10**r[1]:1;return null==w?null:Math.round(w*r)/r}},truncate:{minParams:1,maxParams:2,evaluate:r=>null==r[0]?null:1===r.length?parseInt(r[0].toFixed(0),10):parseFloat(r[0].toFixed(r[1]))},char_length:{minParams:1,maxParams:1,evaluate:r=>"string"===
typeof r[0]||r[0]instanceof String?r[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:r=>{let w="";for(let g=0;g<r.length;g++){if(null==r[g])return null;w+=r[g].toString()}return w}},lower:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:r[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:r[0].toString().toUpperCase()}};t.SqlInterval=ha;t.evaluateFunction=function(r,w){const g=fa[r.toLowerCase()];if(null==g)throw Error("Function Not Recognised");
if(w.length<g.minParams||w.length>g.maxParams)throw Error(`Invalid Parameter count for call to ${r.toUpperCase()}`);return g.evaluate(w)};t.isStandardized=function(r,w){r=fa[r.toLowerCase()];return null!=r&&w>=r.minParams&&w<=r.maxParams};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(t,d){var ha={exports:{}};(function(r){(function(w,g){r.exports&&(r.exports=g())})(d.commonjsGlobal,function(){function w(g,
J,l,y){this.message=g;this.expected=J;this.found=l;this.location=y;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,w)}(function(g,J){function l(){this.constructor=g}l.prototype=J.prototype;g.prototype=new l})(w,Error);w.buildMessage=function(g,J){function l(I){return I.charCodeAt(0).toString(16).toUpperCase()}function y(I){return I.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,
"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+l(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+l(F)})}function ea(I){return I.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+l(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+l(F)})}var aa={literal:function(I){return'"'+y(I.text)+'"'},class:function(I){var F=
"",T;for(T=0;T<I.parts.length;T++)F+=I.parts[T]instanceof Array?ea(I.parts[T][0])+"-"+ea(I.parts[T][1]):ea(I.parts[T]);return"["+(I.inverted?"^":"")+F+"]"},any:function(I){return"any character"},end:function(I){return"end of input"},other:function(I){return I.description}};return"Expected "+function(I){var F=Array(I.length),T;for(T=0;T<I.length;T++){var e=T;var u=I[T];u=aa[u.type](u);F[e]=u}F.sort();if(0<F.length){for(I=T=1;T<F.length;T++)F[T-1]!==F[T]&&(F[I]=F[T],I++);F.length=I}switch(F.length){case 1:return F[0];
case 2:return F[0]+" or "+F[1];default:return F.slice(0,-1).join(", ")+", or "+F[F.length-1]}}(g)+" but "+(J?'"'+y(J)+'"':"end of input")+" found."};return{SyntaxError:w,parse:function(g,J){function l(h,C){return{type:"literal",text:h,ignoreCase:C}}function y(h,C,A){return{type:"class",parts:h,inverted:C,ignoreCase:A}}function ea(h){var C=fc[h],A;if(!C){for(A=h-1;!fc[A];)A--;C=fc[A];for(C={line:C.line,column:C.column};A<h;)10===g.charCodeAt(A)?(C.line++,C.column=1):C.column++,A++;fc[h]=C}return C}
function aa(h,C){var A=ea(h),Z=ea(C);return{start:{offset:h,line:A.line,column:A.column},end:{offset:C,line:Z.line,column:Z.column}}}function I(h){b<ub||(b>ub&&(ub=b,vc=[]),vc.push(h))}function F(){var h=b;var C=oa();if(C!==a)if(C=e(),C!==a){var A=oa();A!==a?h=C:(b=h,h=a)}else b=h,h=a;else b=h,h=a;return h}function T(){var h=b;var C=e();if(C!==a){var A=[];var Z=b;var qa=oa();if(qa!==a){var Aa=Ea();if(Aa!==a){var Ga=oa();if(Ga!==a){var Ma=e();Ma!==a?Z=qa=[qa,Aa,Ga,Ma]:(b=Z,Z=a)}else b=Z,Z=a}else b=
Z,Z=a}else b=Z,Z=a;for(;Z!==a;)A.push(Z),Z=b,qa=oa(),qa!==a?(Aa=Ea(),Aa!==a?(Ga=oa(),Ga!==a?(Ma=e(),Ma!==a?Z=qa=[qa,Aa,Ga,Ma]:(b=Z,Z=a)):(b=Z,Z=a)):(b=Z,Z=a)):(b=Z,Z=a);if(A!==a){h={type:"expr_list"};C=[C];for(Z=0;Z<A.length;Z++)C.push(A[Z][3]);h.value=C}else b=h,h=a}else b=h,h=a;return h}function e(){var h=b;var C=u();if(C!==a){var A=[];var Z=b;var qa=oa();if(qa!==a){var Aa=x();if(Aa!==a){var Ga=oa();if(Ga!==a){var Ma=u();Ma!==a?Z=qa=[qa,Aa,Ga,Ma]:(b=Z,Z=a)}else b=Z,Z=a}else b=Z,Z=a}else b=Z,Z=a;
for(;Z!==a;)A.push(Z),Z=b,qa=oa(),qa!==a?(Aa=x(),Aa!==a?(Ga=oa(),Ga!==a?(Ma=u(),Ma!==a?Z=qa=[qa,Aa,Ga,Ma]:(b=Z,Z=a)):(b=Z,Z=a)):(b=Z,Z=a)):(b=Z,Z=a);A!==a?h=C=ab(C,A):(b=h,h=a)}else b=h,h=a;return h}function u(){var h=b;var C=v();if(C!==a){var A=[];var Z=b;var qa=oa();if(qa!==a){var Aa=f();if(Aa!==a){var Ga=oa();if(Ga!==a){var Ma=v();Ma!==a?Z=qa=[qa,Aa,Ga,Ma]:(b=Z,Z=a)}else b=Z,Z=a}else b=Z,Z=a}else b=Z,Z=a;for(;Z!==a;)A.push(Z),Z=b,qa=oa(),qa!==a?(Aa=f(),Aa!==a?(Ga=oa(),Ga!==a?(Ma=v(),Ma!==a?Z=qa=
[qa,Aa,Ga,Ma]:(b=Z,Z=a)):(b=Z,Z=a)):(b=Z,Z=a)):(b=Z,Z=a);A!==a?h=C=ab(C,A):(b=h,h=a)}else b=h,h=a;return h}function v(){var h=b;var C=U();if(C===a){C=b;if(33===g.charCodeAt(b)){var A=Qa;b++}else A=a,0===pa&&I(vb);if(A!==a){var Z=b;pa++;if(61===g.charCodeAt(b)){var qa=zb;b++}else qa=a,0===pa&&I(Fb);pa--;qa===a?Z=void 0:(b=Z,Z=a);Z!==a?C=A=[A,Z]:(b=C,C=a)}else b=C,C=a}C!==a?(A=oa(),A!==a?(Z=v(),Z!==a?h=C={type:"unary_expr",operator:"NOT",expr:Z}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a);if(h===a)if(h=b,C=B(),
C!==a)if(A=oa(),A!==a){A=[];Z=b;qa=oa();if(qa!==a){var Aa=K();if(Aa!==a){var Ga=oa();if(Ga!==a){var Ma=B();Ma!==a?Z=qa=[qa,Aa,Ga,Ma]:(b=Z,Z=a)}else b=Z,Z=a}else b=Z,Z=a}else b=Z,Z=a;if(Z!==a)for(;Z!==a;)A.push(Z),Z=b,qa=oa(),qa!==a?(Aa=K(),Aa!==a?(Ga=oa(),Ga!==a?(Ma=B(),Ma!==a?Z=qa=[qa,Aa,Ga,Ma]:(b=Z,Z=a)):(b=Z,Z=a)):(b=Z,Z=a)):(b=Z,Z=a);else A=a;A!==a&&(A={type:"arithmetic",tail:A});A===a&&(A=b,Z=q(),Z!==a?(qa=oa(),qa!==a?(qa=za(),qa!==a?(qa=oa(),qa!==a?(qa=T(),qa!==a?(Aa=oa(),Aa!==a?(Aa=Da(),Aa!==
a?A=Z={op:Z,right:qa}:(b=A,A=a)):(b=A,A=a)):(b=A,A=a)):(b=A,A=a)):(b=A,A=a)):(b=A,A=a)):(b=A,A=a),A===a&&(A=b,Z=q(),Z!==a?(qa=oa(),qa!==a?(qa=za(),qa!==a?(qa=oa(),qa!==a?(qa=Da(),qa!==a?A=Z={op:Z,right:{type:"expr_list",value:[]}}:(b=A,A=a)):(b=A,A=a)):(b=A,A=a)):(b=A,A=a)):(b=A,A=a),A===a&&(A=b,Z=q(),Z!==a?(qa=oa(),qa!==a?(qa=m(),qa!==a?A=Z={op:Z,right:qa}:(b=A,A=a)):(b=A,A=a)):(b=A,A=a))),A===a&&(A=b,qa=U(),qa!==a?(Z=oa(),Z!==a?(Z=M(),Z!==a?(Aa=oa(),Aa!==a?(Aa=B(),Aa!==a?(Ga=oa(),Ga!==a?(Ga=f(),
Ga!==a?(qa=oa(),qa!==a?(qa=B(),qa!==a?A=qa={op:"NOT"+Z,right:{type:"expr_list",value:[Aa,qa]}}:(b=A,A=a)):(b=A,A=a)):(b=A,A=a)):(b=A,A=a)):(b=A,A=a)):(b=A,A=a)):(b=A,A=a)):(b=A,A=a)):(b=A,A=a),A===a&&(A=b,qa=M(),qa!==a?(Z=oa(),Z!==a?(Z=B(),Z!==a?(Aa=oa(),Aa!==a?(Aa=f(),Aa!==a?(Ga=oa(),Ga!==a?(Ga=B(),Ga!==a?A=qa={op:qa,right:{type:"expr_list",value:[Z,Ga]}}:(b=A,A=a)):(b=A,A=a)):(b=A,A=a)):(b=A,A=a)):(b=A,A=a)):(b=A,A=a)):(b=A,A=a)),A===a&&(A=b,Z=c(),Z!==a?(qa=oa(),qa!==a?(qa=U(),qa!==a?(qa=oa(),qa!==
a?(qa=B(),qa!==a?A=Z={op:Z+"NOT",right:qa}:(b=A,A=a)):(b=A,A=a)):(b=A,A=a)):(b=A,A=a)):(b=A,A=a),A===a&&(A=b,Z=c(),Z!==a?(qa=oa(),qa!==a?(qa=B(),qa!==a?A=Z={op:Z,right:qa}:(b=A,A=a)):(b=A,A=a)):(b=A,A=a)),A===a&&(A=b,Z=p(),Z!==a?(qa=oa(),qa!==a?(qa=la(),qa!==a?(Aa=oa(),Aa!==a?(Aa=b,g.substr(b,6).toLowerCase()===zd?(Ga=g.substr(b,6),b+=6):(Ga=a,0===pa&&I(Ad)),Ga!==a?(Ga=b,pa++,Ma=O(),pa--,Ma===a?Ga=void 0:(b=Ga,Ga=a),Ga!==a?Aa="ESCAPE":(b=Aa,Aa=a)):(b=Aa,Aa=a),Aa!==a?(Aa=oa(),Aa!==a?(Aa=ra(),Aa!==
a?A=Z={op:Z,right:qa,escape:Aa.value}:(b=A,A=a)):(b=A,A=a)):(b=A,A=a)):(b=A,A=a)):(b=A,A=a)):(b=A,A=a)):(b=A,A=a),A===a&&(A=b,Z=p(),Z!==a?(qa=oa(),qa!==a?(qa=la(),qa!==a?A=Z={op:Z,right:qa,escape:""}:(b=A,A=a)):(b=A,A=a)):(b=A,A=a))))));A===a&&(A=null);A!==a?(h=C,C=A,""==C||void 0==C||null==C?C=h:(A=null,C=A="arithmetic"==C.type?ab(h,C.tail):eb(C.op,h,C.right,C.escape)),h=C):(b=h,h=a)}else b=h,h=a;else b=h,h=a;return h}function K(){if(g.substr(b,2)===ec){var h=ec;b+=2}else h=a,0===pa&&I(mb);h===a&&
(62===g.charCodeAt(b)?(h=yb,b++):(h=a,0===pa&&I(Ua)),h===a&&(g.substr(b,2)===kb?(h=kb,b+=2):(h=a,0===pa&&I(tb)),h===a&&(g.substr(b,2)===Oa?(h=Oa,b+=2):(h=a,0===pa&&I(Gb)),h===a&&(60===g.charCodeAt(b)?(h=S,b++):(h=a,0===pa&&I(ca)),h===a&&(61===g.charCodeAt(b)?(h=zb,b++):(h=a,0===pa&&I(Fb)),h===a&&(g.substr(b,2)===R?(h=R,b+=2):(h=a,0===pa&&I(ka))))))));return h}function p(){var h=h=b;var C=U();if(C!==a){var A=oa();if(A!==a){var Z=k();Z!==a?h=C=[C,A,Z]:(b=h,h=a)}else b=h,h=a}else b=h,h=a;h!==a&&(h=h[0]+
" "+h[2]);h===a&&(h=k());return h}function q(){var h=h=b;var C=U();if(C!==a){var A=oa();if(A!==a){var Z=gb();Z!==a?h=C=[C,A,Z]:(b=h,h=a)}else b=h,h=a}else b=h,h=a;h!==a&&(h=h[0]+" "+h[2]);h===a&&(h=gb());return h}function B(){var h=b;var C=Y();if(C!==a){var A=[];var Z=b;var qa=oa();if(qa!==a){var Aa=Q();if(Aa!==a){var Ga=oa();if(Ga!==a){var Ma=Y();Ma!==a?Z=qa=[qa,Aa,Ga,Ma]:(b=Z,Z=a)}else b=Z,Z=a}else b=Z,Z=a}else b=Z,Z=a;for(;Z!==a;)A.push(Z),Z=b,qa=oa(),qa!==a?(Aa=Q(),Aa!==a?(Ga=oa(),Ga!==a?(Ma=
Y(),Ma!==a?Z=qa=[qa,Aa,Ga,Ma]:(b=Z,Z=a)):(b=Z,Z=a)):(b=Z,Z=a)):(b=Z,Z=a);A!==a?h=C=ab(C,A):(b=h,h=a)}else b=h,h=a;return h}function Q(){if(43===g.charCodeAt(b)){var h=ta;b++}else h=a,0===pa&&I(va);h===a&&(45===g.charCodeAt(b)?(h=Ha,b++):(h=a,0===pa&&I(La)));return h}function Y(){var h=b;var C=ja();if(C!==a){var A=[];var Z=b;var qa=oa();if(qa!==a){var Aa=W();if(Aa!==a){var Ga=oa();if(Ga!==a){var Ma=ja();Ma!==a?Z=qa=[qa,Aa,Ga,Ma]:(b=Z,Z=a)}else b=Z,Z=a}else b=Z,Z=a}else b=Z,Z=a;for(;Z!==a;)A.push(Z),
Z=b,qa=oa(),qa!==a?(Aa=W(),Aa!==a?(Ga=oa(),Ga!==a?(Ma=ja(),Ma!==a?Z=qa=[qa,Aa,Ga,Ma]:(b=Z,Z=a)):(b=Z,Z=a)):(b=Z,Z=a)):(b=Z,Z=a);A!==a?h=C=ab(C,A):(b=h,h=a)}else b=h,h=a;return h}function W(){if(42===g.charCodeAt(b)){var h=Za;b++}else h=a,0===pa&&I(Ya);h===a&&(47===g.charCodeAt(b)?(h=Xa,b++):(h=a,0===pa&&I(ib)));return h}function ja(){var h=ra();if(h===a){var C=b;var A=b;var Z=Na();if(Z!==a){var qa=Ta();if(qa!==a){var Aa=Ka();Aa!==a?A=Z=parseFloat(Z+qa+Aa):(b=A,A=a)}else b=A,A=a}else b=A,A=a;A===a&&
(A=b,Z=Na(),Z!==a?(qa=Ta(),qa!==a?A=Z=parseFloat(Z+qa):(b=A,A=a)):(b=A,A=a),A===a&&(A=b,Z=Na(),Z!==a?(qa=Ka(),qa!==a?A=Z=parseFloat(Z+qa):(b=A,A=a)):(b=A,A=a),A===a&&(A=b,Z=Na(),Z!==a&&(Z=parseFloat(Z)),A=Z)));var Ga=A;if(Ga!==a){var Ma=b;pa++;var Bd=G();pa--;Bd===a?Ma=void 0:(b=Ma,Ma=a);Ma!==a?C=Ga={type:"number",value:Ga}:(b=C,C=a)}else b=C,C=a;h=C;if(h===a){var Rb=b;var Hb=b;if(g.substr(b,4).toLowerCase()===Cd){var gc=g.substr(b,4);b+=4}else gc=a,0===pa&&I(Dd);if(gc!==a){var Sb=b;pa++;var Ed=O();
pa--;Ed===a?Sb=void 0:(b=Sb,Sb=a);Sb!==a?Hb=gc=[gc,Sb]:(b=Hb,Hb=a)}else b=Hb,Hb=a;var Cb=Hb;Cb!==a&&(Cb={type:"bool",value:!0});Rb=Cb;if(Rb===a){Rb=b;var Ib=b;if(g.substr(b,5).toLowerCase()===Fd){var hc=g.substr(b,5);b+=5}else hc=a,0===pa&&I(Gd);if(hc!==a){var Tb=b;pa++;var Hd=O();pa--;Hd===a?Tb=void 0:(b=Tb,Tb=a);Tb!==a?Ib=hc=[hc,Tb]:(b=Ib,Ib=a)}else b=Ib,Ib=a;Cb=Ib;Cb!==a&&(Cb={type:"bool",value:!1});Rb=Cb}h=Rb;if(h===a){var Jb=b;if(g.substr(b,4).toLowerCase()===Id){var ic=g.substr(b,4);b+=4}else ic=
a,0===pa&&I(Jd);if(ic!==a){var Ub=b;pa++;var Kd=O();pa--;Kd===a?Ub=void 0:(b=Ub,Ub=a);Ub!==a?Jb=ic=[ic,Ub]:(b=Jb,Jb=a)}else b=Jb,Jb=a;var wc=Jb;wc!==a&&(wc={type:"null",value:null});h=wc;if(h===a){var Ab=b;var Kb=b;if(g.substr(b,4).toLowerCase()===Ld){var xc=g.substr(b,4);b+=4}else xc=a,0===pa&&I(Md);if(xc!==a){var jc=b;pa++;var Nd=O();pa--;Nd===a?jc=void 0:(b=jc,jc=a);jc!==a?Kb=xc="DATE":(b=Kb,Kb=a)}else b=Kb,Kb=a;var Wc=Kb;if(Wc!==a){var Od=oa();if(Od!==a){var Xc=la();Xc!==a?Ab=Wc={type:"date",
value:Xc.value}:(b=Ab,Ab=a)}else b=Ab,Ab=a}else b=Ab,Ab=a;h=Ab;if(h===a){var Bb=b;var Lb=b;if(g.substr(b,9).toLowerCase()===Pd){var yc=g.substr(b,9);b+=9}else yc=a,0===pa&&I(Qd);if(yc!==a){var kc=b;pa++;var Rd=O();pa--;Rd===a?kc=void 0:(b=kc,kc=a);kc!==a?Lb=yc="TIMESTAMP":(b=Lb,Lb=a)}else b=Lb,Lb=a;var Yc=Lb;if(Yc!==a){var Sd=oa();if(Sd!==a){var Zc=la();Zc!==a?Bb=Yc={type:"timestamp",value:Zc.value}:(b=Bb,Bb=a)}else b=Bb,Bb=a}else b=Bb,Bb=a;h=Bb;if(h===a){var Va=b;var Vb=X();if(Vb!==a){var zc=oa();
if(zc!==a){if(45===g.charCodeAt(b)){var wb=Ha;b++}else wb=a,0===pa&&I(La);wb===a&&(43===g.charCodeAt(b)?(wb=ta,b++):(wb=a,0===pa&&I(va)));if(wb!==a){var Ac=oa();if(Ac!==a){var Wb=la();if(Wb!==a){var Td=oa();if(Td!==a){var $c=D();$c!==a?Va=Vb={type:"interval",value:Wb,qualifier:$c,op:wb}:(b=Va,Va=a)}else b=Va,Va=a}else b=Va,Va=a}else b=Va,Va=a}else b=Va,Va=a}else b=Va,Va=a}else b=Va,Va=a;Va===a&&(Va=b,Vb=X(),Vb!==a?(zc=oa(),zc!==a?(wb=la(),wb!==a?(Ac=oa(),Ac!==a?(Wb=D(),Wb!==a?Va=Vb={type:"interval",
value:wb,qualifier:Wb,op:""}:(b=Va,Va=a)):(b=Va,Va=a)):(b=Va,Va=a)):(b=Va,Va=a)):(b=Va,Va=a));h=Va}}}}}}var Sa=h;if(Sa===a){var cb=b;var Mb=b;if(g.substr(b,7).toLowerCase()===Ud){var Bc=g.substr(b,7);b+=7}else Bc=a,0===pa&&I(Vd);if(Bc!==a){var lc=b;pa++;var Wd=O();pa--;Wd===a?lc=void 0:(b=lc,lc=a);lc!==a?Mb=Bc="EXTRACT":(b=Mb,Mb=a)}else b=Mb,Mb=a;var ad=Mb;if(ad!==a){var Xd=oa();if(Xd!==a){var Yd=za();if(Yd!==a){var Zd=oa();if(Zd!==a){var qb=z();qb===a&&(qb=H(),qb===a&&(qb=V(),qb===a&&(qb=ma(),qb===
a&&(qb=na(),qb===a&&(qb=sa())))));var bd=qb;if(bd!==a){var $d=oa();if($d!==a){var ae=P();if(ae!==a){var be=oa();if(be!==a){var cd=e();if(cd!==a){var ce=oa();if(ce!==a){var de=Da();de!==a?cb=ad={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:bd},cd]}}:(b=cb,cb=a)}else b=cb,cb=a}else b=cb,cb=a}else b=cb,cb=a}else b=cb,cb=a}else b=cb,cb=a}else b=cb,cb=a}else b=cb,cb=a}else b=cb,cb=a}else b=cb,cb=a}else b=cb,cb=a;Sa=cb;if(Sa===a){var $a=b;var Nb=b;if(g.substr(b,9).toLowerCase()===
ee){var Cc=g.substr(b,9);b+=9}else Cc=a,0===pa&&I(fe);if(Cc!==a){var mc=b;pa++;var ge=O();pa--;ge===a?mc=void 0:(b=mc,mc=a);mc!==a?Nb=Cc="SUBSTRING":(b=Nb,Nb=a)}else b=Nb,Nb=a;var dd=Nb;if(dd!==a){var he=oa();if(he!==a){var ie=za();if(ie!==a){var je=oa();if(je!==a){var Dc=e();if(Dc!==a){var ke=oa();if(ke!==a){var le=P();if(le!==a){var me=oa();if(me!==a){var Ec=e();if(Ec!==a){var ne=oa();if(ne!==a){var lb=b;var Ob=b;if(g.substr(b,3).toLowerCase()===oe){var Fc=g.substr(b,3);b+=3}else Fc=a,0===pa&&I(pe);
if(Fc!==a){var nc=b;pa++;var qe=O();pa--;qe===a?nc=void 0:(b=nc,nc=a);nc!==a?Ob=Fc="FOR":(b=Ob,Ob=a)}else b=Ob,Ob=a;var Xb=Ob;if(Xb!==a){var ed=oa();if(ed!==a){var fd=e();if(fd!==a){var gd=oa();gd!==a?lb=Xb=[Xb,ed,fd,gd]:(b=lb,lb=a)}else b=lb,lb=a}else b=lb,lb=a}else b=lb,lb=a;lb===a&&(lb=null);lb!==a?(Xb=Da(),Xb!==a?$a=dd={type:"function",name:"substring",args:{type:"expr_list",value:lb?[Dc,Ec,lb[2]]:[Dc,Ec]}}:(b=$a,$a=a)):(b=$a,$a=a)}else b=$a,$a=a}else b=$a,$a=a}else b=$a,$a=a}else b=$a,$a=a}else b=
$a,$a=a}else b=$a,$a=a}else b=$a,$a=a}else b=$a,$a=a}else b=$a,$a=a}else b=$a,$a=a;Sa=$a;if(Sa===a){var Ja=b;var Yb=ba();if(Yb!==a){var Gc=oa();if(Gc!==a){var Hc=za();if(Hc!==a){var Ic=oa();if(Ic!==a){var rb=n();rb===a&&(rb=null);if(rb!==a){var Jc=oa();if(Jc!==a){var Zb=e();if(Zb!==a){var Kc=oa();if(Kc!==a){var Lc=P();if(Lc!==a){var re=oa();if(re!==a){var hd=e();if(hd!==a){var se=oa();if(se!==a){var te=Da();te!==a?Ja=Yb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==
rb?"BOTH":rb},Zb,hd]}}:(b=Ja,Ja=a)}else b=Ja,Ja=a}else b=Ja,Ja=a}else b=Ja,Ja=a}else b=Ja,Ja=a}else b=Ja,Ja=a}else b=Ja,Ja=a}else b=Ja,Ja=a}else b=Ja,Ja=a}else b=Ja,Ja=a}else b=Ja,Ja=a}else b=Ja,Ja=a}else b=Ja,Ja=a;Ja===a&&(Ja=b,Yb=ba(),Yb!==a?(Gc=oa(),Gc!==a?(Hc=za(),Hc!==a?(Ic=oa(),Ic!==a?(rb=n(),rb===a&&(rb=null),rb!==a?(Jc=oa(),Jc!==a?(Zb=e(),Zb!==a?(Kc=oa(),Kc!==a?(Lc=Da(),Lc!==a?Ja=Yb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==rb?"BOTH":rb},Zb]}}:(b=
Ja,Ja=a)):(b=Ja,Ja=a)):(b=Ja,Ja=a)):(b=Ja,Ja=a)):(b=Ja,Ja=a)):(b=Ja,Ja=a)):(b=Ja,Ja=a)):(b=Ja,Ja=a)):(b=Ja,Ja=a));Sa=Ja;if(Sa===a){var db=b;var Pb=b;if(g.substr(b,8).toLowerCase()===ue){var Mc=g.substr(b,8);b+=8}else Mc=a,0===pa&&I(ve);if(Mc!==a){var oc=b;pa++;var we=O();pa--;we===a?oc=void 0:(b=oc,oc=a);oc!==a?Pb=Mc="POSITION":(b=Pb,Pb=a)}else b=Pb,Pb=a;var id=Pb;if(id!==a){var xe=oa();if(xe!==a){var ye=za();if(ye!==a){var ze=oa();if(ze!==a){var jd=e();if(jd!==a){var Ae=oa();if(Ae!==a){var Be=gb();
if(Be!==a){var Ce=oa();if(Ce!==a){var kd=e();if(kd!==a){var De=oa();if(De!==a){var Ee=Da();Ee!==a?db=id={type:"function",name:"position",args:{type:"expr_list",value:[jd,kd]}}:(b=db,db=a)}else b=db,db=a}else b=db,db=a}else b=db,db=a}else b=db,db=a}else b=db,db=a}else b=db,db=a}else b=db,db=a}else b=db,db=a}else b=db,db=a}else b=db,db=a;Sa=db;if(Sa===a){var jb=b;var $b;var sb=b;sb=$b=E();if(sb===a)if(sb=b,96===g.charCodeAt(b)?($b=ld,b++):($b=a,0===pa&&I(md)),$b!==a){var pc=[];if(nd.test(g.charAt(b))){var xb=
g.charAt(b);b++}else xb=a,0===pa&&I(od);if(xb!==a)for(;xb!==a;)pc.push(xb),nd.test(g.charAt(b))?(xb=g.charAt(b),b++):(xb=a,0===pa&&I(od));else pc=a;pc!==a?(96===g.charCodeAt(b)?(xb=ld,b++):(xb=a,0===pa&&I(md)),xb!==a?sb=$b=pc.join(""):(b=sb,sb=a)):(b=sb,sb=a)}else b=sb,sb=a;var Nc=sb;if(Nc!==a){var Fe=oa();if(Fe!==a){var Ge=za();if(Ge!==a){var He=oa();if(He!==a){var ac=T();ac===a&&(ac=null);if(ac!==a){var Ie=oa();if(Ie!==a){var Je=Da();Je!==a?jb=Nc={type:"function",name:Nc,args:ac?ac:{type:"expr_list",
value:[]}}:(b=jb,jb=a)}else b=jb,jb=a}else b=jb,jb=a}else b=jb,jb=a}else b=jb,jb=a}else b=jb,jb=a}else b=jb,jb=a;Sa=jb;if(Sa===a){var ob;var Pa=b;var bc=ua();if(bc!==a){var Oc=oa();if(Oc!==a){var cc=e();if(cc!==a){var Pc=oa();if(Pc!==a){var Db=[];for(ob=xa();ob!==a;)Db.push(ob),ob=xa();if(Db!==a)if(ob=oa(),ob!==a){var qc=wa();qc!==a?Pa=bc={type:"case_expression",format:"simple",operand:cc,clauses:Db,else:null}:(b=Pa,Pa=a)}else b=Pa,Pa=a;else b=Pa,Pa=a}else b=Pa,Pa=a}else b=Pa,Pa=a}else b=Pa,Pa=a}else b=
Pa,Pa=a;if(Pa===a)if(Pa=b,bc=ua(),bc!==a)if(Oc=oa(),Oc!==a)if(cc=e(),cc!==a)if(Pc=oa(),Pc!==a){Db=[];for(ob=xa();ob!==a;)Db.push(ob),ob=xa();if(Db!==a)if(ob=oa(),ob!==a)if(qc=Ba(),qc!==a){var Ke=oa();if(Ke!==a){var Le=wa();Le!==a?Pa=bc={type:"case_expression",format:"simple",operand:cc,clauses:Db,else:qc.value}:(b=Pa,Pa=a)}else b=Pa,Pa=a}else b=Pa,Pa=a;else b=Pa,Pa=a;else b=Pa,Pa=a}else b=Pa,Pa=a;else b=Pa,Pa=a;else b=Pa,Pa=a;else b=Pa,Pa=a;var Qc=Pa;if(Qc===a){var pb;var Wa=b;var dc=ua();if(dc!==
a){var Rc=oa();if(Rc!==a){var Eb=[];for(pb=ya();pb!==a;)Eb.push(pb),pb=ya();if(Eb!==a)if(pb=oa(),pb!==a){var rc=wa();rc!==a?Wa=dc={type:"case_expression",format:"searched",clauses:Eb,else:null}:(b=Wa,Wa=a)}else b=Wa,Wa=a;else b=Wa,Wa=a}else b=Wa,Wa=a}else b=Wa,Wa=a;if(Wa===a)if(Wa=b,dc=ua(),dc!==a)if(Rc=oa(),Rc!==a){Eb=[];for(pb=ya();pb!==a;)Eb.push(pb),pb=ya();if(Eb!==a)if(pb=oa(),pb!==a)if(rc=Ba(),rc!==a){var Me=oa();if(Me!==a){var Ne=wa();Ne!==a?Wa=dc={type:"case_expression",format:"searched",
clauses:Eb,else:rc.value}:(b=Wa,Wa=a)}else b=Wa,Wa=a}else b=Wa,Wa=a;else b=Wa,Wa=a;else b=Wa,Wa=a}else b=Wa,Wa=a;else b=Wa,Wa=a;Qc=Wa}Sa=Qc;if(Sa===a){var sc;var Qb=b;var pd=G();if(pd!==a){var Sc=[];for(sc=L();sc!==a;)Sc.push(sc),sc=L();Sc!==a?Qb=pd+=Sc.join(""):(b=Qb,Qb=a)}else b=Qb,Qb=a;var tc=Qb;if(tc!==a){var Tc=tc;tc=/^CURRENT_DATE$/i.test(Tc)?{type:"current_time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Tc)?{type:"current_time",mode:"timestamp"}:{type:"column_ref",table:"",column:Tc}}Sa=tc;
if(Sa===a&&(Sa=m(),Sa===a)){Sa=b;var qd=za();if(qd!==a){var Oe=oa();if(Oe!==a){var Uc=e();if(Uc!==a){var Pe=oa();if(Pe!==a){var Qe=Da();Qe!==a?(Uc.paren=!0,Sa=qd=Uc):(b=Sa,Sa=a)}else b=Sa,Sa=a}else b=Sa,Sa=a}else b=Sa,Sa=a}else b=Sa,Sa=a}}}}}}}}return Sa}function E(){var h;var C=b;var A=G();if(A!==a){var Z=[];for(h=O();h!==a;)Z.push(h),h=O();Z!==a?C=A+=Z.join(""):(b=C,C=a)}else b=C,C=a;return C}function G(){if(nb.test(g.charAt(b))){var h=g.charAt(b);b++}else h=a,0===pa&&I(Re);return h}function O(){if(Se.test(g.charAt(b))){var h=
g.charAt(b);b++}else h=a,0===pa&&I(Te);return h}function L(){if(Ue.test(g.charAt(b))){var h=g.charAt(b);b++}else h=a,0===pa&&I(Ve);return h}function m(){var h=b;if(64===g.charCodeAt(b)){var C=We;b++}else C=a,0===pa&&I(Xe);if(C!==a){var A=E();A!==a?h=C=[C,A]:(b=h,h=a)}else b=h,h=a;h!==a&&(h={type:"param",value:h[1]});return h}function n(){var h=b;if(g.substr(b,7).toLowerCase()===Ye){var C=g.substr(b,7);b+=7}else C=a,0===pa&&I(Ze);if(C!==a){C=b;pa++;var A=O();pa--;A===a?C=void 0:(b=C,C=a);C!==a?h="LEADING":
(b=h,h=a)}else b=h,h=a;h===a&&(h=b,g.substr(b,8).toLowerCase()===$e?(C=g.substr(b,8),b+=8):(C=a,0===pa&&I(af)),C!==a?(C=b,pa++,A=O(),pa--,A===a?C=void 0:(b=C,C=a),C!==a?h="TRAILING":(b=h,h=a)):(b=h,h=a),h===a&&(h=b,g.substr(b,4).toLowerCase()===bf?(C=g.substr(b,4),b+=4):(C=a,0===pa&&I(cf)),C!==a?(C=b,pa++,A=O(),pa--,A===a?C=void 0:(b=C,C=a),C!==a?h="BOTH":(b=h,h=a)):(b=h,h=a)));return h}function D(){var h=b;var C=b;var A=N();if(A!==a){var Z=oa();if(Z!==a)if(Z=za(),Z!==a)if(Z=oa(),Z!==a)if(Z=ia(),
Z!==a){var qa=oa();qa!==a?(qa=Da(),qa!==a?C=A={type:"interval-period",period:A.value,precision:Z,secondary:null}:(b=C,C=a)):(b=C,C=a)}else b=C,C=a;else b=C,C=a;else b=C,C=a;else b=C,C=a}else b=C,C=a;C===a&&(C=b,A=N(),A!==a&&(A=rd(A)),C=A);if(C!==a)if(A=oa(),A!==a)if(A=b,g.substr(b,2).toLowerCase()===df?(Z=g.substr(b,2),b+=2):(Z=a,0===pa&&I(ef)),Z!==a?(Z=b,pa++,qa=O(),pa--,qa===a?Z=void 0:(b=Z,Z=a),Z!==a?A="TO":(b=A,A=a)):(b=A,A=a),A!==a)if(A=oa(),A!==a){A=b;Z=N();Z!==a&&(Z={type:"interval-period",
period:Z.value,precision:null,secondary:null});A=Z;if(A===a){A=b;Z=sa();if(Z!==a)if(Z=oa(),Z!==a)if(Z=za(),Z!==a)if(Z=oa(),Z!==a)if(Z=ia(),Z!==a)if(qa=oa(),qa!==a)if(qa=Ea(),qa!==a)if(qa=oa(),qa!==a)if(qa=da(),qa!==a){var Aa=oa();Aa!==a?(Aa=Da(),Aa!==a?A=Z=sd(Z,qa):(b=A,A=a)):(b=A,A=a)}else b=A,A=a;else b=A,A=a;else b=A,A=a;else b=A,A=a;else b=A,A=a;else b=A,A=a;else b=A,A=a;else b=A,A=a;else b=A,A=a;A===a&&(A=b,Z=sa(),Z!==a?(Z=oa(),Z!==a?(Z=za(),Z!==a?(Z=oa(),Z!==a?(Z=ia(),Z!==a?(qa=oa(),qa!==a?
(qa=Da(),qa!==a?A=Z={type:"interval-period",period:"second",precision:Z,secondary:null}:(b=A,A=a)):(b=A,A=a)):(b=A,A=a)):(b=A,A=a)):(b=A,A=a)):(b=A,A=a)):(b=A,A=a),A===a&&(A=b,Z=sa(),Z!==a&&(Z={type:"interval-period",period:"second",precision:null,secondary:null}),A=Z))}A!==a?h=C={type:"interval-qualifier",start:C,end:A}:(b=h,h=a)}else b=h,h=a;else b=h,h=a;else b=h,h=a;else b=h,h=a;h===a&&(h=b,A=N(),A!==a?(C=oa(),C!==a?(C=za(),C!==a?(C=oa(),C!==a?(C=da(),C!==a?(Z=oa(),Z!==a?(Z=Da(),Z!==a?h=A={type:"interval-period",
period:A.value,precision:C,secondary:null}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a),h===a&&(h=b,A=N(),A!==a&&(A=rd(A)),h=A,h===a&&(h=b,A=sa(),A!==a?(C=oa(),C!==a?(C=za(),C!==a?(C=oa(),C!==a?(C=ia(),C!==a?(Z=oa(),Z!==a?(Z=Ea(),Z!==a?(A=oa(),A!==a?(A=da(),A!==a?(Z=oa(),Z!==a?(Z=Da(),Z!==a?h=A=sd(C,A):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a),h===a&&(h=b,A=sa(),A!==a?(C=oa(),C!==a?(C=za(),
C!==a?(C=oa(),C!==a?(C=da(),C!==a?(Z=oa(),Z!==a?(Z=Da(),Z!==a?h=A={type:"interval-period",period:"second",precision:C,secondary:null}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a),h===a&&(h=b,A=sa(),A!==a&&(A={type:"interval-period",period:"second",precision:null,secondary:null}),h=A)))));return h}function N(){var h=b;h=V();h!==a&&(h={type:"string",value:"day"});h===a&&(h=b,h=ma(),h!==a&&(h={type:"string",value:"hour"}),h===a&&(h=b,h=na(),h!==a&&(h={type:"string",value:"minute"}),
h===a&&(h=b,h=H(),h!==a&&(h={type:"string",value:"month"}),h===a&&(h=b,h=z(),h!==a&&(h={type:"string",value:"year"})))));return h}function da(){var h=Ca();h!==a&&(h=parseFloat(h));return h}function ia(){var h=Ca();h!==a&&(h=parseFloat(h));return h}function la(){var h=ra();h===a&&(h=m());return h}function ra(){var h=b;if(39===g.charCodeAt(b)){var C=td;b++}else C=a,0===pa&&I(ud);C===a&&(g.substr(b,2)===vd?(C=vd,b+=2):(C=a,0===pa&&I(ff)));if(C!==a){C=[];var A=b;g.substr(b,2)===uc?(A=uc,b+=2):(A=a,0===
pa&&I(wd));A!==a&&(A="'");A===a&&(xd.test(g.charAt(b))?(A=g.charAt(b),b++):(A=a,0===pa&&I(yd)));for(;A!==a;)C.push(A),A=b,g.substr(b,2)===uc?(A=uc,b+=2):(A=a,0===pa&&I(wd)),A!==a&&(A="'"),A===a&&(xd.test(g.charAt(b))?(A=g.charAt(b),b++):(A=a,0===pa&&I(yd)));C!==a?(39===g.charCodeAt(b)?(A=td,b++):(A=a,0===pa&&I(ud)),A!==a?h=C={type:"string",value:C.join("")}:(b=h,h=a)):(b=h,h=a)}else b=h,h=a;return h}function ya(){var h=b;var C=Ia();if(C!==a)if(C=oa(),C!==a)if(C=e(),C!==a){var A=oa();A!==a?(A=Fa(),
A!==a?(A=oa(),A!==a?(A=e(),A!==a?h=C={type:"when_clause",operand:C,value:A}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)}else b=h,h=a;else b=h,h=a;else b=h,h=a;return h}function xa(){var h=b;var C=Ia();if(C!==a)if(C=oa(),C!==a)if(C=e(),C!==a){var A=oa();A!==a?(A=Fa(),A!==a?(A=oa(),A!==a?(A=e(),A!==a?h=C={type:"when_clause",operand:C,value:A}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)}else b=h,h=a;else b=h,h=a;else b=h,h=a;return h}function Ba(){var h=b;var C=b;if(g.substr(b,4).toLowerCase()===gf){var A=
g.substr(b,4);b+=4}else A=a,0===pa&&I(hf);if(A!==a){A=b;pa++;var Z=O();pa--;Z===a?A=void 0:(b=A,A=a);A!==a?C="ELSE":(b=C,C=a)}else b=C,C=a;C!==a?(C=oa(),C!==a?(C=e(),C!==a?h={type:"else_clause",value:C}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a);return h}function Na(){var h=Ca();if(h===a){h=b;if(45===g.charCodeAt(b)){var C=Ha;b++}else C=a,0===pa&&I(La);C===a&&(43===g.charCodeAt(b)?(C=ta,b++):(C=a,0===pa&&I(va)));if(C!==a){var A=Ca();A!==a?h=C=C[0]+A:(b=h,h=a)}else b=h,h=a}return h}function Ta(){var h=b;if(46===
g.charCodeAt(b)){var C=jf;b++}else C=a,0===pa&&I(kf);C!==a?(C=Ca(),C===a&&(C=null),C!==a?h="."+(null!=C?C:""):(b=h,h=a)):(b=h,h=a);return h}function Ka(){var h;var C=h=b;if(lf.test(g.charAt(b))){var A=g.charAt(b);b++}else A=a,0===pa&&I(mf);A!==a?(nf.test(g.charAt(b))?(A=g.charAt(b),b++):(A=a,0===pa&&I(of)),A===a&&(A=null),A!==a?C="e"+(null===A?"":A):(b=C,C=a)):(b=C,C=a);C!==a?(A=Ca(),A!==a?h=C+A:(b=h,h=a)):(b=h,h=a);return h}function Ca(){var h=[];var C=Ra();if(C!==a)for(;C!==a;)h.push(C),C=Ra();
else h=a;h!==a&&(h=h.join(""));return h}function Ra(){if(pf.test(g.charAt(b))){var h=g.charAt(b);b++}else h=a,0===pa&&I(qf);return h}function gb(){var h=b;if(g.substr(b,2).toLowerCase()===rf){var C=g.substr(b,2);b+=2}else C=a,0===pa&&I(sf);if(C!==a){C=b;pa++;var A=O();pa--;A===a?C=void 0:(b=C,C=a);C!==a?h="IN":(b=h,h=a)}else b=h,h=a;return h}function c(){var h=b;if(g.substr(b,2).toLowerCase()===tf){var C=g.substr(b,2);b+=2}else C=a,0===pa&&I(uf);if(C!==a){C=b;pa++;var A=O();pa--;A===a?C=void 0:(b=
C,C=a);C!==a?h="IS":(b=h,h=a)}else b=h,h=a;return h}function k(){var h=b;if(g.substr(b,4).toLowerCase()===vf){var C=g.substr(b,4);b+=4}else C=a,0===pa&&I(wf);if(C!==a){C=b;pa++;var A=O();pa--;A===a?C=void 0:(b=C,C=a);C!==a?h="LIKE":(b=h,h=a)}else b=h,h=a;return h}function U(){var h=b;if(g.substr(b,3).toLowerCase()===xf){var C=g.substr(b,3);b+=3}else C=a,0===pa&&I(yf);if(C!==a){C=b;pa++;var A=O();pa--;A===a?C=void 0:(b=C,C=a);C!==a?h="NOT":(b=h,h=a)}else b=h,h=a;return h}function f(){var h=b;if(g.substr(b,
3).toLowerCase()===zf){var C=g.substr(b,3);b+=3}else C=a,0===pa&&I(Af);if(C!==a){C=b;pa++;var A=O();pa--;A===a?C=void 0:(b=C,C=a);C!==a?h="AND":(b=h,h=a)}else b=h,h=a;return h}function x(){var h=b;if(g.substr(b,2).toLowerCase()===Bf){var C=g.substr(b,2);b+=2}else C=a,0===pa&&I(Cf);if(C!==a){C=b;pa++;var A=O();pa--;A===a?C=void 0:(b=C,C=a);C!==a?h="OR":(b=h,h=a)}else b=h,h=a;return h}function M(){var h=b;if(g.substr(b,7).toLowerCase()===Df){var C=g.substr(b,7);b+=7}else C=a,0===pa&&I(Ef);if(C!==a){C=
b;pa++;var A=O();pa--;A===a?C=void 0:(b=C,C=a);C!==a?h="BETWEEN":(b=h,h=a)}else b=h,h=a;return h}function P(){var h=b;if(g.substr(b,4).toLowerCase()===Ff){var C=g.substr(b,4);b+=4}else C=a,0===pa&&I(Gf);if(C!==a){C=b;pa++;var A=O();pa--;A===a?C=void 0:(b=C,C=a);C!==a?h="FROM":(b=h,h=a)}else b=h,h=a;return h}function ba(){var h=b;if(g.substr(b,4).toLowerCase()===Hf){var C=g.substr(b,4);b+=4}else C=a,0===pa&&I(If);if(C!==a){C=b;pa++;var A=O();pa--;A===a?C=void 0:(b=C,C=a);C!==a?h="TRIM":(b=h,h=a)}else b=
h,h=a;return h}function X(){var h=b;if(g.substr(b,8).toLowerCase()===Jf){var C=g.substr(b,8);b+=8}else C=a,0===pa&&I(Kf);if(C!==a){C=b;pa++;var A=O();pa--;A===a?C=void 0:(b=C,C=a);C!==a?h="INTERVAL":(b=h,h=a)}else b=h,h=a;return h}function z(){var h=b;if(g.substr(b,4).toLowerCase()===Lf){var C=g.substr(b,4);b+=4}else C=a,0===pa&&I(Mf);if(C!==a){C=b;pa++;var A=O();pa--;A===a?C=void 0:(b=C,C=a);C!==a?h="YEAR":(b=h,h=a)}else b=h,h=a;return h}function H(){var h=b;if(g.substr(b,5).toLowerCase()===Nf){var C=
g.substr(b,5);b+=5}else C=a,0===pa&&I(Of);if(C!==a){C=b;pa++;var A=O();pa--;A===a?C=void 0:(b=C,C=a);C!==a?h="MONTH":(b=h,h=a)}else b=h,h=a;return h}function V(){var h=b;if(g.substr(b,3).toLowerCase()===Pf){var C=g.substr(b,3);b+=3}else C=a,0===pa&&I(Qf);if(C!==a){C=b;pa++;var A=O();pa--;A===a?C=void 0:(b=C,C=a);C!==a?h="DAY":(b=h,h=a)}else b=h,h=a;return h}function ma(){var h=b;if(g.substr(b,4).toLowerCase()===Rf){var C=g.substr(b,4);b+=4}else C=a,0===pa&&I(Sf);if(C!==a){C=b;pa++;var A=O();pa--;
A===a?C=void 0:(b=C,C=a);C!==a?h="HOUR":(b=h,h=a)}else b=h,h=a;return h}function na(){var h=b;if(g.substr(b,6).toLowerCase()===Tf){var C=g.substr(b,6);b+=6}else C=a,0===pa&&I(Uf);if(C!==a){C=b;pa++;var A=O();pa--;A===a?C=void 0:(b=C,C=a);C!==a?h="MINUTE":(b=h,h=a)}else b=h,h=a;return h}function sa(){var h=b;if(g.substr(b,6).toLowerCase()===Vf){var C=g.substr(b,6);b+=6}else C=a,0===pa&&I(Wf);if(C!==a){C=b;pa++;var A=O();pa--;A===a?C=void 0:(b=C,C=a);C!==a?h="SECOND":(b=h,h=a)}else b=h,h=a;return h}
function ua(){var h=b;if(g.substr(b,4).toLowerCase()===Xf){var C=g.substr(b,4);b+=4}else C=a,0===pa&&I(Yf);if(C!==a){C=b;pa++;var A=O();pa--;A===a?C=void 0:(b=C,C=a);C!==a?h="CASE":(b=h,h=a)}else b=h,h=a;return h}function wa(){var h=b;if(g.substr(b,3).toLowerCase()===Zf){var C=g.substr(b,3);b+=3}else C=a,0===pa&&I($f);if(C!==a){C=b;pa++;var A=O();pa--;A===a?C=void 0:(b=C,C=a);C!==a?h="END":(b=h,h=a)}else b=h,h=a;return h}function Ia(){var h=b;if(g.substr(b,4).toLowerCase()===ag){var C=g.substr(b,
4);b+=4}else C=a,0===pa&&I(bg);if(C!==a){C=b;pa++;var A=O();pa--;A===a?C=void 0:(b=C,C=a);C!==a?h="WHEN":(b=h,h=a)}else b=h,h=a;return h}function Fa(){var h=b;if(g.substr(b,4).toLowerCase()===cg){var C=g.substr(b,4);b+=4}else C=a,0===pa&&I(dg);if(C!==a){C=b;pa++;var A=O();pa--;A===a?C=void 0:(b=C,C=a);C!==a?h="THEN":(b=h,h=a)}else b=h,h=a;return h}function Ea(){if(44===g.charCodeAt(b)){var h=eg;b++}else h=a,0===pa&&I(fg);return h}function za(){if(40===g.charCodeAt(b)){var h=gg;b++}else h=a,0===pa&&
I(hg);return h}function Da(){if(41===g.charCodeAt(b)){var h=ig;b++}else h=a,0===pa&&I(jg);return h}function oa(){var h;var C=[];for(h=bb();h!==a;)C.push(h),h=bb();return C}function bb(){if(kg.test(g.charAt(b))){var h=g.charAt(b);b++}else h=a,0===pa&&I(lg);return h}function eb(h,C,A,Z){h={type:"binary_expr",operator:h,left:C,right:A};void 0!==Z&&(h.escape=Z);return h}function ab(h,C){for(var A=0;A<C.length;A++)h=eb(C[A][1],h,C[A][3]);return h}J=void 0!==J?J:{};var a={},hb={start:F},fb=F,Qa="!",vb=
l("!",!1),zb="\x3d",Fb=l("\x3d",!1),ec="\x3e\x3d",mb=l("\x3e\x3d",!1),yb="\x3e",Ua=l("\x3e",!1),kb="\x3c\x3d",tb=l("\x3c\x3d",!1),Oa="\x3c\x3e",Gb=l("\x3c\x3e",!1),S="\x3c",ca=l("\x3c",!1),R="!\x3d",ka=l("!\x3d",!1),ta="+",va=l("+",!1),Ha="-",La=l("-",!1),Za="*",Ya=l("*",!1),Xa="/",ib=l("/",!1),nb=/^[A-Za-z_\x80-\uFFFF]/,Re=y([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Se=/^[A-Za-z0-9_]/,Te=y([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Ue=/^[A-Za-z0-9_.\x80-\uFFFF]/,Ve=y([["A","Z"],["a","z"],
["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),We="@",Xe=l("@",!1),rd=function(h){return{type:"interval-period",period:h.value,precision:null,secondary:null}},sd=function(h,C){return{type:"interval-period",period:"second",precision:h,secondary:C}},td="'",ud=l("'",!1),vd="N'",ff=l("N'",!1),uc="''",wd=l("''",!1),xd=/^[^']/,yd=y(["'"],!0,!1),jf=".",kf=l(".",!1),pf=/^[0-9]/,qf=y([["0","9"]],!1,!1),lf=/^[eE]/,mf=y(["e","E"],!1,!1),nf=/^[+\-]/,of=y(["+","-"],!1,!1),Id="null",Jd=l("NULL",!0),Cd="true",Dd=
l("TRUE",!0),Fd="false",Gd=l("FALSE",!0),rf="in",sf=l("IN",!0),tf="is",uf=l("IS",!0),vf="like",wf=l("LIKE",!0),zd="escape",Ad=l("ESCAPE",!0),xf="not",yf=l("NOT",!0),zf="and",Af=l("AND",!0),Bf="or",Cf=l("OR",!0),Df="between",Ef=l("BETWEEN",!0),Ff="from",Gf=l("FROM",!0),oe="for",pe=l("FOR",!0),ee="substring",fe=l("SUBSTRING",!0),Ud="extract",Vd=l("EXTRACT",!0),Hf="trim",If=l("TRIM",!0),ue="position",ve=l("POSITION",!0),Pd="timestamp",Qd=l("TIMESTAMP",!0),Ld="date",Md=l("DATE",!0),Ye="leading",Ze=l("LEADING",
!0),$e="trailing",af=l("TRAILING",!0),bf="both",cf=l("BOTH",!0),df="to",ef=l("TO",!0),Jf="interval",Kf=l("INTERVAL",!0),Lf="year",Mf=l("YEAR",!0),Nf="month",Of=l("MONTH",!0),Pf="day",Qf=l("DAY",!0),Rf="hour",Sf=l("HOUR",!0),Tf="minute",Uf=l("MINUTE",!0),Vf="second",Wf=l("SECOND",!0),Xf="case",Yf=l("CASE",!0),Zf="end",$f=l("END",!0),ag="when",bg=l("WHEN",!0),cg="then",dg=l("THEN",!0),gf="else",hf=l("ELSE",!0),eg=",",fg=l(",",!1),gg="(",hg=l("(",!1),ig=")",jg=l(")",!1),kg=/^[ \t\n\r]/,lg=y([" ","\t",
"\n","\r"],!1,!1),ld="`",md=l("`",!1),nd=/^[^`]/,od=y(["`"],!0,!1),b=0,fc=[{line:1,column:1}],ub=0,vc=[],pa=0;if("startRule"in J){if(!(J.startRule in hb))throw Error("Can't start parsing from rule \""+J.startRule+'".');fb=hb[J.startRule]}var Vc=fb();if(Vc!==a&&b===g.length)return Vc;Vc!==a&&b<g.length&&I({type:"end"});throw function(h,C,A){return new w(w.buildMessage(h,C),h,C,A)}(vc,ub<g.length?g.charAt(ub):null,ub<g.length?aa(ub,ub+1):aa(ub,ub));}}})})(ha);let fa=function(){function r(){}r.parse=
function(w){return ha.exports.parse(w)};return r}();t.WhereGrammar=fa;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(t){t.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};t.commonjsRequire=function(d){throw Error('Could not dynamically require "'+d+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');
};t.getDefaultExportFromCjs=function(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d["default"]:d}})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(t){t.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,
supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./AttributesBuilder ./attributeSupport ./projectionSupport ./timeSupport ./utils ../../support/fieldUtils ../../../smartMapping/statistics/support/utils ../../../support/arcadeOnDemand".split(" "),
function(t,d,ha,fa,r,w,g,J,l,y,ea,aa,I){function F(v){return v.substr(24,12)+v.substr(19,4)+v.substr(16,2)+v.substr(14,2)+v.substr(11,2)+v.substr(9,2)+v.substr(6,2)+v.substr(4,2)+v.substr(2,2)+v.substr(0,2)}function T(v,K,p,q){if(p&&"esriFieldTypeDate"===p.type){const B=(new Date(v)).getTime(),Q=(new Date(K)).getTime();if(!isNaN(B)&&!isNaN(Q))return q?Q-B:B-Q}return"number"===typeof v&&"number"===typeof K?q?K-v:v-K:"string"===typeof v&&"string"===typeof K?(v=v.toUpperCase(),K=K.toUpperCase(),!p||
"esriFieldTypeGUID"!==p.type&&"esriFieldTypeGlobalID"!==p.type?q=(q?v>K:v<K)?-1:(q?v<K:v>K)?1:0:(p=F(v),K=F(K),q=(q?p>K:p<K)?-1:(q?p<K:p>K)?1:0),q):q?1:-1}function e(v,K,p,q,B,Q){B-=p;Q-=q;v=Math.min(1,Math.max(0,((v-p)*B+(K-q)*Q)/(B*B+Q*Q)));return{x:p+B*v,y:q+Q*v}}function u(v,K){return v?K?4:3:K?3:2}return function(){function v(p,q,B){this.items=p;this.queryGeometry=q;this.definitionExpression=B.definitionExpression;this.geometryType=B.geometryType;this.hasM=B.hasM;this.hasZ=B.hasZ;this.objectIdField=
B.objectIdField;this.spatialReference=B.spatialReference;this.fieldsIndex=B.fieldsIndex;this.timeInfo=B.timeInfo;this.featureAdapter=B.featureAdapter;this.aggregateAdapter=B.aggregateAdapter}var K=v.prototype;K.createQueryResponseForCount=function(p){const q=new w(p,this.featureAdapter,this.fieldsIndex);if(!p.outStatistics)return q.countDistinctValues(this.items);const {groupByFieldsForStatistics:B,having:Q}=p;if(null==B||!B.length)return 1;const Y=new Map,W=new Map,ja=new Set;p=p.outStatistics;for(const G of p){({statisticType:p}=
G);p="exceedslimit"!==p?G.onStatisticField:void 0;if(!W.has(p)){var E=[];for(const O of B){const L=this._getAttributeValues(q,O,Y);E.push(L)}W.set(p,this._calculateUniqueValues(E,q.returnDistinctValues))}p=W.get(p);for(const O in p){const {data:L,items:m}=p[O];E=L.join(",");Q&&!q.validateItems(m,Q)||ja.add(E)}}return ja.size};K.createQueryResponse=function(p){let q;q=p.outStatistics?p.outStatistics.some(B=>"exceedslimit"===B.statisticType)?this._createExceedsLimitQueryResponse(p):this._createStatisticsQueryResponse(p):
this._createFeatureQueryResponse(p);p.returnQueryGeometry&&(fa.isValid(p.outSR)&&!fa.equals(this.queryGeometry.spatialReference,p.outSR)?q.queryGeometry=y.cleanFromGeometryEngine({spatialReference:p.outSR,...J.project(this.queryGeometry,this.queryGeometry.spatialReference,p.outSR)}):q.queryGeometry=y.cleanFromGeometryEngine({spatialReference:p.outSR,...this.queryGeometry}));return q};K.createSnappingResponse=function(p,q){const B=this.featureAdapter,Q=u(this.hasZ,this.hasM),{x:Y,y:W}=p.point,ja="number"===
typeof p.distance?p.distance:p.distance.x,E="number"===typeof p.distance?p.distance:p.distance.y,G={candidates:[]},O="esriGeometryPolygon"===this.geometryType;q=this.getPointCreator(p.point,this.spatialReference,q);for(const la of this.items){var L=B.getGeometry(la);if(d.isNone(L))continue;const {coords:ra,lengths:ya}=L;if(p.types&1){L=0;for(var m=0;m<ya.length;m++){var n=ya[m];for(var D=0;D<n;D++,L+=Q){var N=ra[L],da=ra[L+1];if(D!==n-1){const xa=ra[L+Q],Ba=ra[L+Q+1],{x:Na,y:Ta}=e(Y,W,N,da,xa,Ba);
var ia=(Y-Na)/ja;const Ka=(W-Ta)/E;ia=ia*ia+Ka*Ka;1>=ia&&G.candidates.push({type:"edge",objectId:B.getObjectId(la),distance:Math.sqrt(ia),target:q(Na,Ta),start:q(N,da),end:q(xa,Ba)})}}}}if(p.types&2)for(L=O?ra.length-Q:ra.length,m=0;m<L;m+=Q)n=ra[m],D=ra[m+1],N=(Y-n)/ja,da=(W-D)/E,N=N*N+da*da,1>=N&&G.candidates.push({type:"vertex",objectId:B.getObjectId(la),distance:Math.sqrt(N),target:q(n,D)})}G.candidates.sort((la,ra)=>la.distance-ra.distance);return G};K.getPointCreator=function(p,q,B){const Q=
d.isSome(B)&&!fa.equals(q,B)?Y=>J.project(Y,q,B):Y=>Y;return null!=p.z&&null!=p.m?(Y,W)=>Q({x:Y,y:W,z:p.z,m:p.m}):null!=p.z?(Y,W)=>Q({x:Y,y:W,z:p.z}):null!=p.m?(Y,W)=>Q({x:Y,y:W,m:p.m}):(Y,W)=>Q({x:Y,y:W})};K.executeAttributesQuery=function(p){var q=g.getWhereClause(p.where,this.fieldsIndex);if(!q)return Promise.resolve(this);if(q.isStandardized){let B=0;const Q=[];for(const Y of this.items)q.testFeature(Y,this.featureAdapter)&&(Q[B++]=Y);q=new v(Q,this.queryGeometry,this);q.definitionExpression=
p.where;return Promise.resolve(q)}return Promise.reject(new TypeError("Where clause is not standardized"))};K.executeAggregateIdsQuery=function(p){if(!p.aggregateIds||!p.aggregateIds.length||d.isNone(this.aggregateAdapter))return Promise.resolve(this);const q=new Set;for(const Q of p.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(Q).forEach(Y=>q.add(Y));const B=this.featureAdapter.getObjectId;return Promise.resolve(new v(this.items.filter(Q=>q.has(B(Q))),this.queryGeometry,this))};K.executeObjectIdsQuery=
function(p){if(!p.objectIds||!p.objectIds.length)return Promise.resolve(this);const q=new Set(p.objectIds),B=this.featureAdapter.getObjectId;return Promise.resolve(new v(this.items.filter(Q=>q.has(B(Q))),this.queryGeometry,this))};K.executeTimeQuery=function(p){p=l.getTimeOperator(this.timeInfo,p.timeExtent,this.featureAdapter);if(!d.isSome(p))return Promise.resolve(this);p=this.items.filter(p);return Promise.resolve(new v(p,this.queryGeometry,this))};K.filterLatest=function(){const {trackIdField:p,
startTimeField:q,endTimeField:B}=this.timeInfo;var Q=B||q;const Y=new Map,W=this.featureAdapter.getAttribute;for(const ja of this.items){const E=W(ja,p),G=W(ja,Q),O=Y.get(E);(!O||G>W(O,Q))&&Y.set(E,ja)}Q=Array.from(Y.values());return Promise.resolve(new v(Q,this.queryGeometry,this))};K.project=function(){var p=t._asyncToGenerator(function*(q){if(!q||fa.equals(this.spatialReference,q))return this;const B=this.featureAdapter,Q=(yield J.projectMany(this.items.map(Y=>y.getGeometry(this.geometryType,this.hasZ,
this.hasM,B.getGeometry(Y))),this.spatialReference,q)).map((Y,W)=>B.cloneWithGeometry(this.items[W],r.convertFromGeometry(Y,this.hasZ,this.hasM)));return new v(Q,this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:q,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})});return function(q){return p.apply(this,arguments)}}();K.createSummaryStatisticsResponse=
function(){var p=t._asyncToGenerator(function*(q,B){const {field:Q,normalizationField:Y,normalizationType:W,normalizationTotal:ja,minValue:E,maxValue:G}=B;var O=new w(q,this.featureAdapter,this.fieldsIndex);q=this.fieldsIndex.isDateField(Q);B=B.valueExpression?yield this._getAttributeExpressionValues(O,B.valueExpression,B.viewInfoParams):this._getAttributeNormalizedValues(O,{field:Q,normalizationField:Y,normalizationType:W,normalizationTotal:ja});O=aa.isNullCountSupported({normalizationType:W,normalizationField:Y,
minValue:E,maxValue:G});B=ea.isStringField(this.fieldsIndex.get(Q))?aa.calculateStringStatistics({values:B,supportsNullCount:O}):aa.calculateStatistics({values:B,minValue:E,maxValue:G,useSampleStdDev:!W,supportsNullCount:O});return aa.processStatsResult(B,q)});return function(q,B){return p.apply(this,arguments)}}();K._sortFeatures=function(p,q,B){if(1<p.length&&q&&q.length)for(const Q of q.reverse()){q=Q.split(" ");const Y=q[0],W=this.fieldsIndex.get(Y),ja=q[1]&&"desc"===q[1].toLowerCase();p.sort((E,
G)=>{E=B(E,Y,W);G=B(G,Y,W);return T(E,G,W,ja)})}};K._createFeatureQueryResponse=function(p){const q=this.items,{geometryType:B,hasM:Q,hasZ:Y,objectIdField:W,spatialReference:ja}=this,{outFields:E,outSR:G,quantizationParameters:O,resultRecordCount:L,resultOffset:m,returnZ:n,returnM:D}=p,N=null!=L?q.length>(m||0)+L:!1,da=E&&(-1<E.indexOf("*")?[...this.fieldsIndex.fields]:E.map(ia=>this.fieldsIndex.get(ia)));return{exceededTransferLimit:N,features:this._createFeatures(p,q),fields:da,geometryType:B,hasM:Q&&
D,hasZ:Y&&n,objectIdFieldName:W,spatialReference:y.cleanFromGeometryEngine(G?G:ja),transform:O&&ha.toQuantizationTransform(O)||null}};K._createFeatures=function(p,q){const B=new w(p,this.featureAdapter,this.fieldsIndex),{hasM:Q,hasZ:Y}=this,{orderByFields:W,quantizationParameters:ja,returnGeometry:E,returnCentroid:G,maxAllowableOffset:O,resultOffset:L,resultRecordCount:m,returnZ:n=!1,returnM:D=!1}=p,N=Y&&n,da=Q&&D;p=[];var ia=0;q=[...q];this._sortFeatures(q,W,(ya,xa,Ba)=>B.getFieldValue(ya,xa,Ba));
if(E||G){var la=ha.toQuantizationTransform(ja);if(E&&!G)for(var ra of q)p[ia++]={attributes:B.getAttributes(ra),geometry:y.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(ra),O,la,N,da)};else if(!E&&G)for(const ya of q)p[ia++]={attributes:B.getAttributes(ya),centroid:y.transformCentroid(this,this.featureAdapter.getCentroid(ya,this),la)};else for(const ya of q)p[ia++]={attributes:B.getAttributes(ya),centroid:y.transformCentroid(this,this.featureAdapter.getCentroid(ya,
this),la),geometry:y.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(ya),O,la,N,da)}}else for(la of q)(ra=B.getAttributes(la))&&(p[ia++]={attributes:ra});ia=L||0;null!=m&&(p=p.slice(ia,Math.min(p.length,ia+m)));return p};K._createExceedsLimitQueryResponse=function(p){var q=!1;let B=Number.POSITIVE_INFINITY,Q=Number.POSITIVE_INFINITY;q=Number.POSITIVE_INFINITY;for(const Y of p.outStatistics)if("exceedslimit"===Y.statisticType){B=null!=Y.maxPointCount?Y.maxPointCount:
Number.POSITIVE_INFINITY;Q=null!=Y.maxRecordCount?Y.maxRecordCount:Number.POSITIVE_INFINITY;q=null!=Y.maxVertexCount?Y.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)q=this.items.length>B;else if(this.items.length>Q)q=!0;else{p=this.hasZ?this.hasM?4:3:this.hasM?3:2;const Y=this.featureAdapter;q=this.items.reduce((W,ja)=>{ja=Y.getGeometry(ja);return W+(d.isSome(ja)&&ja.coords.length||0)},0)/p>q}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",
alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(q)}}]}};K._createStatisticsQueryResponse=function(p){var q={attributes:{}};const B=[],Q=new Map,Y=new Map,W=new Map,ja=new Map,E=new w(p,this.featureAdapter,this.fieldsIndex);var G=p.outStatistics;const {groupByFieldsForStatistics:O,having:L,orderByFields:m}=p;p=O&&O.length;const n=!!p,D=n&&O[0],N=n&&!this.fieldsIndex.get(D);for(const ya of G){const {outStatisticFieldName:xa,statisticType:Ba}=
ya;G=ya;var da="exceedslimit"!==Ba?ya.onStatisticField:void 0;const Na="percentile_disc"===Ba||"percentile_cont"===Ba,Ta=n&&1===p&&(da===D||N)&&"count"===Ba;if(n){if(!W.has(da)){var ia=[];for(const Ka of O){var la=this._getAttributeValues(E,Ka,Q);ia.push(la)}W.set(da,this._calculateUniqueValues(ia,E.returnDistinctValues))}ia=W.get(da);for(const Ka in ia){const {count:Ca,data:Ra,items:gb,itemPositions:c}=ia[Ka];la=Ra.join(",");if(!L||E.validateItems(gb,L)){const k=ja.get(la)||{attributes:{}};var ra=
null;if(Ta)ra=Ca;else{const U=this._getAttributeValues(E,da,Q);ra=c.map(f=>U[f]);ra=Na&&"statisticParameters"in G?this._getPercentileValue(G,ra):this._getStatisticValue(G,ra,null,E.returnDistinctValues)}k.attributes[xa]=ra;O.forEach((U,f)=>k.attributes[this.fieldsIndex.get(U)?U:`EXPR_${f+1}`]=Ra[f]);ja.set(la,k)}}}else da=this._getAttributeValues(E,da,Q),q.attributes[xa]=Na&&"statisticParameters"in G?this._getPercentileValue(G,da):this._getStatisticValue(G,da,Y,E.returnDistinctValues);B.push({name:xa,
alias:xa,type:"esriFieldTypeDouble"})}q=n?Array.from(ja.values()):[q];this._sortFeatures(q,m,(ya,xa)=>ya.attributes[xa]);return{fields:B,features:q}};K._getStatisticValue=function(p,q,B,Q){const {onStatisticField:Y,statisticType:W}=p;p=null;p=null!=B&&B.has(Y)?B.get(Y):ea.isStringField(this.fieldsIndex.get(Y))?aa.calculateStringStatistics({values:q,returnDistinct:Q}):aa.calculateStatistics({values:q,minValue:null,maxValue:null,useSampleStdDev:!0});B&&B.set(Y,p);return p["var"===W?"variance":W]};K._getPercentileValue=
function(p,q){const {onStatisticField:B,statisticParameters:Q,statisticType:Y}=p,{value:W,orderBy:ja}=Q,E="desc"===ja,G=this.fieldsIndex.get(B);p=[...q].filter(O=>null!=O).sort((O,L)=>T(O,L,G,E));return this._calculatePercentile(p,W,"percentile_disc"===Y)};K._getAttributeValues=function(p,q,B){if(B.has(q))return B.get(q);const Q=this.fieldsIndex.get(q),Y=this.items.map(W=>p.getFieldValue(W,q,Q));B.set(q,Y);return Y};K._getAttributeNormalizedValues=function(p,q){return this.items.map(B=>p.getNormalizedValue(B,
{field:q.field,fieldInfo:this.fieldsIndex.get(q.field),normalizationField:q.normalizationField,normalizationFieldInfo:this.fieldsIndex.get(q.normalizationField),normalizationType:q.normalizationType,normalizationTotal:q.normalizationTotal}))};K._getAttributeExpressionValues=function(){var p=t._asyncToGenerator(function*(q,B,Q){const {arcadeUtils:Y}=yield I.loadArcade(),W=Y.createFunction(B),ja=Q&&Y.getViewInfo(Q);return this.items.map(E=>q.getExpressionValue(E,{compiledFunc:W,viewInfo:ja},Y))});return function(q,
B,Q){return p.apply(this,arguments)}}();K._calculateUniqueValues=function(p,q){const B={},Q=this.items,Y=Q.length;for(let W=0;W<Y;W++){const ja=Q[W],E=[];for(const O of p)E.push(O[W]);const G=E.join(",");q?null==B[G]&&(B[G]={count:1,data:E,items:[ja],itemPositions:[W]}):null==B[G]?B[G]={count:1,data:E,items:[ja],itemPositions:[W]}:(B[G].count++,B[G].items.push(ja),B[G].itemPositions.push(W))}return B};K._calculatePercentile=function(p,q,B){if(0===p.length)return null;if(0>=q)return p[0];if(1<=q)return p[p.length-
1];var Q=(p.length-1)*q,Y=Math.floor(Q);q=Y+1;Q%=1;Y=p[Y];const W=p[q];return q>=p.length||B||"string"===typeof Y||"string"===typeof W?Y:Y*(1-Q)+W*Q};t._createClass(v,[{key:"size",get:function(){return this.items.length}}]);return v}()})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe","./jsonUtils"],function(t,d,ha){function fa({scale:E,translate:G},O){return Math.round((O-G[0])/E[0])}function r({scale:E,translate:G},O){return Math.round((G[1]-O)/E[1])}function w(E,
G,O){const L=[];let m,n,D,N;for(let da=0;da<O.length;da++){const ia=O[da];if(0<da){if(D=fa(E,ia[0]),N=r(E,ia[1]),D!==m||N!==n)L.push(G(ia,D-m,N-n)),m=D,n=N}else m=fa(E,ia[0]),n=r(E,ia[1]),L.push(G(ia,m,n))}return 0<L.length?L:null}function g(E,G,O,L){return w(E,O?L?ja:W:L?W:Y,G)}function J(E,G,O,L){const m=[];O=O?L?ja:W:L?W:Y;for(L=0;L<G.length;L++){const n=w(E,O,G[L]);n&&3<=n.length&&m.push(n)}return m.length?m:null}function l(E,G,O,L){const m=[];O=O?L?ja:W:L?W:Y;for(L=0;L<G.length;L++){const n=
w(E,O,G[L]);n&&2<=n.length&&m.push(n)}return m.length?m:null}function y({scale:E,translate:G},O){return O*E[0]+G[0]}function ea({scale:E,translate:G},O){return G[1]-O*E[1]}function aa(E,G,O){const L=Array(O.length);if(!O.length)return L;const [m,n]=E.scale;let D=y(E,O[0][0]);E=ea(E,O[0][1]);L[0]=G(O[0],D,E);for(let N=1;N<O.length;N++){const da=O[N];D+=da[0]*m;E-=da[1]*n;L[N]=G(da,D,E)}return L}function I(E,G,O){const L=Array(O.length);for(let m=0;m<O.length;m++)L[m]=aa(E,G,O[m]);return L}function F(E,
G,O,L){return aa(E,O?L?ja:W:L?W:Y,G)}function T(E,G,O,L){return I(E,O?L?ja:W:L?W:Y,G)}function e(E,G,O,L){return I(E,O?L?ja:W:L?W:Y,G)}function u(E,G,O){let [L,m]=O[0],n=Math.min(L,G[0]),D=Math.min(m,G[1]),N=Math.max(L,G[2]);G=Math.max(m,G[3]);for(let da=1;da<O.length;da++){const [ia,la]=O[da];L+=ia;m+=la;0>ia&&(n=Math.min(n,L));0<ia&&(N=Math.max(N,L));0>la?D=Math.min(D,m):0<la&&(G=Math.max(G,m))}E[0]=n;E[1]=D;E[2]=N;E[3]=G;return E}function v(E,G){if(!G.length)return null;E[0]=E[1]=Number.POSITIVE_INFINITY;
E[2]=E[3]=Number.NEGATIVE_INFINITY;for(let O=0;O<G.length;O++)u(E,E,G[O]);return E}function K(E,G,O,L,m){G.xmin=fa(E,O.xmin);G.ymin=r(E,O.ymin);G.xmax=fa(E,O.xmax);G.ymax=r(E,O.ymax);G!==O&&(L&&(G.zmin=O.zmin,G.zmax=O.zmax),m&&(G.mmin=O.mmin,G.mmax=O.mmax));return G}function p(E,G,O,L,m){G.points=g(E,O.points,L,m);return G}function q(E,G,O,L,m){G.x=fa(E,O.x);G.y=r(E,O.y);G!==O&&(L&&(G.z=O.z),m&&(G.m=O.m));return G}function B(E,G,O,L,m){E=J(E,O.rings,L,m);if(!E)return null;G.rings=E;return G}function Q(E,
G,O,L,m){E=l(E,O.paths,L,m);if(!E)return null;G.paths=E;return G}const Y=(E,G,O)=>[G,O],W=(E,G,O)=>[G,O,E[2]],ja=(E,G,O)=>[G,O,E[2],E[3]];t.equals=function(E,G){if(E===G||null==E&&null==G)return!0;if(null==E||null==G)return!1;let O,L,m,n;E&&"upperLeft"===E.originPosition?(O=E.translate[0],L=E.translate[1],E=E.scale[0]):(O=E.extent.xmin,L=E.extent.ymax,E=E.tolerance);G&&"upperLeft"===G.originPosition?(m=G.translate[0],n=G.translate[1],G=G.scale[0]):(m=G.extent.xmin,n=G.extent.ymax,G=G.tolerance);return O===
m&&L===n&&E===G};t.getQuantizedBoundsCoordsArray=u;t.getQuantizedBoundsCoordsArrayArray=v;t.getQuantizedBoundsPaths=function(E){return v([0,0,0,0],E)};t.getQuantizedBoundsPoints=function(E){const G=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return u(G,G,E)};t.getQuantizedBoundsRings=function(E){return v([0,0,0,0],E)};t.quantizeBounds=function(E,G,O){G[0]=fa(E,O[0]);G[3]=r(E,O[1]);G[2]=fa(E,O[2]);G[1]=r(E,O[3]);return G};t.quantizeExtent=K;
t.quantizeGeometry=function(E,G){return E&&G?ha.isPoint(G)?q(E,{},G,!1,!1):ha.isPolyline(G)?Q(E,{},G,!1,!1):ha.isPolygon(G)?B(E,{},G,!1,!1):ha.isMultipoint(G)?p(E,{},G,!1,!1):ha.isExtent(G)?K(E,{},G,!1,!1):null:null};t.quantizeMultipoint=p;t.quantizePaths=l;t.quantizePoint=q;t.quantizePoints=g;t.quantizePolygon=B;t.quantizePolyline=Q;t.quantizeRings=J;t.quantizeX=fa;t.quantizeY=r;t.toQuantizationTransform=function(E){return E?{originPosition:"upper-left"===E.originPosition?"upperLeft":"lower-left"===
E.originPosition?"lowerLeft":E.originPosition,scale:E.tolerance?[E.tolerance,E.tolerance]:[1,1],translate:E.extent?[E.extent.xmin,E.extent.ymax]:[0,0]}:null};t.unquantizeBounds=function(E,G,O){return O?(G[0]=y(E,O[0]),G[1]=ea(E,O[3]),G[2]=y(E,O[2]),G[3]=ea(E,O[1]),G):[y(E,G[0]),ea(E,G[3]),y(E,G[2]),ea(E,G[1])]};t.unquantizeCoordsArray=aa;t.unquantizeCoordsArrayArray=I;t.unquantizeExtent=function(E,G,O,L,m){G.xmin=y(E,O.xmin);G.ymin=ea(E,O.ymin);G.xmax=y(E,O.xmax);G.ymax=ea(E,O.ymax);G!==O&&(L&&(G.zmin=
O.zmin,G.zmax=O.zmax),m&&(G.mmin=O.mmin,G.mmax=O.mmax));return G};t.unquantizeMultipoint=function(E,G,O,L,m){d.isSome(O)&&(G.points=F(E,O.points,L,m));return G};t.unquantizePaths=T;t.unquantizePoint=function(E,G,O,L,m){if(d.isNone(O))return G;G.x=y(E,O.x);G.y=ea(E,O.y);G!==O&&(L&&(G.z=O.z),m&&(G.m=O.m));return G};t.unquantizePoints=F;t.unquantizePolygon=function(E,G,O,L,m){d.isSome(O)&&(G.rings=e(E,O.rings,L,m));return G};t.unquantizePolyline=function(E,G,O,L,m){d.isSome(O)&&(G.paths=T(E,O.paths,
L,m));return G};t.unquantizeRings=e;t.unquantizeX=y;t.unquantizeY=ea;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe","./attributeSupport","../../../smartMapping/statistics/support/utils"],function(t,d,ha){return function(){function fa(w,g,J){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=w.returnDistinctValues;this.fieldsIndex=J;this.featureAdapter=g;if((g=w.outFields)&&
-1===g.indexOf("*")){this.outFields=g;w=0;for(const y of g){var l=d.getExpressionFromFieldName(y);l=(g=this.fieldsIndex.get(l))?null:d.getWhereClause(l,J);g=g?g.name:d.getAliasFromFieldName(y)||`FIELD_EXP_${w++}`;this._fieldDataCache.set(y,{alias:g,clause:l})}}}var r=fa.prototype;r.countDistinctValues=function(w){if(!this.returnDistinctValues)return w.length;w.forEach(g=>this.getAttributes(g));return this._returnDistinctMap.size};r.getAttributes=function(w){w=this._processAttributesForOutFields(w);
return this._processAttributesForDistinctValues(w)};r.getFieldValue=function(w,g,J){const l=J?J.name:g;let y=null;this._fieldDataCache.has(l)?y=this._fieldDataCache.get(l).clause:J||(y=d.getWhereClause(g,this.fieldsIndex),this._fieldDataCache.set(l,{alias:l,clause:y}));return J?this.featureAdapter.getAttribute(w,l):y.calculateValue(w,this.featureAdapter)};r.getNormalizedValue=function(w,g){const J=g.normalizationType,l=g.normalizationTotal;let y=this.getFieldValue(w,g.field,g.fieldInfo);J&&Number.isFinite(y)&&
(w=this.getFieldValue(w,g.normalizationField,g.normalizationFieldInfo),y=ha.getNormalizedValue(y,J,w,l));return y};r.getExpressionValue=function(w,g,J){w={attributes:this.featureAdapter.getAttributes(w)};w=J.createExecContext(w,g.viewInfo);return J.executeFunction(g.compiledFunc,w)};r.validateItem=function(w,g){this._fieldDataCache.has(g)||this._fieldDataCache.set(g,{alias:g,clause:d.getWhereClause(g,this.fieldsIndex)});return this._fieldDataCache.get(g).clause.testFeature(w,this.featureAdapter)};
r.validateItems=function(w,g){this._fieldDataCache.has(g)||this._fieldDataCache.set(g,{alias:g,clause:d.getWhereClause(g,this.fieldsIndex)});return this._fieldDataCache.get(g).clause.testSet(w,this.featureAdapter)};r._processAttributesForOutFields=function(w){const g=this.outFields;if(!g||!g.length)return this.featureAdapter.getAttributes(w);const J={};for(const l of g){const {alias:y,clause:ea}=this._fieldDataCache.get(l);J[y]=ea?ea.calculateValue(w,this.featureAdapter):this.featureAdapter.getAttribute(w,
y)}return J};r._processAttributesForDistinctValues=function(w){if(t.isNone(w)||!this.returnDistinctValues)return w;var g=this.outFields,J=[];if(g)for(const y of g){var {alias:l}=this._fieldDataCache.get(y);J.push(w[l])}else for(l in w)J.push(w[l]);g=`${(g||["*"]).join(",")}=${J.join(",")}`;J=this._returnDistinctMap.get(g)||0;this._returnDistinctMap.set(g,++J);return 1<J?null:w};return fa}()})},"esri/smartMapping/statistics/support/utils":function(){define(["exports","../../../core/Error","../../../core/maybe",
"../../../layers/support/fieldUtils"],function(t,d,ha,fa){function r(l,y){return new d(l,y)}function w(l,y){l=ha.isSome(l)?l:"";ha.isSome(y)&&y&&(l=l?"("+l+") AND ("+y+")":y);return l}function g(l){const y=l.layer;return l.fields.filter(ea=>!y.getField(ea))}function J(l){const y=l.layer;return l.fields.filter(ea=>{ea=y.getFieldUsageInfo(ea);return!ea||!ea.supportsStatistics})}t.calculateStatistics=function(l){const {values:y,useSampleStdDev:ea,supportsNullCount:aa}=l;var I=Number.POSITIVE_INFINITY;
let F=Number.NEGATIVE_INFINITY,T=null,e=null;var u=null;let v=null,K=0;const p=null==l.minValue?-Infinity:l.minValue;l=null==l.maxValue?Infinity:l.maxValue;for(const q of y)Number.isFinite(q)?q>=p&&q<=l&&(T+=q,I=Math.min(I,q),F=Math.max(F,q),K++):"string"===typeof q&&K++;if(K&&null!=T){e=T/K;u=0;for(const q of y)Number.isFinite(q)&&q>=p&&q<=l&&(u+=(q-e)**2);v=ea?1<K?u/(K-1):0:0<K?u/K:0;u=Math.sqrt(v)}else F=I=null;I={avg:e,count:K,max:F,min:I,stddev:u,sum:T,variance:v};aa&&(I.nullcount=y.length-K);
return I};t.calculateStringStatistics=function(l){const y=l.returnDistinct?[...new Set(l.values)]:l.values,ea=y.filter(I=>null!=I).length,aa={count:ea};l.supportsNullCount&&(aa.nullcount=y.length-ea);return aa};t.createError=r;t.getNormalizedValue=function(l,y,ea,aa){let I=null;switch(y){case "log":0!==l&&(I=Math.log(l)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(aa)&&0!==aa&&(I=l/aa*100);break;case "field":Number.isFinite(ea)&&0!==ea&&(I=l/ea);break;case "natural-log":0<l&&(I=Math.log(l));
break;case "square-root":0<l&&(I=l**.5)}return I};t.getRangeExpr=function(l,y,ea){y=null!=y?l+" \x3e\x3d "+y:"";l=null!=ea?l+" \x3c\x3d "+ea:"";ea="";return(ea=y&&l?w(y,l):y||l)?"("+ea+")":""};t.getSQLFilterForNormalization=function(l){const y=l.field,ea=l.normalizationType;l=l.normalizationField;let aa;if("log"===ea)aa="(NOT "+y+" \x3d 0)";else if("field"===ea)aa="(NOT "+l+" \x3d 0)";else if("natural-log"===ea||"square-root"===ea)aa=`(${y} > 0)`;return aa};t.isNullCountSupported=function(l){const y=
null!=l.minValue||null!=l.maxValue,ea=!!l.sqlExpression&&l.supportsSQLExpression;return!(null!=l.normalizationField||null!=l.normalizationType)&&!y&&!ea};t.mergeWhereClauses=w;t.processStatsResult=function(l,y){if(!y)return l;["avg","stddev","variance"].forEach(ea=>{null!=l[ea]&&(l[ea]=Math.ceil(l[ea]))});return l};t.verifyBasicFieldValidity=function(l,y,ea){const aa=g({layer:l,fields:y});if(aa.length)return r(ea,"Unknown fields: "+aa.join(", ")+". You can only use fields defined in the layer schema");
l=J({layer:l,fields:y});if(l.length)return r(ea,"Unsupported fields: "+l.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true")};t.verifyFieldType=function(l,y,ea,aa){let I=null;if(!y)I=r(ea,"'field' is not defined in the layer schema");else if(y.name===l.objectIdField||-1===aa.indexOf(y.type))I=r(ea,"'field' should be one of these types: "+aa.join(","));return I};t.verifyNumericField=function(l,y,ea){let aa;y?y.name!==l.objectIdField&&
fa.isNumericField(y)||(aa=r(ea,"'field' should be one of these numeric types: "+fa.numericTypes.join(","))):aa=r(ea,"'field' is not defined in the layer schema");return aa};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),function(t,d,ha,fa,r,w,g,J){function l(z,H,V){if(z)for(const ma of z)(z=
(z=w.getDeepValue(ma,H))&&"function"!==typeof z&&V.get(z))&&w.setDeepValue(ma,z.name,H)}function y(z,H){if(!z||!H)return[];k.clear();ea(k,z,H);return Array.from(k).sort()}function ea(z,H,V){var ma;if(V)if(null!=H&&null!=(ma=H.fields)&&ma.length)if(V.includes("*"))for(const {name:na}of H.fields)z.add(na);else for(const na of V)aa(z,H,na);else if(V.includes("*"))z.clear(),z.add("*");else for(const na of V)z.add(na)}function aa(z,H,V){"string"===typeof V&&(H?(H=H.get(V))&&z.add(H.name):z.add(V))}function I(z,
H,V){return F.apply(this,arguments)}function F(){F=ha._asyncToGenerator(function*(z,H,V){var ma;if(V){var {arcadeUtils:na}=yield J.loadArcade();V=na.extractFieldNames(V,null==H?void 0:null==(ma=H.fields)?void 0:ma.map(sa=>sa.name));for(const sa of V)aa(z,H,sa)}});return F.apply(this,arguments)}function T(z,H,V){return e.apply(this,arguments)}function e(){e=ha._asyncToGenerator(function*(z,H,V){if(V&&"1\x3d1"!==V){V=(yield new Promise(function(ma,na){t(["../../core/sql/WhereClause"],ma,na)})).WhereClause.create(V,
H);if(!V.isStandardized)throw new fa("fieldUtils:collectFilterFields","Where clause is not standardized");ea(z,H,V.fieldNames)}});return e.apply(this,arguments)}function u(z,H){for(const V of z)if(V&&V.valueType&&V.valueType===H)return V.name;return null}function v(){v=ha._asyncToGenerator(function*(z){if(!z)return[];const H=new Set;yield K(H,z);return Array.from(H).sort()});return v.apply(this,arguments)}function K(z,H){return p.apply(this,arguments)}function p(){p=ha._asyncToGenerator(function*(z,
H){if(H){var V=w.getDeepValue("elevationInfo.featureExpressionInfo",H);if(V)return V.collectRequiredFields(z,H.fieldsIndex)}});return p.apply(this,arguments)}function q(z,H,V){return B.apply(this,arguments)}function B(){B=ha._asyncToGenerator(function*(z,H,V){V.outStatistic.onStatisticValueExpression?I(z,H,V.outStatistic.onStatisticValueExpression):z.add(V.outStatistic.onStatisticField)});return B.apply(this,arguments)}function Q(){Q=ha._asyncToGenerator(function*(z,H,V){var ma;if(H&&V&&"cluster"===
V.type){var na=[];null!=(ma=V.popupTemplate)&&ma.expressionInfos&&na.push(...V.popupTemplate.expressionInfos.map(sa=>I(z,H.fieldsIndex,sa.expression)));V.fields&&na.push(...V.fields.map(sa=>q(z,H.fieldsIndex,sa)));yield Promise.all(na)}});return Q.apply(this,arguments)}function Y(){Y=ha._asyncToGenerator(function*(z,H,V){H&&(H.timeInfo&&r.isSome(V)&&V.timeExtent&&ea(z,H.fieldsIndex,[H.timeInfo.startField,H.timeInfo.endField]),H.floorInfo&&ea(z,H.fieldsIndex,[H.floorInfo.floorField]),r.isSome(V)&&
r.isSome(V.where)&&(yield T(z,H.fieldsIndex,V.where)))});return Y.apply(this,arguments)}function W(){W=ha._asyncToGenerator(function*(z,H,V){H&&V&&(yield Promise.all(V.map(ma=>ja(z,H,ma))))});return W.apply(this,arguments)}function ja(z,H,V){return E.apply(this,arguments)}function E(){E=ha._asyncToGenerator(function*(z,H,V){H&&V&&(V.valueExpression?yield I(z,H.fieldsIndex,V.valueExpression):V.field&&aa(z,H.fieldsIndex,V.field))});return E.apply(this,arguments)}function G(){G=ha._asyncToGenerator(function*(z){if(!z)return[];
const H="timeInfo"in z&&z.timeInfo;return H?y(z.fieldsIndex,[z.trackIdField,H.startField,H.endField]):[]});return G.apply(this,arguments)}function O(){O=ha._asyncToGenerator(function*(z){if(!z)return[];const H=new Set;yield L(H,z);return Array.from(H).sort()});return O.apply(this,arguments)}function L(z,H){return m.apply(this,arguments)}function m(){m=ha._asyncToGenerator(function*(z,H){const {labelingInfo:V,fieldsIndex:ma}=H;V&&V.length&&(yield Promise.all(V.map(na=>n(z,ma,na))))});return m.apply(this,
arguments)}function n(z,H,V){return D.apply(this,arguments)}function D(){D=ha._asyncToGenerator(function*(z,H,V){if(V){var ma=V.getLabelExpression();V=V.where;"arcade"===ma.type?yield I(z,H,ma.expression):(ma=ma.expression.match(/{[^}]*}/g))&&ma.forEach(na=>{aa(z,H,na.slice(1,-1))});yield T(z,H,V)}});return D.apply(this,arguments)}function N(z){return"number"===typeof z&&!isNaN(z)&&isFinite(z)}function da(z){return null===z||N(z)}function ia(z){return null===z||U(z)}function la(z){return null!=z&&
"string"===typeof z}function ra(z){return null===z||la(z)}function ya(){return!0}function xa(z,H){let V;switch(z.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":V=z.nullable?ia:U;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":V=z.nullable?da:N;break;case "string":case "esriFieldTypeString":V=z.nullable?ra:la;break;default:V=ya}return 1===
arguments.length?V:V(H)}function Ba(z){return null!=z&&x.has(z.type)}function Na(z,H){return z.nullable&&null===H?null:Ba(z)&&!Ta(z.type,Number(H))?d.NumericRangeValidationError.OUT_OF_RANGE:xa(z,H)?z.domain?g.validateDomainValue(z.domain,H):null:d.TypeValidationError.INVALID_TYPE}function Ta(z,H){return(z="string"===typeof z?Ka(z):z)?z.isInteger?U(H)&&H>=z.min&&H<=z.max:H>=z.min&&H<=z.max:!1}function Ka(z){switch(z){case "esriFieldTypeSmallInteger":case "small-integer":return M;case "esriFieldTypeInteger":case "integer":return P;
case "esriFieldTypeSingle":case "single":return ba;case "esriFieldTypeDouble":case "double":return X}}function Ca(z,H,V){if(!H||!H.attributes||!z){if(r.isSome(V))for(var ma of z)V.add(ma);return!0}H=H.attributes;ma=!1;for(const na of z)if(!(na in H))if(ma=!0,r.isSome(V))V.add(na);else break;return ma}function Ra(){Ra=ha._asyncToGenerator(function*(z,H){const V=new Set;for(const ma of H)yield I(V,z.fieldsIndex,ma);return Array.from(V).sort()});return Ra.apply(this,arguments)}const gb="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),
c=["field","normalizationField"],k=new Set,U=(()=>"isInteger"in Number?Number.isInteger:z=>"number"===typeof z&&isFinite(z)&&Math.floor(z)===z)(),f=["integer","small-integer","single","double"],x=new Set([...f,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);d.NumericRangeValidationError=void 0;(d.NumericRangeValidationError||(d.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";d.TypeValidationError=void 0;
(d.TypeValidationError||(d.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const M={min:-32768,max:32767,isInteger:!0},P={min:-2147483648,max:2147483647,isInteger:!0},ba={min:-3.4E38,max:1.2E38,isInteger:!1},X={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};d.collectArcadeFieldNames=I;d.collectElevationFields=K;d.collectFeatureReductionFields=function(z,H,V){return Q.apply(this,arguments)};d.collectField=aa;d.collectFields=ea;d.collectFilterFields=function(z,
H,V){return Y.apply(this,arguments)};d.collectLabelingFields=L;d.collectOrderByInfos=function(z,H,V){return W.apply(this,arguments)};d.doubleRange=X;d.featureHasFields=function(z,H){return!Ca(z,H,null)};d.fixFields=y;d.fixRendererFields=function(z,H){if(null!=z&&null!=H)for(const V of Array.isArray(z)?z:[z])if(l(gb,V,H),"visualVariables"in V&&V.visualVariables)for(const ma of V.visualVariables)l(c,ma,H)};d.fixTimeInfoFields=function(z,H){if(null!=z&&null!=H&&H.fields.length)if("startField"in z){var V=
H.get(z.startField);H=H.get(z.endField);z.startField=V&&V.name||null;z.endField=H&&H.name||null}else V=H.get(z.startTimeField),H=H.get(z.endTimeField),z.startTimeField=V&&V.name||null,z.endTimeField=H&&H.name||null};d.getDisplayFieldName=function({displayField:z,fields:H}){if(z)return z;if(!H||!H.length)return null;if(!(z=u(H,"name-or-title")||u(H,"unique-identifier")||u(H,"type-or-category")))a:{for(const V of H)if(V&&V.name&&(H=V.name.toLowerCase(),-1<H.indexOf("name")||-1<H.indexOf("title"))){z=
V.name;break a}z=null}return z};d.getElevationFields=function(z){return v.apply(this,arguments)};d.getExpressionFields=function(z,H){return Ra.apply(this,arguments)};d.getFeatureEditFields=function(z){if(!z)return[];const H="editFieldsInfo"in z&&z.editFieldsInfo;return H?y(z.fieldsIndex,[H&&H.creatorField,H&&H.creationDateField,H&&H.editorField,H&&H.editDateField]):[]};d.getFeatureGeometryFields=function(z){if(!z)return[];const H=z.geometryFieldsInfo;return H?y(z.fieldsIndex,[H.shapeAreaField,H.shapeLengthField]):
[]};d.getFieldDefaultValue=function(z){const H=z.defaultValue;if(void 0!==H&&xa(z,H))return H;if(z.nullable)return null};d.getFieldRange=function(z){const H=g.getDomainRange(z.domain);if(H)return H;if(Ba(z))return Ka(z.type)};d.getLabelingFields=function(z){return O.apply(this,arguments)};d.getNumericTypeForValue=function(z){if(!N(z))return null;if(U(z)){if(z>=M.min&&z<=M.max)return"esriFieldTypeSmallInteger";if(z>=P.min&&z<=P.max)return"esriFieldTypeInteger"}return z>=ba.min&&z<=ba.max?"esriFieldTypeSingle":
"esriFieldTypeDouble"};d.getTimeFields=function(z){return G.apply(this,arguments)};d.integerRange=P;d.isDateField=function(z){return null!=z&&("date"===z.type||"esriFieldTypeDate"===z.type)};d.isNumberInRange=Ta;d.isNumericField=Ba;d.isStringField=function(z){return null!=z&&("string"===z.type||"esriFieldTypeString"===z.type)};d.isValidFieldValue=function(z,H){return null===Na(z,H)};d.isValueMatchingFieldType=xa;d.numericTypes=f;d.packFields=function(z,H,V=1){if(!H||!z)return[];if(H.includes("*"))return["*"];
H=y(z,H);return H.length/z.fields.length>=V?["*"]:H};d.populateMissingFields=Ca;d.rendererFields=gb;d.sanitizeNullFieldValue=function(z){return null==z||"number"===typeof z&&isNaN(z)?null:z};d.singleRange=ba;d.smallIntegerRange=M;d.unpackFieldNames=function(z,H){return r.isNone(H)||r.isNone(z)?[]:H.includes("*")?z.fields.map(V=>V.name):H};d.validateFieldValue=Na;d.validationErrorToString=function(z,H,V){switch(z){case g.DomainValidationError.INVALID_CODED_VALUE:return`Value ${V} is not in the coded domain - field: ${H.name}, domain: ${JSON.stringify(H.domain)}`;
case g.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${V} is out of the range of valid values - field: ${H.name}, domain: ${JSON.stringify(H.domain)}`;case d.TypeValidationError.INVALID_TYPE:return`Value ${V} is not a valid value for the field type - field: ${H.name}, type: ${H.type}, nullable: ${H.nullable}`;case d.NumericRangeValidationError.OUT_OF_RANGE:{const {min:ma,max:na}=Ka(H.type);return`Value ${V} is out of range for the number type - field: ${H.name}, type: ${H.type}, value range is ${ma} to ${na}`}}};
d.visualVariableFields=c;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/layers/support/domainUtils":function(){define(["exports"],function(t){function d(ha,fa){switch(ha.type){case "range":{const r="range"in ha?ha.range[1]:ha.maxValue;if(+fa<("range"in ha?ha.range[0]:ha.minValue)||+fa>r)return t.DomainValidationError.VALUE_OUT_OF_RANGE;break}case "coded-value":case "codedValue":if(null==ha.codedValues||ha.codedValues.every(r=>null==r||r.code!==fa))return t.DomainValidationError.INVALID_CODED_VALUE}return null}
t.DomainValidationError=void 0;(function(ha){ha.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";ha.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(t.DomainValidationError||(t.DomainValidationError={}));t.getDomainRange=function(ha){if(ha&&"range"===ha.type)return{min:"range"in ha?ha.range[0]:ha.minValue,max:"range"in ha?ha.range[1]:ha.maxValue}};t.isValidDomainValue=function(ha,fa){return null===d(ha,fa)};t.validateDomainValue=d;Object.defineProperty(t,"__esModule",
{value:!0})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/maybe ../geometry/SpatialReference".split(" "),function(t,d,ha,fa,r,w){function g(){J||(J=ha._asyncToGenerator(function*(){const y=yield new Promise(function(ea,aa){t(["./arcadeUtils"],ea,aa)});return{arcade:y.arcade,arcadeUtils:y,Dictionary:y.Dictionary,Feature:y.arcadeFeature}})());return J}let J;fa=(y,ea,aa)=>l.create(y,ea,aa,null,["$feature","$view"]);let l=function(){function y(aa,
I,F,T,e,u,v,K){this.script=aa;this.evaluate=e;this.fields=Array.isArray(v)?v:v.fields;this._syntaxTree=T;this._arcade=I;this._arcadeDictionary=F;this._arcadeFeature=u;this._spatialReference=K;this._referencesGeometry=I.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}y.create=function(){var aa=ha._asyncToGenerator(function*(I,F,T,e,u,v){const {arcade:K,Feature:p,Dictionary:q}=yield g(),B=w.fromJSON(F);F=K.parseScript(I,v);u=u.reduce((E,
G)=>({...E,[G]:null}),{});let Q=null;r.isSome(e)&&(Q=new q(e),Q.immutable=!0,u.$config=null);e=K.scriptUsesGeometryEngine(F)&&K.enableGeometrySupport();v=K.scriptUsesFeatureSet(F)&&K.enableFeatureSetSupport();const Y=K.scriptIsAsync(F)&&K.enableAsyncSupport();u={vars:u,spatialReference:B,useAsync:!!Y};const W=new q;W.immutable=!1;W.setField("scale",0);const ja=K.compileScript(F,u);yield Promise.all([e,v,Y]);return new y(I,K,q,F,E=>{"$view"in E&&E.$view&&(W.setField("scale",E.$view.scale),E.$view=
W);Q&&(E.$config=Q);return ja({vars:E,spatialReference:B})},new p,T,B)});return function(I,F,T,e,u,v){return aa.apply(this,arguments)}}();var ea=y.prototype;ea.repurposeFeature=function(aa){aa.geometry&&!aa.geometry.spatialReference&&(aa.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(aa.geometry,aa.attributes,{fields:this.fields});return this._arcadeFeature};ea.repurposeAdapter=function(aa){this._arcadeFeature.repurposeFromAdapter(aa,{fields:this.fields});
return this._arcadeFeature};ea.createDictionary=function(){return new this._arcadeDictionary};ea.referencesMember=function(aa){return this._arcade.referencesMember(this._syntaxTree,aa)};ea.referencesFunction=function(aa){return this._arcade.referencesFunction(this._syntaxTree,aa)};ea.referencesGeometry=function(){return this._referencesGeometry};ea.referencesScale=function(){return this._referencesScale};ea.extractFieldLiterals=function(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)};
return y}();d.ArcadeExpression=l;d.createDictionaryExpression=(y,ea,aa,I)=>l.create(y,ea,aa,I,["$feature","$view"]);d.createLabelExpression=(y,ea,aa)=>l.create(y,ea,aa,null,["$feature"]);d.createRendererExpression=fa;d.createVVExpression=fa;d["default"]=l;d.loadArcade=g;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(t){function d(r,w,g,J,l){if(null!=J&&null!=l)return y=>{const ea=r.getAttribute(y,w);y=r.getAttribute(y,
g);return(null==ea||ea<=l)&&(null==y||y>=J)};if(null!=J)return y=>{y=r.getAttribute(y,g);return null==y||y>=J};if(null!=l)return y=>{y=r.getAttribute(y,w);return null==y||y<=l}}function ha(r,w,g,J){if(null!=g&&null!=J&&g===J)return l=>r.getAttribute(l,w)===g;if(null!=g&&null!=J)return l=>{l=r.getAttribute(l,w);return l>=g&&l<=J};if(null!=g)return l=>r.getAttribute(l,w)>=g;if(null!=J)return l=>r.getAttribute(l,w)<=J}function fa(){return()=>!1}t.getTimeExtent=function(r,w){if(!r)return null;const g=
w.featureAdapter,{startTimeField:J,endTimeField:l}=r;let y=Number.POSITIVE_INFINITY,ea=Number.NEGATIVE_INFINITY;if(J&&l)w.forEach(aa=>{const I=g.getAttribute(aa,J);aa=g.getAttribute(aa,l);null==I||isNaN(I)||(y=Math.min(y,I));null==aa||isNaN(aa)||(ea=Math.max(ea,aa))});else{const aa=J||l;w.forEach(I=>{I=g.getAttribute(I,aa);null==I||isNaN(I)||(y=Math.min(y,I),ea=Math.max(ea,I))})}return{start:y,end:ea}};t.getTimeOperator=function(r,w,g){if(!w||!r)return null;const {startTimeField:J,endTimeField:l}=
r;if(!J&&!l)return null;const {start:y,end:ea}=w;return null===y&&null===ea?null:void 0===y&&void 0===ea?fa():J&&l?d(g,J,l,y,ea):ha(g,J||l,y,ea)};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../centroid ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(t,d,ha,fa,r,w,g,J,l,y,ea,aa,I,F){function T(m,n,D,N=m.hasZ,da=m.hasM){if(r.isNone(n))return null;const ia=m.hasZ&&N,la=m.hasM&&da;return D?(m=aa.quantizeOptimizedGeometry(G,n,m.hasZ,m.hasM,"esriGeometryPoint",D,N,da),aa.convertToPoint(m,ia,la)):aa.convertToPoint(n,ia,la)}function e(){e=ha._asyncToGenerator(function*(m,n,D){const {outFields:N,orderByFields:da,groupByFieldsForStatistics:ia,outStatistics:la}=m;if(N)for(var ra=0;ra<N.length;ra++)N[ra]=N[ra].trim();if(da)for(ra=0;ra<da.length;ra++)da[ra]=
da[ra].trim();if(ia)for(ra=0;ra<ia.length;ra++)ia[ra]=ia[ra].trim();if(la)for(ra=0;ra<la.length;ra++)la[ra].onStatisticField&&(la[ra].onStatisticField=la[ra].onStatisticField.trim());m.geometry&&!m.outSR&&(m.outSR=m.geometry.spatialReference);return v(m,n,D)});return e.apply(this,arguments)}function u(){u=ha._asyncToGenerator(function*(m,n,D){return v(m,n,D)});return u.apply(this,arguments)}function v(m,n,D){return K.apply(this,arguments)}function K(){K=ha._asyncToGenerator(function*(m,n,D){if(!m)return null;
var {where:N}=m;m.where=N=N&&N.trim();if(!N||/^1 *= *1$/.test(N)||n&&n===N)m.where=null;if(!m.geometry)return m;n=yield p(m);m.distance=0;m.units=null;"esriSpatialRelEnvelopeIntersects"===m.spatialRel&&({spatialReference:N}=m.geometry,n=g.getGeometryExtent(n),n.spatialReference=N);m.geometry=n;yield F.checkProjectionSupport(n.spatialReference,D);n=(yield l.normalizeCentralMeridian(J.fromJSON(n)))[0];if(r.isNone(n))throw W;n=n.toJSON();n=yield F.project(n,n.spatialReference,D);if(!n)throw W;n.spatialReference=
D;m.geometry=n;return m});return K.apply(this,arguments)}function p(m){return q.apply(this,arguments)}function q(){q=ha._asyncToGenerator(function*(m){const {geometry:n,distance:D,units:N}=m;if(null==D||"vertexAttributes"in n)return n;var da=n.spatialReference;m=N?Y.fromJSON(N):w.getUnitString(da);da=da&&(y.isGeographic(da)||y.isWebMercator(da))?n:yield F.checkProjectionSupport(da,y.WGS84).then(()=>F.project(n,y.WGS84));return(yield B())(da.spatialReference,da,D,m)});return q.apply(this,arguments)}
function B(){return Q.apply(this,arguments)}function Q(){Q=ha._asyncToGenerator(function*(){return(yield new Promise(function(m,n){t(["../../../geometry/geometryEngineJSON"],m,n)})).geodesicBuffer});return Q.apply(this,arguments)}const Y=new fa.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),W=Object.freeze({}),ja=new I,E=new I,G=new I,
O={esriGeometryPoint:aa.convertToPoint,esriGeometryPolyline:aa.convertToPolyline,esriGeometryPolygon:aa.convertToPolygon,esriGeometryMultipoint:aa.convertToMultipoint},L=(m,n)=>"_geVersion"!==m?n:void 0;d.QUERY_ENGINE_EMPTY_RESULT=W;d.cleanFromGeometryEngine=function(m){return m&&"_geVersion"in m?JSON.parse(JSON.stringify(m,L)):m};d.getCentroid=function(m,n,D){if("esriGeometryPolygon"!==m.geometryType||!n||!n.centroid&&!n.geometry)return null;n.centroid||(n.centroid=ea.getCentroidOptimizedGeometry(new I,
n.geometry,m.hasZ,m.hasM));return T(m,n.centroid,D)};d.getGeometry=function(m,n,D,N,da,ia,la=n,ra=D){const ya=n&&la,xa=D&&ra;N=r.isSome(N)?"coords"in N?N:N.geometry:null;if(r.isNone(N))return null;if(da)return n=aa.generalizeOptimizedGeometry(E,N,n,D,m,da,la,ra),ia&&(n=aa.quantizeOptimizedGeometry(G,n,ya,xa,m,ia)),O[m](n,ya,xa);if(ia)return ia=aa.quantizeOptimizedGeometry(G,N,n,D,m,ia,la,ra),O[m](ia,ya,xa);aa.removeZMValues(ja,N,n,D,la,ra);return O[m](ja,ya,xa)};d.normalizeFilter=function(m,n,D){return u.apply(this,
arguments)};d.normalizeQuery=function(m,n,D){return e.apply(this,arguments)};d.normalizeQueryLike=v;d.transformCentroid=T;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(t,d,ha,fa,r,w,g,J,l,y,ea,aa,I){function F(){return new Promise(function(v,K){t(["../../../geometry/geometryEngineJSON"],v,K)})}function T(){T=ha._asyncToGenerator(function*(v,K,p){const {spatialRel:q,geometry:B}=v;if(B){if(!0!==u.spatialRelationship[q])throw new fa("feature-store:unsupported-query","Unsupported query spatial relationship",{query:v});if(J.isValid(B.spatialReference)&&J.isValid(p)){if(!0!==u.queryGeometry[g.getJsonType(B)])throw new fa("feature-store:unsupported-query","Unsupported query geometry type",
{query:v});if(!0!==u.layerGeometry[K])throw new fa("feature-store:unsupported-query","Unsupported layer geometry type",{query:v});if(v.outSR)return aa.checkProjectionSupport(v.geometry&&v.geometry.spatialReference,v.outSR)}}});return T.apply(this,arguments)}const e={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",
esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},u={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},
layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};d.canQueryWithRBush=function(v){if(g.isExtent(v))return!0;if(g.isPolygon(v)){for(const K of v.rings)if(5!==K.length||K[0][0]!==K[1][0]||K[0][0]!==K[4][0]||K[2][0]!==K[3][0]||K[0][1]!==K[3][1]||K[0][1]!==K[4][1]||K[1][1]!==K[2][1])return!1;return!0}return!1};d.checkSpatialQuerySupport=function(v,K,p){return T.apply(this,arguments)};d.getSpatialQueryOperator=function(v,
K,p,q,B){if(g.isPolygon(K)&&"esriGeometryPoint"===p&&("esriSpatialRelIntersects"===v||"esriSpatialRelContains"===v)){const Q=y.convertFromPolygon(new ea,K,!1,!1);return Promise.resolve(Y=>l.polygonContainsPoint(Q,!1,!1,Y))}if(g.isPolygon(K)&&"esriGeometryMultipoint"===p){const Q=y.convertFromPolygon(new ea,K,!1,!1);if("esriSpatialRelContains"===v)return Promise.resolve(Y=>l.polygonContainsMultipoint(Q,!1,!1,Y,q,B))}if(g.isExtent(K)&&"esriGeometryPoint"===p&&("esriSpatialRelIntersects"===v||"esriSpatialRelContains"===
v))return Promise.resolve(Q=>r.extentContainsPoint(K,I.getGeometry(p,q,B,Q)));if(g.isExtent(K)&&"esriGeometryMultipoint"===p&&"esriSpatialRelContains"===v)return Promise.resolve(Q=>r.extentContainsMultipoint(K,I.getGeometry(p,q,B,Q)));if(g.isExtent(K)&&"esriSpatialRelIntersects"===v){const Q=w.getExtentIntersector(p);return Promise.resolve(Y=>Q(K,I.getGeometry(p,q,B,Y)))}return F().then(Q=>{const Y=Q[e[v]].bind(null,K.spatialReference,K);return W=>Y(I.getGeometry(p,q,B,W))})};Object.defineProperty(d,
"__esModule",{value:!0})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(t,d){t.extentIntersectsExtent=d.extentIntersectsExtent;t.extentIntersectsMultipoint=d.extentIntersectsMultipoint;t.extentIntersectsPoint=d.extentIntersectsPoint;t.extentIntersectsPolygon=d.extentIntersectsPolygon;t.extentIntersectsPolyline=d.extentIntersectsPolyline;t.getFeatureExtentIntersector=d.getFeatureExtentIntersector;t.isSelfIntersecting=d.isSelfIntersecting;t.segmentIntersects=
d.segmentIntersects;t.getExtentIntersector=function(ha){return"mesh"===ha?d.extentIntersectsExtent:d.getFeatureExtentIntersector(ha)};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/graphics/contains":function(){define(["exports"],function(t){function d(ha,fa,r,w,g){if(!ha)return!1;fa=fa?r?4:3:r?3:2;const {coords:J,lengths:l}=ha;r=!1;ha=0;for(const ea of l){var y=ha;for(let aa=ha,I=ha+ea*fa;aa<I;aa+=fa){y=aa+fa;y===I&&(y=ha);const F=J[aa],T=J[aa+1],e=J[y];y=J[y+1];(T<g&&y>=g||y<g&&
T>=g)&&F+(g-T)/(y-T)*(e-F)<w&&(r=!r)}ha+=ea*fa}return r}t.polygonContainsCoords=d;t.polygonContainsMultipoint=function(ha,fa,r,w,g,J){g=g?J?4:3:J?3:2;const {coords:l,lengths:y}=w;if(!y)return!1;for(let ea=0,aa=0;ea<y.length;ea++,aa+=g)if(!d(ha,fa,r,l[aa],l[aa+1]))return!1;return!0};t.polygonContainsPoint=function(ha,fa,r,w){return d(ha,fa,r,w.coords[0],w.coords[1])};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/support/FieldsIndex":function(){define(function(){return function(){function t(ha){this.fields=
ha;this._fieldsMap=new Map;this._dateFieldsSet=new Set;this.dateFields=[];if(ha){var fa=[];for(const r of ha)if(ha=r&&r.name){const w=ha.toLowerCase().trim();this._fieldsMap.set(ha,r);this._fieldsMap.set(w,r);fa.push(w);if("date"===r.type||"esriFieldTypeDate"===r.type)this.dateFields.push(r),this._dateFieldsSet.add(r)}fa.sort();this.uid=fa.join(",")}}var d=t.prototype;d.destroy=function(){this._fieldsMap.clear()};d.has=function(ha){return null!=this.get(ha)};d.get=function(ha){return null!=ha?this._fieldsMap.get(ha)||
this._fieldsMap.get(ha.toLowerCase().trim()):void 0};d.isDateField=function(ha){return this._dateFieldsSet.has(this.get(ha))};d.normalizeFieldName=function(ha){if(ha=this.get(ha))return ha.name};return t}()})},"esri/layers/support/PromiseQueue":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/promiseUtils"],function(t,d){let ha=function(fa,r,w,g,J){this.resolve=fa;this.reject=r;this.callback=w;this.signal=g;this.abortCallback=J};return function(){function fa(){this._tasks=[]}
var r=fa.prototype;r.push=function(w,g,J){return new Promise((l,y)=>this._tasks.push(new ha(l,y,w,g,J)))};r.unshift=function(w,g,J){return new Promise((l,y)=>this._tasks.unshift(new ha(l,y,w,g,J)))};r.process=function(){if(0===this._tasks.length)return!1;const w=this._tasks.shift();try{const g=d.isAborted(w.signal);if(g&&!w.abortCallback)w.reject(d.createAbortError());else{const J=g?w.abortCallback(d.createAbortError()):w.callback();d.isPromise(J)?J.then(w.resolve,w.reject):w.resolve(J)}}catch(g){w.reject(g)}return!0};
r.cancelAll=function(){const w=d.createAbortError();for(const g of this._tasks)if(g.abortCallback){const J=g.abortCallback(w);g.resolve(J)}else g.reject(w);this._tasks.length=0};t._createClass(fa,[{key:"length",get:function(){return this._tasks.length}}]);return fa}()})},"esri/layers/graphics/sources/geojson/geojson":function(){define(["exports","../../../../core/Error","../../OptimizedFeature","../../OptimizedGeometry"],function(t,d,ha,fa){function*r(v){switch(v.type){case "Feature":yield v;break;
case "FeatureCollection":for(const K of v.features)K&&(yield K)}}function*w(v){if(!v)return null;switch(v.type){case "Point":yield v.coordinates;break;case "LineString":case "MultiPoint":yield*v.coordinates;break;case "MultiLineString":case "Polygon":for(const K of v.coordinates)yield*K;break;case "MultiPolygon":for(const K of v.coordinates)for(const p of K)yield*p}}function*g(v,K={}){const {geometryType:p,objectIdField:q}=K;for(const Q of v){var B;const {geometry:Y,properties:W,id:ja}=Q;if(Y&&u[Y.type]!==
p)continue;v=W||{};let E=null!=(B=v[q])?B:null;q&&null!=ja&&!v[q]&&(v[q]=E=ja);yield new ha["default"](Y?ea(new fa,Y,K):null,v,null,E)}}function J(v){for(const K of v)if(2<K.length)return!0;return!1}function l(v){let K=0;for(let p=0;p<v.length;p++){const q=v[p],B=v[(p+1)%v.length];K+=q[0]*B[1]-B[0]*q[1]}return 0>=K}function y(v){const K=v[0],p=v[v.length-1];K[0]===p[0]&&K[1]===p[1]&&K[2]===p[2]||v.push(K);return v}function ea(v,K,p){switch(K.type){case "LineString":return F(v,K.coordinates,p),v;case "MultiLineString":for(const B of K.coordinates)F(v,
B,p);return v;case "MultiPoint":return F(v,K.coordinates,p),v;case "MultiPolygon":for(var q of K.coordinates)for(aa(v,q[0],p),K=1;K<q.length;K++)I(v,q[K],p);return v;case "Point":return e(v,K.coordinates,p),v;case "Polygon":q=K.coordinates;aa(v,q[0],p);for(K=1;K<q.length;K++)I(v,q[K],p);return v}}function aa(v,K,p){K=y(K);l(K)?F(v,K,p):T(v,K,p)}function I(v,K,p){K=y(K);l(K)?T(v,K,p):F(v,K,p)}function F(v,K,p){for(const q of K)e(v,q,p);v.lengths.push(K.length)}function T(v,K,p){for(let q=K.length-
1;0<=q;q--)e(v,K[q],p);v.lengths.push(K.length)}function e(v,K,p){const [q,B,Q]=K;v.coords.push(q,B);p.hasZ&&v.coords.push(Q||0)}const u={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};t.createOptimizedFeatures=function(v,K){return Array.from(g(r(v),K))};t.getGeometryType=function(v){return u[v]};t.inferLayerProperties=function(v,K={}){const p=[];
var q=new Set;const B=new Set;var Q=!1;let Y=Number.NEGATIVE_INFINITY,W=null,ja=!1,E=void 0;({geometryType:K=null}=K);var G=!1;for(const O of r(v)){const {geometry:L,properties:m,id:n}=O;if(L&&(K||(K=u[L.type]),u[L.type]!==K))continue;Q||(Q=w(L),Q=J(Q));!ja&&(ja=null!=n)&&(E=typeof n,"number"===E&&(W=Object.keys(m).filter(D=>m[D]===n)));ja&&"number"===E&&null!=n&&(Y=Math.max(Y,n),1<W.length?W=W.filter(D=>m[D]===n):1===W.length&&(W=m[W[0]]===n?W:[]));if(!G&&m){v=!0;for(const D in m)if(!q.has(D))if(G=
m[D],null==G)v=!1,B.add(D);else{a:switch(typeof G){case "string":G="esriFieldTypeString";break a;case "number":G="esriFieldTypeDouble";break a;default:G="unknown"}"unknown"===G?B.add(D):(B.delete(D),q.add(D),p.push({name:D,alias:D,type:G}))}G=v}}if(q=W&&1===W.length&&W[0]||null)for(const O of p)O.name===q&&(O.type="esriFieldTypeOID");return{fields:p,geometryType:K,hasZ:Q,maxObjectId:Math.max(0,Y),objectIdFieldName:q,objectIdFieldType:E,unknownFields:Array.from(B)}};t.validateGeoJSON=function(v){if(!v)throw new d("geojson-layer:empty",
"GeoJSON data is empty");if("Feature"!==v.type&&"FeatureCollection"!==v.type)throw new d("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:v});({crs:v}=v);if(v){var K="string"===typeof v?v:"name"===v.type?v.properties.name:"EPSG"===v.type?v.properties.code:null,p=/.*(CRS84H?|4326)$/i;if(!K||!p.test(K))throw new d("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:v});}};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports",
"../../../../core/has","../../../../core/lang","../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],function(t,d,ha,fa,r){t.createCapabilities=function(w,g){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:w},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:g,supportsDelete:g,supportsEditing:g,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAttachments:!1,
supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:g,supportsExceedsLimitStatistics:!0},query:fa.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0},editing:{supportsGeometryUpdate:g,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}};
t.createDefaultAttributesFunction=function(w,g){if(d("csp-restrictions"))return()=>({[g]:null,...w});try{let J=`this.${g} = null;`;for(const y in w){const ea=y.indexOf(".")?`["${y}"]`:`.${y}`;J+=`this${ea} = ${JSON.stringify(w[y])};`}const l=new Function(J);return()=>new l}catch(J){return()=>({[g]:null,...w})}};t.createDefaultTemplate=function(w={}){return[{name:"New Feature",description:"",prototype:{attributes:ha.clone(w)}}]};t.createDrawingInfo=function(w){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===
w||"esriGeometryMultipoint"===w?r.defaultPointSymbolJSON:"esriGeometryPolyline"===w?r.defaultPolylineSymbolJSON:r.defaultPolygonSymbolJSON}}};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],function(t){const d=[252,146,31,255],ha={type:"esriSMS",style:"esriSMSCircle",size:6,color:d,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},fa={type:"esriSLS",style:"esriSLSSolid",width:.75,color:d};t.defaultColor=
d;t.defaultOutlineColor=[153,153,153,255];t.defaultPointSymbolJSON=ha;t.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};t.defaultPolylineSymbolJSON=fa;t.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};
t.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};t.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};t.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/graphics/sources/support/sourceUtils":function(){define(["require","exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../geometry/support/spatialReferenceUtils",
"../../../support/fieldUtils"],function(t,d,ha,fa,r){function w(T){return new ea(T)}function g(){return J.apply(this,arguments)}function J(){J=ha._asyncToGenerator(function*(){return F?F:F=yield new Promise(function(T,e){t(["../../../../geometry/geometryEngineJSON"],T,e)})});return J.apply(this,arguments)}function l(){l=ha._asyncToGenerator(function*(T,e){!fa.isValid(T)||"esriGeometryPolygon"!==e&&"esriGeometryPolyline"!==e||(yield g())});return l.apply(this,arguments)}let y=function(){this.description=
this.code=null},ea=function(T){this.error=new y;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=T},aa=function(T){this.globalId=null;this.success=!0;this.objectId=this.uniqueId=T};const I=new Set;let F;d.createFeatureEditErrorResult=w;d.createFeatureEditSuccessResult=function(T){return new aa(T)};d.loadGeometryEngine=g;d.loadGeometryEngineForSimplify=function(T,e){return l.apply(this,arguments)};d.mixAttributes=function(T,e,u,v,K=!1,p){I.clear();for(const Y in u){const W=
T.get(Y);if(W){var q=u[Y];{var B=W;var Q=q;let ja=Q;"string"===typeof Q&&r.isNumericField(B)?ja=parseFloat(Q):null!=Q&&r.isStringField(B)&&"string"!==typeof Q&&(ja=String(Q));B=r.sanitizeNullFieldValue(ja)}B!==q&&p&&p.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:W,originalValue:q,sanitizedValue:B}});I.add(W.name);if(W&&(K||W.editable)){if(q=r.validateFieldValue(W,B))return w(r.validationErrorToString(q,W,B));e[W.name]=B}}}if(v)for(const Y of v)if(!I.has(Y.name))return w(`missing required field "${Y.name}"`);
return null};d.simplify=function(T,e){if(!T||!fa.isValid(e))return T;if("rings"in T||"paths"in T){if(!F)throw new TypeError("geometry engine not loaded");return F.simplify(e,T)}return T};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(t,d){d=new d.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",
esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});t.kebabDict=d;Object.defineProperty(t,"__esModule",{value:!0})})},"*noref":1}});
define("../../../../chunks/_rollupPluginBabelHelpers ../../../../request ../../../../core/Error ../../../../core/maybe ../../../../geometry/support/jsonUtils ../../../../geometry/support/spatialReferenceUtils ../../featureConversionUtils ../../data/FeatureStore ../../data/projectionSupport ../../data/QueryEngine ./geojson ../support/clientSideDefaults ../support/sourceUtils ../../../support/FieldsIndex ../../../support/fieldType ../../../support/fieldUtils".split(" "),function(t,d,ha,fa,r,w,g,J,l,
y,ea,aa,I,F,T,e){const u={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,
supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};return function(){function v(){this._queryEngine=null}var K=v.prototype;K.destroy=function(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy();this._queryEngine=this._requiredFields=this._fieldsIndex=this._createDefaultAttributes=null};K.load=function(){var p=t._asyncToGenerator(function*(q){var B=[];yield this._checkProjection(q.spatialReference);var Q=null;q.url&&(Q=(yield d(q.url,
{responseType:"json"})).data,yield ea.validateGeoJSON(Q));const Y=ea.inferLayerProperties(Q,{geometryType:q.geometryType}),W=q.fields||Y.fields||[],ja=null!=q.hasZ?q.hasZ:Y.hasZ,E=Y.geometryType,G=q.objectIdField||("number"===Y.objectIdFieldType?Y.objectIdFieldName:"OBJECTID")||"OBJECTID",O=q.spatialReference||w.WGS84;q=q.timeInfo;"string"===Y.objectIdFieldType&&B.push({name:"geojson-layer:unsupported-id-type",message:"Feature ids are of type string and can't be honored."});W===Y.fields&&0<Y.unknownFields.length&&
B.push({name:"geojson-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:Y.unknownFields}});if(G){let n=null;W.some(D=>D.name===G?(n=D,!0):!1)?(n.type="esriFieldTypeOID",n.editable=!1,n.nullable=!1):W.unshift({alias:G,name:G,type:"esriFieldTypeOID",editable:!1,nullable:!1})}for(var L of W){null==L.name&&(L.name=L.alias);null==L.alias&&(L.alias=L.name);if(!L.name)throw new ha("geojson-layer:invalid-field-name","field name is missing",
{field:L});L.name===G&&(L.type="esriFieldTypeOID");if(-1===T.kebabDict.jsonValues.indexOf(L.type))throw new ha("geojson-layer:invalid-field-type",`invalid type for field "${L.name}"`,{field:L});}L={};this._requiredFields=[];for(var m of W)if("esriFieldTypeOID"!==m.type&&"esriFieldTypeGlobalID"!==m.type){m.editable=null==m.editable?!0:!!m.editable;m.nullable=null==m.nullable?!0:!!m.nullable;const n=e.getFieldDefaultValue(m);m.nullable||void 0!==n?L[m.name]=n:this._requiredFields.push(m)}this._fieldsIndex=
new F(W);q&&(q.startTimeField&&((m=this._fieldsIndex.get(q.startTimeField))?(q.startTimeField=m.name,m.type="esriFieldTypeDate"):q.startTimeField=null),q.endTimeField&&((m=this._fieldsIndex.get(q.endTimeField))?(q.endTimeField=m.name,m.type="esriFieldTypeDate"):q.endTimeField=null),q.trackIdField&&((m=this._fieldsIndex.get(q.trackIdField))?q.trackIdField=m.name:(q.trackIdField=null,B.push({name:"geojson-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:q}}))),
q.startTimeField||q.endTimeField||(B.push({name:"geojson-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:q}}),q=null));m=E?aa.createDrawingInfo(E):null;B={warnings:B,featureErrors:[],layerDefinition:{...u,drawingInfo:m,templates:aa.createDefaultTemplate(L),extent:null,geometryType:E,objectIdField:G,fields:W,hasZ:!!ja,timeInfo:q}};this._queryEngine=new y["default"]({fields:W,geometryType:E,hasM:!1,hasZ:ja,objectIdField:G,spatialReference:O,timeInfo:q,
featureStore:new J({geometryType:E,hasM:!1,hasZ:ja}),cacheSpatialQueries:!0});this._createDefaultAttributes=aa.createDefaultAttributesFunction(L,G);this._nextObjectId=Y.maxObjectId+1;Q=ea.createOptimizedFeatures(Q,{geometryType:E,hasZ:ja,objectIdField:"number"===Y.objectIdFieldType?G:null});if(!w.equals(O,w.WGS84))for(const n of Q)fa.isSome(n.geometry)&&(n.geometry=g.convertFromGeometry(l.project(g.convertToGeometry(n.geometry,E,ja,!1),w.WGS84,O)));this._loadInitialFeatures(B,Q);return B});return function(q){return p.apply(this,
arguments)}}();K.applyEdits=function(){var p=t._asyncToGenerator(function*(q){const {spatialReference:B,geometryType:Q}=this._queryEngine;yield Promise.all([I.loadGeometryEngineForSimplify(B,Q),l.checkProjectionSupport(q.adds,B),l.checkProjectionSupport(q.updates,B)]);return this._applyEdits(q)});return function(q){return p.apply(this,arguments)}}();K.queryFeatures=function(p={},q={}){return this._queryEngine.executeQuery(p,q.signal)};K.queryFeatureCount=function(p={},q={}){return this._queryEngine.executeQueryForCount(p,
q.signal)};K.queryObjectIds=function(p={},q={}){return this._queryEngine.executeQueryForIds(p,q.signal)};K.queryExtent=function(p={},q={}){return this._queryEngine.executeQueryForExtent(p,q.signal)};K.querySnapping=function(p,q={}){return this._queryEngine.executeQueryForSnapping(p,q.signal)};K._loadInitialFeatures=function(p,q){const {featureStore:B,objectIdField:Q}=this._queryEngine,Y=[];for(const W of q){q=this._createDefaultAttributes();const ja=I.mixAttributes(this._fieldsIndex,q,W.attributes,
this._requiredFields,!0,p.warnings);ja?p.featureErrors.push(ja):(this._assignObjectId(q,W.attributes,!0),W.attributes=q,W.objectId=q[Q],Y.push(W))}B.addMany(Y);p.layerDefinition.extent=this._queryEngine.fullExtent;if(p.layerDefinition.timeInfo){const {start:W,end:ja}=this._queryEngine.timeExtent;p.layerDefinition.timeInfo.timeExtent=[W,ja]}return p};K._applyEdits=function(p){const {adds:q,updates:B,deletes:Q}=p;p={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};q&&q.length&&this._applyAddEdits(p,
q);B&&B.length&&this._applyUpdateEdits(p,B);if(Q&&Q.length){for(const Y of Q)p.deleteResults.push(I.createFeatureEditSuccessResult(Y));this._queryEngine.featureStore.removeManyById(Q)}return{fullExtent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent,featureEditResults:p}};K._applyAddEdits=function(p,q){const {addResults:B}=p,{geometryType:Q,hasM:Y,hasZ:W,objectIdField:ja,spatialReference:E,featureStore:G}=this._queryEngine,O=[];for(const L of q){if(L.geometry&&Q!==r.getJsonType(L.geometry)){B.push(I.createFeatureEditErrorResult("Incorrect geometry type."));
continue}q=this._createDefaultAttributes();const m=I.mixAttributes(this._fieldsIndex,q,L.attributes,this._requiredFields);m?B.push(m):(this._assignObjectId(q,L.attributes),L.attributes=q,null!=L.uid&&(p.uidToObjectId[L.uid]=L.attributes[ja]),fa.isSome(L.geometry)&&(L.geometry=l.project(I.simplify(L.geometry,E),L.geometry.spatialReference,E)),O.push(L),B.push(I.createFeatureEditSuccessResult(L.attributes[ja])))}G.addMany(g.convertFromFeatures([],O,Q,W,Y,ja))};K._applyUpdateEdits=function({updateResults:p},
q){const {geometryType:B,hasM:Q,hasZ:Y,objectIdField:W,spatialReference:ja,featureStore:E}=this._queryEngine;for(const G of q){const {attributes:O,geometry:L}=G;q=O&&O[W];if(null==q){p.push(I.createFeatureEditErrorResult(`Identifier field ${W} missing`));continue}if(!E.has(q)){p.push(I.createFeatureEditErrorResult(`Feature with object id ${q} missing`));continue}const m=g.convertToFeature(E.getFeature(q),B,Y,Q);if(fa.isSome(L)){if(B!==r.getJsonType(L)){p.push(I.createFeatureEditErrorResult("Incorrect geometry type."));
continue}m.geometry=l.project(I.simplify(L,ja),L.spatialReference,ja)}if(O){const n=I.mixAttributes(this._fieldsIndex,m.attributes,O,this._requiredFields);if(n){p.push(n);continue}}E.add(g.convertFromFeature(m,B,Y,Q,W));p.push(I.createFeatureEditSuccessResult(q))}};K._assignObjectId=function(p,q,B=!1){const Q=this._queryEngine.objectIdField;B?isFinite(q[Q])?p[Q]=q[Q]:p[Q]=this._nextObjectId++:p[Q]=this._nextObjectId++};K._checkProjection=function(){var p=t._asyncToGenerator(function*(q){try{yield l.checkProjectionSupport(w.WGS84,
q)}catch{throw new ha("geojson-layer","Projection not supported");}});return function(q){return p.apply(this,arguments)}}();return v}()});