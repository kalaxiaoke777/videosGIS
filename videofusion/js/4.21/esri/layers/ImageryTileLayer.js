// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.21/esri/copyright.txt for details.
//>>built
require({cache:{"esri/rasterRenderers":function(){define("exports ./core/Warning ./renderers/ClassBreaksRenderer ./renderers/RasterColormapRenderer ./renderers/RasterShadedReliefRenderer ./renderers/RasterStretchRenderer ./renderers/UniqueValueRenderer ./renderers/VectorFieldRenderer".split(" "),function(U,t,E,J,A,N,T,S){function P(B,H){if(!B)return null;if("classBreaks"===B.type&&B.classificationMethod){var h=B.authoringInfo||{classificationMethod:""};h.classificationMethod=B.classificationMethod;
B.authoringInfo=h}h=B?q[B.type]||null:null;if(h)return h=new h,h.read(B,H),h;H&&H.messages&&B&&H.messages.push(new t("renderer:unsupported","Renderers of type '"+(B.type||"unknown")+"' are not supported",{definition:B,context:H}));return null}const I={key:"type",base:null,typeMap:{"unique-value":T,"class-breaks":E,"raster-colormap":J,"raster-stretch":N,"vector-field":S,"raster-shaded-relief":A}},D={...I,typeMap:{...I.typeMap}};delete D.typeMap["vector-field"];const q={uniqueValue:T,classBreaks:E,
rasterStretch:N,rasterColormap:J,vectorField:S,rasterShadedRelief:A};U.ClassBreaksRenderer=E;U.RasterColormapRenderer=J;U.RasterShadedReliefRenderer=A;U.RasterStretchRenderer=N;U.UniqueValueRenderer=T;U.VectorFieldRenderer=S;U.fromJSON=function(B,H){return P(B,H)};U.rasterRendererTypes=I;U.read=P;U.websceneRasterRendererTypes=D;Object.defineProperty(U,"__esModule",{value:!0})})},"esri/renderers/RasterColormapRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./support/ColormapInfo ./support/colorRampUtils".split(" "),
function(U,t,E,J,A,N,T,S,P,I,D){var q;E=q=function(B){function H(v){v=B.call(this,v)||this;v.colormapInfos=null;v.type="raster-colormap";return v}U._inheritsLoose(H,B);H.createFromColormap=function(v,k){if(!v)return null;const y=5===v[0].length;v=[...v].sort(F=>F[0][0]-F[1][0]).map(F=>{var w;return I.fromJSON({value:F[0],color:y?F.slice(1,5):F.slice(1,4).concat([255]),label:k?null!=(w=k[F[0]])?w:"":F[0]})});return new q({colormapInfos:v})};H.createFromColorramp=function(v){v=D.convertColorRampToColormap(v,
256);return q.createFromColormap(v)};var h=H.prototype;h.clone=function(){return new q({colormapInfos:this.colormapInfos.map(v=>v.toJSON())})};h.extractColormap=function(){return this.colormapInfos.map(v=>[v.value,v.color.r,v.color.g,v.color.b,1<v.color.a?v.color.a:255*v.color.a&255]).sort((v,k)=>v[0]-k[0])};return H}(E.JSONSupport);t.__decorate([J.property({type:[I],json:{write:!0}})],E.prototype,"colormapInfos",void 0);t.__decorate([S.enumeration({rasterColormap:"raster-colormap"})],E.prototype,
"type",void 0);return E=q=t.__decorate([P.subclass("esri.renderers.RasterColormapRenderer")],E)})},"esri/renderers/support/ColormapInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),function(U,t,E,J,A,N,T,S,P){J=function(I){function D(){var q=I.apply(this,
arguments)||this;q.value=null;q.label=null;q.color=null;return q}U._inheritsLoose(D,I);return D}(J.JSONSupport);t.__decorate([A.property({type:Number,json:{write:!0}})],J.prototype,"value",void 0);t.__decorate([A.property({type:String,json:{write:!0}})],J.prototype,"label",void 0);t.__decorate([A.property({type:E,json:{type:[T.Integer],write:!0}})],J.prototype,"color",void 0);return J=t.__decorate([P.subclass("esri.renderers.support.ColormapInfo")],J)})},"esri/renderers/support/colorRampUtils":function(){define(["exports",
"../../Color","../../core/colorUtils"],function(U,t,E){function J(S,P){if(!S||!P||S.length!==P.length)return!1;for(let I=0;I<S.length;I++)if(S[I]>P[I]+2||S[I]<P[I]-2)return!1;return!0}function A(S,P){if(S){P=P?P:N;var I=null,D;"algorithmic"===S.type?P.some(q=>{if(J(S.fromColor.toRgb(),q.fromColor)&&J(S.toColor.toRgb(),q.toColor))return I=q.id,!0}):"multipart"===S.type&&P.some(q=>{if(S.colorRamps&&q.colorRamps&&S.colorRamps.length===q.colorRamps.length&&(D=S.colorRamps,!q.colorRamps.some((B,H)=>{if(!J(D[H].fromColor.toRgb(),
(new t(B.fromColor)).toRgb())||!J(D[H].toColor.toRgb(),(new t(B.toColor)).toRgb()))return!0}))){if(I)return!0;I=q.id}});return I}}const N=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},
{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",
fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",
type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,
240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,
255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",
fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",
type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",
type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,
102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",
fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,
213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},
{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",
type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",
colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},
{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,
255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,
252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],T={aspect_predefined:"Aspect",blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",blueLightToDark_predefined:"Blue Light to Dark",blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",brownLightToDark_predefined:"Brown Light to Dark",brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",
brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",conditionNumber_predefined:"Condition Number",cyanToPurple_predefined:"Cyan to Purple",cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",elevation2_predefined:"Elevation #2",errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",
greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",partialSpectrum_predefined:"Partial Spectrum",partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",
precipitation_predefined:"Precipitation",prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",purpleRedBright_predefined:"Purple-Red Bright",purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",
redLightToDark_predefined:"Red Light to Dark",redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",spectrumFullBright_predefined:"Spectrum-Full Bright",spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",
surface_predefined:"Surface",temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",yellowToRed_predefined:"Yellow to Red",yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"};U.PREDEFINED_COLOR_RAMP_NAME_MAP=T;U.PREDEFINED_JSON_COLOR_RAMPS=N;U.convertColorRampToColormap=function(S,P,I=!1){if(S&&P&&!(1>
P)){var D="toJSON"in S?S.toJSON():S,q="multipart"===D.type?D.colorRamps.length:1;S=[];var B=[],H,h,v,k=0;if(1===P){var y="multipart"===D.type?D.colorRamps[0].fromColor:D.fromColor;B.push([0].concat(y));return B}for(let w=0;w<q;w++)S[w]={start:null,end:null},S[w].start=k,S[w].end=k+1/q,k=S[w].end;for(let w=0;w<P;w++){var F=w/(P-1);S.forEach((C,z)=>{if(F>=C.start&&(F<C.end||w===P-1&&z===q-1)){v=(F-C.start)/(C.end-C.start);"multipart"===D.type?(y=D.colorRamps[z].fromColor,H=D.colorRamps[z].toColor):
(y=D.fromColor,H=D.toColor);if(0===w)B.push([w].concat(y.slice(0,3)));else if(w===P-1)B.push([w].concat(H.slice(0,3)));else{var l={r:H[0],g:H[1],b:H[2]};C=v;z=E.toLAB({r:y[0],g:y[1],b:y[2]});l=E.toLAB(l);h=E.toRGB({l:z.l*(1-C)+C*l.l,a:z.a*(1-C)+C*l.a,b:z.b*(1-C)+C*l.b});B.push([w,h.r,h.g,h.b])}C=null!=y[3]?1<y[3]?y[3]/255:y[3]:1;z=null!=H[3]?1<H[3]?H[3]/255:H[3]:1;I&&B[w].push(Math.min(255,Math.round(255*(C*(1-v)+z*v))))}})}return B}};U.getColorRampId=A;U.getColorRampName=function(S){return(S=A(S))?
T[S]:null};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/core/colorUtils":function(){define(["exports"],function(U){function t(I,D){const q=[];let B,H;if(I[0].length!==D.length)throw"dimensions do not match";const h=I.length,v=I[0].length;let k=0;for(B=0;B<h;B++){for(H=k=0;H<v;H++)k+=I[B][H]*D[H];q.push(k)}return q}function E(I){I=[I.r/255,I.g/255,I.b/255].map(D=>.04045>=D?D/12.92:((D+.055)/1.055)**2.4);I=t(S,I);return{x:100*I[0],y:100*I[1],z:100*I[2]}}function J(I){I=t(P,[I.x/100,I.y/
100,I.z/100]).map(D=>Math.min(1,Math.max(.0031308>=D?12.92*D:1.055*D**(1/2.4)-.055,0)));return{r:Math.round(255*I[0]),g:Math.round(255*I[1]),b:Math.round(255*I[2])}}function A(I){I=[I.x/95.047,I.y/100,I.z/108.883].map(D=>D>(6/29)**3?D**(1/3):1/3*(29/6)**2*D+4/29);return{l:116*I[1]-16,a:500*(I[0]-I[1]),b:200*(I[1]-I[2])}}function N(I){const D=I.l;I=[(D+16)/116+I.a/500,(D+16)/116,(D+16)/116-I.b/200].map(q=>q>6/29?q**3:3*(6/29)**2*(q-4/29));return{x:95.047*I[0],y:100*I[1],z:108.883*I[2]}}function T(I){if("r"in
I&&"g"in I&&"b"in I)return I;if("l"in I&&"c"in I&&"h"in I){var D=I.c;var q=I.h;D={l:I.l,a:D*Math.cos(q),b:D*Math.sin(q)};return J(N(D))}if("l"in I&&"a"in I&&"b"in I)return J(N(I));if("x"in I&&"y"in I&&"z"in I)return J(I);if("h"in I&&"s"in I&&"v"in I){{q=(I.h+360)%360/60;D=I.v/100*255;I=I.s/100*D;const B=I*(1-Math.abs(q%2-1));switch(Math.floor(q)){case 0:q={r:I,g:B,b:0};break;case 1:q={r:B,g:I,b:0};break;case 2:q={r:0,g:I,b:B};break;case 3:q={r:0,g:B,b:I};break;case 4:q={r:B,g:0,b:I};break;case 5:case 6:q=
{r:I,g:0,b:B};break;default:q={r:0,g:0,b:0}}q.r=Math.round(q.r+D-I);q.g=Math.round(q.g+D-I);q.b=Math.round(q.b+D-I);D=q}return D}return I}const S=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],P=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];U.darken=function(I,D){I=A(E(I));I.l*=1-D;return J(N(I))};U.toHSV=function(I){if("h"in I&&"s"in I&&"v"in I)return I;var D=T(I);{I=D.r;const q=D.g,B=D.b;D=Math.max(I,q,B);const H=D-Math.min(I,q,B);I=0===H?0:D===I?(q-B)/H%6:D===
q?(B-I)/H+2:(I-q)/H+4;0>I&&(I+=6);I={h:60*I,s:100*(0===H?0:H/D),v:100/255*D}}return I};U.toLAB=function(I){return"l"in I&&"a"in I&&"b"in I?I:A(E(T(I)))};U.toLCH=function(I){if(!("l"in I&&"c"in I&&"h"in I)){{var D=A(E(T(I)));I=D.l;var q=D.a;const B=D.b;D=Math.sqrt(q*q+B*B);q=Math.atan2(B,q);q=0<q?q:q+2*Math.PI;I={l:I,c:D,h:q}}}return I};U.toRGB=T;U.toXYZ=function(I){return"x"in I&&"y"in I&&"z"in I?I:E(T(I))};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/renderers/RasterShadedReliefRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../rest/support/colorRamps".split(" "),
function(U,t,E,J,A,N,T,S,P,I,D,q){var B;E=B=function(H){function h(k){k=H.call(this,k)||this;k.altitude=45;k.azimuth=315;k.colorRamp=null;k.hillshadeType="multi-directional";k.pixelSizePower=.664;k.pixelSizeFactor=.024;k.scalingType="none";k.type="raster-shaded-relief";k.zFactor=1;return k}U._inheritsLoose(h,H);var v=h.prototype;v.readColorRamp=function(k){return q.fromJSON(k)};v.clone=function(){return new B({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,
scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,colorRamp:J.clone(this.colorRamp)})};return h}(E.JSONSupport);t.__decorate([A.property({type:Number,json:{write:!0}})],E.prototype,"altitude",void 0);t.__decorate([A.property({type:Number,json:{write:!0}})],E.prototype,"azimuth",void 0);t.__decorate([A.property({types:q.types,json:{write:!0}})],E.prototype,"colorRamp",void 0);t.__decorate([I.reader("colorRamp")],E.prototype,"readColorRamp",null);t.__decorate([A.property({type:["traditional",
"multi-directional"],json:{write:!0}})],E.prototype,"hillshadeType",void 0);t.__decorate([A.property({type:Number,json:{write:!0}})],E.prototype,"pixelSizePower",void 0);t.__decorate([A.property({type:Number,json:{write:!0}})],E.prototype,"pixelSizeFactor",void 0);t.__decorate([A.property({type:["none","adjusted"],json:{write:!0}})],E.prototype,"scalingType",void 0);t.__decorate([P.enumeration({rasterShadedRelief:"raster-shaded-relief"})],E.prototype,"type",void 0);t.__decorate([A.property({type:Number,
json:{write:!0}})],E.prototype,"zFactor",void 0);return E=B=t.__decorate([D.subclass("esri.renderers.RasterShadedReliefRenderer")],E)})},"esri/renderers/RasterStretchRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./support/stretchRendererUtils ../rest/support/colorRamps".split(" "),
function(U,t,E,J,A,N,T,S,P,I,D,q,B,H){var h;E=h=function(v){function k(F){F=v.call(this,F)||this;F.colorRamp=null;F.computeGamma=!1;F.dynamicRangeAdjustment=!1;F.gamma=[];F.maxPercent=null;F.minPercent=null;F.numberOfStandardDeviations=null;F.outputMax=null;F.outputMin=null;F.sigmoidStrengthLevel=null;F.statistics=[];F.histograms=null;F.useGamma=!1;F.stretchType="none";F.type="raster-stretch";return F}U._inheritsLoose(k,v);var y=k.prototype;y.readColorRamp=function(F){if(F)return H.fromJSON(F)};y.writeStatistics=
function(F,w,C){var z;null!=(z=F)&&z.length&&(Array.isArray(F[0])||(F=F.map(l=>[l.min,l.max,l.avg,l.stddev])),w[C]=F)};y.readStretchType=function(F,w){F=w.stretchType;"number"===typeof F&&(F=B.stretchTypeFunctionEnum[F]);return B.stretchTypeJSONDict.read(F)};y.clone=function(){return new h({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:J.clone(this.statistics),gamma:J.clone(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,
numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:J.clone(this.colorRamp),histograms:J.clone(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})};return k}(E.JSONSupport);t.__decorate([A.property({types:H.types,json:{write:!0}})],E.prototype,"colorRamp",void 0);t.__decorate([I.reader("colorRamp")],E.prototype,"readColorRamp",null);t.__decorate([A.property({type:Boolean,json:{write:!0}})],E.prototype,"computeGamma",
void 0);t.__decorate([A.property({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],E.prototype,"dynamicRangeAdjustment",void 0);t.__decorate([A.property({type:[Number],json:{write:!0}})],E.prototype,"gamma",void 0);t.__decorate([A.property({type:Number,json:{write:!0}})],E.prototype,"maxPercent",void 0);t.__decorate([A.property({type:Number,json:{write:!0}})],E.prototype,"minPercent",void 0);t.__decorate([A.property({type:Number,json:{write:!0}})],E.prototype,"numberOfStandardDeviations",
void 0);t.__decorate([A.property({type:Number,json:{read:{source:"max"},write:{target:"max"}}})],E.prototype,"outputMax",void 0);t.__decorate([A.property({type:Number,json:{read:{source:"min"},write:{target:"min"}}})],E.prototype,"outputMin",void 0);t.__decorate([A.property({type:Number,json:{write:!0}})],E.prototype,"sigmoidStrengthLevel",void 0);t.__decorate([A.property({json:{type:[[Number]],write:!0}})],E.prototype,"statistics",void 0);t.__decorate([A.property()],E.prototype,"histograms",void 0);
t.__decorate([q.writer("statistics")],E.prototype,"writeStatistics",null);t.__decorate([A.property({type:Boolean,json:{write:!0}})],E.prototype,"useGamma",void 0);t.__decorate([A.property({type:B.stretchTypeJSONDict.apiValues,json:{type:B.stretchTypeJSONDict.jsonValues,write:B.stretchTypeJSONDict.write}})],E.prototype,"stretchType",void 0);t.__decorate([I.reader("stretchType",["stretchType"])],E.prototype,"readStretchType",null);t.__decorate([P.enumeration({rasterStretch:"raster-stretch"})],E.prototype,
"type",void 0);return E=h=t.__decorate([D.subclass("esri.renderers.RasterStretchRenderer")],E)})},"esri/renderers/support/stretchRendererUtils":function(){define(["exports","../../core/jsonMap"],function(U,t){t=new t.JSONMap({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"});U.stretchTypeFunctionEnum={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"};
U.stretchTypeJSONDict=t;Object.defineProperty(U,"__esModule",{value:!0})})},"esri/renderers/VectorFieldRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../geometry ../Graphic ../symbols ../core/jsonMap ../core/JSONSupport ../core/lang ../core/maybe ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/support/normalizeUtils ../layers/support/rasterFunctions/vectorFieldUtils ./ClassBreaksRenderer ./mixins/VisualVariablesMixin ./support/ClassBreakInfo ./visualVariables/RotationVariable ./visualVariables/SizeVariable ./visualVariables/support/visualVariableUtils ../symbols/SimpleLineSymbol ../symbols/SimpleMarkerSymbol ../symbols/support/utils ../symbols/PictureMarkerSymbol ../geometry/Point".split(" "),
function(U,t,E,J,A,N,T,S,P,I,D,q,B,H,h,v,k,y,F,w,C,z,l,a,d,e,g,p,n,f){var b;const c=new Set(["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"]);J=new T.JSONMap({beaufort_ft:"beaufort-ft",beaufort_km:"beaufort-km",beaufort_kn:"beaufort-kn",beaufort_m:"beaufort-m",beaufort_mi:"beaufort-mi",classified_arrow:"classified-arrow",ocean_current_kn:"ocean-current-kn",ocean_current_m:"ocean-current-m",simple_scalar:"simple-scalar",single_arrow:"single-arrow",
wind_speed:"wind-barb"});T=new T.JSONMap({flow_from:"flow-from",flow_to:"flow-to"});S=b=function(m){function x(r){r=m.call(this,r)||this;r.attributeField="Magnitude";r.flowRepresentation="flow-from";r.rotationType="arithmetic";r.style="single-arrow";r.symbolTileSize=50;r.type="vector-field";return r}U._inheritsLoose(x,m);var L=x.prototype;L.readInputUnit=function(r,u){return c.has(r)?F.unitKebabDict.fromJSON(r):null};L.readOutputUnit=function(r,u){return c.has(r)?F.unitKebabDict.fromJSON(r):null};
L.clone=function(){return new b({attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,symbolTileSize:this.symbolTileSize,style:this.style,visualVariables:P.clone(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})};L.getGraphicsFromPixelData=function(){var r=U._asyncToGenerator(function*(u,G=!1,Q=[]){const O=[];var W=F.getUnitConversionFactor(this.inputUnit,this.outputUnit);G=G?F.convertVectorFieldData(u.pixelBlock,"vector-uv",
this.rotationType,W):F.convertVectorFieldUnit(u.pixelBlock,"vector-magdir",W);if(I.isNone(G))return O;u=u.extent;W=G.mask&&0<G.mask.length;let X=0;const K=(u.xmax-u.xmin)/G.width,M=(u.ymax-u.ymin)/G.height;for(let R=0;R<G.height;R++)for(let aa=0;aa<G.width;aa++,X++){let ca=new f({x:u.xmin+aa*K+K/2,y:u.ymax-R*M-M/2,spatialReference:u.spatialReference});ca=(yield y.normalizeCentralMeridian(ca))[0];var V=Q.some(da=>da.intersects(ca));W&&!G.mask[X]||V||(V=new A({geometry:{type:"point",x:ca.x,y:ca.y,spatialReference:u.spatialReference},
attributes:{Magnitude:G.pixels[0][X],Direction:G.pixels[1][X]}}),V.symbol=this._getVisualVariablesAppliedSymbol(V),O.push(V))}return O});return function(u){return r.apply(this,arguments)}}();L.getSymbol=function(r,u){};L.getSymbolAsync=function(){var r=U._asyncToGenerator(function*(u,G){});return function(u,G){return r.apply(this,arguments)}}();L.getSymbols=function(){return[]};L.getClassBreakInfos=function(){var r;return null==(r=this.styleRenderer)?void 0:r.classBreakInfos};L.getDefaultSymbol=function(){var r;
return null==(r=this.styleRenderer)?void 0:r.defaultSymbol};L._getDefaultSymbol=function(r){return new g({path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z",outline:new e({width:0}),size:20,color:r||new E([0,92,230])})};L._getVisualVariablesAppliedSymbol=function(r){if(r){var u=this.styleRenderer&&this.styleRenderer.getSymbol(r);u=u.clone();var G=this.sizeVariables,Q=this.rotationVariables;G&&G.length&&this.sizeVariables.forEach(O=>p.applySizesToSymbol(u,d.getAllSizes([O],r)));Q&&Q.length&&(G=r.attributes.Direction,
r.attributes.Direction="flow-from"===this.flowRepresentation?G:G+180,this.rotationVariables.forEach(O=>p.applyRotationToSymbol(u,d.getRotationAngle(O,r),O.axis)));return u}};L._createStyleRenderer=function(r){let u={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(r){case "single-arrow":u=this._createSingleArrowRenderer();break;case "beaufort-kn":u=this._createBeaufortKnotsRenderer();break;case "beaufort-m":u=this._createBeaufortMeterRenderer();break;case "beaufort-ft":u=this._createBeaufortFeetRenderer();
break;case "beaufort-mi":u=this._createBeaufortMilesRenderer();break;case "beaufort-km":u=this._createBeaufortKilometersRenderer();break;case "ocean-current-m":u=this._createCurrentMeterRenderer();break;case "ocean-current-kn":u=this._createCurrentKnotsRenderer();break;case "simple-scalar":u=this._createSimpleScalarRenderer();break;case "wind-barb":u=this._createWindBarbsRenderer();break;case "classified-arrow":u=this._createClassifiedArrowRenderer()}return new w(u)};L._createSingleArrowRenderer=
function(){return{defaultSymbol:this._getDefaultSymbol()}};L._createBeaufortKnotsRenderer=function(){const r=this._getDefaultSymbol(new E([214,47,39])),u=this._getClassBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]]);return{defaultSymbol:r,classBreakInfos:u}};L._createBeaufortMeterRenderer=function(){const r=this._getDefaultSymbol(new E([214,
47,39])),u=this._getClassBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:r,classBreakInfos:u}};L._createBeaufortFeetRenderer=function(){const r=this._getDefaultSymbol(new E([214,47,39]));var u=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];u=u.map(G=>3.28084*G);u=this._getClassBreaks(u,[[69,
117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:r,classBreakInfos:u}};L._createBeaufortMilesRenderer=function(){const r=this._getDefaultSymbol(new E([214,47,39]));var u=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];u=u.map(G=>2.23694*G);u=this._getClassBreaks(u,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],
[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:r,classBreakInfos:u}};L._createBeaufortKilometersRenderer=function(){const r=this._getDefaultSymbol(new E([214,47,39]));var u=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];u=u.map(G=>3.6*G);u=this._getClassBreaks(u,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:r,
classBreakInfos:u}};L._createCurrentMeterRenderer=function(){const r=this._getDefaultSymbol(new E([177,177,177])),u=this._getClassBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]]);return{defaultSymbol:r,classBreakInfos:u}};L._createCurrentKnotsRenderer=function(){const r=this._getDefaultSymbol(new E([177,177,177])),u=this._getClassBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]]);
return{defaultSymbol:r,classBreakInfos:u}};L._createClassifiedArrowRenderer=function(){var r;const u=this._getDefaultSymbol(new E([56,168,0]));var G=[0,1E-6,3.5,7,10.5,14];if(null!=(r=this.sizeVariables)&&r.length){const Q=this.sizeVariables[0].minDataValue;r=this.sizeVariables[0].maxDataValue;if(Q&&r){const O=(r-Q)/5;G=Array.from(Array(6).keys()).map(W=>Q+O*W)}}G=this._getClassBreaks(G,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]]);return{defaultSymbol:u,classBreakInfos:G}};L._createSimpleScalarRenderer=
function(){return{defaultSymbol:n.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII\x3d",
height:20,width:20,type:"esriPMS",angle:0})}};L._createWindBarbsRenderer=function(){const r=Array.from(Array(31).keys()).map(O=>5*O),u=[{range:"0-5",path:"M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"5-10",path:"M25 0 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"10-15",path:"M25 0 L25 40 L10 45 L25 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"15-20",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"20-25",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"25-30",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"30-35",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"35-40",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"40-45",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"45-50",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"50-55",path:"M25 0 L25 40 L10 40 L25 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"55-60",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"60-65",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"65-70",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"70-75",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"75-80",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"80-85",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"85-90",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"90-95",
path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"95-100",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"100-105",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"105-110",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"110-115",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"115-120",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"120-125",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"125-130",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"130-135",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"135-140",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"140-145",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"145-150",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"}],G=n.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC",
height:20,width:20,type:"esriPMS",angle:0}),Q=r.map((O,W)=>{if(W!==r.length-1)if(0===W)var X={minValue:O,maxValue:r[W+1],symbol:G};else X=n.fromJSON({type:"esriPMS",imageData:u[W].imageData,contentType:"image/svg+xml",height:32,width:32,angle:0}),X={minValue:O,maxValue:r[W+1],symbol:X};return new z(X)});return{defaultSymbol:G,classBreakInfos:Q}};L._getClassBreaks=function(r,u){return u.map((G,Q)=>new z({minValue:r[Q],maxValue:r[Q+1],symbol:this._getDefaultSymbol(new E(G))}))};U._createClass(x,[{key:"styleRenderer",
get:function(){const r=this.attributeField,u=this._createStyleRenderer(this.style);u.field=r;return u}},{key:"sizeVariables",get:function(){const r=[];if(this.visualVariables)for(var u of this.visualVariables)"size"===u.type&&r.push(u);0===r.length&&(u=new a({field:"Magnitude",minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize}),this.visualVariables?this.visualVariables.push(u):this._set("visualVariables",[u]),r.push(u));return r}},{key:"rotationVariables",get:function(){const r=[];if(this.visualVariables)for(var u of this.visualVariables)"rotation"===
u.type&&r.push(u);0===r.length&&(u=new l({field:"Direction",rotationType:this.rotationType}),this.visualVariables?this.visualVariables.push(u):this._set("visualVariables",[u]),r.push(u));return r}}]);return x}(C.VisualVariablesMixin(S.JSONSupport));t.__decorate([D.property({type:String,json:{write:!0}})],S.prototype,"attributeField",void 0);t.__decorate([D.property({type:T.apiValues,json:{type:T.jsonValues,read:{reader:T.read},write:{writer:T.write}}})],S.prototype,"flowRepresentation",void 0);t.__decorate([D.property({type:["geographic",
"arithmetic"],json:{write:!0}})],S.prototype,"rotationType",void 0);t.__decorate([D.property({type:J.apiValues,json:{type:J.jsonValues,read:{reader:J.read},write:{writer:J.write}}})],S.prototype,"style",void 0);t.__decorate([D.property({json:{write:!0}})],S.prototype,"symbolTileSize",void 0);t.__decorate([D.property({type:F.unitKebabDict.apiValues,json:{type:F.unitKebabDict.jsonValues,write:{writer:F.unitKebabDict.write}}})],S.prototype,"inputUnit",void 0);t.__decorate([v.reader("inputUnit")],S.prototype,
"readInputUnit",null);t.__decorate([D.property({type:F.unitKebabDict.apiValues,json:{type:F.unitKebabDict.jsonValues,read:{reader:F.unitKebabDict.read},write:{writer:F.unitKebabDict.write}}})],S.prototype,"outputUnit",void 0);t.__decorate([v.reader("outputUnit")],S.prototype,"readOutputUnit",null);t.__decorate([h.enumeration({vectorField:"vector-field"})],S.prototype,"type",void 0);t.__decorate([D.property({type:w})],S.prototype,"styleRenderer",null);t.__decorate([D.property({type:a})],S.prototype,
"sizeVariables",null);t.__decorate([D.property({type:l})],S.prototype,"rotationVariables",null);return S=b=t.__decorate([k.subclass("esri.renderers.VectorFieldRenderer")],S)})},"esri/layers/support/rasterFunctions/vectorFieldUtils":function(){define(["exports","../../../core/jsonMap","../../../core/maybe","../PixelBlock","./pixelUtils"],function(U,t,E,J,A){function N(l,a){return h.get(l)/h.get(a)||1}function T(l,a="geographic"){const [d,e]=l;l=Math.sqrt(d*d+e*e);let g=Math.atan2(e,d)*v;g=(360+g)%
360;"geographic"===a&&(g=(450-g)%360);return[l,g]}function S(l,a="geographic"){let d=l[1];"geographic"===a&&(d=(450-d)%360);d%=360;l=l[0];return[l*Math.cos(d/v),l*Math.sin(d/v)]}function P(l=0,a=Math.PI,d=!0){d&&(a=(2*Math.PI-a)%(2*Math.PI));var e=d?-1:1;d=5*e;const g=20*e,p=25*e;e*=2;let [n,f]=[5,0-g],[b,c]=[n+2,f],[m,x]=[b-0,c+e],[L,r]=[-5,0-p],[u,G]=[L+0,r-e];l=Math.ceil(l/5);let Q=Math.floor(l/10);l-=8*Q;const O=[],W=[];for(let fa=0;fa<l/2;fa++,Q--){0>=Q&&1===l%2&&fa===(l-1)/2&&(L=0,u=L+0,r=(r+
f)/2,G=r-e);const [ha,ka]=I(L,r,a,45);if(0<Q){const [qa,pa]=I(b,r,a,45),[ja,oa]=I(n,f,a,45);O.push(qa);O.push(pa);O.push(ha);O.push(ka);O.push(ja);O.push(oa)}else{const [qa,pa]=I(b,c,a,45),[ja,oa]=I(m,x,a,45),[ma,ia]=I(u,G,a,45);W.push(ha);W.push(ka);W.push(ma);W.push(ia);W.push(ja);W.push(oa);W.push(qa);W.push(pa)}r+=d;f+=d;c+=d;x+=d;G+=d}const [X,K]=I(5,0+g,a,45),[M,V]=I(7,0+g,a,45),[R,aa]=I(5,0-p,a,45),[ca,da]=I(7,0-p,a,45);return{pennants:O,barbs:W,shaft:[X,K,M,V,R,aa,ca,da]}}function I(l,a,d,
e=1){return[Math.sqrt(l*l+a*a)/e,(2*Math.PI+(2*Math.PI+Math.atan2(a,l))%(2*Math.PI)-d)%(2*Math.PI)]}function D(l,a,d,e){d=N(e||"knots",d);for(e=1;e<a.length;e++)if(e===a.length-1){if(l<a[e]*d)break}else if(l<=a[e]*d)break;return Math.min(e-1,a.length-2)}function q(l,a,d,e,g){let p=0;switch(a){case "beaufort_kn":p=D(l,F,"knots",d);break;case "beaufort_km":p=D(l,F,"kilometer-per-hour",d);break;case "beaufort_ft":p=D(l,F,"feet-per-second",d);break;case "beaufort_m":p=D(l,F,"meter-per-second",d);break;
case "classified_arrow":p=D(l,g,e,d);break;case "ocean_current_m":p=D(l,w,"meter-per-second",d);break;case "ocean_current_kn":p=D(l,C,"knots",d)}return p}function B(l,a){const {style:d,inputUnit:e,outputUnit:g,breakValues:p}=a;a=k.fromJSON(e);const n=k.fromJSON(g);let f=0,b=0;const {width:c,height:m,mask:x}=l,L=l.pixels[0];l=l.pixels[1];var r=x?x.filter(O=>0<O).length:c*m;const u=new Float32Array(42*r);r=new Uint32Array(15*r);for(let O=0;O<m;O++)for(let W=0;W<c;W++){var G=O*c+W;if(!x||x[O*c+W]){var Q;
const X=null!=(Q=(l[G]+360)%360/180*Math.PI)?Q:2*Math.PI*Math.random(),K=q(L[G],d,a,n,p);for(let M=0;M<y.length;M+=2)u[f++]=(W+.5)/c,u[f++]=(O+.5)/m,u[f++]=y[M],u[f++]=y[M+1]+X,u[f++]=K,u[f++]=L[G];G=7*(f/42-1);r[b++]=G;r[b++]=G+1;r[b++]=G+2;r[b++]=G+0;r[b++]=G+4;r[b++]=G+3;r[b++]=G+0;r[b++]=G+2;r[b++]=G+3;r[b++]=G+2;r[b++]=G+5;r[b++]=G+3;r[b++]=G+5;r[b++]=G+6;r[b++]=G+3}}return{vertexData:u,indexData:r}}function H(l,a){let d=0,e=0;const {width:g,height:p,mask:n}=l;l=l.pixels[0];const f=[],b=[];a=
"wind_speed"===a.style?5:Number.MAX_VALUE;for(let m=0;m<p;m++)for(let x=0;x<g;x++){var c=m*g+x;if((!n||n[m*g+x])&&l[c]<a){for(let L=0;4>L;L++)f[d++]=(x+.5)/g,f[d++]=(m+.5)/p,f[d++]=2>L?-.5:.5,f[d++]=0===L%2?-.5:.5,f[d++]=0,f[d++]=l[c];c=4*(d/24-1);b[e++]=c;b[e++]=c+1;b[e++]=c+2;b[e++]=c+1;b[e++]=c+2;b[e++]=c+3}}return{vertexData:new Float32Array(f),indexData:new Uint32Array(b)}}const h=new Map;h.set("meter-per-second",1);h.set("kilometer-per-hour",.277778);h.set("knots",.514444);h.set("feet-per-second",
.3048);h.set("mile-per-hour",.44704);const v=180/Math.PI,k=new t.JSONMap({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"}),y=function(l=0,a=0,d=Math.PI,e=!0){e&&(d=(2*Math.PI-d)%(2*Math.PI));e=e?-1:1;const g=-7*e,p=-2*e,n=-16*e,[f,b]=I(0,a+13*e,d,29),[c,m]=I(l-5.5,a+g,d,29),[x,L]=I(l+5.5,a+g,d,29),[r,u]=I(l-1.5,a+p,d,29),[G,Q]=I(l+1.5,a+p,d,29),[O,W]=I(l-1.5,a+n,d,29),[X,K]=I(l+
1.5,a+n,d,29);return[f,b,c,m,r,u,G,Q,x,L,O,W,X,K]}(0,0,0),F=[0,1,3,6,10,16,21,27,33,40,47,55,63],w=[0,.5,1,1.5,2],C=[0,.25,.5,1,1.5,2,2.5,3,3.5,4],z=[];U.convertVectorFieldData=function(l,a,d="geographic",e=1){if(!A.isValidPixelBlock(l))return l;const {pixels:g,width:p,height:n}=l;var f=p*n;const b=g[0],c=g[1],m=J.createEmptyBand(l.pixelType,f);f=J.createEmptyBand(l.pixelType,f);let x=0;for(let L=0;L<n;L++)for(let r=0;r<p;r++)"vector-uv"===a?([m[x],f[x]]=T([b[x],c[x]],d),m[x]*=e):([m[x],f[x]]=S([b[x],
c[x]],d),m[x]*=e,f[x]*=e),x++;l=new J({pixelType:l.pixelType,width:l.width,height:l.height,mask:l.mask,validPixelCount:l.validPixelCount,maskIsAlpha:l.maskIsAlpha,pixels:[m,f]});l.updateStatistics();return l};U.convertVectorFieldUnit=function(l,a,d=1){if(1===d||!A.isValidPixelBlock(l))return l;l=l.clone();const {pixels:e,width:g,height:p}=l,n=e[0],f=e[1];let b=0;for(let c=0;c<p;c++)for(let m=0;m<g;m++)"vector-uv"===a?(n[b]*=d,f[b]*=d):n[b]*=d,b++;l.updateStatistics();return l};U.createVFMesh=function(l,
a){if("simple_scalar"===a.style)var d=H(l,a);else if("wind_speed"===a.style){{if(0===z.length)for(var e=0;30>e;e++)z.push(P(5*e,0));a=k.fromJSON(a.inputUnit);a=N(a,"knots");const {width:f,height:b,mask:c}=l;e=l.pixels[0];l=l.pixels[1];const m=[],x=[];let L=0,r=0;for(let u=0;u<b;u++)for(let G=0;G<f;G++){var g=u*f+G,p=e[g]*a;if((!c||c[u*f+G])&&5<=p){const Q=null!=(d=(l[g]+360)%360/180*Math.PI)?d:2*Math.PI*Math.random(),{pennants:O,barbs:W,shaft:X}=z[Math.min(Math.floor(p/5),29)];if(0===O.length+W.length)continue;
g=m.length/6;const K=(G+.5)/f,M=(u+.5)/b;for(var n=0;n<O.length;n+=2)m[L++]=K,m[L++]=M,m[L++]=O[n],m[L++]=O[n+1]+Q,m[L++]=0,m[L++]=p;for(n=0;n<W.length;n+=2)m[L++]=K,m[L++]=M,m[L++]=W[n],m[L++]=W[n+1]+Q,m[L++]=0,m[L++]=p;for(n=0;n<X.length;n+=2)m[L++]=K,m[L++]=M,m[L++]=X[n],m[L++]=X[n+1]+Q,m[L++]=0,m[L++]=p;for(p=0;p<O.length/6;p++)x[r++]=g,x[r++]=g+1,x[r++]=g+2,g+=3;for(p=0;p<W.length/8;p++)x[r++]=g,x[r++]=g+1,x[r++]=g+2,x[r++]=g+1,x[r++]=g+2,x[r++]=g+3,g+=4;x[r++]=g+0;x[r++]=g+1;x[r++]=g+2;x[r++]=
g+1;x[r++]=g+3;x[r++]=g+2;g+=4}}d={vertexData:new Float32Array(m),indexData:new Uint32Array(x)}}}else d=B(l,a);return d};U.createVFMeshScalar=H;U.getUnitConversionFactor=N;U.sampleVectorField=function(l,a,d,e=[0,0],g=.5){const {width:p,height:n,mask:f}=l,[b,c]=l.pixels,[m,x]=e;l=Math.round((p-m)/d);e=Math.round((n-x)/d);var L=l*e;const r=new Float32Array(L),u=new Float32Array(L);L=new Uint8Array(L);a="vector-uv"===a;for(let Q=0;Q<e;Q++)for(let O=0;O<l;O++){let W=0;const X=Q*l+O,K=Math.max(0,Q*d+x),
M=Math.max(0,O*d+m),V=Math.min(n,K+d),R=Math.min(p,M+d);for(let aa=K;aa<V;aa++)for(let ca=M;ca<R;ca++){var G=aa*p+ca;if(!f||f[G]){W++;G=a?[b[G],c[G]]:[b[G],(360+c[G])%360];const [da,fa]=a?G:S(G);r[X]+=da;u[X]+=fa}}if(W>=(V-K)*(R-M)*(1-g)){L[X]=1;const [aa,ca]=T([r[X]/W,u[X]/W]);r[X]=aa;u[X]=ca}else L[X]=0,r[X]=0,u[X]=0}d=new J({width:l,height:e,pixels:[r,u],mask:L});d.updateStatistics();return d};U.snapImageToSymbolTile=function(l,a,d,e,g){if(!E.isSome(g)||!g.spatialReference.equals(l.spatialReference))return{extent:l,
width:a,height:d,resolution:l.width/a};const p=g.xmin;g=g.ymax;e=Math.max(e||0,30);a=((l.xmax-l.xmin)/Math.ceil(1/e*a)+(l.ymax-l.ymin)/Math.ceil(1/e*d))/2;l.xmin=p+Math.floor((l.xmin-p)/a)*a;l.xmax=p+Math.ceil((l.xmax-p)/a)*a;l.ymin=g+Math.floor((l.ymin-g)/a)*a;l.ymax=g+Math.ceil((l.ymax-g)/a)*a;return{extent:l,width:Math.round(l.width/a),height:Math.round(l.height/a),resolution:a}};U.unitKebabDict=k;U.uvComponentToVector=T;Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/PixelBlock":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Error ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass".split(" "),
function(U,t,E,J,A,N,T,S,P,I,D){var q;const B=T.getLogger("esri.layers.support.PixelBlock");E=q=function(H){function h(k){k=H.call(this,k)||this;k.width=null;k.height=null;k.pixelType="f32";k.validPixelCount=null;k.mask=null;k.maskIsAlpha=!1;k.pixels=null;k.statistics=null;return k}U._inheritsLoose(h,H);h.createEmptyBand=function(k,y){return new (q.getPixelArrayConstructor(k))(y)};h.getPixelArrayConstructor=function(k){let y;switch(k){case "u1":case "u2":case "u4":case "u8":y=Uint8Array;break;case "u16":y=
Uint16Array;break;case "u32":y=Uint32Array;break;case "s8":y=Int8Array;break;case "s16":y=Int16Array;break;case "s32":y=Int32Array;break;case "u32":y=Uint32Array;break;case "f32":y=Float32Array;break;case "f64":y=Float64Array;break;case "c64":case "c128":case "unknown":y=Float32Array}return y};var v=h.prototype;v.castPixelType=function(k){if(!k)return"f32";k=k.toLowerCase();-1<["u1","u2","u4"].indexOf(k)?k="u8":-1==="unknown u8 s8 u16 s16 u32 s32 f32 f64".split(" ").indexOf(k)&&(k="f32");return k};
v.getPlaneCount=function(){return this.pixels&&this.pixels.length};v.addData=function(k){if(!k.pixels||k.pixels.length!==this.width*this.height)throw new J("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]);this.statistics||(this.statistics=[]);this.pixels.push(k.pixels);this.statistics.push(k.statistics||{minValue:null,maxValue:null})};v.getAsRGBA=function(){const k=new ArrayBuffer(this.width*
this.height*4);switch(this.pixelType){case "s8":case "s16":case "u16":case "s32":case "u32":case "f32":case "f64":this._fillFromNon8Bit(k);break;default:this._fillFrom8Bit(k)}return new Uint8ClampedArray(k)};v.getAsRGBAFloat=function(){const k=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(k);return k};v.updateStatistics=function(){this.statistics=this.pixels.map(F=>this._calculateBandStatistics(F,this.mask));const k=this.mask;let y=0;if(k)for(let F=0;F<k.length;F++)k[F]&&y++;else y=
this.width*this.height;this.validPixelCount=y};v.clamp=function(k){if(k&&"f64"!==k&&"f32"!==k){switch(k){case "u8":var y=[0,255];break;case "u16":y=[0,65535];break;case "u32":y=[0,4294967295];break;case "s8":y=[-128,127];break;case "s16":y=[-32768,32767];break;case "s32":y=[-2147483648,2147483647];break;default:y=[-3.4*1E39,3.4*1E39]}var [F,w]=y;y=this.pixels;var C=this.width*this.height,z=y.length,l=[];for(let g=0;g<z;g++){var a=q.createEmptyBand(k,C);var d=y[g];for(let p=0;p<C;p++){var e=d[p];a[p]=
e>w?w:e<F?F:e}l.push(a)}this.pixels=l;this.pixelType=k}};v.extractBands=function(k){if(S.isNone(k)||0===k.length||null==this.pixels||0===this.pixels.length)return this;var y=this.pixels.length;const F=k.some(w=>w>=this.pixels.length);y=y===k.length&&!k.some((w,C)=>w!==C);return F||y?this:new q({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:k.map(w=>this.pixels[w]),statistics:this.statistics&&k.map(w=>
this.statistics[w])})};v.clone=function(){const k=new q({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});this.mask&&(k.mask=this.mask instanceof Uint8Array?new Uint8Array(this.mask):this.mask.slice(0));let y;const F=q.getPixelArrayConstructor(this.pixelType);if(this.pixels&&0<this.pixels.length){k.pixels=[];const w=this.pixels[0].slice;for(y=0;y<this.pixels.length;y++)k.pixels[y]=w?this.pixels[y].slice(0,this.pixels[y].length):
new F(this.pixels[y])}if(this.statistics)for(k.statistics=[],y=0;y<this.statistics.length;y++)k.statistics[y]=N.clone(this.statistics[y]);return k};v._fillFrom8Bit=function(k){const {mask:y,maskIsAlpha:F,pixels:w}=this;if(k&&w&&w.length){var C,z;var l=C=z=w[0];3<=w.length?(C=w[1],z=w[2]):2===w.length&&(C=w[1]);var a=new Uint32Array(k),d=this.width*this.height;if(l.length!==d)B.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");else if(y&&y.length===d)if(F)for(k=0;k<d;k++)y[k]&&
(a[k]=y[k]<<24|z[k]<<16|C[k]<<8|l[k]);else for(k=0;k<d;k++)y[k]&&(a[k]=-16777216|z[k]<<16|C[k]<<8|l[k]);else for(k=0;k<d;k++)a[k]=-16777216|z[k]<<16|C[k]<<8|l[k]}else B.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};v._fillFromNon8Bit=function(k){const {pixels:y,mask:F,statistics:w}=this;if(k&&y&&y.length){var C=this.pixelType,z=1,l=0;z=1;w&&0<w.length?(l=w.map(p=>p.minValue).reduce((p,n)=>Math.min(p,n)),z=w.map(p=>p.maxValue-p.minValue).reduce((p,n)=>Math.max(p,
n)),z=255/z):(z=255,"s8"===C?(l=-128,z=127):"u16"===C?z=65535:"s16"===C?(l=-32768,z=32767):"u32"===C?z=4294967295:"s32"===C?(l=-2147483648,z=2147483647):"f32"===C?(l=-3.4*1E39,z=3.4*1E39):"f64"===C&&(l=-Number.MAX_VALUE,z=Number.MAX_VALUE),z=255/(z-l));k=new Uint32Array(k);C=this.width*this.height;var a,d,e;var g=a=d=y[0];if(g.length!==C)return B.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(2<=y.length)if(a=y[1],3<=y.length&&(d=y[2]),F&&F.length===C)for(e=0;e<C;e++)F[e]&&
(k[e]=-16777216|(d[e]-l)*z<<16|(a[e]-l)*z<<8|(g[e]-l)*z);else for(e=0;e<C;e++)k[e]=-16777216|(d[e]-l)*z<<16|(a[e]-l)*z<<8|(g[e]-l)*z;else if(F&&F.length===C)for(e=0;e<C;e++)a=(g[e]-l)*z,F[e]&&(k[e]=-16777216|a<<16|a<<8|a);else for(e=0;e<C;e++)a=(g[e]-l)*z,k[e]=-16777216|a<<16|a<<8|a}else B.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};v._fillFrom32Bit=function(k){const {pixels:y,mask:F}=this;if(!k||!y||!y.length)return B.error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");
let w,C,z,l;w=C=z=y[0];3<=y.length?(C=y[1],z=y[2]):2===y.length&&(C=y[1]);const a=this.width*this.height;if(w.length!==a)return B.error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");let d=0;if(F&&F.length===a)for(l=0;l<a;l++)k[d++]=w[l],k[d++]=C[l],k[d++]=z[l],k[d++]=F[l]&1;else for(l=0;l<a;l++)k[d++]=w[l],k[d++]=C[l],k[d++]=z[l],k[d++]=1};v._calculateBandStatistics=function(k,y){let F=Infinity,w=-Infinity;const C=k.length;let z,l=0;if(y)for(z=0;z<C;z++)y[z]&&(l=k[z],
F=l<F?l:F,w=l>w?l:w);else for(z=0;z<C;z++)l=k[z],F=l<F?l:F,w=l>w?l:w;return{minValue:F,maxValue:w}};return h}(A.JSONSupport);t.__decorate([P.property({json:{write:!0}})],E.prototype,"width",void 0);t.__decorate([P.property({json:{write:!0}})],E.prototype,"height",void 0);t.__decorate([P.property({json:{write:!0}})],E.prototype,"pixelType",void 0);t.__decorate([I.cast("pixelType")],E.prototype,"castPixelType",null);t.__decorate([P.property({json:{write:!0}})],E.prototype,"validPixelCount",void 0);
t.__decorate([P.property({json:{write:!0}})],E.prototype,"mask",void 0);t.__decorate([P.property({json:{write:!0}})],E.prototype,"maskIsAlpha",void 0);t.__decorate([P.property({json:{write:!0}})],E.prototype,"pixels",void 0);t.__decorate([P.property({json:{write:!0}})],E.prototype,"statistics",void 0);return E=q=t.__decorate([D.subclass("esri.layers.support.PixelBlock")],E)})},"esri/layers/support/rasterFunctions/pixelUtils":function(){define(["exports","../../../core/maybe","../PixelBlock"],function(U,
t,E){function J(h){return t.isSome(h)&&"esri.layers.support.PixelBlock"===h.declaredClass&&h.pixels&&0<h.pixels.length}function A(h,v){h=Math.min(Math.max(h,-100),100);v=Math.min(Math.max(v,-100),100);let k,y;const F=new Uint8Array(256);for(k=0;256>k;k++)0<h&&100>h?y=(200*k-25500+510*v)/(2*(100-h))+128:0>=h&&-100<h?y=(200*k-25500+510*v)*(100+h)/2E4+128:100===h?(y=200*k-25500+256*(100-h)+510*v,y=0<y?255:0):-100===h&&(y=128),F[k]=255<y?255:0>y?0:y;return F}function N(h,v,k,y,F,w,C,z){return{xmin:F<=
k*h?0:F<k*h+h?F-k*h:h,ymin:w<=y*v?0:w<y*v+v?w-y*v:v,xmax:F+C<=k*h?0:F+C<k*h+h?F+C-k*h:h,ymax:w+z<=y*v?0:w+z<y*v+v?w+z-y*v:v}}function T(h,v,k,y,F,w){const {width:C,height:z}=k.block,{x:l,y:a}=k.offset,{width:d,height:e}=k.mosaic;k=N(C,z,y,F,l,a,d,e);let g=0;var p=0;if(w){var n=w.hasGCSSShiftTransform?360:w.halfWorldWidth,f=C*w.resolutionX,b=w.startX+y*f;f=b+f;b<n&&f>n?p=w.rightPadding:b>=n&&(g=w.leftMargin-w.rightPadding,p=0)}k.xmax-=p;if("number"===typeof v)for(w=k.ymin;w<k.ymax;w++)for(p=(F*z+w-
a)*d+(y*C-l)+g,n=k.xmin;n<k.xmax;n++)h[p+n]=v;else for(w=k.ymin;w<k.ymax;w++)for(p=(F*z+w-a)*d+(y*C-l)+g,n=w*C,b=k.xmin;b<k.xmax;b++)h[p+b]=v[n+b]}function S(h,v,k,y,F){var w=h.filter(f=>J(f))[0];if(t.isNone(w))return null;const C=y?y.width:v.width,z=y?y.height:v.height;var l=w.width,a=w.height;const d=v.width/l,e=v.height/a;v={offset:k||{x:0,y:0},mosaic:y||v,block:{width:l,height:a}};k=w.pixelType;y=E.getPixelArrayConstructor(k);l=w.pixels.length;w=[];for(var g=0;g<l;g++){a=new y(C*z);for(let f=
0;f<e;f++)for(let b=0;b<d;b++){var p=h[f*d+b];J(p)&&(p=p.pixels[g],T(a,p,v,b,f,F))}w.push(a)}let n;if(h.some(f=>t.isNone(f)||f.mask&&0<f.mask.length))for(n=new Uint8Array(C*z),y=0;y<e;y++)for(l=0;l<d;l++)a=h[y*d+l],(g=t.isSome(a)?a.mask:null)?T(n,g,v,l,y,F):a?T(n,1,v,l,y,F):T(n,0,v,l,y,F);h=new E({width:C,height:z,pixels:w,pixelType:k,mask:n});h.updateStatistics();return h}function P(h){if(!J(h))return null;const v=h.clone(),{width:k,height:y,pixels:F,mask:w}=h;var C=F[0];h=v.pixels[0];for(let a=
2;a<y-1;a++){const d=new Map;for(var z=a-2;z<a+2;z++)for(var l=0;4>l;l++){const e=z*k+l;q(d,C[e],w?w[e]:1)}h[a*k]=I(d);h[a*k+1]=h[a*k+2]=h[a*k];for(z=3;z<k-1;z++)l=(a-2)*k+z+1,q(d,C[l],w?w[l]:1),l=(a-1)*k+z+1,q(d,C[l],w?w[l]:1),l=a*k+z+1,q(d,C[l],w?w[l]:1),l=(a+1)*k+z+1,q(d,C[l],w?w[l]:1),l=(a-2)*k+z-3,D(d,C[l],w?w[l]:1),l=(a-1)*k+z-3,D(d,C[l],w?w[l]:1),l=a*k+z-3,D(d,C[l],w?w[l]:1),l=(a+1)*k+z-3,D(d,C[l],w?w[l]:1),h[a*k+z]=I(d);h[a*k+z+1]=h[a*k+z]}for(C=0;C<k;C++)h[C]=h[k+C]=h[2*k+C],h[(y-1)*k+C]=
h[(y-2)*k+C];v.updateStatistics();return v}function I(h){if(0===h.size)return 0;let v=0,k=-1,y=0;const F=h.keys();let w=F.next();for(;!w.done;)y=h.get(w.value),y>v&&(k=w.value,v=y),w=F.next();return k}function D(h,v,k){0!==k&&(k=h.get(v),1===k?h.delete(v):h.set(v,k-1))}function q(h,v,k){0!==k&&h.set(v,h.has(v)?h.get(v)+1:1)}function B(h,v,k){let {x:y,y:F}=v;const {width:w,height:C}=k;if(0===y&&0===F&&C===h.height&&w===h.width)return h;const {width:z,height:l}=h;v=Math.max(0,F);const a=Math.max(0,
y),d=Math.min(y+w,z),e=Math.min(F+C,l);if(0>d||0>e||!J(h))return null;y=Math.max(0,-y);F=Math.max(0,-F);const {pixels:g,mask:p}=h;var n=w*C,f=g.length;const b=[];for(var c=0;c<f;c++){var m=g[c],x=E.createEmptyBand(h.pixelType,n);for(let L=v;L<e;L++){const r=L*z;let u=(L+F-v)*w+y;for(let G=a;G<d;G++)x[u++]=m[r+G]}b.push(x)}n=new Uint8Array(n);for(f=v;f<e;f++)for(c=f*z,m=(f+F-v)*w+y,x=a;x<d;x++)n[m++]=p?p[c+x]:1;h=new E({width:k.width,height:k.height,pixelType:h.pixelType,pixels:b,mask:n});h.updateStatistics();
return h}function H(h,v=!0){if(!J(h))return null;const {pixels:k,width:y,height:F,mask:w,pixelType:C}=h;h=[];const z=Math.round(y/2),l=Math.round(F/2),a=F-1,d=y-1;for(var e=0;e<k.length;e++){var g=k[e],p=E.createEmptyBand(C,z*l),n=0;for(var f=0;f<F;f+=2)for(var b=0;b<y;b+=2){var c=g[f*y+b];if(v){var m=b===d?c:g[f*y+b+1];const x=f===a?c:g[f*y+b+y],L=b===d?x:f===a?m:g[f*y+b+y+1];p[n++]=(c+m+x+L)/4}else p[n++]=c}h.push(p)}e=null;if(w)for(e=new Uint8Array(z*l),g=0,p=0;p<F;p+=2)for(n=0;n<y;n+=2)f=w[p*
y+n],v?(b=n===d?f:w[p*y+n+1],c=p===a?f:w[p*y+n+y],m=n===d?c:p===a?b:w[p*y+n+y+1],e[g++]=f*b*c*m?1:0):e[g++]=f;return new E({width:z,height:l,pixelType:C,pixels:h,mask:e})}U.approximateTransform=function(h,v,k,y,F="nearest"){if(!J(h))return null;"majority"===F&&(h=P(h));const {pixels:w,mask:C,pixelType:z}=h,l=h.width;var a=h.height;h=E.getPixelArrayConstructor(z);var d=w.length;const {width:e,height:g}=v;v=y.cols;var p=y.rows;const n=Math.ceil(e/v-.1/v),f=Math.ceil(g/p-.1/p);y=!1;for(var b=0;b<k.length;b+=
3)-1===k[b]&&-1===k[b+1]&&-1===k[b+2]&&(y=!0);let c,m,x,L,r,u;const G=n*v;b=G*f*p;const Q=new Float32Array(b),O=new Float32Array(b);b=0;let W,X;const K="majority"===F?0:.5;for(let R=0;R<f;R++)for(let aa=0;aa<n;aa++){c=12*(R*n+aa);F=k[c];m=k[c+1];x=k[c+2];L=k[c+3];r=k[c+4];u=k[c+5];for(var M=0;M<p;M++){b=(R*p+M)*G+aa*v;X=(M+.5)/p;for(var V=0;V<M;V++)W=(V+.5)/v,Q[b+V]=Math.round((F*W+m*X+x)*l-K),O[b+V]=Math.round((L*W+r*X+u)*a-K)}c+=6;F=k[c];m=k[c+1];x=k[c+2];L=k[c+3];r=k[c+4];u=k[c+5];for(M=0;M<p;M++)for(b=
(R*p+M)*G+aa*v,X=(M+.5)/p,V=M;V<v;V++)W=(V+.5)/v,Q[b+V]=Math.round((F*W+m*X+x)*l-K),O[b+V]=Math.round((L*W+r*X+u)*a-K)}k=(R,aa)=>{for(let ca=0;ca<g;ca++){c=ca*G;for(let da=0;da<e;da++)R[ca*e+da]=0>Q[c]||0>O[c]?0:aa[Q[c]+O[c]*l],c++}};a=[];for(p=0;p<d;p++)v=new h(e*g),k(v,w[p]),a.push(v);h=new E({width:e,height:g,pixelType:z,pixels:a});if(C)h.mask=new Uint8Array(e*g),k(h.mask,C);else if(y)for(h.mask=new Uint8Array(e*g),d=0;d<e*g;d++)h.mask[d]=0>Q[d]||0>O[d]?0:1;h.updateStatistics();return h};U.clip=
B;U.colorize=function(h,v){if(!J(h)||!v&&(v.indexedColormap||v.indexed2DColormap))return h;const k=h.clone();var y=k.pixels;let F=k.mask;const w=k.width*k.height;if(1!==y.length)return h;const {indexedColormap:C,indexed2DColormap:z,offset:l,alphaSpecified:a}=v;v=C.length-1;h=0;y=y[0];const d=new Uint8Array(y.length),e=new Uint8Array(y.length),g=new Uint8Array(y.length);let p=0;if(C)if(F)for(h=0;h<w;h++)F[h]&&(p=4*(y[h]-l),p<l||p>v?F[h]=0:(d[h]=C[p],e[h]=C[p+1],g[h]=C[p+2],F[h]=C[p+3]));else{F=new Uint8Array(w);
for(h=0;h<w;h++)p=4*(y[h]-l),p<l||p>v?F[h]=0:(d[h]=C[p],e[h]=C[p+1],g[h]=C[p+2],F[h]=C[p+3]);k.mask=F}else if(F)for(h=0;h<w;h++)F[h]&&(v=z[y[h]],d[h]=v[0],e[h]=v[1],g[h]=v[2],F[h]=v[3]);else{F=new Uint8Array(w);for(h=0;h<w;h++)v=z[y[h]],d[h]=v[0],e[h]=v[1],g[h]=v[2],F[h]=v[3];k.mask=F}k.pixels=[d,e,g];k.statistics=null;k.pixelType="u8";k.maskIsAlpha=a;return k};U.createColormapLUT=function(h){if(h){var v=h.colormap;if(v&&0!==v.length){v=v.sort((a,d)=>a[0]-d[0]);var k=0;0>v[0][0]&&(k=v[0][0]);var y=
Math.max(256,v[v.length-1][0]-k+1),F=new Uint8Array(4*y),w=[],C=0,z=0,l=5===v[0].length;if(65536<y)return v.forEach(a=>{w[a[0]-k]=l?a.slice(1):a.slice(1).concat([255])}),{indexed2DColormap:w,offset:k,alphaSpecified:l};if(h.fillUnspecified)for(h=v[z],C=h[0]-k;C<y;C++)F[4*C]=h[1],F[4*C+1]=h[2],F[4*C+2]=h[3],F[4*C+3]=l?h[4]:255,C===h[0]-k&&(h=z===v.length-1?h:v[++z]);else for(C=0;C<v.length;C++)h=v[C],z=4*(h[0]-k),F[z]=h[1],F[z+1]=h[2],F[z+2]=h[3],F[z+3]=l?h[4]:255;return{indexedColormap:F,offset:k,
alphaSpecified:l}}}};U.createContrastBrightnessLUT=A;U.createHistogramEqualizationLUT=function(h,v=256){v=Math.min(v,256);const {size:k,counts:y}=h;h=new Uint8Array(k);var F=y.reduce((a,d)=>a+d/v,0);let w=0;var C=0;let z=0,l=F;for(let a=0;a<k;a++)if(z+=y[a],!(a<k-1&&z+y[a+1]<l)){for(;w<v-1&&l<z;)w++,l+=F;for(;C<=a;C++)h[C]=w;C=a+1}for(F=C;F<k;F++)h[F]=v-1;return h};U.createStretchLUT=function(h){const {minCutOff:v,maxCutOff:k,gamma:y,pixelType:F}=h,w=h.outMin||0,C=h.outMax||255;if(-1===["u8","u16",
"s8","s16"].indexOf(F))return null;const z=v.length;let l;let a=0;"s8"===F?a=-127:"s16"===F&&(a=-32767);let d=256;-1<["u16","s16"].indexOf(F)&&(d=65536);const e=[],g=C-w;for(l=0;l<z;l++)e[l]=k[l]-v[l];var p=y&&y.length>=z;const n=[];if(p)for(l=0;l<z;l++)n[l]=1<y[l]?2<y[l]?6.5+(y[l]-2)**2.5:6.5+100*(2-y[l])**4:1;let f;const b=[];let c,m,x;if(p)for(l=0;l<z;l++){x=[];for(p=0;p<d;p++)c=p+a,f=(c-v[l])/e[l],m=1,1<y[l]&&(m-=(1/g)**(f*n[l])),x[p]=c<k[l]&&c>v[l]?Math.floor(m*g*f**(1/y[l]))+w:c>=k[l]?C:w;b[l]=
x}else for(l=0;l<z;l++){x=[];for(p=0;p<d;p++)c=p+a,x[p]=c<=v[l]?w:c>=k[l]?C:Math.floor((c-v[l])/e[l]*g)+w;b[l]=x}if(null!=h.contrastOffset)for(h=A(h.contrastOffset,h.brightnessOffset),l=0;l<z;l++)for(x=b[l],p=0;p<d;p++)x[p]=h[x[p]];return{lut:b,offset:a}};U.estimateStatisticsFromHistograms=function(h){const v=[];for(let w=0;w<h.length;w++){const {min:C,max:z,size:l,counts:a}=h[w];let d=0;var k=0;for(var y=0;y<l;y++)d+=a[y],k+=y*a[y];k/=d;y=0;for(var F=0;F<l;F++)y+=a[F]*(F-k)**2;F=(z-C)/l;v.push({min:C,
max:z,avg:(k+.5)*F+C,stddev:Math.sqrt(y/(d-1))*F})}return v};U.estimateStatisticsHistograms=function(h){if(!J(h))return null;h.statistics||h.updateStatistics();const {pixels:v,mask:k,pixelType:y,statistics:F}=h;h=h.width*h.height;const w=v.length;let C,z;let l;var a;const d=[],e=[];for(l=0;l<w;l++){var g=new Uint32Array(256);var p=v[l];if("u8"===y)if(C=-.5,z=255.5,k)for(a=0;a<h;a++)k[a]&&g[p[a]]++;else for(a=0;a<h;a++)g[p[a]]++;else{C=F[l].minValue;z=F[l].maxValue;var n=(z-C)/256;var f=new Uint32Array(257);
if(k)for(a=0;a<h;a++)k[a]&&f[Math.floor((p[a]-C)/n)]++;else for(a=0;a<h;a++)f[Math.floor((p[a]-C)/n)]++;for(a=0;255>a;a++)g[a]=f[a];g[255]=f[255]+f[256]}d.push({min:C,max:z,size:256,counts:g});for(a=p=f=n=0;256>a;a++)n+=g[a],f+=a*g[a];f/=n;for(a=0;256>a;a++)p+=g[a]*(a-f)**2;g=Math.sqrt(p/(n-1));n=(z-C)/256;a=(f+.5)*n+C;g*=n;e.push({min:C,max:z,avg:a,stddev:g})}return{statistics:e,histograms:d}};U.extractBands=function(h,v){if(null==v||!v.length||!J(h))return h;const k=h.pixels.length;return v&&v.some(y=>
y>=k)||1===k&&1===v.length&&0===v[0]||k===v.length&&!v.some((y,F)=>y!==F)?h:new E({pixelType:h.pixelType,width:h.width,height:h.height,mask:h.mask,validPixelCount:h.validPixelCount,maskIsAlpha:h.maskIsAlpha,pixels:v.map(y=>h.pixels[y]),statistics:h.statistics&&v.map(y=>h.statistics[y])})};U.getClipBounds=N;U.isValidPixelBlock=J;U.lookupPixels=function(h,v){if(!J(h))return null;const {pixels:k,mask:y}=h,F=h.width*h.height,w=k.length;let C=v.lut;({offset:v}=v);let z,l;C&&1===C[0].length&&(C=k.map(()=>
C));const a=[];let d,e,g;if(v)if(null==y)for(z=0;z<w;z++){d=k[z];e=C[z];g=new Uint8Array(F);for(l=0;l<F;l++)g[l]=e[d[l]-v];a.push(g)}else for(z=0;z<w;z++){d=k[z];e=C[z];g=new Uint8Array(F);for(l=0;l<F;l++)y[l]&&(g[l]=e[d[l]-v]);a.push(g)}else if(null==y)for(z=0;z<w;z++){d=k[z];e=C[z];g=new Uint8Array(F);for(l=0;l<F;l++)g[l]=e[d[l]];a.push(g)}else for(z=0;z<w;z++){d=k[z];e=C[z];g=new Uint8Array(F);for(l=0;l<F;l++)y[l]&&(g[l]=e[d[l]]);a.push(g)}h=new E({width:h.width,height:h.height,pixels:a,mask:y,
pixelType:"u8"});h.updateStatistics();return h};U.mosaic=S;U.mosaicPixelData=function(h,v){if(!h||0===h.length)return null;var k=h.filter(e=>e.pixelBlock)[0];if(!k||t.isNone(k.pixelBlock))return null;var y=(k.extent.xmax-k.extent.xmin)/k.pixelBlock.width;const F=(k.extent.ymax-k.extent.ymin)/k.pixelBlock.height,w=.01*Math.min(y,F),C=h.sort((e,g)=>Math.abs(e.extent.ymax-g.extent.ymax)>w?g.extent.ymax-e.extent.ymax:Math.abs(e.extent.xmin-g.extent.xmin)>w?e.extent.xmin-g.extent.xmin:0);var z=Math.min.apply(null,
C.map(e=>e.extent.xmin));const l=Math.min.apply(null,C.map(e=>e.extent.ymin)),a=Math.max.apply(null,C.map(e=>e.extent.xmax)),d=Math.max.apply(null,C.map(e=>e.extent.ymax));h={x:Math.round((v.xmin-z)/y),y:Math.round((d-v.ymax)/F)};z={width:Math.round((a-z)/y),height:Math.round((d-l)/F)};y={width:Math.round((v.xmax-v.xmin)/y),height:Math.round((v.ymax-v.ymin)/F)};if(Math.round(z.width/k.pixelBlock.width)*Math.round(z.height/k.pixelBlock.height)!==C.length||0>h.x||0>h.y||z.width<y.width||z.height<y.height)return null;
k=C.map(e=>e.pixelBlock);k=S(k,z,h,y);return{extent:v,pixelBlock:k}};U.remapColor=function(h,v){if(!J(h))return null;h=h.clone();var {pixels:k}=h;const y=h.width*h.height,F=v.length,w=Math.floor(F/2),C=v[Math.floor(w)];k=k[0];let z,l,a,d,e,g,p=!1;const n=new Uint8Array(y),f=new Uint8Array(y),b=new Uint8Array(y);let c=h.mask;const m=4===v[0].mappedColor.length;c||(c=new Uint8Array(y),c.fill(m?255:1),h.mask=c);for(e=0;e<y;e++)if(c[e]){z=k[e];p=!1;g=w;l=C;a=0;for(d=F-1;1<d-a;){if(z===l.value){p=!0;break}z>
l.value?a=g:d=g;g=Math.floor((a+d)/2);l=v[Math.floor(g)]}p||(z===v[a].value?(l=v[a],p=!0):z===v[d].value?(l=v[d],p=!0):z<v[a].value?(p=!1,l=null):z>v[a].value&&(z<v[d].value?(l=v[a],p=!0):d===F-1?(p=!1,l=null):(l=v[d],p=!0)));p?(n[e]=l.mappedColor[0],f[e]=l.mappedColor[1],b[e]=l.mappedColor[2],c[e]=l.mappedColor[3]):n[e]=f[e]=b[e]=c[e]=0}h.pixels=[n,f,b];h.mask=c;h.pixelType="u8";h.maskIsAlpha=m;return h};U.resampleByMajority=P;U.setValidBoundary=function(h,v,k){if(!J(h))return null;const {width:y,
height:F}=h,w=v.x;v=v.y;const C=k.width+w;k=k.height+v;if(0>w||0>v||C>y||k>F||0===w&&0===v&&C===y&&k===F)return h;h.mask||(h.mask=new Uint8Array(y*F));const z=h.mask;for(let l=0;l<F;l++){const a=l*y;for(let d=0;d<y;d++)z[a+d]=l<v||l>=k||d<w||d>=C?0:1}h.updateStatistics();return h};U.split=function(h,v,k){if(!J(h))return null;const {width:y,height:F}=v;let {width:w,height:C}=h;const z=new Map,l={x:0,y:0};k=null==k?1:1+k;for(let a=0;a<k;a++){const d=Math.ceil(w/y),e=Math.ceil(C/F);for(let g=0;g<e;g++){l.y=
g*F;for(let p=0;p<d;p++){l.x=p*y;const n=B(h,l,v);z.set(`${a}/${g}/${p}`,n)}}a<k-1&&(h=H(h));w=Math.round(w/2);C=Math.round(C/2)}return z};U.stretch=function(h,v){if(!J(h))return null;h=h.clone();const {pixels:k,mask:y}=h,{minCutOff:F,maxCutOff:w,gamma:C}=v,z=v.outMin||0;v=v.outMax||255;const l=h.width*h.height,a=k.length;let d;let e,g,p;const n=v-z,f=[];for(d=0;d<a;d++)f[d]=w[d]-F[d];var b=C&&C.length>=a;const c=[];if(b)for(d=0;d<a;d++)c[d]=1<C[d]?2<C[d]?6.5+(C[d]-2)**2.5:6.5+100*(2-C[d])**4:1;if(b)if(null!=
y)for(b=0;b<l;b++){if(y[b])for(d=0;d<a;d++)e=k[d][b],p=(e-F[d])/f[d],g=1,1<C[d]&&(g-=(1/n)**(p*c[d])),k[d][b]=e<w[d]&&e>F[d]?Math.floor(g*n*p**(1/C[d]))+z:e>=w[d]?v:z}else for(b=0;b<l;b++)for(d=0;d<a;d++)e=k[d][b],p=(e-F[d])/f[d],g=1,1<C[d]&&(g-=(1/n)**(p*c[d])),k[d][b]=e<w[d]&&e>F[d]?Math.floor(g*n*p**(1/C[d]))+z:e>=w[d]?v:z;else if(null!=y)for(b=0;b<l;b++){if(y[b])for(d=0;d<a;d++)e=k[d][b],k[d][b]=e<w[d]&&e>F[d]?Math.floor((e-F[d])/f[d]*n)+z:e>=w[d]?v:z}else for(b=0;b<l;b++)for(d=0;d<a;d++)e=k[d][b],
k[d][b]=e<w[d]&&e>F[d]?Math.floor((e-F[d])/f[d]*n)+z:e>=w[d]?v:z;h.pixelType="u8";h.updateStatistics();return h};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/symbols/support/utils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ./gfxUtils ./Symbol3DMaterial".split(" "),function(U,t,E,J,A,N,T,S,P,I,D,q){function B(f){f=f.symbolLayers;if(!f)return null;
let b=null;f.forEach(c=>{if("object"!==c.type||null==c.resource.href)b="water"===c.type?S.unwrap(c.color):S.isSome(c.material)?S.unwrap(c.material.color):null});return b?new J(b):null}function H(f,b){if(null==b)return f;f=f.toRgba();f[3]*=b;return new J(f)}function h(f,b,c){if(f=f.symbolLayers){var m=x=>{x=S.isSome(x)?x:null;b=b||x||null!=c&&n;return H(b,c)};f.forEach(x=>{if("object"!==x.type||null==x.resource.href||b)if("water"===x.type)x.color=m(x.color);else{var L=S.isSome(x.material)?x.material.color:
null;L=m(L);S.isNone(x.material)?x.material=new q["default"]({color:L}):x.material.color=L;null!=c&&"outline"in x&&S.isSome(x.outline)&&S.isSome(x.outline.color)&&(x.outline.color=H(x.outline.color,c))}})}}function v(f,b){return k.apply(this,arguments)}function k(){k=E._asyncToGenerator(function*(f,b){(f=f.symbolLayers)&&(yield N.forEach(f,function(){var c=E._asyncToGenerator(function*(m){return y(m,b)});return function(m){return c.apply(this,arguments)}}()))});return k.apply(this,arguments)}function y(f,
b){return F.apply(this,arguments)}function F(){F=E._asyncToGenerator(function*(f,b){switch(f.type){case "extrude":f.size="number"===typeof b[2]?b[2]:0;break;case "icon":case "line":case "text":b=w(b);S.isSome(b)&&(f.size=b);break;case "path":{const c=l(b,I.ONES,[f.width,void 0,f.height]);f.width=e(b[0],f.width,1,c);f.height=e(b[2],f.height,1,c)}break;case "object":yield C(f,b)}});return F.apply(this,arguments)}function w(f){for(const b of f)if("number"===typeof b)return b;return null}function C(f,
b){return z.apply(this,arguments)}function z(){z=E._asyncToGenerator(function*(f,b){const {resourceSize:c,symbolSize:m}=yield a(f),x=l(b,c,m);f.width=e(b[0],m[0],c[0],x);f.depth=e(b[1],m[1],c[1],x);f.height=e(b[2],m[2],c[2],x)});return z.apply(this,arguments)}function l(f,b,c){for(let m=0;3>m;m++){const x=f[m];switch(x){case "symbol-value":return null!=c[m]?c[m]/b[m]:1;case "proportional":break;default:if(x&&b[m])return x/b[m]}}return 1}function a(f){return d.apply(this,arguments)}function d(){d=
E._asyncToGenerator(function*(f){const b=yield(yield new Promise(function(u,G){U(["./symbolLayerUtils"],u,G)})).computeObjectLayerResourceSize(f,10),{width:c,height:m,depth:x}=f;f=[c,x,m];let L=1;for(var r=0;3>r;r++)if(null!=f[r]){L=f[r]/b[r];break}for(r=0;3>r;r++)null==f[r]&&(f[r]=b[r]*L);return{resourceSize:b,symbolSize:f}});return d.apply(this,arguments)}function e(f,b,c,m){switch(f){case "proportional":return c*m;case "symbol-value":return null!=b?b:c;default:return f}}function g(){g=E._asyncToGenerator(function*(f,
b){if(f&&b){if(A.isSymbol3D(f))return v(f,b);if(A.isSymbol2D(f)&&(b=w(b),!S.isNone(b)))switch(f.type){case "simple-marker":f.size=b;break;case "picture-marker":{const c=f.width/f.height;1<c?(f.width=b,f.height=b*c):(f.width=b*c,f.height=b);break}case "simple-line":f.width=b;break;case "text":f.font.size=b}}});return g.apply(this,arguments)}const p=/\/resource\/(.*?)\.svg$/,n=new J("white");t.applyColorToSymbol=function(f,b,c){if(f&&(b||null!=c))if(b&&(b=new J(b)),A.isSymbol3D(f))h(f,b,c);else if(A.isSymbol2D(f)){if(b=
b||f.color)f.color=H(b,c);null!=c&&"outline"in f&&f.outline&&f.outline.color&&(f.outline.color=H(f.outline.color,c))}};t.applyOpacityToColor=H;t.applyRotationToSymbol=function(f,b,c){f&&null!=b&&(A.isSymbol3D(f)?(f=f.symbolLayers)&&f.forEach(m=>{if(m&&"object"===m.type)switch(c){case "tilt":m.tilt=b;break;case "roll":m.roll=b;break;default:m.heading=b}}):!A.isSymbol2D(f)||"simple-marker"!==f.type&&"picture-marker"!==f.type&&"text"!==f.type||(f.angle=b))};t.applySizesToSymbol=function(f,b){return g.apply(this,
arguments)};t.getColorFromSymbol=function(f,b){if(!f)return null;let c=null;A.isSymbol3D(f)?c=B(f):A.isSymbol2D(f)&&(c=f.color?new J(f.color):null);return c?H(c,b):null};t.getIconHref=function(f,b){b=b.resource.href;return!T("esri-canvas-svg-support")&&f.styleOrigin&&p.test(b)?b.replace(p,"/resource/png/$1.png"):b};t.getSymbolOutlineSize=function(f){if(!f)return 0;if(A.isSymbol3D(f)){{const b=f.symbolLayers&&f.symbolLayers.length;b?(f=f.symbolLayers.getItemAt(b-1),f="outline"in f?S.get(f,"outline",
"size"):void 0):f=void 0}return S.isSome(f)?f:0}return(f=D.getStroke(f))&&P.px2pt(f.width)||0};t.isVolumetricSymbol=function(f){if(S.isNone(f)||!("symbolLayers"in f)||S.isNone(f.symbolLayers))return!1;switch(f.type){case "point-3d":return f.symbolLayers.some(b=>"object"===b.type);case "line-3d":return f.symbolLayers.some(b=>"path"===b.type);case "polygon-3d":return f.symbolLayers.some(b=>"object"===b.type||"extrude"===b.type);default:return!1}};Object.defineProperty(t,"__esModule",{value:!0})})},
"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/screenUtils ./cimSymbolUtils".split(" "),function(U,t,E,J,A,N,T){function S(B){if(!B)return null;let H;switch(B.type){case "simple-fill":case "picture-fill":case "simple-marker":H=S(B.outline);break;case "simple-line":{const h=N.pt2px(B.width);"none"!==B.style&&0!==h&&(H={color:B.color,style:q(B.style),width:h,cap:B.cap,join:"miter"===B.join?N.pt2px(B.miterLimit):B.join});
break}default:H=null}return H}const P={left:"start",center:"middle",right:"end",justify:"start"},I={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},D=new A(1E3),q=function(){const B={};return function(H){if(B[H])return B[H];const h=H.replace(/-/g,"");return B[H]=h}}();E=new E([128,128,128]);U.defaultThematicColor=E;U.dekebabifyLineStyle=q;U.getFill=function(B){const H=B.style;let h=null;if(B)switch(B.type){case "simple-marker":"cross"!==H&&"x"!==H&&(h=B.color);
break;case "simple-fill":"solid"===H?h=B.color:"none"!==H&&(h={type:"pattern",x:0,y:0,src:t.getAssetUrl(`esri/symbols/patterns/${H}.png`),width:5,height:5});break;case "picture-fill":h={type:"pattern",src:B.url,width:N.pt2px(B.width)*B.xscale,height:N.pt2px(B.height)*B.yscale,x:N.pt2px(B.xoffset),y:N.pt2px(B.yoffset)};break;case "text":h=B.color;break;case "cim":h=T.getCIMSymbolColor(B)}return h};U.getPatternUrlWithColor=function(B,H){const h=B+"-"+H;return void 0!==D.get(h)?Promise.resolve(D.get(h)):
J(B,{responseType:"image"}).then(v=>{v=v.data;const k=v.naturalWidth,y=v.naturalHeight,F=document.createElement("canvas");F.width=k;F.height=y;const w=F.getContext("2d");w.fillStyle=H;w.fillRect(0,0,k,y);w.globalCompositeOperation="destination-in";w.drawImage(v,0,0);v=F.toDataURL();D.put(h,v);return v})};U.getSVGAlign=function(B){return B=(B=B.horizontalAlignment)&&P[B.toLowerCase()]||"middle"};U.getSVGBaseline=function(B){return(B=B.verticalAlignment)&&I[B.toLowerCase()]||"alphabetic"};U.getSVGBaselineShift=
function(B){return"bottom"===B.verticalAlignment?"super":null};U.getStroke=S;Object.defineProperty(U,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(U){return function(){function t(J,A){this._storage=new U.MemCacheStorage;this._storage.maxSize=J;A&&this._storage.registerRemoveFunc("",A)}var E=t.prototype;E.put=function(J,A){this._storage.put(J,A,1,1)};E.pop=function(J){return this._storage.pop(J)};E.get=function(J){return this._storage.get(J)};E.clear=function(){this._storage.clearAll()};
E.destroy=function(){this._storage.destroy()};return t}()})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(U,t,E){function J(q){q=E.toCIMSymbolJSON(q);if("CIMTextSymbol"===q.type)return q.height;let B=0;if(q.symbolLayers)for(const H of q.symbolLayers)E.isCIMMarker(H)&&H.size>B?B=H.size:E.isCIMStroke(H)&&H.width>B?B=H.width:E.isCIMFill(H);return B}function A(q,B,H,h){if("CIMTextSymbol"===q.type)q.height*=B;else{if(H&&q.effects)for(const v of q.effects)S(v,
B);if(q.symbolLayers)for(const v of q.symbolLayers)switch(v.type){case "CIMPictureMarker":case "CIMVectorMarker":N(v,B,h);break;case "CIMPictureStroke":case "CIMSolidStroke":null!=h&&h.preserveOutlineWidth||(v.width*=B);break;case "CIMPictureFill":v.height*=B;v.offsetX*=B;v.offsetY*=B;break;case "CIMHatchFill":A(v.lineSymbol,B,!0,{...h,preserveOutlineWidth:!1}),v.offsetX*=B,v.offsetY*=B,v.separation*=B}}}function N(q,B,H){q.markerPlacement&&T(q.markerPlacement,B);q.offsetX*=B;q.offsetY*=B;q.anchorPoint&&
"Absolute"===q.anchorPointUnits&&(q.anchorPoint={x:q.anchorPoint.x*B,y:q.anchorPoint.y*B});q.size*=B;if("CIMVectorMarker"===q.type&&q.markerGraphics)for(const h of q.markerGraphics)q.scaleSymbolsProportionally||A(h.symbol,B,!0,H)}function T(q,B){E.isCIMMarkerStrokePlacement(q)&&(q.offset*=B);switch(q.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":q.customEndingOffset*=B;q.offsetAlongLine*=B;if(q.placementTemplate&&q.placementTemplate.length){var H=q.placementTemplate.map(h=>
h*B);q.placementTemplate=H}break;case "CIMMarkerPlacementAlongLineVariableSize":q.maxRandomOffset*=B;q.placementTemplate&&q.placementTemplate.length&&(H=q.placementTemplate.map(h=>h*B),q.placementTemplate=H);break;case "CIMMarkerPlacementOnLine":q.startPointOffset*=B;break;case "CIMMarkerPlacementAtExtremities":q.offsetAlongLine*=B;break;case "CIMMarkerPlacementAtRatioPositions":q.beginPosition*=B;q.endPosition*=B;break;case "CIMMarkerPlacementPolygonCenter":q.offsetX*=B;q.offsetY*=B;break;case "CIMMarkerPlacementInsidePolygon":q.offsetX*=
B,q.offsetY*=B,q.stepX*=B,q.stepY*=B}}function S(q,B){switch(q.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":q.width*=B;break;case "CIMGeometricEffectBuffer":q.size*=B;break;case "CIMGeometricEffectCut":q.beginCut*=B;q.endCut*=B;q.middleCut*=B;break;case "CIMGeometricEffectDashes":q.customEndingOffset*=B;q.offsetAlongLine*=B;if(q.dashTemplate&&q.dashTemplate.length){const H=q.dashTemplate.map(h=>h*B);q.dashTemplate=H}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":q.length*=
B;break;case "CIMGeometricEffectMove":q.offsetX*=B;q.offsetY*=B;break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":q.offset*=B;break;case "CIMGeometricEffectRegularPolygon":q.radius*=B;break;case "CIMGeometricEffectTaperedPolygon":q.fromWidth*=B;q.length*=B;q.toWidth*=B;break;case "CIMGeometricEffectWave":q.amplitude*=B,q.period*=B}}function P(q,B){let H;H="CIMTextSymbol"===q.type?q.symbol:q;q="CIMPolygonSymbol"===q.type;if(H.symbolLayers)for(const h of H.symbolLayers)if(!(h.colorLocked||
q&&(E.isCIMStroke(h)||E.isCIMMarker(h)&&h.markerPlacement&&E.isCIMMarkerStrokePlacement(h.markerPlacement))))switch(h.type){case "CIMVectorMarker":h.markerGraphics.forEach(v=>{P(v.symbol,B)});break;case "CIMSolidStroke":case "CIMSolidFill":I(B,h.color);break;case "CIMHatchFill":P(h.lineSymbol,B)}}function I(q,B){for(const H of q)if(H.join(".")===B.join("."))return;q.push(B)}function D(q,B){var H="CIMTextSymbol"===q.type?q.symbol:q;q="CIMPolygonSymbol"===q.type?!0:!1;if(H.symbolLayers)for(const h of H.symbolLayers)if(!(h.colorLocked||
q&&(E.isCIMStroke(h)||E.isCIMMarker(h)&&h.markerPlacement&&E.isCIMMarkerStrokePlacement(h.markerPlacement))))switch(H=B.toArray(0),h.type){case "CIMVectorMarker":h.markerGraphics.forEach(v=>{D(v.symbol,B)});break;case "CIMSolidStroke":case "CIMSolidFill":h.color=H;break;case "CIMHatchFill":D(h.lineSymbol,B)}}U.applyCIMSymbolColor=function(q,B){B instanceof t||(B=new t(B));q=E.toCIMSymbolJSON(q);D(q,B)};U.applyCIMSymbolRotation=function(q,B,H=!1){q=E.toCIMSymbolJSON(q);H&&0!==B&&(B=360-B);if("CIMTextSymbol"===
q.type)q.angle=B;else if("CIMPointSymbol"===q.type&&q.symbolLayers){H=B-(q.angle||0);for(const h of q.symbolLayers)if(E.isCIMMarker(h)){let v=h.rotation||0;v=h.rotateClockwise?v-H:v+H;h.rotation=v}q.angle=B}};U.getCIMSymbolColor=function(q){q=E.toCIMSymbolJSON(q);const B=[];P(q,B);return B.length?new t(E.fromCIMColor(B[0])):null};U.getCIMSymbolRotation=function(q,B=!1){q=E.toCIMSymbolJSON(q);return"CIMTextSymbol"===q.type||"CIMPointSymbol"===q.type?B&&0!==q.angle?360-q.angle:q.angle||0:0};U.getCIMSymbolSize=
J;U.scaleCIMMarker=N;U.scaleCIMSymbolTo=function(q,B,H){const h=E.toCIMSymbolJSON(q);q=J(q);if(0===q)if("CIMTextSymbol"===h.type)h.height=B;else{if(h.symbolLayers)for(const v of h.symbolLayers)switch(v.type){case "CIMPictureMarker":case "CIMVectorMarker":v.size=B;break;case "CIMPictureStroke":case "CIMSolidStroke":v.width=B}}else A(h,B/q,!1,H)};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/symbols/cim/utils":function(){define(["exports"],function(U){function t(E,J){"string"!==typeof E&&
(E=String(E));switch(J){case "LowerCase":return E.toLowerCase();case "Allcaps":return E.toUpperCase();default:return E}}U._adjustTextCase=t;U.colorToArray=function(E){return[E.r,E.g,E.b,E.a]};U.createLabelOverrideFunction=function(E,J,A){const N=I=>{let D=I.length;for(;D--;)if(-1===" /-,\n".indexOf(I.charAt(D)))return!1;return!0},T=[];var S=0;let P=-1;do P=J.indexOf("[",S),P>=S&&(P>S&&(S=J.substr(S,P-S),T.push([S,null,N(S)])),S=P+1,P=J.indexOf("]",S),P>=S&&(P>S&&(S=J.substr(S,P-S),(S=E[S])&&T.push([null,
S,!1])),S=P+1));while(-1!==P);S<J.length-1&&(E=J.substr(S),T.push([E,null,N(E)]));return I=>{let D="",q=null;for(const B of T){const [H,h,v]=B;if(H)v?q=H:(q&&(D+=q,q=null),D+=H);else{const k=I.attributes[h];k&&(q&&(D+=q,q=null),D+=k)}}return t(D,A)}};U.evaluateValueOrFunction=function(E,J,A,N){return"function"===typeof E?E(J,A,N):E};U.fromCIMColor=function(E){return E?{r:E[0],g:E[1],b:E[2],a:E[3]/255}:{r:0,g:0,b:0,a:0}};U.isCIMFill=function(E){return"CIMGradientFill"===E.type||"CIMHatchFill"===E.type||
"CIMPictureFill"===E.type||"CIMSolidFill"===E.type||"CIMWaterFill"===E.type};U.isCIMMarker=function(E){return"CIMVectorMarker"===E.type||"CIMPictureMarker"===E.type||"CIMBarChartMarker"===E.type||"CIMCharacterMarker"===E.type||"CIMPieChartMarker"===E.type||"CIMStackedBarChartMarker"===E.type};U.isCIMMarkerStrokePlacement=function(E){return"CIMMarkerPlacementAlongLineRandomSize"===E.type||"CIMMarkerPlacementAlongLineSameSize"===E.type||"CIMMarkerPlacementAlongLineVariableSize"===E.type||"CIMMarkerPlacementAtExtremities"===
E.type||"CIMMarkerPlacementAtMeasuredUnits"===E.type||"CIMMarkerPlacementAtRatioPositions"===E.type||"CIMMarkerPlacementOnLine"===E.type||"CIMMarkerPlacementOnVertices"===E.type};U.isCIMStroke=function(E){return"CIMGradientStroke"===E.type||"CIMPictureStroke"===E.type||"CIMSolidStroke"===E.type};U.resampleHermite=function(E,J,A,N,T,S,P=!0){const I=J/T;A/=S;const D=Math.ceil(I/2),q=Math.ceil(A/2);for(let h=0;h<S;h++)for(let v=0;v<T;v++){const k=4*(v+(P?S-h-1:h)*T);var B=0;let y=0,F=0,w=0,C=0,z=0,l=
0;const a=(h+.5)*A;for(let d=Math.floor(h*A);d<(h+1)*A;d++){var H=Math.abs(a-(d+.5))/q;const e=(v+.5)*I;H*=H;for(let g=Math.floor(v*I);g<(v+1)*I;g++){let p=Math.abs(e-(g+.5))/D;B=Math.sqrt(H+p*p);-1<=B&&1>=B&&(B=2*B*B*B-3*B*B+1,0<B&&(p=4*(g+d*J),l+=B*E[p+3],F+=B,255>E[p+3]&&(B=B*E[p+3]/250),w+=B*E[p],C+=B*E[p+1],z+=B*E[p+2],y+=B))}}N[k]=w/y;N[k+1]=C/y;N[k+2]=z/y;N[k+3]=l/F}};U.toCIMSymbolJSON=function(E){var J;return null==(J=E.data)?void 0:J.symbol};Object.defineProperty(U,"__esModule",{value:!0})})},
"esri/layers/mixins/ImageryTileMixin":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../rasterRenderers ../../request ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/aliasOf ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../../geometry/support/spatialReferenceUtils ../support/arcgisLayerUrl ../support/commonProperties ../support/DimensionalDefinition ../support/RasterJobHandler ../support/TileInfo ../support/rasterFunctions/vectorFieldUtils ../../renderers/support/rasterRendererHelper ../../renderers/support/RasterSymbolizer ../../geometry/Extent ../../geometry/SpatialReference".split(" "),
function(U,t,E,J,A,N,T,S,P,I,D,q,B,H,h,v,k,y,F,w,C,z,l,a){const d=T.getLogger("esri.layers.mixins.ImageryTileMixin");U.ImageryTileMixin=e=>{e=function(g){function p(){var f=g.apply(this,arguments)||this;f._rasterJobHandler={instance:null,refCount:0,connectionPromise:null};f.bandIds=null;f.copyright=null;f.fullExtent=null;f.interpolation="nearest";f.raster=null;f.rasterInfo=null;f.sourceJSON=null;f.spatialReference=null;f.tileInfo=null;f.symbolizer=null;return f}t._inheritsLoose(p,g);var n=p.prototype;
n.convertVectorFieldData=function(){var f=t._asyncToGenerator(function*(b,c){if(S.isNone(b))return null;const m=this._rasterJobHandler.instance,x=this.rasterInfo.dataType;return m?m.convertVectorFieldData({pixelBlock:b,dataType:x},c):w.convertVectorFieldData(b,x)});return function(b,c){return f.apply(this,arguments)}}();n.updateRenderer=function(){var f=t._asyncToGenerator(function*(){if(this.loaded&&JSON.stringify(this._cachedRendererJson)!==JSON.stringify(this.renderer)){var b=this._rasterJobHandler.instance;
b&&(this.symbolizer.rendererJSON=C.normalizeRendererJSON(this.renderer.toJSON()),this.symbolizer.bind(),yield b.updateSymbolizer(this.symbolizer),this._cachedRendererJson=this.renderer.toJSON())}});return function(){return f.apply(this,arguments)}}();n.applyRenderer=function(){var f=t._asyncToGenerator(function*(b,c){var m=b&&b.pixelBlock;if(!(S.isSome(m)&&m.pixels&&0<m.pixels.length))return null;yield this.updateRenderer();m=this._rasterJobHandler.instance;const {bandIds:x}=this;return m?yield m.symbolize({...b,
simpleStretchParams:c,bandIds:x}):this.symbolizer.symbolize({...b,simpleStretchParams:c,bandIds:x})});return function(b,c){return f.apply(this,arguments)}}();n.getTileUrl=function(f,b,c){return"RasterTileServer"===this.raster.datasetFormat?`${this.url}/tile/${f}/${b}/${c}`:""};n.getCompatibleTileInfo=function(f,b,c=!1){if(!this.loaded)return null;if(c&&f.equals(this.spatialReference))return this.tileInfo;c=H.getInfo(f);return F.create({size:256,spatialReference:f,origin:c?{x:c.origin[0],y:c.origin[1]}:
{x:b.xmin,y:b.ymax}})};n.getCompatibleFullExtent=function(f){return this.loaded?this._compatibleFullExtent&&this._compatibleFullExtent.spatialReference.equals(f)?this._compatibleFullExtent:this._compatibleFullExtent=this.raster.computeExtent(f):null};n.fetchTile=function(){var f=t._asyncToGenerator(function*(b,c,m,x={}){if(x.requestAsImageElement)return b=this.getTileUrl(b,c,m),N(b,{responseType:"image",query:{sliceId:this._sliceId,...this.refreshParameters,...this.raster.ioConfig.customFetchParameters},
signal:x.signal}).then(r=>r.data);yield this._initJobHandler();const L="raster-shaded-relief"===this.renderer.type?{cols:1,rows:1}:null;this.multidimensionalDefinition&&(x={multidimensionalDefinition:this.multidimensionalDefinition,sliceId:this._sliceId,buffer:L,...x});return this.raster.fetchTile(b,c,m,x)});return function(b,c,m){return f.apply(this,arguments)}}();n.fetchPixels=function(){var f=t._asyncToGenerator(function*(b,c,m,x){yield this._initJobHandler();this.multidimensionalDefinition&&(x=
{multidimensionalDefinition:this.multidimensionalDefinition,sliceId:this._sliceId,...x});return this.raster.fetchPixels(b,c,m,x)});return function(b,c,m,x){return f.apply(this,arguments)}}();n.identify=function(f,b={}){this.multidimensionalDefinition&&!b.multidimensionalDefinition&&(b={...b,multidimensionalDefinition:this.multidimensionalDefinition});return this.raster.identify(f,b)};n.increaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount++};n.decreaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount--;
0>=this._rasterJobHandler.refCount&&this._shutdownJobHandler()};n.hasStandardTime=function(){var f;const b=this.rasterInfo.multidimensionalInfo;if(!S.isSome(b)||"standard-time"!==this.rasterInfo.dataType)return!1;const c=null==(f=this.multidimensionalDefinition[0])?void 0:f.variableName;return b.variables.some(m=>m.name===c&&m.dimensions.some(x=>"StdTime"===x.name))};n.getStandardTimeValue=function(f){return(new Date(864E5*(f-25569))).toString()};n._configDefaultSettings=function(){this._configDefaultInterpolation();
this._configDefaultSlice();this._configDefaultRenderer()};n._initJobHandler=function(){if(null!=this._rasterJobHandler.connectionPromise)return this._rasterJobHandler.connectionPromise;const f=new y;this._rasterJobHandler.connectionPromise=f.initialize().then(()=>{this._rasterJobHandler.instance=f;this.raster.rasterJobHandler=f;this.renderer&&this.updateRenderer()}).catch(()=>null);return this._rasterJobHandler.connectionPromise};n._shutdownJobHandler=function(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy();
this._rasterJobHandler.instance=null;this._rasterJobHandler.connectionPromise=null;this._rasterJobHandler.refCount=0;this.raster.rasterJobHandler=null};n._configDefaultInterpolation=function(){if(null==this.interpolation){var f;const b=C.getDefaultInterpolation(this.rasterInfo,this.raster.tileType,null==(f=this.sourceJSON)?void 0:f.defaultResamplingMethod);this._set("interpolation",b)}};n._configDefaultSlice=function(){const {multidimensionalInfo:f}=this.raster.rasterInfo;if(S.isSome(f)){if(!this.multidimensionalDefinition){const b=
f.variables[0],c=[];b.dimensions.forEach(m=>{c.push(new k({variableName:b.name,dimensionName:m.name,values:m.hasRegularIntervals?m.extent[0]:m.values[0],isSlice:!0}))});this.multidimensionalDefinition=c}this._sliceId=this.raster.getSliceIndex(this.multidimensionalDefinition)}};n._configDefaultRenderer=function(){const f=this.raster.rasterInfo;this.bandIds||(this.bandIds=C.getDefaultBandCombination(f));if(!this.renderer){var b,c;this.renderer=C.createDefaultRenderer(f,{bandIds:this.bandIds,variableName:null==
(b=this.multidimensionalDefinition)?void 0:null==(c=b[0])?void 0:c.variableName})}this.symbolizer?(this.symbolizer.rendererJSON=C.normalizeRendererJSON(this.renderer.toJSON()),this.symbolizer.rasterInfo=f):this.symbolizer=new z({rendererJSON:this.renderer.toJSON(),rasterInfo:f});this.symbolizer.bind()||d.warn("imagery-tile-mixin","The given renderer is not supported by the layer.")};t._createClass(p,[{key:"multidimensionalDefinition",set:function(f){this.raster&&(this._sliceId=this.raster.getSliceIndex(f));
this._set("multidimensionalDefinition",f)}},{key:"url",set:function(f){this._set("url",h.sanitizeUrl(f,d))}},{key:"renderer",set:function(f){this._set("renderer",f);this.updateRenderer()}}]);return p}(e);E.__decorate([q.property()],e.prototype,"_cachedRendererJson",void 0);E.__decorate([q.property()],e.prototype,"_sliceId",void 0);E.__decorate([q.property()],e.prototype,"_compatibleFullExtent",void 0);E.__decorate([q.property()],e.prototype,"_rasterJobHandler",void 0);E.__decorate([q.property()],
e.prototype,"bandIds",void 0);E.__decorate([q.property()],e.prototype,"copyright",void 0);E.__decorate([q.property({type:l}),P.aliasOf("rasterInfo.extent")],e.prototype,"fullExtent",void 0);E.__decorate([q.property()],e.prototype,"interpolation",void 0);E.__decorate([q.property()],e.prototype,"ioConfig",void 0);E.__decorate([q.property({type:[k]})],e.prototype,"multidimensionalDefinition",null);E.__decorate([q.property()],e.prototype,"raster",void 0);E.__decorate([q.property({readOnly:!0}),P.aliasOf("raster.rasterInfo")],
e.prototype,"rasterInfo",void 0);E.__decorate([q.property()],e.prototype,"sourceJSON",void 0);E.__decorate([q.property({type:a}),P.aliasOf("rasterInfo.spatialReference")],e.prototype,"spatialReference",void 0);E.__decorate([q.property({type:F}),P.aliasOf("rasterInfo.storageInfo.tileInfo")],e.prototype,"tileInfo",void 0);E.__decorate([q.property(v.url)],e.prototype,"url",null);E.__decorate([q.property({types:A.rasterRendererTypes})],e.prototype,"renderer",null);E.__decorate([q.property()],e.prototype,
"symbolizer",void 0);return e=E.__decorate([B.subclass("esri.layers.ImageryTileMixin")],e)};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/DimensionalDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),function(U,t,E,J,
A,N,T,S,P){var I;E=I=function(D){function q(B){B=D.call(this,B)||this;B.variableName=null;B.dimensionName=null;B.values=[];B.isSlice=!1;return B}U._inheritsLoose(q,D);q.prototype.clone=function(){return new I({variableName:this.variableName,dimensionName:this.dimensionName,values:J.clone(this.values),isSlice:this.isSlice})};return q}(E.JSONSupport);t.__decorate([A.property({type:String,json:{write:!0}})],E.prototype,"variableName",void 0);t.__decorate([A.property({type:String,json:{write:!0}})],E.prototype,
"dimensionName",void 0);t.__decorate([A.property({type:N.types.array(N.types.oneOf([N.types.native(Number),N.types.array(N.types.native(Number))])),json:{write:!0}})],E.prototype,"values",void 0);t.__decorate([A.property({type:Boolean,json:{write:!0}})],E.prototype,"isSlice",void 0);return E=I=t.__decorate([P.subclass("esri.layers.support.DimensionalDefinition")],E)})},"esri/layers/support/RasterJobHandler":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/Error","../../core/maybe",
"../../core/workers/workers","./PixelBlock"],function(U,t,E,J,A){return function(){function N(){this._workerThread=null;this._destroyed=!1}var T=N.prototype;T.initialize=function(){var S=U._asyncToGenerator(function*(){const P=yield J.open("RasterWorker");this._destroyed?P.close():this._workerThread=P});return function(){return S.apply(this,arguments)}}();T.destroy=function(){this._destroyed=!0;this._workerThread&&(this._workerThread.close(),this._workerThread=null)};T.convertVectorFieldData=function(){var S=
U._asyncToGenerator(function*(P,I){if(!this._workerThread)throw new t("raster-jobhandler:no-connection","no available worker connection");return(P=yield this._workerThread.invoke("convertVectorFieldData",{pixelBlock:P.pixelBlock.toJSON(),type:P.dataType},I))?new A(P):null});return function(P,I){return S.apply(this,arguments)}}();T.decode=function(){var S=U._asyncToGenerator(function*(P,I){if(!this._workerThread)throw new t("raster-jobhandler:no-connection","no available worker connection");return(P=
yield this._workerThread.invoke("decode",P,I))?new A(P):null});return function(P,I){return S.apply(this,arguments)}}();T.symbolize=function(){var S=U._asyncToGenerator(function*(P,I){if(!this._workerThread)throw new t("raster-jobhandler:no-connection","no available worker connection");P={extent:P.extent&&P.extent.toJSON(),pixelBlock:E.isSome(P.pixelBlock)&&P.pixelBlock.toJSON(),simpleStretchParams:P.simpleStretchParams,bandIds:P.bandIds};return(I=yield this._workerThread.invoke("symbolize",P,I))?
new A(I):null});return function(P,I){return S.apply(this,arguments)}}();T.updateSymbolizer=function(){var S=U._asyncToGenerator(function*(P,I){var D;if(!this._workerThread)throw new t("raster-jobhandler:no-connection","no available worker connection");const q=null==P?void 0:null==(D=P.rendererJSON)?void 0:D.histograms;yield Promise.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:P.toJSON(),histograms:q},I))});return function(P,I){return S.apply(this,arguments)}}();T.stretch=function(){var S=
U._asyncToGenerator(function*(P,I){if(!this._workerThread)throw new t("raster-jobhandler:no-connection","no available worker connection");if(null==P||!P.pixelBlock)return null;P={srcPixelBlock:P.pixelBlock.toJSON(),stretchParams:P.stretchParams};return(I=yield this._workerThread.invoke("stretch",P,I))?new A(I):null});return function(P,I){return S.apply(this,arguments)}}();T.split=function(){var S=U._asyncToGenerator(function*(P,I){if(!this._workerThread)throw new t("raster-jobhandler:no-connection",
"no available worker connection");if(null==P||!P.pixelBlock)return null;P={srcPixelBlock:P.pixelBlock.toJSON(),tileSize:P.tileSize,maximumPyramidLevel:P.maximumPyramidLevel};const D=yield this._workerThread.invoke("split",P,I);D&&D.forEach((q,B)=>{D.set(B,q?A.fromJSON(q):null)});return Promise.resolve(D)});return function(P,I){return S.apply(this,arguments)}}();T.estimateStatisticsHistograms=function(){var S=U._asyncToGenerator(function*(P,I){if(!this._workerThread)throw new t("raster-jobhandler:no-connection",
"no available worker connection");if(null==P||!P.pixelBlock)return null;P={srcPixelBlock:P.pixelBlock.toJSON()};I=yield this._workerThread.invoke("estimateStatisticsHistograms",P,I);return Promise.resolve(I)});return function(P,I){return S.apply(this,arguments)}}();T.mosaicAndTransform=function(){var S=U._asyncToGenerator(function*(P,I){var D;if(!this._workerThread)throw new t("raster-jobhandler:no-connection","no available worker connection");if(null==P||null==(D=P.srcPixelBlocks)||!D.length)return null;
P={...P,srcPixelBlocks:P.srcPixelBlocks.map(q=>E.isSome(q)?q.toJSON():null)};return(I=yield this._workerThread.invoke("mosaicAndTransform",P,I))?new A(I):null});return function(P,I){return S.apply(this,arguments)}}();return N}()})},"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/maybe ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(U,t,E,J,A,N,T,S,P,I,D,q,B,H,h,v,k,y,F){var w;E=new E.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});J=w=function(C){function z(a){a=C.call(this,a)||this;a.dpi=96;a.format=null;a.origin=null;a.minScale=0;a.maxScale=0;a.size=null;a.spatialReference=null;return a}U._inheritsLoose(z,C);z.create=function(a=
{}){const {resolutionFactor:d=1,scales:e,size:g=256,spatialReference:p=h.WebMercator,numLODs:n=24}=a;if(!k.isValid(p)){a=[];if(e)for(var f=0;f<e.length;f++){var b=e[f];a.push({level:f,scale:b,resolution:b})}else for(f=5E-4,b=n-1;0<=b;b--)a.unshift({level:b,scale:f,resolution:f}),f*=2;return new w({dpi:96,lods:a,origin:new H(0,0,p),size:[g,g],spatialReference:p})}f=k.getInfo(p);a=a.origin?new H({x:a.origin.x,y:a.origin.y,spatialReference:p}):f?new H({x:f.origin[0],y:f.origin[1],spatialReference:p}):
new H({x:0,y:0,spatialReference:p});f=1/(39.37*N.getMetersPerUnitForSR(p)*96);b=[];if(e)for(var c=0;c<e.length;c++){var m=e[c];b.push({level:c,scale:m,resolution:m*f})}else{var x=k.isGeographic(p)?512/g*5.916575275917094E8:256/g*5.91657527591555E8;c=Math.ceil(n/d);b.push({level:0,scale:x,resolution:x*f});for(m=1;m<c;m++)x/=2**d,b.push({level:m,scale:x,resolution:x*f})}return new w({dpi:96,lods:b,origin:a,size:[g,g],spatialReference:p})};var l=z.prototype;l.readOrigin=function(a,d){return H.fromJSON({spatialReference:d.spatialReference,
...a})};l.readSize=function(a,d){return[d.cols,d.rows]};l.writeSize=function(a,d){d.cols=a[0];d.rows=a[1]};l.zoomToScale=function(a){const d=this.scales;if(0>=a)return d[0];if(a>=d.length-1)return d[d.length-1];{const e=Math.floor(a);return d[e]/(d[e]/d[e+1])**(a-e)}};l.scaleToZoom=function(a){const d=this.scales,e=d.length-1;let g=0;for(;g<e;g++){const p=d[g],n=d[g+1];if(p<=a)break;if(n===a)return g+1;if(p>a&&n<a)return g+Math.log(p/a)/Math.log(p/n)}return g};l.snapScale=function(a,d=.95){a=this.scaleToZoom(a);
return a%Math.floor(a)>=d?this.zoomToScale(Math.ceil(a)):this.zoomToScale(Math.floor(a))};l.tileAt=function(a,d,e,g){var p=this.lodAt(a);if(!p)return null;let n;if("number"===typeof d)n=d,d=e;else{if(k.equals(d.spatialReference,this.spatialReference))n=d.x,d=d.y;else{g=y.project(d,this.spatialReference);if(A.isNone(g))return null;n=g.x;d=g.y}g=e}e=p.resolution*this.size[0];p=p.resolution*this.size[1];g||(g={id:null,level:0,row:0,col:0,extent:v.create()});g.level=a;g.row=Math.floor((this.origin.y-
d)/p+.001);g.col=Math.floor((n-this.origin.x)/e+.001);this.updateTileInfo(g);return g};l.updateTileInfo=function(a,d=0){var e=this.lodAt(a.level);e||1!==d||(d=this.lods[this.lods.length-1],d.level<a.level&&(e=d));if(e){var g=a.level-e.level;d=e.resolution*this.size[0]/2**g;e=e.resolution*this.size[1]/2**g;a.id=`${a.level}/${a.row}/${a.col}`;a.extent||(a.extent=v.create());a.extent[0]=this.origin.x+a.col*d;a.extent[1]=this.origin.y-(a.row+1)*e;a.extent[2]=a.extent[0]+d;a.extent[3]=a.extent[1]+e}};
l.upsampleTile=function(a){const d=this._upsampleLevels[a.level];if(!d||-1===d.parentLevel)return!1;a.level=d.parentLevel;a.row=Math.floor(a.row/d.factor+.001);a.col=Math.floor(a.col/d.factor+.001);this.updateTileInfo(a);return!0};l.getTileBounds=function(a,d){var {resolution:e}=this.lodAt(d.level);const g=e*this.size[0];e*=this.size[1];a[0]=this.origin.x+d.col*g;a[1]=this.origin.y-(d.row+1)*e;a[2]=a[0]+g;a[3]=a[1]+e;return a};l.lodAt=function(a){return this._levelToLOD&&this._levelToLOD[a]||null};
l.clone=function(){return w.fromJSON(this.write({}))};l._initializeUpsampleLevels=function(){const a=this.lods;this._upsampleLevels=[];let d=null;for(let e=0;e<a.length;e++){const g=a[e];this._upsampleLevels[g.level]={parentLevel:d?d.level:-1,factor:d?d.resolution/g.resolution:0};d=g}};U._createClass(z,[{key:"isWrappable",get:function(){const {spatialReference:a,origin:d}=this;if(a&&d){const e=k.getInfo(a);return a.isWrappable&&Math.abs(e.origin[0]-d.x)<=e.dx}return!1}},{key:"lods",set:function(a){let d=
0,e=0;const g=[];this._levelToLOD={};a&&(d=-Infinity,e=Infinity,a.forEach(p=>{g.push(p.scale);d=p.scale>d?p.scale:d;e=p.scale<e?p.scale:e;this._levelToLOD[p.level]=p}));this._set("scales",g);this._set("minScale",d);this._set("maxScale",e);this._set("lods",a);this._initializeUpsampleLevels()}}]);return z}(J.JSONSupport);t.__decorate([T.property({type:Number,json:{write:!0}})],J.prototype,"compressionQuality",void 0);t.__decorate([T.property({type:Number,json:{write:!0}})],J.prototype,"dpi",void 0);
t.__decorate([T.property({type:String,json:{read:E.read,write:E.write,origins:{"web-scene":{read:!1,write:!1}}}})],J.prototype,"format",void 0);t.__decorate([T.property({readOnly:!0})],J.prototype,"isWrappable",null);t.__decorate([T.property({type:H,json:{write:!0}})],J.prototype,"origin",void 0);t.__decorate([D.reader("origin")],J.prototype,"readOrigin",null);t.__decorate([T.property({type:[F],value:null,json:{write:!0}})],J.prototype,"lods",null);t.__decorate([T.property({readOnly:!0})],J.prototype,
"minScale",void 0);t.__decorate([T.property({readOnly:!0})],J.prototype,"maxScale",void 0);t.__decorate([T.property({readOnly:!0})],J.prototype,"scales",void 0);t.__decorate([T.property({cast:C=>Array.isArray(C)?C:"number"===typeof C?[C,C]:[256,256]})],J.prototype,"size",void 0);t.__decorate([D.reader("size",["rows","cols"])],J.prototype,"readSize",null);t.__decorate([B.writer("size",{cols:{type:P.Integer},rows:{type:P.Integer}})],J.prototype,"writeSize",null);t.__decorate([T.property({type:h,json:{write:!0}})],
J.prototype,"spatialReference",void 0);return J=w=t.__decorate([q.subclass("esri.layers.support.TileInfo")],J)})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),function(U,t,E,J,A,N,T,S){var P;E=P=function(I){function D(q){q=I.call(this,q)||
this;q.cols=null;q.level=0;q.levelValue=null;q.resolution=0;q.rows=null;q.scale=0;return q}U._inheritsLoose(D,I);D.prototype.clone=function(){return new P({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})};return D}(E.JSONSupport);t.__decorate([J.property({type:Number,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],E.prototype,"cols",void 0);t.__decorate([J.property({type:N.Integer,
json:{write:!0}})],E.prototype,"level",void 0);t.__decorate([J.property({type:String,json:{write:!0}})],E.prototype,"levelValue",void 0);t.__decorate([J.property({type:Number,json:{write:!0}})],E.prototype,"resolution",void 0);t.__decorate([J.property({type:Number,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],E.prototype,"rows",void 0);t.__decorate([J.property({type:Number,json:{write:!0}})],E.prototype,"scale",void 0);return E=P=t.__decorate([S.subclass("esri.layers.support.LOD")],
E)})},"esri/renderers/support/rasterRendererHelper":function(){define("exports ../../Color ../../rasterRenderers ../../core/maybe ../../core/unitUtils ../../layers/support/Field ../../layers/support/RasterInfo ./AuthoringInfo ./ClassBreakInfo ./colorRampUtils ./UniqueValueInfo ../../rest/support/AlgorithmicColorRamp ../../rest/support/ClassBreaksDefinition ../../rest/support/generateRendererUtils ../../rest/support/MultipartColorRamp ../RasterStretchRenderer ../UniqueValueRenderer ../RasterColormapRenderer ../RasterShadedReliefRenderer ../ClassBreaksRenderer ../VectorFieldRenderer".split(" "),
function(U,t,E,J,A,N,T,S,P,I,D,q,B,H,h,v,k,y,F,w,C){function z(K,M){var V,R,aa,ca;K=l(K,null==M?void 0:M.variableName);const {bandCount:da}=K;let {bandIds:fa,stretchType:ha}=M||{};null!=(V=fa)&&V.some(ja=>ja>=da)&&(fa=null);let ka=J.unwrap(K.statistics),qa=J.unwrap(K.histograms);if(1<da){var pa;fa=null!=(pa=fa)&&pa.length?fa:a(K);ka=null==ka?null:fa.map(ja=>ka[ja]);qa=null==qa?null:fa.map(ja=>qa[ja])}else fa=[0];null==ha&&(ha=e(K));V=!1;switch(ha){case "none":V=!1;break;case "percent-clip":V=!(null!=
(R=qa)&&R.length);break;default:V=!(null!=(aa=ka)&&aa.length)}({dataType:R}=K);R=1===(null==(ca=fa)?void 0:ca.length)&&W.has(R)?Q:null;ca=new v({stretchType:ha,dynamicRangeAdjustment:V,colorRamp:R,outputMin:0,outputMax:255,gamma:1===fa.length?[1]:[1,1,1],useGamma:!1});"percent-clip"===ha?ca.maxPercent=ca.minPercent=.25:"standard-deviation"===ha&&(ca.numberOfStandardDeviations=2);if(!V&&(J.isSome(K.multidimensionalInfo)||null!=M&&M.includeStatisticsInStretch))if("percent-clip"===ha)ca.histograms=qa;
else if("min-max"===ha||"standard-deviation"===ha)ca.statistics=ka;return ca}function l(K,M){if(null==M)return K;let V=J.unwrap(K.statistics),R=J.unwrap(K.histograms);const {multidimensionalInfo:aa}=K;if(M&&J.isSome(aa)){const {statistics:ca,histograms:da}=aa.variables.find(fa=>fa.name===M);null!=ca&&ca.length&&(V=ca);null!=da&&da.length&&(R=da)}return T.fromJSON({...K.toJSON(),statistics:V,histograms:R})}function a(K){const M=K.bandCount;if(1===M)return null;if(2===M)return[0];K=K.keyProperties&&
K.keyProperties.BandProperties;let V;if(K&&K.length===M){const {red:R,green:aa,blue:ca,nir:da}=d(K);null!=R&&null!=aa&&null!=ca?V=[R,aa,ca]:null!=da&&null!=R&&null!=aa&&(V=[da,R,aa])}!V&&3<=M&&(V=[0,1,2]);return V}function d(K){const M={};for(let ca=0;ca<K.length;ca++){var V,R=K[ca],aa=null==(V=R.BandName)?void 0:V.toLowerCase();"red"===aa?M.red=ca:"green"===aa?M.green=ca:"blue"===aa?M.blue=ca:"nearinfrared"===aa||"nearinfrared_1"===aa||"nir"===aa?M.nir=ca:R.WavelengthMax&&R.WavelengthMin&&(aa=R.WavelengthMin,
R=R.WavelengthMax,null==M.blue&&410<=aa&&480>=aa&&480<=R&&540>=R?M.blue=ca:null==M.green&&490<=aa&&560>=aa&&560<=R&&610>=R?M.green=ca:null==M.red&&595<=aa&&670>=aa&&660<=R&&730>=R?M.red=ca:null==M.nir&&700<=aa&&860>=aa&&800<=R&&950>=R&&(M.nir=ca))}return M}function e(K){let M="percent-clip";const {pixelType:V,dataType:R,histograms:aa,statistics:ca}=K;"u8"!==V||"processed"!==R&&J.isSome(aa)&&J.isSome(ca)?"u8"===V||"elevation"===R||W.has(R)?M="min-max":J.isSome(aa)?M="percent-clip":J.isSome(ca)&&(M=
M="min-max"):M="none";return M}function g(K,M,V,R){if(!f(K,M))return null;const {attributeTable:aa,statistics:ca}=K,da=p(aa,M),fa=n(aa,"red"),ha=n(aa,"green"),ka=n(aa,"blue");K=new S;const qa=[],pa=new Set,ja=!!(fa&&ha&&ka);if(J.isSome(aa))aa.features.forEach(oa=>{var ma=oa.attributes[da.name];pa.has(oa.attributes[da.name])||null==ma||(pa.add(ma),ma=!ja||"single"!==fa.type&&"double"!==fa.type||"single"!==ha.type&&"double"!==ha.type||"single"!==ka.type&&"double"!==ka.type||aa.features.some(ia=>1<ia.attributes[fa.name]||
1<ia.attributes[ha.name]||1<ia.attributes[ka.name])?1:255,qa.push(new D({value:oa.attributes[da.name],label:oa.attributes[da.name]+"",symbol:{type:"simple-fill",style:"solid",outline:null,color:ja?new t([oa.attributes[fa.name]*ma,oa.attributes[ha.name]*ma,oa.attributes[ka.name]*ma,1]):new t([0,0,0,0])}})))});else if(null!=ca&&ca[0])for(M=ca[0].min;M<=ca[0].max;M++)qa.push(new D({value:M,label:M.toString(),symbol:{type:"simple-fill",style:"solid",outline:null,color:new t([0,0,0,0])}}));qa.sort((oa,
ma)=>oa.value&&"string"===typeof oa.value.valueOf()?0:oa.value>ma.value?1:-1);if(!ja){const oa=I.convertColorRampToColormap(O,qa.length);qa.forEach((ma,ia)=>ma.symbol.color=new t(oa[ia].slice(1,4)));K.colorRamp=O}if(V||R){const oa=V||I.convertColorRampToColormap(R,qa.length).map(ma=>ma.slice(1));qa.forEach((ma,ia)=>ma.symbol.color=new t(oa[ia]));K.colorRamp=R}return new k({field:da.name,uniqueValueInfos:qa,authoringInfo:K})}function p(K,M){let V;J.isSome(K)?(V=M?K.fields.find(R=>M.toLowerCase()===
R.name.toLowerCase()):K.fields.find(R=>"string"===R.type&&-1<R.name.toLowerCase().indexOf("class")),V||(V=K.fields.find(R=>"string"===R.type))||(V=n(K,"value"))):V=new N({name:"value"});return V}function n(K,M){return J.isSome(K)?K.fields.find(V=>V.name.toLowerCase()===M):null}function f(K,M){const {attributeTable:V,bandCount:R}=K;return!J.isSome(V)&&L(K)?!0:!J.isSome(V)||1<R||M&&null==V.fields.find(aa=>aa.name.toLowerCase()===M.toLowerCase())?!1:!0}function b(K){const {bandCount:M,colormap:V}=K;
return J.isSome(V)&&V.length&&1===M}function c(K){if(!b(K))return null;let M;const {attributeTable:V,colormap:R}=K;if(J.isSome(V)){const aa=n(V,"value"),ca=p(V);"string"===ca.type&&(M={},V.features.forEach(da=>{da=da.attributes;M[da[aa.name]]=ca?da[ca.name]:da[aa.name]}))}return y.createFromColormap(J.unwrap(R),M)}function m(K){return"elevation"===K.dataType}function x(K){const {attributeTable:M,bandCount:V}=K;return 1===V&&(J.isSome(M)||J.isSome(K.histograms))}function L(K){var M,V,R;return-1<["u8",
"s8"].indexOf(K.pixelType)&&null!=(null==(M=K.statistics)?void 0:null==(V=M[0])?void 0:V.min)&&null!=(null==(R=K.statistics[0])?void 0:R.max)&&1===K.bandCount}function r(K){({dataType:K}=K);return"vector-uv"===K||"vector-magdir"===K}function u(K){if(!r(K))return null;if(J.isSome(K.statistics)&&K.statistics.length){var M="vector-uv"===K.dataType;const {min:V,max:R}=K.statistics[0];M=[{type:"size",field:"Magnitude",minSize:10,maxSize:40,minDataValue:M?Math.min(Math.abs(V),Math.abs(R)):V,maxDataValue:M?
Math.max(Math.abs(V),Math.abs(R)):R}]}K=J.isSome(K.multidimensionalInfo)?X.get(K.multidimensionalInfo.variables[0].unit):null;K=new C({visualVariables:M,inputUnit:K});K.visualVariables=[...K.sizeVariables,...K.rotationVariables];return K}function G(K){var M;return{color:null==(M=K.symbolLayers[0].material)?void 0:M.color,type:"esriSFS",style:"esriSFSSolid"}}const Q=h.fromJSON({type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,
255,0],toColor:[255,0,0]}]}),O=h.fromJSON(I.PREDEFINED_JSON_COLOR_RAMPS[0]),W=new Set("scientific standard-time vector-uv vector-magdir vector-u vector-v vector-magnitude vector-direction".split(" ")),X=new Map([["m/s","meter-per-second"],["km/h","kilometer-per-hour"],["knots","knots"],["ft/s","feet-per-second"],["mph","mile-per-hour"]]);U.createClassBreaksRenderer=function(K,M){K=l(K,null==M?void 0:M.variableName);const {attributeTable:V}=K;if(!x(K))return null;const R=J.isSome(K.histograms)?K.histograms[0]:
null;var aa=(null==M?void 0:M.numClasses)||5;const ca=new S({classificationMethod:null==M?void 0:M.classificationMethod,colorRamp:null==M?void 0:M.colorRamp});let da=(null==M?void 0:M.field)||"value";const fa=[],ha=[];if(J.isSome(V)){const qa=V.fields.find(ma=>"count"===ma.name.toLowerCase()),pa=V.fields.find(ma=>ma.name.toLowerCase()===da.toLowerCase());da=pa.name;const ja=V.features.length;let oa=0;V.features.forEach(ma=>oa+=ma.attributes[qa.name]/ja);V.features.forEach(ma=>{const ia=ma.attributes[pa.name];
ma=ma.attributes[qa.name];if(0<ma){ha.push(ma);ma=Math.max(1,Math.round(ma/ja/oa*1E3));for(let va=0;va<ma;va++)fa.push(ia)}})}else{({pixelType:K}=K);const qa=(R.max-R.min)/R.size,pa=(K=-1<K.indexOf("s")||-1<K.indexOf("u"))&&1===qa?Math.floor(R.min+.5):R.min,ja=K&&1===qa?Math.floor(R.max-.5):R.max,oa=R.size;let ma=0;R.counts.forEach(ia=>ma+=ia/oa);R.counts.forEach((ia,va)=>{if(0<ia){ha.push(ia);ia=Math.max(1,Math.round(ia/oa/ma*1E3));va=0===va?pa:va===oa-1?ja:R.min+qa*(va+.5);for(let wa=0;wa<ia;wa++)fa.push(va)}})}aa=
H.createGenerateRendererClassBreaks({values:fa,valueFrequency:ha,normalizationTotal:null,definition:new B({classificationMethod:(null==M?void 0:M.classificationMethod)||"natural-breaks",breakCount:aa,definedInterval:null==M?void 0:M.definedInterval})});let ka=null==M?void 0:M.colors;ka||(M=(null==M?void 0:M.colorRamp)||Q,ca.colorRamp=M,ka=I.convertColorRampToColormap(M,aa.classBreaks.length,!0).map(qa=>qa.slice(1)));M=aa.classBreaks.map((qa,pa)=>new P({minValue:qa.minValue,maxValue:qa.maxValue,label:qa.label,
symbol:{type:"simple-fill",color:ka[pa]}}));return new w({field:da,classBreakInfos:M,authoringInfo:ca})};U.createColorRamp=function(K){const M=[];for(let V=0;V<K.length-1;V++)M[V]=new q({algorithm:"hsv",fromColor:K[V],toColor:K[V+1]||new t({r:255,g:255,b:255,a:1})});return 2<K.length?new h({colorRamps:M}):M[0]};U.createColormapRenderer=c;U.createDefaultRenderer=function(K,M){const {attributeTable:V,colormap:R}=K;if(r(K)){var aa=u(K);if(J.isSome(aa))return aa}return J.isSome(R)&&(aa=c(K),J.isSome(aa))||
J.isSome(V)&&(aa=g(K),J.isSome(aa))?aa:z(K,M)};U.createShadedReliefRenderer=function(K,M){var V;if(!m(K))return null;({extent:K}=K);K=K.width*A.getMetersPerUnitForSR(K.spatialReference);M=null!=(V=M)?V:"multi-directional";return new F({hillshadeType:M,scalingType:5E6<K?"adjusted":"none"})};U.createStretchRenderer=z;U.createUVRenderer=g;U.createVectorFieldRenderer=u;U.getBandNames=function(K,M){var V;const R=K.keyProperties&&K.keyProperties.BandProperties;M=null!=(V=M)&&V.length?M:Array.from(Array(K.bandCount).keys());
return M.map(aa=>R&&R.length===K.bandCount?R[aa]&&R[aa].BandName||"band_"+(aa+1):"band_"+(aa+1))};U.getClassField=p;U.getDefaultBandCombination=a;U.getDefaultInterpolation=function(K,M,V){const R=["nearest","bilinear","cubic","majority"].find(aa=>aa===(null==V?void 0:V.toLowerCase()));return"Map"===M?null!=R?R:"bilinear":"standard-time"===K.dataType?null!=R?R:"nearest":"thematic"===K.dataType||K.attributeTable||K.colormap?"nearest"===R||"majority"===R?R:"nearest":null!=R?R:"bilinear"};U.getSupportedRendererTypes=
function(K){const M=["raster-stretch"];b(K)&&M.push("raster-colormap");f(K)&&M.push("unique-value");x(K)&&M.push("class-breaks");m(K)&&M.push("raster-shaded-relief");r(K)&&M.push("vector-field");return M};U.getWellKnownBandIndexes=d;U.isClassBreaksSupported=x;U.isColormapRendererSupported=b;U.isShadedReliefRendererSupported=m;U.isSingleBand8BitRasterWithStats=L;U.isUVRendererSupported=f;U.isVectorFieldRendererSupported=r;U.normalizeRendererJSON=function(K){if("uniqueValue"===K.type){var M,V=K.uniqueValueInfos,
R=V[0].symbol;null!=R&&null!=(M=R.symbolLayers)&&M.length&&(K.uniqueValueInfos=V.map(aa=>({value:aa.value,label:aa.label,symbol:aa.symbol?G(aa.symbol):null})));return K}"classBreaks"===K.type&&(M=K.classBreakInfos,R=M[0].symbol,null!=R&&null!=(V=R.symbolLayers)&&V.length&&(K.classBreakInfos=M.map(aa=>({classMinValue:aa.classMinValue,classMaxValue:aa.classMaxValue,label:aa.label,symbol:aa.symbol?G(aa.symbol):null}))));return K};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/RasterInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/SpatialReference ./RasterStorageInfo".split(" "),
function(U,t,E,J,A,N,T,S,P,I,D,q){E=function(B){function H(h){h=B.call(this,h)||this;h.attributeTable=null;h.bandCount=null;h.colormap=null;h.extent=null;h.format=void 0;h.height=null;h.width=null;h.histograms=null;h.keyProperties={};h.multidimensionalInfo=null;h.noDataValue=null;h.pixelSize=null;h.pixelType=null;h.isPseudoSpatialReference=!1;h.spatialReference=null;h.statistics=null;h.storageInfo=null;h.transform=null;return h}U._inheritsLoose(H,B);U._createClass(H,[{key:"dataType",get:function(){var h,
v,k;const y=null!=(h=null==(v=this.keyProperties)?void 0:null==(k=v.DataType)?void 0:k.toLowerCase())?h:"generic";return"stdtime"===y?"standard-time":y}},{key:"nativeExtent",get:function(){return this._get("nativeExtent")||this.extent},set:function(h){h&&this._set("nativeExtent",h)}},{key:"nativePixelSize",get:function(){if(!J.isSome(this.transform)||!this.transform.affectsPixelSize)return this.pixelSize;const h=this.nativeExtent;return{x:h.width/this.width,y:h.height/this.height}}}]);return H}(E.JSONSupport);
t.__decorate([A.property({json:{write:!0}})],E.prototype,"attributeTable",void 0);t.__decorate([A.property({json:{write:!0}})],E.prototype,"bandCount",void 0);t.__decorate([A.property({json:{write:!0}})],E.prototype,"colormap",void 0);t.__decorate([A.property({type:String,readOnly:!0})],E.prototype,"dataType",null);t.__decorate([A.property({type:I,json:{write:!0}})],E.prototype,"extent",void 0);t.__decorate([A.property({type:I,json:{write:!0}})],E.prototype,"nativeExtent",null);t.__decorate([A.property({json:{write:!0}})],
E.prototype,"nativePixelSize",null);t.__decorate([A.property({json:{write:!0}})],E.prototype,"format",void 0);t.__decorate([A.property({json:{write:!0}})],E.prototype,"height",void 0);t.__decorate([A.property({json:{write:!0}})],E.prototype,"width",void 0);t.__decorate([A.property({json:{write:!0}})],E.prototype,"histograms",void 0);t.__decorate([A.property({json:{write:!0}})],E.prototype,"keyProperties",void 0);t.__decorate([A.property({json:{write:!0}})],E.prototype,"multidimensionalInfo",void 0);
t.__decorate([A.property()],E.prototype,"noDataValue",void 0);t.__decorate([A.property({json:{write:!0}})],E.prototype,"pixelSize",void 0);t.__decorate([A.property({json:{write:!0}})],E.prototype,"pixelType",void 0);t.__decorate([A.property()],E.prototype,"isPseudoSpatialReference",void 0);t.__decorate([A.property({type:D,json:{write:!0}})],E.prototype,"spatialReference",void 0);t.__decorate([A.property({json:{write:!0}})],E.prototype,"statistics",void 0);t.__decorate([A.property({type:q,json:{write:!0}})],
E.prototype,"storageInfo",void 0);t.__decorate([A.property({json:{write:!0}})],E.prototype,"transform",void 0);return E=t.__decorate([P.subclass("esri.layers.support.RasterInfo")],E)})},"esri/layers/support/RasterStorageInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),
function(U,t,E,J,A,N,T,S,P){E=function(I){function D(){var q=I.apply(this,arguments)||this;q.blockWidth=void 0;q.blockHeight=void 0;q.compression=null;q.origin=null;q.firstPyramidLevel=null;q.maximumPyramidLevel=null;q.pyramidScalingFactor=2;q.pyramidBlockWidth=null;q.pyramidBlockHeight=null;q.isVirtualTileInfo=!1;q.tileInfo=null;q.blockBoundary=null;return q}U._inheritsLoose(D,I);return D}(E.JSONSupport);t.__decorate([J.property({type:Number,json:{write:!0}})],E.prototype,"blockWidth",void 0);t.__decorate([J.property({type:Number,
json:{write:!0}})],E.prototype,"blockHeight",void 0);t.__decorate([J.property({type:String,json:{write:!0}})],E.prototype,"compression",void 0);t.__decorate([J.property({type:P,json:{write:!0}})],E.prototype,"origin",void 0);t.__decorate([J.property({type:Number,json:{write:!0}})],E.prototype,"firstPyramidLevel",void 0);t.__decorate([J.property({type:Number,json:{write:!0}})],E.prototype,"maximumPyramidLevel",void 0);t.__decorate([J.property({json:{write:!0}})],E.prototype,"pyramidResolutions",void 0);
t.__decorate([J.property({type:Number,json:{write:!0}})],E.prototype,"pyramidScalingFactor",void 0);t.__decorate([J.property({type:Number,json:{write:!0}})],E.prototype,"pyramidBlockWidth",void 0);t.__decorate([J.property({type:Number,json:{write:!0}})],E.prototype,"pyramidBlockHeight",void 0);t.__decorate([J.property({type:Boolean,json:{write:!0}})],E.prototype,"isVirtualTileInfo",void 0);t.__decorate([J.property({json:{write:!0}})],E.prototype,"tileInfo",void 0);t.__decorate([J.property()],E.prototype,
"blockBoundary",void 0);return E=t.__decorate([S.subclass("esri.layers.support.RasterStorageInfo")],E)})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),function(U,t,E,J,A,N,T,S,P){A=new E.JSONMap({esriClassifyEqualInterval:"equal-interval",
esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});E=new E.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});P=function(I){function D(){var q=I.apply(this,arguments)||this;q.breakCount=null;q.classificationField=null;q.classificationMethod=null;q.normalizationField=null;q.normalizationType=
null;q.type="class-breaks-definition";return q}U._inheritsLoose(D,I);U._createClass(D,[{key:"standardDeviationInterval",set:function(q){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",q)}},{key:"definedInterval",set:function(q){"defined-interval"===this.classificationMethod&&this._set("definedInterval",q)}}]);return D}(P);t.__decorate([J.property({json:{write:!0}})],P.prototype,"breakCount",void 0);t.__decorate([J.property({json:{write:!0}})],P.prototype,"classificationField",
void 0);t.__decorate([J.property({type:String,json:{read:A.read,write:A.write}})],P.prototype,"classificationMethod",void 0);t.__decorate([J.property({json:{write:!0}})],P.prototype,"normalizationField",void 0);t.__decorate([J.property({json:{read:E.read,write:E.write}})],P.prototype,"normalizationType",void 0);t.__decorate([J.property({value:null,json:{write:!0}})],P.prototype,"standardDeviationInterval",null);t.__decorate([J.property({value:null,json:{write:!0}})],P.prototype,"definedInterval",
null);t.__decorate([J.property()],P.prototype,"type",void 0);return P=t.__decorate([S.subclass("esri.rest.support.ClassBreaksDefinition")],P)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),
function(U,t,E,J,A,N,T,S,P,I,D){E=new E.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});J=function(q){function B(){var H=q.apply(this,arguments)||this;H.baseSymbol=null;H.colorRamp=null;H.type=null;return H}U._inheritsLoose(B,q);return B}(J.JSONSupport);t.__decorate([A.property({type:D,json:{write:!0}})],J.prototype,"baseSymbol",void 0);t.__decorate([A.property({types:I.types,json:{read:{reader:I.fromJSON},write:!0}})],J.prototype,"colorRamp",void 0);t.__decorate([A.property({json:{read:E.read,
write:E.write}})],J.prototype,"type",void 0);return J=t.__decorate([P.subclass("esri.rest.support.ClassificationDefinition")],J)})},"esri/rest/support/generateRendererUtils":function(){define(["exports"],function(U){function t(D){const {classificationMethod:q,breakCount:B,normalizationType:H,definedInterval:h}=D.definition,v=[];var k=D.values;if(0===k.length)return[];k=k.sort((l,a)=>l-a);var y=k[0],F=k[k.length-1];if("equal-interval"===q)if(k.length>=B){k=(F-y)/B;D=y;for(var w=1;w<B;w++){var C=Number((y+
w*k).toFixed(6));v.push({minValue:D,maxValue:C,label:E(D,C,H)});D=C}v.push({minValue:D,maxValue:F,label:E(D,F,H)})}else k.forEach(l=>{v.push({minValue:l,maxValue:l,label:E(l,l,H)})});else if("natural-breaks"===q){k=J(k);D=A(k.uniqueValues,D.valueFrequency||k.valueFrequency,B);for(w=1;w<B;w++)k.uniqueValues.length>w&&(C=Number(k.uniqueValues[D[w]].toFixed(6)),v.push({minValue:y,maxValue:C,label:E(y,C,H)}),y=C);v.push({minValue:y,maxValue:F,label:E(y,F,H)})}else if("quantile"===q)if(k.length>=B&&y!==
F){D=Math.ceil(k.length/B);w=0;for(C=1;C<B;C++){var z=D+w-1;z>k.length&&(z=k.length-1);0>z&&(z=0);v.push({minValue:y,maxValue:k[z],label:E(y,k[z],H)});y=k[z];w+=D;D=Math.ceil((k.length-w)/(B-C))}v.push({minValue:y,maxValue:F,label:E(y,F,H)})}else for(F=-1,y=0;y<k.length;y++)D=k[y],D!==F&&(F=D,v.push({minValue:F,maxValue:D,label:E(F,D,H)}),F=D);else if("standard-deviation"===q)if(D=S(k),w=P(k,D),0===w)v.push({minValue:k[0],maxValue:k[0],label:E(k[0],k[0],H)});else{k=T(y,F,B,D,w)*w;w=0;for(C=B;1<=C;C--)z=
Number((D-(C-.5)*k).toFixed(6)),v.push({minValue:y,maxValue:z,label:E(y,z,H)}),y=z,w++;C=Number((D+.5*k).toFixed(6));v.push({minValue:y,maxValue:C,label:E(y,C,H)});y=C;w++;for(z=1;z<=B;z++)C=w===2*B?F:Number((D+(z+.5)*k).toFixed(6)),v.push({minValue:y,maxValue:C,label:E(y,C,H)}),y=C,w++}else if("defined-interval"===q){if(!h)return v;F=k[0];k=k[k.length-1];y=Math.ceil((k-F)/h);D=F;for(w=1;w<y;w++)C=Number((F+w*h).toFixed(6)),v.push({minValue:D,maxValue:C,label:E(D,C,H)}),D=C;v.push({minValue:D,maxValue:k,
label:E(D,k,H)})}return v}function E(D,q,B){let H=null;return H=D===q?B&&"percent-of-total"===B?D+"%":D.toString():B&&"percent-of-total"===B?D+"% - "+q+"%":D+" - "+q}function J(D){const q=[],B=[];let H=Number.MIN_VALUE,h=1,v=-1;for(let k=0;k<D.length;k++){const y=D[k];y===H?(h++,B[v]=h):null!==y&&(q.push(y),H=y,h=1,B.push(h),v++)}return{uniqueValues:q,valueFrequency:B}}function A(D,q,B){var H=D.length;const h=[];B>H&&(B=H);for(var v=0;v<B;v++)h.push(Math.round(v*H/B-1));h.push(H-1);v=N(h,D,q,B);{H=
v.mean;v=v.sdcm;var k=B,y=0,F=0;let C=0,z=0,l=!0;for(let a=0;2>a&&l;a++){0===a&&(l=!1);for(var w=0;w<k-1;w++)for(;h[w+1]+1!==h[w+2];)if(h[w+1]+=1,y=I(w,h,D,q),C=y.sbMean,y=y.sbSdcm,F=I(w+1,h,D,q),z=F.sbMean,F=F.sbSdcm,y+F<v[w]+v[w+1])v[w]=y,v[w+1]=F,H[w]=C,H[w+1]=z,l=!0;else{--h[w+1];break}for(w=k-1;0<w;w--)for(;h[w]!==h[w-1]+1;)if(--h[w],y=I(w-1,h,D,q),C=y.sbMean,y=y.sbSdcm,F=I(w,h,D,q),z=F.sbMean,F=F.sbSdcm,y+F<v[w-1]+v[w])v[w-1]=y,v[w]=F,H[w-1]=C,H[w]=z,l=!0;else{h[w]+=1;break}}H=l}H&&(v=N(h,D,
q,B));return h}function N(D,q,B,H){let h=[];var v=[],k=[];let y=0;const F=[],w=[];for(var C=0;C<H;C++){var z=I(C,D,q,B);F.push(z.sbMean);w.push(z.sbSdcm);y+=w[C]}z=y;for(C=!0;C||y<z;){C=!1;h=[];for(v=0;v<H;v++)h.push(D[v]);for(k=0;k<H;k++)for(z=D[k]+1;z<=D[k+1];z++)if(v=q[z],0<k&&z!==D[k+1]&&Math.abs(v-F[k])>Math.abs(v-F[k-1]))D[k]=z;else if(k<H-1&&D[k]!==z-1&&Math.abs(v-F[k])>Math.abs(v-F[k+1])){D[k+1]=z-1;break}z=y;y=0;v=[];k=[];for(let l=0;l<H;l++){v.push(F[l]);k.push(w[l]);const a=I(l,D,q,B);
F[l]=a.sbMean;w[l]=a.sbSdcm;y+=w[l]}}if(y>z){for(q=0;q<H;q++)D[q]=h[q],F[q]=v[q],w[q]=k[q];y=z}return{mean:F,sdcm:w}}function T(D,q,B,H,h){D=Math.max(H-D,q-H)/h/B;return 1<=D?1:.5<=D?.5:.25}function S(D){let q=0;for(let B=0;B<D.length;B++)q+=D[B];return q/=D.length}function P(D,q){let B=0;for(let H=0;H<D.length;H++){const h=D[H];B+=(h-q)*(h-q)}B/=D.length;return Math.sqrt(B)}function I(D,q,B,H){var h=0,v=0;for(var k=q[D]+1;k<=q[D+1];k++){const y=H[k];h+=B[k]*y;v+=y}0>=v&&console.log("Exception in Natural Breaks calculation");
h/=v;v=0;for(k=q[D]+1;k<=q[D+1];k++)v+=H[k]*(B[k]-h)**2;return{sbMean:h,sbSdcm:v}}U.createGenerateRendererClassBreaks=function(D){const {normalizationTotal:q}=D;return{classBreaks:t(D),normalizationTotal:q}};U.createGenerateRendererUniqueValues=function(D){D=J(D);const q=[],B=D.uniqueValues.length;for(let H=0;H<B;H++){const h=D.uniqueValues[H];q.push({value:h,count:D.valueFrequency[H],label:h.toString()})}return{uniqueValues:q}};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/renderers/support/RasterSymbolizer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/colorUtils ../../core/JSONSupport ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/RasterInfo ../../layers/support/rasterFunctions/pixelUtils ../../layers/support/rasterFunctions/surfaceUtils ./colorRampUtils".split(" "),
function(U,t,E,J,A,N,T,S,P,I,D,q,B,H){function h(w,C){const {attributeTable:z,bandCount:l}=w;return!N.isSome(z)||1<l||C&&null==z.fields.find(a=>a.name.toLowerCase()===C.toLowerCase())?!1:!0}function v(w){const {bandCount:C,colormap:z}=w;return N.isSome(z)&&z.length&&1===C}function k(w){return q.isValidPixelBlock(w)&&0!==w.validPixelCount}const y=A.getLogger("esri.renderers.support.RasterSymbolizer"),F={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],
s32:[-2147483648,2147483647],f32:[-3.4*1E39,3.4*1E39],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]};J=function(w){function C(l){return w.call(this,l)||this}U._inheritsLoose(C,w);var z=C.prototype;z.bind=function(){const {rendererJSON:l}=this;if(!l)return!1;this.lookup={rendererJSON:{}};let a;switch(l.type){case "uniqueValue":a=this._updateUVRenderer(l);break;case "rasterColormap":a=this._updateColormapRenderer(l);break;case "rasterStretch":a=this._updateStretchRenderer(l);break;case "classBreaks":a=this._updateClassBreaksRenderer(l);
break;case "rasterShadedRelief":a=this._updateShadedReliefRenderer(l);break;case "vectorField":a=this._updateVectorFieldRenderer()}return a};z.symbolize=function(l){let a=l&&l.pixelBlock;if(!k(a))return a;if(l.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(a,l.simpleStretchParams);try{3<a.pixels.length&&(a=q.extractBands(a,[0,1,2]));let d;switch(this.rendererJSON.type){case "uniqueValue":case "rasterColormap":d=this._symbolize_colormap(a);break;case "classBreaks":d=
this._symbolize_classBreaks(a);break;case "rasterStretch":d=this._symbolize_stretch(a,l.bandIds);break;case "rasterShadedRelief":({extent:l}=l),d=this._symbolize_shadedRelief(a,{isGCS:l.spatialReference.isGeographic,resolution:{x:(l.xmax-l.xmin)/a.width,y:(l.ymax-l.ymin)/a.height}})}return d}catch(d){return y.error("symbolize",d.message),a}};z.simpleStretch=function(l,a){if(!k(l))return l;try{return 3<l.pixels.length&&(l=q.extractBands(l,[0,1,2])),q.stretch(l,a)}catch(d){return y.error("symbolize",
d.message),l}};z.generateWebGLParameters=function(l){if(-1<["uniqueValue","rasterColormap","classBreaks"].indexOf(this.rendererJSON.type)){var a;const {indexedColormap:n,offset:f}=(null==(a=this.lookup)?void 0:a.colormapLut)||{};return{colormap:n,colormapOffset:f,type:"lut"}}const {pixelBlock:d,isGCS:e,resolution:g,bandIds:p}=l;({rendererJSON:l}=this);return"rasterStretch"===l.type?this.generateStretchWebGLParams(d,l,p):"rasterShadedRelief"===l.type?this.generateShadedReliefWebGLParams(l,e,g):"vectorField"===
l.type?this._generateVectorFieldWebGLParams(l):null};z._isLUTChanged=function(l){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){const a=this.rendererJSON.colorRamp;if(l)return JSON.stringify(a)!==JSON.stringify(this.lookup.rendererJSON.colorRamp);({...this.rendererJSON});({...this.lookup.rendererJSON})}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)};z._symbolize_colormap=function(l){return this._isLUTChanged()&&!this.bind()?
l:q.colorize(l,this.lookup.colormapLut)};z._symbolize_classBreaks=function(l){const a=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType);return this._isLUTChanged()&&!this.bind()?l:a?q.colorize(l,this.lookup.colormapLut):q.remapColor(l,this.lookup.remapLut)};z._symbolize_stretch=function(l,a){const {pixelType:d,bandCount:e}=this.rasterInfo,g=this.rendererJSON,p=-1<["u8","u16","s8","s16"].indexOf(d);let n;var {dra:f}=g;var b=g.useGamma?g.gamma:null;if("histogramEqualization"===g.stretchType){var c=
f?null:this.lookup.histogramLut;a=this.getStretchCutoff(g,l,a,!c);b=q.stretch(l,{...a,gamma:b});b=q.lookupPixels(b,{lut:f?a.histogramLut:c,offset:0})}else if(p){var m;if(f)f=this.getStretchCutoff(g,l,a),n=q.createStretchLUT({pixelType:d,...f,gamma:b});else{if(this._isLUTChanged()&&!this.bind())return l;n=this.lookup?this.lookup.stretchLut:null}if(!n)return l;1<e&&(null==a?void 0:a.length)===(null==(c=N.unwrap(l))?void 0:c.pixels.length)&&(null==(m=n)?void 0:m.lut.length)===e&&(n={lut:a.map(x=>n.lut[x]),
offset:n.offset});b=q.lookupPixels(l,n)}else f=this.getStretchCutoff(g,l,a),b=q.stretch(l,{...f,gamma:b});if(g.colorRamp){if(this._isLUTChanged(!0)&&!this.bind())return l;b=q.colorize(b,this.lookup.colormapLut)}return b};z._symbolize_shadedRelief=function(l,a){var d,e,g=this.rendererJSON;a=B.hillshade(l,{...g,...a});if(!g.colorRamp||this._isLUTChanged(!0)&&!this.bind())return a;g=this.lookup?this.lookup.hsvMap:null;if(!g)return a;const p=null!=(d=null==(e=N.unwrap(this.rasterInfo.statistics))?void 0:
e[0])?d:{min:0,max:8E3};B.tintHillshade(a,l,g,p);return a};z._updateVectorFieldRenderer=function(){const {bandCount:l,dataType:a}=this.rasterInfo;return 2===l&&("vector-magdir"===a||"vector-uv"===a)};z._updateUVRenderer=function(l){const {bandCount:a,attributeTable:d,pixelType:e}=this.rasterInfo,g=l.field1;if(!g)return!1;const p=l.defaultSymbol;var n=1===a&&["u8","s8"].includes(e);if(!h(this.rasterInfo,g)&&!n)return!1;const f=[];if(d){const b=d.fields.filter(c=>"value"===c.name.toLowerCase())[0];
if(!b)return!1;d.features.forEach(c=>{var m,x=l.uniqueValueInfos.filter(L=>String(L.value)===String(c.attributes[g]))[0];(x=null==x?void 0:null==(m=x.symbol)?void 0:m.color)?f.push([c.attributes[b.name]].concat(x)):p&&f.push([c.attributes[b.name]].concat(p.color))})}else{if("value"!==g.toLowerCase())return!1;l.uniqueValueInfos.forEach(b=>{var c;const m=null==b?void 0:null==(c=b.symbol)?void 0:c.color;m?f.push([parseInt(""+b.value,10)].concat(m)):p&&f.push([parseInt(""+b.value,10)].concat(p.color))})}if(0===
f.length)return!1;n=q.createColormapLUT({colormap:f});this.lookup={rendererJSON:l,colormapLut:n};return this.canRenderInWebGL=!0};z._updateColormapRenderer=function(l){if(!v(this.rasterInfo))return!1;var a=l.colormapInfos.map(d=>[d.value].concat(d.color)).sort((d,e)=>d[0]-e[0]);if(!a||0===a.length)return!1;a=q.createColormapLUT({colormap:a});this.lookup={rendererJSON:l,colormapLut:a};return this.canRenderInWebGL=!0};z._updateShadedReliefRenderer=function(l){if("elevation"!==this.rasterInfo.dataType)return!1;
if(l.colorRamp){var a=H.convertColorRampToColormap(l.colorRamp,256,!0);a=q.createColormapLUT({colormap:a});const d=[],e=a.indexedColormap;for(let g=0;g<e.length;g+=4){const p=E.toHSV({r:e[g],g:e[g+1],b:e[g+2]});d.push([p.h/60,p.s/100,255*p.v/100])}this.lookup={rendererJSON:l,colormapLut:a,hsvMap:d}}else this.lookup=null;return this.canRenderInWebGL=!0};z._updateClassBreaksRenderer=function(l){var a=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType),d=l.classBreakInfos;if(null==d||!d.length)return!1;
d=d.sort((f,b)=>f.classMaxValue-b.classMaxValue);const e=d[d.length-1];var g=l.minValue;if(!a){a=[];for(var p=0;p<d.length;p++){var n;a.push({value:null!=(n=d[p].classMinValue)?n:g,mappedColor:d[p].symbol.color});g=d[p].classMaxValue}a.push({value:e.classMaxValue,mappedColor:e.symbol.color});this.lookup={rendererJSON:l,remapLut:a};this.canRenderInWebGL=!1;return!0}n=[];g=Math.floor(l.minValue);for(a=0;a<d.length;a++){for(p=d[a];g<p.classMaxValue;g++)n.push([g].concat(p.symbol.color));g=Math.ceil(p.classMaxValue)}e.classMaxValue===
g&&n.push([e.classMaxValue].concat(e.symbol.color));d=q.createColormapLUT({colormap:n,fillUnspecified:!1});this.lookup={rendererJSON:l,colormapLut:d};return this.canRenderInWebGL=!0};z._isHistogramRequired=function(l){return"percentClip"===l||"histogramEqualization"===l};z._isValidRasterStatistics=function(l){return N.isSome(l)&&0<l.length&&null!=l[0].min&&null!=l[0].max};z._updateStretchRenderer=function(l){var a;let {stretchType:d,dra:e}=l;if(!("none"===d||null!=(a=l.statistics)&&a.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||
e))return!1;var g=N.unwrap(l.histograms||this.rasterInfo.histograms);!this._isHistogramRequired(l.stretchType)||null!=g&&g.length||e||(d="minMax");const {gamma:p,useGamma:n,colorRamp:f}=l;a=this.rasterInfo.pixelType;const b=!e&&-1<["u8","u16","s8","s16"].indexOf(a);"histogramEqualization"===d?(a=g.map(c=>q.createHistogramEqualizationLUT(c)),this.lookup={rendererJSON:l,histogramLut:a}):b&&(g=this.getStretchCutoff(l),a=q.createStretchLUT({pixelType:a,...g,gamma:n?p:null}),this.lookup={rendererJSON:l,
stretchLut:a});f&&(a=H.convertColorRampToColormap(f,256,!0),this.lookup||(this.lookup={rendererJSON:l}),this.lookup.colormapLut=q.createColormapLUT({colormap:a}),this.lookup.rendererJSON=l);return this.canRenderInWebGL=!0};z.getStretchCutoff=function(l,a=null,d,e){var g,p,n,f=l.stretchType;if(l.dra)if("minMax"===f&&N.isSome(a)&&a.statistics)a=a.statistics.map(Q=>[Q.minValue,Q.maxValue,0,0]);else{var b=q.estimateStatisticsHistograms(a);a=N.isSome(b)?b.statistics:null;b=N.isSome(b)?b.histograms:null}else{var c;
a=0<(null==(c=l.statistics)?void 0:c.length)?l.statistics:N.unwrap(this.rasterInfo.statistics);b=l.histograms||N.unwrap(this.rasterInfo.histograms)}!this._isHistogramRequired(f)||null!=(g=b)&&g.length||(f="minMax");c=(null==(p=a)?void 0:p.length)||(null==(n=b)?void 0:n.length)||this.rasterInfo.bandCount;p=[];n=[];let m;let x,L,r;a&&!Array.isArray(a[0])&&(a=a.map(Q=>[Q.min,Q.max,Q.avg,Q.stddev]));switch(f){case "none":a=F[this.rasterInfo.pixelType]||F.f32;for(g=0;g<c;g++)p[g]=a[0],n[g]=a[1];break;
case "minMax":for(g=0;g<c;g++)p[g]=a[g][0],n[g]=a[g][1];break;case "standardDeviation":for(g=0;g<c;g++)p[g]=a[g][2]-l.numberOfStandardDeviations*a[g][3],n[g]=a[g][2]+l.numberOfStandardDeviations*a[g][3],p[g]<a[g][0]&&(p[g]=a[g][0]),n[g]>a[g][1]&&(n[g]=a[g][1]);break;case "histogramEqualization":for(g=0;g<c;g++)p[g]=b[g].min,n[g]=b[g].max;break;case "percentClip":for(g=0;g<b.length;g++){a=b[g];x=new Uint32Array(a.size);var u=a.counts;m=0;c=(a.max-a.min)/a.size;L=-.5===a.min&&1===c?.5:0;for(r=0;r<a.size;r++)m+=
u[r],x[r]=m;u=l.minPercent*m/100;for(r=0;r<a.size;r++)if(x[r]>u){p[g]=a.min+c*(r+L);break}u=(1-l.maxPercent/100)*m;for(r=a.size-2;0<=r;r--)if(x[r]<u){n[g]=a.min+c*(r+2-L);break}}break;default:for(g=0;g<c;g++)p[g]=a[g][0],n[g]=a[g][1]}let G;"histogramEqualization"===f?(f=b[0].size||256,l=0,e&&(G=b.map(Q=>q.createHistogramEqualizationLUT(Q)))):(f=l.max||255,l=l.min||0);return this.getSelectedBandCutoffs({minCutOff:p,maxCutOff:n,outMax:f,outMin:l,histogramLut:G},d)};z.getSelectedBandCutoffs=function(l,
a){if(null==a||0===a.length)return l;const d=Math.max.apply(null,a),{minCutOff:e,maxCutOff:g,outMin:p,outMax:n,histogramLut:f}=l;return e.length===a.length||e.length<=d?l:{minCutOff:a.map(b=>e[b]),maxCutOff:a.map(b=>g[b]),histogramLut:f?a.map(b=>f[b]):null,outMin:p,outMax:n}};z.generateStretchWebGLParams=function(l,a,d){let e=null,g=null;var p=this.lookup&&this.lookup.colormapLut;a.colorRamp&&p&&(e=p.indexedColormap,g=p.offset);"histogramEqualization"===a.stretchType&&(a={...a,stretchType:"minMax"});
({gamma:p}=a);const n=!!(a.useGamma&&p&&p.some(u=>1!==u)),{minCutOff:f,maxCutOff:b,outMin:c,outMax:m}=this.getStretchCutoff(a,l,d);var x=0;N.isSome(l)&&(x=l.getPlaneCount(),2===x&&(l=l.clone(),l.statistics=[l.statistics[0]],l.pixels=[l.pixels[0]]));l=Math.min(3,(null==d?void 0:d.length)||x||this.rasterInfo.bandCount);d=new Float32Array(l);x=e||n?1:255;let L;for(L=0;L<l;L++)d[L]=(m-c)/(b[L]-f[L])/x;const r=new Float32Array(l);if(n)for(L=0;L<l;L++)r[L]=1<p[L]?2<p[L]?6.5+(p[L]-2)**2.5:6.5+100*(2-p[L])**
4:1;return{bandCount:l,outMin:c/x,outMax:m/x,minCutOff:f,maxCutOff:b,factor:d,useGamma:n,gamma:n?p:[1,1,1],gammaCorrection:n?r:[1,1,1],colormap:e,colormapOffset:g,stretchType:a.stretchType,type:"stretch"}};z.generateShadedReliefWebGLParams=function(l,a,d){var e,g,p;let n=null,f=null;const b=this.lookup&&this.lookup.colormapLut;l.colorRamp&&b&&(n=b.indexedColormap,f=b.offset);a=B.calculateHillshadeParams({...l,isGCS:a,resolution:d});d=null==(e=N.unwrap(this.rasterInfo.statistics))?void 0:e[0];return{...a,
minValue:null!=(g=null==d?void 0:d.min)?g:0,maxValue:null!=(p=null==d?void 0:d.max)?p:8E3,hillshadeType:"traditional"===l.hillshadeType?0:1,type:"hillshade",colormap:n,colormapOffset:f}};z._generateVectorFieldWebGLParams=function(l){var a,d,e,g,p;const {style:n,inputUnit:f,outputUnit:b,visualVariables:c,symbolTileSize:m,flowRepresentation:x}=l;let L;var r=null!=(a=null==c?void 0:c.find(u=>"sizeInfo"===u.type))?a:{type:"sizeInfo",field:"Magnitude",maxDataValue:null==(d=this.rasterInfo.statistics)?
void 0:d[0].max,maxSize:.8*m,minDataValue:null==(e=this.rasterInfo.statistics)?void 0:e[0].min,minSize:.2*m};a=r?r.minDataValue:null==(g=this.rasterInfo.statistics)?void 0:g[0].min;d=r?r.maxDataValue:null==(p=this.rasterInfo.statistics)?void 0:p[0].max;p=N.isSome(r.maxSize)&&N.isSome(r.minSize)?[r.minSize/m,r.maxSize/m]:[.2,.8];if("wind_speed"===n||"simple_scalar"===n)p[0]=p[1]=(p[0]+p[1])/2;g=N.isSome(a)&&N.isSome(d)?[a,d]:null;if("classified_arrow"===n)if(N.isSome(a)&&N.isSome(d)&&N.isSome(r))for(L=
[],a=(r.maxDataValue-r.minDataValue)/5,d=0;6>d;d++)L.push(r.minDataValue+a*d);else L=[0,1E-6,3.5,7,10.5,14];r="flow_to"===x===("ocean_current_kn"===n||"ocean_current_m"===n)?0:Math.PI;a=null==c?void 0:c.find(u=>"rotationInfo"===u.type);return{breakValues:L,dataRange:g,inputUnit:f,outputUnit:b,symbolTileSize:m,symbolPercentRange:p,style:n||"single_arrow",rotation:r,rotationType:(null==a?void 0:a.rotationType)||l.rotationType,type:"vectorField"}};return C}(J.JSONSupport);t.__decorate([T.property({json:{write:!0}})],
J.prototype,"rendererJSON",void 0);t.__decorate([T.property({type:D,json:{write:!0}})],J.prototype,"rasterInfo",void 0);t.__decorate([T.property({json:{write:!0}})],J.prototype,"lookup",void 0);t.__decorate([T.property()],J.prototype,"canRenderInWebGL",void 0);return J=t.__decorate([I.subclass("esri.renderers.support.RasterSymbolizer")],J)})},"esri/layers/support/rasterFunctions/surfaceUtils":function(){define(["exports","../PixelBlock","./pixelUtils"],function(U,t,E){function J(A){let {altitude:N,
azimuth:T}=A;const {hillshadeType:S,pixelSizePower:P,pixelSizeFactor:I,scalingType:D,isGCS:q,resolution:B}=A;var H="multi-directional"===S?2*A.zFactor:A.zFactor;const {x:h,y:v}=B;A=H/(8*h);var k=H/(8*v);q&&.001<H&&(A/=111E3,k/=111E3);"adjusted"===D&&(q?(A=111E3*h,k=111E3*v,A=(H+A**P*I)/(8*A),k=(H+k**P*I)/(8*k)):(A=(H+h**P*I)/(8*h),k=(H+v**P*I)/(8*v)));var y=(90-N)*Math.PI/180;H=Math.cos(y);let F=(360-T+90)*Math.PI/180,w=Math.sin(y)*Math.cos(F);y=Math.sin(y)*Math.sin(F);const C=[315,270,225,360,180,
0],z=[60,60,60,60,60,90];var l=new Float32Array([3,5,3,2,1,4]);const a=l.reduce((n,f)=>n+f);l=l.map(n=>n/a);const d="multi-directional"===S?C.length:1,e=new Float32Array(6),g=new Float32Array(6),p=new Float32Array(6);if("multi-directional"===S)for(let n=0;n<d;n++)N=z[n],T=C[n],y=(90-N)*Math.PI/180,H=Math.cos(y),F=(360-T+90)*Math.PI/180,w=Math.sin(y)*Math.cos(F),y=Math.sin(y)*Math.sin(F),e[n]=H,g[n]=w,p[n]=y;else e.fill(H),g.fill(w),p.fill(y);return{resolution:B,factor:[A,k],sinZcosA:w,sinZsinA:y,
cosZ:H,sinZcosAs:g,sinZsinAs:p,cosZs:e,weights:l,hillshadeType:["traditional","multi-directional"].indexOf(S)}}U.calculateHillshadeParams=J;U.hillshade=function(A,N){if(!E.isValidPixelBlock(A))return A;const {width:T,height:S,mask:P}=A,I=new Uint8Array(T*S);P&&I.set(P);const {factor:D,sinZcosA:q,sinZsinA:B,cosZ:H,sinZcosAs:h,sinZsinAs:v,cosZs:k,weights:y}=J(N),[F,w]=D;var {hillshadeType:C}=N;const z=A.pixels[0];N=new Uint8Array(T*S);let l;for(let b=1;b<S-1;b++){const c=b*T;for(let m=1;m<T-1;m++)if(P&&
!P[c+m])N[c+m]=0;else{var a=8;if(P&&(a=P[c-T+m-1]+P[c-T+m]+P[c-T+m+1]+P[c+m-1]+P[c+m+1]+P[c+T+m-1]+P[c+T+m]+P[c+T+m+1],7>a)){N[c+m]=0;I[c+m]=0;continue}if(7===a){var d=P[c-T+m-1]?z[c-T+m-1]:z[c+m];var e=P[c-T+m]?z[c-T+m]:z[c+m];var g=P[c-T+m+1]?z[c-T+m+1]:z[c+m];a=P[c+m-1]?z[c+m-1]:z[c+m];l=P[c+m+1]?z[c+m+1]:z[c+m];var p=P[c+T+m-1]?z[c+T+m-1]:z[c+m];var n=P[c+T+m]?z[c+T+m]:z[c+m];var f=P[c+T+m+1]?z[c+T+m+1]:z[c+m]}else d=z[c-T+m-1],e=z[c-T+m],g=z[c-T+m+1],a=z[c+m-1],l=z[c+m+1],p=z[c+T+m-1],n=z[c+
T+m],f=z[c+T+m+1];a=(g+l+l+f-(d+a+a+p))*F;d=(p+n+n+f-(d+e+e+g))*w;e=Math.sqrt(1+a*a+d*d);g=0;if("traditional"===C)a=255*(H+B*d-q*a)/e,0>a&&(a=0),g=a;else for(p=v.length,n=0;n<p;n++)f=255*(k[n]+v[n]*d-h[n]*a)/e,0>f&&(f=0),g+=f*y[n];N[c+m]=g&255}}for(C=0;C<S;C++)N[C*T]=N[C*T+1],N[(C+1)*T-1]=N[(C+1)*T-2];for(C=1;C<T-1;C++)N[C]=N[C+T],N[C+(S-1)*T]=N[C+(S-2)*T];return new t({width:T,height:S,pixels:[N],mask:P?I:null,pixelType:"u8",validPixelCount:A.validPixelCount,statistics:[{minValue:0,maxValue:255}]})};
U.tintHillshade=function(A,N,T,S){if(E.isValidPixelBlock(A)&&E.isValidPixelBlock(N)){var {min:P,max:I}=S;S=A.pixels[0];var {pixels:D,mask:q}=N;N=D[0];var B=255.00001/(I-P),H=new Uint8ClampedArray(N.length),h=new Uint8ClampedArray(N.length),v=new Uint8ClampedArray(N.length),k=T.length-1;for(let w=0;w<N.length;w++){if(q&&0===q[w])continue;var y=Math.floor((N[w]-P)*B);const [C,z]=T[0>y?0:y>k?k:y];var F=S[w];y=F*z;const l=y*(1-Math.abs(C%2-1));F-=y;switch(Math.floor(C)){case 0:H[w]=y+F;h[w]=l+F;v[w]=
F;break;case 1:H[w]=l+F;h[w]=y+F;v[w]=F;break;case 2:H[w]=F;h[w]=y+F;v[w]=l+F;break;case 3:H[w]=F;h[w]=l+F;v[w]=y+F;break;case 4:H[w]=l+F;h[w]=F;v[w]=y+F;break;case 5:case 6:H[w]=y+F,h[w]=F,v[w]=l+F}}A.pixels=[H,h,v];A.updateStatistics()}};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/rasterEnums":function(){define(["exports","../../core/jsonMap"],function(U,t){const E=t.strict()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",
RSP_Majority:"majority"});t=t.strict()({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"});U.interpolationKebab=E;U.noDataInterpretationKebab=t;Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/rasterDatasets/RasterFactory":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ./CloudRaster ./ImageAuxRaster ./ImageServerRaster ./MRFRaster ./TIFFRaster".split(" "),function(U,t,E,J,A,N,T){const S=new Map;S.set("CRF",{desc:"Cloud Raster Format",constructor:E});
S.set("MRF",{desc:"Meta Raster Format",constructor:N});S.set("TIFF",{desc:"GeoTIFF",constructor:T});S.set("RasterTileServer",{desc:"Raster Tile Server",constructor:A});S.set("JPG",{desc:"JPG Raster Format",constructor:J});S.set("PNG",{desc:"PNG Raster Format",constructor:J});S.set("GIF",{desc:"GIF Raster Format",constructor:J});S.set("BMP",{desc:"BMP Raster Format",constructor:J});return function(){function P(){}P.open=function(){var I=U._asyncToGenerator(function*(D){const {url:q,ioConfig:B,sourceJSON:H}=
D;let h=D.datasetFormat;null==h&&q.lastIndexOf(".")&&(h=q.slice(q.lastIndexOf(".")+1).toUpperCase());if("OVR"===h||"TIF"===h)h="TIFF";else if("JPG"===h||"JPEG"===h||"JFIF"===h)h="JPG";-1<q.toLowerCase().indexOf("/imageserver")&&-1===q.toLowerCase().indexOf("/wcsserver")&&(h="RasterTileServer");const v={bandIds:null,sampling:null},k={url:q,sourceJSON:H,datasetFormat:h,ioConfig:B||v};let y,F;if(this.supportedFormats.has(h))return y=S.get(h).constructor,F=new y(k),yield F.open({signal:D.signal}),F;if(h)throw new t("rasterfactory:open",
"not a supported format "+h);const w=Array.from(S.keys());let C=0;const z=function(){h=w[C++];if(!h)return null;y=S.get(h).constructor;F=new y(k);return F.open({signal:D.signal}).then(()=>F).catch(()=>z())};return z()});return function(D){return I.apply(this,arguments)}}();P.register=function(I,D,q){S.has(I.toUpperCase())||S.set(I.toUpperCase(),{desc:D,constructor:q})};U._createClass(P,null,[{key:"supportedFormats",get:function(){const I=new Set;S.forEach((D,q)=>I.add(q));return I}}]);return P}()})},
"esri/layers/support/rasterDatasets/CloudRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ../RasterInfo ../RasterStorageInfo ../TileInfo ./BaseRaster ./DBFParser ../rasterTransforms/utils ../../../rest/support/FeatureSet ../../../geometry/SpatialReference ../../../geometry/Extent ../../../geometry/Point".split(" "),
function(U,t,E,J,A,N,T,S,P,I,D,q,B,H,h,v,k,y,F,w){const C=new Map;C.set("int16","esriFieldTypeSmallInteger");C.set("int32","esriFieldTypeInteger");C.set("int64","esriFieldTypeInteger");C.set("float32","esriFieldTypeSingle");C.set("float64","esriFieldTypeDouble");C.set("text","esriFieldTypeString");E=function(z){function l(){var d=z.apply(this,arguments)||this;d.storageInfo=null;d.datasetFormat="CRF";return d}U._inheritsLoose(l,z);var a=l.prototype;a.open=function(){var d=U._asyncToGenerator(function*(e){yield this.init();
({data:e}=yield this.request(this.url+"/conf.json",{signal:null==e?void 0:e.signal}));if(!this._validateHeader(e))throw new J("cloudraster:open","Invalid or unsupported conf.json.");this.datasetName=this.url.slice(this.url.lastIndexOf("/")+1);const {storageInfo:g,rasterInfo:p}=this._parseHeader(e);"thematic"===p.dataType&&(e=yield this._fetchAuxiliaryInformation(),p.attributeTable=e);this._set("storageInfo",g);this._set("rasterInfo",p);this.ioConfig.retryCount=this.ioConfig.retryCount||0});return function(e){return d.apply(this,
arguments)}}();a.fetchRawTile=function(){var d=U._asyncToGenerator(function*(e,g,p,n={}){e=this.rasterInfo.storageInfo.maximumPyramidLevel-e;if(0>e)return null;e=this._buildCacheFilePath(e,g,p,n.multidimensionalDefinition);g=this._getIndexRecordFromBundle(g,p);p=yield this.request(e,{range:{from:0,to:this.storageInfo.headerSize-1},responseType:"array-buffer",signal:n.signal});if(!p)return null;p=new Uint8Array(p.data);g=this._getTileEndAndContentType(p,g);return 0===g.recordSize?null:(n=yield this.request(e,
{range:{from:g.position,to:g.position+g.recordSize},responseType:"array-buffer",signal:n.signal}))?this.decodePixelBlock(n.data,{width:this.rasterInfo.storageInfo.tileInfo.size[0],height:this.rasterInfo.storageInfo.tileInfo.size[1],planes:null,pixelType:null}):null});return function(e,g,p){return d.apply(this,arguments)}}();a._validateHeader=function(d){const e="origin extent geodataXform LODInfos blockWidth blockHeight bandCount pixelType pixelSizeX pixelSizeY format packetSize".split(" ");return d&&
"RasterInfo"===d.type&&!e.some(g=>!d[g])};a._parseHeader=function(d){var e,g;const p="u1 u2 u4 u8 s8 u16 s16 u32 s32 f32 f64".split(" ")[d.pixelType],{bandCount:n,histograms:f,colormap:b,blockWidth:c,blockHeight:m,firstPyramidLevel:x,maximumPyramidLevel:L}=d,r=d.statistics&&d.statistics.map(fa=>({min:fa.min,max:fa.max,avg:fa.mean,stddev:fa.standardDeviation,median:fa.median,mode:fa.mode}));var u=d.extent.spatialReference,G=null==(e=d.geodataXform)?void 0:e.spatialReference;e=new y(null!=u&&u.wkid||
null!=u&&u.wkt?u:G);u=new F({xmin:d.extent.xmin,ymin:d.extent.ymin,xmax:d.extent.xmax,ymax:d.extent.ymax,spatialReference:e});G=new w({x:d.pixelSizeX,y:d.pixelSizeY,spatialReference:e});const Q=Math.round((u.xmax-u.xmin)/G.x),O=Math.round((u.ymax-u.ymin)/G.y),W=this._parseTransform(d.geodataXform),X=W?u:null;W&&(u=W.forwardTransform(u),G.x=(u.xmax-u.xmin)/Q,G.y=(u.ymax-u.ymin)/O);const K=null!=(g=d.properties)?g:{};var M=d.format.toLowerCase().replace("cache/","");g=new w(d.origin.x,d.origin.y,e);
let V,R;if(b&&b.colors)for(V=[],R=0;R<b.colors.length;R++){var aa=b.colors[R];var ca=b.values?b.values[R]:R;V.push([ca,aa&255,aa<<16>>>24,aa<<8>>>24,aa>>>24])}aa=d.LODInfos;ca=[];for(R=0;R<aa.levels.length;R++)ca.push({level:aa.levels[R],resolution:aa.resolutions[R],scale:96/.0254*aa.resolutions[R]});aa=new B({dpi:96,lods:ca,format:M,origin:g,size:[c,m],spatialReference:e});M={recordSize:8,packetSize:d.packetSize,headerSize:d.packetSize*d.packetSize*8+64};ca=[{maxCol:Math.ceil(Q/c)-1,maxRow:Math.ceil(O/
m)-1,minCol:0,minRow:0}];let da=2;if(0<L)for(R=0;R<L;R++)ca.push({maxCol:Math.ceil(Q/da/c)-1,maxRow:Math.ceil(O/da/m)-1,minCol:0,minRow:0}),da*=2;d=new D({width:Q,height:O,pixelType:p,bandCount:n,extent:u,nativeExtent:X,transform:W,spatialReference:e,pixelSize:G,keyProperties:K,statistics:r,histograms:f,multidimensionalInfo:d.mdInfo,colormap:V,storageInfo:new q({blockWidth:c,blockHeight:m,pyramidBlockWidth:c,pyramidBlockHeight:m,origin:g,tileInfo:aa,firstPyramidLevel:x,maximumPyramidLevel:L,blockBoundary:ca})});
return{storageInfo:M,rasterInfo:d}};a._parseTransform=function(d){var e,g;if(!v.isTransformSupported(d))throw new J("cloudraster:open","the data contains unsupported geodata transform types");d=v.readTransform(d);if("identity"===d.type)return null;if("polynomial"!==d.type||null==(e=d.forwardCoefficients)||!e.length||null==(g=d.inverseCoefficients)||!g.length)throw new J("cloudraster:open","the data contains unsupported geodata transforms - both forward and inverse coefficients are required currently");
return d};a._fetchAuxiliaryInformation=function(){var d=U._asyncToGenerator(function*(e){var g=this.request(this.url+"/conf.vat.json",{signal:e}).then(n=>n.data).catch(()=>null);e=this.request(this.url+"/conf.vat.dbf",{responseType:"array-buffer",signal:e}).then(n=>n.data).catch(()=>null);g=yield Promise.all([g,e]);let p;if(g[0]){e=g[0].fields;const n=g[0].values;if(e&&n){e=e.map(b=>({type:"OID"===b.name?"esriFieldTypeOID":C.get(b.type),name:b.name,alias:b.alias||b.name}));const f=n.map(b=>({attributes:b}));
e&&n&&(p={fields:e,features:f})}}!p&&g[1]&&(p=h.parse(g[1]).recordSet);return k.fromJSON(p)});return function(e){return d.apply(this,arguments)}}();a._buildCacheFilePath=function(d,e,g,p){var n=this.storageInfo.packetSize;g=Math.floor(g/n)*n;e="R"+this._toHexString4(Math.floor(e/n)*n)+"C"+this._toHexString4(g);n="L";n=10<=d?n+d.toString():n+("0"+d.toString());({multidimensionalInfo:d}=this.rasterInfo);const f=null==p?void 0:p[0];if(!A.isSome(d)||!f)return`${this.url}/_alllayers/${n}/${e}.bundle`;
p=d.variables.filter(b=>b.name===f.variableName)[0].dimensions[0].values.indexOf(f.values[0]).toString(16);d=4-p.length;for(g=0;g<d;g++)p="0"+p;return`${this.url}/_alllayers/${f.variableName}/${"S"+p}/${n}/${e}.bundle`};a._getIndexRecordFromBundle=function(d,e){const g=this.storageInfo.packetSize;d=d%g*g+e%g;if(0>d)throw"Invalid level / row / col";return d*this.storageInfo.recordSize+64};a._getTileEndAndContentType=function(d,e){d=d.subarray(e,e+8);e=0;let g;for(g=0;5>g;g++)e|=(d[g]&255)<<8*g;const p=
e&0xffffffffff;e=0;for(g=5;8>g;g++)e|=(d[g]&255)<<8*(g-5);return{position:p,recordSize:e&0xffffffffff}};a._toHexString4=function(d){d=d.toString(16);if(4!==d.length){let e=4-d.length;for(;0<e--;)d="0"+d}return d};return l}(H);t.__decorate([N.property({readOnly:!0})],E.prototype,"storageInfo",void 0);t.__decorate([N.property({type:String,json:{write:!0}})],E.prototype,"datasetFormat",void 0);return E=t.__decorate([I.subclass("esri.layers.support.rasterDatasets.CloudRaster")],E)})},"esri/layers/support/rasterDatasets/BaseRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../request ../../../core/Error ../../../core/JSONSupport ../../../core/Logger ../../../core/maybe ../../../core/Promise ../../../core/promiseUtils ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../arcgisLayerUrl ../commonProperties ../RasterStorageInfo ../TileInfo ./RawBlockCache ../rasterFormats/RasterCodec ../rasterFunctions/pixelUtils ../rasterFunctions/rasterProjectionHelper ../rasterFunctions/vectorFieldUtils ../../../geometry/Point ../../../geometry/Extent".split(" "),
function(U,t,E,J,A,N,T,S,P,I,D,q,B,H,h,v,k,y,F,w,C,z,l,a,d){E=function(e){function g(){var n=e.apply(this,arguments)||this;n.rasterJobHandler=null;n.datasetName=null;n.datasetFormat=null;n.rasterInfo=null;n.ioConfig={sampling:"closest"};return n}U._inheritsLoose(g,e);var p=g.prototype;p.init=function(){var n=U._asyncToGenerator(function*(){const f=z.load();this.addResolvingPromise(f);yield this.when()});return function(){return n.apply(this,arguments)}}();p.normalizeCtorArgs=function(n){n&&n.ioConfig&&
(n={...n,ioConfig:{resolution:null,bandIds:null,sampling:"closest",tileInfo:y.create(),...n.ioConfig}});return n};p.open=function(){var n=U._asyncToGenerator(function*(f){throw new A("BaseRaster:open-not-implemented","open() is not implemented");});return function(f){return n.apply(this,arguments)}}();p.fetchTile=function(){var n=U._asyncToGenerator(function*(f,b,c,m={}){const {tileInfo:x}=m;f=x.lodAt(f);b=this.getTileExtent({x:f.resolution,y:f.resolution},b,c,x.origin,x.spatialReference,x.size);
m=this._getRequestOptionsWithSliceId(m);return this.fetchPixels(b,x.size[0],x.size[1],m)});return function(f,b,c){return n.apply(this,arguments)}}();p.identify=function(){var n=U._asyncToGenerator(function*(f,b={}){b=this._getRequestOptionsWithSliceId(b);const {spatialReference:c,extent:m}=this.rasterInfo;var {datumTransformation:x}=b;x=z.projectPoint(f,c,x);if(!m.intersects(x)||S.isSome(this.rasterInfo.transform)&&(x=this.rasterInfo.transform.inverseTransform(x),!this.rasterInfo.nativeExtent.intersects(x)))return{location:x,
value:null};let L=0;if(b.srcResolution)L=z.snapPyramid(b.srcResolution,this.rasterInfo,this.ioConfig.sampling).pyramidLevel;else if(L=yield this.computeBestPyramidLevelForLocation(f,b),null==L)return{location:x,value:null};f=this.identifyPixelLocation(x,L,null);if(null===f)return{location:x,value:null};const {row:r,col:u,rowOffset:G,colOffset:Q}=f;f=F.getRasterId(this.url,b.sliceId);const O=`${L}/${r}/${u}`;let W=F.getBlock(f,null,O);S.isNone(W)&&(W=this.fetchRawTile(L,r,u,b),F.putBlock(f,null,O,
W));b=yield W;if(S.isNone(b)||!b.pixels||0===b.pixels.length)return{location:x,value:null};const X=G*this.rasterInfo.storageInfo.blockHeight+Q;b=!b.mask||b.mask[X]?b.pixels.map(K=>K[X]):null;f=this.rasterInfo.dataType;return("vector-magdir"===f||"vector-uv"===f)&&1<(null==b?void 0:b.length)?(f="vector-magdir"===f?[b[0],b[1]]:l.uvComponentToVector([b[0],b[1]]),{location:x,value:b,magdirValue:f,pyramidLevel:L}):{location:x,value:b,pyramidLevel:L}});return function(f){return n.apply(this,arguments)}}();
p.fetchPixels=function(){var n=U._asyncToGenerator(function*(f,b,c,m={}){f=z.snapExtent(f);var x=z.getWorldWrapCount(f),L=this.rasterInfo.spatialReference,r=!f.spatialReference.equals(L),{datumTransformation:u}=m,G=new a({x:(f.xmax-f.xmin)/b,y:(f.ymax-f.ymin)/c,spatialReference:f.spatialReference});const Q=m.srcResolution||(r?z.projectResolution(G,L,f,u):G);if(!Q)return null;const {pyramidLevel:O,pyramidResolution:W,excessiveReading:X}=z.snapPyramid(Q,this.rasterInfo,this.ioConfig.sampling);if(X)return null;
var K=this.rasterInfo.storageInfo;L=r?z.projectExtent(f,L,u):f;const M=S.unwrap(this.rasterInfo.transform);M&&(L=M.inverseTransform(L));if(null==L)return null;var V={x:Math.floor((L.xmin-K.origin.x)/W.x+.1),y:Math.floor((K.origin.y-L.ymax)/W.y+.1)};const R=Math.ceil((L.xmax-L.xmin)/W.x-.1),aa=Math.ceil((L.ymax-L.ymin)/W.y-.1);if(8<R/b||8<aa/c||2<=x)return null;var ca=yield this.fetchRawPixels(O,V,{width:R,height:aa,wrapCount:x},m);if(!ca)return null;const da=0<O?K.pyramidBlockWidth:K.blockWidth;K=
0<O?K.pyramidBlockHeight:K.blockHeight;V=da===R&&K===aa&&0===V.x%da&&0===V.y%K;if(!r&&V&&1===ca.pixelBlocks.length&&da===b&&K===c&&Q.x===G.x&&Q.y===G.y)return{extent:f,srcExtent:L,pixelBlock:ca.pixelBlocks[0]};x=z.getProjectionOffsetGrid(f,ca.extent,G,u,M,0<x);r=!m.requestRawData;u={rows:x.spacing[0],cols:x.spacing[1]};G=S.unwrap(this._getRasterTileAlignmentInfo(O,ca.extent.xmin));const {pixelBlocks:fa,mosaicSize:ha,isPartiallyFilled:ka}=ca;this.rasterJobHandler?b=yield this.rasterJobHandler.mosaicAndTransform({srcPixelBlocks:fa,
srcMosaicSize:ha,destDimension:r?{width:b,height:c}:null,coefs:r?x.coefficients:null,sampleSpacing:r?u:null,interpolation:m.interpolation,alignmentInfo:G},m):(ca=C.mosaic(fa,ha,null,null,G),b=r?C.approximateTransform(ca,{width:b,height:c},x.coefficients,u,m.interpolation):ca);return m.requestRawData?{srcExtent:L,pixelBlock:b,transformGrid:x,extent:f,isPartiallyFilled:ka}:{srcExtent:L,extent:f,pixelBlock:b}});return function(f,b,c){return n.apply(this,arguments)}}();p.fetchRawPixels=function(){var n=
U._asyncToGenerator(function*(f,b,c,m){const {origin:x,blockBoundary:L}=this.rasterInfo.storageInfo,{blockWidth:r,blockHeight:u}=this.getBlockWidthHeight(f);let {x:G,y:Q}=b,{width:O,height:W,wrapCount:X}=c;var K=S.unwrap(this._getRasterTileAlignmentInfo(f,0));m.buffer&&(G-=m.buffer.cols,Q-=m.buffer.rows,O+=2*m.buffer.cols,W+=2*m.buffer.rows);b=Math.floor(G/r);c=Math.floor(Q/u);const M=Math.floor((G+O-1)/r),V=Math.floor((Q+W-1)/u);var R=L[f];if(!R)return null;const {minRow:aa,minCol:ca,maxCol:da,maxRow:fa}=
R;if(V<aa||M<ca||c>fa||b>da)return null;R=[];let ha=!1;const ka=null==this.ioConfig.allowPartialFill?m.allowPartialFill:this.ioConfig.allowPartialFill;for(let ja=c;ja<=V;ja++)for(let oa=b;oa<=M;oa++){const ma=0===X||null==K||oa<K.worldColumnCountFromOrigin?oa:oa%K.worldColumnCountFromOrigin-K.originColumnOffset;if(ja>=aa&&ma>=ca&&fa>=ja&&da>=ma){const ia=this._fetchRawTile(f,ja,ma,m);ka?R.push(new Promise(va=>{ia.then(wa=>va(wa)).catch(()=>{ha=!0;va(null)})})):R.push(ia)}else R.push(null)}if(0===
R.length)return null;m=yield Promise.all(R);K={height:(V-c+1)*u,width:(M-b+1)*r};({spatialReference:R}=this.rasterInfo);f=this.getPyramidPixelSize(f);const {x:qa,y:pa}=f;return{extent:new d({xmin:x.x+b*r*qa,xmax:x.x+(M+1)*r*qa,ymin:x.y-(V+1)*u*pa,ymax:x.y-c*u*pa,spatialReference:R}),pixelBlocks:m,mosaicSize:K,isPartiallyFilled:ha}});return function(f,b,c,m){return n.apply(this,arguments)}}();p.fetchRawTile=function(n,f,b,c){throw new A("BaseRaster:read-not-implemented","fetchRawTile() is not implemented");
};p.computeExtent=function(n){return z.projectExtent(this.rasterInfo.extent,n)};p.decodePixelBlock=function(n,f){return!this.rasterJobHandler||f.useCanvas?w.decode(n,f):this.rasterJobHandler.decode({data:n,options:f})};p.request=function(){var n=U._asyncToGenerator(function*(f,b,c){var m,x;const {customFetchParameters:L}=this.ioConfig,{range:r,query:u,headers:G}=b;c=null!=(m=null!=(x=c)?x:b.retryCount)?m:this.ioConfig.retryCount;m=r?{Range:`bytes=${r.from}-${r.to}`}:null;try{return yield J(f,{...b,
query:{...u,...L},headers:{...G,...m}})}catch(Q){if(0<c)return c--,this.request(f,b,c);throw Q;}});return function(f,b,c){return n.apply(this,arguments)}}();p.getSliceIndex=function(n){const {multidimensionalInfo:f}=this.rasterInfo;if(!S.isSome(f)||null==n||!n.length)return null;let b=0;const c=n[0].variableName;for(let L=0;L<f.variables.length;L++){var m=f.variables[L];const r=m.dimensions;if(m.name!==c){b+=r.map(G=>this._getDimensionValuesCount(G)).reduce((G,Q)=>G+Q);break}m=r.map(G=>this._getDimensionValuesCount(G));
const u=r.length;for(let G=0;G<u;G++){var x=n.filter(Q=>Q.dimensionName===r[G].name)[0];if(null==x)return null;x=Array.isArray(x.values[0])?x.values[0][0]:x.values[0];x=this._getIndexFromDimensions(x,r[G]);if(-1===x)return null;m.shift();b=G===u-1?b+x:b+x*m.reduce((Q,O)=>Q+O)}}return b};p.updateTileInfo=function(){const {storageInfo:n,spatialReference:f,extent:b,pixelSize:c}=this.rasterInfo;if(!n.tileInfo){const x=[];var m=n.maximumPyramidLevel||0;let L=Math.max(c.x,c.y),r=1/.0254*96*L;for(let u=
0;u<=m;u++)x.push({level:m-u,resolution:L,scale:r}),L*=2,r*=2;m=new a({x:b.xmin,y:b.ymax,spatialReference:f});n.tileInfo=new y({origin:m,size:[n.blockWidth,n.blockHeight],spatialReference:f,lods:x});n.isVirtualTileInfo=!0}};p.createRemoteDatasetStorageInfo=function(n,f=512,b=512,c){const {width:m,height:x,nativeExtent:L,pixelSize:r,spatialReference:u}=n,G=new a({x:L.xmin,y:L.ymax,spatialReference:u});null==c&&(c=Math.max(0,Math.round(Math.log(Math.max(m,x))/Math.LN2-8)));const Q=this.computeBlockBoundary(L,
512,512,{x:L.xmin,y:L.ymax},[r],c);n.storageInfo=new k({blockWidth:f,blockHeight:b,pyramidBlockWidth:f,pyramidBlockHeight:b,origin:G,firstPyramidLevel:1,maximumPyramidLevel:c,blockBoundary:Q})};p.computeBestPyramidLevelForLocation=function(){var n=U._asyncToGenerator(function*(f,b){return 0});return function(f){return n.apply(this,arguments)}}();p.computeBlockBoundary=function(n,f,b,c,m,x=0,L=2){if(1===m.length&&0<x){m=[...m];let {x:G,y:Q}=m[0];for(let O=0;O<x;O++)G*=L,Q*=L,m.push({x:G,y:Q})}x=[];
const {x:r,y:u}=c;for(c=0;c<m.length;c++){const {x:G,y:Q}=m[c];x.push({minCol:Math.floor((n.xmin-r+.1*G)/f/G),maxCol:Math.floor((n.xmax-r-.1*G)/f/G),minRow:Math.floor((u-n.ymax+.1*Q)/b/Q),maxRow:Math.floor((u-n.ymin-.1*Q)/b/Q)})}return x};p.getPyramidPixelSize=function(n){const {nativePixelSize:f}=this.rasterInfo,{pyramidResolutions:b,pyramidScalingFactor:c}=this.rasterInfo.storageInfo;if(0===n)return f;if(S.isSome(b)&&b.length)return b[n-1];n=c**n;return{x:f.x*n,y:f.y*n}};p.identifyPixelLocation=
function(n,f,b){const {spatialReference:c,nativeExtent:m}=this.rasterInfo,{blockWidth:x,blockHeight:L,maximumPyramidLevel:r,origin:u}=this.rasterInfo.storageInfo;n=z.projectPoint(n,c,b);if(!m.intersects(n)||0>f||f>r)return null;b=this.getPyramidPixelSize(f);const {x:G,y:Q}=b;b=(u.y-n.y)/Q/L;const O=(n.x-u.x)/G/x;return{pyramidLevel:f,row:Math.floor(b),col:Math.floor(O),rowOffset:Math.min(L-1,Math.floor((b-Math.floor(b))*L)),colOffset:Math.min(x-1,Math.floor((O-Math.floor(O))*x)),srcLocation:n}};p.getTileExtent=
function(n,f,b,c,m,x){const [L,r]=x;b=c.x+b*L*n.x;f=c.y-f*r*n.y;return new d({xmin:b,xmax:b+L*n.x,ymin:f-r*n.y,ymax:f,spatialReference:m})};p.getBlockWidthHeight=function(n){return{blockWidth:0<n?this.rasterInfo.storageInfo.pyramidBlockWidth:this.rasterInfo.storageInfo.blockWidth,blockHeight:0<n?this.rasterInfo.storageInfo.pyramidBlockHeight:this.rasterInfo.storageInfo.blockHeight}};p.isBlockOutside=function(n,f,b){n=this.rasterInfo.storageInfo.blockBoundary[n];return!n||n.maxRow<f||n.maxCol<b||n.minRow>
f||n.minCol>b};p._fetchRawTile=function(n,f,b,c){var m=this.rasterInfo.storageInfo.blockBoundary[n];if(!m)return Promise.resolve(null);const {minRow:x,minCol:L,maxCol:r,maxRow:u}=m;if(f<x||b<L||f>u||b>r)return Promise.resolve(null);const G=F.getRasterId(this.url,c.sliceId),Q=`${n}/${f}/${b}`;m=F.getBlock(G,c.registryId,Q);if(S.isNone(m)){const O=I.createAbortController();m=this.fetchRawTile(n,f,b,{...c,signal:O.signal});F.putBlock(G,c.registryId,Q,m,O);m.catch(()=>F.deleteBlock(G,c.registryId,Q))}if(c.signal)I.onAbort(c,
()=>{F.decreaseRefCount(G,c.registryId,Q)});return m};p._getIndexFromDimensions=function(n,f){const {extent:b,interval:c,unit:m,values:x}=f;if(null!=x&&x.length)return Array.isArray(x[0])?x.findIndex(G=>G[0]<=n&&G[1]>=n):x.indexOf(n);if(n>b[1])return-1;const L=b[0];let r=-1;if("ISO8601"===m){var u;switch((null==(u=f.intervalUnit)?void 0:u.toLowerCase())||"seconds"){case "seconds":r=Math.round((n-L)/1E3/c);break;case "minutes":r=Math.round((n-L)/6E4/c);break;case "hours":r=Math.round((n-L)/36E5/c);
break;case "days":r=Math.round((n-L)/864E5/c);break;case "years":r=Math.round(((new Date(n)).getUTCFullYear()-(new Date(L)).getUTCFullYear())/c);break;case "decades":r=Math.round(((new Date(n)).getUTCFullYear()-(new Date(L)).getUTCFullYear())/10/c)}return r}return Math.round((n-L)/c)};p._getDimensionValuesCount=function(n){const {extent:f,interval:b,unit:c,values:m}=n;let x=(null==m?void 0:m.length)||0;if(x)return x;const L=f[0];if(0===x&&"ISO8601"===c){var r;switch((null==(r=n.intervalUnit)?void 0:
r.toLowerCase())||"seconds"){case "seconds":x=Math.round((f[1]-f[0])/1E3/b);break;case "minutes":x=Math.round((f[1]-f[0])/6E4/b);break;case "hours":x=Math.round((f[1]-f[0])/36E5/b);break;case "days":x=Math.round((f[1]-f[0])/864E5/b);break;case "years":x=Math.round(((new Date(f[1])).getUTCFullYear()-(new Date(L)).getUTCFullYear())/b);break;case "decades":x=Math.round(((new Date(f[1])).getUTCFullYear()-(new Date(L)).getUTCFullYear())/10/b)}return x}return Math.round((f[1]-f[0])/b)};p._getRasterTileAlignmentInfo=
function(n,f){null==this._rasterTileAlighmentInfo&&(this._rasterTileAlighmentInfo=z.getRasterDatasetAlignmentInfo(this.rasterInfo));return S.isSome(this._rasterTileAlighmentInfo.pyramidsInfo)?{startX:f,halfWorldWidth:this._rasterTileAlighmentInfo.halfWorldWidth,hasGCSSShiftTransform:this._rasterTileAlighmentInfo.hasGCSSShiftTransform,...this._rasterTileAlighmentInfo.pyramidsInfo[n]}:null};p._getRequestOptionsWithSliceId=function(n){var f;null!=(f=n.multidimensionalDefinition)&&f.length&&S.isSome(this.rasterInfo.multidimensionalInfo)&&
null==n.sliceId&&(n={...n,sliceId:this.getSliceIndex(n.multidimensionalDefinition)||0});return n};U._createClass(g,[{key:"url",set:function(n){this._set("url",h.sanitizeUrl(n,T.getLogger(this.declaredClass)))}}]);return g}(P.EsriPromiseMixin(N.JSONSupport));t.__decorate([D.property()],E.prototype,"_rasterTileAlighmentInfo",void 0);t.__decorate([D.property(v.url)],E.prototype,"url",null);t.__decorate([D.property({type:String,json:{write:!0}})],E.prototype,"datasetName",void 0);t.__decorate([D.property({type:String,
json:{write:!0}})],E.prototype,"datasetFormat",void 0);t.__decorate([D.property()],E.prototype,"rasterInfo",void 0);t.__decorate([D.property()],E.prototype,"ioConfig",void 0);t.__decorate([D.property()],E.prototype,"sourceJSON",void 0);return E=t.__decorate([H.subclass("esri.layers.support.rasterDatasets.BaseRaster")],E)})},"esri/layers/support/rasterDatasets/RawBlockCache":function(){define("exports ../../../geometry ../../../core/maybe ./EphemeralBlockCache ../rasterFunctions/rasterProjectionHelper ../../../geometry/Point".split(" "),
function(U,t,E,J,A,N){function T(I,D){if(!S.has(I))return null;I=S.get(I);return null==I[D]?null:I[D]}const S=new Map,P=new J;U.decreaseRefCount=function(I,D,q){if(!S.has(I))return null==D?P.decreaseRefCount(I,q):0;const B=S.get(I);if(null==B[D])return P.decreaseRefCount(I,q);D=B[D].cache;if(D.has(q)){I=D.get(q);I.refCount--;if(0===I.refCount){D.delete(q);for(D=0;D<B.length;D++)B[D]&&B[D].cache.has(q)&&B[D].cache.delete(q);I.controller&&I.controller.abort()}return I.refCount}return 0};U.deleteBlock=
function(I,D,q){if(S.has(I)){var B=S.get(I);null==B[D]?P.deleteBlock(I,q):B[D].cache.delete(q)}else null==D&&P.deleteBlock(I,q)};U.deleteRaster=function(I){S.delete(I)};U.getBlock=function(I,D,q){if(!S.has(I))return null==D?P.getBlock(I,q):null;var B=S.get(I);if(null==B[D]){for(D=0;D<B.length;D++)if(B[D]&&B[D].cache.has(q))return q=B[D].cache.get(q),q.refCount++,q.block;return P.getBlock(I,q)}I=B[D].cache;if(I.has(q))return q=I.get(q),q.refCount++,q.block;for(let H=0;H<B.length;H++)if(H!==D&&B[H]&&
B[H]&&B[H].cache.has(q))return B=B[H].cache.get(q),B.refCount++,I.set(q,B),B.block;return null};U.getRasterId=function(I,D){return null==D?I:`${I}?sliceId=${D}`};U.putBlock=function(I,D,q,B,H=null){if(S.has(I)){var h=S.get(I);if(null==h[D])P.putBlock(I,q,B,H);else{var v={refCount:1,block:B,isResolved:!1,isRejected:!1,controller:H};B.then(()=>v.isResolved=!0).catch(()=>v.isRejected=!0);h[D].cache.set(q,v)}}else null==D&&P.putBlock(I,q,B,H)};U.register=function(I,D){D={extent:null,rasterInfo:D,cache:new Map};
if(S.has(I))return I=S.get(I),I.push(D),I.length-1;S.set(I,[D]);return 0};U.unregister=function(I,D){if(S.has(I)){const q=S.get(I);q[D]=null;q.some(B=>null!=B)||S.delete(I)}};U.update=function(I,D,q,B,H,h,v=null){I=T(I,D);D=I.extent;const {cache:k,rasterInfo:y}=I;if(!D||D.xmin!==q.xmin||D.xmax!==q.xmax||D.ymin!==q.ymin||D.ymax!==q.ymax){D=q.clone().normalize();var {spatialReference:F,transform:w}=y,C=new Set;for(let g=0;g<D.length;g++){var z=D[g];if(z.xmax-z.xmin<=B||z.ymax-z.ymin<=B)continue;var l=
A.projectExtent(z,F,v);E.isSome(w)&&(l=w.inverseTransform(l));var a=new N({x:B,y:B,spatialReference:z.spatialReference});if(null==H&&(H=A.projectResolution(a,F,z,v),!H))return;const {pyramidLevel:p,pyramidResolution:n,excessiveReading:f}=A.snapPyramid(H,y,h||"closest");if(f)return;({storageInfo:z}=y);var {origin:d}=z;a=Math.max(0,Math.floor((l.xmin-d.x)/n.x));d=Math.max(0,Math.floor((d.y-l.ymax)/n.y));const b=0<p?z.pyramidBlockWidth:z.blockWidth,c=0<p?z.pyramidBlockHeight:z.blockHeight;z=Math.max(0,
Math.floor(a/b)-1);var e=Math.max(0,Math.floor(d/c)-1);a=Math.floor((a+Math.ceil((l.xmax-l.xmin)/n.x-.1)-1)/b)+1;l=Math.floor((d+Math.ceil((l.ymax-l.ymin)/n.y-.1)-1)/c)+1;for(d=e;d<=l;d++)for(e=z;e<=a;e++)C.add(`${p}/${d}/${e}`)}k.forEach((g,p)=>{C.has(p)||(g=k.get(p),(null==g||g.isResolved||g.isRejected)&&k.delete(p))});I.extent={xmin:q.xmin,ymin:q.ymin,xmax:q.xmax,ymax:q.ymax}}};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/rasterDatasets/EphemeralBlockCache":function(){define(function(){return function(){function U(E=
15E3,J=5E3){this._timer=null;this._cachedBlocks=new Map;this._size=-1;this._duration=E;this._interval=Math.min(E,J)}var t=U.prototype;t.decreaseRefCount=function(E,J){E=E+"/"+J;J=this._cachedBlocks;if(J.has(E)){const A=J.get(E);A.refCount--;0>=A.refCount&&(J.delete(E),A.controller&&A.controller.abort());return A.refCount}return 0};t.getBlock=function(E,J){E=E+"/"+J;J=this._cachedBlocks;if(J.has(E)){const A=J.get(E);A.ts=Date.now();A.refCount++;J.delete(E);J.set(E,A);return A.block}return null};t.putBlock=
function(E,J,A,N=null){const T=this._cachedBlocks;E=E+"/"+J;T.has(E)?(A=T.get(E),A.ts=Date.now(),A.refCount++):T.set(E,{block:A,ts:Date.now(),refCount:1,controller:N});this.trim();this.updateTimer()};t.deleteBlock=function(E,J){const A=this._cachedBlocks;E=E+"/"+J;A.has(E)&&A.delete(E)};t.updateMaxSize=function(E){this._size=E;this.trim()};t.empty=function(){this._cachedBlocks.clear();this.clearTimer()};t.getCurrentSize=function(){return this._cachedBlocks.size};t.updateTimer=function(){if(null==
this._timer){var E=this._cachedBlocks;this._timer=setInterval(()=>{const J=Array.from(E),A=Date.now();for(let N=0;N<J.length;N++)if(J[N][1].ts<=A-this._duration)E.delete(J[N][0]);else break;0===E.size&&this.clearTimer()},this._interval)}};t.trim=function(){const E=this._cachedBlocks;if(!(-1===this._size||this._size>=E.size)){var J=Array.from(E);for(let A=0;A<J.length-this._size;A++)E.delete(J[A][0])}};t.clearTimer=function(){null!=this._timer&&(clearInterval(this._timer),this._timer=null)};return U}()})},
"esri/layers/support/rasterFunctions/rasterProjectionHelper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/webMercatorUtils ../../../geometry/Extent ../../../geometry/Point".split(" "),function(U,t,E,J,A,N,T,S,P,I){function D(){D=t._asyncToGenerator(function*(){if(T.isLoaded()||!T.isSupported())return null;yield T.load()});return D.apply(this,
arguments)}function q(a,d,e,g=null){if(a.spatialReference.equals(d))return a;const p=z(a.spatialReference,d);if(p&&!T.isLoaded())throw new J("rasterprojectionhelper-projectResolution","projection engine is not loaded");e=e.center;a=new P({xmin:e.x-a.x/2,xmax:e.x+a.x/2,ymin:e.y-a.y/2,ymax:e.y+a.y/2,spatialReference:a.spatialReference});d=p?T.project(a,d,g):S.project(a,d);return A.isNone(d)?null:{x:d.xmax-d.xmin,y:d.ymax-d.ymin}}function B(a,d=.01){return N.getMetersPerUnitForSR(a)?d/N.getMetersPerUnitForSR(a):
0}function H(a,d,e=null,g=!0){const p=a.spatialReference;if(p.equals(d))return a;let n=S.project(a,d);if(A.isNone(n)){if(!T.isLoaded())throw new J("rasterprojectionhelper-projectResolution","projection engine is not loaded");n=T.project(a,d,e)}if(g&&d.isGeographic){const [f,b]=F(p,!0);(d=B(p))&&null!=f&&null!=b&&(Math.abs(a.x-f)<d&&5E-4>Math.abs(180-n.x)?n.x-=360:Math.abs(a.x-b)<d&&5E-4>Math.abs(180+n.x)&&(n.x+=360))}return n}function h(a){const d=y(a[0].spatialReference);if(2>a.length||!A.isSome(d))return a[0];
let {xmin:e,xmax:g,ymin:p,ymax:n}=a[0];for(let f=1;f<a.length;f++){const b=a[f];g=b.xmax+d*f;p=Math.min(p,b.ymin);n=Math.max(n,b.ymax)}return new P({xmin:e,xmax:g,ymin:p,ymax:n,spatialReference:a[0].spatialReference})}function v(a,d,e=null,g=!0){if(a.spatialReference.equals(d))return a;const p=C(a),n=y(a.spatialReference,!0);if(!A.isSome(n)||0===p)return k(a,d,e,g);a=a.clone().normalize().map(f=>k(f,d,e,g));return h(a)}function k(a,d,e=null,g=!0){const p=a.spatialReference;if(p.equals(d))return a;
if(z(p,d)&&!T.isLoaded())throw new J("rasterprojectionhelper-projectExtent","projection engine is not loaded");let n=S.project(a,d);A.isNone(n)&&(n=T.project(a,d,e));let [f,b]=F(p,!0);n&&g&&p.isWebMercator&&d.isGeographic&&null!=f&&null!=b&&(.001>Math.abs(a.xmin-f)&&1E3<Math.abs(b-a.xmax)&&5E-4>Math.abs(180-n.xmax)&&(n.xmin=-180,g=[],g.push(new I(a.xmax,a.ymin,p)),g.push(new I(a.xmax,(a.ymin+a.ymax)/2,p)),g.push(new I(a.xmax,a.ymax,p)),g=g.map(c=>H(c,d,e)).filter(c=>!isNaN(null==c?void 0:c.x)).map(c=>
c.x),n.xmax=Math.max.apply(null,g)),.001>Math.abs(a.xmax-b)&&1E3<Math.abs(f-a.xmin)&&5E-4>Math.abs(180+n.xmin)&&(n.xmax=180,g=[],g.push(new I(a.xmin,a.ymin,p)),g.push(new I(a.xmin,(a.ymin+a.ymax)/2,p)),g.push(new I(a.xmin,a.ymax,p)),a=g.map(c=>H(c,d,e)).filter(c=>!isNaN(null==c?void 0:c.x)).map(c=>c.x),n.xmin=Math.min.apply(null,a)));[f,b]=F(d,!0);(a=B(d))&&null!=f&&null!=b&&(Math.abs(n.xmin-f)<a&&(n.xmin=f),Math.abs(n.xmax-b)<a&&(n.xmax=b));return n}function y(a,d=!1){return a.isWebMercator?2*(d?
2.0037508342787E7:2.0037508342788905E7):a.wkid&&a.isGeographic?360:2*l[a.wkid]||null}function F(a,d=!1){const e=[];a=y(a,d);A.isSome(a)&&(e.push(-a/2),e.push(a/2));return e}function w(a,d,e,g){a=(a-d)/e;0!==a-Math.floor(a)?a=Math.floor(a):g&&--a;return a}function C(a,d=!1){const e=y(a.spatialReference);if(!A.isSome(e))return 0;const g=d?0:-(e/2);d=w(a.xmax,g,e,!0);a=w(a.xmin,g,e,!1);return d-a}const z=function(a,d){const e=(a.isWGS84||a.isWebMercator)&&(d.isWGS84||d.isWebMercator);return!(a.equals(d)||
e)},l={3395:2.0037508342789244E7,3410:1.7334193943686873E7,3832:3339584.723798206,3857:2.0037508342788905E7,3975:1.7367530445161372E7,4087:2.0037508342789244E7,4088:2.0015108787169147E7,6933:1.7367530445161372E7,8858:7396237.374497803,8859:2465412.4581659334,32662:2.0037508342789244E7,53001:2.001508679602057E7,53002:1.000754339801029E7,53003:2.001508679602057E7,53004:2.001508679602057E7,53016:1.4152803599503474E7,53017:1.7333573624304302E7,53025:7276828.3848298555,53031:1.0384677558821043E7,53034:2.001508679602057E7,
53036:7389443.187332862,53037:2463147.729110953,53079:2.0015114352186374E7,53080:2.0015114352186374E7,54001:2.0037508342789244E7,54002:1.0018754171394624E7,54003:2.0037508342789244E7,54004:2.0037508342789244E7,54016:1.4168658027268292E7,54017:1.736753044516137E7,54025:7311399.09166516,54031:1.0396310810074743E7,54034:2.0037508342789244E7,54050:808820.9223376509,54053:1920897.3915568967,54079:2.0037508342789244E7,54080:2.0037508342789244E7,54100:2.0037508342789244E7,54101:2.0037508342789244E7,102038:4297258.582585486,
102299:5013965.117483125};U.computeProjectedScales=function(a,d,e=512,g=!0){const {extent:p,spatialReference:n,pixelSize:f}=a,b=q(new I({x:f.x,y:f.y,spatialReference:n}),d,p);if(null==b)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};var c=(b.x+b.y)/2,m=N.getMetersPerUnitForSR(d);c=c*m*96*39.37;const x=d.isGeographic?256/e*2.958287637958547E8:256/e*5.91657527591555E8;e="vector-magdir"===a.dataType||"vector-uv"===a.dataType;const L=v(p,d);e||g&&(d.isGeographic||
d.isWebMercator)&&(e=0>L.xmin*L.xmax);g=c;if(e)g=x,a=d.isGeographic?1.341104507446289E-6:.29858214164761665,m=96*a*m*39.37,d=q(new I({x:a,y:a,spatialReference:{wkid:d.isGeographic?4326:3857}}),n,L),d.x*=g/m,d.y*=g/m;else{d={x:f.x,y:f.y};a=Math.ceil(Math.log(Math.min(a.width,a.height)/32)/Math.LN2);for(m=0;g<.5005*x&&m<a;)m++,g*=2,d.x*=2,d.y*=2;1.001>=Math.max(g,x)/Math.min(g,x)&&(g=x)}a=[g];m=[{x:d.x,y:d.y}];for(c=Math.min(70.5310735,c)/1.001;g>=c;)g/=2,d.x/=2,d.y/=2,a.push(g),m.push({x:d.x,y:d.y});
return{projectedPixelSize:b,scales:a,srcResolutions:m,isCustomTilingScheme:!e}};U.defaultGridSpacing=32;U.getDefaultDatumTransformationForDataset=function(a,d,e){if(!z(a.spatialReference,d))return null;if(!T.isLoaded())throw new J("rasterprojectionhelper-projectResolution","projection engine is not loaded");return e?T.getTransformation(d,a.spatialReference,a):T.getTransformation(a.spatialReference,d,a)};U.getProjectionOffsetGrid=function(a,d,e,g=null,p=null,n=!1,f=[32,32]){if(z(a.spatialReference,
d.spatialReference)&&!T.isLoaded())throw new J("rasterprojectionhelper-projectResolution","projection engine is not loaded");if(!(a&&d&&e))return null;const {xmin:b,ymin:c,xmax:m,ymax:x}=a;var L=a.spatialReference,r=d.spatialReference,u=y(r);n=n||"gcs-shift"===(null==p?void 0:p.type);var G=f[0]*e.x,Q=f[1]*e.y;e=Math.ceil((m-b)/G-.1/f[0])+1;a=Math.ceil((x-c)/Q-.1/f[1])+1;const O=[];let W=!1;for(var X=0;X<e;X++){var K=[];for(var M=0;M<a;M++){var V=new I({x:b+G*X,y:x-Q*M,spatialReference:L});V=H(V,r,
g);p&&(V=p.inverseTransform(V));K.push(V);0<X&&n&&V&&R[M]&&A.isSome(u)&&V.x<R[M].x&&(V.x+=u);V?(O.push((V.x-d.xmin)/(d.xmax-d.xmin)),O.push((d.ymax-V.y)/(d.ymax-d.ymin))):(O.push(NaN),O.push(NaN),W=!0)}var R=K}d=[Math.abs((O[0]+O[4]+O[4*e]+O[4*e+4])/4-O[2*a+2]),Math.abs((O[1]+O[5]+O[4*a+1]+O[4*a+5])/4-O[2*a+3])];g=new Float32Array((e-1)*(a-1)*12);p=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]);n=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(R=0;R<e-1;R++){for(L=0;L<a-1;L++){K=R*a*2+2*L;G=O[K];r=O[K+1];
var aa=O[K+2],ca=O[K+3];K+=2*a;Q=O[K];u=O[K+1];X=O[K+2];K=O[K+3];M=0;V=12*(L*(e-1)+R);for(let da=0;3>da;da++)g[V++]=p[M++]*G+p[M++]*aa+p[M++]*X;M=0;for(aa=0;3>aa;aa++)g[V++]=p[M++]*r+p[M++]*ca+p[M++]*K;M=0;for(ca=0;3>ca;ca++)g[V++]=n[M++]*G+n[M++]*Q+n[M++]*X;M=0;for(G=0;3>G;G++)g[V++]=n[M++]*r+n[M++]*u+n[M++]*K}if(W)for(L=0;L<g.length;L++)isNaN(g[L])&&(g[L]=-1)}return{offsets:O,error:d,coefficients:g,spacing:f,size:[e-1,a-1]}};U.getRasterDatasetAlignmentInfo=function(a){const d=a.storageInfo.origin.x,
e=y(a.spatialReference,!0);if(!A.isSome(e))return{originX:d,halfWorldWidth:null,pyramidsInfo:null};const g=e/2,{nativePixelSize:p,storageInfo:n,extent:f}=a,{maximumPyramidLevel:b,blockWidth:c,pyramidScalingFactor:m}=n;let x=p.x;const L=[];a=A.isSome(a.transform)&&"gcs-shift"===a.transform.type;const r=d+g,u=a?e-d:g-d;for(let G=0;G<=b;G++){const Q=(f.xmax-d)/x/c,O=(e/2-d)/x/c;L.push({resolutionX:x,blockWidth:c,datsetColumnCount:0===Q-Math.floor(Q)?Q:Math.ceil(Q),worldColumnCountFromOrigin:0===O-Math.floor(O)?
O:Math.ceil(O),leftMargin:Math.round(r/x)%c,rightPadding:(c-Math.round(u/x)%c)%c,originColumnOffset:Math.floor(r/x/c)});x*=m}return{originX:d,halfWorldWidth:g,pyramidsInfo:L,hasGCSSShiftTransform:a}};U.getWorldWrapCount=C;U.load=function(){return D.apply(this,arguments)};U.projectExtent=v;U.projectPoint=H;U.projectResolution=q;U.snapExtent=function(a){a=a.clone().normalize();return 1===a.length?a[0]:h(a)};U.snapPyramid=function(a,d,e){const {storageInfo:g,pixelSize:p}=d;let n=!1;var {pyramidResolutions:f}=
g;if(A.isSome(f)&&f.length){a=(a.x+a.y)/2;var b=f[f.length-1];b=(b.x+b.y)/2;var c=(p.x+p.y)/2;if(a<=c)var m=0;else if(a>=b)m=f.length,n=8<a/b;else{b=c;for(let x=1;x<=f.length;x++){c=(f[x-1].x+f[x-1].y)/2;if(a<=c){a===c?m=x:"down"===e?(m=x-1,n=8<a/b):m="up"===e?x:a-b>c-a||2<a/b?x:x-1;break}b=c}}e=0===m?p:f[m-1];return{pyramidLevel:m,pyramidResolution:new I({x:e.x,y:e.y,spatialReference:d.spatialReference}),excessiveReading:n}}m=Math.log(a.x/p.x)/Math.LN2;a=Math.log(a.y/p.y)/Math.LN2;f=d.storageInfo.maximumPyramidLevel||
0;m="down"===e?Math.floor(Math.min(m,a)):"up"===e?Math.ceil(Math.max(m,a)):Math.round((m+a)/2);0>m?m=0:m>f&&(n=m>f+3,m=f);e=2**m;d=new I({x:e*d.nativePixelSize.x,y:e*d.nativePixelSize.y,spatialReference:d.spatialReference});return{pyramidLevel:m,pyramidResolution:d,excessiveReading:n}};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils".split(" "),
function(U,t,E,J,A,N,T,S,P,I,D,q,B,H,h,v,k,y,F,w,C,z,l){function a(){return!!Ea&&H.isLoaded()}function d(Z){N.isNone(Sa)&&(Sa=Promise.all([H.load(),(new Promise(function(ba,Y){U(["../chunks/geometryEngineBase"],ba,Y)})).then(function(ba){return ba.geometryEngineBase}),new Promise(function(ba,Y){U(["./geometryAdapters/hydrated"],ba,Y)})]));return Sa.then(([,ba,{hydratedAdapter:Y}])=>{T.throwIfAborted(Z);Oa=Y;Ea=ba.default;Ea._enableProjection(H.pe)})}function e(Z,ba,Y,ea,la=null){if(N.isNone(Y)||N.isNone(ea))return ba;
if(p(Y,ea,la))return ba.map(na=>N.unwrap(f(na,Y,ea)));if(N.isNone(la)){const na=z.cacheKey(Y,ea);void 0!==Ta[na]?la=Ta[na]:(la=g(Y,ea,null),N.isNone(la)&&(la=new z),Ta[na]=la)}if(N.isNone(Ea))throw new Xa;return Ea._project(Z,ba,Y,ea,la)}function g(Z,ba,Y=null){if(N.isNone(Ea))throw new Xa;if(N.isNone(Z)||N.isNone(ba))return null;Z=Ea._getTransformation(Oa,Z,ba,Y,null==Y?void 0:Y.spatialReference);return null!==Z?z.fromGE(Z):null}function p(Z,ba,Y){return Y?!1:l.equals(Z,ba)?!0:l.isValid(Z)&&l.isValid(ba)&&
!!Pa(Z,ba,Ya)}function n(){n=E._asyncToGenerator(function*(Z,ba,Y,ea){if(!a())if(Array.isArray(Z))for(const {source:la,dest:na,geographicTransformation:sa}of Z){if(!p(la,na,sa))return d(ea)}else if(!p(Z,ba,Y))return d(ea)});return n.apply(this,arguments)}function f(Z,ba,Y){return Z?"x"in Z?b(Z,ba,new h,Y,0):"xmin"in Z?L(Z,ba,new q,Y,0):"rings"in Z?x(Z,ba,new v,Y,0):"paths"in Z?m(Z,ba,new k,Y,0):"points"in Z?c(Z,ba,new B,Y,0):null:null}function b(Z,ba,Y,ea,la){xa[0]=Z.x;xa[1]=Z.y;const na=Z.z;xa[2]=
void 0!==na?na:la;if(!Q(xa,ba,0,xa,ea,0,1))return null;Y.x=xa[0];Y.y=xa[1];Y.spatialReference=ea;void 0===na?(Y.z=void 0,Y.hasZ=!1):(Y.z=xa[2],Y.hasZ=!0);void 0===Z.m?(Y.m=void 0,Y.hasM=!1):(Y.m=Z.m,Y.hasM=!0);return Y}function c(Z,ba,Y,ea,la){const {points:na,hasZ:sa,hasM:ua}=Z;Z=[];const Ca=na.length,Ba=[];for(var za of na)Ba.push(za[0],za[1],sa?za[2]:la);if(!Q(Ba,ba,0,Ba,ea,0,Ca))return null;for(ba=0;ba<Ca;++ba){la=3*ba;za=Ba[la];const Ga=Ba[la+1];sa&&ua?Z.push([za,Ga,Ba[la+2],na[ba][3]]):sa?Z.push([za,
Ga,Ba[la+2]]):ua?Z.push([za,Ga,na[ba][2]]):Z.push([za,Ga])}Y.points=Z;Y.spatialReference=ea;Y.hasZ=sa;Y.hasM=ua;return Y}function m(Z,ba,Y,ea,la){const {paths:na,hasZ:sa,hasM:ua}=Z;Z=[];if(!O(na,sa,ua,ba,Z,ea,la))return null;Y.paths=Z;Y.spatialReference=ea;Y.hasZ=sa;Y.hasM=ua;return Y}function x(Z,ba,Y,ea,la){const {rings:na,hasZ:sa,hasM:ua}=Z;Z=[];if(!O(na,sa,ua,ba,Z,ea,la))return null;Y.rings=Z;Y.spatialReference=ea;Y.hasZ=sa;Y.hasM=ua;return Y}function L(Z,ba,Y,ea,la){const {xmin:na,ymin:sa,xmax:ua,
ymax:Ca,hasZ:Ba,hasM:za}=Z;if(!r(na,sa,Ba?Z.zmin:la,ba,xa,ea))return null;Y.xmin=xa[0];Y.ymin=xa[1];Ba&&(Y.zmin=xa[2]);if(!r(ua,Ca,Ba?Z.zmax:la,ba,xa,ea))return null;Y.xmax=xa[0];Y.ymax=xa[1];Ba&&(Y.zmax=xa[2]);za&&(Y.mmin=Z.mmin,Y.mmax=Z.mmax);Y.spatialReference=ea;return Y}function r(Z,ba,Y,ea,la,na){ya[0]=Z;ya[1]=ba;ya[2]=Y;return Q(ya,ea,0,la,na,0,1)}function u(Z,ba,Y,ea){if(N.isNone(ba)||N.isNone(ea)||2>Z.length)return!1;2===Z.length&&(ya[0]=Z[0],ya[1]=Z[1],ya[2]=0,Z=ya);return Q(Z,ba,0,Y,ea,
0,1)}function G(Z,ba,Y){if(N.isNone(ba))return!1;ba=M(ba,Ua);ba=La[ba][6];if(N.isNone(ba))return!1;ba(Z,0,ya,0);Y!==ya&&(Y[0]=ya[0],Y[1]=ya[1],2<Y.length&&(Y[2]=ya[2]));return!0}function Q(Z,ba,Y,ea,la,na,sa=1){ba=Pa(ba,la,Ya);if(N.isNone(ba))return!1;if(ba===V){if(Z===ea&&Y===na)return!0;sa=Y+3*sa;for(let ua=Y,Ca=na;ua<sa;ua++,Ca++)ea[Ca]=Z[ua];return!0}sa=Y+3*sa;for(let ua=Y,Ca=na;ua<sa;ua+=3,Ca+=3)ba(Z,ua,ea,Ca);return!0}function O(Z,ba,Y,ea,la,na,sa=0){const ua=[];for(const Ca of Z)for(const Ba of Ca)ua.push(Ba[0],
Ba[1],ba?Ba[2]:sa);if(!Q(ua,ea,0,ua,na,0,ua.length/3))return!1;ea=0;la.length=0;for(const Ca of Z){Z=[];for(const Ba of Ca)ba&&Y?Z.push([ua[ea++],ua[ea++],ua[ea++],Ba[3]]):ba?Z.push([ua[ea++],ua[ea++],ua[ea++]]):(Y?Z.push([ua[ea++],ua[ea++],Ba[2]]):Z.push([ua[ea++],ua[ea++]]),ea++);la.push(Z)}return!0}function W(Z,ba,Y,ea){Z=Math.abs(Ia*Z)+Math.asin(Y/(ea+ba));return Z>=Math.PI/2?Number.MAX_VALUE:Y/Math.cos(Z)}function X(Z,ba,Y){const ea=Math.sin(Z);Z=Math.cos(Z);const la=Math.sin(ba);ba=Math.cos(ba);
Y[0]=-ea;Y[4]=-la*Z;Y[8]=ba*Z;Y[12]=0;Y[1]=Z;Y[5]=-la*ea;Y[9]=ba*ea;Y[13]=0;Y[2]=0;Y[6]=ba;Y[10]=la;Y[14]=0;Y[3]=0;Y[7]=0;Y[11]=0;Y[15]=1;return Y}function K(Z,ba,Y){X(Z,ba,Y);P.transpose(Y,Y);return Y}function M(Z,ba){if(ba.spatialReference===Z)return ba.spatialReferenceId;ba.spatialReference=Z;"metersPerUnit"in ba&&(ba.metersPerUnit=S.getMetersPerUnitForSR(Z,1));return Z.wkt===y.SphericalECEFSpatialReference.wkt?ba.spatialReferenceId=1:l.isWGS84(Z)?ba.spatialReferenceId=2:l.isWebMercator(Z)?ba.spatialReferenceId=
3:l.isPlateCarree(Z)?ba.spatialReferenceId=12:Z.wkt===y.WGS84ECEFSpatialReference.wkt?ba.spatialReferenceId=4:4490===Z.wkid?ba.spatialReferenceId=5:Z.wkt===y.SphericalPCPFMars.wkt?ba.spatialReferenceId=7:Z.wkt===y.SphericalPCPFMoon.wkt?ba.spatialReferenceId=9:l.isMars(Z)?ba.spatialReferenceId=8:l.isMoon(Z)?ba.spatialReferenceId=10:ba.spatialReferenceId=0}function V(Z,ba,Y,ea){Z!==Y&&(Y[ea++]=Z[ba++],Y[ea++]=Z[ba++],Y[ea]=Z[ba])}function R(Z,ba,Y,ea){Y[ea++]=Qa*(Z[ba++]/w.earth.radius);Y[ea++]=Qa*
(Math.PI/2-2*Math.atan(Math.exp(-Z[ba++]/w.earth.radius)));Y[ea]=Z[ba]}function aa(Z,ba,Y,ea){R(Z,ba,Y,ea);oa(Y,ea,Y,ea)}function ca(Z,ba,Y,ea){R(Z,ba,Y,ea);Aa(Y,ea,Y,ea)}function da(Z,ba,Y,ea,la){var na=.4999999*Math.PI;na=A.clamp(Ia*Z[ba+1],-na,na);na=Math.sin(na);Y[ea++]=Ia*Z[ba]*la.radius;Y[ea++]=la.halfSemiMajorAxis*Math.log((1+na)/(1-na));Y[ea]=Z[ba+2]}function fa(Z,ba,Y,ea){da(Z,ba,Y,ea,w.earth)}function ha(Z,ba,Y,ea){Y[ea]=Z[ba]*Za;Y[ea+1]=Z[ba+1]*Za;Y[ea+2]=Z[ba+2]}function ka(Z,ba,Y,ea){Y[ea]=
Z[ba]*Va;Y[ea+1]=Z[ba+1]*Va;Y[ea+2]=Z[ba+2]}function qa(Z,ba,Y,ea,la){la+=Z[ba+2];const na=Ia*Z[ba+1];Z=Ia*Z[ba];ba=Math.cos(na);Y[ea++]=Math.cos(Z)*ba*la;Y[ea++]=Math.sin(Z)*ba*la;Y[ea]=Math.sin(na)*la}function pa(Z,ba,Y,ea){qa(Z,ba,Y,ea,w.moon.radius)}function ja(Z,ba,Y,ea){qa(Z,ba,Y,ea,w.mars.radius)}function oa(Z,ba,Y,ea){qa(Z,ba,Y,ea,w.earth.radius)}function ma(Z,ba,Y,ea,la){var na=Z[ba];const sa=Z[ba+1];ba=Z[ba+2];Z=Math.sqrt(na*na+sa*sa+ba*ba);ba=A.asinClamped(ba/(0===Z?1:Z));na=Math.atan2(sa,
na);Y[ea++]=Qa*na;Y[ea++]=Qa*ba;Y[ea]=Z-la}function ia(Z,ba,Y,ea){ma(Z,ba,Y,ea,w.moon.radius)}function va(Z,ba,Y,ea){ma(Z,ba,Y,ea,w.mars.radius)}function wa(Z,ba,Y,ea){ma(Z,ba,Y,ea,w.earth.radius)}function Fa(Z,ba,Y,ea){wa(Z,ba,Y,ea);fa(Y,ea,Y,ea)}function Da(Z,ba,Y,ea){wa(Z,ba,Y,ea);Aa(Y,ea,Y,ea)}function Aa(Z,ba,Y,ea){{var la=w.earth;const sa=Ia*Z[ba];var na=Ia*Z[ba+1];Z=Z[ba+2];ba=Math.sin(na);na=Math.cos(na);const ua=la.radius/Math.sqrt(1-la.eccentricitySquared*ba*ba);Y[ea++]=(ua+Z)*na*Math.cos(sa);
Y[ea++]=(ua+Z)*na*Math.sin(sa);Y[ea++]=(ua*(1-la.eccentricitySquared)+Z)*ba}}function ta(Z,ba,Y,ea){var la=C.earthEllipsoidConstants,na=Z[ba],sa=Z[ba+1];Z=Z[ba+2];let ua;ba=Math.abs(Z);var Ca=na*na+sa*sa;var Ba=Math.sqrt(Ca);var za=Ca+Z*Z;var Ga=Math.sqrt(za);na=Math.atan2(sa,na);var Ma=Z*Z/za;za=Ca/za;sa=la.a2/Ga;Ca=la.a3-la.a4/Ga;.3<za?(Ma=ba/Ga*(1+za*(la.a1+sa+Ma*Ca)/Ga),Ga=Math.asin(Ma),sa=Ma*Ma,za=Math.sqrt(1-sa)):(za=Ba/Ga*(1-Ma*(la.a5-sa-za*Ca)/Ga),Ga=Math.acos(za),sa=1-za*za,Ma=Math.sqrt(sa));
ua=1-w.earth.eccentricitySquared*sa;sa=w.earth.radius/Math.sqrt(ua);la=la.a6*sa;sa=Ba-sa*za;Ca=ba-la*Ma;ba=za*sa+Ma*Ca;Ba=za*Ca-Ma*sa;la=Ba/(la/ua+ba);Ga+=la;0>Z&&(Ga=-Ga);Y[ea++]=Qa*na;Y[ea++]=Qa*Ga;Y[ea]=ba+Ba*la/2}function ra(Z,ba,Y,ea){ta(Z,ba,Y,ea);oa(Y,ea,Y,ea)}function Ha(Z,ba,Y,ea){ta(Z,ba,Y,ea);fa(Y,ea,Y,ea)}function Pa(Z,ba,Y=Ja()){return N.isNone(Z)||N.isNone(ba)?null:Ra(Z,ba,Y).projector}function Ra(Z,ba,Y){if(N.isNone(Z)||N.isNone(ba)||Y.source.spatialReference===Z&&Y.dest.spatialReference===
ba)return Y;const ea=M(Z,Y.source),la=M(ba,Y.dest);0===ea&&0===la?l.equals(Z,ba)?Y.projector=V:Y.projector=null:Y.projector=La[ea][la];return Y}function Ja(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:V}}let Ea=null,Oa=null,Sa=null,Ta={},Xa=function(Z){function ba(){return Z.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}E._inheritsLoose(ba,
Z);return ba}(J);const Za=w.earth.radius*Math.PI/180,Va=180/(w.earth.radius*Math.PI),La={[2]:{[5]:null,[8]:null,[10]:null,[11]:V,[6]:V,[1]:oa,[7]:null,[9]:null,[0]:null,[3]:fa,[12]:ha,[2]:V,[4]:Aa},[5]:{[5]:V,[8]:null,[10]:null,[11]:V,[6]:V,[1]:oa,[7]:null,[9]:null,[0]:null,[3]:null,[12]:ha,[2]:null,[4]:Aa},[8]:{[5]:null,[8]:V,[10]:null,[11]:V,[6]:null,[1]:null,[7]:ja,[9]:null,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:V,[11]:V,[6]:null,[1]:null,[7]:null,[9]:pa,[0]:null,
[3]:null,[12]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[11]:R,[6]:R,[1]:aa,[7]:null,[9]:null,[0]:null,[3]:V,[12]:function(Z,ba,Y,ea){R(Z,ba,Y,ea);ha(Y,ea,Y,ea)},[2]:R,[4]:ca},[4]:{[5]:ta,[8]:null,[10]:null,[11]:ta,[6]:ta,[1]:ra,[7]:null,[9]:null,[0]:null,[3]:Ha,[12]:function(Z,ba,Y,ea){ta(Z,ba,Y,ea);ha(Y,ea,Y,ea)},[2]:ta,[4]:V},[1]:{[5]:wa,[8]:null,[10]:null,[11]:wa,[6]:wa,[1]:V,[7]:null,[9]:null,[0]:null,[3]:Fa,[12]:function(Z,ba,Y,ea){wa(Z,ba,Y,ea);ha(Y,ea,Y,ea)},[2]:wa,[4]:Da},
[7]:{[5]:null,[8]:va,[10]:null,[11]:va,[6]:null,[1]:null,[7]:V,[9]:null,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[9]:{[5]:null,[8]:null,[10]:ia,[11]:ia,[6]:null,[1]:null,[7]:null,[9]:V,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,[11]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:V,[3]:null,[12]:null,[2]:null,[4]:null},[11]:{[5]:V,[8]:V,[10]:V,[11]:V,[6]:V,[1]:oa,[7]:ja,[9]:pa,[0]:null,[3]:fa,[12]:ha,[2]:V,[4]:Aa},[6]:{[5]:null,[8]:null,[10]:null,[11]:V,[6]:V,
[1]:oa,[7]:null,[9]:null,[0]:null,[3]:null,[12]:ha,[2]:V,[4]:Aa},[12]:{[5]:ka,[8]:null,[10]:null,[11]:ka,[6]:ka,[1]:function(Z,ba,Y,ea){ka(Z,ba,Y,ea);oa(Y,ea,Y,ea)},[7]:null,[9]:null,[0]:null,[3]:function(Z,ba,Y,ea){ka(Z,ba,Y,ea);fa(Y,ea,Y,ea)},[12]:V,[2]:ka,[4]:function(Z,ba,Y,ea){ka(Z,ba,Y,ea);Aa(Y,ea,Y,ea)}}},Ua={spatialReference:null,spatialReferenceId:0},$a={spatialReference:null,spatialReferenceId:0},Ya=Ja(),ab=Ja(),Ia=A.deg2rad(1),Qa=A.rad2deg(1),ya=D.create(),Ka=D.create(),Na=D.create(),xa=
D.create(),Wa=D.create();t.canProjectToWGS84ComparableLonLat=function(Z){if(N.isNone(Z))return!1;Z=M(Z,Ua);return!!La[Z][6]};t.canProjectWithoutEngine=p;t.computeENUToSphericalPCPFLocalRotation=X;t.computeSphericalPCPFToENULocalRotation=K;t.computeTranslationToOriginAndRotation=function(Z,ba,Y,ea){if(N.isNone(Z)||N.isNone(ea))return!1;var la=M(Z,Ua),na=M(ea,$a);if(la===na&&1!==na&&7!==na&&9!==na&&(0!==la||l.equals(Z,ea)))return P.identity(Y),P.translate(Y,Y,ba),!0;if(1===na||7===na||9===na){la=La[la][11];
na=La[11][na];if(N.isNone(la)||N.isNone(na))return!1;la(ba,0,Ka,0);na(Ka,0,Na,0);X(Ia*Ka[0],Ia*Ka[1],Y);Y[12]=Na[0];Y[13]=Na[1];Y[14]=Na[2];return!0}if(!(3!==na&&12!==na||2!==la&&1!==la)){Z=La[la][11];na=La[11][na];if(N.isNone(Z)||N.isNone(na))return!1;Z(ba,0,Ka,0);na(Ka,0,Na,0);2===la?P.identity(Y):K(Ia*Ka[0],Ia*Ka[1],Y);Y[12]=Na[0];Y[13]=Na[1];Y[14]=Na[2];return!0}return!1};t.getProjectorName=function(Z,ba){switch(Pa(Z,ba,Ya)){case V:return"copy3";case oa:return"wgs84ToSphericalECEF";case fa:return"wgs84ToWebMercator";
case ha:return"wgs84ToPlateCarree";case Aa:return"wgs84ToWGS84ECEF";case R:return"webMercatorToWGS84";case aa:return"webMercatorToSphericalECEF";case ca:return"webMercatorToWGS84ECEF";case ta:return"wgs84ECEFToWGS84";case ra:return"wgs84ECEFToSphericalECEF";case Ha:return"wgs84ECEFToWebMercator";case wa:return"sphericalECEFToWGS84";case Fa:return"sphericalECEFToWebMercator";case va:return"sphericalMarsPCPFToMars2000";case ia:return"sphericalMoonPCPFToMoon2000";case Da:return"sphericalECEFToWGS84ECEF";
case ja:return"mars2000ToSphericalPCPF";case pa:return"moon2000ToSphericalPCPF";default:return null}};t.getTransformation=g;t.getTransformations=function(Z,ba,Y=null){if(N.isNone(Ea))throw new Xa;Z=Ea._getTransformationBySuitability(Oa,Z,ba,Y,null==Y?void 0:Y.spatialReference);if(null!==Z){ba=[];for(const ea of Z)ba.push(z.fromGE(ea));return ba}return[]};t.initializeProjection=function(Z,ba,Y,ea){return n.apply(this,arguments)};t.isLoaded=a;t.isSupported=function(){return!0};t.load=d;t.localLinearScaleFactors=
function(Z,ba,Y,ea){if(N.isNone(ba)||N.isNone(ea))return!1;const la=M(ba,Ua);var na=M(ea,$a);if(la===na&&0!==la||l.equals(ba,ea))return Y[0]=1,Y[1]=1,Y[2]=1,!0;if(1===la){ba=I.length(Z);Z=ba/Math.sqrt(Z[0]*Z[0]+Z[1]*Z[1]);ba/=w.earth.radius;if(3===na)return Y[0]=Z*ba,Y[1]=Z*ba,Y[2]=1,!0;if(2===na||5===na)return na=180/(w.earth.radius*Math.PI),Y[0]=na*Z*ba,Y[1]=na*ba,Y[2]=1,!0}else if(12===la&&(2===na||5===na))return Y[0]=Va,Y[1]=Va,Y[2]=1,!0;return!1};t.lonLatToSphericalPCPF=function(Z,ba,Y,ea,la=
0){ea+=la;la=Math.cos(Y);Z[0]=Math.cos(ba)*la*ea;Z[1]=Math.sin(ba)*la*ea;Z[2]=Math.sin(Y)*ea};t.lonLatToWebMercatorComparable=da;t.project=function(Z,ba,Y=null){return Array.isArray(Z)?0===Z.length?[]:e(Oa,Z,Z[0].spatialReference,ba,Y):e(Oa,[Z],Z.spatialReference,ba,Y)[0]};t.projectBoundingRect=function(Z,ba,Y,ea){if(null==Z)return!1;if(l.equals(ba,ea))return F.copy(Y,Z),!0;ya[0]=Z[0];ya[1]=Z[1];ya[2]=0;if(!Q(ya,ba,0,ya,ea,0,1))return!1;Y[0]=ya[0];Y[1]=ya[1];ya[0]=Z[2];ya[1]=Z[3];ya[2]=0;if(!Q(ya,
ba,0,ya,ea,0,1))return!1;Y[2]=ya[0];Y[3]=ya[1];return!0};t.projectBoundingSphere=function(Z,ba,Y,ea){if(N.isNone(ba)||N.isNone(ea))return!1;ba=Ra(ba,ea,ab);if(ba.projector===V)return Y[0]=Z[0],Y[1]=Z[1],Y[2]=Z[2],Y[3]=Z[3],!0;if(N.isNone(ba.projector))return!1;const {source:la,dest:na}=ba;if(3===na.spatialReferenceId){ba=La[la.spatialReferenceId][2];if(N.isNone(ba))return!1;ba(Z,0,Ka,0);fa(Ka,0,Y,0);Y[3]=W(Ka[1],Z[2],Z[3],w.earth.radius);return!0}if(2!==la.spatialReferenceId&&5!==la.spatialReferenceId||
12!==na.spatialReferenceId)ba.projector(Z,0,Y,0),Y[3]=Z[3]*la.metersPerUnit/na.metersPerUnit;else{ea=La[1][12];let sa=Z[3];N.isSome(La[la.spatialReferenceId][1])&&N.isSome(ea)&&(sa=W(Z[1],Z[2],Z[3],w.earth.radius));ba.projector(Z,0,Y,0);Y[3]=sa}return!0};t.projectBuffer=Q;t.projectDirection=function(Z,ba,Y,ea,la){I.copy(xa,Z);I.add(Wa,Z,ba);u(xa,Y,xa,la);u(Wa,Y,Wa,la);I.subtract(ea,Wa,xa);I.normalize(ea,ea)};t.projectExtent=function(Z,ba,Y=ba.spatialReference,ea=0){return N.isSome(Y)&&N.isSome(L(Z,
Z.spatialReference,ba,Y,ea))};t.projectMany=e;t.projectMultipoint=function(Z,ba,Y=ba.spatialReference,ea=0){return N.isNone(Y)?!1:N.isSome(c(Z,Z.spatialReference,ba,Y,ea))};t.projectPoint=function(Z,ba,Y=ba.spatialReference,ea=0){return N.isNone(Y)?!1:N.isSome(b(Z,Z.spatialReference,ba,Y,ea))};t.projectPointToVector=function(Z,ba,Y,ea=0){xa[0]=Z.x;xa[1]=Z.y;const la=Z.z;xa[2]=void 0!==la?la:ea;return Q(xa,Z.spatialReference,0,ba,Y,0,1)};t.projectPointToWGS84ComparableLonLat=function(Z,ba){xa[0]=Z.x;
xa[1]=Z.y;const Y=Z.z;xa[2]=void 0!==Y?Y:0;return G(xa,Z.spatialReference,ba)};t.projectPolygon=function(Z,ba,Y=ba.spatialReference,ea=0){return N.isSome(Y)&&N.isSome(x(Z,Z.spatialReference,ba,Y,ea))};t.projectPolyline=function(Z,ba,Y=ba.spatialReference,ea=0){return N.isSome(Y)&&N.isSome(m(Z,Z.spatialReference,ba,Y,ea))};t.projectVectorToDehydratedPoint=function(Z,ba,Y){return Q(Z,ba,0,xa,Y.spatialReference,0,1)?(Y.x=xa[0],Y.y=xa[1],Y.z=xa[2],Y):null};t.projectVectorToPoint=function(Z,ba,Y){if(N.isNone(ba)||
N.isNone(Y))return null;const ea=new h({spatialReference:Y});return Q(Z,ba,0,xa,Y,0,1)?(ea.x=xa[0],ea.y=xa[1],ea.z=xa[2],ea):null};t.projectVectorToVector=u;t.projectVectorToWGS84ComparableLonLat=function(Z,ba,Y){return G(Z,ba,Y)};t.projectWithoutEngine=f;t.projectXYZToVector=r;t.sphericalPCPFtoLonLatElevation=ma;t.unload=function(){Sa=Oa=Ea=null;Ta={}};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets",
"../core/has"],function(U,t,E,J,A){function N(){return!!t._pe}function T(){return!!A("esri-wasm")}function S(){return H?H:H=(new Promise(function(v,k){U(["./pe-wasm"],v,k)})).then(function(v){return v.peWasm}).then(({default:v})=>v({locateFile:k=>J.getAssetUrl(`esri/geometry/support/${k}`)})).then(v=>{P(v)})}function P(v){function k(w,C,z){w[C]=z(w[C])}t._pe=v;t.PeDefs.init();t.PeGTlistExtended.init();t.PeNotationMgrs.init();t.PeNotationUtm.init();t.PePCSInfo.init();t.PeGCSExtent=function(w){function C(){return w.apply(this,
arguments)||this}E._inheritsLoose(C,w);C.prototype.destroy=function(){t._pe.destroy(this)};return C}(t._pe.PeGCSExtent);v=[t._pe.PeDatum,t._pe.PeGeogcs,t._pe.PeGeogtran,t._pe.PeObject,t._pe.PeParameter,t._pe.PePrimem,t._pe.PeProjcs,t._pe.PeSpheroid,t._pe.PeUnit];for(var y of v)k(y.prototype,"getName",w=>function(){return w.call(this,Array(t.PeDefs.PE_NAME_MAX))});for(const w of[t._pe.PeGeogtran,t._pe.PeProjcs])k(w.prototype,"getParameters",C=>function(){const z=Array(t.PeDefs.PE_PARM_MAX);let l=C.call(this);
for(let a=0;a<z.length;a++){const d=t._pe.getValue(l,"*");z[a]=d?t._pe.wrapPointer(d,t._pe.PeParameter):null;l+=Int32Array.BYTES_PER_ELEMENT}return z});k(t._pe.PeHorizon.prototype,"getCoord",w=>function(){const C=this.getSize();if(!C)return null;const z=[],l=w.call(this);B(z,C,l);return z});k(t._pe.PeGTlistExtendedEntry.prototype,"getEntries",w=>{const C=t._pe._pe_getPeGTlistExtendedGTsSize();return function(){let z=null;var l=w.call(this);if(!t._pe.compare(l,t._pe.NULL)){z=[l];const a=this.getSteps();
if(1<a){l=t._pe.getPointer(l);for(let d=1;d<a;d++)z.push(t._pe.wrapPointer(l+C*d,t._pe.PeGTlistExtendedGTs))}}return z}});const F=t._pe._pe_getPeHorizonSize();y=w=>function(){let C=this._cache;C||(this._cache=C=new Map);if(C.has(w))return C.get(w);let z=null;var l=w.call(this);if(!t._pe.compare(l,t._pe.NULL)){z=[l];const a=l.getNump();if(1<a){l=t._pe.getPointer(l);for(let d=1;d<a;d++)z.push(t._pe.wrapPointer(l+F*d,t._pe.PeHorizon))}}C.set(w,z);return z};k(t._pe.PeProjcs.prototype,"horizonGcsGenerate",
y);k(t._pe.PeProjcs.prototype,"horizonPcsGenerate",y);t._pe.PeObject.prototype.toString=function(w=t.PeDefs.PE_STR_OPTS_NONE){t._pe.ensureCache.prepare();const C=t._pe.getPointer(this),z=t._pe.ensureInt8(Array(t.PeDefs.PE_BUFFER_MAX));return t._pe.UTF8ToString(t._pe._pe_object_to_string_ext(C,w,z))}}function I(v){if(v){var k=t._pe.getClass(v);k&&(k=t._pe.getCache(k))&&(v=t._pe.getPointer(v))&&delete k[v]}}function D(v,k){const y=[];k=Array(k);for(let F=0;F<v;F++)y.push(t._pe.ensureInt8(k));return y}
function q(v){let k;Array.isArray(v[0])?(k=[],v.forEach(y=>{k.push(y[0],y[1])})):k=v;return k}function B(v,k,y,F=!1){if(F)for(F=0;F<2*k;F++)v[F]=t._pe.getValue(y+F*Float64Array.BYTES_PER_ELEMENT,"double");else{F=0===v.length;for(let w=0;w<k;w++)F&&(v[w]=Array(2)),v[w][0]=t._pe.getValue(y,"double"),v[w][1]=t._pe.getValue(y+Float64Array.BYTES_PER_ELEMENT,"double"),y+=2*Float64Array.BYTES_PER_ELEMENT}}let H;t._pe=null;t.PeCSTransformations=void 0;(function(v){function k(w,C,z){t._pe.ensureCache.prepare();
var l=q(z);const a=z===l;l=t._pe.ensureFloat64(l);(w=t._pe._pe_geog_to_proj(t._pe.getPointer(w),C,l))&&B(z,C,l,a);return w}function y(w,C,z){return F(w,C,z,0)}function F(w,C,z,l){t._pe.ensureCache.prepare();var a=q(z);const d=z===a;a=t._pe.ensureFloat64(a);(w=t._pe._pe_proj_to_geog_center(t._pe.getPointer(w),C,a,l))&&B(z,C,a,d);return w}v.geogToProj=k;v.projGeog=function(w,C,z,l){switch(l){case t.PeDefs.PE_TRANSFORM_P_TO_G:return y(w,C,z);case t.PeDefs.PE_TRANSFORM_G_TO_P:return k(w,C,z)}return 0};
v.projToGeog=y;v.projToGeogCenter=F})(t.PeCSTransformations||(t.PeCSTransformations={}));t.PeDefs=void 0;(function(v){v.init=function(){v.PE_BUFFER_MAX=t._pe.PeDefs.prototype.PE_BUFFER_MAX;v.PE_NAME_MAX=t._pe.PeDefs.prototype.PE_NAME_MAX;v.PE_MGRS_MAX=t._pe.PeDefs.prototype.PE_MGRS_MAX;v.PE_USNG_MAX=t._pe.PeDefs.prototype.PE_USNG_MAX;v.PE_DD_MAX=t._pe.PeDefs.prototype.PE_DD_MAX;v.PE_DDM_MAX=t._pe.PeDefs.prototype.PE_DDM_MAX;v.PE_DMS_MAX=t._pe.PeDefs.prototype.PE_DMS_MAX;v.PE_UTM_MAX=t._pe.PeDefs.prototype.PE_UTM_MAX;
v.PE_PARM_MAX=t._pe.PeDefs.prototype.PE_PARM_MAX;v.PE_TYPE_NONE=t._pe.PeDefs.prototype.PE_TYPE_NONE;v.PE_TYPE_GEOGCS=t._pe.PeDefs.prototype.PE_TYPE_GEOGCS;v.PE_TYPE_PROJCS=t._pe.PeDefs.prototype.PE_TYPE_PROJCS;v.PE_TYPE_GEOGTRAN=t._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;v.PE_TYPE_COORDSYS=t._pe.PeDefs.prototype.PE_TYPE_COORDSYS;v.PE_TYPE_UNIT=t._pe.PeDefs.prototype.PE_TYPE_UNIT;v.PE_TYPE_LINUNIT=t._pe.PeDefs.prototype.PE_TYPE_LINUNIT;v.PE_STR_OPTS_NONE=t._pe.PeDefs.prototype.PE_STR_OPTS_NONE;v.PE_STR_AUTH_NONE=
t._pe.PeDefs.prototype.PE_STR_AUTH_NONE;v.PE_STR_AUTH_TOP=t._pe.PeDefs.prototype.PE_STR_AUTH_TOP;v.PE_STR_NAME_CANON=t._pe.PeDefs.prototype.PE_STR_NAME_CANON;v.PE_PARM_X0=t._pe.PeDefs.prototype.PE_PARM_X0;v.PE_PARM_ND=t._pe.PeDefs.prototype.PE_PARM_ND;v.PE_TRANSFORM_1_TO_2=t._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;v.PE_TRANSFORM_2_TO_1=t._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;v.PE_TRANSFORM_P_TO_G=t._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;v.PE_TRANSFORM_G_TO_P=t._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;
v.PE_HORIZON_RECT=t._pe.PeDefs.prototype.PE_HORIZON_RECT;v.PE_HORIZON_POLY=t._pe.PeDefs.prototype.PE_HORIZON_POLY;v.PE_HORIZON_LINE=t._pe.PeDefs.prototype.PE_HORIZON_LINE;v.PE_HORIZON_DELTA=t._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(t.PeDefs||(t.PeDefs={}));t.PeFactory=void 0;(function(v){function k(C,z){let l=null,a=y[C];a||(a={},y[C]=a);a.hasOwnProperty(String(z))?l=a[z]:(C=t._pe.PeFactory.prototype.factoryByType(C,z),t._pe.compare(C,t._pe.NULL)||(l=C,a[z]=l));return l=w(l)}const y={},F={},w=C=>
{if(C){const z=C.getType();switch(z){case t.PeDefs.PE_TYPE_GEOGCS:C=t._pe.castObject(C,t._pe.PeGeogcs);break;case t.PeDefs.PE_TYPE_PROJCS:C=t._pe.castObject(C,t._pe.PeProjcs);break;case t.PeDefs.PE_TYPE_GEOGTRAN:C=t._pe.castObject(C,t._pe.PeGeogtran);break;default:z&t.PeDefs.PE_TYPE_UNIT&&(C=t._pe.castObject(C,t._pe.PeUnit))}}return C};v.initialize=function(){t._pe.PeFactory.prototype.initialize(null)};v.coordsys=function(C){return k(t.PeDefs.PE_TYPE_COORDSYS,C)};v.factoryByType=k;v.fromString=function(C,
z){let l=null,a=F[C];a||(a={},F[C]=a);a.hasOwnProperty(z)?l=a[z]:(C=t._pe.PeFactory.prototype.fromString(C,z),t._pe.compare(C,t._pe.NULL)||(l=C,a[z]=l));return l=w(l)};v.geogcs=function(C){return k(t.PeDefs.PE_TYPE_GEOGCS,C)};v.geogtran=function(C){return k(t.PeDefs.PE_TYPE_GEOGTRAN,C)};v.getCode=function(C){return t._pe.PeFactory.prototype.getCode(C)};v.projcs=function(C){return k(t.PeDefs.PE_TYPE_PROJCS,C)};v.unit=function(C){return k(t.PeDefs.PE_TYPE_UNIT,C)}})(t.PeFactory||(t.PeFactory={}));t.PeGCSExtent=
null;t.PeGTlistExtended=void 0;(function(v){let k;v.init=function(){v.PE_GTLIST_OPTS_COMMON=t._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;k=t._pe._pe_getPeGTlistExtendedEntrySize()};v.getGTlist=function(y,F,w,C,z,l){let a=null;const d=new t._pe.PeInteger(l);try{const e=t._pe.PeGTlistExtended.prototype.getGTlist(y,F,w,C,z,d);if(l=d.val)if(a=[e],1<l){const g=t._pe.getPointer(e);for(y=1;y<l;y++)a.push(t._pe.wrapPointer(g+k*y,t._pe.PeGTlistExtendedEntry))}}finally{t._pe.destroy(d)}return a}})(t.PeGTlistExtended||
(t.PeGTlistExtended={}));t.PeGTlistExtendedEntry=void 0;(function(v){v.destroy=function(k){if(k&&k.length){for(const y of k)I(y),y.getEntries().forEach(F=>{I(F);F=F.getGeogtran();I(F);F.getParameters().forEach(I);[F.getGeogcs1(),F.getGeogcs2()].forEach(w=>{I(w);const C=w.getDatum();I(C);I(C.getSpheroid());I(w.getPrimem());I(w.getUnit())})});t._pe.PeGTlistExtendedEntry.prototype.Delete(k[0])}}})(t.PeGTlistExtendedEntry||(t.PeGTlistExtendedEntry={}));t.PeGTTransformations=void 0;(function(v){v.geogToGeog=
function(k,y,F,w,C){t._pe.ensureCache.prepare();var z=q(F);const l=F===z;z=t._pe.ensureFloat64(z);let a=0;w&&(a=t._pe.ensureFloat64(w));(k=t._pe._pe_geog_to_geog(t._pe.getPointer(k),y,z,a,C))&&B(F,y,z,l);return k}})(t.PeGTTransformations||(t.PeGTTransformations={}));t.PeNotationDms=void 0;(function(v){const k=(F,w,C,z,l,a)=>{t._pe.ensureCache.prepare();switch(F){case "dd":var d=t._pe._pe_geog_to_dd;var e=t.PeDefs.PE_DD_MAX;break;case "ddm":d=t._pe._pe_geog_to_ddm;e=t.PeDefs.PE_DDM_MAX;break;case "dms":d=
t._pe._pe_geog_to_dms,e=t.PeDefs.PE_DMS_MAX}F=0;w&&(F=t._pe.getPointer(w));w=q(z);w=t._pe.ensureFloat64(w);e=D(C,e);z=t._pe.ensureInt32(e);if(l=d(F,C,w,l,z))for(d=0;d<C;d++)a[d]=t._pe.UTF8ToString(e[d]);return l},y=(F,w,C,z,l)=>{t._pe.ensureCache.prepare();switch(F){case "dd":var a=t._pe._pe_dd_to_geog;break;case "ddm":a=t._pe._pe_ddm_to_geog;break;case "dms":a=t._pe._pe_dms_to_geog}F=0;w&&(F=t._pe.getPointer(w));w=z.map(d=>t._pe.ensureString(d));z=t._pe.ensureInt32(w);w=t._pe.ensureFloat64(Array(2*
C));(a=a(F,C,z,w))&&B(l,C,w);return a};v.geog_to_dms=function(F,w,C,z,l){return k("dms",F,w,C,z,l)};v.dms_to_geog=function(F,w,C,z){return y("dms",F,w,C,z)};v.geog_to_ddm=function(F,w,C,z,l){return k("ddm",F,w,C,z,l)};v.ddm_to_geog=function(F,w,C,z){return y("ddm",F,w,C,z)};v.geog_to_dd=function(F,w,C,z,l){return k("dd",F,w,C,z,l)};v.dd_to_geog=function(F,w,C,z){return y("dd",F,w,C,z)}})(t.PeNotationDms||(t.PeNotationDms={}));t.PeNotationMgrs=void 0;(function(v){v.init=function(){v.PE_MGRS_STYLE_NEW=
t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;v.PE_MGRS_STYLE_OLD=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;v.PE_MGRS_STYLE_AUTO=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;v.PE_MGRS_180_ZONE_1_PLUS=t._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;v.PE_MGRS_ADD_SPACES=t._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};v.geog_to_mgrs_extended=function(k,y,F,w,C,z,l){t._pe.ensureCache.prepare();let a=0;k&&(a=t._pe.getPointer(k));k=q(F);F=t._pe.ensureFloat64(k);k=D(y,t.PeDefs.PE_MGRS_MAX);
const d=t._pe.ensureInt32(k);if(w=t._pe._pe_geog_to_mgrs_extended(a,y,F,w,C,z,d))for(C=0;C<y;C++)l[C]=t._pe.UTF8ToString(k[C]);return w};v.mgrs_to_geog_extended=function(k,y,F,w,C){t._pe.ensureCache.prepare();let z=0;k&&(z=t._pe.getPointer(k));k=F.map(l=>t._pe.ensureString(l));F=t._pe.ensureInt32(k);k=t._pe.ensureFloat64(Array(2*y));(w=t._pe._pe_mgrs_to_geog_extended(z,y,F,w,k))&&B(C,y,k);return w}})(t.PeNotationMgrs||(t.PeNotationMgrs={}));t.PeNotationUsng=void 0;(function(v){v.geog_to_usng=function(k,
y,F,w,C,z,l){t._pe.ensureCache.prepare();let a=0;k&&(a=t._pe.getPointer(k));k=q(F);F=t._pe.ensureFloat64(k);k=D(y,t.PeDefs.PE_MGRS_MAX);const d=t._pe.ensureInt32(k);if(w=t._pe._pe_geog_to_usng(a,y,F,w,C,z,d))for(C=0;C<y;C++)l[C]=t._pe.UTF8ToString(k[C]);return w};v.usng_to_geog=function(k,y,F,w){t._pe.ensureCache.prepare();var C=0;k&&(C=t._pe.getPointer(k));k=F.map(z=>t._pe.ensureString(z));F=t._pe.ensureInt32(k);k=t._pe.ensureFloat64(Array(2*y));(C=t._pe._pe_usng_to_geog(C,y,F,k))&&B(w,y,k);return C}})(t.PeNotationUsng||
(t.PeNotationUsng={}));t.PeNotationUtm=void 0;(function(v){v.init=function(){v.PE_UTM_OPTS_NONE=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;v.PE_UTM_OPTS_ADD_SPACES=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;v.PE_UTM_OPTS_NS=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};v.geog_to_utm=function(k,y,F,w,C){t._pe.ensureCache.prepare();var z=0;k&&(z=t._pe.getPointer(k));k=q(F);F=t._pe.ensureFloat64(k);k=D(y,t.PeDefs.PE_UTM_MAX);const l=t._pe.ensureInt32(k);if(w=t._pe._pe_geog_to_utm(z,y,F,
w,l))for(z=0;z<y;z++)C[z]=t._pe.UTF8ToString(k[z]);return w};v.utm_to_geog=function(k,y,F,w,C){t._pe.ensureCache.prepare();let z=0;k&&(z=t._pe.getPointer(k));k=F.map(l=>t._pe.ensureString(l));F=t._pe.ensureInt32(k);k=t._pe.ensureFloat64(Array(2*y));(w=t._pe._pe_utm_to_geog(z,y,F,w,k))&&B(C,y,k);return w}})(t.PeNotationUtm||(t.PeNotationUtm={}));t.PePCSInfo=void 0;(function(v){const k=new Map;v.init=function(){v.PE_PCSINFO_OPTION_NONE=t._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;v.PE_PCSINFO_OPTION_DOMAIN=
t._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;v.PE_POLE_OUTSIDE_BOUNDARY=t._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;v.PE_POLE_POINT=t._pe.PePCSInfo.prototype.PE_POLE_POINT};v.generate=function(y,F=v.PE_PCSINFO_OPTION_DOMAIN){let w,C;k.has(y)&&(C=k.get(y),C[F]&&(w=C[F]));w||(w=t._pe.PePCSInfo.prototype.generate(y,F),C||(C=[],k.set(y,C)),C[F]=w);return w}})(t.PePCSInfo||(t.PePCSInfo={}));t.PeVersion=void 0;(function(v){v.version_string=function(){return t._pe.PeVersion.prototype.version_string()}})(t.PeVersion||
(t.PeVersion={}));var h=Object.freeze({__proto__:null,get _pe(){return t._pe},isLoaded:N,isSupported:T,load:S,get PeCSTransformations(){return t.PeCSTransformations},get PeDefs(){return t.PeDefs},get PeFactory(){return t.PeFactory},get PeGCSExtent(){return t.PeGCSExtent},get PeGTlistExtended(){return t.PeGTlistExtended},get PeGTlistExtendedEntry(){return t.PeGTlistExtendedEntry},get PeGTTransformations(){return t.PeGTTransformations},get PeNotationDms(){return t.PeNotationDms},get PeNotationMgrs(){return t.PeNotationMgrs},
get PeNotationUsng(){return t.PeNotationUsng},get PeNotationUtm(){return t.PeNotationUtm},get PePCSInfo(){return t.PePCSInfo},get PeVersion(){return t.PeVersion},_init:P});t._init=P;t.isLoaded=N;t.isSupported=T;t.load=S;t.pe=h})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(U,t){const E=Math.PI/180;var J=t.earth.radius;const A=t.earth.eccentricitySquared;J={a1:J*A,a2:J*A*J*A,a3:J*A*A/2,a4:J*A*J*A*2.5,a5:J*A+J*A*A/2,a6:1-A};t={4267:{a:6378206.4,f:1/
294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:t.earth.radius,f:t.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:t.moon.radius,f:t.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:t.mars.radius,f:t.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,
f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,
f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},
104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:t.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};U.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;U.earthEllipsoidConstants=J;U.spheroids=t;U.toRadians=E;Object.defineProperty(U,"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],
function(U){return function(){function t(J){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(J&&J.steps)for(const A of J.steps)A instanceof U?this.steps.push(A):this.steps.push(new U({wkid:A.wkid,wkt:A.wkt,isInverse:A.isInverse}))}t.cacheKey=function(J,A){return[void 0!==J.wkid&&null!==J.wkid?J.wkid.toString():"-1",void 0!==J.wkt&&null!==J.wkt?J.wkt.toString():"",void 0!==A.wkid&&null!==A.wkid?A.wkid.toString():"-1",void 0!==A.wkt&&null!==A.wkt?A.wkt.toString():""].join()};
t.fromGE=function(J){const A=new t;let N="";for(const T of J.steps)J=U.fromGE(T),A.steps.push(J),N+=J.uid.toString()+",";A._cached_projection={};A._gtlistentry=null;A._chain=N;return A};var E=t.prototype;E.getInverse=function(){const J=new t;J.steps=[];for(let A=this.steps.length-1;0<=A;A--)J.steps.push(this.steps[A].getInverse());return J};E.getGTListEntry=function(){let J="";for(const A of this.steps)J+=A.uid.toString()+",";J!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=
J);return this._gtlistentry};E.assignCachedGe=function(J,A,N){this._cached_projection[t.cacheKey(J,A)]=N};E.getCachedGeTransformation=function(J,A){let N="";for(const T of this.steps)N+=T.uid.toString()+",";N!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=N);J=this._cached_projection[t.cacheKey(J,A)];return void 0===J?null:J};return t}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(U){let t=
0;return function(){function E(J=null){this.uid=t++;J?(this._wkt=void 0!==J.wkt?J.wkt:null,this._wkid=void 0!==J.wkid?J.wkid:-1,this._isInverse=void 0!==J.isInverse?!0===J.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}E.fromGE=function(J){const A=new E;A._wkt=J.wkt;A._wkid=J.wkid;A._isInverse=J.isInverse;return A};E.prototype.getInverse=function(){const J=new E;J._wkt=this.wkt;J._wkid=this._wkid;J._isInverse=!this.isInverse;return J};U._createClass(E,[{key:"wkt",get:function(){return this._wkt},
set:function(J){this._wkt=J;this.uid=t++}},{key:"wkid",get:function(){return this._wkid},set:function(J){this._wkid=J;this.uid=t++}},{key:"isInverse",get:function(){return this._isInverse},set:function(J){this._isInverse=J;this.uid=t++}}]);return E}()})},"esri/layers/support/rasterFormats/RasterCodec":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../PixelBlock ./ImageCanvasDecoder ./JpgPlus ../../../chunks/TiffDecoder ../../../chunks/LercCodec ../../../chunks/Zlib ./Raw ./utils".split(" "),
function(U,t,E,J,A,N,T,S,P,I,D){function q(e,g){if(!D.isPlatformLittleEndian)throw new E("rasterCoded:decode","lerc decoder is not supported on big endian platform");const {width:p,height:n,pixelType:f}=g;var b=C(f);const c=b.pixelTypeCtor;g=null==g.noDataValue?b.noDataValue:g.noDataValue;b=0;let m,x=0,L;const r=e.byteLength-10;for(;x<r;){var u=S.decode(e,{inputOffset:x,encodedMaskData:m,returnMask:0===b?!0:!1,returnEncodedMask:0===b?!0:!1,returnFileInfo:!0,pixelType:c,noDataValue:g});if(p&&n&&(u.width!==
p||u.height!==n))throw new E("rasterCoded:decode","lerc decoded result has width or height different from specified in options");x=u.fileInfo.eofOffset;0===b&&(m=u.encodedMaskData,L=new J({width:u.width,height:u.height,pixels:[],pixelType:f,mask:u.maskData,statistics:[]}));b++;L.addData({pixels:u.pixelData,statistics:{minValue:u.minValue,maxValue:u.maxValue,noDataValue:u.noDataValue}});10<r-x&&(u=String.fromCharCode.apply(null,new Uint8Array(e,x,10)),x+=-1<u.indexOf("CntZ")?u.indexOf("CntZ"):0)}return L}
function B(e,g){if(!D.isPlatformLittleEndian)throw new E("rasterCoded:decode","lerc decoder is not supported on big endian platform");var p=0,n=g.offset||0,f=0;let b;let c;const m=g.eof||e.byteLength-10,x=[],{width:L,height:r}=g;for(g=0;n<m;){var u;var G=T.Lerc2Codec.decode(e,{inputOffset:n,maskData:b,returnFileInfo:!0});if(L&&r&&(G.width!==L||G.height!==r))throw new E("rasterCoded:decode","lerc2 decoded result has width or height different from what's specified in options");n=G.fileInfo.eofOffset;
b=G.maskData;0===p&&(f=G.fileInfo.numValidPixel,c=new J({width:G.width,height:G.height,pixels:[],pixelType:G.fileInfo.pixelType,mask:b,statistics:[]}));G.fileInfo.mask&&0<G.fileInfo.mask.numBytes&&g++;b&&x.push(b);if(1<G.dimCount&&(null==(u=G.pixelData)?void 0:u.length)===G.width*G.height*G.dimCount){var Q,O,W,X;G.pixelData=G.pixelData.slice(-G.width*G.height);const K=null==(Q=G.dimStats)?void 0:null==(O=Q.minValues)?void 0:O[G.dimCount-1],M=null==(W=G.dimStats)?void 0:null==(X=W.maxValues)?void 0:
X[G.dimCount-1];null!=K&&null!=M&&(G.minValue=K,G.maxValue=M)}p++;c.addData({pixels:G.pixelData,statistics:{minValue:G.minValue,maxValue:G.maxValue}});10<m-n&&(G=String.fromCharCode.apply(null,new Uint8Array(e,n,10)),n+=-1<G.indexOf("Lerc")?G.indexOf("Lerc"):0)}n=p=e=0;if(1<g){n=c.width*c.height;b=new Uint8Array(n);b.set(x[0]);for(e=1;e<x.length;e++)for(f=x[e],p=0;p<n;p++)b[p]&=f[p];for(p=f=0;p<n;p++)f+=b[p];c.mask=b}c.validPixelCount=f;return c}function H(e,g){e=T.decode(e,g.pyramidLevel||0);e=new J({width:e.width,
height:e.height,pixels:e.pixels,pixelType:e.pixelType.toLowerCase(),mask:e.mask,statistics:null});e.updateStatistics();return e}function h(e){e=N.decode(e);e=new J({width:e.width,height:e.height,pixels:e.pixels,pixelType:"U8",mask:e.mask,statistics:null});e.updateStatistics();return e}function v(e,g){e=new Uint8Array(e);e=new a(e);const {width:p,height:n}=g;g=p*n;e=e.decode();let f=0;var b=0;let c;b=new Uint8Array(g);for(f=0;f<g;f++)b[f]=e[4*f+3];const m=new J({width:p,height:n,pixels:[],pixelType:"U8",
mask:b,statistics:[]});for(f=0;3>f;f++){c=new Uint8Array(g);for(b=0;b<g;b++)c[b]=e[4*b+f];m.addData({pixels:c})}m.updateStatistics();return m}function k(e,g,p,n){return y.apply(this,arguments)}function y(){y=t._asyncToGenerator(function*(e,g,p,n){e=yield(new A).decode(e,{applyJpegMask:!1,format:g,...p},n);e=new J(e);e.updateStatistics();return e});return y.apply(this,arguments)}function F(e){if(null==e)throw new E("rasterCodec:decode","parameter encodeddata is required.");e=new Uint8Array(e,0,10);
let g="";255===e[0]&&216===e[1]?g="jpg":137===e[0]&&80===e[1]&&78===e[2]&&71===e[3]?g="png":67===e[0]&&110===e[1]&&116===e[2]&&90===e[3]&&73===e[4]&&109===e[5]&&97===e[6]&&103===e[7]&&101===e[8]&&32===e[9]?g="lerc":76===e[0]&&101===e[1]&&114===e[2]&&99===e[3]&&50===e[4]&&32===e[5]?g="lerc2":73===e[0]&&73===e[1]&&42===e[2]&&0===e[3]||77===e[0]&&77===e[1]&&0===e[2]&&42===e[3]||73===e[0]&&73===e[1]&&43===e[2]&&0===e[3]||77===e[0]&&77===e[1]&&0===e[2]&&43===e[3]?g="tiff":71===e[0]&&73===e[1]&&70===e[2]?
g="gif":66===e[0]&&77===e[1]?g="bmp":-1<String.fromCharCode.apply(null,e).toLowerCase().indexOf("error")&&(g="error");return g}function w(e){let g=null;switch(e){case "lerc":g=q;break;case "lerc2":g=B;break;case "jpg":g=h;break;case "png":g=v;break;case "bsq":case "bip":g=(p,n)=>{{const {pixelTypeCtor:f}=C(n.pixelType),b=I.decode;p=b(p,{width:n.width,height:n.height,pixelType:f,format:e});n=new J({width:n.width,height:n.height,pixels:p.pixels,pixelType:n.pixelType,mask:p.mask,statistics:null});n.updateStatistics()}return n};
break;case "tiff":g=H;break;case "error":g=()=>{throw new E("rasterCodec:decode","input data contains error");};break;default:g=()=>{throw new E("rasterCodec:decode","unsupported raster format");}}return g}function C(e){let g=null,p=null;switch(e?e.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":p=255;g=Uint8Array;break;case "u16":p=p||65535;g=Uint16Array;break;case "u32":p=p||2**32-1;g=Uint32Array;break;case "s8":p=p||-128;g=Int8Array;break;case "s16":p=p||-32768;g=Int16Array;break;
case "s32":p=p||-(2**31);g=Int32Array;break;default:g=Float32Array}return{pixelTypeCtor:g,noDataValue:p}}function z(e,g=1){if(e){var {pixels:p,width:n,height:f,mask:b}=e;if(p&&0!==p.length){var c=p.length,m=n-1,x=f-1,L=[],r,u,G=J.getPixelArrayConstructor(e.pixelType);if(0===g){for(g=0;g<c;g++){var Q=p[g];var O=new G(m*x);for(r=0;r<x;r++){var W=r*n;for(u=0;u<m;u++)O[r*m+u]=Q[W+u]}L.push(O)}if(b){var X=new Uint8Array(m*x);for(r=0;r<x;r++)for(W=r*n,u=0;u<m;u++)X[r*m+u]=b[W+u]}}else{for(g=0;g<c;g++){Q=
p[g];O=new G(m*x);for(r=0;r<x;r++)for(W=r*n,u=0;u<m;u++)O[r*m+u]=(Q[W+u]+Q[W+u+1]+Q[W+n+u]+Q[W+n+u+1])/4;L.push(O)}if(b)for(X=new Uint8Array(m*x),r=0;r<x;r++)for(W=r*n,u=0;u<m;u++)X[r*m+u]=Math.min.apply(null,[b[W+u],b[W+u+1],b[W+n+u],b[W+n+u+1]])}e.width=m;e.height=x;e.mask=X;e.pixels=L}}}function l(){l=t._asyncToGenerator(function*(e,g={},p){if(null==e)throw new E("rasterCodec:decode","missing encodeddata parameter.");let n=g.format&&g.format.toLowerCase();if(!("bsq"!==n&&"bip"!==n||null!=g.width&&
null!=g.height))throw new E("rasterCodec:decode","requires width and height in options parameter.");if("tiff"===n&&g.customOptions)return g=T.decodeTileOrStrip(e,g.customOptions),g=new J({width:g.width,height:g.height,pixels:g.pixels,pixelType:g.pixelType.toLowerCase(),mask:g.mask,statistics:null}),g.updateStatistics(),g;if(!n||"bsq"!==n&&"bip"!==n)n=F(e);g.useCanvas&&d.has(n)?e=yield k(e,n,g,p):(p=w(n),g.isPoint&&(g={...g},g.width++,g.height++),e=p(e,g),g.isPoint&&z(e));return e});return l.apply(this,
arguments)}var a=function(e){function g(b){var c,m;this.data=b;this.pos=8;this.palette=[];this.imgData=[];this.transparency={};this.animation=null;this.text={};for(m=null;;){var x=this.readUInt32();var L=b=void 0;b=[];for(L=0;4>L;++L)b.push(String.fromCharCode(this.data[this.pos++]));b=b.join("");switch(b){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];this.colorType=this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=
this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||Infinity,frames:[]};break;case "PLTE":this.palette=this.read(x);break;case "fcTL":m&&this.animation.frames.push(m);this.pos+=4;m={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};b=this.readUInt16();x=this.readUInt16()||100;m.delay=1E3*b/x;m.disposeOp=this.data[this.pos++];m.blendOp=this.data[this.pos++];
m.data=[];break;case "IDAT":case "fdAT":"fdAT"===b&&(this.pos+=4,x-=4);b=(null!=m?m.data:void 0)||this.imgData;for(L=0;0<=x?L<x:L>x;0<=x?++L:--L)b.push(this.data[this.pos++]);break;case "tRNS":this.transparency={};switch(this.colorType){case 3:this.transparency.indexed=this.read(x);x=255-this.transparency.indexed.length;if(0<x)for(b=0;0<=x?b<x:b>x;0<=x?++b:--b)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(x)[0];break;case 2:this.transparency.rgb=this.read(x)}break;
case "tEXt":L=this.read(x);x=L.indexOf(0);b=String.fromCharCode.apply(String,L.slice(0,x));this.text[b]=String.fromCharCode.apply(String,L.slice(x+1));break;case "IEND":m&&this.animation.frames.push(m);a:{switch(this.colorType){case 0:case 3:case 4:m=1;break a;case 2:case 6:m=3;break a}m=void 0}this.colors=m;this.hasAlphaChannel=4===(c=this.colorType)||6===c;c=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*c;a:{switch(this.colors){case 1:c="DeviceGray";break a;case 3:c="DeviceRGB";
break a}c=void 0}this.colorSpace=c;this.imgData=new Uint8Array(this.imgData);return;default:this.pos+=x}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");}}var p;g.load=function(b,c,m){"function"===typeof c&&(m=c);var x=new XMLHttpRequest;x.open("GET",b,!0);x.responseType="arraybuffer";x.onload=function(){var L=new Uint8Array(x.response||x.mozResponseArrayBuffer);L=new g(L);"function"===typeof(null!=c?c.getContext:void 0)&&L.render(c);return"function"===typeof m?
m(L):void 0};return x.send(null)};g.prototype.read=function(b){var c;var m=[];for(c=0;0<=b?c<b:c>b;0<=b?++c:--c)m.push(this.data[this.pos++]);return m};g.prototype.readUInt32=function(){var b=this.data[this.pos++]<<24;var c=this.data[this.pos++]<<16;var m=this.data[this.pos++]<<8;var x=this.data[this.pos++];return b|c|m|x};g.prototype.readUInt16=function(){var b=this.data[this.pos++]<<8;var c=this.data[this.pos++];return b|c};g.prototype.decodePixels=function(b){var c,m,x,L,r,u,G,Q;null==b&&(b=this.imgData);
if(0===b.length)return new Uint8Array(0);b=new P.Zlib(b);b=b.getBytes();var O=this.pixelBitlength/8;var W=O*this.width;var X=new Uint8Array(W*this.height);var K=b.length;for(m=L=r=0;L<K;){switch(b[L++]){case 0:for(x=c=0;c<W;x=c+=1)X[m++]=b[L++];break;case 1:for(x=u=0;u<W;x=u+=1){c=b[L++];var M=x<O?0:X[m-O];X[m++]=(c+M)%256}break;case 2:for(x=M=0;M<W;x=M+=1){c=b[L++];var V=(x-x%O)/O;u=r&&X[(r-1)*W+V*O+x%O];X[m++]=(u+c)%256}break;case 3:for(x=Q=0;Q<W;x=Q+=1)c=b[L++],V=(x-x%O)/O,M=x<O?0:X[m-O],u=r&&
X[(r-1)*W+V*O+x%O],X[m++]=(c+Math.floor((M+u)/2))%256;break;case 4:for(x=Q=0;Q<W;x=Q+=1){c=b[L++];V=(x-x%O)/O;M=x<O?0:X[m-O];0===r?u=G=0:(u=X[(r-1)*W+V*O+x%O],G=V&&X[(r-1)*W+(V-1)*O+x%O]);var R=M+u-G;x=Math.abs(R-M);V=Math.abs(R-u);R=Math.abs(R-G);M=x<=V&&x<=R?M:V<=R?u:G;X[m++]=(c+M)%256}break;default:throw Error("Invalid filter algorithm: "+b[L-1]);}r++}return X};g.prototype.decodePalette=function(){var b,c,m,x,L;var r=this.palette;var u=this.transparency.indexed||[];var G=new Uint8Array((u.length||
0)+r.length);var Q=m=b=c=0;for(x=r.length;m<x;Q=m+=3)G[c++]=r[Q],G[c++]=r[Q+1],G[c++]=r[Q+2],G[c++]=null!=(L=u[b++])?L:255;return G};g.prototype.copyToImageData=function(b,c){var m,x;var L=this.colors;var r=null;var u=this.hasAlphaChannel;this.palette.length&&(r=null!=(m=this._decodedPalette)?m:this._decodedPalette=this.decodePalette(),L=4,u=!0);b=b.data||b;var G=b.length;var Q=r||c;m=x=0;if(1===L)for(;m<G;)L=r?4*c[m/4]:x,x=Q[L++],b[m++]=x,b[m++]=x,b[m++]=x,b[m++]=u?Q[L++]:this.transparency.grayscale&&
this.transparency.grayscale===x?0:255,x=L;else for(;m<G;)L=r?4*c[m/4]:x,b[m++]=Q[L++],b[m++]=Q[L++],b[m++]=Q[L++],b[m++]=u?Q[L++]:this.transparency.rgb&&this.transparency.rgb[1]===Q[L-3]&&this.transparency.rgb[3]===Q[L-2]&&this.transparency.rgb[5]===Q[L-1]?0:255,x=L};g.prototype.decode=function(){var b=new Uint8Array(this.width*this.height*4);this.copyToImageData(b,this.decodePixels());return b};var n=(p=e.document&&e.document.createElement("canvas"))&&p.getContext("2d");var f=function(b){n.width=
b.width;n.height=b.height;n.clearRect(0,0,b.width,b.height);n.putImageData(b,0,0);b=new Image;b.src=p.toDataURL();return b};g.prototype.decodeFrames=function(b){var c,m;if(this.animation){var x=this.animation.frames;var L=[];var r=c=0;for(m=x.length;c<m;r=++c){r=x[r];var u=b.createImageData(r.width,r.height);var G=this.decodePixels(new Uint8Array(r.data));this.copyToImageData(u,G);r.imageData=u;L.push(r.image=f(u))}return L}};g.prototype.renderFrame=function(b,c){var m=this.animation.frames;var x=
m[c];m=m[c-1];0===c&&b.clearRect(0,0,this.width,this.height);1===(null!=m?m.disposeOp:void 0)?b.clearRect(m.xOffset,m.yOffset,m.width,m.height):2===(null!=m?m.disposeOp:void 0)&&b.putImageData(m.imageData,m.xOffset,m.yOffset);0===x.blendOp&&b.clearRect(x.xOffset,x.yOffset,x.width,x.height);return b.drawImage(x.image,x.xOffset,x.yOffset)};g.prototype.animate=function(b){var c,m=this;var x=0;var L=this.animation;var r=L.numFrames;var u=L.frames;var G=L.numPlays;return(c=function(){var Q=x++%r;var O=
u[Q];m.renderFrame(b,Q);if(1<r&&x/r<G)return m.animation._timeout=setTimeout(c,O.delay)})()};g.prototype.stopAnimation=function(){var b;return clearTimeout(null!=(b=this.animation)?b._timeout:void 0)};g.prototype.render=function(b){b._png&&b._png.stopAnimation();b._png=this;b.width=this.width;b.height=this.height;b=b.getContext("2d");if(this.animation)return this.decodeFrames(b),this.animate(b);var c=b.createImageData(this.width,this.height);this.copyToImageData(c,this.decodePixels());return b.putImageData(c,
0,0)};return g}(self);const d=new Set(["jpg","png","bmp","gif"]);U.decode=function(e){return l.apply(this,arguments)};U.decodeLerc2=B;U.getFormat=function(e){e=F(e);"lerc2"===e?e="lerc":"error"===e&&(e="");return e};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/ImageCanvasDecoder":function(){define(["../../../core/Error","../../../core/promiseUtils","../../../chunks/Zlib"],function(U,t,E){return function(){function J(A){A&&(this.canvas=A.canvas,this.ctx=A.ctx||
A.canvas&&A.canvas.getContext("2d"))}J.prototype.decode=function(A,N,T){if(!A||10>A.byteLength)throw new U("imagecanvasdecoder: decode","required a valid encoded data as input.");let {width:S,height:P,format:I}=N;const {applyJpegMask:D}=N;if(D&&(!S||!P))throw new U("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return new Promise((q,B)=>{let H=null;"jpg"===I&&D&&(H=J.getMask(A,{width:S,height:P}));const h=new Blob([new Uint8Array(A)],{type:"jpg"===
"image/"+I?"jpeg":I}),v=URL.createObjectURL(h),k=new Image;let y;k.src=v;k.onload=()=>{URL.revokeObjectURL(v);if(t.isAborted(T))B(t.createAbortError());else{S=k.width;P=k.height;if(this.canvas){if(this.canvas.width!==S||this.canvas.height!==P)this.canvas.width=S,this.canvas.height=P;this.ctx.clearRect(0,0,S,P)}else this.canvas=document.createElement("canvas"),this.canvas.width=S,this.canvas.height=P,this.ctx=this.canvas.getContext("2d");this.ctx.drawImage(k,0,0);var F=this.ctx.getImageData(0,0,S,
P);y=F.data;var w;if(N.renderOnCanvas){if(H)for(w=0;w<H.length;w++)y[4*w+3]=H[w]?255:0;this.ctx.putImageData(F,0,0);q(null)}else{F=S*P;var C=new Uint8Array(F),z=new Uint8Array(F),l=new Uint8Array(F);if(H)for(w=0;w<F;w++)C[w]=y[4*w],z[w]=y[4*w+1],l[w]=y[4*w+2];else for(H=new Uint8Array(F),w=0;w<F;w++)C[w]=y[4*w],z[w]=y[4*w+1],l[w]=y[4*w+2],H[w]=y[4*w+3];q({width:S,height:P,pixels:[C,z,l],mask:H,pixelType:"u8"})}}};k.onerror=()=>{URL.revokeObjectURL(v);B("cannot load image")}})};J.getMask=function(A,
N){let T=null;try{var S=new Uint8Array(A);A=0;var P=S.length-2;for(A=Math.ceil(S.length/2);A<P&&(255!==S[A]||217!==S[A+1]);A++);A+=2;if(A<S.length-1){const I=(new E.Zlib(S.subarray(A))).getBytes();T=new Uint8Array(N.width*N.height);N=0;for(S=0;S<I.length;S++)for(P=7;0<=P;P--)T[N++]=I[S]>>P&1}}catch(I){}return T};return J}()})},"esri/chunks/Zlib":function(){define(["exports"],function(U){var t={exports:{}};(function(E){(function(J){J=J();void 0!==J&&(E.exports=J)})(function(){var J=function(){function A(){this.bufferLength=
this.pos=0;this.eof=!1;this.buffer=null}A.prototype={ensureBuffer:function(N){var T=this.buffer,S=T?T.byteLength:0;if(N<S)return T;for(var P=512;P<N;)P<<=1;N=new Uint8Array(P);for(P=0;P<S;++P)N[P]=T[P];return this.buffer=N},getByte:function(){for(var N=this.pos;this.bufferLength<=N;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(N){var T=this.pos;if(N){this.ensureBuffer(T+N);for(N=T+N;!this.eof&&this.bufferLength<N;)this.readBlock();var S=this.bufferLength;
N>S&&(N=S)}else{for(;!this.eof;)this.readBlock();N=this.bufferLength}this.pos=N;return this.buffer.subarray(T,N)},lookChar:function(){for(var N=this.pos;this.bufferLength<=N;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var N=this.pos;this.bufferLength<=N;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(N,T,S){for(var P=N+T;this.bufferLength<=P&&!this.eof;)this.readBlock();
return new Stream(this.buffer,N,T,S)},skip:function(N){N||(N=1);this.pos+=N},reset:function(){this.pos=0}};return A}();return function(){function A(q){throw Error(q);}function N(q){var B=0,H=q[B++],h=q[B++];-1!=H&&-1!=h||A("Invalid header in flate stream");8!=(H&15)&&A("Unknown compression method in flate stream");0!=((H<<8)+h)%31&&A("Bad FCHECK in flate stream");h&32&&A("FDICT bit set in flate stream");this.bytes=q;this.bytesPos=B;this.codeBuf=this.codeSize=0;J.call(this)}if(!self||!self.Uint32Array)return null;
var T=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),S=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),P=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),I=[new Uint32Array([459008,524368,
524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,
524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,
524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,
524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,
524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,
524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,
524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,
524335,590015,524303,524431,524367,590079]),9],D=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];N.prototype=Object.create(J.prototype);N.prototype.getBits=function(q){for(var B=this.codeSize,H=this.codeBuf,h=this.bytes,v=this.bytesPos,k;B<q;)"undefined"==typeof(k=h[v++])&&A("Bad encoding in flate stream"),H|=k<<
B,B+=8;this.codeBuf=H>>q;this.codeSize=B-=q;this.bytesPos=v;return H&(1<<q)-1};N.prototype.getCode=function(q){var B=q[0],H=q[1];q=this.codeSize;for(var h=this.codeBuf,v=this.bytes,k=this.bytesPos;q<H;){var y;"undefined"==typeof(y=v[k++])&&A("Bad encoding in flate stream");h|=y<<q;q+=8}H=B[h&(1<<H)-1];B=H>>16;H&=65535;(0==q||q<B||0==B)&&A("Bad encoding in flate stream");this.codeBuf=h>>B;this.codeSize=q-B;this.bytesPos=k;return H};N.prototype.generateHuffmanTable=function(q){for(var B=q.length,H=
0,h=0;h<B;++h)q[h]>H&&(H=q[h]);for(var v=1<<H,k=new Uint32Array(v),y=1,F=0,w=2;y<=H;++y,F<<=1,w<<=1)for(var C=0;C<B;++C)if(q[C]==y){var z=0,l=F;for(h=0;h<y;++h)z=z<<1|l&1,l>>=1;for(h=z;h<v;h+=w)k[h]=y<<16|C;++F}return[k,H]};N.prototype.readBlock=function(){function q(z,l,a,d,e){for(z=z.getBits(a)+d;0<z--;)l[F++]=e}var B=this.getBits(3);B&1&&(this.eof=!0);B>>=1;if(0==B){var H=this.bytes,h=this.bytesPos,v;"undefined"==typeof(v=H[h++])&&A("Bad block header in flate stream");var k=v;"undefined"==typeof(v=
H[h++])&&A("Bad block header in flate stream");k|=v<<8;"undefined"==typeof(v=H[h++])&&A("Bad block header in flate stream");B=v;"undefined"==typeof(v=H[h++])&&A("Bad block header in flate stream");(B|v<<8)!=(~k&65535)&&A("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;v=this.bufferLength;B=this.ensureBuffer(v+k);this.bufferLength=k=v+k;for(var y=v;y<k;++y){if("undefined"==typeof(v=H[h++])){this.eof=!0;break}B[y]=v}this.bytesPos=h}else{if(1==B)h=I,v=D;else if(2==B){B=
this.getBits(5)+257;v=this.getBits(5)+1;H=this.getBits(4)+4;h=Array(T.length);for(var F=0;F<H;)h[T[F++]]=this.getBits(3);h=this.generateHuffmanTable(h);F=H=0;v=B+v;for(k=Array(v);F<v;)y=this.getCode(h),16==y?q(this,k,2,3,H):17==y?q(this,k,3,3,H=0):18==y?q(this,k,7,11,H=0):k[F++]=H=y;h=this.generateHuffmanTable(k.slice(0,B));v=this.generateHuffmanTable(k.slice(B,v))}else A("Unknown block type in flate stream");k=(B=this.buffer)?B.length:0;for(y=this.bufferLength;;){var w=this.getCode(h);if(256>w)y+
1>=k&&(B=this.ensureBuffer(y+1),k=B.length),B[y++]=w;else{if(256==w){this.bufferLength=y;break}w-=257;w=S[w];var C=w>>16;0<C&&(C=this.getBits(C));H=(w&65535)+C;w=this.getCode(v);w=P[w];C=w>>16;0<C&&(C=this.getBits(C));w=(w&65535)+C;y+H>=k&&(B=this.ensureBuffer(y+H),k=B.length);for(C=0;C<H;++C,++y)B[y]=B[y-w]}}}};return N}()})})(t);U.Zlib=t.exports})},"esri/layers/support/rasterFormats/JpgPlus":function(){define(["../../../chunks/Jpg","../../../chunks/Zlib"],function(U,t){return function(){function E(){}
E.decode=function(J){var A=new Uint8Array(J);J=new U.JpegImage;J.parse(A);const {width:N,height:T,numComponents:S,eof:P}=J;J=J.getData(N,T,!0);let I;const D=N*T;let q=0;var B=0,H=0;if(P<A.length-1)for(A=(new t.Zlib(A.subarray(P))).getBytes(),I=new Uint8Array(D),q=B=0;q<A.length;q++)for(H=7;0<=H;H--)I[B++]=A[q]>>H&1;A=null;if(1===S)A=[J,J,J];else{A=[];for(q=0;3>q;q++)H=new Uint8Array(D),A.push(H);for(B=H=0;B<D;B++)for(q=0;3>q;q++)A[q][B]=J[H++]}return{width:N,height:T,pixels:A,mask:I}};return E}()})},
"esri/chunks/Jpg":function(){define(["exports"],function(U){var t={exports:{}};(function(E){(function(J){J=J();void 0!==J&&(E.exports=J)})(function(){var J=function(){function A(N){this.message="JPEG error: "+N}A.prototype=Error();A.prototype.name="JpegError";return A.constructor=A}();return function(){function A(){this.decodeTransform=null;this.colorTransform=-1}function N(D,q){for(var B=0,H=[],h,v,k=16;0<k&&!D[k-1];)k--;H.push({children:[],index:0});var y=H[0],F;for(h=0;h<k;h++){for(v=0;v<D[h];v++){y=
H.pop();for(y.children[y.index]=q[B];0<y.index;)y=H.pop();y.index++;for(H.push(y);H.length<=h;)H.push(F={children:[],index:0}),y.children[y.index]=F.children,y=F;B++}h+1<k&&(H.push(F={children:[],index:0}),y.children[y.index]=F.children,y=F)}return H[0].children}function T(D,q,B,H,h,v,k,y,F){function w(){if(0<c)return c--,b>>c&1;b=D[q++];if(255===b){var R=D[q++];if(R)throw new J("unexpected marker "+(b<<8|R).toString(16));}c=7;return b>>>7}function C(R){for(;;){R=R[w()];if("number"===typeof R)return R;
if("object"!==typeof R)throw new J("invalid huffman sequence");}}function z(R){for(var aa=0;0<R;)aa=aa<<1|w(),R--;return aa}function l(R){if(1===R)return 1===w()?1:-1;var aa=z(R);return aa>=1<<R-1?aa:aa+(-1<<R)+1}function a(R,aa){var ca=C(R.huffmanTableDC);ca=0===ca?0:l(ca);R.blockData[aa]=R.pred+=ca;for(ca=1;64>ca;){var da=C(R.huffmanTableAC),fa=da&15;da>>=4;if(0===fa){if(15>da)break;ca+=16}else ca+=da,R.blockData[aa+I[ca]]=l(fa),ca++}}function d(R,aa){var ca=C(R.huffmanTableDC);ca=0===ca?0:l(ca)<<
F;R.blockData[aa]=R.pred+=ca}function e(R,aa){R.blockData[aa]|=w()<<F}function g(R,aa){if(0<m)m--;else for(var ca=v;ca<=k;){var da=C(R.huffmanTableAC),fa=da&15;da>>=4;if(0===fa){if(15>da){m=z(da)+(1<<da)-1;break}ca+=16}else ca+=da,R.blockData[aa+I[ca]]=l(fa)*(1<<F),ca++}}function p(R,aa){for(var ca=v,da=0,fa;ca<=k;){fa=I[ca];switch(x){case 0:da=C(R.huffmanTableAC);fa=da&15;da>>=4;if(0===fa)15>da?(m=z(da)+(1<<da),x=4):(da=16,x=1);else{if(1!==fa)throw new J("invalid ACn encoding");L=l(fa);x=da?2:3}continue;
case 1:case 2:R.blockData[aa+fa]?R.blockData[aa+fa]+=w()<<F:(da--,0===da&&(x=2===x?3:0));break;case 3:R.blockData[aa+fa]?R.blockData[aa+fa]+=w()<<F:(R.blockData[aa+fa]=L<<F,x=0);break;case 4:R.blockData[aa+fa]&&(R.blockData[aa+fa]+=w()<<F)}ca++}4===x&&(m--,0===m&&(x=0))}var n=B.mcusPerLine,f=q,b=0,c=0,m=0,x=0,L,r=H.length,u,G,Q,O;y=B.progressive?0===v?0===y?d:e:0===y?g:p:a;var W=0;B=1===r?H[0].blocksPerLine*H[0].blocksPerColumn:n*B.mcusPerColumn;for(var X,K;W<B;){var M=h?Math.min(B-W,h):B;for(u=0;u<
r;u++)H[u].pred=0;m=0;if(1===r){var V=H[0];for(O=0;O<M;O++)y(V,64*((V.blocksPerLine+1)*(W/V.blocksPerLine|0)+W%V.blocksPerLine)),W++}else for(O=0;O<M;O++){for(u=0;u<r;u++)for(V=H[u],X=V.h,K=V.v,G=0;G<K;G++)for(Q=0;Q<X;Q++)y(V,64*((V.blocksPerLine+1)*((W/n|0)*V.v+G)+(W%n*V.h+Q)));W++}c=0;(V=P(D,q))&&V.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+V.invalid),q=V.offset);V=V&&V.marker;if(!V||65280>=V)throw new J("marker was not found");if(65488<=V&&65495>=V)q+=2;else break}(V=
P(D,q))&&V.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+V.invalid),q=V.offset);return q-f}function S(D,q){D=q.blocksPerLine;for(var B=q.blocksPerColumn,H=new Int16Array(64),h=0;h<B;h++)for(var v=0;v<D;v++){var k=void 0,y=void 0,F=void 0,w=void 0,C=void 0,z=void 0,l=void 0,a=void 0,d=C=z=w=y=k=void 0,e=void 0,g=void 0,p=void 0,n=64*((q.blocksPerLine+1)*h+v),f=H,b=q.quantizationTable,c=q.blockData;if(!b)throw new J("missing required Quantization Table.");for(var m=0;64>
m;m+=8)k=c[n+m],a=c[n+m+1],l=c[n+m+2],z=c[n+m+3],C=c[n+m+4],w=c[n+m+5],F=c[n+m+6],y=c[n+m+7],k*=b[m],0===(a|l|z|C|w|F|y)?(k=5793*k+512>>10,f[m]=k,f[m+1]=k,f[m+2]=k,f[m+3]=k,f[m+4]=k,f[m+5]=k,f[m+6]=k,f[m+7]=k):(a*=b[m+1],l*=b[m+2],z*=b[m+3],C*=b[m+4],w*=b[m+5],F*=b[m+6],y*=b[m+7],p=5793*k+128>>8,g=5793*C+128>>8,e=l,d=F,C=2896*(a-y)+128>>8,y=2896*(a+y)+128>>8,z<<=4,w<<=4,p=p+g+1>>1,g=p-g,k=3784*e+1567*d+128>>8,e=1567*e-3784*d+128>>8,d=k,C=C+w+1>>1,w=C-w,y=y+z+1>>1,z=y-z,p=p+d+1>>1,d=p-d,g=g+e+1>>1,
e=g-e,k=2276*C+3406*y+2048>>12,C=3406*C-2276*y+2048>>12,y=k,k=799*z+4017*w+2048>>12,z=4017*z-799*w+2048>>12,w=k,f[m]=p+y,f[m+7]=p-y,f[m+1]=g+w,f[m+6]=g-w,f[m+2]=e+z,f[m+5]=e-z,f[m+3]=d+C,f[m+4]=d-C);for(b=0;8>b;++b)k=f[b],a=f[b+8],l=f[b+16],z=f[b+24],C=f[b+32],w=f[b+40],F=f[b+48],y=f[b+56],0===(a|l|z|C|w|F|y)?(k=5793*k+8192>>14,k=-2040>k?0:2024<=k?255:k+2056>>4,c[n+b]=k,c[n+b+8]=k,c[n+b+16]=k,c[n+b+24]=k,c[n+b+32]=k,c[n+b+40]=k,c[n+b+48]=k,c[n+b+56]=k):(p=5793*k+2048>>12,g=5793*C+2048>>12,e=l,d=F,
C=2896*(a-y)+2048>>12,y=2896*(a+y)+2048>>12,p=(p+g+1>>1)+4112,g=p-g,k=3784*e+1567*d+2048>>12,e=1567*e-3784*d+2048>>12,d=k,C=C+w+1>>1,w=C-w,y=y+z+1>>1,z=y-z,p=p+d+1>>1,d=p-d,g=g+e+1>>1,e=g-e,k=2276*C+3406*y+2048>>12,C=3406*C-2276*y+2048>>12,y=k,k=799*z+4017*w+2048>>12,z=4017*z-799*w+2048>>12,w=k,k=p+y,y=p-y,a=g+w,F=g-w,l=e+z,w=e-z,z=d+C,C=d-C,k=16>k?0:4080<=k?255:k>>4,a=16>a?0:4080<=a?255:a>>4,l=16>l?0:4080<=l?255:l>>4,z=16>z?0:4080<=z?255:z>>4,C=16>C?0:4080<=C?255:C>>4,w=16>w?0:4080<=w?255:w>>4,F=
16>F?0:4080<=F?255:F>>4,y=16>y?0:4080<=y?255:y>>4,c[n+b]=k,c[n+b+8]=a,c[n+b+16]=l,c[n+b+24]=z,c[n+b+32]=C,c[n+b+40]=w,c[n+b+48]=F,c[n+b+56]=y)}return q.blockData}function P(D,q,B){var H=D.length-1;B=B<q?B:q;if(q>=H)return null;var h=D[q]<<8|D[q+1];if(65472<=h&&65534>=h)return{invalid:null,marker:h,offset:q};for(q=D[B]<<8|D[B+1];!(65472<=q&&65534>=q);){if(++B>=H)return null;q=D[B]<<8|D[B+1]}return{invalid:h.toString(16),marker:q,offset:B}}if(!self||!self.Uint8ClampedArray)return null;var I=new Uint8Array([0,
1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);A.prototype={parse:function(D){function q(){var b=D[h]<<8|D[h+1];h+=2;return b}function B(){var b=q();b=h+b-2;var c=P(D,b,h);c&&c.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+c.invalid),b=c.offset);b=D.subarray(h,b);h+=b.length;return b}function H(b){for(var c=Math.ceil(b.samplesPerLine/8/
b.maxH),m=Math.ceil(b.scanLines/8/b.maxV),x=0;x<b.components.length;x++){f=b.components[x];var L=Math.ceil(Math.ceil(b.samplesPerLine/8)*f.h/b.maxH),r=Math.ceil(Math.ceil(b.scanLines/8)*f.v/b.maxV);f.blockData=new Int16Array(64*m*f.v*(c*f.h+1));f.blocksPerLine=L;f.blocksPerColumn=r}b.mcusPerLine=c;b.mcusPerColumn=m}var h=0,v=null,k=null,y=[],F=[],w=[],C=q();if(65496!==C)throw new J("SOI not found");for(C=q();65497!==C;){switch(C){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var z=
B();65504===C&&74===z[0]&&70===z[1]&&73===z[2]&&70===z[3]&&0===z[4]&&(v={version:{major:z[5],minor:z[6]},densityUnits:z[7],xDensity:z[8]<<8|z[9],yDensity:z[10]<<8|z[11],thumbWidth:z[12],thumbHeight:z[13],thumbData:z.subarray(14,14+3*z[12]*z[13])});65518===C&&65===z[0]&&100===z[1]&&111===z[2]&&98===z[3]&&101===z[4]&&(k={version:z[5]<<8|z[6],flags0:z[7]<<8|z[8],flags1:z[9]<<8|z[10],transformCode:z[11]});break;case 65499:C=q()+h-2;for(var l;h<C;){var a=D[h++],d=new Uint16Array(64);if(0===a>>4)for(z=
0;64>z;z++)l=I[z],d[l]=D[h++];else if(1===a>>4)for(z=0;64>z;z++)l=I[z],d[l]=q();else throw new J("DQT - invalid table spec");y[a&15]=d}break;case 65472:case 65473:case 65474:if(e)throw new J("Only single frame JPEGs supported");q();var e={};e.extended=65473===C;e.progressive=65474===C;e.precision=D[h++];e.scanLines=q();e.samplesPerLine=q();e.components=[];e.componentIds={};z=D[h++];for(C=d=a=0;C<z;C++){l=D[h];var g=D[h+1]>>4;var p=D[h+1]&15;a<g&&(a=g);d<p&&(d=p);g=e.components.push({h:g,v:p,quantizationId:D[h+
2],quantizationTable:null});e.componentIds[l]=g-1;h+=3}e.maxH=a;e.maxV=d;H(e);break;case 65476:l=q();for(C=2;C<l;){a=D[h++];d=new Uint8Array(16);for(z=g=0;16>z;z++,h++)g+=d[z]=D[h];p=new Uint8Array(g);for(z=0;z<g;z++,h++)p[z]=D[h];C+=17+g;(0===a>>4?w:F)[a&15]=N(d,p)}break;case 65501:q();var n=q();break;case 65498:q();l=D[h++];z=[];for(C=0;C<l;C++){a=e.componentIds[D[h++]];var f=e.components[a];a=D[h++];f.huffmanTableDC=w[a>>4];f.huffmanTableAC=F[a&15];z.push(f)}C=D[h++];l=D[h++];a=D[h++];C=T(D,h,
e,z,n,C,l,a>>4,a&15);h+=C;break;case 65535:255!==D[h]&&h--;break;default:if(255===D[h-3]&&192<=D[h-2]&&254>=D[h-2])h-=3;else throw new J("unknown marker "+C.toString(16));}C=q()}this.width=e.samplesPerLine;this.height=e.scanLines;this.jfif=v;this.eof=h;this.adobe=k;this.components=[];for(C=0;C<e.components.length;C++){f=e.components[C];if(v=y[f.quantizationId])f.quantizationTable=v;this.components.push({output:S(e,f),scaleX:f.h/e.maxH,scaleY:f.v/e.maxV,blocksPerLine:f.blocksPerLine,blocksPerColumn:f.blocksPerColumn})}this.numComponents=
this.components.length},_getLinearizedBlockData:function(D,q){var B=this.width/D,H=this.height/q,h,v,k=0,y=this.components.length,F=D*q*y,w=new Uint8ClampedArray(F),C=new Uint32Array(D);for(v=0;v<y;v++){var z=this.components[v];var l=z.scaleX*B;var a=z.scaleY*H;k=v;var d=z.output;var e=z.blocksPerLine+1<<3;for(h=0;h<D;h++)z=0|h*l,C[h]=(z&4294967288)<<3|z&7;for(l=0;l<q;l++)for(z=0|l*a,z=e*(z&4294967288)|(z&7)<<3,h=0;h<D;h++)w[k]=d[z+C[h]],k+=y}if(q=this.decodeTransform)for(v=0;v<F;)for(D=z=0;z<y;z++,
v++,D+=2)w[v]=(w[v]*q[D]>>8)+q[D+1];return w},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0===this.colorTransform?!1:!0:1===this.colorTransform?!0:!1},_convertYccToRgb:function(D){for(var q,B,H,h=0,v=D.length;h<v;h+=3)q=D[h],B=D[h+1],H=D[h+2],D[h]=q-179.456+1.402*H,D[h+1]=q+135.459-.344*B-.714*H,D[h+2]=q-226.816+1.772*B;return D},_convertYcckToRgb:function(D){for(var q,B,H,h,v=0,k=0,y=D.length;k<y;k+=4)q=D[k],B=D[k+1],H=D[k+2],h=D[k+3],D[v++]=
-122.67195406894+B*(-6.60635669420364E-5*B+4.37130475926232E-4*H-5.4080610064599E-5*q+4.8449797120281E-4*h-.154362151871126)+H*(-9.57964378445773E-4*H+8.17076911346625E-4*q-.00477271405408747*h+1.53380253221734)+q*(9.61250184130688E-4*q-.00266257332283933*h+.48357088451265)+h*(-3.36197177618394E-4*h+.484791561490776),D[v++]=107.268039397724+B*(2.19927104525741E-5*B-6.40992018297945E-4*H+6.59397001245577E-4*q+4.26105652938837E-4*h-.176491792462875)+H*(-7.78269941513683E-4*H+.00130872261408275*q+7.70482631801132E-4*
h-.151051492775562)+q*(.00126935368114843*q-.00265090189010898*h+.25802910206845)+h*(-3.18913117588328E-4*h-.213742400323665),D[v++]=-20.810012546947+B*(-5.70115196973677E-4*B-2.63409051004589E-5*H+.0020741088115012*q-.00288260236853442*h+.814272968359295)+H*(-1.53496057440975E-5*H-1.32689043961446E-4*q+5.60833691242812E-4*h-.195152027534049)+q*(.00174418132927582*q-.00255243321439347*h+.116935020465145)+h*(-3.43531996510555E-4*h+.24165260232407);return D},_convertYcckToCmyk:function(D){for(var q,
B,H,h=0,v=D.length;h<v;h+=4)q=D[h],B=D[h+1],H=D[h+2],D[h]=434.456-q-1.402*H,D[h+1]=119.541-q+.344*B+.714*H,D[h+2]=481.816-q-1.772*B;return D},_convertCmykToRgb:function(D){for(var q,B,H,h,v=0,k=1/255,y=0,F=D.length;y<F;y+=4)q=D[y]*k,B=D[y+1]*k,H=D[y+2]*k,h=D[y+3]*k,D[v++]=255+q*(-4.387332384609988*q+54.48615194189176*B+18.82290502165302*H+212.25662451639585*h-285.2331026137004)+B*(1.7149763477362134*B-5.6096736904047315*H-17.873870861415444*h-5.497006427196366)+H*(-2.5217340131683033*H-21.248923337353073*
h+17.5119270841813)-h*(21.86122147463605*h+189.48180835922747),D[v++]=255+q*(8.841041422036149*q+60.118027045597366*B+6.871425592049007*H+31.159100130055922*h-79.2970844816548)+B*(-15.310361306967817*B+17.575251261109482*H+131.35250912493976*h-190.9453302588951)+H*(4.444339102852739*H+9.8632861493405*h-24.86741582555878)-h*(20.737325471181034*h+187.80453709719578),D[v++]=255+q*(.8842522430003296*q+8.078677503112928*B+30.89978309703729*H-.23883238689178934*h-14.183576799673286)+B*(10.49593273432072*
B+63.02378494754052*H+50.606957656360734*h-112.23884253719248)+H*(.03296041114873217*H+115.60384449646641*h-193.58209356861505)-h*(22.33816807309886*h+180.12613974708367);return D},getData:function(D,q,B){if(4<this.numComponents)throw new J("Unsupported color mode");D=this._getLinearizedBlockData(D,q);if(1===this.numComponents&&B){B=D.length;q=new Uint8ClampedArray(3*B);for(var H=0,h=0;h<B;h++){var v=D[h];q[H++]=v;q[H++]=v;q[H++]=v}return q}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(D);
if(4===this.numComponents){if(this._isColorConversionNeeded())return B?this._convertYcckToRgb(D):this._convertYcckToCmyk(D);if(B)return this._convertCmykToRgb(D)}return D}};return A}()})})(t);U.JpegImage=t.exports})},"esri/chunks/TiffDecoder":function(){define("exports ../layers/support/rasterDatasets/byteStreamUtils ./Jpg ../layers/support/rasterFormats/Lzw ../layers/support/rasterFormats/TiffTags ../layers/support/rasterFormats/utils ./Zlib".split(" "),function(U,t,E,J,A,N,T){function S(c,m){let x=
"unknown";3===c?x="f32":1===c?1===m?x="u1":2===m?x="u2":4===m?x="u4":8>=m?x="u8":16>=m?x="u16":32>=m&&(x="u32"):2===c&&(8>=m?x="s8":16>=m?x="s16":32>=m&&(x="s32"));return x}function P(c){let m=null;switch(c?c.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":m=Uint8Array;break;case "u16":m=Uint16Array;break;case "u32":m=Uint32Array;break;case "s8":m=Int8Array;break;case "s16":m=Int16Array;break;case "s32":m=Int32Array;break;default:m=Float32Array}return m}function I(c,m){return{x:m[0]*
c.x+m[1]*c.y+m[2],y:m[3]*c.x+m[4]*c.y+m[5]}}function D(c,m){var x;return null==(x=c.get(m))?void 0:x.values}function q(c,m){var x;return null==(x=c.get(m))?void 0:x.values}function B(c,m){var x;return null==(x=c.get(m))?void 0:x.values[0]}function H(c,m){var x;return null==(x=c.get(m))?void 0:x.values[0]}function h(c,m,x,L=0,r=A.TIFF_TAGS,u=4){var G=8===u;const Q=G?w(new DataView(c,x,8),0,m):(new DataView(c,x,2)).getUint16(0,m),O=4+2*u;var W=G?8:2;G=W+Q*O;if(x+G>c.byteLength)return{success:!1,ifd:null,
nextIFD:null,requiredBufferSize:G};const X=x+G+4<=c.byteLength?C(new DataView(c,x+G,8===u?8:4),0,m,8===u):null;x+=W;W=new Map;let K,M,V,R,aa;for(let da=0;da<Q;da++){var ca=new DataView(c,x+O*da,O);K=ca.getUint16(0,m);V=ca.getUint16(2,m);M=A.getTagName(K,r);const fa=[];2===u?(R=ca.getUint16(4,m),aa=ca.getUint16(6,m)):4===u?(R=ca.getUint32(4,m),aa=ca.getUint32(8,m)):8===u&&(R=C(ca,4,m,!0),aa=C(ca,12,m,!0),fa.push(ca.getUint32(12,m)),fa.push(ca.getUint32(16,m)));ca={id:K,type:V,valueCount:R,valueOffset:aa,
valueOffsets:fa,values:null};v(c,m,ca,L,!1,u);W.set(M,ca)}return{success:!0,ifd:W,nextIFD:X,requiredBufferSize:G}}function v(c,m,x,L=0,r=!1,u=4){if(x.values)return!0;var G=x.type,Q=x.valueCount,O=x.valueOffset;let W=[];var X=g[G],K=8*X,M=Q*X,V=Q*g[G]*8,R=8===u?64:32;u=x.valueOffsets;if(V>R&&M>(r?c.byteLength:c?c.byteLength-O+L:0))return x.offlineOffsetSize=[O,M],x.values=null,!1;if(V<=R)if(m||(32>=R?O>>>=32-V:(c=null!=u&&u.length?u[0]:O>>>0,m=null!=u&&u.length?u[1]:Math.round((O-c)/4294967296),32>=
V?(O=c>>>32-V,u[0]=O):(O=c*2**(32-V)+(m>>>32-V),u[0]=c,u[1]=m>>>32-V))),1===Q&&K===R)W=[O];else if(64===R)for(c=null!=u&&u.length?u[0]:O>>>0,O=null!=u&&u.length?u[1]:Math.round((O-c)/4294967296),m=c,X=32,c=1;c<=Q;c++)M=32-K*c%32,X<K?(M=m<<M>>>32-X,V=O<<32-X>>>32-X,m=O,W.push(M+V*2**(K-X)),X-=32-(K-X)):(W.push(m<<M>>>32-K),X-=K),0===X&&(X=32,m=O);else for(c=1;c<=Q;c++)W.push(O<<32-K*c>>>32-K);else for(O-=L,r&&(O=0),Q=O;Q<O+M;Q+=X){switch(G){case 1:K=(new DataView(c,Q,1)).getUint8(0);break;case 2:K=
(new DataView(c,Q,1)).getUint8(0);break;case 3:K=(new DataView(c,Q,2)).getUint16(0,m);break;case 4:case 13:K=(new DataView(c,Q,4)).getUint32(0,m);break;case 5:K=(new DataView(c,Q,4)).getUint32(0,m)/(new DataView(c,Q+4,4)).getUint32(0,m);break;case 6:K=(new DataView(c,Q,1)).getInt8(0);break;case 7:K=(new DataView(c,Q,1)).getUint8(0);break;case 8:K=(new DataView(c,Q,2)).getInt16(0,m);break;case 9:K=(new DataView(c,Q,4)).getInt32(0,m);break;case 10:K=(new DataView(c,Q,4)).getInt32(0,m)/(new DataView(c,
Q+4,4)).getInt32(0,m);break;case 11:K=(new DataView(c,Q,4)).getFloat32(0,m);break;case 12:K=(new DataView(c,Q,8)).getFloat64(0,m);break;case 16:case 18:K=w(new DataView(c,Q,8),0,m);break;case 17:u=new DataView(c,Q,8);V=(K=m)?u.getInt32(0,K):u.getUint32(0,K);u=K?u.getUint32(4,K):u.getInt32(4,K);R=0<=(K?V:u)?1:-1;K?V*=R:u*=R;K=R*(K?4294967296*u+V:4294967296*V+u);break;default:K=null}W.push(K)}if(2===G){G="";O=W;W=[];for(c=0;c<O.length;c++)0===O[c]&&""!==G?(W.push(G),G=""):G+=String.fromCharCode(O[c]);
""===G&&0!==W.length||W.push(G)}x.values=W;return!0}function k(c){var m,x,L=c[0];const r=H(L,"TILEWIDTH"),u=H(L,"TILELENGTH"),G=H(L,"IMAGEWIDTH"),Q=H(L,"IMAGELENGTH");var O=H(L,"BITSPERSAMPLE");const W=H(L,"SAMPLESPERPIXEL");var X=null!=(m=H(L,"SAMPLEFORMAT"))?m:1;m=S(X,O);const K=y(L);var M=D(L,"GDAL_NODATA");let V;null!=M&&M.length&&(V=M.map(ma=>parseFloat(ma)),V.some(ma=>isNaN(ma))&&(V=null));var R=null!=(x=H(L,"COMPRESSION"))?x:1;switch(R){case 1:x="NONE";break;case 2:case 3:case 4:case 32771:x=
"CCITT";break;case 5:x="LZW";break;case 6:case 7:x="JPEG";break;case 32773:x="PACKBITS";break;case 8:case 32946:x="DEFLATE";break;case 34712:x="JPEG2000";break;case 34887:x="LERC";break;default:x=String(R)}M=!0;let aa="";p.has(R)||(M=!1,aa+="unsupported tag compression "+R);3<X&&(M=!1,aa+="unsupported tag sampleFormat "+X);0!==O%8&&(M=!1,aa+="unsupported tag bitsPerSample "+O);O=B(L,"GEOASCIIPARAMS");if(O){var ca=(ca=O.split("|").filter(ma=>-1<ma.indexOf("ESRI PE String \x3d "))[0])?ca.replace("ESRI PE String \x3d ",
""):"";ca=ca.startsWith("COMPD_CS")||ca.startsWith("PROJCS")||ca.startsWith("GEOGCS")?{wkid:null,wkt:ca}:null}X=q(L,"GEOTIEPOINTS");O=q(L,"GEOPIXELSCALE");R=q(L,"GEOTRANSMATRIX");var da=L.has("GEOKEYDIRECTORY")?L.get("GEOKEYDIRECTORY").data:null;L=!1;if(da){L=2===H(da,"GTRasterTypeGeoKey");var fa=H(da,"GTModelTypeGeoKey");2===fa?(da=H(da,"GeographicTypeGeoKey"),1024<=da&&32766>=da&&(ca={wkid:da})):1===fa&&(da=H(da,"ProjectedCSTypeGeoKey"),1024<=da&&32766>=da&&(ca={wkid:da}))}let ha;O&&X&&6<=X.length?
(ha=[O[0],0,X[3]-X[0]*O[0],0,-Math.abs(O[1]),X[4]-X[1]*O[1]],L&&(ha[2]-=.5*ha[0]+.5*ha[1],ha[5]-=.5*ha[3]+.5*ha[4])):R&&16===R.length&&(ha=L?[R[0],R[1],R[3]-.5*R[0],R[4],R[5],R[7]-.5*R[5]]:[R[0],R[1],R[3],R[4],R[5],R[7]]);if(ha){L=[{x:0,y:Q},{x:0,y:0},{x:G,y:Q},{x:G,y:0}];da=R=Number.POSITIVE_INFINITY;let ma=fa=Number.NEGATIVE_INFINITY;for(let ia=0;ia<L.length;ia++)X=I(L[ia],ha),R=X.x>R?R:X.x,fa=X.x<fa?fa:X.x,da=X.y>da?da:X.y,ma=X.y<ma?ma:X.y;ca={xmin:R,xmax:fa,ymin:da,ymax:ma,spatialReference:ca}}else ca=
{xmin:-.5,ymin:.5-Q,xmax:G-.5,ymax:.5,spatialReference:ca};L=c.filter(ma=>1===B(ma,"NEWSUBFILETYPE"));let ka,qa,pa;if(0<L.length){ka=Math.round(Math.log(G/H(L[0],"IMAGEWIDTH"))/Math.LN2);var ja=L[L.length-1];qa=Math.round(Math.log(G/H(ja,"IMAGEWIDTH"))/Math.LN2);pa=H(ja,"TILEWIDTH");ja=H(ja,"TILELENGTH")}pa=0<qa?pa||r:null;ja=0<qa?ja||u:null;let oa;r&&(oa=[{maxCol:Math.ceil(G/r)-1,maxRow:Math.ceil(Q/u)-1,minRow:0,minCol:0}],L.forEach(ma=>{oa.push({maxCol:Math.ceil(H(ma,"IMAGEWIDTH")/H(ma,"TILEWIDTH"))-
1,maxRow:Math.ceil(H(ma,"IMAGELENGTH")/H(ma,"TILELENGTH"))-1,minRow:0,minCol:0})}));L=B(c[0],"GDAL_METADATA");L=b(L);aa+=" "+a({width:G,height:Q,tileWidth:r,tileHeight:u,planes:W,ifds:c});return{width:G,height:Q,tileWidth:r,tileHeight:u,planes:W,isBSQ:K,pixelType:m,compression:x,noData:V,isSupported:M,message:aa,extent:ca,affine:O?null:ha,firstPyramidLevel:ka,maximumPyramidLevel:qa,pyramidBlockWidth:pa,pyramidBlockHeight:ja,tileBoundary:oa,metadata:L}}function y(c,m){return(c=D(c,"PLANARCONFIGURATION"))?
2===c[0]:m?m.isBSQ:!1}function F(c){const {littleEndian:m,isBigTiff:x,firstIFD:L}=z(c);var r=L;const u=[];do if(r=l(c,m,r,0,A.TIFF_TAGS,x?8:4),r.success)u.push(r.ifd),r=r.nextIFD;else break;while(0<r);return{...k(u),littleEndian:m,isBigTiff:x,ifds:u}}function w(c,m,x){const L=c.getUint32(m,x);c=c.getUint32(m+4,x);return x?4294967296*c+L:4294967296*L+c}function C(c,m,x,L){return L?w(c,m,x):c.getUint32(m,x)}function z(c){var m=new DataView(c,0,16),x=m.getUint16(0,!1);c=null;if(18761===x)c=!0;else if(19789===
x)c=!1;else throw"unexpected endianess byte";var L=m.getUint16(2,c);if(42!==L&&43!==L)throw"unexpected tiff identifier";x=4;if(L=43===L){const r=m.getUint16(x,c);x+=2;if(8!==r)throw"unsupported bigtiff version";if(0!==m.getUint16(x,c))throw"unsupported bigtiff version";x+=2}m=C(m,x,c,L);return{littleEndian:c,isBigTiff:L,firstIFD:m}}function l(c,m,x,L=0,r=A.TIFF_TAGS,u=4){x=h(c,m,x,L,r,u);let G;const Q=x.ifd;Q&&(A.ifdTags.forEach((O,W)=>{Q.has(W)&&(G=Q.get(W),G.data=h(c,m,G.valueOffset-L,L,O).ifd)}),
Q.has("GEOKEYDIRECTORY")&&(G=Q.get("GEOKEYDIRECTORY"),(r=G.values)&&4<r.length&&(r=r[0]+"."+r[1]+"."+r[2],G.data=h(c,m,G.valueOffset+6-L,L,A.GEO_KEYS,2).ifd,G.data&&G.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[r]}))),Q.has("XMP")&&(G=Q.get("XMP"),r=G.values,"number"===typeof r[0]&&7===G.type&&(G.values=[t.bytesToUTF8(new Uint8Array(r))])));return x}function a(c){const {width:m,height:x,tileHeight:L,tileWidth:r}=c,u=c.planes,G=r?r*L:m*x;c=H(c.ifds[0],"BITSPERSAMPLE");
let Q="";G*u>2**30/(8<c?c/8:1)&&(Q=r?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported");return Q}var d={exports:{}};(function(c){(function(m){m=m();void 0!==m&&(c.exports=m)})(function(){var m={unstuff:function(r,u,G,Q,O,W,X,K){var M=(1<<G)-1,V=0,R,aa=0;r[r.length-1]<<=8*(4*r.length-Math.ceil(G*Q/8));if(O)for(R=0;R<Q;R++){if(0===aa){var ca=r[V++];aa=32}if(aa>=G){var da=ca>>>aa-G&M;aa-=G}else aa=G-aa,da=(ca&M)<<aa&M,ca=r[V++],aa=32-aa,
da+=ca>>>aa;u[R]=O[da]}else for(O=Math.ceil((K-W)/X),R=0;R<Q;R++)0===aa&&(ca=r[V++],aa=32),aa>=G?(da=ca>>>aa-G&M,aa-=G):(aa=G-aa,da=(ca&M)<<aa&M,ca=r[V++],aa=32-aa,da+=ca>>>aa),u[R]=da<O?W+da*X:K},unstuffLUT:function(r,u,G,Q,O,W){var X=(1<<u)-1,K=0,M=0,V=0,R=V=0,aa=[];r[r.length-1]<<=8*(4*r.length-Math.ceil(u*G/8));var ca=Math.ceil((W-Q)/O);for(M=0;M<G;M++){if(0===V){var da=r[K++];V=32}V>=u?(R=da>>>V-u&X,V-=u):(V=u-V,R=(da&X)<<V&X,da=r[K++],V=32-V,R+=da>>>V);aa[M]=R<ca?Q+R*O:W}aa.unshift(Q);return aa},
unstuff2:function(r,u,G,Q,O,W,X,K){var M=(1<<G)-1,V=0,R,aa=0,ca=0;if(O)for(R=0;R<Q;R++){if(0===aa){var da=r[V++];aa=32;ca=0}if(aa>=G){var fa=da>>>ca&M;aa-=G;ca+=G}else{var ha=G-aa;fa=da>>>ca&M;da=r[V++];aa=32-ha;fa|=(da&(1<<ha)-1)<<G-ha;ca=ha}u[R]=O[fa]}else for(O=Math.ceil((K-W)/X),R=0;R<Q;R++)0===aa&&(da=r[V++],aa=32,ca=0),aa>=G?(fa=da>>>ca&M,aa-=G,ca+=G):(ha=G-aa,fa=da>>>ca&M,da=r[V++],aa=32-ha,fa|=(da&(1<<ha)-1)<<G-ha,ca=ha),u[R]=fa<O?W+fa*X:K;return u},unstuffLUT2:function(r,u,G,Q,O,W){var X=
(1<<u)-1,K=0,M=0,V=0,R=0,aa=0,ca=0,da=[],fa=Math.ceil((W-Q)/O);for(M=0;M<G;M++){if(0===R){var ha=r[K++];R=32;ca=0}R>=u?(aa=ha>>>ca&X,R-=u,ca+=u):(V=u-R,aa=ha>>>ca&X,ha=r[K++],R=32-V,aa|=(ha&(1<<V)-1)<<u-V,ca=V);da[M]=aa<fa?Q+aa*O:W}da.unshift(Q);return da},originalUnstuff:function(r,u,G,Q){var O=(1<<G)-1,W=0,X,K=0;r[r.length-1]<<=8*(4*r.length-Math.ceil(G*Q/8));for(X=0;X<Q;X++){if(0===K){var M=r[W++];K=32}if(K>=G){var V=M>>>K-G&O;K-=G}else K=G-K,V=(M&O)<<K&O,M=r[W++],K=32-K,V+=M>>>K;u[X]=V}return u},
originalUnstuff2:function(r,u,G,Q){var O=(1<<G)-1,W=0,X,K=0,M=0;for(X=0;X<Q;X++){if(0===K){var V=r[W++];K=32;M=0}if(K>=G){var R=V>>>M&O;K-=G;M+=G}else{var aa=G-K;R=V>>>M&O;V=r[W++];K=32-aa;R|=(V&(1<<aa)-1)<<G-aa;M=aa}u[X]=R}return u}},x={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(r){for(var u=65535,G=65535,Q=r.length,O=Math.floor(Q/2),W=0;O;){var X=359<=O?359:O;O-=X;do u+=r[W++]<<8,G+=u+=r[W++];while(--X);u=(u&65535)+(u>>>16);G=(G&65535)+(G>>>16)}Q&1&&(G+=u+=r[W]<<8);return((G&65535)+
(G>>>16)<<16|(u&65535)+(u>>>16))>>>0},readHeaderInfo:function(r,u){var G=u.ptr,Q=new Uint8Array(r,G,6),O={};O.fileIdentifierString=String.fromCharCode.apply(null,Q);if(0!==O.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+O.fileIdentifierString;G+=6;Q=new DataView(r,G,8);var W=Q.getInt32(0,!0);O.fileVersion=W;G+=4;3<=W&&(O.checksum=Q.getUint32(4,!0),G+=4);Q=new DataView(r,G,12);O.height=Q.getUint32(0,!0);O.width=Q.getUint32(4,!0);G+=8;4<=W?(O.numDims=
Q.getUint32(8,!0),G+=4):O.numDims=1;Q=new DataView(r,G,40);O.numValidPixel=Q.getUint32(0,!0);O.microBlockSize=Q.getInt32(4,!0);O.blobSize=Q.getInt32(8,!0);O.imageType=Q.getInt32(12,!0);O.maxZError=Q.getFloat64(16,!0);O.zMin=Q.getFloat64(24,!0);O.zMax=Q.getFloat64(32,!0);G+=40;u.headerInfo=O;u.ptr=G;if(3<=W&&(r=this.computeChecksumFletcher32(new Uint8Array(r,G-(4<=W?52:48),O.blobSize-14)),r!==O.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(r,u){var G=u.headerInfo,Q=this.getDataTypeArray(G.imageType),
O=G.numDims*this.getDataTypeSize(G.imageType),W=this.readSubArray(r,u.ptr,Q,O);r=this.readSubArray(r,u.ptr+O,Q,O);u.ptr+=2*O;O=!0;for(u=0;u<G.numDims;u++)if(W[u]!==r[u]){O=!1;break}G.minValues=W;G.maxValues=r;return O},readSubArray:function(r,u,G,Q){if(G===Uint8Array)r=new Uint8Array(r,u,Q);else{var O=new ArrayBuffer(Q);(new Uint8Array(O)).set(new Uint8Array(r,u,Q));r=new G(O)}return r},readMask:function(r,u){var G=u.ptr,Q=u.headerInfo,O=Q.width*Q.height,W=Q.numValidPixel,X=new DataView(r,G,4);Q=
{};Q.numBytes=X.getUint32(0,!0);G+=4;if((0===W||O===W)&&0!==Q.numBytes)throw"invalid mask";if(0===W)W=new Uint8Array(Math.ceil(O/8)),Q.bitset=W,X=new Uint8Array(O),u.pixels.resultMask=X,G+=Q.numBytes;else if(0<Q.numBytes){W=new Uint8Array(Math.ceil(O/8));X=new DataView(r,G,Q.numBytes);r=X.getInt16(0,!0);var K=2,M=0,V=0;do{if(0<r)for(;r--;)W[M++]=X.getUint8(K++);else for(V=X.getUint8(K++),r=-r;r--;)W[M++]=V;r=X.getInt16(K,!0);K+=2}while(K<Q.numBytes);if(-32768!==r||M<W.length)throw"Unexpected end of mask RLE encoding";
X=new Uint8Array(O);for(K=K=r=0;K<O;K++)K&7?(r=W[K>>3],r<<=K&7):r=W[K>>3],r&128&&(X[K]=1);u.pixels.resultMask=X;Q.bitset=W;G+=Q.numBytes}u.ptr=G;u.mask=Q;return!0},readDataOneSweep:function(r,u,G,Q){var O=u.ptr,W=u.headerInfo,X=W.numDims,K=W.width*W.height;W=W.numValidPixel*x.getDataTypeSize(W.imageType)*X;var M=u.pixels.resultMask;if(G===Uint8Array)r=new Uint8Array(r,O,W);else{var V=new ArrayBuffer(W);(new Uint8Array(V)).set(new Uint8Array(r,O,W));r=new G(V)}if(r.length===K*X)u.pixels.resultPixels=
Q?x.swapDimensionOrder(r,K,X,G,!0):r;else{u.pixels.resultPixels=new G(K*X);var R=V=G=0,aa=0;if(1<X)if(Q)for(V=0;V<K;V++){if(M[V])for(aa=V,R=0;R<X;R++,aa+=K)u.pixels.resultPixels[aa]=r[G++]}else for(V=0;V<K;V++){if(M[V])for(aa=V*X,R=0;R<X;R++)u.pixels.resultPixels[aa+R]=r[G++]}else for(V=0;V<K;V++)M[V]&&(u.pixels.resultPixels[V]=r[G++])}u.ptr=O+W;return!0},readHuffmanTree:function(r,u){var G=this.HUFFMAN_LUT_BITS_MAX,Q=new DataView(r,u.ptr,16);u.ptr+=16;if(2>Q.getInt32(0,!0))throw"unsupported Huffman version";
var O=Q.getInt32(4,!0),W=Q.getInt32(8,!0);Q=Q.getInt32(12,!0);if(W>=Q)return!1;var X=new Uint32Array(Q-W);x.decodeBits(r,u,X);var K=[],M;for(M=W;M<Q;M++){var V=M-(M<O?0:O);K[V]={first:X[M-W],second:null}}M=r.byteLength-u.ptr;X=new ArrayBuffer(4*Math.ceil(M/4));(new Uint8Array(X)).set(new Uint8Array(r,u.ptr,M));r=new Uint32Array(X);u=0;X=0;var R=r[0];for(M=W;M<Q;M++){V=M-(M<O?0:O);var aa=K[V].first;0<aa&&(K[V].second=R<<u>>>32-aa,32-u>=aa?(u+=aa,32===u&&(u=0,X++,R=r[X])):(u+=aa-32,X++,R=r[X],K[V].second|=
R>>>32-u))}var ca=R=0,da=new L;for(M=0;M<K.length;M++)void 0!==K[M]&&(R=Math.max(R,K[M].first));ca=R>=G?G:R;G=[];var fa;for(M=W;M<Q;M++)if(V=M-(M<O?0:O),aa=K[V].first,0<aa)if(W=[aa,V],aa<=ca){V=K[V].second<<ca-aa;var ha=1<<ca-aa;for(aa=0;aa<ha;aa++)G[V|aa]=W}else for(V=K[V].second,ha=da,--aa;0<=aa;aa--)(fa=V>>>aa&1)?(ha.right||(ha.right=new L),ha=ha.right):(ha.left||(ha.left=new L),ha=ha.left),0!==aa||ha.val||(ha.val=W[1]);return{decodeLut:G,numBitsLUTQick:ca,numBitsLUT:R,tree:da,stuffedData:r,srcPtr:X,
bitPos:u}},readHuffman:function(r,u,G,Q){var O=u.headerInfo.numDims,W=u.headerInfo.height,X=u.headerInfo.width,K=X*W,M=this.readHuffmanTree(r,u);r=M.decodeLut;var V=M.tree,R=M.stuffedData,aa=M.srcPtr,ca=M.bitPos,da=M.numBitsLUTQick;M=M.numBitsLUT;var fa=0===u.headerInfo.imageType?128:0,ha=u.pixels.resultMask,ka,qa,pa,ja,oa,ma,ia=0;0<ca&&(aa++,ca=0);var va=R[aa],wa=1===u.encodeMode,Fa=new G(K*O),Da=Fa,Aa;if(2>O||wa)for(Aa=0;Aa<O;Aa++)if(1<O&&(Da=new G(Fa.buffer,K*Aa,K),ia=0),u.headerInfo.numValidPixel===
X*W)for(pa=oa=0;pa<W;pa++)for(ja=0;ja<X;ja++,oa++){var ta=0;var ra=ka=va<<ca>>>32-da;32-ca<da&&(ra=ka|=R[aa+1]>>>64-ca-da);if(r[ra])ta=r[ra][1],ca+=r[ra][0];else for(ra=ka=va<<ca>>>32-M,32-ca<M&&(ra=ka|=R[aa+1]>>>64-ca-M),ra=V,ma=0;ma<M;ma++)if(ra=(qa=ka>>>M-ma-1&1)?ra.right:ra.left,!ra.left&&!ra.right){ta=ra.val;ca=ca+ma+1;break}32<=ca&&(ca-=32,aa++,va=R[aa]);ta-=fa;wa?(ta=0<ja?ta+ia:0<pa?ta+Da[oa-X]:ta+ia,ta&=255,ia=Da[oa]=ta):Da[oa]=ta}else for(pa=oa=0;pa<W;pa++)for(ja=0;ja<X;ja++,oa++){if(ha[oa]){ta=
0;ra=ka=va<<ca>>>32-da;32-ca<da&&(ra=ka|=R[aa+1]>>>64-ca-da);if(r[ra])ta=r[ra][1],ca+=r[ra][0];else for(ra=ka=va<<ca>>>32-M,32-ca<M&&(ra=ka|=R[aa+1]>>>64-ca-M),ra=V,ma=0;ma<M;ma++)if(ra=(qa=ka>>>M-ma-1&1)?ra.right:ra.left,!ra.left&&!ra.right){ta=ra.val;ca=ca+ma+1;break}32<=ca&&(ca-=32,aa++,va=R[aa]);ta-=fa;wa?(ta=0<ja&&ha[oa-1]?ta+ia:0<pa&&ha[oa-X]?ta+Da[oa-X]:ta+ia,ta&=255,ia=Da[oa]=ta):Da[oa]=ta}}else for(pa=oa=0;pa<W;pa++)for(ja=0;ja<X;ja++)if(oa=pa*X+ja,!ha||ha[oa])for(Aa=0;Aa<O;Aa++,oa+=K){ta=
0;ra=ka=va<<ca>>>32-da;32-ca<da&&(ra=ka|=R[aa+1]>>>64-ca-da);if(r[ra])ta=r[ra][1],ca+=r[ra][0];else for(ra=ka=va<<ca>>>32-M,32-ca<M&&(ra=ka|=R[aa+1]>>>64-ca-M),ra=V,ma=0;ma<M;ma++)if(ra=(qa=ka>>>M-ma-1&1)?ra.right:ra.left,!ra.left&&!ra.right){ta=ra.val;ca=ca+ma+1;break}32<=ca&&(ca-=32,aa++,va=R[aa]);ta-=fa;Da[oa]=ta}u.ptr=u.ptr+4*(aa+1)+(0<ca?4:0);u.pixels.resultPixels=Fa;1<O&&!Q&&(u.pixels.resultPixels=x.swapDimensionOrder(Fa,K,O,G))},decodeBits:function(r,u,G,Q,O){var W=u.headerInfo,X=W.fileVersion,
K=0,M=new DataView(r,u.ptr,5<=r.byteLength-u.ptr?5:r.byteLength-u.ptr),V=M.getUint8(0);K++;var R=V>>6,aa=0===R?4:3-R,ca=0<(V&32)?!0:!1;R=V&31;V=0;if(1===aa)V=M.getUint8(K),K++;else if(2===aa)V=M.getUint16(K,!0),K+=2;else if(4===aa)V=M.getUint32(K,!0),K+=4;else throw"Invalid valid pixel count type";aa=2*W.maxZError;O=1<W.numDims?W.maxValues[O]:W.zMax;if(ca){u.counter.lut++;ca=M.getUint8(K);K++;W=Math.ceil((ca-1)*R/8);var da=Math.ceil(W/4);da=new ArrayBuffer(4*da);var fa=new Uint8Array(da);u.ptr+=K;
fa.set(new Uint8Array(r,u.ptr,W));K=new Uint32Array(da);u.ptr+=W;for(M=0;ca-1>>>M;)M++;W=Math.ceil(V*M/8);da=Math.ceil(W/4);da=new ArrayBuffer(4*da);fa=new Uint8Array(da);fa.set(new Uint8Array(r,u.ptr,W));r=new Uint32Array(da);u.ptr+=W;u=3<=X?m.unstuffLUT2(K,R,ca-1,Q,aa,O):m.unstuffLUT(K,R,ca-1,Q,aa,O);3<=X?m.unstuff2(r,G,M,V,u):m.unstuff(r,G,M,V,u)}else u.counter.bitstuffer++,M=R,u.ptr+=K,0<M&&(W=Math.ceil(V*M/8),da=Math.ceil(W/4),da=new ArrayBuffer(4*da),fa=new Uint8Array(da),fa.set(new Uint8Array(r,
u.ptr,W)),r=new Uint32Array(da),u.ptr+=W,3<=X?null==Q?m.originalUnstuff2(r,G,M,V):m.unstuff2(r,G,M,V,!1,Q,aa,O):null==Q?m.originalUnstuff(r,G,M,V):m.unstuff(r,G,M,V,!1,Q,aa,O))},readTiles:function(r,u,G,Q){var O=u.headerInfo,W=O.width,X=O.height,K=W*X,M=O.microBlockSize,V=O.imageType,R=x.getDataTypeSize(V),aa=Math.ceil(W/M),ca=Math.ceil(X/M);u.pixels.numBlocksY=ca;u.pixels.numBlocksX=aa;var da=u.pixels.ptr=0,fa=0,ha=0,ka=0,qa=0,pa=0,ja=0,oa=0,ma=da=0,ia=0,va=0,wa=ja=0;ja=ja=0;var Fa=new G(M*M);X=
X%M||M;var Da=W%M||M,Aa=O.numDims,ta,ra=u.pixels.resultMask,Ha=u.pixels.resultPixels,Pa=5<=O.fileVersion?14:15,Ra=O.zMax;for(ha=0;ha<ca;ha++)for(qa=ha!==ca-1?M:X,ka=0;ka<aa;ka++)for(pa=ka!==aa-1?M:Da,ia=ha*W*M+ka*M,va=W-pa,ta=0;ta<Aa;ta++){1<Aa?(wa=Ha,ia=ha*W*M+ka*M,Ha=new G(u.pixels.resultPixels.buffer,K*ta*R,K),Ra=O.maxValues[ta]):wa=null;ja=r.byteLength-u.ptr;fa=new DataView(r,u.ptr,Math.min(10,ja));var Ja={};ja=0;oa=fa.getUint8(0);ja++;var Ea=5<=O.fileVersion?oa&4:0;da=oa>>6&255;ma=oa>>2&Pa;if(ma!==
(ka*M>>3&Pa))throw"integrity issue";if(Ea&&0===ta)throw"integrity issue";oa&=3;if(3<oa)throw u.ptr+=ja,"Invalid block encoding ("+oa+")";if(2===oa){if(Ea)if(ra)for(da=0;da<qa;da++)for(fa=0;fa<pa;fa++)ra[ia]&&(Ha[ia]=wa[ia]),ia++;else for(da=0;da<qa;da++)for(fa=0;fa<pa;fa++)Ha[ia]=wa[ia],ia++;u.counter.constant++;u.ptr+=ja}else if(0===oa){if(Ea)throw"integrity issue";u.counter.uncompressed++;u.ptr+=ja;ja=qa*pa*R;wa=r.byteLength-u.ptr;ja=ja<wa?ja:wa;wa=new ArrayBuffer(0===ja%R?ja:ja+R-ja%R);Ea=new Uint8Array(wa);
Ea.set(new Uint8Array(r,u.ptr,ja));wa=new G(wa);ja=0;if(ra)for(da=0;da<qa;da++){for(fa=0;fa<pa;fa++)ra[ia]&&(Ha[ia]=wa[ja++]),ia++;ia+=va}else for(da=0;da<qa;da++){for(fa=0;fa<pa;fa++)Ha[ia++]=wa[ja++];ia+=va}u.ptr+=ja*R}else if(da=x.getDataTypeUsed(Ea&&6>V?4:V,da),Ja=x.getOnePixel(Ja,ja,da,fa),ja+=x.getDataTypeSize(da),3===oa)if(u.ptr+=ja,u.counter.constantoffset++,ra)for(da=0;da<qa;da++){for(fa=0;fa<pa;fa++)ra[ia]&&(Ha[ia]=Ea?Math.min(Ra,wa[ia]+Ja):Ja),ia++;ia+=va}else for(da=0;da<qa;da++){for(fa=
0;fa<pa;fa++)Ha[ia]=Ea?Math.min(Ra,wa[ia]+Ja):Ja,ia++;ia+=va}else if(u.ptr+=ja,x.decodeBits(r,u,Fa,Ja,ta),ja=0,Ea)if(ra)for(da=0;da<qa;da++){for(fa=0;fa<pa;fa++)ra[ia]&&(Ha[ia]=Fa[ja++]+wa[ia]),ia++;ia+=va}else for(da=0;da<qa;da++){for(fa=0;fa<pa;fa++)Ha[ia]=Fa[ja++]+wa[ia],ia++;ia+=va}else if(ra)for(da=0;da<qa;da++){for(fa=0;fa<pa;fa++)ra[ia]&&(Ha[ia]=Fa[ja++]),ia++;ia+=va}else for(da=0;da<qa;da++){for(fa=0;fa<pa;fa++)Ha[ia++]=Fa[ja++];ia+=va}}1<Aa&&!Q&&(u.pixels.resultPixels=x.swapDimensionOrder(u.pixels.resultPixels,
K,Aa,G))},formatFileInfo:function(r){return{fileIdentifierString:r.headerInfo.fileIdentifierString,fileVersion:r.headerInfo.fileVersion,imageType:r.headerInfo.imageType,height:r.headerInfo.height,width:r.headerInfo.width,numValidPixel:r.headerInfo.numValidPixel,microBlockSize:r.headerInfo.microBlockSize,blobSize:r.headerInfo.blobSize,maxZError:r.headerInfo.maxZError,pixelType:x.getPixelType(r.headerInfo.imageType),eofOffset:r.eofOffset,mask:r.mask?{numBytes:r.mask.numBytes}:null,pixels:{numBlocksX:r.pixels.numBlocksX,
numBlocksY:r.pixels.numBlocksY,maxValue:r.headerInfo.zMax,minValue:r.headerInfo.zMin,noDataValue:r.noDataValue}}},constructConstantSurface:function(r,u){var G=r.headerInfo.zMax,Q=r.headerInfo.zMin,O=r.headerInfo.maxValues,W=r.headerInfo.numDims,X=r.headerInfo.height*r.headerInfo.width,K=0,M=0,V=0,R=r.pixels.resultMask;r=r.pixels.resultPixels;if(R)if(1<W)if(u)for(K=0;K<W;K++)for(V=K*X,G=O[K],M=0;M<X;M++)R[M]&&(r[V+M]=G);else for(M=0;M<X;M++){if(R[M])for(V=M*W,K=0;K<W;K++)r[V+W]=O[K]}else for(M=0;M<
X;M++)R[M]&&(r[M]=G);else if(1<W&&Q!==G)if(u)for(K=0;K<W;K++)for(V=K*X,G=O[K],M=0;M<X;M++)r[V+M]=G;else for(M=0;M<X;M++)for(V=M*W,K=0;K<W;K++)r[V+K]=O[K];else for(M=0;M<X*W;M++)r[M]=G},getDataTypeArray:function(r){switch(r){case 0:r=Int8Array;break;case 1:r=Uint8Array;break;case 2:r=Int16Array;break;case 3:r=Uint16Array;break;case 4:r=Int32Array;break;case 5:r=Uint32Array;break;case 6:r=Float32Array;break;case 7:r=Float64Array;break;default:r=Float32Array}return r},getPixelType:function(r){switch(r){case 0:r=
"S8";break;case 1:r="U8";break;case 2:r="S16";break;case 3:r="U16";break;case 4:r="S32";break;case 5:r="U32";break;case 6:r="F32";break;case 7:r="F64";break;default:r="F32"}return r},isValidPixelValue:function(r,u){if(null==u)return!1;switch(r){case 0:r=-128<=u&&127>=u;break;case 1:r=0<=u&&255>=u;break;case 2:r=-32768<=u&&32767>=u;break;case 3:r=0<=u&&65536>=u;break;case 4:r=-2147483648<=u&&2147483647>=u;break;case 5:r=0<=u&&4294967296>=u;break;case 6:r=-3.4027999387901484E38<=u&&3.4027999387901484E38>=
u;break;case 7:r=4.9E-324<=u&&1.7976931348623157E308>=u;break;default:r=!1}return r},getDataTypeSize:function(r){var u=0;switch(r){case 0:case 1:u=1;break;case 2:case 3:u=2;break;case 4:case 5:case 6:u=4;break;case 7:u=8;break;default:u=r}return u},getDataTypeUsed:function(r,u){var G=r;switch(r){case 2:case 4:G=r-u;break;case 3:case 5:G=r-2*u;break;case 6:G=0===u?r:1===u?2:1;break;case 7:G=0===u?r:r-2*u+1;break;default:G=r}return G},getOnePixel:function(r,u,G,Q){r=0;switch(G){case 0:r=Q.getInt8(u);
break;case 1:r=Q.getUint8(u);break;case 2:r=Q.getInt16(u,!0);break;case 3:r=Q.getUint16(u,!0);break;case 4:r=Q.getInt32(u,!0);break;case 5:r=Q.getUInt32(u,!0);break;case 6:r=Q.getFloat32(u,!0);break;case 7:r=Q.getFloat64(u,!0);break;default:throw"the decoder does not understand this pixel type";}return r},swapDimensionOrder:function(r,u,G,Q,O){var W=0,X=0,K=0,M=0,V=r;if(1<G)if(V=new Q(u*G),O)for(W=0;W<u;W++)for(M=W,K=0;K<G;K++,M+=u)V[M]=r[X++];else for(W=0;W<u;W++)for(M=W,K=0;K<G;K++,M+=u)V[X++]=
r[M];return V}},L=function(r,u,G){this.val=r;this.left=u;this.right=G};return{decode:function(r,u){u=u||{};var G=u.noDataValue,Q=0,O={};O.ptr=u.inputOffset||0;O.pixels={};x.readHeaderInfo(r,O);Q=O.headerInfo;var W=Q.fileVersion,X=x.getDataTypeArray(Q.imageType);if(5<W)throw"unsupported lerc version 2."+W;x.readMask(r,O);Q.numValidPixel===Q.width*Q.height||O.pixels.resultMask||(O.pixels.resultMask=u.maskData);var K=Q.width*Q.height;O.pixels.resultPixels=new X(K*Q.numDims);O.counter={onesweep:0,uncompressed:0,
lut:0,bitstuffer:0,constant:0,constantoffset:0};var M=!u.returnPixelInterleavedDims;if(0!==Q.numValidPixel)if(Q.zMax===Q.zMin)x.constructConstantSurface(O,M);else if(4<=W&&x.checkMinMaxRanges(r,O))x.constructConstantSurface(O,M);else{var V=new DataView(r,O.ptr,2),R=V.getUint8(0);O.ptr++;if(R)x.readDataOneSweep(r,O,X,M);else if(1<W&&1>=Q.imageType&&1E-5>Math.abs(Q.maxZError-.5)){V=V.getUint8(1);O.ptr++;O.encodeMode=V;if(2<V||4>W&&1<V)throw"Invalid Huffman flag "+V;V?x.readHuffman(r,O,X,M):x.readTiles(r,
O,X,M)}else x.readTiles(r,O,X,M)}O.eofOffset=O.ptr;u.inputOffset?(r=O.headerInfo.blobSize+u.inputOffset-O.ptr,1<=Math.abs(r)&&(O.eofOffset=u.inputOffset+O.headerInfo.blobSize)):(r=O.headerInfo.blobSize-O.ptr,1<=Math.abs(r)&&(O.eofOffset=O.headerInfo.blobSize));r={width:Q.width,height:Q.height,pixelData:O.pixels.resultPixels,minValue:Q.zMin,maxValue:Q.zMax,validPixelCount:Q.numValidPixel,dimCount:Q.numDims,dimStats:{minValues:Q.minValues,maxValues:Q.maxValues},maskData:O.pixels.resultMask};if(O.pixels.resultMask&&
x.isValidPixelValue(Q.imageType,G)){W=O.pixels.resultMask;for(Q=0;Q<K;Q++)W[Q]||(r.pixelData[Q]=G);r.noDataValue=G}O.noDataValue=G;u.returnFileInfo&&(r.fileInfo=x.formatFileInfo(O));return r},getBandCount:function(r){for(var u=0,G=0,Q={ptr:0,pixels:{}};G<r.byteLength-58;)x.readHeaderInfo(r,Q),G+=Q.headerInfo.blobSize,u++,Q.ptr=G;return u}}})})(d);var e=d.exports;const g=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],p=new Set([1,5,6,7,8,34712,34887]),n=function(c,m,x,L,r){var u,G,Q=N.isPlatformLittleEndian===
m,O=H(x,"BITSPERSAMPLE");const W=null!=(u=H(x,"SAMPLEFORMAT"))?u:1;u=S(W,O);O=null!=(G=H(x,"COMPRESSION"))?G:1;G=P(u);if(34887===O)return e.decode(c,{inputOffset:L,returnFileInfo:!0}).pixelData;if(1===O){var X=c.slice(L,L+r);var K=new Uint8Array(X)}else if(8===O||32946===O)K=new Uint8Array(c,L,r),K=new T.Zlib(K),c=K.getBytes(),X=new ArrayBuffer(c.length),K=new Uint8Array(X),K.set(c);else if(6===O)K=new Uint8Array(c,L,r),X=new E.JpegImage,X.parse(K),c=X.getData(X.width,X.height,!0),X=new ArrayBuffer(c.length),
K=new Uint8Array(X),K.set(c);else if(7===O){m=x.get("JPEGTABLES").values;X=m.length-2;K=new Uint8Array(X+r-2);for(x=0;x<X;x++)K[x]=m[x];c=new Uint8Array(c,L+2,r-2);for(L=0;L<c.length;L++)K[X+L]=c[L];X=new E.JpegImage;X.parse(K);c=X.getData(X.width,X.height,!0);X=new ArrayBuffer(c.length);K=new Uint8Array(X);K.set(c)}else 5===O&&(K=J.decode(c,L,r,m),X=K.buffer);if("u8"!==u&&"s8"!==u&&!Q)switch(X=new ArrayBuffer(K.length),Q=new Uint8Array(X),u){case "u16":case "s16":for(u=0;u<K.length;u+=2)Q[u]=K[u+
1],Q[u+1]=K[u];break;case "u32":case "s32":case "f32":for(u=0;u<K.length;u+=4)Q[u]=K[u+3],Q[u+1]=K[u+2],Q[u+2]=K[u+1],Q[u+3]=K[u]}return new G(X)},f=function(c,m,x){if(!(c&&0<c.length&&m&&x))return null;let L,r,u;const G=c[0].length,Q=c.length,O=new Uint8Array(G);for(let X=0;X<Q;X++)if(L=c[X],r=m[X],u=x[X],0===X)for(var W=0;W<G;W++)O[W]=L[W]<r||L[W]>u?0:1;else for(W=0;W<G;W++)O[W]&&(O[W]=L[W]<r||L[W]>u?0:1);return O},b=function(c){if(!c)return null;var m=c.match(/<Item(.*?)Item>/gi);if(!m||0===m.length)return null;
c=new Map;var x;for(var L=0;L<m.length;L++){var r=m[L];var u=r.slice(6,r.indexOf("\x3e"));var G=r.indexOf("sample\x3d");-1<G&&(x=r.slice(G+8,r.indexOf('"',G+8)));G=r.indexOf("name\x3d");-1<G&&(u=r.slice(G+6,r.indexOf('"',G+6)));u&&(r=r.slice(r.indexOf("\x3e")+1,r.indexOf("\x3c/Item\x3e")).trim(),null!=x?c.has(u)?c.get(u)[x]=r:c.set(u,[r]):c.set(u,r));x=null}m=c.get("STATISTICS_MINIMUM");u=c.get("STATISTICS_MAXIMUM");L=c.get("STATISTICS_MEAN");r=c.get("STATISTICS_STDDEV");x=null;if(m&&u)for(x=[],G=
0;G<m.length;G++)x.push({min:parseFloat(m[G]),max:parseFloat(u[G]),avg:L&&parseFloat(L[G]),stddev:r&&parseFloat(r[G])});u=c.get("BandName");L=c.get("WavelengthMin");r=c.get("WavelengthMax");m=null;if(u)for(m=[],G=0;G<u.length;G++)m.push({BandName:u[G],WavelengthMin:L&&parseFloat(L[G]),WavelengthMax:r&&parseFloat(r[G])});u=c.get("DataType");return{statistics:x,bandProperties:m,dataType:u,rawMetadata:c}};U.Lerc2Codec=e;U.decode=function(c,m=0,x){x=x||F(c);const {ifds:L,noData:r}=x;if(0===L.length)throw"no valid image file directory";
var u=a(x);if(u)throw u;u=-1===m?L[L.length-1]:L[m];m=r?r[0]:null;if(x.tileWidth){var G=x,Q,O=q(u,"TILEOFFSETS");if(void 0===O)u=null;else{x=q(u,"TILEBYTECOUNTS");var {width:W,height:X,pixelType:K,tileWidth:M,tileHeight:V}=k([u]),R=y(u,G),aa=G.planes,ca=W*X,da=H(u,"BITSPERSAMPLE"),fa=34887===(null!=(Q=H(u,"COMPRESSION"))?Q:1),ha=P(K);Q=[];for(var ka=0;ka<aa;ka++)Q.push(new ha(ca));var qa,pa;ca=Math.ceil(W/M);if(0===da%8)if(fa&&R&&1<aa)for(R=Math.round(O.length/aa),da=0;da<R;da++){var ja=Math.floor(da/
ca)*V;var oa=da%ca*M;ha=ja*W+oa;for(fa=0;fa<aa;fa++){ka=da*aa+fa;ka=n(c,G.littleEndian,u,O[ka],x[ka]);var ma=0;var ia=ha;var va=Math.min(M,W-oa);var wa=Math.min(V,X-ja);var Fa=Q[fa];for(qa=0;qa<wa;qa++)for(ia=ha+qa*W,ma=qa*M,pa=0;pa<va;pa++,ia++,ma++)Fa[ia]=ka[ma]}}else for(da=0;da<O.length;da++)for(ja=Math.floor(da/ca)*V,oa=da%ca*M,ha=ja*W+oa,ka=n(c,G.littleEndian,u,O[da],x[da]),ma=0,ia=ha,va=Math.min(M,W-oa),wa=Math.min(V,X-ja),ja=0;ja<aa;ja++)if(Fa=Q[ja],R||fa)for(qa=0;qa<wa;qa++)for(ia=ha+qa*
W,ma=M*V*ja+qa*M,pa=0;pa<va;pa++,ia++,ma++)Fa[ia]=ka[ma];else for(qa=0;qa<wa;qa++)for(ia=ha+qa*W,ma=qa*M*aa+ja,pa=0;pa<va;pa++,ia++,ma+=aa)Fa[ia]=ka[ma];u={width:W,height:X,pixelType:K,pixels:Q}}}else if(ca=x,qa=N.isPlatformLittleEndian===ca.littleEndian,pa=q(u,"STRIPOFFSETS"),void 0===pa)u=null;else{var {width:Da,height:Aa,pixelType:ta}=k([u]);x=ca.planes;aa=Da*Aa;da=H(u,"BITSPERSAMPLE");O=P(ta);Q=new O(aa*x);ha=q(u,"STRIPBYTECOUNTS");ka=H(u,"ROWSPERSTRIP");ja=null!=(oa=H(u,"COMPRESSION"))?oa:1;
ia=ka;if(0===da%8)for(u=0;u<pa.length;u++){oa=u*ka*Da*x;ia=(u+1)*ka>Aa?Aa-u*ka:ka;if("u8"===ta||"s8"===ta||qa)8===ja||32946===ja?(R=new Uint8Array(c,pa[u],ha[u]),R=new T.Zlib(R),ma=R.getBytes(),fa=new ArrayBuffer(ma.length),R=new Uint8Array(fa),R.set(ma),R.length!==ia*Da*x*da/8&&console.log("strip byte counts is different than expected")):6===ja?(R=new Uint8Array(c,pa[u],ha[u]),fa=new E.JpegImage,fa.parse(R),ia=fa.getData(fa.width,fa.height,!0),fa=new ArrayBuffer(ia.length),R=new Uint8Array(fa),R.set(ia)):
5===ja?(R=J.decode(c,pa[u],ha[u],ca.littleEndian),fa=R.buffer):1===ja&&(ha[u]!==ia*Da*x*da/8&&console.log("strip byte counts is different than expected"),fa=c.slice(pa[u],pa[u]+ha[u]));else switch(6===ja||8===ja||32946===ja?(R=new Uint8Array(c,pa[u],ha[u]),R=new T.Zlib(R),R=R.getBytes(),fa=new ArrayBuffer(R.length),G=new Uint8Array(fa),R.length!==ia*Da*x*da/8&&console.log("strip byte counts is different than expected")):1===ja&&(ha[u]!==ia*Da*x*da/8&&console.log("strip byte counts is different than expected"),
fa=new ArrayBuffer(ha[u]),R=new Uint8Array(c,pa[u],ha[u]),G=new Uint8Array(fa)),ta){case "u16":case "s16":for(ia=0;ia<R.length;ia+=2)G[ia]=R[ia+1],G[ia+1]=R[ia];break;case "u32":case "s32":case "f32":for(ia=0;ia<R.length;ia+=4)G[ia]=R[ia+3],G[ia+1]=R[ia+2],G[ia+2]=R[ia+1],G[ia+3]=R[ia]}ia=new O(fa);Q.set(ia,oa)}R=[];if(1===x)R.push(Q);else for(u=0;u<x;u++){G=new O(aa);for(c=0;c<aa;c++)G[c]=Q[c*x+u];R.push(G)}u={width:Da,height:Aa,pixelType:ta,pixels:R}}if(null!==m){u.mask=new Uint8Array(u.width*u.height);
if(1E24<Math.abs(m))for(c=0;c<u.width*u.height;c++)u.mask[c]=1E-6>Math.abs((u.pixels[0][c]-m)/m)?0:1;else for(c=0;c<u.width*u.height;c++)u.mask[c]=u.pixels[0][c]===m?0:1;u.noDataValue=m}return u};U.decodeTileOrStrip=function(c,m){var x;const {headerInfo:L,ifd:r,offsets:u,sizes:G}=m;var Q=u.map((ka,qa)=>n(c,L.littleEndian,r,ka,G[qa]||c.byteLength)),O=y(r,L);const {pixelType:W,planes:X}=L;var K=P(W);const M=H(r,"TILEWIDTH"),V=H(r,"TILELENGTH");var R=null!=(x=H(r,"COMPRESSION"))?x:1;x=M*V;const aa=[];
let ca=Q[0];const da=34887===R;for(let ka=0;ka<X;ka++){R=new K(x);if(O&&da){ca=Q[ka];for(var fa=0;fa<x;fa++)R[fa]=ca[ka][fa+ka]}else if(O||da&&!O)R=ca.slice(x*ka,x*(ka+1));else for(fa=0;fa<x;fa++)R[fa]=ca[fa*X+ka];aa.push(R)}Q=L.noData?L.noData[0]:null;O=(K=L.metadata?L.metadata.statistics:null)?K.map(ka=>ka.min):null;K=K?K.map(ka=>ka.max):null;let ha;if(null!=Q)if(ha=new Uint8Array(x),1E24<Math.abs(Q))for(m=0;m<x;m++)ha[m]=1E-6>Math.abs((aa[0][m]-Q)/Q)?0:1;else for(m=0;m<x;m++)ha[m]=aa[0][m]===Q?
0:1;else O&&K&&m.applyMinMaxConstraint&&(ha=f(aa,O,K));return{pixelType:W,width:M,height:V,pixels:aa,mask:ha,noDataValue:Q}};U.getImageInfo=k;U.isBSQConfig=y;U.parseFieldValues=v;U.parseHeader=F;U.parseIFD=l;U.parseSignature=z})},"esri/layers/support/rasterDatasets/byteStreamUtils":function(){define(["exports"],function(U){U.bytesToUTF8=function(t,E){let J=0,A="",N=0,T=0;const S=t.length;for(;J<S;)if(T=t[J++],N=T>>4,8>N?N=1:15===N?(N=4,T=(T&7)<<18|(t[J++]&63)<<12|(t[J++]&63)<<6|t[J++]&63):14===N?
(N=3,T=(T&15)<<12|(t[J++]&63)<<6|t[J++]&63):(N=2,T=(T&31)<<6|t[J++]&63),0!==T||E)A+=String.fromCharCode(T);return A};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/Lzw":function(){define(["exports"],function(U){function t(N,T,S,P=!0){if(0!==T%4||0!==S%4){var I=new ArrayBuffer(4*Math.ceil(S/4));I=new Uint8Array(I);N=new Uint8Array(N,T,S);if(P)for(P=0;P<I.length;P+=4)I[P]=N[P+3],I[P+1]=N[P+2],I[P+2]=N[P+1],I[P+3]=N[P];else I.set(N);return new Uint32Array(I.buffer)}if(P){P=
new Uint8Array(N,T,S);I=new Uint8Array(P.length);for(N=0;N<I.length;N+=4)I[N]=P[N+3],I[N+1]=P[N+2],I[N+2]=P[N+1],I[N+3]=P[N];return new Uint32Array(I.buffer)}return new Uint32Array(N,T,S/4)}function E(){const N=[];for(let T=0;257>=T;T++)N[T]=[T];return N}function J(N,T){for(let S=0;S<T.length;S++)N.push(T[S])}const A=new Set;A.add(511);A.add(1023);A.add(2047);A.add(4095);A.add(8191);U.decode=function(N,T,S,P=!0){N=t(N,T,S,P);T=9;P=E();let I=32,D=P.length,q=[],B=1,H=N[0],h=0;const v=N.length;S=8*(4*
v-S);const k=[];for(;null!=H;){if(I>=T)I-=T,h=H>>>32-T,H<<=T;else{h=H>>>32-I;H=N[B++];var y=T-I;I=32-y;h=(h<<y)+(H>>>I);H<<=y}if(257===h)break;if(256===h)T=9,P=E(),D=P.length,q=[];else{y=P[h];if(null==y){if(h>P.length)throw"data integrity issue: code does not exist on code page";q.push(q[0]);P[D++]=q.slice();J(k,q)}else J(k,y),q.push(y[0]),1<q.length&&(P[D++]=q.slice()),q=y.slice();A.has(D)&&T++;0===I&&(H=N[B++],I=32);if(B>v||B===v&&I<=S)break}}return new Uint8Array(k)};Object.defineProperty(U,"__esModule",
{value:!0})})},"esri/layers/support/rasterFormats/TiffTags":function(){define(function(){const U=(()=>{const A=[];A[254]="NEWSUBFILETYPE";A[255]="SUBFILETYPE";A[256]="IMAGEWIDTH";A[257]="IMAGELENGTH";A[258]="BITSPERSAMPLE";A[259]="COMPRESSION";A[262]="PHOTOMETRICINTERPRETATION";A[263]="THRESHHOLDING";A[264]="CELLWIDTH";A[265]="CELLLENGTH";A[266]="FILLORDER";A[269]="DOCUMENTNAME";A[270]="IMAGEDESCRIPTION";A[271]="MAKE";A[272]="MODEL";A[273]="STRIPOFFSETS";A[274]="ORIENTATION";A[277]="SAMPLESPERPIXEL";
A[278]="ROWSPERSTRIP";A[279]="STRIPBYTECOUNTS";A[280]="MINSAMPLEVALUE";A[281]="MAXSAMPLEVALUE";A[282]="XRESOLUTION";A[283]="YRESOLUTION";A[284]="PLANARCONFIGURATION";A[285]="PAGENAME";A[286]="XPOSITION";A[287]="YPOSITION";A[288]="FREEOFFSETS";A[289]="FREEBYTECOUNTS";A[290]="GRAYRESPONSEUNIT";A[291]="GRAYRESPONSECURVE";A[292]="T4OPTIONS";A[293]="T6OPTIONS";A[296]="RESOLUTIONUNIT";A[297]="PAGENUMBER";A[300]="COLORRESPONSEUNIT";A[301]="TRANSFERFUNCTION";A[305]="SOFTWARE";A[306]="DATETIME";A[315]="ARTIST";
A[316]="HOSTCOMPUTER";A[317]="PREDICTOR";A[318]="WHITEPOINT";A[319]="PRIMARYCHROMATICITIES";A[320]="COLORMAP";A[321]="HALFTONEHINTS";A[322]="TILEWIDTH";A[323]="TILELENGTH";A[324]="TILEOFFSETS";A[325]="TILEBYTECOUNTS";A[326]="BADFAXLINES";A[327]="CLEANFAXDATA";A[328]="CONSECUTIVEBADFAXLINES";A[330]="SUBIFD";A[332]="INKSET";A[333]="INKNAMES";A[334]="NUMBEROFINKS";A[336]="DOTRANGE";A[337]="TARGETPRINTER";A[338]="EXTRASAMPLES";A[339]="SAMPLEFORMAT";A[340]="SMINSAMPLEVALUE";A[341]="SMAXSAMPLEVALUE";A[342]=
"TRANSFERRANGE";A[347]="JPEGTABLES";A[512]="JPEGPROC";A[513]="JPEGIFOFFSET";A[514]="JPEGIFBYTECOUNT";A[515]="JPEGRESTARTINTERVAL";A[517]="JPEGLOSSLESSPREDICTORS";A[518]="JPEGPOINTTRANSFORM";A[519]="JPEGQTABLES";A[520]="JPEGDCTABLES";A[521]="JPEGACTABLES";A[529]="YCBCRCOEFFICIENTS";A[530]="YCBCRSUBSAMPLING";A[531]="YCBCRPOSITIONING";A[532]="REFERENCEBLACKWHITE";A[700]="XMP";A[33550]="GEOPIXELSCALE";A[33922]="GEOTIEPOINTS";A[33432]="COPYRIGHT";A[42112]="GDAL_METADATA";A[42113]="GDAL_NODATA";A[50844]=
"RPCCOEFFICIENT";A[34264]="GEOTRANSMATRIX";A[34735]="GEOKEYDIRECTORY";A[34736]="GEODOUBLEPARAMS";A[34737]="GEOASCIIPARAMS";A[34665]="EXIFIFD";A[34853]="GPSIFD";A[40965]="INTEROPERABILITYIFD";return A})(),t=(()=>{const A=[].concat(U);A[36864]="ExifVersion";A[40960]="FlashpixVersion";A[40961]="ColorSpace";A[42240]="Gamma";A[37121]="ComponentsConfiguration";A[37122]="CompressedBitsPerPixel";A[40962]="PixelXDimension";A[40963]="PixelYDimension";A[37500]="MakerNote";A[37510]="UserComment";A[40964]="RelatedSoundFile";
A[36867]="DateTimeOriginal";A[36868]="DateTimeDigitized";A[36880]="OffsetTime";A[36881]="OffsetTimeOriginal";A[36882]="OffsetTimeDigitized";A[37520]="SubSecTime";A[37521]="SubSecTimeOriginal";A[37522]="SubSecTimeDigitized";A[37888]="Temperature";A[37889]="Humidity";A[37890]="Pressure";A[37891]="WaterDepth";A[37892]="Acceleration";A[37893]="CameraElevationAngle";A[42016]="ImageUniqueID";A[42032]="CameraOwnerName";A[42033]="BodySerialNumber";A[42034]="LensSpecification";A[42035]="LensMake";A[42036]=
"LensModel";A[42037]="LensSerialNumber";A[33434]="ExposureTime";A[33437]="FNumber";A[34850]="ExposureProgram";A[34852]="SpectralSensitivity";A[34855]="PhotographicSensitivity";A[34856]="OECF";A[34864]="SensitivityType";A[34865]="StandardOutputSensitivity";A[34866]="RecommendedExposureIndex";A[34867]="ISOSpeed";A[34868]="ISOSpeedLatitudeyyy";A[34869]="ISOSpeedLatitudezzz";A[37377]="ShutterSpeedValue";A[37378]="ApertureValue";A[37379]="BrightnessValue";A[37380]="ExposureBiasValue";A[37381]="MaxApertureValue";
A[37382]="SubjectDistance";A[37383]="MeteringMode";A[37384]="LightSource";A[37385]="Flash";A[37386]="FocalLength";A[37396]="SubjectArea";A[41483]="FlashEnergy";A[41484]="SpatialFrequencyResponse";A[41486]="FocalPlaneXResolution";A[41487]="FocalPlaneYResolution";A[41488]="FocalPlaneResolutionUnit";A[41492]="SubjectLocation";A[41493]="ExposureIndex";A[41495]="SensingMethod";A[41728]="FileSource";A[41729]="SceneType";A[41730]="CFAPattern";A[41985]="CustomRendered";A[41986]="ExposureMode";A[41987]="WhiteBalance";
A[41988]="DigitalZoomRatio";A[41989]="FocalLengthIn35mmFilm";A[41990]="SceneCaptureType";A[41991]="GainControl";A[41992]="Contrast";A[41993]="Saturation";A[41994]="Sharpness";A[41995]="DeviceSettingDescription";A[41996]="SubjectDistanceRange";return A})(),E=(()=>{const A=[];A[1024]="GTModelTypeGeoKey";A[1025]="GTRasterTypeGeoKey";A[1026]="GTCitationGeoKey";A[2048]="GeographicTypeGeoKey";A[2049]="GeogCitationGeoKey";A[2050]="GeogGeodeticDatumGeoKey";A[2051]="GeogPrimeMeridianGeoKey";A[2052]="GeogLinearUnitsGeoKey";
A[2053]="GeogLinearUnitSizeGeoKey";A[2054]="GeogAngularUnitsGeoKey";A[2055]="GeogAngularUnitSizeGeoKey";A[2056]="GeogEllipsoidGeoKey";A[2057]="GeogSemiMajorAxisGeoKey";A[2058]="GeogSemiMinorAxisGeoKey";A[2059]="GeogInvFlatteningGeoKey";A[2061]="GeogPrimeMeridianLongGeoKey";A[2060]="GeogAzimuthUnitsGeoKey";A[3072]="ProjectedCSTypeGeoKey";A[3073]="PCSCitationGeoKey";A[3074]="ProjectionGeoKey";A[3075]="ProjCoordTransGeoKey";A[3076]="ProjLinearUnitsGeoKey";A[3077]="ProjLinearUnitSizeGeoKey";A[3078]="ProjStdParallel1GeoKey";
A[3079]="ProjStdParallel2GeoKey";A[3080]="ProjNatOriginLongGeoKey";A[3081]="ProjNatOriginLatGeoKey";A[3082]="ProjFalseEastingGeoKey";A[3083]="ProjFalseNorthingGeoKey";A[3084]="ProjFalseOriginLongGeoKey";A[3085]="ProjFalseOriginLatGeoKey";A[3086]="ProjFalseOriginEastingGeoKey";A[3087]="ProjFalseOriginNorthingGeoKey";A[3088]="ProjCenterLongGeoKey";A[3090]="ProjCenterEastingGeoKey";A[3091]="ProjCenterNorthingGeoKey";A[3092]="ProjScaleAtNatOriginGeoKey";A[3093]="ProjScaleAtCenterGeoKey";A[3094]="ProjAzimuthAngleGeoKey";
A[3095]="ProjStraightVertPoleLongGeoKey";A[4096]="VerticalCSTypeGeoKey";A[4097]="VerticalCitationGeoKey";A[4098]="VerticalDatumGeoKey";A[4099]="VerticalUnitsGeoKey";return A})(),J=new Map;J.set("EXIFIFD",t);J.set("GPSIFD","GPSVersionID GPSLatitudeRef GPSLatitude GPSLongitudeRef GPSLongitude GPSAltitudeRef GPSAltitude GPSTimeStamp GPSSatellites GPSStatus GPSMeasureMode GPSDOP GPSSpeedRef GPSSpeed GPSTrackRef GPSTrack GPSImgDirectionRef GPSImgDirection GPSMapDatum GPSDestLatitudeRef GPSDestLatitude GPSDestLongitudeRef GPSDestLongitude GPSDestBearingRef GPSDestBearing GPSDestDistanceRef GPSDestDistance GPSProcessingMethod GPSAreaInformation GPSDateStamp GPSDifferential GPSHPositioningError".split(" "));
return{TIFF_TAGS:U,ifdTags:J,GEO_KEYS:E,getTagName:function(A,N){N=(N||U)[A];void 0===N&&(N="unknown"+String(A));return N}}})},"esri/layers/support/rasterFormats/utils":function(){define(["exports"],function(U){{var t=new ArrayBuffer(4);const E=new Uint8Array(t);(new Uint32Array(t))[0]=1;t=1===E[0]}U.isPlatformLittleEndian=t;Object.defineProperty(U,"__esModule",{value:!0})})},"esri/chunks/LercCodec":function(){define(["exports","../core/mathUtils"],function(U,t){var E=t.clampFloat32(-Infinity);U.decode=
function(J,A){A=A||{};var N=A.inputOffset||0;var T=A.encodedMaskData||null===A.encodedMaskData;var S=new Uint8Array(J,N,10);S=String.fromCharCode.apply(null,S);if("CntZImage"!=S.trim())throw"Unexpected file identifier string: "+S;N+=10;var P=new DataView(J,N,24);var I=P.getInt32(0,!0);var D=P.getInt32(4,!0);var q=P.getUint32(8,!0);var B=P.getUint32(12,!0);var H=P.getFloat64(16,!0);N+=24;if(!T){P=new DataView(J,N,16);var h={};h.numBlocksY=P.getUint32(0,!0);h.numBlocksX=P.getUint32(4,!0);h.numBytes=
P.getUint32(8,!0);h.maxValue=P.getFloat32(12,!0);N+=16;if(0<h.numBytes){T=new Uint8Array(Math.ceil(B*q/8));P=new DataView(J,N,h.numBytes);var v=P.getInt16(0,!0);var k=2;var y=0;do{if(0<v)for(;v--;)T[y++]=P.getUint8(k++);else{var F=P.getUint8(k++);for(v=-v;v--;)T[y++]=F}v=P.getInt16(k,!0);k+=2}while(k<h.numBytes);if(-32768!==v||y<T.length)throw"Unexpected end of mask RLE encoding";h.bitset=T;N+=h.numBytes}else 0===(h.numBytes|h.numBlocksY|h.maxValue)&&(T=new Uint8Array(Math.ceil(B*q/8)),h.bitset=T)}P=
new DataView(J,N,16);var w=T=F=y=k=v=void 0;v=P.getUint32(0,!0);k=P.getUint32(4,!0);y=P.getUint32(8,!0);F=P.getFloat32(12,!0);N+=16;w=k;T=v;w+=0<B%w?1:0;var C=T+(0<q%T?1:0);T=Array(w*C);for(var z=1E9,l=0,a=0;a<C;a++)for(var d=0;d<w;d++){var e=0;P=new DataView(J,N,Math.min(10,J.byteLength-N));var g={};T[l++]=g;var p=P.getUint8(0);e++;g.encoding=p&63;if(3<g.encoding)throw"Invalid block encoding ("+g.encoding+")";if(2===g.encoding)N++,z=Math.min(z,0);else{if(0!==p&&2!==p){p>>=6;g.offsetType=p;if(2===
p)g.offset=P.getInt8(1),e++;else if(1===p)g.offset=P.getInt16(1,!0),e+=2;else if(0===p)g.offset=P.getFloat32(1,!0),e+=4;else throw"Invalid block offset type";z=Math.min(g.offset,z);if(1===g.encoding)if(p=P.getUint8(e),e++,g.bitsPerPixel=p&63,p>>=6,g.numValidPixelsType=p,2===p)g.numValidPixels=P.getUint8(e),e++;else if(1===p)g.numValidPixels=P.getUint16(e,!0),e+=2;else if(0===p)g.numValidPixels=P.getUint32(e,!0),e+=4;else throw"Invalid valid pixel count type";}N+=e;if(3!=g.encoding)if(0===g.encoding){P=
(y-1)/4;if(P!==Math.floor(P))throw"uncompressed block has invalid length";e=new ArrayBuffer(4*P);p=new Uint8Array(e);p.set(new Uint8Array(J,N,4*P));e=new Float32Array(e);for(p=0;p<e.length;p++)z=Math.min(z,e[p]);g.rawData=e;N+=4*P}else 1===g.encoding&&(P=Math.ceil(g.numValidPixels*g.bitsPerPixel/8),e=new ArrayBuffer(4*Math.ceil(P/4)),p=new Uint8Array(e),p.set(new Uint8Array(J,N,P)),g.stuffedData=new Uint32Array(e),N+=P)}}w=z;J=N;N=null!=A.noDataValue?t.clampFloat32(A.noDataValue):E;C=A.encodedMaskData;
p=A.returnMask;z=0;l=k;a=v;d=Math.floor(B/l);g=Math.floor(q/a);e=2*H;C=C||(h?h.bitset:null);var n;P=new (A.pixelType||Float32Array)(B*q);p&&C&&(n=new Uint8Array(B*q));p=new Float32Array(d*g);for(var f,b,c=0;c<=a;c++){var m=c!==a?g:q%a;if(0!==m)for(var x=0;x<=l;x++){var L=x!==l?d:B%l;if(0!==L){var r=c*B*g+x*d,u=B-L,G=T[z],Q;if(2>G.encoding){if(0===G.encoding)var O=G.rawData;else{f=Q=O=void 0;b=G.stuffedData;var W=G.bitsPerPixel,X=G.numValidPixels,K=G.offset,M=e,V=p,R=F,aa=(1<<W)-1,ca=0,da=0,fa=Math.ceil((R-
K)/M);b[b.length-1]<<=8*(4*b.length-Math.ceil(W*X/8));for(f=0;f<X;f++)0===da&&(O=b[ca++],da=32),da>=W?(Q=O>>>da-W&aa,da-=W):(da=W-da,Q=(O&aa)<<da&aa,O=b[ca++],da=32-da,Q+=O>>>da),V[f]=Q<fa?K+Q*M:R;O=p}Q=0}else var ha=2===G.encoding?0:G.offset;if(C)for(b=0;b<m;b++){if(r&7){var ka=C[r>>3];ka<<=r&7}for(f=0;f<L;f++)r&7||(ka=C[r>>3]),ka&128?(n&&(n[r]=1),P[r++]=2>G.encoding?O[Q++]:ha):(n&&(n[r]=0),P[r++]=N),ka<<=1;r+=u}else if(2>G.encoding)for(b=0;b<m;b++){for(f=0;f<L;f++)P[r++]=O[Q++];r+=u}else for(b=
0;b<m;b++)if(P.fill)P.fill(ha,r,r+L),r+=L+u;else{for(f=0;f<L;f++)P[r++]=ha;r+=u}if(1===G.encoding&&Q!==G.numValidPixels)throw"Block and Mask do not match";z++}}}ha=n;n={width:B,height:q,pixelData:P,minValue:w,maxValue:F,noDataValue:N};ha&&(n.maskData=ha);A.returnEncodedMask&&h&&(n.encodedMaskData=h.bitset?h.bitset:null);if(A.returnFileInfo&&(n.fileInfo={fileIdentifierString:S,fileVersion:I,imageType:D,height:q,width:B,maxZError:H,eofOffset:J,mask:h?{numBlocksX:h.numBlocksX,numBlocksY:h.numBlocksY,
numBytes:h.numBytes,maxValue:h.maxValue}:null,pixels:{numBlocksX:k,numBlocksY:v,numBytes:y,maxValue:F,minValue:w,noDataValue:N}},A.computeUsedBitDepths)){A=n.fileInfo;h=k*v;S={};for(I=0;I<h;I++)D=T[I],0===D.encoding?S.float32=!0:1===D.encoding?S[D.bitsPerPixel]=!0:S[0]=!0;h=Object.keys(S);A.bitDepths=h}return n}})},"esri/layers/support/rasterFormats/Raw":function(){define(function(){const U=function(t){let E=1;switch(t){case Uint8Array:case Int8Array:E=1;break;case Uint16Array:case Int16Array:E=2;
break;case Uint32Array:case Int32Array:case Float32Array:E=4;break;case Float64Array:E=8}return E};return function(){function t(){}t.decode=function(E,J){var A=J.pixelType;const N=[],T=J.width*J.height;var S=Math.floor(E.byteLength/(J.width*J.height*U(J.pixelType)));const {bandIds:P,format:I}=J;J=P&&P.length||Math.floor(E.byteLength/(J.width*J.height*U(J.pixelType)));var D=E.byteLength-E.byteLength%(T*U(A));const q=new A(E,0,T*S);let B,H;let h,v;if("bip"===I)for(B=0;B<J;B++){h=new A(T);v=P?P[B]:B;
for(H=0;H<T;H++)h[H]=q[H*S+v];N.push(h)}else if("bsq"===I)for(B=0;B<J;B++)v=P?P[B]:B,N.push(q.subarray(v*T,(v+1)*T));if(D<E.byteLength-1)if(E=E.slice(D),8*E.byteLength<T)var k=null;else{E=new Uint8Array(E,0,Math.ceil(T/8));A=new Uint8Array(T);for(J=D=J=k=S=0;J<E.length-1;J++)for(k=E[J],D=7;0<=D;D--)A[S++]=k>>D&1;for(D=7;S<T-1;)k=E[E.length-1],A[S++]=k>>D&1,D--;k=A}return{pixels:N,mask:k}};return t}()})},"esri/layers/support/rasterDatasets/DBFParser":function(){define(["../../../chunks/_rollupPluginBabelHelpers",
"./byteStreamUtils"],function(U,t){function E(J){var A=J.fields;J=J.records;const N=A.some(D=>"oid"===D.name.toLowerCase())?"OBJECTID":"OID";A=[{name:N,type:"esriFieldTypeOID",alias:"OID"}].concat(A.map(D=>({name:D.name,type:"esriFieldType"+D.typeName,alias:D.name})));const T=A.map(D=>D.name),S=[];let P=0,I=0;J.forEach(D=>{const q={};q[N]=P++;for(I=1;I<T.length;I++)q[T[I]]=D[I-1];S.push({attributes:q})});return{displayFieldName:"",fields:A,features:S}}return function(){function J(){}J.parse=function(A){var N=
new DataView(A),T=N.getUint8(0)&3;if(3!==T)return{header:{version:T},recordSet:null};const S=N.getUint32(4,!0);var P=N.getUint16(8,!0);const I=N.getUint16(10,!0);P={version:T,recordCount:S,headerByteCount:P,recordByteCount:I};let D=32;const q=[],B=[];if(3===T){for(;13!==N.getUint8(D);)T=String.fromCharCode(N.getUint8(D+11)).trim(),q.push({name:t.bytesToUTF8(new Uint8Array(A,D,11)),type:T,typeName:"String Date Double Boolean String Integer".split(" ")["CDFLMN".split("").indexOf(T)],length:N.getUint8(D+
16)}),D+=32;D+=1;if(0<q.length)for(;B.length<S&&A.byteLength-D>I;){const H=[];32===N.getUint8(D)?(D+=1,q.forEach(h=>{if("C"===h.type)H.push(t.bytesToUTF8(new Uint8Array(A,D,h.length)).trim());else if("N"===h.type)H.push(parseInt(String.fromCharCode.apply(null,new Uint8Array(A,D,h.length)).trim(),10));else if("F"===h.type)H.push(parseFloat(String.fromCharCode.apply(null,new Uint8Array(A,D,h.length)).trim()));else if("D"===h.type){const v=String.fromCharCode.apply(null,new Uint8Array(A,D,h.length)).trim();
H.push(new Date(parseInt(v.substring(0,4),10),parseInt(v.substring(4,6),10)-1,parseInt(v.substring(6,8),10)))}D+=h.length}),B.push(H)):D+=I}}N=E({fields:q,records:B});return{header:P,fields:q,records:B,recordSet:N}};U._createClass(J,null,[{key:"supportedVersions",get:function(){return[5]}}]);return J}()})},"esri/layers/support/rasterTransforms/utils":function(){define(["exports","./IdentityTransform","./PolynomialTransform"],function(U,t,E){const J={PolynomialXform:E,IdentityXform:t},A=Object.keys(J);
U.isTransformSupported=function(N){const T=null==N?void 0:N.type;return!N||A.includes(T)};U.readTransform=function(N){if(null==N||!N.type)return null;var T=J[null==N?void 0:N.type];return T?(T=new T,T.read(N),T):null};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/rasterTransforms/IdentityTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ./BaseRasterTransform".split(" "),
function(U,t,E,J,A,N,T,S,P){E=function(I){function D(){var q=I.apply(this,arguments)||this;q.type="identity";return q}U._inheritsLoose(D,I);return D}(P);t.__decorate([T.enumeration({IdentityXform:"identity"})],E.prototype,"type",void 0);return E=t.__decorate([S.subclass("esri.layers.support.rasterTransforms.IdentityTransform")],E)})},"esri/layers/support/rasterTransforms/BaseRasterTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass".split(" "),
function(U,t,E,J,A,N,T,S){E=function(P){function I(){var q=P.apply(this,arguments)||this;q.affectsPixelSize=!1;return q}U._inheritsLoose(I,P);var D=I.prototype;D.forwardTransform=function(q){return q};D.inverseTransform=function(q){return q};return I}(E.JSONSupport);t.__decorate([J.property()],E.prototype,"affectsPixelSize",void 0);t.__decorate([J.property({json:{write:!0}})],E.prototype,"spatialReference",void 0);return E=t.__decorate([S.subclass("esri.layers.support.rasterTransforms.BaseRasterTransform")],
E)})},"esri/layers/support/rasterTransforms/PolynomialTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ./BaseRasterTransform ../../../geometry/Point ../../../geometry/Extent".split(" "),
function(U,t,E,J,A,N,T,S,P,I,D,q,B,H){function h(k,y,F){const {x:w,y:C}=y;if(2>F)return{x:k[0]+w*k[2]+C*k[4],y:k[1]+w*k[3]+C*k[5]};if(2===F){y=w*w;F=C*C;var z=w*C;return{x:k[0]+w*k[2]+C*k[4]+y*k[6]+z*k[8]+F*k[10],y:k[1]+w*k[3]+C*k[5]+y*k[7]+z*k[9]+F*k[11]}}y=w*w;F=C*C;z=w*C;const l=y*w,a=y*C,d=w*F,e=C*F;return{x:k[0]+w*k[2]+C*k[4]+y*k[6]+z*k[8]+F*k[10]+l*k[12]+a*k[14]+d*k[16]+e*k[18],y:k[1]+w*k[3]+C*k[5]+y*k[7]+z*k[9]+F*k[11]+l*k[13]+a*k[15]+d*k[17]+e*k[19]}}function v(k,y,F){const {xmin:w,ymin:C,
xmax:z,ymax:l,spatialReference:a}=y;y=[];if(2>F)y.push({x:w,y:l}),y.push({x:z,y:l}),y.push({x:w,y:C}),y.push({x:z,y:C});else{var d=10;for(var e=0;e<d;e++)y.push({x:w,y:C+(l-C)*e/(d-1)}),y.push({x:z,y:C+(l-C)*e/(d-1)});d=8;for(e=1;e<=d;e++)y.push({x:w+(z-w)*e/d,y:C}),y.push({x:w+(z-w)*e/d,y:l})}y=y.map(g=>h(k,g,F));d=y.map(g=>g.x);y=y.map(g=>g.y);return new H({xmin:Math.min.apply(null,d),xmax:Math.max.apply(null,d),ymin:Math.min.apply(null,y),ymax:Math.max.apply(null,y),spatialReference:a})}E=function(k){function y(){var w=
k.apply(this,arguments)||this;w.polynomialOrder=1;w.type="polynomial";return w}U._inheritsLoose(y,k);var F=y.prototype;F.readForwardCoefficients=function(w,C){const {coeffX:z,coeffY:l}=C;if(null==z||!z.length||null==l||!l.length||z.length!==l.length)return null;w=[];for(C=0;C<z.length;C++)w.push(z[C]),w.push(l[C]);return w};F.writeForwardCoefficients=function(w,C,z){z=[];const l=[];for(let a=0;a<(null==w?void 0:w.length);a++)0===a%2?z.push(w[a]):l.push(w[a]);C.coeffX=z;C.coeffY=l};F.readInverseCoefficients=
function(w,C){const {inverseCoeffX:z,inverseCoeffY:l}=C;if(null==z||!z.length||null==l||!l.length||z.length!==l.length)return null;w=[];for(C=0;C<z.length;C++)w.push(z[C]),w.push(l[C]);return w};F.writeInverseCoefficients=function(w,C,z){z=[];const l=[];for(let a=0;a<(null==w?void 0:w.length);a++)0===a%2?z.push(w[a]):l.push(w[a]);C.inverseCoeffX=z;C.inverseCoeffY=l};F.forwardTransform=function(w){if("point"===w.type){const C=h(this.forwardCoefficients,w,this.polynomialOrder);return new B({x:C.x,y:C.y,
spatialReference:w.spatialReference})}return v(this.forwardCoefficients,w,this.polynomialOrder)};F.inverseTransform=function(w){if("point"===w.type){const C=h(this.inverseCoefficients,w,this.polynomialOrder);return new B({x:C.x,y:C.y,spatialReference:w.spatialReference})}return v(this.inverseCoefficients,w,this.polynomialOrder)};U._createClass(y,[{key:"inverseCoefficients",get:function(){var w=this._get("inverseCoefficients"),C=this._get("forwardCoefficients");if(!w&&C&&2>this.polynomialOrder){{const [z,
l,a,d,e,g]=C;w=a*g-e*d;C=e*d-a*g;w=[(e*l-z*g)/w,(a*l-z*d)/C,g/w,d/C,-e/w,-a/C]}}return w},set:function(w){this._set("inverseCoefficients",w)}}]);return y}(q);t.__decorate([J.property({json:{write:!0}})],E.prototype,"polynomialOrder",void 0);t.__decorate([J.property()],E.prototype,"forwardCoefficients",void 0);t.__decorate([P.reader("forwardCoefficients",["coeffX","coeffY"])],E.prototype,"readForwardCoefficients",null);t.__decorate([D.writer("forwardCoefficients")],E.prototype,"writeForwardCoefficients",
null);t.__decorate([J.property({json:{write:!0}})],E.prototype,"inverseCoefficients",null);t.__decorate([P.reader("inverseCoefficients",["inverseCoeffX","inverseCoeffY"])],E.prototype,"readInverseCoefficients",null);t.__decorate([D.writer("inverseCoefficients")],E.prototype,"writeInverseCoefficients",null);t.__decorate([J.property()],E.prototype,"affectsPixelSize",void 0);t.__decorate([S.enumeration({PolynomialXform:"polynomial"})],E.prototype,"type",void 0);return E=t.__decorate([I.subclass("esri.layers.support.rasterTransforms.PolynomialTransform")],
E)})},"esri/layers/support/rasterDatasets/ImageAuxRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/promiseUtils ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ./BaseRaster ./InMemoryRaster ./pamParser ../rasterFormats/RasterCodec ../rasterFunctions/pixelUtils ../rasterTransforms/PolynomialTransform ../../../geometry/SpatialReference ../../../geometry/Extent".split(" "),
function(U,t,E,J,A,N,T,S,P,I,D,q,B,H,h,v,k,y,F){E=function(w){function C(){return w.apply(this,arguments)||this}U._inheritsLoose(C,w);var z=C.prototype;z.open=function(){var l=U._asyncToGenerator(function*(a){yield this.init();var d=yield this._fetchData(a);let {spatialReference:e,statistics:g,histograms:p,transform:n}=yield this._fetchAuxiliaryData(a);(a=!e)&&(e=new y({wkid:3857}));null!=p&&p.length&&null==g&&(g=v.estimateStatisticsFromHistograms(p));const {width:f,height:b}=d;let c=new F({xmin:-.5,
ymin:.5-b,xmax:f-.5,ymax:.5,spatialReference:e});const m=n?n.forwardTransform(c):c;var x=!0;n&&(x=(x=n.forwardCoefficients)&&0===x[1]&&0===x[2])&&(n=null,c=m);d=new B({data:{extent:m,nativeExtent:c,transform:n,pixelBlock:d,statistics:g,histograms:p,keyProperties:{DateType:"Processed"},isPseudoSpatialReference:a}});yield d.open();this._set("rasterInfo",d.rasterInfo);this._inMemoryRaster=d});return function(a){return l.apply(this,arguments)}}();z.fetchRawTile=function(l,a,d,e={}){return this._inMemoryRaster.fetchRawTile(l,
a,d,e)};z._fetchData=function(){var l=U._asyncToGenerator(function*(a){({data:a}=yield this.request(this.url,{responseType:"array-buffer",signal:null==a?void 0:a.signal}));const d=h.getFormat(a).toUpperCase();if("JPG"===d||"PNG"===d||"GIF"===d||"BMP"===d)this._set("datasetFormat",d);else throw new J("image-aux-raster:open","the data is not a supported format");return yield this.decodePixelBlock(a,{format:"jpg",width:1,height:1,useCanvas:!0})});return function(a){return l.apply(this,arguments)}}();
z._fetchAuxiliaryData=function(){var l=U._asyncToGenerator(function*(a){var d,e;a=A.unwrap(null==a?void 0:a.signal);var g=null!=(d=this.ioConfig.skipExtensions)?d:[];d=-1<g.indexOf("aux.xml")?null:this.request(this.url+".aux.xml",{responseType:"xml",signal:a});var p=this.datasetFormat;p="JPG"===p?"jgw":"PNG"===p?"pgw":"BMP"===p?"bpw":null;g=-1<g.indexOf(p)?null:this.request(this.url.slice(0,this.url.lastIndexOf("."))+"."+p,{responseType:"text",signal:a});g=yield N.eachAlways([d,g]);if(null!=a&&a.aborted)throw N.createAbortError();
a=H.parsePAMInfo(null==(e=g[0].value)?void 0:e.data);a.transform||(e=g[1].value?g[1].value.data.split("\n").slice(0,6).map(n=>Number(n)):null,a.transform=6===(null==e?void 0:e.length)?new k({forwardCoefficients:[e[4],e[5],e[0],-e[1],e[2],-e[3]]}):null);return a});return function(a){return l.apply(this,arguments)}}();return C}(q);t.__decorate([T.property({type:String,json:{write:!0}})],E.prototype,"datasetFormat",void 0);return E=t.__decorate([D.subclass("esri.layers.support.rasterDatasets.ImageAuxRaster")],
E)})},"esri/layers/support/rasterDatasets/InMemoryRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/promiseUtils ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ../RasterInfo ./BaseRaster ../rasterFunctions/pixelUtils ../../../geometry/Extent ../../../geometry/SpatialReference".split(" "),
function(U,t,E,J,A,N,T,S,P,I,D,q,B,H,h,v){E=function(k){function y(){var w=k.apply(this,arguments)||this;w.datasetFormat="MEMORY";return w}U._inheritsLoose(y,k);var F=y.prototype;F.open=function(){var w=U._asyncToGenerator(function*(C){var z;yield this.init();const {pixelBlock:l,statistics:a,histograms:d,name:e,keyProperties:g,nativeExtent:p,transform:n}=this.data,{width:f,height:b,pixelType:c}=l,m=this.data.extent||new h({xmin:-.5,ymin:.5,xmax:f-.5,ymax:b-.5,spatialReference:new v({wkid:3857})}),
x=null!=(z=this.data.isPseudoSpatialReference)?z:!this.data.extent;z=new q({width:f,height:b,pixelType:c,extent:m,nativeExtent:p,transform:n,pixelSize:{x:m.width/f,y:m.height/b},spatialReference:m.spatialReference,bandCount:3,keyProperties:g||{},statistics:a,isPseudoSpatialReference:x,histograms:d});this.createRemoteDatasetStorageInfo(z,512,512);this._set("rasterInfo",z);this.updateTileInfo();yield this._buildInMemoryRaster(l,{width:512,height:512},C);this.datasetName=e;this.url="/InMemory/"+e});
return function(C){return w.apply(this,arguments)}}();F.fetchRawTile=function(w,C,z,l){w=this._pixelBlockTiles.get(`${w}/${C}/${z}`);return Promise.resolve(w)};F._buildInMemoryRaster=function(){var w=U._asyncToGenerator(function*(C,z,l){var a=this.rasterInfo.storageInfo.maximumPyramidLevel;const d=this.rasterJobHandler?this.rasterJobHandler.split({pixelBlock:C,tileSize:z,maximumPyramidLevel:a},l):Promise.resolve(H.split(C,z,a));z=A.isSome(this.rasterInfo.statistics);a=A.isSome(this.rasterInfo.histograms);
C=z&&a?Promise.resolve({statistics:null,histograms:null}):this.rasterJobHandler?this.rasterJobHandler.estimateStatisticsHistograms({pixelBlock:C},l):Promise.resolve(H.estimateStatisticsHistograms(C));C=yield N.eachAlways([d,C]);if(!C[0].value&&C[1].value)throw new J("inmemory-raster:open","failed to build in memory raster");this._pixelBlockTiles=C[0].value;if(!z){var e;this.rasterInfo.statistics=null==(e=C[1].value)?void 0:e.statistics}if(a){var g;this.rasterInfo.histograms=null==(g=C[1].value)?void 0:
g.histograms}});return function(C,z,l){return w.apply(this,arguments)}}();return y}(B);t.__decorate([T.property({type:String,json:{write:!0}})],E.prototype,"datasetFormat",void 0);t.__decorate([T.property()],E.prototype,"data",void 0);return E=t.__decorate([D.subclass("esri.layers.support.rasterDatasets.InMemoryRaster")],E)})},"esri/layers/support/rasterDatasets/pamParser":function(){define(["exports","../../../geometry","./xmlUtilities","../rasterTransforms/PolynomialTransform","../../../geometry/SpatialReference"],
function(U,t,E,J,A){function N(D,q){if(!D||!q)return null;const B=[];for(let H=0;H<D.length;H++)B.push(D[H]),B.push(q[H]);return B}function T(D){var q,B=E.getElement(D,"GeodataXform");D=E.getElementNumericValue(B,"SpatialReference/WKID")||E.getElementValue(B,"SpatialReference/WKT");D=P(D);if("typens:PolynomialXform"!==B.getAttribute("xsi:type"))return{spatialReference:D,transform:null};var H=null!=(q=E.getElementNumericValue(B,"PolynomialOrder"))?q:1,h=E.getElementNumericValues(B,"CoeffX/Double");
const v=E.getElementNumericValues(B,"CoeffY/Double");q=E.getElementNumericValues(B,"InverseCoeffX/Double");B=E.getElementNumericValues(B,"InverseCoeffY/Double");h=N(h,v);B=N(q,B);H=new J({spatialReference:D,polynomialOrder:H,forwardCoefficients:h,inverseCoefficients:B});return{spatialReference:D,transform:H}}function S(D){var q;const B=E.getElementNumericValue(D,"NoDataValue");var H=E.getElement(D,"Histograms/HistItem");const h=E.getElementNumericValue(H,"HistMin"),v=E.getElementNumericValue(H,"HistMax"),
k=E.getElementNumericValue(H,"BucketCount");H=null==(q=E.getElementValue(H,"HistCounts"))?void 0:q.split("|").map(z=>Number(z));let y,F,w,C;E.getElements(D,"Metadata/MDI").forEach(z=>{var l;const a=Number(null!=(l=z.textContent)?l:z.nodeValue);switch(z.getAttribute("key").toUpperCase()){case "STATISTICS_MINIMUM":y=a;break;case "STATISTICS_MAXIMUM":F=a;break;case "STATISTICS_MEAN":w=a;break;case "STATISTICS_STDDEV":C=a}});D=E.getElementNumericValue(D,"Metadata/SourceBandIndex");return{noDataValue:B,
histogram:null!=H&&H.length&&null!=y&&null!=F?{min:h,max:v,size:k||H.length,counts:H}:null,sourceBandIndex:D,statistics:null!=y&&null!=F?{min:y,max:F,avg:w,stddev:C}:null}}function P(D){if(!D)return null;var q=Number(D);if(!isNaN(q)&&0!==q)return new A({wkid:q});D=String(D);if(D.startsWith("COMPD_CS")){if(!D.includes("VERTCS")||!D.includes("GEOGCS")&&!D.startsWith("PROJCS"))return null;var B=D.indexOf("VERTCS");q=D.indexOf("PROJCS");q=-1<q?q:D.indexOf("GEOGCS");if(-1===q)return null;B=D.slice(q,D.lastIndexOf("]",
B)+1).trim();D=D.slice(q,D.lastIndexOf("]")).trim();B=(q=I(B))?new A({wkid:q}):new A({wkt:B});if(D=I(D))B.vcsWkid=D;return B}if(!D.startsWith("GEOGCS")&&!D.startsWith("PROJCS"))return null;q=I(D);return 0!==q?new A({wkid:q}):new A({wkt:D})}function I(D){var q=D.replace(/\]/g,"[").replace(/"/g,"").split("[").map(B=>B.trim()).filter(B=>""!==B);q=q[q.length-1].split(",");return"EPSG"===q[0]&&D.endsWith('"]]')&&(D=Number(q[1]),!isNaN(D)&&0!==D)?D:0}U.parsePAMInfo=function(D){var q;if("pamdataset"!==(null==
D?void 0:null==(q=D.documentElement.tagName)?void 0:q.toLowerCase()))return{};const B={spatialReference:null,transform:null,metadata:{},rasterBands:[],statistics:null,histograms:null};D.documentElement.childNodes.forEach(H=>{if(1===H.nodeType)if(E.isSameTagIgnoreNS(H,"SRS"))B.spatialReference||(H=E.getElementValue(H),B.spatialReference=P(H));else if(E.isSameTagIgnoreNS(H,"Metadata"))if("xml:ESRI"===H.getAttribute("domain")){const {spatialReference:h,transform:v}=T(H);B.transform=v;B.spatialReference||
(B.spatialReference=h)}else E.getElements(H,"MDI").forEach(h=>B.metadata[h.getAttribute("key")]=E.getElementValue(h));else E.isSameTagIgnoreNS(H,"PAMRasterBand")&&(H=S(H),null!=H.sourceBandIndex&&null==B.rasterBands[H.sourceBandIndex]?B.rasterBands[H.sourceBandIndex]=H:B.rasterBands.push(H))});if(D=B.rasterBands)B.statistics=D[0].statistics?D.map(H=>H.statistics):null,B.histograms=D[0].histogram?D.map(H=>H.histogram):null;return B};U.parseSpatialReference=P;Object.defineProperty(U,"__esModule",{value:!0})})},
"esri/layers/support/rasterDatasets/xmlUtilities":function(){define(["exports"],function(U){function t(N,T){if(!N||!T)return[];var S=T;-1<T.indexOf("/")?(S=T.slice(0,T.indexOf("/")),T=T.slice(T.indexOf("/")+1)):T="";const P=[];if(T){N=t(N,S);for(S=0;S<N.length;S++)t(N[S],T).forEach(I=>P.push(I));return P}T=N.getElementsByTagNameNS("*",S);if(!T||0===T.length)return[];for(N=0;N<T.length;N++)P.push(T[N]||T.item[N]);return P}function E(N,T){if(!N||!T)return null;let S=T;-1<T.indexOf("/")?(S=T.slice(0,
T.indexOf("/")),T=T.slice(T.indexOf("/")+1)):T="";N=t(N,S);return 0<N.length?T?E(N[0],T):N[0]:null}function J(N,T=null){if(N=T?E(N,T):N)if(N=N.textContent||N.nodeValue)return N.trim();return null}function A(N,T){N=t(N,T);T=[];let S;for(let P=0;P<N.length;P++)if(S=N[P].textContent||N[P].nodeValue)S=S.trim(),""!==S&&T.push(S);return T}U.getElement=E;U.getElementNumericValue=function(N,T){N=J(N,T);return Number(N)};U.getElementNumericValues=function(N,T){return A(N,T).map(S=>Number(S))};U.getElementValue=
J;U.getElementValues=A;U.getElements=t;U.getNodeNameIgnoreNS=function(N){return N.nodeName.slice(N.nodeName.lastIndexOf(":")+1)};U.getSpaceDelimitedNumericValues=function(N,T=null){N=J(N,T);return null==N?void 0:N.split(" ").map(S=>Number(S))};U.isSameTagIgnoreNS=function(N,T){var S;N=null==N?void 0:null==(S=N.nodeName)?void 0:S.toLowerCase();T=T.toLowerCase();return N.slice(N.lastIndexOf(":")+1)===T};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/rasterDatasets/ImageServerRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/urlUtils ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ../RasterInfo ../RasterStorageInfo ../serviceTileInfoProperty ../TileInfo ../TilemapCache ./BaseRaster ../rasterFunctions/pixelUtils ../rasterTransforms/GCSShiftTransform ../../../rest/support/FeatureSet ../../../geometry/SpatialReference ../../../geometry/Extent ../../../geometry/Point".split(" "),
function(U,t,E,J,A,N,T,S,P,I,D,q,B,H,h,v,k,y,F,w,C,z,l){E=function(a){function d(){var g=a.apply(this,arguments)||this;g._levelOffset=0;g._slices=null;g._tilemapCache=null;g.datasetFormat="RasterTileServer";return g}U._inheritsLoose(d,a);var e=d.prototype;e.open=function(){var g=U._asyncToGenerator(function*(p){yield this.init();p=p&&p.signal;var n=this.sourceJSON?{data:this.sourceJSON}:yield this.request(this.url,{query:{f:"json"},signal:p});n.ssl&&(this.url=this.url.replace(/^http:/i,"https:"));
const f=n.data;this.sourceJSON=f;if(!f)throw new J("imageserverraster:open","cannot initialize tiled image service, missing service info");if(!f.tileInfo)throw new J("imageserverraster:open","use ImageryLayer to open non-tiled image services");this._fixScaleInServiceInfo();n="jpg jpeg png png8 png24 png32 mixed".split(" ");this.tileType=f.cacheType;null==this.tileType&&(-1<n.indexOf(f.tileInfo.format.toLowerCase())?this.tileType="Map":"lerc"===f.tileInfo.format.toLowerCase()?this.tileType="Elevation":
this.tileType="Raster");this.datasetName=f.name.slice(f.name.indexOf("/")+1);p=yield this._fetchRasterInfo({signal:p});if(A.isSome(p)){n="Map"===this.tileType?H.readServiceTileInfo(f.tileInfo,f):h.fromJSON(f.tileInfo);const {extent:c,pixelSize:m}=p,x=.5/p.width*m.x;let L,r;var b=n.lodAt(Math.max.apply(null,n.lods.map(K=>K.level)));"Map"!==this.tileType&&0!==f.maxScale&&("Raster"===this.tileType?(L=n.lods.filter(K=>K.resolution===m.x)[0])||(L=n.lods[n.lods.length-1]):(L=n.lods.filter(K=>Math.abs(K.scale-
f.maxScale)<x)[0])||(L=n.lods.filter(K=>K.scale>f.maxScale).sort((K,M)=>K.scale>M.scale?1:-1)[0]),m.x=m.y=L.resolution,p.width=Math.ceil((c.xmax-c.xmin)/m.x-.1),p.height=Math.ceil((c.ymax-c.ymin)/m.y-.1));L||(L=b);b=n.lodAt(Math.min.apply(null,n.lods.map(K=>K.level)));"Map"===this.tileType?this._levelOffset=n.lods[0].level:0!==f.minScale&&"Elevation"===this.tileType&&(r=n.lods.filter(K=>Math.abs(K.scale-f.minScale)<x)[0],this._levelOffset=r.level-b.level);r||(r=b);const u=Math.max(m.x,m.y);if(Math.abs(m.x-
m.y)>x||!n.lods.some(K=>Math.abs(K.resolution-u)<x))m.x=m.y=L.resolution,p.width=Math.ceil((c.xmax-c.xmin)/m.x-.1),p.height=Math.ceil((c.ymax-c.ymin)/m.y-.1);b=L.level-r.level;const [G,Q]=n.size,O=[];n.lods.forEach(K=>{K.level>=r.level&&K.level<=L.level&&O.push({x:K.resolution,y:K.resolution})});O.sort((K,M)=>K.x-M.x);const W=this.computeBlockBoundary(c,G,Q,n.origin,O,b),X=1<O.length?O.slice(1):null;p.storageInfo=new B({blockWidth:n.size[0],blockHeight:n.size[1],pyramidBlockWidth:n.size[0],pyramidBlockHeight:n.size[1],
pyramidResolutions:X,compression:n.format,origin:n.origin,firstPyramidLevel:1,maximumPyramidLevel:b,tileInfo:n,blockBoundary:W});this._fixGCSShift(p);this._set("rasterInfo",p)}else throw new J("image-server-raster:open","cannot initialize image service");-1<f.capabilities.toLowerCase().indexOf("tilemap")&&(p={tileInfo:p.storageInfo.tileInfo,parsedUrl:N.urlToObject(this.url),url:this.url,tileServers:[],type:"tile"},this._tilemapCache=new v.TilemapCache({layer:p}))});return function(p){return g.apply(this,
arguments)}}();e.fetchRawTile=function(){var g=U._asyncToGenerator(function*(p,n,f,b={}){const {storageInfo:c,extent:m}=this.rasterInfo;({data:b}=yield this.request(`${this.url}/tile/${c.maximumPyramidLevel-p+this._levelOffset}/${n}/${f}`,{query:this._slices?{sliceId:b.sliceId||0}:null,responseType:"array-buffer",signal:b.signal}));if(!b)return null;b=yield this.decodePixelBlock(b,{width:c.tileInfo.size[0],height:c.tileInfo.size[1],planes:null,pixelType:null,isPoint:"Elevation"===this.tileType});
const x=c.blockBoundary[p];if("jpg"!==c.compression||f>x.minCol&&f<x.maxCol&&n>x.minRow&&n<x.maxRow)return b;const {origin:L,blockWidth:r,blockHeight:u}=c,{x:G,y:Q}=this.getPyramidPixelSize(p);var O=Math.round((m.xmin-L.x)/G)%r;p=Math.round((m.xmax-L.x)/G)%r;var W=Math.round((L.y-m.ymax)/Q)%u;const X=Math.round((L.y-m.ymin)/Q)%u;O=f===x.minCol?O:0;W=n===x.minRow?W:0;y.setValidBoundary(b,{x:O,y:W},{width:(f===x.maxCol?p:r)-O,height:(n===x.maxRow?X:u)-W});return b});return function(p,n,f){return g.apply(this,
arguments)}}();e.getSliceIndex=function(g){if(null==g||!g.length||!this._slices)return null;for(let p=0;p<this._slices.length;p++){const n=this._slices[p].multidimensionalDefinition;if(n.length===g.length&&!n.some(f=>{var b=g.filter(m=>f.variableName===m.variableName&&m.dimensionName===f.dimensionName)[0];if(!b)return!0;const c=Array.isArray(f.values[0])?f.values[0][0]:f.values[0];b=Array.isArray(b.values[0])?b.values[0][0]:b.values[0];return c!==b}))return p}return null};e.fetchVariableStatisticsHistograms=
function(){var g=U._asyncToGenerator(function*(p,n){var f=this.request(this.url+"/statistics",{query:{variable:p,f:"json"},signal:n}).then(b=>{var c;return null==(c=b.data)?void 0:c.statistics});p=this.request(this.url+"/histograms",{query:{variable:p,f:"json"},signal:n}).then(b=>{var c;return null==(c=b.data)?void 0:c.histograms});f=yield Promise.all([f,p]);f[0]&&f[0].forEach(b=>{b.avg=b.mean;b.stddev=b.standardDeviation});return{statistics:f[0]||null,histograms:f[1]||null}});return function(p,n){return g.apply(this,
arguments)}}();e.computeBestPyramidLevelForLocation=function(){var g=U._asyncToGenerator(function*(p,n={}){if(!this._tilemapCache)return 0;p=this.identifyPixelLocation(p,0,A.unwrap(n.datumTransformation));if(null===p)return null;let f=0;var {maximumPyramidLevel:b}=this.rasterInfo.storageInfo;b=b-f+this._levelOffset;const c=p.srcLocation;for(;0<=b;){try{if("available"===(yield this._tilemapCache.fetchAvailability(b,p.row,p.col,n)))break}catch{}b--;f++;p=this.identifyPixelLocation(c,f,A.unwrap(n.datumTransformation));
if(null===p)return null}return-1===b||null==p?null:f});return function(p){return g.apply(this,arguments)}}();e._fetchRasterInfo=function(){var g=U._asyncToGenerator(function*(p){const n=this.sourceJSON,f=Math.ceil((n.extent.xmax-n.extent.xmin)/n.pixelSizeX-.1),b=Math.ceil((n.extent.ymax-n.extent.ymin)/n.pixelSizeY-.1),c=C.fromJSON(n.spatialReference||n.extent.spatialReference);if("Map"===this.tileType)return new q({width:f,height:b,bandCount:3,extent:z.fromJSON(n.extent),spatialReference:c,pixelSize:new l({x:n.pixelSizeX,
y:n.pixelSizeY,spatialReference:c}),pixelType:"u8",statistics:null,keyProperties:{DataType:"processed"}});const {slice:m,signal:x}=p;p=n.hasRasterAttributeTable?this.request(this.url+"/rasterAttributeTable",{query:{slice:m,f:"json"},signal:x}).then(O=>w.fromJSON(O.data)).catch(()=>null):!1;const L=n.hasColormap?this.request(this.url+"/colormap",{query:{slice:m,f:"json"},signal:x}).then(O=>{var W;return null==(W=O.data)?void 0:W.colormap}):!1,r=n.hasHistograms?this.request(this.url+"/histograms",{query:{slice:m,
f:"json"},signal:x}).then(O=>{var W;return null==(W=O.data)?void 0:W.histograms}):!1,u=this.request(this.url+"/keyProperties",{query:{f:"json"},signal:x}).then(O=>O.data).catch(()=>{}),G=n.hasMultidimensions?this._fetchMultidimensionalInfo():!1,Q=n.hasMultidimensions?this.request(this.url+"/slices",{query:{f:"json"},signal:x}).then(O=>O.data&&O.data.slices).catch(()=>{}):!1;return Promise.all([p,L,r,u,G,Q]).then(O=>{let W=null;if(n.minValues&&n.minValues.length===n.bandCount){W=[];for(let X=0;X<n.minValues.length;X++)W.push({min:n.minValues[X],
max:n.maxValues[X],avg:n.meanValues[X],stddev:n.stdvValues[X]})}this._slices=O[5]||null;return new q({width:f,height:b,bandCount:n.bandCount,extent:z.fromJSON(n.extent),spatialReference:c,pixelSize:new l({x:n.pixelSizeX,y:n.pixelSizeY,spatialReference:c}),pixelType:n.pixelType.toLowerCase(),statistics:W,attributeTable:O[0]||null,colormap:O[1]||null,histograms:O[2]||null,keyProperties:O[3]||{},multidimensionalInfo:O[4]||null})})});return function(p){return g.apply(this,arguments)}}();e._fetchMultidimensionalInfo=
function(){var g=U._asyncToGenerator(function*(p){var n;p=yield this.request(this.url+"/multidimensionalInfo",{query:{f:"json"},signal:p}).then(f=>{var b;return null==(b=f.data)?void 0:b.multidimensionalInfo});null!=(n=p.variables)&&n.length&&p.variables.forEach(f=>{var b;null!=(b=f.statistics)&&b.length&&f.statistics.forEach(c=>{c.avg=c.mean;c.stddev=c.standardDeviation})});return p});return function(p){return g.apply(this,arguments)}}();e._fixScaleInServiceInfo=function(){const {sourceJSON:g}=this;
g.minScale&&0>g.minScale&&(g.minScale=0);g.maxScale&&0>g.maxScale&&(g.maxScale=0)};e._fixGCSShift=function(g){const {extent:p,spatialReference:n}=g;0===p.xmin&&360===p.xmax&&n.wkid&&n.isGeographic&&(g.nativeExtent=g.extent,g.transform=new F,g.extent=g.transform.forwardTransform(p))};return d}(k);t.__decorate([T.property({type:String,json:{write:!0}})],E.prototype,"datasetFormat",void 0);t.__decorate([T.property()],E.prototype,"tileType",void 0);return E=t.__decorate([D.subclass("esri.layers.support.rasterDatasets.ImageServerRaster")],
E)})},"esri/layers/support/serviceTileInfoProperty":function(){define(["exports","./TileInfo"],function(U,t){function E(A,N,T,S){if(!A)return null;const {minScale:P,maxScale:I,minLOD:D,maxLOD:q}=N;if(null!=D&&null!=q)return S&&S.ignoreMinMaxLOD?t.fromJSON(A):t.fromJSON({...A,lods:A.lods.filter(({level:B})=>null!=B&&B>=D&&B<=q)});if(0!==P&&0!==I){const B=P?Math.round(1E4*P)/1E4:Infinity,H=I?Math.round(1E4*I)/1E4:-Infinity;return t.fromJSON({...A,lods:A.lods.filter(h=>{h=Math.round(1E4*h.scale)/1E4;
return h<=B&&h>=H})})}return t.fromJSON(A)}const J={type:t,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:E}}}}};U.readServiceTileInfo=E;U.serviceTileInfoProperty=J;Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/TilemapCache":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../request ../../core/Accessor ../../core/Error ../../core/Handles ../../core/Logger ../../core/LRUCache ../../core/PooledArray ../../core/promiseUtils ../../core/scheduling ../../core/urlUtils ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ./Tilemap".split(" "),
function(U,t,E,J,A,N,T,S,P,I,D,q,B,H,h,v,k,y,F){var w;const C=S.getLogger("esri.layers.support.TilemapCache");U.TilemapCache=w=function(z){function l(d){d=z.call(this,d)||this;d._handles=new T;d._pendingTilemapRequests={};d._availableLevels={};d.levels=5;d.cacheByteSize=2097152;d.request=J;d._prefetchingEnabled=!0;return d}t._inheritsLoose(l,z);var a=l.prototype;a.initialize=function(){this._tilemapCache=new P(this.cacheByteSize);this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers?"],
()=>this._initializeTilemapDefinition()),H.init(this,"layer.tileInfo.lods",d=>this._initializeAvailableLevels(d),!0)]);this._initializeTilemapDefinition()};a.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null)};a.castLevels=function(d){return 2>=d?(C.error("Minimum levels for Tilemap is 3, but got ",d),3):d};a.fetchTilemap=function(d,e,g,p){if(!this._availableLevels[d])return Promise.reject(new N("tilemap-cache:level-unavailable",`Level ${d} is unavailable in the service`));
const n=this._tmpTilemapDefinition;if(d=this._tilemapFromCache(d,e,g,n))return Promise.resolve(d);const f=p&&p.signal;p={...p,signal:null};return new Promise((b,c)=>{D.onAbort(f,()=>c(D.createAbortError()));const m=F.tilemapDefinitionId(n);let x=this._pendingTilemapRequests[m];if(!x){x=F.Tilemap.fromDefinition(n,p).then(r=>{this._tilemapCache.put(m,r,r.byteSize);return r});const L=()=>delete this._pendingTilemapRequests[m];this._pendingTilemapRequests[m]=x;x.then(L,L)}x.then(b,c)})};a.getAvailability=
function(d,e,g){return this._availableLevels[d]?(d=this._tilemapFromCache(d,e,g,this._tmpTilemapDefinition))?d.getAvailability(e,g):"unknown":"unavailable"};a.getAvailabilityUpsample=function(d,e,g,p){p.level=d;p.row=e;p.col=g;d=this.layer.tileInfo;for(d.updateTileInfo(p);;)if(e=this.getAvailability(p.level,p.row,p.col),"unavailable"===e){if(!d.upsampleTile(p))return"unavailable"}else return e};a.fetchAvailability=function(d,e,g,p){return this._availableLevels[d]?this.fetchTilemap(d,e,g,p).catch(n=>
n).then(n=>{if(n instanceof F.Tilemap)return n=n.getAvailability(e,g),"unavailable"===n?Promise.reject(new N("tile-map:tile-unavailable","Tile is not available",{level:d,row:e,col:g})):n;if(D.isAbortError(n))throw n;return"unknown"}):Promise.reject(new N("tilemap-cache:level-unavailable",`Level ${d} is unavailable in the service`))};a.fetchAvailabilityUpsample=function(d,e,g,p,n){p.level=d;p.row=e;p.col=g;const f=this.layer.tileInfo;f.updateTileInfo(p);const b=this.fetchAvailability(d,e,g,n).catch(c=>
{if(D.isAbortError(c))throw c;if(f.upsampleTile(p))return this.fetchAvailabilityUpsample(p.level,p.row,p.col,p);throw c;});this._fetchAvailabilityUpsamplePrefetch(p.id,d,e,g,n,b);return b};a._fetchAvailabilityUpsamplePrefetch=function(){var d=t._asyncToGenerator(function*(e,g,p,n,f,b){if(this._prefetchingEnabled){var c=`prefetch-${e}`;if(!this._handles.has(c)){var m=D.createAbortController();b.then(()=>m.abort(),()=>m.abort());var x=!1;this._handles.add({remove(){x||(x=!0,m.abort())}},c);yield q.waitTicks(10,
m.signal).catch(()=>{});x||(x=!0,this._handles.remove(c));if(!D.isAborted(m))for(e={id:e,level:g,row:p,col:n},f={...f,signal:m.signal},g=this.layer.tileInfo,p=0;w._prefetches.length<w._maxPrefetch&&g.upsampleTile(e);++p){const L=this.fetchAvailability(e.level,e.row,e.col,f);w._prefetches.push(L);n=()=>{w._prefetches.removeUnordered(L)};L.then(n,n)}}}});return function(e,g,p,n,f,b){return d.apply(this,arguments)}}();a._initializeTilemapDefinition=function(){if(this.layer.parsedUrl){var d=this.layer.parsedUrl,
e=d.query;this._tilemapCache.clear();this._tmpTilemapDefinition={service:{url:d.path,query:e?B.objectToQuery(e):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}};a._tilemapFromCache=function(d,e,g,p){p.level=d;p.row=e-e%this.size;p.col=g-g%this.size;d=F.tilemapDefinitionId(p);return this._tilemapCache.get(d)};a._initializeAvailableLevels=function(d){this._availableLevels={};d&&d.forEach(e=>this._availableLevels[e.level]=
!0)};t._createClass(l,[{key:"size",get:function(){return 1<<this.levels}},{key:"test",get:function(){const d=this;return{get prefetchingEnabled(){return d._prefetchingEnabled},set prefetchingEnabled(e){d._prefetchingEnabled=e},hasTilemap(e,g,p){return!!d._tilemapFromCache(e,g,p,d._tmpTilemapDefinition)}}}}]);return l}(A);U.TilemapCache._maxPrefetch=4;U.TilemapCache._prefetches=new I({initialSize:w._maxPrefetch});E.__decorate([h.property({constructOnly:!0,type:Number})],U.TilemapCache.prototype,"levels",
void 0);E.__decorate([k.cast("levels")],U.TilemapCache.prototype,"castLevels",null);E.__decorate([h.property({readOnly:!0,type:Number})],U.TilemapCache.prototype,"size",null);E.__decorate([h.property({constructOnly:!0,type:Number})],U.TilemapCache.prototype,"cacheByteSize",void 0);E.__decorate([h.property({constructOnly:!0})],U.TilemapCache.prototype,"layer",void 0);E.__decorate([h.property({constructOnly:!0})],U.TilemapCache.prototype,"request",void 0);U.TilemapCache=w=E.__decorate([y.subclass("esri.layers.support.TilemapCache")],
U.TilemapCache);Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/Tilemap":function(){define(["exports","../../request","../../core/arrayUtils","../../core/Error","../../core/lang"],function(U,t,E,J,A){function N(S){if("vector-tile"===S.service.type)var P=`${S.service.url}/tilemap/${S.level}/${S.row}/${S.col}/${S.width}/${S.height}`;else P=S.service.tileServers,P=`${P&&P.length?P[S.row%P.length]:S.service.url}/tilemap/${S.level}/${S.row}/${S.col}/${S.width}/${S.height}`;(S=
S.service.query)&&(P=`${P}?${S}`);return P}let T=function(){function S(){this.location={left:0,top:0,width:0,height:0};this._allAvailability="unknown";this.byteSize=40}var P=S.prototype;P.getAvailability=function(I,D){if("unknown"!==this._allAvailability)return this._allAvailability;I=(I-this.location.top)*this.location.width+(D-this.location.left);D=I>>3;const q=this._tileAvailabilityBitSet;return 0>D||D>q.length?"unknown":q[D]&1<<I%8?"available":"unavailable"};P._updateFromData=function(I){let D=
!0,q=!0;const B=new Uint8Array(Math.ceil(this.location.width*this.location.height/8));let H=0;for(let h=0;h<I.length;h++){const v=h%8;I[h]?(q=!1,B[H]|=1<<v):D=!1;7===v&&++H}q?this._allAvailability="unavailable":D?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=B,this.byteSize+=B.length)};S.fromDefinition=function(I,D){const q=I.service.request||t,{row:B,col:H,width:h,height:v}=I,k={query:{f:"json"}};D=D?{...k,...D}:k;return q(N(I),D).then(y=>y.data).catch(y=>
{if(y&&y.details&&422===y.details.httpStatus)return{location:{top:B,left:H,width:h,height:v},valid:!0,data:E.constant(h*v,0)};throw y;}).then(y=>{if(y.location&&(y.location.top!==B||y.location.left!==H||y.location.width!==h||y.location.height!==v))throw new J("tilemap:location-mismatch","Tilemap response for different location than requested",{response:y,definition:{top:B,left:H,width:h,height:v}});return S.fromJSON(y)})};S.fromJSON=function(I){S.validateJSON(I);const D=new S;D.location=Object.freeze(A.clone(I.location));
D._updateFromData(I.data);return Object.freeze(D)};S.validateJSON=function(I){if(!I||!I.location)throw new J("tilemap:missing-location","Location missing from tilemap response");if(!1===I.valid)throw new J("tilemap:invalid","Tilemap response was marked as invalid");if(!I.data)throw new J("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(I.data))throw new J("tilemap:data-mismatch","Data must be an array of numbers");if(I.data.length!==I.location.width*I.location.height)throw new J("tilemap:data-mismatch",
"Number of data items does not match width/height of tilemap");};return S}();U.Tilemap=T;U["default"]=T;U.tilemapDefinitionId=function(S){return`${S.level}/${S.row}/${S.col}/${S.width}/${S.height}`};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/rasterTransforms/GCSShiftTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ./BaseRasterTransform".split(" "),
function(U,t,E,J,A,N,T,S,P){J=function(I){function D(){var B=I.apply(this,arguments)||this;B.type="gcs-shift";B.tolerance=1E-8;return B}U._inheritsLoose(D,I);var q=D.prototype;q.forwardTransform=function(B){B=B.clone();if("point"===B.type)return B.x>180+this.tolerance&&(B.x-=360),B;B.xmin>=180-this.tolerance?(B.xmax-=360,B.xmin-=360):B.xmax>180+this.tolerance&&(B.xmin=-180,B.xmax=180);return B};q.inverseTransform=function(B){B=B.clone();if("point"===B.type)return B.x<-this.tolerance&&(B.x+=360),B;
B.xmin<-this.tolerance&&(B.xmin+=360,B.xmax+=360);return B};return D}(P);t.__decorate([T.enumeration({GCSShiftXform:"gcs-shift"})],J.prototype,"type",void 0);t.__decorate([E.property()],J.prototype,"tolerance",void 0);return J=t.__decorate([S.subclass("esri.layers.support.rasterTransforms.GCSShiftTransform")],J)})},"esri/layers/support/rasterDatasets/MRFRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ../PixelBlock ../RasterInfo ../RasterStorageInfo ./BaseRaster ./pamParser ./xmlUtilities ../rasterFormats/utils ../rasterFunctions/pixelUtils ../../../geometry/SpatialReference ../../../geometry/Extent ../../../geometry/Point".split(" "),
function(U,t,E,J,A,N,T,S,P,I,D,q,B,H,h,v,k,y,F,w,C){const z=new Map;z.set("Int8","s8");z.set("UInt8","u8");z.set("Int16","s16");z.set("UInt16","u16");z.set("Int32","s32");z.set("UInt32","u32");z.set("Float32","f32");z.set("Float64","f32");z.set("Double64","f32");const l=new Map;l.set("lerc",".lrc");l.set("none",".til");l.set("deflate",".pzp");l.set("jpeg",".jzp");E=function(a){function d(){var g=a.apply(this,arguments)||this;g._files=null;g._storageIndex=null;g.datasetFormat="MRF";return g}U._inheritsLoose(d,
a);var e=d.prototype;e.open=function(){var g=U._asyncToGenerator(function*(p){var n;yield this.init();this.datasetName=this.url.slice(this.url.lastIndexOf("/")+1);var f=p?A.unwrap(p.signal):null,b=yield this.request(this.url,{responseType:"xml",signal:f});const {rasterInfo:c,files:m}=this._parseHeader(b.data);if(-1===(null==(n=this.ioConfig.skipExtensions)?void 0:n.indexOf("aux.xml"))&&(p=yield this._fetchAuxiliaryData(p),null!=p)){var x;c.statistics=null!=(x=p.statistics)?x:c.statistics;(c.histograms=
p.histograms)&&!A.isSome(c.statistics)&&(c.statistics=y.estimateStatisticsFromHistograms(p.histograms))}this._set("rasterInfo",c);this._files=m;f=yield this.request(m.index,{responseType:"array-buffer",signal:f});this._storageIndex=this._parseIndex(f.data);f=0;x=-1;const {blockWidth:L,blockHeight:r,compression:u}=this.rasterInfo.storageInfo;b=this.rasterInfo.storageInfo.pyramidScalingFactor;const {width:G,height:Q,bandCount:O}=this.rasterInfo,W=[],X="none"===u?1:O;for(;f<this._storageIndex.length;)x++,
p=Math.ceil(G/L/b**x),n=Math.ceil(Q/r/b**x),f+=p*n*X*4,W.push({maxRow:n,maxCol:p,minCol:0,minRow:0});this.rasterInfo.storageInfo.blockBoundary=W;0<x&&(this.rasterInfo.storageInfo.firstPyramidLevel=1,this.rasterInfo.storageInfo.maximumPyramidLevel=x);this.updateTileInfo()});return function(p){return g.apply(this,arguments)}}();e.fetchRawTile=function(){var g=U._asyncToGenerator(function*(p,n,f,b={}){const {blockWidth:c,blockHeight:m,blockBoundary:x,compression:L}=this.rasterInfo.storageInfo;var r=
x[p];if(!r||r.maxRow<n||r.maxCol<f||r.minRow>n||r.minCol>f)return null;const {bandCount:u,pixelType:G}=this.rasterInfo,{ranges:Q,actualTileWidth:O,actualTileHeight:W}=this._getTileLocation(p,n,f);if(!Q||0===Q.length)return null;if(0===Q[0].from&&0===Q[0].to)return p=new Uint8Array(c*m),new D({width:c,height:m,pixels:null,mask:p,validPixelCount:0});({bandIds:f}=this.ioConfig);n="none"===L?1:u;r=[];for(p=p=0;p<n;p++)(!f||-1<f.indexOf[p])&&r.push(this.request(this._files.data,{range:{from:Q[p].from,
to:Q[p].to},responseType:"array-buffer",signal:b.signal}));b=yield Promise.all(r);p=b.map(X=>X.data.byteLength).reduce((X,K)=>X+K);f=new Uint8Array(p);for(p=r=0;p<n;p++)f.set(new Uint8Array(b[p].data),r),r+=b[p].data.byteLength;b=yield this.decodePixelBlock(f.buffer,{width:c,height:m,format:"lerc"===this.rasterInfo.storageInfo.compression?"lerc":"bip",pixelType:G});f=n=0;if(O!==c||W!==m)if(r=b.mask)for(p=0;p<m;p++)for(f=p*c,n=p<W?O:0;n<c;n++)r[f+n]=0;else for(r=new Uint8Array(c*m),b.mask=r,p=0;p<
W;p++)for(f=p*c,n=0;n<O;n++)r[f+n]=1;return b});return function(p,n,f){return g.apply(this,arguments)}}();e._parseIndex=function(g){if(0<g.byteLength%16)throw"invalid array buffer must be multiples of 16";let p,n,f,b,c;if(k.isPlatformLittleEndian){p=new Uint8Array(g);f=new ArrayBuffer(g.byteLength);n=new Uint8Array(f);for(b=0;b<g.byteLength/4;b++)for(c=0;4>c;c++)n[4*b+c]=p[4*b+3-c];g=new Uint32Array(f)}else g=new Uint32Array(g);return g};e._getTileLocation=function(g,p,n){const {blockWidth:f,blockHeight:b,
pyramidScalingFactor:c,compression:m}=this.rasterInfo.storageInfo,{width:x,height:L,bandCount:r}=this.rasterInfo,u="none"===m?1:r;let G,Q;var O,W=0;let X=0;for(O=0;O<g;O++)X=c**O,G=Math.ceil(x/f/X),Q=Math.ceil(L/b/X),W+=G*Q;X=c**g;G=Math.ceil(x/f/X);Q=Math.ceil(L/b/X);W=4*(W+(p*G+n))*u;g=this._storageIndex.subarray(W,W+4*u);W=O=0;const K=[];for(let M=0;M<u;M++)O=g[4*M]*2**32+g[4*M+1],W=O+g[4*M+2]*2**32+g[4*M+3],K.push({from:O,to:W});return{ranges:K,actualTileWidth:n<G-1?f:Math.ceil(x/X)-f*(G-1),actualTileHeight:p<
Q-1?b:Math.ceil(L/X)-b*(Q-1)}};e._parseHeader=function(g){var p=v.getElement(g,"MRF_META/Raster");if(!p)throw new J("mrf:open","not a valid MRF format");var n=v.getElement(p,"Size"),f=parseInt(n.getAttribute("x"),10),b=parseInt(n.getAttribute("y"),10);const c=parseInt(n.getAttribute("c"),10);n=(v.getElementValue(p,"Compression")||"none").toLowerCase();var m=["none","lerc"];if(!n||-1===m.indexOf(n))throw new J("mrf:open","currently does not support compression "+n);var x=v.getElementValue(p,"DataType")||
"UInt8";m=z.get(x);if(null==m)throw new J("mrf:open","currently does not support pixel type "+x);var L=v.getElement(p,"PageSize");x=parseInt(L.getAttribute("x"),10);L=parseInt(L.getAttribute("y"),10);p=v.getElement(p,"DataValues");let r;p&&(p=p.getAttribute("NoData"),null!=p&&(r=p.trim().split(" ").map(M=>parseFloat(M))));if(v.getElement(g,"MRF_META/CachedSource"))throw new J("mrf:open","currently does not support MRF referencing other data files");var u=v.getElement(g,"MRF_META/GeoTags"),G=v.getElement(u,
"BoundingBox");if(null==G)throw new J("mrf:open","missing node MRF_META/GeoTags/BoundingBox");p=parseFloat(G.getAttribute("minx"));const Q=parseFloat(G.getAttribute("miny")),O=parseFloat(G.getAttribute("maxx")),W=parseFloat(G.getAttribute("maxy"));var X=v.getElementValue(u,"Projection")||"";u=v.getElementValue(g,"datafile");G=v.getElementValue(g,"IndexFile");let K;"LOCAL_CS[]"!==X&&(X.toLowerCase().startsWith("epsg:")?(X=Number(X.slice(5)),isNaN(X)||0===X||(K=new F({wkid:X}))):K=h.parseSpatialReference(X));
X=new w(p,Q,O,W);X.spatialReference=K;g=v.getElement(g,"MRF_META/Rsets");g=parseInt(g&&g.getAttribute("scale")||"2",10);g=new B({origin:new C({x:X.xmin,y:X.ymax,spatialReference:K}),blockWidth:x,blockHeight:L,pyramidBlockWidth:x,pyramidBlockHeight:L,compression:n,pyramidScalingFactor:g});x=new C({x:(O-p)/f,y:(W-Q)/b,spatialReference:K});f=new q({width:f,height:b,extent:X,spatialReference:K,bandCount:c,pixelType:m,pixelSize:x,noDataValue:r,storageInfo:g});b={mrf:this.url,index:G||this.url.replace(".mrf",
".idx"),data:u||this.url.replace(".mrf",l.get(n))};return{rasterInfo:f,files:b}};e._fetchAuxiliaryData=function(){var g=U._asyncToGenerator(function*(p){try{const {data:n}=yield this.request(this.url+".aux.xml",{responseType:"xml",signal:null==p?void 0:p.signal});return h.parsePAMInfo(n)}catch{return null}});return function(p){return g.apply(this,arguments)}}();return d}(H);t.__decorate([N.property()],E.prototype,"_files",void 0);t.__decorate([N.property()],E.prototype,"_storageIndex",void 0);t.__decorate([N.property({type:String,
json:{write:!0}})],E.prototype,"datasetFormat",void 0);return E=t.__decorate([I.subclass("esri.layers.support.rasterIO.MRFRaster")],E)})},"esri/layers/support/rasterDatasets/TIFFRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ../RasterInfo ../RasterStorageInfo ./BaseRaster ./pamParser ../../../chunks/TiffDecoder ../rasterFormats/TiffTags ../rasterFunctions/pixelUtils ../rasterTransforms/PolynomialTransform ../../../geometry/SpatialReference ../../../geometry/Extent ../../../geometry/Point".split(" "),
function(U,t,E,J,A,N,T,S,P,I,D,q,B,H,h,v,k,y,F,w,C){const z=function(a,d){return(a=a.get(d))&&a.values},l=function(a,d){return(a=a.get(d))&&a.values[0]};E=function(a){function d(){var g=a.apply(this,arguments)||this;g._files=null;g._headerInfo=null;g._bufferSize=1048576;g.datasetFormat="TIFF";return g}U._inheritsLoose(d,a);var e=d.prototype;e.open=function(){var g=U._asyncToGenerator(function*(p){var n,f,b;yield this.init();var c=p?A.unwrap(p.signal):null,{data:m}=yield this.request(this.url,{range:{from:0,
to:this._bufferSize},responseType:"array-buffer",signal:c});if(!m)throw new J("tiffraster:open","failed to open url "+this.url);this.datasetName=this.url.slice(this.url.lastIndexOf("/")+1);const {littleEndian:x,firstIFD:L,isBigTiff:r}=h.parseSignature(m),u=[];yield this.readIFDs(u,m,x,L,0,r?8:4,c);c=h.getImageInfo(u);const {width:G,height:Q,tileWidth:O,tileHeight:W,planes:X,pixelType:K,compression:M,firstPyramidLevel:V,maximumPyramidLevel:R,pyramidBlockWidth:aa,pyramidBlockHeight:ca,tileBoundary:da,
affine:fa,metadata:ha}=c;m=(null==(n=c.extent.spatialReference)?void 0:n.wkt)||(null==(f=c.extent.spatialReference)?void 0:f.wkid);n=H.parseSpatialReference(m);m=!1;null==n&&(m=!0,n=new F({wkid:3857}));var ka=(f=new w({...c.extent,spatialReference:n}),new C({x:f.xmin,y:f.ymax,spatialReference:n}));ka=new q({blockWidth:O,blockHeight:W,pyramidBlockWidth:aa,pyramidBlockHeight:ca,compression:M,origin:ka,firstPyramidLevel:V,maximumPyramidLevel:R,blockBoundary:da});const qa=new C({x:(f.xmax-f.xmin)/G,y:(f.ymax-
f.ymin)/Q,spatialReference:n});m=new D({width:G,height:Q,bandCount:X,pixelType:K,compression:M,pixelSize:qa,storageInfo:ka,spatialReference:n,isPseudoSpatialReference:m,keyProperties:ha?{BandProperties:ha.bandProperties,DataType:ha.dataType}:{},extent:f,statistics:ha?ha.statistics:null});null!=fa&&fa.length&&(m.nativeExtent=new w({xmin:-.5,ymin:.5-Q,xmax:G-.5,ymax:.5,spatialReference:n}),m.transform=new y({polynomialOrder:1,forwardCoefficients:[fa[2]+fa[0]/2,fa[5]-fa[3]/2,fa[0],fa[3],-fa[1],-fa[4]]}),
m.extent=m.transform.forwardTransform(m.nativeExtent),m.pixelSize=new C({x:(f.xmax-f.xmin)/G,y:(f.ymax-f.ymin)/Q,spatialReference:n}),ka.origin.x=-.5,ka.origin.y=.5);if(null==(b=this.ioConfig.skipExtensions)||!b.includes("aux.xml"))if(p=yield this._fetchAuxiliaryData(p),null!=p){var pa;m.statistics=null!=(pa=p.statistics)?pa:m.statistics;(m.histograms=p.histograms)&&!A.isSome(m.statistics)&&(m.statistics=k.estimateStatisticsFromHistograms(p.histograms));p.transform&&!fa&&(m.transform=p.transform,
m.nativeExtent=m.extent,pa=m.transform.forwardTransform(m.nativeExtent),m.pixelSize=new C({x:(pa.xmax-pa.xmin)/G,y:(pa.ymax-pa.ymin)/Q,spatialReference:n}),m.extent=pa);m.spatialReference||(m.spatialReference=p.spatialReference)}this._set("rasterInfo",m);this._headerInfo={littleEndian:x,isBigTiff:r,ifds:u,...c};if(!this._headerInfo.isSupported)throw new J("tiffraster:open","this tiff is not supported: "+this._headerInfo.message);this.updateTileInfo()});return function(p){return g.apply(this,arguments)}}();
e.fetchRawTile=function(){var g=U._asyncToGenerator(function*(p,n,f,b={}){var c;if(null==(c=this._headerInfo)||!c.isSupported||this.isBlockOutside(p,n,f))return null;n=this.getTileLocation(p,n,f);if(!n)return null;const {ranges:m,actualTileWidth:x,actualTileHeight:L,ifd:r}=n;n=m.map(O=>this.request(this.url,{range:O,responseType:"array-buffer",signal:b.signal}));n=yield Promise.all(n);f=n.map(O=>O.data.byteLength).reduce((O,W)=>O+W);f=1===n.length?n[0].data:new ArrayBuffer(f);c=[0];var u=[0];if(1<
n.length){const O=new Uint8Array(f);for(let W=0,X=0;W<n.length;W++){const K=n[W].data;O.set(new Uint8Array(K),X);c[W]=X;X+=K.byteLength;u[W]=K.byteLength}}const {blockWidth:G,blockHeight:Q}=this.getBlockWidthHeight(p);p=yield this.decodePixelBlock(f,{format:"tiff",customOptions:{headerInfo:this._headerInfo,ifd:r,offsets:c,sizes:u},width:G,height:Q,planes:null,pixelType:null});if(x!==G||L!==Q)if(u=p.mask)for(n=0;n<Q;n++)for(c=n*G,f=n<L?x:0;f<G;f++)u[c+f]=0;else for(u=new Uint8Array(G*Q),p.mask=u,n=
0;n<L;n++)for(c=n*G,f=0;f<x;f++)u[c+f]=1;return p});return function(p,n,f){return g.apply(this,arguments)}}();e.readIFDs=function(){var g=U._asyncToGenerator(function*(p,n,f,b,c,m=4,x){if(!b)return null;if(b>=n.byteLength||0>b)n=(yield this.request(this.url,{range:{from:b+c,to:b+c+this._bufferSize},responseType:"array-buffer",signal:x})).data,c=b+c,b=0;b=yield this.readIFD(n,f,b,c,v.TIFF_TAGS,m,x);p.push(b.ifd);if(!b.nextIFD)return null;yield this.readIFDs(p,n,f,b.nextIFD-c,c,m,x)});return function(p,
n,f,b,c){return g.apply(this,arguments)}}();e.readIFD=function(){var g=U._asyncToGenerator(function*(p,n,f,b,c=v.TIFF_TAGS,m=4,x){if(!p)return null;f=h.parseIFD(p,n,f,b,c,m);if(f.success){const L=[];f.ifd.forEach(r=>{r.values||L.push(r)});0<L.length&&(m=L.map(r=>r.offlineOffsetSize),c=Math.min.apply(null,m.map(r=>r[0])),Math.min.apply(null,m.map(r=>r[0]+r[1]))-c<=this._bufferSize&&({data:m}=yield this.request(this.url,{range:{from:c,to:c+this._bufferSize},responseType:"array-buffer",signal:x}),p=
m,b=c,L.forEach(r=>h.parseFieldValues(p,n,r,b))));f.ifd.has("GEOKEYDIRECTORY")&&(c=f.ifd.get("GEOKEYDIRECTORY"),(m=c.values)&&4<m.length&&(m=m[0]+"."+m[1]+"."+m[2],x=yield this.readIFD(p,n,c.valueOffset+6-b,b,v.GEO_KEYS,2,x),c.data=x.ifd,c.data&&c.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[m]})));return f}if(f.requiredBufferSize&&f.requiredBufferSize!==p.byteLength)return p=(yield this.request(this.url,{range:{from:b,to:b+f.requiredBufferSize+4},responseType:"array-buffer",
signal:x})).data,p.byteLength<f.requiredBufferSize?null:this.readIFD(p,n,0,b,v.TIFF_TAGS,4,x)});return function(p,n,f,b){return g.apply(this,arguments)}}();e.getTileLocation=function(g,p,n){const {firstPyramidLevel:f,blockBoundary:b}=this.rasterInfo.storageInfo;var c=0===g?0:g-(f-1);g=this._headerInfo.ifds[c];if(!g)return null;var m=h.isBSQConfig(g,this._headerInfo);const x=z(g,"TILEOFFSETS");if(void 0===x)return null;var L=z(g,"TILEBYTECOUNTS");const {minRow:r,minCol:u,maxRow:G,maxCol:Q}=b[c];if(p>
G||n>Q||p<r||n<u)return null;c=l(g,"IMAGEWIDTH");const O=l(g,"IMAGELENGTH"),W=l(g,"TILEWIDTH"),X=l(g,"TILELENGTH"),K=m?this.rasterInfo.bandCount:1,M=K*p*(Q+1)+n,V=[{from:x[M],to:x[M+K-1]+L[M+K-1]-1}];if(m){m=!0;for(let R=0;R<K;R++)if(x[M+R]+L[M+R]!==x[M+R+1]){m=!1;break}if(!m)for(m=0;m<K;m++)V[m]={from:x[M+m],to:x[M+m]+L[M+m]-1}}L=L[M];return null==x[M]||null==L?null:{ranges:V,ifd:g,actualTileWidth:n===Q?c%W:W,actualTileHeight:p===G?O%X:X}};e._fetchAuxiliaryData=function(){var g=U._asyncToGenerator(function*(p){try{const {data:n}=
yield this.request(this.url+".aux.xml",{responseType:"xml",signal:null==p?void 0:p.signal});return H.parsePAMInfo(n)}catch{return null}});return function(p){return g.apply(this,arguments)}}();return d}(B);t.__decorate([N.property()],E.prototype,"_files",void 0);t.__decorate([N.property()],E.prototype,"_headerInfo",void 0);t.__decorate([N.property()],E.prototype,"_bufferSize",void 0);t.__decorate([N.property({type:String,json:{write:!0}})],E.prototype,"datasetFormat",void 0);return E=t.__decorate([I.subclass("esri.layers.support.rasterDatasets.TIFFRaster")],
E)})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../PopupTemplate ../rasterRenderers ../core/Error ../core/maybe ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ./Layer ./mixins/BlendLayer ./mixins/CustomParametersMixin ./mixins/ImageryTileMixin ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./support/commonProperties ./support/Field ./support/rasterEnums ./support/rasterDatasets/RasterFactory ../support/popupUtils".split(" "),function(U,
t,E,J,A,N,T,S,P,I,D,q,B,H,h,v,k,y,F,w,C,z,l,a,d,e,g,p){T=function(n){function f(...c){c=n.call(this,...c)||this;c.bandIds=null;c.interpolation=null;c.legendEnabled=!0;c.isReference=null;c.listMode="show";c.sourceJSON=null;c.version=null;c.title=null;c.type="imagery-tile";c.operationalLayerType="ArcGISTiledImageServiceLayer";c.popupEnabled=!0;c.popupTemplate=null;c.fields=null;return c}U._inheritsLoose(f,n);var b=f.prototype;b.normalizeCtorArgs=function(c,m){return"string"===typeof c?{url:c,...m}:
c};b.load=function(c){const m=N.isSome(c)?c.signal:null;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},c).catch(S.throwIfAbortError).then(()=>this._openRaster(m)));return Promise.resolve(this)};b.readRenderer=function(c,m,x){c=J.read(m&&m.layerDefinition&&m.layerDefinition.drawingInfo&&m.layerDefinition.drawingInfo.renderer,x)||void 0;if(null!=c)return c};b.createPopupTemplate=function(c){return p.createPopupTemplate({fields:this.rasterFields,title:this.title},c)};
b.write=function(c,m){const {raster:x}=this;if(this.loaded?"RasterTileServer"===x.datasetFormat&&("Raster"===x.tileType||"Map"===x.tileType):this.url&&/\/ImageServer(\/|\/?$)/i.test(this.url))return n.prototype.write.call(this,c,m);m&&m.messages&&m.messages.push(new A("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${`${m.origin}/${m.layerContainerType||"operational-layers"}`}'`,{layer:this}));return null};b._openRaster=
function(){var c=U._asyncToGenerator(function*(m){this.raster?(this.raster.rasterInfo||(yield this.raster.open()),this.url=this.raster.url):this.raster=yield g.open({url:this.url,sourceJSON:this.sourceJSON,ioConfig:{sampling:"closest",...this.ioConfig,customFetchParameters:this.customParameters},signal:m});({rasterInfo:m}=this.raster);if(!m)throw new A("imagery-tile-layer:load","cannot load resources on "+this.url);this.sourceJSON=this.sourceJSON||this.raster.sourceJSON;null!=this.sourceJSON&&(this._set("version",
this.sourceJSON.currentVersion),this._set("copyright",this.sourceJSON.copyrightText));null==this.title&&(this.title=this.raster.datasetName);"Map"===this.raster.tileType&&(this.popupEnabled=!1);this._configDefaultSettings();this.watch("customParameters",x=>this.raster.ioConfig.customFetchParameters=x)});return function(m){return c.apply(this,arguments)}}();U._createClass(f,[{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"rasterFields",get:function(){var c,m;let x=
[new d({name:"Raster.ServicePixelValue",alias:"Pixel Value",domain:null,editable:!1,length:50,type:"string"})];const L=null==(c=this.rasterInfo)?void 0:null==(m=c.attributeTable)?void 0:m.fields;L&&(c=L.filter(u=>"oid"!==u.type&&"value"!==u.name.toLowerCase()).map(u=>{const G=u.clone();G.name="Raster."+u.name;return G}),x=x.concat(c));c=this.rasterInfo.dataType;if(("vector-magdir"===c||"vector-uv"===c)&&N.isSome(this.rasterInfo.multidimensionalInfo)){var r;c=null==(r=this.rasterInfo.multidimensionalInfo.variables[0].unit)?
void 0:r.trim();x.push(new d({name:"Raster.Magnitude",alias:"Magnitude"+(c?` (${c})`:""),domain:null,editable:!1,type:"double"}));x.push(new d({name:"Raster.Direction",alias:"Direction (\u00b0)",domain:null,editable:!1,type:"double"}))}return x}},{key:"renderer",set:function(c){this._set("renderer",c);this.updateRenderer()}}]);return f}(k.BlendLayer(l.ScaleRangeLayer(w.OperationalLayer(C.PortalLayer(y.CustomParametersMixin(F.ImageryTileMixin(z.RefreshableLayer(T.MultiOriginJSONMixin(v)))))))));t.__decorate([P.property({type:[D.Integer],
json:{write:{overridePolicy(){var n;return{enabled:!this.loaded||"Raster"===this.raster.tileType||"0,1,2"!==(null==(n=this.bandIds)?void 0:n.join(","))}}}}})],T.prototype,"bandIds",void 0);t.__decorate([P.property({json:{write:{overridePolicy(){return{enabled:!this.loaded||"Raster"===this.raster.tileType||"bilinear"!==this.interpolation}}}}}),B.enumeration(e.interpolationKebab)],T.prototype,"interpolation",void 0);t.__decorate([P.property({json:{write:!0}})],T.prototype,"multidimensionalDefinition",
void 0);t.__decorate([P.property(a.legendEnabled)],T.prototype,"legendEnabled",void 0);t.__decorate([P.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],T.prototype,"isReference",void 0);t.__decorate([P.property({type:["show","hide"]})],T.prototype,"listMode",void 0);t.__decorate([P.property()],T.prototype,"sourceJSON",void 0);t.__decorate([P.property({readOnly:!0})],T.prototype,"version",void 0);t.__decorate([P.property()],T.prototype,"title",void 0);t.__decorate([P.property({readOnly:!0,
json:{read:!1}})],T.prototype,"type",void 0);t.__decorate([P.property({type:["ArcGISTiledImageServiceLayer"]})],T.prototype,"operationalLayerType",void 0);t.__decorate([P.property({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader(n,f){return!f.disablePopup}},write:{target:"disablePopup",overridePolicy(){return{enabled:!this.loaded||"Raster"===this.raster.tileType}},writer(n,f,b){f[b]=!n}}}})],T.prototype,"popupEnabled",void 0);t.__decorate([P.property({type:E,json:{read:{source:"popupInfo"},
write:{target:"popupInfo",overridePolicy(){return{enabled:!this.loaded||"Raster"===this.raster.tileType}}}}})],T.prototype,"popupTemplate",void 0);t.__decorate([P.property({readOnly:!0})],T.prototype,"defaultPopupTemplate",null);t.__decorate([P.property({readOnly:!0,type:[d]})],T.prototype,"fields",void 0);t.__decorate([P.property({readOnly:!0,type:[d]})],T.prototype,"rasterFields",null);t.__decorate([P.property({types:J.rasterRendererTypes,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy(){var n;
const f="raster-stretch"===(null==(n=this.renderer)?void 0:n.type)&&"none"===this.renderer.stretchType&&!this.renderer.useGamma;return{enabled:!this.loaded||"Raster"===this.raster.tileType||!f}}},origins:{"web-scene":{types:J.websceneRasterRendererTypes,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy(n){return{enabled:n&&"vector-field"!==n.type}}}}}}})],T.prototype,"renderer",null);t.__decorate([H.reader("renderer")],T.prototype,"readRenderer",null);return T=t.__decorate([h.subclass("esri.layers.ImageryTileLayer")],
T)});