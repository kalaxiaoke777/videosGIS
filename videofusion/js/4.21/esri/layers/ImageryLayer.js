// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.21/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/mixins/ArcGISImageService":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Graphic ../../rasterRenderers ../../request ../../core/Error ../../core/jsonMap ../../core/lang ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/urlUtils ../../core/accessorSupport/decorators/aliasOf ../../core/accessorSupport/ensureType ../../core/has ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../support/commonProperties ../support/DimensionalDefinition ../support/ExportImageServiceParameters ../support/Field ../support/FieldsIndex ../support/imageryRendererUtils ../support/MosaicRule ../support/PixelBlock ../support/rasterEnums ../support/RasterFunction ../support/RasterInfo ../support/RasterJobHandler ../support/rasterFormats/RasterCodec ../support/rasterFunctions/vectorFieldUtils ../../renderers/support/rasterRendererHelper ../../renderers/support/RasterSymbolizer ../../rest/imageService ../../kernel ../../rest/query/support/AttachmentInfo ../../rest/support/AttachmentQuery ../../rest/query/executeForCount ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/normalizeUtils ../../core/pbf ../../core/unitUtils ../../geometry/support/spatialReferenceUtils ../../rest/support/Query ../../rest/query/executeForIds ../../rest/query/executeQueryJSON ../graphics/featureConversionUtils ../../rest/support/FeatureSet ../../rest/support/RelationshipQuery ../../rest/support/TopFeaturesQuery ../../rest/support/ImageHistogramParameters ../../rest/support/ImageIdentifyParameters ../../rest/support/ImageSampleParameters ../../geometry/SpatialReference".split(" "),
function(W,I,w,N,l,U,V,Y,M,L,C,e,y,D,a,m,c,b,k,t,q,h,d,p,z,u,v,A,P,E,r,n,x,B,S,f,g,F,R,Q,X,aa,H,J,T,O,Z,ca,da,fa,ka,oa,qa,ta,ma,sa,na,ja,Aa,Ba,Ia,Ha,Fa){function xa(la){if(!la)return null;la=JSON.stringify(la).match(/"rasterFunction":"(.*?")/gi);return(la=null==la?void 0:la.map(Ka=>Ka.replace('"rasterFunction":"',"").replace('"',"")))?la.join("/"):null}const wa=C.getLogger("esri.layers.mixins.ArcGISImageService"),La=M.strict()({U1:"u1",U2:"u2",U4:"u4",U8:"u8",S8:"s8",U16:"u16",S16:"s16",U32:"u32",
S32:"s32",F32:"f32",F64:"f64",C64:"c64",C128:"c128",UNKNOWN:"unknown"}),Pa=new Set("png png8 png24 png32 jpg bmp gif jpgpng lerc tiff".split(" ")),Oa=b.ensureRange(m.ensureNumber,{min:0,max:255});W.ArcGISImageService=la=>{la=function(Ka){function Qa(){var G=Ka.apply(this,arguments)||this;G._functionRasterInfos={};G._rasterJobHandler={instance:null,refCount:0,connectionPromise:null};G._symbolizer=null;G._defaultServiceMosaicRule=null;G._serviceSourceType=null;G._serviceSupportsMosaicRule=null;G.rasterAttributeTableFieldPrefix=
"Raster.";G.adjustAspectRatio=null;G.bandCount=null;G.bandIds=void 0;G.capabilities=null;G.compressionQuality=void 0;G.compressionTolerance=.01;G.copyright=null;G.definitionExpression=null;G.exportImageServiceParameters=null;G.rasterInfo=null;G.fields=null;G.fullExtent=null;G.hasMultidimensions=!1;G.imageMaxHeight=4100;G.imageMaxWidth=4100;G.interpolation=void 0;G.minScale=0;G.maxScale=0;G.multidimensionalInfo=null;G.noData=null;G.noDataInterpretation=void 0;G.objectIdField=null;G.geometryType="polygon";
G.typeIdField=null;G.types=[];G.pixelSizeX=null;G.pixelSizeY=null;G.pixelFilter=null;G.raster=void 0;G.viewId=void 0;G.renderer=null;G.rasterAttributeTable=null;G.rasterFunctionInfos=null;G.serviceDataType=null;G.spatialReference=null;G.pixelType=null;G.serviceRasterInfo=null;G.sourceJSON=null;G.url=null;G.version=null;return G}I._inheritsLoose(Qa,Ka);var pa=Qa.prototype;pa.initialize=function(){this._set("exportImageServiceParameters",new p.ExportImageServiceParameters({layer:this}))};pa.readDefaultServiceMosaicRule=
function(G,K){return this._serviceSupportsMosaicRule?A.fromJSON(K):null};pa.readServiceSourceType=function(G,K){return this._isMosaicDataset(K)?"mosaic-dataset":"raster-dataset"};pa.readServiceSupportsMosaicRule=function(G,K){return this._isMosaicRuleSupported(K)};pa.readBandIds=function(G,K){if(Array.isArray(G)&&0<G.length&&G.every(ba=>"number"===typeof ba))return G};pa.readCapabilities=function(G,K){return this._readCapabilities(K)};pa.writeCompressionQuality=function(G,K,ba){null!=G&&"lerc"!==
this.format&&(K[ba]=G)};pa.writeCompressionTolerance=function(G,K,ba){"lerc"===this.format&&null!=G&&(K[ba]=G)};pa.readFormat=function(G,K){return"esriImageServiceDataTypeVector-UV"===K.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===K.serviceDataType?"lerc":null!=this.pixelFilter?"lerc":"jpgpng"};pa.readMinScale=function(G,K){return null!=K.minLOD&&null!=K.maxLOD?G:0};pa.readMaxScale=function(G,K){return null!=K.minLOD&&null!=K.maxLOD?G:0};pa.readMosaicRule=function(G,K){return(G=G||K.mosaicRule)?
A.fromJSON(G):this._isMosaicRuleSupported(K)?A.fromJSON(K):null};pa.writeMosaicRule=function(G,K,ba){G=this.mosaicRule;const ea=this.definitionExpression;G?ea&&ea!==G.where&&(G=G.clone(),G.where=ea):ea&&(G=new A({where:ea}));this._isValidCustomizedMosaicRule(G)&&(K[ba]=G.toJSON())};pa.writeNoData=function(G,K,ba){null!=G&&"number"===typeof G&&(K[ba]=Oa(G))};pa.readObjectIdField=function(G,K){G||(G=(G=K.fields.filter(ba=>"esriFieldTypeOID"===ba.type||"oid"===ba.type))&&G[0]&&G[0].name);return G};pa.readRenderer=
function(G,K,ba){var ea,ha;G=null==K?void 0:null==(ea=K.layerDefinition)?void 0:null==(ha=ea.drawingInfo)?void 0:ha.renderer;ba=U.read(G,ba);if(null==ba)return null;"vector-field"===ba.type&&K.symbolTileSize&&!G.symbolTileSize&&(ba.symbolTileSize=K.symbolTileSize);v.isSupportedRendererType(ba)||wa.warn("ArcGISImageService","Imagery layer doesn't support given renderer type.");return ba};pa.writeRenderer=function(G,K,ba){K.layerDefinition=K.layerDefinition||{};K.layerDefinition.drawingInfo=K.layerDefinition.drawingInfo||
{};K.layerDefinition.drawingInfo.renderer=G.toJSON();"vector-field"===G.type&&(K.symbolTileSize=G.symbolTileSize)};pa.readRenderingRule=function(G,K){G=K.rasterFunctionInfos;return K.renderingRule||G&&G.length&&"None"!==G[0].name?r.fromJSON(K.renderingRule||{rasterFunctionInfos:K.rasterFunctionInfos}):null};pa.writeRenderingRule=function(G,K,ba){this._isRFTJson(G)||(K[ba]=G.toJSON())};pa.readSpatialReference=function(G,K){return(G=G||K.extent.spatialReference)?Fa.fromJSON(G):null};pa.readPixelType=
function(G){return La.fromJSON(G)||G};pa.writePixelType=function(G,K,ba){if(e.isNone(this.serviceRasterInfo)||this.pixelType!==this.serviceRasterInfo.pixelType)K[ba]=La.toJSON(G)};pa.readVersion=function(G,K){(G=K.currentVersion)||(G=K.hasOwnProperty("fields")||K.hasOwnProperty("timeInfo")?10:9.3);return G};pa.applyFilter=function(G){let K=G;this.pixelFilter&&(K=this._clonePixelData(G),this.pixelFilter(K));return K};pa.applyRenderer=function(){var G=I._asyncToGenerator(function*(K,ba){var ea=K;if(!this._isPicture()&&
this.renderer&&this._symbolizer&&!this.pixelFilter){ea=JSON.stringify(this._cachedRendererJson)!==JSON.stringify(this.renderer.toJSON());const ha=this._rasterJobHandler.instance,{bandIds:ia}=this;ha?(ea&&(this._symbolizer.bind(),yield ha.updateSymbolizer(this._symbolizer,ba),this._cachedRendererJson=this.renderer.toJSON()),ba=yield ha.symbolize({bandIds:ia,...K},ba),ea={extent:K.extent,pixelBlock:ba}):ea={extent:K.extent,pixelBlock:this._symbolizer.symbolize({bandIds:ia,...K})}}return ea});return function(K,
ba){return G.apply(this,arguments)}}();pa.destroy=function(){this._shutdownJobHandler()};pa.increaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount++};pa.decreaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount--;0>=this._rasterJobHandler.refCount&&this._shutdownJobHandler()};pa.computeHistograms=function(){var G=I._asyncToGenerator(function*(K,ba){yield this._fetchCapabilities(null==ba?void 0:ba.signal);if(!this.capabilities.operations.supportsComputeHistograms)throw new Y("imagery-layer:compute-histograms",
"this operation is not supported on the input image service");K=m.ensureClass(Ba,K).clone();const {raster:ea,mosaicRule:ha,renderingRule:ia}=this;ia&&null==K.renderingRule&&(K.renderingRule=ia);ha&&null==K.mosaicRule&&(K.mosaicRule=ha);ea&&null==K.raster&&(K.raster=ea);return F.computeHistograms(this.url,K,this._getRequestOptions(ba))});return function(K,ba){return G.apply(this,arguments)}}();pa.computeStatisticsHistograms=function(){var G=I._asyncToGenerator(function*(K,ba){yield this._fetchCapabilities(null==
ba?void 0:ba.signal);if(!this.capabilities.operations.supportsComputeStatisticsHistograms)throw new Y("imagery-layer:compute-statistics-histograms","this operation is not supported on the input image service");K=m.ensureClass(Ba,K).clone();const {raster:ea,mosaicRule:ha,renderingRule:ia}=this;ia&&null==K.renderingRule&&(K.renderingRule=ia);ha&&null==K.mosaicRule&&(K.mosaicRule=ha);ea&&null==K.raster&&(K.raster=ea);return F.computeStatisticsHistograms(this.url,K,this._getRequestOptions(ba))});return function(K,
ba){return G.apply(this,arguments)}}();pa.getField=function(G){const {fieldsIndex:K}=this;return e.isSome(K)?K.get(G):void 0};pa.getFieldDomain=function(G,K){return(G=this.getField(G))?G.domain:null};pa.fetchImage=function(G,K,ba,ea={}){if(null==G||null==K||null==ba)return Promise.reject(new Y("imagery-layer:fetch-image","Insufficient parameters for requesting an image. A valid extent, width and height values are required."));const ha=this.renderer||this._symbolizer?this.generateRasterInfo(this.renderingRule,
{signal:ea.signal}):null;return y.when(ha).then(ia=>{ia&&(this.rasterInfo=ia);ia={imageServiceParameters:this.getExportImageServiceParameters(G,K,ba,ea.timeExtent),imageProps:{extent:G,width:K,height:ba,format:this.format},requestAsImageElement:ea.requestAsImageElement&&!this.pixelFilter||!1,signal:ea.signal};return this._requestArrayBuffer(ia)})};pa.fetchKeyProperties=function(G){G=G&&G.renderingRule&&G.renderingRule.toJSON();return V(this.parsedUrl.path+"/keyProperties",{query:this._getQueryParams({renderingRule:10.3<=
this.version&&G?JSON.stringify(G):null})}).then(K=>K.data)};pa.fetchRasterAttributeTable=function(G){G=G&&G.renderingRule&&G.renderingRule.toJSON();return 10.1>this.version?Promise.reject(new Y("#fetchRasterAttributeTable()","Failed to get rasterAttributeTable")):V(this.parsedUrl.path+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:10.3<=this.version&&G?JSON.stringify(G):null})}).then(K=>na.fromJSON(K.data))};pa.getCatalogItemRasterInfo=function(){var G=I._asyncToGenerator(function*(K,
ba){var ea=V(this.parsedUrl.path+"/"+K+"/info",{query:this._getQueryParams(),...ba}).then(ha=>ha.data);K=V(this.parsedUrl.path+"/"+K+"/info/keyProperties",{query:this._getQueryParams(),...ba}).then(ha=>ha.data).catch(()=>{});ea=yield Promise.all([ea,K]);if(ea[0])return K=H.fromJSON(ea[0].extent),ba=ea[0].statistics?ea[0].statistics.map(ha=>({min:ha[0],max:ha[1],avg:ha[2],stddev:ha[3]})):null,new n({bandCount:ea[0].bandCount,extent:K,spatialReference:K.sr,pixelSize:new O({x:ea[0].pixelSizeX,y:ea[0].pixelSizeY,
spatialReference:K.sr}),pixelType:ea[0].pixelType.toLowerCase(),statistics:ba,histograms:ea[0].histograms,keyProperties:ea[1]||{}})});return function(K,ba){return G.apply(this,arguments)}}();pa.getCatalogItemICSInfo=function(){var G=I._asyncToGenerator(function*(K,ba){var {data:ea}=yield V(this.parsedUrl.path+"/"+K+"/info/ics",{query:this._getQueryParams(),...ba});if(ea=ea&&ea.ics){var ha=null;try{ha=(yield V(this.parsedUrl.path+"/"+K+"/info",{query:this._getQueryParams(),...ba})).data.extent}catch{}if(!ha||
!ha.spatialReference)return{ics:ea,icsToPixelTransform:null,icsExtent:null,northDirection:null};var ia=10.7<=this.version?V(this.parsedUrl.path+"/"+K+"/info/icstopixel",{query:this._getQueryParams(),...ba}).then(Da=>Da.data).catch(()=>({})):{},va=ha.spatialReference,ua={geometries:JSON.stringify({geometryType:"esriGeometryEnvelope",geometries:[ha]}),inSR:va.wkid||JSON.stringify(va),outSR:"0:"+K};ua=V(this.parsedUrl.path+"/project",{query:this._getQueryParams(ua),...ba}).then(Da=>Da.data).catch(()=>
({}));var ra=(ha.xmin+ha.xmax)/2,ya=(ha.ymax-ha.ymin)/6;ha=ha.ymin+ya;var Ga=[];for(let Da=0;5>Da;Da++)Ga.push({x:ra,y:ha+ya*Da});K={geometries:JSON.stringify({geometryType:"esriGeometryPoint",geometries:Ga}),inSR:va.wkid||JSON.stringify(va),outSR:"0:"+K};ba=V(this.parsedUrl.path+"/project",{query:this._getQueryParams(K),...ba}).then(Da=>Da.data).catch(()=>({}));ia=yield Promise.all([ia,ua,ba]);ba=ia[0].ipxf;if(null==ba){var Ca,za,Ea;K=null==(Ca=ea.geodataXform)?void 0:Ca.xf_0;"topup"===(null==K?
void 0:null==(za=K.name)?void 0:za.toLowerCase())&&6===(null==K?void 0:null==(Ea=K.coefficients)?void 0:Ea.length)&&(ba={affine:{name:"ics [sensor: Frame] to pixel (column, row) transformation",coefficients:K.coefficients,cellsizeRatio:0,type:"GeometricXform"}})}if(Ca=H.fromJSON(ia[1]&&ia[1].geometries&&ia[1].geometries[0]))Ca.spatialReference=new Fa({wkid:0,imageCoordinateSystem:ea});za=ia[2].geometries?ia[2].geometries.filter(Da=>null!=Da&&null!=Da.x&&null!=Da.y&&"NaN"!==Da.x&&"NaN"!==Da.y):[];
Ea=za.length;if(3>Ea)return{ics:ea,icsToPixelTransform:ba,icsExtent:Ca,northDirection:null};va=ua=K=ia=0;for(ra=0;ra<Ea;ra++)ia+=za[ra].x,K+=za[ra].y,ua+=za[ra].x*za[ra].x,va+=za[ra].x*za[ra].y;Ea=(Ea*va-ia*K)/(Ea*ua-ia*ia);ia=0;K=za[4].x>za[0].x;za=za[4].y>za[0].y;Infinity===Ea?ia=za?90:270:0===Ea?ia=K?0:180:0<Ea?ia=K?180*Math.atan(Ea)/Math.PI:180*Math.atan(Ea)/Math.PI+180:0>Ea&&(ia=za?180+180*Math.atan(Ea)/Math.PI:360+180*Math.atan(Ea)/Math.PI);return{ics:ea,icsToPixelTransform:ba,icsExtent:Ca,
northDirection:ia}}});return function(K,ba){return G.apply(this,arguments)}}();pa.generateRasterInfo=function(){var G=I._asyncToGenerator(function*(K,ba){if((!K||"none"===K.functionName.toLowerCase()||this._isVectorFieldResampleFunction(K))&&e.isSome(this.serviceRasterInfo))return this.serviceRasterInfo;const ea=xa(K);if(this._functionRasterInfos[ea])return this._functionRasterInfos[ea];K=this._generateRasterInfo(K,ba);this._functionRasterInfos[ea]=K;try{return yield K}catch{return this._functionRasterInfos[ea]=
null}});return function(K,ba){return G.apply(this,arguments)}}();pa.getExportImageServiceParameters=function(G,K,ba,ea){G=G.clone().shiftCentralMeridian();var ha=G.spatialReference;if(ha.imageCoordinateSystem){const {id:Ca,referenceServiceName:za}=ha.imageCoordinateSystem;ha=null!=Ca?za?-1<this.parsedUrl.path.toLowerCase().indexOf("/"+za.toLowerCase()+"/")?"0:"+Ca:JSON.stringify({icsid:Ca,icsns:za}):"0:"+Ca:JSON.stringify({ics:ha.imageCoordinateSystem})}else ha=ha.wkid||JSON.stringify(ha.toJSON());
e.isSome(this.serviceRasterInfo)&&this.pixelType!==this.serviceRasterInfo.pixelType&&(this.exportImageServiceParameters.pixelType=this.pixelType);const ia=this.exportImageServiceParameters.toJSON(),{bandIds:va,noData:ua}=ia;var {renderingRule:ra}=ia,ya=this.renderingRule&&"none"!==this.renderingRule.functionName.toLowerCase(),Ga=!this.renderer||"raster-stretch"===this.renderer.type;null!=va&&va.length&&ya&&Ga?(ya={rasterFunction:"ExtractBand",rasterFunctionArguments:{BandIds:va}},"Stretch"===ra.rasterFunction?
(ya.rasterFunctionArguments.Raster=ra.rasterFunctionArguments.Raster,ra.rasterFunctionArguments.Raster=ya):"Colormap"===ra.rasterFunction?(Ga=ra.rasterFunctionArguments.Raster,"Stretch"===(null==Ga?void 0:Ga.rasterFunction)?(ya.rasterFunctionArguments.Raster=Ga.rasterFunctionArguments.Raster,Ga.rasterFunctionArguments.Raster=ya):(ya.rasterFunctionArguments.Raster=Ga,ra.rasterFunctionArguments.Raster=ya)):(ya.rasterFunctionArguments.Raster=ra,ra=ya),ia.bandIds=void 0):ia.bandIds=null==va?void 0:va.join(",");
ua instanceof Array&&0<ua.length&&(ia.noData=ua.join(","));ya=this._serviceSupportsMosaicRule?this._combineMosaicRuleWithTimeExtent(this.exportImageServiceParameters.mosaicRule,ea):null;ia.mosaicRule=ya&&JSON.stringify(ya);ia.renderingRule=ra&&JSON.stringify(ra);ra={};if(ea){const {start:Ca,end:za}=ea.toJSON();if(Ca&&za&&Ca===za)ra.time=""+Ca;else if(null!=Ca||null!=za)ra.time=`${null==Ca?"null":Ca},${null==za?"null":za}`}return{bbox:G.xmin+","+G.ymin+","+G.xmax+","+G.ymax,bboxSR:ha,imageSR:ha,size:K+
","+ba,...ia,...ra}};pa.getSamples=function(){var G=I._asyncToGenerator(function*(K,ba){yield this._fetchCapabilities(null==ba?void 0:ba.signal);if(!this.capabilities.operations.supportsGetSamples)throw new Y("imagery-layer:get-samples","getSamples operation is not supported on the input image service");K=m.ensureClass(Ha,K).clone();const {raster:ea}=this;ea&&null==K.raster&&(K.raster=ea);return F.getSamples(this.url,K,this._getRequestOptions(ba))});return function(K,ba){return G.apply(this,arguments)}}();
pa.identify=function(){var G=I._asyncToGenerator(function*(K,ba){yield this._fetchCapabilities(null==ba?void 0:ba.signal);if(!this.capabilities.operations.supportsIdentify)throw new Y("imagery-layer:query-rasters","query operation is not supported on the input image service");K=m.ensureClass(Ia,K).clone();const {raster:ea,mosaicRule:ha,renderingRule:ia}=this;ia&&null==K.renderingRule&&(K.renderingRule=ia);if(ha&&null==K.mosaicRule){const va=this._combineMosaicRuleWithTimeExtent(ha,K.timeExtent);K.mosaicRule=
e.unwrap(va)}ea&&null==K.raster&&(K.raster=ea);return F.identify(this.url,K,this._getRequestOptions(ba))});return function(K,ba){return G.apply(this,arguments)}}();pa.createQuery=function(){const G=new qa;G.outFields=["*"];G.returnGeometry=!0;G.where=this.definitionExpression||"1\x3d1";return G};pa.queryRasters=function(){var G=I._asyncToGenerator(function*(K,ba){({query:K,requestOptions:ba}=yield this._prepareForQuery(K,ba));return ma.executeQueryJSON(this.url,K,ba)});return function(K,ba){return G.apply(this,
arguments)}}();pa.queryObjectIds=function(){var G=I._asyncToGenerator(function*(K,ba){({query:K,requestOptions:ba}=yield this._prepareForQuery(K,ba));return ta.executeForIds(this.url,K,ba)});return function(K,ba){return G.apply(this,arguments)}}();pa.queryRasterCount=function(){var G=I._asyncToGenerator(function*(K,ba){({query:K,requestOptions:ba}=yield this._prepareForQuery(K,ba));return aa.executeForCount(this.url,K,ba)});return function(K,ba){return G.apply(this,arguments)}}();pa.queryVisibleRasters=
function(G,K){if(!G)return Promise.reject(new Y("imagery-layer: query-visible-rasters","missing query parameter"));const {pixelSize:ba,returnDomainValues:ea,returnTopmostRaster:ha,showNoDataRecords:ia}=K||{pixelSize:null,returnDomainValues:!1,returnTopmostRaster:!1,showNoDataRecords:!1};let va=!1;var ua=null;let ra=null;const ya=this.rasterFunctionNamesIndex;if(e.isSome(G.outFields)&&(va=G.outFields.some(Ja=>-1===Ja.toLowerCase().indexOf("raster.servicepixelvalue")),10.4<=this.version)){var Ga=G.outFields.filter(Ja=>
-1<Ja.toLowerCase().indexOf("raster.servicepixelvalue")&&24<Ja.length).map(Ja=>{Ja=Ja.slice(25);return[this._updateRenderingRulesFunctionName(Ja,ya),Ja]});ua=Ga.map(Ja=>new r({functionName:Ja[0]}));ra=Ga.map(Ja=>Ja[1]);0===ua.length?this.renderingRule?(ua.push(this.renderingRule),ra.push(this.renderingRule.functionName)):ua=null:this.renderingRule&&!ua.some(Ja=>Ja.functionName===this.renderingRule.functionName)&&(ua.push(this.renderingRule),ra.push(this.renderingRule.functionName))}const Ca=e.isNone(G.outSpatialReference)||
G.outSpatialReference.equals(this.spatialReference);Ga=G.timeExtent||this.timeExtent;const za=this._combineMosaicRuleWithTimeExtent(this.exportImageServiceParameters.mosaicRule,Ga);ua=this._getQueryParams({geometry:G.geometry,timeExtent:Ga,mosaicRule:za,renderingRule:10.4>this.version?this.renderingRule:null,renderingRules:ua,pixelSize:ba,returnCatalogItems:va,returnGeometry:Ca,raster:this.raster,maxItemCount:ha?1:null});delete ua.f;const Ea=new Ia(ua),Da=this.generateRasterInfo(this.renderingRule);
return new Promise(Ja=>{Da.then(()=>{F.identify(this.url,Ea,{signal:null==K?void 0:K.signal,query:{...this.customParameters}}).then(Na=>{const Ua=G.outFields;if(va&&!Ca&&Na.catalogItems&&Na.catalogItems.features&&0<Na.catalogItems.features.length){const Ra=this.objectIdField||"ObjectId",Va=Na.catalogItems.features;var Sa=Va.map(Ma=>Ma.attributes&&Ma.attributes[Ra]);Sa=new qa({objectIds:Sa,returnGeometry:!0,outSpatialReference:G.outSpatialReference,outFields:[Ra]});return this.queryRasters(Sa).then(Ma=>
{Ma&&Ma.features&&0<Ma.features.length&&Ma.features.forEach(Wa=>{Va.forEach(Ta=>{Ta.attributes[Ra]===Wa.attributes[Ra]&&(Ta.geometry=new Z(Wa.geometry),Ta.geometry.spatialReference=G.outSpatialReference)})});Ja(this._processVisibleRastersResponse(Na,{returnDomainValues:ea,templateRRFunctionNames:ra,showNoDataRecords:ia,templateFields:Ua}))}).catch(()=>{throw new Y("imagery-layer:query-visible-rasters","encountered error when querying visible rasters geometry");})}Ja(this._processVisibleRastersResponse(Na,
{returnDomainValues:ea,templateRRFunctionNames:ra,showNoDataRecords:ia,templateFields:Ua}))}).catch(()=>{throw new Y("imagery-layer:query-visible-rasters","encountered error when querying visible rasters");})})})};pa.fetchVariableStatisticsHistograms=function(){var G=I._asyncToGenerator(function*(K,ba){var ea=V(this.parsedUrl.path+"/statistics",{query:this._getQueryParams({variable:K}),signal:ba}).then(ha=>{var ia;return null==(ia=ha.data)?void 0:ia.statistics});K=V(this.parsedUrl.path+"/histograms",
{query:this._getQueryParams({variable:K}),signal:ba}).then(ha=>{var ia;return null==(ia=ha.data)?void 0:ia.histograms});ea=yield Promise.all([ea,K]);ea[0]&&ea[0].forEach(ha=>{ha.avg=ha.mean;ha.stddev=ha.standardDeviation});return{statistics:ea[0]||null,histograms:ea[1]||null}});return function(K,ba){return G.apply(this,arguments)}}();pa._fetchService=function(){var G=I._asyncToGenerator(function*(K){yield this._fetchServiceInfo(K);e.isSome(this.serviceRasterInfo)&&!this.rasterInfo&&(this.rasterInfo=
this.serviceRasterInfo);var ba=this.sourceJSON;ba=e.isSome(this.serviceRasterInfo)?Promise.resolve(this.serviceRasterInfo):this._fetchAuxiliaryRasterInfo({serviceInfo:ba,signal:K}).then(ea=>{this._set("serviceRasterInfo",ea);return ea});K=this.renderingRule&&"none"!==this.renderingRule.functionName.toLowerCase()?this.generateRasterInfo(this.renderingRule,{signal:K}):null;return Promise.all([ba,K]).then(ea=>{ea[1]?this._set("rasterInfo",ea[1]):this._set("rasterInfo",ea[0]);this.renderer&&!this._isSupportedRenderer(this.renderer)&&
(this.renderer=null,wa.warn("ArcGISImageService","Switching to the default renderer. Renderer applied is not valid for this Imagery Layer"));this._configDefaultRenderer();this.watch("renderer",()=>this._configDefaultRenderer());this.watch("renderingRule",ha=>{(this.renderer||this._symbolizer||this.popupEnabled&&this.popupTemplate)&&this.generateRasterInfo(ha).then(ia=>{ia&&(this.rasterInfo=ia)})});(ea=e.isSome(this.serviceRasterInfo)&&this.serviceRasterInfo.multidimensionalInfo)&&this._updateMultidimensionalDefinition(ea)})});
return function(K){return G.apply(this,arguments)}}();pa._combineMosaicRuleWithTimeExtent=function(G,K){var ba=this.timeInfo;if(e.isNone(G)||e.isNone(this.multidimensionalInfo)||e.isNone(K)||e.isNone(null==ba?void 0:ba.startField))return G;const {startField:ea}=ba;G=G.clone();if("mosaic-dataset"===this._serviceSourceType){var ha;G.multidimensionalDefinition=null==(ha=G.multidimensionalDefinition)?void 0:ha.filter(ra=>ra.dimensionName!==ea);return this._cleanupMultidimensionalDefinition(G)}G.multidimensionalDefinition=
G.multidimensionalDefinition||[];ba=G.multidimensionalDefinition.filter(ra=>ra.dimensionName===ea);ha=e.isSome(K.start)?K.start.getTime():null;K=e.isSome(K.end)?K.end.getTime():null;const ia=null==ha||null==K||ha===K,va=ia?[ha||K]:[[ha,K]],ua=10.8<=this.version;ba.length?ba.forEach(ra=>{ra.dimensionName===ea&&(ua?(ra.dimensionName=null,ra.isSlice=null,ra.values=null):(ra.isSlice=ia,ra.values=va))}):ua||(K=G.multidimensionalDefinition.filter(ra=>null!=ra.variableName&&null==ra.dimensionName),K.length?
K.forEach(ra=>{ra.dimensionName=ea;ra.isSlice=ia;ra.values=va}):G.multidimensionalDefinition.push(new d({variableName:"",dimensionName:ea,isSlice:ia,values:va})));return this._cleanupMultidimensionalDefinition(G)};pa._cleanupMultidimensionalDefinition=function(G){if(e.isNone(G))return null;G.multidimensionalDefinition&&(G.multidimensionalDefinition=G.multidimensionalDefinition.filter(K=>!(!K.variableName&&!K.dimensionName)),0===G.multidimensionalDefinition.length&&(G.multidimensionalDefinition=null));
return"mosaic-dataset"!==this._serviceSourceType&&null==G.multidimensionalDefinition?null:G};pa._prepareForQuery=function(){var G=I._asyncToGenerator(function*(K,ba){var ea;yield this._fetchCapabilities(null==(ea=ba)?void 0:ea.signal);if(!this.capabilities.operations.supportsQuery)throw new Y("imagery-layer:query-rasters","query operation is not supported on the input image service");K=e.isSome(K)?m.ensureClass(qa,K):this.createQuery();ba=this._getRequestOptions(ba);this.raster&&(ba.query={...ba.query,
raster:this.raster});return{query:K,requestOptions:ba}});return function(K,ba){return G.apply(this,arguments)}}();pa._initJobHandler=function(){var G=I._asyncToGenerator(function*(){if(null!=this._rasterJobHandler.connectionPromise)return this._rasterJobHandler.connectionPromise;const K=new x;this._rasterJobHandler.connectionPromise=K.initialize().then(()=>{this._rasterJobHandler.instance=K},()=>null);yield this._rasterJobHandler.connectionPromise});return function(){return G.apply(this,arguments)}}();
pa._shutdownJobHandler=function(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy();this._rasterJobHandler.instance=null;this._rasterJobHandler.connectionPromise=null;this._rasterJobHandler.refCount=0};pa._isSupportedRenderer=function(G){const {rasterInfo:K,renderingRule:ba}=this;return"unique-value"===G.type&&ba&&"none"!==ba.functionName.toLowerCase()&&1===K.bandCount&&["u8","s8"].includes(K.pixelType)||f.getSupportedRendererTypes(this.rasterInfo).includes(this.renderer.type)};
pa._fetchCapabilities=function(){var G=I._asyncToGenerator(function*(K){if(this.capabilities)return this.capabilities;yield this._fetchServiceInfo(K);return this.capabilities});return function(K){return G.apply(this,arguments)}}();pa._fetchServiceInfo=function(){var G=I._asyncToGenerator(function*(K){var ba;let ea=this.sourceJSON;if(!ea){const {data:ha,ssl:ia}=yield V(this.parsedUrl.path,{query:this._getQueryParams(),signal:K});this.sourceJSON=ea=ha;ia&&(this.url=this.url.replace(/^http:/i,"https:"))}if(-1<
(null==(ba=ea.capabilities)?void 0:ba.toLowerCase().split(",").map(ha=>ha.trim()).indexOf("tilesonly")))throw new Y("imagery-layer:fetch-service-info","use ImageryTileLayer to open tiles-only image services");this.read(ea,{origin:"service",url:this.parsedUrl})});return function(K){return G.apply(this,arguments)}}();pa._isMosaicDataset=function(G){var K;return G.serviceSourceType?"esriImageServiceSourceTypeMosaicDataset"===G.serviceSourceType:0<(null==(K=G.fields)?void 0:K.length)};pa._isMosaicRuleSupported=
function(G){var K;if(!G)return!1;const ba=this._isMosaicDataset(G);G=10.71<=G.currentVersion&&G.hasMultidimensions&&G.timeInfo&&!(G.objectIdField&&1<(null==(K=G.fields)?void 0:K.length));return ba||G};pa._isVectorFieldResampleFunction=function(G){if(!e.isSome(G))return!1;const {functionName:K,functionArguments:ba}=G;G="resample"===K.toLowerCase();const ea=(null==ba?void 0:ba.ResampleType)||(null==ba?void 0:ba.resampleType);return G&&(7===ea||10===ea)};pa._isPicture=function(){return!this.format||
-1<this.format.indexOf("jpg")||-1<this.format.indexOf("png")};pa._configDefaultRenderer=function(){if(!this._isPicture()&&!this.pixelFilter){if(!this.bandIds&&3<=this.rasterInfo.bandCount){const ba=f.getDefaultBandCombination(this.rasterInfo);!ba||3===this.rasterInfo.bandCount&&0===ba[0]&&1===ba[1]&&2===ba[2]||(this.bandIds=ba)}if(!this.renderer){var G,K;this.renderer=f.createDefaultRenderer(this.rasterInfo,{bandIds:this.bandIds,variableName:this.renderingRule?null:null==(G=this.mosaicRule)?void 0:
null==(K=G.multidimensionalDefinition)?void 0:K[0].variableName})}this._symbolizer?(this._symbolizer.rendererJSON=f.normalizeRendererJSON(this.renderer.toJSON()),this._symbolizer.rasterInfo=this.rasterInfo):this._symbolizer=new g({rendererJSON:this.renderer.toJSON(),rasterInfo:this.rasterInfo});this._symbolizer.bind()||(this._symbolizer=null)}};pa._clonePixelData=function(G){return null==G?G:{extent:G.extent&&G.extent.clone(),pixelBlock:e.isSome(G.pixelBlock)&&G.pixelBlock.clone()}};pa._getQueryParams=
function(G){const {raster:K,viewId:ba}=this;return{raster:K,viewId:ba,f:"json",...G,...this.customParameters}};pa._getRequestOptions=function(G){return{...G,query:{...null==G?void 0:G.query,...this.customParameters}}};pa._decodePixelBlock=function(G,K,ba){return this._rasterJobHandler.instance?this._rasterJobHandler.instance.decode({data:G,options:K}):B.decode(G,K,ba)};pa._fetchMultidimensionalInfo=function(){var G=I._asyncToGenerator(function*(K){var ba;K=yield V(this.parsedUrl.path+"/multidimensionalInfo",
{query:this._getQueryParams(),signal:K}).then(ea=>{var ha;return null==(ha=ea.data)?void 0:ha.multidimensionalInfo});null!=(ba=K.variables)&&ba.length&&K.variables.forEach(ea=>{var ha;null!=(ha=ea.statistics)&&ha.length&&ea.statistics.forEach(ia=>{ia.avg=ia.mean;ia.stddev=ia.standardDeviation})});return K});return function(K){return G.apply(this,arguments)}}();pa._fetchAuxiliaryRasterInfo=function(G){const K=G&&G.serviceInfo;if(!K)return Promise.reject(new Y("imagery-layer:fetch-metadata","valid serviceInfo is required"));
var ba=G.renderingRule?JSON.stringify(G.renderingRule.toJSON()):null,ea=G.signal;G=K.hasRasterAttributeTable&&10.1<=this.version?V(this.parsedUrl.path+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:10.1<=this.version?ba:null}),signal:ea}).then(va=>na.fromJSON(va.data)).catch(()=>null):!1;const ha=K.hasColormap&&10.1<=this.version?V(this.parsedUrl.path+"/colormap",{query:this._getQueryParams({renderingRule:10.6<=this.version?ba:null}),signal:ea}).then(va=>{var ua;return null==(ua=
va.data)?void 0:ua.colormap}):!1,ia=K.hasHistograms&&10.1<=this.version?V(this.parsedUrl.path+"/histograms",{query:this._getQueryParams({renderingRule:10.1<=this.version?ba:null}),signal:ea}).then(va=>{var ua;return null==(ua=va.data)?void 0:ua.histograms}):!1;ba=10.3<=this.version?V(this.parsedUrl.path+"/keyProperties",{query:this._getQueryParams({renderingRule:ba}),signal:ea}).then(va=>va.data).catch(()=>{}):!1;ea=K.hasMultidimensions&&10.3<=this.version?this._fetchMultidimensionalInfo():!1;return Promise.all([G,
ha,ia,ba,ea]).then(va=>{let ua=null;if(K.minValues&&K.minValues.length===K.bandCount){ua=[];for(var ra=0;ra<K.minValues.length;ra++)ua.push({min:K.minValues[ra],max:K.maxValues[ra],avg:K.meanValues[ra],stddev:K.stdvValues[ra]})}ra=Math.ceil((K.extent.xmax-K.extent.xmin)/K.pixelSizeX-.1);const ya=Math.ceil((K.extent.ymax-K.extent.ymin)/K.pixelSizeY-.1),Ga=Fa.fromJSON(K.spatialReference||K.extent.spatialReference);return new n({width:ra,height:ya,bandCount:K.bandCount,extent:H.fromJSON(K.extent),spatialReference:Ga,
pixelSize:new O({x:K.pixelSizeX,y:K.pixelSizeY,spatialReference:Ga}),pixelType:K.pixelType.toLowerCase(),statistics:ua,attributeTable:va[0]||null,colormap:va[1]||null,histograms:va[2]||null,keyProperties:va[3]||{},multidimensionalInfo:va[4]||null})})};pa._requestArrayBuffer=function(G){const {imageProps:K,requestAsImageElement:ba,signal:ea}=G;if(ba&&!this.pixelFilter&&K.format&&-1<K.format.indexOf("png"))return V(this.parsedUrl.path+"/exportImage",{responseType:"image",query:this._getQueryParams({f:"image",
...G.imageServiceParameters}),signal:ea}).then(ia=>({imageElement:ia.data,params:K}));const ha=this._initJobHandler();G=V(this.parsedUrl.path+"/exportImage",{responseType:"array-buffer",query:this._getQueryParams({f:"image",...G.imageServiceParameters}),signal:ea});return Promise.all([G,ha]).then(ia=>{ia=ia[0].data;const va=K.format||"jpgpng";var ua=va;"bsq"!==ua&&"bip"!==ua&&(ua=B.getFormat(ia));if(!ua)throw new Y("imagery-layer:fetch-image","unsupported format signature "+String.fromCharCode.apply(null,
new Uint8Array(ia)));ua="gif"===va||"bmp"===va||-1<va.indexOf("png")&&("png"===ua||"jpg"===ua);const ra={signal:ea};return ua?B.decode(ia,{useCanvas:!0,...K},ra).then(ya=>({pixelData:{pixelBlock:ya,extent:K.extent},params:K})):this._decodePixelBlock(ia,{width:K.width,height:K.height,planes:null,pixelType:null,noDataValue:null,format:va},ra).then(ya=>({pixelData:{pixelBlock:ya,extent:K.extent},params:K}))})};pa._generateRasterInfo=function(){var G=I._asyncToGenerator(function*(K,ba){const {data:ea}=
yield V(this.parsedUrl.path,{query:this._getQueryParams({renderingRule:K}),...ba});return yield this._fetchAuxiliaryRasterInfo({serviceInfo:ea,renderingRule:K,...ba})});return function(K,ba){return G.apply(this,arguments)}}();pa._isValidCustomizedMosaicRule=function(G){return G&&JSON.stringify(G.toJSON())!==JSON.stringify(this._defaultServiceMosaicRule&&this._defaultServiceMosaicRule.toJSON())};pa._updateMultidimensionalDefinition=function(G){if(!this._isValidCustomizedMosaicRule(this.mosaicRule)){var K=
G.variables[0].dimensions;G=[];for(var ba in K)if(K.hasOwnProperty(ba)){const ea=K[ba],ha=ea.extent;let ia=!0,va=[ha[0]];ea.hasRanges&&!0===ea.hasRanges?(ia=!1,va=[ea.values[0]]):"stdz"===ea.name.toLowerCase()&&Math.abs(ha[1])<=Math.abs(ha[0])&&(va=[ha[1]]);G.push(new d({variableName:"",dimensionName:K[ba].name,isSlice:ia,values:va}))}0<G.length&&(this.mosaicRule=this.mosaicRule||new A,ba=this.mosaicRule.multidimensionalDefinition,!ba||ba&&0>=ba.length)&&(this.mosaicRule.multidimensionalDefinition=
G)}};pa._formatAttributeValue=function(G,K){if("string"===typeof G&&(K=(K=this._getFieldInfo(this.popupTemplate&&this.popupTemplate.fieldInfos,K))&&K.format)){let ba,ea;return-1<G.trim().indexOf(",")?(ba=",",ea=ba+" ",this._formatDelimitedString(G,ba,ea,K)):-1<G.trim().indexOf(" ")?(ba=ea=" ",this._formatDelimitedString(G,ba,ea,K)):this._formatNumberFromString(G,K)}return G};pa._getFieldInfo=function(G,K){if(G&&G.length&&K){var ba=K.toLowerCase(),ea=void 0;G.some(ha=>!ha.fieldName||ha.fieldName.toLowerCase()!==
ba&&ha.fieldName.toLowerCase()!==ba.replace(/ /g,"_")?!1:(ea=ha,!0));return ea}};pa._formatDelimitedString=function(G,K,ba,ea){return G&&K&&ba&&ea?G.trim().split(K).map(ha=>this._formatNumberFromString(ha,ea)).join(ba):G};pa._formatNumberFromString=function(G,K){if(!G||!K)return G;const ba=Number(G);return isNaN(ba)?G:K.format(ba)};pa._processVisibleRastersResponse=function(G,K){K=K||{};const ba=G.value,{templateRRFunctionNames:ea,showNoDataRecords:ha,returnDomainValues:ia,templateFields:va}=K;K=
G.processedValues;var ua=G.catalogItems&&G.catalogItems.features;let ra=G.properties&&G.properties.Values&&G.properties.Values.map(Da=>Da.replace(/ /gi,", "))||[];var ya=this.objectIdField||"ObjectId";G="string"===typeof ba&&-1<ba.toLowerCase().indexOf("nodata");const Ga=[];!ba||ua||G||(ua={},ua[ya]=0,ua=new l(this.fullExtent,null,ua),ra=[ba],ua=[ua]);if(!ua)return[];this._updateResponseFieldNames(ua,va);G&&!ha&&(ua=[]);for(let Da=0;Da<ua.length;Da++){ya=ua[Da];if(null!=ba&&!G){var Ca=ra[Da];var za=
this.renderingRule&&K&&0<K.length&&ea&&0<ea.length&&-1<ea.indexOf(this.renderingRule.functionName)?K[ea.indexOf(this.renderingRule.functionName)]:ba;if("nodata"===Ca.toLowerCase()&&!ha)continue;ya.attributes["Raster.ItemPixelValue"]=this._formatAttributeValue(Ca,"Raster.ItemPixelValue");ya.attributes["Raster.ServicePixelValue"]=this._formatAttributeValue(za,"Raster.ServicePixelValue");this._updateFeatureWithMagDirValues(ya,Ca);var Ea=this.fields&&0<this.fields.length;za=this.renderingRule&&e.isSome(this.serviceRasterInfo)&&
this.serviceRasterInfo.attributeTable?Ea?Ca:ba:za;this.renderingRule||(za=Ea?Ca:ba);this._updateFeatureWithRasterAttributeTableValues(ya,za)}ya.sourceLayer=this;ia&&this._updateFeatureWithDomainValues(ya);if(ea&&K&&ea.length===K.length)for(Ca=0;Ca<ea.length;Ca++)Ea="Raster.ServicePixelValue."+ea[Ca],ya.attributes[Ea]=this._formatAttributeValue(K[Ca],Ea);Ga.push(ua[Da])}return Ga};pa._updateFeatureWithRasterAttributeTableValues=function(G,K){var ba=this.rasterInfo&&this.rasterInfo.attributeTable||
e.isSome(this.serviceRasterInfo)&&this.serviceRasterInfo.attributeTable;const ea=ba&&ba.features;if(ea){ba=ba.fields;var ha=ba.map(ua=>ua.name).filter(ua=>"value"===ua.toLowerCase()),ia=ha&&ha[0];if(ia){var va=ea.filter(ua=>ua.attributes[ia]===(null!=K?parseInt(K,10):null));va&&va[0]&&ba.forEach(ua=>{const ra=this.rasterAttributeTableFieldPrefix+ua.name;G.attributes[ra]=this._formatAttributeValue(va[0].attributes[ua.name],ra)})}}};pa._updateFeatureWithMagDirValues=function(G,K){if("esriImageServiceDataTypeVector-UV"===
this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType){var ba=K.split(/,\s*/).map(ea=>parseFloat(ea));K=ba.map(ea=>[ea]);ba=ba.map(ea=>({minValue:ea,maxValue:ea,noDataValue:null}));K=new P({height:1,width:1,pixelType:"f32",pixels:K,statistics:ba});null!=this.pixelFilter&&this.pixelFilter({pixelBlock:K,extent:new H(0,0,0,0,this.spatialReference)});K="esriImageServiceDataTypeVector-MagDir"===this.serviceDataType?[K.pixels[0][0],K.pixels[1][0]]:S.uvComponentToVector([K.pixels[0][0],
K.pixels[1][0]]);G.attributes["Raster.Magnitude"]=K[0];G.attributes["Raster.Direction"]=K[1]}};pa._updateFeatureWithDomainValues=function(G){const K=this.fields&&this.fields.filter(ba=>ba.domain&&"coded-value"===ba.domain.type);null!=K&&K.forEach(ba=>{const ea=G.attributes[ba.name];if(null!=ea){const ha=ba.domain.codedValues.filter(ia=>ia.code===ea)[0];ha&&(G.attributes[ba.name]=ha.name)}})};pa._updateResponseFieldNames=function(G,K){if(K&&!(1>K.length)){var ba=this.fieldsIndex;e.isSome(ba)&&G.forEach(ea=>
{if(ea&&ea.attributes)for(const ha of K)if(ba.has(ha)){const ia=ba.get(ha).name;ia!==ha&&(ea.attributes[ha]=ea.attributes[ia],delete ea.attributes[ia])}})}};pa._updateRenderingRulesFunctionName=function(G,K){if(G&&!(1>G.length)){if("Raw"===G)return G.replace("Raw","None");var ba=G.toLowerCase().replace(/ /gi,"_");return K.has(ba)?K.get(ba):G}};pa._isRFTJson=function(G){return G.name&&G.arguments&&G.function&&G.hasOwnProperty("functionType")};pa._readCapabilities=function(G){const K=G.capabilities?
G.capabilities.toLowerCase().split(",").map(ya=>ya.trim()):["image","catalog"],{currentVersion:ba,advancedQueryCapabilities:ea,maxRecordCount:ha}=G,ia=-1<K.indexOf("image"),va="esriImageServiceDataTypeElevation"===G.serviceDataType,ua=!!(G.spatialReference||G.extent&&G.extent.spatialReference),ra=K.includes("edit");return{data:{supportsAttachment:!1},operations:{supportsComputeHistograms:ia,supportsExportImage:ia,supportsIdentify:ia,supportsMeasure:-1<K.indexOf("mensuration")&&ua,supportsDownload:-1<
K.indexOf("download"),supportsQuery:-1<K.indexOf("catalog")&&G.fields&&0<G.fields.length,supportsGetSamples:10.2<=ba&&ia,supportsProject:10.3<=ba&&ia,supportsComputeStatisticsHistograms:10.4<=ba&&ia,supportsQueryBoundary:10.6<=ba&&ia,supportsCalculateVolume:10.7<=ba&&va,supportsComputePixelLocation:10.7<=ba&&-1<K.indexOf("catalog"),supportsAdd:ra,supportsDelete:ra,supportsEditing:ra,supportsUpdate:ra,supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsChangeTracking:!1,supportsQueryAttachments:!1,
supportsResizeAttachments:!1,supportsSync:!1,supportsExceedsLimitStatistics:!1},query:{maxRecordCount:ha,maxRecordCountFactor:void 0,supportsStatistics:!(null==ea||!ea.supportsStatistics),supportsOrderBy:!(null==ea||!ea.supportsOrderBy),supportsDistinct:!(null==ea||!ea.supportsDistinct),supportsPagination:!(null==ea||!ea.supportsPagination),supportsStandardizedQueriesOnly:!(null==ea||!ea.useStandardizedQueries),supportsPercentileStatistics:!(null==ea||!ea.supportsPercentileStatistics),supportsCentroid:!(null==
ea||!ea.supportsReturningGeometryCentroid),supportsDistance:!(null==ea||!ea.supportsQueryWithDistance),supportsExtent:!(null==ea||!ea.supportsReturningQueryExtent),supportsGeometryProperties:!(null==ea||!ea.supportsReturningGeometryProperties),supportsHavingClause:!(null==ea||!ea.supportsHavingClause),supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsMaxRecordCountFactor:!1,supportsSqlExpression:!1,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!1,
supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!1,supportsCacheHint:!1,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}}};I._createClass(Qa,[{key:"rasterFunctionNamesIndex",get:function(){const G=new Map;if(!this.rasterFunctionInfos||1>this.rasterFunctionInfos.length)return G;this.rasterFunctionInfos.forEach(K=>{G.set(K.name.toLowerCase().replace(/ /gi,"_"),K.name)});return G}},{key:"fieldsIndex",get:function(){return this.fields?new u(this.fields):null}},
{key:"format",set:function(G){G&&Pa.has(G.toLowerCase())&&this._set("format",G.toLowerCase())}},{key:"mosaicRule",set:function(G){G&&G.mosaicMethod&&(G=A.fromJSON({...G.toJSON(),mosaicMethod:G.mosaicMethod,mosaicOperation:G.mosaicOperation}));this._set("mosaicRule",G)}},{key:"parsedUrl",get:function(){return this.url?D.urlToObject(this.url):null}},{key:"rasterFields",get:function(){const G=this.rasterAttributeTableFieldPrefix||"Raster.";var K=new z({name:"Raster.ItemPixelValue",alias:"Item Pixel Value",
domain:null,editable:!1,length:50,type:"string"});const ba=new z({name:"Raster.ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:"string"}),ea=new z({name:"Raster.ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,editable:!1,length:50,type:"string"});let ha=this.fields?L.clone(this.fields):[];ha.push(ba);this.capabilities.operations.supportsQuery&&this.fields&&0<this.fields.length&&ha.push(K);10.4<=this.version&&this.rasterFunctionInfos&&this.rasterFunctionInfos.some(ia=>
"none"===ia.name.toLowerCase())&&ha.push(ea);this.rasterFunctionInfos&&this.rasterFunctionInfos.filter(ia=>"none"!==ia.name.toLowerCase()).forEach(ia=>{ha.push(new z({name:"Raster.ServicePixelValue."+ia.name,alias:ia.name,domain:null,editable:!1,length:50,type:"string"}))});null==this.pixelFilter||"esriImageServiceDataTypeVector-UV"!==this.serviceDataType&&"esriImageServiceDataTypeVector-MagDir"!==this.serviceDataType||(ha.push(new z({name:"Raster.Magnitude",alias:"Magnitude",domain:null,editable:!1,
type:"double"})),ha.push(new z({name:"Raster.Direction",alias:"Direction",domain:null,editable:!1,type:"double"})));(K=this.rasterInfo.attributeTable&&this.rasterInfo.attributeTable.fields||null)&&0<K.length&&(K=K.filter(ia=>"esriFieldTypeOID"!==ia.type&&"value"!==ia.name.toLowerCase()).map(ia=>{const va=L.clone(ia);va.name=G+ia.name;return va}),ha=ha.concat(K));return ha}},{key:"renderingRule",set:function(G){G&&G.rasterFunction&&(G=r.fromJSON({...G.toJSON(),rasterFunction:G.rasterFunction,rasterFunctionArguments:G.rasterFunctionArguments}));
this._set("renderingRule",G)}}]);return Qa}(la);w.__decorate([b.property()],la.prototype,"_functionRasterInfos",void 0);w.__decorate([b.property()],la.prototype,"_rasterJobHandler",void 0);w.__decorate([b.property()],la.prototype,"_symbolizer",void 0);w.__decorate([b.property({dependsOn:["_serviceSupportsMosaicRule"]})],la.prototype,"_defaultServiceMosaicRule",void 0);w.__decorate([k.reader("_defaultServiceMosaicRule",["defaultMosaicMethod"])],la.prototype,"readDefaultServiceMosaicRule",null);w.__decorate([b.property()],
la.prototype,"_cachedRendererJson",void 0);w.__decorate([b.property({readOnly:!0})],la.prototype,"_serviceSourceType",void 0);w.__decorate([k.reader("_serviceSourceType",["serviceSourceType","fields"])],la.prototype,"readServiceSourceType",null);w.__decorate([b.property({readOnly:!0})],la.prototype,"_serviceSupportsMosaicRule",void 0);w.__decorate([k.reader("_serviceSupportsMosaicRule",["currentVersion","fields"])],la.prototype,"readServiceSupportsMosaicRule",null);w.__decorate([b.property()],la.prototype,
"rasterAttributeTableFieldPrefix",void 0);w.__decorate([b.property({readOnly:!0})],la.prototype,"rasterFunctionNamesIndex",null);w.__decorate([b.property()],la.prototype,"adjustAspectRatio",void 0);w.__decorate([b.property({readOnly:!0}),a.aliasOf("serviceRasterInfo.bandCount")],la.prototype,"bandCount",void 0);w.__decorate([b.property({type:[m.Integer],json:{write:!0}})],la.prototype,"bandIds",void 0);w.__decorate([k.reader("bandIds")],la.prototype,"readBandIds",null);w.__decorate([b.property({readOnly:!0,
json:{read:!1}})],la.prototype,"capabilities",void 0);w.__decorate([k.reader("service","capabilities",["capabilities","currentVersion","serviceDataType"])],la.prototype,"readCapabilities",null);w.__decorate([b.property({type:Number})],la.prototype,"compressionQuality",void 0);w.__decorate([q.writer("compressionQuality")],la.prototype,"writeCompressionQuality",null);w.__decorate([b.property({type:Number})],la.prototype,"compressionTolerance",void 0);w.__decorate([q.writer("compressionTolerance")],
la.prototype,"writeCompressionTolerance",null);w.__decorate([b.property({json:{read:{source:"copyrightText"}}})],la.prototype,"copyright",void 0);w.__decorate([b.property({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],la.prototype,"definitionExpression",void 0);w.__decorate([b.property({readOnly:!0,constructOnly:!0})],la.prototype,"exportImageServiceParameters",void 0);w.__decorate([b.property()],la.prototype,"rasterInfo",void 0);w.__decorate([b.property({readOnly:!0,
type:[z]})],la.prototype,"fields",void 0);w.__decorate([b.property({readOnly:!0})],la.prototype,"fieldsIndex",null);w.__decorate([b.property({type:"png png8 png24 png32 jpg bmp gif jpgpng lerc tiff".split(" "),json:{write:!0}})],la.prototype,"format",null);w.__decorate([k.reader("service","format",["serviceDataType"])],la.prototype,"readFormat",null);w.__decorate([b.property({type:H})],la.prototype,"fullExtent",void 0);w.__decorate([b.property({readOnly:!0})],la.prototype,"hasMultidimensions",void 0);
w.__decorate([b.property({json:{read:{source:"maxImageHeight"}}})],la.prototype,"imageMaxHeight",void 0);w.__decorate([b.property({json:{read:{source:"maxImageWidth"}}})],la.prototype,"imageMaxWidth",void 0);w.__decorate([b.property({type:String,json:{type:E.interpolationKebab.jsonValues,read:E.interpolationKebab.read,write:E.interpolationKebab.write}})],la.prototype,"interpolation",void 0);w.__decorate([b.property()],la.prototype,"minScale",void 0);w.__decorate([k.reader("service","minScale")],la.prototype,
"readMinScale",null);w.__decorate([b.property()],la.prototype,"maxScale",void 0);w.__decorate([k.reader("service","maxScale")],la.prototype,"readMaxScale",null);w.__decorate([b.property({type:A})],la.prototype,"mosaicRule",null);w.__decorate([k.reader("mosaicRule",["mosaicRule","defaultMosaicMethod"])],la.prototype,"readMosaicRule",null);w.__decorate([q.writer("mosaicRule")],la.prototype,"writeMosaicRule",null);w.__decorate([b.property({readOnly:!0}),a.aliasOf("serviceRasterInfo.multidimensionalInfo")],
la.prototype,"multidimensionalInfo",void 0);w.__decorate([b.property({json:{type:m.Integer}})],la.prototype,"noData",void 0);w.__decorate([q.writer("noData")],la.prototype,"writeNoData",null);w.__decorate([b.property({type:String,json:{type:E.noDataInterpretationKebab.jsonValues,read:E.noDataInterpretationKebab.read,write:E.noDataInterpretationKebab.write}})],la.prototype,"noDataInterpretation",void 0);w.__decorate([b.property({type:String,readOnly:!0,json:{read:{source:["fields"]}}})],la.prototype,
"objectIdField",void 0);w.__decorate([k.reader("objectIdField")],la.prototype,"readObjectIdField",null);w.__decorate([b.property({})],la.prototype,"geometryType",void 0);w.__decorate([b.property({})],la.prototype,"typeIdField",void 0);w.__decorate([b.property({})],la.prototype,"types",void 0);w.__decorate([b.property({readOnly:!0})],la.prototype,"parsedUrl",null);w.__decorate([b.property({readOnly:!0}),a.aliasOf("serviceRasterInfo.pixelSize.x")],la.prototype,"pixelSizeX",void 0);w.__decorate([b.property({readOnly:!0}),
a.aliasOf("serviceRasterInfo.pixelSize.y")],la.prototype,"pixelSizeY",void 0);w.__decorate([b.property({type:Function})],la.prototype,"pixelFilter",void 0);w.__decorate([b.property()],la.prototype,"raster",void 0);w.__decorate([b.property()],la.prototype,"viewId",void 0);w.__decorate([b.property({types:U.rasterRendererTypes,json:{name:"layerDefinition.drawingInfo.renderer",origins:{"web-scene":{types:U.websceneRasterRendererTypes,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy(Ka){return{enabled:Ka&&
"vector-field"!==Ka.type}}}}}}})],la.prototype,"renderer",void 0);w.__decorate([k.reader("renderer")],la.prototype,"readRenderer",null);w.__decorate([q.writer("renderer")],la.prototype,"writeRenderer",null);w.__decorate([b.property(h.opacity)],la.prototype,"opacity",void 0);w.__decorate([b.property({readOnly:!0}),a.aliasOf("serviceRasterInfo.attributeTable")],la.prototype,"rasterAttributeTable",void 0);w.__decorate([b.property({readOnly:!0})],la.prototype,"rasterFields",null);w.__decorate([b.property({readOnly:!0})],
la.prototype,"rasterFunctionInfos",void 0);w.__decorate([b.property({type:r})],la.prototype,"renderingRule",null);w.__decorate([k.reader("renderingRule",["renderingRule","rasterFunctionInfos"])],la.prototype,"readRenderingRule",null);w.__decorate([q.writer("renderingRule")],la.prototype,"writeRenderingRule",null);w.__decorate([b.property()],la.prototype,"serviceDataType",void 0);w.__decorate([b.property({readOnly:!0,type:Fa})],la.prototype,"spatialReference",void 0);w.__decorate([k.reader("spatialReference",
["spatialReference","extent"])],la.prototype,"readSpatialReference",null);w.__decorate([b.property({json:{type:La.jsonValues}})],la.prototype,"pixelType",void 0);w.__decorate([k.reader("pixelType")],la.prototype,"readPixelType",null);w.__decorate([q.writer("pixelType")],la.prototype,"writePixelType",null);w.__decorate([b.property({constructOnly:!0,type:n})],la.prototype,"serviceRasterInfo",void 0);w.__decorate([b.property()],la.prototype,"sourceJSON",void 0);w.__decorate([b.property(h.url)],la.prototype,
"url",void 0);w.__decorate([b.property({readOnly:!0})],la.prototype,"version",void 0);w.__decorate([k.reader("version",["currentVersion","fields","timeInfo"])],la.prototype,"readVersion",null);return la=w.__decorate([t.subclass("esri.layers.mixins.ArcGISImageService")],la)};Object.defineProperty(W,"__esModule",{value:!0})})},"esri/rasterRenderers":function(){define("exports ./core/Warning ./renderers/ClassBreaksRenderer ./renderers/RasterColormapRenderer ./renderers/RasterShadedReliefRenderer ./renderers/RasterStretchRenderer ./renderers/UniqueValueRenderer ./renderers/VectorFieldRenderer".split(" "),
function(W,I,w,N,l,U,V,Y){function M(y,D){if(!y)return null;if("classBreaks"===y.type&&y.classificationMethod){var a=y.authoringInfo||{classificationMethod:""};a.classificationMethod=y.classificationMethod;y.authoringInfo=a}a=y?e[y.type]||null:null;if(a)return a=new a,a.read(y,D),a;D&&D.messages&&y&&D.messages.push(new I("renderer:unsupported","Renderers of type '"+(y.type||"unknown")+"' are not supported",{definition:y,context:D}));return null}const L={key:"type",base:null,typeMap:{"unique-value":V,
"class-breaks":w,"raster-colormap":N,"raster-stretch":U,"vector-field":Y,"raster-shaded-relief":l}},C={...L,typeMap:{...L.typeMap}};delete C.typeMap["vector-field"];const e={uniqueValue:V,classBreaks:w,rasterStretch:U,rasterColormap:N,vectorField:Y,rasterShadedRelief:l};W.ClassBreaksRenderer=w;W.RasterColormapRenderer=N;W.RasterShadedReliefRenderer=l;W.RasterStretchRenderer=U;W.UniqueValueRenderer=V;W.VectorFieldRenderer=Y;W.fromJSON=function(y,D){return M(y,D)};W.rasterRendererTypes=L;W.read=M;W.websceneRasterRendererTypes=
C;Object.defineProperty(W,"__esModule",{value:!0})})},"esri/renderers/RasterColormapRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./support/ColormapInfo ./support/colorRampUtils".split(" "),function(W,I,w,N,l,U,V,Y,M,L,C){var e;w=e=function(y){function D(m){m=
y.call(this,m)||this;m.colormapInfos=null;m.type="raster-colormap";return m}W._inheritsLoose(D,y);D.createFromColormap=function(m,c){if(!m)return null;const b=5===m[0].length;m=[...m].sort(k=>k[0][0]-k[1][0]).map(k=>{var t;return L.fromJSON({value:k[0],color:b?k.slice(1,5):k.slice(1,4).concat([255]),label:c?null!=(t=c[k[0]])?t:"":k[0]})});return new e({colormapInfos:m})};D.createFromColorramp=function(m){m=C.convertColorRampToColormap(m,256);return e.createFromColormap(m)};var a=D.prototype;a.clone=
function(){return new e({colormapInfos:this.colormapInfos.map(m=>m.toJSON())})};a.extractColormap=function(){return this.colormapInfos.map(m=>[m.value,m.color.r,m.color.g,m.color.b,1<m.color.a?m.color.a:255*m.color.a&255]).sort((m,c)=>m[0]-c[0])};return D}(w.JSONSupport);I.__decorate([N.property({type:[L],json:{write:!0}})],w.prototype,"colormapInfos",void 0);I.__decorate([Y.enumeration({rasterColormap:"raster-colormap"})],w.prototype,"type",void 0);return w=e=I.__decorate([M.subclass("esri.renderers.RasterColormapRenderer")],
w)})},"esri/renderers/support/ColormapInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),function(W,I,w,N,l,U,V,Y,M){N=function(L){function C(){var e=L.apply(this,arguments)||this;e.value=null;e.label=null;e.color=null;return e}W._inheritsLoose(C,L);return C}(N.JSONSupport);
I.__decorate([l.property({type:Number,json:{write:!0}})],N.prototype,"value",void 0);I.__decorate([l.property({type:String,json:{write:!0}})],N.prototype,"label",void 0);I.__decorate([l.property({type:w,json:{type:[V.Integer],write:!0}})],N.prototype,"color",void 0);return N=I.__decorate([M.subclass("esri.renderers.support.ColormapInfo")],N)})},"esri/renderers/support/colorRampUtils":function(){define(["exports","../../Color","../../core/colorUtils"],function(W,I,w){function N(Y,M){if(!Y||!M||Y.length!==
M.length)return!1;for(let L=0;L<Y.length;L++)if(Y[L]>M[L]+2||Y[L]<M[L]-2)return!1;return!0}function l(Y,M){if(Y){M=M?M:U;var L=null,C;"algorithmic"===Y.type?M.some(e=>{if(N(Y.fromColor.toRgb(),e.fromColor)&&N(Y.toColor.toRgb(),e.toColor))return L=e.id,!0}):"multipart"===Y.type&&M.some(e=>{if(Y.colorRamps&&e.colorRamps&&Y.colorRamps.length===e.colorRamps.length&&(C=Y.colorRamps,!e.colorRamps.some((y,D)=>{if(!N(C[D].fromColor.toRgb(),(new I(y.fromColor)).toRgb())||!N(C[D].toColor.toRgb(),(new I(y.toColor)).toRgb()))return!0}))){if(L)return!0;
L=e.id}});return L}}const U=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",
fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,
85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",
type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",
type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,
255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,
102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},
{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,
63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},
{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],
toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",
fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,
53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",
type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},
{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",
colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,
167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],V={aspect_predefined:"Aspect",
blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",blueLightToDark_predefined:"Blue Light to Dark",blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",brownLightToDark_predefined:"Brown Light to Dark",brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",
conditionNumber_predefined:"Condition Number",cyanToPurple_predefined:"Cyan to Purple",cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",elevation2_predefined:"Elevation #2",errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",
partialSpectrum_predefined:"Partial Spectrum",partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",precipitation_predefined:"Precipitation",prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",
purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",purpleRedBright_predefined:"Purple-Red Bright",purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",redLightToDark_predefined:"Red Light to Dark",redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",
redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",spectrumFullBright_predefined:"Spectrum-Full Bright",spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",surface_predefined:"Surface",temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",
yellowToRed_predefined:"Yellow to Red",yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"};W.PREDEFINED_COLOR_RAMP_NAME_MAP=V;W.PREDEFINED_JSON_COLOR_RAMPS=U;W.convertColorRampToColormap=function(Y,M,L=!1){if(Y&&M&&!(1>M)){var C="toJSON"in Y?Y.toJSON():Y,e="multipart"===C.type?C.colorRamps.length:1;Y=[];var y=[],D,a,m,c=0;if(1===M){var b="multipart"===C.type?C.colorRamps[0].fromColor:C.fromColor;y.push([0].concat(b));return y}for(let t=
0;t<e;t++)Y[t]={start:null,end:null},Y[t].start=c,Y[t].end=c+1/e,c=Y[t].end;for(let t=0;t<M;t++){var k=t/(M-1);Y.forEach((q,h)=>{if(k>=q.start&&(k<q.end||t===M-1&&h===e-1)){m=(k-q.start)/(q.end-q.start);"multipart"===C.type?(b=C.colorRamps[h].fromColor,D=C.colorRamps[h].toColor):(b=C.fromColor,D=C.toColor);if(0===t)y.push([t].concat(b.slice(0,3)));else if(t===M-1)y.push([t].concat(D.slice(0,3)));else{var d={r:D[0],g:D[1],b:D[2]};q=m;h=w.toLAB({r:b[0],g:b[1],b:b[2]});d=w.toLAB(d);a=w.toRGB({l:h.l*
(1-q)+q*d.l,a:h.a*(1-q)+q*d.a,b:h.b*(1-q)+q*d.b});y.push([t,a.r,a.g,a.b])}q=null!=b[3]?1<b[3]?b[3]/255:b[3]:1;h=null!=D[3]?1<D[3]?D[3]/255:D[3]:1;L&&y[t].push(Math.min(255,Math.round(255*(q*(1-m)+h*m))))}})}return y}};W.getColorRampId=l;W.getColorRampName=function(Y){return(Y=l(Y))?V[Y]:null};Object.defineProperty(W,"__esModule",{value:!0})})},"esri/core/colorUtils":function(){define(["exports"],function(W){function I(L,C){const e=[];let y,D;if(L[0].length!==C.length)throw"dimensions do not match";
const a=L.length,m=L[0].length;let c=0;for(y=0;y<a;y++){for(D=c=0;D<m;D++)c+=L[y][D]*C[D];e.push(c)}return e}function w(L){L=[L.r/255,L.g/255,L.b/255].map(C=>.04045>=C?C/12.92:((C+.055)/1.055)**2.4);L=I(Y,L);return{x:100*L[0],y:100*L[1],z:100*L[2]}}function N(L){L=I(M,[L.x/100,L.y/100,L.z/100]).map(C=>Math.min(1,Math.max(.0031308>=C?12.92*C:1.055*C**(1/2.4)-.055,0)));return{r:Math.round(255*L[0]),g:Math.round(255*L[1]),b:Math.round(255*L[2])}}function l(L){L=[L.x/95.047,L.y/100,L.z/108.883].map(C=>
C>(6/29)**3?C**(1/3):1/3*(29/6)**2*C+4/29);return{l:116*L[1]-16,a:500*(L[0]-L[1]),b:200*(L[1]-L[2])}}function U(L){const C=L.l;L=[(C+16)/116+L.a/500,(C+16)/116,(C+16)/116-L.b/200].map(e=>e>6/29?e**3:3*(6/29)**2*(e-4/29));return{x:95.047*L[0],y:100*L[1],z:108.883*L[2]}}function V(L){if("r"in L&&"g"in L&&"b"in L)return L;if("l"in L&&"c"in L&&"h"in L){var C=L.c;var e=L.h;C={l:L.l,a:C*Math.cos(e),b:C*Math.sin(e)};return N(U(C))}if("l"in L&&"a"in L&&"b"in L)return N(U(L));if("x"in L&&"y"in L&&"z"in L)return N(L);
if("h"in L&&"s"in L&&"v"in L){{e=(L.h+360)%360/60;C=L.v/100*255;L=L.s/100*C;const y=L*(1-Math.abs(e%2-1));switch(Math.floor(e)){case 0:e={r:L,g:y,b:0};break;case 1:e={r:y,g:L,b:0};break;case 2:e={r:0,g:L,b:y};break;case 3:e={r:0,g:y,b:L};break;case 4:e={r:y,g:0,b:L};break;case 5:case 6:e={r:L,g:0,b:y};break;default:e={r:0,g:0,b:0}}e.r=Math.round(e.r+C-L);e.g=Math.round(e.g+C-L);e.b=Math.round(e.b+C-L);C=e}return C}return L}const Y=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],M=[[3.2406,
-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];W.darken=function(L,C){L=l(w(L));L.l*=1-C;return N(U(L))};W.toHSV=function(L){if("h"in L&&"s"in L&&"v"in L)return L;var C=V(L);{L=C.r;const e=C.g,y=C.b;C=Math.max(L,e,y);const D=C-Math.min(L,e,y);L=0===D?0:C===L?(e-y)/D%6:C===e?(y-L)/D+2:(L-e)/D+4;0>L&&(L+=6);L={h:60*L,s:100*(0===D?0:D/C),v:100/255*C}}return L};W.toLAB=function(L){return"l"in L&&"a"in L&&"b"in L?L:l(w(V(L)))};W.toLCH=function(L){if(!("l"in L&&"c"in L&&"h"in L)){{var C=l(w(V(L)));
L=C.l;var e=C.a;const y=C.b;C=Math.sqrt(e*e+y*y);e=Math.atan2(y,e);e=0<e?e:e+2*Math.PI;L={l:L,c:C,h:e}}}return L};W.toRGB=V;W.toXYZ=function(L){return"x"in L&&"y"in L&&"z"in L?L:w(V(L))};Object.defineProperty(W,"__esModule",{value:!0})})},"esri/renderers/RasterShadedReliefRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../rest/support/colorRamps".split(" "),
function(W,I,w,N,l,U,V,Y,M,L,C,e){var y;w=y=function(D){function a(c){c=D.call(this,c)||this;c.altitude=45;c.azimuth=315;c.colorRamp=null;c.hillshadeType="multi-directional";c.pixelSizePower=.664;c.pixelSizeFactor=.024;c.scalingType="none";c.type="raster-shaded-relief";c.zFactor=1;return c}W._inheritsLoose(a,D);var m=a.prototype;m.readColorRamp=function(c){return e.fromJSON(c)};m.clone=function(){return new y({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,
scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,colorRamp:N.clone(this.colorRamp)})};return a}(w.JSONSupport);I.__decorate([l.property({type:Number,json:{write:!0}})],w.prototype,"altitude",void 0);I.__decorate([l.property({type:Number,json:{write:!0}})],w.prototype,"azimuth",void 0);I.__decorate([l.property({types:e.types,json:{write:!0}})],w.prototype,"colorRamp",void 0);I.__decorate([L.reader("colorRamp")],w.prototype,"readColorRamp",null);I.__decorate([l.property({type:["traditional",
"multi-directional"],json:{write:!0}})],w.prototype,"hillshadeType",void 0);I.__decorate([l.property({type:Number,json:{write:!0}})],w.prototype,"pixelSizePower",void 0);I.__decorate([l.property({type:Number,json:{write:!0}})],w.prototype,"pixelSizeFactor",void 0);I.__decorate([l.property({type:["none","adjusted"],json:{write:!0}})],w.prototype,"scalingType",void 0);I.__decorate([M.enumeration({rasterShadedRelief:"raster-shaded-relief"})],w.prototype,"type",void 0);I.__decorate([l.property({type:Number,
json:{write:!0}})],w.prototype,"zFactor",void 0);return w=y=I.__decorate([C.subclass("esri.renderers.RasterShadedReliefRenderer")],w)})},"esri/renderers/RasterStretchRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./support/stretchRendererUtils ../rest/support/colorRamps".split(" "),
function(W,I,w,N,l,U,V,Y,M,L,C,e,y,D){var a;w=a=function(m){function c(k){k=m.call(this,k)||this;k.colorRamp=null;k.computeGamma=!1;k.dynamicRangeAdjustment=!1;k.gamma=[];k.maxPercent=null;k.minPercent=null;k.numberOfStandardDeviations=null;k.outputMax=null;k.outputMin=null;k.sigmoidStrengthLevel=null;k.statistics=[];k.histograms=null;k.useGamma=!1;k.stretchType="none";k.type="raster-stretch";return k}W._inheritsLoose(c,m);var b=c.prototype;b.readColorRamp=function(k){if(k)return D.fromJSON(k)};b.writeStatistics=
function(k,t,q){var h;null!=(h=k)&&h.length&&(Array.isArray(k[0])||(k=k.map(d=>[d.min,d.max,d.avg,d.stddev])),t[q]=k)};b.readStretchType=function(k,t){k=t.stretchType;"number"===typeof k&&(k=y.stretchTypeFunctionEnum[k]);return y.stretchTypeJSONDict.read(k)};b.clone=function(){return new a({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:N.clone(this.statistics),gamma:N.clone(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,
numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:N.clone(this.colorRamp),histograms:N.clone(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})};return c}(w.JSONSupport);I.__decorate([l.property({types:D.types,json:{write:!0}})],w.prototype,"colorRamp",void 0);I.__decorate([L.reader("colorRamp")],w.prototype,"readColorRamp",null);I.__decorate([l.property({type:Boolean,json:{write:!0}})],w.prototype,"computeGamma",
void 0);I.__decorate([l.property({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],w.prototype,"dynamicRangeAdjustment",void 0);I.__decorate([l.property({type:[Number],json:{write:!0}})],w.prototype,"gamma",void 0);I.__decorate([l.property({type:Number,json:{write:!0}})],w.prototype,"maxPercent",void 0);I.__decorate([l.property({type:Number,json:{write:!0}})],w.prototype,"minPercent",void 0);I.__decorate([l.property({type:Number,json:{write:!0}})],w.prototype,"numberOfStandardDeviations",
void 0);I.__decorate([l.property({type:Number,json:{read:{source:"max"},write:{target:"max"}}})],w.prototype,"outputMax",void 0);I.__decorate([l.property({type:Number,json:{read:{source:"min"},write:{target:"min"}}})],w.prototype,"outputMin",void 0);I.__decorate([l.property({type:Number,json:{write:!0}})],w.prototype,"sigmoidStrengthLevel",void 0);I.__decorate([l.property({json:{type:[[Number]],write:!0}})],w.prototype,"statistics",void 0);I.__decorate([l.property()],w.prototype,"histograms",void 0);
I.__decorate([e.writer("statistics")],w.prototype,"writeStatistics",null);I.__decorate([l.property({type:Boolean,json:{write:!0}})],w.prototype,"useGamma",void 0);I.__decorate([l.property({type:y.stretchTypeJSONDict.apiValues,json:{type:y.stretchTypeJSONDict.jsonValues,write:y.stretchTypeJSONDict.write}})],w.prototype,"stretchType",void 0);I.__decorate([L.reader("stretchType",["stretchType"])],w.prototype,"readStretchType",null);I.__decorate([M.enumeration({rasterStretch:"raster-stretch"})],w.prototype,
"type",void 0);return w=a=I.__decorate([C.subclass("esri.renderers.RasterStretchRenderer")],w)})},"esri/renderers/support/stretchRendererUtils":function(){define(["exports","../../core/jsonMap"],function(W,I){I=new I.JSONMap({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"});W.stretchTypeFunctionEnum={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"};
W.stretchTypeJSONDict=I;Object.defineProperty(W,"__esModule",{value:!0})})},"esri/renderers/VectorFieldRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../geometry ../Graphic ../symbols ../core/jsonMap ../core/JSONSupport ../core/lang ../core/maybe ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/support/normalizeUtils ../layers/support/rasterFunctions/vectorFieldUtils ./ClassBreaksRenderer ./mixins/VisualVariablesMixin ./support/ClassBreakInfo ./visualVariables/RotationVariable ./visualVariables/SizeVariable ./visualVariables/support/visualVariableUtils ../symbols/SimpleLineSymbol ../symbols/SimpleMarkerSymbol ../symbols/support/utils ../symbols/PictureMarkerSymbol ../geometry/Point".split(" "),
function(W,I,w,N,l,U,V,Y,M,L,C,e,y,D,a,m,c,b,k,t,q,h,d,p,z,u,v,A,P,E){var r;const n=new Set(["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"]);N=new V.JSONMap({beaufort_ft:"beaufort-ft",beaufort_km:"beaufort-km",beaufort_kn:"beaufort-kn",beaufort_m:"beaufort-m",beaufort_mi:"beaufort-mi",classified_arrow:"classified-arrow",ocean_current_kn:"ocean-current-kn",ocean_current_m:"ocean-current-m",simple_scalar:"simple-scalar",single_arrow:"single-arrow",
wind_speed:"wind-barb"});V=new V.JSONMap({flow_from:"flow-from",flow_to:"flow-to"});Y=r=function(x){function B(f){f=x.call(this,f)||this;f.attributeField="Magnitude";f.flowRepresentation="flow-from";f.rotationType="arithmetic";f.style="single-arrow";f.symbolTileSize=50;f.type="vector-field";return f}W._inheritsLoose(B,x);var S=B.prototype;S.readInputUnit=function(f,g){return n.has(f)?k.unitKebabDict.fromJSON(f):null};S.readOutputUnit=function(f,g){return n.has(f)?k.unitKebabDict.fromJSON(f):null};
S.clone=function(){return new r({attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,symbolTileSize:this.symbolTileSize,style:this.style,visualVariables:M.clone(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})};S.getGraphicsFromPixelData=function(){var f=W._asyncToGenerator(function*(g,F=!1,R=[]){const Q=[];var X=k.getUnitConversionFactor(this.inputUnit,this.outputUnit);F=F?k.convertVectorFieldData(g.pixelBlock,"vector-uv",
this.rotationType,X):k.convertVectorFieldUnit(g.pixelBlock,"vector-magdir",X);if(L.isNone(F))return Q;g=g.extent;X=F.mask&&0<F.mask.length;let aa=0;const H=(g.xmax-g.xmin)/F.width,J=(g.ymax-g.ymin)/F.height;for(let O=0;O<F.height;O++)for(let Z=0;Z<F.width;Z++,aa++){let ca=new E({x:g.xmin+Z*H+H/2,y:g.ymax-O*J-J/2,spatialReference:g.spatialReference});ca=(yield b.normalizeCentralMeridian(ca))[0];var T=R.some(da=>da.intersects(ca));X&&!F.mask[aa]||T||(T=new l({geometry:{type:"point",x:ca.x,y:ca.y,spatialReference:g.spatialReference},
attributes:{Magnitude:F.pixels[0][aa],Direction:F.pixels[1][aa]}}),T.symbol=this._getVisualVariablesAppliedSymbol(T),Q.push(T))}return Q});return function(g){return f.apply(this,arguments)}}();S.getSymbol=function(f,g){};S.getSymbolAsync=function(){var f=W._asyncToGenerator(function*(g,F){});return function(g,F){return f.apply(this,arguments)}}();S.getSymbols=function(){return[]};S.getClassBreakInfos=function(){var f;return null==(f=this.styleRenderer)?void 0:f.classBreakInfos};S.getDefaultSymbol=
function(){var f;return null==(f=this.styleRenderer)?void 0:f.defaultSymbol};S._getDefaultSymbol=function(f){return new v({path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z",outline:new u({width:0}),size:20,color:f||new w([0,92,230])})};S._getVisualVariablesAppliedSymbol=function(f){if(f){var g=this.styleRenderer&&this.styleRenderer.getSymbol(f);g=g.clone();var F=this.sizeVariables,R=this.rotationVariables;F&&F.length&&this.sizeVariables.forEach(Q=>A.applySizesToSymbol(g,z.getAllSizes([Q],f)));R&&
R.length&&(F=f.attributes.Direction,f.attributes.Direction="flow-from"===this.flowRepresentation?F:F+180,this.rotationVariables.forEach(Q=>A.applyRotationToSymbol(g,z.getRotationAngle(Q,f),Q.axis)));return g}};S._createStyleRenderer=function(f){let g={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(f){case "single-arrow":g=this._createSingleArrowRenderer();break;case "beaufort-kn":g=this._createBeaufortKnotsRenderer();break;case "beaufort-m":g=this._createBeaufortMeterRenderer();
break;case "beaufort-ft":g=this._createBeaufortFeetRenderer();break;case "beaufort-mi":g=this._createBeaufortMilesRenderer();break;case "beaufort-km":g=this._createBeaufortKilometersRenderer();break;case "ocean-current-m":g=this._createCurrentMeterRenderer();break;case "ocean-current-kn":g=this._createCurrentKnotsRenderer();break;case "simple-scalar":g=this._createSimpleScalarRenderer();break;case "wind-barb":g=this._createWindBarbsRenderer();break;case "classified-arrow":g=this._createClassifiedArrowRenderer()}return new t(g)};
S._createSingleArrowRenderer=function(){return{defaultSymbol:this._getDefaultSymbol()}};S._createBeaufortKnotsRenderer=function(){const f=this._getDefaultSymbol(new w([214,47,39])),g=this._getClassBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]]);return{defaultSymbol:f,classBreakInfos:g}};S._createBeaufortMeterRenderer=function(){const f=this._getDefaultSymbol(new w([214,
47,39])),g=this._getClassBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:f,classBreakInfos:g}};S._createBeaufortFeetRenderer=function(){const f=this._getDefaultSymbol(new w([214,47,39]));var g=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];g=g.map(F=>3.28084*F);g=this._getClassBreaks(g,[[69,
117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:f,classBreakInfos:g}};S._createBeaufortMilesRenderer=function(){const f=this._getDefaultSymbol(new w([214,47,39]));var g=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];g=g.map(F=>2.23694*F);g=this._getClassBreaks(g,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],
[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:f,classBreakInfos:g}};S._createBeaufortKilometersRenderer=function(){const f=this._getDefaultSymbol(new w([214,47,39]));var g=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];g=g.map(F=>3.6*F);g=this._getClassBreaks(g,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:f,
classBreakInfos:g}};S._createCurrentMeterRenderer=function(){const f=this._getDefaultSymbol(new w([177,177,177])),g=this._getClassBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]]);return{defaultSymbol:f,classBreakInfos:g}};S._createCurrentKnotsRenderer=function(){const f=this._getDefaultSymbol(new w([177,177,177])),g=this._getClassBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]]);
return{defaultSymbol:f,classBreakInfos:g}};S._createClassifiedArrowRenderer=function(){var f;const g=this._getDefaultSymbol(new w([56,168,0]));var F=[0,1E-6,3.5,7,10.5,14];if(null!=(f=this.sizeVariables)&&f.length){const R=this.sizeVariables[0].minDataValue;f=this.sizeVariables[0].maxDataValue;if(R&&f){const Q=(f-R)/5;F=Array.from(Array(6).keys()).map(X=>R+Q*X)}}F=this._getClassBreaks(F,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]]);return{defaultSymbol:g,classBreakInfos:F}};S._createSimpleScalarRenderer=
function(){return{defaultSymbol:P.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII\x3d",
height:20,width:20,type:"esriPMS",angle:0})}};S._createWindBarbsRenderer=function(){const f=Array.from(Array(31).keys()).map(Q=>5*Q),g=[{range:"0-5",path:"M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"5-10",path:"M25 0 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"10-15",path:"M25 0 L25 40 L10 45 L25 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"15-20",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"20-25",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"25-30",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"30-35",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"35-40",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"40-45",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"45-50",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"50-55",path:"M25 0 L25 40 L10 40 L25 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"55-60",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"60-65",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"65-70",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"70-75",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"75-80",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"80-85",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"85-90",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"90-95",
path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"95-100",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"100-105",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"105-110",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"110-115",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"115-120",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"120-125",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"125-130",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"130-135",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"135-140",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"140-145",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"145-150",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"}],F=P.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC",
height:20,width:20,type:"esriPMS",angle:0}),R=f.map((Q,X)=>{if(X!==f.length-1)if(0===X)var aa={minValue:Q,maxValue:f[X+1],symbol:F};else aa=P.fromJSON({type:"esriPMS",imageData:g[X].imageData,contentType:"image/svg+xml",height:32,width:32,angle:0}),aa={minValue:Q,maxValue:f[X+1],symbol:aa};return new h(aa)});return{defaultSymbol:F,classBreakInfos:R}};S._getClassBreaks=function(f,g){return g.map((F,R)=>new h({minValue:f[R],maxValue:f[R+1],symbol:this._getDefaultSymbol(new w(F))}))};W._createClass(B,
[{key:"styleRenderer",get:function(){const f=this.attributeField,g=this._createStyleRenderer(this.style);g.field=f;return g}},{key:"sizeVariables",get:function(){const f=[];if(this.visualVariables)for(var g of this.visualVariables)"size"===g.type&&f.push(g);0===f.length&&(g=new p({field:"Magnitude",minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize}),this.visualVariables?this.visualVariables.push(g):this._set("visualVariables",[g]),f.push(g));return f}},{key:"rotationVariables",get:function(){const f=
[];if(this.visualVariables)for(var g of this.visualVariables)"rotation"===g.type&&f.push(g);0===f.length&&(g=new d({field:"Direction",rotationType:this.rotationType}),this.visualVariables?this.visualVariables.push(g):this._set("visualVariables",[g]),f.push(g));return f}}]);return B}(q.VisualVariablesMixin(Y.JSONSupport));I.__decorate([C.property({type:String,json:{write:!0}})],Y.prototype,"attributeField",void 0);I.__decorate([C.property({type:V.apiValues,json:{type:V.jsonValues,read:{reader:V.read},
write:{writer:V.write}}})],Y.prototype,"flowRepresentation",void 0);I.__decorate([C.property({type:["geographic","arithmetic"],json:{write:!0}})],Y.prototype,"rotationType",void 0);I.__decorate([C.property({type:N.apiValues,json:{type:N.jsonValues,read:{reader:N.read},write:{writer:N.write}}})],Y.prototype,"style",void 0);I.__decorate([C.property({json:{write:!0}})],Y.prototype,"symbolTileSize",void 0);I.__decorate([C.property({type:k.unitKebabDict.apiValues,json:{type:k.unitKebabDict.jsonValues,
write:{writer:k.unitKebabDict.write}}})],Y.prototype,"inputUnit",void 0);I.__decorate([m.reader("inputUnit")],Y.prototype,"readInputUnit",null);I.__decorate([C.property({type:k.unitKebabDict.apiValues,json:{type:k.unitKebabDict.jsonValues,read:{reader:k.unitKebabDict.read},write:{writer:k.unitKebabDict.write}}})],Y.prototype,"outputUnit",void 0);I.__decorate([m.reader("outputUnit")],Y.prototype,"readOutputUnit",null);I.__decorate([a.enumeration({vectorField:"vector-field"})],Y.prototype,"type",void 0);
I.__decorate([C.property({type:t})],Y.prototype,"styleRenderer",null);I.__decorate([C.property({type:p})],Y.prototype,"sizeVariables",null);I.__decorate([C.property({type:d})],Y.prototype,"rotationVariables",null);return Y=r=I.__decorate([c.subclass("esri.renderers.VectorFieldRenderer")],Y)})},"esri/layers/support/rasterFunctions/vectorFieldUtils":function(){define(["exports","../../../core/jsonMap","../../../core/maybe","../PixelBlock","./pixelUtils"],function(W,I,w,N,l){function U(d,p){return a.get(d)/
a.get(p)||1}function V(d,p="geographic"){const [z,u]=d;d=Math.sqrt(z*z+u*u);let v=Math.atan2(u,z)*m;v=(360+v)%360;"geographic"===p&&(v=(450-v)%360);return[d,v]}function Y(d,p="geographic"){let z=d[1];"geographic"===p&&(z=(450-z)%360);z%=360;d=d[0];return[d*Math.cos(z/m),d*Math.sin(z/m)]}function M(d=0,p=Math.PI,z=!0){z&&(p=(2*Math.PI-p)%(2*Math.PI));var u=z?-1:1;z=5*u;const v=20*u,A=25*u;u*=2;let [P,E]=[5,0-v],[r,n]=[P+2,E],[x,B]=[r-0,n+u],[S,f]=[-5,0-A],[g,F]=[S+0,f-u];d=Math.ceil(d/5);let R=Math.floor(d/
10);d-=8*R;const Q=[],X=[];for(let fa=0;fa<d/2;fa++,R--){0>=R&&1===d%2&&fa===(d-1)/2&&(S=0,g=S+0,f=(f+E)/2,F=f-u);const [ka,oa]=L(S,f,p,45);if(0<R){const [qa,ta]=L(r,f,p,45),[ma,sa]=L(P,E,p,45);Q.push(qa);Q.push(ta);Q.push(ka);Q.push(oa);Q.push(ma);Q.push(sa)}else{const [qa,ta]=L(r,n,p,45),[ma,sa]=L(x,B,p,45),[na,ja]=L(g,F,p,45);X.push(ka);X.push(oa);X.push(na);X.push(ja);X.push(ma);X.push(sa);X.push(qa);X.push(ta)}f+=z;E+=z;n+=z;B+=z;F+=z}const [aa,H]=L(5,0+v,p,45),[J,T]=L(7,0+v,p,45),[O,Z]=L(5,
0-A,p,45),[ca,da]=L(7,0-A,p,45);return{pennants:Q,barbs:X,shaft:[aa,H,J,T,O,Z,ca,da]}}function L(d,p,z,u=1){return[Math.sqrt(d*d+p*p)/u,(2*Math.PI+(2*Math.PI+Math.atan2(p,d))%(2*Math.PI)-z)%(2*Math.PI)]}function C(d,p,z,u){z=U(u||"knots",z);for(u=1;u<p.length;u++)if(u===p.length-1){if(d<p[u]*z)break}else if(d<=p[u]*z)break;return Math.min(u-1,p.length-2)}function e(d,p,z,u,v){let A=0;switch(p){case "beaufort_kn":A=C(d,k,"knots",z);break;case "beaufort_km":A=C(d,k,"kilometer-per-hour",z);break;case "beaufort_ft":A=
C(d,k,"feet-per-second",z);break;case "beaufort_m":A=C(d,k,"meter-per-second",z);break;case "classified_arrow":A=C(d,v,u,z);break;case "ocean_current_m":A=C(d,t,"meter-per-second",z);break;case "ocean_current_kn":A=C(d,q,"knots",z)}return A}function y(d,p){const {style:z,inputUnit:u,outputUnit:v,breakValues:A}=p;p=c.fromJSON(u);const P=c.fromJSON(v);let E=0,r=0;const {width:n,height:x,mask:B}=d,S=d.pixels[0];d=d.pixels[1];var f=B?B.filter(Q=>0<Q).length:n*x;const g=new Float32Array(42*f);f=new Uint32Array(15*
f);for(let Q=0;Q<x;Q++)for(let X=0;X<n;X++){var F=Q*n+X;if(!B||B[Q*n+X]){var R;const aa=null!=(R=(d[F]+360)%360/180*Math.PI)?R:2*Math.PI*Math.random(),H=e(S[F],z,p,P,A);for(let J=0;J<b.length;J+=2)g[E++]=(X+.5)/n,g[E++]=(Q+.5)/x,g[E++]=b[J],g[E++]=b[J+1]+aa,g[E++]=H,g[E++]=S[F];F=7*(E/42-1);f[r++]=F;f[r++]=F+1;f[r++]=F+2;f[r++]=F+0;f[r++]=F+4;f[r++]=F+3;f[r++]=F+0;f[r++]=F+2;f[r++]=F+3;f[r++]=F+2;f[r++]=F+5;f[r++]=F+3;f[r++]=F+5;f[r++]=F+6;f[r++]=F+3}}return{vertexData:g,indexData:f}}function D(d,
p){let z=0,u=0;const {width:v,height:A,mask:P}=d;d=d.pixels[0];const E=[],r=[];p="wind_speed"===p.style?5:Number.MAX_VALUE;for(let x=0;x<A;x++)for(let B=0;B<v;B++){var n=x*v+B;if((!P||P[x*v+B])&&d[n]<p){for(let S=0;4>S;S++)E[z++]=(B+.5)/v,E[z++]=(x+.5)/A,E[z++]=2>S?-.5:.5,E[z++]=0===S%2?-.5:.5,E[z++]=0,E[z++]=d[n];n=4*(z/24-1);r[u++]=n;r[u++]=n+1;r[u++]=n+2;r[u++]=n+1;r[u++]=n+2;r[u++]=n+3}}return{vertexData:new Float32Array(E),indexData:new Uint32Array(r)}}const a=new Map;a.set("meter-per-second",
1);a.set("kilometer-per-hour",.277778);a.set("knots",.514444);a.set("feet-per-second",.3048);a.set("mile-per-hour",.44704);const m=180/Math.PI,c=new I.JSONMap({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"}),b=function(d=0,p=0,z=Math.PI,u=!0){u&&(z=(2*Math.PI-z)%(2*Math.PI));u=u?-1:1;const v=-7*u,A=-2*u,P=-16*u,[E,r]=L(0,p+13*u,z,29),[n,x]=L(d-5.5,p+v,z,29),[B,S]=L(d+5.5,p+v,
z,29),[f,g]=L(d-1.5,p+A,z,29),[F,R]=L(d+1.5,p+A,z,29),[Q,X]=L(d-1.5,p+P,z,29),[aa,H]=L(d+1.5,p+P,z,29);return[E,r,n,x,f,g,F,R,B,S,Q,X,aa,H]}(0,0,0),k=[0,1,3,6,10,16,21,27,33,40,47,55,63],t=[0,.5,1,1.5,2],q=[0,.25,.5,1,1.5,2,2.5,3,3.5,4],h=[];W.convertVectorFieldData=function(d,p,z="geographic",u=1){if(!l.isValidPixelBlock(d))return d;const {pixels:v,width:A,height:P}=d;var E=A*P;const r=v[0],n=v[1],x=N.createEmptyBand(d.pixelType,E);E=N.createEmptyBand(d.pixelType,E);let B=0;for(let S=0;S<P;S++)for(let f=
0;f<A;f++)"vector-uv"===p?([x[B],E[B]]=V([r[B],n[B]],z),x[B]*=u):([x[B],E[B]]=Y([r[B],n[B]],z),x[B]*=u,E[B]*=u),B++;d=new N({pixelType:d.pixelType,width:d.width,height:d.height,mask:d.mask,validPixelCount:d.validPixelCount,maskIsAlpha:d.maskIsAlpha,pixels:[x,E]});d.updateStatistics();return d};W.convertVectorFieldUnit=function(d,p,z=1){if(1===z||!l.isValidPixelBlock(d))return d;d=d.clone();const {pixels:u,width:v,height:A}=d,P=u[0],E=u[1];let r=0;for(let n=0;n<A;n++)for(let x=0;x<v;x++)"vector-uv"===
p?(P[r]*=z,E[r]*=z):P[r]*=z,r++;d.updateStatistics();return d};W.createVFMesh=function(d,p){if("simple_scalar"===p.style)var z=D(d,p);else if("wind_speed"===p.style){{if(0===h.length)for(var u=0;30>u;u++)h.push(M(5*u,0));p=c.fromJSON(p.inputUnit);p=U(p,"knots");const {width:E,height:r,mask:n}=d;u=d.pixels[0];d=d.pixels[1];const x=[],B=[];let S=0,f=0;for(let g=0;g<r;g++)for(let F=0;F<E;F++){var v=g*E+F,A=u[v]*p;if((!n||n[g*E+F])&&5<=A){const R=null!=(z=(d[v]+360)%360/180*Math.PI)?z:2*Math.PI*Math.random(),
{pennants:Q,barbs:X,shaft:aa}=h[Math.min(Math.floor(A/5),29)];if(0===Q.length+X.length)continue;v=x.length/6;const H=(F+.5)/E,J=(g+.5)/r;for(var P=0;P<Q.length;P+=2)x[S++]=H,x[S++]=J,x[S++]=Q[P],x[S++]=Q[P+1]+R,x[S++]=0,x[S++]=A;for(P=0;P<X.length;P+=2)x[S++]=H,x[S++]=J,x[S++]=X[P],x[S++]=X[P+1]+R,x[S++]=0,x[S++]=A;for(P=0;P<aa.length;P+=2)x[S++]=H,x[S++]=J,x[S++]=aa[P],x[S++]=aa[P+1]+R,x[S++]=0,x[S++]=A;for(A=0;A<Q.length/6;A++)B[f++]=v,B[f++]=v+1,B[f++]=v+2,v+=3;for(A=0;A<X.length/8;A++)B[f++]=
v,B[f++]=v+1,B[f++]=v+2,B[f++]=v+1,B[f++]=v+2,B[f++]=v+3,v+=4;B[f++]=v+0;B[f++]=v+1;B[f++]=v+2;B[f++]=v+1;B[f++]=v+3;B[f++]=v+2;v+=4}}z={vertexData:new Float32Array(x),indexData:new Uint32Array(B)}}}else z=y(d,p);return z};W.createVFMeshScalar=D;W.getUnitConversionFactor=U;W.sampleVectorField=function(d,p,z,u=[0,0],v=.5){const {width:A,height:P,mask:E}=d,[r,n]=d.pixels,[x,B]=u;d=Math.round((A-x)/z);u=Math.round((P-B)/z);var S=d*u;const f=new Float32Array(S),g=new Float32Array(S);S=new Uint8Array(S);
p="vector-uv"===p;for(let R=0;R<u;R++)for(let Q=0;Q<d;Q++){let X=0;const aa=R*d+Q,H=Math.max(0,R*z+B),J=Math.max(0,Q*z+x),T=Math.min(P,H+z),O=Math.min(A,J+z);for(let Z=H;Z<T;Z++)for(let ca=J;ca<O;ca++){var F=Z*A+ca;if(!E||E[F]){X++;F=p?[r[F],n[F]]:[r[F],(360+n[F])%360];const [da,fa]=p?F:Y(F);f[aa]+=da;g[aa]+=fa}}if(X>=(T-H)*(O-J)*(1-v)){S[aa]=1;const [Z,ca]=V([f[aa]/X,g[aa]/X]);f[aa]=Z;g[aa]=ca}else S[aa]=0,f[aa]=0,g[aa]=0}z=new N({width:d,height:u,pixels:[f,g],mask:S});z.updateStatistics();return z};
W.snapImageToSymbolTile=function(d,p,z,u,v){if(!w.isSome(v)||!v.spatialReference.equals(d.spatialReference))return{extent:d,width:p,height:z,resolution:d.width/p};const A=v.xmin;v=v.ymax;u=Math.max(u||0,30);p=((d.xmax-d.xmin)/Math.ceil(1/u*p)+(d.ymax-d.ymin)/Math.ceil(1/u*z))/2;d.xmin=A+Math.floor((d.xmin-A)/p)*p;d.xmax=A+Math.ceil((d.xmax-A)/p)*p;d.ymin=v+Math.floor((d.ymin-v)/p)*p;d.ymax=v+Math.ceil((d.ymax-v)/p)*p;return{extent:d,width:Math.round(d.width/p),height:Math.round(d.height/p),resolution:p}};
W.unitKebabDict=c;W.uvComponentToVector=V;Object.defineProperty(W,"__esModule",{value:!0})})},"esri/layers/support/PixelBlock":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Error ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass".split(" "),function(W,I,w,N,l,U,V,Y,M,L,C){var e;
const y=V.getLogger("esri.layers.support.PixelBlock");w=e=function(D){function a(c){c=D.call(this,c)||this;c.width=null;c.height=null;c.pixelType="f32";c.validPixelCount=null;c.mask=null;c.maskIsAlpha=!1;c.pixels=null;c.statistics=null;return c}W._inheritsLoose(a,D);a.createEmptyBand=function(c,b){return new (e.getPixelArrayConstructor(c))(b)};a.getPixelArrayConstructor=function(c){let b;switch(c){case "u1":case "u2":case "u4":case "u8":b=Uint8Array;break;case "u16":b=Uint16Array;break;case "u32":b=
Uint32Array;break;case "s8":b=Int8Array;break;case "s16":b=Int16Array;break;case "s32":b=Int32Array;break;case "u32":b=Uint32Array;break;case "f32":b=Float32Array;break;case "f64":b=Float64Array;break;case "c64":case "c128":case "unknown":b=Float32Array}return b};var m=a.prototype;m.castPixelType=function(c){if(!c)return"f32";c=c.toLowerCase();-1<["u1","u2","u4"].indexOf(c)?c="u8":-1==="unknown u8 s8 u16 s16 u32 s32 f32 f64".split(" ").indexOf(c)&&(c="f32");return c};m.getPlaneCount=function(){return this.pixels&&
this.pixels.length};m.addData=function(c){if(!c.pixels||c.pixels.length!==this.width*this.height)throw new N("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]);this.statistics||(this.statistics=[]);this.pixels.push(c.pixels);this.statistics.push(c.statistics||{minValue:null,maxValue:null})};m.getAsRGBA=function(){const c=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case "s8":case "s16":case "u16":case "s32":case "u32":case "f32":case "f64":this._fillFromNon8Bit(c);
break;default:this._fillFrom8Bit(c)}return new Uint8ClampedArray(c)};m.getAsRGBAFloat=function(){const c=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(c);return c};m.updateStatistics=function(){this.statistics=this.pixels.map(k=>this._calculateBandStatistics(k,this.mask));const c=this.mask;let b=0;if(c)for(let k=0;k<c.length;k++)c[k]&&b++;else b=this.width*this.height;this.validPixelCount=b};m.clamp=function(c){if(c&&"f64"!==c&&"f32"!==c){switch(c){case "u8":var b=[0,255];break;case "u16":b=
[0,65535];break;case "u32":b=[0,4294967295];break;case "s8":b=[-128,127];break;case "s16":b=[-32768,32767];break;case "s32":b=[-2147483648,2147483647];break;default:b=[-3.4*1E39,3.4*1E39]}var [k,t]=b;b=this.pixels;var q=this.width*this.height,h=b.length,d=[];for(let v=0;v<h;v++){var p=e.createEmptyBand(c,q);var z=b[v];for(let A=0;A<q;A++){var u=z[A];p[A]=u>t?t:u<k?k:u}d.push(p)}this.pixels=d;this.pixelType=c}};m.extractBands=function(c){if(Y.isNone(c)||0===c.length||null==this.pixels||0===this.pixels.length)return this;
var b=this.pixels.length;const k=c.some(t=>t>=this.pixels.length);b=b===c.length&&!c.some((t,q)=>t!==q);return k||b?this:new e({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:c.map(t=>this.pixels[t]),statistics:this.statistics&&c.map(t=>this.statistics[t])})};m.clone=function(){const c=new e({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});
this.mask&&(c.mask=this.mask instanceof Uint8Array?new Uint8Array(this.mask):this.mask.slice(0));let b;const k=e.getPixelArrayConstructor(this.pixelType);if(this.pixels&&0<this.pixels.length){c.pixels=[];const t=this.pixels[0].slice;for(b=0;b<this.pixels.length;b++)c.pixels[b]=t?this.pixels[b].slice(0,this.pixels[b].length):new k(this.pixels[b])}if(this.statistics)for(c.statistics=[],b=0;b<this.statistics.length;b++)c.statistics[b]=U.clone(this.statistics[b]);return c};m._fillFrom8Bit=function(c){const {mask:b,
maskIsAlpha:k,pixels:t}=this;if(c&&t&&t.length){var q,h;var d=q=h=t[0];3<=t.length?(q=t[1],h=t[2]):2===t.length&&(q=t[1]);var p=new Uint32Array(c),z=this.width*this.height;if(d.length!==z)y.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");else if(b&&b.length===z)if(k)for(c=0;c<z;c++)b[c]&&(p[c]=b[c]<<24|h[c]<<16|q[c]<<8|d[c]);else for(c=0;c<z;c++)b[c]&&(p[c]=-16777216|h[c]<<16|q[c]<<8|d[c]);else for(c=0;c<z;c++)p[c]=-16777216|h[c]<<16|q[c]<<8|d[c]}else y.error("getAsRGBA()",
"Unable to convert to RGBA. The input pixel block is empty.")};m._fillFromNon8Bit=function(c){const {pixels:b,mask:k,statistics:t}=this;if(c&&b&&b.length){var q=this.pixelType,h=1,d=0;h=1;t&&0<t.length?(d=t.map(A=>A.minValue).reduce((A,P)=>Math.min(A,P)),h=t.map(A=>A.maxValue-A.minValue).reduce((A,P)=>Math.max(A,P)),h=255/h):(h=255,"s8"===q?(d=-128,h=127):"u16"===q?h=65535:"s16"===q?(d=-32768,h=32767):"u32"===q?h=4294967295:"s32"===q?(d=-2147483648,h=2147483647):"f32"===q?(d=-3.4*1E39,h=3.4*1E39):
"f64"===q&&(d=-Number.MAX_VALUE,h=Number.MAX_VALUE),h=255/(h-d));c=new Uint32Array(c);q=this.width*this.height;var p,z,u;var v=p=z=b[0];if(v.length!==q)return y.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(2<=b.length)if(p=b[1],3<=b.length&&(z=b[2]),k&&k.length===q)for(u=0;u<q;u++)k[u]&&(c[u]=-16777216|(z[u]-d)*h<<16|(p[u]-d)*h<<8|(v[u]-d)*h);else for(u=0;u<q;u++)c[u]=-16777216|(z[u]-d)*h<<16|(p[u]-d)*h<<8|(v[u]-d)*h;else if(k&&k.length===q)for(u=0;u<q;u++)p=(v[u]-
d)*h,k[u]&&(c[u]=-16777216|p<<16|p<<8|p);else for(u=0;u<q;u++)p=(v[u]-d)*h,c[u]=-16777216|p<<16|p<<8|p}else y.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};m._fillFrom32Bit=function(c){const {pixels:b,mask:k}=this;if(!c||!b||!b.length)return y.error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");let t,q,h,d;t=q=h=b[0];3<=b.length?(q=b[1],h=b[2]):2===b.length&&(q=b[1]);const p=this.width*this.height;if(t.length!==p)return y.error("getAsRGBAFloat()",
"Unable to convert to RGBA. The pixelblock is invalid.");let z=0;if(k&&k.length===p)for(d=0;d<p;d++)c[z++]=t[d],c[z++]=q[d],c[z++]=h[d],c[z++]=k[d]&1;else for(d=0;d<p;d++)c[z++]=t[d],c[z++]=q[d],c[z++]=h[d],c[z++]=1};m._calculateBandStatistics=function(c,b){let k=Infinity,t=-Infinity;const q=c.length;let h,d=0;if(b)for(h=0;h<q;h++)b[h]&&(d=c[h],k=d<k?d:k,t=d>t?d:t);else for(h=0;h<q;h++)d=c[h],k=d<k?d:k,t=d>t?d:t;return{minValue:k,maxValue:t}};return a}(l.JSONSupport);I.__decorate([M.property({json:{write:!0}})],
w.prototype,"width",void 0);I.__decorate([M.property({json:{write:!0}})],w.prototype,"height",void 0);I.__decorate([M.property({json:{write:!0}})],w.prototype,"pixelType",void 0);I.__decorate([L.cast("pixelType")],w.prototype,"castPixelType",null);I.__decorate([M.property({json:{write:!0}})],w.prototype,"validPixelCount",void 0);I.__decorate([M.property({json:{write:!0}})],w.prototype,"mask",void 0);I.__decorate([M.property({json:{write:!0}})],w.prototype,"maskIsAlpha",void 0);I.__decorate([M.property({json:{write:!0}})],
w.prototype,"pixels",void 0);I.__decorate([M.property({json:{write:!0}})],w.prototype,"statistics",void 0);return w=e=I.__decorate([C.subclass("esri.layers.support.PixelBlock")],w)})},"esri/layers/support/rasterFunctions/pixelUtils":function(){define(["exports","../../../core/maybe","../PixelBlock"],function(W,I,w){function N(a){return I.isSome(a)&&"esri.layers.support.PixelBlock"===a.declaredClass&&a.pixels&&0<a.pixels.length}function l(a,m){a=Math.min(Math.max(a,-100),100);m=Math.min(Math.max(m,
-100),100);let c,b;const k=new Uint8Array(256);for(c=0;256>c;c++)0<a&&100>a?b=(200*c-25500+510*m)/(2*(100-a))+128:0>=a&&-100<a?b=(200*c-25500+510*m)*(100+a)/2E4+128:100===a?(b=200*c-25500+256*(100-a)+510*m,b=0<b?255:0):-100===a&&(b=128),k[c]=255<b?255:0>b?0:b;return k}function U(a,m,c,b,k,t,q,h){return{xmin:k<=c*a?0:k<c*a+a?k-c*a:a,ymin:t<=b*m?0:t<b*m+m?t-b*m:m,xmax:k+q<=c*a?0:k+q<c*a+a?k+q-c*a:a,ymax:t+h<=b*m?0:t+h<b*m+m?t+h-b*m:m}}function V(a,m,c,b,k,t){const {width:q,height:h}=c.block,{x:d,y:p}=
c.offset,{width:z,height:u}=c.mosaic;c=U(q,h,b,k,d,p,z,u);let v=0;var A=0;if(t){var P=t.hasGCSSShiftTransform?360:t.halfWorldWidth,E=q*t.resolutionX,r=t.startX+b*E;E=r+E;r<P&&E>P?A=t.rightPadding:r>=P&&(v=t.leftMargin-t.rightPadding,A=0)}c.xmax-=A;if("number"===typeof m)for(t=c.ymin;t<c.ymax;t++)for(A=(k*h+t-p)*z+(b*q-d)+v,P=c.xmin;P<c.xmax;P++)a[A+P]=m;else for(t=c.ymin;t<c.ymax;t++)for(A=(k*h+t-p)*z+(b*q-d)+v,P=t*q,r=c.xmin;r<c.xmax;r++)a[A+r]=m[P+r]}function Y(a,m,c,b,k){var t=a.filter(E=>N(E))[0];
if(I.isNone(t))return null;const q=b?b.width:m.width,h=b?b.height:m.height;var d=t.width,p=t.height;const z=m.width/d,u=m.height/p;m={offset:c||{x:0,y:0},mosaic:b||m,block:{width:d,height:p}};c=t.pixelType;b=w.getPixelArrayConstructor(c);d=t.pixels.length;t=[];for(var v=0;v<d;v++){p=new b(q*h);for(let E=0;E<u;E++)for(let r=0;r<z;r++){var A=a[E*z+r];N(A)&&(A=A.pixels[v],V(p,A,m,r,E,k))}t.push(p)}let P;if(a.some(E=>I.isNone(E)||E.mask&&0<E.mask.length))for(P=new Uint8Array(q*h),b=0;b<u;b++)for(d=0;d<
z;d++)p=a[b*z+d],(v=I.isSome(p)?p.mask:null)?V(P,v,m,d,b,k):p?V(P,1,m,d,b,k):V(P,0,m,d,b,k);a=new w({width:q,height:h,pixels:t,pixelType:c,mask:P});a.updateStatistics();return a}function M(a){if(!N(a))return null;const m=a.clone(),{width:c,height:b,pixels:k,mask:t}=a;var q=k[0];a=m.pixels[0];for(let p=2;p<b-1;p++){const z=new Map;for(var h=p-2;h<p+2;h++)for(var d=0;4>d;d++){const u=h*c+d;e(z,q[u],t?t[u]:1)}a[p*c]=L(z);a[p*c+1]=a[p*c+2]=a[p*c];for(h=3;h<c-1;h++)d=(p-2)*c+h+1,e(z,q[d],t?t[d]:1),d=(p-
1)*c+h+1,e(z,q[d],t?t[d]:1),d=p*c+h+1,e(z,q[d],t?t[d]:1),d=(p+1)*c+h+1,e(z,q[d],t?t[d]:1),d=(p-2)*c+h-3,C(z,q[d],t?t[d]:1),d=(p-1)*c+h-3,C(z,q[d],t?t[d]:1),d=p*c+h-3,C(z,q[d],t?t[d]:1),d=(p+1)*c+h-3,C(z,q[d],t?t[d]:1),a[p*c+h]=L(z);a[p*c+h+1]=a[p*c+h]}for(q=0;q<c;q++)a[q]=a[c+q]=a[2*c+q],a[(b-1)*c+q]=a[(b-2)*c+q];m.updateStatistics();return m}function L(a){if(0===a.size)return 0;let m=0,c=-1,b=0;const k=a.keys();let t=k.next();for(;!t.done;)b=a.get(t.value),b>m&&(c=t.value,m=b),t=k.next();return c}
function C(a,m,c){0!==c&&(c=a.get(m),1===c?a.delete(m):a.set(m,c-1))}function e(a,m,c){0!==c&&a.set(m,a.has(m)?a.get(m)+1:1)}function y(a,m,c){let {x:b,y:k}=m;const {width:t,height:q}=c;if(0===b&&0===k&&q===a.height&&t===a.width)return a;const {width:h,height:d}=a;m=Math.max(0,k);const p=Math.max(0,b),z=Math.min(b+t,h),u=Math.min(k+q,d);if(0>z||0>u||!N(a))return null;b=Math.max(0,-b);k=Math.max(0,-k);const {pixels:v,mask:A}=a;var P=t*q,E=v.length;const r=[];for(var n=0;n<E;n++){var x=v[n],B=w.createEmptyBand(a.pixelType,
P);for(let S=m;S<u;S++){const f=S*h;let g=(S+k-m)*t+b;for(let F=p;F<z;F++)B[g++]=x[f+F]}r.push(B)}P=new Uint8Array(P);for(E=m;E<u;E++)for(n=E*h,x=(E+k-m)*t+b,B=p;B<z;B++)P[x++]=A?A[n+B]:1;a=new w({width:c.width,height:c.height,pixelType:a.pixelType,pixels:r,mask:P});a.updateStatistics();return a}function D(a,m=!0){if(!N(a))return null;const {pixels:c,width:b,height:k,mask:t,pixelType:q}=a;a=[];const h=Math.round(b/2),d=Math.round(k/2),p=k-1,z=b-1;for(var u=0;u<c.length;u++){var v=c[u],A=w.createEmptyBand(q,
h*d),P=0;for(var E=0;E<k;E+=2)for(var r=0;r<b;r+=2){var n=v[E*b+r];if(m){var x=r===z?n:v[E*b+r+1];const B=E===p?n:v[E*b+r+b],S=r===z?B:E===p?x:v[E*b+r+b+1];A[P++]=(n+x+B+S)/4}else A[P++]=n}a.push(A)}u=null;if(t)for(u=new Uint8Array(h*d),v=0,A=0;A<k;A+=2)for(P=0;P<b;P+=2)E=t[A*b+P],m?(r=P===z?E:t[A*b+P+1],n=A===p?E:t[A*b+P+b],x=P===z?n:A===p?r:t[A*b+P+b+1],u[v++]=E*r*n*x?1:0):u[v++]=E;return new w({width:h,height:d,pixelType:q,pixels:a,mask:u})}W.approximateTransform=function(a,m,c,b,k="nearest"){if(!N(a))return null;
"majority"===k&&(a=M(a));const {pixels:t,mask:q,pixelType:h}=a,d=a.width;var p=a.height;a=w.getPixelArrayConstructor(h);var z=t.length;const {width:u,height:v}=m;m=b.cols;var A=b.rows;const P=Math.ceil(u/m-.1/m),E=Math.ceil(v/A-.1/A);b=!1;for(var r=0;r<c.length;r+=3)-1===c[r]&&-1===c[r+1]&&-1===c[r+2]&&(b=!0);let n,x,B,S,f,g;const F=P*m;r=F*E*A;const R=new Float32Array(r),Q=new Float32Array(r);r=0;let X,aa;const H="majority"===k?0:.5;for(let O=0;O<E;O++)for(let Z=0;Z<P;Z++){n=12*(O*P+Z);k=c[n];x=
c[n+1];B=c[n+2];S=c[n+3];f=c[n+4];g=c[n+5];for(var J=0;J<A;J++){r=(O*A+J)*F+Z*m;aa=(J+.5)/A;for(var T=0;T<J;T++)X=(T+.5)/m,R[r+T]=Math.round((k*X+x*aa+B)*d-H),Q[r+T]=Math.round((S*X+f*aa+g)*p-H)}n+=6;k=c[n];x=c[n+1];B=c[n+2];S=c[n+3];f=c[n+4];g=c[n+5];for(J=0;J<A;J++)for(r=(O*A+J)*F+Z*m,aa=(J+.5)/A,T=J;T<m;T++)X=(T+.5)/m,R[r+T]=Math.round((k*X+x*aa+B)*d-H),Q[r+T]=Math.round((S*X+f*aa+g)*p-H)}c=(O,Z)=>{for(let ca=0;ca<v;ca++){n=ca*F;for(let da=0;da<u;da++)O[ca*u+da]=0>R[n]||0>Q[n]?0:Z[R[n]+Q[n]*d],
n++}};p=[];for(A=0;A<z;A++)m=new a(u*v),c(m,t[A]),p.push(m);a=new w({width:u,height:v,pixelType:h,pixels:p});if(q)a.mask=new Uint8Array(u*v),c(a.mask,q);else if(b)for(a.mask=new Uint8Array(u*v),z=0;z<u*v;z++)a.mask[z]=0>R[z]||0>Q[z]?0:1;a.updateStatistics();return a};W.clip=y;W.colorize=function(a,m){if(!N(a)||!m&&(m.indexedColormap||m.indexed2DColormap))return a;const c=a.clone();var b=c.pixels;let k=c.mask;const t=c.width*c.height;if(1!==b.length)return a;const {indexedColormap:q,indexed2DColormap:h,
offset:d,alphaSpecified:p}=m;m=q.length-1;a=0;b=b[0];const z=new Uint8Array(b.length),u=new Uint8Array(b.length),v=new Uint8Array(b.length);let A=0;if(q)if(k)for(a=0;a<t;a++)k[a]&&(A=4*(b[a]-d),A<d||A>m?k[a]=0:(z[a]=q[A],u[a]=q[A+1],v[a]=q[A+2],k[a]=q[A+3]));else{k=new Uint8Array(t);for(a=0;a<t;a++)A=4*(b[a]-d),A<d||A>m?k[a]=0:(z[a]=q[A],u[a]=q[A+1],v[a]=q[A+2],k[a]=q[A+3]);c.mask=k}else if(k)for(a=0;a<t;a++)k[a]&&(m=h[b[a]],z[a]=m[0],u[a]=m[1],v[a]=m[2],k[a]=m[3]);else{k=new Uint8Array(t);for(a=
0;a<t;a++)m=h[b[a]],z[a]=m[0],u[a]=m[1],v[a]=m[2],k[a]=m[3];c.mask=k}c.pixels=[z,u,v];c.statistics=null;c.pixelType="u8";c.maskIsAlpha=p;return c};W.createColormapLUT=function(a){if(a){var m=a.colormap;if(m&&0!==m.length){m=m.sort((p,z)=>p[0]-z[0]);var c=0;0>m[0][0]&&(c=m[0][0]);var b=Math.max(256,m[m.length-1][0]-c+1),k=new Uint8Array(4*b),t=[],q=0,h=0,d=5===m[0].length;if(65536<b)return m.forEach(p=>{t[p[0]-c]=d?p.slice(1):p.slice(1).concat([255])}),{indexed2DColormap:t,offset:c,alphaSpecified:d};
if(a.fillUnspecified)for(a=m[h],q=a[0]-c;q<b;q++)k[4*q]=a[1],k[4*q+1]=a[2],k[4*q+2]=a[3],k[4*q+3]=d?a[4]:255,q===a[0]-c&&(a=h===m.length-1?a:m[++h]);else for(q=0;q<m.length;q++)a=m[q],h=4*(a[0]-c),k[h]=a[1],k[h+1]=a[2],k[h+2]=a[3],k[h+3]=d?a[4]:255;return{indexedColormap:k,offset:c,alphaSpecified:d}}}};W.createContrastBrightnessLUT=l;W.createHistogramEqualizationLUT=function(a,m=256){m=Math.min(m,256);const {size:c,counts:b}=a;a=new Uint8Array(c);var k=b.reduce((p,z)=>p+z/m,0);let t=0;var q=0;let h=
0,d=k;for(let p=0;p<c;p++)if(h+=b[p],!(p<c-1&&h+b[p+1]<d)){for(;t<m-1&&d<h;)t++,d+=k;for(;q<=p;q++)a[q]=t;q=p+1}for(k=q;k<c;k++)a[k]=m-1;return a};W.createStretchLUT=function(a){const {minCutOff:m,maxCutOff:c,gamma:b,pixelType:k}=a,t=a.outMin||0,q=a.outMax||255;if(-1===["u8","u16","s8","s16"].indexOf(k))return null;const h=m.length;let d;let p=0;"s8"===k?p=-127:"s16"===k&&(p=-32767);let z=256;-1<["u16","s16"].indexOf(k)&&(z=65536);const u=[],v=q-t;for(d=0;d<h;d++)u[d]=c[d]-m[d];var A=b&&b.length>=
h;const P=[];if(A)for(d=0;d<h;d++)P[d]=1<b[d]?2<b[d]?6.5+(b[d]-2)**2.5:6.5+100*(2-b[d])**4:1;let E;const r=[];let n,x,B;if(A)for(d=0;d<h;d++){B=[];for(A=0;A<z;A++)n=A+p,E=(n-m[d])/u[d],x=1,1<b[d]&&(x-=(1/v)**(E*P[d])),B[A]=n<c[d]&&n>m[d]?Math.floor(x*v*E**(1/b[d]))+t:n>=c[d]?q:t;r[d]=B}else for(d=0;d<h;d++){B=[];for(A=0;A<z;A++)n=A+p,B[A]=n<=m[d]?t:n>=c[d]?q:Math.floor((n-m[d])/u[d]*v)+t;r[d]=B}if(null!=a.contrastOffset)for(a=l(a.contrastOffset,a.brightnessOffset),d=0;d<h;d++)for(B=r[d],A=0;A<z;A++)B[A]=
a[B[A]];return{lut:r,offset:p}};W.estimateStatisticsFromHistograms=function(a){const m=[];for(let t=0;t<a.length;t++){const {min:q,max:h,size:d,counts:p}=a[t];let z=0;var c=0;for(var b=0;b<d;b++)z+=p[b],c+=b*p[b];c/=z;b=0;for(var k=0;k<d;k++)b+=p[k]*(k-c)**2;k=(h-q)/d;m.push({min:q,max:h,avg:(c+.5)*k+q,stddev:Math.sqrt(b/(z-1))*k})}return m};W.estimateStatisticsHistograms=function(a){if(!N(a))return null;a.statistics||a.updateStatistics();const {pixels:m,mask:c,pixelType:b,statistics:k}=a;a=a.width*
a.height;const t=m.length;let q,h;let d;var p;const z=[],u=[];for(d=0;d<t;d++){var v=new Uint32Array(256);var A=m[d];if("u8"===b)if(q=-.5,h=255.5,c)for(p=0;p<a;p++)c[p]&&v[A[p]]++;else for(p=0;p<a;p++)v[A[p]]++;else{q=k[d].minValue;h=k[d].maxValue;var P=(h-q)/256;var E=new Uint32Array(257);if(c)for(p=0;p<a;p++)c[p]&&E[Math.floor((A[p]-q)/P)]++;else for(p=0;p<a;p++)E[Math.floor((A[p]-q)/P)]++;for(p=0;255>p;p++)v[p]=E[p];v[255]=E[255]+E[256]}z.push({min:q,max:h,size:256,counts:v});for(p=A=E=P=0;256>
p;p++)P+=v[p],E+=p*v[p];E/=P;for(p=0;256>p;p++)A+=v[p]*(p-E)**2;v=Math.sqrt(A/(P-1));P=(h-q)/256;p=(E+.5)*P+q;v*=P;u.push({min:q,max:h,avg:p,stddev:v})}return{statistics:u,histograms:z}};W.extractBands=function(a,m){if(null==m||!m.length||!N(a))return a;const c=a.pixels.length;return m&&m.some(b=>b>=c)||1===c&&1===m.length&&0===m[0]||c===m.length&&!m.some((b,k)=>b!==k)?a:new w({pixelType:a.pixelType,width:a.width,height:a.height,mask:a.mask,validPixelCount:a.validPixelCount,maskIsAlpha:a.maskIsAlpha,
pixels:m.map(b=>a.pixels[b]),statistics:a.statistics&&m.map(b=>a.statistics[b])})};W.getClipBounds=U;W.isValidPixelBlock=N;W.lookupPixels=function(a,m){if(!N(a))return null;const {pixels:c,mask:b}=a,k=a.width*a.height,t=c.length;let q=m.lut;({offset:m}=m);let h,d;q&&1===q[0].length&&(q=c.map(()=>q));const p=[];let z,u,v;if(m)if(null==b)for(h=0;h<t;h++){z=c[h];u=q[h];v=new Uint8Array(k);for(d=0;d<k;d++)v[d]=u[z[d]-m];p.push(v)}else for(h=0;h<t;h++){z=c[h];u=q[h];v=new Uint8Array(k);for(d=0;d<k;d++)b[d]&&
(v[d]=u[z[d]-m]);p.push(v)}else if(null==b)for(h=0;h<t;h++){z=c[h];u=q[h];v=new Uint8Array(k);for(d=0;d<k;d++)v[d]=u[z[d]];p.push(v)}else for(h=0;h<t;h++){z=c[h];u=q[h];v=new Uint8Array(k);for(d=0;d<k;d++)b[d]&&(v[d]=u[z[d]]);p.push(v)}a=new w({width:a.width,height:a.height,pixels:p,mask:b,pixelType:"u8"});a.updateStatistics();return a};W.mosaic=Y;W.mosaicPixelData=function(a,m){if(!a||0===a.length)return null;var c=a.filter(u=>u.pixelBlock)[0];if(!c||I.isNone(c.pixelBlock))return null;var b=(c.extent.xmax-
c.extent.xmin)/c.pixelBlock.width;const k=(c.extent.ymax-c.extent.ymin)/c.pixelBlock.height,t=.01*Math.min(b,k),q=a.sort((u,v)=>Math.abs(u.extent.ymax-v.extent.ymax)>t?v.extent.ymax-u.extent.ymax:Math.abs(u.extent.xmin-v.extent.xmin)>t?u.extent.xmin-v.extent.xmin:0);var h=Math.min.apply(null,q.map(u=>u.extent.xmin));const d=Math.min.apply(null,q.map(u=>u.extent.ymin)),p=Math.max.apply(null,q.map(u=>u.extent.xmax)),z=Math.max.apply(null,q.map(u=>u.extent.ymax));a={x:Math.round((m.xmin-h)/b),y:Math.round((z-
m.ymax)/k)};h={width:Math.round((p-h)/b),height:Math.round((z-d)/k)};b={width:Math.round((m.xmax-m.xmin)/b),height:Math.round((m.ymax-m.ymin)/k)};if(Math.round(h.width/c.pixelBlock.width)*Math.round(h.height/c.pixelBlock.height)!==q.length||0>a.x||0>a.y||h.width<b.width||h.height<b.height)return null;c=q.map(u=>u.pixelBlock);c=Y(c,h,a,b);return{extent:m,pixelBlock:c}};W.remapColor=function(a,m){if(!N(a))return null;a=a.clone();var {pixels:c}=a;const b=a.width*a.height,k=m.length,t=Math.floor(k/2),
q=m[Math.floor(t)];c=c[0];let h,d,p,z,u,v,A=!1;const P=new Uint8Array(b),E=new Uint8Array(b),r=new Uint8Array(b);let n=a.mask;const x=4===m[0].mappedColor.length;n||(n=new Uint8Array(b),n.fill(x?255:1),a.mask=n);for(u=0;u<b;u++)if(n[u]){h=c[u];A=!1;v=t;d=q;p=0;for(z=k-1;1<z-p;){if(h===d.value){A=!0;break}h>d.value?p=v:z=v;v=Math.floor((p+z)/2);d=m[Math.floor(v)]}A||(h===m[p].value?(d=m[p],A=!0):h===m[z].value?(d=m[z],A=!0):h<m[p].value?(A=!1,d=null):h>m[p].value&&(h<m[z].value?(d=m[p],A=!0):z===k-
1?(A=!1,d=null):(d=m[z],A=!0)));A?(P[u]=d.mappedColor[0],E[u]=d.mappedColor[1],r[u]=d.mappedColor[2],n[u]=d.mappedColor[3]):P[u]=E[u]=r[u]=n[u]=0}a.pixels=[P,E,r];a.mask=n;a.pixelType="u8";a.maskIsAlpha=x;return a};W.resampleByMajority=M;W.setValidBoundary=function(a,m,c){if(!N(a))return null;const {width:b,height:k}=a,t=m.x;m=m.y;const q=c.width+t;c=c.height+m;if(0>t||0>m||q>b||c>k||0===t&&0===m&&q===b&&c===k)return a;a.mask||(a.mask=new Uint8Array(b*k));const h=a.mask;for(let d=0;d<k;d++){const p=
d*b;for(let z=0;z<b;z++)h[p+z]=d<m||d>=c||z<t||z>=q?0:1}a.updateStatistics();return a};W.split=function(a,m,c){if(!N(a))return null;const {width:b,height:k}=m;let {width:t,height:q}=a;const h=new Map,d={x:0,y:0};c=null==c?1:1+c;for(let p=0;p<c;p++){const z=Math.ceil(t/b),u=Math.ceil(q/k);for(let v=0;v<u;v++){d.y=v*k;for(let A=0;A<z;A++){d.x=A*b;const P=y(a,d,m);h.set(`${p}/${v}/${A}`,P)}}p<c-1&&(a=D(a));t=Math.round(t/2);q=Math.round(q/2)}return h};W.stretch=function(a,m){if(!N(a))return null;a=a.clone();
const {pixels:c,mask:b}=a,{minCutOff:k,maxCutOff:t,gamma:q}=m,h=m.outMin||0;m=m.outMax||255;const d=a.width*a.height,p=c.length;let z;let u,v,A;const P=m-h,E=[];for(z=0;z<p;z++)E[z]=t[z]-k[z];var r=q&&q.length>=p;const n=[];if(r)for(z=0;z<p;z++)n[z]=1<q[z]?2<q[z]?6.5+(q[z]-2)**2.5:6.5+100*(2-q[z])**4:1;if(r)if(null!=b)for(r=0;r<d;r++){if(b[r])for(z=0;z<p;z++)u=c[z][r],A=(u-k[z])/E[z],v=1,1<q[z]&&(v-=(1/P)**(A*n[z])),c[z][r]=u<t[z]&&u>k[z]?Math.floor(v*P*A**(1/q[z]))+h:u>=t[z]?m:h}else for(r=0;r<d;r++)for(z=
0;z<p;z++)u=c[z][r],A=(u-k[z])/E[z],v=1,1<q[z]&&(v-=(1/P)**(A*n[z])),c[z][r]=u<t[z]&&u>k[z]?Math.floor(v*P*A**(1/q[z]))+h:u>=t[z]?m:h;else if(null!=b)for(r=0;r<d;r++){if(b[r])for(z=0;z<p;z++)u=c[z][r],c[z][r]=u<t[z]&&u>k[z]?Math.floor((u-k[z])/E[z]*P)+h:u>=t[z]?m:h}else for(r=0;r<d;r++)for(z=0;z<p;z++)u=c[z][r],c[z][r]=u<t[z]&&u>k[z]?Math.floor((u-k[z])/E[z]*P)+h:u>=t[z]?m:h;a.pixelType="u8";a.updateStatistics();return a};Object.defineProperty(W,"__esModule",{value:!0})})},"esri/symbols/support/utils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ./gfxUtils ./Symbol3DMaterial".split(" "),
function(W,I,w,N,l,U,V,Y,M,L,C,e){function y(E){E=E.symbolLayers;if(!E)return null;let r=null;E.forEach(n=>{if("object"!==n.type||null==n.resource.href)r="water"===n.type?Y.unwrap(n.color):Y.isSome(n.material)?Y.unwrap(n.material.color):null});return r?new N(r):null}function D(E,r){if(null==r)return E;E=E.toRgba();E[3]*=r;return new N(E)}function a(E,r,n){if(E=E.symbolLayers){var x=B=>{B=Y.isSome(B)?B:null;r=r||B||null!=n&&P;return D(r,n)};E.forEach(B=>{if("object"!==B.type||null==B.resource.href||
r)if("water"===B.type)B.color=x(B.color);else{var S=Y.isSome(B.material)?B.material.color:null;S=x(S);Y.isNone(B.material)?B.material=new e["default"]({color:S}):B.material.color=S;null!=n&&"outline"in B&&Y.isSome(B.outline)&&Y.isSome(B.outline.color)&&(B.outline.color=D(B.outline.color,n))}})}}function m(E,r){return c.apply(this,arguments)}function c(){c=w._asyncToGenerator(function*(E,r){(E=E.symbolLayers)&&(yield U.forEach(E,function(){var n=w._asyncToGenerator(function*(x){return b(x,r)});return function(x){return n.apply(this,
arguments)}}()))});return c.apply(this,arguments)}function b(E,r){return k.apply(this,arguments)}function k(){k=w._asyncToGenerator(function*(E,r){switch(E.type){case "extrude":E.size="number"===typeof r[2]?r[2]:0;break;case "icon":case "line":case "text":r=t(r);Y.isSome(r)&&(E.size=r);break;case "path":{const n=d(r,L.ONES,[E.width,void 0,E.height]);E.width=u(r[0],E.width,1,n);E.height=u(r[2],E.height,1,n)}break;case "object":yield q(E,r)}});return k.apply(this,arguments)}function t(E){for(const r of E)if("number"===
typeof r)return r;return null}function q(E,r){return h.apply(this,arguments)}function h(){h=w._asyncToGenerator(function*(E,r){const {resourceSize:n,symbolSize:x}=yield p(E),B=d(r,n,x);E.width=u(r[0],x[0],n[0],B);E.depth=u(r[1],x[1],n[1],B);E.height=u(r[2],x[2],n[2],B)});return h.apply(this,arguments)}function d(E,r,n){for(let x=0;3>x;x++){const B=E[x];switch(B){case "symbol-value":return null!=n[x]?n[x]/r[x]:1;case "proportional":break;default:if(B&&r[x])return B/r[x]}}return 1}function p(E){return z.apply(this,
arguments)}function z(){z=w._asyncToGenerator(function*(E){const r=yield(yield new Promise(function(g,F){W(["./symbolLayerUtils"],g,F)})).computeObjectLayerResourceSize(E,10),{width:n,height:x,depth:B}=E;E=[n,B,x];let S=1;for(var f=0;3>f;f++)if(null!=E[f]){S=E[f]/r[f];break}for(f=0;3>f;f++)null==E[f]&&(E[f]=r[f]*S);return{resourceSize:r,symbolSize:E}});return z.apply(this,arguments)}function u(E,r,n,x){switch(E){case "proportional":return n*x;case "symbol-value":return null!=r?r:n;default:return E}}
function v(){v=w._asyncToGenerator(function*(E,r){if(E&&r){if(l.isSymbol3D(E))return m(E,r);if(l.isSymbol2D(E)&&(r=t(r),!Y.isNone(r)))switch(E.type){case "simple-marker":E.size=r;break;case "picture-marker":{const n=E.width/E.height;1<n?(E.width=r,E.height=r*n):(E.width=r*n,E.height=r);break}case "simple-line":E.width=r;break;case "text":E.font.size=r}}});return v.apply(this,arguments)}const A=/\/resource\/(.*?)\.svg$/,P=new N("white");I.applyColorToSymbol=function(E,r,n){if(E&&(r||null!=n))if(r&&
(r=new N(r)),l.isSymbol3D(E))a(E,r,n);else if(l.isSymbol2D(E)){if(r=r||E.color)E.color=D(r,n);null!=n&&"outline"in E&&E.outline&&E.outline.color&&(E.outline.color=D(E.outline.color,n))}};I.applyOpacityToColor=D;I.applyRotationToSymbol=function(E,r,n){E&&null!=r&&(l.isSymbol3D(E)?(E=E.symbolLayers)&&E.forEach(x=>{if(x&&"object"===x.type)switch(n){case "tilt":x.tilt=r;break;case "roll":x.roll=r;break;default:x.heading=r}}):!l.isSymbol2D(E)||"simple-marker"!==E.type&&"picture-marker"!==E.type&&"text"!==
E.type||(E.angle=r))};I.applySizesToSymbol=function(E,r){return v.apply(this,arguments)};I.getColorFromSymbol=function(E,r){if(!E)return null;let n=null;l.isSymbol3D(E)?n=y(E):l.isSymbol2D(E)&&(n=E.color?new N(E.color):null);return n?D(n,r):null};I.getIconHref=function(E,r){r=r.resource.href;return!V("esri-canvas-svg-support")&&E.styleOrigin&&A.test(r)?r.replace(A,"/resource/png/$1.png"):r};I.getSymbolOutlineSize=function(E){if(!E)return 0;if(l.isSymbol3D(E)){{const r=E.symbolLayers&&E.symbolLayers.length;
r?(E=E.symbolLayers.getItemAt(r-1),E="outline"in E?Y.get(E,"outline","size"):void 0):E=void 0}return Y.isSome(E)?E:0}return(E=C.getStroke(E))&&M.px2pt(E.width)||0};I.isVolumetricSymbol=function(E){if(Y.isNone(E)||!("symbolLayers"in E)||Y.isNone(E.symbolLayers))return!1;switch(E.type){case "point-3d":return E.symbolLayers.some(r=>"object"===r.type);case "line-3d":return E.symbolLayers.some(r=>"path"===r.type);case "polygon-3d":return E.symbolLayers.some(r=>"object"===r.type||"extrude"===r.type);default:return!1}};
Object.defineProperty(I,"__esModule",{value:!0})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/screenUtils ./cimSymbolUtils".split(" "),function(W,I,w,N,l,U,V){function Y(y){if(!y)return null;let D;switch(y.type){case "simple-fill":case "picture-fill":case "simple-marker":D=Y(y.outline);break;case "simple-line":{const a=U.pt2px(y.width);"none"!==y.style&&0!==a&&(D={color:y.color,style:e(y.style),width:a,cap:y.cap,
join:"miter"===y.join?U.pt2px(y.miterLimit):y.join});break}default:D=null}return D}const M={left:"start",center:"middle",right:"end",justify:"start"},L={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},C=new l(1E3),e=function(){const y={};return function(D){if(y[D])return y[D];const a=D.replace(/-/g,"");return y[D]=a}}();w=new w([128,128,128]);W.defaultThematicColor=w;W.dekebabifyLineStyle=e;W.getFill=function(y){const D=y.style;let a=null;if(y)switch(y.type){case "simple-marker":"cross"!==
D&&"x"!==D&&(a=y.color);break;case "simple-fill":"solid"===D?a=y.color:"none"!==D&&(a={type:"pattern",x:0,y:0,src:I.getAssetUrl(`esri/symbols/patterns/${D}.png`),width:5,height:5});break;case "picture-fill":a={type:"pattern",src:y.url,width:U.pt2px(y.width)*y.xscale,height:U.pt2px(y.height)*y.yscale,x:U.pt2px(y.xoffset),y:U.pt2px(y.yoffset)};break;case "text":a=y.color;break;case "cim":a=V.getCIMSymbolColor(y)}return a};W.getPatternUrlWithColor=function(y,D){const a=y+"-"+D;return void 0!==C.get(a)?
Promise.resolve(C.get(a)):N(y,{responseType:"image"}).then(m=>{m=m.data;const c=m.naturalWidth,b=m.naturalHeight,k=document.createElement("canvas");k.width=c;k.height=b;const t=k.getContext("2d");t.fillStyle=D;t.fillRect(0,0,c,b);t.globalCompositeOperation="destination-in";t.drawImage(m,0,0);m=k.toDataURL();C.put(a,m);return m})};W.getSVGAlign=function(y){return y=(y=y.horizontalAlignment)&&M[y.toLowerCase()]||"middle"};W.getSVGBaseline=function(y){return(y=y.verticalAlignment)&&L[y.toLowerCase()]||
"alphabetic"};W.getSVGBaselineShift=function(y){return"bottom"===y.verticalAlignment?"super":null};W.getStroke=Y;Object.defineProperty(W,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(W){return function(){function I(N,l){this._storage=new W.MemCacheStorage;this._storage.maxSize=N;l&&this._storage.registerRemoveFunc("",l)}var w=I.prototype;w.put=function(N,l){this._storage.put(N,l,1,1)};w.pop=function(N){return this._storage.pop(N)};w.get=function(N){return this._storage.get(N)};
w.clear=function(){this._storage.clearAll()};w.destroy=function(){this._storage.destroy()};return I}()})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(W,I,w){function N(e){e=w.toCIMSymbolJSON(e);if("CIMTextSymbol"===e.type)return e.height;let y=0;if(e.symbolLayers)for(const D of e.symbolLayers)w.isCIMMarker(D)&&D.size>y?y=D.size:w.isCIMStroke(D)&&D.width>y?y=D.width:w.isCIMFill(D);return y}function l(e,y,D,a){if("CIMTextSymbol"===e.type)e.height*=
y;else{if(D&&e.effects)for(const m of e.effects)Y(m,y);if(e.symbolLayers)for(const m of e.symbolLayers)switch(m.type){case "CIMPictureMarker":case "CIMVectorMarker":U(m,y,a);break;case "CIMPictureStroke":case "CIMSolidStroke":null!=a&&a.preserveOutlineWidth||(m.width*=y);break;case "CIMPictureFill":m.height*=y;m.offsetX*=y;m.offsetY*=y;break;case "CIMHatchFill":l(m.lineSymbol,y,!0,{...a,preserveOutlineWidth:!1}),m.offsetX*=y,m.offsetY*=y,m.separation*=y}}}function U(e,y,D){e.markerPlacement&&V(e.markerPlacement,
y);e.offsetX*=y;e.offsetY*=y;e.anchorPoint&&"Absolute"===e.anchorPointUnits&&(e.anchorPoint={x:e.anchorPoint.x*y,y:e.anchorPoint.y*y});e.size*=y;if("CIMVectorMarker"===e.type&&e.markerGraphics)for(const a of e.markerGraphics)e.scaleSymbolsProportionally||l(a.symbol,y,!0,D)}function V(e,y){w.isCIMMarkerStrokePlacement(e)&&(e.offset*=y);switch(e.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":e.customEndingOffset*=y;e.offsetAlongLine*=y;if(e.placementTemplate&&
e.placementTemplate.length){var D=e.placementTemplate.map(a=>a*y);e.placementTemplate=D}break;case "CIMMarkerPlacementAlongLineVariableSize":e.maxRandomOffset*=y;e.placementTemplate&&e.placementTemplate.length&&(D=e.placementTemplate.map(a=>a*y),e.placementTemplate=D);break;case "CIMMarkerPlacementOnLine":e.startPointOffset*=y;break;case "CIMMarkerPlacementAtExtremities":e.offsetAlongLine*=y;break;case "CIMMarkerPlacementAtRatioPositions":e.beginPosition*=y;e.endPosition*=y;break;case "CIMMarkerPlacementPolygonCenter":e.offsetX*=
y;e.offsetY*=y;break;case "CIMMarkerPlacementInsidePolygon":e.offsetX*=y,e.offsetY*=y,e.stepX*=y,e.stepY*=y}}function Y(e,y){switch(e.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":e.width*=y;break;case "CIMGeometricEffectBuffer":e.size*=y;break;case "CIMGeometricEffectCut":e.beginCut*=y;e.endCut*=y;e.middleCut*=y;break;case "CIMGeometricEffectDashes":e.customEndingOffset*=y;e.offsetAlongLine*=y;if(e.dashTemplate&&e.dashTemplate.length){const D=e.dashTemplate.map(a=>a*y);e.dashTemplate=
D}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":e.length*=y;break;case "CIMGeometricEffectMove":e.offsetX*=y;e.offsetY*=y;break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":e.offset*=y;break;case "CIMGeometricEffectRegularPolygon":e.radius*=y;break;case "CIMGeometricEffectTaperedPolygon":e.fromWidth*=y;e.length*=y;e.toWidth*=y;break;case "CIMGeometricEffectWave":e.amplitude*=y,e.period*=y}}function M(e,y){let D;D="CIMTextSymbol"===
e.type?e.symbol:e;e="CIMPolygonSymbol"===e.type;if(D.symbolLayers)for(const a of D.symbolLayers)if(!(a.colorLocked||e&&(w.isCIMStroke(a)||w.isCIMMarker(a)&&a.markerPlacement&&w.isCIMMarkerStrokePlacement(a.markerPlacement))))switch(a.type){case "CIMVectorMarker":a.markerGraphics.forEach(m=>{M(m.symbol,y)});break;case "CIMSolidStroke":case "CIMSolidFill":L(y,a.color);break;case "CIMHatchFill":M(a.lineSymbol,y)}}function L(e,y){for(const D of e)if(D.join(".")===y.join("."))return;e.push(y)}function C(e,
y){var D="CIMTextSymbol"===e.type?e.symbol:e;e="CIMPolygonSymbol"===e.type?!0:!1;if(D.symbolLayers)for(const a of D.symbolLayers)if(!(a.colorLocked||e&&(w.isCIMStroke(a)||w.isCIMMarker(a)&&a.markerPlacement&&w.isCIMMarkerStrokePlacement(a.markerPlacement))))switch(D=y.toArray(0),a.type){case "CIMVectorMarker":a.markerGraphics.forEach(m=>{C(m.symbol,y)});break;case "CIMSolidStroke":case "CIMSolidFill":a.color=D;break;case "CIMHatchFill":C(a.lineSymbol,y)}}W.applyCIMSymbolColor=function(e,y){y instanceof
I||(y=new I(y));e=w.toCIMSymbolJSON(e);C(e,y)};W.applyCIMSymbolRotation=function(e,y,D=!1){e=w.toCIMSymbolJSON(e);D&&0!==y&&(y=360-y);if("CIMTextSymbol"===e.type)e.angle=y;else if("CIMPointSymbol"===e.type&&e.symbolLayers){D=y-(e.angle||0);for(const a of e.symbolLayers)if(w.isCIMMarker(a)){let m=a.rotation||0;m=a.rotateClockwise?m-D:m+D;a.rotation=m}e.angle=y}};W.getCIMSymbolColor=function(e){e=w.toCIMSymbolJSON(e);const y=[];M(e,y);return y.length?new I(w.fromCIMColor(y[0])):null};W.getCIMSymbolRotation=
function(e,y=!1){e=w.toCIMSymbolJSON(e);return"CIMTextSymbol"===e.type||"CIMPointSymbol"===e.type?y&&0!==e.angle?360-e.angle:e.angle||0:0};W.getCIMSymbolSize=N;W.scaleCIMMarker=U;W.scaleCIMSymbolTo=function(e,y,D){const a=w.toCIMSymbolJSON(e);e=N(e);if(0===e)if("CIMTextSymbol"===a.type)a.height=y;else{if(a.symbolLayers)for(const m of a.symbolLayers)switch(m.type){case "CIMPictureMarker":case "CIMVectorMarker":m.size=y;break;case "CIMPictureStroke":case "CIMSolidStroke":m.width=y}}else l(a,y/e,!1,
D)};Object.defineProperty(W,"__esModule",{value:!0})})},"esri/symbols/cim/utils":function(){define(["exports"],function(W){function I(w,N){"string"!==typeof w&&(w=String(w));switch(N){case "LowerCase":return w.toLowerCase();case "Allcaps":return w.toUpperCase();default:return w}}W._adjustTextCase=I;W.colorToArray=function(w){return[w.r,w.g,w.b,w.a]};W.createLabelOverrideFunction=function(w,N,l){const U=L=>{let C=L.length;for(;C--;)if(-1===" /-,\n".indexOf(L.charAt(C)))return!1;return!0},V=[];var Y=
0;let M=-1;do M=N.indexOf("[",Y),M>=Y&&(M>Y&&(Y=N.substr(Y,M-Y),V.push([Y,null,U(Y)])),Y=M+1,M=N.indexOf("]",Y),M>=Y&&(M>Y&&(Y=N.substr(Y,M-Y),(Y=w[Y])&&V.push([null,Y,!1])),Y=M+1));while(-1!==M);Y<N.length-1&&(w=N.substr(Y),V.push([w,null,U(w)]));return L=>{let C="",e=null;for(const y of V){const [D,a,m]=y;if(D)m?e=D:(e&&(C+=e,e=null),C+=D);else{const c=L.attributes[a];c&&(e&&(C+=e,e=null),C+=c)}}return I(C,l)}};W.evaluateValueOrFunction=function(w,N,l,U){return"function"===typeof w?w(N,l,U):w};
W.fromCIMColor=function(w){return w?{r:w[0],g:w[1],b:w[2],a:w[3]/255}:{r:0,g:0,b:0,a:0}};W.isCIMFill=function(w){return"CIMGradientFill"===w.type||"CIMHatchFill"===w.type||"CIMPictureFill"===w.type||"CIMSolidFill"===w.type||"CIMWaterFill"===w.type};W.isCIMMarker=function(w){return"CIMVectorMarker"===w.type||"CIMPictureMarker"===w.type||"CIMBarChartMarker"===w.type||"CIMCharacterMarker"===w.type||"CIMPieChartMarker"===w.type||"CIMStackedBarChartMarker"===w.type};W.isCIMMarkerStrokePlacement=function(w){return"CIMMarkerPlacementAlongLineRandomSize"===
w.type||"CIMMarkerPlacementAlongLineSameSize"===w.type||"CIMMarkerPlacementAlongLineVariableSize"===w.type||"CIMMarkerPlacementAtExtremities"===w.type||"CIMMarkerPlacementAtMeasuredUnits"===w.type||"CIMMarkerPlacementAtRatioPositions"===w.type||"CIMMarkerPlacementOnLine"===w.type||"CIMMarkerPlacementOnVertices"===w.type};W.isCIMStroke=function(w){return"CIMGradientStroke"===w.type||"CIMPictureStroke"===w.type||"CIMSolidStroke"===w.type};W.resampleHermite=function(w,N,l,U,V,Y,M=!0){const L=N/V;l/=
Y;const C=Math.ceil(L/2),e=Math.ceil(l/2);for(let a=0;a<Y;a++)for(let m=0;m<V;m++){const c=4*(m+(M?Y-a-1:a)*V);var y=0;let b=0,k=0,t=0,q=0,h=0,d=0;const p=(a+.5)*l;for(let z=Math.floor(a*l);z<(a+1)*l;z++){var D=Math.abs(p-(z+.5))/e;const u=(m+.5)*L;D*=D;for(let v=Math.floor(m*L);v<(m+1)*L;v++){let A=Math.abs(u-(v+.5))/C;y=Math.sqrt(D+A*A);-1<=y&&1>=y&&(y=2*y*y*y-3*y*y+1,0<y&&(A=4*(v+z*N),d+=y*w[A+3],k+=y,255>w[A+3]&&(y=y*w[A+3]/250),t+=y*w[A],q+=y*w[A+1],h+=y*w[A+2],b+=y))}}U[c]=t/b;U[c+1]=q/b;U[c+
2]=h/b;U[c+3]=d/k}};W.toCIMSymbolJSON=function(w){var N;return null==(N=w.data)?void 0:N.symbol};Object.defineProperty(W,"__esModule",{value:!0})})},"esri/layers/support/DimensionalDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),function(W,
I,w,N,l,U,V,Y,M){var L;w=L=function(C){function e(y){y=C.call(this,y)||this;y.variableName=null;y.dimensionName=null;y.values=[];y.isSlice=!1;return y}W._inheritsLoose(e,C);e.prototype.clone=function(){return new L({variableName:this.variableName,dimensionName:this.dimensionName,values:N.clone(this.values),isSlice:this.isSlice})};return e}(w.JSONSupport);I.__decorate([l.property({type:String,json:{write:!0}})],w.prototype,"variableName",void 0);I.__decorate([l.property({type:String,json:{write:!0}})],
w.prototype,"dimensionName",void 0);I.__decorate([l.property({type:U.types.array(U.types.oneOf([U.types.native(Number),U.types.array(U.types.native(Number))])),json:{write:!0}})],w.prototype,"values",void 0);I.__decorate([l.property({type:Boolean,json:{write:!0}})],w.prototype,"isSlice",void 0);return w=L=I.__decorate([M.subclass("esri.layers.support.DimensionalDefinition")],w)})},"esri/layers/support/ExportImageServiceParameters":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/aliasOf ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./imageryRendererUtils ./MosaicRule ./rasterEnums ./RasterFunction".split(" "),
function(W,I,w,N,l,U,V,Y,M,L,C,e,y,D,a){W.ExportImageServiceParameters=function(m){function c(){var k=m.apply(this,arguments)||this;k.layer=null;k.adjustAspectRatio=void 0;k.bandIds=void 0;k.compression=void 0;k.compressionQuality=void 0;k.compressionTolerance=.01;k.format=null;k.interpolation=null;k.noData=null;k.noDataInterpretation=void 0;k.pixelType=void 0;k.lercVersion=2;return k}I._inheritsLoose(c,m);var b=c.prototype;b.writeAdjustAspectRatio=function(k,t,q){10.3>this.layer.version||(t[q]=k)};
b.writeCompressionQuality=function(k,t,q){this.format&&-1<this.format.toLowerCase().indexOf("jpg")&&null!=k&&(t[q]=k)};b.writeCompressionTolerance=function(k,t,q){"lerc"===this.format&&null!=k&&(t[q]=k)};b.writeLercVersion=function(k,t,q){"lerc"===this.format&&10.5<=this.layer.version&&(t[q]=k)};b.combineRendererWithRenderingRule=function(){var k;const t=this.layer,{rasterInfo:q,renderingRule:h,renderer:d}=t;return d&&e.isSupportedRendererType(d)?e.combineRenderingRules(e.convertRendererToRenderingRule(d,
{rasterAttributeTable:q.attributeTable,pixelType:q.pixelType,dataType:q.dataType,bandProperties:null==(k=q.keyProperties)?void 0:k.BandProperties,convertColorRampToColormap:10.6>t.version}),h):h};b._addResampleRasterFunction=function(k){var t;if("vector-field"!==(null==(t=this.layer.renderer)?void 0:t.type)||"Resample"===(null==k?void 0:k.functionName))return k;t=new a({functionName:"Resample",functionArguments:{ResamplingType:"esriImageServiceDataTypeVector-UV"===this.layer.serviceDataType?7:10,
InputCellSize:{x:this.layer.pixelSizeX,y:this.layer.pixelSizeY}}});return e.combineRenderingRules(t,k)};I._createClass(c,[{key:"version",get:function(){const k=this.layer;k.commitProperty("bandIds");k.commitProperty("format");k.commitProperty("compressionQuality");k.commitProperty("compressionTolerance");k.commitProperty("interpolation");k.commitProperty("noData");k.commitProperty("noDataInterpretation");k.commitProperty("mosaicRule");k.commitProperty("renderingRule");k.commitProperty("adjustAspectRatio");
k.commitProperty("pixelFilter");k.commitProperty("renderer");k.commitProperty("definitionExpression");return(this._get("version")||0)+1},set:function(k){this._set("version",k)}},{key:"mosaicRule",get:function(){var k=this.layer;let t=k.mosaicRule;k=k.definitionExpression;t?k&&k!==t.where&&(t=t.clone(),t.where=k):k&&(t=new y({where:k}));return t}},{key:"renderingRule",get:function(){var k=this.layer;let t=k.renderingRule;const q=k.pixelFilter;k=!k.format||-1<k.format.indexOf("jpg")||-1<k.format.indexOf("png");
t=this._addResampleRasterFunction(t);k&&!q&&(t=this.combineRendererWithRenderingRule());return t}}]);return c}(N.JSONSupport);w.__decorate([M.property()],W.ExportImageServiceParameters.prototype,"layer",void 0);w.__decorate([M.property({json:{write:!0}})],W.ExportImageServiceParameters.prototype,"adjustAspectRatio",void 0);w.__decorate([C.writer("adjustAspectRatio")],W.ExportImageServiceParameters.prototype,"writeAdjustAspectRatio",null);w.__decorate([M.property({json:{write:!0}}),l.aliasOf("layer.bandIds")],
W.ExportImageServiceParameters.prototype,"bandIds",void 0);w.__decorate([M.property({json:{write:!0}})],W.ExportImageServiceParameters.prototype,"compression",void 0);w.__decorate([M.property({json:{write:!0}}),l.aliasOf("layer.compressionQuality")],W.ExportImageServiceParameters.prototype,"compressionQuality",void 0);w.__decorate([C.writer("compressionQuality")],W.ExportImageServiceParameters.prototype,"writeCompressionQuality",null);w.__decorate([M.property({json:{write:!0}}),l.aliasOf("layer.compressionTolerance")],
W.ExportImageServiceParameters.prototype,"compressionTolerance",void 0);w.__decorate([C.writer("compressionTolerance")],W.ExportImageServiceParameters.prototype,"writeCompressionTolerance",null);w.__decorate([M.property({json:{write:!0}}),l.aliasOf("layer.format")],W.ExportImageServiceParameters.prototype,"format",void 0);w.__decorate([M.property({type:String,json:{read:{reader:D.interpolationKebab.read},write:{writer:D.interpolationKebab.write}}}),l.aliasOf("layer.interpolation")],W.ExportImageServiceParameters.prototype,
"interpolation",void 0);w.__decorate([M.property({json:{write:!0}}),l.aliasOf("layer.noData")],W.ExportImageServiceParameters.prototype,"noData",void 0);w.__decorate([M.property({type:String,json:{read:{reader:D.noDataInterpretationKebab.read},write:{writer:D.noDataInterpretationKebab.write}}}),l.aliasOf("layer.noDataInterpretation")],W.ExportImageServiceParameters.prototype,"noDataInterpretation",void 0);w.__decorate([M.property({json:{write:!0}})],W.ExportImageServiceParameters.prototype,"pixelType",
void 0);w.__decorate([M.property({json:{write:!0}})],W.ExportImageServiceParameters.prototype,"lercVersion",void 0);w.__decorate([C.writer("lercVersion")],W.ExportImageServiceParameters.prototype,"writeLercVersion",null);w.__decorate([M.property({type:Number})],W.ExportImageServiceParameters.prototype,"version",null);w.__decorate([M.property({json:{write:!0}})],W.ExportImageServiceParameters.prototype,"mosaicRule",null);w.__decorate([M.property({json:{write:!0}})],W.ExportImageServiceParameters.prototype,
"renderingRule",null);W.ExportImageServiceParameters=w.__decorate([L.subclass("esri.layers.mixins.ExportImageServiceParameters")],W.ExportImageServiceParameters);Object.defineProperty(W,"__esModule",{value:!0})})},"esri/layers/support/imageryRendererUtils":function(){define("exports ../../core/lang ./RasterFunction ../../renderers/support/colorRampUtils ../../renderers/support/stretchRendererUtils ../../renderers/visualVariables/SizeVariable".split(" "),function(W,I,w,N,l,U){function V(b){const k=
b.Raster;return k&&"esri.layers.support.RasterFunction"===k.declaredClass?V(k.functionArguments):b}function Y(b,k){const t=new w;t.functionName="VectorFieldRenderer";const {dataType:q,bandProperties:h}=k;k="vector-uv"===q?!0:!1;let d,p;h&&2===h.length&&(d=h.map(A=>A.BandName.toLowerCase()).indexOf("magnitude"),p=h.map(A=>A.BandName.toLowerCase()).indexOf("direction"));if(-1===d||null===d)d=0,p=1;const z="arithmetic"===b.rotationType?1:2,u="flow-from"===b.flowRepresentation?0:1,v=b.visualVariables?
b.visualVariables.filter(A=>"Magnitude"===A.field)[0]:new U;b={magnitudeBandID:d,directionBandID:p,isUVComponents:k,referenceSystem:z,massFlowAngleRepresentation:u,symbolTileSize:50,symbolTileSizeUnits:100,calculationMethod:"Vector Average",symbologyName:a[b.style.toLowerCase().replace("-","_")],minimumMagnitude:v.minDataValue,maximumMagnitude:v.maxDataValue,minimumSymbolSize:v.minSize,maximumSymbolSize:v.maxSize};t.functionArguments=b;return t}function M(b,k){const t=[],q=[],h=[],d=[],{pixelType:p,
rasterAttributeTable:z}=k,u=z&&z.features,v=C(z);if(u&&Array.isArray(u)&&b.classBreakInfos){b.classBreakInfos.forEach((E,r)=>{const n=E.symbol.color;let x;n.a&&u.forEach(B=>{x=B.attributes[b.field];(x>=E.minValue&&x<E.maxValue||r===b.classBreakInfos.length-1&&x>=E.minValue)&&d.push([B.attributes[v],n.r,n.g,n.b])})});k=p?L(d,p):d;var A=new w;A.functionName="Colormap";A.functionArguments={};A.functionArguments.Colormap=k;A.variableName="Raster";return A}b.classBreakInfos.forEach((E,r)=>{const n=E.symbol&&
E.symbol.color;n.a?(0===r?t.push(E.minValue,E.maxValue+1E-6):t.push(E.minValue+1E-6,E.maxValue+1E-6),q.push(r),d.push([r,n.r,n.g,n.b])):h.push(E.minValue,E.maxValue)});k=p?L(d,p):d;A=new w;A.functionName="Remap";A.functionArguments={InputRanges:t,OutputValues:q,NoDataRanges:h};A.variableName="Raster";const P=new w;P.functionName="Colormap";P.functionArguments={Colormap:k,Raster:A};return P}function L(b,k){(k=D[String(k).toLowerCase()])&&b.push([Math.floor(k[0]-1),0,0,0],[Math.ceil(k[1]+1),0,0,0]);
return b}function C(b){if(b)return{fields:b}=b,(b=b&&b.find(k=>k&&k.name&&"value"===k.name.toLowerCase()))&&b.name}function e(b,k){var t;const q=[],{pixelType:h,rasterAttributeTable:d}=k;k=d&&d.features;const p=C(d),z=null==(t=b.defaultSymbol)?void 0:t.color;let u=!1;b.uniqueValueInfos&&(k?k.forEach(v=>{var A;const P=null==(A=b.uniqueValueInfos.find(E=>String(v.attributes[b.field])===String(E.value)))?void 0:A.symbol.color;P?q.push([v.attributes[p],P.r,P.g,P.b]):z&&q.push([v.attributes[p],z.r,z.g,
z.b])}):b.uniqueValueInfos.forEach(v=>{var A;null!=(A=v.symbol.color)&&A.a&&(A=v.symbol.color,isNaN(+v.value)?u=!0:q.push([+v.value,A.r,A.g,A.b]))}));if(u)return null;t=h&&0<q.length?L(q,h):q;k=new w;k.functionName="Colormap";k.functionArguments={};k.functionArguments.Colormap=t;k.variableName="Raster";return k}function y(b){const k=[];b.forEach(t=>{Array.isArray(t)?k.push(t):null!=t.min&&null!=t.max&&k.push([t.min,t.max,t.avg||0,t.stddev||0])});return k}const D={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,
255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767]},a={simple_scalar:"Simple Scalar",wind_barb:"Wind Barb",single_arrow:"Single Arrow",beaufort_kn:"Beaufort Wind (Knots)",beaufort_m:"Beaufort Wind (MetersPerSecond)",ocean_current_m:"Ocean Current (MetersPerSecond)",ocean_current_kn:"Ocean Current (Knots)"},m=new Set("raster-stretch unique-value class-breaks raster-shaded-relief vector-field raster-colormap".split(" ")),c={none:0,standardDeviation:3,histogramEqualization:4,minMax:5,percentClip:6,
sigmoid:9};W.combineRenderingRules=function(b,k){if(!b||!k)return I.clone(b||k);b=I.clone(b);"none"!==k.functionName.toLowerCase()&&(V(b.functionArguments).Raster=k);return b};W.convertRendererToRenderingRule=function(b,k){k=k||{};switch(b.type){case "raster-stretch":var t=new w;t.functionName="Stretch";var q=c[l.stretchTypeJSONDict.toJSON(b.stretchType)],h=y(b.statistics);h={StretchType:q,Statistics:h,DRA:b.dynamicRangeAdjustment,UseGamma:b.useGamma,Gamma:b.gamma,ComputeGamma:b.computeGamma};null!=
b.outputMin&&(h.Min=b.outputMin);null!=b.outputMax&&(h.Max=b.outputMax);q===c.standardDeviation?(h.NumberOfStandardDeviations=b.numberOfStandardDeviations,t.outputPixelType="u8"):q===c.percentClip?(h.MinPercent=b.minPercent,h.MaxPercent=b.maxPercent,t.outputPixelType="u8"):q===c.minMax?t.outputPixelType="u8":q===c.sigmoid&&(h.SigmoidStrengthLevel=b.sigmoidStrengthLevel);t.functionArguments=h;t.variableName="Raster";if(b.colorRamp){q=b.colorRamp;h=new w;const d=N.getColorRampName(q);h.functionArguments=
d?{colorRamp:d}:!k.convertColorRampToColormap||"algorithmic"!==q.type&&"multipart"!==q.type?{colorRamp:b.colorRamp.toJSON()}:{Colormap:N.convertColorRampToColormap(q,256)};h.variableName="Raster";h.functionName="Colormap";h.functionArguments.Raster=t;b=h}else b=t;return b;case "class-breaks":return M(b,k);case "unique-value":return e(b,k);case "raster-colormap":return(b=b.extractColormap())&&0!==b.length?({pixelType:k}=k,b=k?L(b,k):b,k=new w,k.functionName="Colormap",k.functionArguments={},k.functionArguments.Colormap=
b,b=k):b=void 0,b;case "vector-field":return Y(b,k);case "raster-shaded-relief":return"elevation"!==k.dataType?b=new w:(k=new w,k.functionName="Hillshade",t="traditional"===b.hillshadeType?0:1,q="none"===b.scalingType?1:3,h={HillshadeType:t,SlopeType:q,ZFactor:b.zFactor},0===t&&(h.Azimuth=b.azimuth,h.Altitude=b.altitude),3===q&&(h.PSPower=b.pixelSizePower,h.PSZFactor=b.pixelSizeFactor),k.functionArguments=h,k.variableName="Raster",b.colorRamp&&(k.functionName="ShadedRelief",h.Colormap=N.convertColorRampToColormap(b.colorRamp,
256)),b=k),b}};W.isSupportedRendererType=function(b){return m.has(b.type)};W.pixelTypeRanges=D;Object.defineProperty(W,"__esModule",{value:!0})})},"esri/layers/support/RasterFunction":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer".split(" "),
function(W,I,w,N,l,U,V,Y,M,L,C,e){var y;const D=new Set(["raster","raster2","dem","fillraster"]),a=new Set(["rasters"]),m=h=>h&&h.rasterFunction?q.fromJSON(h):h,c=h=>h&&h instanceof q?h.toJSON():h,b=h=>(null==h?void 0:h.functionName)&&!h.declaredClass,k=h=>b(h)?new q(h):h;var t;(function(h){h[h.MOSAIC=0]="MOSAIC";h[h.GROUP=1]="GROUP";h[h.ITEM=2]="ITEM"})(t||(t={}));let q=y=function(h){function d(z){z=h.call(this,z)||this;z.functionName=null;z.outputPixelType="unknown";z.variableName=null;z.description=
null;z.functionDefinition=null;z.thumbnail=null;return z}W._inheritsLoose(d,h);var p=d.prototype;p.readFunctionArguments=function(z,u){z=u.arguments||u.rasterFunctionArguments;if(null==z)var v=null;else{z=N.clone(z);u={};for(v of Object.keys(z))D.has(v.toLowerCase())?u[v]=m(z[v]):a.has(v.toLowerCase())&&Array.isArray(z[v])?u[v]=z[v].map(m):u[v]=z[v];v=u}return v};p.writeFunctionArguments=function(z,u,v){const A={};for(const P of Object.keys(z))D.has(P.toLowerCase())?A[P]=c(z[P]):a.has(P.toLowerCase())&&
Array.isArray(z[P])?A[P]=z[P].map(c):A[P]=c(z[P]);this.functionDefinition?u.arguments=A:u[v]=A};p.readFunctionName=function(z,u){z=u.rasterFunctionInfos;const v=u.name;return v?v:z&&z.length&&"None"!==z[0].name?z[0].name:u.rasterFunction};p.writeFunctionName=function(z,u,v){this.functionDefinition?u.name=z:u[v]=z};p.readFunctionType=function(z){return t[z]};p.writeFunctionType=function(z,u,v){u[v]=t[z]};p.clone=function(){return new y({functionName:this.functionName,functionArguments:N.clone(this.functionArguments),
outputPixelType:this.outputPixelType,variableName:this.variableName,description:this.description,functionType:this.functionType,functionDefinition:this.functionDefinition,thumbnail:this.thumbnail})};W._createClass(d,[{key:"functionArguments",set:function(z){if(z){const u=Object.keys(z);if(u.some(v=>D.has(v.toLowerCase())&&b(z[v]))||u.some(v=>a.has(v.toLowerCase())&&Array.isArray(z[v])&&z[v].some(A=>b(A)))){z=N.clone(z);for(const v of u)D.has(v.toLowerCase())?z[v]=k(z[v]):a.has(v.toLowerCase())&&Array.isArray(z[v])&&
(z[v]=z[v].map(A=>k(A)))}}this._set("functionArguments",z)}}]);return d}(w.JSONSupport);I.__decorate([l.property({json:{type:Object,write:{target:"rasterFunctionArguments"}}})],q.prototype,"functionArguments",null);I.__decorate([L.reader("functionArguments",["rasterFunctionArguments","arguments"])],q.prototype,"readFunctionArguments",null);I.__decorate([e.writer("functionArguments")],q.prototype,"writeFunctionArguments",null);I.__decorate([l.property({json:{type:String,write:{target:"rasterFunction"}}})],
q.prototype,"functionName",void 0);I.__decorate([L.reader("functionName",["rasterFunction","rasterFunctionInfos","name"])],q.prototype,"readFunctionName",null);I.__decorate([e.writer("functionName")],q.prototype,"writeFunctionName",null);I.__decorate([M.enumeration({C128:"c128",C64:"c64",F32:"f32",F64:"f64",S16:"s16",S32:"s32",S8:"s8",U1:"u1",U16:"u16",U2:"u2",U32:"u32",U4:"u4",U8:"u8",UNKNOWN:"unknown"},{ignoreUnknown:!1}),l.property({json:{default:"unknown"}})],q.prototype,"outputPixelType",void 0);
I.__decorate([l.property({type:String,json:{read:!0,write:!0}})],q.prototype,"variableName",void 0);I.__decorate([l.property({type:String,json:{read:!0,write:!0,origins:{"web-document":{read:!1,write:!1}}}})],q.prototype,"description",void 0);I.__decorate([l.property({json:{origins:{"web-document":{read:!1,write:!1}}}})],q.prototype,"functionType",void 0);I.__decorate([L.reader("functionType")],q.prototype,"readFunctionType",null);I.__decorate([e.writer("functionType")],q.prototype,"writeFunctionType",
null);I.__decorate([l.property({type:Object,json:{read:{source:"function"},write:{target:"function"},origins:{"web-document":{read:!1,write:!1}}}})],q.prototype,"functionDefinition",void 0);I.__decorate([l.property({type:String,json:{read:!0,write:!0,origins:{"web-document":{read:!1,write:!1}}}})],q.prototype,"thumbnail",void 0);return q=y=I.__decorate([C.subclass("esri.layers.support.RasterFunction")],q)})},"esri/layers/support/MosaicRule":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/ensureType ../../geometry/Point ./DimensionalDefinition ./RasterFunction".split(" "),
function(W,I,w,N,l,U,V,Y,M,L,C,e,y,D,a){var m;const c=w.strict()({MT_FIRST:"first",MT_LAST:"last",MT_MIN:"min",MT_MAX:"max",MT_MEAN:"mean",MT_BLEND:"blend",MT_SUM:"sum"}),b=w.strict()({esriMosaicNone:"none",esriMosaicCenter:"center",esriMosaicNadir:"nadir",esriMosaicViewpoint:"viewpoint",esriMosaicAttribute:"attribute",esriMosaicLockRaster:"lock-raster",esriMosaicNorthwest:"northwest",esriMosaicSeamline:"seamline"});w=m=function(k){function t(h){h=k.call(this,h)||this;h.ascending=!0;h.itemRenderingRule=
null;h.lockRasterIds=null;h.method=null;h.multidimensionalDefinition=null;h.objectIds=null;h.operation=null;h.sortField=null;h.sortValue=null;h.viewpoint=null;h.where=null;return h}W._inheritsLoose(t,k);var q=t.prototype;q.readAscending=function(h,d){return null!=d.ascending?d.ascending:null!=d.sortAscending?d.sortAscending:!0};q.readMethod=function(h,d){h=d.mosaicMethod||d.defaultMosaicMethod;switch(h?h.toLowerCase().replace("esrimosaic",""):""){case "byattribute":case "attribute":h="esriMosaicAttribute";
break;case "lockraster":h="esriMosaicLockRaster";break;case "center":h="esriMosaicCenter";break;case "northwest":h="esriMosaicNorthwest";break;case "nadir":h="esriMosaicNadir";break;case "viewpoint":h="esriMosaicViewpoint";break;case "seamline":h="esriMosaicSeamline";break;case "none":h="esriMosaicNone";break;default:h="esriMosaicNone"}return h=b.fromJSON(h)};q.readOperation=function(h,d){h=d.mosaicOperation;d=d.mosaicOperator&&d.mosaicOperator.toLowerCase();d=h||(d?c.toJSON(d):null);return c.fromJSON(d)||
"first"};q.castSortValue=function(h){return null==h||"string"===typeof h||"number"===typeof h?h:`${h}`};q.clone=function(){return new m({ascending:this.ascending,itemRenderingRule:l.clone(this.itemRenderingRule),lockRasterIds:l.clone(this.lockRasterIds),method:this.method,multidimensionalDefinition:l.clone(this.multidimensionalDefinition),objectIds:l.clone(this.objectIds),operation:this.operation,sortField:this.sortField,sortValue:this.sortValue,viewpoint:l.clone(this.viewpoint),where:this.where})};
return t}(N.JSONSupport);I.__decorate([U.property({type:Boolean,json:{write:!0}})],w.prototype,"ascending",void 0);I.__decorate([L.reader("ascending",["ascending","sortAscending"])],w.prototype,"readAscending",null);I.__decorate([U.property({type:a,json:{write:!0}})],w.prototype,"itemRenderingRule",void 0);I.__decorate([U.property({type:[e.Integer],json:{write:{overridePolicy(){return{enabled:"lock-raster"===this.method}}}}})],w.prototype,"lockRasterIds",void 0);I.__decorate([U.property({type:String,
json:{type:b.jsonValues,write:{target:"mosaicMethod",writer:b.write}}})],w.prototype,"method",void 0);I.__decorate([L.reader("method",["mosaicMethod","defaultMosaicMethod"])],w.prototype,"readMethod",null);I.__decorate([U.property({type:[D],json:{write:!0}})],w.prototype,"multidimensionalDefinition",void 0);I.__decorate([U.property({type:[e.Integer],json:{name:"fids",write:!0}})],w.prototype,"objectIds",void 0);I.__decorate([U.property({json:{type:c.jsonValues,read:{reader:c.read},write:{target:"mosaicOperation",
writer:c.write}}})],w.prototype,"operation",void 0);I.__decorate([L.reader("operation",["mosaicOperation","mosaicOperator"])],w.prototype,"readOperation",null);I.__decorate([U.property({type:String,json:{write:{overridePolicy(){return{enabled:"attribute"===this.method}}}}})],w.prototype,"sortField",void 0);I.__decorate([U.property({type:[String,Number],json:{write:{allowNull:!0,overridePolicy(){return{enabled:"attribute"===this.method,allowNull:!0}}}}})],w.prototype,"sortValue",void 0);I.__decorate([V.cast("sortValue")],
w.prototype,"castSortValue",null);I.__decorate([U.property({type:y,json:{write:!0}})],w.prototype,"viewpoint",void 0);I.__decorate([U.property({type:String,json:{write:!0}})],w.prototype,"where",void 0);return w=m=I.__decorate([C.subclass("esri.layers.support.MosaicRule")],w)})},"esri/layers/support/rasterEnums":function(){define(["exports","../../core/jsonMap"],function(W,I){const w=I.strict()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"});
I=I.strict()({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"});W.interpolationKebab=w;W.noDataInterpretationKebab=I;Object.defineProperty(W,"__esModule",{value:!0})})},"esri/layers/support/RasterInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/SpatialReference ./RasterStorageInfo".split(" "),
function(W,I,w,N,l,U,V,Y,M,L,C,e){w=function(y){function D(a){a=y.call(this,a)||this;a.attributeTable=null;a.bandCount=null;a.colormap=null;a.extent=null;a.format=void 0;a.height=null;a.width=null;a.histograms=null;a.keyProperties={};a.multidimensionalInfo=null;a.noDataValue=null;a.pixelSize=null;a.pixelType=null;a.isPseudoSpatialReference=!1;a.spatialReference=null;a.statistics=null;a.storageInfo=null;a.transform=null;return a}W._inheritsLoose(D,y);W._createClass(D,[{key:"dataType",get:function(){var a,
m,c;const b=null!=(a=null==(m=this.keyProperties)?void 0:null==(c=m.DataType)?void 0:c.toLowerCase())?a:"generic";return"stdtime"===b?"standard-time":b}},{key:"nativeExtent",get:function(){return this._get("nativeExtent")||this.extent},set:function(a){a&&this._set("nativeExtent",a)}},{key:"nativePixelSize",get:function(){if(!N.isSome(this.transform)||!this.transform.affectsPixelSize)return this.pixelSize;const a=this.nativeExtent;return{x:a.width/this.width,y:a.height/this.height}}}]);return D}(w.JSONSupport);
I.__decorate([l.property({json:{write:!0}})],w.prototype,"attributeTable",void 0);I.__decorate([l.property({json:{write:!0}})],w.prototype,"bandCount",void 0);I.__decorate([l.property({json:{write:!0}})],w.prototype,"colormap",void 0);I.__decorate([l.property({type:String,readOnly:!0})],w.prototype,"dataType",null);I.__decorate([l.property({type:L,json:{write:!0}})],w.prototype,"extent",void 0);I.__decorate([l.property({type:L,json:{write:!0}})],w.prototype,"nativeExtent",null);I.__decorate([l.property({json:{write:!0}})],
w.prototype,"nativePixelSize",null);I.__decorate([l.property({json:{write:!0}})],w.prototype,"format",void 0);I.__decorate([l.property({json:{write:!0}})],w.prototype,"height",void 0);I.__decorate([l.property({json:{write:!0}})],w.prototype,"width",void 0);I.__decorate([l.property({json:{write:!0}})],w.prototype,"histograms",void 0);I.__decorate([l.property({json:{write:!0}})],w.prototype,"keyProperties",void 0);I.__decorate([l.property({json:{write:!0}})],w.prototype,"multidimensionalInfo",void 0);
I.__decorate([l.property()],w.prototype,"noDataValue",void 0);I.__decorate([l.property({json:{write:!0}})],w.prototype,"pixelSize",void 0);I.__decorate([l.property({json:{write:!0}})],w.prototype,"pixelType",void 0);I.__decorate([l.property()],w.prototype,"isPseudoSpatialReference",void 0);I.__decorate([l.property({type:C,json:{write:!0}})],w.prototype,"spatialReference",void 0);I.__decorate([l.property({json:{write:!0}})],w.prototype,"statistics",void 0);I.__decorate([l.property({type:e,json:{write:!0}})],
w.prototype,"storageInfo",void 0);I.__decorate([l.property({json:{write:!0}})],w.prototype,"transform",void 0);return w=I.__decorate([M.subclass("esri.layers.support.RasterInfo")],w)})},"esri/layers/support/RasterStorageInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),
function(W,I,w,N,l,U,V,Y,M){w=function(L){function C(){var e=L.apply(this,arguments)||this;e.blockWidth=void 0;e.blockHeight=void 0;e.compression=null;e.origin=null;e.firstPyramidLevel=null;e.maximumPyramidLevel=null;e.pyramidScalingFactor=2;e.pyramidBlockWidth=null;e.pyramidBlockHeight=null;e.isVirtualTileInfo=!1;e.tileInfo=null;e.blockBoundary=null;return e}W._inheritsLoose(C,L);return C}(w.JSONSupport);I.__decorate([N.property({type:Number,json:{write:!0}})],w.prototype,"blockWidth",void 0);I.__decorate([N.property({type:Number,
json:{write:!0}})],w.prototype,"blockHeight",void 0);I.__decorate([N.property({type:String,json:{write:!0}})],w.prototype,"compression",void 0);I.__decorate([N.property({type:M,json:{write:!0}})],w.prototype,"origin",void 0);I.__decorate([N.property({type:Number,json:{write:!0}})],w.prototype,"firstPyramidLevel",void 0);I.__decorate([N.property({type:Number,json:{write:!0}})],w.prototype,"maximumPyramidLevel",void 0);I.__decorate([N.property({json:{write:!0}})],w.prototype,"pyramidResolutions",void 0);
I.__decorate([N.property({type:Number,json:{write:!0}})],w.prototype,"pyramidScalingFactor",void 0);I.__decorate([N.property({type:Number,json:{write:!0}})],w.prototype,"pyramidBlockWidth",void 0);I.__decorate([N.property({type:Number,json:{write:!0}})],w.prototype,"pyramidBlockHeight",void 0);I.__decorate([N.property({type:Boolean,json:{write:!0}})],w.prototype,"isVirtualTileInfo",void 0);I.__decorate([N.property({json:{write:!0}})],w.prototype,"tileInfo",void 0);I.__decorate([N.property()],w.prototype,
"blockBoundary",void 0);return w=I.__decorate([Y.subclass("esri.layers.support.RasterStorageInfo")],w)})},"esri/layers/support/RasterJobHandler":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/Error","../../core/maybe","../../core/workers/workers","./PixelBlock"],function(W,I,w,N,l){return function(){function U(){this._workerThread=null;this._destroyed=!1}var V=U.prototype;V.initialize=function(){var Y=W._asyncToGenerator(function*(){const M=yield N.open("RasterWorker");this._destroyed?
M.close():this._workerThread=M});return function(){return Y.apply(this,arguments)}}();V.destroy=function(){this._destroyed=!0;this._workerThread&&(this._workerThread.close(),this._workerThread=null)};V.convertVectorFieldData=function(){var Y=W._asyncToGenerator(function*(M,L){if(!this._workerThread)throw new I("raster-jobhandler:no-connection","no available worker connection");return(M=yield this._workerThread.invoke("convertVectorFieldData",{pixelBlock:M.pixelBlock.toJSON(),type:M.dataType},L))?
new l(M):null});return function(M,L){return Y.apply(this,arguments)}}();V.decode=function(){var Y=W._asyncToGenerator(function*(M,L){if(!this._workerThread)throw new I("raster-jobhandler:no-connection","no available worker connection");return(M=yield this._workerThread.invoke("decode",M,L))?new l(M):null});return function(M,L){return Y.apply(this,arguments)}}();V.symbolize=function(){var Y=W._asyncToGenerator(function*(M,L){if(!this._workerThread)throw new I("raster-jobhandler:no-connection","no available worker connection");
M={extent:M.extent&&M.extent.toJSON(),pixelBlock:w.isSome(M.pixelBlock)&&M.pixelBlock.toJSON(),simpleStretchParams:M.simpleStretchParams,bandIds:M.bandIds};return(L=yield this._workerThread.invoke("symbolize",M,L))?new l(L):null});return function(M,L){return Y.apply(this,arguments)}}();V.updateSymbolizer=function(){var Y=W._asyncToGenerator(function*(M,L){var C;if(!this._workerThread)throw new I("raster-jobhandler:no-connection","no available worker connection");const e=null==M?void 0:null==(C=M.rendererJSON)?
void 0:C.histograms;yield Promise.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:M.toJSON(),histograms:e},L))});return function(M,L){return Y.apply(this,arguments)}}();V.stretch=function(){var Y=W._asyncToGenerator(function*(M,L){if(!this._workerThread)throw new I("raster-jobhandler:no-connection","no available worker connection");if(null==M||!M.pixelBlock)return null;M={srcPixelBlock:M.pixelBlock.toJSON(),stretchParams:M.stretchParams};return(L=yield this._workerThread.invoke("stretch",
M,L))?new l(L):null});return function(M,L){return Y.apply(this,arguments)}}();V.split=function(){var Y=W._asyncToGenerator(function*(M,L){if(!this._workerThread)throw new I("raster-jobhandler:no-connection","no available worker connection");if(null==M||!M.pixelBlock)return null;M={srcPixelBlock:M.pixelBlock.toJSON(),tileSize:M.tileSize,maximumPyramidLevel:M.maximumPyramidLevel};const C=yield this._workerThread.invoke("split",M,L);C&&C.forEach((e,y)=>{C.set(y,e?l.fromJSON(e):null)});return Promise.resolve(C)});
return function(M,L){return Y.apply(this,arguments)}}();V.estimateStatisticsHistograms=function(){var Y=W._asyncToGenerator(function*(M,L){if(!this._workerThread)throw new I("raster-jobhandler:no-connection","no available worker connection");if(null==M||!M.pixelBlock)return null;M={srcPixelBlock:M.pixelBlock.toJSON()};L=yield this._workerThread.invoke("estimateStatisticsHistograms",M,L);return Promise.resolve(L)});return function(M,L){return Y.apply(this,arguments)}}();V.mosaicAndTransform=function(){var Y=
W._asyncToGenerator(function*(M,L){var C;if(!this._workerThread)throw new I("raster-jobhandler:no-connection","no available worker connection");if(null==M||null==(C=M.srcPixelBlocks)||!C.length)return null;M={...M,srcPixelBlocks:M.srcPixelBlocks.map(e=>w.isSome(e)?e.toJSON():null)};return(L=yield this._workerThread.invoke("mosaicAndTransform",M,L))?new l(L):null});return function(M,L){return Y.apply(this,arguments)}}();return U}()})},"esri/layers/support/rasterFormats/RasterCodec":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../PixelBlock ./ImageCanvasDecoder ./JpgPlus ../../../chunks/TiffDecoder ../../../chunks/LercCodec ../../../chunks/Zlib ./Raw ./utils".split(" "),
function(W,I,w,N,l,U,V,Y,M,L,C){function e(u,v){if(!C.isPlatformLittleEndian)throw new w("rasterCoded:decode","lerc decoder is not supported on big endian platform");const {width:A,height:P,pixelType:E}=v;var r=q(E);const n=r.pixelTypeCtor;v=null==v.noDataValue?r.noDataValue:v.noDataValue;r=0;let x,B=0,S;const f=u.byteLength-10;for(;B<f;){var g=Y.decode(u,{inputOffset:B,encodedMaskData:x,returnMask:0===r?!0:!1,returnEncodedMask:0===r?!0:!1,returnFileInfo:!0,pixelType:n,noDataValue:v});if(A&&P&&(g.width!==
A||g.height!==P))throw new w("rasterCoded:decode","lerc decoded result has width or height different from specified in options");B=g.fileInfo.eofOffset;0===r&&(x=g.encodedMaskData,S=new N({width:g.width,height:g.height,pixels:[],pixelType:E,mask:g.maskData,statistics:[]}));r++;S.addData({pixels:g.pixelData,statistics:{minValue:g.minValue,maxValue:g.maxValue,noDataValue:g.noDataValue}});10<f-B&&(g=String.fromCharCode.apply(null,new Uint8Array(u,B,10)),B+=-1<g.indexOf("CntZ")?g.indexOf("CntZ"):0)}return S}
function y(u,v){if(!C.isPlatformLittleEndian)throw new w("rasterCoded:decode","lerc decoder is not supported on big endian platform");var A=0,P=v.offset||0,E=0;let r;let n;const x=v.eof||u.byteLength-10,B=[],{width:S,height:f}=v;for(v=0;P<x;){var g;var F=V.Lerc2Codec.decode(u,{inputOffset:P,maskData:r,returnFileInfo:!0});if(S&&f&&(F.width!==S||F.height!==f))throw new w("rasterCoded:decode","lerc2 decoded result has width or height different from what's specified in options");P=F.fileInfo.eofOffset;
r=F.maskData;0===A&&(E=F.fileInfo.numValidPixel,n=new N({width:F.width,height:F.height,pixels:[],pixelType:F.fileInfo.pixelType,mask:r,statistics:[]}));F.fileInfo.mask&&0<F.fileInfo.mask.numBytes&&v++;r&&B.push(r);if(1<F.dimCount&&(null==(g=F.pixelData)?void 0:g.length)===F.width*F.height*F.dimCount){var R,Q,X,aa;F.pixelData=F.pixelData.slice(-F.width*F.height);const H=null==(R=F.dimStats)?void 0:null==(Q=R.minValues)?void 0:Q[F.dimCount-1],J=null==(X=F.dimStats)?void 0:null==(aa=X.maxValues)?void 0:
aa[F.dimCount-1];null!=H&&null!=J&&(F.minValue=H,F.maxValue=J)}A++;n.addData({pixels:F.pixelData,statistics:{minValue:F.minValue,maxValue:F.maxValue}});10<x-P&&(F=String.fromCharCode.apply(null,new Uint8Array(u,P,10)),P+=-1<F.indexOf("Lerc")?F.indexOf("Lerc"):0)}P=A=u=0;if(1<v){P=n.width*n.height;r=new Uint8Array(P);r.set(B[0]);for(u=1;u<B.length;u++)for(E=B[u],A=0;A<P;A++)r[A]&=E[A];for(A=E=0;A<P;A++)E+=r[A];n.mask=r}n.validPixelCount=E;return n}function D(u,v){u=V.decode(u,v.pyramidLevel||0);u=
new N({width:u.width,height:u.height,pixels:u.pixels,pixelType:u.pixelType.toLowerCase(),mask:u.mask,statistics:null});u.updateStatistics();return u}function a(u){u=U.decode(u);u=new N({width:u.width,height:u.height,pixels:u.pixels,pixelType:"U8",mask:u.mask,statistics:null});u.updateStatistics();return u}function m(u,v){u=new Uint8Array(u);u=new p(u);const {width:A,height:P}=v;v=A*P;u=u.decode();let E=0;var r=0;let n;r=new Uint8Array(v);for(E=0;E<v;E++)r[E]=u[4*E+3];const x=new N({width:A,height:P,
pixels:[],pixelType:"U8",mask:r,statistics:[]});for(E=0;3>E;E++){n=new Uint8Array(v);for(r=0;r<v;r++)n[r]=u[4*r+E];x.addData({pixels:n})}x.updateStatistics();return x}function c(u,v,A,P){return b.apply(this,arguments)}function b(){b=I._asyncToGenerator(function*(u,v,A,P){u=yield(new l).decode(u,{applyJpegMask:!1,format:v,...A},P);u=new N(u);u.updateStatistics();return u});return b.apply(this,arguments)}function k(u){if(null==u)throw new w("rasterCodec:decode","parameter encodeddata is required.");
u=new Uint8Array(u,0,10);let v="";255===u[0]&&216===u[1]?v="jpg":137===u[0]&&80===u[1]&&78===u[2]&&71===u[3]?v="png":67===u[0]&&110===u[1]&&116===u[2]&&90===u[3]&&73===u[4]&&109===u[5]&&97===u[6]&&103===u[7]&&101===u[8]&&32===u[9]?v="lerc":76===u[0]&&101===u[1]&&114===u[2]&&99===u[3]&&50===u[4]&&32===u[5]?v="lerc2":73===u[0]&&73===u[1]&&42===u[2]&&0===u[3]||77===u[0]&&77===u[1]&&0===u[2]&&42===u[3]||73===u[0]&&73===u[1]&&43===u[2]&&0===u[3]||77===u[0]&&77===u[1]&&0===u[2]&&43===u[3]?v="tiff":71===
u[0]&&73===u[1]&&70===u[2]?v="gif":66===u[0]&&77===u[1]?v="bmp":-1<String.fromCharCode.apply(null,u).toLowerCase().indexOf("error")&&(v="error");return v}function t(u){let v=null;switch(u){case "lerc":v=e;break;case "lerc2":v=y;break;case "jpg":v=a;break;case "png":v=m;break;case "bsq":case "bip":v=(A,P)=>{{const {pixelTypeCtor:E}=q(P.pixelType),r=L.decode;A=r(A,{width:P.width,height:P.height,pixelType:E,format:u});P=new N({width:P.width,height:P.height,pixels:A.pixels,pixelType:P.pixelType,mask:A.mask,
statistics:null});P.updateStatistics()}return P};break;case "tiff":v=D;break;case "error":v=()=>{throw new w("rasterCodec:decode","input data contains error");};break;default:v=()=>{throw new w("rasterCodec:decode","unsupported raster format");}}return v}function q(u){let v=null,A=null;switch(u?u.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":A=255;v=Uint8Array;break;case "u16":A=A||65535;v=Uint16Array;break;case "u32":A=A||2**32-1;v=Uint32Array;break;case "s8":A=A||-128;v=Int8Array;
break;case "s16":A=A||-32768;v=Int16Array;break;case "s32":A=A||-(2**31);v=Int32Array;break;default:v=Float32Array}return{pixelTypeCtor:v,noDataValue:A}}function h(u,v=1){if(u){var {pixels:A,width:P,height:E,mask:r}=u;if(A&&0!==A.length){var n=A.length,x=P-1,B=E-1,S=[],f,g,F=N.getPixelArrayConstructor(u.pixelType);if(0===v){for(v=0;v<n;v++){var R=A[v];var Q=new F(x*B);for(f=0;f<B;f++){var X=f*P;for(g=0;g<x;g++)Q[f*x+g]=R[X+g]}S.push(Q)}if(r){var aa=new Uint8Array(x*B);for(f=0;f<B;f++)for(X=f*P,g=
0;g<x;g++)aa[f*x+g]=r[X+g]}}else{for(v=0;v<n;v++){R=A[v];Q=new F(x*B);for(f=0;f<B;f++)for(X=f*P,g=0;g<x;g++)Q[f*x+g]=(R[X+g]+R[X+g+1]+R[X+P+g]+R[X+P+g+1])/4;S.push(Q)}if(r)for(aa=new Uint8Array(x*B),f=0;f<B;f++)for(X=f*P,g=0;g<x;g++)aa[f*x+g]=Math.min.apply(null,[r[X+g],r[X+g+1],r[X+P+g],r[X+P+g+1]])}u.width=x;u.height=B;u.mask=aa;u.pixels=S}}}function d(){d=I._asyncToGenerator(function*(u,v={},A){if(null==u)throw new w("rasterCodec:decode","missing encodeddata parameter.");let P=v.format&&v.format.toLowerCase();
if(!("bsq"!==P&&"bip"!==P||null!=v.width&&null!=v.height))throw new w("rasterCodec:decode","requires width and height in options parameter.");if("tiff"===P&&v.customOptions)return v=V.decodeTileOrStrip(u,v.customOptions),v=new N({width:v.width,height:v.height,pixels:v.pixels,pixelType:v.pixelType.toLowerCase(),mask:v.mask,statistics:null}),v.updateStatistics(),v;if(!P||"bsq"!==P&&"bip"!==P)P=k(u);v.useCanvas&&z.has(P)?u=yield c(u,P,v,A):(A=t(P),v.isPoint&&(v={...v},v.width++,v.height++),u=A(u,v),
v.isPoint&&h(u));return u});return d.apply(this,arguments)}var p=function(u){function v(r){var n,x;this.data=r;this.pos=8;this.palette=[];this.imgData=[];this.transparency={};this.animation=null;this.text={};for(x=null;;){var B=this.readUInt32();var S=r=void 0;r=[];for(S=0;4>S;++S)r.push(String.fromCharCode(this.data[this.pos++]));r=r.join("");switch(r){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];this.colorType=this.data[this.pos++];this.compressionMethod=
this.data[this.pos++];this.filterMethod=this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||Infinity,frames:[]};break;case "PLTE":this.palette=this.read(B);break;case "fcTL":x&&this.animation.frames.push(x);this.pos+=4;x={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};r=this.readUInt16();B=this.readUInt16()||100;x.delay=1E3*r/B;x.disposeOp=this.data[this.pos++];
x.blendOp=this.data[this.pos++];x.data=[];break;case "IDAT":case "fdAT":"fdAT"===r&&(this.pos+=4,B-=4);r=(null!=x?x.data:void 0)||this.imgData;for(S=0;0<=B?S<B:S>B;0<=B?++S:--S)r.push(this.data[this.pos++]);break;case "tRNS":this.transparency={};switch(this.colorType){case 3:this.transparency.indexed=this.read(B);B=255-this.transparency.indexed.length;if(0<B)for(r=0;0<=B?r<B:r>B;0<=B?++r:--r)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(B)[0];break;case 2:this.transparency.rgb=
this.read(B)}break;case "tEXt":S=this.read(B);B=S.indexOf(0);r=String.fromCharCode.apply(String,S.slice(0,B));this.text[r]=String.fromCharCode.apply(String,S.slice(B+1));break;case "IEND":x&&this.animation.frames.push(x);a:{switch(this.colorType){case 0:case 3:case 4:x=1;break a;case 2:case 6:x=3;break a}x=void 0}this.colors=x;this.hasAlphaChannel=4===(n=this.colorType)||6===n;n=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*n;a:{switch(this.colors){case 1:n="DeviceGray";break a;
case 3:n="DeviceRGB";break a}n=void 0}this.colorSpace=n;this.imgData=new Uint8Array(this.imgData);return;default:this.pos+=B}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");}}var A;v.load=function(r,n,x){"function"===typeof n&&(x=n);var B=new XMLHttpRequest;B.open("GET",r,!0);B.responseType="arraybuffer";B.onload=function(){var S=new Uint8Array(B.response||B.mozResponseArrayBuffer);S=new v(S);"function"===typeof(null!=n?n.getContext:void 0)&&S.render(n);return"function"===
typeof x?x(S):void 0};return B.send(null)};v.prototype.read=function(r){var n;var x=[];for(n=0;0<=r?n<r:n>r;0<=r?++n:--n)x.push(this.data[this.pos++]);return x};v.prototype.readUInt32=function(){var r=this.data[this.pos++]<<24;var n=this.data[this.pos++]<<16;var x=this.data[this.pos++]<<8;var B=this.data[this.pos++];return r|n|x|B};v.prototype.readUInt16=function(){var r=this.data[this.pos++]<<8;var n=this.data[this.pos++];return r|n};v.prototype.decodePixels=function(r){var n,x,B,S,f,g,F,R;null==
r&&(r=this.imgData);if(0===r.length)return new Uint8Array(0);r=new M.Zlib(r);r=r.getBytes();var Q=this.pixelBitlength/8;var X=Q*this.width;var aa=new Uint8Array(X*this.height);var H=r.length;for(x=S=f=0;S<H;){switch(r[S++]){case 0:for(B=n=0;n<X;B=n+=1)aa[x++]=r[S++];break;case 1:for(B=g=0;g<X;B=g+=1){n=r[S++];var J=B<Q?0:aa[x-Q];aa[x++]=(n+J)%256}break;case 2:for(B=J=0;J<X;B=J+=1){n=r[S++];var T=(B-B%Q)/Q;g=f&&aa[(f-1)*X+T*Q+B%Q];aa[x++]=(g+n)%256}break;case 3:for(B=R=0;R<X;B=R+=1)n=r[S++],T=(B-B%
Q)/Q,J=B<Q?0:aa[x-Q],g=f&&aa[(f-1)*X+T*Q+B%Q],aa[x++]=(n+Math.floor((J+g)/2))%256;break;case 4:for(B=R=0;R<X;B=R+=1){n=r[S++];T=(B-B%Q)/Q;J=B<Q?0:aa[x-Q];0===f?g=F=0:(g=aa[(f-1)*X+T*Q+B%Q],F=T&&aa[(f-1)*X+(T-1)*Q+B%Q]);var O=J+g-F;B=Math.abs(O-J);T=Math.abs(O-g);O=Math.abs(O-F);J=B<=T&&B<=O?J:T<=O?g:F;aa[x++]=(n+J)%256}break;default:throw Error("Invalid filter algorithm: "+r[S-1]);}f++}return aa};v.prototype.decodePalette=function(){var r,n,x,B,S;var f=this.palette;var g=this.transparency.indexed||
[];var F=new Uint8Array((g.length||0)+f.length);var R=x=r=n=0;for(B=f.length;x<B;R=x+=3)F[n++]=f[R],F[n++]=f[R+1],F[n++]=f[R+2],F[n++]=null!=(S=g[r++])?S:255;return F};v.prototype.copyToImageData=function(r,n){var x,B;var S=this.colors;var f=null;var g=this.hasAlphaChannel;this.palette.length&&(f=null!=(x=this._decodedPalette)?x:this._decodedPalette=this.decodePalette(),S=4,g=!0);r=r.data||r;var F=r.length;var R=f||n;x=B=0;if(1===S)for(;x<F;)S=f?4*n[x/4]:B,B=R[S++],r[x++]=B,r[x++]=B,r[x++]=B,r[x++]=
g?R[S++]:this.transparency.grayscale&&this.transparency.grayscale===B?0:255,B=S;else for(;x<F;)S=f?4*n[x/4]:B,r[x++]=R[S++],r[x++]=R[S++],r[x++]=R[S++],r[x++]=g?R[S++]:this.transparency.rgb&&this.transparency.rgb[1]===R[S-3]&&this.transparency.rgb[3]===R[S-2]&&this.transparency.rgb[5]===R[S-1]?0:255,B=S};v.prototype.decode=function(){var r=new Uint8Array(this.width*this.height*4);this.copyToImageData(r,this.decodePixels());return r};var P=(A=u.document&&u.document.createElement("canvas"))&&A.getContext("2d");
var E=function(r){P.width=r.width;P.height=r.height;P.clearRect(0,0,r.width,r.height);P.putImageData(r,0,0);r=new Image;r.src=A.toDataURL();return r};v.prototype.decodeFrames=function(r){var n,x;if(this.animation){var B=this.animation.frames;var S=[];var f=n=0;for(x=B.length;n<x;f=++n){f=B[f];var g=r.createImageData(f.width,f.height);var F=this.decodePixels(new Uint8Array(f.data));this.copyToImageData(g,F);f.imageData=g;S.push(f.image=E(g))}return S}};v.prototype.renderFrame=function(r,n){var x=this.animation.frames;
var B=x[n];x=x[n-1];0===n&&r.clearRect(0,0,this.width,this.height);1===(null!=x?x.disposeOp:void 0)?r.clearRect(x.xOffset,x.yOffset,x.width,x.height):2===(null!=x?x.disposeOp:void 0)&&r.putImageData(x.imageData,x.xOffset,x.yOffset);0===B.blendOp&&r.clearRect(B.xOffset,B.yOffset,B.width,B.height);return r.drawImage(B.image,B.xOffset,B.yOffset)};v.prototype.animate=function(r){var n,x=this;var B=0;var S=this.animation;var f=S.numFrames;var g=S.frames;var F=S.numPlays;return(n=function(){var R=B++%f;
var Q=g[R];x.renderFrame(r,R);if(1<f&&B/f<F)return x.animation._timeout=setTimeout(n,Q.delay)})()};v.prototype.stopAnimation=function(){var r;return clearTimeout(null!=(r=this.animation)?r._timeout:void 0)};v.prototype.render=function(r){r._png&&r._png.stopAnimation();r._png=this;r.width=this.width;r.height=this.height;r=r.getContext("2d");if(this.animation)return this.decodeFrames(r),this.animate(r);var n=r.createImageData(this.width,this.height);this.copyToImageData(n,this.decodePixels());return r.putImageData(n,
0,0)};return v}(self);const z=new Set(["jpg","png","bmp","gif"]);W.decode=function(u){return d.apply(this,arguments)};W.decodeLerc2=y;W.getFormat=function(u){u=k(u);"lerc2"===u?u="lerc":"error"===u&&(u="");return u};Object.defineProperty(W,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/ImageCanvasDecoder":function(){define(["../../../core/Error","../../../core/promiseUtils","../../../chunks/Zlib"],function(W,I,w){return function(){function N(l){l&&(this.canvas=l.canvas,this.ctx=l.ctx||
l.canvas&&l.canvas.getContext("2d"))}N.prototype.decode=function(l,U,V){if(!l||10>l.byteLength)throw new W("imagecanvasdecoder: decode","required a valid encoded data as input.");let {width:Y,height:M,format:L}=U;const {applyJpegMask:C}=U;if(C&&(!Y||!M))throw new W("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return new Promise((e,y)=>{let D=null;"jpg"===L&&C&&(D=N.getMask(l,{width:Y,height:M}));const a=new Blob([new Uint8Array(l)],{type:"jpg"===
"image/"+L?"jpeg":L}),m=URL.createObjectURL(a),c=new Image;let b;c.src=m;c.onload=()=>{URL.revokeObjectURL(m);if(I.isAborted(V))y(I.createAbortError());else{Y=c.width;M=c.height;if(this.canvas){if(this.canvas.width!==Y||this.canvas.height!==M)this.canvas.width=Y,this.canvas.height=M;this.ctx.clearRect(0,0,Y,M)}else this.canvas=document.createElement("canvas"),this.canvas.width=Y,this.canvas.height=M,this.ctx=this.canvas.getContext("2d");this.ctx.drawImage(c,0,0);var k=this.ctx.getImageData(0,0,Y,
M);b=k.data;var t;if(U.renderOnCanvas){if(D)for(t=0;t<D.length;t++)b[4*t+3]=D[t]?255:0;this.ctx.putImageData(k,0,0);e(null)}else{k=Y*M;var q=new Uint8Array(k),h=new Uint8Array(k),d=new Uint8Array(k);if(D)for(t=0;t<k;t++)q[t]=b[4*t],h[t]=b[4*t+1],d[t]=b[4*t+2];else for(D=new Uint8Array(k),t=0;t<k;t++)q[t]=b[4*t],h[t]=b[4*t+1],d[t]=b[4*t+2],D[t]=b[4*t+3];e({width:Y,height:M,pixels:[q,h,d],mask:D,pixelType:"u8"})}}};c.onerror=()=>{URL.revokeObjectURL(m);y("cannot load image")}})};N.getMask=function(l,
U){let V=null;try{var Y=new Uint8Array(l);l=0;var M=Y.length-2;for(l=Math.ceil(Y.length/2);l<M&&(255!==Y[l]||217!==Y[l+1]);l++);l+=2;if(l<Y.length-1){const L=(new w.Zlib(Y.subarray(l))).getBytes();V=new Uint8Array(U.width*U.height);U=0;for(Y=0;Y<L.length;Y++)for(M=7;0<=M;M--)V[U++]=L[Y]>>M&1}}catch(L){}return V};return N}()})},"esri/chunks/Zlib":function(){define(["exports"],function(W){var I={exports:{}};(function(w){(function(N){N=N();void 0!==N&&(w.exports=N)})(function(){var N=function(){function l(){this.bufferLength=
this.pos=0;this.eof=!1;this.buffer=null}l.prototype={ensureBuffer:function(U){var V=this.buffer,Y=V?V.byteLength:0;if(U<Y)return V;for(var M=512;M<U;)M<<=1;U=new Uint8Array(M);for(M=0;M<Y;++M)U[M]=V[M];return this.buffer=U},getByte:function(){for(var U=this.pos;this.bufferLength<=U;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(U){var V=this.pos;if(U){this.ensureBuffer(V+U);for(U=V+U;!this.eof&&this.bufferLength<U;)this.readBlock();var Y=this.bufferLength;
U>Y&&(U=Y)}else{for(;!this.eof;)this.readBlock();U=this.bufferLength}this.pos=U;return this.buffer.subarray(V,U)},lookChar:function(){for(var U=this.pos;this.bufferLength<=U;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var U=this.pos;this.bufferLength<=U;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(U,V,Y){for(var M=U+V;this.bufferLength<=M&&!this.eof;)this.readBlock();
return new Stream(this.buffer,U,V,Y)},skip:function(U){U||(U=1);this.pos+=U},reset:function(){this.pos=0}};return l}();return function(){function l(e){throw Error(e);}function U(e){var y=0,D=e[y++],a=e[y++];-1!=D&&-1!=a||l("Invalid header in flate stream");8!=(D&15)&&l("Unknown compression method in flate stream");0!=((D<<8)+a)%31&&l("Bad FCHECK in flate stream");a&32&&l("FDICT bit set in flate stream");this.bytes=e;this.bytesPos=y;this.codeBuf=this.codeSize=0;N.call(this)}if(!self||!self.Uint32Array)return null;
var V=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Y=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),M=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),L=[new Uint32Array([459008,524368,
524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,
524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,
524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,
524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,
524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,
524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,
524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,
524335,590015,524303,524431,524367,590079]),9],C=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];U.prototype=Object.create(N.prototype);U.prototype.getBits=function(e){for(var y=this.codeSize,D=this.codeBuf,a=this.bytes,m=this.bytesPos,c;y<e;)"undefined"==typeof(c=a[m++])&&l("Bad encoding in flate stream"),D|=c<<
y,y+=8;this.codeBuf=D>>e;this.codeSize=y-=e;this.bytesPos=m;return D&(1<<e)-1};U.prototype.getCode=function(e){var y=e[0],D=e[1];e=this.codeSize;for(var a=this.codeBuf,m=this.bytes,c=this.bytesPos;e<D;){var b;"undefined"==typeof(b=m[c++])&&l("Bad encoding in flate stream");a|=b<<e;e+=8}D=y[a&(1<<D)-1];y=D>>16;D&=65535;(0==e||e<y||0==y)&&l("Bad encoding in flate stream");this.codeBuf=a>>y;this.codeSize=e-y;this.bytesPos=c;return D};U.prototype.generateHuffmanTable=function(e){for(var y=e.length,D=
0,a=0;a<y;++a)e[a]>D&&(D=e[a]);for(var m=1<<D,c=new Uint32Array(m),b=1,k=0,t=2;b<=D;++b,k<<=1,t<<=1)for(var q=0;q<y;++q)if(e[q]==b){var h=0,d=k;for(a=0;a<b;++a)h=h<<1|d&1,d>>=1;for(a=h;a<m;a+=t)c[a]=b<<16|q;++k}return[c,D]};U.prototype.readBlock=function(){function e(h,d,p,z,u){for(h=h.getBits(p)+z;0<h--;)d[k++]=u}var y=this.getBits(3);y&1&&(this.eof=!0);y>>=1;if(0==y){var D=this.bytes,a=this.bytesPos,m;"undefined"==typeof(m=D[a++])&&l("Bad block header in flate stream");var c=m;"undefined"==typeof(m=
D[a++])&&l("Bad block header in flate stream");c|=m<<8;"undefined"==typeof(m=D[a++])&&l("Bad block header in flate stream");y=m;"undefined"==typeof(m=D[a++])&&l("Bad block header in flate stream");(y|m<<8)!=(~c&65535)&&l("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;m=this.bufferLength;y=this.ensureBuffer(m+c);this.bufferLength=c=m+c;for(var b=m;b<c;++b){if("undefined"==typeof(m=D[a++])){this.eof=!0;break}y[b]=m}this.bytesPos=a}else{if(1==y)a=L,m=C;else if(2==y){y=
this.getBits(5)+257;m=this.getBits(5)+1;D=this.getBits(4)+4;a=Array(V.length);for(var k=0;k<D;)a[V[k++]]=this.getBits(3);a=this.generateHuffmanTable(a);k=D=0;m=y+m;for(c=Array(m);k<m;)b=this.getCode(a),16==b?e(this,c,2,3,D):17==b?e(this,c,3,3,D=0):18==b?e(this,c,7,11,D=0):c[k++]=D=b;a=this.generateHuffmanTable(c.slice(0,y));m=this.generateHuffmanTable(c.slice(y,m))}else l("Unknown block type in flate stream");c=(y=this.buffer)?y.length:0;for(b=this.bufferLength;;){var t=this.getCode(a);if(256>t)b+
1>=c&&(y=this.ensureBuffer(b+1),c=y.length),y[b++]=t;else{if(256==t){this.bufferLength=b;break}t-=257;t=Y[t];var q=t>>16;0<q&&(q=this.getBits(q));D=(t&65535)+q;t=this.getCode(m);t=M[t];q=t>>16;0<q&&(q=this.getBits(q));t=(t&65535)+q;b+D>=c&&(y=this.ensureBuffer(b+D),c=y.length);for(q=0;q<D;++q,++b)y[b]=y[b-t]}}}};return U}()})})(I);W.Zlib=I.exports})},"esri/layers/support/rasterFormats/JpgPlus":function(){define(["../../../chunks/Jpg","../../../chunks/Zlib"],function(W,I){return function(){function w(){}
w.decode=function(N){var l=new Uint8Array(N);N=new W.JpegImage;N.parse(l);const {width:U,height:V,numComponents:Y,eof:M}=N;N=N.getData(U,V,!0);let L;const C=U*V;let e=0;var y=0,D=0;if(M<l.length-1)for(l=(new I.Zlib(l.subarray(M))).getBytes(),L=new Uint8Array(C),e=y=0;e<l.length;e++)for(D=7;0<=D;D--)L[y++]=l[e]>>D&1;l=null;if(1===Y)l=[N,N,N];else{l=[];for(e=0;3>e;e++)D=new Uint8Array(C),l.push(D);for(y=D=0;y<C;y++)for(e=0;3>e;e++)l[e][y]=N[D++]}return{width:U,height:V,pixels:l,mask:L}};return w}()})},
"esri/chunks/Jpg":function(){define(["exports"],function(W){var I={exports:{}};(function(w){(function(N){N=N();void 0!==N&&(w.exports=N)})(function(){var N=function(){function l(U){this.message="JPEG error: "+U}l.prototype=Error();l.prototype.name="JpegError";return l.constructor=l}();return function(){function l(){this.decodeTransform=null;this.colorTransform=-1}function U(C,e){for(var y=0,D=[],a,m,c=16;0<c&&!C[c-1];)c--;D.push({children:[],index:0});var b=D[0],k;for(a=0;a<c;a++){for(m=0;m<C[a];m++){b=
D.pop();for(b.children[b.index]=e[y];0<b.index;)b=D.pop();b.index++;for(D.push(b);D.length<=a;)D.push(k={children:[],index:0}),b.children[b.index]=k.children,b=k;y++}a+1<c&&(D.push(k={children:[],index:0}),b.children[b.index]=k.children,b=k)}return D[0].children}function V(C,e,y,D,a,m,c,b,k){function t(){if(0<n)return n--,r>>n&1;r=C[e++];if(255===r){var O=C[e++];if(O)throw new N("unexpected marker "+(r<<8|O).toString(16));}n=7;return r>>>7}function q(O){for(;;){O=O[t()];if("number"===typeof O)return O;
if("object"!==typeof O)throw new N("invalid huffman sequence");}}function h(O){for(var Z=0;0<O;)Z=Z<<1|t(),O--;return Z}function d(O){if(1===O)return 1===t()?1:-1;var Z=h(O);return Z>=1<<O-1?Z:Z+(-1<<O)+1}function p(O,Z){var ca=q(O.huffmanTableDC);ca=0===ca?0:d(ca);O.blockData[Z]=O.pred+=ca;for(ca=1;64>ca;){var da=q(O.huffmanTableAC),fa=da&15;da>>=4;if(0===fa){if(15>da)break;ca+=16}else ca+=da,O.blockData[Z+L[ca]]=d(fa),ca++}}function z(O,Z){var ca=q(O.huffmanTableDC);ca=0===ca?0:d(ca)<<k;O.blockData[Z]=
O.pred+=ca}function u(O,Z){O.blockData[Z]|=t()<<k}function v(O,Z){if(0<x)x--;else for(var ca=m;ca<=c;){var da=q(O.huffmanTableAC),fa=da&15;da>>=4;if(0===fa){if(15>da){x=h(da)+(1<<da)-1;break}ca+=16}else ca+=da,O.blockData[Z+L[ca]]=d(fa)*(1<<k),ca++}}function A(O,Z){for(var ca=m,da=0,fa;ca<=c;){fa=L[ca];switch(B){case 0:da=q(O.huffmanTableAC);fa=da&15;da>>=4;if(0===fa)15>da?(x=h(da)+(1<<da),B=4):(da=16,B=1);else{if(1!==fa)throw new N("invalid ACn encoding");S=d(fa);B=da?2:3}continue;case 1:case 2:O.blockData[Z+
fa]?O.blockData[Z+fa]+=t()<<k:(da--,0===da&&(B=2===B?3:0));break;case 3:O.blockData[Z+fa]?O.blockData[Z+fa]+=t()<<k:(O.blockData[Z+fa]=S<<k,B=0);break;case 4:O.blockData[Z+fa]&&(O.blockData[Z+fa]+=t()<<k)}ca++}4===B&&(x--,0===x&&(B=0))}var P=y.mcusPerLine,E=e,r=0,n=0,x=0,B=0,S,f=D.length,g,F,R,Q;b=y.progressive?0===m?0===b?z:u:0===b?v:A:p;var X=0;y=1===f?D[0].blocksPerLine*D[0].blocksPerColumn:P*y.mcusPerColumn;for(var aa,H;X<y;){var J=a?Math.min(y-X,a):y;for(g=0;g<f;g++)D[g].pred=0;x=0;if(1===f){var T=
D[0];for(Q=0;Q<J;Q++)b(T,64*((T.blocksPerLine+1)*(X/T.blocksPerLine|0)+X%T.blocksPerLine)),X++}else for(Q=0;Q<J;Q++){for(g=0;g<f;g++)for(T=D[g],aa=T.h,H=T.v,F=0;F<H;F++)for(R=0;R<aa;R++)b(T,64*((T.blocksPerLine+1)*((X/P|0)*T.v+F)+(X%P*T.h+R)));X++}n=0;(T=M(C,e))&&T.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+T.invalid),e=T.offset);T=T&&T.marker;if(!T||65280>=T)throw new N("marker was not found");if(65488<=T&&65495>=T)e+=2;else break}(T=M(C,e))&&T.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+
T.invalid),e=T.offset);return e-E}function Y(C,e){C=e.blocksPerLine;for(var y=e.blocksPerColumn,D=new Int16Array(64),a=0;a<y;a++)for(var m=0;m<C;m++){var c=void 0,b=void 0,k=void 0,t=void 0,q=void 0,h=void 0,d=void 0,p=void 0,z=q=h=t=b=c=void 0,u=void 0,v=void 0,A=void 0,P=64*((e.blocksPerLine+1)*a+m),E=D,r=e.quantizationTable,n=e.blockData;if(!r)throw new N("missing required Quantization Table.");for(var x=0;64>x;x+=8)c=n[P+x],p=n[P+x+1],d=n[P+x+2],h=n[P+x+3],q=n[P+x+4],t=n[P+x+5],k=n[P+x+6],b=n[P+
x+7],c*=r[x],0===(p|d|h|q|t|k|b)?(c=5793*c+512>>10,E[x]=c,E[x+1]=c,E[x+2]=c,E[x+3]=c,E[x+4]=c,E[x+5]=c,E[x+6]=c,E[x+7]=c):(p*=r[x+1],d*=r[x+2],h*=r[x+3],q*=r[x+4],t*=r[x+5],k*=r[x+6],b*=r[x+7],A=5793*c+128>>8,v=5793*q+128>>8,u=d,z=k,q=2896*(p-b)+128>>8,b=2896*(p+b)+128>>8,h<<=4,t<<=4,A=A+v+1>>1,v=A-v,c=3784*u+1567*z+128>>8,u=1567*u-3784*z+128>>8,z=c,q=q+t+1>>1,t=q-t,b=b+h+1>>1,h=b-h,A=A+z+1>>1,z=A-z,v=v+u+1>>1,u=v-u,c=2276*q+3406*b+2048>>12,q=3406*q-2276*b+2048>>12,b=c,c=799*h+4017*t+2048>>12,h=4017*
h-799*t+2048>>12,t=c,E[x]=A+b,E[x+7]=A-b,E[x+1]=v+t,E[x+6]=v-t,E[x+2]=u+h,E[x+5]=u-h,E[x+3]=z+q,E[x+4]=z-q);for(r=0;8>r;++r)c=E[r],p=E[r+8],d=E[r+16],h=E[r+24],q=E[r+32],t=E[r+40],k=E[r+48],b=E[r+56],0===(p|d|h|q|t|k|b)?(c=5793*c+8192>>14,c=-2040>c?0:2024<=c?255:c+2056>>4,n[P+r]=c,n[P+r+8]=c,n[P+r+16]=c,n[P+r+24]=c,n[P+r+32]=c,n[P+r+40]=c,n[P+r+48]=c,n[P+r+56]=c):(A=5793*c+2048>>12,v=5793*q+2048>>12,u=d,z=k,q=2896*(p-b)+2048>>12,b=2896*(p+b)+2048>>12,A=(A+v+1>>1)+4112,v=A-v,c=3784*u+1567*z+2048>>
12,u=1567*u-3784*z+2048>>12,z=c,q=q+t+1>>1,t=q-t,b=b+h+1>>1,h=b-h,A=A+z+1>>1,z=A-z,v=v+u+1>>1,u=v-u,c=2276*q+3406*b+2048>>12,q=3406*q-2276*b+2048>>12,b=c,c=799*h+4017*t+2048>>12,h=4017*h-799*t+2048>>12,t=c,c=A+b,b=A-b,p=v+t,k=v-t,d=u+h,t=u-h,h=z+q,q=z-q,c=16>c?0:4080<=c?255:c>>4,p=16>p?0:4080<=p?255:p>>4,d=16>d?0:4080<=d?255:d>>4,h=16>h?0:4080<=h?255:h>>4,q=16>q?0:4080<=q?255:q>>4,t=16>t?0:4080<=t?255:t>>4,k=16>k?0:4080<=k?255:k>>4,b=16>b?0:4080<=b?255:b>>4,n[P+r]=c,n[P+r+8]=p,n[P+r+16]=d,n[P+r+24]=
h,n[P+r+32]=q,n[P+r+40]=t,n[P+r+48]=k,n[P+r+56]=b)}return e.blockData}function M(C,e,y){var D=C.length-1;y=y<e?y:e;if(e>=D)return null;var a=C[e]<<8|C[e+1];if(65472<=a&&65534>=a)return{invalid:null,marker:a,offset:e};for(e=C[y]<<8|C[y+1];!(65472<=e&&65534>=e);){if(++y>=D)return null;e=C[y]<<8|C[y+1]}return{invalid:a.toString(16),marker:e,offset:y}}if(!self||!self.Uint8ClampedArray)return null;var L=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,
28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);l.prototype={parse:function(C){function e(){var r=C[a]<<8|C[a+1];a+=2;return r}function y(){var r=e();r=a+r-2;var n=M(C,r,a);n&&n.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+n.invalid),r=n.offset);r=C.subarray(a,r);a+=r.length;return r}function D(r){for(var n=Math.ceil(r.samplesPerLine/8/r.maxH),x=Math.ceil(r.scanLines/8/r.maxV),B=0;B<r.components.length;B++){E=r.components[B];
var S=Math.ceil(Math.ceil(r.samplesPerLine/8)*E.h/r.maxH),f=Math.ceil(Math.ceil(r.scanLines/8)*E.v/r.maxV);E.blockData=new Int16Array(64*x*E.v*(n*E.h+1));E.blocksPerLine=S;E.blocksPerColumn=f}r.mcusPerLine=n;r.mcusPerColumn=x}var a=0,m=null,c=null,b=[],k=[],t=[],q=e();if(65496!==q)throw new N("SOI not found");for(q=e();65497!==q;){switch(q){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var h=
y();65504===q&&74===h[0]&&70===h[1]&&73===h[2]&&70===h[3]&&0===h[4]&&(m={version:{major:h[5],minor:h[6]},densityUnits:h[7],xDensity:h[8]<<8|h[9],yDensity:h[10]<<8|h[11],thumbWidth:h[12],thumbHeight:h[13],thumbData:h.subarray(14,14+3*h[12]*h[13])});65518===q&&65===h[0]&&100===h[1]&&111===h[2]&&98===h[3]&&101===h[4]&&(c={version:h[5]<<8|h[6],flags0:h[7]<<8|h[8],flags1:h[9]<<8|h[10],transformCode:h[11]});break;case 65499:q=e()+a-2;for(var d;a<q;){var p=C[a++],z=new Uint16Array(64);if(0===p>>4)for(h=
0;64>h;h++)d=L[h],z[d]=C[a++];else if(1===p>>4)for(h=0;64>h;h++)d=L[h],z[d]=e();else throw new N("DQT - invalid table spec");b[p&15]=z}break;case 65472:case 65473:case 65474:if(u)throw new N("Only single frame JPEGs supported");e();var u={};u.extended=65473===q;u.progressive=65474===q;u.precision=C[a++];u.scanLines=e();u.samplesPerLine=e();u.components=[];u.componentIds={};h=C[a++];for(q=z=p=0;q<h;q++){d=C[a];var v=C[a+1]>>4;var A=C[a+1]&15;p<v&&(p=v);z<A&&(z=A);v=u.components.push({h:v,v:A,quantizationId:C[a+
2],quantizationTable:null});u.componentIds[d]=v-1;a+=3}u.maxH=p;u.maxV=z;D(u);break;case 65476:d=e();for(q=2;q<d;){p=C[a++];z=new Uint8Array(16);for(h=v=0;16>h;h++,a++)v+=z[h]=C[a];A=new Uint8Array(v);for(h=0;h<v;h++,a++)A[h]=C[a];q+=17+v;(0===p>>4?t:k)[p&15]=U(z,A)}break;case 65501:e();var P=e();break;case 65498:e();d=C[a++];h=[];for(q=0;q<d;q++){p=u.componentIds[C[a++]];var E=u.components[p];p=C[a++];E.huffmanTableDC=t[p>>4];E.huffmanTableAC=k[p&15];h.push(E)}q=C[a++];d=C[a++];p=C[a++];q=V(C,a,
u,h,P,q,d,p>>4,p&15);a+=q;break;case 65535:255!==C[a]&&a--;break;default:if(255===C[a-3]&&192<=C[a-2]&&254>=C[a-2])a-=3;else throw new N("unknown marker "+q.toString(16));}q=e()}this.width=u.samplesPerLine;this.height=u.scanLines;this.jfif=m;this.eof=a;this.adobe=c;this.components=[];for(q=0;q<u.components.length;q++){E=u.components[q];if(m=b[E.quantizationId])E.quantizationTable=m;this.components.push({output:Y(u,E),scaleX:E.h/u.maxH,scaleY:E.v/u.maxV,blocksPerLine:E.blocksPerLine,blocksPerColumn:E.blocksPerColumn})}this.numComponents=
this.components.length},_getLinearizedBlockData:function(C,e){var y=this.width/C,D=this.height/e,a,m,c=0,b=this.components.length,k=C*e*b,t=new Uint8ClampedArray(k),q=new Uint32Array(C);for(m=0;m<b;m++){var h=this.components[m];var d=h.scaleX*y;var p=h.scaleY*D;c=m;var z=h.output;var u=h.blocksPerLine+1<<3;for(a=0;a<C;a++)h=0|a*d,q[a]=(h&4294967288)<<3|h&7;for(d=0;d<e;d++)for(h=0|d*p,h=u*(h&4294967288)|(h&7)<<3,a=0;a<C;a++)t[c]=z[h+q[a]],c+=b}if(e=this.decodeTransform)for(m=0;m<k;)for(C=h=0;h<b;h++,
m++,C+=2)t[m]=(t[m]*e[C]>>8)+e[C+1];return t},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0===this.colorTransform?!1:!0:1===this.colorTransform?!0:!1},_convertYccToRgb:function(C){for(var e,y,D,a=0,m=C.length;a<m;a+=3)e=C[a],y=C[a+1],D=C[a+2],C[a]=e-179.456+1.402*D,C[a+1]=e+135.459-.344*y-.714*D,C[a+2]=e-226.816+1.772*y;return C},_convertYcckToRgb:function(C){for(var e,y,D,a,m=0,c=0,b=C.length;c<b;c+=4)e=C[c],y=C[c+1],D=C[c+2],a=C[c+3],C[m++]=
-122.67195406894+y*(-6.60635669420364E-5*y+4.37130475926232E-4*D-5.4080610064599E-5*e+4.8449797120281E-4*a-.154362151871126)+D*(-9.57964378445773E-4*D+8.17076911346625E-4*e-.00477271405408747*a+1.53380253221734)+e*(9.61250184130688E-4*e-.00266257332283933*a+.48357088451265)+a*(-3.36197177618394E-4*a+.484791561490776),C[m++]=107.268039397724+y*(2.19927104525741E-5*y-6.40992018297945E-4*D+6.59397001245577E-4*e+4.26105652938837E-4*a-.176491792462875)+D*(-7.78269941513683E-4*D+.00130872261408275*e+7.70482631801132E-4*
a-.151051492775562)+e*(.00126935368114843*e-.00265090189010898*a+.25802910206845)+a*(-3.18913117588328E-4*a-.213742400323665),C[m++]=-20.810012546947+y*(-5.70115196973677E-4*y-2.63409051004589E-5*D+.0020741088115012*e-.00288260236853442*a+.814272968359295)+D*(-1.53496057440975E-5*D-1.32689043961446E-4*e+5.60833691242812E-4*a-.195152027534049)+e*(.00174418132927582*e-.00255243321439347*a+.116935020465145)+a*(-3.43531996510555E-4*a+.24165260232407);return C},_convertYcckToCmyk:function(C){for(var e,
y,D,a=0,m=C.length;a<m;a+=4)e=C[a],y=C[a+1],D=C[a+2],C[a]=434.456-e-1.402*D,C[a+1]=119.541-e+.344*y+.714*D,C[a+2]=481.816-e-1.772*y;return C},_convertCmykToRgb:function(C){for(var e,y,D,a,m=0,c=1/255,b=0,k=C.length;b<k;b+=4)e=C[b]*c,y=C[b+1]*c,D=C[b+2]*c,a=C[b+3]*c,C[m++]=255+e*(-4.387332384609988*e+54.48615194189176*y+18.82290502165302*D+212.25662451639585*a-285.2331026137004)+y*(1.7149763477362134*y-5.6096736904047315*D-17.873870861415444*a-5.497006427196366)+D*(-2.5217340131683033*D-21.248923337353073*
a+17.5119270841813)-a*(21.86122147463605*a+189.48180835922747),C[m++]=255+e*(8.841041422036149*e+60.118027045597366*y+6.871425592049007*D+31.159100130055922*a-79.2970844816548)+y*(-15.310361306967817*y+17.575251261109482*D+131.35250912493976*a-190.9453302588951)+D*(4.444339102852739*D+9.8632861493405*a-24.86741582555878)-a*(20.737325471181034*a+187.80453709719578),C[m++]=255+e*(.8842522430003296*e+8.078677503112928*y+30.89978309703729*D-.23883238689178934*a-14.183576799673286)+y*(10.49593273432072*
y+63.02378494754052*D+50.606957656360734*a-112.23884253719248)+D*(.03296041114873217*D+115.60384449646641*a-193.58209356861505)-a*(22.33816807309886*a+180.12613974708367);return C},getData:function(C,e,y){if(4<this.numComponents)throw new N("Unsupported color mode");C=this._getLinearizedBlockData(C,e);if(1===this.numComponents&&y){y=C.length;e=new Uint8ClampedArray(3*y);for(var D=0,a=0;a<y;a++){var m=C[a];e[D++]=m;e[D++]=m;e[D++]=m}return e}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(C);
if(4===this.numComponents){if(this._isColorConversionNeeded())return y?this._convertYcckToRgb(C):this._convertYcckToCmyk(C);if(y)return this._convertCmykToRgb(C)}return C}};return l}()})})(I);W.JpegImage=I.exports})},"esri/chunks/TiffDecoder":function(){define("exports ../layers/support/rasterDatasets/byteStreamUtils ./Jpg ../layers/support/rasterFormats/Lzw ../layers/support/rasterFormats/TiffTags ../layers/support/rasterFormats/utils ./Zlib".split(" "),function(W,I,w,N,l,U,V){function Y(n,x){let B=
"unknown";3===n?B="f32":1===n?1===x?B="u1":2===x?B="u2":4===x?B="u4":8>=x?B="u8":16>=x?B="u16":32>=x&&(B="u32"):2===n&&(8>=x?B="s8":16>=x?B="s16":32>=x&&(B="s32"));return B}function M(n){let x=null;switch(n?n.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":x=Uint8Array;break;case "u16":x=Uint16Array;break;case "u32":x=Uint32Array;break;case "s8":x=Int8Array;break;case "s16":x=Int16Array;break;case "s32":x=Int32Array;break;default:x=Float32Array}return x}function L(n,x){return{x:x[0]*
n.x+x[1]*n.y+x[2],y:x[3]*n.x+x[4]*n.y+x[5]}}function C(n,x){var B;return null==(B=n.get(x))?void 0:B.values}function e(n,x){var B;return null==(B=n.get(x))?void 0:B.values}function y(n,x){var B;return null==(B=n.get(x))?void 0:B.values[0]}function D(n,x){var B;return null==(B=n.get(x))?void 0:B.values[0]}function a(n,x,B,S=0,f=l.TIFF_TAGS,g=4){var F=8===g;const R=F?t(new DataView(n,B,8),0,x):(new DataView(n,B,2)).getUint16(0,x),Q=4+2*g;var X=F?8:2;F=X+R*Q;if(B+F>n.byteLength)return{success:!1,ifd:null,
nextIFD:null,requiredBufferSize:F};const aa=B+F+4<=n.byteLength?q(new DataView(n,B+F,8===g?8:4),0,x,8===g):null;B+=X;X=new Map;let H,J,T,O,Z;for(let da=0;da<R;da++){var ca=new DataView(n,B+Q*da,Q);H=ca.getUint16(0,x);T=ca.getUint16(2,x);J=l.getTagName(H,f);const fa=[];2===g?(O=ca.getUint16(4,x),Z=ca.getUint16(6,x)):4===g?(O=ca.getUint32(4,x),Z=ca.getUint32(8,x)):8===g&&(O=q(ca,4,x,!0),Z=q(ca,12,x,!0),fa.push(ca.getUint32(12,x)),fa.push(ca.getUint32(16,x)));ca={id:H,type:T,valueCount:O,valueOffset:Z,
valueOffsets:fa,values:null};m(n,x,ca,S,!1,g);X.set(J,ca)}return{success:!0,ifd:X,nextIFD:aa,requiredBufferSize:F}}function m(n,x,B,S=0,f=!1,g=4){if(B.values)return!0;var F=B.type,R=B.valueCount,Q=B.valueOffset;let X=[];var aa=v[F],H=8*aa,J=R*aa,T=R*v[F]*8,O=8===g?64:32;g=B.valueOffsets;if(T>O&&J>(f?n.byteLength:n?n.byteLength-Q+S:0))return B.offlineOffsetSize=[Q,J],B.values=null,!1;if(T<=O)if(x||(32>=O?Q>>>=32-T:(n=null!=g&&g.length?g[0]:Q>>>0,x=null!=g&&g.length?g[1]:Math.round((Q-n)/4294967296),
32>=T?(Q=n>>>32-T,g[0]=Q):(Q=n*2**(32-T)+(x>>>32-T),g[0]=n,g[1]=x>>>32-T))),1===R&&H===O)X=[Q];else if(64===O)for(n=null!=g&&g.length?g[0]:Q>>>0,Q=null!=g&&g.length?g[1]:Math.round((Q-n)/4294967296),x=n,aa=32,n=1;n<=R;n++)J=32-H*n%32,aa<H?(J=x<<J>>>32-aa,T=Q<<32-aa>>>32-aa,x=Q,X.push(J+T*2**(H-aa)),aa-=32-(H-aa)):(X.push(x<<J>>>32-H),aa-=H),0===aa&&(aa=32,x=Q);else for(n=1;n<=R;n++)X.push(Q<<32-H*n>>>32-H);else for(Q-=S,f&&(Q=0),R=Q;R<Q+J;R+=aa){switch(F){case 1:H=(new DataView(n,R,1)).getUint8(0);
break;case 2:H=(new DataView(n,R,1)).getUint8(0);break;case 3:H=(new DataView(n,R,2)).getUint16(0,x);break;case 4:case 13:H=(new DataView(n,R,4)).getUint32(0,x);break;case 5:H=(new DataView(n,R,4)).getUint32(0,x)/(new DataView(n,R+4,4)).getUint32(0,x);break;case 6:H=(new DataView(n,R,1)).getInt8(0);break;case 7:H=(new DataView(n,R,1)).getUint8(0);break;case 8:H=(new DataView(n,R,2)).getInt16(0,x);break;case 9:H=(new DataView(n,R,4)).getInt32(0,x);break;case 10:H=(new DataView(n,R,4)).getInt32(0,x)/
(new DataView(n,R+4,4)).getInt32(0,x);break;case 11:H=(new DataView(n,R,4)).getFloat32(0,x);break;case 12:H=(new DataView(n,R,8)).getFloat64(0,x);break;case 16:case 18:H=t(new DataView(n,R,8),0,x);break;case 17:g=new DataView(n,R,8);T=(H=x)?g.getInt32(0,H):g.getUint32(0,H);g=H?g.getUint32(4,H):g.getInt32(4,H);O=0<=(H?T:g)?1:-1;H?T*=O:g*=O;H=O*(H?4294967296*g+T:4294967296*T+g);break;default:H=null}X.push(H)}if(2===F){F="";Q=X;X=[];for(n=0;n<Q.length;n++)0===Q[n]&&""!==F?(X.push(F),F=""):F+=String.fromCharCode(Q[n]);
""===F&&0!==X.length||X.push(F)}B.values=X;return!0}function c(n){var x,B,S=n[0];const f=D(S,"TILEWIDTH"),g=D(S,"TILELENGTH"),F=D(S,"IMAGEWIDTH"),R=D(S,"IMAGELENGTH");var Q=D(S,"BITSPERSAMPLE");const X=D(S,"SAMPLESPERPIXEL");var aa=null!=(x=D(S,"SAMPLEFORMAT"))?x:1;x=Y(aa,Q);const H=b(S);var J=C(S,"GDAL_NODATA");let T;null!=J&&J.length&&(T=J.map(na=>parseFloat(na)),T.some(na=>isNaN(na))&&(T=null));var O=null!=(B=D(S,"COMPRESSION"))?B:1;switch(O){case 1:B="NONE";break;case 2:case 3:case 4:case 32771:B=
"CCITT";break;case 5:B="LZW";break;case 6:case 7:B="JPEG";break;case 32773:B="PACKBITS";break;case 8:case 32946:B="DEFLATE";break;case 34712:B="JPEG2000";break;case 34887:B="LERC";break;default:B=String(O)}J=!0;let Z="";A.has(O)||(J=!1,Z+="unsupported tag compression "+O);3<aa&&(J=!1,Z+="unsupported tag sampleFormat "+aa);0!==Q%8&&(J=!1,Z+="unsupported tag bitsPerSample "+Q);Q=y(S,"GEOASCIIPARAMS");if(Q){var ca=(ca=Q.split("|").filter(na=>-1<na.indexOf("ESRI PE String \x3d "))[0])?ca.replace("ESRI PE String \x3d ",
""):"";ca=ca.startsWith("COMPD_CS")||ca.startsWith("PROJCS")||ca.startsWith("GEOGCS")?{wkid:null,wkt:ca}:null}aa=e(S,"GEOTIEPOINTS");Q=e(S,"GEOPIXELSCALE");O=e(S,"GEOTRANSMATRIX");var da=S.has("GEOKEYDIRECTORY")?S.get("GEOKEYDIRECTORY").data:null;S=!1;if(da){S=2===D(da,"GTRasterTypeGeoKey");var fa=D(da,"GTModelTypeGeoKey");2===fa?(da=D(da,"GeographicTypeGeoKey"),1024<=da&&32766>=da&&(ca={wkid:da})):1===fa&&(da=D(da,"ProjectedCSTypeGeoKey"),1024<=da&&32766>=da&&(ca={wkid:da}))}let ka;Q&&aa&&6<=aa.length?
(ka=[Q[0],0,aa[3]-aa[0]*Q[0],0,-Math.abs(Q[1]),aa[4]-aa[1]*Q[1]],S&&(ka[2]-=.5*ka[0]+.5*ka[1],ka[5]-=.5*ka[3]+.5*ka[4])):O&&16===O.length&&(ka=S?[O[0],O[1],O[3]-.5*O[0],O[4],O[5],O[7]-.5*O[5]]:[O[0],O[1],O[3],O[4],O[5],O[7]]);if(ka){S=[{x:0,y:R},{x:0,y:0},{x:F,y:R},{x:F,y:0}];da=O=Number.POSITIVE_INFINITY;let na=fa=Number.NEGATIVE_INFINITY;for(let ja=0;ja<S.length;ja++)aa=L(S[ja],ka),O=aa.x>O?O:aa.x,fa=aa.x<fa?fa:aa.x,da=aa.y>da?da:aa.y,na=aa.y<na?na:aa.y;ca={xmin:O,xmax:fa,ymin:da,ymax:na,spatialReference:ca}}else ca=
{xmin:-.5,ymin:.5-R,xmax:F-.5,ymax:.5,spatialReference:ca};S=n.filter(na=>1===y(na,"NEWSUBFILETYPE"));let oa,qa,ta;if(0<S.length){oa=Math.round(Math.log(F/D(S[0],"IMAGEWIDTH"))/Math.LN2);var ma=S[S.length-1];qa=Math.round(Math.log(F/D(ma,"IMAGEWIDTH"))/Math.LN2);ta=D(ma,"TILEWIDTH");ma=D(ma,"TILELENGTH")}ta=0<qa?ta||f:null;ma=0<qa?ma||g:null;let sa;f&&(sa=[{maxCol:Math.ceil(F/f)-1,maxRow:Math.ceil(R/g)-1,minRow:0,minCol:0}],S.forEach(na=>{sa.push({maxCol:Math.ceil(D(na,"IMAGEWIDTH")/D(na,"TILEWIDTH"))-
1,maxRow:Math.ceil(D(na,"IMAGELENGTH")/D(na,"TILELENGTH"))-1,minRow:0,minCol:0})}));S=y(n[0],"GDAL_METADATA");S=r(S);Z+=" "+p({width:F,height:R,tileWidth:f,tileHeight:g,planes:X,ifds:n});return{width:F,height:R,tileWidth:f,tileHeight:g,planes:X,isBSQ:H,pixelType:x,compression:B,noData:T,isSupported:J,message:Z,extent:ca,affine:Q?null:ka,firstPyramidLevel:oa,maximumPyramidLevel:qa,pyramidBlockWidth:ta,pyramidBlockHeight:ma,tileBoundary:sa,metadata:S}}function b(n,x){return(n=C(n,"PLANARCONFIGURATION"))?
2===n[0]:x?x.isBSQ:!1}function k(n){const {littleEndian:x,isBigTiff:B,firstIFD:S}=h(n);var f=S;const g=[];do if(f=d(n,x,f,0,l.TIFF_TAGS,B?8:4),f.success)g.push(f.ifd),f=f.nextIFD;else break;while(0<f);return{...c(g),littleEndian:x,isBigTiff:B,ifds:g}}function t(n,x,B){const S=n.getUint32(x,B);n=n.getUint32(x+4,B);return B?4294967296*n+S:4294967296*S+n}function q(n,x,B,S){return S?t(n,x,B):n.getUint32(x,B)}function h(n){var x=new DataView(n,0,16),B=x.getUint16(0,!1);n=null;if(18761===B)n=!0;else if(19789===
B)n=!1;else throw"unexpected endianess byte";var S=x.getUint16(2,n);if(42!==S&&43!==S)throw"unexpected tiff identifier";B=4;if(S=43===S){const f=x.getUint16(B,n);B+=2;if(8!==f)throw"unsupported bigtiff version";if(0!==x.getUint16(B,n))throw"unsupported bigtiff version";B+=2}x=q(x,B,n,S);return{littleEndian:n,isBigTiff:S,firstIFD:x}}function d(n,x,B,S=0,f=l.TIFF_TAGS,g=4){B=a(n,x,B,S,f,g);let F;const R=B.ifd;R&&(l.ifdTags.forEach((Q,X)=>{R.has(X)&&(F=R.get(X),F.data=a(n,x,F.valueOffset-S,S,Q).ifd)}),
R.has("GEOKEYDIRECTORY")&&(F=R.get("GEOKEYDIRECTORY"),(f=F.values)&&4<f.length&&(f=f[0]+"."+f[1]+"."+f[2],F.data=a(n,x,F.valueOffset+6-S,S,l.GEO_KEYS,2).ifd,F.data&&F.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[f]}))),R.has("XMP")&&(F=R.get("XMP"),f=F.values,"number"===typeof f[0]&&7===F.type&&(F.values=[I.bytesToUTF8(new Uint8Array(f))])));return B}function p(n){const {width:x,height:B,tileHeight:S,tileWidth:f}=n,g=n.planes,F=f?f*S:x*B;n=D(n.ifds[0],"BITSPERSAMPLE");
let R="";F*g>2**30/(8<n?n/8:1)&&(R=f?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported");return R}var z={exports:{}};(function(n){(function(x){x=x();void 0!==x&&(n.exports=x)})(function(){var x={unstuff:function(f,g,F,R,Q,X,aa,H){var J=(1<<F)-1,T=0,O,Z=0;f[f.length-1]<<=8*(4*f.length-Math.ceil(F*R/8));if(Q)for(O=0;O<R;O++){if(0===Z){var ca=f[T++];Z=32}if(Z>=F){var da=ca>>>Z-F&J;Z-=F}else Z=F-Z,da=(ca&J)<<Z&J,ca=f[T++],Z=32-Z,da+=ca>>>
Z;g[O]=Q[da]}else for(Q=Math.ceil((H-X)/aa),O=0;O<R;O++)0===Z&&(ca=f[T++],Z=32),Z>=F?(da=ca>>>Z-F&J,Z-=F):(Z=F-Z,da=(ca&J)<<Z&J,ca=f[T++],Z=32-Z,da+=ca>>>Z),g[O]=da<Q?X+da*aa:H},unstuffLUT:function(f,g,F,R,Q,X){var aa=(1<<g)-1,H=0,J=0,T=0,O=T=0,Z=[];f[f.length-1]<<=8*(4*f.length-Math.ceil(g*F/8));var ca=Math.ceil((X-R)/Q);for(J=0;J<F;J++){if(0===T){var da=f[H++];T=32}T>=g?(O=da>>>T-g&aa,T-=g):(T=g-T,O=(da&aa)<<T&aa,da=f[H++],T=32-T,O+=da>>>T);Z[J]=O<ca?R+O*Q:X}Z.unshift(R);return Z},unstuff2:function(f,
g,F,R,Q,X,aa,H){var J=(1<<F)-1,T=0,O,Z=0,ca=0;if(Q)for(O=0;O<R;O++){if(0===Z){var da=f[T++];Z=32;ca=0}if(Z>=F){var fa=da>>>ca&J;Z-=F;ca+=F}else{var ka=F-Z;fa=da>>>ca&J;da=f[T++];Z=32-ka;fa|=(da&(1<<ka)-1)<<F-ka;ca=ka}g[O]=Q[fa]}else for(Q=Math.ceil((H-X)/aa),O=0;O<R;O++)0===Z&&(da=f[T++],Z=32,ca=0),Z>=F?(fa=da>>>ca&J,Z-=F,ca+=F):(ka=F-Z,fa=da>>>ca&J,da=f[T++],Z=32-ka,fa|=(da&(1<<ka)-1)<<F-ka,ca=ka),g[O]=fa<Q?X+fa*aa:H;return g},unstuffLUT2:function(f,g,F,R,Q,X){var aa=(1<<g)-1,H=0,J=0,T=0,O=0,Z=0,
ca=0,da=[],fa=Math.ceil((X-R)/Q);for(J=0;J<F;J++){if(0===O){var ka=f[H++];O=32;ca=0}O>=g?(Z=ka>>>ca&aa,O-=g,ca+=g):(T=g-O,Z=ka>>>ca&aa,ka=f[H++],O=32-T,Z|=(ka&(1<<T)-1)<<g-T,ca=T);da[J]=Z<fa?R+Z*Q:X}da.unshift(R);return da},originalUnstuff:function(f,g,F,R){var Q=(1<<F)-1,X=0,aa,H=0;f[f.length-1]<<=8*(4*f.length-Math.ceil(F*R/8));for(aa=0;aa<R;aa++){if(0===H){var J=f[X++];H=32}if(H>=F){var T=J>>>H-F&Q;H-=F}else H=F-H,T=(J&Q)<<H&Q,J=f[X++],H=32-H,T+=J>>>H;g[aa]=T}return g},originalUnstuff2:function(f,
g,F,R){var Q=(1<<F)-1,X=0,aa,H=0,J=0;for(aa=0;aa<R;aa++){if(0===H){var T=f[X++];H=32;J=0}if(H>=F){var O=T>>>J&Q;H-=F;J+=F}else{var Z=F-H;O=T>>>J&Q;T=f[X++];H=32-Z;O|=(T&(1<<Z)-1)<<F-Z;J=Z}g[aa]=O}return g}},B={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(f){for(var g=65535,F=65535,R=f.length,Q=Math.floor(R/2),X=0;Q;){var aa=359<=Q?359:Q;Q-=aa;do g+=f[X++]<<8,F+=g+=f[X++];while(--aa);g=(g&65535)+(g>>>16);F=(F&65535)+(F>>>16)}R&1&&(F+=g+=f[X]<<8);return((F&65535)+(F>>>16)<<16|(g&65535)+
(g>>>16))>>>0},readHeaderInfo:function(f,g){var F=g.ptr,R=new Uint8Array(f,F,6),Q={};Q.fileIdentifierString=String.fromCharCode.apply(null,R);if(0!==Q.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+Q.fileIdentifierString;F+=6;R=new DataView(f,F,8);var X=R.getInt32(0,!0);Q.fileVersion=X;F+=4;3<=X&&(Q.checksum=R.getUint32(4,!0),F+=4);R=new DataView(f,F,12);Q.height=R.getUint32(0,!0);Q.width=R.getUint32(4,!0);F+=8;4<=X?(Q.numDims=R.getUint32(8,
!0),F+=4):Q.numDims=1;R=new DataView(f,F,40);Q.numValidPixel=R.getUint32(0,!0);Q.microBlockSize=R.getInt32(4,!0);Q.blobSize=R.getInt32(8,!0);Q.imageType=R.getInt32(12,!0);Q.maxZError=R.getFloat64(16,!0);Q.zMin=R.getFloat64(24,!0);Q.zMax=R.getFloat64(32,!0);F+=40;g.headerInfo=Q;g.ptr=F;if(3<=X&&(f=this.computeChecksumFletcher32(new Uint8Array(f,F-(4<=X?52:48),Q.blobSize-14)),f!==Q.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(f,g){var F=g.headerInfo,R=this.getDataTypeArray(F.imageType),
Q=F.numDims*this.getDataTypeSize(F.imageType),X=this.readSubArray(f,g.ptr,R,Q);f=this.readSubArray(f,g.ptr+Q,R,Q);g.ptr+=2*Q;Q=!0;for(g=0;g<F.numDims;g++)if(X[g]!==f[g]){Q=!1;break}F.minValues=X;F.maxValues=f;return Q},readSubArray:function(f,g,F,R){if(F===Uint8Array)f=new Uint8Array(f,g,R);else{var Q=new ArrayBuffer(R);(new Uint8Array(Q)).set(new Uint8Array(f,g,R));f=new F(Q)}return f},readMask:function(f,g){var F=g.ptr,R=g.headerInfo,Q=R.width*R.height,X=R.numValidPixel,aa=new DataView(f,F,4);R=
{};R.numBytes=aa.getUint32(0,!0);F+=4;if((0===X||Q===X)&&0!==R.numBytes)throw"invalid mask";if(0===X)X=new Uint8Array(Math.ceil(Q/8)),R.bitset=X,aa=new Uint8Array(Q),g.pixels.resultMask=aa,F+=R.numBytes;else if(0<R.numBytes){X=new Uint8Array(Math.ceil(Q/8));aa=new DataView(f,F,R.numBytes);f=aa.getInt16(0,!0);var H=2,J=0,T=0;do{if(0<f)for(;f--;)X[J++]=aa.getUint8(H++);else for(T=aa.getUint8(H++),f=-f;f--;)X[J++]=T;f=aa.getInt16(H,!0);H+=2}while(H<R.numBytes);if(-32768!==f||J<X.length)throw"Unexpected end of mask RLE encoding";
aa=new Uint8Array(Q);for(H=H=f=0;H<Q;H++)H&7?(f=X[H>>3],f<<=H&7):f=X[H>>3],f&128&&(aa[H]=1);g.pixels.resultMask=aa;R.bitset=X;F+=R.numBytes}g.ptr=F;g.mask=R;return!0},readDataOneSweep:function(f,g,F,R){var Q=g.ptr,X=g.headerInfo,aa=X.numDims,H=X.width*X.height;X=X.numValidPixel*B.getDataTypeSize(X.imageType)*aa;var J=g.pixels.resultMask;if(F===Uint8Array)f=new Uint8Array(f,Q,X);else{var T=new ArrayBuffer(X);(new Uint8Array(T)).set(new Uint8Array(f,Q,X));f=new F(T)}if(f.length===H*aa)g.pixels.resultPixels=
R?B.swapDimensionOrder(f,H,aa,F,!0):f;else{g.pixels.resultPixels=new F(H*aa);var O=T=F=0,Z=0;if(1<aa)if(R)for(T=0;T<H;T++){if(J[T])for(Z=T,O=0;O<aa;O++,Z+=H)g.pixels.resultPixels[Z]=f[F++]}else for(T=0;T<H;T++){if(J[T])for(Z=T*aa,O=0;O<aa;O++)g.pixels.resultPixels[Z+O]=f[F++]}else for(T=0;T<H;T++)J[T]&&(g.pixels.resultPixels[T]=f[F++])}g.ptr=Q+X;return!0},readHuffmanTree:function(f,g){var F=this.HUFFMAN_LUT_BITS_MAX,R=new DataView(f,g.ptr,16);g.ptr+=16;if(2>R.getInt32(0,!0))throw"unsupported Huffman version";
var Q=R.getInt32(4,!0),X=R.getInt32(8,!0);R=R.getInt32(12,!0);if(X>=R)return!1;var aa=new Uint32Array(R-X);B.decodeBits(f,g,aa);var H=[],J;for(J=X;J<R;J++){var T=J-(J<Q?0:Q);H[T]={first:aa[J-X],second:null}}J=f.byteLength-g.ptr;aa=new ArrayBuffer(4*Math.ceil(J/4));(new Uint8Array(aa)).set(new Uint8Array(f,g.ptr,J));f=new Uint32Array(aa);g=0;aa=0;var O=f[0];for(J=X;J<R;J++){T=J-(J<Q?0:Q);var Z=H[T].first;0<Z&&(H[T].second=O<<g>>>32-Z,32-g>=Z?(g+=Z,32===g&&(g=0,aa++,O=f[aa])):(g+=Z-32,aa++,O=f[aa],
H[T].second|=O>>>32-g))}var ca=O=0,da=new S;for(J=0;J<H.length;J++)void 0!==H[J]&&(O=Math.max(O,H[J].first));ca=O>=F?F:O;F=[];var fa;for(J=X;J<R;J++)if(T=J-(J<Q?0:Q),Z=H[T].first,0<Z)if(X=[Z,T],Z<=ca){T=H[T].second<<ca-Z;var ka=1<<ca-Z;for(Z=0;Z<ka;Z++)F[T|Z]=X}else for(T=H[T].second,ka=da,--Z;0<=Z;Z--)(fa=T>>>Z&1)?(ka.right||(ka.right=new S),ka=ka.right):(ka.left||(ka.left=new S),ka=ka.left),0!==Z||ka.val||(ka.val=X[1]);return{decodeLut:F,numBitsLUTQick:ca,numBitsLUT:O,tree:da,stuffedData:f,srcPtr:aa,
bitPos:g}},readHuffman:function(f,g,F,R){var Q=g.headerInfo.numDims,X=g.headerInfo.height,aa=g.headerInfo.width,H=aa*X,J=this.readHuffmanTree(f,g);f=J.decodeLut;var T=J.tree,O=J.stuffedData,Z=J.srcPtr,ca=J.bitPos,da=J.numBitsLUTQick;J=J.numBitsLUT;var fa=0===g.headerInfo.imageType?128:0,ka=g.pixels.resultMask,oa,qa,ta,ma,sa,na,ja=0;0<ca&&(Z++,ca=0);var Aa=O[Z],Ba=1===g.encodeMode,Ia=new F(H*Q),Ha=Ia,Fa;if(2>Q||Ba)for(Fa=0;Fa<Q;Fa++)if(1<Q&&(Ha=new F(Ia.buffer,H*Fa,H),ja=0),g.headerInfo.numValidPixel===
aa*X)for(ta=sa=0;ta<X;ta++)for(ma=0;ma<aa;ma++,sa++){var xa=0;var wa=oa=Aa<<ca>>>32-da;32-ca<da&&(wa=oa|=O[Z+1]>>>64-ca-da);if(f[wa])xa=f[wa][1],ca+=f[wa][0];else for(wa=oa=Aa<<ca>>>32-J,32-ca<J&&(wa=oa|=O[Z+1]>>>64-ca-J),wa=T,na=0;na<J;na++)if(wa=(qa=oa>>>J-na-1&1)?wa.right:wa.left,!wa.left&&!wa.right){xa=wa.val;ca=ca+na+1;break}32<=ca&&(ca-=32,Z++,Aa=O[Z]);xa-=fa;Ba?(xa=0<ma?xa+ja:0<ta?xa+Ha[sa-aa]:xa+ja,xa&=255,ja=Ha[sa]=xa):Ha[sa]=xa}else for(ta=sa=0;ta<X;ta++)for(ma=0;ma<aa;ma++,sa++){if(ka[sa]){xa=
0;wa=oa=Aa<<ca>>>32-da;32-ca<da&&(wa=oa|=O[Z+1]>>>64-ca-da);if(f[wa])xa=f[wa][1],ca+=f[wa][0];else for(wa=oa=Aa<<ca>>>32-J,32-ca<J&&(wa=oa|=O[Z+1]>>>64-ca-J),wa=T,na=0;na<J;na++)if(wa=(qa=oa>>>J-na-1&1)?wa.right:wa.left,!wa.left&&!wa.right){xa=wa.val;ca=ca+na+1;break}32<=ca&&(ca-=32,Z++,Aa=O[Z]);xa-=fa;Ba?(xa=0<ma&&ka[sa-1]?xa+ja:0<ta&&ka[sa-aa]?xa+Ha[sa-aa]:xa+ja,xa&=255,ja=Ha[sa]=xa):Ha[sa]=xa}}else for(ta=sa=0;ta<X;ta++)for(ma=0;ma<aa;ma++)if(sa=ta*aa+ma,!ka||ka[sa])for(Fa=0;Fa<Q;Fa++,sa+=H){xa=
0;wa=oa=Aa<<ca>>>32-da;32-ca<da&&(wa=oa|=O[Z+1]>>>64-ca-da);if(f[wa])xa=f[wa][1],ca+=f[wa][0];else for(wa=oa=Aa<<ca>>>32-J,32-ca<J&&(wa=oa|=O[Z+1]>>>64-ca-J),wa=T,na=0;na<J;na++)if(wa=(qa=oa>>>J-na-1&1)?wa.right:wa.left,!wa.left&&!wa.right){xa=wa.val;ca=ca+na+1;break}32<=ca&&(ca-=32,Z++,Aa=O[Z]);xa-=fa;Ha[sa]=xa}g.ptr=g.ptr+4*(Z+1)+(0<ca?4:0);g.pixels.resultPixels=Ia;1<Q&&!R&&(g.pixels.resultPixels=B.swapDimensionOrder(Ia,H,Q,F))},decodeBits:function(f,g,F,R,Q){var X=g.headerInfo,aa=X.fileVersion,
H=0,J=new DataView(f,g.ptr,5<=f.byteLength-g.ptr?5:f.byteLength-g.ptr),T=J.getUint8(0);H++;var O=T>>6,Z=0===O?4:3-O,ca=0<(T&32)?!0:!1;O=T&31;T=0;if(1===Z)T=J.getUint8(H),H++;else if(2===Z)T=J.getUint16(H,!0),H+=2;else if(4===Z)T=J.getUint32(H,!0),H+=4;else throw"Invalid valid pixel count type";Z=2*X.maxZError;Q=1<X.numDims?X.maxValues[Q]:X.zMax;if(ca){g.counter.lut++;ca=J.getUint8(H);H++;X=Math.ceil((ca-1)*O/8);var da=Math.ceil(X/4);da=new ArrayBuffer(4*da);var fa=new Uint8Array(da);g.ptr+=H;fa.set(new Uint8Array(f,
g.ptr,X));H=new Uint32Array(da);g.ptr+=X;for(J=0;ca-1>>>J;)J++;X=Math.ceil(T*J/8);da=Math.ceil(X/4);da=new ArrayBuffer(4*da);fa=new Uint8Array(da);fa.set(new Uint8Array(f,g.ptr,X));f=new Uint32Array(da);g.ptr+=X;g=3<=aa?x.unstuffLUT2(H,O,ca-1,R,Z,Q):x.unstuffLUT(H,O,ca-1,R,Z,Q);3<=aa?x.unstuff2(f,F,J,T,g):x.unstuff(f,F,J,T,g)}else g.counter.bitstuffer++,J=O,g.ptr+=H,0<J&&(X=Math.ceil(T*J/8),da=Math.ceil(X/4),da=new ArrayBuffer(4*da),fa=new Uint8Array(da),fa.set(new Uint8Array(f,g.ptr,X)),f=new Uint32Array(da),
g.ptr+=X,3<=aa?null==R?x.originalUnstuff2(f,F,J,T):x.unstuff2(f,F,J,T,!1,R,Z,Q):null==R?x.originalUnstuff(f,F,J,T):x.unstuff(f,F,J,T,!1,R,Z,Q))},readTiles:function(f,g,F,R){var Q=g.headerInfo,X=Q.width,aa=Q.height,H=X*aa,J=Q.microBlockSize,T=Q.imageType,O=B.getDataTypeSize(T),Z=Math.ceil(X/J),ca=Math.ceil(aa/J);g.pixels.numBlocksY=ca;g.pixels.numBlocksX=Z;var da=g.pixels.ptr=0,fa=0,ka=0,oa=0,qa=0,ta=0,ma=0,sa=0,na=da=0,ja=0,Aa=0,Ba=ma=0;ma=ma=0;var Ia=new F(J*J);aa=aa%J||J;var Ha=X%J||J,Fa=Q.numDims,
xa,wa=g.pixels.resultMask,La=g.pixels.resultPixels,Pa=5<=Q.fileVersion?14:15,Oa=Q.zMax;for(ka=0;ka<ca;ka++)for(qa=ka!==ca-1?J:aa,oa=0;oa<Z;oa++)for(ta=oa!==Z-1?J:Ha,ja=ka*X*J+oa*J,Aa=X-ta,xa=0;xa<Fa;xa++){1<Fa?(Ba=La,ja=ka*X*J+oa*J,La=new F(g.pixels.resultPixels.buffer,H*xa*O,H),Oa=Q.maxValues[xa]):Ba=null;ma=f.byteLength-g.ptr;fa=new DataView(f,g.ptr,Math.min(10,ma));var la={};ma=0;sa=fa.getUint8(0);ma++;var Ka=5<=Q.fileVersion?sa&4:0;da=sa>>6&255;na=sa>>2&Pa;if(na!==(oa*J>>3&Pa))throw"integrity issue";
if(Ka&&0===xa)throw"integrity issue";sa&=3;if(3<sa)throw g.ptr+=ma,"Invalid block encoding ("+sa+")";if(2===sa){if(Ka)if(wa)for(da=0;da<qa;da++)for(fa=0;fa<ta;fa++)wa[ja]&&(La[ja]=Ba[ja]),ja++;else for(da=0;da<qa;da++)for(fa=0;fa<ta;fa++)La[ja]=Ba[ja],ja++;g.counter.constant++;g.ptr+=ma}else if(0===sa){if(Ka)throw"integrity issue";g.counter.uncompressed++;g.ptr+=ma;ma=qa*ta*O;Ba=f.byteLength-g.ptr;ma=ma<Ba?ma:Ba;Ba=new ArrayBuffer(0===ma%O?ma:ma+O-ma%O);Ka=new Uint8Array(Ba);Ka.set(new Uint8Array(f,
g.ptr,ma));Ba=new F(Ba);ma=0;if(wa)for(da=0;da<qa;da++){for(fa=0;fa<ta;fa++)wa[ja]&&(La[ja]=Ba[ma++]),ja++;ja+=Aa}else for(da=0;da<qa;da++){for(fa=0;fa<ta;fa++)La[ja++]=Ba[ma++];ja+=Aa}g.ptr+=ma*O}else if(da=B.getDataTypeUsed(Ka&&6>T?4:T,da),la=B.getOnePixel(la,ma,da,fa),ma+=B.getDataTypeSize(da),3===sa)if(g.ptr+=ma,g.counter.constantoffset++,wa)for(da=0;da<qa;da++){for(fa=0;fa<ta;fa++)wa[ja]&&(La[ja]=Ka?Math.min(Oa,Ba[ja]+la):la),ja++;ja+=Aa}else for(da=0;da<qa;da++){for(fa=0;fa<ta;fa++)La[ja]=Ka?
Math.min(Oa,Ba[ja]+la):la,ja++;ja+=Aa}else if(g.ptr+=ma,B.decodeBits(f,g,Ia,la,xa),ma=0,Ka)if(wa)for(da=0;da<qa;da++){for(fa=0;fa<ta;fa++)wa[ja]&&(La[ja]=Ia[ma++]+Ba[ja]),ja++;ja+=Aa}else for(da=0;da<qa;da++){for(fa=0;fa<ta;fa++)La[ja]=Ia[ma++]+Ba[ja],ja++;ja+=Aa}else if(wa)for(da=0;da<qa;da++){for(fa=0;fa<ta;fa++)wa[ja]&&(La[ja]=Ia[ma++]),ja++;ja+=Aa}else for(da=0;da<qa;da++){for(fa=0;fa<ta;fa++)La[ja++]=Ia[ma++];ja+=Aa}}1<Fa&&!R&&(g.pixels.resultPixels=B.swapDimensionOrder(g.pixels.resultPixels,
H,Fa,F))},formatFileInfo:function(f){return{fileIdentifierString:f.headerInfo.fileIdentifierString,fileVersion:f.headerInfo.fileVersion,imageType:f.headerInfo.imageType,height:f.headerInfo.height,width:f.headerInfo.width,numValidPixel:f.headerInfo.numValidPixel,microBlockSize:f.headerInfo.microBlockSize,blobSize:f.headerInfo.blobSize,maxZError:f.headerInfo.maxZError,pixelType:B.getPixelType(f.headerInfo.imageType),eofOffset:f.eofOffset,mask:f.mask?{numBytes:f.mask.numBytes}:null,pixels:{numBlocksX:f.pixels.numBlocksX,
numBlocksY:f.pixels.numBlocksY,maxValue:f.headerInfo.zMax,minValue:f.headerInfo.zMin,noDataValue:f.noDataValue}}},constructConstantSurface:function(f,g){var F=f.headerInfo.zMax,R=f.headerInfo.zMin,Q=f.headerInfo.maxValues,X=f.headerInfo.numDims,aa=f.headerInfo.height*f.headerInfo.width,H=0,J=0,T=0,O=f.pixels.resultMask;f=f.pixels.resultPixels;if(O)if(1<X)if(g)for(H=0;H<X;H++)for(T=H*aa,F=Q[H],J=0;J<aa;J++)O[J]&&(f[T+J]=F);else for(J=0;J<aa;J++){if(O[J])for(T=J*X,H=0;H<X;H++)f[T+X]=Q[H]}else for(J=
0;J<aa;J++)O[J]&&(f[J]=F);else if(1<X&&R!==F)if(g)for(H=0;H<X;H++)for(T=H*aa,F=Q[H],J=0;J<aa;J++)f[T+J]=F;else for(J=0;J<aa;J++)for(T=J*X,H=0;H<X;H++)f[T+H]=Q[H];else for(J=0;J<aa*X;J++)f[J]=F},getDataTypeArray:function(f){switch(f){case 0:f=Int8Array;break;case 1:f=Uint8Array;break;case 2:f=Int16Array;break;case 3:f=Uint16Array;break;case 4:f=Int32Array;break;case 5:f=Uint32Array;break;case 6:f=Float32Array;break;case 7:f=Float64Array;break;default:f=Float32Array}return f},getPixelType:function(f){switch(f){case 0:f=
"S8";break;case 1:f="U8";break;case 2:f="S16";break;case 3:f="U16";break;case 4:f="S32";break;case 5:f="U32";break;case 6:f="F32";break;case 7:f="F64";break;default:f="F32"}return f},isValidPixelValue:function(f,g){if(null==g)return!1;switch(f){case 0:f=-128<=g&&127>=g;break;case 1:f=0<=g&&255>=g;break;case 2:f=-32768<=g&&32767>=g;break;case 3:f=0<=g&&65536>=g;break;case 4:f=-2147483648<=g&&2147483647>=g;break;case 5:f=0<=g&&4294967296>=g;break;case 6:f=-3.4027999387901484E38<=g&&3.4027999387901484E38>=
g;break;case 7:f=4.9E-324<=g&&1.7976931348623157E308>=g;break;default:f=!1}return f},getDataTypeSize:function(f){var g=0;switch(f){case 0:case 1:g=1;break;case 2:case 3:g=2;break;case 4:case 5:case 6:g=4;break;case 7:g=8;break;default:g=f}return g},getDataTypeUsed:function(f,g){var F=f;switch(f){case 2:case 4:F=f-g;break;case 3:case 5:F=f-2*g;break;case 6:F=0===g?f:1===g?2:1;break;case 7:F=0===g?f:f-2*g+1;break;default:F=f}return F},getOnePixel:function(f,g,F,R){f=0;switch(F){case 0:f=R.getInt8(g);
break;case 1:f=R.getUint8(g);break;case 2:f=R.getInt16(g,!0);break;case 3:f=R.getUint16(g,!0);break;case 4:f=R.getInt32(g,!0);break;case 5:f=R.getUInt32(g,!0);break;case 6:f=R.getFloat32(g,!0);break;case 7:f=R.getFloat64(g,!0);break;default:throw"the decoder does not understand this pixel type";}return f},swapDimensionOrder:function(f,g,F,R,Q){var X=0,aa=0,H=0,J=0,T=f;if(1<F)if(T=new R(g*F),Q)for(X=0;X<g;X++)for(J=X,H=0;H<F;H++,J+=g)T[J]=f[aa++];else for(X=0;X<g;X++)for(J=X,H=0;H<F;H++,J+=g)T[aa++]=
f[J];return T}},S=function(f,g,F){this.val=f;this.left=g;this.right=F};return{decode:function(f,g){g=g||{};var F=g.noDataValue,R=0,Q={};Q.ptr=g.inputOffset||0;Q.pixels={};B.readHeaderInfo(f,Q);R=Q.headerInfo;var X=R.fileVersion,aa=B.getDataTypeArray(R.imageType);if(5<X)throw"unsupported lerc version 2."+X;B.readMask(f,Q);R.numValidPixel===R.width*R.height||Q.pixels.resultMask||(Q.pixels.resultMask=g.maskData);var H=R.width*R.height;Q.pixels.resultPixels=new aa(H*R.numDims);Q.counter={onesweep:0,uncompressed:0,
lut:0,bitstuffer:0,constant:0,constantoffset:0};var J=!g.returnPixelInterleavedDims;if(0!==R.numValidPixel)if(R.zMax===R.zMin)B.constructConstantSurface(Q,J);else if(4<=X&&B.checkMinMaxRanges(f,Q))B.constructConstantSurface(Q,J);else{var T=new DataView(f,Q.ptr,2),O=T.getUint8(0);Q.ptr++;if(O)B.readDataOneSweep(f,Q,aa,J);else if(1<X&&1>=R.imageType&&1E-5>Math.abs(R.maxZError-.5)){T=T.getUint8(1);Q.ptr++;Q.encodeMode=T;if(2<T||4>X&&1<T)throw"Invalid Huffman flag "+T;T?B.readHuffman(f,Q,aa,J):B.readTiles(f,
Q,aa,J)}else B.readTiles(f,Q,aa,J)}Q.eofOffset=Q.ptr;g.inputOffset?(f=Q.headerInfo.blobSize+g.inputOffset-Q.ptr,1<=Math.abs(f)&&(Q.eofOffset=g.inputOffset+Q.headerInfo.blobSize)):(f=Q.headerInfo.blobSize-Q.ptr,1<=Math.abs(f)&&(Q.eofOffset=Q.headerInfo.blobSize));f={width:R.width,height:R.height,pixelData:Q.pixels.resultPixels,minValue:R.zMin,maxValue:R.zMax,validPixelCount:R.numValidPixel,dimCount:R.numDims,dimStats:{minValues:R.minValues,maxValues:R.maxValues},maskData:Q.pixels.resultMask};if(Q.pixels.resultMask&&
B.isValidPixelValue(R.imageType,F)){X=Q.pixels.resultMask;for(R=0;R<H;R++)X[R]||(f.pixelData[R]=F);f.noDataValue=F}Q.noDataValue=F;g.returnFileInfo&&(f.fileInfo=B.formatFileInfo(Q));return f},getBandCount:function(f){for(var g=0,F=0,R={ptr:0,pixels:{}};F<f.byteLength-58;)B.readHeaderInfo(f,R),F+=R.headerInfo.blobSize,g++,R.ptr=F;return g}}})})(z);var u=z.exports;const v=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],A=new Set([1,5,6,7,8,34712,34887]),P=function(n,x,B,S,f){var g,F,R=U.isPlatformLittleEndian===
x,Q=D(B,"BITSPERSAMPLE");const X=null!=(g=D(B,"SAMPLEFORMAT"))?g:1;g=Y(X,Q);Q=null!=(F=D(B,"COMPRESSION"))?F:1;F=M(g);if(34887===Q)return u.decode(n,{inputOffset:S,returnFileInfo:!0}).pixelData;if(1===Q){var aa=n.slice(S,S+f);var H=new Uint8Array(aa)}else if(8===Q||32946===Q)H=new Uint8Array(n,S,f),H=new V.Zlib(H),n=H.getBytes(),aa=new ArrayBuffer(n.length),H=new Uint8Array(aa),H.set(n);else if(6===Q)H=new Uint8Array(n,S,f),aa=new w.JpegImage,aa.parse(H),n=aa.getData(aa.width,aa.height,!0),aa=new ArrayBuffer(n.length),
H=new Uint8Array(aa),H.set(n);else if(7===Q){x=B.get("JPEGTABLES").values;aa=x.length-2;H=new Uint8Array(aa+f-2);for(B=0;B<aa;B++)H[B]=x[B];n=new Uint8Array(n,S+2,f-2);for(S=0;S<n.length;S++)H[aa+S]=n[S];aa=new w.JpegImage;aa.parse(H);n=aa.getData(aa.width,aa.height,!0);aa=new ArrayBuffer(n.length);H=new Uint8Array(aa);H.set(n)}else 5===Q&&(H=N.decode(n,S,f,x),aa=H.buffer);if("u8"!==g&&"s8"!==g&&!R)switch(aa=new ArrayBuffer(H.length),R=new Uint8Array(aa),g){case "u16":case "s16":for(g=0;g<H.length;g+=
2)R[g]=H[g+1],R[g+1]=H[g];break;case "u32":case "s32":case "f32":for(g=0;g<H.length;g+=4)R[g]=H[g+3],R[g+1]=H[g+2],R[g+2]=H[g+1],R[g+3]=H[g]}return new F(aa)},E=function(n,x,B){if(!(n&&0<n.length&&x&&B))return null;let S,f,g;const F=n[0].length,R=n.length,Q=new Uint8Array(F);for(let aa=0;aa<R;aa++)if(S=n[aa],f=x[aa],g=B[aa],0===aa)for(var X=0;X<F;X++)Q[X]=S[X]<f||S[X]>g?0:1;else for(X=0;X<F;X++)Q[X]&&(Q[X]=S[X]<f||S[X]>g?0:1);return Q},r=function(n){if(!n)return null;var x=n.match(/<Item(.*?)Item>/gi);
if(!x||0===x.length)return null;n=new Map;var B;for(var S=0;S<x.length;S++){var f=x[S];var g=f.slice(6,f.indexOf("\x3e"));var F=f.indexOf("sample\x3d");-1<F&&(B=f.slice(F+8,f.indexOf('"',F+8)));F=f.indexOf("name\x3d");-1<F&&(g=f.slice(F+6,f.indexOf('"',F+6)));g&&(f=f.slice(f.indexOf("\x3e")+1,f.indexOf("\x3c/Item\x3e")).trim(),null!=B?n.has(g)?n.get(g)[B]=f:n.set(g,[f]):n.set(g,f));B=null}x=n.get("STATISTICS_MINIMUM");g=n.get("STATISTICS_MAXIMUM");S=n.get("STATISTICS_MEAN");f=n.get("STATISTICS_STDDEV");
B=null;if(x&&g)for(B=[],F=0;F<x.length;F++)B.push({min:parseFloat(x[F]),max:parseFloat(g[F]),avg:S&&parseFloat(S[F]),stddev:f&&parseFloat(f[F])});g=n.get("BandName");S=n.get("WavelengthMin");f=n.get("WavelengthMax");x=null;if(g)for(x=[],F=0;F<g.length;F++)x.push({BandName:g[F],WavelengthMin:S&&parseFloat(S[F]),WavelengthMax:f&&parseFloat(f[F])});g=n.get("DataType");return{statistics:B,bandProperties:x,dataType:g,rawMetadata:n}};W.Lerc2Codec=u;W.decode=function(n,x=0,B){B=B||k(n);const {ifds:S,noData:f}=
B;if(0===S.length)throw"no valid image file directory";var g=p(B);if(g)throw g;g=-1===x?S[S.length-1]:S[x];x=f?f[0]:null;if(B.tileWidth){var F=B,R,Q=e(g,"TILEOFFSETS");if(void 0===Q)g=null;else{B=e(g,"TILEBYTECOUNTS");var {width:X,height:aa,pixelType:H,tileWidth:J,tileHeight:T}=c([g]),O=b(g,F),Z=F.planes,ca=X*aa,da=D(g,"BITSPERSAMPLE"),fa=34887===(null!=(R=D(g,"COMPRESSION"))?R:1),ka=M(H);R=[];for(var oa=0;oa<Z;oa++)R.push(new ka(ca));var qa,ta;ca=Math.ceil(X/J);if(0===da%8)if(fa&&O&&1<Z)for(O=Math.round(Q.length/
Z),da=0;da<O;da++){var ma=Math.floor(da/ca)*T;var sa=da%ca*J;ka=ma*X+sa;for(fa=0;fa<Z;fa++){oa=da*Z+fa;oa=P(n,F.littleEndian,g,Q[oa],B[oa]);var na=0;var ja=ka;var Aa=Math.min(J,X-sa);var Ba=Math.min(T,aa-ma);var Ia=R[fa];for(qa=0;qa<Ba;qa++)for(ja=ka+qa*X,na=qa*J,ta=0;ta<Aa;ta++,ja++,na++)Ia[ja]=oa[na]}}else for(da=0;da<Q.length;da++)for(ma=Math.floor(da/ca)*T,sa=da%ca*J,ka=ma*X+sa,oa=P(n,F.littleEndian,g,Q[da],B[da]),na=0,ja=ka,Aa=Math.min(J,X-sa),Ba=Math.min(T,aa-ma),ma=0;ma<Z;ma++)if(Ia=R[ma],
O||fa)for(qa=0;qa<Ba;qa++)for(ja=ka+qa*X,na=J*T*ma+qa*J,ta=0;ta<Aa;ta++,ja++,na++)Ia[ja]=oa[na];else for(qa=0;qa<Ba;qa++)for(ja=ka+qa*X,na=qa*J*Z+ma,ta=0;ta<Aa;ta++,ja++,na+=Z)Ia[ja]=oa[na];g={width:X,height:aa,pixelType:H,pixels:R}}}else if(ca=B,qa=U.isPlatformLittleEndian===ca.littleEndian,ta=e(g,"STRIPOFFSETS"),void 0===ta)g=null;else{var {width:Ha,height:Fa,pixelType:xa}=c([g]);B=ca.planes;Z=Ha*Fa;da=D(g,"BITSPERSAMPLE");Q=M(xa);R=new Q(Z*B);ka=e(g,"STRIPBYTECOUNTS");oa=D(g,"ROWSPERSTRIP");ma=
null!=(sa=D(g,"COMPRESSION"))?sa:1;ja=oa;if(0===da%8)for(g=0;g<ta.length;g++){sa=g*oa*Ha*B;ja=(g+1)*oa>Fa?Fa-g*oa:oa;if("u8"===xa||"s8"===xa||qa)8===ma||32946===ma?(O=new Uint8Array(n,ta[g],ka[g]),O=new V.Zlib(O),na=O.getBytes(),fa=new ArrayBuffer(na.length),O=new Uint8Array(fa),O.set(na),O.length!==ja*Ha*B*da/8&&console.log("strip byte counts is different than expected")):6===ma?(O=new Uint8Array(n,ta[g],ka[g]),fa=new w.JpegImage,fa.parse(O),ja=fa.getData(fa.width,fa.height,!0),fa=new ArrayBuffer(ja.length),
O=new Uint8Array(fa),O.set(ja)):5===ma?(O=N.decode(n,ta[g],ka[g],ca.littleEndian),fa=O.buffer):1===ma&&(ka[g]!==ja*Ha*B*da/8&&console.log("strip byte counts is different than expected"),fa=n.slice(ta[g],ta[g]+ka[g]));else switch(6===ma||8===ma||32946===ma?(O=new Uint8Array(n,ta[g],ka[g]),O=new V.Zlib(O),O=O.getBytes(),fa=new ArrayBuffer(O.length),F=new Uint8Array(fa),O.length!==ja*Ha*B*da/8&&console.log("strip byte counts is different than expected")):1===ma&&(ka[g]!==ja*Ha*B*da/8&&console.log("strip byte counts is different than expected"),
fa=new ArrayBuffer(ka[g]),O=new Uint8Array(n,ta[g],ka[g]),F=new Uint8Array(fa)),xa){case "u16":case "s16":for(ja=0;ja<O.length;ja+=2)F[ja]=O[ja+1],F[ja+1]=O[ja];break;case "u32":case "s32":case "f32":for(ja=0;ja<O.length;ja+=4)F[ja]=O[ja+3],F[ja+1]=O[ja+2],F[ja+2]=O[ja+1],F[ja+3]=O[ja]}ja=new Q(fa);R.set(ja,sa)}O=[];if(1===B)O.push(R);else for(g=0;g<B;g++){F=new Q(Z);for(n=0;n<Z;n++)F[n]=R[n*B+g];O.push(F)}g={width:Ha,height:Fa,pixelType:xa,pixels:O}}if(null!==x){g.mask=new Uint8Array(g.width*g.height);
if(1E24<Math.abs(x))for(n=0;n<g.width*g.height;n++)g.mask[n]=1E-6>Math.abs((g.pixels[0][n]-x)/x)?0:1;else for(n=0;n<g.width*g.height;n++)g.mask[n]=g.pixels[0][n]===x?0:1;g.noDataValue=x}return g};W.decodeTileOrStrip=function(n,x){var B;const {headerInfo:S,ifd:f,offsets:g,sizes:F}=x;var R=g.map((oa,qa)=>P(n,S.littleEndian,f,oa,F[qa]||n.byteLength)),Q=b(f,S);const {pixelType:X,planes:aa}=S;var H=M(X);const J=D(f,"TILEWIDTH"),T=D(f,"TILELENGTH");var O=null!=(B=D(f,"COMPRESSION"))?B:1;B=J*T;const Z=[];
let ca=R[0];const da=34887===O;for(let oa=0;oa<aa;oa++){O=new H(B);if(Q&&da){ca=R[oa];for(var fa=0;fa<B;fa++)O[fa]=ca[oa][fa+oa]}else if(Q||da&&!Q)O=ca.slice(B*oa,B*(oa+1));else for(fa=0;fa<B;fa++)O[fa]=ca[fa*aa+oa];Z.push(O)}R=S.noData?S.noData[0]:null;Q=(H=S.metadata?S.metadata.statistics:null)?H.map(oa=>oa.min):null;H=H?H.map(oa=>oa.max):null;let ka;if(null!=R)if(ka=new Uint8Array(B),1E24<Math.abs(R))for(x=0;x<B;x++)ka[x]=1E-6>Math.abs((Z[0][x]-R)/R)?0:1;else for(x=0;x<B;x++)ka[x]=Z[0][x]===R?
0:1;else Q&&H&&x.applyMinMaxConstraint&&(ka=E(Z,Q,H));return{pixelType:X,width:J,height:T,pixels:Z,mask:ka,noDataValue:R}};W.getImageInfo=c;W.isBSQConfig=b;W.parseFieldValues=m;W.parseHeader=k;W.parseIFD=d;W.parseSignature=h})},"esri/layers/support/rasterDatasets/byteStreamUtils":function(){define(["exports"],function(W){W.bytesToUTF8=function(I,w){let N=0,l="",U=0,V=0;const Y=I.length;for(;N<Y;)if(V=I[N++],U=V>>4,8>U?U=1:15===U?(U=4,V=(V&7)<<18|(I[N++]&63)<<12|(I[N++]&63)<<6|I[N++]&63):14===U?(U=
3,V=(V&15)<<12|(I[N++]&63)<<6|I[N++]&63):(U=2,V=(V&31)<<6|I[N++]&63),0!==V||w)l+=String.fromCharCode(V);return l};Object.defineProperty(W,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/Lzw":function(){define(["exports"],function(W){function I(U,V,Y,M=!0){if(0!==V%4||0!==Y%4){var L=new ArrayBuffer(4*Math.ceil(Y/4));L=new Uint8Array(L);U=new Uint8Array(U,V,Y);if(M)for(M=0;M<L.length;M+=4)L[M]=U[M+3],L[M+1]=U[M+2],L[M+2]=U[M+1],L[M+3]=U[M];else L.set(U);return new Uint32Array(L.buffer)}if(M){M=
new Uint8Array(U,V,Y);L=new Uint8Array(M.length);for(U=0;U<L.length;U+=4)L[U]=M[U+3],L[U+1]=M[U+2],L[U+2]=M[U+1],L[U+3]=M[U];return new Uint32Array(L.buffer)}return new Uint32Array(U,V,Y/4)}function w(){const U=[];for(let V=0;257>=V;V++)U[V]=[V];return U}function N(U,V){for(let Y=0;Y<V.length;Y++)U.push(V[Y])}const l=new Set;l.add(511);l.add(1023);l.add(2047);l.add(4095);l.add(8191);W.decode=function(U,V,Y,M=!0){U=I(U,V,Y,M);V=9;M=w();let L=32,C=M.length,e=[],y=1,D=U[0],a=0;const m=U.length;Y=8*(4*
m-Y);const c=[];for(;null!=D;){if(L>=V)L-=V,a=D>>>32-V,D<<=V;else{a=D>>>32-L;D=U[y++];var b=V-L;L=32-b;a=(a<<b)+(D>>>L);D<<=b}if(257===a)break;if(256===a)V=9,M=w(),C=M.length,e=[];else{b=M[a];if(null==b){if(a>M.length)throw"data integrity issue: code does not exist on code page";e.push(e[0]);M[C++]=e.slice();N(c,e)}else N(c,b),e.push(b[0]),1<e.length&&(M[C++]=e.slice()),e=b.slice();l.has(C)&&V++;0===L&&(D=U[y++],L=32);if(y>m||y===m&&L<=Y)break}}return new Uint8Array(c)};Object.defineProperty(W,"__esModule",
{value:!0})})},"esri/layers/support/rasterFormats/TiffTags":function(){define(function(){const W=(()=>{const l=[];l[254]="NEWSUBFILETYPE";l[255]="SUBFILETYPE";l[256]="IMAGEWIDTH";l[257]="IMAGELENGTH";l[258]="BITSPERSAMPLE";l[259]="COMPRESSION";l[262]="PHOTOMETRICINTERPRETATION";l[263]="THRESHHOLDING";l[264]="CELLWIDTH";l[265]="CELLLENGTH";l[266]="FILLORDER";l[269]="DOCUMENTNAME";l[270]="IMAGEDESCRIPTION";l[271]="MAKE";l[272]="MODEL";l[273]="STRIPOFFSETS";l[274]="ORIENTATION";l[277]="SAMPLESPERPIXEL";
l[278]="ROWSPERSTRIP";l[279]="STRIPBYTECOUNTS";l[280]="MINSAMPLEVALUE";l[281]="MAXSAMPLEVALUE";l[282]="XRESOLUTION";l[283]="YRESOLUTION";l[284]="PLANARCONFIGURATION";l[285]="PAGENAME";l[286]="XPOSITION";l[287]="YPOSITION";l[288]="FREEOFFSETS";l[289]="FREEBYTECOUNTS";l[290]="GRAYRESPONSEUNIT";l[291]="GRAYRESPONSECURVE";l[292]="T4OPTIONS";l[293]="T6OPTIONS";l[296]="RESOLUTIONUNIT";l[297]="PAGENUMBER";l[300]="COLORRESPONSEUNIT";l[301]="TRANSFERFUNCTION";l[305]="SOFTWARE";l[306]="DATETIME";l[315]="ARTIST";
l[316]="HOSTCOMPUTER";l[317]="PREDICTOR";l[318]="WHITEPOINT";l[319]="PRIMARYCHROMATICITIES";l[320]="COLORMAP";l[321]="HALFTONEHINTS";l[322]="TILEWIDTH";l[323]="TILELENGTH";l[324]="TILEOFFSETS";l[325]="TILEBYTECOUNTS";l[326]="BADFAXLINES";l[327]="CLEANFAXDATA";l[328]="CONSECUTIVEBADFAXLINES";l[330]="SUBIFD";l[332]="INKSET";l[333]="INKNAMES";l[334]="NUMBEROFINKS";l[336]="DOTRANGE";l[337]="TARGETPRINTER";l[338]="EXTRASAMPLES";l[339]="SAMPLEFORMAT";l[340]="SMINSAMPLEVALUE";l[341]="SMAXSAMPLEVALUE";l[342]=
"TRANSFERRANGE";l[347]="JPEGTABLES";l[512]="JPEGPROC";l[513]="JPEGIFOFFSET";l[514]="JPEGIFBYTECOUNT";l[515]="JPEGRESTARTINTERVAL";l[517]="JPEGLOSSLESSPREDICTORS";l[518]="JPEGPOINTTRANSFORM";l[519]="JPEGQTABLES";l[520]="JPEGDCTABLES";l[521]="JPEGACTABLES";l[529]="YCBCRCOEFFICIENTS";l[530]="YCBCRSUBSAMPLING";l[531]="YCBCRPOSITIONING";l[532]="REFERENCEBLACKWHITE";l[700]="XMP";l[33550]="GEOPIXELSCALE";l[33922]="GEOTIEPOINTS";l[33432]="COPYRIGHT";l[42112]="GDAL_METADATA";l[42113]="GDAL_NODATA";l[50844]=
"RPCCOEFFICIENT";l[34264]="GEOTRANSMATRIX";l[34735]="GEOKEYDIRECTORY";l[34736]="GEODOUBLEPARAMS";l[34737]="GEOASCIIPARAMS";l[34665]="EXIFIFD";l[34853]="GPSIFD";l[40965]="INTEROPERABILITYIFD";return l})(),I=(()=>{const l=[].concat(W);l[36864]="ExifVersion";l[40960]="FlashpixVersion";l[40961]="ColorSpace";l[42240]="Gamma";l[37121]="ComponentsConfiguration";l[37122]="CompressedBitsPerPixel";l[40962]="PixelXDimension";l[40963]="PixelYDimension";l[37500]="MakerNote";l[37510]="UserComment";l[40964]="RelatedSoundFile";
l[36867]="DateTimeOriginal";l[36868]="DateTimeDigitized";l[36880]="OffsetTime";l[36881]="OffsetTimeOriginal";l[36882]="OffsetTimeDigitized";l[37520]="SubSecTime";l[37521]="SubSecTimeOriginal";l[37522]="SubSecTimeDigitized";l[37888]="Temperature";l[37889]="Humidity";l[37890]="Pressure";l[37891]="WaterDepth";l[37892]="Acceleration";l[37893]="CameraElevationAngle";l[42016]="ImageUniqueID";l[42032]="CameraOwnerName";l[42033]="BodySerialNumber";l[42034]="LensSpecification";l[42035]="LensMake";l[42036]=
"LensModel";l[42037]="LensSerialNumber";l[33434]="ExposureTime";l[33437]="FNumber";l[34850]="ExposureProgram";l[34852]="SpectralSensitivity";l[34855]="PhotographicSensitivity";l[34856]="OECF";l[34864]="SensitivityType";l[34865]="StandardOutputSensitivity";l[34866]="RecommendedExposureIndex";l[34867]="ISOSpeed";l[34868]="ISOSpeedLatitudeyyy";l[34869]="ISOSpeedLatitudezzz";l[37377]="ShutterSpeedValue";l[37378]="ApertureValue";l[37379]="BrightnessValue";l[37380]="ExposureBiasValue";l[37381]="MaxApertureValue";
l[37382]="SubjectDistance";l[37383]="MeteringMode";l[37384]="LightSource";l[37385]="Flash";l[37386]="FocalLength";l[37396]="SubjectArea";l[41483]="FlashEnergy";l[41484]="SpatialFrequencyResponse";l[41486]="FocalPlaneXResolution";l[41487]="FocalPlaneYResolution";l[41488]="FocalPlaneResolutionUnit";l[41492]="SubjectLocation";l[41493]="ExposureIndex";l[41495]="SensingMethod";l[41728]="FileSource";l[41729]="SceneType";l[41730]="CFAPattern";l[41985]="CustomRendered";l[41986]="ExposureMode";l[41987]="WhiteBalance";
l[41988]="DigitalZoomRatio";l[41989]="FocalLengthIn35mmFilm";l[41990]="SceneCaptureType";l[41991]="GainControl";l[41992]="Contrast";l[41993]="Saturation";l[41994]="Sharpness";l[41995]="DeviceSettingDescription";l[41996]="SubjectDistanceRange";return l})(),w=(()=>{const l=[];l[1024]="GTModelTypeGeoKey";l[1025]="GTRasterTypeGeoKey";l[1026]="GTCitationGeoKey";l[2048]="GeographicTypeGeoKey";l[2049]="GeogCitationGeoKey";l[2050]="GeogGeodeticDatumGeoKey";l[2051]="GeogPrimeMeridianGeoKey";l[2052]="GeogLinearUnitsGeoKey";
l[2053]="GeogLinearUnitSizeGeoKey";l[2054]="GeogAngularUnitsGeoKey";l[2055]="GeogAngularUnitSizeGeoKey";l[2056]="GeogEllipsoidGeoKey";l[2057]="GeogSemiMajorAxisGeoKey";l[2058]="GeogSemiMinorAxisGeoKey";l[2059]="GeogInvFlatteningGeoKey";l[2061]="GeogPrimeMeridianLongGeoKey";l[2060]="GeogAzimuthUnitsGeoKey";l[3072]="ProjectedCSTypeGeoKey";l[3073]="PCSCitationGeoKey";l[3074]="ProjectionGeoKey";l[3075]="ProjCoordTransGeoKey";l[3076]="ProjLinearUnitsGeoKey";l[3077]="ProjLinearUnitSizeGeoKey";l[3078]="ProjStdParallel1GeoKey";
l[3079]="ProjStdParallel2GeoKey";l[3080]="ProjNatOriginLongGeoKey";l[3081]="ProjNatOriginLatGeoKey";l[3082]="ProjFalseEastingGeoKey";l[3083]="ProjFalseNorthingGeoKey";l[3084]="ProjFalseOriginLongGeoKey";l[3085]="ProjFalseOriginLatGeoKey";l[3086]="ProjFalseOriginEastingGeoKey";l[3087]="ProjFalseOriginNorthingGeoKey";l[3088]="ProjCenterLongGeoKey";l[3090]="ProjCenterEastingGeoKey";l[3091]="ProjCenterNorthingGeoKey";l[3092]="ProjScaleAtNatOriginGeoKey";l[3093]="ProjScaleAtCenterGeoKey";l[3094]="ProjAzimuthAngleGeoKey";
l[3095]="ProjStraightVertPoleLongGeoKey";l[4096]="VerticalCSTypeGeoKey";l[4097]="VerticalCitationGeoKey";l[4098]="VerticalDatumGeoKey";l[4099]="VerticalUnitsGeoKey";return l})(),N=new Map;N.set("EXIFIFD",I);N.set("GPSIFD","GPSVersionID GPSLatitudeRef GPSLatitude GPSLongitudeRef GPSLongitude GPSAltitudeRef GPSAltitude GPSTimeStamp GPSSatellites GPSStatus GPSMeasureMode GPSDOP GPSSpeedRef GPSSpeed GPSTrackRef GPSTrack GPSImgDirectionRef GPSImgDirection GPSMapDatum GPSDestLatitudeRef GPSDestLatitude GPSDestLongitudeRef GPSDestLongitude GPSDestBearingRef GPSDestBearing GPSDestDistanceRef GPSDestDistance GPSProcessingMethod GPSAreaInformation GPSDateStamp GPSDifferential GPSHPositioningError".split(" "));
return{TIFF_TAGS:W,ifdTags:N,GEO_KEYS:w,getTagName:function(l,U){U=(U||W)[l];void 0===U&&(U="unknown"+String(l));return U}}})},"esri/layers/support/rasterFormats/utils":function(){define(["exports"],function(W){{var I=new ArrayBuffer(4);const w=new Uint8Array(I);(new Uint32Array(I))[0]=1;I=1===w[0]}W.isPlatformLittleEndian=I;Object.defineProperty(W,"__esModule",{value:!0})})},"esri/chunks/LercCodec":function(){define(["exports","../core/mathUtils"],function(W,I){var w=I.clampFloat32(-Infinity);W.decode=
function(N,l){l=l||{};var U=l.inputOffset||0;var V=l.encodedMaskData||null===l.encodedMaskData;var Y=new Uint8Array(N,U,10);Y=String.fromCharCode.apply(null,Y);if("CntZImage"!=Y.trim())throw"Unexpected file identifier string: "+Y;U+=10;var M=new DataView(N,U,24);var L=M.getInt32(0,!0);var C=M.getInt32(4,!0);var e=M.getUint32(8,!0);var y=M.getUint32(12,!0);var D=M.getFloat64(16,!0);U+=24;if(!V){M=new DataView(N,U,16);var a={};a.numBlocksY=M.getUint32(0,!0);a.numBlocksX=M.getUint32(4,!0);a.numBytes=
M.getUint32(8,!0);a.maxValue=M.getFloat32(12,!0);U+=16;if(0<a.numBytes){V=new Uint8Array(Math.ceil(y*e/8));M=new DataView(N,U,a.numBytes);var m=M.getInt16(0,!0);var c=2;var b=0;do{if(0<m)for(;m--;)V[b++]=M.getUint8(c++);else{var k=M.getUint8(c++);for(m=-m;m--;)V[b++]=k}m=M.getInt16(c,!0);c+=2}while(c<a.numBytes);if(-32768!==m||b<V.length)throw"Unexpected end of mask RLE encoding";a.bitset=V;U+=a.numBytes}else 0===(a.numBytes|a.numBlocksY|a.maxValue)&&(V=new Uint8Array(Math.ceil(y*e/8)),a.bitset=V)}M=
new DataView(N,U,16);var t=V=k=b=c=m=void 0;m=M.getUint32(0,!0);c=M.getUint32(4,!0);b=M.getUint32(8,!0);k=M.getFloat32(12,!0);U+=16;t=c;V=m;t+=0<y%t?1:0;var q=V+(0<e%V?1:0);V=Array(t*q);for(var h=1E9,d=0,p=0;p<q;p++)for(var z=0;z<t;z++){var u=0;M=new DataView(N,U,Math.min(10,N.byteLength-U));var v={};V[d++]=v;var A=M.getUint8(0);u++;v.encoding=A&63;if(3<v.encoding)throw"Invalid block encoding ("+v.encoding+")";if(2===v.encoding)U++,h=Math.min(h,0);else{if(0!==A&&2!==A){A>>=6;v.offsetType=A;if(2===
A)v.offset=M.getInt8(1),u++;else if(1===A)v.offset=M.getInt16(1,!0),u+=2;else if(0===A)v.offset=M.getFloat32(1,!0),u+=4;else throw"Invalid block offset type";h=Math.min(v.offset,h);if(1===v.encoding)if(A=M.getUint8(u),u++,v.bitsPerPixel=A&63,A>>=6,v.numValidPixelsType=A,2===A)v.numValidPixels=M.getUint8(u),u++;else if(1===A)v.numValidPixels=M.getUint16(u,!0),u+=2;else if(0===A)v.numValidPixels=M.getUint32(u,!0),u+=4;else throw"Invalid valid pixel count type";}U+=u;if(3!=v.encoding)if(0===v.encoding){M=
(b-1)/4;if(M!==Math.floor(M))throw"uncompressed block has invalid length";u=new ArrayBuffer(4*M);A=new Uint8Array(u);A.set(new Uint8Array(N,U,4*M));u=new Float32Array(u);for(A=0;A<u.length;A++)h=Math.min(h,u[A]);v.rawData=u;U+=4*M}else 1===v.encoding&&(M=Math.ceil(v.numValidPixels*v.bitsPerPixel/8),u=new ArrayBuffer(4*Math.ceil(M/4)),A=new Uint8Array(u),A.set(new Uint8Array(N,U,M)),v.stuffedData=new Uint32Array(u),U+=M)}}t=h;N=U;U=null!=l.noDataValue?I.clampFloat32(l.noDataValue):w;q=l.encodedMaskData;
A=l.returnMask;h=0;d=c;p=m;z=Math.floor(y/d);v=Math.floor(e/p);u=2*D;q=q||(a?a.bitset:null);var P;M=new (l.pixelType||Float32Array)(y*e);A&&q&&(P=new Uint8Array(y*e));A=new Float32Array(z*v);for(var E,r,n=0;n<=p;n++){var x=n!==p?v:e%p;if(0!==x)for(var B=0;B<=d;B++){var S=B!==d?z:y%d;if(0!==S){var f=n*y*v+B*z,g=y-S,F=V[h],R;if(2>F.encoding){if(0===F.encoding)var Q=F.rawData;else{E=R=Q=void 0;r=F.stuffedData;var X=F.bitsPerPixel,aa=F.numValidPixels,H=F.offset,J=u,T=A,O=k,Z=(1<<X)-1,ca=0,da=0,fa=Math.ceil((O-
H)/J);r[r.length-1]<<=8*(4*r.length-Math.ceil(X*aa/8));for(E=0;E<aa;E++)0===da&&(Q=r[ca++],da=32),da>=X?(R=Q>>>da-X&Z,da-=X):(da=X-da,R=(Q&Z)<<da&Z,Q=r[ca++],da=32-da,R+=Q>>>da),T[E]=R<fa?H+R*J:O;Q=A}R=0}else var ka=2===F.encoding?0:F.offset;if(q)for(r=0;r<x;r++){if(f&7){var oa=q[f>>3];oa<<=f&7}for(E=0;E<S;E++)f&7||(oa=q[f>>3]),oa&128?(P&&(P[f]=1),M[f++]=2>F.encoding?Q[R++]:ka):(P&&(P[f]=0),M[f++]=U),oa<<=1;f+=g}else if(2>F.encoding)for(r=0;r<x;r++){for(E=0;E<S;E++)M[f++]=Q[R++];f+=g}else for(r=0;r<
x;r++)if(M.fill)M.fill(ka,f,f+S),f+=S+g;else{for(E=0;E<S;E++)M[f++]=ka;f+=g}if(1===F.encoding&&R!==F.numValidPixels)throw"Block and Mask do not match";h++}}}ka=P;P={width:y,height:e,pixelData:M,minValue:t,maxValue:k,noDataValue:U};ka&&(P.maskData=ka);l.returnEncodedMask&&a&&(P.encodedMaskData=a.bitset?a.bitset:null);if(l.returnFileInfo&&(P.fileInfo={fileIdentifierString:Y,fileVersion:L,imageType:C,height:e,width:y,maxZError:D,eofOffset:N,mask:a?{numBlocksX:a.numBlocksX,numBlocksY:a.numBlocksY,numBytes:a.numBytes,
maxValue:a.maxValue}:null,pixels:{numBlocksX:c,numBlocksY:m,numBytes:b,maxValue:k,minValue:t,noDataValue:U}},l.computeUsedBitDepths)){l=P.fileInfo;a=c*m;Y={};for(L=0;L<a;L++)C=V[L],0===C.encoding?Y.float32=!0:1===C.encoding?Y[C.bitsPerPixel]=!0:Y[0]=!0;a=Object.keys(Y);l.bitDepths=a}return P}})},"esri/layers/support/rasterFormats/Raw":function(){define(function(){const W=function(I){let w=1;switch(I){case Uint8Array:case Int8Array:w=1;break;case Uint16Array:case Int16Array:w=2;break;case Uint32Array:case Int32Array:case Float32Array:w=
4;break;case Float64Array:w=8}return w};return function(){function I(){}I.decode=function(w,N){var l=N.pixelType;const U=[],V=N.width*N.height;var Y=Math.floor(w.byteLength/(N.width*N.height*W(N.pixelType)));const {bandIds:M,format:L}=N;N=M&&M.length||Math.floor(w.byteLength/(N.width*N.height*W(N.pixelType)));var C=w.byteLength-w.byteLength%(V*W(l));const e=new l(w,0,V*Y);let y,D;let a,m;if("bip"===L)for(y=0;y<N;y++){a=new l(V);m=M?M[y]:y;for(D=0;D<V;D++)a[D]=e[D*Y+m];U.push(a)}else if("bsq"===L)for(y=
0;y<N;y++)m=M?M[y]:y,U.push(e.subarray(m*V,(m+1)*V));if(C<w.byteLength-1)if(w=w.slice(C),8*w.byteLength<V)var c=null;else{w=new Uint8Array(w,0,Math.ceil(V/8));l=new Uint8Array(V);for(N=C=N=c=Y=0;N<w.length-1;N++)for(c=w[N],C=7;0<=C;C--)l[Y++]=c>>C&1;for(C=7;Y<V-1;)c=w[w.length-1],l[Y++]=c>>C&1,C--;c=l}return{pixels:U,mask:c}};return I}()})},"esri/renderers/support/rasterRendererHelper":function(){define("exports ../../Color ../../rasterRenderers ../../core/maybe ../../core/unitUtils ../../layers/support/Field ../../layers/support/RasterInfo ./AuthoringInfo ./ClassBreakInfo ./colorRampUtils ./UniqueValueInfo ../../rest/support/AlgorithmicColorRamp ../../rest/support/ClassBreaksDefinition ../../rest/support/generateRendererUtils ../../rest/support/MultipartColorRamp ../RasterStretchRenderer ../UniqueValueRenderer ../RasterColormapRenderer ../RasterShadedReliefRenderer ../ClassBreaksRenderer ../VectorFieldRenderer".split(" "),
function(W,I,w,N,l,U,V,Y,M,L,C,e,y,D,a,m,c,b,k,t,q){function h(H,J){var T,O,Z,ca;H=d(H,null==J?void 0:J.variableName);const {bandCount:da}=H;let {bandIds:fa,stretchType:ka}=J||{};null!=(T=fa)&&T.some(ma=>ma>=da)&&(fa=null);let oa=N.unwrap(H.statistics),qa=N.unwrap(H.histograms);if(1<da){var ta;fa=null!=(ta=fa)&&ta.length?fa:p(H);oa=null==oa?null:fa.map(ma=>oa[ma]);qa=null==qa?null:fa.map(ma=>qa[ma])}else fa=[0];null==ka&&(ka=u(H));T=!1;switch(ka){case "none":T=!1;break;case "percent-clip":T=!(null!=
(O=qa)&&O.length);break;default:T=!(null!=(Z=oa)&&Z.length)}({dataType:O}=H);O=1===(null==(ca=fa)?void 0:ca.length)&&X.has(O)?R:null;ca=new m({stretchType:ka,dynamicRangeAdjustment:T,colorRamp:O,outputMin:0,outputMax:255,gamma:1===fa.length?[1]:[1,1,1],useGamma:!1});"percent-clip"===ka?ca.maxPercent=ca.minPercent=.25:"standard-deviation"===ka&&(ca.numberOfStandardDeviations=2);if(!T&&(N.isSome(H.multidimensionalInfo)||null!=J&&J.includeStatisticsInStretch))if("percent-clip"===ka)ca.histograms=qa;
else if("min-max"===ka||"standard-deviation"===ka)ca.statistics=oa;return ca}function d(H,J){if(null==J)return H;let T=N.unwrap(H.statistics),O=N.unwrap(H.histograms);const {multidimensionalInfo:Z}=H;if(J&&N.isSome(Z)){const {statistics:ca,histograms:da}=Z.variables.find(fa=>fa.name===J);null!=ca&&ca.length&&(T=ca);null!=da&&da.length&&(O=da)}return V.fromJSON({...H.toJSON(),statistics:T,histograms:O})}function p(H){const J=H.bandCount;if(1===J)return null;if(2===J)return[0];H=H.keyProperties&&H.keyProperties.BandProperties;
let T;if(H&&H.length===J){const {red:O,green:Z,blue:ca,nir:da}=z(H);null!=O&&null!=Z&&null!=ca?T=[O,Z,ca]:null!=da&&null!=O&&null!=Z&&(T=[da,O,Z])}!T&&3<=J&&(T=[0,1,2]);return T}function z(H){const J={};for(let ca=0;ca<H.length;ca++){var T,O=H[ca],Z=null==(T=O.BandName)?void 0:T.toLowerCase();"red"===Z?J.red=ca:"green"===Z?J.green=ca:"blue"===Z?J.blue=ca:"nearinfrared"===Z||"nearinfrared_1"===Z||"nir"===Z?J.nir=ca:O.WavelengthMax&&O.WavelengthMin&&(Z=O.WavelengthMin,O=O.WavelengthMax,null==J.blue&&
410<=Z&&480>=Z&&480<=O&&540>=O?J.blue=ca:null==J.green&&490<=Z&&560>=Z&&560<=O&&610>=O?J.green=ca:null==J.red&&595<=Z&&670>=Z&&660<=O&&730>=O?J.red=ca:null==J.nir&&700<=Z&&860>=Z&&800<=O&&950>=O&&(J.nir=ca))}return J}function u(H){let J="percent-clip";const {pixelType:T,dataType:O,histograms:Z,statistics:ca}=H;"u8"!==T||"processed"!==O&&N.isSome(Z)&&N.isSome(ca)?"u8"===T||"elevation"===O||X.has(O)?J="min-max":N.isSome(Z)?J="percent-clip":N.isSome(ca)&&(J=J="min-max"):J="none";return J}function v(H,
J,T,O){if(!E(H,J))return null;const {attributeTable:Z,statistics:ca}=H,da=A(Z,J),fa=P(Z,"red"),ka=P(Z,"green"),oa=P(Z,"blue");H=new Y;const qa=[],ta=new Set,ma=!!(fa&&ka&&oa);if(N.isSome(Z))Z.features.forEach(sa=>{var na=sa.attributes[da.name];ta.has(sa.attributes[da.name])||null==na||(ta.add(na),na=!ma||"single"!==fa.type&&"double"!==fa.type||"single"!==ka.type&&"double"!==ka.type||"single"!==oa.type&&"double"!==oa.type||Z.features.some(ja=>1<ja.attributes[fa.name]||1<ja.attributes[ka.name]||1<ja.attributes[oa.name])?
1:255,qa.push(new C({value:sa.attributes[da.name],label:sa.attributes[da.name]+"",symbol:{type:"simple-fill",style:"solid",outline:null,color:ma?new I([sa.attributes[fa.name]*na,sa.attributes[ka.name]*na,sa.attributes[oa.name]*na,1]):new I([0,0,0,0])}})))});else if(null!=ca&&ca[0])for(J=ca[0].min;J<=ca[0].max;J++)qa.push(new C({value:J,label:J.toString(),symbol:{type:"simple-fill",style:"solid",outline:null,color:new I([0,0,0,0])}}));qa.sort((sa,na)=>sa.value&&"string"===typeof sa.value.valueOf()?
0:sa.value>na.value?1:-1);if(!ma){const sa=L.convertColorRampToColormap(Q,qa.length);qa.forEach((na,ja)=>na.symbol.color=new I(sa[ja].slice(1,4)));H.colorRamp=Q}if(T||O){const sa=T||L.convertColorRampToColormap(O,qa.length).map(na=>na.slice(1));qa.forEach((na,ja)=>na.symbol.color=new I(sa[ja]));H.colorRamp=O}return new c({field:da.name,uniqueValueInfos:qa,authoringInfo:H})}function A(H,J){let T;N.isSome(H)?(T=J?H.fields.find(O=>J.toLowerCase()===O.name.toLowerCase()):H.fields.find(O=>"string"===O.type&&
-1<O.name.toLowerCase().indexOf("class")),T||(T=H.fields.find(O=>"string"===O.type))||(T=P(H,"value"))):T=new U({name:"value"});return T}function P(H,J){return N.isSome(H)?H.fields.find(T=>T.name.toLowerCase()===J):null}function E(H,J){const {attributeTable:T,bandCount:O}=H;return!N.isSome(T)&&S(H)?!0:!N.isSome(T)||1<O||J&&null==T.fields.find(Z=>Z.name.toLowerCase()===J.toLowerCase())?!1:!0}function r(H){const {bandCount:J,colormap:T}=H;return N.isSome(T)&&T.length&&1===J}function n(H){if(!r(H))return null;
let J;const {attributeTable:T,colormap:O}=H;if(N.isSome(T)){const Z=P(T,"value"),ca=A(T);"string"===ca.type&&(J={},T.features.forEach(da=>{da=da.attributes;J[da[Z.name]]=ca?da[ca.name]:da[Z.name]}))}return b.createFromColormap(N.unwrap(O),J)}function x(H){return"elevation"===H.dataType}function B(H){const {attributeTable:J,bandCount:T}=H;return 1===T&&(N.isSome(J)||N.isSome(H.histograms))}function S(H){var J,T,O;return-1<["u8","s8"].indexOf(H.pixelType)&&null!=(null==(J=H.statistics)?void 0:null==
(T=J[0])?void 0:T.min)&&null!=(null==(O=H.statistics[0])?void 0:O.max)&&1===H.bandCount}function f(H){({dataType:H}=H);return"vector-uv"===H||"vector-magdir"===H}function g(H){if(!f(H))return null;if(N.isSome(H.statistics)&&H.statistics.length){var J="vector-uv"===H.dataType;const {min:T,max:O}=H.statistics[0];J=[{type:"size",field:"Magnitude",minSize:10,maxSize:40,minDataValue:J?Math.min(Math.abs(T),Math.abs(O)):T,maxDataValue:J?Math.max(Math.abs(T),Math.abs(O)):O}]}H=N.isSome(H.multidimensionalInfo)?
aa.get(H.multidimensionalInfo.variables[0].unit):null;H=new q({visualVariables:J,inputUnit:H});H.visualVariables=[...H.sizeVariables,...H.rotationVariables];return H}function F(H){var J;return{color:null==(J=H.symbolLayers[0].material)?void 0:J.color,type:"esriSFS",style:"esriSFSSolid"}}const R=a.fromJSON({type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),Q=a.fromJSON(L.PREDEFINED_JSON_COLOR_RAMPS[0]),
X=new Set("scientific standard-time vector-uv vector-magdir vector-u vector-v vector-magnitude vector-direction".split(" ")),aa=new Map([["m/s","meter-per-second"],["km/h","kilometer-per-hour"],["knots","knots"],["ft/s","feet-per-second"],["mph","mile-per-hour"]]);W.createClassBreaksRenderer=function(H,J){H=d(H,null==J?void 0:J.variableName);const {attributeTable:T}=H;if(!B(H))return null;const O=N.isSome(H.histograms)?H.histograms[0]:null;var Z=(null==J?void 0:J.numClasses)||5;const ca=new Y({classificationMethod:null==
J?void 0:J.classificationMethod,colorRamp:null==J?void 0:J.colorRamp});let da=(null==J?void 0:J.field)||"value";const fa=[],ka=[];if(N.isSome(T)){const qa=T.fields.find(na=>"count"===na.name.toLowerCase()),ta=T.fields.find(na=>na.name.toLowerCase()===da.toLowerCase());da=ta.name;const ma=T.features.length;let sa=0;T.features.forEach(na=>sa+=na.attributes[qa.name]/ma);T.features.forEach(na=>{const ja=na.attributes[ta.name];na=na.attributes[qa.name];if(0<na){ka.push(na);na=Math.max(1,Math.round(na/
ma/sa*1E3));for(let Aa=0;Aa<na;Aa++)fa.push(ja)}})}else{({pixelType:H}=H);const qa=(O.max-O.min)/O.size,ta=(H=-1<H.indexOf("s")||-1<H.indexOf("u"))&&1===qa?Math.floor(O.min+.5):O.min,ma=H&&1===qa?Math.floor(O.max-.5):O.max,sa=O.size;let na=0;O.counts.forEach(ja=>na+=ja/sa);O.counts.forEach((ja,Aa)=>{if(0<ja){ka.push(ja);ja=Math.max(1,Math.round(ja/sa/na*1E3));Aa=0===Aa?ta:Aa===sa-1?ma:O.min+qa*(Aa+.5);for(let Ba=0;Ba<ja;Ba++)fa.push(Aa)}})}Z=D.createGenerateRendererClassBreaks({values:fa,valueFrequency:ka,
normalizationTotal:null,definition:new y({classificationMethod:(null==J?void 0:J.classificationMethod)||"natural-breaks",breakCount:Z,definedInterval:null==J?void 0:J.definedInterval})});let oa=null==J?void 0:J.colors;oa||(J=(null==J?void 0:J.colorRamp)||R,ca.colorRamp=J,oa=L.convertColorRampToColormap(J,Z.classBreaks.length,!0).map(qa=>qa.slice(1)));J=Z.classBreaks.map((qa,ta)=>new M({minValue:qa.minValue,maxValue:qa.maxValue,label:qa.label,symbol:{type:"simple-fill",color:oa[ta]}}));return new t({field:da,
classBreakInfos:J,authoringInfo:ca})};W.createColorRamp=function(H){const J=[];for(let T=0;T<H.length-1;T++)J[T]=new e({algorithm:"hsv",fromColor:H[T],toColor:H[T+1]||new I({r:255,g:255,b:255,a:1})});return 2<H.length?new a({colorRamps:J}):J[0]};W.createColormapRenderer=n;W.createDefaultRenderer=function(H,J){const {attributeTable:T,colormap:O}=H;if(f(H)){var Z=g(H);if(N.isSome(Z))return Z}return N.isSome(O)&&(Z=n(H),N.isSome(Z))||N.isSome(T)&&(Z=v(H),N.isSome(Z))?Z:h(H,J)};W.createShadedReliefRenderer=
function(H,J){var T;if(!x(H))return null;({extent:H}=H);H=H.width*l.getMetersPerUnitForSR(H.spatialReference);J=null!=(T=J)?T:"multi-directional";return new k({hillshadeType:J,scalingType:5E6<H?"adjusted":"none"})};W.createStretchRenderer=h;W.createUVRenderer=v;W.createVectorFieldRenderer=g;W.getBandNames=function(H,J){var T;const O=H.keyProperties&&H.keyProperties.BandProperties;J=null!=(T=J)&&T.length?J:Array.from(Array(H.bandCount).keys());return J.map(Z=>O&&O.length===H.bandCount?O[Z]&&O[Z].BandName||
"band_"+(Z+1):"band_"+(Z+1))};W.getClassField=A;W.getDefaultBandCombination=p;W.getDefaultInterpolation=function(H,J,T){const O=["nearest","bilinear","cubic","majority"].find(Z=>Z===(null==T?void 0:T.toLowerCase()));return"Map"===J?null!=O?O:"bilinear":"standard-time"===H.dataType?null!=O?O:"nearest":"thematic"===H.dataType||H.attributeTable||H.colormap?"nearest"===O||"majority"===O?O:"nearest":null!=O?O:"bilinear"};W.getSupportedRendererTypes=function(H){const J=["raster-stretch"];r(H)&&J.push("raster-colormap");
E(H)&&J.push("unique-value");B(H)&&J.push("class-breaks");x(H)&&J.push("raster-shaded-relief");f(H)&&J.push("vector-field");return J};W.getWellKnownBandIndexes=z;W.isClassBreaksSupported=B;W.isColormapRendererSupported=r;W.isShadedReliefRendererSupported=x;W.isSingleBand8BitRasterWithStats=S;W.isUVRendererSupported=E;W.isVectorFieldRendererSupported=f;W.normalizeRendererJSON=function(H){if("uniqueValue"===H.type){var J,T=H.uniqueValueInfos,O=T[0].symbol;null!=O&&null!=(J=O.symbolLayers)&&J.length&&
(H.uniqueValueInfos=T.map(Z=>({value:Z.value,label:Z.label,symbol:Z.symbol?F(Z.symbol):null})));return H}"classBreaks"===H.type&&(J=H.classBreakInfos,O=J[0].symbol,null!=O&&null!=(T=O.symbolLayers)&&T.length&&(H.classBreakInfos=J.map(Z=>({classMinValue:Z.classMinValue,classMaxValue:Z.classMaxValue,label:Z.label,symbol:Z.symbol?F(Z.symbol):null}))));return H};Object.defineProperty(W,"__esModule",{value:!0})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),
function(W,I,w,N,l,U,V,Y,M){l=new w.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});w=new w.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});M=function(L){function C(){var e=L.apply(this,arguments)||this;e.breakCount=null;e.classificationField=
null;e.classificationMethod=null;e.normalizationField=null;e.normalizationType=null;e.type="class-breaks-definition";return e}W._inheritsLoose(C,L);W._createClass(C,[{key:"standardDeviationInterval",set:function(e){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",e)}},{key:"definedInterval",set:function(e){"defined-interval"===this.classificationMethod&&this._set("definedInterval",e)}}]);return C}(M);I.__decorate([N.property({json:{write:!0}})],M.prototype,"breakCount",
void 0);I.__decorate([N.property({json:{write:!0}})],M.prototype,"classificationField",void 0);I.__decorate([N.property({type:String,json:{read:l.read,write:l.write}})],M.prototype,"classificationMethod",void 0);I.__decorate([N.property({json:{write:!0}})],M.prototype,"normalizationField",void 0);I.__decorate([N.property({json:{read:w.read,write:w.write}})],M.prototype,"normalizationType",void 0);I.__decorate([N.property({value:null,json:{write:!0}})],M.prototype,"standardDeviationInterval",null);
I.__decorate([N.property({value:null,json:{write:!0}})],M.prototype,"definedInterval",null);I.__decorate([N.property()],M.prototype,"type",void 0);return M=I.__decorate([Y.subclass("esri.rest.support.ClassBreaksDefinition")],M)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),
function(W,I,w,N,l,U,V,Y,M,L,C){w=new w.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});N=function(e){function y(){var D=e.apply(this,arguments)||this;D.baseSymbol=null;D.colorRamp=null;D.type=null;return D}W._inheritsLoose(y,e);return y}(N.JSONSupport);I.__decorate([l.property({type:C,json:{write:!0}})],N.prototype,"baseSymbol",void 0);I.__decorate([l.property({types:L.types,json:{read:{reader:L.fromJSON},write:!0}})],N.prototype,"colorRamp",void 0);I.__decorate([l.property({json:{read:w.read,
write:w.write}})],N.prototype,"type",void 0);return N=I.__decorate([M.subclass("esri.rest.support.ClassificationDefinition")],N)})},"esri/rest/support/generateRendererUtils":function(){define(["exports"],function(W){function I(C){const {classificationMethod:e,breakCount:y,normalizationType:D,definedInterval:a}=C.definition,m=[];var c=C.values;if(0===c.length)return[];c=c.sort((d,p)=>d-p);var b=c[0],k=c[c.length-1];if("equal-interval"===e)if(c.length>=y){c=(k-b)/y;C=b;for(var t=1;t<y;t++){var q=Number((b+
t*c).toFixed(6));m.push({minValue:C,maxValue:q,label:w(C,q,D)});C=q}m.push({minValue:C,maxValue:k,label:w(C,k,D)})}else c.forEach(d=>{m.push({minValue:d,maxValue:d,label:w(d,d,D)})});else if("natural-breaks"===e){c=N(c);C=l(c.uniqueValues,C.valueFrequency||c.valueFrequency,y);for(t=1;t<y;t++)c.uniqueValues.length>t&&(q=Number(c.uniqueValues[C[t]].toFixed(6)),m.push({minValue:b,maxValue:q,label:w(b,q,D)}),b=q);m.push({minValue:b,maxValue:k,label:w(b,k,D)})}else if("quantile"===e)if(c.length>=y&&b!==
k){C=Math.ceil(c.length/y);t=0;for(q=1;q<y;q++){var h=C+t-1;h>c.length&&(h=c.length-1);0>h&&(h=0);m.push({minValue:b,maxValue:c[h],label:w(b,c[h],D)});b=c[h];t+=C;C=Math.ceil((c.length-t)/(y-q))}m.push({minValue:b,maxValue:k,label:w(b,k,D)})}else for(k=-1,b=0;b<c.length;b++)C=c[b],C!==k&&(k=C,m.push({minValue:k,maxValue:C,label:w(k,C,D)}),k=C);else if("standard-deviation"===e)if(C=Y(c),t=M(c,C),0===t)m.push({minValue:c[0],maxValue:c[0],label:w(c[0],c[0],D)});else{c=V(b,k,y,C,t)*t;t=0;for(q=y;1<=q;q--)h=
Number((C-(q-.5)*c).toFixed(6)),m.push({minValue:b,maxValue:h,label:w(b,h,D)}),b=h,t++;q=Number((C+.5*c).toFixed(6));m.push({minValue:b,maxValue:q,label:w(b,q,D)});b=q;t++;for(h=1;h<=y;h++)q=t===2*y?k:Number((C+(h+.5)*c).toFixed(6)),m.push({minValue:b,maxValue:q,label:w(b,q,D)}),b=q,t++}else if("defined-interval"===e){if(!a)return m;k=c[0];c=c[c.length-1];b=Math.ceil((c-k)/a);C=k;for(t=1;t<b;t++)q=Number((k+t*a).toFixed(6)),m.push({minValue:C,maxValue:q,label:w(C,q,D)}),C=q;m.push({minValue:C,maxValue:c,
label:w(C,c,D)})}return m}function w(C,e,y){let D=null;return D=C===e?y&&"percent-of-total"===y?C+"%":C.toString():y&&"percent-of-total"===y?C+"% - "+e+"%":C+" - "+e}function N(C){const e=[],y=[];let D=Number.MIN_VALUE,a=1,m=-1;for(let c=0;c<C.length;c++){const b=C[c];b===D?(a++,y[m]=a):null!==b&&(e.push(b),D=b,a=1,y.push(a),m++)}return{uniqueValues:e,valueFrequency:y}}function l(C,e,y){var D=C.length;const a=[];y>D&&(y=D);for(var m=0;m<y;m++)a.push(Math.round(m*D/y-1));a.push(D-1);m=U(a,C,e,y);{D=
m.mean;m=m.sdcm;var c=y,b=0,k=0;let q=0,h=0,d=!0;for(let p=0;2>p&&d;p++){0===p&&(d=!1);for(var t=0;t<c-1;t++)for(;a[t+1]+1!==a[t+2];)if(a[t+1]+=1,b=L(t,a,C,e),q=b.sbMean,b=b.sbSdcm,k=L(t+1,a,C,e),h=k.sbMean,k=k.sbSdcm,b+k<m[t]+m[t+1])m[t]=b,m[t+1]=k,D[t]=q,D[t+1]=h,d=!0;else{--a[t+1];break}for(t=c-1;0<t;t--)for(;a[t]!==a[t-1]+1;)if(--a[t],b=L(t-1,a,C,e),q=b.sbMean,b=b.sbSdcm,k=L(t,a,C,e),h=k.sbMean,k=k.sbSdcm,b+k<m[t-1]+m[t])m[t-1]=b,m[t]=k,D[t-1]=q,D[t]=h,d=!0;else{a[t]+=1;break}}D=d}D&&(m=U(a,C,
e,y));return a}function U(C,e,y,D){let a=[];var m=[],c=[];let b=0;const k=[],t=[];for(var q=0;q<D;q++){var h=L(q,C,e,y);k.push(h.sbMean);t.push(h.sbSdcm);b+=t[q]}h=b;for(q=!0;q||b<h;){q=!1;a=[];for(m=0;m<D;m++)a.push(C[m]);for(c=0;c<D;c++)for(h=C[c]+1;h<=C[c+1];h++)if(m=e[h],0<c&&h!==C[c+1]&&Math.abs(m-k[c])>Math.abs(m-k[c-1]))C[c]=h;else if(c<D-1&&C[c]!==h-1&&Math.abs(m-k[c])>Math.abs(m-k[c+1])){C[c+1]=h-1;break}h=b;b=0;m=[];c=[];for(let d=0;d<D;d++){m.push(k[d]);c.push(t[d]);const p=L(d,C,e,y);
k[d]=p.sbMean;t[d]=p.sbSdcm;b+=t[d]}}if(b>h){for(e=0;e<D;e++)C[e]=a[e],k[e]=m[e],t[e]=c[e];b=h}return{mean:k,sdcm:t}}function V(C,e,y,D,a){C=Math.max(D-C,e-D)/a/y;return 1<=C?1:.5<=C?.5:.25}function Y(C){let e=0;for(let y=0;y<C.length;y++)e+=C[y];return e/=C.length}function M(C,e){let y=0;for(let D=0;D<C.length;D++){const a=C[D];y+=(a-e)*(a-e)}y/=C.length;return Math.sqrt(y)}function L(C,e,y,D){var a=0,m=0;for(var c=e[C]+1;c<=e[C+1];c++){const b=D[c];a+=y[c]*b;m+=b}0>=m&&console.log("Exception in Natural Breaks calculation");
a/=m;m=0;for(c=e[C]+1;c<=e[C+1];c++)m+=D[c]*(y[c]-a)**2;return{sbMean:a,sbSdcm:m}}W.createGenerateRendererClassBreaks=function(C){const {normalizationTotal:e}=C;return{classBreaks:I(C),normalizationTotal:e}};W.createGenerateRendererUniqueValues=function(C){C=N(C);const e=[],y=C.uniqueValues.length;for(let D=0;D<y;D++){const a=C.uniqueValues[D];e.push({value:a,count:C.valueFrequency[D],label:a.toString()})}return{uniqueValues:e}};Object.defineProperty(W,"__esModule",{value:!0})})},"esri/renderers/support/RasterSymbolizer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/colorUtils ../../core/JSONSupport ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/RasterInfo ../../layers/support/rasterFunctions/pixelUtils ../../layers/support/rasterFunctions/surfaceUtils ./colorRampUtils".split(" "),
function(W,I,w,N,l,U,V,Y,M,L,C,e,y,D){function a(t,q){const {attributeTable:h,bandCount:d}=t;return!U.isSome(h)||1<d||q&&null==h.fields.find(p=>p.name.toLowerCase()===q.toLowerCase())?!1:!0}function m(t){const {bandCount:q,colormap:h}=t;return U.isSome(h)&&h.length&&1===q}function c(t){return e.isValidPixelBlock(t)&&0!==t.validPixelCount}const b=l.getLogger("esri.renderers.support.RasterSymbolizer"),k={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],
s32:[-2147483648,2147483647],f32:[-3.4*1E39,3.4*1E39],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]};N=function(t){function q(d){return t.call(this,d)||this}W._inheritsLoose(q,t);var h=q.prototype;h.bind=function(){const {rendererJSON:d}=this;if(!d)return!1;this.lookup={rendererJSON:{}};let p;switch(d.type){case "uniqueValue":p=this._updateUVRenderer(d);break;case "rasterColormap":p=this._updateColormapRenderer(d);break;case "rasterStretch":p=this._updateStretchRenderer(d);break;case "classBreaks":p=this._updateClassBreaksRenderer(d);
break;case "rasterShadedRelief":p=this._updateShadedReliefRenderer(d);break;case "vectorField":p=this._updateVectorFieldRenderer()}return p};h.symbolize=function(d){let p=d&&d.pixelBlock;if(!c(p))return p;if(d.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(p,d.simpleStretchParams);try{3<p.pixels.length&&(p=e.extractBands(p,[0,1,2]));let z;switch(this.rendererJSON.type){case "uniqueValue":case "rasterColormap":z=this._symbolize_colormap(p);break;case "classBreaks":z=
this._symbolize_classBreaks(p);break;case "rasterStretch":z=this._symbolize_stretch(p,d.bandIds);break;case "rasterShadedRelief":({extent:d}=d),z=this._symbolize_shadedRelief(p,{isGCS:d.spatialReference.isGeographic,resolution:{x:(d.xmax-d.xmin)/p.width,y:(d.ymax-d.ymin)/p.height}})}return z}catch(z){return b.error("symbolize",z.message),p}};h.simpleStretch=function(d,p){if(!c(d))return d;try{return 3<d.pixels.length&&(d=e.extractBands(d,[0,1,2])),e.stretch(d,p)}catch(z){return b.error("symbolize",
z.message),d}};h.generateWebGLParameters=function(d){if(-1<["uniqueValue","rasterColormap","classBreaks"].indexOf(this.rendererJSON.type)){var p;const {indexedColormap:P,offset:E}=(null==(p=this.lookup)?void 0:p.colormapLut)||{};return{colormap:P,colormapOffset:E,type:"lut"}}const {pixelBlock:z,isGCS:u,resolution:v,bandIds:A}=d;({rendererJSON:d}=this);return"rasterStretch"===d.type?this.generateStretchWebGLParams(z,d,A):"rasterShadedRelief"===d.type?this.generateShadedReliefWebGLParams(d,u,v):"vectorField"===
d.type?this._generateVectorFieldWebGLParams(d):null};h._isLUTChanged=function(d){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){const p=this.rendererJSON.colorRamp;if(d)return JSON.stringify(p)!==JSON.stringify(this.lookup.rendererJSON.colorRamp);({...this.rendererJSON});({...this.lookup.rendererJSON})}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)};h._symbolize_colormap=function(d){return this._isLUTChanged()&&!this.bind()?
d:e.colorize(d,this.lookup.colormapLut)};h._symbolize_classBreaks=function(d){const p=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType);return this._isLUTChanged()&&!this.bind()?d:p?e.colorize(d,this.lookup.colormapLut):e.remapColor(d,this.lookup.remapLut)};h._symbolize_stretch=function(d,p){const {pixelType:z,bandCount:u}=this.rasterInfo,v=this.rendererJSON,A=-1<["u8","u16","s8","s16"].indexOf(z);let P;var {dra:E}=v;var r=v.useGamma?v.gamma:null;if("histogramEqualization"===v.stretchType){var n=
E?null:this.lookup.histogramLut;p=this.getStretchCutoff(v,d,p,!n);r=e.stretch(d,{...p,gamma:r});r=e.lookupPixels(r,{lut:E?p.histogramLut:n,offset:0})}else if(A){var x;if(E)E=this.getStretchCutoff(v,d,p),P=e.createStretchLUT({pixelType:z,...E,gamma:r});else{if(this._isLUTChanged()&&!this.bind())return d;P=this.lookup?this.lookup.stretchLut:null}if(!P)return d;1<u&&(null==p?void 0:p.length)===(null==(n=U.unwrap(d))?void 0:n.pixels.length)&&(null==(x=P)?void 0:x.lut.length)===u&&(P={lut:p.map(B=>P.lut[B]),
offset:P.offset});r=e.lookupPixels(d,P)}else E=this.getStretchCutoff(v,d,p),r=e.stretch(d,{...E,gamma:r});if(v.colorRamp){if(this._isLUTChanged(!0)&&!this.bind())return d;r=e.colorize(r,this.lookup.colormapLut)}return r};h._symbolize_shadedRelief=function(d,p){var z,u,v=this.rendererJSON;p=y.hillshade(d,{...v,...p});if(!v.colorRamp||this._isLUTChanged(!0)&&!this.bind())return p;v=this.lookup?this.lookup.hsvMap:null;if(!v)return p;const A=null!=(z=null==(u=U.unwrap(this.rasterInfo.statistics))?void 0:
u[0])?z:{min:0,max:8E3};y.tintHillshade(p,d,v,A);return p};h._updateVectorFieldRenderer=function(){const {bandCount:d,dataType:p}=this.rasterInfo;return 2===d&&("vector-magdir"===p||"vector-uv"===p)};h._updateUVRenderer=function(d){const {bandCount:p,attributeTable:z,pixelType:u}=this.rasterInfo,v=d.field1;if(!v)return!1;const A=d.defaultSymbol;var P=1===p&&["u8","s8"].includes(u);if(!a(this.rasterInfo,v)&&!P)return!1;const E=[];if(z){const r=z.fields.filter(n=>"value"===n.name.toLowerCase())[0];
if(!r)return!1;z.features.forEach(n=>{var x,B=d.uniqueValueInfos.filter(S=>String(S.value)===String(n.attributes[v]))[0];(B=null==B?void 0:null==(x=B.symbol)?void 0:x.color)?E.push([n.attributes[r.name]].concat(B)):A&&E.push([n.attributes[r.name]].concat(A.color))})}else{if("value"!==v.toLowerCase())return!1;d.uniqueValueInfos.forEach(r=>{var n;const x=null==r?void 0:null==(n=r.symbol)?void 0:n.color;x?E.push([parseInt(""+r.value,10)].concat(x)):A&&E.push([parseInt(""+r.value,10)].concat(A.color))})}if(0===
E.length)return!1;P=e.createColormapLUT({colormap:E});this.lookup={rendererJSON:d,colormapLut:P};return this.canRenderInWebGL=!0};h._updateColormapRenderer=function(d){if(!m(this.rasterInfo))return!1;var p=d.colormapInfos.map(z=>[z.value].concat(z.color)).sort((z,u)=>z[0]-u[0]);if(!p||0===p.length)return!1;p=e.createColormapLUT({colormap:p});this.lookup={rendererJSON:d,colormapLut:p};return this.canRenderInWebGL=!0};h._updateShadedReliefRenderer=function(d){if("elevation"!==this.rasterInfo.dataType)return!1;
if(d.colorRamp){var p=D.convertColorRampToColormap(d.colorRamp,256,!0);p=e.createColormapLUT({colormap:p});const z=[],u=p.indexedColormap;for(let v=0;v<u.length;v+=4){const A=w.toHSV({r:u[v],g:u[v+1],b:u[v+2]});z.push([A.h/60,A.s/100,255*A.v/100])}this.lookup={rendererJSON:d,colormapLut:p,hsvMap:z}}else this.lookup=null;return this.canRenderInWebGL=!0};h._updateClassBreaksRenderer=function(d){var p=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType),z=d.classBreakInfos;if(null==z||!z.length)return!1;
z=z.sort((E,r)=>E.classMaxValue-r.classMaxValue);const u=z[z.length-1];var v=d.minValue;if(!p){p=[];for(var A=0;A<z.length;A++){var P;p.push({value:null!=(P=z[A].classMinValue)?P:v,mappedColor:z[A].symbol.color});v=z[A].classMaxValue}p.push({value:u.classMaxValue,mappedColor:u.symbol.color});this.lookup={rendererJSON:d,remapLut:p};this.canRenderInWebGL=!1;return!0}P=[];v=Math.floor(d.minValue);for(p=0;p<z.length;p++){for(A=z[p];v<A.classMaxValue;v++)P.push([v].concat(A.symbol.color));v=Math.ceil(A.classMaxValue)}u.classMaxValue===
v&&P.push([u.classMaxValue].concat(u.symbol.color));z=e.createColormapLUT({colormap:P,fillUnspecified:!1});this.lookup={rendererJSON:d,colormapLut:z};return this.canRenderInWebGL=!0};h._isHistogramRequired=function(d){return"percentClip"===d||"histogramEqualization"===d};h._isValidRasterStatistics=function(d){return U.isSome(d)&&0<d.length&&null!=d[0].min&&null!=d[0].max};h._updateStretchRenderer=function(d){var p;let {stretchType:z,dra:u}=d;if(!("none"===z||null!=(p=d.statistics)&&p.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||
u))return!1;var v=U.unwrap(d.histograms||this.rasterInfo.histograms);!this._isHistogramRequired(d.stretchType)||null!=v&&v.length||u||(z="minMax");const {gamma:A,useGamma:P,colorRamp:E}=d;p=this.rasterInfo.pixelType;const r=!u&&-1<["u8","u16","s8","s16"].indexOf(p);"histogramEqualization"===z?(p=v.map(n=>e.createHistogramEqualizationLUT(n)),this.lookup={rendererJSON:d,histogramLut:p}):r&&(v=this.getStretchCutoff(d),p=e.createStretchLUT({pixelType:p,...v,gamma:P?A:null}),this.lookup={rendererJSON:d,
stretchLut:p});E&&(p=D.convertColorRampToColormap(E,256,!0),this.lookup||(this.lookup={rendererJSON:d}),this.lookup.colormapLut=e.createColormapLUT({colormap:p}),this.lookup.rendererJSON=d);return this.canRenderInWebGL=!0};h.getStretchCutoff=function(d,p=null,z,u){var v,A,P,E=d.stretchType;if(d.dra)if("minMax"===E&&U.isSome(p)&&p.statistics)p=p.statistics.map(R=>[R.minValue,R.maxValue,0,0]);else{var r=e.estimateStatisticsHistograms(p);p=U.isSome(r)?r.statistics:null;r=U.isSome(r)?r.histograms:null}else{var n;
p=0<(null==(n=d.statistics)?void 0:n.length)?d.statistics:U.unwrap(this.rasterInfo.statistics);r=d.histograms||U.unwrap(this.rasterInfo.histograms)}!this._isHistogramRequired(E)||null!=(v=r)&&v.length||(E="minMax");n=(null==(A=p)?void 0:A.length)||(null==(P=r)?void 0:P.length)||this.rasterInfo.bandCount;A=[];P=[];let x;let B,S,f;p&&!Array.isArray(p[0])&&(p=p.map(R=>[R.min,R.max,R.avg,R.stddev]));switch(E){case "none":p=k[this.rasterInfo.pixelType]||k.f32;for(v=0;v<n;v++)A[v]=p[0],P[v]=p[1];break;
case "minMax":for(v=0;v<n;v++)A[v]=p[v][0],P[v]=p[v][1];break;case "standardDeviation":for(v=0;v<n;v++)A[v]=p[v][2]-d.numberOfStandardDeviations*p[v][3],P[v]=p[v][2]+d.numberOfStandardDeviations*p[v][3],A[v]<p[v][0]&&(A[v]=p[v][0]),P[v]>p[v][1]&&(P[v]=p[v][1]);break;case "histogramEqualization":for(v=0;v<n;v++)A[v]=r[v].min,P[v]=r[v].max;break;case "percentClip":for(v=0;v<r.length;v++){p=r[v];B=new Uint32Array(p.size);var g=p.counts;x=0;n=(p.max-p.min)/p.size;S=-.5===p.min&&1===n?.5:0;for(f=0;f<p.size;f++)x+=
g[f],B[f]=x;g=d.minPercent*x/100;for(f=0;f<p.size;f++)if(B[f]>g){A[v]=p.min+n*(f+S);break}g=(1-d.maxPercent/100)*x;for(f=p.size-2;0<=f;f--)if(B[f]<g){P[v]=p.min+n*(f+2-S);break}}break;default:for(v=0;v<n;v++)A[v]=p[v][0],P[v]=p[v][1]}let F;"histogramEqualization"===E?(E=r[0].size||256,d=0,u&&(F=r.map(R=>e.createHistogramEqualizationLUT(R)))):(E=d.max||255,d=d.min||0);return this.getSelectedBandCutoffs({minCutOff:A,maxCutOff:P,outMax:E,outMin:d,histogramLut:F},z)};h.getSelectedBandCutoffs=function(d,
p){if(null==p||0===p.length)return d;const z=Math.max.apply(null,p),{minCutOff:u,maxCutOff:v,outMin:A,outMax:P,histogramLut:E}=d;return u.length===p.length||u.length<=z?d:{minCutOff:p.map(r=>u[r]),maxCutOff:p.map(r=>v[r]),histogramLut:E?p.map(r=>E[r]):null,outMin:A,outMax:P}};h.generateStretchWebGLParams=function(d,p,z){let u=null,v=null;var A=this.lookup&&this.lookup.colormapLut;p.colorRamp&&A&&(u=A.indexedColormap,v=A.offset);"histogramEqualization"===p.stretchType&&(p={...p,stretchType:"minMax"});
({gamma:A}=p);const P=!!(p.useGamma&&A&&A.some(g=>1!==g)),{minCutOff:E,maxCutOff:r,outMin:n,outMax:x}=this.getStretchCutoff(p,d,z);var B=0;U.isSome(d)&&(B=d.getPlaneCount(),2===B&&(d=d.clone(),d.statistics=[d.statistics[0]],d.pixels=[d.pixels[0]]));d=Math.min(3,(null==z?void 0:z.length)||B||this.rasterInfo.bandCount);z=new Float32Array(d);B=u||P?1:255;let S;for(S=0;S<d;S++)z[S]=(x-n)/(r[S]-E[S])/B;const f=new Float32Array(d);if(P)for(S=0;S<d;S++)f[S]=1<A[S]?2<A[S]?6.5+(A[S]-2)**2.5:6.5+100*(2-A[S])**
4:1;return{bandCount:d,outMin:n/B,outMax:x/B,minCutOff:E,maxCutOff:r,factor:z,useGamma:P,gamma:P?A:[1,1,1],gammaCorrection:P?f:[1,1,1],colormap:u,colormapOffset:v,stretchType:p.stretchType,type:"stretch"}};h.generateShadedReliefWebGLParams=function(d,p,z){var u,v,A;let P=null,E=null;const r=this.lookup&&this.lookup.colormapLut;d.colorRamp&&r&&(P=r.indexedColormap,E=r.offset);p=y.calculateHillshadeParams({...d,isGCS:p,resolution:z});z=null==(u=U.unwrap(this.rasterInfo.statistics))?void 0:u[0];return{...p,
minValue:null!=(v=null==z?void 0:z.min)?v:0,maxValue:null!=(A=null==z?void 0:z.max)?A:8E3,hillshadeType:"traditional"===d.hillshadeType?0:1,type:"hillshade",colormap:P,colormapOffset:E}};h._generateVectorFieldWebGLParams=function(d){var p,z,u,v,A;const {style:P,inputUnit:E,outputUnit:r,visualVariables:n,symbolTileSize:x,flowRepresentation:B}=d;let S;var f=null!=(p=null==n?void 0:n.find(g=>"sizeInfo"===g.type))?p:{type:"sizeInfo",field:"Magnitude",maxDataValue:null==(z=this.rasterInfo.statistics)?
void 0:z[0].max,maxSize:.8*x,minDataValue:null==(u=this.rasterInfo.statistics)?void 0:u[0].min,minSize:.2*x};p=f?f.minDataValue:null==(v=this.rasterInfo.statistics)?void 0:v[0].min;z=f?f.maxDataValue:null==(A=this.rasterInfo.statistics)?void 0:A[0].max;A=U.isSome(f.maxSize)&&U.isSome(f.minSize)?[f.minSize/x,f.maxSize/x]:[.2,.8];if("wind_speed"===P||"simple_scalar"===P)A[0]=A[1]=(A[0]+A[1])/2;v=U.isSome(p)&&U.isSome(z)?[p,z]:null;if("classified_arrow"===P)if(U.isSome(p)&&U.isSome(z)&&U.isSome(f))for(S=
[],p=(f.maxDataValue-f.minDataValue)/5,z=0;6>z;z++)S.push(f.minDataValue+p*z);else S=[0,1E-6,3.5,7,10.5,14];f="flow_to"===B===("ocean_current_kn"===P||"ocean_current_m"===P)?0:Math.PI;p=null==n?void 0:n.find(g=>"rotationInfo"===g.type);return{breakValues:S,dataRange:v,inputUnit:E,outputUnit:r,symbolTileSize:x,symbolPercentRange:A,style:P||"single_arrow",rotation:f,rotationType:(null==p?void 0:p.rotationType)||d.rotationType,type:"vectorField"}};return q}(N.JSONSupport);I.__decorate([V.property({json:{write:!0}})],
N.prototype,"rendererJSON",void 0);I.__decorate([V.property({type:C,json:{write:!0}})],N.prototype,"rasterInfo",void 0);I.__decorate([V.property({json:{write:!0}})],N.prototype,"lookup",void 0);I.__decorate([V.property()],N.prototype,"canRenderInWebGL",void 0);return N=I.__decorate([L.subclass("esri.renderers.support.RasterSymbolizer")],N)})},"esri/layers/support/rasterFunctions/surfaceUtils":function(){define(["exports","../PixelBlock","./pixelUtils"],function(W,I,w){function N(l){let {altitude:U,
azimuth:V}=l;const {hillshadeType:Y,pixelSizePower:M,pixelSizeFactor:L,scalingType:C,isGCS:e,resolution:y}=l;var D="multi-directional"===Y?2*l.zFactor:l.zFactor;const {x:a,y:m}=y;l=D/(8*a);var c=D/(8*m);e&&.001<D&&(l/=111E3,c/=111E3);"adjusted"===C&&(e?(l=111E3*a,c=111E3*m,l=(D+l**M*L)/(8*l),c=(D+c**M*L)/(8*c)):(l=(D+a**M*L)/(8*a),c=(D+m**M*L)/(8*m)));var b=(90-U)*Math.PI/180;D=Math.cos(b);let k=(360-V+90)*Math.PI/180,t=Math.sin(b)*Math.cos(k);b=Math.sin(b)*Math.sin(k);const q=[315,270,225,360,180,
0],h=[60,60,60,60,60,90];var d=new Float32Array([3,5,3,2,1,4]);const p=d.reduce((P,E)=>P+E);d=d.map(P=>P/p);const z="multi-directional"===Y?q.length:1,u=new Float32Array(6),v=new Float32Array(6),A=new Float32Array(6);if("multi-directional"===Y)for(let P=0;P<z;P++)U=h[P],V=q[P],b=(90-U)*Math.PI/180,D=Math.cos(b),k=(360-V+90)*Math.PI/180,t=Math.sin(b)*Math.cos(k),b=Math.sin(b)*Math.sin(k),u[P]=D,v[P]=t,A[P]=b;else u.fill(D),v.fill(t),A.fill(b);return{resolution:y,factor:[l,c],sinZcosA:t,sinZsinA:b,
cosZ:D,sinZcosAs:v,sinZsinAs:A,cosZs:u,weights:d,hillshadeType:["traditional","multi-directional"].indexOf(Y)}}W.calculateHillshadeParams=N;W.hillshade=function(l,U){if(!w.isValidPixelBlock(l))return l;const {width:V,height:Y,mask:M}=l,L=new Uint8Array(V*Y);M&&L.set(M);const {factor:C,sinZcosA:e,sinZsinA:y,cosZ:D,sinZcosAs:a,sinZsinAs:m,cosZs:c,weights:b}=N(U),[k,t]=C;var {hillshadeType:q}=U;const h=l.pixels[0];U=new Uint8Array(V*Y);let d;for(let r=1;r<Y-1;r++){const n=r*V;for(let x=1;x<V-1;x++)if(M&&
!M[n+x])U[n+x]=0;else{var p=8;if(M&&(p=M[n-V+x-1]+M[n-V+x]+M[n-V+x+1]+M[n+x-1]+M[n+x+1]+M[n+V+x-1]+M[n+V+x]+M[n+V+x+1],7>p)){U[n+x]=0;L[n+x]=0;continue}if(7===p){var z=M[n-V+x-1]?h[n-V+x-1]:h[n+x];var u=M[n-V+x]?h[n-V+x]:h[n+x];var v=M[n-V+x+1]?h[n-V+x+1]:h[n+x];p=M[n+x-1]?h[n+x-1]:h[n+x];d=M[n+x+1]?h[n+x+1]:h[n+x];var A=M[n+V+x-1]?h[n+V+x-1]:h[n+x];var P=M[n+V+x]?h[n+V+x]:h[n+x];var E=M[n+V+x+1]?h[n+V+x+1]:h[n+x]}else z=h[n-V+x-1],u=h[n-V+x],v=h[n-V+x+1],p=h[n+x-1],d=h[n+x+1],A=h[n+V+x-1],P=h[n+
V+x],E=h[n+V+x+1];p=(v+d+d+E-(z+p+p+A))*k;z=(A+P+P+E-(z+u+u+v))*t;u=Math.sqrt(1+p*p+z*z);v=0;if("traditional"===q)p=255*(D+y*z-e*p)/u,0>p&&(p=0),v=p;else for(A=m.length,P=0;P<A;P++)E=255*(c[P]+m[P]*z-a[P]*p)/u,0>E&&(E=0),v+=E*b[P];U[n+x]=v&255}}for(q=0;q<Y;q++)U[q*V]=U[q*V+1],U[(q+1)*V-1]=U[(q+1)*V-2];for(q=1;q<V-1;q++)U[q]=U[q+V],U[q+(Y-1)*V]=U[q+(Y-2)*V];return new I({width:V,height:Y,pixels:[U],mask:M?L:null,pixelType:"u8",validPixelCount:l.validPixelCount,statistics:[{minValue:0,maxValue:255}]})};
W.tintHillshade=function(l,U,V,Y){if(w.isValidPixelBlock(l)&&w.isValidPixelBlock(U)){var {min:M,max:L}=Y;Y=l.pixels[0];var {pixels:C,mask:e}=U;U=C[0];var y=255.00001/(L-M),D=new Uint8ClampedArray(U.length),a=new Uint8ClampedArray(U.length),m=new Uint8ClampedArray(U.length),c=V.length-1;for(let t=0;t<U.length;t++){if(e&&0===e[t])continue;var b=Math.floor((U[t]-M)*y);const [q,h]=V[0>b?0:b>c?c:b];var k=Y[t];b=k*h;const d=b*(1-Math.abs(q%2-1));k-=b;switch(Math.floor(q)){case 0:D[t]=b+k;a[t]=d+k;m[t]=
k;break;case 1:D[t]=d+k;a[t]=b+k;m[t]=k;break;case 2:D[t]=k;a[t]=b+k;m[t]=d+k;break;case 3:D[t]=k;a[t]=d+k;m[t]=b+k;break;case 4:D[t]=d+k;a[t]=k;m[t]=b+k;break;case 5:case 6:D[t]=b+k,a[t]=k,m[t]=d+k}}l.pixels=[D,a,m];l.updateStatistics()}};Object.defineProperty(W,"__esModule",{value:!0})})},"esri/rest/imageService":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../request ../core/maybe ../geometry/support/normalizeUtils ./utils ./support/ImageIdentifyResult ./support/ImageSampleResult".split(" "),
function(W,I,w,N,l,U,V,Y){function M(m){const c=null==m?void 0:m.time;if(c&&(null!=c.start||null!=c.end)){const b=[];null!=c.start&&b.push(c.start);null!=c.end&&-1===b.indexOf(c.end)&&b.push(c.end);m.time=b.join(",")}}function L(m,c,b){return C.apply(this,arguments)}function C(){C=I._asyncToGenerator(function*(m,c,b){m=U.parseUrl(m);var k=yield l.normalizeCentralMeridian(c.geometry?[c.geometry]:[]);c=c.toJSON();M(c);k=k&&k[0];N.isSome(k)&&(c.geometry=k.toJSON());m=U.encode({...m.query,f:"json",...c});
return U.asValidOptions(m,b)});return C.apply(this,arguments)}function e(){e=I._asyncToGenerator(function*(m,c,b){c=yield L(m,c,b);m=U.parseUrl(m);({data:m}=yield w(`${m.path}/computeStatisticsHistograms`,c));({statistics:c}=m);null!=c&&c.length&&c.forEach(k=>{k.avg=k.mean;k.stddev=k.standardDeviation});return{statistics:c,histograms:m.histograms}});return e.apply(this,arguments)}function y(){y=I._asyncToGenerator(function*(m,c,b){c=yield L(m,c,b);m=U.parseUrl(m);({data:m}=yield w(`${m.path}/computeHistograms`,
c));return{histograms:m.histograms}});return y.apply(this,arguments)}function D(){D=I._asyncToGenerator(function*(m,c,b){var k,t,q=c.toJSON();M(q);null!=(k=q.outFields)&&k.length&&(q.outFields=q.outFields.join(","));c=yield l.normalizeCentralMeridian(c.geometry);c=null==c?void 0:c[0];N.isSome(c)&&(q.geometry=c.toJSON());m=U.parseUrl(m);q=U.encode({...m.query,f:"json",...q});b=U.asValidOptions(q,b);({data:b}=yield w(`${m.path}/getSamples`,b));b=null==b?void 0:null==(t=b.samples)?void 0:t.map(h=>{const d=
"NaN"===h.value||""===h.value?null:h.value.split(" ").map(p=>Number(p));return{...h,pixelValue:d}});return Y.fromJSON({samples:b})});return D.apply(this,arguments)}function a(){a=I._asyncToGenerator(function*(m,c,b){const k=U.parseUrl(m);return l.normalizeCentralMeridian(c.geometry?[c.geometry]:[]).then(t=>{var q=c.toJSON();t=t&&t[0];N.isSome(t)&&(q.geometry=JSON.stringify(t.toJSON()));q=U.encode({...k.query,f:"json",...q});q=U.asValidOptions(q,b);return w(k.path+"/identify",q)}).then(t=>V.fromJSON(t.data))});
return a.apply(this,arguments)}W.computeHistograms=function(m,c,b){return y.apply(this,arguments)};W.computeStatisticsHistograms=function(m,c,b){return e.apply(this,arguments)};W.getSamples=function(m,c,b){return D.apply(this,arguments)};W.identify=function(m,c,b){return a.apply(this,arguments)};Object.defineProperty(W,"__esModule",{value:!0})})},"esri/rest/support/ImageIdentifyResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../geometry/Point ./FeatureSet".split(" "),
function(W,I,w,N,l,U,V,Y,M,L){w=function(C){function e(){var y=C.apply(this,arguments)||this;y.catalogItemVisibilities=null;y.catalogItems=null;y.location=null;y.name=null;y.objectId=null;y.processedValues=null;y.properties=null;y.value=null;return y}W._inheritsLoose(e,C);return e}(w.JSONSupport);I.__decorate([N.property({json:{write:!0}})],w.prototype,"catalogItemVisibilities",void 0);I.__decorate([N.property({type:L,json:{write:!0}})],w.prototype,"catalogItems",void 0);I.__decorate([N.property({type:M,
json:{write:!0}})],w.prototype,"location",void 0);I.__decorate([N.property({json:{write:!0}})],w.prototype,"name",void 0);I.__decorate([N.property({json:{write:!0}})],w.prototype,"objectId",void 0);I.__decorate([N.property({json:{write:!0}})],w.prototype,"processedValues",void 0);I.__decorate([N.property({json:{write:!0}})],w.prototype,"properties",void 0);I.__decorate([N.property({json:{write:!0}})],w.prototype,"value",void 0);return w=I.__decorate([Y.subclass("esri.rest.support.ImageIdentifyResult")],
w)})},"esri/rest/support/ImageSampleResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ./ImageSample".split(" "),function(W,I,w,N,l,U,V,Y,M){w=function(L){function C(){var e=L.apply(this,arguments)||this;e.samples=null;return e}W._inheritsLoose(C,L);return C}(w.JSONSupport);
I.__decorate([N.property({type:[M],json:{write:!0}})],w.prototype,"samples",void 0);return w=I.__decorate([Y.subclass("esri.rest.support.ImageSampleResult")],w)})},"esri/rest/support/ImageSample":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/ensureType ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),function(W,
I,w,N,l,U,V,Y,M){w=function(L){function C(){var e=L.apply(this,arguments)||this;e.attributes=null;e.location=null;e.locationId=null;e.rasterId=null;e.resolution=null;e.pixelValue=null;return e}W._inheritsLoose(C,L);return C}(w.JSONSupport);I.__decorate([N.property({json:{write:!0}})],w.prototype,"attributes",void 0);I.__decorate([N.property({type:M,json:{write:!0}})],w.prototype,"location",void 0);I.__decorate([N.property({json:{write:!0}})],w.prototype,"locationId",void 0);I.__decorate([N.property({json:{write:!0}})],
w.prototype,"rasterId",void 0);I.__decorate([N.property({json:{write:!0}})],w.prototype,"resolution",void 0);I.__decorate([N.property({json:{write:!0}})],w.prototype,"pixelValue",void 0);return w=I.__decorate([Y.subclass("esri.rest.support.ImageSample")],w)})},"esri/rest/support/ImageHistogramParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ../../layers/support/MosaicRule ../../layers/support/RasterFunction ../../geometry/Point".split(" "),
function(W,I,w,N,l,U,V,Y,M,L,C,e,y,D,a,m){var c;l=c=function(b){function k(){var q=b.apply(this,arguments)||this;q.geometry=null;q.mosaicRule=null;q.renderingRule=null;q.pixelSize=null;q.raster=void 0;q.timeExtent=null;return q}W._inheritsLoose(k,b);var t=k.prototype;t.writeGeometry=function(q,h,d){null!=q&&(h.geometryType=y.getJsonType(q),h[d]=q.toJSON())};t.clone=function(){return new c(U.clone({geometry:this.geometry,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,
raster:this.raster,timeExtent:this.timeExtent}))};return k}(l.JSONSupport);I.__decorate([V.property({types:w.geometryTypes,json:{read:y.fromJSON}})],l.prototype,"geometry",void 0);I.__decorate([e.writer("geometry")],l.prototype,"writeGeometry",null);I.__decorate([V.property({type:D,json:{write:!0}})],l.prototype,"mosaicRule",void 0);I.__decorate([V.property({type:a,json:{write:!0}})],l.prototype,"renderingRule",void 0);I.__decorate([V.property({type:m,json:{write:!0}})],l.prototype,"pixelSize",void 0);
I.__decorate([V.property({json:{write:!0}})],l.prototype,"raster",void 0);I.__decorate([V.property({type:N,json:{read:{source:"time"},write:{target:"time"}}})],l.prototype,"timeExtent",void 0);return l=c=I.__decorate([C.subclass("esri.rest.support.ImageHistogramParameters")],l)})},"esri/rest/support/ImageIdentifyParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../TimeExtent ../../core/JSONSupport ../../core/lang ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/support/jsonUtils ../../layers/support/MosaicRule ../../layers/support/RasterFunction".split(" "),
function(W,I,w,N,l,U,V,Y,M,L,C,e,y,D,a,m){var c;N=c=function(b){function k(){var q=b.apply(this,arguments)||this;q.geometry=null;q.renderingRules=null;q.pixelSize=null;q.returnGeometry=!0;q.returnCatalogItems=!0;q.returnPixelValues=!0;q.maxItemCount=null;q.timeExtent=null;q.raster=void 0;q.viewId=void 0;return q}W._inheritsLoose(k,b);var t=k.prototype;t.writeGeometry=function(q,h,d){null!=q&&(h.geometryType=D.getJsonType(q),h[d]=JSON.stringify(q.toJSON()))};t.writeMosaicRule=function(q,h,d){null!=
q&&(h[d]=JSON.stringify(q.toJSON()))};t.writeRenderingRule=function(q,h,d){null!=q&&(h[d]=JSON.stringify(q.toJSON()))};t.writeRenderingRules=function(q,h,d){null!=q&&(h[d]=JSON.stringify(q.map(p=>p.toJSON())))};t.writePixelSize=function(q,h,d){null!=q&&(h[d]=JSON.stringify(q))};t.writeTimeExtent=function(q,h,d){if(null!=q){const p=U.isSome(q.start)?q.start.getTime():null;q=U.isSome(q.end)?q.end.getTime():null;h[d]=null!=p?null!=q?`${p},${q}`:`${p}`:null}};t.clone=function(){return new c(l.clone({geometry:this.geometry,
mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,returnPixelValues:this.returnPixelValues,maxItemCount:this.maxItemCount,raster:this.raster,viewId:this.viewId,timeExtent:this.timeExtent}))};W._createClass(k,[{key:"mosaicRule",set:function(q){q&&q.mosaicMethod&&(q=a.fromJSON({...q.toJSON(),mosaicMethod:q.mosaicMethod,mosaicOperation:q.mosaicOperation}));this._set("mosaicRule",q)}},{key:"renderingRule",
set:function(q){q&&q.rasterFunction&&(q=m.fromJSON({...q.toJSON(),rasterFunction:q.rasterFunction,rasterFunctionArguments:q.rasterFunctionArguments}));this._set("renderingRule",q)}}]);return k}(N.JSONSupport);I.__decorate([V.property({json:{write:!0}})],N.prototype,"geometry",void 0);I.__decorate([e.writer("geometry")],N.prototype,"writeGeometry",null);I.__decorate([V.property({type:a,json:{write:!0}})],N.prototype,"mosaicRule",null);I.__decorate([e.writer("mosaicRule")],N.prototype,"writeMosaicRule",
null);I.__decorate([V.property({type:m,json:{write:!0}})],N.prototype,"renderingRule",null);I.__decorate([e.writer("renderingRule")],N.prototype,"writeRenderingRule",null);I.__decorate([V.property({type:[m],json:{write:!0}})],N.prototype,"renderingRules",void 0);I.__decorate([e.writer("renderingRules")],N.prototype,"writeRenderingRules",null);I.__decorate([V.property({type:y,json:{write:!0}})],N.prototype,"pixelSize",void 0);I.__decorate([e.writer("pixelSize")],N.prototype,"writePixelSize",null);
I.__decorate([V.property({type:Boolean,json:{write:!0}})],N.prototype,"returnGeometry",void 0);I.__decorate([V.property({type:Boolean,json:{write:!0}})],N.prototype,"returnCatalogItems",void 0);I.__decorate([V.property({type:Boolean,json:{write:!0}})],N.prototype,"returnPixelValues",void 0);I.__decorate([V.property({type:Number,json:{write:!0}})],N.prototype,"maxItemCount",void 0);I.__decorate([V.property({type:w,json:{write:{target:"time"}}})],N.prototype,"timeExtent",void 0);I.__decorate([e.writer("timeExtent")],
N.prototype,"writeTimeExtent",null);I.__decorate([V.property({json:{write:!0}})],N.prototype,"raster",void 0);I.__decorate([V.property({json:{write:!0}})],N.prototype,"viewId",void 0);return N=c=I.__decorate([C.subclass("esri.rest.support.ImageIdentifyParameters")],N)})},"esri/rest/support/ImageSampleParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ../../layers/support/MosaicRule ../../layers/support/rasterEnums ../../geometry/Point ../../geometry/Multipoint".split(" "),
function(W,I,w,N,l,U,V,Y,M,L,C,e,y,D,a,m,c){var b;l=b=function(k){function t(){var h=k.apply(this,arguments)||this;h.geometry=null;h.interpolation="nearest";h.mosaicRule=null;h.outFields=null;h.pixelSize=null;h.returnFirstValueOnly=!0;h.sampleDistance=null;h.sampleCount=null;h.sliceId=null;h.timeExtent=null;return h}W._inheritsLoose(t,k);var q=t.prototype;q.writeGeometry=function(h,d,p){null!=h&&(d.geometryType=y.getJsonType(h),d[p]=h.toJSON())};q.clone=function(){return new b(U.clone({geometry:this.geometry,
locations:this.locations,interpolation:this.interpolation,mosaicRule:this.mosaicRule,outFields:this.outFields,raster:this.raster,returnFirstValueOnly:this.returnFirstValueOnly,sampleDistance:this.sampleDistance,sampleCount:this.sampleCount,sliceId:this.sliceId,pixelSize:this.pixelSize,timeExtent:this.timeExtent}))};W._createClass(t,[{key:"locations",set:function(h){if(null!=h&&h.length){const d=new c({spatialReference:h[0].spatialReference});d.points=h.map(p=>[p.x,p.y]);this._set("locations",h);this.geometry=
d}}}]);return t}(l.JSONSupport);I.__decorate([V.property({types:w.geometryTypes,json:{read:y.fromJSON}})],l.prototype,"geometry",void 0);I.__decorate([e.writer("geometry")],l.prototype,"writeGeometry",null);I.__decorate([V.property({type:String,json:{type:a.interpolationKebab.jsonValues,read:a.interpolationKebab.read,write:a.interpolationKebab.write}})],l.prototype,"interpolation",void 0);I.__decorate([V.property({type:D,json:{write:!0}})],l.prototype,"mosaicRule",void 0);I.__decorate([V.property({type:[String],
json:{write:!0}})],l.prototype,"outFields",void 0);I.__decorate([V.property({type:m,json:{write:!0}})],l.prototype,"pixelSize",void 0);I.__decorate([V.property({type:String,json:{write:!0}})],l.prototype,"raster",void 0);I.__decorate([V.property({type:Boolean,json:{write:!0}})],l.prototype,"returnFirstValueOnly",void 0);I.__decorate([V.property({type:Number,json:{write:!0}})],l.prototype,"sampleDistance",void 0);I.__decorate([V.property({type:Number,json:{write:!0}})],l.prototype,"sampleCount",void 0);
I.__decorate([V.property({type:Number,json:{write:!0}})],l.prototype,"sliceId",void 0);I.__decorate([V.property({type:N,json:{read:{source:"time"},write:{target:"time"}}})],l.prototype,"timeExtent",void 0);return l=b=I.__decorate([C.subclass("esri.rest.support.ImageSampleParameters")],l)})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../PopupTemplate ../core/maybe ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./Layer ./mixins/ArcGISImageService ./mixins/ArcGISService ./mixins/BlendLayer ./mixins/CustomParametersMixin ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./mixins/TemporalLayer ./support/commonProperties ../support/popupUtils".split(" "),function(W,
I,w,N,l,U,V,Y,M,L,C,e,y,D,a,m,c,b,k,t,q,h,d,p){l=function(z){function u(...A){A=z.call(this,...A)||this;A.legendEnabled=!0;A.isReference=null;A.operationalLayerType="ArcGISImageServiceLayer";A.popupEnabled=!0;A.popupTemplate=null;A.type="imagery";return A}W._inheritsLoose(u,z);var v=u.prototype;v.normalizeCtorArgs=function(A,P){return"string"===typeof A?{url:A,...P}:A};v.load=function(A){const P=N.isSome(A)?A.signal:null;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},
A).catch(U.throwIfAbortError).then(()=>this._fetchService(P)));return Promise.resolve(this)};v.writeOperationalLayerType=function(A,P,E){var r;A="vector-field"===(null==(r=this.renderer)?void 0:r.type);P[E]=A?"ArcGISImageServiceVectorLayer":"ArcGISImageServiceLayer"};v.createPopupTemplate=function(A){const P=this.rasterFields,E=this.title,r=new Set;var n=!1;let x=!1;this.capabilities&&(x=(n=this.capabilities.operations.supportsQuery&&this.fields&&0<this.fields.length)&&("esriImageServiceDataTypeVector-UV"===
this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType));const B=new Set;n&&(B.add("raster.itempixelvalue"),x&&B.add("raster.magnitude").add("raster.direction"));for(const S of P)n=S.name.toLowerCase(),B.has(n)||-1<n.indexOf("raster.servicepixelvalue.")||r.add(S.name);return p.createPopupTemplate({fields:P,title:E},{...A,visibleFieldNames:r})};v.queryFeatures=function(A,P){return this.queryRasters(A,P).then(E=>{if(null!=E&&E.features)for(const r of E.features)r.layer=
r.sourceLayer=this;return E})};v.queryFeatureCount=function(A,P){return this.queryRasterCount(A,P)};v.redraw=function(){this.emit("redraw")};W._createClass(u,[{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}}]);return u}(m.BlendLayer(h.TemporalLayer(t.RefreshableLayer(q.ScaleRangeLayer(b.OperationalLayer(k.PortalLayer(D.ArcGISImageService(c.CustomParametersMixin(a.ArcGISService(l.MultiOriginJSONMixin(y)))))))))));I.__decorate([V.property(d.legendEnabled)],l.prototype,
"legendEnabled",void 0);I.__decorate([V.property({type:["show","hide"]})],l.prototype,"listMode",void 0);I.__decorate([V.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],l.prototype,"isReference",void 0);I.__decorate([V.property({type:["ArcGISImageServiceLayer"],json:{origins:{"web-map":{type:["ArcGISImageServiceLayer","ArcGISImageServiceVectorLayer"],read:!1,write:{target:"layerType",ignoreOrigin:!0}}}}})],l.prototype,"operationalLayerType",void 0);I.__decorate([e.writer("web-map",
"operationalLayerType")],l.prototype,"writeOperationalLayerType",null);I.__decorate([V.property(d.popupEnabled)],l.prototype,"popupEnabled",void 0);I.__decorate([V.property({type:w,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],l.prototype,"popupTemplate",void 0);I.__decorate([V.property({readOnly:!0})],l.prototype,"defaultPopupTemplate",null);I.__decorate([V.property({readOnly:!0,json:{read:!1}})],l.prototype,"type",void 0);return l=I.__decorate([C.subclass("esri.layers.ImageryLayer")],
l)});