// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.21/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/graphics/sources/WFSSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/Error ../../../core/HandleOwner ../../../core/has ../../../core/Loadable ../../../core/maybe ../../../core/promiseUtils ../../../core/watchUtils ../../../core/workers/workers ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ../../../geometry/support/typeUtils ./support/clientSideDefaults ../../ogc/wfsUtils ../../../rest/support/FeatureSet ../../../geometry/Extent".split(" "),
function(G,a,L,r,D,A,U,ka,M,R,Y,ba,S,E,da,n,l,k,h,f,g){G.WFSSource=function(p){function t(){var x=p.apply(this,arguments)||this;x.capabilities=k.createCapabilities(!1,!1);x.type="wfs";x.refresh=R.debounce(a._asyncToGenerator(function*(){yield x.load();const {extent:C}=yield x._connection.invoke("refresh");x.sourceJSON.extent=C;return{hasUpdates:!0,updates:{extent:x.sourceJSON.extent}}}));x._updateCustomParameters=R.debounce(()=>{var C;const J=x.layer.customParameters;return null==(C=x._connection)?
void 0:C.invoke("setCustomParameters",J)});return x}a._inheritsLoose(t,p);var B=t.prototype;B.load=function(x){var C;x=null!=(C=M.isSome(x)&&x.signal)?C:null;this.addResolvingPromise(this._startWorker({signal:x}));return Promise.resolve(this)};B.destroy=function(){var x;null==(x=this._connection)?void 0:x.close();this._connection=null};B.openPorts=function(){var x=a._asyncToGenerator(function*(){yield this.load();return this._connection.openPorts()});return function(){return x.apply(this,arguments)}}();
B.queryFeatures=function(){var x=a._asyncToGenerator(function*(C,J={}){yield this.load(J);C=yield this._connection.invoke("queryFeatures",C?C.toJSON():null,J);return f.fromJSON(C)});return function(C){return x.apply(this,arguments)}}();B.queryFeaturesJSON=function(){var x=a._asyncToGenerator(function*(C,J={}){yield this.load(J);return this._connection.invoke("queryFeatures",C?C.toJSON():null,J)});return function(C){return x.apply(this,arguments)}}();B.queryFeatureCount=function(){var x=a._asyncToGenerator(function*(C,
J={}){yield this.load(J);return this._connection.invoke("queryFeatureCount",C?C.toJSON():null,J)});return function(C){return x.apply(this,arguments)}}();B.queryObjectIds=function(){var x=a._asyncToGenerator(function*(C,J={}){yield this.load(J);return this._connection.invoke("queryObjectIds",C?C.toJSON():null,J)});return function(C){return x.apply(this,arguments)}}();B.queryExtent=function(){var x=a._asyncToGenerator(function*(C,J={}){yield this.load(J);C=yield this._connection.invoke("queryExtent",
C?C.toJSON():null,J);return{count:C.count,extent:g.fromJSON(C.extent)}});return function(C){return x.apply(this,arguments)}}();B.querySnapping=function(){var x=a._asyncToGenerator(function*(C,J={}){yield this.load(J);return this._connection.invoke("querySnapping",C,J)});return function(C){return x.apply(this,arguments)}}();B._createLoadOptions=function(){var x=a._asyncToGenerator(function*(C){const {url:J,customParameters:V,name:P,namespaceUri:ea,spatialReference:ia,fields:fa,geometryType:ca,swapXY:xa}=
this.layer;if(!J)throw new D("wfs-layer:missing-url","WFSLayer must be created with a url");this.wfsCapabilities=this.wfsCapabilities||(yield h.getCapabilities(J,{customParameters:V,...C}));C="fields geometryType name namespaceUri spatialReference swapXY".split(" ").some(ra=>null==this.layer[ra])?yield h.getWFSLayerInfo(this.wfsCapabilities,P,ea,{spatialReference:ia,customParameters:V,signal:null==C?void 0:C.signal}):{...h.prepareWFSLayerFields(fa),geometryType:ca,name:P,namespaceUri:ea,spatialReference:ia,
swapXY:xa};const na=M.unwrap(h.findFeatureType(this.wfsCapabilities.readFeatureTypes(),C.name,C.namespaceUri)),ta=l.featureGeometryTypeKebabDictionary.toJSON(C.geometryType);return{customParameters:V,featureType:na,fields:C.fields.map(ra=>ra.toJSON()),geometryField:C.geometryField,geometryType:ta,getFeatureUrl:this.wfsCapabilities.operations.GetFeature.url,getFeatureOutputFormat:this.wfsCapabilities.operations.GetFeature.outputFormat,objectIdField:C.objectIdField,spatialReference:C.spatialReference.toJSON(),
swapXY:C.swapXY}});return function(C){return x.apply(this,arguments)}}();B._startWorker=function(){var x=a._asyncToGenerator(function*(C){const [J,V]=yield R.eachAlways([this._createLoadOptions(C),ba.open("WFSSourceWorker",{...C,strategy:U("feature-layers-workers")?"dedicated":"local"})]);var P=J.error||V.error||null;const ea=V.value||null;if(P)throw ea&&ea.close(),P;P=J.value;this._connection=V.value;({extent:C}=yield this._connection.invoke("load",P,C));this.sourceJSON={extent:C,fields:P.fields,
geometryType:P.geometryType,objectIdField:P.objectIdField,geometryField:P.geometryField,drawingInfo:k.createDrawingInfo(P.geometryType),name:P.featureType.title,wfsInfo:{name:P.featureType.name,featureUrl:P.getFeatureUrl,maxFeatures:3E3,swapXY:P.swapXY,supportedSpatialReferences:P.featureType.supportedSpatialReferences,version:"2.0.0",wfsNamespace:P.featureType.namespaceUri}};this.handles.add(Y.init(this.layer,"customParameters",()=>this._updateCustomParameters().catch(()=>{})))});return function(C){return x.apply(this,
arguments)}}();return t}(A.HandleOwnerMixin(ka));L.__decorate([S.property()],G.WFSSource.prototype,"capabilities",void 0);L.__decorate([S.property({constructOnly:!0})],G.WFSSource.prototype,"layer",void 0);L.__decorate([S.property()],G.WFSSource.prototype,"sourceJSON",void 0);L.__decorate([S.property()],G.WFSSource.prototype,"type",void 0);L.__decorate([S.property()],G.WFSSource.prototype,"wfsCapabilities",void 0);G.WFSSource=L.__decorate([n.subclass("esri.layers.graphics.sources.WFSSource")],G.WFSSource);
G["default"]=G.WFSSource;Object.defineProperty(G,"__esModule",{value:!0})})},"esri/layers/ogc/wfsUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../core/Error ../../core/interatorUtils ../../core/maybe ../../core/promiseUtils ../../core/urlUtils ../../geometry/projection ../../geometry/support/spatialReferenceUtils ../../geometry/support/typeUtils ../graphics/sources/geojson/geojson ./dateUtils ./xmlUtils ../support/Field ../../geometry/SpatialReference ../../geometry/Extent".split(" "),
function(G,a,L,r,D,A,U,ka,M,R,Y,ba,S,E,da,n,l,k){function h(){h=a._asyncToGenerator(function*(q,u){u=yield r(q,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"GetCapabilities",VERSION:"2.0.0",...null==u?void 0:u.customParameters},signal:null==u?void 0:u.signal});u=f(u.data);M.isHTTPSProtocol(q)&&(M.hasSameOrigin(q,u.operations.DescribeFeatureType.url,!0)&&(u.operations.DescribeFeatureType.url=M.toHTTPS(u.operations.DescribeFeatureType.url)),M.hasSameOrigin(q,u.operations.GetFeature.url,!0)&&(u.operations.GetFeature.url=
M.toHTTPS(u.operations.GetFeature.url)));return u});return h.apply(this,arguments)}function f(q){q=Ba(q);Ia(q);oa(q);const u=q.firstElementChild,w=new Map;return{operations:g(u),get featureTypes(){return Array.from(p(u,w))},readFeatureTypes:()=>p(u,w)}}function g(q){let u=!1;const w={GetCapabilities:{url:""},DescribeFeatureType:{url:""},GetFeature:{url:"",outputFormat:null,supportsPagination:!1}};da.visitXML(q,{OperationsMetadata:{Operation:m=>{switch(m.getAttribute("name")){case "GetCapabilities":return{DCP:{HTTP:{Get:y=>
{w.GetCapabilities.url=y.getAttribute("xlink:href")}}}};case "DescribeFeatureType":return{DCP:{HTTP:{Get:y=>{w.DescribeFeatureType.url=y.getAttribute("xlink:href")}}}};case "GetFeature":return{DCP:{HTTP:{Get:y=>{w.GetFeature.url=y.getAttribute("xlink:href")}}},Parameter:y=>{if("outputFormat"===y.getAttribute("name"))return{AllowedValues:{Value:F=>{F=F.textContent;N.has(F.toLowerCase())&&(w.GetFeature.outputFormat=F)}}}}}}},Constraint:m=>{switch(m.getAttribute("name")){case "KVPEncoding":return{DefaultValue:y=>
{u="true"===y.textContent.toLowerCase()}};case "ImplementsResultPaging":return{DefaultValue:y=>{w.GetFeature.supportsPagination="true"===y.textContent.toLowerCase()}}}}}});if(!u)throw new D("wfs-layer:kvp-encoding-not-supported","WFS service doesn't support key/value pair (KVP) encoding");if(U.isNone(w.GetFeature.outputFormat))throw new D("wfs-layer:geojson-not-supported","WFS service doesn't support GeoJSON output format");return w}function p(q,u){return da.iterateXML(q,{FeatureTypeList:{FeatureType:w=>
{if(u.has(w))return u.get(w);const m={typeName:"undefined:undefined",name:"",title:"",description:"",extent:null,namespacePrefix:"",namespaceUri:"",supportedSpatialReferences:[]},y=new Set([4326]),F=H=>{var Q,T;H=parseInt(null==(Q=H.textContent.match(/(?<wkid>\d+$)/i))?void 0:null==(T=Q.groups)?void 0:T.wkid,10);Number.isNaN(H)||y.add(H)};da.visitXML(w,{Name:H=>{const {name:Q,prefix:T}=ma(H.textContent);m.typeName=`${T}:${Q}`;m.name=Q;m.namespacePrefix=T;m.namespaceUri=H.lookupNamespaceURI(T)},Abstract:H=>
{m.description=H.textContent},Title:H=>{m.title=H.textContent},WGS84BoundingBox:H=>{m.extent=t(H)},DefaultSRS:F,DefaultCRS:F,OtherSRS:F,OtherCRS:F});m.title||(m.title=m.name);m.supportedSpatialReferences.push(...y);u.set(w,m);return m}}})}function t(q){let u,w,m,y;for(const F of q.children)switch(F.localName){case "LowerCorner":[u,w]=F.textContent.split(" ").map(H=>Number.parseFloat(H));break;case "UpperCorner":[m,y]=F.textContent.split(" ").map(H=>Number.parseFloat(H))}return{xmin:u,ymin:w,xmax:m,
ymax:y,spatialReference:Y.WGS84}}function B(q,u,w){return A.find(q,m=>w?m.name===u&&m.namespaceUri===w:m.typeName===u||m.name===u)}function x(){x=a._asyncToGenerator(function*(q,u,w,m={}){var y;const {featureType:F,extent:H}=yield C(q,u,w,m),{fields:Q,geometryType:T,swapXY:la,objectIdField:pa,geometryField:qa}=yield V(q,F.typeName,m);return{url:q.operations.GetCapabilities.url,name:F.name,namespaceUri:F.namespaceUri,fields:Q,geometryField:qa,geometryType:T,objectIdField:pa,spatialReference:null!=
(y=m.spatialReference)?y:l.WGS84,extent:H,swapXY:la,wfsCapabilities:q,customParameters:m.customParameters}});return x.apply(this,arguments)}function C(q,u,w){return J.apply(this,arguments)}function J(){J=a._asyncToGenerator(function*(q,u,w,m={}){const {spatialReference:y=l.WGS84}=m;q=q.readFeatureTypes();w=u?B(q,u,w):q.next().value;if(U.isNone(w)){if(u)throw new D("wfs-layer:feature-type-not-found",`The type '${u}' could not be found in the service`);throw new D("wfs-layer:empty-service","The service is empty");
}u=new k({...w.extent,spatialReference:y});if(!Y.equals(y,Y.WGS84))try{yield R.initializeProjection(Y.WGS84,y,void 0,m),u=R.project(u,Y.WGS84)}catch{throw new D("wfs-layer:unsupported-spatial-reference","Projection not supported");}return{extent:u,spatialReference:y,featureType:w}});return J.apply(this,arguments)}function V(q,u){return P.apply(this,arguments)}function P(){P=a._asyncToGenerator(function*(q,u,w={}){const [m,y]=yield ka.eachAlways([ca(q.operations.DescribeFeatureType.url,u,w),ia(q,u,
w)]);if(m.error||y.error)throw new D("wfs-layer:getWFSLayerTypeInfo-error",`An error occurred while getting info about the feature type '${u}'`,{error:m.error||y.error});const {fields:F,errors:H}=m.value;q=m.value.geometryType||y.value.geometryType;w=y.value.swapXY;if(U.isNone(q))throw new D("wfs-layer:unknown-geometry-type",`The geometry type could not be determined for type '${u}`,{typeName:u,geometryType:q,fields:F,errors:H});return{...ea(F),geometryType:q,swapXY:w}});return P.apply(this,arguments)}
function ea(q){var u;const w=q.find(y=>"geometry"===y.type);let m=q.find(y=>"oid"===y.type);q=q.filter(y=>"geometry"!==y.type);m||(m=new n({name:"__esri_wfs_id__",type:"oid",alias:"__esri_wfs_id__"}),q.unshift(m));return{geometryField:null!=(u=null==w?void 0:w.name)?u:null,objectIdField:m.name,fields:q}}function ia(q,u){return fa.apply(this,arguments)}function fa(){fa=a._asyncToGenerator(function*(q,u,w={}){var m;let y,F=!1;const [H,Q]=yield Promise.all([ra(q.operations.GetFeature.url,u,q.operations.GetFeature.outputFormat,
{...w,count:1}),r(q.operations.GetFeature.url,{responseType:"text",query:ha(u,void 0,{...w,count:1}),signal:null==w?void 0:w.signal})]);if(q="FeatureCollection"===H.type&&(null==(m=H.features[0])?void 0:m.geometry)){y=ba.featureGeometryTypeKebabDictionary.fromJSON(S.getGeometryType(q.type));switch(q.type){case "Point":var T=q.coordinates;break;case "LineString":case "MultiPoint":T=q.coordinates[0];break;case "MultiLineString":case "Polygon":T=q.coordinates[0][0];break;case "MultiPolygon":T=q.coordinates[0][0][0]}if(q=
/<[^>]*pos[^>]*> *(-?\d+(?:\.\d+)?) (-?\d+(?:\.\d+)?)/.exec(Q.data))m=T[0].toFixed(3),T=T[1].toFixed(3),u=parseFloat(q[1]).toFixed(3),q=parseFloat(q[2]).toFixed(3),m===q&&T===u&&(F=!0)}return{geometryType:y,swapXY:F}});return fa.apply(this,arguments)}function ca(q,u,w){return xa.apply(this,arguments)}function xa(){xa=a._asyncToGenerator(function*(q,u,w){q=yield r(q,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"DescribeFeatureType",VERSION:"2.0.0",TYPENAME:u,...null==w?void 0:w.customParameters},
signal:null==w?void 0:w.signal});return na(u,q.data)});return xa.apply(this,arguments)}function na(q,u){const {name:w}=ma(q);u=Ba(u);oa(u);const m=A.find(da.iterateXML(u.firstElementChild,{element:y=>({name:y.getAttribute("name"),typeName:ma(y.getAttribute("type")).name})}),({name:y})=>y===w);if(U.isSome(m)){const y=A.find(da.iterateXML(u.firstElementChild,{complexType:F=>F}),F=>F.getAttribute("name")===m.typeName);if(U.isSome(y))return ta(y)}throw new D("wfs-layer:feature-type-not-found",`Type '${q}' not found in document`,
{document:(new XMLSerializer).serializeToString(u)});}function ta(q){var u,w;const m=[],y=[];let F;var H=da.iterateXML(q,{complexContent:{extension:{sequence:{element:Q=>Q}}}});for(const Q of H){H=Q.getAttribute("name");if(!H)continue;let T,la;Q.hasAttribute("type")?T=ma(Q.getAttribute("type")).name:da.visitXML(Q,{simpleType:{restriction:Ha=>{T=ma(Ha.getAttribute("base")).name;return{maxLength:ua=>{la=+ua.getAttribute("value")}}}}});if(!T)continue;const pa="true"===Q.getAttribute("nillable");let qa=
!1;switch(T.toLowerCase()){case "integer":case "nonpositiveinteger":case "negativeinteger":case "long":case "int":case "short":case "byte":case "nonnegativeinteger":case "unsignedlong":case "unsignedint":case "unsignedshort":case "unsignedbyte":case "positiveinteger":y.push(new n({name:H,alias:H,type:"integer",nullable:pa}));break;case "float":case "double":case "decimal":y.push(new n({name:H,alias:H,type:"double",nullable:pa}));break;case "boolean":case "string":case "gyearmonth":case "gyear":case "gmonthday":case "gday":case "gmonth":case "anyuri":case "qname":case "notation":case "normalizedstring":case "token":case "language":case "idrefs":case "entities":case "nmtoken":case "nmtokens":case "name":case "ncname":case "id":case "idref":case "entity":case "duration":case "time":y.push(new n({name:H,
alias:H,type:"string",nullable:pa,length:null!=(u=la)?u:255}));break;case "datetime":case "date":y.push(new n({name:H,alias:H,type:"date",nullable:pa,length:null!=(w=la)?w:36}));break;case "pointpropertytype":F="point";qa=!0;break;case "multipointpropertytype":F="multipoint";qa=!0;break;case "curvepropertytype":case "multicurvepropertytype":case "multilinestringpropertytype":F="polyline";qa=!0;break;case "surfacepropertytype":case "multisurfacepropertytype":case "multipolygonpropertytype":F="polygon";
qa=!0;break;case "geometrypropertytype":case "multigeometrypropertytype":qa=!0;m.push(new D("wfs-layer:unknown-geometry-type",`geometry type '${T}' is not supported`,{type:(new XMLSerializer).serializeToString(q)}));break;default:m.push(new D("wfs-layer:unknown-field-type",`Unknown field type '${T}'`,{type:(new XMLSerializer).serializeToString(q)}))}qa&&y.push(new n({name:H,alias:H,type:"geometry",nullable:pa}))}for(const Q of y)if("integer"===Q.type&&!Q.nullable&&sa.has(Q.name.toLowerCase())){Q.type=
"oid";break}return{geometryType:F,fields:y,errors:m}}function ra(q,u,w,m){return Ca.apply(this,arguments)}function Ca(){Ca=a._asyncToGenerator(function*(q,u,w,m){({data:q}=yield r(q,{responseType:"text",query:ha(u,w,m),signal:null==m?void 0:m.signal}));q=q.replace(/": +(-?\d+),(\d+)(,)?/g,'": $1.$2$3');try{var y;if(null!=m&&null!=(y=m.dateFields)&&y.length){const F=new Set(m.dateFields);return JSON.parse(q,(H,Q)=>F.has(H)?E.parseDate(Q):Q)}return JSON.parse(q)}catch(F){throw new D("wfs-layer:malformed-json",
"Error while parsing the\u00a0response",{response:q,error:F});}});return Ca.apply(this,arguments)}function ha(q,u,w){return{SERVICE:"WFS",REQUEST:"GetFeature",VERSION:"2.0.0",TYPENAMES:q,OUTPUTFORMAT:u,SRSNAME:"EPSG:4326",STARTINDEX:null==w?void 0:w.startIndex,COUNT:null==w?void 0:w.count,...null==w?void 0:w.customParameters}}function Da(){Da=a._asyncToGenerator(function*(q,u,w){q=yield r(q,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"GetFeature",VERSION:"2.0.0",TYPENAMES:u,RESULTTYPE:"hits",
...null==w?void 0:w.customParameters},signal:null==w?void 0:w.signal});q=Ba(q.data);oa(q);q=Number.parseFloat(q.firstElementChild.getAttribute("numberMatched"));return Number.isNaN(q)?0:q});return Da.apply(this,arguments)}function Ba(q){return(new DOMParser).parseFromString(q.trim(),"text/xml")}function ma(q){const [u,w]=q.split(":");return{prefix:w?u:"",name:null!=w?w:u}}function Ia(q){if((q=q.firstElementChild.getAttribute("version"))&&"2.0.0"!==q)throw new D("wfs-layer:unsupported-wfs-version",
`Unsupported WFS version ${q}. Supported version: ${"2.0.0"}`);}function oa(q){let u,w;da.visitXML(q.firstElementChild,{Exception:m=>{u=m.getAttribute("exceptionCode");return{ExceptionText:y=>{w=y.textContent}}}});if(u)throw new D(`wfs-layer:${u}`,w);}const N=new Set(["json","application/json","geojson","application/json; subtype\x3dgeojson"]),sa=new Set(["objectid","fid"]);G.WFS_OID_FIELD_NAME="__esri_wfs_id__";G.describeFeatureType=ca;G.findFeatureType=B;G.getCapabilities=function(q,u){return h.apply(this,
arguments)};G.getFeature=ra;G.getFeatureCount=function(q,u,w){return Da.apply(this,arguments)};G.getFeatureTypeInfo=C;G.getWFSLayerInfo=function(q,u,w){return x.apply(this,arguments)};G.parseDescribeFeatureTypeResponse=na;G.parseGetCapabilitiesResponse=f;G.prepareWFSLayerFields=ea;Object.defineProperty(G,"__esModule",{value:!0})})},"esri/core/interatorUtils":function(){define(["exports"],function(G){G.find=function(a,L){for(const r of a)if(null!=r&&L(r))return r};Object.defineProperty(G,"__esModule",
{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils".split(" "),function(G,a,L,r,
D,A,U,ka,M,R,Y,ba,S,E,da,n,l,k,h,f,g,p,t){function B(){return!!ya&&E.isLoaded()}function x(c){A.isNone(La)&&(La=Promise.all([E.load(),(new Promise(function(d,b){G(["../chunks/geometryEngineBase"],d,b)})).then(function(d){return d.geometryEngineBase}),new Promise(function(d,b){G(["./geometryAdapters/hydrated"],d,b)})]));return La.then(([,d,{hydratedAdapter:b}])=>{U.throwIfAborted(c);Ja=b;ya=d.default;ya._enableProjection(E.pe)})}function C(c,d,b,e,v=null){if(A.isNone(b)||A.isNone(e))return d;if(V(b,
e,v))return d.map(z=>A.unwrap(ea(z,b,e)));if(A.isNone(v)){const z=p.cacheKey(b,e);void 0!==Ma[z]?v=Ma[z]:(v=J(b,e,null),A.isNone(v)&&(v=new p),Ma[z]=v)}if(A.isNone(ya))throw new Ra;return ya._project(c,d,b,e,v)}function J(c,d,b=null){if(A.isNone(ya))throw new Ra;if(A.isNone(c)||A.isNone(d))return null;c=ya._getTransformation(Ja,c,d,b,null==b?void 0:b.spatialReference);return null!==c?p.fromGE(c):null}function V(c,d,b){return b?!1:t.equals(c,d)?!0:t.isValid(c)&&t.isValid(d)&&!!Sa(c,d,Ta)}function P(){P=
L._asyncToGenerator(function*(c,d,b,e){if(!B())if(Array.isArray(c))for(const {source:v,dest:z,geographicTransformation:I}of c){if(!V(v,z,I))return x(e)}else if(!V(c,d,b))return x(e)});return P.apply(this,arguments)}function ea(c,d,b){return c?"x"in c?ia(c,d,new da,b,0):"xmin"in c?na(c,d,new ba,b,0):"rings"in c?xa(c,d,new n,b,0):"paths"in c?ca(c,d,new l,b,0):"points"in c?fa(c,d,new S,b,0):null:null}function ia(c,d,b,e,v){O[0]=c.x;O[1]=c.y;const z=c.z;O[2]=void 0!==z?z:v;if(!ha(O,d,0,O,e,0,1))return null;
b.x=O[0];b.y=O[1];b.spatialReference=e;void 0===z?(b.z=void 0,b.hasZ=!1):(b.z=O[2],b.hasZ=!0);void 0===c.m?(b.m=void 0,b.hasM=!1):(b.m=c.m,b.hasM=!0);return b}function fa(c,d,b,e,v){const {points:z,hasZ:I,hasM:K}=c;c=[];const aa=z.length,Z=[];for(var X of z)Z.push(X[0],X[1],I?X[2]:v);if(!ha(Z,d,0,Z,e,0,aa))return null;for(d=0;d<aa;++d){v=3*d;X=Z[v];const ja=Z[v+1];I&&K?c.push([X,ja,Z[v+2],z[d][3]]):I?c.push([X,ja,Z[v+2]]):K?c.push([X,ja,z[d][2]]):c.push([X,ja])}b.points=c;b.spatialReference=e;b.hasZ=
I;b.hasM=K;return b}function ca(c,d,b,e,v){const {paths:z,hasZ:I,hasM:K}=c;c=[];if(!Da(z,I,K,d,c,e,v))return null;b.paths=c;b.spatialReference=e;b.hasZ=I;b.hasM=K;return b}function xa(c,d,b,e,v){const {rings:z,hasZ:I,hasM:K}=c;c=[];if(!Da(z,I,K,d,c,e,v))return null;b.rings=c;b.spatialReference=e;b.hasZ=I;b.hasM=K;return b}function na(c,d,b,e,v){const {xmin:z,ymin:I,xmax:K,ymax:aa,hasZ:Z,hasM:X}=c;if(!ta(z,I,Z?c.zmin:v,d,O,e))return null;b.xmin=O[0];b.ymin=O[1];Z&&(b.zmin=O[2]);if(!ta(K,aa,Z?c.zmax:
v,d,O,e))return null;b.xmax=O[0];b.ymax=O[1];Z&&(b.zmax=O[2]);X&&(b.mmin=c.mmin,b.mmax=c.mmax);b.spatialReference=e;return b}function ta(c,d,b,e,v,z){W[0]=c;W[1]=d;W[2]=b;return ha(W,e,0,v,z,0,1)}function ra(c,d,b,e){if(A.isNone(d)||A.isNone(e)||2>c.length)return!1;2===c.length&&(W[0]=c[0],W[1]=c[1],W[2]=0,c=W);return ha(c,d,0,b,e,0,1)}function Ca(c,d,b){if(A.isNone(d))return!1;d=oa(d,Na);d=za[d][6];if(A.isNone(d))return!1;d(c,0,W,0);b!==W&&(b[0]=W[0],b[1]=W[1],2<b.length&&(b[2]=W[2]));return!0}function ha(c,
d,b,e,v,z,I=1){d=Sa(d,v,Ta);if(A.isNone(d))return!1;if(d===N){if(c===e&&b===z)return!0;I=b+3*I;for(let K=b,aa=z;K<I;K++,aa++)e[aa]=c[K];return!0}I=b+3*I;for(let K=b,aa=z;K<I;K+=3,aa+=3)d(c,K,e,aa);return!0}function Da(c,d,b,e,v,z,I=0){const K=[];for(const aa of c)for(const Z of aa)K.push(Z[0],Z[1],d?Z[2]:I);if(!ha(K,e,0,K,z,0,K.length/3))return!1;e=0;v.length=0;for(const aa of c){c=[];for(const Z of aa)d&&b?c.push([K[e++],K[e++],K[e++],Z[3]]):d?c.push([K[e++],K[e++],K[e++]]):(b?c.push([K[e++],K[e++],
Z[2]]):c.push([K[e++],K[e++]]),e++);v.push(c)}return!0}function Ba(c,d,b,e){c=Math.abs(va*c)+Math.asin(b/(e+d));return c>=Math.PI/2?Number.MAX_VALUE:b/Math.cos(c)}function ma(c,d,b){const e=Math.sin(c);c=Math.cos(c);const v=Math.sin(d);d=Math.cos(d);b[0]=-e;b[4]=-v*c;b[8]=d*c;b[12]=0;b[1]=c;b[5]=-v*e;b[9]=d*e;b[13]=0;b[2]=0;b[6]=d;b[10]=v;b[14]=0;b[3]=0;b[7]=0;b[11]=0;b[15]=1;return b}function Ia(c,d,b){ma(c,d,b);M.transpose(b,b);return b}function oa(c,d){if(d.spatialReference===c)return d.spatialReferenceId;
d.spatialReference=c;"metersPerUnit"in d&&(d.metersPerUnit=ka.getMetersPerUnitForSR(c,1));return c.wkt===k.SphericalECEFSpatialReference.wkt?d.spatialReferenceId=1:t.isWGS84(c)?d.spatialReferenceId=2:t.isWebMercator(c)?d.spatialReferenceId=3:t.isPlateCarree(c)?d.spatialReferenceId=12:c.wkt===k.WGS84ECEFSpatialReference.wkt?d.spatialReferenceId=4:4490===c.wkid?d.spatialReferenceId=5:c.wkt===k.SphericalPCPFMars.wkt?d.spatialReferenceId=7:c.wkt===k.SphericalPCPFMoon.wkt?d.spatialReferenceId=9:t.isMars(c)?
d.spatialReferenceId=8:t.isMoon(c)?d.spatialReferenceId=10:d.spatialReferenceId=0}function N(c,d,b,e){c!==b&&(b[e++]=c[d++],b[e++]=c[d++],b[e]=c[d])}function sa(c,d,b,e){b[e++]=Ka*(c[d++]/f.earth.radius);b[e++]=Ka*(Math.PI/2-2*Math.atan(Math.exp(-c[d++]/f.earth.radius)));b[e]=c[d]}function q(c,d,b,e){sa(c,d,b,e);la(b,e,b,e)}function u(c,d,b,e){sa(c,d,b,e);Ea(b,e,b,e)}function w(c,d,b,e,v){var z=.4999999*Math.PI;z=D.clamp(va*c[d+1],-z,z);z=Math.sin(z);b[e++]=va*c[d]*v.radius;b[e++]=v.halfSemiMajorAxis*
Math.log((1+z)/(1-z));b[e]=c[d+2]}function m(c,d,b,e){w(c,d,b,e,f.earth)}function y(c,d,b,e){b[e]=c[d]*Va;b[e+1]=c[d+1]*Va;b[e+2]=c[d+2]}function F(c,d,b,e){b[e]=c[d]*Oa;b[e+1]=c[d+1]*Oa;b[e+2]=c[d+2]}function H(c,d,b,e,v){v+=c[d+2];const z=va*c[d+1];c=va*c[d];d=Math.cos(z);b[e++]=Math.cos(c)*d*v;b[e++]=Math.sin(c)*d*v;b[e]=Math.sin(z)*v}function Q(c,d,b,e){H(c,d,b,e,f.moon.radius)}function T(c,d,b,e){H(c,d,b,e,f.mars.radius)}function la(c,d,b,e){H(c,d,b,e,f.earth.radius)}function pa(c,d,b,e,v){var z=
c[d];const I=c[d+1];d=c[d+2];c=Math.sqrt(z*z+I*I+d*d);d=D.asinClamped(d/(0===c?1:c));z=Math.atan2(I,z);b[e++]=Ka*z;b[e++]=Ka*d;b[e]=c-v}function qa(c,d,b,e){pa(c,d,b,e,f.moon.radius)}function Ha(c,d,b,e){pa(c,d,b,e,f.mars.radius)}function ua(c,d,b,e){pa(c,d,b,e,f.earth.radius)}function Pa(c,d,b,e){ua(c,d,b,e);m(b,e,b,e)}function Wa(c,d,b,e){ua(c,d,b,e);Ea(b,e,b,e)}function Ea(c,d,b,e){{var v=f.earth;const I=va*c[d];var z=va*c[d+1];c=c[d+2];d=Math.sin(z);z=Math.cos(z);const K=v.radius/Math.sqrt(1-
v.eccentricitySquared*d*d);b[e++]=(K+c)*z*Math.cos(I);b[e++]=(K+c)*z*Math.sin(I);b[e++]=(K*(1-v.eccentricitySquared)+c)*d}}function Fa(c,d,b,e){var v=g.earthEllipsoidConstants,z=c[d],I=c[d+1];c=c[d+2];let K;d=Math.abs(c);var aa=z*z+I*I;var Z=Math.sqrt(aa);var X=aa+c*c;var ja=Math.sqrt(X);z=Math.atan2(I,z);var Aa=c*c/X;X=aa/X;I=v.a2/ja;aa=v.a3-v.a4/ja;.3<X?(Aa=d/ja*(1+X*(v.a1+I+Aa*aa)/ja),ja=Math.asin(Aa),I=Aa*Aa,X=Math.sqrt(1-I)):(X=Z/ja*(1-Aa*(v.a5-I-X*aa)/ja),ja=Math.acos(X),I=1-X*X,Aa=Math.sqrt(I));
K=1-f.earth.eccentricitySquared*I;I=f.earth.radius/Math.sqrt(K);v=v.a6*I;I=Z-I*X;aa=d-v*Aa;d=X*I+Aa*aa;Z=X*aa-Aa*I;v=Z/(v/K+d);ja+=v;0>c&&(ja=-ja);b[e++]=Ka*z;b[e++]=Ka*ja;b[e]=d+Z*v/2}function Xa(c,d,b,e){Fa(c,d,b,e);la(b,e,b,e)}function Ya(c,d,b,e){Fa(c,d,b,e);m(b,e,b,e)}function Sa(c,d,b=Ua()){return A.isNone(c)||A.isNone(d)?null:Za(c,d,b).projector}function Za(c,d,b){if(A.isNone(c)||A.isNone(d)||b.source.spatialReference===c&&b.dest.spatialReference===d)return b;const e=oa(c,b.source),v=oa(d,
b.dest);0===e&&0===v?t.equals(c,d)?b.projector=N:b.projector=null:b.projector=za[e][v];return b}function Ua(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:N}}let ya=null,Ja=null,La=null,Ma={},Ra=function(c){function d(){return c.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}L._inheritsLoose(d,c);return d}(r);const Va=f.earth.radius*Math.PI/
180,Oa=180/(f.earth.radius*Math.PI),za={[2]:{[5]:null,[8]:null,[10]:null,[11]:N,[6]:N,[1]:la,[7]:null,[9]:null,[0]:null,[3]:m,[12]:y,[2]:N,[4]:Ea},[5]:{[5]:N,[8]:null,[10]:null,[11]:N,[6]:N,[1]:la,[7]:null,[9]:null,[0]:null,[3]:null,[12]:y,[2]:null,[4]:Ea},[8]:{[5]:null,[8]:N,[10]:null,[11]:N,[6]:null,[1]:null,[7]:T,[9]:null,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:N,[11]:N,[6]:null,[1]:null,[7]:null,[9]:Q,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[3]:{[5]:null,
[8]:null,[10]:null,[11]:sa,[6]:sa,[1]:q,[7]:null,[9]:null,[0]:null,[3]:N,[12]:function(c,d,b,e){sa(c,d,b,e);y(b,e,b,e)},[2]:sa,[4]:u},[4]:{[5]:Fa,[8]:null,[10]:null,[11]:Fa,[6]:Fa,[1]:Xa,[7]:null,[9]:null,[0]:null,[3]:Ya,[12]:function(c,d,b,e){Fa(c,d,b,e);y(b,e,b,e)},[2]:Fa,[4]:N},[1]:{[5]:ua,[8]:null,[10]:null,[11]:ua,[6]:ua,[1]:N,[7]:null,[9]:null,[0]:null,[3]:Pa,[12]:function(c,d,b,e){ua(c,d,b,e);y(b,e,b,e)},[2]:ua,[4]:Wa},[7]:{[5]:null,[8]:Ha,[10]:null,[11]:Ha,[6]:null,[1]:null,[7]:N,[9]:null,
[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[9]:{[5]:null,[8]:null,[10]:qa,[11]:qa,[6]:null,[1]:null,[7]:null,[9]:N,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,[11]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:N,[3]:null,[12]:null,[2]:null,[4]:null},[11]:{[5]:N,[8]:N,[10]:N,[11]:N,[6]:N,[1]:la,[7]:T,[9]:Q,[0]:null,[3]:m,[12]:y,[2]:N,[4]:Ea},[6]:{[5]:null,[8]:null,[10]:null,[11]:N,[6]:N,[1]:la,[7]:null,[9]:null,[0]:null,[3]:null,[12]:y,[2]:N,[4]:Ea},[12]:{[5]:F,
[8]:null,[10]:null,[11]:F,[6]:F,[1]:function(c,d,b,e){F(c,d,b,e);la(b,e,b,e)},[7]:null,[9]:null,[0]:null,[3]:function(c,d,b,e){F(c,d,b,e);m(b,e,b,e)},[12]:N,[2]:F,[4]:function(c,d,b,e){F(c,d,b,e);Ea(b,e,b,e)}}},Na={spatialReference:null,spatialReferenceId:0},$a={spatialReference:null,spatialReferenceId:0},Ta=Ua(),ab=Ua(),va=D.deg2rad(1),Ka=D.rad2deg(1),W=Y.create(),wa=Y.create(),Ga=Y.create(),O=Y.create(),Qa=Y.create();a.canProjectToWGS84ComparableLonLat=function(c){if(A.isNone(c))return!1;c=oa(c,
Na);return!!za[c][6]};a.canProjectWithoutEngine=V;a.computeENUToSphericalPCPFLocalRotation=ma;a.computeSphericalPCPFToENULocalRotation=Ia;a.computeTranslationToOriginAndRotation=function(c,d,b,e){if(A.isNone(c)||A.isNone(e))return!1;var v=oa(c,Na),z=oa(e,$a);if(v===z&&1!==z&&7!==z&&9!==z&&(0!==v||t.equals(c,e)))return M.identity(b),M.translate(b,b,d),!0;if(1===z||7===z||9===z){v=za[v][11];z=za[11][z];if(A.isNone(v)||A.isNone(z))return!1;v(d,0,wa,0);z(wa,0,Ga,0);ma(va*wa[0],va*wa[1],b);b[12]=Ga[0];
b[13]=Ga[1];b[14]=Ga[2];return!0}if(!(3!==z&&12!==z||2!==v&&1!==v)){c=za[v][11];z=za[11][z];if(A.isNone(c)||A.isNone(z))return!1;c(d,0,wa,0);z(wa,0,Ga,0);2===v?M.identity(b):Ia(va*wa[0],va*wa[1],b);b[12]=Ga[0];b[13]=Ga[1];b[14]=Ga[2];return!0}return!1};a.getProjectorName=function(c,d){switch(Sa(c,d,Ta)){case N:return"copy3";case la:return"wgs84ToSphericalECEF";case m:return"wgs84ToWebMercator";case y:return"wgs84ToPlateCarree";case Ea:return"wgs84ToWGS84ECEF";case sa:return"webMercatorToWGS84";case q:return"webMercatorToSphericalECEF";
case u:return"webMercatorToWGS84ECEF";case Fa:return"wgs84ECEFToWGS84";case Xa:return"wgs84ECEFToSphericalECEF";case Ya:return"wgs84ECEFToWebMercator";case ua:return"sphericalECEFToWGS84";case Pa:return"sphericalECEFToWebMercator";case Ha:return"sphericalMarsPCPFToMars2000";case qa:return"sphericalMoonPCPFToMoon2000";case Wa:return"sphericalECEFToWGS84ECEF";case T:return"mars2000ToSphericalPCPF";case Q:return"moon2000ToSphericalPCPF";default:return null}};a.getTransformation=J;a.getTransformations=
function(c,d,b=null){if(A.isNone(ya))throw new Ra;c=ya._getTransformationBySuitability(Ja,c,d,b,null==b?void 0:b.spatialReference);if(null!==c){d=[];for(const e of c)d.push(p.fromGE(e));return d}return[]};a.initializeProjection=function(c,d,b,e){return P.apply(this,arguments)};a.isLoaded=B;a.isSupported=function(){return!0};a.load=x;a.localLinearScaleFactors=function(c,d,b,e){if(A.isNone(d)||A.isNone(e))return!1;const v=oa(d,Na);var z=oa(e,$a);if(v===z&&0!==v||t.equals(d,e))return b[0]=1,b[1]=1,b[2]=
1,!0;if(1===v){d=R.length(c);c=d/Math.sqrt(c[0]*c[0]+c[1]*c[1]);d/=f.earth.radius;if(3===z)return b[0]=c*d,b[1]=c*d,b[2]=1,!0;if(2===z||5===z)return z=180/(f.earth.radius*Math.PI),b[0]=z*c*d,b[1]=z*d,b[2]=1,!0}else if(12===v&&(2===z||5===z))return b[0]=Oa,b[1]=Oa,b[2]=1,!0;return!1};a.lonLatToSphericalPCPF=function(c,d,b,e,v=0){e+=v;v=Math.cos(b);c[0]=Math.cos(d)*v*e;c[1]=Math.sin(d)*v*e;c[2]=Math.sin(b)*e};a.lonLatToWebMercatorComparable=w;a.project=function(c,d,b=null){return Array.isArray(c)?0===
c.length?[]:C(Ja,c,c[0].spatialReference,d,b):C(Ja,[c],c.spatialReference,d,b)[0]};a.projectBoundingRect=function(c,d,b,e){if(null==c)return!1;if(t.equals(d,e))return h.copy(b,c),!0;W[0]=c[0];W[1]=c[1];W[2]=0;if(!ha(W,d,0,W,e,0,1))return!1;b[0]=W[0];b[1]=W[1];W[0]=c[2];W[1]=c[3];W[2]=0;if(!ha(W,d,0,W,e,0,1))return!1;b[2]=W[0];b[3]=W[1];return!0};a.projectBoundingSphere=function(c,d,b,e){if(A.isNone(d)||A.isNone(e))return!1;d=Za(d,e,ab);if(d.projector===N)return b[0]=c[0],b[1]=c[1],b[2]=c[2],b[3]=
c[3],!0;if(A.isNone(d.projector))return!1;const {source:v,dest:z}=d;if(3===z.spatialReferenceId){d=za[v.spatialReferenceId][2];if(A.isNone(d))return!1;d(c,0,wa,0);m(wa,0,b,0);b[3]=Ba(wa[1],c[2],c[3],f.earth.radius);return!0}if(2!==v.spatialReferenceId&&5!==v.spatialReferenceId||12!==z.spatialReferenceId)d.projector(c,0,b,0),b[3]=c[3]*v.metersPerUnit/z.metersPerUnit;else{e=za[1][12];let I=c[3];A.isSome(za[v.spatialReferenceId][1])&&A.isSome(e)&&(I=Ba(c[1],c[2],c[3],f.earth.radius));d.projector(c,0,
b,0);b[3]=I}return!0};a.projectBuffer=ha;a.projectDirection=function(c,d,b,e,v){R.copy(O,c);R.add(Qa,c,d);ra(O,b,O,v);ra(Qa,b,Qa,v);R.subtract(e,Qa,O);R.normalize(e,e)};a.projectExtent=function(c,d,b=d.spatialReference,e=0){return A.isSome(b)&&A.isSome(na(c,c.spatialReference,d,b,e))};a.projectMany=C;a.projectMultipoint=function(c,d,b=d.spatialReference,e=0){return A.isNone(b)?!1:A.isSome(fa(c,c.spatialReference,d,b,e))};a.projectPoint=function(c,d,b=d.spatialReference,e=0){return A.isNone(b)?!1:
A.isSome(ia(c,c.spatialReference,d,b,e))};a.projectPointToVector=function(c,d,b,e=0){O[0]=c.x;O[1]=c.y;const v=c.z;O[2]=void 0!==v?v:e;return ha(O,c.spatialReference,0,d,b,0,1)};a.projectPointToWGS84ComparableLonLat=function(c,d){O[0]=c.x;O[1]=c.y;const b=c.z;O[2]=void 0!==b?b:0;return Ca(O,c.spatialReference,d)};a.projectPolygon=function(c,d,b=d.spatialReference,e=0){return A.isSome(b)&&A.isSome(xa(c,c.spatialReference,d,b,e))};a.projectPolyline=function(c,d,b=d.spatialReference,e=0){return A.isSome(b)&&
A.isSome(ca(c,c.spatialReference,d,b,e))};a.projectVectorToDehydratedPoint=function(c,d,b){return ha(c,d,0,O,b.spatialReference,0,1)?(b.x=O[0],b.y=O[1],b.z=O[2],b):null};a.projectVectorToPoint=function(c,d,b){if(A.isNone(d)||A.isNone(b))return null;const e=new da({spatialReference:b});return ha(c,d,0,O,b,0,1)?(e.x=O[0],e.y=O[1],e.z=O[2],e):null};a.projectVectorToVector=ra;a.projectVectorToWGS84ComparableLonLat=function(c,d,b){return Ca(c,d,b)};a.projectWithoutEngine=ea;a.projectXYZToVector=ta;a.sphericalPCPFtoLonLatElevation=
pa;a.unload=function(){La=Ja=ya=null;Ma={}};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(G,a,L,r,D){function A(){return!!a._pe}function U(){return!!D("esri-wasm")}function ka(){return E?E:E=(new Promise(function(n,l){G(["./pe-wasm"],n,l)})).then(function(n){return n.peWasm}).then(({default:n})=>n({locateFile:l=>r.getAssetUrl(`esri/geometry/support/${l}`)})).then(n=>{M(n)})}
function M(n){function l(f,g,p){f[g]=p(f[g])}a._pe=n;a.PeDefs.init();a.PeGTlistExtended.init();a.PeNotationMgrs.init();a.PeNotationUtm.init();a.PePCSInfo.init();a.PeGCSExtent=function(f){function g(){return f.apply(this,arguments)||this}L._inheritsLoose(g,f);g.prototype.destroy=function(){a._pe.destroy(this)};return g}(a._pe.PeGCSExtent);n=[a._pe.PeDatum,a._pe.PeGeogcs,a._pe.PeGeogtran,a._pe.PeObject,a._pe.PeParameter,a._pe.PePrimem,a._pe.PeProjcs,a._pe.PeSpheroid,a._pe.PeUnit];for(var k of n)l(k.prototype,
"getName",f=>function(){return f.call(this,Array(a.PeDefs.PE_NAME_MAX))});for(const f of[a._pe.PeGeogtran,a._pe.PeProjcs])l(f.prototype,"getParameters",g=>function(){const p=Array(a.PeDefs.PE_PARM_MAX);let t=g.call(this);for(let B=0;B<p.length;B++){const x=a._pe.getValue(t,"*");p[B]=x?a._pe.wrapPointer(x,a._pe.PeParameter):null;t+=Int32Array.BYTES_PER_ELEMENT}return p});l(a._pe.PeHorizon.prototype,"getCoord",f=>function(){const g=this.getSize();if(!g)return null;const p=[],t=f.call(this);S(p,g,t);
return p});l(a._pe.PeGTlistExtendedEntry.prototype,"getEntries",f=>{const g=a._pe._pe_getPeGTlistExtendedGTsSize();return function(){let p=null;var t=f.call(this);if(!a._pe.compare(t,a._pe.NULL)){p=[t];const B=this.getSteps();if(1<B){t=a._pe.getPointer(t);for(let x=1;x<B;x++)p.push(a._pe.wrapPointer(t+g*x,a._pe.PeGTlistExtendedGTs))}}return p}});const h=a._pe._pe_getPeHorizonSize();k=f=>function(){let g=this._cache;g||(this._cache=g=new Map);if(g.has(f))return g.get(f);let p=null;var t=f.call(this);
if(!a._pe.compare(t,a._pe.NULL)){p=[t];const B=t.getNump();if(1<B){t=a._pe.getPointer(t);for(let x=1;x<B;x++)p.push(a._pe.wrapPointer(t+h*x,a._pe.PeHorizon))}}g.set(f,p);return p};l(a._pe.PeProjcs.prototype,"horizonGcsGenerate",k);l(a._pe.PeProjcs.prototype,"horizonPcsGenerate",k);a._pe.PeObject.prototype.toString=function(f=a.PeDefs.PE_STR_OPTS_NONE){a._pe.ensureCache.prepare();const g=a._pe.getPointer(this),p=a._pe.ensureInt8(Array(a.PeDefs.PE_BUFFER_MAX));return a._pe.UTF8ToString(a._pe._pe_object_to_string_ext(g,
f,p))}}function R(n){if(n){var l=a._pe.getClass(n);l&&(l=a._pe.getCache(l))&&(n=a._pe.getPointer(n))&&delete l[n]}}function Y(n,l){const k=[];l=Array(l);for(let h=0;h<n;h++)k.push(a._pe.ensureInt8(l));return k}function ba(n){let l;Array.isArray(n[0])?(l=[],n.forEach(k=>{l.push(k[0],k[1])})):l=n;return l}function S(n,l,k,h=!1){if(h)for(h=0;h<2*l;h++)n[h]=a._pe.getValue(k+h*Float64Array.BYTES_PER_ELEMENT,"double");else{h=0===n.length;for(let f=0;f<l;f++)h&&(n[f]=Array(2)),n[f][0]=a._pe.getValue(k,"double"),
n[f][1]=a._pe.getValue(k+Float64Array.BYTES_PER_ELEMENT,"double"),k+=2*Float64Array.BYTES_PER_ELEMENT}}let E;a._pe=null;a.PeCSTransformations=void 0;(function(n){function l(f,g,p){a._pe.ensureCache.prepare();var t=ba(p);const B=p===t;t=a._pe.ensureFloat64(t);(f=a._pe._pe_geog_to_proj(a._pe.getPointer(f),g,t))&&S(p,g,t,B);return f}function k(f,g,p){return h(f,g,p,0)}function h(f,g,p,t){a._pe.ensureCache.prepare();var B=ba(p);const x=p===B;B=a._pe.ensureFloat64(B);(f=a._pe._pe_proj_to_geog_center(a._pe.getPointer(f),
g,B,t))&&S(p,g,B,x);return f}n.geogToProj=l;n.projGeog=function(f,g,p,t){switch(t){case a.PeDefs.PE_TRANSFORM_P_TO_G:return k(f,g,p);case a.PeDefs.PE_TRANSFORM_G_TO_P:return l(f,g,p)}return 0};n.projToGeog=k;n.projToGeogCenter=h})(a.PeCSTransformations||(a.PeCSTransformations={}));a.PeDefs=void 0;(function(n){n.init=function(){n.PE_BUFFER_MAX=a._pe.PeDefs.prototype.PE_BUFFER_MAX;n.PE_NAME_MAX=a._pe.PeDefs.prototype.PE_NAME_MAX;n.PE_MGRS_MAX=a._pe.PeDefs.prototype.PE_MGRS_MAX;n.PE_USNG_MAX=a._pe.PeDefs.prototype.PE_USNG_MAX;
n.PE_DD_MAX=a._pe.PeDefs.prototype.PE_DD_MAX;n.PE_DDM_MAX=a._pe.PeDefs.prototype.PE_DDM_MAX;n.PE_DMS_MAX=a._pe.PeDefs.prototype.PE_DMS_MAX;n.PE_UTM_MAX=a._pe.PeDefs.prototype.PE_UTM_MAX;n.PE_PARM_MAX=a._pe.PeDefs.prototype.PE_PARM_MAX;n.PE_TYPE_NONE=a._pe.PeDefs.prototype.PE_TYPE_NONE;n.PE_TYPE_GEOGCS=a._pe.PeDefs.prototype.PE_TYPE_GEOGCS;n.PE_TYPE_PROJCS=a._pe.PeDefs.prototype.PE_TYPE_PROJCS;n.PE_TYPE_GEOGTRAN=a._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;n.PE_TYPE_COORDSYS=a._pe.PeDefs.prototype.PE_TYPE_COORDSYS;
n.PE_TYPE_UNIT=a._pe.PeDefs.prototype.PE_TYPE_UNIT;n.PE_TYPE_LINUNIT=a._pe.PeDefs.prototype.PE_TYPE_LINUNIT;n.PE_STR_OPTS_NONE=a._pe.PeDefs.prototype.PE_STR_OPTS_NONE;n.PE_STR_AUTH_NONE=a._pe.PeDefs.prototype.PE_STR_AUTH_NONE;n.PE_STR_AUTH_TOP=a._pe.PeDefs.prototype.PE_STR_AUTH_TOP;n.PE_STR_NAME_CANON=a._pe.PeDefs.prototype.PE_STR_NAME_CANON;n.PE_PARM_X0=a._pe.PeDefs.prototype.PE_PARM_X0;n.PE_PARM_ND=a._pe.PeDefs.prototype.PE_PARM_ND;n.PE_TRANSFORM_1_TO_2=a._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;
n.PE_TRANSFORM_2_TO_1=a._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;n.PE_TRANSFORM_P_TO_G=a._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;n.PE_TRANSFORM_G_TO_P=a._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;n.PE_HORIZON_RECT=a._pe.PeDefs.prototype.PE_HORIZON_RECT;n.PE_HORIZON_POLY=a._pe.PeDefs.prototype.PE_HORIZON_POLY;n.PE_HORIZON_LINE=a._pe.PeDefs.prototype.PE_HORIZON_LINE;n.PE_HORIZON_DELTA=a._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(a.PeDefs||(a.PeDefs={}));a.PeFactory=void 0;(function(n){function l(g,p){let t=
null,B=k[g];B||(B={},k[g]=B);B.hasOwnProperty(String(p))?t=B[p]:(g=a._pe.PeFactory.prototype.factoryByType(g,p),a._pe.compare(g,a._pe.NULL)||(t=g,B[p]=t));return t=f(t)}const k={},h={},f=g=>{if(g){const p=g.getType();switch(p){case a.PeDefs.PE_TYPE_GEOGCS:g=a._pe.castObject(g,a._pe.PeGeogcs);break;case a.PeDefs.PE_TYPE_PROJCS:g=a._pe.castObject(g,a._pe.PeProjcs);break;case a.PeDefs.PE_TYPE_GEOGTRAN:g=a._pe.castObject(g,a._pe.PeGeogtran);break;default:p&a.PeDefs.PE_TYPE_UNIT&&(g=a._pe.castObject(g,
a._pe.PeUnit))}}return g};n.initialize=function(){a._pe.PeFactory.prototype.initialize(null)};n.coordsys=function(g){return l(a.PeDefs.PE_TYPE_COORDSYS,g)};n.factoryByType=l;n.fromString=function(g,p){let t=null,B=h[g];B||(B={},h[g]=B);B.hasOwnProperty(p)?t=B[p]:(g=a._pe.PeFactory.prototype.fromString(g,p),a._pe.compare(g,a._pe.NULL)||(t=g,B[p]=t));return t=f(t)};n.geogcs=function(g){return l(a.PeDefs.PE_TYPE_GEOGCS,g)};n.geogtran=function(g){return l(a.PeDefs.PE_TYPE_GEOGTRAN,g)};n.getCode=function(g){return a._pe.PeFactory.prototype.getCode(g)};
n.projcs=function(g){return l(a.PeDefs.PE_TYPE_PROJCS,g)};n.unit=function(g){return l(a.PeDefs.PE_TYPE_UNIT,g)}})(a.PeFactory||(a.PeFactory={}));a.PeGCSExtent=null;a.PeGTlistExtended=void 0;(function(n){let l;n.init=function(){n.PE_GTLIST_OPTS_COMMON=a._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;l=a._pe._pe_getPeGTlistExtendedEntrySize()};n.getGTlist=function(k,h,f,g,p,t){let B=null;const x=new a._pe.PeInteger(t);try{const C=a._pe.PeGTlistExtended.prototype.getGTlist(k,h,f,g,p,x);if(t=x.val)if(B=
[C],1<t){const J=a._pe.getPointer(C);for(k=1;k<t;k++)B.push(a._pe.wrapPointer(J+l*k,a._pe.PeGTlistExtendedEntry))}}finally{a._pe.destroy(x)}return B}})(a.PeGTlistExtended||(a.PeGTlistExtended={}));a.PeGTlistExtendedEntry=void 0;(function(n){n.destroy=function(l){if(l&&l.length){for(const k of l)R(k),k.getEntries().forEach(h=>{R(h);h=h.getGeogtran();R(h);h.getParameters().forEach(R);[h.getGeogcs1(),h.getGeogcs2()].forEach(f=>{R(f);const g=f.getDatum();R(g);R(g.getSpheroid());R(f.getPrimem());R(f.getUnit())})});
a._pe.PeGTlistExtendedEntry.prototype.Delete(l[0])}}})(a.PeGTlistExtendedEntry||(a.PeGTlistExtendedEntry={}));a.PeGTTransformations=void 0;(function(n){n.geogToGeog=function(l,k,h,f,g){a._pe.ensureCache.prepare();var p=ba(h);const t=h===p;p=a._pe.ensureFloat64(p);let B=0;f&&(B=a._pe.ensureFloat64(f));(l=a._pe._pe_geog_to_geog(a._pe.getPointer(l),k,p,B,g))&&S(h,k,p,t);return l}})(a.PeGTTransformations||(a.PeGTTransformations={}));a.PeNotationDms=void 0;(function(n){const l=(h,f,g,p,t,B)=>{a._pe.ensureCache.prepare();
switch(h){case "dd":var x=a._pe._pe_geog_to_dd;var C=a.PeDefs.PE_DD_MAX;break;case "ddm":x=a._pe._pe_geog_to_ddm;C=a.PeDefs.PE_DDM_MAX;break;case "dms":x=a._pe._pe_geog_to_dms,C=a.PeDefs.PE_DMS_MAX}h=0;f&&(h=a._pe.getPointer(f));f=ba(p);f=a._pe.ensureFloat64(f);C=Y(g,C);p=a._pe.ensureInt32(C);if(t=x(h,g,f,t,p))for(x=0;x<g;x++)B[x]=a._pe.UTF8ToString(C[x]);return t},k=(h,f,g,p,t)=>{a._pe.ensureCache.prepare();switch(h){case "dd":var B=a._pe._pe_dd_to_geog;break;case "ddm":B=a._pe._pe_ddm_to_geog;break;
case "dms":B=a._pe._pe_dms_to_geog}h=0;f&&(h=a._pe.getPointer(f));f=p.map(x=>a._pe.ensureString(x));p=a._pe.ensureInt32(f);f=a._pe.ensureFloat64(Array(2*g));(B=B(h,g,p,f))&&S(t,g,f);return B};n.geog_to_dms=function(h,f,g,p,t){return l("dms",h,f,g,p,t)};n.dms_to_geog=function(h,f,g,p){return k("dms",h,f,g,p)};n.geog_to_ddm=function(h,f,g,p,t){return l("ddm",h,f,g,p,t)};n.ddm_to_geog=function(h,f,g,p){return k("ddm",h,f,g,p)};n.geog_to_dd=function(h,f,g,p,t){return l("dd",h,f,g,p,t)};n.dd_to_geog=function(h,
f,g,p){return k("dd",h,f,g,p)}})(a.PeNotationDms||(a.PeNotationDms={}));a.PeNotationMgrs=void 0;(function(n){n.init=function(){n.PE_MGRS_STYLE_NEW=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;n.PE_MGRS_STYLE_OLD=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;n.PE_MGRS_STYLE_AUTO=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;n.PE_MGRS_180_ZONE_1_PLUS=a._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;n.PE_MGRS_ADD_SPACES=a._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};n.geog_to_mgrs_extended=
function(l,k,h,f,g,p,t){a._pe.ensureCache.prepare();let B=0;l&&(B=a._pe.getPointer(l));l=ba(h);h=a._pe.ensureFloat64(l);l=Y(k,a.PeDefs.PE_MGRS_MAX);const x=a._pe.ensureInt32(l);if(f=a._pe._pe_geog_to_mgrs_extended(B,k,h,f,g,p,x))for(g=0;g<k;g++)t[g]=a._pe.UTF8ToString(l[g]);return f};n.mgrs_to_geog_extended=function(l,k,h,f,g){a._pe.ensureCache.prepare();let p=0;l&&(p=a._pe.getPointer(l));l=h.map(t=>a._pe.ensureString(t));h=a._pe.ensureInt32(l);l=a._pe.ensureFloat64(Array(2*k));(f=a._pe._pe_mgrs_to_geog_extended(p,
k,h,f,l))&&S(g,k,l);return f}})(a.PeNotationMgrs||(a.PeNotationMgrs={}));a.PeNotationUsng=void 0;(function(n){n.geog_to_usng=function(l,k,h,f,g,p,t){a._pe.ensureCache.prepare();let B=0;l&&(B=a._pe.getPointer(l));l=ba(h);h=a._pe.ensureFloat64(l);l=Y(k,a.PeDefs.PE_MGRS_MAX);const x=a._pe.ensureInt32(l);if(f=a._pe._pe_geog_to_usng(B,k,h,f,g,p,x))for(g=0;g<k;g++)t[g]=a._pe.UTF8ToString(l[g]);return f};n.usng_to_geog=function(l,k,h,f){a._pe.ensureCache.prepare();var g=0;l&&(g=a._pe.getPointer(l));l=h.map(p=>
a._pe.ensureString(p));h=a._pe.ensureInt32(l);l=a._pe.ensureFloat64(Array(2*k));(g=a._pe._pe_usng_to_geog(g,k,h,l))&&S(f,k,l);return g}})(a.PeNotationUsng||(a.PeNotationUsng={}));a.PeNotationUtm=void 0;(function(n){n.init=function(){n.PE_UTM_OPTS_NONE=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;n.PE_UTM_OPTS_ADD_SPACES=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;n.PE_UTM_OPTS_NS=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};n.geog_to_utm=function(l,k,h,f,g){a._pe.ensureCache.prepare();
var p=0;l&&(p=a._pe.getPointer(l));l=ba(h);h=a._pe.ensureFloat64(l);l=Y(k,a.PeDefs.PE_UTM_MAX);const t=a._pe.ensureInt32(l);if(f=a._pe._pe_geog_to_utm(p,k,h,f,t))for(p=0;p<k;p++)g[p]=a._pe.UTF8ToString(l[p]);return f};n.utm_to_geog=function(l,k,h,f,g){a._pe.ensureCache.prepare();let p=0;l&&(p=a._pe.getPointer(l));l=h.map(t=>a._pe.ensureString(t));h=a._pe.ensureInt32(l);l=a._pe.ensureFloat64(Array(2*k));(f=a._pe._pe_utm_to_geog(p,k,h,f,l))&&S(g,k,l);return f}})(a.PeNotationUtm||(a.PeNotationUtm={}));
a.PePCSInfo=void 0;(function(n){const l=new Map;n.init=function(){n.PE_PCSINFO_OPTION_NONE=a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;n.PE_PCSINFO_OPTION_DOMAIN=a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;n.PE_POLE_OUTSIDE_BOUNDARY=a._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;n.PE_POLE_POINT=a._pe.PePCSInfo.prototype.PE_POLE_POINT};n.generate=function(k,h=n.PE_PCSINFO_OPTION_DOMAIN){let f,g;l.has(k)&&(g=l.get(k),g[h]&&(f=g[h]));f||(f=a._pe.PePCSInfo.prototype.generate(k,h),g||(g=
[],l.set(k,g)),g[h]=f);return f}})(a.PePCSInfo||(a.PePCSInfo={}));a.PeVersion=void 0;(function(n){n.version_string=function(){return a._pe.PeVersion.prototype.version_string()}})(a.PeVersion||(a.PeVersion={}));var da=Object.freeze({__proto__:null,get _pe(){return a._pe},isLoaded:A,isSupported:U,load:ka,get PeCSTransformations(){return a.PeCSTransformations},get PeDefs(){return a.PeDefs},get PeFactory(){return a.PeFactory},get PeGCSExtent(){return a.PeGCSExtent},get PeGTlistExtended(){return a.PeGTlistExtended},
get PeGTlistExtendedEntry(){return a.PeGTlistExtendedEntry},get PeGTTransformations(){return a.PeGTTransformations},get PeNotationDms(){return a.PeNotationDms},get PeNotationMgrs(){return a.PeNotationMgrs},get PeNotationUsng(){return a.PeNotationUsng},get PeNotationUtm(){return a.PeNotationUtm},get PePCSInfo(){return a.PePCSInfo},get PeVersion(){return a.PeVersion},_init:M});a._init=M;a.isLoaded=A;a.isSupported=U;a.load=ka;a.pe=da})},"esri/geometry/support/geodesicConstants":function(){define(["exports",
"./Ellipsoid"],function(G,a){const L=Math.PI/180;var r=a.earth.radius;const D=a.earth.eccentricitySquared;r={a1:r*D,a2:r*D*r*D,a3:r*D*D/2,a4:r*D*r*D*2.5,a5:r*D+r*D*D/2,a6:1-D};a={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:a.earth.radius,f:a.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:a.moon.radius,f:a.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:a.mars.radius,f:a.mars.flattening},104906:{a:6200,
f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,
f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},
104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:a.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};
G.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;G.earthEllipsoidConstants=r;G.spheroids=a;G.toRadians=L;Object.defineProperty(G,"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(G){return function(){function a(r){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(r&&r.steps)for(const D of r.steps)D instanceof G?this.steps.push(D):this.steps.push(new G({wkid:D.wkid,wkt:D.wkt,isInverse:D.isInverse}))}
a.cacheKey=function(r,D){return[void 0!==r.wkid&&null!==r.wkid?r.wkid.toString():"-1",void 0!==r.wkt&&null!==r.wkt?r.wkt.toString():"",void 0!==D.wkid&&null!==D.wkid?D.wkid.toString():"-1",void 0!==D.wkt&&null!==D.wkt?D.wkt.toString():""].join()};a.fromGE=function(r){const D=new a;let A="";for(const U of r.steps)r=G.fromGE(U),D.steps.push(r),A+=r.uid.toString()+",";D._cached_projection={};D._gtlistentry=null;D._chain=A;return D};var L=a.prototype;L.getInverse=function(){const r=new a;r.steps=[];for(let D=
this.steps.length-1;0<=D;D--)r.steps.push(this.steps[D].getInverse());return r};L.getGTListEntry=function(){let r="";for(const D of this.steps)r+=D.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=r);return this._gtlistentry};L.assignCachedGe=function(r,D,A){this._cached_projection[a.cacheKey(r,D)]=A};L.getCachedGeTransformation=function(r,D){let A="";for(const U of this.steps)A+=U.uid.toString()+",";A!==this._chain&&(this._gtlistentry=null,this._cached_projection=
{},this._chain=A);r=this._cached_projection[a.cacheKey(r,D)];return void 0===r?null:r};return a}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(G){let a=0;return function(){function L(r=null){this.uid=a++;r?(this._wkt=void 0!==r.wkt?r.wkt:null,this._wkid=void 0!==r.wkid?r.wkid:-1,this._isInverse=void 0!==r.isInverse?!0===r.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}L.fromGE=function(r){const D=new L;
D._wkt=r.wkt;D._wkid=r.wkid;D._isInverse=r.isInverse;return D};L.prototype.getInverse=function(){const r=new L;r._wkt=this.wkt;r._wkid=this._wkid;r._isInverse=!this.isInverse;return r};G._createClass(L,[{key:"wkt",get:function(){return this._wkt},set:function(r){this._wkt=r;this.uid=a++}},{key:"wkid",get:function(){return this._wkid},set:function(r){this._wkid=r;this.uid=a++}},{key:"isInverse",get:function(){return this._isInverse},set:function(r){this._isInverse=r;this.uid=a++}}]);return L}()})},
"esri/layers/graphics/sources/geojson/geojson":function(){define(["exports","../../../../core/Error","../../OptimizedFeature","../../OptimizedGeometry"],function(G,a,L,r){function*D(k){switch(k.type){case "Feature":yield k;break;case "FeatureCollection":for(const h of k.features)h&&(yield h)}}function*A(k){if(!k)return null;switch(k.type){case "Point":yield k.coordinates;break;case "LineString":case "MultiPoint":yield*k.coordinates;break;case "MultiLineString":case "Polygon":for(const h of k.coordinates)yield*h;
break;case "MultiPolygon":for(const h of k.coordinates)for(const f of h)yield*f}}function*U(k,h={}){const {geometryType:f,objectIdField:g}=h;for(const t of k){var p;const {geometry:B,properties:x,id:C}=t;if(B&&l[B.type]!==f)continue;k=x||{};let J=null!=(p=k[g])?p:null;g&&null!=C&&!k[g]&&(k[g]=J=C);yield new L["default"](B?Y(new r,B,h):null,k,null,J)}}function ka(k){for(const h of k)if(2<h.length)return!0;return!1}function M(k){let h=0;for(let f=0;f<k.length;f++){const g=k[f],p=k[(f+1)%k.length];h+=
g[0]*p[1]-p[0]*g[1]}return 0>=h}function R(k){const h=k[0],f=k[k.length-1];h[0]===f[0]&&h[1]===f[1]&&h[2]===f[2]||k.push(h);return k}function Y(k,h,f){switch(h.type){case "LineString":return E(k,h.coordinates,f),k;case "MultiLineString":for(const p of h.coordinates)E(k,p,f);return k;case "MultiPoint":return E(k,h.coordinates,f),k;case "MultiPolygon":for(var g of h.coordinates)for(ba(k,g[0],f),h=1;h<g.length;h++)S(k,g[h],f);return k;case "Point":return n(k,h.coordinates,f),k;case "Polygon":g=h.coordinates;
ba(k,g[0],f);for(h=1;h<g.length;h++)S(k,g[h],f);return k}}function ba(k,h,f){h=R(h);M(h)?E(k,h,f):da(k,h,f)}function S(k,h,f){h=R(h);M(h)?da(k,h,f):E(k,h,f)}function E(k,h,f){for(const g of h)n(k,g,f);k.lengths.push(h.length)}function da(k,h,f){for(let g=h.length-1;0<=g;g--)n(k,h[g],f);k.lengths.push(h.length)}function n(k,h,f){const [g,p,t]=h;k.coords.push(g,p);f.hasZ&&k.coords.push(t||0)}const l={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",
Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};G.createOptimizedFeatures=function(k,h){return Array.from(U(D(k),h))};G.getGeometryType=function(k){return l[k]};G.inferLayerProperties=function(k,h={}){const f=[];var g=new Set;const p=new Set;var t=!1;let B=Number.NEGATIVE_INFINITY,x=null,C=!1,J=void 0;({geometryType:h=null}=h);var V=!1;for(const P of D(k)){const {geometry:ea,properties:ia,id:fa}=P;if(ea&&(h||(h=l[ea.type]),l[ea.type]!==h))continue;t||(t=
A(ea),t=ka(t));!C&&(C=null!=fa)&&(J=typeof fa,"number"===J&&(x=Object.keys(ia).filter(ca=>ia[ca]===fa)));C&&"number"===J&&null!=fa&&(B=Math.max(B,fa),1<x.length?x=x.filter(ca=>ia[ca]===fa):1===x.length&&(x=ia[x[0]]===fa?x:[]));if(!V&&ia){k=!0;for(const ca in ia)if(!g.has(ca))if(V=ia[ca],null==V)k=!1,p.add(ca);else{a:switch(typeof V){case "string":V="esriFieldTypeString";break a;case "number":V="esriFieldTypeDouble";break a;default:V="unknown"}"unknown"===V?p.add(ca):(p.delete(ca),g.add(ca),f.push({name:ca,
alias:ca,type:V}))}V=k}}if(g=x&&1===x.length&&x[0]||null)for(const P of f)P.name===g&&(P.type="esriFieldTypeOID");return{fields:f,geometryType:h,hasZ:t,maxObjectId:Math.max(0,B),objectIdFieldName:g,objectIdFieldType:J,unknownFields:Array.from(p)}};G.validateGeoJSON=function(k){if(!k)throw new a("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==k.type&&"FeatureCollection"!==k.type)throw new a("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:k});
({crs:k}=k);if(k){var h="string"===typeof k?k:"name"===k.type?k.properties.name:"EPSG"===k.type?k.properties.code:null,f=/.*(CRS84H?|4326)$/i;if(!h||!f.test(h))throw new a("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:k});}};Object.defineProperty(G,"__esModule",{value:!0})})},"esri/layers/ogc/dateUtils":function(){define(["exports"],function(G){function a(r){r=(new Date(r)).getTime();return Number.isNaN(r)?null:r}const L=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/;
G.parseDate=function(r){var D;var A,U,ka,M=L.exec(r);if(M){M=M.groups;var R=+M.year,Y=+M.month-1,ba=+M.day,S=+(null!=(A=M.hours)?A:0);A=+(null!=(U=M.minutes)?U:0);U=+(null!=(ka=M.seconds)?ka:0);if(23<S||59<A||59<U)var E=null;else E=(ka=null!=(E=M.ms)?E:"0")?+ka.padEnd(3,"0").substring(0,3):0,E=M.isUTC?Date.UTC(R,Y,ba,S,A,U,E):M.offsetSign?6E4*("+"===M.offsetSign?-1:1)*(60*+M.offsetHours+ +M.offsetMinutes)+Date.UTC(R,Y,ba,S,A,U,E):(new Date(R,Y,ba,S,A,U,E)).getTime(),E=Number.isNaN(E)?null:E}else E=
null;return null!=(D=E)?D:a(r)};G.parseJSDate=a;Object.defineProperty(G,"__esModule",{value:!0})})},"esri/layers/ogc/xmlUtils":function(){define(["exports"],function(G){function a(r,D){for(const A of r.children)A.localName in D&&(r=D[A.localName],"function"===typeof r?(r=r(A))&&a(A,r):a(A,r))}function*L(r,D){for(const A of r.children)A.localName in D&&(r=D[A.localName],"function"===typeof r?yield r(A):yield*L(A,r))}G.iterateXML=L;G.visitXML=a;Object.defineProperty(G,"__esModule",{value:!0})})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../geometry ../PopupTemplate ../renderers/ClassBreaksRenderer ../renderers/DictionaryRenderer ../renderers/DotDensityRenderer ../renderers/HeatmapRenderer ../renderers/Renderer ../renderers/SimpleRenderer ../renderers/UniqueValueRenderer ../renderers/support/jsonUtils ../renderers/support/types ../core/MultiOriginJSONSupport ../core/object ../core/urlUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/ensureType ../core/Logger ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../geometry/support/typeUtils ./Layer ./graphics/sources/WFSSource ./mixins/BlendLayer ./mixins/CustomParametersMixin ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./mixins/TemporalLayer ./ogc/wfsUtils ./support/commonProperties ./support/featureReductionUtils ./support/Field ./support/fieldProperties ./support/fieldUtils ./support/LabelClass ./support/labelingInfo ../rest/support/Query ../support/popupUtils ../geometry/Extent ../geometry/SpatialReference".split(" "),
function(G,a,L,r,D,A,U,ka,M,R,Y,ba,S,E,da,n,l,k,h,f,g,p,t,B,x,C,J,V,P,ea,ia,fa,ca,xa,na,ta,ra,Ca,ha,Da,Ba,ma,Ia,oa,N){var sa;L=Ca.defineFieldProperties();E=sa=function(q){function u(m){m=q.call(this,m)||this;m.capabilities=null;m.copyright=null;m.customParameters=null;m.definitionExpression=null;m.displayField=null;m.elevationInfo=null;m.featureReduction=null;m.featureUrl=void 0;m.fields=null;m.fieldsIndex=null;m.fullExtent=null;m.geometryType=null;m.labelsVisible=!0;m.labelingInfo=null;m.legendEnabled=
!0;m.objectIdField=null;m.operationalLayerType="WFS";m.maxFeatures=3E3;m.mode=0;m.name=null;m.namespaceUri=null;m.outFields=null;m.popupEnabled=!0;m.popupTemplate=null;m.screenSizePerspectiveEnabled=!0;m.source=new C["default"]({layer:G._assertThisInitialized(m)});m.spatialReference=N.WGS84;m.spatialReferences=[4326];m.swapXY=void 0;m.title="WFS";m.type="wfs";m.url=null;m.version=void 0;return m}G._inheritsLoose(u,q);u.fromWFSLayerInfo=function(m){const {customParameters:y,fields:F,geometryField:H,
geometryType:Q,name:T,namespaceUri:la,objectIdField:pa,spatialReference:qa,swapXY:Ha,url:ua,wfsCapabilities:Pa}=m;return new sa({customParameters:y,fields:F,geometryField:H,geometryType:Q,name:T,namespaceUri:la,objectIdField:pa,spatialReference:qa,swapXY:Ha,url:ua,wfsCapabilities:Pa})};var w=u.prototype;w.destroy=function(){var m;null==(m=this.source)?void 0:m.destroy()};w.load=function(m){this.addResolvingPromise(this.loadFromPortal({supportedTypes:["WFS"]},m).then(()=>this.source.load(m)).then(()=>
{this.read(this.source.sourceJSON,{origin:"service",url:this.parsedUrl});this.revert("objectIdField fields timeInfo spatialReference name namespaceUri".split(" "),"service");ha.fixRendererFields(this.renderer,this.fieldsIndex);ha.fixTimeInfoFields(this.timeInfo,this.fieldsIndex)}));return Promise.resolve(this)};w.readFeatureReduction=function(m,y){return ta.read(m,y)};w.writeWebSceneFeatureReduction=function(m,y,F,H){ta.writeTarget(m,y,"layerDefinition.featureReduction",H)};w.writeFields=function(m,
y,F){m=m.filter(H=>H.name!==xa.WFS_OID_FIELD_NAME);this.geometryField&&m.unshift(new ra({name:this.geometryField,alias:this.geometryField,type:"geometry"}));da.setDeepValue(F,m.map(H=>H.toJSON()),y)};w.createPopupTemplate=function(m){return Ia.createPopupTemplate(this,m)};w.createQuery=function(){const m=new ma;m.returnGeometry=!0;m.outFields=["*"];m.where=this.definitionExpression||"1\x3d1";const {timeOffset:y,timeExtent:F}=this;m.timeExtent=null!=y&&null!=F?F.offset(-y.value,y.unit):F||null;return m};
w.getFieldDomain=function(m,y){var F;return null==(F=this.getField(m))?void 0:F.domain};w.getField=function(m){return this.fieldsIndex.get(m)};w.queryFeatures=function(m,y){return this.load().then(()=>this.source.queryFeatures(ma.from(m)||this.createQuery(),y)).then(F=>{if(null!=F&&F.features)for(const H of F.features)H.layer=H.sourceLayer=this;return F})};w.queryObjectIds=function(m,y){return this.load().then(()=>this.source.queryObjectIds(ma.from(m)||this.createQuery(),y))};w.queryFeatureCount=
function(m,y){return this.load().then(()=>this.source.queryFeatureCount(ma.from(m)||this.createQuery(),y))};w.queryExtent=function(m,y){return this.load().then(()=>this.source.queryExtent(ma.from(m)||this.createQuery(),y))};w.hasDataChanged=function(){var m=G._asyncToGenerator(function*(){try{const {hasUpdates:y,updates:F}=yield this.source.refresh();y&&this.read(F,{origin:"service",url:this.parsedUrl});return y}catch{}return!1});return function(){return m.apply(this,arguments)}}();G._createClass(u,
[{key:"createQueryVersion",get:function(){this.commitProperty("definitionExpression");this.commitProperty("timeExtent");this.commitProperty("timeOffset");this.commitProperty("geometryType");this.commitProperty("capabilities");return(this._get("createQueryVersion")||0)+1}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"parsedUrl",get:function(){return this.url?n.urlToObject(this.url):null}},{key:"renderer",set:function(m){ha.fixRendererFields(m,this.fieldsIndex);
this._set("renderer",m)}}]);return u}(V.CustomParametersMixin(J.BlendLayer(ca.TemporalLayer(ia.RefreshableLayer(fa.ScaleRangeLayer(P.OperationalLayer(ea.PortalLayer(E.MultiOriginJSONMixin(x)))))))));a.__decorate([l.property({readOnly:!0,aliasOf:"source.capabilities"})],E.prototype,"capabilities",void 0);a.__decorate([l.property({type:String})],E.prototype,"copyright",void 0);a.__decorate([l.property({readOnly:!0})],E.prototype,"createQueryVersion",null);a.__decorate([l.property({json:{name:"wfsInfo.customParameters",
write:{ignoreOrigin:!0}}})],E.prototype,"customParameters",void 0);a.__decorate([l.property({readOnly:!0})],E.prototype,"defaultPopupTemplate",null);a.__decorate([l.property({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],E.prototype,"definitionExpression",void 0);a.__decorate([l.property({type:String})],E.prototype,"displayField",void 0);a.__decorate([l.property(na.elevationInfo)],E.prototype,"elevationInfo",void 0);a.__decorate([l.property(ta.featureReductionProperty)],
E.prototype,"featureReduction",void 0);a.__decorate([g.reader("featureReduction",["layerDefinition.featureReduction"])],E.prototype,"readFeatureReduction",null);a.__decorate([t.writer("web-scene","featureReduction",{"layerDefinition.featureReduction":{types:ta.webSceneFeatureReductionTypes}})],E.prototype,"writeWebSceneFeatureReduction",null);a.__decorate([l.property({type:String,readOnly:!0,json:{name:"wfsInfo.featureUrl",write:{ignoreOrigin:!0,isRequired:!0}}})],E.prototype,"featureUrl",void 0);
a.__decorate([l.property({type:[ra],json:{name:"layerDefinition.fields",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{read:{source:"fields"}}}}})],E.prototype,"fields",void 0);a.__decorate([t.writer("fields")],E.prototype,"writeFields",null);a.__decorate([l.property(L.fieldsIndex)],E.prototype,"fieldsIndex",void 0);a.__decorate([l.property({type:oa,json:{origins:{service:{read:{source:"extent"}}}}})],E.prototype,"fullExtent",void 0);a.__decorate([l.property()],E.prototype,"geometryField",
void 0);a.__decorate([l.property({type:String,json:{read:{source:"layerDefinition.geometryType",reader:B.featureGeometryTypeKebabDictionary.read},write:{target:"layerDefinition.geometryType",writer:B.featureGeometryTypeKebabDictionary.write,ignoreOrigin:!0},origins:{service:{read:B.featureGeometryTypeKebabDictionary.read}}}})],E.prototype,"geometryType",void 0);a.__decorate([l.property({type:String})],E.prototype,"id",void 0);a.__decorate([l.property(na.labelsVisible)],E.prototype,"labelsVisible",
void 0);a.__decorate([l.property({type:[Da],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:Ba.reader},write:!0}})],E.prototype,"labelingInfo",void 0);a.__decorate([l.property(na.legendEnabled)],E.prototype,"legendEnabled",void 0);a.__decorate([l.property({type:["show","hide"]})],E.prototype,"listMode",void 0);a.__decorate([l.property({type:String})],E.prototype,"objectIdField",void 0);a.__decorate([l.property({type:["WFS"]})],E.prototype,"operationalLayerType",void 0);a.__decorate([l.property({type:h.Integer,
json:{name:"wfsInfo.maxFeatures",write:{ignoreOrigin:!0,isRequired:!0}}})],E.prototype,"maxFeatures",void 0);a.__decorate([l.property({type:[0],readOnly:!0,json:{origins:{"web-map":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],E.prototype,"mode",void 0);a.__decorate([l.property({type:String,json:{name:"wfsInfo.name",write:{ignoreOrigin:!0,isRequired:!0}}})],E.prototype,"name",void 0);a.__decorate([l.property({type:String,json:{name:"wfsInfo.wfsNamespace",write:{ignoreOrigin:!0,isRequired:!0}}})],E.prototype,
"namespaceUri",void 0);a.__decorate([l.property(na.opacityDrawingInfo)],E.prototype,"opacity",void 0);a.__decorate([l.property(L.outFields)],E.prototype,"outFields",void 0);a.__decorate([l.property({readOnly:!0})],E.prototype,"parsedUrl",null);a.__decorate([l.property(na.popupEnabled)],E.prototype,"popupEnabled",void 0);a.__decorate([l.property({type:r,json:{name:"popupInfo",write:!0}})],E.prototype,"popupTemplate",void 0);a.__decorate([l.property({types:S.rendererTypes,json:{origins:{service:{name:"drawingInfo.renderer"},
"web-scene":{types:S.webSceneRendererTypes,name:"layerDefinition.drawingInfo.renderer",write:{writer:ba.write}}},name:"layerDefinition.drawingInfo.renderer",write:{ignoreOrigin:!0}}})],E.prototype,"renderer",null);a.__decorate([l.property({type:Boolean,json:{write:!0,name:"screenSizePerspective"}})],E.prototype,"screenSizePerspectiveEnabled",void 0);a.__decorate([l.property({readOnly:!0})],E.prototype,"source",void 0);a.__decorate([l.property({type:N,json:{name:"layerDefinition.spatialReference",
write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"extent.spatialReference"}}}})],E.prototype,"spatialReference",void 0);a.__decorate([l.property({readOnly:!0,type:[h.Integer],json:{name:"wfsInfo.supportedSpatialReferences",write:{ignoreOrigin:!0,isRequired:!0}}})],E.prototype,"spatialReferences",void 0);a.__decorate([l.property({type:Boolean,value:!1,json:{name:"wfsInfo.swapXY",write:{ignoreOrigin:!0,isRequired:!0}}})],E.prototype,"swapXY",void 0);a.__decorate([l.property({json:{write:{ignoreOrigin:!0,
isRequired:!0},origins:{service:{name:"name"}}}})],E.prototype,"title",void 0);a.__decorate([l.property({json:{read:!1},readOnly:!0})],E.prototype,"type",void 0);a.__decorate([l.property(na.url)],E.prototype,"url",void 0);a.__decorate([l.property({type:String,readOnly:!0,json:{name:"wfsInfo.version",write:{ignoreOrigin:!0,isRequired:!0}}})],E.prototype,"version",void 0);a.__decorate([l.property({aliasOf:"source.wfsCapabilities"})],E.prototype,"wfsCapabilities",void 0);return E=sa=a.__decorate([p.subclass("esri.layers.WFSLayer")],
E)});