// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.21/esri/copyright.txt for details.
//>>built
define(["exports","../../core/Error","../../core/object","./parser"],function(h,m,r,n){function p(a){if(!a)return null;if("string"===typeof a)return k(a);const b=[];for(const {scale:c,value:g}of a)b.push({scale:c,value:k(g)});return b}function q(a){if(!a)return null;var b=(b=a[0])?"scale"in b:!1;if(b){b=[];for(const c of a)b.push({scale:c.scale,value:l(c.value)});return b}return l(a)}function k(a){if(!a)return null;a=n.parse(a);if(a.error)throw a.error;return a.effects.map(b=>b.toJSON())}function l(a){if(!a||
!a.length)return null;const b=[];for(const e of a){a=[];switch(e.type){case "grayscale":case "sepia":case "saturate":case "invert":case "brightness":case "contrast":case "opacity":a=[f(e,"amount")];break;case "blur":a=[f(e,"radius","pt")];break;case "hue-rotate":a=[f(e,"angle","deg")];break;case "drop-shadow":a=f(e,"xoffset","pt");var c=f(e,"yoffset","pt"),g=f(e,"blurRadius","pt");var d=e;if(null==d.color)throw new m("effect:missing-parameter",`Missing parameter '${"color"}' in ${d.type} effect`,
{effect:d});d=d.color;d=`rgba(${d[0]||0} ${d[1]||0} ${d[2]||0} ${d[3]/255||0})`;a=[a,c,g,d];break;case "bloom":a=[f(e,"strength"),f(e,"radius","pt"),f(e,"threshold")]}a=`${e.type}(${a.filter(Boolean).join(" ")})`;c=n.parse(a);if(c.error)throw c.error;b.push(a)}return b.join(" ")}function f(a,b,c){if(null==a[b])throw new m("effect:missing-parameter",`Missing parameter '${b}' in ${a.type} effect`,{effect:a});return c?a[b]+c:""+a[b]}h.effectFunctionsFromJSON=l;h.effectFunctionsToJSON=k;h.fromJSON=q;
h.read=function(a,b,c){try{return q(a)}catch(g){c.messages&&c.messages.push(g)}return null};h.toJSON=p;h.write=function(a,b,c,g){try{const d=p(a);d&&r.setDeepValue(c,d,b)}catch(d){g.messages&&g.messages.push(d)}};Object.defineProperty(h,"__esModule",{value:!0})});