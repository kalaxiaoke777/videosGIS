/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
import{i as n,o as t,createDeferred as r,onAbort as e,createAbortError as o}from"./promiseUtils.js";import{equals as u}from"./lang.js";import"./Error.js";import"../chunks/Logger.js";import"../config.js";import"../chunks/object.js";import"../chunks/string.js";import"../chunks/Message.js";const c=/\?(\.|$)/g;function i(n,t,r,e){const o=Array.isArray(t)?t:t.indexOf(",")>-1?t.split(","):[t],u=s(n,t,r,e);for(const t of o){const e=t.trim().replace(c,"$1"),o=n.get(e);r.call(n,o,o,e,n)}return u}function s(n,t,r,e){return n.watch(t,r,e)}function f(n,t,r,e){return z(n,t,null,r,e)}function l(n,t,r,e){return $(n,t,E,r,e)}function a(n,t,r,e){return z(n,t,E,r,e)}function m(n,t,r,e){return $(n,t,L,r,e)}function p(n,t,r,e){return z(n,t,L,r,e)}function g(n,t,r,e){return $(n,t,M,r,e)}function h(n,t,r,e){return z(n,t,M,r,e)}function j(n,t,r,e){return $(n,t,N,r,e)}function v(n,t,r,e){return z(n,t,N,r,e)}function d(n,t,r,e){return $(n,t,U,r,e)}function y(n,t,r,e){return z(n,t,U,r,e)}function b(n,t,r,e){return $(n,t,V,r,e)}function k(n,t,r,e){return z(n,t,V,r,e)}function A(n,t,r,e,o){return $(n,t,(n=>u(r,n)),e,o)}function w(n,t,r,e,o){return z(n,t,(n=>u(r,n)),e,o)}function x(n,t,r,e){let o=!1;const u=n.watch(t,((t,e,u,c)=>{o||r.call(n,t,e,u,c)}),e);return{remove(){u.remove()},pause(){o=!0},resume(){o=!1}}}function O(r,e,o,u,c,s,f){const l={};function a(n){const t=l[n];t&&(s&&s(t.target,n,r,o),t.handle.remove(),delete l[n])}const m=i(r,e,((e,i,s)=>{a(s),n(e)&&(l[s]={handle:t(e,o,u),target:e},c&&c(e,s,r,o))}),f);return{remove(){m.remove();for(const n in l)a(n)}}}function $(n,t,r,e,o){const u=n.watch(t,((t,o,u,c)=>{r&&!r(t)||null==e||e.call(n,t,o,u,c)}),o);if(Array.isArray(t))for(const o of t){const u=n.get(o);r&&r(u)&&(null==e||e.call(n,u,u,t,n))}else{const o=n.get(t);r&&r(o)&&(null==e||e.call(n,o,o,t,n))}return u}function z(n,t,u,c,i){const s="function"==typeof c?c:null,f="object"==typeof c?c:null;"boolean"==typeof c&&(i=c);let l,a=!1;function m(){l&&(l.remove(),l=null)}const p=r();e(f,(()=>{m(),p.reject(o())}));const g={then:p.promise.then.bind(p.promise),catch:p.promise.catch.bind(p.promise),remove:m};return Object.freeze(g),l=$(n,t,u,((t,r,e,o)=>{a=!0,m(),s&&s.call(n,t,r,e,o),p.resolve({value:t,oldValue:r,propertyName:e,target:o})}),i),a&&m(),g}function E(n){return!!n}function L(n){return!n}function M(n){return!0===n}function N(n){return!1===n}function U(n){return void 0!==n}function V(n){return void 0===n}export{i as init,O as on,f as once,x as pausable,s as watch,l as when,d as whenDefined,y as whenDefinedOnce,A as whenEqual,w as whenEqualOnce,j as whenFalse,v as whenFalseOnce,m as whenNot,p as whenNotOnce,a as whenOnce,g as whenTrue,h as whenTrueOnce,b as whenUndefined,k as whenUndefinedOnce,z as whenValidOnce};
