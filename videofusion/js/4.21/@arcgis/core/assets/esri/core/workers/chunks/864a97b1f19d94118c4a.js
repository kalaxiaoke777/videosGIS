"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[1151],{93314:(e,t,r)=>{r.d(t,{Z:()=>g});var i,s=r(29768),n=r(74673),o=r(76506),a=r(35197),l=r(34250),u=(r(91306),r(92143),r(97714)),c=r(17533),d=r(2906);r(21972),r(23639),r(86656),r(22723),r(91055),r(27794),r(6906),r(50406),r(60991),r(81172),r(71552),r(31450),r(40642);let p=i=class extends n.a{constructor(e){super(e),this.end=null,this.start=null}static get allTime(){return h}static get empty(){return y}readEnd(e,t){return null!=t.end?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(i.allTime)}get isEmpty(){return this.equals(i.empty)}readStart(e,t){return null!=t.start?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new i({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=(0,o.i)(this.start)?this.start.getTime():this.start,r=(0,o.i)(this.end)?this.end.getTime():this.end,i=(0,o.i)(e.start)?e.start.getTime():e.start,s=(0,o.i)(e.end)?e.end.getTime():e.end;return t===i&&r===s}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const t=(0,o.e)(this.start,(t=>(0,a.t)(t,e))),r=(0,o.e)(this.end,(t=>(0,a.o)((0,a.t)(t,e),1,e)));return new i({start:t,end:r})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return i.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=(0,o.m)(this.start,-1/0,(e=>e.getTime())),r=(0,o.m)(this.end,1/0,(e=>e.getTime())),s=(0,o.m)(e.start,-1/0,(e=>e.getTime())),n=(0,o.m)(e.end,1/0,(e=>e.getTime()));let a,l;if(s>=t&&s<=r?a=s:t>=s&&t<=n&&(a=t),r>=s&&r<=n?l=r:n>=t&&n<=r&&(l=n),!isNaN(a)&&!isNaN(l)){const e=new i;return e.start=a===-1/0?null:new Date(a),e.end=l===1/0?null:new Date(l),e}return i.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const r=new i,{start:s,end:n}=this;return(0,o.i)(s)&&(r.start=(0,a.o)(s,e,t)),(0,o.i)(n)&&(r.end=(0,a.o)(n,e,t)),r}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return h.clone();const t=(0,o.i)(this.start)&&(0,o.i)(e.start)?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=(0,o.i)(this.end)&&(0,o.i)(e.end)?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new i({start:t,end:r})}};(0,s._)([(0,l.Cb)({type:Date,json:{write:{allowNull:!0}}})],p.prototype,"end",void 0),(0,s._)([(0,u.r)("end")],p.prototype,"readEnd",null),(0,s._)([(0,d.w)("end")],p.prototype,"writeEnd",null),(0,s._)([(0,l.Cb)({readOnly:!0,json:{read:!1}})],p.prototype,"isAllTime",null),(0,s._)([(0,l.Cb)({readOnly:!0,json:{read:!1}})],p.prototype,"isEmpty",null),(0,s._)([(0,l.Cb)({type:Date,json:{write:{allowNull:!0}}})],p.prototype,"start",void 0),(0,s._)([(0,u.r)("start")],p.prototype,"readStart",null),(0,s._)([(0,d.w)("start")],p.prototype,"writeStart",null),p=i=(0,s._)([(0,c.j)("esri.TimeExtent")],p);const h=new p,y=new p({start:void 0,end:void 0});var g=p},59765:(e,t,r)=>{r.d(t,{Z:()=>p,t:()=>u});var i=r(29768),s=r(74673),n=r(35197),o=r(34250),a=(r(76506),r(91306),r(92143),r(17533)),l=r(57251);r(21972),r(23639),r(86656),r(22723),r(91055),r(27794),r(6906),r(50406),r(60991),r(81172),r(71552),r(31450),r(40642);const u=(0,l.s)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});var c;let d=c=class extends s.a{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return(0,n.c)(this.value,this.unit,"milliseconds")}clone(){return new c({value:this.value,unit:this.unit})}};(0,i._)([(0,o.Cb)({type:Number,json:{write:!0},nonNullable:!0})],d.prototype,"value",void 0),(0,i._)([(0,o.Cb)({type:u.apiValues,json:{type:u.jsonValues,read:u.read,write:u.write},nonNullable:!0})],d.prototype,"unit",void 0),d=c=(0,i._)([(0,a.j)("esri.TimeInterval")],d);var p=d},69218:(e,t,r)=>{r.d(t,{D:()=>P,M:()=>f});var i,s=r(29768),n=r(57251),o=r(74673),a=r(34250),l=(r(76506),r(86787)),u=(r(92143),r(59465)),c=r(97714),d=r(17533),p=r(91306),h=r(97546),y=(r(74569),r(60947)),g=r(22781);let f=i=class extends o.a{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new i({mapLayerId:e,gdbVersion:t})}};var m;(0,s._)([(0,u.e)({mapLayer:"map-layer"})],f.prototype,"type",void 0),(0,s._)([(0,a.Cb)({type:p.I,json:{write:!0}})],f.prototype,"mapLayerId",void 0),(0,s._)([(0,a.Cb)({type:String,json:{write:!0}})],f.prototype,"gdbVersion",void 0),f=i=(0,s._)([(0,d.j)("esri.layers.support.source.MapLayerSource")],f);let b=m=class extends o.a{constructor(e){super(e),this.type="query-table"}clone(){var e;const{workspaceId:t,query:r,oidFields:i,spatialReference:s,geometryType:n}=this,o={workspaceId:t,query:r,oidFields:i,spatialReference:null!=(e=null==s?void 0:s.clone())?e:void 0,geometryType:n};return new m(o)}};var v;(0,s._)([(0,u.e)({queryTable:"query-table"})],b.prototype,"type",void 0),(0,s._)([(0,a.Cb)({type:String,json:{write:!0}})],b.prototype,"workspaceId",void 0),(0,s._)([(0,a.Cb)({type:String,json:{write:!0}})],b.prototype,"query",void 0),(0,s._)([(0,a.Cb)({type:String,json:{write:!0}})],b.prototype,"oidFields",void 0),(0,s._)([(0,a.Cb)({type:y.Z,json:{write:!0}})],b.prototype,"spatialReference",void 0),(0,s._)([(0,u.e)(g.f)],b.prototype,"geometryType",void 0),b=m=(0,s._)([(0,d.j)("esri.layers.support.source.QueryTableDataSource")],b);let _=v=class extends o.a{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new v({workspaceId:e,dataSourceName:t})}};var w;(0,s._)([(0,u.e)({raster:"raster"})],_.prototype,"type",void 0),(0,s._)([(0,a.Cb)({type:String,json:{write:!0}})],_.prototype,"dataSourceName",void 0),(0,s._)([(0,a.Cb)({type:String,json:{write:!0}})],_.prototype,"workspaceId",void 0),_=v=(0,s._)([(0,d.j)("esri.layers.support.source.RasterDataSource")],_);let S=w=class extends o.a{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:r}=this;return new w({workspaceId:e,gdbVersion:t,dataSourceName:r})}};var T,C;(0,s._)([(0,u.e)({table:"table"})],S.prototype,"type",void 0),(0,s._)([(0,a.Cb)({type:String,json:{write:!0}})],S.prototype,"workspaceId",void 0),(0,s._)([(0,a.Cb)({type:String,json:{write:!0}})],S.prototype,"gdbVersion",void 0),(0,s._)([(0,a.Cb)({type:String,json:{write:!0}})],S.prototype,"dataSourceName",void 0),S=w=(0,s._)([(0,d.j)("esri.layers.support.source.TableDataSource")],S);const F=(0,n.s)()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let x=T=class extends o.a{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,r){return j()(e,t,r)}castLeftTableSource(e){return(0,p.a)(R(),e)}readRightTableSource(e,t,r){return j()(e,t,r)}castRightTableSource(e){return(0,p.a)(R(),e)}clone(){var e,t;const{leftTableKey:r,rightTableKey:i,leftTableSource:s,rightTableSource:n,joinType:o}=this,a={leftTableKey:r,rightTableKey:i,leftTableSource:null!=(e=null==s?void 0:s.clone())?e:void 0,rightTableSource:null!=(t=null==n?void 0:n.clone())?t:void 0,joinType:o};return new T(a)}};(0,s._)([(0,u.e)({joinTable:"join-table"})],x.prototype,"type",void 0),(0,s._)([(0,a.Cb)({type:String,json:{write:!0}})],x.prototype,"leftTableKey",void 0),(0,s._)([(0,a.Cb)({type:String,json:{write:!0}})],x.prototype,"rightTableKey",void 0),(0,s._)([(0,a.Cb)({json:{write:!0}})],x.prototype,"leftTableSource",void 0),(0,s._)([(0,c.r)("leftTableSource")],x.prototype,"readLeftTableSource",null),(0,s._)([(0,l.p)("leftTableSource")],x.prototype,"castLeftTableSource",null),(0,s._)([(0,a.Cb)({json:{write:!0}})],x.prototype,"rightTableSource",void 0),(0,s._)([(0,c.r)("rightTableSource")],x.prototype,"readRightTableSource",null),(0,s._)([(0,l.p)("rightTableSource")],x.prototype,"castRightTableSource",null),(0,s._)([(0,u.e)(F)],x.prototype,"joinType",void 0),x=T=(0,s._)([(0,d.j)("esri.layers.support.source.JoinTableDataSource")],x);let I=null;function j(){return I||(I=(0,d.d)({types:R()})),I}let k=null;function R(){return k||(k={key:"type",base:null,typeMap:{"data-layer":P,"map-layer":f}}),k}const O={key:"type",base:null,typeMap:{"join-table":x,"query-table":b,raster:_,table:S}};let P=C=class extends o.a{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new C({fields:e,dataSource:t})}};(0,s._)([(0,u.e)({dataLayer:"data-layer"})],P.prototype,"type",void 0),(0,s._)([(0,a.Cb)({type:[h.Z],json:{write:!0}})],P.prototype,"fields",void 0),(0,s._)([(0,a.Cb)({types:O,json:{write:!0}})],P.prototype,"dataSource",void 0),P=C=(0,s._)([(0,d.j)("esri.layers.support.source.DataLayerSource")],P),P.from=(0,p.e)(P)},31151:(e,t,r)=>{r.r(t),r.d(t,{FeatureServiceSnappingSourceWorker:()=>J,default:()=>Q});var i=r(29768),s=r(76996),n=r(82933),o=r(76506),a=r(50406),l=r(617),u=r(34250),c=(r(91306),r(92143)),d=r(17533),p=r(60947),h=r(56761),y=r(50815),g=r(43352),f=r(77361),m=r(31292),b=r(27794),v=r(21972),_=r(95873),w=r(22723),S=r(21801),T=r(92482),C=r(40267),F=r(76733),x=r(49214),I=r(41864);function j(e){return 32+e.length}function k(e,t){return 32+e.length*t}r(15324),r(91055),r(6906),r(60991),r(81172),r(71552),r(31450),r(40642),r(86656),r(23639),r(74673),r(2906),r(53326),r(88994),r(98576),r(44722),r(71331),r(85674),r(91700),r(53785),r(57251),r(95587),r(89623),r(98380),r(32422),r(73796),r(97714),r(84069),r(91597),r(86787),r(35132),r(44567),r(92896),r(95533),r(94751),r(74569),r(22781),r(82058),r(88762),r(32101),r(30831),r(72274),r(5777),r(24251),r(72334),r(82426),r(29794),r(65775),r(12381),r(73173),r(92624),r(77314),r(89219),r(71435),r(81731),r(14249),r(60217),r(7176),r(14172),r(92817),r(93314),r(35197),r(59765),r(59465),r(69218),r(97546),r(9801),r(53523),r(42911),r(46826),r(45433),r(54732),r(27207),r(11385),r(55823),r(92847);let R=class extends v.Z{constructor(){super(...arguments),this.updating=!1,this.pending=[]}push(e,t){this.pending.push({promise:e,callback:t}),1===this.pending.length&&this.process()}process(){if(!this.pending.length)return void(this.updating=!1);this.updating=!0;const e=this.pending[0];e.promise.then((t=>e.callback(t))).catch((()=>{})).then((()=>{this.pending.shift(),this.process()}))}};(0,i._)([(0,u.Cb)()],R.prototype,"updating",void 0),R=(0,i._)([(0,d.j)("esri.core.AsyncSequence")],R);class O{constructor(e,t){this.data=e,this.resolution=t,this.state={type:0},this.alive=!0}process(e){switch(this.state.type){case 0:return this.state=this.gotoFetchCount(this.state,e),this.state.task.promise.then(e.resume,e.resume);case 1:break;case 2:return this.state=this.gotoFetchFeatures(this.state,e),this.state.task.promise.then(e.resume,e.resume);case 3:break;case 4:this.state=this.goToDone(this.state,e)}return null}get debugInfo(){return{data:this.data,featureCount:this.featureCount,state:this.stateToString}}get featureCount(){switch(this.state.type){case 0:case 1:return 0;case 2:return this.state.featureCount;case 3:return this.state.previous.featureCount;case 4:return this.state.features.length;case 5:return this.state.previous.features.length}}get stateToString(){switch(this.state.type){case 0:return"created";case 1:return"fetch-count";case 2:return"fetched-count";case 3:return"fetch-features";case 4:return"fetched-features";case 5:return"done"}}gotoFetchCount(e,t){return{type:1,previous:e,task:(0,a.vr)((async e=>{const r=await(0,I.a)(t.fetchCount(this,e));1===this.state.type&&(this.state=this.gotoFetchedCount(this.state,r.ok?r.value:1/0))}))}}gotoFetchedCount(e,t){return{type:2,featureCount:t,previous:e}}gotoFetchFeatures(e,t){return{type:3,previous:e,task:(0,a.vr)((async r=>{const i=await(0,I.a)(t.fetchFeatures(this,e.featureCount,r));3===this.state.type&&(this.state=this.gotoFetchedFeatures(this.state,i.ok?i.value:[]))}))}}gotoFetchedFeatures(e,t){return{type:4,previous:e,features:t}}goToDone(e,t){return t.finish(this,e.features),{type:5,previous:e}}reset(){const e=this.state;switch(this.state={type:0},e.type){case 0:case 2:case 4:case 5:break;case 1:case 3:e.task.abort()}}intersects(e){return!(!(0,o.b)(e)&&this.data.extent)||((0,T.n)(e,P),(0,T.g)(this.data.extent,P))}}const P=(0,T.c)(),D=c.L.getLogger("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiledFetcher");let E=class extends _.r{constructor(e){super(e),this.tilesOfInterest=[],this.availability=0,this.pendingTiles=new Map,this.pendingEdits=new R,this.pendingEditsAbortController=(0,a.yi)()}get minimumVerticesPerFeature(){var e;switch(null==(e=this.store)?void 0:e.featureStore.geometryType){case"esriGeometryPoint":case"esriGeometryMultipoint":return 1;case"esriGeometryPolygon":return 4;case"esriGeometryPolyline":return 2}}set filter(e){const t=this._get("filter"),r=this.filterProperties(e);JSON.stringify(t)!==JSON.stringify(r)&&this._set("filter",r)}set customParameters(e){const t=this._get("customParameters");JSON.stringify(t)!==JSON.stringify(e)&&this._set("customParameters",e)}get configuration(){return{filter:this.filter,customParameters:this.customParameters,tileInfo:this.tileInfo,tileSize:this.tileSize}}set tileInfo(e){const t=this._get("tileInfo");t!==e&&((0,o.i)(e)&&(0,o.i)(t)&&JSON.stringify(e)===JSON.stringify(t)||(this._set("tileInfo",e),this.store.tileInfo=e))}set tileSize(e){this._get("tileSize")!==e&&this._set("tileSize",e)}get updating(){return this.updatingHandles.updating||this.pendingEdits.updating}initialize(){this.initializeFetchExtent(),this.updatingHandles.add(this,"configuration",(()=>this.refresh())),this.updatingHandles.add(this,"tilesOfInterest",((e,t)=>{(0,b.e)(e,t,(({id:e},{id:t})=>e===t))||this.process()}),1)}destroy(){this.pendingTiles.forEach((e=>this.deletePendingTile(e))),this.pendingTiles.clear(),this.store.destroy(),this.tilesOfInterest.length=0,this.pendingEditsAbortController.abort(),this.pendingEditsAbortController=null}refresh(){this.store.refresh(),this.pendingTiles.forEach((e=>this.deletePendingTile(e))),this.process()}applyEdits(e){this.pendingEdits.push(e,(async e=>{if(0===e.addedFeatures.length&&0===e.updatedFeatures.length&&0===e.deletedFeatures.length)return;for(const[,e]of this.pendingTiles)e.reset();const t={...e,deletedFeatures:e.deletedFeatures.map((({objectId:e,globalId:t})=>e&&-1!==e?e:this.lookupObjectIdByGlobalId(t)))};await this.updatingHandles.addPromise(this.store.processEdits(t,((e,t)=>this.queryFeaturesById(e,t)),this.pendingEditsAbortController.signal)),this.processPendingTiles()}))}initializeFetchExtent(){if(!this.capabilities.query.supportsExtent)return;const e=(0,a.vr)((async e=>{try{var t;const r=await(0,x.c)(this.url,new m.Z({where:"1=1",outSpatialReference:this.spatialReference,cacheHint:!!this.capabilities.query.supportsCacheHint||void 0}),{query:this.configuration.customParameters,signal:e});this.store.extent=S.Z.fromJSON(null==(t=r.data)?void 0:t.extent)}catch(e){(0,a.r9)(e),D.warn("Failed to fetch data extent",e)}}));this.updatingHandles.addPromise(e.promise.then((()=>this.process()))),this.handles.add((0,w.m)((()=>e.abort())))}get debugInfo(){return{numberOfFeatures:this.store.featureStore.numFeatures,tilesOfInterest:this.tilesOfInterest,pendingTiles:Array.from(this.pendingTiles.values()).map((e=>e.debugInfo)),storedTiles:this.store.debugInfo}}process(){this.markTilesNotAlive(),this.createPendingTiles(),this.deletePendingTiles(),this.processPendingTiles()}markTilesNotAlive(){for(const[,e]of this.pendingTiles)e.alive=!1}createPendingTiles(){const e=this.collectMissingTilesInfo();if(this.setAvailability((0,o.b)(e)?1:e.coveredArea/e.fullArea),!(0,o.b)(e))for(const{data:t,resolution:r}of e.missingTiles){const e=this.pendingTiles.get(t.id);e?(e.resolution=r,e.alive=!0):this.createPendingTile(t,r)}}collectMissingTilesInfo(){let e=null;for(let t=this.tilesOfInterest.length-1;t>=0;t--){const r=this.tilesOfInterest[t],i=this.store.process(r,((e,t)=>this.verifyTileComplexity(e,t)));(0,o.b)(e)?e=i:e.prepend(i)}return e}deletePendingTiles(){for(const[,e]of this.pendingTiles)e.alive||this.deletePendingTile(e)}processPendingTiles(){const e={fetchCount:(e,t)=>this.fetchCount(e,t),fetchFeatures:(e,t,r)=>this.fetchFeatures(e,t,r),finish:(e,t)=>this.finishPendingTile(e,t),resume:()=>this.processPendingTiles()};if(this.ensureFetchAllCounts(e))for(const[,t]of this.pendingTiles)this.verifyTileComplexity(this.store.getFeatureCount(t.data),t.resolution)&&this.updatingHandles.addPromise(t.process(e))}verifyTileComplexity(e,t){return this.verifyVertexComplexity(e)&&this.verifyFeatureDensity(e,t)}verifyVertexComplexity(e){return e*this.minimumVerticesPerFeature<N}verifyFeatureDensity(e,t){if((0,o.b)(this.tileInfo))return!1;const r=this.tileSize*t;return e*(q/(r*r))<A}ensureFetchAllCounts(e){let t=!0;for(const[,r]of this.pendingTiles)r.state.type<2&&this.updatingHandles.addPromise(r.process(e)),r.state.type<=1&&(t=!1);return t}finishPendingTile(e,t){this.store.add(e.data,t),this.deletePendingTile(e),this.updateAvailability()}updateAvailability(){const e=this.collectMissingTilesInfo();this.setAvailability((0,o.b)(e)?1:e.coveredArea/e.fullArea)}setAvailability(e){this._set("availability",e)}createPendingTile(e,t){const r=new O(e,t);return this.pendingTiles.set(e.id,r),r}deletePendingTile(e){e.reset(),this.pendingTiles.delete(e.data.id)}async fetchCount(e,t){return this.store.fetchCount(e.data,this.url,this.createCountQuery(e),{query:this.customParameters,timeout:V,signal:t})}async fetchFeatures(e,t,r){let i,s=0,n=0,a=t;for(;;){const l=this.createFeaturesQuery(e),u=this.setPagingParameters(l,s,a),{features:c,exceededTransferLimit:d}=await this.queryFeatures(l,r);if(u&&(s+=(0,o.u)(l.num)),n+=c.length,i=i?i.concat(c):c,a=t-n,!u||!d||a<=0)return i}}filterProperties(e){return(0,o.b)(e)?{where:"1=1",gdbVersion:void 0,timeExtent:void 0}:{where:e.where||"1=1",timeExtent:e.timeExtent,gdbVersion:e.gdbVersion}}lookupObjectIdByGlobalId(e){const t=this.globalIdField,r=this.objectIdField;if((0,o.b)(t))throw new Error("Expected globalIdField to be defined");let i=null;if(this.store.featureStore.forEach((s=>{var n;e===s.attributes[t]&&(i=null!=(n=s.objectId)?n:s.attributes[r])})),(0,o.b)(i))throw new Error(`Expected to find a feature with globalId ${e}`);return i}queryFeaturesById(e,t){const r=this.createFeaturesQuery(null);return r.objectIds=e,this.queryFeatures(r,t)}queryFeatures(e,t){return this.capabilities.query.supportsFormatPBF?this.queryFeaturesPBF(e,t):this.queryFeaturesJSON(e,t)}async queryFeaturesPBF(e,t){const{sourceSpatialReference:r}=this,{data:i}=await(0,x.d)(this.url,e,new F.O({sourceSpatialReference:r}),{query:this.configuration.customParameters,timeout:V,signal:t});return(0,C.l)(i)}async queryFeaturesJSON(e,t){const{sourceSpatialReference:r}=this,{data:i}=await(0,x.b)(this.url,e,r,{query:this.configuration.customParameters,timeout:V,signal:t});return(0,C.m)(i,this.objectIdField)}createCountQuery(e){const t=this.createBaseQuery(e);return this.capabilities.query.supportsCacheHint&&(t.cacheHint=!0),t}createFeaturesQuery(e){const t=this.createBaseQuery(e);return t.outFields=this.globalIdField?[this.globalIdField,this.objectIdField]:[this.objectIdField],t.returnGeometry=!0,(0,o.i)(e)&&(this.capabilities.query.supportsResultType?t.resultType="tile":this.capabilities.query.supportsCacheHint&&(t.cacheHint=!0)),t}createBaseQuery(e){const t=new m.Z({returnZ:!1,returnM:!1,geometry:(0,o.i)(this.tileInfo)&&(0,o.i)(e)?(0,T.t)(e.data.extent,this.tileInfo.spatialReference):void 0}),r=this.configuration.filter;return(0,o.i)(r)&&(t.where=r.where,t.gdbVersion=r.gdbVersion,t.timeExtent=r.timeExtent),t.outSpatialReference=this.spatialReference,t}setPagingParameters(e,t,r){if(!this.capabilities.query.supportsPagination)return!1;const{supportsMaxRecordCountFactor:i,supportsCacheHint:s,tileMaxRecordCount:n,maxRecordCount:o,supportsResultType:a}=this.capabilities.query,l=i?m.Z.MAX_MAX_RECORD_COUNT_FACTOR:1,u=l*((a||s)&&n?n:o||M);return e.start=t,i?(e.maxRecordCountFactor=Math.min(l,Math.ceil(r/u)),e.num=Math.min(r,e.maxRecordCountFactor*u)):e.num=Math.min(r,u),!0}};(0,i._)([(0,u.Cb)({constructOnly:!0})],E.prototype,"url",void 0),(0,i._)([(0,u.Cb)({constructOnly:!0})],E.prototype,"objectIdField",void 0),(0,i._)([(0,u.Cb)({constructOnly:!0})],E.prototype,"globalIdField",void 0),(0,i._)([(0,u.Cb)({constructOnly:!0})],E.prototype,"capabilities",void 0),(0,i._)([(0,u.Cb)({constructOnly:!0})],E.prototype,"sourceSpatialReference",void 0),(0,i._)([(0,u.Cb)({constructOnly:!0})],E.prototype,"spatialReference",void 0),(0,i._)([(0,u.Cb)({constructOnly:!0})],E.prototype,"store",void 0),(0,i._)([(0,u.Cb)({readOnly:!0})],E.prototype,"minimumVerticesPerFeature",null),(0,i._)([(0,u.Cb)()],E.prototype,"filter",null),(0,i._)([(0,u.Cb)()],E.prototype,"customParameters",null),(0,i._)([(0,u.Cb)({readOnly:!0})],E.prototype,"configuration",null),(0,i._)([(0,u.Cb)()],E.prototype,"tileInfo",null),(0,i._)([(0,u.Cb)()],E.prototype,"tileSize",null),(0,i._)([(0,u.Cb)()],E.prototype,"tilesOfInterest",void 0),(0,i._)([(0,u.Cb)({readOnly:!0})],E.prototype,"updating",null),(0,i._)([(0,u.Cb)({readOnly:!0})],E.prototype,"availability",void 0),E=(0,i._)([(0,d.j)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiledFetcher")],E);const M=2e3,V=6e5,N=1e6,q=25,A=1;class U{constructor(){this._store=new Map,this._byteSize=0}set(e,t){this.delete(e),this._store.set(e,t),this._byteSize+=t.byteSize}delete(e){const t=this._store.get(e);return!!this._store.delete(e)&&(this._byteSize-=t.byteSize,!0)}get(e){return this.used(e),this._store.get(e)}has(e){return this.used(e),this._store.has(e)}clear(){this._store.clear()}applyByteSizeLimit(e,t){for(const[r,i]of this._store){if(this._byteSize<=e)break;this.delete(r),t(i)}}values(){return this._store.values()}[Symbol.iterator](){return this._store[Symbol.iterator]()}used(e){const t=this._store.get(e);t&&(this._store.delete(e),this._store.set(e,t))}}let B=class extends v.Z{constructor(e){super(e),this.tileInfo=null,this.extent=null,this.maximumByteSize=10485760,this.tileBounds=new h.B,this.tiles=new U,this.refCounts=new Map,this.tileFeatureCounts=new Map,this.tmpBoundingRect=(0,T.c)()}add(e,t){const r=[];for(const e of t)0===this.referenceFeature(e.objectId)&&r.push(e);this.addTileStorage(e,new Set(t.map((({objectId:e})=>e))),function(e){return e.reduce(((e,t)=>e+function(e){return 32+function(e){if((0,o.b)(e))return 0;const t=k(e.lengths,4);return 32+k(e.coords,8)+t}(e.geometry)+function(e){if(!e)return 0;let t=32;for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];switch(typeof i){case"string":t+=j(i);break;case"number":t+=16;break;case"boolean":t+=4}}return t}(e.attributes)}(t)),0)}(t)),this.featureStore.addMany(r),this.tiles.applyByteSizeLimit(this.maximumByteSize,(e=>this.removeTileStorage(e)))}destroy(){this.clear(),this.tileFeatureCounts.clear()}clear(){this.featureStore.clear(),this.tileBounds.clear(),this.tiles.clear(),this.refCounts.clear()}refresh(){this.clear(),this.tileFeatureCounts.clear()}processEdits(e,t,r){return this.processEditsDelete(e.deletedFeatures.concat(e.updatedFeatures)),this.processEditsRefetch(e.addedFeatures.concat(e.updatedFeatures),t,r)}addTileStorage(e,t,r){this.tiles.set(e.id,new Z(e,t,r)),this.tileBounds.set(e.id,e.extent),this.tileFeatureCounts.set(e.id,t.size)}remove({id:e}){const t=this.tiles.get(e);t&&this.removeTileStorage(t)}removeTileStorage(e){const t=[];for(const r of e.objectIds)1===this.unreferenceFeature(r)&&t.push(r);this.featureStore.removeManyById(t);const r=e.data.id;this.tiles.delete(r),this.tileBounds.delete(r)}processEditsDelete(e){this.featureStore.removeManyById(e);for(const[,t]of this.tiles){for(const r of e)t.objectIds.delete(r);this.tileFeatureCounts.set(t.data.id,t.objectIds.size)}for(const t of e)this.refCounts.delete(t)}async processEditsRefetch(e,t,r){const i=(await t(e,r)).features,{hasZ:s,hasM:n}=this.featureStore;for(const e of i){const t=(0,C.g)(this.tmpBoundingRect,e.geometry,s,n);(0,o.b)(t)||this.tileBounds.forEachInBounds(t,(t=>{const r=this.tiles.get(t);this.featureStore.add(e),r.objectIds.has(e.objectId)||(r.objectIds.add(e.objectId),this.referenceFeature(e.objectId),this.tileFeatureCounts.set(r.data.id,r.objectIds.size))}))}}process(e,t=(()=>!0)){if((0,o.b)(this.tileInfo)||!e.extent||(0,o.i)(this.extent)&&!(0,T.g)((0,T.n)(this.extent,this.tmpBoundingRect),e.extent))return new G(e);if(this.tiles.has(e.id))return new G(e);const r=this.createTileTree(e,this.tileInfo);return this.simplify(r,t,null,0,1),this.collectMissingTiles(e,r,this.tileInfo)}get debugInfo(){return Array.from(this.tiles.values()).map((({data:e})=>({data:e,featureCount:this.tileFeatureCounts.get(e.id)||0})))}getFeatureCount(e){const t=this.tileFeatureCounts.get(e.id);return null!=t?t:0}async fetchCount(e,t,r,i){const s=this.tileFeatureCounts.get(e.id);if(null!=s)return s;const n=await(0,x.e)(t,r,i);return this.tileFeatureCounts.set(e.id,n.data.count),n.data.count}createTileTree(e,t){const r=new z(e.level,e.row,e.col);return t.updateTileInfo(r,1),this.tileBounds.forEachInBounds(e.extent,(i=>{const s=this.tiles.get(i).data;this.tilesAreRelated(e,s)&&this.populateChildren(r,s,t,this.tileFeatureCounts.get(s.id)||0)})),r}tilesAreRelated(e,t){if(!e||!t)return!1;if(e.level===t.level)return e.row===t.row&&e.col===t.col;const r=e.level<t.level,i=r?e:t,s=r?t:e,n=1<<s.level-i.level;return Math.floor(s.row/n)===i.row&&Math.floor(s.col/n)===i.col}populateChildren(e,t,r,i){const s=t.level-e.level-1;if(s<0)return void(e.isLeaf=!0);const n=t.row>>s,a=t.col>>s,l=e.row<<1,u=a-(e.col<<1)+(n-l<<1),c=e.children[u];if((0,o.i)(c))this.populateChildren(c,t,r,i);else{const s=new z(e.level+1,n,a);r.updateTileInfo(s,1),e.children[u]=s,this.populateChildren(s,t,r,i)}}simplify(e,t,r,i,s){const n=s*s;if(e.isLeaf)return t(this.getFeatureCount(e),s)?0:(this.remove(e),(0,o.i)(r)&&(r.children[i]=null),n);const a=s/2,l=a*a;let u=0;for(let r=0;r<e.children.length;r++){const i=e.children[r];u+=(0,o.i)(i)?this.simplify(i,t,e,r,a):l}return 0===u?this.mergeChildren(e):1-u/n<H&&(this.purge(e),(0,o.i)(r)&&(r.children[i]=null),u=n),u}mergeChildren(e){const t=new Set;let r=0;this.forEachLeaf(e,(e=>{const i=this.tiles.get(e.id);if(i){r+=i.byteSize;for(const e of i.objectIds)t.has(e)||(t.add(e),this.referenceFeature(e));this.remove(e)}})),this.addTileStorage(e,t,r),e.isLeaf=!0,e.children[0]=e.children[1]=e.children[2]=e.children[3]=null,this.tileFeatureCounts.set(e.id,t.size)}forEachLeaf(e,t){for(const r of e.children)(0,o.b)(r)||(r.isLeaf?t(r):this.forEachLeaf(r,t))}purge(e){if(!(0,o.b)(e))if(e.isLeaf)this.remove(e);else for(let t=0;t<e.children.length;t++){const r=e.children[t];this.purge(r),e.children[t]=null}}collectMissingTiles(e,t,r){const i=new L(r,e,this.extent);return this.collectMissingTilesRecurse(t,i,1),i.info}collectMissingTilesRecurse(e,t,r){if(e.isLeaf)return;if(!e.hasChildren)return void t.addMissing(e.level,e.row,e.col,r);const i=r/2;for(let r=0;r<e.children.length;r++){const s=e.children[r];(0,o.b)(s)?t.addMissing(e.level+1,(e.row<<1)+((2&r)>>1),(e.col<<1)+(1&r),i):this.collectMissingTilesRecurse(s,t,i)}}referenceFeature(e){const t=(this.refCounts.get(e)||0)+1;return this.refCounts.set(e,t),1===t?0:2}unreferenceFeature(e){const t=(this.refCounts.get(e)||0)-1;return 0===t?(this.refCounts.delete(e),1):(t>0&&this.refCounts.set(e,t),2)}get test(){return{tiles:Array.from(this.tiles.values()).map((e=>`${e.data.id}:[${Array.from(e.objectIds)}]`)),featureReferences:Array.from(this.refCounts.keys()).map((e=>`${e}:${this.refCounts.get(e)}`))}}};(0,i._)([(0,u.Cb)({constructOnly:!0})],B.prototype,"featureStore",void 0),(0,i._)([(0,u.Cb)()],B.prototype,"tileInfo",void 0),(0,i._)([(0,u.Cb)()],B.prototype,"extent",void 0),(0,i._)([(0,u.Cb)()],B.prototype,"maximumByteSize",void 0),B=(0,i._)([(0,d.j)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTileStore")],B);class Z{constructor(e,t,r){this.data=e,this.objectIds=t,this.byteSize=r}}class z{constructor(e,t,r){this.level=e,this.row=t,this.col=r,this.isLeaf=!1,this.extent=null,this.children=[null,null,null,null]}get hasChildren(){return!this.isLeaf&&((0,o.i)(this.children[0])||(0,o.i)(this.children[1])||(0,o.i)(this.children[2])||(0,o.i)(this.children[3]))}}class G{constructor(e,t=[]){this.missingTiles=t,this.fullArea=0,this.coveredArea=0,this.fullArea=(0,T.x)(e.extent),this.coveredArea=this.fullArea}prepend(e){this.missingTiles=e.missingTiles.concat(this.missingTiles),this.coveredArea+=e.coveredArea,this.fullArea+=e.fullArea}}class L{constructor(e,t,r){this.tileInfo=e,this.extent=null,this.info=new G(t),(0,o.i)(r)&&(this.extent=(0,T.n)(r))}addMissing(e,t,r,i){const s={id:null,level:e,row:t,col:r};this.tileInfo.updateTileInfo(s,1),!(0,o.i)(s.extent)||(0,o.i)(this.extent)&&!(0,T.g)(this.extent,s.extent)||(this.info.missingTiles.push({data:s,resolution:i}),this.info.coveredArea-=(0,T.x)(s.extent))}}const H=.18751;let J=class extends s.E.EventedAccessor{constructor(){super(...arguments),this.isInitializing=!0,this.whenSetup=(0,a.dD)(),this.handles=new n.Z,this.updatingHandles=new _.W,this.pendingApplyEdits=new Map}get updating(){return this.featureFetcher.updating||this.isInitializing||this.updatingHandles.updating}destroy(){this.featureFetcher.destroy(),this.queryEngine.destroy(),this.featureStore.clear(),this.handles.destroy()}async setup(e){const{geometryType:t,objectIdField:r,timeInfo:i,fields:s}=e.serviceInfo;return this.featureStore=new h.F({...e.serviceInfo,hasZ:!1,hasM:!1}),this.queryEngine=new y.Q({spatialReference:e.spatialReference,featureStore:this.featureStore,geometryType:t,fields:s,hasZ:!1,hasM:!1,objectIdField:r,timeInfo:i?f.Z.fromJSON(i):null}),this.featureFetcher=new E({store:new B({featureStore:this.featureStore}),url:e.serviceInfo.url,objectIdField:e.serviceInfo.objectIdField,globalIdField:e.serviceInfo.globalIdField,capabilities:e.serviceInfo.capabilities,spatialReference:p.Z.fromJSON(e.spatialReference),sourceSpatialReference:p.Z.fromJSON(e.serviceInfo.spatialReference)}),this.handles.add([this.featureFetcher.watch("availability",(e=>this.emit("notify-availability",{availability:e})),!0),this.watch("updating",(()=>this.notifyUpdating()))]),this.whenSetup.resolve(),this.isInitializing=!1,this.configure(e.configuration)}async configure(e){return await this.updatingHandles.addPromise(this.whenSetup.promise),this.updateFeatureFetcherConfiguration(e),{result:{}}}async fetchCandidates(e,t){return await this.whenSetup.promise,(0,a.k_)(t),{result:await this.queryEngine.executeQueryForSnapping({point:e.point,distance:e.distance,types:e.types,query:(0,o.i)(e.filter)?e.filter:{where:"1=1"}},(0,o.i)(t)?t.signal:null)}}async updateTiles(e,t){return await this.updatingHandles.addPromise(this.whenSetup.promise),(0,a.k_)(t),this.featureFetcher.tileSize=e.tileSize,this.featureFetcher.tilesOfInterest=e.tiles,this.featureFetcher.tileInfo=(0,o.i)(e.tileInfo)?g.Z.fromJSON(e.tileInfo):null,{result:{}}}async refresh(e,t){return await this.updatingHandles.addPromise(this.whenSetup.promise),(0,a.k_)(t),this.featureFetcher.refresh(),{result:{}}}async whenNotUpdating(e,t){return await this.updatingHandles.addPromise(this.whenSetup.promise),(0,a.k_)(t),await(0,a.Hl)((0,l.cm)(this,"updating"),t),{result:{}}}async getDebugInfo(e,t){return(0,a.k_)(t),{result:this.featureFetcher.debugInfo}}async beginApplyEdits(e,t){this.updatingHandles.addPromise(this.whenSetup.promise),(0,a.k_)(t);const r=(0,a.dD)();return this.pendingApplyEdits.set(e.id,r),this.featureFetcher.applyEdits(r.promise),this.updatingHandles.addPromise(r.promise),{result:{}}}async endApplyEdits(e,t){const r=this.pendingApplyEdits.get(e.id);return r&&r.resolve(e.edits),(0,a.k_)(t),{result:{}}}updateFeatureFetcherConfiguration(e){this.featureFetcher.filter=(0,o.i)(e.filter)?m.Z.fromJSON(e.filter):null,this.featureFetcher.customParameters=e.customParameters}notifyUpdating(){this.emit("notify-updating",{updating:this.updating})}};function Q(){return new J}(0,i._)([(0,u.Cb)({readOnly:!0})],J.prototype,"updating",null),(0,i._)([(0,u.Cb)()],J.prototype,"isInitializing",void 0),J=(0,i._)([(0,d.j)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceSnappingSourceWorker")],J)},41864:(e,t,r)=>{r.d(t,{a:()=>l,f:()=>n,m:()=>o,r:()=>a});var i=r(76506),s=r(50406);function n(e,t,r){return(0,s.as)(e.map(((e,i)=>t.apply(r,[e,i]))))}function o(e,t,r){return(0,s.as)(e.map(((e,i)=>t.apply(r,[e,i])))).then((e=>e.map((e=>e.value))))}function a(e){return(0,i.b)(e)?(0,s.DB)():e.then((e=>({ok:!0,value:e}))).catch((e=>({ok:!1,error:e})))}function l(e){return e.then((e=>({ok:!0,value:e}))).catch((e=>((0,s.r9)(e),{ok:!1,error:e})))}},9801:(e,t,r)=>{r.d(t,{f:()=>l,t:()=>a}),r(76506);var i=r(53523),s=r(42911),n=r(46826),o=r(45433);const a={key:"type",base:s.Z,typeMap:{range:o.Z,"coded-value":i.Z,inherited:n.Z}};function l(e){if(!e||!e.type)return null;switch(e.type){case"range":return o.Z.fromJSON(e);case"codedValue":return i.Z.fromJSON(e);case"inherited":return n.Z.fromJSON(e)}return null}},59465:(e,t,r)=>{r.d(t,{e:()=>n});var i=r(57251),s=r(34250);function n(e,t={}){var r;const n=e instanceof i.J?e:new i.J(e,t),o={type:null==(r=null==t?void 0:t.ignoreUnknown)||r?n.apiValues:String,readOnly:null==t?void 0:t.readOnly,json:{type:n.jsonValues,read:(null==t||!t.readOnly)&&{reader:n.read},write:{writer:n.write}}};return void 0!==(null==t?void 0:t.default)&&(o.json.default=t.default),void 0!==(null==t?void 0:t.name)&&(o.json.name=t.name),(0,s.Cb)(o)}},54732:(e,t,r)=>{r.d(t,{k:()=>i});const i=new(r(57251).J)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},11385:(e,t,r)=>{r.d(t,{P:()=>a});var i=r(76506),s=r(91055);const n=(0,i.h)("esri-text-decoder")?new TextDecoder("utf-8"):null,o=(0,i.h)("safari")||(0,i.h)("ios")?6:(0,i.h)("ff")?12:32;class a{constructor(e,t,r=0,i=(e?e.byteLength:0)){this._tag=0,this._dataType=99,this.init(e,t,r,i)}init(e,t,r,i){this._data=e,this._dataView=t,this._pos=r,this._end=i}clone(){return new a(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(e){this._pos=e}nextTag(e){for(;;){if(this._pos===this._end)return!1;const t=this._decodeVarint();if(this._tag=t>>3,this._dataType=7&t,!e||e===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const e=this._decodeVarint();return this._tag=e>>3,this._dataType=7&e,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let e=4294967295;return e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?e:(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?e:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const e=this.getUInt32();return e>>>1^-(1&e)|0}getSInt64(){return this._decodeSVarint()}getBool(){const e=0!==this._data[this._pos];return this._skip(1),e}getEnum(){return this._decodeVarint()}getFixed64(){const e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+4294967296*e.getUint32(t+4,!0);return this._skip(8),r}getSFixed64(){const e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+4294967296*e.getInt32(t+4,!0);return this._skip(8),r}getDouble(){const e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e}getFixed32(){const e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e}getSFixed32(){const e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e}getFloat(){const e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e}getString(){const e=this._getLength(),t=this._pos,r=this._toString(this._data,t,t+e);return this._skip(e),r}getBytes(){const e=this._getLength(),t=this._pos,r=this._toBytes(this._data,t,t+e);return this._skip(e),r}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(e,t,r,i){const s=this.getMessage(),n=e(s,t,r,i);return s.release(),n}processMessage(e){const t=this.getMessage(),r=e(t);return t.release(),r}getMessage(){const e=this._getLength(),t=a.pool.acquire();return t.init(this._data,this._dataView,this._pos,this._pos+e),this._skip(e),t}release(){a.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(e){this._skip(e)}_skip(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e}_decodeVarint(){const e=this._data;let t,r=this._pos,i=0;if(this._end-r>=10)do{if(t=e[r++],i|=127&t,0==(128&t))break;if(t=e[r++],i|=(127&t)<<7,0==(128&t))break;if(t=e[r++],i|=(127&t)<<14,0==(128&t))break;if(t=e[r++],i|=(127&t)<<21,0==(128&t))break;if(t=e[r++],i+=268435456*(127&t),0==(128&t))break;if(t=e[r++],i+=34359738368*(127&t),0==(128&t))break;if(t=e[r++],i+=4398046511104*(127&t),0==(128&t))break;if(t=e[r++],i+=562949953421312*(127&t),0==(128&t))break;if(t=e[r++],i+=72057594037927940*(127&t),0==(128&t))break;if(t=e[r++],i+=0x8000000000000000*(127&t),0==(128&t))break;throw new Error("Varint too long!")}while(0);else{let s=1;for(;r!==this._end&&(t=e[r],0!=(128&t));)++r,i+=(127&t)*s,s*=128;if(r===this._end)throw new Error("Varint overrun!");++r,i+=t*s}return this._pos=r,i}_decodeSVarint(){const e=this._decodeVarint();return e%2?-(e+1)/2:e/2}_getLength(){if(2!==this._dataType)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(e,t,r){if((r=Math.min(this._end,r))-t>o&&n){const i=e.subarray(t,r);return n.decode(i)}let i="",s="";for(let n=t;n<r;++n){const t=e[n];128&t?s+="%"+t.toString(16):(i+=decodeURIComponent(s)+String.fromCharCode(t),s="")}return s.length&&(i+=decodeURIComponent(s)),i}_toBytes(e,t,r){return r=Math.min(this._end,r),new Uint8Array(e.buffer,t,r-t)}}a.pool=new s.O(a,null,(e=>{e._data=null,e._dataView=null}))},76733:(e,t,r)=>{r.d(t,{O:()=>d,a:()=>I,b:()=>g,p:()=>P});var i=r(60991),s=r(76506),n=r(11385),o=r(85674),a=r(53785),l=r(60947),u=r(9006);const c=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class d{constructor(e){this.options=e,this.geometryTypes=c,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new u.O}prepareFeatures(e){this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++}finishFeatureResult(e){if(!e||!e.features||!e.hasZ||!this.options.sourceSpatialReference||!e.spatialReference||(0,l.e)(e.spatialReference,this.options.sourceSpatialReference)||e.spatialReference.vcsWkid)return;const t=(0,a.d)(this.options.sourceSpatialReference)/(0,a.d)(e.spatialReference);if(1!==t)for(const r of e.features){if(!(0,o.h)(r))continue;const e=r.geometry.coords;for(let r=2;r<e.length;r+=3)e[r]*=t}}addFeature(e,t){e.features.push(t)}createFeature(){return new o.a}createSpatialReference(){return{wkid:0}}createGeometry(){return new o.O}addField(e,t){e.fields.push(t)}allocateCoordinates(e){e.coords.length=e.lengths.reduce(((e,t)=>e+t),0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(e,t){e.coords[this._coordinatePtr++]=t}addCoordinatePoint(e,t){e.coords.push(t)}addLength(e,t){e.lengths.push(t)}addQueryGeometry(e,t){e.queryGeometry=t.queryGeometry,e.queryGeometryType=t.queryGeometryType}createPointGeometry(){return new o.O}}const p=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],h=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],y=["upperLeft","lowerLeft"];function g(e){return e>=p.length?null:p[e]}function f(e){return e>=y.length?null:y[e]}function m(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function b(e,t,r){const i=t.createPointGeometry(r);for(;e.next();)switch(e.tag()){case 3:{const r=e.getUInt32(),s=e.pos()+r;let n=0;for(;e.pos()<s;)t.addCoordinatePoint(i,e.getSInt64(),n++);break}default:e.skip()}return i}function v(e,t,r){const i=t.createGeometry(r),s=2+(r.hasZ?1:0)+(r.hasM?1:0);for(;e.next();)switch(e.tag()){case 2:{const r=e.getUInt32(),s=e.pos()+r;let n=0;for(;e.pos()<s;)t.addLength(i,e.getUInt32(),n++);break}case 3:{const r=e.getUInt32(),n=e.pos()+r;let o=0;for(t.allocateCoordinates(i);e.pos()<n;)t.addCoordinate(i,e.getSInt64(),o),o++,o===s&&(o=0);break}default:e.skip()}return i}function _(e){const t=new o.O;let r="esriGeometryPoint";for(;e.next();)switch(e.tag()){case 2:{const r=e.getUInt32(),i=e.pos()+r;for(;e.pos()<i;)t.lengths.push(e.getUInt32());break}case 3:{const r=e.getUInt32(),i=e.pos()+r;for(;e.pos()<i;)t.coords.push(e.getSInt64());break}case 1:r=c[e.getEnum()];break;default:e.skip()}return{queryGeometry:t,queryGeometryType:r}}function w(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}function S(e){const t={type:g(0)};for(;e.next();)switch(e.tag()){case 1:t.name=e.getString();break;case 2:t.type=g(e.getEnum());break;case 3:t.alias=e.getString();break;case 4:t.sqlType=(r=e.getEnum())>=h.length?null:h[r];break;case 5:e.skip();break;case 6:t.defaultValue=e.getString();break;default:e.skip()}var r;return t}function T(e){const t={};for(;e.next();)switch(e.tag()){case 1:t.name=e.getString();break;case 2:t.isSystemMaintained=e.getBool();break;default:e.skip()}return t}function C(e,t,r,i){const s=t.createFeature(r);let n=0;for(;e.next();)switch(e.tag()){case 1:{const t=i[n++].name;s.attributes[t]=e.processMessage(w);break}case 2:s.geometry=e.processMessageWithArgs(v,t,r);break;case 4:s.centroid=e.processMessageWithArgs(b,t,r);break;default:e.skip()}return s}function F(e){const t=[1,1,1,1];for(;e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function x(e){const t=[0,0,0,0];for(;e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function I(e){const t={originPosition:f(0)};for(;e.next();)switch(e.tag()){case 1:t.originPosition=f(e.getEnum());break;case 2:t.scale=e.processMessage(F);break;case 3:t.translate=e.processMessage(x);break;default:e.skip()}return t}function j(e){const t={};for(;e.next();)switch(e.tag()){case 1:t.shapeAreaFieldName=e.getString();break;case 2:t.shapeLengthFieldName=e.getString();break;case 3:t.units=e.getString();break;default:e.skip()}return t}function k(e,t){const r=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:r.wkid=e.getUInt32();break;case 5:r.wkt=e.getString();break;case 2:r.latestWkid=e.getUInt32();break;case 3:r.vcsWkid=e.getUInt32();break;case 4:r.latestVcsWkid=e.getUInt32();break;default:e.skip()}return r}function R(e,t){const r=t.createFeatureResult();r.geometryType=m(t,0);let i=!1;for(;e.next();)switch(e.tag()){case 1:r.objectIdFieldName=e.getString();break;case 3:r.globalIdFieldName=e.getString();break;case 4:r.geohashFieldName=e.getString();break;case 5:r.geometryProperties=e.processMessage(j);break;case 7:r.geometryType=m(t,e.getEnum());break;case 8:r.spatialReference=e.processMessageWithArgs(k,t);break;case 10:r.hasZ=e.getBool();break;case 11:r.hasM=e.getBool();break;case 12:r.transform=e.processMessage(I);break;case 9:{const t=e.getBool();r.exceededTransferLimit=t;break}case 13:t.addField(r,e.processMessage(S));break;case 15:i||(t.prepareFeatures(r),i=!0),t.addFeature(r,e.processMessageWithArgs(C,t,r,r.fields));break;case 2:r.uniqueIdField=e.processMessage(T);break;default:e.skip()}return t.finishFeatureResult(r),r}function O(e,t){const r={};let i=null;for(;e.next();)switch(e.tag()){case 4:i=e.processMessageWithArgs(_);break;case 1:r.featureResult=e.processMessageWithArgs(R,t);break;default:e.skip()}return(0,s.i)(i)&&r.featureResult&&t.addQueryGeometry(r,i),r}function P(e,t){const r=function(e,t){try{const r=2,i=new n.P(new Uint8Array(e),new DataView(e)),s={};for(;i.next();)i.tag()===r?s.queryResult=i.processMessageWithArgs(O,t):i.skip();return s}catch(e){throw new i.Z("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:e})}}(e,t),s=r.queryResult.featureResult,o=r.queryResult.queryGeometry,a=r.queryResult.queryGeometryType;if(s&&s.features&&s.features.length&&s.objectIdFieldName){const e=s.objectIdFieldName;for(const t of s.features)t.attributes&&(t.objectId=t.attributes[e])}return s&&(s.queryGeometry=o,s.queryGeometryType=a),s}},49214:(e,t,r)=>{r.r(t),r.d(t,{a:()=>g,b:()=>p,c:()=>m,d:()=>h,e:()=>f,f:()=>y,m:()=>c,q:()=>v,r:()=>b});var i=r(82058),s=r(76506),n=r(32101),o=r(32422),a=r(95533),l=r(76733),u=r(55823);function c(e){const t={};for(const r in e){if("declaredClass"===r)continue;const i=e[r];if(null!=i&&"function"!=typeof i)if(Array.isArray(i)){t[r]=[];for(let e=0;e<i.length;e++)t[r][e]=c(i[e])}else"object"==typeof i?i.toJSON&&(t[r]=JSON.stringify(i)):t[r]=i}return t}function d(e,t){const r=e.geometry,i=e.toJSON(),n=i;if((0,s.i)(r)&&(n.geometry=JSON.stringify(r),n.geometryType=(0,o.Ji)(r),n.inSR=r.spatialReference.wkid||JSON.stringify(r.spatialReference)),i.groupByFieldsForStatistics&&(n.groupByFieldsForStatistics=i.groupByFieldsForStatistics.join(",")),i.objectIds&&(n.objectIds=i.objectIds.join(",")),i.orderByFields&&(n.orderByFields=i.orderByFields.join(",")),!i.outFields||!i.returnDistinctValues&&(null!=t&&t.returnCountOnly||null!=t&&t.returnExtentOnly||null!=t&&t.returnIdsOnly)?delete n.outFields:-1!==i.outFields.indexOf("*")?n.outFields="*":n.outFields=i.outFields.join(","),i.outSR?n.outSR=i.outSR.wkid||JSON.stringify(i.outSR):r&&(i.returnGeometry||i.returnCentroid)&&(n.outSR=n.inSR),i.returnGeometry&&delete i.returnGeometry,i.outStatistics&&(n.outStatistics=JSON.stringify(i.outStatistics)),i.pixelSize&&(n.pixelSize=JSON.stringify(i.pixelSize)),i.quantizationParameters&&(n.quantizationParameters=JSON.stringify(i.quantizationParameters)),i.parameterValues&&(n.parameterValues=JSON.stringify(i.parameterValues)),i.rangeValues&&(n.rangeValues=JSON.stringify(i.rangeValues)),i.dynamicDataSource&&(n.layer=JSON.stringify({source:i.dynamicDataSource}),delete i.dynamicDataSource),i.timeExtent){const e=i.timeExtent,{start:t,end:r}=e;null==t&&null==r||(n.time=t===r?t:`${null==t?"null":t},${null==r?"null":r}`),delete i.timeExtent}return n}async function p(e,t,r,i){const n=(0,s.i)(t.timeExtent)&&t.timeExtent.isEmpty?{data:{features:[]}}:await b(e,t,"json",i);return(0,u.a)(t,r,n.data),n}async function h(e,t,r,i){if((0,s.i)(t.timeExtent)&&t.timeExtent.isEmpty)return Promise.resolve({data:r.createFeatureResult()});const n=await y(e,t,i),o=n;return o.data=(0,l.p)(n.data,r),o}function y(e,t,r){return b(e,t,"pbf",r)}function g(e,t,r){return(0,s.i)(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):b(e,t,"json",r,{returnIdsOnly:!0})}function f(e,t,r){return(0,s.i)(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):b(e,t,"json",r,{returnIdsOnly:!0,returnCountOnly:!0})}function m(e,t,r){return(0,s.i)(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):b(e,t,"json",r,{returnExtentOnly:!0,returnCountOnly:!0}).then((e=>{const t=e.data;if(t.hasOwnProperty("extent"))return e;if(t.features)throw new Error("Layer does not support extent calculation.");if(t.hasOwnProperty("count"))throw new Error("Layer does not support extent calculation.");return e}))}function b(e,t,r,o={},l={}){const u="string"==typeof e?(0,n.mN)(e):e,p=t.geometry?[t.geometry]:[];return o.responseType="pbf"===r?"array-buffer":"json",(0,a.aX)(p,null,o).then((e=>{const a=e&&e[0];(0,s.i)(a)&&((t=t.clone()).geometry=a);const p=c({...u.query,f:r,...l,...d(t,l)});return(0,i.default)((0,n.v_)(u.path,"query"),{...o,query:{...p,...o.query}})}))}var v=Object.freeze({__proto__:null,queryToQueryStringParameters:d,executeQuery:p,executeQueryPBF:h,executeQueryPBFBuffer:y,executeQueryForIds:g,executeQueryForCount:f,executeQueryForExtent:m,runQuery:b})},55823:(e,t,r)=>{r.d(t,{a:()=>s});var i=r(92847);function s(e,t,r){if(!r||!r.features||!r.hasZ)return;const s=(0,i.g)(r.geometryType,t,e.outSpatialReference);if(s)for(const e of r.features)s(e.geometry)}},35197:(e,t,r)=>{r.d(t,{c:()=>a,o:()=>n,t:()=>o}),r(76506);const i={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},s={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function n(e,t,r){const i=new Date(e.getTime());if(t&&r){const e=s[r],{getter:n,setter:o,multiplier:a}=e;i[o](i[n]()+t*a)}return i}function o(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function a(e,t,r){return 0===e?0:e*i[t]/i[r]}},92847:(e,t,r)=>{r.d(t,{g:()=>o,u:()=>l});var i=r(76506),s=r(53785),n=r(60947);function o(e,t,r){if((0,i.b)(t)||(0,i.b)(r)||r.vcsWkid||(0,n.e)(t,r))return null;const o=(0,s.d)(t)/(0,s.d)(r);if(1===o)return null;switch(e){case"point":case"esriGeometryPoint":return e=>{return r=o,void((t=e)&&null!=t.z&&(t.z*=r));var t,r};case"polyline":case"esriGeometryPolyline":return e=>function(e,t){if(e)for(const r of e.paths)for(const e of r)e.length>2&&(e[2]*=t)}(e,o);case"polygon":case"esriGeometryPolygon":return e=>function(e,t){if(e)for(const r of e.rings)for(const e of r)e.length>2&&(e[2]*=t)}(e,o);case"multipoint":case"esriGeometryMultipoint":return e=>function(e,t){if(e)for(const r of e.points)r.length>2&&(r[2]*=t)}(e,o);default:return null}}function a(e,t,r){if(null==e.hasM||e.hasZ)for(const e of t)for(const t of e)t.length>2&&(t[2]*=r)}function l(e,t,r){if(!e&&!t||!r)return;const i=(0,s.d)(r);u(e,r,i),u(t,r,i)}function u(e,t,r){if(e)for(const i of e)c(i.geometry,t,r)}function c(e,t,r){if((0,i.b)(e)||!e.spatialReference||(0,n.e)(e.spatialReference,t))return;const o=(0,s.d)(e.spatialReference)/r;if(1!==o)if("x"in e)null!=e.z&&(e.z*=o);else if("rings"in e)a(e,e.rings,o);else if("paths"in e)a(e,e.paths,o);else if("points"in e&&(null==e.hasM||e.hasZ))for(const t of e.points)t.length>2&&(t[2]*=o)}},95873:(e,t,r)=>{r.d(t,{r:()=>y,p:()=>h,W:()=>d});var i=r(29768),s=r(21972),n=r(82933),o=r(34250),a=r(17533),l=r(76506),u=r(6906),c=r(617);r(23639),r(92143),r(31450),r(71552),r(40642),r(86656),r(22723),r(91055),r(27794),r(91306),r(81172),r(50406),r(60991),r(15324),r(76996);let d=class extends s.Z{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new n.Z,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(e,t,r,i=0){const s=0!=(1&i),n=++this.handleId;s||this.installSyncUpdatingWatch(e,t,n);const o=0!=(2&i)?(0,c.S1)(e,t,r,s):e.watch(t,r,s);return this.handles.add(o,n),{remove:()=>this.handles.remove(n)}}addOnCollectionPropertyChange(e,t,r,i=0){const s=0!=(2&i),n=++this.handleId;return this.handles.add([(0,c.on)(e,t,"after-changes",this.createSyncUpdatingCallback()),(0,c.on)(e,t,"change",r,s?e=>{r({added:e.items,removed:[],moved:[],target:e})}:void 0)],n),{remove:()=>{this.handles.remove(n)}}}addOnCollectionChange(e,t,r=0){const i=0!=(2&r),s=++this.handleId;return this.handles.add([e.on("after-changes",this.createSyncUpdatingCallback()),e.on("change",t)],s),i&&t({added:e.items,removed:[],moved:[],target:e}),{remove:()=>{this.handles.remove(s)}}}addPromise(e){if((0,l.b)(e))return e;const t=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(0!==this.pendingPromises.size||this.handles.has(p)||this._set("updating",!1))}},t),this.pendingPromises.add(e),this._set("updating",!0);const r=()=>this.handles.remove(t);return e.then(r,r),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}installSyncUpdatingWatch(e,t,r){const i=this.createSyncUpdatingCallback(),n=(0,s.r)((()=>(0,o.v)(e,t)),i);return this.handles.add(n,r),n}createSyncUpdatingCallback(){return()=>{this.handles.remove(p),++this.scheduleHandleId;const e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add((0,u.Os)((()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(p))})),p)}}};(0,i._)([(0,o.Cb)({readOnly:!0})],d.prototype,"updating",void 0),d=(0,i._)([(0,a.j)("esri.views.support.WatchUpdatingTracking")],d);const p=-42,h=e=>{let t=class extends e{destroy(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy())}get handles(){return this._get("handles")||new n.Z}get updatingHandles(){return this._get("updatingHandles")||new d}};return(0,i._)([(0,o.Cb)({readOnly:!0})],t.prototype,"handles",null),(0,i._)([(0,o.Cb)({readOnly:!0})],t.prototype,"updatingHandles",null),t=(0,i._)([(0,a.j)("esri.core.HandleOwner")],t),t};let y=class extends(h(s.Z)){};y=(0,i._)([(0,a.j)("esri.core.HandleOwner")],y)},82933:(e,t,r)=>{r.d(t,{Z:()=>c});var i=r(29768),s=r(21972),n=r(15324),o=r(76506),a=r(34250),l=r(17533);r(23639),r(92143),r(31450),r(71552),r(40642),r(86656),r(22723),r(91055),r(27794),r(6906),r(50406),r(60991),r(81172),r(91306),r(76996);let u=class extends s.Z{constructor(e){super(e),this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach((t=>{e+=t.length})),e}add(e,t){if(!this._isHandle(e)&&!Array.isArray(e)&&!n.Z.isCollection(e))return this;const r=this._getOrCreateGroup(t);return Array.isArray(e)||n.Z.isCollection(e)?e.forEach((e=>this._isHandle(e)&&r.push(e))):r.push(e),this.notifyChange("size"),this}forEach(e,t){if("function"==typeof e)this._groups.forEach((t=>t.forEach(e)));else{const r=this._getGroup(e);r&&t&&r.forEach(t)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(Array.isArray(e)||n.Z.isCollection(e))return e.forEach(this.remove,this),this;if(!this.has(e))return this;const t=this._getGroup(e);for(let e=0;e<t.length;e++)t[e].remove();return this._deleteGroup(e),this.notifyChange("size"),this}removeAll(){return this._groups.forEach((e=>{for(let t=0;t<e.length;t++)e[t].remove()})),this._groups.clear(),this.notifyChange("size"),this}_isHandle(e){return e&&!!e.remove}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const t=[];return this._groups.set(this._ensureGroupKey(e),t),t}_getGroup(e){return(0,o.a)(this._groups.get(this._ensureGroupKey(e)))}_deleteGroup(e){return this._groups.delete(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}};(0,i._)([(0,a.Cb)({readOnly:!0})],u.prototype,"size",null),u=(0,i._)([(0,l.j)("esri.core.Handles")],u);var c=u},617:(e,t,r)=>{r.d(t,{S1:()=>n,on:()=>c,OY:()=>u,cm:()=>a,N1:()=>o,LR:()=>l,tH:()=>d});var i=r(50406);r(76506),r(60991),r(92143),r(31450),r(71552),r(40642),r(81172);const s=/\?(\.|$)/g;function n(e,t,r,i){const n=Array.isArray(t)?t:t.indexOf(",")>-1?t.split(","):[t],o=function(e,t,r,i){return e.watch(t,r,i)}(e,t,r,i);for(const t of n){const i=t.trim().replace(s,"$1"),n=e.get(i);r.call(e,n,n,i,e)}return o}function o(e,t,r,i){return d(e,t,p,r,i)}function a(e,t,r,i){return d(e,t,h,r,i)}function l(e,t,r,i){return d(e,t,y,r,i)}function u(e,t,r,i){return d(e,t,g,r,i)}function c(e,t,r,s,o,a,l){const u={};function c(t){const i=u[t];i&&(a&&a(i.target,t,e,r),i.handle.remove(),delete u[t])}const d=n(e,t,((t,n,a)=>{c(a),(0,i.i)(t)&&(u[a]={handle:(0,i.o)(t,r,s),target:t},o&&o(t,a,e,r))}),l);return{remove(){d.remove();for(const e in u)c(e)}}}function d(e,t,r,s,n){const o="function"==typeof s?s:null,a="object"==typeof s?s:null;"boolean"==typeof s&&(n=s);let l,u=!1;function c(){l&&(l.remove(),l=null)}const d=(0,i.dD)();(0,i.fu)(a,(()=>{c(),d.reject((0,i.zE)())}));const p={then:d.promise.then.bind(d.promise),catch:d.promise.catch.bind(d.promise),remove:c};return Object.freeze(p),l=function(e,t,r,i,s){const n=e.watch(t,((t,s,n,o)=>{r&&!r(t)||null==i||i.call(e,t,s,n,o)}),s);if(Array.isArray(t))for(const s of t){const n=e.get(s);r&&r(n)&&(null==i||i.call(e,n,n,t,e))}else{const s=e.get(t);r&&r(s)&&(null==i||i.call(e,s,s,t,e))}return n}(e,t,r,((t,r,i,s)=>{u=!0,c(),o&&o.call(e,t,r,i,s),d.resolve({value:t,oldValue:r,propertyName:i,target:s})}),n),u&&c(),p}function p(e){return!!e}function h(e){return!e}function y(e){return!0===e}function g(e){return!1===e}},53523:(e,t,r)=>{r.d(t,{Z:()=>g});var i,s=r(29768),n=r(76506),o=r(34250),a=(r(91306),r(92143),r(59465)),l=r(17533),u=r(74673),c=r(42911);r(86656),r(22723),r(31450),r(71552),r(40642),r(57251),r(81172),r(21972),r(23639),r(91055),r(27794),r(6906),r(50406),r(60991);let d=i=class extends u.a{constructor(e){super(e),this.name=null,this.code=null}clone(){return new i({name:this.name,code:this.code})}};(0,s._)([(0,o.Cb)({type:String,json:{write:!0}})],d.prototype,"name",void 0),(0,s._)([(0,o.Cb)({type:[String,Number],json:{write:!0}})],d.prototype,"code",void 0),d=i=(0,s._)([(0,l.j)("esri.layers.support.CodedValue")],d);var p,h=d;let y=p=class extends c.Z{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const r=String(e);this.codedValues.some((e=>(String(e.code)===r&&(t=e.name),!!t)))}return t}clone(){return new p({codedValues:(0,n.d9)(this.codedValues),name:this.name})}};(0,s._)([(0,o.Cb)({type:[h],json:{write:!0}})],y.prototype,"codedValues",void 0),(0,s._)([(0,a.e)({codedValue:"coded-value"})],y.prototype,"type",void 0),y=p=(0,s._)([(0,l.j)("esri.layers.support.CodedValueDomain")],y);var g=y},42911:(e,t,r)=>{r.d(t,{Z:()=>d});var i=r(29768),s=r(57251),n=r(74673),o=r(34250),a=(r(76506),r(91306),r(92143),r(59465)),l=r(17533);r(71552),r(21972),r(23639),r(86656),r(22723),r(91055),r(27794),r(6906),r(50406),r(60991),r(81172),r(31450),r(40642);const u=new s.J({inherited:"inherited",codedValue:"coded-value",range:"range"});let c=class extends n.a{constructor(e){super(e),this.name=null,this.type=null}};(0,i._)([(0,o.Cb)({type:String,json:{write:!0}})],c.prototype,"name",void 0),(0,i._)([(0,a.e)(u)],c.prototype,"type",void 0),c=(0,i._)([(0,l.j)("esri.layers.support.Domain")],c);var d=c},97546:(e,t,r)=>{r.d(t,{Z:()=>f});var i,s=r(29768),n=r(57251),o=r(74673),a=r(34250),l=(r(76506),r(91306)),u=(r(92143),r(59465)),c=r(97714),d=r(17533),p=r(9801),h=r(54732);r(71552),r(21972),r(23639),r(86656),r(22723),r(91055),r(27794),r(6906),r(50406),r(60991),r(81172),r(31450),r(40642),r(53523),r(42911),r(46826),r(45433);const y=new n.J({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let g=i=class extends o.a{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null}readDescription(e,{description:t}){let r;try{r=JSON.parse(t)}catch(e){}return r?r.value:null}readValueType(e,{description:t}){let r;try{r=JSON.parse(t)}catch(e){}return r?y.fromJSON(r.fieldValueType):null}clone(){return new i({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}};(0,s._)([(0,a.Cb)({type:String,json:{write:!0}})],g.prototype,"alias",void 0),(0,s._)([(0,a.Cb)({type:[String,Number],json:{write:{allowNull:!0}}})],g.prototype,"defaultValue",void 0),(0,s._)([(0,a.Cb)()],g.prototype,"description",void 0),(0,s._)([(0,c.r)("description")],g.prototype,"readDescription",null),(0,s._)([(0,a.Cb)({types:p.t,json:{read:{reader:p.f},write:!0}})],g.prototype,"domain",void 0),(0,s._)([(0,a.Cb)({type:Boolean,json:{write:!0}})],g.prototype,"editable",void 0),(0,s._)([(0,a.Cb)({type:l.I,json:{write:!0}})],g.prototype,"length",void 0),(0,s._)([(0,a.Cb)({type:String,json:{write:!0}})],g.prototype,"name",void 0),(0,s._)([(0,a.Cb)({type:Boolean,json:{write:!0}})],g.prototype,"nullable",void 0),(0,s._)([(0,u.e)(h.k)],g.prototype,"type",void 0),(0,s._)([(0,a.Cb)()],g.prototype,"valueType",void 0),(0,s._)([(0,c.r)("valueType",["description"])],g.prototype,"readValueType",null),g=i=(0,s._)([(0,d.j)("esri.layers.support.Field")],g);var f=g},46826:(e,t,r)=>{r.d(t,{Z:()=>u});var i,s=r(29768),n=(r(34250),r(76506),r(91306),r(92143),r(59465)),o=r(17533),a=r(42911);r(86656),r(22723),r(31450),r(71552),r(40642),r(57251),r(81172),r(74673),r(21972),r(23639),r(91055),r(27794),r(6906),r(50406),r(60991);let l=i=class extends a.Z{constructor(e){super(e),this.type="inherited"}clone(){return new i}};(0,s._)([(0,n.e)({inherited:"inherited"})],l.prototype,"type",void 0),l=i=(0,s._)([(0,o.j)("esri.layers.support.InheritedDomain")],l);var u=l},45433:(e,t,r)=>{r.d(t,{Z:()=>c});var i,s=r(29768),n=r(34250),o=(r(76506),r(91306),r(92143),r(59465)),a=r(17533),l=r(42911);r(86656),r(22723),r(31450),r(71552),r(40642),r(57251),r(81172),r(74673),r(21972),r(23639),r(91055),r(27794),r(6906),r(50406),r(60991);let u=i=class extends l.Z{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new i({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};(0,s._)([(0,n.Cb)({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(e,t,r){t[r]=[this.minValue||0,e]}}}})],u.prototype,"maxValue",void 0),(0,s._)([(0,n.Cb)({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[0]},write:{target:"range",writer(e,t,r){t[r]=[e,this.maxValue||0]}}}})],u.prototype,"minValue",void 0),(0,s._)([(0,o.e)({range:"range"})],u.prototype,"type",void 0),u=i=(0,s._)([(0,a.j)("esri.layers.support.RangeDomain")],u);var c=u},77361:(e,t,r)=>{r.d(t,{Z:()=>m});var i,s=r(29768),n=r(93314),o=r(59765),a=r(74673),l=r(76506),u=r(34250),c=(r(91306),r(92143),r(97714)),d=r(17533),p=r(2906);r(35197),r(21972),r(23639),r(86656),r(22723),r(91055),r(27794),r(6906),r(50406),r(60991),r(81172),r(71552),r(31450),r(40642),r(57251);let h=i=class extends a.a{constructor(e){super(e),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(e,t){return void 0!==t.respectsDaylightSaving?t.respectsDaylightSaving:void 0!==t.respectDaylightSaving&&t.respectDaylightSaving}clone(){const{respectsDaylightSaving:e,timezone:t}=this;return new i({respectsDaylightSaving:e,timezone:t})}};(0,s._)([(0,u.Cb)({type:Boolean,json:{write:!0}})],h.prototype,"respectsDaylightSaving",void 0),(0,s._)([(0,c.r)("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],h.prototype,"readRespectsDaylightSaving",null),(0,s._)([(0,u.Cb)({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],h.prototype,"timezone",void 0),h=i=(0,s._)([(0,d.j)("esri.layers.support.TimeReference")],h);var y,g=h;let f=y=class extends a.a{constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||2!==t.timeExtent.length)return null;const r=new Date(t.timeExtent[0]),i=new Date(t.timeExtent[1]);return new n.Z({start:r,end:i})}writeFullTimeExtent(e,t){e&&(0,l.i)(e.start)&&(0,l.i)(e.end)?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?new o.Z({value:t.timeInterval,unit:o.t.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new o.Z({value:t.defaultTimeInterval,unit:o.t.fromJSON(t.defaultTimeIntervalUnits)}):null}writeInterval(e,t){if(e){const r=e.toJSON();t.timeInterval=r.value,t.timeIntervalUnits=r.unit}else t.timeInterval=null,t.timeIntervalUnits=null}clone(){const{cumulative:e,endField:t,hasLiveData:r,interval:i,startField:s,timeReference:n,fullTimeExtent:o,trackIdField:a,useTime:u}=this;return new y({cumulative:e,endField:t,hasLiveData:r,interval:i,startField:s,timeReference:(0,l.d9)(n),fullTimeExtent:(0,l.d9)(o),trackIdField:a,useTime:u})}};(0,s._)([(0,u.Cb)({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],f.prototype,"cumulative",void 0),(0,s._)([(0,u.Cb)({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],f.prototype,"endField",void 0),(0,s._)([(0,u.Cb)({type:n.Z,json:{write:{enabled:!0,allowNull:!0}}})],f.prototype,"fullTimeExtent",void 0),(0,s._)([(0,c.r)("fullTimeExtent",["timeExtent"])],f.prototype,"readFullTimeExtent",null),(0,s._)([(0,p.w)("fullTimeExtent")],f.prototype,"writeFullTimeExtent",null),(0,s._)([(0,u.Cb)({type:Boolean,json:{write:!0}})],f.prototype,"hasLiveData",void 0),(0,s._)([(0,u.Cb)({type:o.Z,json:{write:{enabled:!0,allowNull:!0}}})],f.prototype,"interval",void 0),(0,s._)([(0,c.r)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],f.prototype,"readInterval",null),(0,s._)([(0,p.w)("interval")],f.prototype,"writeInterval",null),(0,s._)([(0,u.Cb)({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],f.prototype,"startField",void 0),(0,s._)([(0,u.Cb)({type:g,json:{write:{enabled:!0,allowNull:!0}}})],f.prototype,"timeReference",void 0),(0,s._)([(0,u.Cb)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],f.prototype,"trackIdField",void 0),(0,s._)([(0,u.Cb)({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],f.prototype,"useTime",void 0),f=y=(0,s._)([(0,d.j)("esri.layers.support.TimeInfo")],f);var m=f},31292:(e,t,r)=>{r.d(t,{Q:()=>F,Z:()=>k});var i,s=r(29768),n=r(74569),o=r(93314),a=r(57251),l=r(74673),u=r(76506),c=r(34250),d=r(86787),p=(r(92143),r(59465)),h=r(17533),y=r(2906),g=r(91306),f=r(32422),m=r(69218),b=r(21801),v=r(27207),_=r(60947),w=r(91597);r(73796),r(97714),r(71552),r(21972),r(23639),r(86656),r(22723),r(91055),r(27794),r(6906),r(50406),r(60991),r(81172),r(31450),r(40642),r(84069),r(35132),r(89623),r(44567),r(98380),r(92896),r(22781),r(35197),r(97546),r(9801),r(53523),r(42911),r(46826),r(45433),r(54732);const S=new a.J({upperLeft:"upper-left",lowerLeft:"lower-left"});let T=i=class extends l.a{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new i((0,u.d9)({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};(0,s._)([(0,c.Cb)({type:b.Z,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],T.prototype,"extent",void 0),(0,s._)([(0,c.Cb)({type:["view","edit"],json:{write:!0}})],T.prototype,"mode",void 0),(0,s._)([(0,c.Cb)({type:String,json:{read:S.read,write:S.write}})],T.prototype,"originPosition",void 0),(0,s._)([(0,c.Cb)({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],T.prototype,"tolerance",void 0),T=i=(0,s._)([(0,h.j)("esri.rest.support.QuantizationParameters")],T);var C,F=T;const x=new a.J({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),I=new a.J({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let j=C=class extends l.a{constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.datumTransformation=null,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}static from(e){return(0,g.k)(C,e)}castDatumTransformation(e){return"number"==typeof e||"object"==typeof e?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const r={};for(const t in e){const i=e[t];Array.isArray(i)?r[t]=i.map((e=>e instanceof Date?e.getTime():e)):i instanceof Date?r[t]=i.getTime():r[t]=i}t.parameterValues=r}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new C((0,u.d9)({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:(0,u.i)(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};j.MAX_MAX_RECORD_COUNT_FACTOR=5,(0,s._)([(0,c.Cb)({json:{write:!0}})],j.prototype,"aggregateIds",void 0),(0,s._)([(0,c.Cb)({type:Boolean,json:{write:!0}})],j.prototype,"cacheHint",void 0),(0,s._)([(0,c.Cb)({json:{write:!0}})],j.prototype,"datumTransformation",void 0),(0,s._)([(0,d.p)("datumTransformation")],j.prototype,"castDatumTransformation",null),(0,s._)([(0,c.Cb)({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],j.prototype,"distance",void 0),(0,s._)([(0,c.Cb)({type:m.D,json:{write:!0}})],j.prototype,"dynamicDataSource",void 0),(0,s._)([(0,c.Cb)({type:String,json:{write:!0}})],j.prototype,"formatOf3DObjects",void 0),(0,s._)([(0,c.Cb)({type:String,json:{write:!0}})],j.prototype,"gdbVersion",void 0),(0,s._)([(0,c.Cb)({types:n.qM,json:{read:f.im,write:!0}})],j.prototype,"geometry",void 0),(0,s._)([(0,c.Cb)({type:Number,json:{write:!0}})],j.prototype,"geometryPrecision",void 0),(0,s._)([(0,c.Cb)({type:[String],json:{write:!0}})],j.prototype,"groupByFieldsForStatistics",void 0),(0,s._)([(0,c.Cb)({type:String,json:{write:!0}})],j.prototype,"having",void 0),(0,s._)([(0,c.Cb)({type:Date})],j.prototype,"historicMoment",void 0),(0,s._)([(0,y.w)("historicMoment")],j.prototype,"writeHistoricMoment",null),(0,s._)([(0,c.Cb)({type:Number,json:{write:!0}})],j.prototype,"maxAllowableOffset",void 0),(0,s._)([(0,c.Cb)({type:Number,cast:e=>e<1?1:e>C.MAX_MAX_RECORD_COUNT_FACTOR?C.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],j.prototype,"maxRecordCountFactor",void 0),(0,s._)([(0,c.Cb)({type:["xyFootprint"],json:{write:!0}})],j.prototype,"multipatchOption",void 0),(0,s._)([(0,c.Cb)({type:Number,json:{read:{source:"resultRecordCount"}}})],j.prototype,"num",void 0),(0,s._)([(0,c.Cb)({json:{write:!0}})],j.prototype,"objectIds",void 0),(0,s._)([(0,c.Cb)({type:[String],json:{write:!0}})],j.prototype,"orderByFields",void 0),(0,s._)([(0,c.Cb)({type:[String],json:{write:!0}})],j.prototype,"outFields",void 0),(0,s._)([(0,c.Cb)({type:_.Z,json:{name:"outSR",write:!0}})],j.prototype,"outSpatialReference",void 0),(0,s._)([(0,c.Cb)({type:[v.Z],json:{write:{enabled:!0,overridePolicy(){return{enabled:(0,u.i)(this.outStatistics)&&this.outStatistics.length>0}}}}})],j.prototype,"outStatistics",void 0),(0,s._)([(0,c.Cb)({json:{write:!0}})],j.prototype,"parameterValues",void 0),(0,s._)([(0,y.w)("parameterValues")],j.prototype,"writeParameterValues",null),(0,s._)([(0,c.Cb)({type:w.Z,json:{write:!0}})],j.prototype,"pixelSize",void 0),(0,s._)([(0,c.Cb)({type:F,json:{write:!0}})],j.prototype,"quantizationParameters",void 0),(0,s._)([(0,c.Cb)({type:[Object],json:{write:!0}})],j.prototype,"rangeValues",void 0),(0,s._)([(0,c.Cb)({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],j.prototype,"relationParameter",void 0),(0,s._)([(0,c.Cb)({type:String,json:{write:!0}})],j.prototype,"resultType",void 0),(0,s._)([(0,c.Cb)({type:Boolean,json:{default:!1,write:!0}})],j.prototype,"returnCentroid",void 0),(0,s._)([(0,c.Cb)({type:Boolean,json:{default:!1,write:!0}})],j.prototype,"returnDistinctValues",void 0),(0,s._)([(0,c.Cb)({type:Boolean,json:{default:!0,write:!0}})],j.prototype,"returnExceededLimitFeatures",void 0),(0,s._)([(0,c.Cb)({type:Boolean,json:{write:!0}})],j.prototype,"returnGeometry",void 0),(0,s._)([(0,c.Cb)({type:Boolean,json:{default:!1,write:!0}})],j.prototype,"returnQueryGeometry",void 0),(0,s._)([(0,c.Cb)({type:Boolean,json:{default:!1,write:!0}})],j.prototype,"returnM",void 0),(0,s._)([(0,c.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],j.prototype,"returnZ",void 0),(0,s._)([(0,c.Cb)({type:_.Z,json:{write:!0}})],j.prototype,"sourceSpatialReference",void 0),(0,s._)([(0,p.e)(x,{ignoreUnknown:!1,name:"spatialRel"})],j.prototype,"spatialRelationship",void 0),(0,s._)([(0,c.Cb)({type:Number,json:{read:{source:"resultOffset"}}})],j.prototype,"start",void 0),(0,s._)([(0,y.w)("start"),(0,y.w)("num")],j.prototype,"writeStart",null),(0,s._)([(0,c.Cb)({type:String,json:{write:!0}})],j.prototype,"sqlFormat",void 0),(0,s._)([(0,c.Cb)({type:String,json:{write:!0}})],j.prototype,"text",void 0),(0,s._)([(0,c.Cb)({type:o.Z,json:{write:!0}})],j.prototype,"timeExtent",void 0),(0,s._)([(0,c.Cb)({type:Boolean,json:{default:!1,write:!0}})],j.prototype,"timeReferenceUnknownClient",void 0),(0,s._)([(0,p.e)(I,{ignoreUnknown:!1}),(0,c.Cb)({json:{write:{overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],j.prototype,"units",void 0),(0,s._)([(0,c.Cb)({type:String,json:{write:{overridePolicy(e){return{enabled:null!=e||this.start>0}}}}})],j.prototype,"where",void 0),(0,s._)([(0,y.w)("where")],j.prototype,"writeWhere",null),j=C=(0,s._)([(0,h.j)("esri.rest.support.Query")],j);var k=j},27207:(e,t,r)=>{r.d(t,{Z:()=>h});var i,s=r(29768),n=r(57251),o=r(74673),a=r(76506),l=r(34250),u=(r(91306),r(92143),r(17533)),c=r(2906);r(71552),r(21972),r(23639),r(86656),r(22723),r(91055),r(27794),r(6906),r(50406),r(60991),r(81172),r(31450),r(40642);const d=new n.J({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete"});let p=i=class extends o.a{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){"percentile-continuous"!==this.statisticType&&"percentile-discrete"!==this.statisticType||(t.statisticParameters=(0,a.d9)(e))}clone(){return new i({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:(0,a.d9)(this.statisticParameters)})}};(0,s._)([(0,l.Cb)({type:Number,json:{write:!0}})],p.prototype,"maxPointCount",void 0),(0,s._)([(0,l.Cb)({type:Number,json:{write:!0}})],p.prototype,"maxRecordCount",void 0),(0,s._)([(0,l.Cb)({type:Number,json:{write:!0}})],p.prototype,"maxVertexCount",void 0),(0,s._)([(0,l.Cb)({type:String,json:{write:!0}})],p.prototype,"onStatisticField",void 0),(0,s._)([(0,l.Cb)({type:String,json:{write:!0}})],p.prototype,"outStatisticFieldName",void 0),(0,s._)([(0,l.Cb)({type:String,json:{read:{source:"statisticType",reader:d.read},write:{target:"statisticType",writer:d.write}}})],p.prototype,"statisticType",void 0),(0,s._)([(0,l.Cb)({type:Object})],p.prototype,"statisticParameters",void 0),(0,s._)([(0,c.w)("statisticParameters")],p.prototype,"writeStatisticParameters",null),p=i=(0,s._)([(0,u.j)("esri.rest.support.StatisticDefinition")],p);var h=p}}]);