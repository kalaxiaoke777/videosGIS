"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[2883],{59765:(e,t,i)=>{i.d(t,{Z:()=>m,t:()=>u});var r=i(29768),s=i(74673),a=i(35197),n=i(34250),l=(i(76506),i(91306),i(92143),i(17533)),o=i(57251);i(21972),i(23639),i(86656),i(22723),i(91055),i(27794),i(6906),i(50406),i(60991),i(81172),i(71552),i(31450),i(40642);const u=(0,o.s)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});var p;let y=p=class extends s.a{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return(0,a.c)(this.value,this.unit,"milliseconds")}clone(){return new p({value:this.value,unit:this.unit})}};(0,r._)([(0,n.Cb)({type:Number,json:{write:!0},nonNullable:!0})],y.prototype,"value",void 0),(0,r._)([(0,n.Cb)({type:u.apiValues,json:{type:u.jsonValues,read:u.read,write:u.write},nonNullable:!0})],y.prototype,"unit",void 0),y=p=(0,r._)([(0,l.j)("esri.TimeInterval")],y);var m=y},19902:(e,t,i)=>{i.d(t,{T:()=>y});var r=i(29768),s=i(93314),a=i(59765),n=i(34250),l=(i(76506),i(91306),i(92143),i(97714)),o=i(17533),u=i(77361),p=i(14249);const y=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(e,t){const i=t.timeInfo.exportOptions;if(!i)return null;const r=i.timeOffset,s=a.t.fromJSON(i.timeOffsetUnits);return r&&s?new a.Z({value:r,unit:s}):null}set timeInfo(e){(0,p.UF)(e,this.fieldsIndex),this._set("timeInfo",e)}};return(0,r._)([(0,n.Cb)({type:s.Z,json:{write:!1}})],t.prototype,"timeExtent",void 0),(0,r._)([(0,n.Cb)({type:a.Z})],t.prototype,"timeOffset",void 0),(0,r._)([(0,l.r)("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),(0,r._)([(0,n.Cb)({value:null,type:u.Z,json:{write:!0,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),(0,r._)([(0,n.Cb)({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=(0,r._)([(0,o.j)("esri.layers.mixins.TemporalLayer")],t),t}},91162:(e,t,i)=>{i.d(t,{a:()=>o,l:()=>l});var r=i(41864),s=i(15324),a=i(22739),n=i(76506);async function l(e,t){return await e.load(),o(e,t)}async function o(e,t){const i=[],l=(...e)=>{for(const t of e)(0,n.b)(t)||(Array.isArray(t)?l(...t):s.Z.isCollection(t)?t.forEach((e=>l(e))):a.L.isLoadable(t)&&i.push(t))};t(l);let o=null;if(await(0,r.m)(i,(async e=>{var t;!1!==(await(0,r.r)((t=e,"loadAll"in t&&"function"==typeof t.loadAll?e.loadAll():e.load()))).ok||o||(o=e)})),o)throw o.loadError;return e}},69997:(e,t,i)=>{i.d(t,{a:()=>s});var r=i(53785);function s(e,t){const i=t||e.extent,s=e.width,a=(0,r.a)(i&&i.spatialReference);return i&&s?i.width/s*a*r.i*96:0}},62883:(e,t,i)=>{i.r(t),i.d(t,{default:()=>J});var r=i(29768),s=i(82058),a=i(93314),n=i(60991),l=i(95873),o=i(91162),u=i(76506),p=i(54179),y=i(50406),m=i(34250),d=i(91306),c=(i(92143),i(97714)),h=i(17533),v=i(2906),b=i(21972),g=i(21801),f=i(69997),w=i(41617),x=i(21781),S=i(81655),_=i(75025),T=i(11118),C=i(8547),I=i(89440),O=i(62162),E=i(16647),D=i(58912),j=i(19902),F=i(43022),L=i(20820),U=i(58142);const N={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let P=class extends((0,l.p)(b.Z)){constructor(e){super(e),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map((e=>{const t=(0,U.g)(this.floors,e);return e.toExportImageJSON(t)}));return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&(0,L.a)(this.visibleSublayers,this.layer.serviceSublayers,this.layer)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.allSublayers.on("change",(()=>this.notifyChange("visibleSublayers"))),e.on("sublayer-update",(e=>this.notifyChange(N[e.propertyName])))],"layer"))}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map((e=>e.id)).join(","):"show:-1":null}get layerDefs(){var e;const t=!(null==(e=this.floors)||!e.length),i=this.visibleSublayers.filter((e=>null!=e.definitionExpression||t&&null!=e.floorInfo));return i.length?JSON.stringify(i.reduce(((e,t)=>{const i=(0,U.g)(this.floors,t),r=(0,u.i)(i)?(0,U.c)(i,t):t.definitionExpression;return e[t.id]=r,e}),{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const t=this.layer.sublayers,i=t=>{const r=this.scale,s=0===r,a=0===t.minScale||r<=t.minScale,n=0===t.maxScale||r>=t.maxScale;t.visible&&(s||a&&n)&&(t.sublayers?t.sublayers.forEach(i):e.unshift(t))};t&&t.forEach(i);const r=this._get("visibleSublayers");return!r||r.length!==e.length||r.some(((t,i)=>e[i]!==t))?e:r}toJSON(){const e=this.layer;let t={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?t.dynamicLayers=this.dynamicLayers:t={...t,layers:this.layers,layerDefs:this.layerDefs},t}};(0,r._)([(0,m.Cb)({readOnly:!0})],P.prototype,"dynamicLayers",null),(0,r._)([(0,m.Cb)()],P.prototype,"floors",void 0),(0,r._)([(0,m.Cb)({readOnly:!0})],P.prototype,"hasDynamicLayers",null),(0,r._)([(0,m.Cb)()],P.prototype,"layer",null),(0,r._)([(0,m.Cb)({readOnly:!0})],P.prototype,"layers",null),(0,r._)([(0,m.Cb)({readOnly:!0})],P.prototype,"layerDefs",null),(0,r._)([(0,m.Cb)({type:Number})],P.prototype,"scale",void 0),(0,r._)([(0,m.Cb)(F.f)],P.prototype,"timeExtent",void 0),(0,r._)([(0,m.Cb)({readOnly:!0})],P.prototype,"version",null),(0,r._)([(0,m.Cb)({readOnly:!0})],P.prototype,"visibleSublayers",null),P=(0,r._)([(0,h.j)("esri.layers.mixins.ExportImageParameters")],P);var Z=i(9530);i(31450),i(71552),i(88762),i(32101),i(81172),i(40642),i(74673),i(86656),i(22723),i(27794),i(35197),i(23639),i(91055),i(6906),i(82933),i(15324),i(76996),i(617),i(41864),i(22739),i(20543),i(50161),i(73796),i(60947),i(91597),i(86787),i(35132),i(89623),i(53785),i(57251),i(95587),i(74569),i(84069),i(44567),i(98380),i(92896),i(22781),i(32422),i(82673),i(10738),i(22203),i(21132),i(38742),i(65949),i(54174),i(22465),i(65775),i(29794),i(5777),i(49900),i(66284),i(33921),i(3482),i(73173),i(67477),i(78533),i(74653),i(91091),i(58943),i(56420),i(74742),i(28239),i(59765),i(77361),i(14249),i(60217),i(1557),i(47842),i(17298),i(85557),i(34394),i(86748),i(29107),i(30574),i(2157),i(25977),i(7471),i(54414),i(59465),i(1648),i(8925),i(45154),i(16769),i(55531),i(30582),i(593),i(85699),i(63136),i(96055),i(47776),i(18033),i(6331),i(62048),i(4292),i(75626),i(72652),i(29641),i(30493),i(70821),i(34229),i(37029),i(55306),i(96467),i(63571),i(30776),i(48027),i(82426),i(63130),i(25696),i(66396),i(42775),i(95834),i(57150),i(76726),i(20444),i(76393),i(78548),i(2497),i(49906),i(46527),i(48649),i(30823),i(53326),i(92482),i(3101),i(5853),i(39141),i(48243),i(34635),i(10401),i(70737),i(8487),i(17817),i(90814),i(15459),i(61847),i(16796),i(16955),i(22401),i(77894),i(55187),i(8586),i(44509),i(69814),i(11305),i(62259),i(44790),i(5909),i(60669),i(48208),i(51589),i(65684),i(12158),i(74864),i(63683),i(94479),i(45702),i(51127),i(74071),i(51723),i(23243),i(51669),i(6090),i(3977),i(36741),i(11253),i(90319),i(38822),i(74057),i(23761),i(48190),i(94070),i(16218),i(9075),i(67541),i(71206),i(89241),i(91700),i(51979),i(32037),i(60698),i(90811),i(86758),i(95310),i(93939),i(238),i(71831),i(49500),i(20208),i(78303),i(53523),i(42911),i(46826),i(45433),i(46495),i(97546),i(9801),i(54732),i(77807),i(50203),i(30439),i(6941),i(2180),i(69218),i(31292),i(27207),i(78893);let k=class extends((0,T.B)((0,j.T)((0,D.S)((0,S.S)((0,S.A)((0,_.A)((0,I.O)((0,O.P)((0,p.M)((0,E.R)((0,x.A)((0,C.C)((0,l.p)(w.Z)))))))))))))){constructor(...e){super(...e),this.datesInUnknownTimezone=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.isReference=null,this.labelsVisible=!1,this.operationalLayerType="ArcGISMapServiceLayer",this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}load(e){const t=(0,u.i)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).catch(y.r9).then((()=>this._fetchService(t)))),Promise.resolve(this)}readImageFormat(e,t){const i=t.supportedImageFormatTypes;return i&&i.indexOf("PNG32")>-1?"png32":"png24"}writeSublayers(e,t,i,r){if(!this.loaded||!e)return;const s=e.slice().reverse().flatten((({sublayers:e})=>e&&e.toArray().reverse())).toArray();let a=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap.supportsDynamicLayers){const e=(0,b.n)(r.origin);if(3===e){const e=this.createSublayersForOrigin("service").sublayers;a=(0,L.s)(s,e,2)}else if(e>3){const e=this.createSublayersForOrigin("portal-item");a=(0,L.s)(s,e.sublayers,(0,b.n)(e.origin))}}const n=[],l={writeSublayerStructure:a,...r};let o=a;s.forEach((e=>{const t=e.write({},l);n.push(t),o=o||"user"===e.originOf("visible")})),n.some((e=>Object.keys(e).length>1))&&(t.layers=n),o&&(t.visibleLayers=s.filter((e=>e.visible)).map((e=>e.id)))}createExportImageParameters(e,t,i,r){const s=r&&r.pixelRatio||1;e&&this.version>=10&&(e=e.clone().shiftCentralMeridian());const a=new P({layer:this,floors:null==r?void 0:r.floors,scale:(0,f.a)({extent:e,width:t})*s}),n=a.toJSON();a.destroy();const l=!r||!r.rotation||this.version<10.3?{}:{rotation:-r.rotation},o=e&&e.spatialReference,u=o.wkid||JSON.stringify(o.toJSON());n.dpi*=s;const p={};if(null!=r&&r.timeExtent){const{start:e,end:t}=r.timeExtent.toJSON();p.time=e&&t&&e===t?""+e:`${null==e?"null":e},${null==t?"null":t}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(p.time="null,null");return{bbox:e&&e.xmin+","+e.ymin+","+e.xmax+","+e.ymax,bboxSR:u,imageSR:u,size:t+","+i,...n,...l,...p}}async fetchImage(e,t,i,r){var a;const l={responseType:"image",signal:null!=(a=null==r?void 0:r.signal)?a:null,query:{...this.parsedUrl.query,...this.createExportImageParameters(e,t,i,r),f:"image",...this.refreshParameters,...this.customParameters,token:this.apiKey}},o=this.parsedUrl.path+"/export";return null==l.query.dynamicLayers||this.capabilities.exportMap.supportsDynamicLayers?(0,s.default)(o,l).then((e=>e.data)).catch((e=>{if((0,y.D_)(e))throw e;throw new n.Z("mapimagelayer:image-fetch-error",`Unable to load image: ${o}`,{error:e})})):Promise.reject(new n.Z("mapimagelayer:dynamiclayer-not-supported",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:l.query}))}async fetchRecomputedExtents(e={}){const t={...e,query:{returnUpdates:!0,f:"json",...this.customParameters,token:this.apiKey}},{data:i}=await(0,s.default)(this.url,t),{extent:r,fullExtent:n,timeExtent:l}=i,o=r||n;return{fullExtent:o&&g.Z.fromJSON(o),timeExtent:l&&a.Z.fromJSON({start:l[0],end:l[1]})}}loadAll(){return(0,o.l)(this,(e=>{e(this.allSublayers)}))}async _fetchService(e){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl});const{data:t,ssl:i}=await(0,s.default)(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},signal:e});i&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=t,this.read(t,{origin:"service",url:this.parsedUrl})}};(0,r._)([(0,m.Cb)({type:Boolean})],k.prototype,"datesInUnknownTimezone",void 0),(0,r._)([(0,m.Cb)()],k.prototype,"dpi",void 0),(0,r._)([(0,m.Cb)()],k.prototype,"gdbVersion",void 0),(0,r._)([(0,m.Cb)()],k.prototype,"imageFormat",void 0),(0,r._)([(0,c.r)("imageFormat",["supportedImageFormatTypes"])],k.prototype,"readImageFormat",null),(0,r._)([(0,m.Cb)({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],k.prototype,"imageMaxHeight",void 0),(0,r._)([(0,m.Cb)({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],k.prototype,"imageMaxWidth",void 0),(0,r._)([(0,m.Cb)()],k.prototype,"imageTransparency",void 0),(0,r._)([(0,m.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],k.prototype,"isReference",void 0),(0,r._)([(0,m.Cb)({json:{read:!1,write:!1}})],k.prototype,"labelsVisible",void 0),(0,r._)([(0,m.Cb)({type:["ArcGISMapServiceLayer"]})],k.prototype,"operationalLayerType",void 0),(0,r._)([(0,m.Cb)({json:{read:!1,write:!1}})],k.prototype,"popupEnabled",void 0),(0,r._)([(0,m.Cb)()],k.prototype,"sourceJSON",void 0),(0,r._)([(0,m.Cb)({json:{write:{ignoreOrigin:!0}}})],k.prototype,"sublayers",void 0),(0,r._)([(0,v.w)("sublayers",{layers:{type:[Z.Z]},visibleLayers:{type:[d.I]}})],k.prototype,"writeSublayers",null),(0,r._)([(0,m.Cb)({type:["show","hide","hide-children"]})],k.prototype,"listMode",void 0),(0,r._)([(0,m.Cb)({json:{read:!1},readOnly:!0,value:"map-image"})],k.prototype,"type",void 0),(0,r._)([(0,m.Cb)(F.u)],k.prototype,"url",void 0),k=(0,r._)([(0,h.j)("esri.layers.MapImageLayer")],k);var J=k},77361:(e,t,i)=>{i.d(t,{Z:()=>b});var r,s=i(29768),a=i(93314),n=i(59765),l=i(74673),o=i(76506),u=i(34250),p=(i(91306),i(92143),i(97714)),y=i(17533),m=i(2906);i(35197),i(21972),i(23639),i(86656),i(22723),i(91055),i(27794),i(6906),i(50406),i(60991),i(81172),i(71552),i(31450),i(40642),i(57251);let d=r=class extends l.a{constructor(e){super(e),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(e,t){return void 0!==t.respectsDaylightSaving?t.respectsDaylightSaving:void 0!==t.respectDaylightSaving&&t.respectDaylightSaving}clone(){const{respectsDaylightSaving:e,timezone:t}=this;return new r({respectsDaylightSaving:e,timezone:t})}};(0,s._)([(0,u.Cb)({type:Boolean,json:{write:!0}})],d.prototype,"respectsDaylightSaving",void 0),(0,s._)([(0,p.r)("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],d.prototype,"readRespectsDaylightSaving",null),(0,s._)([(0,u.Cb)({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],d.prototype,"timezone",void 0),d=r=(0,s._)([(0,y.j)("esri.layers.support.TimeReference")],d);var c,h=d;let v=c=class extends l.a{constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||2!==t.timeExtent.length)return null;const i=new Date(t.timeExtent[0]),r=new Date(t.timeExtent[1]);return new a.Z({start:i,end:r})}writeFullTimeExtent(e,t){e&&(0,o.i)(e.start)&&(0,o.i)(e.end)?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?new n.Z({value:t.timeInterval,unit:n.t.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new n.Z({value:t.defaultTimeInterval,unit:n.t.fromJSON(t.defaultTimeIntervalUnits)}):null}writeInterval(e,t){if(e){const i=e.toJSON();t.timeInterval=i.value,t.timeIntervalUnits=i.unit}else t.timeInterval=null,t.timeIntervalUnits=null}clone(){const{cumulative:e,endField:t,hasLiveData:i,interval:r,startField:s,timeReference:a,fullTimeExtent:n,trackIdField:l,useTime:u}=this;return new c({cumulative:e,endField:t,hasLiveData:i,interval:r,startField:s,timeReference:(0,o.d9)(a),fullTimeExtent:(0,o.d9)(n),trackIdField:l,useTime:u})}};(0,s._)([(0,u.Cb)({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],v.prototype,"cumulative",void 0),(0,s._)([(0,u.Cb)({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],v.prototype,"endField",void 0),(0,s._)([(0,u.Cb)({type:a.Z,json:{write:{enabled:!0,allowNull:!0}}})],v.prototype,"fullTimeExtent",void 0),(0,s._)([(0,p.r)("fullTimeExtent",["timeExtent"])],v.prototype,"readFullTimeExtent",null),(0,s._)([(0,m.w)("fullTimeExtent")],v.prototype,"writeFullTimeExtent",null),(0,s._)([(0,u.Cb)({type:Boolean,json:{write:!0}})],v.prototype,"hasLiveData",void 0),(0,s._)([(0,u.Cb)({type:n.Z,json:{write:{enabled:!0,allowNull:!0}}})],v.prototype,"interval",void 0),(0,s._)([(0,p.r)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],v.prototype,"readInterval",null),(0,s._)([(0,m.w)("interval")],v.prototype,"writeInterval",null),(0,s._)([(0,u.Cb)({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],v.prototype,"startField",void 0),(0,s._)([(0,u.Cb)({type:h,json:{write:{enabled:!0,allowNull:!0}}})],v.prototype,"timeReference",void 0),(0,s._)([(0,u.Cb)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],v.prototype,"trackIdField",void 0),(0,s._)([(0,u.Cb)({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],v.prototype,"useTime",void 0),v=c=(0,s._)([(0,y.j)("esri.layers.support.TimeInfo")],v);var b=v}}]);