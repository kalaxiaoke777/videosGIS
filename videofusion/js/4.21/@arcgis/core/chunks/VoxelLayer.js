/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
import{_ as e}from"./tslib.es6.js";import t from"../core/Collection.js";import o from"../core/Handles.js";import{j as i}from"../core/lang.js";import{M as r}from"./MultiOriginJSONSupport.js";import{property as s}from"../core/accessorSupport/decorators/property.js";import{I as p}from"./ensureType.js";import"./Logger.js";import{subclass as n}from"../core/accessorSupport/decorators/subclass.js";import l from"../layers/Layer.js";import{O as a}from"./OperationalLayer.js";import{p as y,b as u}from"./commonProperties2.js";import{a as d}from"./JSONSupport.js";import{r as m}from"./collectionUtils.js";import c from"../Color.js";import"./ArrayPool.js";import"./Evented.js";import"../core/Accessor.js";import"./deprecate.js";import"./metadata.js";import"./handleUtils.js";import"./arrayUtils.js";import"../core/scheduling.js";import"../core/promiseUtils.js";import"../core/Error.js";import"./Message.js";import"./object.js";import"../config.js";import"./string.js";import"./ReadOnlyMultiOriginJSONSupport.js";import"../geometry.js";import"../geometry/Extent.js";import"../geometry/Geometry.js";import"./reader.js";import"../geometry/SpatialReference.js";import"./writer.js";import"../geometry/Point.js";import"../core/accessorSupport/decorators/cast.js";import"../geometry/support/webMercatorUtils.js";import"./Ellipsoid.js";import"../geometry/Multipoint.js";import"./zmUtils.js";import"../geometry/Polygon.js";import"./extentUtils.js";import"../geometry/Polyline.js";import"./typeUtils.js";import"./jsonMap.js";import"../geometry/support/jsonUtils.js";import"../request.js";import"../kernel.js";import"../core/urlUtils.js";import"./Identifiable.js";import"./Loadable.js";import"./Promise.js";import"../TimeExtent.js";import"./timeUtils.js";import"./persistableUrlUtils.js";import"../support/timeUtils.js";import"./ElevationInfo.js";import"../layers/support/fieldUtils.js";import"./arcadeOnDemand.js";import"./unitConversionUtils.js";import"./lengthUtils.js";import"./unitUtils.js";import"./projectionEllipsoid.js";import"./opacityUtils.js";import"./colorUtils.js";import"./mathUtils.js";import"./common.js";let h=class extends d{constructor(){super(...arguments),this.enabled=!0,this.label="",this.normal=null,this.point=null}};e([s({type:Boolean,json:{write:!0}})],h.prototype,"enabled",void 0),e([s({type:String,json:{write:!0}})],h.prototype,"label",void 0),e([s({type:[Number],json:{write:!0}})],h.prototype,"normal",void 0),e([s({type:[Number],json:{write:!0}})],h.prototype,"point",void 0),h=e([n("esri.layers.support.VoxelSlice")],h);var j=h;let v=class extends d{constructor(){super(...arguments),this.enabled=!0,this.href=null,this.id=null,this.label="",this.normal=null,this.point=null,this.sizeInPixel=null,this.slices=null,this.timeId=null,this.variableId=null}};e([s({type:Boolean,json:{default:!0,write:!0}})],v.prototype,"enabled",void 0),e([s({type:String,json:{write:!0}})],v.prototype,"href",void 0),e([s({type:p,json:{write:!0}})],v.prototype,"id",void 0),e([s({type:String,json:{write:!0}})],v.prototype,"label",void 0),e([s({type:[Number],json:{write:!0}})],v.prototype,"normal",void 0),e([s({type:[Number],json:{write:!0}})],v.prototype,"point",void 0),e([s({type:[p],json:{write:!0}})],v.prototype,"sizeInPixel",void 0),e([s({type:[j],json:{write:!0}})],v.prototype,"slices",void 0),e([s({type:p,json:{write:!0}})],v.prototype,"timeId",void 0),e([s({type:p,json:{write:!0}})],v.prototype,"variableId",void 0),v=e([n("esri.layers.support.VoxelSection")],v);var w=v;let b=class extends d{constructor(){super(...arguments),this.diffuseFactor=.5,this.specularFactor=.5}};e([s({type:Number,range:{min:0,max:1},json:{default:.5,write:!0}})],b.prototype,"diffuseFactor",void 0),e([s({type:Number,range:{min:0,max:1},json:{default:.5,write:!0}})],b.prototype,"specularFactor",void 0),b=e([n("esri.layers.support.VoxelSimpleShading")],b);var g=b;let S=class extends d{constructor(){super(...arguments),this.color=null,this.value=null,this.enabled=!0,this.label=""}};e([s({type:c,json:{type:[p],write:!0}})],S.prototype,"color",void 0),e([s({type:Number,json:{write:!0}})],S.prototype,"value",void 0),e([s({type:Boolean,json:{default:!0,write:!0}})],S.prototype,"enabled",void 0),e([s({type:String,json:{write:!0}})],S.prototype,"label",void 0),S=e([n("esri.layers.support.VoxelIsosurface")],S);var f=S;let x=class extends d{constructor(){super(...arguments),this.alpha=null,this.position=null}};e([s({type:Number,json:{write:!0}})],x.prototype,"alpha",void 0),e([s({type:Number,json:{write:!0}})],x.prototype,"position",void 0),x=e([n("esri.layers.support.VoxelAlphaStop")],x);var V=x;let N=class extends d{constructor(){super(...arguments),this.color=null,this.position=null}};e([s({type:c,json:{type:[p],write:!0}})],N.prototype,"color",void 0),e([s({type:Number,json:{write:!0}})],N.prototype,"position",void 0),N=e([n("esri.layers.support.VoxelColorStop")],N);var I=N;let T=class extends d{constructor(){super(...arguments),this.enabled=!1,this.range=null}};e([s({type:Boolean,json:{default:!1,write:!0}})],T.prototype,"enabled",void 0),e([s({type:[Number],json:{write:!0}})],T.prototype,"range",void 0),T=e([n("esri.layers.support.VoxelRangeFilter")],T);var z=T;let U=class extends d{constructor(e){super(e),this.interpolation=null,this.stretchRange=null,this.rangeFilter=null,this.colorStops=new t,this.alphaStops=new t}set colorStops(e){this._set("colorStops",m(e,this._get("colorStops"),t.ofType(I)))}set alphaStops(e){this._set("alphaStops",m(e,this._get("alphaStops"),t.ofType(V)))}};e([s({type:["linear","nearest"],json:{write:!0}})],U.prototype,"interpolation",void 0),e([s({type:[Number],json:{write:!0}})],U.prototype,"stretchRange",void 0),e([s({type:t.ofType(I),json:{write:!0}})],U.prototype,"colorStops",null),e([s({type:t.ofType(V),json:{write:!0}})],U.prototype,"alphaStops",null),e([s({type:z,json:{write:!0}})],U.prototype,"rangeFilter",void 0),U=e([n("esri.layers.support.VoxelTransferFunctionStyle")],U);var _=U;let L=class extends d{constructor(){super(...arguments),this.color=null,this.value=null,this.enabled=!0,this.label=null}};e([s({type:c,json:{type:[p],write:!0}})],L.prototype,"color",void 0),e([s({type:p,json:{write:!0}})],L.prototype,"value",void 0),e([s({type:Boolean,json:{default:!0,write:!0}})],L.prototype,"enabled",void 0),e([s({type:String,json:{write:!0}})],L.prototype,"label",void 0),L=e([n("esri.layers.support.VoxelUniqueValue")],L);var D=L;let F=class extends d{constructor(e){super(e),this.variableId=null,this.label=null,this.transferFunction=null,this.uniqueValues=new t,this.isosurfaces=new t}set uniqueValues(e){this._set("uniqueValues",m(e,this._get("uniqueValues"),t.ofType(D)))}set isosurfaces(e){this._set("isosurfaces",m(e,this._get("isosurfaces"),t.ofType(f)))}};e([s({type:p,json:{write:!0}})],F.prototype,"variableId",void 0),e([s({type:String,json:{write:!0}})],F.prototype,"label",void 0),e([s({type:_,json:{write:!0}})],F.prototype,"transferFunction",void 0),e([s({type:t.ofType(D),json:{write:!0}})],F.prototype,"uniqueValues",null),e([s({type:t.ofType(f),json:{write:!0}})],F.prototype,"isosurfaces",null),F=e([n("esri.layers.support.VoxelVariableStyle")],F);var B=F;let E=class extends d{constructor(){super(...arguments),this.enabled=!0,this.label="",this.normal=null,this.point=null}};e([s({type:Boolean,json:{default:!0,write:!0}})],E.prototype,"enabled",void 0),e([s({type:String,json:{write:!0}})],E.prototype,"label",void 0),e([s({type:[Number],json:{write:!0}})],E.prototype,"normal",void 0),e([s({type:[Number],json:{write:!0}})],E.prototype,"point",void 0),E=e([n("esri.layers.support.VoxelDynamicSection")],E);var O=E;let M=class extends d{constructor(e){super(e),this.volumeId=0,this.verticalExaggeration=1,this.exaggerationMode="scale-height",this.verticalOffset=0,this.currentTimeId=null,this.slices=new t,this.dynamicSections=new t}set slices(e){this._set("slices",m(e,this._get("slices"),t.ofType(j)))}set dynamicSections(e){this._set("dynamicSections",m(e,this._get("dynamicSections"),t.ofType(O)))}};e([s({type:p,json:{default:0,write:!0}})],M.prototype,"volumeId",void 0),e([s({type:Number,json:{default:1,write:!0}})],M.prototype,"verticalExaggeration",void 0),e([s({type:["scale-position","scale-height"],json:{default:"scale-height",write:!0}})],M.prototype,"exaggerationMode",void 0),e([s({type:Number,json:{default:0,write:!0}})],M.prototype,"verticalOffset",void 0),e([s({type:p,json:{read:!1}})],M.prototype,"currentTimeId",void 0),e([s({type:t.ofType(j),json:{write:!0}})],M.prototype,"slices",null),e([s({type:t.ofType(O),json:{write:!0}})],M.prototype,"dynamicSections",null),M=e([n("esri.layers.support.VoxelVolumeStyle")],M);var A=M;let q=class extends d{constructor(e){super(e),this.currentVariableId=-1,this.renderMode="volume",this.enableSlices=!0,this.enableSections=!0,this.enableDynamicSections=!0,this.enableIsosurfaces=!0,this.shading=null,this.volumeStyles=new t,this.variableStyles=new t}set volumeStyles(e){this._set("volumeStyles",m(e,this._get("volumeStyles"),t.ofType(A)))}set variableStyles(e){this._set("variableStyles",m(e,this._get("variableStyles"),t.ofType(B)))}};e([s({type:t.ofType(A),json:{write:!0}})],q.prototype,"volumeStyles",null),e([s({type:p,json:{write:{enabled:!0,isRequired:!0}}})],q.prototype,"currentVariableId",void 0),e([s({type:["volume","surfaces"],json:{write:!0}})],q.prototype,"renderMode",void 0),e([s({type:t.ofType(B),json:{write:!0}})],q.prototype,"variableStyles",null),e([s({type:Boolean,json:{write:!0}})],q.prototype,"enableSlices",void 0),e([s({type:Boolean,json:{write:!0}})],q.prototype,"enableSections",void 0),e([s({type:Boolean,json:{write:!0}})],q.prototype,"enableDynamicSections",void 0),e([s({type:Boolean,json:{write:!0}})],q.prototype,"enableIsosurfaces",void 0),e([s({type:g,json:{write:!0}})],q.prototype,"shading",void 0),q=e([n("esri.layers.support.VoxelStyle")],q);var P=q;let k=class extends d{constructor(){super(...arguments),this.continuity=null,this.hasNoData=null,this.noData=null,this.offset=null,this.scale=null,this.type=null}};e([s({type:String,json:{write:!0}})],k.prototype,"continuity",void 0),e([s({type:Boolean,json:{write:!0}})],k.prototype,"hasNoData",void 0),e([s({type:Number,json:{write:!0}})],k.prototype,"noData",void 0),e([s({type:Number,json:{write:!0}})],k.prototype,"offset",void 0),e([s({type:Number,json:{write:!0}})],k.prototype,"scale",void 0),e([s({type:String,json:{write:!0}})],k.prototype,"type",void 0),k=e([n("esri.layers.support.VoxelFormat")],k);var R=k;let W=class extends d{constructor(){super(...arguments),this.description="",this.originalFormat=null,this.renderingFormat=null,this.unit=null,this.volumeId=0}};e([s({type:Number,json:{write:!0}})],W.prototype,"id",void 0),e([s({type:String,json:{write:!0}})],W.prototype,"description",void 0),e([s({type:String,json:{write:!0}})],W.prototype,"name",void 0),e([s({type:R,json:{write:!0}})],W.prototype,"originalFormat",void 0),e([s({type:R,json:{write:!0}})],W.prototype,"renderingFormat",void 0),e([s({type:String,json:{write:!0}})],W.prototype,"unit",void 0),e([s({type:Number,json:{write:!0}})],W.prototype,"volumeId",void 0),W=e([n("esri.layers.support.VoxelVariable")],W);var C=W;let J=class extends d{constructor(){super(...arguments),this.values=null}};e([s({type:[Number],json:{write:!0}})],J.prototype,"values",void 0),J=e([n("esri.layers.support.VoxelIrregularSpacing")],J);var Z=J;let G=class extends d{constructor(){super(...arguments),this.scale=1,this.offset=0}};e([s({type:Number,json:{write:!0}})],G.prototype,"scale",void 0),e([s({type:Number,json:{write:!0}})],G.prototype,"offset",void 0),G=e([n("esri.layers.support.VoxelRegularSpacing")],G);var H=G;let K=class extends d{constructor(){super(...arguments),this.irregularSpacing=null,this.isPositiveUp=null,this.isWrappedDateLine=null,this.label=null,this.name=null,this.quantity=null,this.regularSpacing=null,this.size=0,this.unit=null}};e([s({type:Z,json:{write:!0}})],K.prototype,"irregularSpacing",void 0),e([s({type:Boolean,json:{write:!0}})],K.prototype,"isPositiveUp",void 0),e([s({type:Boolean,json:{write:!0}})],K.prototype,"isWrappedDateLine",void 0),e([s({type:String,json:{write:!0}})],K.prototype,"label",void 0),e([s({type:String,json:{write:!0}})],K.prototype,"name",void 0),e([s({type:String,json:{write:!0}})],K.prototype,"quantity",void 0),e([s({type:H,json:{write:!0}})],K.prototype,"regularSpacing",void 0),e([s({type:Number,json:{write:!0}})],K.prototype,"size",void 0),e([s({type:String,json:{write:!0}})],K.prototype,"unit",void 0),K=e([n("esri.layers.support.VoxelDimension")],K);var Q=K;let X=class extends d{constructor(){super(...arguments),this.id=null,this.dimensions=null}getZDimension(){if(!this.dimensions)return-1;if(!Array.isArray(this.dimensions))return-1;if(4!==this.dimensions.length)return-1;for(let e=2;e<4;++e)if(this.dimensions[e].size>0)return e;return-1}isVolumeValid(){return!!this.dimensions&&(!!Array.isArray(this.dimensions)&&(4===this.dimensions.length&&(!(this.dimensions[0].size<1||this.dimensions[1].size<1)&&-1!==this.getZDimension())))}};e([s({type:Number})],X.prototype,"id",void 0),e([s({type:[Q],json:{write:!0,origins:{service:{write:!1},"web-document":{write:!1},"portal-item":{write:!1}}}})],X.prototype,"dimensions",void 0),X=e([n("esri.layers.support.VoxelVolume")],X);var Y,$=X;let ee=Y=class extends d{constructor(){super(...arguments),this.apronWidth=1,this.brickSize=[32,32,32],this.maxLodLevel=0,this.nodeSize=[4,4,4]}isValid(){const e=new Y;return e.apronWidth===this.apronWidth&&e.maxLodLevel===this.maxLodLevel&&(!!this.brickSize&&(!!this.nodeSize&&(!(!Array.isArray(this.brickSize)||!Array.isArray(this.nodeSize))&&(3===this.brickSize.length&&3===this.nodeSize.length&&(32===this.brickSize[0]&&32===this.brickSize[1]&&32===this.brickSize[2]&&(4===this.nodeSize[0]&&4===this.nodeSize[1]&&4===this.nodeSize[2]))))))}};e([s({type:Number,json:{write:!0,read:!0}})],ee.prototype,"apronWidth",void 0),e([s({type:[Number],json:{write:!0,read:!0}})],ee.prototype,"brickSize",void 0),e([s({type:Number,json:{write:!0,read:!0}})],ee.prototype,"maxLodLevel",void 0),e([s({type:[Number],json:{write:!0,read:!0}})],ee.prototype,"nodeSize",void 0),ee=Y=e([n("esri.layers.support.VoxelVolumeIndex")],ee);var te=ee;let oe=class extends(a(r(l))){constructor(e){super(e),this.serviceRoot="",this.popupEnabled=!0,this.itemId=null,this.operationalLayerType="Voxel",this.legendEnabled=!0,this.title=null,this.url=null,this.sections=new t,this.style=null,this.opacity=1,this.variables=new t,this.volumes=new t,this.index=null,this.type="voxel",this.name=null,this._handles=new o}destroy(){this._handles=i(this._handles)}};e([s(y)],oe.prototype,"popupEnabled",void 0),e([s({type:String,json:{write:!0}})],oe.prototype,"itemId",void 0),e([s({type:["Voxel"]})],oe.prototype,"operationalLayerType",void 0),e([s(u)],oe.prototype,"legendEnabled",void 0),e([s({json:{write:!0}})],oe.prototype,"title",void 0),e([s({type:String,json:{write:!0}})],oe.prototype,"url",void 0),e([s({type:t.ofType(w),json:{write:!0,origins:{"web-scene":{name:"layerDefinition.sections",write:!0},service:{write:!1}}}})],oe.prototype,"sections",void 0),e([s({type:P,json:{write:!0,origins:{"web-scene":{name:"layerDefinition.style",write:!0},service:{write:!1}}}})],oe.prototype,"style",void 0),e([s({type:["show","hide"]})],oe.prototype,"listMode",void 0),e([s({type:Number,range:{min:0,max:1},nonNullable:!0,json:{read:!1,write:!1,origins:{"web-scene":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],oe.prototype,"opacity",void 0),e([s({type:t.ofType(C)})],oe.prototype,"variables",void 0),e([s({type:t.ofType($),json:{write:!1}})],oe.prototype,"volumes",void 0),e([s({type:te})],oe.prototype,"index",void 0),e([s({json:{read:!1},readOnly:!0})],oe.prototype,"type",void 0),e([s({readOnly:!0})],oe.prototype,"name",void 0),oe=e([n("esri.layers.VoxelLayer")],oe);var ie=oe;export{ie as default};
