/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
import{b as n}from"../core/lang.js";import{d as e}from"./unitUtils.js";import{e as t}from"../geometry/SpatialReference.js";function o(o,r,i){if(n(r)||n(i)||i.vcsWkid||t(r,i))return null;const s=e(r)/e(i);if(1===s)return null;switch(o){case"point":case"esriGeometryPoint":return n=>{return t=s,void((e=n)&&null!=e.z&&(e.z*=t));var e,t};case"polyline":case"esriGeometryPolyline":return n=>function(n,e){if(!n)return;for(const t of n.paths)for(const n of t)n.length>2&&(n[2]*=e)}(n,s);case"polygon":case"esriGeometryPolygon":return n=>function(n,e){if(!n)return;for(const t of n.rings)for(const n of t)n.length>2&&(n[2]*=e)}(n,s);case"multipoint":case"esriGeometryMultipoint":return n=>function(n,e){if(!n)return;for(const t of n.points)t.length>2&&(t[2]*=e)}(n,s);default:return null}}function r(n,e,t){if(null==n.hasM||n.hasZ)for(const n of e)for(const e of n)e.length>2&&(e[2]*=t)}function i(n,t,o){if(!n&&!t||!o)return;const r=e(o);s(n,o,r),s(t,o,r)}function s(n,e,t){if(n)for(const o of n)f(o.geometry,e,t)}function f(o,i,s){if(n(o)||!o.spatialReference||t(o.spatialReference,i))return;const f=e(o.spatialReference)/s;if(1!==f)if("x"in o)null!=o.z&&(o.z*=f);else if("rings"in o)r(o,o.rings,f);else if("paths"in o)r(o,o.paths,f);else if("points"in o&&(null==o.hasM||o.hasZ))for(const n of o.points)n.length>2&&(n[2]*=f)}export{o as g,i as u};
