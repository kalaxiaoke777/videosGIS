/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
import{_ as e}from"./tslib.es6.js";import{property as r}from"../core/accessorSupport/decorators/property.js";import"../core/lang.js";import"./ensureType.js";import"./Logger.js";import{subclass as t}from"../core/accessorSupport/decorators/subclass.js";import o from"../core/Error.js";import{s}from"./object.js";import{p as n}from"./parser.js";function a(e,r,t){try{return function(e){if(!e)return null;if(function(e){const r=e[0];if(!r)return!1;return"scale"in r}(e)){const r=[];for(const t of e)r.push({scale:t.scale,value:u(t.value)});return r}return u(e)}(e)}catch(e){t.messages&&t.messages.push(e)}return null}function i(e,r,t,o){try{const o=function(e){if(!e)return null;if("string"==typeof e)return c(e);const r=[];for(const{scale:t,value:o}of e)r.push({scale:t,value:c(o)});return r}(e);o&&s(t,o,r)}catch(e){o.messages&&o.messages.push(e)}}function c(e){if(!e)return null;const r=n(e);if(r.error)throw r.error;return r.effects.map((e=>e.toJSON()))}function u(e){if(!e||!e.length)return null;const r=[];for(const t of e){let e=[];switch(t.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":e=[l(t,"amount")];break;case"blur":e=[l(t,"radius","pt")];break;case"hue-rotate":e=[l(t,"angle","deg")];break;case"drop-shadow":e=[l(t,"xoffset","pt"),l(t,"yoffset","pt"),l(t,"blurRadius","pt"),f(t,"color")];break;case"bloom":e=[l(t,"strength"),l(t,"radius","pt"),l(t,"threshold")]}const o=`${t.type}(${e.filter(Boolean).join(" ")})`,s=n(o);if(s.error)throw s.error;r.push(o)}return r.join(" ")}function l(e,r,t){if(null==e[r])throw new o("effect:missing-parameter",`Missing parameter '${r}' in ${e.type} effect`,{effect:e});return t?e[r]+t:""+e[r]}function f(e,r){if(null==e[r])throw new o("effect:missing-parameter",`Missing parameter '${r}' in ${e.type} effect`,{effect:e});const t=e[r];return`rgba(${t[0]||0} ${t[1]||0} ${t[2]||0} ${t[3]/255||0})`}const p=o=>{let s=class extends o{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return e([r({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{default:"normal",read:!0,write:!0}}}})],s.prototype,"blendMode",void 0),e([r({json:{read:!1,write:!1,origins:{"web-map":{read:{reader:a},write:{writer:i}}}}})],s.prototype,"effect",void 0),s=e([t("esri.layers.mixins.BlendLayer")],s),s};export{p as B};
